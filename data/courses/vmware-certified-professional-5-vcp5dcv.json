{
  "description": "The VMware Certified Professional certification is the most highly recognized certification dealing specifically with virtualization technologies. VMware vSphere is the leading virtualization technology available today and is in use at most large organizations. The VMware Certified Professional â€“ Data Center Virtualization (VCP5-DCV) certification is tailored towards IT System Administrators who are looking to deploy and maintain VMware vSphere and its associated products (ESXi, VDP, vCOP, VMware Converter, etc) in their environment.",
  "descriptionMD": "",
  "length": "59667",
  "name": "VMware Certified Professional 5 VCP5-DCV",
  "practiceExam": false,
  "subtitle": "Data Center Virtualization",
  "tagUrl": "legacy",
  "topics": [
    {
      "episodes": [
        {
          "description": "The VMware Certified Professional certification is the most highly recognized certification dealing specifically with virtualization technologies. VMware vSphere is the leading virtualization technology available today and is in use at most large organizations. The VMware Certified Professional - Data Center Virtualization (VCP5-DCV) certification is tailored towards IT System Administrators who are looking to deploy and maintain VMware vSphere and its associated products (ESXi, VDP, vCOP, VMware Converter, etc) in their environment.",
          "length": "1015",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/001-Intro-to-VMWare-VCP5-DCV.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/001-Intro-to-VMWare-VCP5-DCV-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/001-Intro-to-VMWare-VCP5-DCV-sm.jpg",
          "title": "Overview of VMware VCP5-DCV",
          "transcript": "1\n00:00:00,617 --> 00:00:07,505\n[MUSIC]\n\n2\n00:00:07,505 --> 00:00:12,930\nLet's take a minute to look at the VMware\nCertified Professional certification.\n\n3\n00:00:12,930 --> 00:00:16,600\nThe VCP is one of the most well\nknown virtualization certifications\n\n4\n00:00:16,600 --> 00:00:18,230\nin the IT industry.\n\n5\n00:00:18,230 --> 00:00:21,700\nAs a result, when somebody says they're\ngonna go and get a certification\n\n6\n00:00:21,700 --> 00:00:25,100\nthat relates to virtualization,\nthis is normally the one that they go for.\n\n7\n00:00:25,100 --> 00:00:28,110\nIt is a little more complex and\na little bit different than the other\n\n8\n00:00:28,110 --> 00:00:32,650\ncertifications you might be used to, so I\nwanna make sure we talk about what it is,\n\n9\n00:00:32,650 --> 00:00:37,790\nwho it's targeted towards, and some of\nthe little caveats that go along with it.\n\n10\n00:00:37,790 --> 00:00:40,130\nFirst off,\nif you're not familiar with VMware,\n\n11\n00:00:40,130 --> 00:00:44,800\nVMware is a company that is the market\nleader in virtualization technologies.\n\n12\n00:00:44,800 --> 00:00:47,760\nIf you go to work for any medium, large,\n\n13\n00:00:47,760 --> 00:00:52,650\nor enterprise-sized organization, you\nwill find VMware virtualization products.\n\n14\n00:00:52,650 --> 00:00:55,280\nThey outnumber Microsoft Hyper-V and\n\n15\n00:00:55,280 --> 00:00:58,030\nCitrix XenServer by just\nastronomical amounts.\n\n16\n00:00:58,030 --> 00:01:02,220\nThey have a huge portion of the market\nshare, and there's a good reason for it.\n\n17\n00:01:02,220 --> 00:01:04,870\nTheir virtualization\nproducts are top-notch.\n\n18\n00:01:04,870 --> 00:01:07,290\nSo if you find yourself\nworking in that market,\n\n19\n00:01:07,290 --> 00:01:10,440\nthe VCP certification becomes\nvery attractive to you.\n\n20\n00:01:10,440 --> 00:01:13,870\nIt's a way to say that you\nknow how to implement and\n\n21\n00:01:13,870 --> 00:01:16,790\nmaintain VMware technologies and\ndo it successfully.\n\n22\n00:01:16,790 --> 00:01:20,780\nSo it is a hot topic,\ndefinitely a good entry on your resume,\n\n23\n00:01:20,780 --> 00:01:21,610\nif that's what you're looking for.\n\n24\n00:01:22,860 --> 00:01:27,560\nHowever, the VCP is targeted a little\ndifferently than a lot of certifications.\n\n25\n00:01:27,560 --> 00:01:31,480\nVCP is not designed for\nsomebody just getting started in IT,\n\n26\n00:01:31,480 --> 00:01:36,510\nor somebody who's just transitioning\ntheir career over or something like that.\n\n27\n00:01:36,510 --> 00:01:40,760\nVCP is designed for\npeople who are already entrenched in IT.\n\n28\n00:01:40,760 --> 00:01:43,680\nPeople who have already been working\nwith servers and workstations,\n\n29\n00:01:43,680 --> 00:01:47,780\nand are entering and already working\nin the virtualization market.\n\n30\n00:01:47,780 --> 00:01:53,310\nWe wanna show that you know the high level\nknowledge, the really important stuff,\n\n31\n00:01:53,310 --> 00:01:56,520\nas far as deploying this technology and\ndeploying it correctly.\n\n32\n00:01:58,390 --> 00:02:01,250\nFirst off, one thing we need to\nknow about the VCP is that there's\n\n33\n00:02:01,250 --> 00:02:02,590\nmore than one of them, all right?\n\n34\n00:02:02,590 --> 00:02:06,220\nIt used to be there was only a single VCP,\nthe VMware Certified Professional.\n\n35\n00:02:06,220 --> 00:02:07,610\nBut as the company grew and\n\n36\n00:02:07,610 --> 00:02:10,300\nthey added more products,\nthey started to branch it out.\n\n37\n00:02:10,300 --> 00:02:14,540\nSo when go to VMware's website, and you\ngo into their certification and training\n\n38\n00:02:14,540 --> 00:02:20,140\nsection, you'll find where the VCP is\nactually broken down into several chunks.\n\n39\n00:02:20,140 --> 00:02:24,520\nThere's the VCP Data Center\nVirtualization, or DCV.\n\n40\n00:02:24,520 --> 00:02:27,050\nThere's Cloud, End User Computing,\n\n41\n00:02:27,050 --> 00:02:31,150\nNetwork Virtualization, and\nCloud Application Platform.\n\n42\n00:02:31,150 --> 00:02:36,160\nThese are all different types of VCP,\nand you'll see them kind of\n\n43\n00:02:36,160 --> 00:02:40,390\nwritten over here where\nyou've got VCP5-DCV.\n\n44\n00:02:40,390 --> 00:02:42,490\nThat's the most common one right there.\n\n45\n00:02:42,490 --> 00:02:46,240\nThat's the VMware Certified Professional\nversion five,\n\n46\n00:02:46,240 --> 00:02:48,370\nDCV is Data Center Virtualization.\n\n47\n00:02:48,370 --> 00:02:53,160\nSo when most people say, yeah, I'm a VCP,\nthat's the one they're talking about.\n\n48\n00:02:53,160 --> 00:02:58,030\nBut you could also be VCP Cloud or\nNetwork Virtualization, or whatever.\n\n49\n00:02:58,030 --> 00:03:01,070\nYou could be one of these\nother certifications based on\n\n50\n00:03:01,070 --> 00:03:04,510\nwhat it is that you chose to do,\nwhat certification path you followed.\n\n51\n00:03:04,510 --> 00:03:09,553\nSo you can see VCP Cloud,\nhere's VCP5-DT, and login.\n\n52\n00:03:09,553 --> 00:03:12,988\nThese are all variations of that\nVMWare Certified Professional.\n\n53\n00:03:12,988 --> 00:03:17,346\nBut the most common one, that's\nthe one that we're gonna be recording\n\n54\n00:03:17,346 --> 00:03:22,286\nhere at ITProTV, and that's the VMware\nCertified Professional version five,\n\n55\n00:03:22,286 --> 00:03:24,480\nfor a data center virtualization.\n\n56\n00:03:25,610 --> 00:03:32,070\nNow with VCP version five, what VMware\ndid is they did something interesting,\n\n57\n00:03:32,070 --> 00:03:35,670\nand it makes this a little more\nchallenging than the other certifications.\n\n58\n00:03:35,670 --> 00:03:40,250\nMost of the time with ITProTV, you can\ncome here and you can watch our shows,\n\n59\n00:03:40,250 --> 00:03:44,940\nyou can learn everything that you need to\nknow, you can go and take the exam, and\n\n60\n00:03:44,940 --> 00:03:47,010\nyou can get certified, all right?\n\n61\n00:03:47,010 --> 00:03:49,230\nThis is going to be an exception.\n\n62\n00:03:49,230 --> 00:03:53,620\nWatching our show is not enough to be\nable to get the VCP certification.\n\n63\n00:03:53,620 --> 00:03:56,370\nWe're gonna cover all the topics,\nwe'll cover all the information and\n\n64\n00:03:56,370 --> 00:03:58,480\nhave you prepared to take that exam.\n\n65\n00:03:58,480 --> 00:04:01,600\nBut in order to take the exam,\n\n66\n00:04:01,600 --> 00:04:07,090\nVMware requires that you attend\ntheir official certification course.\n\n67\n00:04:07,090 --> 00:04:11,040\nSo the only people allowed to\ntake the exams are ones who\n\n68\n00:04:11,040 --> 00:04:15,560\nhave taken the course from VMware,\nfrom the actual company.\n\n69\n00:04:15,560 --> 00:04:19,940\nSo you might ask yourself,\nwhy are we even recording this at ITProTV?\n\n70\n00:04:19,940 --> 00:04:25,320\nAnd the reason is not everyone is\nlooking to get that certification.\n\n71\n00:04:25,320 --> 00:04:28,030\nMaybe you're looking to get\nthe requisite knowledge.\n\n72\n00:04:28,030 --> 00:04:29,920\nVMware is very common.\n\n73\n00:04:29,920 --> 00:04:33,090\nIt is very widely deployed\nout there in the real world.\n\n74\n00:04:33,090 --> 00:04:34,480\nSo maybe you wanna learn that.\n\n75\n00:04:34,480 --> 00:04:39,250\nBut the official VMware course,\nit costs over $4,000, it's a lot of money.\n\n76\n00:04:39,250 --> 00:04:42,880\nSo maybe you wanna get the knowledge\nwithout incurring that huge hit to your\n\n77\n00:04:42,880 --> 00:04:45,770\npocketbook, or\ngetting the certification isn't your goal.\n\n78\n00:04:45,770 --> 00:04:47,050\nOr maybe it is.\n\n79\n00:04:47,050 --> 00:04:51,150\nMaybe you already took the official VMware\ncourse, but it's been a little while since\n\n80\n00:04:51,150 --> 00:04:55,120\nyou took it and the information's getting\na little rusty, and you want a refresher.\n\n81\n00:04:55,120 --> 00:04:59,000\nWhatever your case is,\nthe ITProTV solution is a great one.\n\n82\n00:04:59,000 --> 00:05:03,950\nSo just bear in mind, if you want to get\nthe certification, if you want to go and\n\n83\n00:05:03,950 --> 00:05:05,930\nget those letters to put on your resume,\n\n84\n00:05:05,930 --> 00:05:09,170\nyou will have to take\nthe official course from VMware.\n\n85\n00:05:09,170 --> 00:05:11,890\nThere's no way around that,\nyou've got to do it.\n\n86\n00:05:12,900 --> 00:05:18,230\nOtherwise, our course, our VCP little\ntrack that we're gonna do here on ITProTV,\n\n87\n00:05:18,230 --> 00:05:19,930\nit covers all the same content.\n\n88\n00:05:19,930 --> 00:05:21,290\nWe cover every bit of it.\n\n89\n00:05:21,290 --> 00:05:23,550\nWe go through and we make sure\nthat you've got that knowledge.\n\n90\n00:05:23,550 --> 00:05:26,732\nIt's also a great supplement to\npeople who have taken the course.\n\n91\n00:05:26,732 --> 00:05:30,450\nAll right, so when you go on to\nthe certification site for VMware, and\n\n92\n00:05:30,450 --> 00:05:34,721\nyou go into that VCP5-DCV page,\nwhen you go into there,\n\n93\n00:05:34,721 --> 00:05:37,980\nit's gonna explain a few things to you.\n\n94\n00:05:37,980 --> 00:05:39,880\nFirst off,\nit's got the exam blueprint, and\n\n95\n00:05:39,880 --> 00:05:42,600\nthat's a great to thing to download\nbecause it's gonna tell you about\n\n96\n00:05:42,600 --> 00:05:46,190\nall the objectives that are on the exam,\nwhat the exam covers.\n\n97\n00:05:46,190 --> 00:05:48,900\nAnd it covers a lot of stuff.\n\n98\n00:05:48,900 --> 00:05:51,220\nBut before you even dive in there,\nyou have to make a choice.\n\n99\n00:05:51,220 --> 00:05:54,260\nThere's actually two exams,\nthey should both be here.\n\n100\n00:05:56,300 --> 00:05:58,140\nWell, they mention it here, but\n\n101\n00:05:58,140 --> 00:06:00,900\nthey don't actually mention it\nas far as the exam numbers.\n\n102\n00:06:00,900 --> 00:06:02,300\nBut there are two exams.\n\n103\n00:06:02,300 --> 00:06:09,810\nThere's the VCP550,\nis the official exam number, VCP550.\n\n104\n00:06:09,810 --> 00:06:13,910\nAnd another one that is the VCP510.\n\n105\n00:06:13,910 --> 00:06:18,210\nOne exam is for the older vSphere 5,\nand then the other exams is for\n\n106\n00:06:18,210 --> 00:06:20,445\nthe newer vSphere 5.5.\n\n107\n00:06:20,445 --> 00:06:24,752\nSo for the ITProTV show,\nwe're covering the vSphere 5.5.\n\n108\n00:06:24,752 --> 00:06:29,699\nThere's not a ton of difference between\nthe two, and there are some new features,\n\n109\n00:06:29,699 --> 00:06:33,910\nthings that were added in 5.5\nthat weren't there in 5.1.\n\n110\n00:06:33,910 --> 00:06:37,070\nBut as far as the base functionality,\nthey're very much the same,\n\n111\n00:06:37,070 --> 00:06:38,240\nvery similar products.\n\n112\n00:06:38,240 --> 00:06:40,350\nSo we're just gonna go with the newest,\n\n113\n00:06:40,350 --> 00:06:43,700\nbecause why cover the old\nstuff when new stuff is out?\n\n114\n00:06:43,700 --> 00:06:44,980\nSo we're gonna be doing vSphere 5.5.\n\n115\n00:06:44,980 --> 00:06:48,624\nSo when you sign up for the exam,\nif you've taken the official course,\n\n116\n00:06:48,624 --> 00:06:53,210\nyou know which one you need to do, whether\nit's VCP510 or VCP550, based on that.\n\n117\n00:06:53,210 --> 00:06:58,891\nBut you'll notice right here, even right\nhere on this page if we scroll down,\n\n118\n00:06:58,891 --> 00:07:03,711\nit's got what you need to do to\ntake the VCP510 or 550 exams,\n\n119\n00:07:03,711 --> 00:07:06,050\nand it lists it right here.\n\n120\n00:07:06,050 --> 00:07:09,910\nIf you are just starting with\nVMware Data Center Virtualization,\n\n121\n00:07:09,910 --> 00:07:12,950\ntraining courses required, all right?\n\n122\n00:07:12,950 --> 00:07:17,340\nYou are required to take the VMware\nvSphere Install, Configure, and\n\n123\n00:07:17,340 --> 00:07:20,960\nManage, or the Fast Track,\nor Optimize and Scale.\n\n124\n00:07:20,960 --> 00:07:26,045\nYou can take any one of these courses\nto qualify to take the actual exam.\n\n125\n00:07:26,045 --> 00:07:29,815\nBut if you haven't taken one of\nthese official courses from VMware,\n\n126\n00:07:29,815 --> 00:07:31,913\nyou're not allowed to register for\nthe exam.\n\n127\n00:07:31,913 --> 00:07:33,595\nI can't emphasize that enough,\n\n128\n00:07:33,595 --> 00:07:36,340\nI wanna make sure everybody's\nexpectations are set.\n\n129\n00:07:36,340 --> 00:07:40,910\nHowever, maybe you took the VMware\nvSphere Troubleshooting Workshop.\n\n130\n00:07:40,910 --> 00:07:44,170\nIf you did that one,\nyou can go and take the exam.\n\n131\n00:07:45,210 --> 00:07:48,000\nBut that means you didn't take Install,\nConfigure, and Manage, and\n\n132\n00:07:48,000 --> 00:07:50,312\nthat's what we're going to\nbe doing here in this show.\n\n133\n00:07:50,312 --> 00:07:52,990\nAnd so that's another place\nwhere ITProTV can come in.\n\n134\n00:07:52,990 --> 00:07:55,630\nWe can supplement that knowledge so\nyou don't have to go in and\n\n135\n00:07:55,630 --> 00:07:57,600\ntake multiple courses\nif you don't need to.\n\n136\n00:07:59,090 --> 00:08:00,530\nBut there is no way around that.\n\n137\n00:08:00,530 --> 00:08:03,560\nYou've got to do the training course.\n\n138\n00:08:03,560 --> 00:08:05,284\nNow there is one exception to that,\nI suppose,\n\n139\n00:08:05,284 --> 00:08:07,430\nI shouldn't say there's no way around it.\n\n140\n00:08:07,430 --> 00:08:12,130\nIf you already have your VCP\ncertification, when you get certified,\n\n141\n00:08:12,130 --> 00:08:15,000\nyou have to re-certify every two years.\n\n142\n00:08:15,000 --> 00:08:19,300\nSo once you've got the cert, you can't\njust kick back and rest on your laurels.\n\n143\n00:08:19,300 --> 00:08:20,880\nEvery two years you've got to re-certify,\n\n144\n00:08:20,880 --> 00:08:25,620\nand the way you re-certify\nis by taking the exam again.\n\n145\n00:08:25,620 --> 00:08:28,370\nNow you don't have to\ntake the course again,\n\n146\n00:08:28,370 --> 00:08:30,490\nyou just have to take the exam again.\n\n147\n00:08:30,490 --> 00:08:34,920\nAnd so if you're re-certifying under 5.5,\nwell, our show will work great for you.\n\n148\n00:08:34,920 --> 00:08:36,280\nYou don't have to take the course again.\n\n149\n00:08:36,280 --> 00:08:38,370\nYou can watch our show,\ngo and take that exam.\n\n150\n00:08:39,960 --> 00:08:42,700\nWell, let's talk a little\nbit about the exam itself.\n\n151\n00:08:42,700 --> 00:08:47,050\nOn the exam certification page, you'll see\nwhere you can download the blueprint, and\n\n152\n00:08:47,050 --> 00:08:47,790\nthe blueprint,\n\n153\n00:08:47,790 --> 00:08:52,610\nit actually has a full exam guide that\ntells you all about the examination.\n\n154\n00:08:52,610 --> 00:08:53,600\nI've got it pulled up here.\n\n155\n00:08:54,630 --> 00:08:58,860\nAnd it starts off by giving you some\nbasic general information about the exam,\n\n156\n00:08:58,860 --> 00:09:02,702\nand then it jumps right\ninto the exam objectives.\n\n157\n00:09:02,702 --> 00:09:04,640\nWhat's gonna be covered on the exam,\n\n158\n00:09:04,640 --> 00:09:07,770\nwhat you can expect that test\nquestion to be made up from.\n\n159\n00:09:08,860 --> 00:09:10,735\nBut the exam itself is really\npretty straightforward.\n\n160\n00:09:10,735 --> 00:09:13,210\nIt's a predominantly multiple choice exam.\n\n161\n00:09:13,210 --> 00:09:14,760\nThere are some pictorial and\n\n162\n00:09:14,760 --> 00:09:17,590\nsimulation questions, but for\nthe most part it's multiple choice.\n\n163\n00:09:17,590 --> 00:09:19,560\nAnd it's made up of 135 questions.\n\n164\n00:09:21,130 --> 00:09:26,190\nIt's 135 questions, and\nyou get two hours, 120 minutes.\n\n165\n00:09:26,190 --> 00:09:30,350\nSo you need to be answering questions\nquickly, less than a minute per question.\n\n166\n00:09:30,350 --> 00:09:33,360\nSo it's not an exam you want to\ndally on if you can avoid it.\n\n167\n00:09:33,360 --> 00:09:36,680\nYou wanna answer those questions and\nmove forward, all right.\n\n168\n00:09:36,680 --> 00:09:39,410\nIt's graded on a scale from 100 to 500.\n\n169\n00:09:39,410 --> 00:09:41,198\nThe lowest score you can get is a 100.\n\n170\n00:09:41,198 --> 00:09:42,803\nThe highest score you can get is a 500.\n\n171\n00:09:42,803 --> 00:09:45,221\nA 300 is passing.\n\n172\n00:09:45,221 --> 00:09:49,170\nSo you need to score at least\na 300 to get the certification.\n\n173\n00:09:50,570 --> 00:09:54,320\nNow when you're in there taking that exam,\nit's pretty straightforward.\n\n174\n00:09:54,320 --> 00:09:56,866\nThere is a short little survey at\nthe beginning, I think it's seven or\n\n175\n00:09:56,866 --> 00:09:57,958\neight questions you answer.\n\n176\n00:09:57,958 --> 00:10:01,433\nAnd then it goes right into it,\nand you answer your 135 questions.\n\n177\n00:10:01,433 --> 00:10:02,913\nIt's computer-scored,\n\n178\n00:10:02,913 --> 00:10:07,530\nso you'll know right at the end of\nexam whether you've passed or failed.\n\n179\n00:10:07,530 --> 00:10:11,310\nThe exam's administered by Pearson VUE,\nso if you wanna take the exam,\n\n180\n00:10:11,310 --> 00:10:14,550\nyou actually go to Pearson VUE's\nwebsite to register for it.\n\n181\n00:10:14,550 --> 00:10:19,230\nBut before you can even register, if I go\nback here, this is the VMware page again.\n\n182\n00:10:19,230 --> 00:10:22,710\nAnd so I'm looking at\nthe certification benefits and\n\n183\n00:10:22,710 --> 00:10:26,100\nother information here,\nwhat you need to do to get certified.\n\n184\n00:10:26,100 --> 00:10:28,470\nAnd then you've got down\nhere under Prepare for Exam,\n\n185\n00:10:28,470 --> 00:10:31,080\nyou've got the exam blueprint,\nstudy guide, and practice.\n\n186\n00:10:31,080 --> 00:10:32,620\nSo, you've got various things.\n\n187\n00:10:32,620 --> 00:10:36,830\nWhen you get down here to exam\nregistration though, if we go to register,\n\n188\n00:10:36,830 --> 00:10:39,570\nyou'll see it'll tell you about\nthe two exams, VCP550 and VCP510,\n\n189\n00:10:39,570 --> 00:10:43,590\nand you've got Download\nthe Exam Blueprint,\n\n190\n00:10:43,590 --> 00:10:47,910\nthat's what I was looking at a moment ago,\nand request authorization.\n\n191\n00:10:47,910 --> 00:10:49,210\nThat's that key piece.\n\n192\n00:10:49,210 --> 00:10:51,670\nYou can't just go to Pearson VUE and\ntake the exam.\n\n193\n00:10:51,670 --> 00:10:53,590\nYou've got to, oh, I'm not logged in.\n\n194\n00:10:53,590 --> 00:10:56,510\nYou've got to request authorization first.\n\n195\n00:10:56,510 --> 00:11:00,420\nAnd basically what you're doing is you're\nsaying hey, I took the official course,\n\n196\n00:11:00,420 --> 00:11:04,560\nhere's my registration information,\ncan I please sign up with Pearson?\n\n197\n00:11:04,560 --> 00:11:09,040\nAnd they'll give you a code, and you call\nup Pearson or you go to their website,\n\n198\n00:11:09,040 --> 00:11:11,360\nand you'll present that code to\nbe able to register for the exam.\n\n199\n00:11:11,360 --> 00:11:12,190\nExam.\nAll right, so\n\n200\n00:11:12,190 --> 00:11:15,380\nthat's a key,\nimportant part of the process there.\n\n201\n00:11:16,450 --> 00:11:19,530\nAnd don't think poorly of VMware\nbecause they have this restriction.\n\n202\n00:11:19,530 --> 00:11:20,710\nThey do it for a reason.\n\n203\n00:11:20,710 --> 00:11:25,380\nThey want to ensure that everyone who\ntakes that exam has the same experience,\n\n204\n00:11:25,380 --> 00:11:27,210\nthe same training before they go in.\n\n205\n00:11:27,210 --> 00:11:30,070\nAnd they wanna be very tightly\ncontrolled in that training.\n\n206\n00:11:30,070 --> 00:11:31,620\nAll of companies aren't like that.\n\n207\n00:11:31,620 --> 00:11:33,860\nMicrosoft, Cisco, CompTIA.\n\n208\n00:11:33,860 --> 00:11:36,880\nThey don't care who you take the course\nfrom or what course you use, or\n\n209\n00:11:36,880 --> 00:11:40,420\nwhether you studied from a book, whether\nyou have hands on, they don't care.\n\n210\n00:11:40,420 --> 00:11:42,920\nJust as long as you go in and\npass that exam, right.\n\n211\n00:11:42,920 --> 00:11:45,863\nBut VMware wants to ensure that everyone\ngets the same level of training and\n\n212\n00:11:45,863 --> 00:11:46,430\nexcellence.\n\n213\n00:11:46,430 --> 00:11:48,868\nAnd they do that by very,\nvery tightly controlling it.\n\n214\n00:11:48,868 --> 00:11:50,940\nSo that's why they do it.\n\n215\n00:11:52,180 --> 00:11:54,280\nAll right, but\nif you've taken any of those courses,\n\n216\n00:11:54,280 --> 00:11:56,580\nthen you can request authorization,\nyou'll get it.\n\n217\n00:11:56,580 --> 00:11:58,840\nYou go and take the exam, you pass it, and\n\n218\n00:11:58,840 --> 00:12:02,319\nyou're now a VMware Certified Professional\nfor Data Center Virtualization.\n\n219\n00:12:04,022 --> 00:12:04,560\nAll right, so for\n\n220\n00:12:04,560 --> 00:12:07,780\nour show, we're gonna be running through\nall the content that's on the exam.\n\n221\n00:12:07,780 --> 00:12:09,507\nAnd if we take a look\nat that exam blueprint,\n\n222\n00:12:09,507 --> 00:12:12,605\nit runs through some of the major areas\nthat a lot of us are gonna have to tackle.\n\n223\n00:12:12,605 --> 00:12:16,987\nBasically, we start out with simple things\nlike just getting the thing installed,\n\n224\n00:12:16,987 --> 00:12:18,477\nthat's kind of important.\n\n225\n00:12:18,477 --> 00:12:23,706\nSo we're gonna see getting the V Center\ninstalled, and getting VMware,\n\n226\n00:12:23,706 --> 00:12:29,880\nvSphere, the Hypervisor ESX, getting it\ninstalled, and our basic configuration.\n\n227\n00:12:29,880 --> 00:12:33,000\nThat's really what\nobjective one is all about.\n\n228\n00:12:33,000 --> 00:12:36,360\nFrom there it moves into Objective two,\nwhich is the networking side.\n\n229\n00:12:36,360 --> 00:12:40,260\nIt used to be that virtualization\nnetworking was a really simple thing, but\n\n230\n00:12:40,260 --> 00:12:43,440\nVMware has released some really,\nreally cool stuff,\n\n231\n00:12:43,440 --> 00:12:48,620\nlike distributed virtual switches, which\nare awesome, which makes them complex.\n\n232\n00:12:48,620 --> 00:12:51,440\nAnd so in Objective two,\nwe take a look at how we plan and\n\n233\n00:12:51,440 --> 00:12:55,229\nconfigure the networking\npiece inside of vSphere.\n\n234\n00:12:56,810 --> 00:13:00,080\nThen in section three,\nwe start to take a look at storage.\n\n235\n00:13:00,080 --> 00:13:02,990\nVMware supports a lot of different\ntypes of storages, local storage,\n\n236\n00:13:02,990 --> 00:13:04,360\ndirect attached storage.\n\n237\n00:13:04,360 --> 00:13:07,980\nThere's fiber channel SANs,\nthere's iSCSI storage,\n\n238\n00:13:07,980 --> 00:13:11,410\nthere's remote fiber channel SANs,\nall sorts of different things.\n\n239\n00:13:11,410 --> 00:13:14,670\nAnd so we'll take a look at what's\ninvolved, and getting those set up,\n\n240\n00:13:14,670 --> 00:13:18,219\nand how they work, and how we can use\nthem to store our virtual machines.\n\n241\n00:13:19,680 --> 00:13:21,240\nThen we get into section four.\n\n242\n00:13:21,240 --> 00:13:23,990\nIt's how we deal with\nthe virtual machines themselves.\n\n243\n00:13:23,990 --> 00:13:26,600\nThe first three sections are really just\nabout setting up your infrastructure.\n\n244\n00:13:26,600 --> 00:13:28,640\nWe haven't even created\na virtual machine yet.\n\n245\n00:13:28,640 --> 00:13:31,500\nSo in section four,\nwe take a look at those VMs.\n\n246\n00:13:31,500 --> 00:13:33,080\nWhen we create virtual machines,\n\n247\n00:13:33,080 --> 00:13:37,120\nthe guest operating systems that are\nrunning on our virtualization platform.\n\n248\n00:13:37,120 --> 00:13:40,100\nAnd we also talked a little bit\nabout V apps, virtual apps, and\n\n249\n00:13:40,100 --> 00:13:43,370\nthis is where the applications\nthemselves can be tracked, managed,\n\n250\n00:13:43,370 --> 00:13:45,340\nand failed over inside of VMware.\n\n251\n00:13:45,340 --> 00:13:49,660\nSo we get a chance to see a lot of that.\n\n252\n00:13:49,660 --> 00:13:53,400\nAll right, once we get past that,\nyou've got section five,\n\n253\n00:13:53,400 --> 00:13:55,980\nwhich is Establishing and\nMaintaining Service Levels.\n\n254\n00:13:55,980 --> 00:13:59,820\nWhen you've got everything set up,\nhow do you keep it up and running?\n\n255\n00:13:59,820 --> 00:14:04,670\nWe need to keep it running healthy, and we\nneed to spot problems before they occur,\n\n256\n00:14:04,670 --> 00:14:05,920\nand that's what this section is about.\n\n257\n00:14:05,920 --> 00:14:10,050\nWe take a look at VMware clusters for\ndoing failover and high availability, and\n\n258\n00:14:10,050 --> 00:14:14,580\na few other neat little tools that we have\ninside of VMware to provide that reliable\n\n259\n00:14:14,580 --> 00:14:17,900\ninfrastructure that we need, because\nwe depend on these platforms more and\n\n260\n00:14:17,900 --> 00:14:18,920\nmore as time goes on.\n\n261\n00:14:20,220 --> 00:14:22,570\nAnd then is section six,\nwe've got our troubleshooting.\n\n262\n00:14:22,570 --> 00:14:25,360\nSometimes things don't work the way\nthat we expect them to, and so\n\n263\n00:14:25,360 --> 00:14:27,070\nwe've gotta go and find out why.\n\n264\n00:14:27,070 --> 00:14:28,170\nSection six tackles that.\n\n265\n00:14:28,170 --> 00:14:33,420\nWe just go and look for the issues, run a\nstandardized troubleshooting methodology,\n\n266\n00:14:33,420 --> 00:14:35,880\nfind the problem, fix it, and\nget ourselves back and running.\n\n267\n00:14:35,880 --> 00:14:39,780\nYou know, step one is just to get\nyour services back to operational.\n\n268\n00:14:39,780 --> 00:14:42,510\nStep two is to fix the problem and\nget your system back to 100%.\n\n269\n00:14:42,510 --> 00:14:45,440\nSo we run through that process and\nget a chance to see it.\n\n270\n00:14:47,282 --> 00:14:51,080\nAll right, section seven is just\nmonitoring the implementation.\n\n271\n00:14:51,080 --> 00:14:54,450\nSo once it's up and running,\nhow do we keep an eye on performance and\n\n272\n00:14:54,450 --> 00:14:55,030\nother things?\n\n273\n00:14:55,030 --> 00:14:58,020\nSo that's what we talk about here,\nmonitoring the big four, disk,\n\n274\n00:14:58,020 --> 00:15:02,800\nmemory, network, and CPU,\nmonitoring that utilization, and\n\n275\n00:15:02,800 --> 00:15:05,420\nmaking sure that our hardware\nis not being over subscribed.\n\n276\n00:15:05,420 --> 00:15:08,650\nWe don't wanna overtax our hardware,\nit'll result in poor performance.\n\n277\n00:15:11,180 --> 00:15:13,810\nSo those are the main\nobjectives right there, and\n\n278\n00:15:13,810 --> 00:15:17,130\nthen after you've learned all that\ninformation you're ready to go and\n\n279\n00:15:17,130 --> 00:15:21,022\ntake that VCP5 exam,\nthe VCP550 is what we're gonna cover.\n\n280\n00:15:21,022 --> 00:15:24,990\nAll right, let's see,\nwhat else do I have to mention here?\n\n281\n00:15:24,990 --> 00:15:27,040\nI mentioned the re-cert,\nwhich is important.\n\n282\n00:15:27,040 --> 00:15:30,160\nEvery two years you've\ngot to repeat the exam.\n\n283\n00:15:30,160 --> 00:15:34,840\nIf you attempt the exam and you do not\npass, there is a seven day waiting period.\n\n284\n00:15:34,840 --> 00:15:37,680\nYou have to wait a week before\nyou can take the exam again.\n\n285\n00:15:37,680 --> 00:15:42,340\nNot too bad, but they do make you pause,\nnot just jump right back in.\n\n286\n00:15:42,340 --> 00:15:46,820\nAnd the reason they do that is not\nto be annoying, but because you can,\n\n287\n00:15:46,820 --> 00:15:50,230\neven unintentionally,\nyou can memorize questions on the exam.\n\n288\n00:15:50,230 --> 00:15:53,325\nSo if you go right back in and take it\nthe next day, a lot of those questions\n\n289\n00:15:53,325 --> 00:15:56,865\nare fresh in your mind and\nyou can move a lot faster because of it.\n\n290\n00:15:56,865 --> 00:15:58,545\nSo they make you wait a week,\n\n291\n00:15:58,545 --> 00:16:02,889\njust to ensure that short-term\nmemory isn't kicking in there, and\n\n292\n00:16:02,889 --> 00:16:05,355\nit kinda takes that advantage away\nthat you might get from that.\n\n293\n00:16:07,600 --> 00:16:09,150\nBut that's basically it.\n\n294\n00:16:09,150 --> 00:16:13,769\nThe VCP, the VMware Certified\nProfessional, especially the VCP5-DCV,\n\n295\n00:16:13,769 --> 00:16:15,410\nvery good certification.\n\n296\n00:16:15,410 --> 00:16:17,340\nIt all looks great on your resume.\n\n297\n00:16:17,340 --> 00:16:19,650\nDoes show that you really know VMware.\n\n298\n00:16:19,650 --> 00:16:22,330\nHow it works and how to support\nit in an enterprise environment.\n\n299\n00:16:22,330 --> 00:16:23,940\nAnd it's a very good skill to have.\n\n300\n00:16:23,940 --> 00:16:29,430\nSo, whether you plan to take the exam or\nnot, it's still great knowledge to have.\n\n301\n00:16:29,430 --> 00:16:31,310\nSo I encourage you guys\nto sit through the show.\n\n302\n00:16:31,310 --> 00:16:34,010\nWe're gonna cover some\nreally good stuff there.\n\n303\n00:16:34,010 --> 00:16:35,825\nIt is very common in the real world.\n\n304\n00:16:35,825 --> 00:16:40,755\nHyper-V is nice, XenServer is nice,\nbut VMware, it's the top dog.\n\n305\n00:16:40,755 --> 00:16:42,541\nIt's the market leader in this area,\nand so\n\n306\n00:16:42,541 --> 00:16:44,777\nyou definitely wanna have\nthat skill in your toolkit.\n\n307\n00:16:44,777 --> 00:16:46,971\nAll right, so that's about it.\n\n308\n00:16:46,971 --> 00:16:49,227\nI hope to see you guys in the show.\n\n309\n00:16:49,227 --> 00:16:55,869\n[MUSIC]\n\n",
          "vimeoId": "103262834"
        }
      ],
      "title": "Overview of VMware Certified Professional VCP5-DCV"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don introduces the viewers to the VMware vShpere suite. He discusses the multiple editions of vSphere and walks through the process of setting up your first vCenter server.",
          "length": "6148",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/002-Installing-vCenter.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/002-Installing-vCenter-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/002-Installing-vCenter-sm.jpg",
          "title": "Intro and Installing vCenter",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:32,392 --> 00:00:33,925\nAll right.\nGood morning, good afternoon, and\n\n3\n00:00:33,925 --> 00:00:35,850\ngood evening, and welcome back.\n\n4\n00:00:35,850 --> 00:00:37,560\nTo another episode of ITProTV.\n\n5\n00:00:37,560 --> 00:00:42,540\nI'm your host Don Pezet kicking\noff a new show on ITProTV.\n\n6\n00:00:42,540 --> 00:00:46,660\nWe're gonna be diving\ninto the world of VMware.\n\n7\n00:00:46,660 --> 00:00:52,180\nNow VMware is a very, very big\ncompany in the virtualization world.\n\n8\n00:00:52,180 --> 00:00:55,610\nThese guys are the market leaders\nI know we've done other shows on\n\n9\n00:00:55,610 --> 00:01:00,090\nMicrosoft Hyper-V and Citrix XenServer,\nand those are great products,\n\n10\n00:01:00,090 --> 00:01:01,220\ndon't get me wrong.\n\n11\n00:01:01,220 --> 00:01:03,970\nBut VMware, they dominate the market.\n\n12\n00:01:03,970 --> 00:01:05,180\nIt's not even close.\n\n13\n00:01:05,180 --> 00:01:08,680\nIn fact, you can take all\nof VMware's competitors and\n\n14\n00:01:08,680 --> 00:01:13,150\nadd their market share together, and it's\nnot even half of VMware's market share.\n\n15\n00:01:13,150 --> 00:01:15,430\nThat's how much they\ndominate this environment.\n\n16\n00:01:15,430 --> 00:01:17,500\nIt's really impressive.\n\n17\n00:01:17,500 --> 00:01:22,970\nVMWare makes a whole suite of\nproducts that allow us to provide\n\n18\n00:01:22,970 --> 00:01:28,360\nrobust, easily managed virtualization\nin a corporate environment.\n\n19\n00:01:28,360 --> 00:01:32,970\nAnd because they provide so\nmany different products, there's a lot of\n\n20\n00:01:32,970 --> 00:01:36,930\nconfusion kind of centering around\nthat name and the product itself.\n\n21\n00:01:36,930 --> 00:01:40,420\nYou'll hear people say hey,\nI installed VMware today.\n\n22\n00:01:40,420 --> 00:01:42,570\nOkay, well what is that?\n\n23\n00:01:42,570 --> 00:01:43,220\nVMware's a company.\n\n24\n00:01:43,220 --> 00:01:45,240\nYou installed a company today?\n\n25\n00:01:45,240 --> 00:01:46,880\nVMware's not a product.\n\n26\n00:01:46,880 --> 00:01:49,720\nVMware is the company,\nlike Microsoft or Apple.\n\n27\n00:01:49,720 --> 00:01:51,720\nAnd then they make a suite of products.\n\n28\n00:01:51,720 --> 00:01:54,550\nThe problem is, they've changed\nthe names of those products so\n\n29\n00:01:54,550 --> 00:01:58,740\nmany times over the years that people just\ngot into the habit of calling it VMware.\n\n30\n00:01:58,740 --> 00:02:01,600\nSo when we say, we installed VMware today.\n\n31\n00:02:01,600 --> 00:02:06,950\nWe're normally talking about the type one\nhyper visor that VMware manufactures.\n\n32\n00:02:06,950 --> 00:02:11,390\nNow that product is actually\ncalled VMware ESX I\n\n33\n00:02:11,390 --> 00:02:15,380\nwhere it's also called the VMvisor or\nthe VMware hypervisor.\n\n34\n00:02:15,380 --> 00:02:18,920\nThey have three names within VMware for\nthis same product, but\n\n35\n00:02:18,920 --> 00:02:20,910\nthe most common name is ESX all right.\n\n36\n00:02:22,240 --> 00:02:24,360\nWhat about all this other\nstuff that centers around it?\n\n37\n00:02:24,360 --> 00:02:26,850\nWell, in real life land,\nnobody really cares.\n\n38\n00:02:26,850 --> 00:02:28,780\nYou can call it VMware, that's fine.\n\n39\n00:02:28,780 --> 00:02:32,370\nBut on the exam, you've got to\ncall them by the correct name.\n\n40\n00:02:32,370 --> 00:02:35,400\nSo there is no product called VMware.\n\n41\n00:02:35,400 --> 00:02:37,874\nIf you go to their website and\nyou VMware website and\n\n42\n00:02:37,874 --> 00:02:42,860\nyou go to products, you'll see if drops\nout this massive collection of software.\n\n43\n00:02:42,860 --> 00:02:46,810\nThey manufacture a lot of stuff,\nand it's all really good stuff, but\n\n44\n00:02:46,810 --> 00:02:49,110\na lot of it is very purpose built.\n\n45\n00:02:49,110 --> 00:02:52,340\nBuilt for certain scenarios\nthat may not pertain to you.\n\n46\n00:02:52,340 --> 00:02:56,070\nThe only one product they have\nthat everybody uses is ESX.\n\n47\n00:02:56,070 --> 00:02:59,520\nThat's the on that we're\ngonna be dealing with, but,\n\n48\n00:02:59,520 --> 00:03:05,870\nESX is typically packaged inside of\nanother kind of name which is vSphere.\n\n49\n00:03:05,870 --> 00:03:09,730\nAnd vSphere is actually the name\nthat VM wear gives to the suite\n\n50\n00:03:09,730 --> 00:03:13,780\nof software that makes up,\nthey're virtualization solution.\n\n51\n00:03:13,780 --> 00:03:15,140\nTo compare it to another product.\n\n52\n00:03:15,140 --> 00:03:17,240\nThink of it like Microsoft Office.\n\n53\n00:03:17,240 --> 00:03:21,450\nYou have Microsoft Word,\nMicrosoft Excel and Power Point.\n\n54\n00:03:21,450 --> 00:03:25,240\nThey're apart of Microsoft Office,\nwhich is a Microsoft product.\n\n55\n00:03:25,240 --> 00:03:31,040\nWell, ESX and vCenter and several of\nthe other products, are part of vSphere.\n\n56\n00:03:31,040 --> 00:03:33,760\nAnd vSphere is a VMWare product.\n\n57\n00:03:33,760 --> 00:03:35,840\nThat's kind of how all\nthese names fall together.\n\n58\n00:03:35,840 --> 00:03:39,560\nIt does get confusing, especially\nwhen you go out onto websites and\n\n59\n00:03:39,560 --> 00:03:42,940\nyou start reading information and\nthey use the terms interchangeably.\n\n60\n00:03:42,940 --> 00:03:46,390\nYou'll hear people refer to it as ESX,\nor you'll hear them call it vSphere.\n\n61\n00:03:46,390 --> 00:03:47,940\nOr they'll call it VMWare.\n\n62\n00:03:47,940 --> 00:03:49,900\nAnd it really does get confusing.\n\n63\n00:03:49,900 --> 00:03:52,400\nSo just be aware of that.\n\n64\n00:03:52,400 --> 00:03:54,760\nWhat we're gonna be covering\nactually is vSphere.\n\n65\n00:03:54,760 --> 00:03:56,490\nWe're going to cover vSphere and\n\n66\n00:03:56,490 --> 00:04:01,410\nthe various products that are inside\nof it which include ESX and vCenter.\n\n67\n00:04:01,410 --> 00:04:02,900\nThose are two of the bigger ones.\n\n68\n00:04:02,900 --> 00:04:05,630\nAs well as some of the single\nsign on software, and\n\n69\n00:04:05,630 --> 00:04:07,490\nsome of the redundancy software.\n\n70\n00:04:07,490 --> 00:04:13,560\nThe replication software\nthat VMware produces,\n\n71\n00:04:13,560 --> 00:04:17,200\nit's also the most commonly\nused of VMware's products.\n\n72\n00:04:17,200 --> 00:04:20,920\nA lot of the products that you see on here\nare things like, well, VMware fusion and\n\n73\n00:04:20,920 --> 00:04:21,900\nworkstation.\n\n74\n00:04:21,900 --> 00:04:23,380\nThose aren't designed for servers.\n\n75\n00:04:23,380 --> 00:04:25,570\nThose aren't designed for production use.\n\n76\n00:04:25,570 --> 00:04:29,550\nThose are for lab and\npersonal use and so on.\n\n77\n00:04:29,550 --> 00:04:33,960\nThere's other things that you'll see\nin here like VMware Horizon which is\n\n78\n00:04:33,960 --> 00:04:38,980\ndesigned for desktop virtualization or\nVDI, Virtual Desktop Infrastructure.\n\n79\n00:04:38,980 --> 00:04:42,470\nIf you're doing desktop virtualization,\nyou may use VMware Horizon.\n\n80\n00:04:43,590 --> 00:04:48,240\nIt's had a few names over the years but\nnow it's called VMware Horizon with\n\n81\n00:04:48,240 --> 00:04:50,430\nView because VMware View\nwas the old product name.\n\n82\n00:04:52,410 --> 00:04:55,500\nYou'll see those kind of\nbandied around on the Internet.\n\n83\n00:04:55,500 --> 00:05:01,513\nBut for this exam, we're concerned with\nthe vSphere suite, and inside of it,\n\n84\n00:05:01,513 --> 00:05:06,468\nthe main products we care about\nare EXSi and vCenter, all right.\n\n85\n00:05:06,468 --> 00:05:09,860\nLet's talk a little bit\nabout what those are.\n\n86\n00:05:09,860 --> 00:05:13,350\nVCenter itself,\nis not virtualization software.\n\n87\n00:05:13,350 --> 00:05:16,230\nVCenter is management software.\n\n88\n00:05:16,230 --> 00:05:21,670\nWhen you install a VMware hypervisor,\nit's a single stand alone machine.\n\n89\n00:05:21,670 --> 00:05:23,540\nAnd if you're a small environment,\nthat's fine.\n\n90\n00:05:23,540 --> 00:05:25,120\nYou can manage that single machine.\n\n91\n00:05:25,120 --> 00:05:26,580\nIt's got a little application to use.\n\n92\n00:05:26,580 --> 00:05:27,250\nYou connect to it.\n\n93\n00:05:27,250 --> 00:05:28,480\nYou can create your virtual machines.\n\n94\n00:05:28,480 --> 00:05:30,410\nYou can do everything that you need.\n\n95\n00:05:30,410 --> 00:05:32,620\nBut what if you have 100 of these servers?\n\n96\n00:05:32,620 --> 00:05:35,480\nYou don't want to manage\neach one individually.\n\n97\n00:05:35,480 --> 00:05:40,050\nYou need some kind of centralized\nplace where you can manage all of\n\n98\n00:05:40,050 --> 00:05:43,460\nyour physical servers and the virtual\nmachines that run on top of them.\n\n99\n00:05:43,460 --> 00:05:44,080\nRight?\n\n100\n00:05:44,080 --> 00:05:46,216\nAnd that solution is vCenter.\n\n101\n00:05:46,216 --> 00:05:49,230\nVCenter can give you just\nbasic management, but\n\n102\n00:05:49,230 --> 00:05:52,290\nit can also give you performance and\nmonitoring, high availability.\n\n103\n00:05:52,290 --> 00:05:56,120\nIt can do all sorts of other things\nif you configure it properly.\n\n104\n00:05:56,120 --> 00:05:59,333\nThat's the vCenter piece,\nthat's the management piece for\n\n105\n00:05:59,333 --> 00:06:01,700\ncontrolling our hypervisors.\n\n106\n00:06:01,700 --> 00:06:05,260\nThen you have ESXi that's\nthe hypervisor itself.\n\n107\n00:06:05,260 --> 00:06:10,240\nAnd if you're setting up virtualization,\nESXi that's the product that does it.\n\n108\n00:06:10,240 --> 00:06:13,060\nThe thing is there is a little\nbit of debate over which\n\n109\n00:06:13,060 --> 00:06:15,300\none you should learn first.\n\n110\n00:06:15,300 --> 00:06:17,070\nShould you learn ESXi first,\n\n111\n00:06:17,070 --> 00:06:19,560\nsince you're gonna deploy that\nto do virtualization on it.\n\n112\n00:06:19,560 --> 00:06:21,110\nOr should you learn vCenter?\n\n113\n00:06:21,110 --> 00:06:23,020\nAnd following the objectives from VMware,\n\n114\n00:06:23,020 --> 00:06:25,430\nthey want you to learn\nabout vCenter first.\n\n115\n00:06:25,430 --> 00:06:30,330\nThey want you to be able to manage\nthe hypervisors before you create\n\n116\n00:06:30,330 --> 00:06:34,280\nthe hypervisors and that makes sense\nif you're going to be using V-center.\n\n117\n00:06:34,280 --> 00:06:38,300\nBut understand that not everybody uses\nvCenter and the primary reason for\n\n118\n00:06:38,300 --> 00:06:40,895\nwhy somebody wouldn't use it Is the cost.\n\n119\n00:06:40,895 --> 00:06:43,480\nVCenter is not an inexpensive product.\n\n120\n00:06:43,480 --> 00:06:46,930\nI believe it starts it's\npricing at about $5,000.\n\n121\n00:06:46,930 --> 00:06:50,591\nIf you're a small company that's\ngonna have two hypervisors,\n\n122\n00:06:50,591 --> 00:06:55,495\nyou probably don't want to wanna spend\n$5,000 just to manage those too.\n\n123\n00:06:55,495 --> 00:06:58,565\nBut if you got 100 or\n500 of these machines,\n\n124\n00:06:58,565 --> 00:07:02,625\nyou'll gladly spend 5 grand to have\na central management location.\n\n125\n00:07:02,625 --> 00:07:05,165\nIt really does come down to\nthe size of your organization,\n\n126\n00:07:05,165 --> 00:07:06,920\nwhich products,\nare going to be appropriate.\n\n127\n00:07:08,240 --> 00:07:12,780\nVMware actually has the VMware\nvSphere with Operations Management and\n\n128\n00:07:12,780 --> 00:07:16,870\nVMware vSphere Licensing,\nPricing and Packaging Guide.\n\n129\n00:07:16,870 --> 00:07:21,040\nI'll post the link to\nit in our show notes so\n\n130\n00:07:21,040 --> 00:07:22,940\nyou guys will have a link\nto this guide if you want.\n\n131\n00:07:22,940 --> 00:07:26,290\nBut it's kind of funny because this\nguide talks all about licensing and\n\n132\n00:07:26,290 --> 00:07:30,750\npackaging, and I don't think there's\na single price anywhere in this guide, so\n\n133\n00:07:30,750 --> 00:07:32,460\nI don't why they call it pricing.\n\n134\n00:07:32,460 --> 00:07:37,520\nBut it does explain how VMware\npackages their software, and\n\n135\n00:07:37,520 --> 00:07:41,200\nif this is your first exposure to VMware,\nI really encourage you to read this,\n\n136\n00:07:41,200 --> 00:07:44,820\nI'll cover the highlights of it right now,\nbut I encourage you to read through it in\n\n137\n00:07:44,820 --> 00:07:48,700\ndepth at some point, because it does\nexplain how the products work, all right.\n\n138\n00:07:48,700 --> 00:07:53,750\nFirst off, VMware assumes, that you want\nto have a Centrally Managed Environment.\n\n139\n00:07:53,750 --> 00:07:58,730\nThey package vSphere as one suite\nthat has vCenter and ESX and\n\n140\n00:07:58,730 --> 00:08:01,470\na few other things in it, right.\n\n141\n00:08:01,470 --> 00:08:05,340\nAnd that's perfect for medium,\nlarge and enterprise organizations.\n\n142\n00:08:05,340 --> 00:08:06,270\nThat's what you want.\n\n143\n00:08:06,270 --> 00:08:08,990\nThey package it together, and\nyou save some money, all right.\n\n144\n00:08:08,990 --> 00:08:12,293\nBut if you're a small organization,\nyou may not have the budget for that,\n\n145\n00:08:12,293 --> 00:08:13,930\nor you may not have the need for that.\n\n146\n00:08:13,930 --> 00:08:18,051\nAnd for those scenarios, they actually\nhave some special packages of VMware that\n\n147\n00:08:18,051 --> 00:08:20,090\nare either low cost or completely free.\n\n148\n00:08:20,090 --> 00:08:23,279\nThere are free versions\nof ESX that you can use.\n\n149\n00:08:24,330 --> 00:08:27,500\nAnd so this guide kind of breaks\ndown the different editions so\n\n150\n00:08:27,500 --> 00:08:30,320\nyou can figure out what you wanna get,\nall right.\n\n151\n00:08:30,320 --> 00:08:31,900\nNow, a common question that I get,\n\n152\n00:08:31,900 --> 00:08:36,420\nbefore I dive into the editions,\nis what does ESX stand for?\n\n153\n00:08:36,420 --> 00:08:38,620\nI've mentioned it a few times but,\nwhat does it stand for?\n\n154\n00:08:38,620 --> 00:08:42,990\nWell, for the exam it stands for\nnothing, don't worry about it.\n\n155\n00:08:42,990 --> 00:08:45,940\nBut in real life it's actually\ngot some history behind it.\n\n156\n00:08:45,940 --> 00:08:48,310\nVMware, they've been around a long time.\n\n157\n00:08:48,310 --> 00:08:53,465\nI first started with VMware in 1998,\nso a long time ago.\n\n158\n00:08:53,465 --> 00:08:58,010\nAnd they were out before then but\nnot much longer so they're not that old.\n\n159\n00:08:58,010 --> 00:09:03,580\nBut they've been out for well,\nover 15 years now, it's quite a while.\n\n160\n00:09:03,580 --> 00:09:07,250\nAnd they originally had two products,\nall right.\n\n161\n00:09:07,250 --> 00:09:11,440\nThey had their high end virtualization\nsuite which was one of the first\n\n162\n00:09:11,440 --> 00:09:15,660\ntype 1 hypervisors, and\nthat was what became ESX.\n\n163\n00:09:15,660 --> 00:09:20,420\nAnd they had a lower end suite\nthat was a type 2 hypervisor, and\n\n164\n00:09:20,420 --> 00:09:22,870\nthat was called GSX, all right.\n\n165\n00:09:22,870 --> 00:09:28,470\nESX, it was originally called Elastic Sky,\nthat's the ES part.\n\n166\n00:09:28,470 --> 00:09:32,200\nAnd GSX was originally called\nGround Storm, that's the GS.\n\n167\n00:09:32,200 --> 00:09:35,765\nSo, Elastic Sky and Ground Storm\nthose were the original products.\n\n168\n00:09:35,765 --> 00:09:39,295\nWell, those names didn't really\ncatch on for whatever reason.\n\n169\n00:09:39,295 --> 00:09:44,387\nAnd so they ended up abbreviating them ES\nand GS, and they stuck an X on the end and\n\n170\n00:09:44,387 --> 00:09:47,885\nmade it ESX and GSX, and so\nthat's where we are today.\n\n171\n00:09:47,885 --> 00:09:51,175\nWell, ESX itself is just the hypervisor.\n\n172\n00:09:51,175 --> 00:09:54,040\nAll the other software is built around it.\n\n173\n00:09:54,040 --> 00:09:58,510\nGSX became a product called VMware Server,\nand then they killed that off.\n\n174\n00:09:58,510 --> 00:10:00,700\nSo they actually don't\nhave that product anymore.\n\n175\n00:10:00,700 --> 00:10:03,248\nAnd the reason is,\nit was a type 2 hypervisor, and\n\n176\n00:10:03,248 --> 00:10:05,450\nwell those aren't very great.\n\n177\n00:10:05,450 --> 00:10:08,450\nIf you're not familiar\nwith the hypervisor types,\n\n178\n00:10:08,450 --> 00:10:10,708\nlet me just do a brief overview of that.\n\n179\n00:10:10,708 --> 00:10:14,508\nA type 2 hypervisor is actually the older,\nI know it's the higher number, but\n\n180\n00:10:14,508 --> 00:10:16,338\nit's the older of the technologies.\n\n181\n00:10:16,338 --> 00:10:20,720\nA type 2 hypervisor is really an emulator.\n\n182\n00:10:20,720 --> 00:10:24,610\nWhat it does is it creates\nemulated sets of virtual hardware.\n\n183\n00:10:24,610 --> 00:10:28,650\nIt creates fake memory,\nfake processors, fake network cards,\n\n184\n00:10:28,650 --> 00:10:33,510\nfake hard drives, and then you run your\nguest operating systems on top of those.\n\n185\n00:10:33,510 --> 00:10:36,590\nSo they run right on top\nof that emulated hardware.\n\n186\n00:10:36,590 --> 00:10:40,800\nSo when your guest operating systems\nmakes a call to a network card,\n\n187\n00:10:40,800 --> 00:10:44,060\nit makes a call to the fake,\nemulated network card.\n\n188\n00:10:44,060 --> 00:10:49,040\nAnd then the type 2 hypervisor has to\ntranslate that into a call that is\n\n189\n00:10:49,040 --> 00:10:52,690\nappropriate for the real, physical network\ncard and then send it out, all right.\n\n190\n00:10:52,690 --> 00:10:57,250\nIt works really well, and it creates a\nvery stable platform where all the virtual\n\n191\n00:10:57,250 --> 00:11:00,860\nmachines see the same exact type of\nhardware, cuz it's all emulated.\n\n192\n00:11:00,860 --> 00:11:03,800\nSo like drivers and stuff are things\nyou don't normally have to worry about.\n\n193\n00:11:03,800 --> 00:11:08,910\nThe problem is, every single call has to\nbe translated from that fake hardware\n\n194\n00:11:08,910 --> 00:11:12,660\nto the real hardware, and\nthat takes time and performance.\n\n195\n00:11:12,660 --> 00:11:16,090\nSo type 2 hypervisors are slower.\n\n196\n00:11:16,090 --> 00:11:18,350\nThey're not really suitable for\nproduction use.\n\n197\n00:11:18,350 --> 00:11:20,490\nYou use them for lab, research, testing.\n\n198\n00:11:20,490 --> 00:11:23,610\nI use it all the time on my own\nlaptop just for goofing around.\n\n199\n00:11:23,610 --> 00:11:25,790\nBut I wouldn't do that for\nany mission critical applications,\n\n200\n00:11:25,790 --> 00:11:27,010\nnot by a long sight.\n\n201\n00:11:27,010 --> 00:11:30,400\nSo type 2 hypervisors\nare a dying technology.\n\n202\n00:11:30,400 --> 00:11:33,610\nThere's not many of them out there\nanymore and VMware killed theirs off.\n\n203\n00:11:33,610 --> 00:11:35,060\nThey don't even support it anymore,\nall right.\n\n204\n00:11:36,350 --> 00:11:39,238\nInstead, now we see type 1 hypervisors.\n\n205\n00:11:39,238 --> 00:11:42,570\nWhat type 1 hypervisors do,\nis they act like more like a traffic cop.\n\n206\n00:11:42,570 --> 00:11:47,310\nThey actually expose the physical\nhardware to the virtual machines.\n\n207\n00:11:47,310 --> 00:11:51,184\nThey may do it directly, like in the case\nof CPUs, or they might do it indirectly,\n\n208\n00:11:51,184 --> 00:11:54,891\nlike in the case of network adapters\nwhere there's certain drivers that sit in\n\n209\n00:11:54,891 --> 00:11:57,550\nbetween the virtual machine and\nthe physical adapter.\n\n210\n00:11:57,550 --> 00:12:02,010\nBut they accelerate,\nas opposed to decreasing performance.\n\n211\n00:12:02,010 --> 00:12:05,640\nSo, by doing this we get\nmuch better performance.\n\n212\n00:12:05,640 --> 00:12:10,040\nA virtual machine running on a type\n1 hypervisor will have near,\n\n213\n00:12:10,040 --> 00:12:14,670\nif not equal to actual wire or\nhardware speed.\n\n214\n00:12:14,670 --> 00:12:17,480\nIt's as if you were running\nthe virtual machine on bare metal.\n\n215\n00:12:17,480 --> 00:12:19,866\nThe hypervisor isn't\ndecreasing performance.\n\n216\n00:12:19,866 --> 00:12:23,140\nWhat the hypervisor is really doing\nis acting like a traffic cop and\n\n217\n00:12:23,140 --> 00:12:28,690\nsaying, I don't want one VM to start\nsaturating all the resources and\n\n218\n00:12:28,690 --> 00:12:31,370\ntaking away CPU or memory or\nwhatever from other VMs, right?\n\n219\n00:12:31,370 --> 00:12:33,280\nIt's creating that separation.\n\n220\n00:12:33,280 --> 00:12:36,300\nAnd they work really, really well.\n\n221\n00:12:36,300 --> 00:12:38,500\nWhen they initially came out,\n\n222\n00:12:38,500 --> 00:12:43,120\n15 years ago, these things were\nnot tested, not tried and true.\n\n223\n00:12:43,120 --> 00:12:45,470\nA lot of people just didn't trust them.\n\n224\n00:12:45,470 --> 00:12:49,315\nBut by today,\nnow we're in the year 2014 and\n\n225\n00:12:49,315 --> 00:12:53,270\ntoday, well everybody trusts them and\neverybody uses them.\n\n226\n00:12:53,270 --> 00:12:56,090\nIt's rare to find an environment\nwhere you don't have type 1\n\n227\n00:12:56,090 --> 00:12:58,130\nhypervisors of some sort implemented.\n\n228\n00:12:58,130 --> 00:13:01,343\nMaybe it's Microsoft Hyper-V,\nmaybe it's Citrix XenServer,\n\n229\n00:13:01,343 --> 00:13:04,220\nmaybe it's VMware, more commonly,\nVMware, all right.\n\n230\n00:13:04,220 --> 00:13:08,380\nNow, you might ask yourself,\nwhy is VMware the market leader?\n\n231\n00:13:08,380 --> 00:13:09,810\nWhy are they the most successful?\n\n232\n00:13:09,810 --> 00:13:12,004\nAnd the answer to that is,\nit's not because of price right,\n\n233\n00:13:12,004 --> 00:13:13,090\nthey are the most expensive.\n\n234\n00:13:13,090 --> 00:13:17,459\nYou can get far lower cost and\nthe lowest cost one is Microsoft Hyper-V,\n\n235\n00:13:17,459 --> 00:13:18,466\nsurprisingly.\n\n236\n00:13:18,466 --> 00:13:22,255\nCitrix XenServer is free, but\nwhen you factor in the cost of support and\n\n237\n00:13:22,255 --> 00:13:25,770\nyour OS licensing it ends up being\nmore expensive then Hyper-V.\n\n238\n00:13:25,770 --> 00:13:27,122\nBut, here's the thing.\n\n239\n00:13:27,122 --> 00:13:31,470\nMicrosoft Hyper-V is not as robust and\n\n240\n00:13:31,470 --> 00:13:34,920\nmature as the other solutions,\nMicrosoft is still adapting that.\n\n241\n00:13:34,920 --> 00:13:39,420\nAnd it runs on top of Windows,\nwhich is pretty resource-intensive.\n\n242\n00:13:39,420 --> 00:13:43,110\nTo have a failover environment,\nyou have to do Microsoft clustering which\n\n243\n00:13:43,110 --> 00:13:46,150\nrequires an Active Directory,\nthere's a lot of infrastructure involved.\n\n244\n00:13:46,150 --> 00:13:49,325\nAnd as a result,\nit really hasn't scaled very well.\n\n245\n00:13:49,325 --> 00:13:52,180\nHyper-V has become more of an internal\nproduct for Microsoft, for\n\n246\n00:13:52,180 --> 00:13:54,020\ntheir Windows Azure services,\n\n247\n00:13:54,020 --> 00:13:57,590\nthan it has something that\ncorporations are able to latch onto.\n\n248\n00:13:57,590 --> 00:14:00,090\nCitrix XenServer is open source.\n\n249\n00:14:00,090 --> 00:14:03,690\nAnd now, we use XenServer here,\nso let me just add that caveat.\n\n250\n00:14:03,690 --> 00:14:07,650\nThe virtualization that ITProTV does,\nwe do on top of XenServer.\n\n251\n00:14:07,650 --> 00:14:10,650\nIt's free unless you want support,\nyou've got to pay for\n\n252\n00:14:10,650 --> 00:14:12,730\nsupport to get that from Citrix.\n\n253\n00:14:12,730 --> 00:14:16,037\nBut, multiple times,\nbecause it's an open source product and\n\n254\n00:14:16,037 --> 00:14:20,325\nthey use developers all over the world,\nthere's been more than one occasion where\n\n255\n00:14:20,325 --> 00:14:24,080\nan update has been released from them\nthat has broken virtual machines.\n\n256\n00:14:24,080 --> 00:14:27,551\nIt happens frequently, I can think of four\ntimes that have happened in the last two\n\n257\n00:14:27,551 --> 00:14:31,500\nyears where upgrades did not go smoothly\nbecause things weren't properly tested.\n\n258\n00:14:31,500 --> 00:14:35,340\nIt doesn't have the robust testing cycle\nthat some of the other products do.\n\n259\n00:14:35,340 --> 00:14:37,270\nAnd that's where VMware comes in.\n\n260\n00:14:37,270 --> 00:14:39,110\nVMware is a closed source product.\n\n261\n00:14:39,110 --> 00:14:40,850\nThey don't give you the source code.\n\n262\n00:14:40,850 --> 00:14:44,560\nThey have paid developers that\nwork on VMware full time.\n\n263\n00:14:44,560 --> 00:14:48,987\nThey work on ESX or they work on VSAN or\nthey work on VMware products nonstop,\n\n264\n00:14:48,987 --> 00:14:50,840\nthat's what they do.\n\n265\n00:14:50,840 --> 00:14:52,810\nAnd they're very, very good at it.\n\n266\n00:14:52,810 --> 00:14:56,640\nAnd their large install base\nlets them see technologies and\n\n267\n00:14:56,640 --> 00:15:00,470\nother things that are just\nnot visible to smaller or\n\n268\n00:15:00,470 --> 00:15:03,380\nnewer companies that are trying to\nget into that same marketspace.\n\n269\n00:15:03,380 --> 00:15:06,859\nAnd so VMware has a very good position,\nthey really do an excellent job,\n\n270\n00:15:06,859 --> 00:15:08,400\nit's a great product.\n\n271\n00:15:08,400 --> 00:15:11,380\nSo it's expensive, but\nits worth it, right.\n\n272\n00:15:11,380 --> 00:15:16,212\nThey bring that value that makes the cost\nan expense that is willing to be accepted.\n\n273\n00:15:16,212 --> 00:15:20,070\nAll right, so if I wanna go and\n\n274\n00:15:20,070 --> 00:15:23,000\npurchase this I need to figure out\nwhat it is that I'm going to get.\n\n275\n00:15:23,000 --> 00:15:28,050\nAnd that's where this guide comes in,\nthis Licensing, Pricing and Packaging.\n\n276\n00:15:28,050 --> 00:15:30,732\nWe're gonna ignore that pricing part\nbecause that's not actually in this guide,\n\n277\n00:15:30,732 --> 00:15:31,900\nall right.\n\n278\n00:15:31,900 --> 00:15:35,040\nAnd when you go through this guide it\nexplains all sorts of different things\n\n279\n00:15:35,040 --> 00:15:37,180\nlike how the software is licensed.\n\n280\n00:15:37,180 --> 00:15:38,690\nNow, this is important.\n\n281\n00:15:38,690 --> 00:15:45,880\nWhen you buy a VMware product, or\nthe vSphere suite, it's licensed per CPU.\n\n282\n00:15:45,880 --> 00:15:48,418\nSo per physical processor in your system.\n\n283\n00:15:48,418 --> 00:15:52,931\nNow this is important because in\nprevious versions of vSphere, so\n\n284\n00:15:52,931 --> 00:15:58,492\nlike in version 4 and earlier, it was\nlicensed not just per physical processor,\n\n285\n00:15:58,492 --> 00:16:03,180\nbut per core, and based on the amount\nof memory you had in the system.\n\n286\n00:16:03,180 --> 00:16:05,100\nSo the licensing was really strict.\n\n287\n00:16:05,100 --> 00:16:08,400\nThey've loosened that up a lot, and it's\nnow licensed based on physical sockets.\n\n288\n00:16:08,400 --> 00:16:12,082\nNow that's important because\nwhen you buy a processor,\n\n289\n00:16:12,082 --> 00:16:14,630\nit might be dual-core or quad-core.\n\n290\n00:16:14,630 --> 00:16:16,740\nIt might have six cores or\neight cores, right.\n\n291\n00:16:16,740 --> 00:16:21,930\n12 core processors are not uncommon now,\nso those cores,\n\n292\n00:16:21,930 --> 00:16:24,900\nwe used to have to count those to\nhandle the licensing, now we don't.\n\n293\n00:16:24,900 --> 00:16:28,800\nThe cores don't count,\nit's the physical processor.\n\n294\n00:16:28,800 --> 00:16:33,390\nIf you have two quad-core processors,\nright, that's eight cores,\n\n295\n00:16:33,390 --> 00:16:34,910\nbut two physical processors.\n\n296\n00:16:34,910 --> 00:16:37,100\nThat's two CPU licenses.\n\n297\n00:16:37,100 --> 00:16:41,700\nIf you have one eight core processor,\nwell that's eight cores also, but\n\n298\n00:16:41,700 --> 00:16:45,300\nit's one physical CPU so\nit's one CPU license.\n\n299\n00:16:45,300 --> 00:16:47,580\nWhen you buy the VMware Vshpere,\n\n300\n00:16:47,580 --> 00:16:51,870\nkeep that in mind, how many physical\nprocessors you're going to have.\n\n301\n00:16:51,870 --> 00:16:54,210\nAnd so that's our only limitation now.\n\n302\n00:16:54,210 --> 00:16:58,830\nCores are no longer counted and physical\nRAM is no longer counted either, right.\n\n303\n00:16:58,830 --> 00:17:01,710\nThose are no longer a part of\nthat calculation when it comes\n\n304\n00:17:01,710 --> 00:17:02,530\nto licensing this.\n\n305\n00:17:04,430 --> 00:17:06,840\nAll right, the other thing is,\n\n306\n00:17:06,840 --> 00:17:10,090\nwhen we go to buy it we have to figure\nout exactly what software we want.\n\n307\n00:17:10,090 --> 00:17:12,890\nRight, cuz there's a lot of different\nsoftware that's involved, and\n\n308\n00:17:12,890 --> 00:17:16,660\nso they package it several different ways.\n\n309\n00:17:16,660 --> 00:17:20,590\nNow this chart they have actually\ndoesn't show all of the additions.\n\n310\n00:17:20,590 --> 00:17:26,420\nThis shows the paid and\nfull versions of the VMware vSphere.\n\n311\n00:17:26,420 --> 00:17:30,415\nThere is another level they're not\nshowing which is called the foundation.\n\n312\n00:17:30,415 --> 00:17:33,570\nVMwear vSphere foundation is designed for\nsmall companies.\n\n313\n00:17:33,570 --> 00:17:37,030\nPeople that will be deploying\njust a couple of machines.\n\n314\n00:17:37,030 --> 00:17:37,840\nNot much.\n\n315\n00:17:37,840 --> 00:17:39,010\nIt's much lower cost.\n\n316\n00:17:39,010 --> 00:17:40,430\nMuch less infrastructure.\n\n317\n00:17:40,430 --> 00:17:42,150\nI'll talk about it in a minute.\n\n318\n00:17:42,150 --> 00:17:45,520\nBut on the exam what you gonna be\nseeing is the fuller versions.\n\n319\n00:17:45,520 --> 00:17:50,260\nWhat we really see are standard\nEnterprise and Enterprised Plus.\n\n320\n00:17:50,260 --> 00:17:50,930\nOkay.\n\n321\n00:17:50,930 --> 00:17:55,510\nNow they come in two forms,\nwith operations management and without.\n\n322\n00:17:55,510 --> 00:17:57,760\nAnd what they're really talking\nabout there is vCenter.\n\n323\n00:17:57,760 --> 00:18:01,860\nDo you want vCenter to provide centralized\nmanagement of these VMs or not?\n\n324\n00:18:03,230 --> 00:18:04,230\nMost of us want that.\n\n325\n00:18:04,230 --> 00:18:07,600\nYou want vCenter because that gives you\nthe centralized management, gives you\n\n326\n00:18:07,600 --> 00:18:11,140\nperformance, gives you high availability,\na lot of neat features that are there.\n\n327\n00:18:11,140 --> 00:18:12,680\nSuper easy to manage.\n\n328\n00:18:12,680 --> 00:18:16,180\nBut if you don't need that piece,\nmaybe you already have vCenter,\n\n329\n00:18:16,180 --> 00:18:18,430\nyou've already licensed\nit by some other means.\n\n330\n00:18:18,430 --> 00:18:22,090\nYou don't need to buy it again,\nyou can get vSphere without it, all right?\n\n331\n00:18:22,090 --> 00:18:24,800\nYou just lost the functionality of\ndoing that, health monitoring and\n\n332\n00:18:24,800 --> 00:18:28,710\nanalytics capacity management, your\noperation dashboard, that kind of stuff.\n\n333\n00:18:28,710 --> 00:18:33,140\nThose pieces are a part of vCenter,\nif this is your first time buying it,\n\n334\n00:18:33,140 --> 00:18:36,120\nyou probably need to get it\nwith Operations Management, and\n\n335\n00:18:36,120 --> 00:18:38,800\nthen the second or third time you buy,\nor whatever, you can get it without.\n\n336\n00:18:39,980 --> 00:18:41,140\nOtherwise, they're identical.\n\n337\n00:18:41,140 --> 00:18:45,710\nAfter that, it's just whether you want\nStandard, Enterprise, or Enterprise Plus.\n\n338\n00:18:45,710 --> 00:18:49,420\nNow, for most people,\nStandard is what you want.\n\n339\n00:18:49,420 --> 00:18:51,650\nStandard gives you the hypervisor.\n\n340\n00:18:51,650 --> 00:18:53,830\nThat's ESX or ESXi.\n\n341\n00:18:53,830 --> 00:18:56,950\nSo we get the hypervisor so\nwe can do virtualization.\n\n342\n00:18:56,950 --> 00:19:00,780\nYou also get storage vMotion,\nand they don't say it here but\n\n343\n00:19:00,780 --> 00:19:03,370\noh actually they do say it right here,\nyup, regular vMotion.\n\n344\n00:19:03,370 --> 00:19:06,200\nSo vMotion and storage vMotion,\nwhat are those?\n\n345\n00:19:06,200 --> 00:19:10,120\nWell, if I have two ESX servers, and\n\n346\n00:19:10,120 --> 00:19:15,020\nthere's a virtual machine running on one,\nif I have vMotion configured,\n\n347\n00:19:15,020 --> 00:19:20,270\nI can take that virtual machine on\nserver one and, while it's running,\n\n348\n00:19:20,270 --> 00:19:24,970\nI can move it over to server two,\nand my end users never even see it.\n\n349\n00:19:24,970 --> 00:19:29,960\nI can move a virtual machine between\nphysical hosts, without shutting it down.\n\n350\n00:19:29,960 --> 00:19:31,100\nIt's really cool.\n\n351\n00:19:31,100 --> 00:19:32,540\nIt's great for maintenance.\n\n352\n00:19:32,540 --> 00:19:34,500\nIf you need to do an update on server one,\n\n353\n00:19:34,500 --> 00:19:39,350\non the physical host, you gotta get the\nVMs off of it and over to server two, so\n\n354\n00:19:39,350 --> 00:19:41,050\nyou can do that maintenance on server one.\n\n355\n00:19:41,050 --> 00:19:44,500\nWell, you can schedule that for a downtime\nwhen your company's not running.\n\n356\n00:19:44,500 --> 00:19:47,310\nBut if you're a 24 by 7 shop,\nwhen is that gonna happen?\n\n357\n00:19:47,310 --> 00:19:50,060\nNever, so with vMotion we don't\nhave to worry about that.\n\n358\n00:19:50,060 --> 00:19:53,840\nWe can shift our VMs over,\nempty out that physical host.\n\n359\n00:19:53,840 --> 00:19:56,220\nDo our updates, whatever,\nthen move the VMs back.\n\n360\n00:19:56,220 --> 00:19:58,940\nAnd we can do it all while\npeople are in the system.\n\n361\n00:19:58,940 --> 00:20:00,410\nReally cool.\n\n362\n00:20:00,410 --> 00:20:03,060\nVMotion is talking about\nthe virtual machines themselves.\n\n363\n00:20:03,060 --> 00:20:07,110\nStorage VMotion is talking\nabout our virtual hard drives.\n\n364\n00:20:07,110 --> 00:20:09,620\nOur virtual hard drives\nmight be on one SAN.\n\n365\n00:20:09,620 --> 00:20:11,850\nIf I need to do maintenance on that SAN,\n\n366\n00:20:11,850 --> 00:20:15,120\nI can move the virtual hard drives to\nanother SAN and do that maintenance.\n\n367\n00:20:15,120 --> 00:20:18,030\nYou can do full maintenance of your\nsystem while they're up and running.\n\n368\n00:20:19,850 --> 00:20:21,660\nOther things, high availability, right?\n\n369\n00:20:21,660 --> 00:20:26,060\nIf one of your physical hosts were to\nfail, we need those VMs to jump over to\n\n370\n00:20:26,060 --> 00:20:31,620\nanother physical host and the main\nvSphere packages allow you to do that.\n\n371\n00:20:31,620 --> 00:20:33,110\nData protection and replication.\n\n372\n00:20:33,110 --> 00:20:35,900\nYou might wanna replicate\nyour virtual machines between\n\n373\n00:20:35,900 --> 00:20:37,540\nphysical locations, right?\n\n374\n00:20:37,540 --> 00:20:40,450\nAnd that's an important thing if\nyou want true disaster recovery,\n\n375\n00:20:40,450 --> 00:20:42,840\nso that's a part of vSphere.\n\n376\n00:20:42,840 --> 00:20:46,729\nAnd then vShield end point\nthat's like antivirus and\n\n377\n00:20:46,729 --> 00:20:49,560\nanti-spyware for your virtual machines.\n\n378\n00:20:49,560 --> 00:20:52,860\nYou can get, especially with Windows\nmachines, you can get viruses, trojans,\n\n379\n00:20:52,860 --> 00:20:54,450\nother types of infections on there.\n\n380\n00:20:54,450 --> 00:20:57,590\nAnd when you license Vsphere,\nit actually comes with their own product.\n\n381\n00:20:57,590 --> 00:21:00,430\nNow you might have your own antivirus\nproduct that you might wanna use instead,\n\n382\n00:21:00,430 --> 00:21:01,770\nyou're more than welcome to do that.\n\n383\n00:21:01,770 --> 00:21:03,770\nBut it does come with licensing for that.\n\n384\n00:21:03,770 --> 00:21:04,360\nAll right?\n\n385\n00:21:04,360 --> 00:21:08,440\nNow, that's included in Standard,\nEnterprise, and Enterprise Plus.\n\n386\n00:21:08,440 --> 00:21:10,440\nThat's what you get, all right?\n\n387\n00:21:10,440 --> 00:21:14,100\nBut if you go to Enterprise,\nyou get some additional features.\n\n388\n00:21:14,100 --> 00:21:18,060\nYou get things like the distributed\nresource scheduler, all right, and\n\n389\n00:21:18,060 --> 00:21:21,830\ndistributed power management,\nit's a really cool thing.\n\n390\n00:21:21,830 --> 00:21:26,130\nWhat it does, is it looks at the\nperformance of your virtual machines and\n\n391\n00:21:26,130 --> 00:21:30,200\nyour physical machines, and it sees if\nthe physical machine is getting too busy,\n\n392\n00:21:30,200 --> 00:21:31,600\nrunning out of resources.\n\n393\n00:21:31,600 --> 00:21:34,770\nIt can actually shift virtual\nmachines over to other hardware to\n\n394\n00:21:34,770 --> 00:21:37,610\nfree up resources,\nto balance out your data center.\n\n395\n00:21:37,610 --> 00:21:40,430\nYou have peaks and\nvalleys when it comes to performance,\n\n396\n00:21:40,430 --> 00:21:43,380\ntimes when some servers are really\nbusy and other servers are slow.\n\n397\n00:21:43,380 --> 00:21:45,880\nAnd so it will rearrange\nthings to account for that.\n\n398\n00:21:45,880 --> 00:21:47,890\nIt can even do it to save power.\n\n399\n00:21:47,890 --> 00:21:50,865\nIf you don't have that many virtual\nmachines running, you can shift them all\n\n400\n00:21:50,865 --> 00:21:55,090\nover,and put some of the other host\ninto a low power mode to save resources.\n\n401\n00:21:55,090 --> 00:21:56,560\nThat's especially true with hard drives.\n\n402\n00:21:56,560 --> 00:21:58,950\nRight.\nHard drives really suck down the power, so\n\n403\n00:21:58,950 --> 00:22:02,100\nif we can move machines off we can save,\non our electric bill.\n\n404\n00:22:03,920 --> 00:22:08,440\nIt also has storage APIs for\nour RAID integration and multipathing.\n\n405\n00:22:08,440 --> 00:22:12,390\nMultipathing is really important\nif you have more than one SAN, or\n\n406\n00:22:12,390 --> 00:22:17,490\na complex switch fabric where you have\nmore than one path to get to the same SAN.\n\n407\n00:22:17,490 --> 00:22:19,760\nWe do that for\nfiber channel switch redundancy, right,\n\n408\n00:22:19,760 --> 00:22:22,696\nif we have a switch fail you still\nwant to be able to get to that sand.\n\n409\n00:22:22,696 --> 00:22:26,573\nBig data extensions, BDE.\n\n410\n00:22:26,573 --> 00:22:31,346\nBig data extensions allow us to\ndo some really cool stuff like\n\n411\n00:22:31,346 --> 00:22:33,400\nyou see with Amazon S3.\n\n412\n00:22:33,400 --> 00:22:38,230\nWith Amazon S3 you can set up servers, so\n\n413\n00:22:38,230 --> 00:22:41,450\nthat as your system gets busier,\nit clones it, it spawns, so\n\n414\n00:22:41,450 --> 00:22:44,230\nit creates more, and more and\nmore of those servers to handle the load\n\n415\n00:22:44,230 --> 00:22:47,410\nWell big data extensions let\nus do that inside of VMware.\n\n416\n00:22:47,410 --> 00:22:49,770\nIf you're running something\nlike a hadoop cluster,\n\n417\n00:22:49,770 --> 00:22:52,710\nif you've never heard of\nhadoop I don't blame you.\n\n418\n00:22:52,710 --> 00:22:55,540\nIt's not something a non-developer\nreally deals with much.\n\n419\n00:22:55,540 --> 00:23:00,320\nHadoop clusters are where\nwe take an application and\n\n420\n00:23:00,320 --> 00:23:02,220\nwe split it into two pieces.\n\n421\n00:23:02,220 --> 00:23:05,750\nThe data, and the application itself,\nthe executable.\n\n422\n00:23:06,750 --> 00:23:09,920\nNow, that executable these days\nis most often a web application.\n\n423\n00:23:09,920 --> 00:23:13,500\nSo it's like Amazon's home page.\n\n424\n00:23:13,500 --> 00:23:16,690\nWhen you go to Amazon's page you've got a\nsearch box and you can search of products.\n\n425\n00:23:16,690 --> 00:23:18,900\nThey've got a whole inventory\ndatabase somewhere.\n\n426\n00:23:18,900 --> 00:23:21,930\nThe inventory database,\nthat's their data and the web page,\n\n427\n00:23:21,930 --> 00:23:24,440\nthat's their application,\nyou search the database.\n\n428\n00:23:24,440 --> 00:23:26,340\nIn a hadoop cluster we split that.\n\n429\n00:23:26,340 --> 00:23:29,760\nThe database is handled on one set\nof nodes, called the data nodes.\n\n430\n00:23:29,760 --> 00:23:34,330\nAnd then the applications, they're stored\non a separate set of nodes, all right?\n\n431\n00:23:34,330 --> 00:23:39,070\nAnd the application, since it doesn't have\nany data, it doesn't really matter for\n\n432\n00:23:39,070 --> 00:23:42,170\nour end users whether they connect\nto one application node or another.\n\n433\n00:23:42,170 --> 00:23:44,910\nThey can connect to whichever one,\ncuz it's the database they care about.\n\n434\n00:23:45,910 --> 00:23:50,253\nAs our server gets busier,\nwe can clone those application nodes, and\n\n435\n00:23:50,253 --> 00:23:54,373\nmake more, and more, and more of them,\nto handle the resources,\n\n436\n00:23:54,373 --> 00:23:57,625\nto handle the activity of\nour increasing user base.\n\n437\n00:23:57,625 --> 00:24:00,514\nSo during peak time we might\nhave to spawn an extra 20 or\n\n438\n00:24:00,514 --> 00:24:02,910\n30 servers to handle the load.\n\n439\n00:24:02,910 --> 00:24:05,935\nBut then, at the middle of the night,\nwhen users aren't on your site, and\n\n440\n00:24:05,935 --> 00:24:08,961\nthings aren't very busy, We can delete\nsome of those application nodes,\n\n441\n00:24:08,961 --> 00:24:10,230\nand narrow it back down again.\n\n442\n00:24:10,230 --> 00:24:13,740\nWe don't need that many servers\nsupporting our web app anymore.\n\n443\n00:24:13,740 --> 00:24:16,150\nThat's what a hadoop cluster facilitates,\nand\n\n444\n00:24:16,150 --> 00:24:19,400\nthat's what the big data extensions\nworks with inside of VMware.\n\n445\n00:24:19,400 --> 00:24:22,730\nSo, if that's something that you use,\nit's right there, but\n\n446\n00:24:22,730 --> 00:24:24,940\nyou do have to go up to\nthe enterprise edition to get it.\n\n447\n00:24:26,400 --> 00:24:27,600\nReliable memory.\n\n448\n00:24:27,600 --> 00:24:28,950\nReliable memory is a cool,\n\n449\n00:24:28,950 --> 00:24:34,760\nlike an error detection default\nprotection system inside of VMware.\n\n450\n00:24:34,760 --> 00:24:41,410\nAlmost all software these days can detect\nfailures in memory, and then act upon it.\n\n451\n00:24:41,410 --> 00:24:46,110\nThe problem is, they usually detect the\nfailure, when the memory actually fails.\n\n452\n00:24:46,110 --> 00:24:49,820\nBut with reliable memory,\nVMware will try to predict the failure.\n\n453\n00:24:49,820 --> 00:24:51,487\nMemory doesn't normally fail immediately.\n\n454\n00:24:51,487 --> 00:24:56,150\nWhat'll happen is, as you start to write\nto a memory address, it won't stick.\n\n455\n00:24:56,150 --> 00:24:58,640\nAnd your system will detect it and\ncorrect for it.\n\n456\n00:24:58,640 --> 00:25:00,610\nAnd sometimes it'll work,\nand sometimes it won't work.\n\n457\n00:25:00,610 --> 00:25:04,342\nAnd a failure's not detected\nuntil it fails repeatedly.\n\n458\n00:25:04,342 --> 00:25:09,260\nWith VMware it spots, when a memory write\ndoesn't stick and then it corrects it.\n\n459\n00:25:09,260 --> 00:25:10,940\nIt calls it a corrected error.\n\n460\n00:25:10,940 --> 00:25:14,480\nAnd so it tracks those corrected errors,\nand if it sees enough\n\n461\n00:25:14,480 --> 00:25:17,830\ncorrected errors on the same address,\nit just blacklists the address.\n\n462\n00:25:17,830 --> 00:25:18,620\nIt won't use it anymore.\n\n463\n00:25:19,620 --> 00:25:24,130\nIt hasn't hit a non-correctable error,\nright, it was all correctable errors so\n\n464\n00:25:24,130 --> 00:25:26,760\nyour system didn't fault,\nit didn't halt or anything like that.\n\n465\n00:25:26,760 --> 00:25:31,090\nIt kept working but VMware says in\nthe future, there is going to be\n\n466\n00:25:31,090 --> 00:25:34,400\na non-correctable error here, so\nI'll just stop ahead of time.\n\n467\n00:25:34,400 --> 00:25:36,360\nThat's what reliable memory does.\n\n468\n00:25:36,360 --> 00:25:40,930\nIf you're running a mission critical\napplication, you need that.\n\n469\n00:25:40,930 --> 00:25:42,930\nIf you're running just tests,\nlab environment,\n\n470\n00:25:42,930 --> 00:25:45,820\ndev environment,\nyou don't need that kind of reliability.\n\n471\n00:25:45,820 --> 00:25:46,690\nThen you don't need that feature.\n\n472\n00:25:48,540 --> 00:25:52,040\nAll right, that's the Enterprise Edition.\n\n473\n00:25:52,040 --> 00:25:54,710\nEnterprise Plus adds even more.\n\n474\n00:25:54,710 --> 00:25:57,960\nYou'll see Enterprise Plus\nadds the distributed switch.\n\n475\n00:25:57,960 --> 00:26:01,090\nWe have virtual switch support\ninside of vSphere, and\n\n476\n00:26:01,090 --> 00:26:04,080\nit's actually in standard and Enterprise.\n\n477\n00:26:04,080 --> 00:26:09,110\nBut the distributed version, where that\nvirtual switch itself can fail over from\n\n478\n00:26:09,110 --> 00:26:13,900\nhost to host, and operate across multiple\nhosts, that's part of the Enterprise Plus.\n\n479\n00:26:13,900 --> 00:26:16,660\nSo, if you've got very\ncomplex networking needs,\n\n480\n00:26:16,660 --> 00:26:19,450\nthen the Enterprise Plus is\nwhat's gonna facilitate that.\n\n481\n00:26:19,450 --> 00:26:22,610\nWe also have storage and\nprofile driven storage.\n\n482\n00:26:22,610 --> 00:26:25,300\nThese are where we can\ndefine what storage,\n\n483\n00:26:25,300 --> 00:26:28,110\nour Virtual Machines will fall\non based on certain criteria.\n\n484\n00:26:28,110 --> 00:26:31,130\nYou might have some SSD storage,\nyou might have some\n\n485\n00:26:31,130 --> 00:26:34,210\nfiber channel scuzzy drives that\nare super fast, super expensive,\n\n486\n00:26:34,210 --> 00:26:38,270\nand then you might have some cheap\nSATA drives that are slow, but cheap.\n\n487\n00:26:38,270 --> 00:26:39,800\nAnd you got a ton of them.\n\n488\n00:26:39,800 --> 00:26:41,960\nAnd so\nyou can create profiles that define,\n\n489\n00:26:41,960 --> 00:26:44,110\nwhere your VMs go based on\nthe activities they perform.\n\n490\n00:26:45,260 --> 00:26:49,760\nAnother cool think is we get I/O controls,\nas far as network and storage.\n\n491\n00:26:49,760 --> 00:26:53,930\nOn today's computers,\nunless you're doing video encoding,\n\n492\n00:26:53,930 --> 00:26:56,360\nCPU is not normally a bottleneck anymore.\n\n493\n00:26:56,360 --> 00:26:58,800\nAnd RAM, it's not really\na bottleneck anymore either.\n\n494\n00:26:58,800 --> 00:27:01,390\nWe just buy more of it, it's all fast.\n\n495\n00:27:01,390 --> 00:27:03,680\nBut disk, hard drive access,\n\n496\n00:27:03,680 --> 00:27:08,710\nand network, your bandwidth, those\nare two big bottlenecks for most systems.\n\n497\n00:27:08,710 --> 00:27:12,690\nThere's exceptions to every rule, but for\nmost people those are two big bottlenecks.\n\n498\n00:27:12,690 --> 00:27:17,050\nIn Enterprise Plus,\nit gives us a way to apply I/O controls.\n\n499\n00:27:17,050 --> 00:27:21,140\nTo limit the amount of disk access,\nor the amount of, or\n\n500\n00:27:21,140 --> 00:27:26,340\nthe speed of network access for\nour Virtual Machines.\n\n501\n00:27:26,340 --> 00:27:29,680\nFor most people they don't need this,\nbut if you're a service provider,\n\n502\n00:27:29,680 --> 00:27:33,780\nif you're hosting, if you're offering\nvirtual machines to your clients.\n\n503\n00:27:33,780 --> 00:27:36,360\nYou wanna make sure that one\nclient doesn't go crazy and\n\n504\n00:27:36,360 --> 00:27:37,670\nmonopolize your system.\n\n505\n00:27:37,670 --> 00:27:40,440\nSo, you can implement all\nsorts of limits with the I/O\n\n506\n00:27:40,440 --> 00:27:42,840\ncontrols found in Enterprise Plus.\n\n507\n00:27:42,840 --> 00:27:47,630\nSome of the other ones are a little less\nused, host profiles, and auto deploy.\n\n508\n00:27:47,630 --> 00:27:53,000\nThat's for creating, again, if you have\ncustomers like a service provider would.\n\n509\n00:27:53,000 --> 00:27:57,370\nYou can create host profiles, so that you\ncan rapidly deploy more physical machines\n\n510\n00:27:57,370 --> 00:28:01,910\nto meet your needs, and auto deploy for\ndeploying more ESX servers.\n\n511\n00:28:01,910 --> 00:28:04,820\nEither physical ones, there's also\nsome deployment for virtual machines,\n\n512\n00:28:04,820 --> 00:28:06,740\nwe'll see later on.\n\n513\n00:28:06,740 --> 00:28:08,480\nFlash read cache, that's for\n\n514\n00:28:08,480 --> 00:28:13,400\nhaving a supplemental set of solid state\nmemory you can use as a read cache.\n\n515\n00:28:13,400 --> 00:28:16,320\nIt speeds up reads on the drives for\nthe system.\n\n516\n00:28:16,320 --> 00:28:19,340\nAnd then application high availability.\n\n517\n00:28:19,340 --> 00:28:21,740\nI talked about high\navailability way up here.\n\n518\n00:28:21,740 --> 00:28:23,920\nHere I'm talking about\nthe virtual machine.\n\n519\n00:28:23,920 --> 00:28:27,060\nIf a virtual machine fails, we can have\nanother virtual machine that takes its\n\n520\n00:28:27,060 --> 00:28:30,390\nplace immediately,\nkeeping our end users happy, right?\n\n521\n00:28:30,390 --> 00:28:33,120\nBut, that's monitoring\nthe virtual machine itself.\n\n522\n00:28:33,120 --> 00:28:34,740\nWhat if it's not the VM\nthat failed though?\n\n523\n00:28:34,740 --> 00:28:35,690\nWhat if the VM is happy?\n\n524\n00:28:35,690 --> 00:28:39,620\nIt's running Red Hat Linux,\nand Red Hat Linux is fine.\n\n525\n00:28:39,620 --> 00:28:43,300\nBut the Apache Service on it that's\nrunning our website, that failed,\n\n526\n00:28:43,300 --> 00:28:44,210\nall right?\n\n527\n00:28:44,210 --> 00:28:48,210\nIt's the application that failed,\nnot the virtual machine, not the server.\n\n528\n00:28:49,360 --> 00:28:52,720\nWell with App HA,\nwith application high availability,\n\n529\n00:28:52,720 --> 00:28:56,750\nit can actually see into that and\nsee Apache has failed.\n\n530\n00:28:56,750 --> 00:29:00,140\nNot the server, but I still need to bring\nup this other machine to take it's place,\n\n531\n00:29:00,140 --> 00:29:03,030\nbecause if Apaches' not running,\nthen my server's not working.\n\n532\n00:29:03,030 --> 00:29:04,895\nSo, it's not gonna do me any good.\n\n533\n00:29:04,895 --> 00:29:07,350\nSo it can see that and provide that level.\n\n534\n00:29:07,350 --> 00:29:11,270\nAgain, if you're trying to\nhave true 24/7 Service right.\n\n535\n00:29:11,270 --> 00:29:15,790\nOr you're trying to achieve 59s of\navailability app HA is gonna be something\n\n536\n00:29:15,790 --> 00:29:20,020\nyou need, and Enterprise Plus\npackage plus is what has it.\n\n537\n00:29:20,020 --> 00:29:24,770\nSo, those of some of the different\nadditions of vSphere that we can buy.\n\n538\n00:29:24,770 --> 00:29:27,870\nI mention the foundation one,\nan while they don't show it is this chart,\n\n539\n00:29:27,870 --> 00:29:29,610\nthey do show it.\n\n540\n00:29:29,610 --> 00:29:31,890\nLet's see, down here somewhere,\nhere we go.\n\n541\n00:29:31,890 --> 00:29:35,290\nAnd the vSphere Essentials Kits,\nall right?\n\n542\n00:29:35,290 --> 00:29:38,890\nAnd by essentials this is just saying, if\nyou're a small organization just starting\n\n543\n00:29:38,890 --> 00:29:41,610\nto get your feet wet,\nhere's what we need, okay?\n\n544\n00:29:41,610 --> 00:29:45,960\nAnd so you can see here the one\ninstance of vCenter Server Essentials,\n\n545\n00:29:45,960 --> 00:29:48,260\nyou get six CPUs, and\n\n546\n00:29:48,260 --> 00:29:52,750\nthis particular one here you just get\nthe hypervisor and that's it, okay?\n\n547\n00:29:52,750 --> 00:29:55,830\nYou don't get any of the management\nsoftware or any advanced features, but\n\n548\n00:29:55,830 --> 00:29:57,910\nif you go to Essentials Plus, you do.\n\n549\n00:29:57,910 --> 00:30:01,530\nYou start to get vMotion,\nhigh availability, and so on, and\n\n550\n00:30:01,530 --> 00:30:05,890\nthen you can even get the acceleration\nkits that include vCenter.\n\n551\n00:30:05,890 --> 00:30:08,120\nNow, the vCenter version\nthat's included in here,\n\n552\n00:30:08,120 --> 00:30:10,180\nsee how they're saying vCenter Standard?\n\n553\n00:30:10,180 --> 00:30:12,380\nWell, they can come with vCenter Standard,\nbut\n\n554\n00:30:12,380 --> 00:30:14,650\nthey can also come with\nvCenter Foundation.\n\n555\n00:30:14,650 --> 00:30:16,850\nAnd that one comes in two versions.\n\n556\n00:30:16,850 --> 00:30:20,400\nOne that can either manage\njust a single server, and\n\n557\n00:30:20,400 --> 00:30:23,770\nanother that it can only\nmanage three servers.\n\n558\n00:30:23,770 --> 00:30:26,730\nYou gotta be very particular about which\none you buy, to make sure that you\n\n559\n00:30:26,730 --> 00:30:29,700\nget the ones that can support\nthe amount of systems that you've got.\n\n560\n00:30:29,700 --> 00:30:32,480\nThere are several different\nkind of versions of that.\n\n561\n00:30:32,480 --> 00:30:34,910\nThey kind of lay it out here.\n\n562\n00:30:34,910 --> 00:30:37,493\nYou'll see vCenter Server Essentials,\n\n563\n00:30:37,493 --> 00:30:40,600\nvCenter Foundation,\nvCenter Server Standard.\n\n564\n00:30:40,600 --> 00:30:42,820\nAnd standard is the one that\nyou're gonna see on the exam.\n\n565\n00:30:42,820 --> 00:30:44,329\nThat's the one that will\nmanage all your systems.\n\n566\n00:30:47,100 --> 00:30:49,630\nAnother thing to note is that\nvCenter Server Essentials and\n\n567\n00:30:49,630 --> 00:30:52,720\nFoundation, they just do\nthe monitoring piece.\n\n568\n00:30:52,720 --> 00:30:55,300\nThey let you manage your servers,\nall right?\n\n569\n00:30:55,300 --> 00:30:58,840\nBut they won't do things like\nhandle performance reporting,\n\n570\n00:30:58,840 --> 00:31:02,270\nand rapid deployment, and\nsome of those advanced functions.\n\n571\n00:31:02,270 --> 00:31:04,660\nThat's only found in\nvCenter Server Standard.\n\n572\n00:31:06,360 --> 00:31:09,770\nSo, it gets kind of confusing with all\nthe different editions that are out there.\n\n573\n00:31:09,770 --> 00:31:11,780\nIn the show notes when I post them.\n\n574\n00:31:11,780 --> 00:31:13,030\nLet me just bring those up.\n\n575\n00:31:13,030 --> 00:31:14,840\nI went ahead and\njust did kind of a summary.\n\n576\n00:31:14,840 --> 00:31:19,200\nI have the link right there to the\narticle, so you can go and read that PDF,\n\n577\n00:31:19,200 --> 00:31:21,240\nbut I also just broke it down.\n\n578\n00:31:21,240 --> 00:31:27,510\nHere's vSphere Essentials and what you\nget, and what a Central Plus adds.\n\n579\n00:31:27,510 --> 00:31:32,470\nAnd then I did Standard, and Enterprise\nand Enterprise Plus, adding in what\n\n580\n00:31:32,470 --> 00:31:36,770\neach one adds, that extra functionality so\nyou can kind of get an idea.\n\n581\n00:31:36,770 --> 00:31:39,810\nPut in here a note about,\nwith the operations management,\n\n582\n00:31:39,810 --> 00:31:43,030\nadds vCenter Server,\nEssentials Foundation or Standard.\n\n583\n00:31:43,030 --> 00:31:44,620\nSo you can see each one of those.\n\n584\n00:31:44,620 --> 00:31:48,200\nSo, if you're trying to rapidly scribble\ndown notes, don't worry about it.\n\n585\n00:31:48,200 --> 00:31:49,471\nIt'll be in the show.\n\n586\n00:31:49,471 --> 00:31:56,043\nAll right, well, that's kind of\na boring part to kick off the show.\n\n587\n00:31:56,043 --> 00:31:58,749\nBut, it is important that, we understand\nthe products that are available and\n\n588\n00:31:58,749 --> 00:32:00,210\nthe different versions and iterations.\n\n589\n00:32:00,210 --> 00:32:02,590\nSo, that's enough about that.\n\n590\n00:32:02,590 --> 00:32:04,619\nWhat we're gonna look at\nthe rest of the show,\n\n591\n00:32:04,619 --> 00:32:08,460\nis we're gonna take a look at vCenter,\nthat centralized management server.\n\n592\n00:32:08,460 --> 00:32:11,700\nI wanna show you guys how to get it\ninstalled, and how to do the initial\n\n593\n00:32:11,700 --> 00:32:15,280\nconfiguration on it to get the ball\nrolling and get our systems in place.\n\n594\n00:32:15,280 --> 00:32:17,600\nAll right, so let's stop here and\ntake a break.\n\n595\n00:32:17,600 --> 00:32:20,437\nAnd when we get back,\nwe're gonna install vCenter.\n\n596\n00:32:20,437 --> 00:32:27,443\n[MUSIC]\n\n597\n00:32:27,443 --> 00:32:28,040\nAll right.\n\n598\n00:32:28,040 --> 00:32:29,400\nWelcome back, everybody.\n\n599\n00:32:29,400 --> 00:32:33,265\nSo now what we're gonna do is we're\ngonna take a look at installing vCenter.\n\n600\n00:32:34,400 --> 00:32:39,630\nI'm gonna break from our\nregularly scheduled programming.\n\n601\n00:32:39,630 --> 00:32:43,070\nOne of the things I was talking to\nthe guys during the break about is we just\n\n602\n00:32:43,070 --> 00:32:47,980\ntalked about all those different packages\nthat you can purchase VMware as, and I\n\n603\n00:32:47,980 --> 00:32:52,140\nmentioned how VMware is expensive and all\nbut I never actually said anything about\n\n604\n00:32:52,140 --> 00:32:56,940\na price and the pricing guide actually\ndoesn't include pricing, which is funny.\n\n605\n00:32:56,940 --> 00:33:00,990\nBut VMWare does post the pricing for\ntheir products right on their website and\n\n606\n00:33:00,990 --> 00:33:02,440\nso I just wanna show this.\n\n607\n00:33:02,440 --> 00:33:06,620\nNow keep in mind this could absolutely\nbe out of date by the time you see it,\n\n608\n00:33:06,620 --> 00:33:09,470\neven if you're watching it live it could\nalready be out of date, who knows, so\n\n609\n00:33:09,470 --> 00:33:12,080\nmake sure you check with\nthe VMware webpage, but\n\n610\n00:33:12,080 --> 00:33:15,080\nif you go to\nvmware.com/products/vsphear/pricing\n\n611\n00:33:15,080 --> 00:33:20,540\nthey've got the pricing for\nthe various editions that are there.\n\n612\n00:33:20,540 --> 00:33:24,005\nAnd so\nif you want VMware Vsphear standard.\n\n613\n00:33:24,005 --> 00:33:26,281\nIt's $1,000.\n\n614\n00:33:26,281 --> 00:33:33,160\nA $1,000 and that gets you the six\nCPUs of processing power and so on.\n\n615\n00:33:33,160 --> 00:33:37,270\nThat covers that, notice that they have\ngot support agreements like basic and\n\n616\n00:33:37,270 --> 00:33:38,220\nproduction.\n\n617\n00:33:38,220 --> 00:33:42,650\nThe difference there is basically\nhow rapid your response time is and\n\n618\n00:33:42,650 --> 00:33:44,330\nthese prices are fairly common.\n\n619\n00:33:44,330 --> 00:33:49,280\nIt's usually about 20 to 25% of\nthe cost of the product is what your\n\n620\n00:33:49,280 --> 00:33:51,480\nannual maintenance is,\nif you want maintenance.\n\n621\n00:33:51,480 --> 00:33:54,060\nIf you don't, you can just buy\nthe product and then that's it but\n\n622\n00:33:54,060 --> 00:33:58,200\nyou won't get any support or updates so\nmore people are going to want that.\n\n623\n00:33:58,200 --> 00:34:03,938\nIf you want Enterprise the price jumps up\na good bit to about $2800 and if you go\n\n624\n00:34:03,938 --> 00:34:09,864\nEnterprise Plus which will get you every\nsingle feature they have it is $3500.\n\n625\n00:34:09,864 --> 00:34:13,170\nNow remember all these are licensed\nthat are basically six CPU's so\n\n626\n00:34:13,170 --> 00:34:14,100\nkeep that in mind.\n\n627\n00:34:14,100 --> 00:34:16,820\nAnd that's physical CPUs not chorus.\n\n628\n00:34:16,820 --> 00:34:20,320\nYou're really just adding software\nfeatures here, not adding more CPUs.\n\n629\n00:34:20,320 --> 00:34:23,810\nYou just have to buy more\nlicenses to cover more CPUs.\n\n630\n00:34:23,810 --> 00:34:27,970\nNow, the essential side, which is designed\nfor small businesses and organizations,\n\n631\n00:34:27,970 --> 00:34:32,800\nif you just want the essentials kit,\nwhich is just the hypervisor, it's $500.\n\n632\n00:34:32,800 --> 00:34:35,710\nBut if start jumping up\nto like essentials plus.\n\n633\n00:34:35,710 --> 00:34:39,526\nSee how that price skyrocket, and\nthe difference there is vCenter,\n\n634\n00:34:39,526 --> 00:34:44,032\nvCenter is a large part of the cost\nbeing able to manage that.\n\n635\n00:34:44,032 --> 00:34:46,780\nAll right you know I'm kind of glad\nthis little message popped up.\n\n636\n00:34:46,780 --> 00:34:50,728\nI just got a message telling me that I've\nonly got fifty-six days left in my VMware\n\n637\n00:34:50,728 --> 00:34:52,080\nevaluation.\n\n638\n00:34:52,080 --> 00:34:54,730\nDuring the show, I'm actually\nusing a lot of lab equipment so\n\n639\n00:34:54,730 --> 00:34:57,060\nI've got about six servers set up for\nthis show.\n\n640\n00:34:57,060 --> 00:34:59,090\nAnd I'm running them\nall on evaluation mode.\n\n641\n00:34:59,090 --> 00:35:02,480\nIf you just want to practice, and\nlearn VMware, you don't have to buy it.\n\n642\n00:35:02,480 --> 00:35:08,020\nYou don't have to jump in and drop $500\njust for that or to learn the whole thing.\n\n643\n00:35:08,020 --> 00:35:12,390\nYou don't have to drop a ton of money,\nyou can sign up on VMware's website and\n\n644\n00:35:12,390 --> 00:35:13,890\nget a free evaluation.\n\n645\n00:35:13,890 --> 00:35:17,710\nThey'll let you download all the various\nproducts to be able to use to see it.\n\n646\n00:35:17,710 --> 00:35:20,900\nAnd they give you a 60 day license.\n\n647\n00:35:20,900 --> 00:35:24,780\nYou can run the software unlicensed for\n60 days, which is perfect for\n\n648\n00:35:24,780 --> 00:35:27,020\nlearning and practicing.\n\n649\n00:35:27,020 --> 00:35:29,980\nDon't let these costs deter you\nfrom setting up your own lab.\n\n650\n00:35:29,980 --> 00:35:30,970\nTake advantage of it.\n\n651\n00:35:32,450 --> 00:35:36,530\nAll right, so I just wanted to\nhighlight that real quick, and\n\n652\n00:35:36,530 --> 00:35:39,190\nif you wanna buy vCenter by itself,\nhere they have their pricing.\n\n653\n00:35:39,190 --> 00:35:45,169\nThe vCenter Foundation, which would\nmanage up to three servers, is $1500.\n\n654\n00:35:45,169 --> 00:35:48,770\nBut if you want the big one, it is $5000,\nso it starts to add up pretty fast.\n\n655\n00:35:50,960 --> 00:35:51,580\nAll right.\n\n656\n00:35:51,580 --> 00:35:53,580\nSorry, I just wanted to kind\nof deviate a bit there.\n\n657\n00:35:53,580 --> 00:35:54,980\nI know we had talked about pricing but\n\n658\n00:35:54,980 --> 00:35:57,150\nI didn't actually show any, so\nI just wanted to kind of cover that.\n\n659\n00:35:57,150 --> 00:35:58,750\nObviously not something\nthat's on the exam.\n\n660\n00:36:00,040 --> 00:36:03,800\nAll right, but what we are gonna talk\nabout is installing vCenter, all right?\n\n661\n00:36:03,800 --> 00:36:08,130\nvCenter, may or may not be\nthe first product that you install.\n\n662\n00:36:08,130 --> 00:36:11,780\nI mentioned that vCenter is that central\nmanagement software that's gonna allow us\n\n663\n00:36:11,780 --> 00:36:16,640\nto control our hosts,\nour ESX servers, all right.\n\n664\n00:36:16,640 --> 00:36:19,900\nBut there's really three\ndifferent ways we can deploy it.\n\n665\n00:36:19,900 --> 00:36:23,810\nAnd depending on which way you choose,\nyou may not install vCenter first.\n\n666\n00:36:23,810 --> 00:36:25,829\nYou may actually install ESX first,\nall right?\n\n667\n00:36:27,040 --> 00:36:30,050\nThe recommended method for\n\n668\n00:36:30,050 --> 00:36:36,170\ndealing with vCenter server is to install\nit on its own dedicated hardware.\n\n669\n00:36:36,170 --> 00:36:41,010\nAll right, to have a server that's\nrunning a supported operating system and\n\n670\n00:36:41,010 --> 00:36:44,100\ninstall vCenter server right on top of it,\nall right.\n\n671\n00:36:44,100 --> 00:36:45,500\nNow that's kind of counter-intuitive.\n\n672\n00:36:45,500 --> 00:36:48,140\nYou're like wait a minute VMware\nis a virtualization company\n\n673\n00:36:48,140 --> 00:36:50,030\nshouldn't I install the software in a VM?\n\n674\n00:36:50,030 --> 00:36:52,110\nWell you can, you certainly can.\n\n675\n00:36:52,110 --> 00:36:56,700\nBut because this is the software\nthat's managing your ESX,\n\n676\n00:36:56,700 --> 00:37:00,890\nif you run it on top of ESX, there's\nalways a chance that something could\n\n677\n00:37:00,890 --> 00:37:03,220\nhappen to make vCenter not available.\n\n678\n00:37:03,220 --> 00:37:05,890\nAnd if that happens, now you can't\nmanage your machines very well.\n\n679\n00:37:05,890 --> 00:37:09,000\nSo it creates a risky situation.\n\n680\n00:37:09,000 --> 00:37:12,800\nThe recommended method in\na mission-critical environment,\n\n681\n00:37:12,800 --> 00:37:17,060\nis to deploy vCenter server on\nits own dedicated hardware.\n\n682\n00:37:17,060 --> 00:37:21,330\nAnd if you're doing that, vCenter will\nbe the first product that you install.\n\n683\n00:37:21,330 --> 00:37:23,780\nAnd that's why we cover it first,\nall right.\n\n684\n00:37:23,780 --> 00:37:27,130\nHowever, if you're in a small or\nmedium environment, or\n\n685\n00:37:27,130 --> 00:37:30,050\neven an Enterprise environment\nthat's just not mission-critical,\n\n686\n00:37:30,050 --> 00:37:35,200\nyou may choose to run vCenter server in\na VM, in a virtual machine, all right?\n\n687\n00:37:35,200 --> 00:37:38,020\nAnd if that's the case,\nyou just create a virtual machine running\n\n688\n00:37:38,020 --> 00:37:41,200\nsupported operating system, and\nyou install vCenter inside of it.\n\n689\n00:37:41,200 --> 00:37:43,280\nThat's actually what I'm\ngonna do here in the show.\n\n690\n00:37:44,480 --> 00:37:47,430\nIf that's the case,\nif you're gonna be running in the VM.\n\n691\n00:37:47,430 --> 00:37:50,235\nYou probably need to install ESX first,\nright?\n\n692\n00:37:50,235 --> 00:37:52,670\nCuz you can't run a virtual\nmachine without a hypervisor, and\n\n693\n00:37:52,670 --> 00:37:56,480\nso ESX would be the first product\nthat you'd install, right?\n\n694\n00:37:56,480 --> 00:38:03,360\nThere is a third option, and that is to\ninstall the vCenter appliance, all right?\n\n695\n00:38:03,360 --> 00:38:06,430\nThe appliance is not a hardware appliance,\nit's a virtual appliance,\n\n696\n00:38:06,430 --> 00:38:10,930\nyou can go to VMware's website, and\ndownload their vCenter appliance.\n\n697\n00:38:10,930 --> 00:38:15,580\nAnd what it is a server that's already\nrunning vCenter and you just take that\n\n698\n00:38:15,580 --> 00:38:19,750\nvirtual machine image and you deploy\nonto one of your existing ESX boxes.\n\n699\n00:38:19,750 --> 00:38:21,827\nYou can instantly bring up vCenter.\n\n700\n00:38:21,827 --> 00:38:22,610\nAll right?\n\n701\n00:38:22,610 --> 00:38:26,880\nThere's really no difference between\nrunning vCenter as an appliance, or\n\n702\n00:38:26,880 --> 00:38:29,880\nrunning it as a VM, or\nrunning it on dedicated hardware.\n\n703\n00:38:29,880 --> 00:38:33,570\nAll three give you the exact same\nfunctionality and give you full vCenter.\n\n704\n00:38:34,780 --> 00:38:38,800\nThe differences are these, running it on\ndedicated hardware ensures you'll always\n\n705\n00:38:38,800 --> 00:38:41,290\nbe able to get to it,\neven if your ESX boxes are down.\n\n706\n00:38:42,730 --> 00:38:45,350\nRunning the appliance from VMware,\n\n707\n00:38:45,350 --> 00:38:48,550\nensures that you'll get\nthe best support from VMware.\n\n708\n00:38:48,550 --> 00:38:52,450\nBecause if there is any underlying problem\nwith the OS or database, well, they're\n\n709\n00:38:52,450 --> 00:38:56,000\nthe ones that set it up and so they'll\nsupport it, they'll deal with that.\n\n710\n00:38:56,000 --> 00:38:58,130\nBut if you run your own virtual machine,\nand\n\n711\n00:38:58,130 --> 00:39:02,340\nyou set up your own database server and\nall that, there may be issues that VMware\n\n712\n00:39:02,340 --> 00:39:05,140\ncan't support because they\ndidn't set it up, you did.\n\n713\n00:39:05,140 --> 00:39:06,870\nAnd so\nthere may be issues where that arises.\n\n714\n00:39:06,870 --> 00:39:11,400\nNow, I've been dealing with this for many\nyears, and I've never had that happen.\n\n715\n00:39:11,400 --> 00:39:14,870\nThe VMware support guys have always\nbent over backwards for me to help.\n\n716\n00:39:14,870 --> 00:39:17,960\nEven with software they didn't set up,\nso they're really great about it.\n\n717\n00:39:17,960 --> 00:39:19,130\nBut just for the record,\n\n718\n00:39:19,130 --> 00:39:22,750\nthat's the official differentiation\nbetween the three solutions.\n\n719\n00:39:22,750 --> 00:39:26,460\nAll right, when I deploy VMware\nin an Enterprise environment,\n\n720\n00:39:26,460 --> 00:39:28,600\nI deploy vCenter on dedicated hardware,\nit's what I do.\n\n721\n00:39:28,600 --> 00:39:31,200\nI build it into the cost so\nthat when we do our initial quote,\n\n722\n00:39:31,200 --> 00:39:33,790\npurchase the software I'd\npurchase hardware for vCenter.\n\n723\n00:39:33,790 --> 00:39:34,560\nThat's usually what I'd do.\n\n724\n00:39:34,560 --> 00:39:36,290\nAnd I usually deploy two of them for\nredundancy.\n\n725\n00:39:37,860 --> 00:39:40,860\nIf you're in a small environment,\nthough, that adds up really quickly.\n\n726\n00:39:40,860 --> 00:39:44,700\nAnd so for somebody like us here\nat IT Pro TV we don't need that.\n\n727\n00:39:44,700 --> 00:39:47,390\nWe don't need that mission\ncritical site here in our studio.\n\n728\n00:39:47,390 --> 00:39:50,320\nAnd so we might choose to deploy\nit in a virtual machine or\n\n729\n00:39:50,320 --> 00:39:52,190\nuse the appliance from VMware, either one.\n\n730\n00:39:53,300 --> 00:39:57,090\nAll right, in my show notes,\nwhen I post them, I'll actually post.\n\n731\n00:39:57,090 --> 00:40:01,543\nLet's see, I got it right around\nhere somewhere, I'll post the link.\n\n732\n00:40:01,543 --> 00:40:03,090\nI got the link around here somewhere,\nhere.\n\n733\n00:40:03,090 --> 00:40:05,320\nThe link for the appliance,\nI'll post it right there.\n\n734\n00:40:05,320 --> 00:40:09,706\nIf you wanna go and check that out,\nYou can jump over to vmware's website, and\n\n735\n00:40:09,706 --> 00:40:11,580\nthey got where you can download.\n\n736\n00:40:11,580 --> 00:40:12,930\nI've got it right here.\n\n737\n00:40:12,930 --> 00:40:16,460\nSo, here's the downloading and\ndeploying the vCenter Server Appliance.\n\n738\n00:40:16,460 --> 00:40:19,870\nAnd they've got, in their knowledge bases,\nthey always have really nice little\n\n739\n00:40:19,870 --> 00:40:23,220\nvideos, that explain what's going on, or\nyou can just jump right down and read it.\n\n740\n00:40:23,220 --> 00:40:25,940\nAnd they give information there\nabout downloading the file.\n\n741\n00:40:25,940 --> 00:40:27,540\nThe file's an OVA file,\n\n742\n00:40:27,540 --> 00:40:31,270\nwhich is a generic virtual machine\nfile that can be imported into vmware.\n\n743\n00:40:31,270 --> 00:40:35,320\nYou can import it into Zen server or other\ntype of virtualization platforms, but\n\n744\n00:40:35,320 --> 00:40:39,420\nit's not supported so, they really want\nyou to deploy it right into vmware.\n\n745\n00:40:39,420 --> 00:40:42,610\nInto EXS, all right?\n\n746\n00:40:42,610 --> 00:40:44,640\nSo that's another way,\nthat we can deploy it.\n\n747\n00:40:44,640 --> 00:40:46,430\nNow if we're doing the server ourself,\n\n748\n00:40:46,430 --> 00:40:49,630\nwhether we're deploying into a virtual\nmachine or into dedicated hardware.\n\n749\n00:40:49,630 --> 00:40:52,860\nThere are some system requirements\nthat we need to meet, and\n\n750\n00:40:52,860 --> 00:40:54,330\nI'll post the link to this one too.\n\n751\n00:40:54,330 --> 00:40:57,210\nBut, it's basically boiled\ndown to a couple of things.\n\n752\n00:40:57,210 --> 00:41:01,292\nThe system requirements when you read\nthem, they're a little misleading,\n\n753\n00:41:01,292 --> 00:41:04,260\nall right it's a little bit confusing,\nbecause you'll look at it and\n\n754\n00:41:04,260 --> 00:41:09,640\nit'll say something like, memory, 4 gigs\nof ram, or processor, X86 processor.\n\n755\n00:41:09,640 --> 00:41:12,300\nRight, which would be\nbasically a 32-bit processor.\n\n756\n00:41:12,300 --> 00:41:15,590\nBut, you'll find in practice\nthat these are not enough.\n\n757\n00:41:15,590 --> 00:41:17,420\nAnd the reason is,\nwhat they're doing here is they're saying,\n\n758\n00:41:17,420 --> 00:41:19,930\nthese are the minimum\nrequirements just for\n\n759\n00:41:19,930 --> 00:41:23,110\nthe base vCenter Server product itself.\n\n760\n00:41:23,110 --> 00:41:25,010\nThey're not including your host OS.\n\n761\n00:41:25,010 --> 00:41:26,500\nThey're not including the database.\n\n762\n00:41:26,500 --> 00:41:31,590\nThey're not even including the other\nvSphere services like Single SignOn and\n\n763\n00:41:31,590 --> 00:41:32,790\nthose resources.\n\n764\n00:41:32,790 --> 00:41:35,400\nSo, they're really talking about Just\n\n765\n00:41:35,400 --> 00:41:38,480\nvCenter Server itself\njust that application.\n\n766\n00:41:38,480 --> 00:41:40,690\nSo, it's easy to get confused on that.\n\n767\n00:41:40,690 --> 00:41:43,890\nThey also list a couple other things,\nhere that are a little bit confusing.\n\n768\n00:41:43,890 --> 00:41:47,520\nSo, what I did is in my notes I went ahead\nand put what was a little more practical,\n\n769\n00:41:47,520 --> 00:41:49,350\nwhat will you actually need, all right?\n\n770\n00:41:49,350 --> 00:41:54,370\nFirst off, you do need a 64-bit processor,\nand the reason is vCenter Server will\n\n771\n00:41:54,370 --> 00:41:58,880\noftentimes require 4 gigs or\nmore of RAM, and\n\n772\n00:41:58,880 --> 00:42:03,940\na 32-bit system just can't\naddress any more than 4 gigs.\n\n773\n00:42:03,940 --> 00:42:07,150\nThe other thing to keep in mind that\nvCenter servers are designed on top of\n\n774\n00:42:07,150 --> 00:42:10,900\nWindows, and\non a 32-bit Windows Operating System,\n\n775\n00:42:10,900 --> 00:42:14,290\nMicrosoft has chosen to\ncap you at 3 gigs of RAM.\n\n776\n00:42:14,290 --> 00:42:18,680\nSo, it's actually even worse with\nMicrosoft with 32-bit systems, so\n\n777\n00:42:18,680 --> 00:42:21,870\nyou need 64-bit processors.\n\n778\n00:42:21,870 --> 00:42:24,520\nYou also need two or more cores.\n\n779\n00:42:24,520 --> 00:42:27,318\nSo, your processor cores,\nyou need to have two or more.\n\n780\n00:42:27,318 --> 00:42:30,350\nSo a dual-core system or greater.\n\n781\n00:42:30,350 --> 00:42:32,900\nThey need to be 2 gigahertz in speed or\nfaster,\n\n782\n00:42:32,900 --> 00:42:35,740\nwhich almost all of them are today,\nall right?\n\n783\n00:42:35,740 --> 00:42:38,270\nYou need really 12 gigs of RAM.\n\n784\n00:42:39,590 --> 00:42:42,480\n12 gigs of RAM to handle the host OS,\n\n785\n00:42:42,480 --> 00:42:47,580\nthe database, the vCenter serve,\nand the varies other products.\n\n786\n00:42:47,580 --> 00:42:51,590\nIf your going to be installing all of this\non one server, you'll need 12 gigs or\n\n787\n00:42:51,590 --> 00:42:53,190\nmore of RAM.\n\n788\n00:42:53,190 --> 00:42:56,680\nBut, we can split it up, the vCenter\nservers are actually made up of\n\n789\n00:42:56,680 --> 00:42:58,750\nfour different components,\nwe'll see here in a minute.\n\n790\n00:42:58,750 --> 00:43:01,050\nYou can see them on four separate\nservers if you wanted, but\n\n791\n00:43:01,050 --> 00:43:05,795\nif you're running them all together,\nyou'll need 12 gigs.\n\n792\n00:43:05,795 --> 00:43:08,570\n40 to 60 gigs of hard drive\nspace is recommended, and\n\n793\n00:43:08,570 --> 00:43:10,800\nthat's not counting our database.\n\n794\n00:43:10,800 --> 00:43:13,880\nThe reason we don't count the database is\nwe don't know how big its going to be.\n\n795\n00:43:13,880 --> 00:43:16,350\nThe more servers you manage, and\n\n796\n00:43:16,350 --> 00:43:20,360\nthe longer historical data you maintain,\nthe bigger that database is going to be.\n\n797\n00:43:20,360 --> 00:43:22,250\nSo you'll need more hard drive space.\n\n798\n00:43:22,250 --> 00:43:26,030\nBut hard drive space is not\nreally expensive anymore.\n\n799\n00:43:26,030 --> 00:43:31,060\nMost servers will have a terabyte of\nstorage, so that's not really a problem.\n\n800\n00:43:32,410 --> 00:43:35,520\nAnd then they recommend a 1\ngigabyte network connection.\n\n801\n00:43:35,520 --> 00:43:39,200\nBecause you're going to be transmitting\ninformation, management information, and\n\n802\n00:43:39,200 --> 00:43:40,360\nthe more bandwidth, the better.\n\n803\n00:43:41,620 --> 00:43:42,680\nJust so you guys know,\n\n804\n00:43:42,680 --> 00:43:47,190\nhere in my lab, I'm never gonna be\nmanaging more than five ESX boxes.\n\n805\n00:43:48,240 --> 00:43:52,550\nSo to manage five ESX boxes, I'm going\nto be deploying vCenter on the server.\n\n806\n00:43:52,550 --> 00:43:56,630\nAnd that server is going to have\n64 gigs of hard drive space, and\n\n807\n00:43:56,630 --> 00:44:00,750\n4 gigs of RAM,\nas well as a single dual core processor.\n\n808\n00:44:00,750 --> 00:44:04,670\nThat's at the lower end\nof the spectrum for\n\n809\n00:44:04,670 --> 00:44:07,700\nwhat vmware's recommending, for\ntheir minimum requirements.\n\n810\n00:44:07,700 --> 00:44:11,210\nBut it'll work fine cuz I'm just\nmanaging five servers, all right?\n\n811\n00:44:11,210 --> 00:44:15,850\nBut if you're managing 100 servers and\nyou've got ten VMs on each, so\n\n812\n00:44:15,850 --> 00:44:20,200\nyou got 1,000 VMs, you're gonna chew\nthrough that memory pretty fast.\n\n813\n00:44:20,200 --> 00:44:23,490\nAnd so you're gonna need a beefier\nvCenter server to handle that.\n\n814\n00:44:23,490 --> 00:44:27,040\nAnd that's also why I say if you\ncan deploy it on physical hardware,\n\n815\n00:44:27,040 --> 00:44:28,960\nyou'll be better off\nthen deploying in a VM,\n\n816\n00:44:28,960 --> 00:44:32,620\nbecause you start to scale\nthat memory up and access up.\n\n817\n00:44:32,620 --> 00:44:36,370\nThat becomes a pretty big virtual\nmachine to be able to maintain.\n\n818\n00:44:36,370 --> 00:44:38,190\nPhysical hardware will\noften times do you better.\n\n819\n00:44:39,690 --> 00:44:42,790\nAll right, I mentioned that\nvCenter runs on top of Windows.\n\n820\n00:44:42,790 --> 00:44:48,010\nWell they specifically support\nWindows server 2008 R2,\n\n821\n00:44:48,010 --> 00:44:50,760\nand Windows Server 2012.\n\n822\n00:44:50,760 --> 00:44:55,650\nWith R2, they support just the straight\nup release to manufacturer as\n\n823\n00:44:55,650 --> 00:44:58,660\nwell as service pack 1 and\nservice pack 2, so those are out there.\n\n824\n00:44:58,660 --> 00:45:01,480\nBut Windows Server 2012 they support.\n\n825\n00:45:01,480 --> 00:45:04,260\nWindows Server 2012 R2 is out.\n\n826\n00:45:04,260 --> 00:45:07,720\nBut vmware hasn't officially\ncertified it yet.\n\n827\n00:45:07,720 --> 00:45:09,510\nI've run it on there, and it was fine, but\n\n828\n00:45:09,510 --> 00:45:11,650\nit's not on their\nofficial matrix just yet.\n\n829\n00:45:11,650 --> 00:45:12,580\nI'm sure it will be soon.\n\n830\n00:45:13,630 --> 00:45:17,690\nAnd I already said it can be installed on\na VM and all that, if you want, all right?\n\n831\n00:45:17,690 --> 00:45:22,260\nSo, if we wanna get this thing set up,\nwe need a Windows Server somewhere.\n\n832\n00:45:22,260 --> 00:45:26,550\nOn a physical machine, on a VM,\nwhatever, we need it there, okay?\n\n833\n00:45:26,550 --> 00:45:32,670\nThen we do the install, we've got to pick\nbetween four components to install, right?\n\n834\n00:45:32,670 --> 00:45:35,400\nWhen you do the install, it will offer\nto do what's called a simple install and\n\n835\n00:45:35,400 --> 00:45:38,200\nthat's where it just puts all four of them\nin one box, and if If you're a small or\n\n836\n00:45:38,200 --> 00:45:39,610\nmedium business, that's fine.\n\n837\n00:45:40,810 --> 00:45:44,690\nBut, if you're a large organization you're\ngonna want to divide this stuff up on\n\n838\n00:45:44,690 --> 00:45:47,890\nthe multiple physical servers to handle\nthe load in your environment, or\n\n839\n00:45:47,890 --> 00:45:50,270\nmultiple VMs if that's\nthe route you're going.\n\n840\n00:45:50,270 --> 00:45:53,020\nThe key component we're worried\nabout is vCenter server.\n\n841\n00:45:53,020 --> 00:45:55,760\nBut, you can't just install\nvCenter server by itself.\n\n842\n00:45:55,760 --> 00:45:58,390\nIt depends on a few other things.\n\n843\n00:45:58,390 --> 00:46:01,140\nOne of the first things we're\ngonna install is this guy.\n\n844\n00:46:01,140 --> 00:46:04,958\nvCenter single sign-on, all right?\n\n845\n00:46:04,958 --> 00:46:08,320\nvCenter uses usernames and\npasswords to authenticate, so\n\n846\n00:46:08,320 --> 00:46:10,870\nyour network admins,\nor your sys-admins, or\n\n847\n00:46:10,870 --> 00:46:14,680\nwhatever, they're gonna need to login to\nvCenter to manage the servers, all right?\n\n848\n00:46:14,680 --> 00:46:19,100\nWell, it has its own user database which\nit can use, and that's fine, but you don't\n\n849\n00:46:19,100 --> 00:46:22,212\nwant people to have additional usernames\nand passwords if they don't need it.\n\n850\n00:46:22,212 --> 00:46:27,380\nSo, vCenter Single Sign-on lets you\nintegrate with other user databases,\n\n851\n00:46:27,380 --> 00:46:29,980\nmost commonly the Windows\nactive directory.\n\n852\n00:46:29,980 --> 00:46:32,210\nSo, you've already got some\nWindows servers in place.\n\n853\n00:46:32,210 --> 00:46:34,260\nYou're gonna have an active directory,\nso your network and\n\n854\n00:46:34,260 --> 00:46:37,670\nsystem admins, they probably already\nhave a username and password there, so\n\n855\n00:46:37,670 --> 00:46:43,180\nwith SSL or single sign-on, we can\nconnect vCenter to the active directory.\n\n856\n00:46:43,180 --> 00:46:47,050\nAnd you can have people use their\nregular Windows username and password.\n\n857\n00:46:47,050 --> 00:46:50,560\nThe nice part about that is,\nif they change their password in Windows,\n\n858\n00:46:50,560 --> 00:46:51,420\nit's now changed here.\n\n859\n00:46:51,420 --> 00:46:54,560\nSo, we don't have to worry about\nstatic passwords or old passwords.\n\n860\n00:46:54,560 --> 00:46:57,150\nThe other thing is if\nan employee gets terminated,\n\n861\n00:46:57,150 --> 00:47:01,060\nwe can just disable their Windows account,\nand that disables them in vCenter also.\n\n862\n00:47:01,060 --> 00:47:03,610\nWe don't have to manage\ntwo separate accounts.\n\n863\n00:47:03,610 --> 00:47:05,950\nSo, it's a great thing to have installed.\n\n864\n00:47:05,950 --> 00:47:09,460\nRegardless of whether you intend to\nintegrate with the active directory,\n\n865\n00:47:09,460 --> 00:47:12,840\nor another service, you still have\nto install the single sign-on piece.\n\n866\n00:47:12,840 --> 00:47:16,950\nEven if you're gonna use the native\nauthentication inside of vCenter,\n\n867\n00:47:16,950 --> 00:47:17,970\nit needs that piece.\n\n868\n00:47:17,970 --> 00:47:19,320\nCuz, it's basically\nintegrating with itself.\n\n869\n00:47:21,330 --> 00:47:23,380\nThen there's the vSphere web client.\n\n870\n00:47:23,380 --> 00:47:29,272\nNow, later on when we install ESX,\nI'm gonna show you the vSphere client.\n\n871\n00:47:29,272 --> 00:47:33,020\nThe vSphere client is a application you\nrun on your own client machine, one\n\n872\n00:47:33,020 --> 00:47:37,800\nyour laptop or desktop, that allows you to\nconnect to ESX and manage it, all right?\n\n873\n00:47:37,800 --> 00:47:43,000\nWell, it is not that it's not\nbeing supported by vmware anymore,\n\n874\n00:47:43,000 --> 00:47:45,640\nbut they're just not adding\na lot of the new features to it.\n\n875\n00:47:45,640 --> 00:47:48,450\nSo they're keeping it up to date so\nit still works, but\n\n876\n00:47:48,450 --> 00:47:50,640\nthey're not adding all\nthe latest stuff to it.\n\n877\n00:47:50,640 --> 00:47:54,580\nSo the vmware client is not\nfully functional anymore,\n\n878\n00:47:54,580 --> 00:47:57,417\nit doesn't have everything, right?\n\n879\n00:47:57,417 --> 00:48:01,790\nBut when we install vCenter,\nwe can install the vSphere Web Client.\n\n880\n00:48:01,790 --> 00:48:05,540\nIt's a Web page you browse through\nthat gives you the full client.\n\n881\n00:48:05,540 --> 00:48:07,370\nAnd it has all the new features.\n\n882\n00:48:07,370 --> 00:48:09,099\nSo as VMware is adding new and\nexiting stuff,\n\n883\n00:48:09,099 --> 00:48:10,950\nthey're adding it to that Web Client.\n\n884\n00:48:10,950 --> 00:48:13,340\nAnd so we very much want to have that.\n\n885\n00:48:13,340 --> 00:48:14,090\nAll right.\n\n886\n00:48:14,090 --> 00:48:17,390\nIf you have a lot of admins,\nthis can be a bit resource intensive and\n\n887\n00:48:17,390 --> 00:48:21,140\nyou'll want to have it on a dedicated\nmachine, but most of us, most companies,\n\n888\n00:48:21,140 --> 00:48:24,940\neven modern companies, will only have\na handful of VM administrators and so\n\n889\n00:48:24,940 --> 00:48:28,120\nthis can commonly be run right\non the same box as V Center.\n\n890\n00:48:28,120 --> 00:48:32,460\nIt is a web-based application that\nthen gives you the ability to control\n\n891\n00:48:32,460 --> 00:48:34,539\nall of your servers,\nall of your ESX boxes.\n\n892\n00:48:36,130 --> 00:48:38,800\nThe next thing is vCenter\nInventory Service.\n\n893\n00:48:38,800 --> 00:48:42,180\nWhen you fire up your client they\nneed to be able to connect and\n\n894\n00:48:42,180 --> 00:48:45,100\nsee the vCenter Server and\nto see the Single Sign-On server and\n\n895\n00:48:45,100 --> 00:48:49,300\nthese different related items that\nbuild up the vSphere environment.\n\n896\n00:48:49,300 --> 00:48:52,080\nAnd the inventory service is\nwhat let's us see all that.\n\n897\n00:48:52,080 --> 00:48:56,810\nIt kind of creates like a directory, it\ncatalogs all the different equipment and\n\n898\n00:48:56,810 --> 00:49:01,000\nthe other resources and software that's\nin place in your V sphere deployment.\n\n899\n00:49:01,000 --> 00:49:03,970\nSo that's another piece that maintains\na little database where it keeps\n\n900\n00:49:03,970 --> 00:49:05,000\ntrack of all of that.\n\n901\n00:49:05,000 --> 00:49:07,710\nI say little, it's not terribly big.\n\n902\n00:49:07,710 --> 00:49:09,010\nIf the performance logs and\n\n903\n00:49:09,010 --> 00:49:11,100\nstuff like that that really\nstart to take up a lot of space.\n\n904\n00:49:12,420 --> 00:49:14,990\nAnd then the final component\nis that V center server.\n\n905\n00:49:14,990 --> 00:49:16,420\nThat's the actual work horse.\n\n906\n00:49:16,420 --> 00:49:20,660\nThat's the one that's doing the job of\nreaching out and managing these ESX boxes.\n\n907\n00:49:20,660 --> 00:49:24,430\nIt's the one that's initiating V motion\nfail overs and all that good stuff.\n\n908\n00:49:24,430 --> 00:49:26,860\nIt's the one that really does the work.\n\n909\n00:49:26,860 --> 00:49:30,880\nBut it's really doing it in\ntandem with these other guys.\n\n910\n00:49:30,880 --> 00:49:34,510\nSo when we do the install if you're going\non a single server you're going to install\n\n911\n00:49:34,510 --> 00:49:35,940\nall four of these.\n\n912\n00:49:35,940 --> 00:49:38,510\nBut if you're scaling\nlarge you'll break it up.\n\n913\n00:49:38,510 --> 00:49:40,690\nAnd you can move these later on.\n\n914\n00:49:40,690 --> 00:49:42,960\nSo, if you deploy them all in\none box today that's fine.\n\n915\n00:49:42,960 --> 00:49:48,370\nAnd then maybe two years from now you've\ngrown so much that server's getting slow.\n\n916\n00:49:48,370 --> 00:49:50,360\nWell, you can move elements\noff to another piece.\n\n917\n00:49:50,360 --> 00:49:52,930\nYou can always change your mind later and\nbreak it up.\n\n918\n00:49:52,930 --> 00:49:56,690\nIt's actually hard to go from\nmultiple servers down to one,\n\n919\n00:49:56,690 --> 00:49:58,770\nbut it's pretty easy to go\nfrom one server to multiple.\n\n920\n00:49:58,770 --> 00:50:03,250\nSo I usually start with one, and\nthen split it up as needed from there.\n\n921\n00:50:04,910 --> 00:50:05,590\nAll right.\n\n922\n00:50:05,590 --> 00:50:07,420\nSo when we go to do our install,\n\n923\n00:50:07,420 --> 00:50:10,780\nthat's one of the things we're going to be\nconfronted with, is picking what we want.\n\n924\n00:50:10,780 --> 00:50:11,520\nAll right.\n\n925\n00:50:11,520 --> 00:50:15,300\nNow, I mentioned the base operating\nsystem needs to be Windows.\n\n926\n00:50:15,300 --> 00:50:18,400\nWindows server 2008 R2 or\nWindows server 2012.\n\n927\n00:50:18,400 --> 00:50:21,240\nBut there are some other prerequisites.\n\n928\n00:50:21,240 --> 00:50:22,050\nAnd VMware,\n\n929\n00:50:22,050 --> 00:50:25,260\nthey have a nice little knowledge\nbased article that lays them all out.\n\n930\n00:50:25,260 --> 00:50:25,880\nAnd I'll tell you,\n\n931\n00:50:25,880 --> 00:50:31,220\nthis article, it's the installing vCenter\nserver 5.5 best practices article.\n\n932\n00:50:31,220 --> 00:50:34,820\nAnd if you read through it, there's\nsome really good information in here.\n\n933\n00:50:34,820 --> 00:50:38,300\nBut there is a ton of it as\nfar as the requirements for\n\n934\n00:50:38,300 --> 00:50:40,630\neach of the four independent pieces.\n\n935\n00:50:40,630 --> 00:50:45,270\nAnd then breakdowns of your server and\nnetwork card and all sorts of resources.\n\n936\n00:50:45,270 --> 00:50:49,492\nIt is a long, long article that lays out\neverything you need to do ahead of time.\n\n937\n00:50:49,492 --> 00:50:53,090\nAll right, so I've boiled down some of\nthe key components of what we're actually\n\n938\n00:50:53,090 --> 00:50:54,070\ngoing to need to worry about.\n\n939\n00:50:54,070 --> 00:50:56,190\nIt's not so bad, right.\n\n940\n00:50:56,190 --> 00:51:00,420\nFirst off, if we're using firewalls\nin between our internal hosts,\n\n941\n00:51:00,420 --> 00:51:07,195\nyou need to have TCP port 902 and\n903 available incoming and outgoing\n\n942\n00:51:07,195 --> 00:51:12,145\nbetween the V Center server and any ESX\nbox that you plan on managing, all right.\n\n943\n00:51:12,145 --> 00:51:14,949\nThose are the ports that it\nuses to do the communications.\n\n944\n00:51:16,110 --> 00:51:19,640\nIt also makes extensive use of host names,\nespecially with IPv6.\n\n945\n00:51:19,640 --> 00:51:20,830\nAll right?\n\n946\n00:51:20,830 --> 00:51:25,050\nBut even with IPv4 we use host\nnames a lot and it uses forward and\n\n947\n00:51:25,050 --> 00:51:27,000\nreverse DNS lookups.\n\n948\n00:51:27,000 --> 00:51:30,110\nSo when you give names to these servers,\nyou don't want to just pick fake names.\n\n949\n00:51:30,110 --> 00:51:33,500\nYou need to pick names that\nare entered into your DNS servers\n\n950\n00:51:33,500 --> 00:51:37,060\nthey don't have to be publicly resolvable,\njust internally resolvable.\n\n951\n00:51:37,060 --> 00:51:40,680\nSo that the V center server\ncan find the ESX boxes.\n\n952\n00:51:42,050 --> 00:51:44,160\nWe also need to make sure\nour clocks are synchronized.\n\n953\n00:51:44,160 --> 00:51:48,190\nAnd I know that sounds kind of silly but\nthe VMware servers, the V center servers,\n\n954\n00:51:48,190 --> 00:51:49,915\nthey're doing authentication.\n\n955\n00:51:49,915 --> 00:51:53,750\nAnd that authentication, is using a time\nstamp as a part of that communication and\n\n956\n00:51:53,750 --> 00:51:57,260\nif those clocks don't match it will\nlook like someone is performing a man\n\n957\n00:51:57,260 --> 00:52:00,700\nin the middle attack and it will\ncause the systems not to communicate.\n\n958\n00:52:00,700 --> 00:52:03,500\nSo having something like\na network time protocol server and\n\n959\n00:52:03,500 --> 00:52:05,860\nNTP server will solve that, right.\n\n960\n00:52:05,860 --> 00:52:08,520\nAnd its pretty easy to set that up,\nit used to be hard but\n\n961\n00:52:08,520 --> 00:52:10,210\nnow they've actually make it pretty easy.\n\n962\n00:52:10,210 --> 00:52:12,270\nTo be able to reach out,\nset that clock and\n\n963\n00:52:12,270 --> 00:52:13,930\nget things synchronized on your systems.\n\n964\n00:52:13,930 --> 00:52:19,060\nAll right, when you're installing\nvCenter on your Windows Box,\n\n965\n00:52:19,060 --> 00:52:22,800\nthe account doing the install needs to\nbe an administrator on that machine.\n\n966\n00:52:22,800 --> 00:52:26,320\nSo you've got to have admin access\non that machine to do the install.\n\n967\n00:52:26,320 --> 00:52:29,460\nYou don't necessarily have to be a domain\nadmin,in the active directory, but\n\n968\n00:52:29,460 --> 00:52:32,230\nyou do need to be an administrator\non that specific machine.\n\n969\n00:52:33,400 --> 00:52:37,480\nAlso the dot net framework\n3.5 needs to be installed.\n\n970\n00:52:37,480 --> 00:52:40,800\nAnd in Windows server 2008 and\nin 2012 it's different than it used to be.\n\n971\n00:52:40,800 --> 00:52:44,850\nYou used to just go and download it\nfrom the Microsoft site but in 2008 and\n\n972\n00:52:44,850 --> 00:52:48,980\n2012 it's actually a part of the OS,\nit's just not turned on by default.\n\n973\n00:52:48,980 --> 00:52:50,260\nSo we just have to turn it on, right.\n\n974\n00:52:50,260 --> 00:52:52,980\nSo that's a little step we\nneed to do before hand.\n\n975\n00:52:54,270 --> 00:52:55,510\nIf you try and download it and\n\n976\n00:52:55,510 --> 00:52:58,380\ninstall it it won't work it'll give you\nsome weird errors so you've got to do it\n\n977\n00:52:58,380 --> 00:53:01,340\nas a additional feature I'll show you\nhow when we actually set this up.\n\n978\n00:53:02,966 --> 00:53:05,780\nIf your going to be using single\nsign on with an active directory\n\n979\n00:53:05,780 --> 00:53:07,880\nthen the machine needs to be\njoined to a domain alright so\n\n980\n00:53:07,880 --> 00:53:11,140\nyou've got to join it to a domain ahead\nof time before doing the install I have\n\n981\n00:53:12,450 --> 00:53:16,050\nheard of people doing it after the fact,\nI've never had luck with that.\n\n982\n00:53:16,050 --> 00:53:19,210\nI've had a lot of problems getting it, I'd\nrather things work right the first time\n\n983\n00:53:19,210 --> 00:53:23,110\nit's always best to join\nto the domain first.\n\n984\n00:53:23,110 --> 00:53:26,200\nAnd then you need a database,\nnow the database,\n\n985\n00:53:26,200 --> 00:53:29,020\nit varies based on how many machines\nyou're going to be managing.\n\n986\n00:53:29,020 --> 00:53:30,420\nIf you have a small environment like mine,\n\n987\n00:53:30,420 --> 00:53:34,310\nI'm just going to like five servers,\nwell, when I do the install,\n\n988\n00:53:34,310 --> 00:53:39,550\nit will actually install Microsoft\nsequel sever 2008 express edition.\n\n989\n00:53:39,550 --> 00:53:42,500\nThat's a free version of\nMicrosoft sequel server\n\n990\n00:53:42,500 --> 00:53:46,150\nthat will more than suit my needs for\na smaller environment here.\n\n991\n00:53:46,150 --> 00:53:48,810\nBut if you've got a large environment\nwith large amounts of hosts and\n\n992\n00:53:48,810 --> 00:53:53,340\nthousands of VMs, sequel server express\nedition, it's not really tuned for\n\n993\n00:53:53,340 --> 00:53:57,120\nperformance, so it can start to create\nsome problems with exchanging the data and\n\n994\n00:53:57,120 --> 00:53:58,840\ngetting things the way you want.\n\n995\n00:53:58,840 --> 00:54:02,570\nSo you may choose to set up\nyour own database server.\n\n996\n00:54:02,570 --> 00:54:05,960\nWell, VMware only supports\nfour database servers,\n\n997\n00:54:05,960 --> 00:54:08,890\nMicrosoft Sequel 2005, 2008, and 2012.\n\n998\n00:54:08,890 --> 00:54:14,210\nAnd they also support Oracle 11g,\nall right, very specific there,\n\n999\n00:54:14,210 --> 00:54:18,860\nnot 10g or i, or any of the other guys,\njust 11g that's the only one, all right?\n\n1000\n00:54:18,860 --> 00:54:21,860\nSo if you're running one of those four\ndatabases you can have your own dedicated\n\n1001\n00:54:21,860 --> 00:54:24,930\ndatabase server and you can tune\nperformance, sky is the limits, right?\n\n1002\n00:54:24,930 --> 00:54:26,310\nYou can have all the fun you want there.\n\n1003\n00:54:27,620 --> 00:54:30,670\nA lot of organizations might already\nhave a dedicated database server that's\n\n1004\n00:54:30,670 --> 00:54:32,020\npowerfully tuned.\n\n1005\n00:54:32,020 --> 00:54:33,100\nYou can use that.\nYou don't have to\n\n1006\n00:54:33,100 --> 00:54:34,270\ncreate a new one if you don't want to.\n\n1007\n00:54:35,690 --> 00:54:38,620\nIf you're doing your own database\nserver like this you'll need to create\n\n1008\n00:54:38,620 --> 00:54:41,460\na database ahead of time the installer\nwon't create it for you.\n\n1009\n00:54:41,460 --> 00:54:43,990\nIt'll populate the database,\nbut it won't make it.\n\n1010\n00:54:43,990 --> 00:54:46,200\nSo, you'll have to have\nsomebody create a database and\n\n1011\n00:54:46,200 --> 00:54:49,170\ngive you some credentials that\nhave full access to the database.\n\n1012\n00:54:49,170 --> 00:54:51,780\nYou'll have to have that user name and\npassword to get access.\n\n1013\n00:54:52,900 --> 00:54:53,680\nAll right.\n\n1014\n00:54:53,680 --> 00:54:56,890\nNow during the install, it's also going\nto ask us if we want vCenter to run\n\n1015\n00:54:56,890 --> 00:55:01,240\nas a system account or if we want it\nto run as a particular user account.\n\n1016\n00:55:01,240 --> 00:55:05,330\nIt's always a good idea to create\na dedicated user account for that to run.\n\n1017\n00:55:05,330 --> 00:55:09,140\nThe user account will need to be\nan administrator on that machine.\n\n1018\n00:55:09,140 --> 00:55:12,440\nIt doesn't have to be a domain admin, but\nit does need to be an administrator on\n\n1019\n00:55:12,440 --> 00:55:14,320\nthat machine to be able to\nrun the various services.\n\n1020\n00:55:16,060 --> 00:55:16,870\nAll right.\n\n1021\n00:55:16,870 --> 00:55:18,230\nAnd then I mentioned IPv6 earlier.\n\n1022\n00:55:18,230 --> 00:55:20,180\nJust a quick caveat here about IPv6.\n\n1023\n00:55:21,240 --> 00:55:24,690\nWith IPv4,\nwhen we're entering in our server names,\n\n1024\n00:55:24,690 --> 00:55:26,290\nyou can put in the name or the IP.\n\n1025\n00:55:26,290 --> 00:55:26,980\nIt doesn't matter.\n\n1026\n00:55:26,980 --> 00:55:29,250\nWhichever one's easier for\nyou, you can punch it in.\n\n1027\n00:55:29,250 --> 00:55:32,440\nI always do names, because it looks nicer\non the screen and I can remember them.\n\n1028\n00:55:32,440 --> 00:55:36,700\nBut you can do IPs also,\nthe actual numerical IP address.\n\n1029\n00:55:36,700 --> 00:55:42,940\nBut with IPv6, it will not let you\nenter in the hexadecimal address.\n\n1030\n00:55:42,940 --> 00:55:45,870\nWith IPv6,\nyou have to enter in the hostname.\n\n1031\n00:55:45,870 --> 00:55:47,350\nSo it does support IPv6.\n\n1032\n00:55:47,350 --> 00:55:50,870\nYou might see people on the internet that\nsay that it doesn't, and they're wrong.\n\n1033\n00:55:50,870 --> 00:55:52,970\nIt does support IPv6.\n\n1034\n00:55:52,970 --> 00:55:56,564\nIt just doesn't support directly entering\nin the address you have to use a DNS\n\n1035\n00:55:56,564 --> 00:55:57,125\nhost name.\n\n1036\n00:55:57,125 --> 00:55:59,840\nAll right, so\nthat goes back to the whole DNS thing,\n\n1037\n00:55:59,840 --> 00:56:03,620\nwe've got to make sure the DNS is\nsetup properly for resolution to work.\n\n1038\n00:56:03,620 --> 00:56:07,548\nAnd forward and reverse DNS lookups need\nto be configured, otherwise you'll bump\n\n1039\n00:56:07,548 --> 00:56:11,210\ninto some neat little issues that'll\nreally have you scratching your head.\n\n1040\n00:56:12,690 --> 00:56:15,160\nAll right, so\nthose are our minimum requirements.\n\n1041\n00:56:15,160 --> 00:56:19,070\nThose are the things that we need to be\naware of if we're gonna install vCenter.\n\n1042\n00:56:19,070 --> 00:56:21,840\nAnd I've got a server that I'm\ngonna be installing vCenter on.\n\n1043\n00:56:21,840 --> 00:56:22,801\nThis guy right here.\n\n1044\n00:56:22,801 --> 00:56:27,801\nAnd it's running Windows server 2008 R2,\nso if I just pull up its properties here,\n\n1045\n00:56:27,801 --> 00:56:31,079\nI can see that it's running\nWindows Server 2008 R2.\n\n1046\n00:56:31,079 --> 00:56:35,180\nI'm just running standard edition,\nnot the Enterprise edition and\n\n1047\n00:56:35,180 --> 00:56:37,560\nit's got 4 gigs of RAM.\n\n1048\n00:56:37,560 --> 00:56:41,980\nThat's the absolute minimum\nrequirement for doing the install but\n\n1049\n00:56:41,980 --> 00:56:44,490\nthat's gonna be fine for my needs.\n\n1050\n00:56:44,490 --> 00:56:48,710\nAll right, and\nthen I can see if it's a 64-bit OS,\n\n1051\n00:56:48,710 --> 00:56:52,510\nI've got a dual core processor in it and\nthe 3 gigahertz per core.\n\n1052\n00:56:52,510 --> 00:56:53,750\nSo that's good.\n\n1053\n00:56:53,750 --> 00:56:56,350\nWe meet the requirements there, all right.\n\n1054\n00:56:56,350 --> 00:56:58,000\nThe other thing I need to double check is,\n\n1055\n00:56:58,000 --> 00:57:01,420\ndo I have a user account that's\nan administrator and yes I do, all right?\n\n1056\n00:57:01,420 --> 00:57:02,086\nI'm logged in.\n\n1057\n00:57:02,086 --> 00:57:05,185\nI'm an administrator, so\nI can do the install, all right?\n\n1058\n00:57:05,185 --> 00:57:07,902\nDo I have .NET framework installed?\n\n1059\n00:57:07,902 --> 00:57:09,087\nSo I'll double check that.\n\n1060\n00:57:09,087 --> 00:57:13,799\nNow, in Windows Server 2008 and 2012,\nyou've got to go into your server manager.\n\n1061\n00:57:13,799 --> 00:57:18,258\nAnd the .NET 3.5 suite is\nactually a feature of the server.\n\n1062\n00:57:18,258 --> 00:57:21,610\nSo I've gotta go to add a feature,\nand I'll add that in.\n\n1063\n00:57:21,610 --> 00:57:22,860\nSo I'm just gonna fire this up.\n\n1064\n00:57:24,890 --> 00:57:27,750\nAnd on the left side,\nhere I'll go to my Features.\n\n1065\n00:57:27,750 --> 00:57:30,290\nAnd it's collecting my, oops.\n\n1066\n00:57:30,290 --> 00:57:31,400\nSorry, let me get to\nthe right screen here.\n\n1067\n00:57:31,400 --> 00:57:31,950\nHere we go.\n\n1068\n00:57:31,950 --> 00:57:33,510\nSo, Ive got zero features installed, so\n\n1069\n00:57:33,510 --> 00:57:35,440\nI know I don't have .NET\nFramework installed.\n\n1070\n00:57:35,440 --> 00:57:36,926\nSo I'll just hit Add Features.\n\n1071\n00:57:36,926 --> 00:57:41,605\nAnd in here, there it is,\n.NET Framework 3.5.1.\n\n1072\n00:57:41,605 --> 00:57:43,860\nAnd that's the one that I want,\nso I'm just gonna check that off.\n\n1073\n00:57:43,860 --> 00:57:46,830\nAnd it's got to install some\nother required components.\n\n1074\n00:57:46,830 --> 00:57:52,320\nI'll go ahead and let that happen and I'll\nhit Next and we'll just let that finish.\n\n1075\n00:57:52,320 --> 00:57:53,750\nI don't have to enter\nin anything else here.\n\n1076\n00:57:53,750 --> 00:57:55,060\nThese defaults are fine for me.\n\n1077\n00:57:55,060 --> 00:57:57,830\nI'll just hit Next and let it install.\n\n1078\n00:57:57,830 --> 00:58:02,620\nAll right, so that's gonna activate\n.NET Framework 3.5.1, right?\n\n1079\n00:58:02,620 --> 00:58:06,570\nIn Windows Server 2008 you have to go\nto Add Features, in Windows Server 2012\n\n1080\n00:58:06,570 --> 00:58:10,520\nthey've combined features and roles,\nso it's like Add Features and Roles,\n\n1081\n00:58:10,520 --> 00:58:12,280\nI think is what it says, so\nyou have to go that route.\n\n1082\n00:58:12,280 --> 00:58:12,930\nLittle bit different.\n\n1083\n00:58:15,010 --> 00:58:17,970\nAll right, the only other thing\nI might wanna do is go ahead and\n\n1084\n00:58:17,970 --> 00:58:21,980\ncreate a service account to be\nable to have vSphere run as.\n\n1085\n00:58:21,980 --> 00:58:27,150\nSo I'll go in here and do that while\nit's installing .NET Framework.\n\n1086\n00:58:27,150 --> 00:58:30,790\nSo, I'm gonna go into Computer Management\nand I'll just create a local user.\n\n1087\n00:58:33,970 --> 00:58:39,827\nAnd I'll call it vshpere or vcenter or\nwhatever it is that you want to call it.\n\n1088\n00:58:39,827 --> 00:58:43,821\nAnd I'll set a password.\n\n1089\n00:58:47,582 --> 00:58:49,382\nAnd I'm gonna set it as\npassword never expires.\n\n1090\n00:58:49,382 --> 00:58:52,460\nThis is a password that\nwe don't wanna hand out.\n\n1091\n00:58:52,460 --> 00:58:56,410\nIt is a good idea to change it from\ntime to time and in Windows Server 2012,\n\n1092\n00:58:56,410 --> 00:58:59,160\nyou have these new manage service\naccounts that make it really easy where\n\n1093\n00:58:59,160 --> 00:59:00,980\nit changes the passwords for you.\n\n1094\n00:59:00,980 --> 00:59:04,570\nBut for right now I'll just set it to\npassword never expires, all right?\n\n1095\n00:59:04,570 --> 00:59:08,130\nThe only other thing I need to do\nis go in here and say Member Of,\n\n1096\n00:59:08,130 --> 00:59:12,190\nand add it into the local\nadministrator's group.\n\n1097\n00:59:12,190 --> 00:59:13,870\nSo I'm gonna do that right here.\n\n1098\n00:59:14,910 --> 00:59:16,410\nSo we'll just add that\ninto administrators.\n\n1099\n00:59:18,070 --> 00:59:18,900\nAnd there we go.\n\n1100\n00:59:18,900 --> 00:59:20,460\nSo now I've got this account and\n\n1101\n00:59:20,460 --> 00:59:23,710\nI can have all the vCenter\nservices run as that account.\n\n1102\n00:59:25,890 --> 00:59:29,050\nAll right,\nnow I did it here with a local account.\n\n1103\n00:59:29,050 --> 00:59:32,920\nI could do this with an active directory\naccount also if I wanted to have\n\n1104\n00:59:32,920 --> 00:59:36,490\nmore than one vCenter server, and I wanted\nthem to run with the same credentials.\n\n1105\n00:59:36,490 --> 00:59:39,420\nThat can make sharing information\na little bit easier sometimes.\n\n1106\n00:59:39,420 --> 00:59:43,080\nSo if I wanted to go that route,\nI could jump into the AD and set it there.\n\n1107\n00:59:43,080 --> 00:59:45,040\nBut I'll just leave it be for now.\n\n1108\n00:59:46,540 --> 00:59:48,750\nAll right, so that finished.\n\n1109\n00:59:48,750 --> 00:59:53,030\nNow my server's ready so\nI'm pretty much ready to install vCenter.\n\n1110\n00:59:53,030 --> 00:59:56,030\nBut looking at the clock,\nI've rambled on a little too long.\n\n1111\n00:59:56,030 --> 00:59:57,370\nSo let's do this.\n\n1112\n00:59:57,370 --> 00:59:58,990\nLet's stop here and take a break.\n\n1113\n00:59:58,990 --> 01:00:01,810\nAnd now that I've got the server ready,\nwhen we get back we'll actually\n\n1114\n01:00:01,810 --> 01:00:05,070\nlaunch into the install and get\na chance to see what's what, all right?\n\n1115\n01:00:05,070 --> 01:00:05,902\nSo stay tuned.\n\n1116\n01:00:05,902 --> 01:00:07,342\nWe'll be back after this.\n\n1117\n01:00:07,342 --> 01:00:13,600\n[MUSIC]\n\n1118\n01:00:13,600 --> 01:00:14,877\nAll right, welcome back everybody.\n\n1119\n01:00:14,877 --> 01:00:19,450\nSo in the last segment,\nwe talked about installing vCenter.\n\n1120\n01:00:19,450 --> 01:00:21,750\nI know, it kind of went by fast.\n\n1121\n01:00:21,750 --> 01:00:25,470\nBut now, we're actually gonna take a look\nat getting the software installed.\n\n1122\n01:00:25,470 --> 01:00:29,040\nI meet all the minimum requirements,\nso it's time to do the install.\n\n1123\n01:00:29,040 --> 01:00:31,860\nSo if you haven't done it already,\nif you're doing this in real life, you\n\n1124\n01:00:31,860 --> 01:00:37,970\ndownload the software image from VMware,\nright from their free eval or whatever.\n\n1125\n01:00:37,970 --> 01:00:40,246\nBurn it to a disc and\npop it in the machine.\n\n1126\n01:00:40,246 --> 01:00:43,980\nNow, since I'm gonna be installing\nthis on a virtual machine, so\n\n1127\n01:00:43,980 --> 01:00:46,180\nthis server that I'm\nusing is actually a VM.\n\n1128\n01:00:46,180 --> 01:00:50,890\nAnd since I'm gonna be installing it here,\nwell I just meld the ISO and so\n\n1129\n01:00:50,890 --> 01:00:52,370\nI never actually burn the disc.\n\n1130\n01:00:52,370 --> 01:00:55,790\nAnd so I've got it attached\nto my CD drive by going here.\n\n1131\n01:00:55,790 --> 01:00:57,100\nI've got it right here.\n\n1132\n01:00:57,100 --> 01:01:02,460\nNow, it's listed as VMware VIM, and\nthat's the, there was an old name\n\n1133\n01:01:02,460 --> 01:01:05,210\nwhich was like the VMware infrastructure\nmanager or something like that.\n\n1134\n01:01:05,210 --> 01:01:07,350\nSo we don't see that terminology anymore.\n\n1135\n01:01:07,350 --> 01:01:09,320\nYou'll see that when\nyou download the ISOs,\n\n1136\n01:01:09,320 --> 01:01:11,590\na lot of them have the old\nname attached to them.\n\n1137\n01:01:11,590 --> 01:01:12,670\nThat does happen.\n\n1138\n01:01:12,670 --> 01:01:16,970\nBut it is the software\nthat has vCenter on it.\n\n1139\n01:01:16,970 --> 01:01:19,820\nAnd when you go to the install\nit's got a little auto-run so\n\n1140\n01:01:19,820 --> 01:01:21,190\nyou just double-click on the disc.\n\n1141\n01:01:21,190 --> 01:01:24,160\nOr if your system is set that\nway it may automatically launch.\n\n1142\n01:01:24,160 --> 01:01:26,790\nAnd you'll see this screen right here.\n\n1143\n01:01:26,790 --> 01:01:30,480\nNotice it's got the four\ncomponents of vCenter.\n\n1144\n01:01:30,480 --> 01:01:34,160\nIf I was gonna install these on all\nseparate servers I could go one by one and\n\n1145\n01:01:34,160 --> 01:01:36,230\ninstall the individual components.\n\n1146\n01:01:36,230 --> 01:01:41,260\nSingle sign on, Web client,\ninventory service or server, all right?\n\n1147\n01:01:41,260 --> 01:01:43,950\nBut for me,\nI'm gonna do the simple install.\n\n1148\n01:01:43,950 --> 01:01:48,336\nAnd the simple install just installs all\nfour of them in one place, all right.\n\n1149\n01:01:48,336 --> 01:01:52,380\nSo, pretty straightforward here as\nfar as the install process goes,\n\n1150\n01:01:52,380 --> 01:01:56,930\nthey've got like a step-by-step,\nyou can walk through on the VMware site.\n\n1151\n01:01:56,930 --> 01:01:59,340\nBut it really is just saying\nclick Next a bunch of times.\n\n1152\n01:01:59,340 --> 01:02:01,970\nThere a few little screens where\nyou have to make decisions.\n\n1153\n01:02:01,970 --> 01:02:03,370\nI'll show you those as we go through it.\n\n1154\n01:02:03,370 --> 01:02:06,720\nSo I'm gonna go ahead and hit that\nInstall button and it's gonna fire up.\n\n1155\n01:02:06,720 --> 01:02:11,980\nNow if I don't meet the prerequisites\nthat were determined ahead of time it's\n\n1156\n01:02:11,980 --> 01:02:14,160\ngonna notice that and it's gonna tell me.\n\n1157\n01:02:14,160 --> 01:02:16,280\nIt's gonna say you don't\nhave enough memory or\n\n1158\n01:02:16,280 --> 01:02:18,710\nyou're missing .NET Framework or whatever.\n\n1159\n01:02:18,710 --> 01:02:20,990\nSo it will warn us about it.\n\n1160\n01:02:20,990 --> 01:02:24,440\nFor mine, it's telling me that\nI need the visual C++ run time,\n\n1161\n01:02:24,440 --> 01:02:26,930\nwhich it is already took care of for\nme right there.\n\n1162\n01:02:26,930 --> 01:02:28,910\nI didn't even need to click anything, and\n\n1163\n01:02:28,910 --> 01:02:31,048\nnow it's starting\nthe single sign on set up.\n\n1164\n01:02:31,048 --> 01:02:34,630\nIt's actually gonna go through and\ndo these installs in order.\n\n1165\n01:02:34,630 --> 01:02:39,550\nAnd that's important because, for example,\nthe vCenter server, requires the single\n\n1166\n01:02:39,550 --> 01:02:43,710\nsign on to be installed so\nthis order is important that we follow it.\n\n1167\n01:02:43,710 --> 01:02:45,410\nSo it's gonna do single sign-on first.\n\n1168\n01:02:45,410 --> 01:02:49,030\nNow, the single sign-on one, we do have to\nmake a couple of choices during this one.\n\n1169\n01:02:50,240 --> 01:02:52,800\nSo, as we move forward, I just have\nto accept my licensing agreement.\n\n1170\n01:02:54,640 --> 01:02:56,701\nAnd then it's checking a few things.\n\n1171\n01:02:56,701 --> 01:02:59,522\nIt's checking to see if I have\na fully qualified domain name.\n\n1172\n01:02:59,522 --> 01:03:03,086\nMine's VM-server2.lab.itpro.tv.\n\n1173\n01:03:03,086 --> 01:03:05,440\nAnd it's checking the IP address, right?\n\n1174\n01:03:05,440 --> 01:03:06,690\nMaking sure that's there.\n\n1175\n01:03:06,690 --> 01:03:08,617\nBecause I'm installing single sign-on,\n\n1176\n01:03:08,617 --> 01:03:11,696\nit's looking to see if I'm already\nset up to use a directory service.\n\n1177\n01:03:11,696 --> 01:03:16,259\nAnd it found that I'm joined to an Active\nDirectory domain called lab.itpro.tv,\n\n1178\n01:03:16,259 --> 01:03:16,908\nall right?\n\n1179\n01:03:16,908 --> 01:03:19,869\nAnd it tested DNS, and\nit tested successfully.\n\n1180\n01:03:19,869 --> 01:03:23,832\nIf these fail, you can actually\nstill continue with the install,\n\n1181\n01:03:23,832 --> 01:03:25,690\nit just may not work properly.\n\n1182\n01:03:25,690 --> 01:03:29,240\nFor example, if it doesn't see you join\nto a domain, it's gonna set you up for\n\n1183\n01:03:29,240 --> 01:03:32,640\ndoing internal authentication only and\nnot synchronizing with the domain.\n\n1184\n01:03:32,640 --> 01:03:34,740\nYou'll have to add that afterwards,\nall right?\n\n1185\n01:03:34,740 --> 01:03:36,340\nBut mine passes the check.\n\n1186\n01:03:36,340 --> 01:03:42,240\nAnd notice it's got add lab.itprotv as\na native active directory identity source.\n\n1187\n01:03:42,240 --> 01:03:46,607\nThat means as soon as this install is done\nI'll be able to authorize users from that\n\n1188\n01:03:46,607 --> 01:03:50,973\ndomain to be able to log in and manage my\nserver or my vCenter environment, right,\n\n1189\n01:03:50,973 --> 01:03:53,795\nwhich may be made up of\nhundreds of servers, right?\n\n1190\n01:03:53,795 --> 01:03:55,290\nBut that domain's still\ngonna be authorized.\n\n1191\n01:03:55,290 --> 01:03:59,310\nNow, if I don't want that, maybe my\nmachine is joined to one domain But\n\n1192\n01:03:59,310 --> 01:04:02,593\nall the user accounts are coming\nfrom a different domain,\n\n1193\n01:04:02,593 --> 01:04:06,613\nI might not want to add that, and\nI can uncheck it, and what we would do is\n\n1194\n01:04:06,613 --> 01:04:10,900\nlater on we would add in any other\ndomains that we needed, all right?\n\n1195\n01:04:10,900 --> 01:04:13,670\nBut in my case,\nthe users are in lab.itpro.tv, so\n\n1196\n01:04:13,670 --> 01:04:15,140\nI'm gonna let it go ahead and\ntake care of that for me.\n\n1197\n01:04:15,140 --> 01:04:17,630\nAll right, whoops.\n\n1198\n01:04:17,630 --> 01:04:19,150\nI clicked too many times.\n\n1199\n01:04:19,150 --> 01:04:21,300\nAll right,\nnow this screen is really important.\n\n1200\n01:04:21,300 --> 01:04:24,080\nWhen we're syncing up with\nthe active directory,\n\n1201\n01:04:24,080 --> 01:04:27,810\nwe can use user accounts\nfrom the ad to log in.\n\n1202\n01:04:27,810 --> 01:04:31,840\nBut until that's functional,\nwe need at least one\n\n1203\n01:04:31,840 --> 01:04:36,380\nlocal VMware account that we can use to\nlogin to vCenter and configure things.\n\n1204\n01:04:36,380 --> 01:04:38,810\nAnd that's the account that\nit's gonna create right here.\n\n1205\n01:04:38,810 --> 01:04:42,280\nIt's important to pay attention\nto this and to write it down.\n\n1206\n01:04:42,280 --> 01:04:45,140\nBecause if we lose our connection and\nDND or\n\n1207\n01:04:45,140 --> 01:04:48,960\nsomething like, this may be the only\nway we can get to log into the system.\n\n1208\n01:04:48,960 --> 01:04:53,520\nIf we didn't add the active directory\ndatabase in the last screen then,\n\n1209\n01:04:53,520 --> 01:04:55,600\nthis will be the only account we have.\n\n1210\n01:04:55,600 --> 01:04:56,590\nWe'll need this one.\n\n1211\n01:04:56,590 --> 01:05:00,630\nThis is gonna be the username and\npassword we use to log in on the system.\n\n1212\n01:05:00,630 --> 01:05:02,588\nNow, pay attention to\nthe domain name right here.\n\n1213\n01:05:02,588 --> 01:05:05,740\nIt says, vsphere.local.\n\n1214\n01:05:05,740 --> 01:05:08,540\nThat means this is from\nthe local vCenter database.\n\n1215\n01:05:08,540 --> 01:05:11,880\nThis is not the active directory,\nnot the Windows user database,\n\n1216\n01:05:11,880 --> 01:05:15,490\nnot a Linux Kerberos realm,\nor NIS+ domain.\n\n1217\n01:05:15,490 --> 01:05:20,030\nIt's just right here from the vCenter.\n\n1218\n01:05:20,030 --> 01:05:20,600\nAll right.\n\n1219\n01:05:20,600 --> 01:05:22,535\nSo I'm gonna define a password for\nthat account.\n\n1220\n01:05:25,684 --> 01:05:26,720\nAnd I'll go to move on.\n\n1221\n01:05:26,720 --> 01:05:31,810\nNow even if we join to the AD\nlike we're doing right now,\n\n1222\n01:05:31,810 --> 01:05:36,650\nthis is the only account that will\nbe a single sign-on administrator.\n\n1223\n01:05:36,650 --> 01:05:39,120\nSo if we wanna modify any SSO settings,\n\n1224\n01:05:39,120 --> 01:05:41,410\nthis is the only account\nthat can do it by default.\n\n1225\n01:05:41,410 --> 01:05:43,160\nI'll show you guys how to\ntweak that a little bit later.\n\n1226\n01:05:45,430 --> 01:05:51,580\nAll right, now when you deploy vSphere, if\nyou just have one geographic location and\n\n1227\n01:05:51,580 --> 01:05:54,700\nall your servers are in it, you don't\nreally need to worry about this screen.\n\n1228\n01:05:54,700 --> 01:05:56,750\nIt says site name and\nwhat you want to call it.\n\n1229\n01:05:56,750 --> 01:05:59,570\nThis is the default for site, okay.\n\n1230\n01:05:59,570 --> 01:06:02,230\nWhat if I have servers in\nmore than one city, though?\n\n1231\n01:06:02,230 --> 01:06:05,270\nAnd I'm trying to do things like\nfail over replication and all that.\n\n1232\n01:06:05,270 --> 01:06:08,820\nThen may want to name each of those\nsights and separate the server so\n\n1233\n01:06:08,820 --> 01:06:11,860\nthat vCenter will understand they're\nin different geographic locations.\n\n1234\n01:06:11,860 --> 01:06:13,110\nSo, we can give them names.\n\n1235\n01:06:13,110 --> 01:06:17,130\nFor example, I'm in Gainesville Florida,\nso I might call this site Gainesville.\n\n1236\n01:06:17,130 --> 01:06:22,220\nAnd then as I add other city's I can\nadd in Orlando, or Tampa, or wherever.\n\n1237\n01:06:22,220 --> 01:06:24,830\nSo, I know I have servers in\nthose different locations.\n\n1238\n01:06:24,830 --> 01:06:26,450\nThe name doesn't really matter.\n\n1239\n01:06:26,450 --> 01:06:27,517\nAs administrators we see it,\n\n1240\n01:06:27,517 --> 01:06:29,531\nnobody else does, so\nyou can call it whatever you want.\n\n1241\n01:06:32,968 --> 01:06:39,720\nAll right, then the single sign on\nsystem needs a TCP port to use.\n\n1242\n01:06:39,720 --> 01:06:41,010\nThe default is 7444.\n\n1243\n01:06:41,010 --> 01:06:45,970\nAll right, you can stick with that if you\nwant or you can change it, just be careful\n\n1244\n01:06:45,970 --> 01:06:50,920\nif you're doing a simple install, because\nsingle sign on needs an HTTPS port but\n\n1245\n01:06:50,920 --> 01:06:54,640\nso does the vShpere web client.\n\n1246\n01:06:54,640 --> 01:06:58,630\nIt needs one, and so does vCenter itself,\nso you don't want to overlap.\n\n1247\n01:06:58,630 --> 01:07:00,980\nGenerally sticking with\nthe defaults is the best plan.\n\n1248\n01:07:03,890 --> 01:07:05,730\nThen it's asking where\nI want to install it.\n\n1249\n01:07:05,730 --> 01:07:07,190\nI'll just hit next on that.\n\n1250\n01:07:07,190 --> 01:07:08,060\nAnd we'll let it install.\n\n1251\n01:07:08,060 --> 01:07:11,600\nAll right, so\nthere it goes installing single sign-on.\n\n1252\n01:07:11,600 --> 01:07:12,590\nNot much to it.\n\n1253\n01:07:12,590 --> 01:07:16,340\nNow, the most important part of those\nscreens that I went through was that\n\n1254\n01:07:16,340 --> 01:07:19,090\nsingle user account, that\nadministrator account that it created,\n\n1255\n01:07:19,090 --> 01:07:21,270\ncuz I'm definitely gonna need\nthat before this setup is over.\n\n1256\n01:07:21,270 --> 01:07:24,270\nAll right now that's one part.\n\n1257\n01:07:24,270 --> 01:07:29,722\nThe next part after that finishes,\nis going to be the vSphere Web Client.\n\n1258\n01:07:29,722 --> 01:07:34,280\nThe vSphere web client is that\nsoftware that our end users or\n\n1259\n01:07:34,280 --> 01:07:36,370\nsystem magnates are going to be\nable to come in, connect up, and\n\n1260\n01:07:36,370 --> 01:07:38,250\nsee what virtual machines are running.\n\n1261\n01:07:38,250 --> 01:07:39,700\nSee the physical ESX boxes.\n\n1262\n01:07:39,700 --> 01:07:42,190\nIt's what we're gonna work\nin on a day to day basis.\n\n1263\n01:07:42,190 --> 01:07:46,160\nYou are a virtualization\nadministrator then the vSphere\n\n1264\n01:07:46,160 --> 01:07:50,640\nWebClient is what you're going to\nwork in pretty much all the time.\n\n1265\n01:07:50,640 --> 01:07:53,370\nAll right, so we'll let this thing churn\nalong here, should almost be done.\n\n1266\n01:07:53,370 --> 01:07:55,300\nAnd then we'll get that installed.\n\n1267\n01:07:55,300 --> 01:07:58,190\nNow the vSphere WebClient, it doesn't\nreally require a whole heck of a lot of\n\n1268\n01:07:58,190 --> 01:08:01,120\noptions to get installed so\nwe'll flip through that pretty quick.\n\n1269\n01:08:01,120 --> 01:08:04,240\nThe inventory service though is when it's\ngoing to start asking about our database\n\n1270\n01:08:04,240 --> 01:08:06,460\nserver and so we'll have to\nprovide some database information.\n\n1271\n01:08:07,510 --> 01:08:09,130\nFortunately they make it really easy.\n\n1272\n01:08:09,130 --> 01:08:10,780\nWhen it inquires about the database,\n\n1273\n01:08:10,780 --> 01:08:13,850\nit's gonna ask us about\nthe size of our organization.\n\n1274\n01:08:13,850 --> 01:08:15,670\nHow many servers we plan on managing.\n\n1275\n01:08:15,670 --> 01:08:18,310\nAnd the more servers you manage,\n\n1276\n01:08:18,310 --> 01:08:21,040\nthe stronger that database\nneeds to be configured.\n\n1277\n01:08:21,040 --> 01:08:25,110\nSo we'll see options for that, where\nwe pick it to size it for our company.\n\n1278\n01:08:25,110 --> 01:08:26,570\nAnd that is important.\n\n1279\n01:08:26,570 --> 01:08:29,580\nSo we'll have given it a second\nto churn along and do that.\n\n1280\n01:08:29,580 --> 01:08:32,940\nAnd then now when all that's said and\ndone, then we set up vCenter.\n\n1281\n01:08:32,940 --> 01:08:36,200\nNow none of this stuff really\nworks until it's all in place so\n\n1282\n01:08:36,200 --> 01:08:38,910\nwe have to complete all four\nsteps before we're there.\n\n1283\n01:08:40,230 --> 01:08:43,540\nNow I don't want to get bored to death\nwatching the status bar scroll across but\n\n1284\n01:08:43,540 --> 01:08:46,790\nI do want to show you one of the other\nconfig screens that's gonna pop up.\n\n1285\n01:08:46,790 --> 01:08:48,280\nSo after this gets far enough,\n\n1286\n01:08:48,280 --> 01:08:51,340\nI'll switch over to another server\nwhere I've already got it installed.\n\n1287\n01:08:51,340 --> 01:08:56,930\nBut while we wait on it here, oh see,\nwhat can we do to entertain ourselves?\n\n1288\n01:08:56,930 --> 01:09:01,220\nSome of the other things you'll see in\nhere, VMware vCenter desktop client.\n\n1289\n01:09:01,220 --> 01:09:05,250\nNow notice we've got the vSphere\nWebClient and the vSphere client.\n\n1290\n01:09:05,250 --> 01:09:06,940\nThe two names are very similar.\n\n1291\n01:09:06,940 --> 01:09:08,630\nThe vSphere client,\n\n1292\n01:09:08,630 --> 01:09:12,890\nthat's that standalone desktop\napplication I was talking about earlier.\n\n1293\n01:09:12,890 --> 01:09:16,770\nIt works, you can use it to connect\nto an ESX server and manage it.\n\n1294\n01:09:16,770 --> 01:09:19,650\nBut there's some functionality\nthat's missing from it,\n\n1295\n01:09:19,650 --> 01:09:22,730\nversus the WebClient that\nhas everything you need.\n\n1296\n01:09:22,730 --> 01:09:26,020\nSo if you want the standalone client\nyou can fire up that vSphere client.\n\n1297\n01:09:26,020 --> 01:09:29,730\nAnd in fact, if you're using something\nlike one of the essentials or\n\n1298\n01:09:29,730 --> 01:09:34,650\nfoundation versions of vSphere,\nthen you're going to use\n\n1299\n01:09:34,650 --> 01:09:37,900\nthat to manage those servers, cuz you\nmight not have the vCenter license at all.\n\n1300\n01:09:39,230 --> 01:09:42,720\nSome of the other support tools you'll see\nin here, things like the Update Manager.\n\n1301\n01:09:42,720 --> 01:09:44,900\nWe're gonna talk about\nthat in another section.\n\n1302\n01:09:44,900 --> 01:09:46,550\nYou gotta keep your stuff up to date,\nright?\n\n1303\n01:09:46,550 --> 01:09:51,250\nVMware is constantly putting out security\nand feature fixes for their system.\n\n1304\n01:09:51,250 --> 01:09:52,840\nYou need to update it.\n\n1305\n01:09:52,840 --> 01:09:58,330\nESX, right, it is a bare metal hyper visor\nthat runs right on the system and all your\n\n1306\n01:09:58,330 --> 01:10:04,220\nVMs are on top of it but the ESX system\nitself is actually running on Linux.\n\n1307\n01:10:04,220 --> 01:10:08,210\nAnd so it gets security and fixes\njust like any other operating system.\n\n1308\n01:10:08,210 --> 01:10:10,570\nIt's important to keep it up to date.\n\n1309\n01:10:10,570 --> 01:10:12,830\nYou've got the ESXi Dump Collector.\n\n1310\n01:10:12,830 --> 01:10:15,470\nIf you ever have a crash,\nit creates a memory dump, and\n\n1311\n01:10:15,470 --> 01:10:20,510\nthe Dump Collector's what will gather that\ndata together for review by tech support.\n\n1312\n01:10:20,510 --> 01:10:22,420\nThere's the Syslog collector.\n\n1313\n01:10:22,420 --> 01:10:25,460\nIf you've got a lot of\nESX servers out there and\n\n1314\n01:10:25,460 --> 01:10:28,060\nyou don't want to have to monitor\na bunch of separate logs, the Syslog\n\n1315\n01:10:28,060 --> 01:10:32,490\ncollector allows us to basically bring\nall that into one central database.\n\n1316\n01:10:32,490 --> 01:10:36,190\nAuto Deploy, we mentioned that's\na part of enterprise earlier.\n\n1317\n01:10:36,190 --> 01:10:39,630\nLet's just quickly deploy out new ESX\nservers that are properly configured for\n\n1318\n01:10:39,630 --> 01:10:41,050\nour environment.\n\n1319\n01:10:41,050 --> 01:10:43,380\nWe've got the authentication proxy.\n\n1320\n01:10:43,380 --> 01:10:45,470\nWe have single sign-on already, but\n\n1321\n01:10:45,470 --> 01:10:49,490\nsingle sign-on expects us to have direct\nconnection to the authentication servers.\n\n1322\n01:10:49,490 --> 01:10:52,400\nYou might not have that and so\nwe can use an authentication proxy\n\n1323\n01:10:52,400 --> 01:10:55,028\nto provide that access\nthrough an intermediary.\n\n1324\n01:10:55,028 --> 01:10:58,890\nHost agent pre-upgrade checker.\n\n1325\n01:10:58,890 --> 01:11:02,230\nSo if you're going to be upgrading your\nVMware server it can check for issues.\n\n1326\n01:11:02,230 --> 01:11:06,450\nThere's some things like the virtual\nhard drives, where there's the order\n\n1327\n01:11:06,450 --> 01:11:09,930\nversion 3 format, there's the newer\nversion 5 format, so it will check for\n\n1328\n01:11:09,930 --> 01:11:14,100\nany possible problems that might\nhappen if we do upgrades like that.\n\n1329\n01:11:14,100 --> 01:11:17,260\nAnd then lastly the certificate\nautomation tool.\n\n1330\n01:11:17,260 --> 01:11:20,410\nI mentioned how SSO has\na SSL port that it's got so\n\n1331\n01:11:20,410 --> 01:11:22,840\nyou can see how many acronyms I\ncan throw into this sentence.\n\n1332\n01:11:22,840 --> 01:11:25,580\nWell, it's gotta use certificates\nto provide that encryption,\n\n1333\n01:11:25,580 --> 01:11:28,360\nand it creates its own self-signed certs.\n\n1334\n01:11:28,360 --> 01:11:32,240\nThose are fine, you can use them but they\ndo expire and if you wanna change those or\n\n1335\n01:11:32,240 --> 01:11:35,000\nmodify them, the certificate automation\ntool can really help with that.\n\n1336\n01:11:36,260 --> 01:11:39,070\nAll right, so\nthe single sign on just finished for me.\n\n1337\n01:11:41,090 --> 01:11:43,432\nAnd, did it jump in the background,\nwhat did it do?\n\n1338\n01:11:48,042 --> 01:11:49,167\nWell, oh you know what?\n\n1339\n01:11:49,167 --> 01:11:50,333\nI'm sorry, I'm being impatient.\n\n1340\n01:11:50,333 --> 01:11:53,435\nAll right, when you do\nthe simple install this happens.\n\n1341\n01:11:53,435 --> 01:11:55,625\nThe single sign-on portion finished, and\n\n1342\n01:11:55,625 --> 01:11:59,768\nnow it looks like it's returned me back to\nthis screen and it's just sitting here,\n\n1343\n01:11:59,768 --> 01:12:03,530\nbut I've seen this before, so\nI'm not worried, but there we go.\n\n1344\n01:12:03,530 --> 01:12:06,990\nIf you just wait, it is actually\nstill doing stuff in the background.\n\n1345\n01:12:06,990 --> 01:12:10,660\nI don't see any dialog boxes here,\nand that's because VMware has\n\n1346\n01:12:10,660 --> 01:12:14,470\nautomated a lot of the install with\nthe simple side, and so we just wait.\n\n1347\n01:12:14,470 --> 01:12:16,340\nIf I start clicking on things\nit'll get angry at me, but\n\n1348\n01:12:16,340 --> 01:12:21,090\nhere I can see it's now popped up for the\nnext phase, the VMware vSphere Web Client.\n\n1349\n01:12:21,090 --> 01:12:23,290\nI thought for a minute my dialogue\nhad appeared in the background.\n\n1350\n01:12:23,290 --> 01:12:25,240\nBut it just takes a moment.\n\n1351\n01:12:25,240 --> 01:12:26,445\nPatience is not my forte.\n\n1352\n01:12:26,445 --> 01:12:28,760\n[LAUGH] All right.\n\n1353\n01:12:28,760 --> 01:12:29,870\nSo here it goes.\n\n1354\n01:12:29,870 --> 01:12:33,580\nIt generated one of those self-signed\ncertificates that I mentioned, and\n\n1355\n01:12:33,580 --> 01:12:37,570\nit's displaying the fingerprint\nof that certificate.\n\n1356\n01:12:37,570 --> 01:12:41,220\nI can use that later, if I ever go to\nthe website and I want to verify it is\n\n1357\n01:12:41,220 --> 01:12:44,760\nthe actual person, I can look at\nthe fingerprint and see if they match.\n\n1358\n01:12:44,760 --> 01:12:46,150\nI'm okay with it, so I'll just say yes.\n\n1359\n01:12:48,270 --> 01:12:49,370\nAnd it's gonna move through here.\n\n1360\n01:12:51,760 --> 01:12:53,390\nAll right,\nnow remember the vSphere Web Client,\n\n1361\n01:12:53,390 --> 01:12:57,170\nthis piece is actually what acquired\nthe .NET framework to be installed.\n\n1362\n01:12:57,170 --> 01:13:01,280\nWhile we're waiting on it,\nif you want to use the Web Client,\n\n1363\n01:13:01,280 --> 01:13:04,820\nit's got the full functionality so\nit is what you want to normally use.\n\n1364\n01:13:04,820 --> 01:13:07,722\nVMware supports it on Internet Explorer.\n\n1365\n01:13:07,722 --> 01:13:11,220\nAll right, so if you're running\nGoogle Chrome or Safari, or\n\n1366\n01:13:11,220 --> 01:13:15,020\nsomething like that,\nwell it either doesn't work out right, or\n\n1367\n01:13:15,020 --> 01:13:17,539\nit doesn't work completely,\nyou can bump into issues.\n\n1368\n01:13:18,710 --> 01:13:21,330\nSo the only supportive web\nbrowser is Internet Explorer.\n\n1369\n01:13:21,330 --> 01:13:24,850\nThe VMware is very much\ntailored towards Windows.\n\n1370\n01:13:24,850 --> 01:13:27,780\nYou'll notice a lot of the administrative\ntools only work on Windows,\n\n1371\n01:13:27,780 --> 01:13:29,540\nthat's kind of what it's designed for.\n\n1372\n01:13:29,540 --> 01:13:33,540\nEven though the underlying\nOS-VSX is Linux,\n\n1373\n01:13:33,540 --> 01:13:35,220\nthey're still kind of\ngeared towards Windows.\n\n1374\n01:13:35,220 --> 01:13:38,030\nAnd that's because that's what a lot\nof Enterprises are running, or\n\n1375\n01:13:38,030 --> 01:13:40,770\nat least the Enterprises that\nare adopting virtualization.\n\n1376\n01:13:40,770 --> 01:13:44,190\nYour guest machines, they can be Linux,\nthey can be Windows,\n\n1377\n01:13:44,190 --> 01:13:45,800\nthey can be whatever, right.\n\n1378\n01:13:45,800 --> 01:13:49,700\nBut for the management tools,\nit's pretty much an all Windows world.\n\n1379\n01:13:51,130 --> 01:13:55,860\nAnd I actually have a Mac here that I use,\nand for\n\n1380\n01:13:55,860 --> 01:13:57,440\nthe show, I'm booting into Windows.\n\n1381\n01:13:57,440 --> 01:14:00,580\nBut if you guys have seen other shows with\nme, that sometimes I boot to the Mac side,\n\n1382\n01:14:00,580 --> 01:14:01,870\nsometimes I boot to the Windows side.\n\n1383\n01:14:01,870 --> 01:14:04,270\nJust Kind of depends on what I'm doing.\n\n1384\n01:14:04,270 --> 01:14:06,840\nFor this show I am booted\nto the Windows side..\n\n1385\n01:14:06,840 --> 01:14:10,970\nIf you don't want that,\nif you definitely want to run Mac OS and\n\n1386\n01:14:10,970 --> 01:14:14,640\nnot deal with Windows, what you can do\nis you can set up a virtual machine\n\n1387\n01:14:14,640 --> 01:14:17,600\nthat you remote into and\nyou can run the client from there.\n\n1388\n01:14:17,600 --> 01:14:18,920\nThat works too.\n\n1389\n01:14:18,920 --> 01:14:20,890\nIt just takes up another desktop license.\n\n1390\n01:14:23,590 --> 01:14:24,400\nAll right.\n\n1391\n01:14:24,400 --> 01:14:26,310\nThat should be it for the Web Client.\n\n1392\n01:14:26,310 --> 01:14:28,860\nI don't think it asks for much more and\nwe should be moving on to the inventory\n\n1393\n01:14:28,860 --> 01:14:32,070\nservice, which is when we'll start\nto see the database questions.\n\n1394\n01:14:32,070 --> 01:14:35,020\nThat's really all I wanna show you guys,\nis that database side so\n\n1395\n01:14:35,020 --> 01:14:37,460\nI'm kind of stalling\nhere until we get to it.\n\n1396\n01:14:40,490 --> 01:14:45,560\nOnce this is all done, it's gonna finish\nthe install, and then it's ready to go.\n\n1397\n01:14:45,560 --> 01:14:47,330\nI'm ready to go log into my Web Client.\n\n1398\n01:14:47,330 --> 01:14:48,330\nAll right?\n\n1399\n01:14:48,330 --> 01:14:50,370\nYeah, there it goes doing\nthe inventory service.\n\n1400\n01:14:50,370 --> 01:14:54,180\nOne problem that we're gonna bump into is\nthat the only user who has full access to\n\n1401\n01:14:54,180 --> 01:14:57,630\nthe system is the administrator that\nwas created during the install.\n\n1402\n01:14:57,630 --> 01:15:01,900\nA common mistake that I see, is where a\nlot of people will do the simple install,\n\n1403\n01:15:01,900 --> 01:15:03,500\nthey'll connect it to\ntheir active directory,\n\n1404\n01:15:03,500 --> 01:15:06,620\nand then they'll long in with one\nof their domain admin accounts, and\n\n1405\n01:15:06,620 --> 01:15:08,520\nthey'll find that they\ncan't manage the server.\n\n1406\n01:15:08,520 --> 01:15:13,230\nThey can't add in the EXSO's, they can't\ncreams VM's, they can't do anything.\n\n1407\n01:15:13,230 --> 01:15:17,200\nAnd the reason is, even as a domain\nadmin in active directory,\n\n1408\n01:15:17,200 --> 01:15:19,580\nyou don't have any access in vCenter,\nright.\n\n1409\n01:15:19,580 --> 01:15:22,680\nThe only person who'll have access\nby default at the end of this,\n\n1410\n01:15:22,680 --> 01:15:26,092\nwill be that administrator account\nthat was created during the wizard.\n\n1411\n01:15:26,092 --> 01:15:29,100\nAll right, so\nwhat we have to do is when this is done,\n\n1412\n01:15:29,100 --> 01:15:32,850\nwe need to log in as that administrator\naccount that we just created, and\n\n1413\n01:15:32,850 --> 01:15:37,530\nfrom there we can add in our domain admins\nor whoever it is that we want to have\n\n1414\n01:15:37,530 --> 01:15:40,550\naccess to this system so\nthey can manage it and make changes.\n\n1415\n01:15:43,300 --> 01:15:44,610\nAll right so here it is.\n\n1416\n01:15:44,610 --> 01:15:49,020\nIt's doing the inventory service.\n\n1417\n01:15:49,020 --> 01:15:53,860\nAnother thing we'll get is when it\ngets to the actual vCenter install and\n\n1418\n01:15:53,860 --> 01:16:00,300\nit starts to do it It's gonna ask us about\nwhether we have another vCenter server.\n\n1419\n01:16:00,300 --> 01:16:03,710\nI mentioned I think in the first segment\nthat when I do a deployment like this for\n\n1420\n01:16:03,710 --> 01:16:07,880\nlarger organizations,\nI always do two vCenter servers, right?\n\n1421\n01:16:07,880 --> 01:16:09,940\nThat way if one fails,\nI've got the other one.\n\n1422\n01:16:09,940 --> 01:16:11,590\nThere's two of them in place, right?\n\n1423\n01:16:11,590 --> 01:16:12,960\nYou want redundancy.\n\n1424\n01:16:12,960 --> 01:16:17,640\nWell, it can actually link the two\nservers so that they work together.\n\n1425\n01:16:17,640 --> 01:16:20,390\nIt doesn't really matter which vCenter\nserver you connect to at that point.\n\n1426\n01:16:20,390 --> 01:16:22,090\nYou're managing your whole\nenvironment from both.\n\n1427\n01:16:22,090 --> 01:16:23,730\nThat gives you redundancy.\n\n1428\n01:16:23,730 --> 01:16:29,420\nIf you don't do that link, the two\nservers are independent and an ESX host,\n\n1429\n01:16:29,420 --> 01:16:33,550\nso one of our ESX virtualization servers\ncan really only be managed by one.\n\n1430\n01:16:33,550 --> 01:16:36,370\nOtherwise the two vCenter\nservers start to bump heads, and\n\n1431\n01:16:36,370 --> 01:16:38,970\nyou start to get a lot of conflicts and\nproblems.\n\n1432\n01:16:38,970 --> 01:16:41,640\nYou wanna make sure you link them\nif you've got more than one.\n\n1433\n01:16:41,640 --> 01:16:44,730\nThat's the only difference between\nsetting up a single server, and\n\n1434\n01:16:44,730 --> 01:16:46,440\nmultiple servers is how\nyou choose to link them.\n\n1435\n01:16:47,760 --> 01:16:49,810\nAll right,\nhere I'm getting a little warning.\n\n1436\n01:16:49,810 --> 01:16:54,050\nIt's saying setup has detected a web\nserver like IIS installed in this machine.\n\n1437\n01:16:54,050 --> 01:16:57,110\nvCenter Server uses\ncommon web service ports.\n\n1438\n01:16:57,110 --> 01:17:01,150\nTo avoid resource conflicts, a dedicated\nmachine for vCenter Server is recommended.\n\n1439\n01:17:01,150 --> 01:17:01,890\nAll right.\n\n1440\n01:17:01,890 --> 01:17:04,870\nThe problem here is when I\ninstalled the .NET framework,\n\n1441\n01:17:04,870 --> 01:17:09,390\nit also added IIS, Microsoft's web server.\n\n1442\n01:17:09,390 --> 01:17:11,330\nAnd so it's warning about that conflict.\n\n1443\n01:17:11,330 --> 01:17:12,980\nNow, I don't really care about IIS.\n\n1444\n01:17:12,980 --> 01:17:13,840\nI don't need it.\n\n1445\n01:17:13,840 --> 01:17:15,620\nvCenter doesn't use it.\n\n1446\n01:17:15,620 --> 01:17:17,670\nWe can disable that.\n\n1447\n01:17:17,670 --> 01:17:19,300\nI'll just go into my services here.\n\n1448\n01:17:21,750 --> 01:17:24,170\nAnd the service for\n\n1449\n01:17:24,170 --> 01:17:28,750\nIIS is actually called the World Wide\nWeb Publishing Service, it's right here.\n\n1450\n01:17:28,750 --> 01:17:31,950\nAnd what I'm gonna do is I'm gonna\nstop it and I'm gonna set to disable.\n\n1451\n01:17:31,950 --> 01:17:36,320\nNow I know that it told me that was\nrequired for the .NET framework, but\n\n1452\n01:17:36,320 --> 01:17:38,760\nit's actually required for\nsome pieces that we don't need.\n\n1453\n01:17:38,760 --> 01:17:41,520\nI'm just gonna disable it outright,\nthere we go.\n\n1454\n01:17:41,520 --> 01:17:43,670\nAnd now that that's disabled,\nI can come in here and say yeah,\n\n1455\n01:17:43,670 --> 01:17:45,040\nI still wanna continue.\n\n1456\n01:17:45,040 --> 01:17:47,795\nAnd that's gonna let it continue and\nI won't get that conflict with IIS.\n\n1457\n01:17:50,535 --> 01:17:51,185\nAll right.\n\n1458\n01:17:51,185 --> 01:17:52,870\nSo there it goes.\n\n1459\n01:17:52,870 --> 01:17:53,880\nAnd any time now,\n\n1460\n01:17:53,880 --> 01:17:56,445\nI'm gonna get this database screen\nthat I wanna show you guys.\n\n1461\n01:17:56,445 --> 01:17:59,790\n[LAUGH] It will happen sooner or later.\n\n1462\n01:17:59,790 --> 01:18:00,910\nAll right.\n\n1463\n01:18:00,910 --> 01:18:03,000\nOn this screen, it's asking for\nmy license, right?\n\n1464\n01:18:03,000 --> 01:18:06,320\nIf we've purchased vCenter,\nwe need to punch in our license here.\n\n1465\n01:18:06,320 --> 01:18:11,110\nIf you don't have one you can leave it\nblank, and you'll get a 60 day evaluation.\n\n1466\n01:18:11,110 --> 01:18:12,040\nFor those of you learning and\n\n1467\n01:18:12,040 --> 01:18:13,990\npracticing at home that's\nnormally what you want to do.\n\n1468\n01:18:13,990 --> 01:18:14,677\nAnd that's what I'm gonna do here.\n\n1469\n01:18:14,677 --> 01:18:16,801\nI'll just leave it blank, all right?\n\n1470\n01:18:16,801 --> 01:18:20,110\nNow it's asking about the database.\n\n1471\n01:18:20,110 --> 01:18:24,680\nIf I have an existing database, I can\nchoose to use it and I can come in and\n\n1472\n01:18:24,680 --> 01:18:28,360\nI can specify my data source name or\nmy DSN.\n\n1473\n01:18:28,360 --> 01:18:34,060\nAll right, if I don't, I can tell it\nto install SQL Server 2008 Express.\n\n1474\n01:18:34,060 --> 01:18:37,250\nThat'll work for small environments,\nbut I don't wanna push it too hard.\n\n1475\n01:18:37,250 --> 01:18:42,080\nSee how it says this option only supports\ndeployments with up to five hosts or\n\n1476\n01:18:42,080 --> 01:18:45,500\n50 virtual machines, and\nthat's an or, right.\n\n1477\n01:18:45,500 --> 01:18:49,410\nYou could have five hosts with one VM each\nand that would still be the limit, right.\n\n1478\n01:18:49,410 --> 01:18:52,618\nFive hosts or 50 virtual machines,\nwhichever you hit first.\n\n1479\n01:18:56,415 --> 01:18:59,290\nThen it's gonna ask what I want to use for\na system account.\n\n1480\n01:18:59,290 --> 01:19:03,380\nNow it's got,\nUse Windows Local Account chosen here.\n\n1481\n01:19:03,380 --> 01:19:06,130\nIf I uncheck that I can\npunch in another account.\n\n1482\n01:19:06,130 --> 01:19:09,000\nRemember I created one\nearlier called vCenter.\n\n1483\n01:19:09,000 --> 01:19:09,880\nThe problem is,\n\n1484\n01:19:09,880 --> 01:19:14,310\nwhen you uncheck it, it wants to use\nwho you are logged in as right now.\n\n1485\n01:19:14,310 --> 01:19:17,030\nSo if I wanted to use that vCenter\naccount I created earlier,\n\n1486\n01:19:17,030 --> 01:19:20,090\nI would actually need to log\nin with it to do the install.\n\n1487\n01:19:20,090 --> 01:19:22,990\nAnd that's because of how it\nassigns some of the permissions.\n\n1488\n01:19:22,990 --> 01:19:26,090\nFor right now, I'm just gonna leave it\nas Use Windows Local System account.\n\n1489\n01:19:26,090 --> 01:19:29,080\nAnd I can always go and\nmodify it under services later.\n\n1490\n01:19:29,080 --> 01:19:30,490\nAnd change it to use\nthat account that I made.\n\n1491\n01:19:30,490 --> 01:19:32,900\nAll right, so that's good.\n\n1492\n01:19:32,900 --> 01:19:34,990\nAnd now the ports.\n\n1493\n01:19:34,990 --> 01:19:39,900\nHere's where we can see it conflict\nwith IIS, because it's taking port 80,\n\n1494\n01:19:39,900 --> 01:19:41,100\nand port 43, right.\n\n1495\n01:19:41,100 --> 01:19:43,940\nThat's regular HTTP and HTTPS.\n\n1496\n01:19:45,180 --> 01:19:46,583\nIIS was trying to use those also.\n\n1497\n01:19:46,583 --> 01:19:51,150\nBut I disabled IIS so now vCenter will\nbe able to take over those, no problem.\n\n1498\n01:19:51,150 --> 01:19:55,939\nBut there's a lot of other ports- notice\n902 Remember, I said earlier, 902 and\n\n1499\n01:19:55,939 --> 01:19:58,916\n903, those are the ports\nwe need to have inbound and\n\n1500\n01:19:58,916 --> 01:20:04,440\noutbound between vCenter and our ESX host\nso we've gotta have that one available.\n\n1501\n01:20:04,440 --> 01:20:09,420\nSome of the other ones like 8080,\n8443, these are tied to some\n\n1502\n01:20:09,420 --> 01:20:13,580\nof the other services we're gonna use.\n\n1503\n01:20:13,580 --> 01:20:19,455\nThe vSphere client itself is running on,\nthink it's 8443 or 9443.\n\n1504\n01:20:19,455 --> 01:20:21,173\nSo some of the ports\naren't even listed here.\n\n1505\n01:20:21,173 --> 01:20:26,210\nWe've also got LDAP and SSL, so\na few other things that are in there.\n\n1506\n01:20:26,210 --> 01:20:28,950\nAll right, now there is an option\ndown here that says increase\n\n1507\n01:20:28,950 --> 01:20:31,100\nthe number of available ephemeral ports.\n\n1508\n01:20:32,145 --> 01:20:36,080\nAll right, ephemeral ports [LAUGH]\nwhich are apparently hard to say,\n\n1509\n01:20:36,080 --> 01:20:39,430\nare temporary ports that are added in for\nconnecting to VMs.\n\n1510\n01:20:39,430 --> 01:20:45,650\nAnd, or to VMs and the ESX hosts, and\nyou'll have one for each of those servers,\n\n1511\n01:20:45,650 --> 01:20:48,610\nbut they're dynamically generated, so\nwe don't know what they're gonna be.\n\n1512\n01:20:48,610 --> 01:20:51,100\nWell, the default limit\nties them to 2,000,\n\n1513\n01:20:51,100 --> 01:20:55,330\nall right, so\nit can connect to 2,000 systems.\n\n1514\n01:20:55,330 --> 01:20:58,160\nThat's ESX hosts and VMs.\n\n1515\n01:20:58,160 --> 01:21:01,410\nIf you've got more than 2000,\nyou can check this box and\n\n1516\n01:21:01,410 --> 01:21:04,810\nit'll bump up the amount of ephemeral\nports to handle more than that.\n\n1517\n01:21:04,810 --> 01:21:08,680\nWell, most environments don't\nhave 2000 virtual machines.\n\n1518\n01:21:08,680 --> 01:21:11,620\nYou might though and so\nthat's where that option is coming from.\n\n1519\n01:21:11,620 --> 01:21:13,987\nFor me, I'm not gonna need\nit since I'll have five.\n\n1520\n01:21:15,729 --> 01:21:18,330\nAll right, here's the database screen.\n\n1521\n01:21:18,330 --> 01:21:21,220\nIt's showing us some basic\nsizing information here,\n\n1522\n01:21:21,220 --> 01:21:27,220\nsaying if you have less than 100 hosts or\nless than 1000 virtual machines,\n\n1523\n01:21:27,220 --> 01:21:31,720\nit'll set up the database and it'll set\nit to use one gig of maximum memory.\n\n1524\n01:21:31,720 --> 01:21:34,970\nIt's setting a cap on the amount\nof memory the database can use.\n\n1525\n01:21:34,970 --> 01:21:38,750\nFor me, that's really important,\nbecause when you do a simple install,\n\n1526\n01:21:38,750 --> 01:21:41,170\nall four roles are on the same box,\n\n1527\n01:21:41,170 --> 01:21:43,930\nI don't want the database taking\nall the memory available.\n\n1528\n01:21:43,930 --> 01:21:45,190\nThat's how SQL Server works.\n\n1529\n01:21:45,190 --> 01:21:48,170\nMicrosoft SQL Server will take\nall the memory it can get\n\n1530\n01:21:48,170 --> 01:21:49,950\nif you let it, all right.\n\n1531\n01:21:49,950 --> 01:21:52,440\nBut if you have a medium or\na large environment, right,\n\n1532\n01:21:52,440 --> 01:21:57,400\nso 100 to 400 hosts or\n1,000 to 4,000 virtual machines,\n\n1533\n01:21:57,400 --> 01:22:00,790\nyou need to go to medium and\nit'll give two gigs to the database.\n\n1534\n01:22:00,790 --> 01:22:04,910\nAnd if you have large, 400 hosts or\nmore, 4,000 virtual machines or\n\n1535\n01:22:04,910 --> 01:22:09,115\nmore, then it needs to give three\ngigs of memory to the database.\n\n1536\n01:22:09,115 --> 01:22:12,065\nMy server only has four gigs of memory, so\n\n1537\n01:22:12,065 --> 01:22:16,795\nif I go large, that will only leave one\ngig of memory for the operating system and\n\n1538\n01:22:16,795 --> 01:22:19,375\nthe other three roles and\nthat's a problem.\n\n1539\n01:22:19,375 --> 01:22:22,515\nSo this is where we start\nto size our server.\n\n1540\n01:22:22,515 --> 01:22:24,740\nMemory is your big bottleneck on this.\n\n1541\n01:22:24,740 --> 01:22:28,843\nFor me though, I'm gonna have about five\nhosts and maybe five virtual machines so\n\n1542\n01:22:28,843 --> 01:22:30,699\nsmall is gonna work just fine for me.\n\n1543\n01:22:34,344 --> 01:22:37,171\nAll right, and\nthen we can hit install, and\n\n1544\n01:22:37,171 --> 01:22:40,855\nnow it's gonna finish installing vCenter,\nall right.\n\n1545\n01:22:40,855 --> 01:22:42,415\nWhen vCenter is done.\n\n1546\n01:22:42,415 --> 01:22:45,455\nThey're prompting for another SSL\ncertificate, I'll say okay to that.\n\n1547\n01:22:45,455 --> 01:22:48,945\nWhen vCenter is done,\nit's now up and running and\n\n1548\n01:22:48,945 --> 01:22:51,810\nI need to connect up to manage it,\nall right.\n\n1549\n01:22:51,810 --> 01:22:54,890\nMy first job should be to log in as that\n\n1550\n01:22:54,890 --> 01:22:57,880\nvSphere administrator account that\nwas created during the install, and\n\n1551\n01:22:57,880 --> 01:23:00,510\nthen add in any domain accounts\nthat I want to administrate.\n\n1552\n01:23:00,510 --> 01:23:03,430\nAll right, now this part of the install\ndoes actually take a while.\n\n1553\n01:23:03,430 --> 01:23:04,230\nIt's gonna churn through and\n\n1554\n01:23:04,230 --> 01:23:07,960\ninstall the vCenter files itself,\nand they're pretty big.\n\n1555\n01:23:07,960 --> 01:23:11,330\nSo, what we'll do is we'll stop here and\ntake a break, all right.\n\n1556\n01:23:11,330 --> 01:23:12,360\nThat's gonna churn along.\n\n1557\n01:23:12,360 --> 01:23:14,620\nJust the blue bar's gonna\nmove across the screen.\n\n1558\n01:23:14,620 --> 01:23:16,930\nWhen it's done,\nthe server is gonna reboot.\n\n1559\n01:23:16,930 --> 01:23:19,290\nAnd that's where we'll pick up\nwith when we get back from break.\n\n1560\n01:23:19,290 --> 01:23:21,780\nSo we'll go through that\ninitial configuration and\n\n1561\n01:23:21,780 --> 01:23:23,610\nwhat it takes to get vCenter done.\n\n1562\n01:23:23,610 --> 01:23:26,410\nSo that's a pretty good spot for\nus to wrap up right there.\n\n1563\n01:23:26,410 --> 01:23:28,710\nSo let's stop and take a break.\n\n1564\n01:23:28,710 --> 01:23:30,843\nAnd when we get back,\nwe'll finish that vCenter [INAUDIBLE].\n\n1565\n01:23:30,843 --> 01:23:37,064\n[MUSIC]\n\n1566\n01:23:37,064 --> 01:23:38,773\n[SOUND] All right, welcome back everybody.\n\n1567\n01:23:38,773 --> 01:23:42,960\nSo, during the break, the installer\nfinished and the server rebooted.\n\n1568\n01:23:42,960 --> 01:23:45,160\nNot terribly exciting.\n\n1569\n01:23:45,160 --> 01:23:48,510\nNow that the server's up,\nthere's not really much more to see on it.\n\n1570\n01:23:48,510 --> 01:23:52,230\nIt's running a SQL server\nin the background and\n\n1571\n01:23:52,230 --> 01:23:53,750\njust sitting there doing its thing.\n\n1572\n01:23:53,750 --> 01:23:56,540\nIts got its little web applications\nrunning and it's waiting for\n\n1573\n01:23:56,540 --> 01:23:58,850\nus to connect and do something.\n\n1574\n01:23:58,850 --> 01:24:01,080\nNow, if you're on the server itself.\n\n1575\n01:24:01,080 --> 01:24:05,220\nYou likely won't be able to access\nthe vSphere web client very well because\n\n1576\n01:24:05,220 --> 01:24:07,630\nInternet Explorer on\nWindows Server 2008 and\n\n1577\n01:24:07,630 --> 01:24:11,440\n2012 in running the enhanced\nsecurity configuration mode.\n\n1578\n01:24:11,440 --> 01:24:15,560\nSo a lot of plug ins and add ons\nare not really functional, all right.\n\n1579\n01:24:15,560 --> 01:24:18,690\nSo our next step is really\nto go back to our desktop.\n\n1580\n01:24:18,690 --> 01:24:20,970\nAnd get it setup to be able\nto administer this server, so\n\n1581\n01:24:20,970 --> 01:24:22,080\nthat's exactly what I'm going to do.\n\n1582\n01:24:22,080 --> 01:24:25,600\nI'm going to go ahead and\njust jump back to my desktop here.\n\n1583\n01:24:25,600 --> 01:24:28,210\nAnd I will fire up old Internet Explorer.\n\n1584\n01:24:29,230 --> 01:24:33,280\nLike I said it can work in other browsers,\nbut for\n\n1585\n01:24:33,280 --> 01:24:36,740\nbest compatibility you need\nto use Internet Explorer.\n\n1586\n01:24:36,740 --> 01:24:40,040\nAnd what we can do is we can\nbrowse to our new vCenter Server.\n\n1587\n01:24:40,040 --> 01:24:43,940\nNow when it set up vCenter,\nwe set up several different things that\n\n1588\n01:24:43,940 --> 01:24:46,130\nare all running on all\nsorts of different ports.\n\n1589\n01:24:46,130 --> 01:24:50,680\nSo the vSphere web client itself, well,\n\n1590\n01:24:50,680 --> 01:24:56,540\nif I browse to https:// and\nthen whatever my server's name is.\n\n1591\n01:24:56,540 --> 01:25:00,730\nMine is VM server one .lab.ITPRO.TV:9443,\n\n1592\n01:25:00,730 --> 01:25:04,930\nright 443 is SSL, but\n\n1593\n01:25:04,930 --> 01:25:10,400\n9443 that's the port that the vSpear\nweb client is running on,\n\n1594\n01:25:10,400 --> 01:25:14,670\nso I'm just going to browse to that,\nall right.\n\n1595\n01:25:14,670 --> 01:25:16,630\nNow I'm getting a warning\nabout the certificate.\n\n1596\n01:25:16,630 --> 01:25:20,580\nIt's telling me the website\nwas not issued, or\n\n1597\n01:25:20,580 --> 01:25:23,750\nthe certificate was not issued by\na trusted certificate authority.\n\n1598\n01:25:23,750 --> 01:25:26,090\nThat's because it was\na self-signed certificate.\n\n1599\n01:25:26,090 --> 01:25:28,810\nSo I could choose to trust\nthat root if I wanted, and\n\n1600\n01:25:28,810 --> 01:25:30,290\nthen I wouldn't see this dialogue anymore.\n\n1601\n01:25:30,290 --> 01:25:32,930\nI'll go ahead and\ncontinue to the website, and\n\n1602\n01:25:32,930 --> 01:25:35,240\nnow it's starting to load\nthe vSphere Web Client.\n\n1603\n01:25:36,440 --> 01:25:40,060\nWhile I'm waiting on that I can\ncome up here to the certificate and\n\n1604\n01:25:40,060 --> 01:25:45,880\nyou'll see where it shows it was issued\nby vm-server1, which we don't trust,\n\n1605\n01:25:45,880 --> 01:25:50,320\nbut we could go in here and actually, it's\nnot gonna let me view that one, is it.\n\n1606\n01:25:50,320 --> 01:25:53,650\nBecause it's not a fully qualified name,\nyeah, so it won't let me install it, but\n\n1607\n01:25:53,650 --> 01:25:54,260\nthat's all right.\n\n1608\n01:25:54,260 --> 01:25:57,370\nI can just ignore it for now.\n\n1609\n01:25:57,370 --> 01:25:59,950\nWhen you log in the first time,\nI'm actually seeing this prompt,\n\n1610\n01:25:59,950 --> 01:26:01,030\nI'm gonna close it for a second.\n\n1611\n01:26:02,370 --> 01:26:04,840\nThe website itself, it is web based.\n\n1612\n01:26:04,840 --> 01:26:07,840\nHowever, it does use some JavaScript and\n\n1613\n01:26:07,840 --> 01:26:12,690\nother plug-ins to be able to perform all\nof the advanced management functionality.\n\n1614\n01:26:12,690 --> 01:26:16,980\nSo if I just log in right now and start\nto work, some things may not work for me,\n\n1615\n01:26:16,980 --> 01:26:20,160\nespecially the right-click menu is one\nthat I always have a problem with.\n\n1616\n01:26:20,160 --> 01:26:23,430\nSo notice this little message\ndown here at the bottom.\n\n1617\n01:26:23,430 --> 01:26:26,290\nDownload the client integration plugin.\n\n1618\n01:26:26,290 --> 01:26:27,960\nIf you install that plugin,\n\n1619\n01:26:27,960 --> 01:26:32,120\nyour experience inside of the vSphere\nWeb Client will be much [LAUGH] better.\n\n1620\n01:26:32,120 --> 01:26:33,540\nSo you definitely wanna do that.\n\n1621\n01:26:33,540 --> 01:26:36,930\nI'm gonna go ahead and click on that\nto install the plug in, all right.\n\n1622\n01:26:36,930 --> 01:26:39,380\nSo here it's just telling me whether\nI wanna actually do it or not.\n\n1623\n01:26:39,380 --> 01:26:40,140\nI'll go ahead and run it.\n\n1624\n01:26:41,330 --> 01:26:42,220\nAnd we'll get it installed.\n\n1625\n01:26:42,220 --> 01:26:44,640\nIt only takes a moment,\nit's about 5 megs in size.\n\n1626\n01:26:44,640 --> 01:26:48,190\nIt installs pretty quickly, and\n\n1627\n01:26:48,190 --> 01:26:51,200\nI have to close Internet Explorer\ncuz that's convenient.\n\n1628\n01:26:51,200 --> 01:26:54,810\nSo we'll do that, and\n\n1629\n01:26:54,810 --> 01:26:57,060\nthis is one of those where you\njust click next a couple of times.\n\n1630\n01:26:57,060 --> 01:26:59,800\nThere's no real options to install,\nso I'll just go ahead and\n\n1631\n01:26:59,800 --> 01:27:02,840\nhit next and install, all right.\n\n1632\n01:27:02,840 --> 01:27:05,440\nNow, when we installed vCenter,\n\n1633\n01:27:05,440 --> 01:27:09,690\nwe installed the inventory piece,\nthe inventory management piece, and\n\n1634\n01:27:09,690 --> 01:27:12,810\nthat's how we're gonna be able\nto find our vCenter server.\n\n1635\n01:27:12,810 --> 01:27:14,120\nNow, how does it know where to look?\n\n1636\n01:27:14,120 --> 01:27:16,610\nWell it's gonna look at\nwhatever server I browse to.\n\n1637\n01:27:16,610 --> 01:27:23,280\nSo when we punch in our web browser\nto go to VM-Server 1, like I'm doing,\n\n1638\n01:27:23,280 --> 01:27:26,590\nit's gonna look there, for the inventory\nservice and it should find it.\n\n1639\n01:27:26,590 --> 01:27:30,540\nIf it doesn't,\nit assumes that is server of some sort and\n\n1640\n01:27:30,540 --> 01:27:35,420\nit'll ask that server to tell us where\nto go to find the inventory database.\n\n1641\n01:27:35,420 --> 01:27:38,600\nAnd from there it'll find everything\nelse that it needs in our system.\n\n1642\n01:27:38,600 --> 01:27:40,780\nThat whole process is fairly automatic.\n\n1643\n01:27:40,780 --> 01:27:46,417\nYou'll see right here, I'll just punch to\nbrowse to that same server, all right.\n\n1644\n01:27:46,417 --> 01:27:50,938\nAnd this time it's not gonna warn me about\nthe plug in because I've got it installed\n\n1645\n01:27:50,938 --> 01:27:52,500\nand I'll be ready to log in.\n\n1646\n01:27:52,500 --> 01:27:54,240\nSo we'll just give it\na moment while it does that.\n\n1647\n01:27:56,980 --> 01:27:57,710\nThere we go.\n\n1648\n01:27:57,710 --> 01:28:01,055\nDown here I see that it's telling me\nit wants to run the following add-on,\n\n1649\n01:28:01,055 --> 01:28:02,660\nthe VMware remote console plugin.\n\n1650\n01:28:02,660 --> 01:28:05,420\nThat's for\nviewing the screens of the remote systems.\n\n1651\n01:28:05,420 --> 01:28:07,410\nAnd I'm just gonna tell it to allow.\n\n1652\n01:28:07,410 --> 01:28:08,550\nI'll let that run.\n\n1653\n01:28:08,550 --> 01:28:10,690\nThat does make it reload the page,\nwhich is annoying.\n\n1654\n01:28:13,090 --> 01:28:13,970\nAnd then we'll log in.\n\n1655\n01:28:13,970 --> 01:28:17,370\nNow, because I just finished the install,\nI really just have one account.\n\n1656\n01:28:17,370 --> 01:28:20,580\nIt's that administrator account that\nwas created during the install.\n\n1657\n01:28:20,580 --> 01:28:23,500\nBut when you type in the user name\nyou have to type it in like this,\n\n1658\n01:28:23,500 --> 01:28:29,850\nadministrator at Vsphere dot local.\n\n1659\n01:28:29,850 --> 01:28:32,680\nOkay.\nThis might be the only time you ever login\n\n1660\n01:28:32,680 --> 01:28:35,650\nwith this account, but if you didn't\nwrite it down during the installer,\n\n1661\n01:28:35,650 --> 01:28:38,490\nthen you're gonna have a problem getting\nlogged in cuz you're basically locked out.\n\n1662\n01:28:38,490 --> 01:28:40,010\nThis is the only account\nI've got right now.\n\n1663\n01:28:40,010 --> 01:28:43,870\nSo I'm gonna punch that in,\nadmininstrator@vsphere.local, and\n\n1664\n01:28:43,870 --> 01:28:46,350\nI'll punch in the password\nI set during installation.\n\n1665\n01:28:48,990 --> 01:28:53,050\nWhen I log in I should be greeted\nby the vSphere Web Client.\n\n1666\n01:28:53,050 --> 01:28:58,940\nNow this is a new server and it's not\ngoing to have a whole heck of a lot in it.\n\n1667\n01:28:58,940 --> 01:29:00,350\nYour inventories empty.\n\n1668\n01:29:00,350 --> 01:29:03,375\nTo get started create a data center and\nat host.\n\n1669\n01:29:03,375 --> 01:29:04,210\nRight?\n\n1670\n01:29:04,210 --> 01:29:07,400\nSo it's telling me I've got to put some\nstuff in here or there's not much to see,\n\n1671\n01:29:07,400 --> 01:29:09,260\nand they're absolutely right.\n\n1672\n01:29:09,260 --> 01:29:13,250\nBut even before I start adding things,\nthere's one other thing I wanna do.\n\n1673\n01:29:13,250 --> 01:29:17,080\nI'm logged in with a generic administrator\naccount and we don't want that.\n\n1674\n01:29:17,080 --> 01:29:19,980\nWe don't wanna share one account\namongst all of our admins.\n\n1675\n01:29:19,980 --> 01:29:24,210\nSo the first step you really\nwanna do at this point is to\n\n1676\n01:29:24,210 --> 01:29:28,670\napprove other users to have access so that\nyou can stop using the shared account.\n\n1677\n01:29:28,670 --> 01:29:29,200\nAll right.\n\n1678\n01:29:29,200 --> 01:29:31,960\nAnd you can always see up here at the top\nof the screen who your account is.\n\n1679\n01:29:31,960 --> 01:29:35,260\nI'm actually losing some real estate up\nhere because it's telling me \"vCenter\n\n1680\n01:29:35,260 --> 01:29:39,120\nserver system with expiring license\nfees are in our inventory.\"\n\n1681\n01:29:39,120 --> 01:29:40,600\nI'm doing an evaluation copy.\n\n1682\n01:29:40,600 --> 01:29:42,470\nRight?\nSo we can just close that\n\n1683\n01:29:42,470 --> 01:29:43,610\nand work for now.\n\n1684\n01:29:43,610 --> 01:29:44,182\nAlright.\n\n1685\n01:29:44,182 --> 01:29:49,630\nAnd I can see right here I'm logged in\nas an Administrator at VSPHERE.LOCAL.\n\n1686\n01:29:49,630 --> 01:29:51,755\nAll right.\nSo, I need to add some stuff.\n\n1687\n01:29:51,755 --> 01:29:54,180\nWell,on the left side,\nwe'll see a lot of options.\n\n1688\n01:29:54,180 --> 01:29:57,420\nThe one I want is vCenter and\nunder vCenter,\n\n1689\n01:29:57,420 --> 01:29:59,580\nI can see everything that I'm managing.\n\n1690\n01:29:59,580 --> 01:30:02,802\nWhat you should see is\njust one vCenter server.\n\n1691\n01:30:02,802 --> 01:30:04,330\nAll right?\nAnd that's it.\n\n1692\n01:30:04,330 --> 01:30:05,890\nEverything else is empty.\n\n1693\n01:30:05,890 --> 01:30:09,510\nHad I logged in with a active\ndirectory account, I'd login,\n\n1694\n01:30:09,510 --> 01:30:12,010\nand I would see zeros for all of this.\n\n1695\n01:30:12,010 --> 01:30:15,070\nIf you login and you see all zeros,\nthat's a big hint.\n\n1696\n01:30:15,070 --> 01:30:18,240\nThat you login with the user account\nthat doesn't have any permissions.\n\n1697\n01:30:19,240 --> 01:30:20,970\nAlright.\nEven though my active directory account\n\n1698\n01:30:20,970 --> 01:30:22,630\nis a domain admin.\n\n1699\n01:30:22,630 --> 01:30:27,610\nA full admin in my domain I won't see\nanything in here until I have permission.\n\n1700\n01:30:27,610 --> 01:30:29,160\nSo, im gonna set that now.\n\n1701\n01:30:29,160 --> 01:30:33,505\nIf I go to vCenter server,\nI'll see my server right there.\n\n1702\n01:30:33,505 --> 01:30:35,420\nVMserver1.lab.Itpro.tv.\n\n1703\n01:30:35,420 --> 01:30:37,750\nIt's the only server I've got.\n\n1704\n01:30:37,750 --> 01:30:38,550\nAll right.\n\n1705\n01:30:38,550 --> 01:30:42,940\nAnd if I click on it I\ncan go up to actions, and\n\n1706\n01:30:42,940 --> 01:30:47,040\nunder actions you'll see\nall vCenter actions.\n\n1707\n01:30:47,040 --> 01:30:49,860\nAnd under there you'll see Add Permission.\n\n1708\n01:30:49,860 --> 01:30:52,370\nThat's where we can go\nin to add other people\n\n1709\n01:30:52,370 --> 01:30:53,820\nto allow them to manage this system.\n\n1710\n01:30:53,820 --> 01:30:54,740\nSo I'm gonna go ahead and do that.\n\n1711\n01:30:54,740 --> 01:30:57,370\nI'll hit Add Permission, and\n\n1712\n01:30:57,370 --> 01:31:01,960\nwhat you do is on the left side,\nyou add your users or groups and\n\n1713\n01:31:01,960 --> 01:31:05,470\nthen on the right side, you pick\nthe access that you want to give them.\n\n1714\n01:31:05,470 --> 01:31:08,350\nSo, I wanna set up some people\nwho are allowed to administrate.\n\n1715\n01:31:08,350 --> 01:31:10,810\nSo I'm gonna drop that down,\nand I'll choose administrator.\n\n1716\n01:31:10,810 --> 01:31:14,000\nThere's several roles, and\nin another episode, the security episode,\n\n1717\n01:31:14,000 --> 01:31:17,480\nwe will take a look at how to create\nadditional roles that meet your needs.\n\n1718\n01:31:17,480 --> 01:31:19,070\nIt's actually really straight forward.\n\n1719\n01:31:19,070 --> 01:31:21,470\nThe first here you can't mess with,\nor first three.\n\n1720\n01:31:21,470 --> 01:31:23,670\nNo access, they're locked out.\n\n1721\n01:31:23,670 --> 01:31:26,380\nRead only, they can see but can't change.\n\n1722\n01:31:26,380 --> 01:31:29,400\nAnd administrator,\nthey can do whatever the heck they want.\n\n1723\n01:31:29,400 --> 01:31:31,110\nBut then you'll see\na bunch of sample ones,\n\n1724\n01:31:31,110 --> 01:31:34,940\nall these sample guys, these are ones\nthat they've created just to show you.\n\n1725\n01:31:34,940 --> 01:31:37,390\nAnd down here, you'll see where\nyou can basically pick and\n\n1726\n01:31:37,390 --> 01:31:39,400\nchoose what access they get.\n\n1727\n01:31:39,400 --> 01:31:41,490\nBut like I said, we'll see that later.\n\n1728\n01:31:41,490 --> 01:31:44,840\nFor right now, though, what I wanna do\nis I wanna set up some administrators.\n\n1729\n01:31:44,840 --> 01:31:47,290\nAnd when I choose administrators\nsee how everything is checked.\n\n1730\n01:31:47,290 --> 01:31:48,660\nAdministrators have all access.\n\n1731\n01:31:48,660 --> 01:31:51,990\nAnd on the left side I'm\ngonna to hit Add and\n\n1732\n01:31:51,990 --> 01:31:56,150\nI wanna add in some user accounts\nfrom my active directory.\n\n1733\n01:31:56,150 --> 01:32:01,260\nNow it defaults to\nVM-server1.lab.itproductivity.\n\n1734\n01:32:01,260 --> 01:32:05,370\nThose are local windows\naccounts on that server.\n\n1735\n01:32:05,370 --> 01:32:10,400\nI could also chose Vsphere.local that's\n\n1736\n01:32:10,400 --> 01:32:15,030\nthe VMware accounts in the proprietary\nlittle VMware system so we see those.\n\n1737\n01:32:15,030 --> 01:32:18,140\nOr I could choose my active\ndirectory which is called lab.\n\n1738\n01:32:18,140 --> 01:32:20,120\nAnd now I start to see those users.\n\n1739\n01:32:20,120 --> 01:32:23,770\nAnd it's gonna show user accounts first,\nthe groups are down towards the bottom.\n\n1740\n01:32:23,770 --> 01:32:26,160\nAnd so I'm gonna go in there,\nI'm just gonna find domain admins.\n\n1741\n01:32:27,320 --> 01:32:29,130\nIn your environment,\n\n1742\n01:32:29,130 --> 01:32:33,610\nyour Windows admins might be the same\npeople that are your VMware admins.\n\n1743\n01:32:33,610 --> 01:32:36,120\nIn that case, this group works out great.\n\n1744\n01:32:36,120 --> 01:32:37,640\nBut you might have separate teams.\n\n1745\n01:32:37,640 --> 01:32:41,530\nYou might have specific people who\nare VMR admins vs Windows admins,\n\n1746\n01:32:41,530 --> 01:32:44,210\nin which case you'll want to\ncreate a custom group for this.\n\n1747\n01:32:44,210 --> 01:32:46,570\nBut for me, I'm gonna go ahead and\nuse Domain Admins.\n\n1748\n01:32:46,570 --> 01:32:48,450\nSo I'll just choose that and hit Add.\n\n1749\n01:32:49,800 --> 01:32:50,460\nAnd then I'll hit OK.\n\n1750\n01:32:50,460 --> 01:32:55,740\nAnd I'll see Domain Admins are over here,\nand Administrator is chosen on the right.\n\n1751\n01:32:55,740 --> 01:33:01,170\nSo now when I say Okay, if any of\nmy Active Directory domain admins\n\n1752\n01:33:01,170 --> 01:33:05,490\nlog into the vSphere Web Client, they'll\nbe able to administer this vCenter server.\n\n1753\n01:33:05,490 --> 01:33:08,370\nThey'll be able to see and change things.\n\n1754\n01:33:08,370 --> 01:33:10,190\nAll right?\nNow I can stop\n\n1755\n01:33:10,190 --> 01:33:13,160\nusing administrator@vsphere.local.\n\n1756\n01:33:13,160 --> 01:33:16,830\nAnd I can start using my active directory\naccount, which is really handy.\n\n1757\n01:33:16,830 --> 01:33:19,310\nCuz if more than one\nperson is in the system,\n\n1758\n01:33:19,310 --> 01:33:21,700\nyou can see who's making the changes.\n\n1759\n01:33:21,700 --> 01:33:24,400\nAnd if somebody gets fired or\nleaves the company,\n\n1760\n01:33:24,400 --> 01:33:27,540\nyou can disable their account without\nimpacting the other employees.\n\n1761\n01:33:27,540 --> 01:33:28,330\nThat's really important.\n\n1762\n01:33:29,330 --> 01:33:30,950\nSo now I could just go up here and\nlog out.\n\n1763\n01:33:32,090 --> 01:33:36,620\nAnd when I log back in I can log\nin as my active directory account.\n\n1764\n01:33:36,620 --> 01:33:37,320\nNow the user name for\n\n1765\n01:33:37,320 --> 01:33:40,090\nan active directory account it's\nwhat I logged in a moment ago.\n\n1766\n01:33:40,090 --> 01:33:43,960\nIt's username@domain and\nthen their password.\n\n1767\n01:33:43,960 --> 01:33:51,300\nSo I'll log in as Don@lab.itpro.tv and\nI'll punch in my password.\n\n1768\n01:33:53,000 --> 01:33:55,950\nAnd we'll be in, all right?\n\n1769\n01:33:55,950 --> 01:34:00,650\nWith that said and done,\nnow I'm running Vsphere web client,\n\n1770\n01:34:00,650 --> 01:34:04,622\nI'm running Vcenter, I'm ready to\nstart managing my environment.\n\n1771\n01:34:04,622 --> 01:34:05,870\nAll right?\n\n1772\n01:34:05,870 --> 01:34:08,700\nBut there's still some more\nthings that I need to do.\n\n1773\n01:34:08,700 --> 01:34:12,210\nI'm actually managing my environment right\nnow, it's just my environment is empty.\n\n1774\n01:34:12,210 --> 01:34:17,000\nIf I go to vCenter I don't have\nany data centers, hosts, clusters.\n\n1775\n01:34:17,000 --> 01:34:19,135\nWe need to start creating some.\n\n1776\n01:34:19,135 --> 01:34:20,200\nRight?\n\n1777\n01:34:20,200 --> 01:34:23,522\nAt a minimum we're going to\nneed to create a data center.\n\n1778\n01:34:23,522 --> 01:34:24,310\nAll right?\n\n1779\n01:34:24,310 --> 01:34:26,980\nA data center is a physical\nlocation where your servers are.\n\n1780\n01:34:26,980 --> 01:34:30,230\nRemember this is data center\nvirtualization, kind of important.\n\n1781\n01:34:30,230 --> 01:34:32,730\nSo you'll need to create\nat least one data center.\n\n1782\n01:34:32,730 --> 01:34:38,030\nAnd once you've got that,\nyou'll start adding in your ESX host.\n\n1783\n01:34:38,030 --> 01:34:42,150\nSo each ESX host will get added\nin as a part of that data center.\n\n1784\n01:34:42,150 --> 01:34:44,820\nAnd you might have more than one data\ncenter if you've got more than one\n\n1785\n01:34:44,820 --> 01:34:46,630\ngeographic location.\n\n1786\n01:34:46,630 --> 01:34:49,160\nSo if I go under data centers, and\n\n1787\n01:34:49,160 --> 01:34:53,190\nnormally I would actually see that default\nsite in here, but I wiped it out earlier.\n\n1788\n01:34:53,190 --> 01:34:56,280\nSo I'm just gonna add one back in.\n\n1789\n01:34:56,280 --> 01:34:58,525\nAnd I'll create a data\ncenter called Gainesville.\n\n1790\n01:34:58,525 --> 01:34:59,632\nAll right?\n\n1791\n01:34:59,632 --> 01:35:03,570\nAnd this vCenter server\nis the one that's in it.\n\n1792\n01:35:03,570 --> 01:35:05,468\nSo I'll just go ahead and\ndo that and say Okay.\n\n1793\n01:35:05,468 --> 01:35:06,466\nAll right?\n\n1794\n01:35:06,466 --> 01:35:08,410\nIf you've got more than one data center,\n\n1795\n01:35:08,410 --> 01:35:11,140\nit's not a bad idea to have\na vCenter server in each one.\n\n1796\n01:35:11,140 --> 01:35:13,050\nSo you could do that and\nlink them together.\n\n1797\n01:35:13,050 --> 01:35:15,070\nOr I could start to\ncreate additional ones.\n\n1798\n01:35:15,070 --> 01:35:18,600\nAnd you'll see where I can add\nin my hosts, my ESX hosts,\n\n1799\n01:35:18,600 --> 01:35:21,570\nright here, as well as some of the other\nthings that we can manipulate.\n\n1800\n01:35:21,570 --> 01:35:25,180\nBut we do need at least one data\ncenter to make use of this, and\n\n1801\n01:35:25,180 --> 01:35:27,370\nnow we can start to add in our hosts.\n\n1802\n01:35:27,370 --> 01:35:32,170\nAnd if I go back to my vCenter\nscreen here, I can go to Hosts, and\n\n1803\n01:35:32,170 --> 01:35:33,660\nI can add in any ones that we have.\n\n1804\n01:35:33,660 --> 01:35:37,320\nNow, we haven't done\nthe installing ESX episode yet.\n\n1805\n01:35:37,320 --> 01:35:38,900\nRight.\nThat's going to be the next episode.\n\n1806\n01:35:38,900 --> 01:35:42,092\nBut I do have two servers sitting\nhere that I can add if I can remember\n\n1807\n01:35:42,092 --> 01:35:43,125\ntheir IP addresses.\n\n1808\n01:35:43,125 --> 01:35:47,290\nSo I'll come in here and try and add, or\nI'll use the domain lookup functionality.\n\n1809\n01:35:47,290 --> 01:35:49,500\nI don't know why I don't think\nof these things sometimes.\n\n1810\n01:35:49,500 --> 01:35:51,851\nSo, I'm gonna add in server three.\n\n1811\n01:35:56,184 --> 01:36:00,445\nAnd shoot.\n\n1812\n01:36:00,445 --> 01:36:02,122\nI need to pick what site\nit's going to go into.\n\n1813\n01:36:02,122 --> 01:36:05,370\nIt's gonna go into Gainesville and\nso I'll hit Next.\n\n1814\n01:36:05,370 --> 01:36:07,650\nAnd now it's asking you for\nthe username and password on the system.\n\n1815\n01:36:07,650 --> 01:36:09,140\nNow I set these systems up last week,\n\n1816\n01:36:09,140 --> 01:36:13,590\nso I'm just gonna punch in the generic\naccount that I used there.\n\n1817\n01:36:13,590 --> 01:36:14,740\nAnd it's gonna reach out to that one.\n\n1818\n01:36:14,740 --> 01:36:16,740\nAnd it's gonna get it added to the system.\n\n1819\n01:36:16,740 --> 01:36:17,508\nThere it is, it found it.\n\n1820\n01:36:19,739 --> 01:36:22,070\nIf I have a license\navailable I would assign it.\n\n1821\n01:36:22,070 --> 01:36:24,560\nBut I'm running those\nservers in an eval also.\n\n1822\n01:36:24,560 --> 01:36:27,294\nSo I'm going to leave it in\nevaluation mode, no license key.\n\n1823\n01:36:29,352 --> 01:36:31,970\nAnd then if I want to\nenable Lockdown mode.\n\n1824\n01:36:31,970 --> 01:36:33,130\nNow Lockdown mode is a neat thing.\n\n1825\n01:36:34,430 --> 01:36:40,390\nIf VCenter server were to fail, it's kinda\nnice to be able to fire up the regular\n\n1826\n01:36:40,390 --> 01:36:46,110\nvSphere client and connect directly to\nthe ESX host and manage it, all right.\n\n1827\n01:36:46,110 --> 01:36:49,390\nBut in a tightly controlled environment,\nyou might not want that.\n\n1828\n01:36:49,390 --> 01:36:53,530\nYou might not want people to make\nchanges directly to your ESX host.\n\n1829\n01:36:53,530 --> 01:36:56,130\nSo if we turn on lockdown mode,\n\n1830\n01:36:56,130 --> 01:37:00,730\nthe only way to configure that ESX host,\nis through vCenter.\n\n1831\n01:37:00,730 --> 01:37:03,570\nThrough this vCenter server\nthat I'm adding right now.\n\n1832\n01:37:03,570 --> 01:37:05,610\nIf this vCenter server is unavailable,\n\n1833\n01:37:05,610 --> 01:37:08,160\nthat host is no longer configurable,\nall right.\n\n1834\n01:37:08,160 --> 01:37:12,610\nBut in a tight security environment where\nyou've got redundant vCenter servers,\n\n1835\n01:37:12,610 --> 01:37:14,060\nit's a good idea to lock it down,\nall right.\n\n1836\n01:37:14,060 --> 01:37:17,140\nI'm going to leave mine be because\nI'm the only one that's in it, but\n\n1837\n01:37:17,140 --> 01:37:21,590\nin a high security environment you\nwould turn that off, all right.\n\n1838\n01:37:21,590 --> 01:37:23,100\nThen it's asking for where it's located.\n\n1839\n01:37:23,100 --> 01:37:24,170\nWe already told it Gainesville.\n\n1840\n01:37:24,170 --> 01:37:25,560\nSo it's got that.\n\n1841\n01:37:25,560 --> 01:37:26,730\nAn we can finish.\n\n1842\n01:37:28,370 --> 01:37:29,900\nAll right?\nAnd if I've got more hosts,\n\n1843\n01:37:29,900 --> 01:37:30,850\nI can come in and add them in.\n\n1844\n01:37:30,850 --> 01:37:34,790\nDon't worry if you see a disconnected\nmessage at first, it takes a moment for\n\n1845\n01:37:34,790 --> 01:37:38,050\nthem to talk to each other and then\nget connected, so that'll change soon.\n\n1846\n01:37:38,050 --> 01:37:40,948\nI'm gonna go ahead and add in a second\none while that one's thinking anyway.\n\n1847\n01:37:40,948 --> 01:37:48,583\nI'll add esx-server4.lab.itpro.tv\nI'll add that to Gainesville also.\n\n1848\n01:37:53,125 --> 01:37:54,489\nAnd this user name and password,\n\n1849\n01:37:54,489 --> 01:37:56,690\nwe'll see that when we start\nto set up a server later.\n\n1850\n01:37:56,690 --> 01:37:58,490\nIt's part of the installation process.\n\n1851\n01:37:58,490 --> 01:37:59,192\nIt just creates that account.\n\n1852\n01:38:01,177 --> 01:38:03,060\nAll right, so we'll get this guy added in.\n\n1853\n01:38:03,060 --> 01:38:04,890\nI'm just gonna do that eval license again.\n\n1854\n01:38:04,890 --> 01:38:06,610\nI'm not gonna do lockdown.\n\n1855\n01:38:06,610 --> 01:38:07,361\nAnd we'll put it in Gainesville.\n\n1856\n01:38:09,116 --> 01:38:12,970\nAll right, and see how my other server\nis switched to normal and connected now?\n\n1857\n01:38:12,970 --> 01:38:15,605\nIt just takes a moment to\nget connected and be happy.\n\n1858\n01:38:15,605 --> 01:38:18,060\n[LAUGH]\nAll right, so\n\n1859\n01:38:18,060 --> 01:38:21,830\nI would add in each of the ESX\nservers that I was gonna manage.\n\n1860\n01:38:21,830 --> 01:38:25,450\nRemember if you're running vCenter\nfoundation you can only add in\n\n1861\n01:38:25,450 --> 01:38:26,410\nthree hosts.\n\n1862\n01:38:26,410 --> 01:38:27,440\nThat's your limit.\n\n1863\n01:38:27,440 --> 01:38:31,068\nIf you're running vCenter essentials,\nthe only one host, that's it, so\n\n1864\n01:38:31,068 --> 01:38:34,032\nI'm running vCenter standard,\nI can add in as many as I need.\n\n1865\n01:38:36,052 --> 01:38:40,623\nAll right, that one's changed to connected\nnormal, looks like everything is happy,\n\n1866\n01:38:40,623 --> 01:38:44,016\nand if I go back to my screen I can\nsee I've got one vCenter server,\n\n1867\n01:38:44,016 --> 01:38:47,080\none data center, and two hosts, all right.\n\n1868\n01:38:47,080 --> 01:38:52,170\nAnd now we're ready to rock and\nget in to set up more stuff, all right.\n\n1869\n01:38:52,170 --> 01:38:54,660\nSo that is the initial configuration.\n\n1870\n01:38:54,660 --> 01:38:56,005\nLet's see.\nDid I leave anything out?\n\n1871\n01:38:56,005 --> 01:38:59,871\n[SOUND] Let's see.\n\n1872\n01:38:59,871 --> 01:39:00,780\nI think there's one other thing.\n\n1873\n01:39:00,780 --> 01:39:03,050\nLet me see if I need to mention this.\n\n1874\n01:39:03,050 --> 01:39:04,130\nYeah, I do.\n\n1875\n01:39:04,130 --> 01:39:09,650\nSo one other thing I wanna mention,\nthe vSphere web client, it's very useful.\n\n1876\n01:39:09,650 --> 01:39:11,810\nIt's got a lot of functionality in it.\n\n1877\n01:39:11,810 --> 01:39:15,820\nVMware has actually opened it, so that\nthird part providers can write add ons\n\n1878\n01:39:15,820 --> 01:39:17,201\nthat even extend it further, all right.\n\n1879\n01:39:18,550 --> 01:39:20,900\nFor the exam and for\nwhat we're gonna be doing in this show,\n\n1880\n01:39:20,900 --> 01:39:23,500\nyou don't need to worry about\nany of those extensions.\n\n1881\n01:39:23,500 --> 01:39:26,160\nBut in real life,\nyou might use some of them, these add-ons.\n\n1882\n01:39:26,160 --> 01:39:28,070\nAnd there's actually some\ninstalled by default.\n\n1883\n01:39:28,070 --> 01:39:30,050\nLike I've got the vCenter orchestrator.\n\n1884\n01:39:30,050 --> 01:39:35,010\nThat's actually an extension, an add-on\nto vSphere and that particular one\n\n1885\n01:39:35,010 --> 01:39:39,670\nlets me do deployments if I wanna do\nrapid provisioning of VM's or whatever.\n\n1886\n01:39:39,670 --> 01:39:40,420\nSo, it's there.\n\n1887\n01:39:40,420 --> 01:39:43,480\nI'm not gonna use it but it's there,\nthe vCenter orchestrator.\n\n1888\n01:39:43,480 --> 01:39:46,740\nWell, if you get third party\nones you can add them on.\n\n1889\n01:39:46,740 --> 01:39:49,320\nYou just go under administration, and\n\n1890\n01:39:49,320 --> 01:39:54,400\nunder administration you'll see\nsolutions and vCenter server extensions.\n\n1891\n01:39:54,400 --> 01:39:57,880\nThese are the extensions to\nadd on functionality an so\n\n1892\n01:39:57,880 --> 01:40:00,700\nyou'll see my ESX agent manager and\nV service manager.\n\n1893\n01:40:00,700 --> 01:40:04,650\nI can't mess with those, those are apart\nof the system just like the orchestrater.\n\n1894\n01:40:04,650 --> 01:40:09,210\nBut I can add in other ones and manipulate\nthem, when you install them they register\n\n1895\n01:40:09,210 --> 01:40:11,990\nthemselves and\nthen they'll show up here all right.\n\n1896\n01:40:11,990 --> 01:40:14,880\nSo, there's no add button here\nbecause it's up to the installer to\n\n1897\n01:40:14,880 --> 01:40:17,700\nput them in place and attach them so.\n\n1898\n01:40:17,700 --> 01:40:21,000\nSo just keep that in mind,\nthat in your workplace environment,\n\n1899\n01:40:21,000 --> 01:40:24,120\nyou might see some extra menu items\nthat I don't have, all right.\n\n1900\n01:40:24,120 --> 01:40:27,670\nAnd the reason is your office,\nyour enterprise, whatever, might have\n\n1901\n01:40:27,670 --> 01:40:32,200\npurchased additional extensions, or\nyou may have installed other products,\n\n1902\n01:40:32,200 --> 01:40:36,110\nlike the VDI side of things,\nthe VMware Horizon software.\n\n1903\n01:40:36,110 --> 01:40:40,150\nThose extend out vCenter to add more\nfunctionality to them, all right.\n\n1904\n01:40:40,150 --> 01:40:43,170\nOn the show though I'm gonna try and\nkeep it clean and just stick with these.\n\n1905\n01:40:43,170 --> 01:40:46,473\nSo these are what you're guaranteed\nto see is what I've got on mine.\n\n1906\n01:40:47,808 --> 01:40:50,258\nAll right.\nI think that's the last thing I've got on\n\n1907\n01:40:50,258 --> 01:40:50,810\nvCenter.\n\n1908\n01:40:50,810 --> 01:40:53,170\nLet me see if I've left anything else out.\n\n1909\n01:40:53,170 --> 01:40:54,440\nWe installed the plugin.\n\n1910\n01:40:54,440 --> 01:40:55,280\nWe fired it up.\n\n1911\n01:40:55,280 --> 01:40:56,390\nYeah, we are in business.\n\n1912\n01:40:57,410 --> 01:41:00,280\nAll right, the only thing that we didn't\nget to, that I thought we would get to\n\n1913\n01:41:00,280 --> 01:41:03,430\nthis episode and\nran out of time was installing ESXi.\n\n1914\n01:41:03,430 --> 01:41:05,440\nActually installing the hypervisor,\nall right.\n\n1915\n01:41:05,440 --> 01:41:07,820\nI added two into the vCenter there, but\n\n1916\n01:41:07,820 --> 01:41:10,320\nwouldn't it be nice to see how to\nset those things up from scratch.\n\n1917\n01:41:10,320 --> 01:41:13,350\nWell, that's what we're gonna\ndo in the next episode.\n\n1918\n01:41:13,350 --> 01:41:15,240\nBe sure to stay tuned for that.\n\n1919\n01:41:15,240 --> 01:41:16,440\nAs we'll get that set up.\n\n1920\n01:41:16,440 --> 01:41:18,720\nIt doesn't take as long so\nthat'll be a shorter episode, but\n\n1921\n01:41:18,720 --> 01:41:20,250\nit is an important thing to see.\n\n1922\n01:41:21,640 --> 01:41:24,800\nAll right well, let me just\nremind you guys if you have any\n\n1923\n01:41:24,800 --> 01:41:27,710\nquestions on all of this,\nfeel free to ask.\n\n1924\n01:41:27,710 --> 01:41:30,400\nLive during the show you\ncan go to itpro.tv/live.\n\n1925\n01:41:30,400 --> 01:41:32,980\nYou'll see the chat room\nright beneath the video.\n\n1926\n01:41:32,980 --> 01:41:34,890\nYou can post your questions in there.\n\n1927\n01:41:34,890 --> 01:41:36,820\nWe monitor and answer.\n\n1928\n01:41:36,820 --> 01:41:40,050\nAnd just give a quick shout out to,\nlet's see who all is in there.\n\n1929\n01:41:40,050 --> 01:41:44,990\nJohn, Eric, Michael, Brad, Sean,\nGishad, a couple of people.\n\n1930\n01:41:44,990 --> 01:41:47,510\nSo thanks for\njumping in the chatroom today.\n\n1931\n01:41:47,510 --> 01:41:51,080\nIf you're watching this recorded\nyou can use our Q&A forms, right.\n\n1932\n01:41:51,080 --> 01:41:53,560\nClick that Q&A link at\nthe top of the page.\n\n1933\n01:41:53,560 --> 01:41:55,440\nIt'll take you into our forums.\n\n1934\n01:41:55,440 --> 01:41:58,060\nPost your question there,\nwe monitor and answer.\n\n1935\n01:41:58,060 --> 01:42:00,450\nWanna make sure you guys get\nthe information you need so\n\n1936\n01:42:00,450 --> 01:42:03,180\nthat you can be successful on the exam.\n\n1937\n01:42:03,180 --> 01:42:05,640\nAll right, well ladies and gentlemen,\nhope you enjoyed the show.\n\n1938\n01:42:05,640 --> 01:42:10,205\nSigning off for ITProTV, I'm I'm Don Pezet\nand I'll see you next time.\n\n1939\n01:42:10,205 --> 01:42:20,205\n[MUSIC]\n\n",
          "vimeoId": "103262833"
        },
        {
          "description": "In this episode Don demonstrate installing and configuring the VMware ESXi hypervisor. He discusses some of the hardware requirements and walks through the installation procedure.",
          "length": "2468",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/003-Installing-ESXI.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/003-Installing-ESXI-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/003-Installing-ESXI-sm.jpg",
          "title": "Installing ESXi",
          "transcript": "1\n00:00:00,023 --> 00:00:10,023\n[MUSIC]\n\n2\n00:00:14,849 --> 00:00:21,929\n[SOUND]\n\n3\n00:00:21,929 --> 00:00:31,929\n[MUSIC]\n\n4\n00:00:33,725 --> 00:00:36,932\nAll right, good morning,\ngood afternoon and good evening and\n\n5\n00:00:36,932 --> 00:00:39,242\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:39,242 --> 00:00:41,010\nI'm your host Don Pezet.\n\n7\n00:00:41,010 --> 00:00:45,120\nBack again with another\nepisode of VCP five dash DCV,\n\n8\n00:00:45,120 --> 00:00:48,860\nthe most awkward title of an episode ever.\n\n9\n00:00:48,860 --> 00:00:51,870\nWe're back here for\nVMware certified professional.\n\n10\n00:00:51,870 --> 00:00:55,310\nIn the first episode episode, I walked\nyou guys through some of the different\n\n11\n00:00:55,310 --> 00:00:58,840\nproducts that are available from VMware,\nand we got a chance to see how to\n\n12\n00:00:58,840 --> 00:01:03,290\ninstall and do a very,\nvery basic configuration of V center.\n\n13\n00:01:03,290 --> 00:01:06,280\nSo if you haven't already watched that\nepisode, definitely check it out but\n\n14\n00:01:06,280 --> 00:01:12,000\nin this episode we're going to take\na look at getting ESXi installed and\n\n15\n00:01:12,000 --> 00:01:13,550\nset up on a system.\n\n16\n00:01:13,550 --> 00:01:14,950\nThis is usually the first step for\n\n17\n00:01:14,950 --> 00:01:17,660\na lot of people, getting that\nvirtualization server up and running.\n\n18\n00:01:18,900 --> 00:01:22,710\nGoing by the book,\nvCenter should be on its own hardware and\n\n19\n00:01:22,710 --> 00:01:24,420\nthat means it's the first\nthing we install.\n\n20\n00:01:24,420 --> 00:01:27,290\nSo that's why we fill in\nthe episodes that way, but for\n\n21\n00:01:27,290 --> 00:01:32,090\nsmaller environments like us at ITProTV,\nwe usually virtualize vCenter, and so\n\n22\n00:01:32,090 --> 00:01:34,170\nthat means we need an ESX server first.\n\n23\n00:01:34,170 --> 00:01:35,060\nSo that's maybe where we start.\n\n24\n00:01:35,060 --> 00:01:37,570\nNow, I said ESXI a second ago,\n\n25\n00:01:37,570 --> 00:01:41,770\nI can't remember in the first\nepisode which I said, but\n\n26\n00:01:41,770 --> 00:01:45,540\nESX is the name of the product, and\na handful of years ago, I think, probably\n\n27\n00:01:45,540 --> 00:01:49,960\nabout 8 years ago now, they added an I to\nend of it which is for integrated, right?\n\n28\n00:01:49,960 --> 00:01:54,710\nSo ESX is technically\nElastic Sky X Integrated, right, but\n\n29\n00:01:54,710 --> 00:01:57,890\nnobody every says Elastic Sky anymore so\nESXI.\n\n30\n00:01:57,890 --> 00:02:03,280\nAnd the reason why they call it\nintegrated was that when you install ESX,\n\n31\n00:02:03,280 --> 00:02:05,800\nyou can install it to a hard\ndrive that's pretty common,\n\n32\n00:02:05,800 --> 00:02:11,090\nyou can install it to a USB flash drive or\nit can even be installed onto a chip\n\n33\n00:02:11,090 --> 00:02:14,300\nintegrated on the motherboard\nof the server, and\n\n34\n00:02:14,300 --> 00:02:19,670\nif you order a server from Dell or\nHP you'll see that's oftentimes an option.\n\n35\n00:02:19,670 --> 00:02:24,080\nYou choose that and the ESX install is\nactually integrated into the motherboard.\n\n36\n00:02:24,080 --> 00:02:27,985\nWhen you do that, your server becomes\na field replaceable commodity,\n\n37\n00:02:27,985 --> 00:02:29,870\nyou don;t really care\nabout the server anymore.\n\n38\n00:02:29,870 --> 00:02:33,120\nYou don;t even put hard drives in\nthe server you just have HBAs or\n\n39\n00:02:33,120 --> 00:02:37,210\nhost adaptors that then connect to a fiber\nchannel san you power on the server and\n\n40\n00:02:37,210 --> 00:02:41,160\nit boots from the integrated copy of\nthe ESX and then it loads all the VMs and\n\n41\n00:02:41,160 --> 00:02:43,280\neverything else from V Center fires up.\n\n42\n00:02:43,280 --> 00:02:44,200\nAnd you're in business.\n\n43\n00:02:44,200 --> 00:02:46,448\nSo really, really cool stuff.\n\n44\n00:02:46,448 --> 00:02:49,940\nBut just because that I is on the end,\ndoesn't mean you have to do it integrated.\n\n45\n00:02:49,940 --> 00:02:52,460\nYou can still install it to\nthe hard drives like normal.\n\n46\n00:02:52,460 --> 00:02:53,510\nAnd that's what I'm going to do.\n\n47\n00:02:53,510 --> 00:02:55,410\nWhen it's integrated,\nit's already on there.\n\n48\n00:02:55,410 --> 00:02:56,780\nIt comes that way from the manufacturer.\n\n49\n00:02:56,780 --> 00:02:58,800\nYou really just have\nto keep it up do date.\n\n50\n00:02:58,800 --> 00:03:03,020\nBut, if we want to install it on our own\nserver, we've got to do it ourselves.\n\n51\n00:03:03,020 --> 00:03:06,100\nSo, a couple of things we need to be\naware of before we do the install.\n\n52\n00:03:06,100 --> 00:03:09,260\nThere are some hardware requirements\nthat we've got to meet before we can\n\n53\n00:03:09,260 --> 00:03:10,040\ninstall ESX.\n\n54\n00:03:11,290 --> 00:03:16,030\nOur first set of hardware requirements,\nI actually have these in my show notes,\n\n55\n00:03:16,030 --> 00:03:17,210\nburied around here somewhere.\n\n56\n00:03:17,210 --> 00:03:18,750\nHere we go.\n\n57\n00:03:18,750 --> 00:03:22,600\nThey post the hardware requirements\non the VMware website.\n\n58\n00:03:22,600 --> 00:03:25,850\nThey're a little bit lengthy and\nlong to read so\n\n59\n00:03:25,850 --> 00:03:27,700\nI've pared it down to the important part.\n\n60\n00:03:27,700 --> 00:03:30,360\nYou need to have a 64-bit CPU.\n\n61\n00:03:30,360 --> 00:03:34,460\nYou need a 64-bit system to be able\nto address more than 4 gigs of RAM on\n\n62\n00:03:34,460 --> 00:03:37,240\nmost systems, and\nESX definitely does that.\n\n63\n00:03:37,240 --> 00:03:39,310\nSo we need a 64-bit CPU.\n\n64\n00:03:39,310 --> 00:03:43,120\nYou have to have virtualization\nsupport in the processor.\n\n65\n00:03:43,120 --> 00:03:44,490\nThere's not like a software out on it.\n\n66\n00:03:44,490 --> 00:03:46,570\nIt's got to be built into the CPU.\n\n67\n00:03:46,570 --> 00:03:52,280\nIn the Intel world, they call that VTX,\nor virtualization technology extensions.\n\n68\n00:03:52,280 --> 00:03:57,280\nIn the AMD world, they call that AMD-V,\nor AMD virtualization.\n\n69\n00:03:57,280 --> 00:04:00,740\nSo you've got to have that\nsupport built into the CPU also.\n\n70\n00:04:00,740 --> 00:04:04,380\nYou also have to have a minimum\nof two cores to your CPU.\n\n71\n00:04:04,380 --> 00:04:07,420\nIt will not let you install\non a single core system.\n\n72\n00:04:07,420 --> 00:04:11,750\nYou need at least one core to be available\nfor the ESX host, and then at least one\n\n73\n00:04:11,750 --> 00:04:14,330\nmore core available for the guest,\notherwise it will saturate itself.\n\n74\n00:04:15,570 --> 00:04:19,930\nYou need a minimum of four gigs of RAM,\nif you've got less than four gigs of RAM\n\n75\n00:04:19,930 --> 00:04:22,510\nyou're not going to be able to take\nadvantage of a lot of the features.\n\n76\n00:04:22,510 --> 00:04:25,270\nIt'll still let you install, and\nactually that's worth noting.\n\n77\n00:04:25,270 --> 00:04:28,560\nA lot of this stuff,\nif you don't meet these requirements,\n\n78\n00:04:28,560 --> 00:04:31,550\nin many cases it will\nstill let you install.\n\n79\n00:04:31,550 --> 00:04:33,950\nThere's just some things that won't work.\n\n80\n00:04:33,950 --> 00:04:39,620\nFor example, if you don't have\nthe Intel VTX support, right.\n\n81\n00:04:39,620 --> 00:04:43,920\nSo you go ahead and install without this\nguy, Well, it'll let you install, but\n\n82\n00:04:43,920 --> 00:04:48,445\nit'll warn you, and after the install when\nyou bring it up, you'll be able to create\n\n83\n00:04:48,445 --> 00:04:53,010\n32-bit virtual machines, but it won't\nlet you install 64-bit virtual machines.\n\n84\n00:04:53,010 --> 00:04:56,050\nSo there's limitations\nas to what it can run\n\n85\n00:04:56,050 --> 00:04:57,690\nif you install without\nsome of the hardware.\n\n86\n00:04:57,690 --> 00:04:58,340\nSo be aware of that.\n\n87\n00:04:58,340 --> 00:04:59,650\nSame thing goes for RAM.\n\n88\n00:04:59,650 --> 00:05:02,350\nIf you have 4 gigs of RAM,\nyou can take advantage of every feature.\n\n89\n00:05:03,690 --> 00:05:04,380\nAll right.\n\n90\n00:05:04,380 --> 00:05:08,620\nAnd then on the hard drive side\nESX is very, very small, right?\n\n91\n00:05:08,620 --> 00:05:11,980\nIt fits in less than\none gigabyte of space.\n\n92\n00:05:11,980 --> 00:05:15,590\nIt's a very,\nvery stripped down version of Linux, and\n\n93\n00:05:15,590 --> 00:05:19,110\nit's just running the components\nnecessary for ESX, so very very small,\n\n94\n00:05:19,110 --> 00:05:22,140\nthat's why it's suitable to be integrated\ninto Flash on the motherboard, or\n\n95\n00:05:22,140 --> 00:05:24,860\ninstalled on a USB storage of some sort.\n\n96\n00:05:24,860 --> 00:05:27,170\nYou do want it o be something reliable and\nfast.\n\n97\n00:05:29,190 --> 00:05:33,545\nWhen it comes to doing the install,\nthere are automated ways of doing it.\n\n98\n00:05:33,545 --> 00:05:38,515\nWe can set up a rapid deployment system\nwhere we can deploy new ESX servers,\n\n99\n00:05:38,515 --> 00:05:41,275\nI know I talked a little bit\nabout that in the first episode.\n\n100\n00:05:41,275 --> 00:05:45,355\nBut this is for environments that\nare going to be deploying these in bulk.\n\n101\n00:05:45,355 --> 00:05:49,715\nMost of us are going to do whats\ncalled and interactive install.\n\n102\n00:05:49,715 --> 00:05:54,540\nAn interactive deployment, that where\nwe Pop in the ESXI disk into our CD or\n\n103\n00:05:54,540 --> 00:05:58,520\nDVD drive, we boot off of it and\nwe press Enter a few times.\n\n104\n00:05:58,520 --> 00:06:01,050\nThere's really not much\nin the way of choices.\n\n105\n00:06:01,050 --> 00:06:04,520\nWe pick what hard drive we want to\ninstall on, and that's really about it.\n\n106\n00:06:04,520 --> 00:06:06,000\nAnd it does the install.\n\n107\n00:06:06,000 --> 00:06:08,160\nOkay, so I want to walk you\nguys through that process and\n\n108\n00:06:08,160 --> 00:06:11,400\nI'm going to show you what it's\nlike to do the interactive install.\n\n109\n00:06:12,730 --> 00:06:15,690\nAll right now, normally we're going\nto install this directly on hardware.\n\n110\n00:06:15,690 --> 00:06:17,904\nI'm actually going to use\nOracle virtual box and\n\n111\n00:06:17,904 --> 00:06:20,650\nI'm going to install VMWare\nin a virtual machine.\n\n112\n00:06:20,650 --> 00:06:23,050\nYou would never do this in production, but\n\n113\n00:06:23,050 --> 00:06:26,440\nI'm doing it here because I want to show\nyou guys it booting up and all that.\n\n114\n00:06:26,440 --> 00:06:30,020\nAnd if I boot my laptop to do it,\nI'll lose my video screen share,\n\n115\n00:06:30,020 --> 00:06:31,710\nso that's why I'm doing it this way.\n\n116\n00:06:31,710 --> 00:06:34,150\nBut I'm just going to fire that one up.\n\n117\n00:06:34,150 --> 00:06:39,080\nAnd I've got a virtual machine with four\ngigs of RAM and two processor cores,\n\n118\n00:06:39,080 --> 00:06:40,690\nand virtualization extensions.\n\n119\n00:06:40,690 --> 00:06:45,270\nSo it meets the minimum requirements,\nand I'm just going to fire it up.\n\n120\n00:06:45,270 --> 00:06:48,970\nAnd let's get into full screen here.\n\n121\n00:06:48,970 --> 00:06:50,490\nAll right.\n\n122\n00:06:51,490 --> 00:06:54,120\nSo when you boot off the DS you get\nthis little menu right here and\n\n123\n00:06:54,120 --> 00:06:57,100\nit's really just asking whether you want\nto boot from the installer disk which\n\n124\n00:06:57,100 --> 00:06:58,440\nis what I popped in.\n\n125\n00:06:58,440 --> 00:07:01,740\nOr if I want to boot from the local hard\ndrive which would ignore the disk and\n\n126\n00:07:01,740 --> 00:07:03,630\ncancel the install.\n\n127\n00:07:03,630 --> 00:07:07,430\nNotice it's ESXI is how it's listed 5.5.\n\n128\n00:07:07,430 --> 00:07:09,110\nThat's what I'm doing.\n\n129\n00:07:09,110 --> 00:07:11,670\nYou might have 5.1 or\na different version, but\n\n130\n00:07:11,670 --> 00:07:12,940\nthat's the one that I'm installing here.\n\n131\n00:07:14,930 --> 00:07:17,860\nWhen we go to do the install it's\ngoing to flash up this screen, so\n\n132\n00:07:17,860 --> 00:07:22,510\nit's just loading the ESXi Installer,\nand it starts to fire up.\n\n133\n00:07:22,510 --> 00:07:27,560\nEverything here is stored on that CD or\nDVD and you download this from VMware,\n\n134\n00:07:27,560 --> 00:07:31,920\nso if you signed up for a free evaluation\nyou download it from there ISO image and\n\n135\n00:07:31,920 --> 00:07:35,150\nyou can use it or you can burn it\nto a disk and boot from it there.\n\n136\n00:07:35,150 --> 00:07:39,550\nI've heard of people burning it to USB\ndrives and installing from thumb drives,\n\n137\n00:07:39,550 --> 00:07:43,680\nand you can even do it from a pixie boot\nsystem, so you might have a network boot\n\n138\n00:07:43,680 --> 00:07:47,289\nsystem set and you can install from there,\nso a lot of different ways to deploy this.\n\n139\n00:07:49,040 --> 00:07:50,920\nSo here it goes booting up and for\n\n140\n00:07:50,920 --> 00:07:53,040\na lot of this there's not\nmuch that we have to do.\n\n141\n00:07:53,040 --> 00:07:54,798\nWe just kind of sit back and watch.\n\n142\n00:07:54,798 --> 00:07:57,165\nBut notice how it's\nidentifying my processor.\n\n143\n00:07:57,165 --> 00:08:00,223\nIt's identifying the memory\nI've allocated to it.\n\n144\n00:08:00,223 --> 00:08:03,102\nAnd so it's starting to churn along.\n\n145\n00:08:03,102 --> 00:08:07,430\nLoading different hardware modules, it's\ngoing to try and identify the hardware.\n\n146\n00:08:07,430 --> 00:08:08,880\nAnd after this,\n\n147\n00:08:08,880 --> 00:08:12,570\nif there's any requirements that I don't\nmeet, it's going to warn me about.\n\n148\n00:08:12,570 --> 00:08:17,930\nNow, I configured VirtualBox to tell it\nthat I had virtualization extensions.\n\n149\n00:08:17,930 --> 00:08:21,990\nBut if I remember right,\nVirtual Box doesn't do it quite right so\n\n150\n00:08:21,990 --> 00:08:24,490\nI think I'm going to get\na complaint here in a minute\n\n151\n00:08:24,490 --> 00:08:27,012\nthat'll tell me that I don't\nhave the extension support.\n\n152\n00:08:27,012 --> 00:08:29,160\nAll right, well I can ignore that,\n\n153\n00:08:29,160 --> 00:08:32,130\nit just means that I won't be able\nto run 64 bit VMs on top of this.\n\n154\n00:08:32,130 --> 00:08:33,950\nWell, I really wouldn't\nwant to do that anyway.\n\n155\n00:08:33,950 --> 00:08:36,810\nI'd be running virtualization\non top of virtualization so\n\n156\n00:08:36,810 --> 00:08:38,510\nthat's never a great idea.\n\n157\n00:08:38,510 --> 00:08:41,220\nBut you guys'll be able\nto see the installer and\n\n158\n00:08:41,220 --> 00:08:45,070\nyou'll be able to see the reboot process\nthat's going to happen here in a moment.\n\n159\n00:08:45,070 --> 00:08:48,140\nAll right, so it's pretty much loaded\nits data right now it's just kind of\n\n160\n00:08:48,140 --> 00:08:50,200\ndoing a little bit of settling.\n\n161\n00:08:50,200 --> 00:08:53,480\nWhat it's doing is it's copying\ndata from the CD into RAM\n\n162\n00:08:53,480 --> 00:08:54,850\nwhere it can run nice and fast.\n\n163\n00:08:54,850 --> 00:08:57,800\nIf it tries to run it from the CD,\nit's going to be really slow so\n\n164\n00:08:57,800 --> 00:09:00,620\nwe just have to give it some time\nwhile it sorts through that.\n\n165\n00:09:00,620 --> 00:09:05,450\nThe delta disk that it's making, well\nall the data on the CD is read only, but\n\n166\n00:09:05,450 --> 00:09:07,570\nit needs to be able to\nmake changes as it runs.\n\n167\n00:09:07,570 --> 00:09:10,980\nAnd so it's creating a changer,\na delta disk, in RAM.\n\n168\n00:09:10,980 --> 00:09:13,640\nSo that process just takes a moment.\n\n169\n00:09:13,640 --> 00:09:14,510\nAnd it'll do that here.\n\n170\n00:09:15,880 --> 00:09:18,210\nNow I mentioned there's\nnot a whole lot to do.\n\n171\n00:09:18,210 --> 00:09:22,290\nWell, this is a text-based installer,\nso there's only so much they can do.\n\n172\n00:09:22,290 --> 00:09:24,380\nWe're really just going to\nbe hitting next a bunch.\n\n173\n00:09:24,380 --> 00:09:26,840\nWhen we're done with the install\nit's going to reboot and\n\n174\n00:09:26,840 --> 00:09:31,800\ngive us a summary screen, and\nthat'll be the last time that we log in\n\n175\n00:09:31,800 --> 00:09:35,230\nfrom the VMware host itself,\nfrom the ESX host.\n\n176\n00:09:35,230 --> 00:09:38,830\nAfter that point, after the install's\ndone we'll go back to our laptop or\n\n177\n00:09:38,830 --> 00:09:41,990\nour desktop and we'll connect to it and\nmanage it from there.\n\n178\n00:09:43,920 --> 00:09:44,900\nAll right, it's almost done.\n\n179\n00:09:44,900 --> 00:09:48,460\nSee it's starting up services now so\nit's pretty much ready to go.\n\n180\n00:09:48,460 --> 00:09:49,780\nAnd the installer's going to continue.\n\n181\n00:09:50,800 --> 00:09:53,220\nAnd you'll see it starts a lot of stuff.\n\n182\n00:09:53,220 --> 00:09:54,960\nIt's all just kind of\npart of that install.\n\n183\n00:09:56,460 --> 00:09:58,850\nNow in the first episode\nI covered vcenter and\n\n184\n00:09:58,850 --> 00:10:01,770\nwe can certainly use vcenter to manage and\nfigure this host.\n\n185\n00:10:01,770 --> 00:10:05,375\nBut I want to show you guys the other\nway which is instead of using\n\n186\n00:10:05,375 --> 00:10:08,655\nthe vSphere web client, I want to\nshow you guys the vSphere client.\n\n187\n00:10:08,655 --> 00:10:10,915\nJust the regular old local client.\n\n188\n00:10:10,915 --> 00:10:15,325\nSo we'll take it a slightly different\napproach before we add this to vSphere,\n\n189\n00:10:15,325 --> 00:10:16,975\nto vCenter, sorry.\n\n190\n00:10:16,975 --> 00:10:19,645\nAll right, so now the installer is just\ntelling me, hey, we're about to install.\n\n191\n00:10:19,645 --> 00:10:21,325\nIf you want to continue, press enter.\n\n192\n00:10:21,325 --> 00:10:22,990\nSo I'll do just that.\n\n193\n00:10:22,990 --> 00:10:26,630\nWe need to accept the license agreement,\nso I'll read that thoroughly,\n\n194\n00:10:26,630 --> 00:10:30,240\nmaking sure to adhere\nto all the guidelines.\n\n195\n00:10:30,240 --> 00:10:32,050\nThen we'll hit F11 to continue.\n\n196\n00:10:32,050 --> 00:10:35,720\nAll right, now it's scanning for\nany devices the initial boot\n\n197\n00:10:35,720 --> 00:10:39,580\nprocess didn't pick up and\nit's looking for my storage.\n\n198\n00:10:39,580 --> 00:10:44,890\nNow here is one of the biggest areas of\ninstallation failure that we can have.\n\n199\n00:10:44,890 --> 00:10:49,270\nYour server will very likely\nhave a raid controller in it.\n\n200\n00:10:49,270 --> 00:10:53,660\nVM ware may or may not support\nyour raid controller, all right.\n\n201\n00:10:53,660 --> 00:10:59,070\nIf you have ten discs,\nin a raid ten array,\n\n202\n00:10:59,070 --> 00:11:05,350\nthen you should expect to see\none big array right here.\n\n203\n00:11:05,350 --> 00:11:09,670\nIf instead you see ten individual\ndisks that's your first warning that\n\n204\n00:11:09,670 --> 00:11:12,310\nVMware did not recognize\nyour rate controller.\n\n205\n00:11:12,310 --> 00:11:16,490\nOr if you see no disks whatsoever it\ndidn't recognize your rate controller.\n\n206\n00:11:16,490 --> 00:11:20,640\nNow other operating systems have where\nyou can add more drivers in to get that\n\n207\n00:11:20,640 --> 00:11:22,860\nsupport VMware doesn't do that.\n\n208\n00:11:22,860 --> 00:11:24,520\nAt least they don't openly do it.\n\n209\n00:11:24,520 --> 00:11:27,020\nBecause they have to support this, right?\n\n210\n00:11:27,020 --> 00:11:30,990\nSo it's important to make sure that you\nbuy equipment that is VMware compatible.\n\n211\n00:11:32,260 --> 00:11:35,000\nThey have a hardware compatibility\nlist on their website.\n\n212\n00:11:35,000 --> 00:11:38,010\nYou go and reference, to find out\nwhether your rate controller and\n\n213\n00:11:38,010 --> 00:11:39,870\nother resources are compatible.\n\n214\n00:11:39,870 --> 00:11:43,060\nIn my case, I'm not doing rate, so\nit's just picked up my single disc there.\n\n215\n00:11:44,260 --> 00:11:47,580\nI've got a 64 disk and I'll pick it,\na 64 gig disk and I'll pick it.\n\n216\n00:11:47,580 --> 00:11:50,040\nIf I had more than one disk\nI'd see it in the list.\n\n217\n00:11:50,040 --> 00:11:53,970\nAlso I've got the ability to have\nremote disks if it found a vsan or\n\n218\n00:11:53,970 --> 00:11:55,470\na virtual san out there.\n\n219\n00:11:55,470 --> 00:11:57,880\nI don't have one so\nI'll pick my main disk.\n\n220\n00:11:59,420 --> 00:12:01,490\nThen it's going to ask about my keyboard.\n\n221\n00:12:01,490 --> 00:12:02,730\nI've got a US keyboard.\n\n222\n00:12:04,170 --> 00:12:06,010\nAnd now I need to set a password.\n\n223\n00:12:06,010 --> 00:12:09,120\nThere's one user account created\non this system by default, and\n\n224\n00:12:09,120 --> 00:12:11,220\nthat user account is called Root.\n\n225\n00:12:11,220 --> 00:12:14,280\nThe Root user has full\naccess to this system.\n\n226\n00:12:14,280 --> 00:12:16,710\nWe pick it's password right here.\n\n227\n00:12:16,710 --> 00:12:20,960\nIf we attach this to a V center server,\nthen we can add all sorts of additional\n\n228\n00:12:20,960 --> 00:12:24,020\nusers and go from there, and\nwe'll never use this Root account again.\n\n229\n00:12:24,020 --> 00:12:27,490\nAnd if we put it in lockdown mode then\nwe really won't use that anymore.\n\n230\n00:12:27,490 --> 00:12:31,380\nBut, if you're keeping this server as\na standalone, you might use this password\n\n231\n00:12:31,380 --> 00:12:35,190\nfor a little while longer until you\ncreate local accounts to manage it.\n\n232\n00:12:35,190 --> 00:12:37,310\nSo don't forget what this password is,\n\n233\n00:12:37,310 --> 00:12:39,730\nwe need to make sure that\nwe have that documented.\n\n234\n00:12:41,760 --> 00:12:42,660\nAll right?\n\n235\n00:12:42,660 --> 00:12:43,850\nAnd now it's going to move through.\n\n236\n00:12:43,850 --> 00:12:46,660\nI haven't seen any warnings about\nmy hardware configuration yet, so\n\n237\n00:12:46,660 --> 00:12:48,190\nI'm waiting for that to pop up any minute.\n\n238\n00:12:48,190 --> 00:12:52,780\nI'm pretty certain unless the virtual box\nhas been fixed since the last time I tried\n\n239\n00:12:52,780 --> 00:12:56,270\nthis, that I should get\na warning about my extensions.\n\n240\n00:12:56,270 --> 00:12:58,020\nSo we'll wait and see.\n\n241\n00:12:58,020 --> 00:12:59,980\nThe installer's really all about waiting.\n\n242\n00:12:59,980 --> 00:13:02,220\nIt just takes a moment to get\nthis stuff turned through.\n\n243\n00:13:02,220 --> 00:13:02,800\nBut so far,\n\n244\n00:13:02,800 --> 00:13:05,990\nthe hardest question it asked me was\nwhat hard drive I wanted to install to.\n\n245\n00:13:05,990 --> 00:13:08,050\nSo we haven't seen anything mind-bending.\n\n246\n00:13:08,050 --> 00:13:11,580\nIt doesn't ask you for\nthings like picking an IP address and\n\n247\n00:13:11,580 --> 00:13:13,230\ndefault gateway and stuff.\n\n248\n00:13:13,230 --> 00:13:16,400\nWe'll take care of that afterwards\nusing our desktop utility.\n\n249\n00:13:16,400 --> 00:13:19,920\nOn the vSphere Client, we've got\na graphical user interface that's\n\n250\n00:13:19,920 --> 00:13:22,700\nsuper easy to use for\nconfiguring the system.\n\n251\n00:13:22,700 --> 00:13:23,680\nThat's what VMware did.\n\n252\n00:13:23,680 --> 00:13:26,362\nThey said, we're not going to give you\na bunch of text-based garbage that you've\n\n253\n00:13:26,362 --> 00:13:27,478\ngot to fight through to get installed.\n\n254\n00:13:27,478 --> 00:13:29,910\nWe're going to install with\nthe basic system and then,\n\n255\n00:13:29,910 --> 00:13:31,840\nyou can configure it with the GUI.\n\n256\n00:13:31,840 --> 00:13:33,150\nHere's my warning.\n\n257\n00:13:33,150 --> 00:13:36,930\nIt's telling me, hardware virtualization\nis not a feature of the CPU or\n\n258\n00:13:36,930 --> 00:13:38,910\nis not enabled in BIOS.\n\n259\n00:13:38,910 --> 00:13:42,800\nI've got an Intel I7 and\nit has virtualization support.\n\n260\n00:13:42,800 --> 00:13:45,130\nThe problem is I'm doing\nthis in VirtualBox.\n\n261\n00:13:45,130 --> 00:13:47,600\nAnd VirtualBox is not\nshowing that to the guest VM.\n\n262\n00:13:47,600 --> 00:13:49,040\nSo it doesn't see it.\n\n263\n00:13:49,040 --> 00:13:50,980\nIt's not stopping me, though.\n\n264\n00:13:50,980 --> 00:13:54,120\nI can still press Enter and\nfinish the install.\n\n265\n00:13:54,120 --> 00:13:56,920\nI just won't be able to run 64-bit guests.\n\n266\n00:13:56,920 --> 00:13:59,460\nSo I'll go ahead and hit Enter and\nlet it finish the install.\n\n267\n00:13:59,460 --> 00:14:01,780\nSo it's got all the information it needs.\n\n268\n00:14:01,780 --> 00:14:03,040\nI'll hit F11.\n\n269\n00:14:03,040 --> 00:14:04,450\nAnd now it goes.\n\n270\n00:14:04,450 --> 00:14:07,840\nAll right.\nNow, the install does take a little while.\n\n271\n00:14:07,840 --> 00:14:10,910\nWhat it does,\nis it actually creates two partitions, and\n\n272\n00:14:10,910 --> 00:14:13,570\nit's installing the Mware ESX\nto one of them.\n\n273\n00:14:14,840 --> 00:14:18,800\nThe second partition it holds onto, and\nwhen we start to do updates and upgrades,\n\n274\n00:14:18,800 --> 00:14:21,370\nit's always maintaining a copy\nof the previous version.\n\n275\n00:14:21,370 --> 00:14:24,980\nThat's to facilitate rollbacks,\nif we have a upgrade failure, or\n\n276\n00:14:24,980 --> 00:14:25,720\nsome kind of problem.\n\n277\n00:14:25,720 --> 00:14:27,760\nWe can always roll back the upgrade.\n\n278\n00:14:27,760 --> 00:14:30,240\nSo it's going through\nthat process right now.\n\n279\n00:14:30,240 --> 00:14:34,940\nSo on the disk, this may be very small,\nI think it's about 300 mgs on the disk.\n\n280\n00:14:34,940 --> 00:14:38,210\nBut by the time it installs to\nthe hard drive it's a good bit larger.\n\n281\n00:14:38,210 --> 00:14:41,520\nYou need at least one gig of space\nto be able to handle the install.\n\n282\n00:14:41,520 --> 00:14:43,280\nSo it's going to copy it over.\n\n283\n00:14:43,280 --> 00:14:48,070\nThe files its copying are the stripped\ndown version of Linux that it's running\n\n284\n00:14:48,070 --> 00:14:52,260\nand don't take that the wrong way and\nthink that it's a weak operating system.\n\n285\n00:14:52,260 --> 00:14:53,060\nIt's awesome.\n\n286\n00:14:53,060 --> 00:14:56,990\nThey took LINUX and they just took\nout anything that wasn't required\n\n287\n00:14:56,990 --> 00:15:01,240\nleaving just what VMware ESX needs to run.\n\n288\n00:15:01,240 --> 00:15:04,050\nAnd it turns out that that's\na surprisingly small amount.\n\n289\n00:15:04,050 --> 00:15:06,470\nIt doesn't need a graphical\nuser interface.\n\n290\n00:15:06,470 --> 00:15:11,460\nI doesn't need X Windows and gnome and\nKDE, it doesn't need EMAXX and\n\n291\n00:15:11,460 --> 00:15:12,870\nall those other utilities.\n\n292\n00:15:12,870 --> 00:15:15,940\nIt just needs command line interpreter,\n\n293\n00:15:15,940 --> 00:15:20,820\na handful of services to function,\nand the hypervisor itself.\n\n294\n00:15:20,820 --> 00:15:25,790\nThe hypervisor is proprietary code written\nby VMware and they don't share that code\n\n295\n00:15:25,790 --> 00:15:30,320\nwith anybody, so it just sits there\non the hard drive and does its job.\n\n296\n00:15:30,320 --> 00:15:31,460\nIt does a really good job.\n\n297\n00:15:33,520 --> 00:15:37,400\nWhen that's done installing,\nit will reboot.\n\n298\n00:15:37,400 --> 00:15:40,090\nAnd after the reboot,\nwe'll be presented with a screen.\n\n299\n00:15:40,090 --> 00:15:43,170\nLet me show you what that\nscreen looks like since I'm\n\n300\n00:15:43,170 --> 00:15:44,490\ntoo impatient to wait on that.\n\n301\n00:15:44,490 --> 00:15:47,825\nI've got another one here.\n\n302\n00:15:47,825 --> 00:15:51,708\nThis guy, who's already sitting at that\nscreen, so I'm just going to bring it up\n\n303\n00:15:51,708 --> 00:15:55,052\nso you guys can see it so we don't have\nto sit and watch the other one go.\n\n304\n00:15:55,052 --> 00:15:58,400\nNow when it reboots,\nit takes you to a screen and\n\n305\n00:15:58,400 --> 00:16:01,013\nThere's not much you can do from it.\n\n306\n00:16:01,013 --> 00:16:04,687\nSo it's gonna give you the basic\ninformation you need to go and\n\n307\n00:16:04,687 --> 00:16:07,580\nconnect from one of your network systems.\n\n308\n00:16:07,580 --> 00:16:12,501\nSo if I take a look at this one,\nHere we go.\n\n309\n00:16:12,501 --> 00:16:15,090\nThis is the screen it\ndisplays when it's done.\n\n310\n00:16:15,090 --> 00:16:19,780\nSo when it's all said and done,\nwe see basically just this, and\n\n311\n00:16:19,780 --> 00:16:21,340\nits telling us information\nabout our system.\n\n312\n00:16:21,340 --> 00:16:26,340\nDown at the bottom it says, download\ntools to manage this host from, and\n\n313\n00:16:26,340 --> 00:16:29,210\nit tells me the IP address of the host.\n\n314\n00:16:29,210 --> 00:16:32,350\nIt gives me the IPV and the IPV6 address.\n\n315\n00:16:32,350 --> 00:16:36,560\nWhat it's basically saying is,\nyou're done with the physical host.\n\n316\n00:16:36,560 --> 00:16:39,600\nYou don't do anything else here\nfrom the physical host anymore.\n\n317\n00:16:39,600 --> 00:16:45,280\nNow go back to your desk,\nfire up your Windows or whatever client.\n\n318\n00:16:45,280 --> 00:16:49,240\nBrowse to this web address, and at this\nweb address you'll be able to install\n\n319\n00:16:49,240 --> 00:16:54,000\nthe management tools, and you'll be able\nto start configuring this server, okay.\n\n320\n00:16:54,000 --> 00:16:55,700\nSo that's our next step.\n\n321\n00:16:55,700 --> 00:16:58,450\nIt is telling me that it's configured for\nDHCP right now.\n\n322\n00:16:58,450 --> 00:17:00,480\nDynamic Host Configuration Protocol.\n\n323\n00:17:00,480 --> 00:17:03,370\nSo the IP address is subject to change.\n\n324\n00:17:03,370 --> 00:17:05,640\nSo just because it has\nthis IP address today,\n\n325\n00:17:05,640 --> 00:17:07,560\nit might have a different one tomorrow.\n\n326\n00:17:07,560 --> 00:17:10,640\nSo be aware that address might be\ndifferent than what we're seeing\n\n327\n00:17:10,640 --> 00:17:11,980\nright now, okay..\n\n328\n00:17:11,980 --> 00:17:13,850\nBut, otherwise, we're ready to go.\n\n329\n00:17:13,850 --> 00:17:16,460\nIf you let it sit long enough,\nit does what it just did.\n\n330\n00:17:16,460 --> 00:17:18,700\nIt goes into a screen-saving mode.\n\n331\n00:17:18,700 --> 00:17:21,540\nSo it dimmed the screen and\nit's showing that text.\n\n332\n00:17:21,540 --> 00:17:23,190\nIt's trying to prevent burn-in,\n\n333\n00:17:23,190 --> 00:17:26,750\nthe text actually shifted\nposition on the screen, too.\n\n334\n00:17:26,750 --> 00:17:29,640\nSo if you walk up to an EXS\nserver that's been booted for\n\n335\n00:17:29,640 --> 00:17:33,250\na year, you may see the screen\nsitting here just like this.\n\n336\n00:17:33,250 --> 00:17:34,340\nAnd that's really it.\n\n337\n00:17:34,340 --> 00:17:37,220\nYou leave that, and that's the last\ntime you touch the physical machine.\n\n338\n00:17:37,220 --> 00:17:41,300\nThat's also why you don't install\nESX on your own laptop or\n\n339\n00:17:41,300 --> 00:17:45,620\nyour own desktop because it renders\nthe local console unusable.\n\n340\n00:17:45,620 --> 00:17:50,850\nNow you've got to have a second machine\nto access the VMs on it, all right.\n\n341\n00:17:50,850 --> 00:17:52,580\nSo that's it I'm done with that machine.\n\n342\n00:17:52,580 --> 00:17:57,290\nLet me minimize it and go back to\nmy other one and see if its done.\n\n343\n00:17:57,290 --> 00:17:58,060\nHere we go.\n\n344\n00:17:58,060 --> 00:18:00,047\nSo, it finished its install.\n\n345\n00:18:03,555 --> 00:18:06,780\nAnd now it's just saying it's gonna\nreboot, and we'll let it reboot.\n\n346\n00:18:06,780 --> 00:18:10,758\nWhen it boots up, I'll see that\nscreen that we saw just a moment ago.\n\n347\n00:18:10,758 --> 00:18:12,970\nI don't wanna use the other machine I\nbrought up because it's on the wrong\n\n348\n00:18:12,970 --> 00:18:16,500\nnetwork, but when this one reboots it'll\nbe on the ITProTV studio network and\n\n349\n00:18:16,500 --> 00:18:18,530\nwe'll be ready to manage it, all right.\n\n350\n00:18:18,530 --> 00:18:23,060\nI guess while we're waiting on that I\ncan at least show you the screen that\n\n351\n00:18:23,060 --> 00:18:24,190\nwe're gonna see.\n\n352\n00:18:24,190 --> 00:18:28,810\nSo now I would go to my web browser and\nI'm still logged in\n\n353\n00:18:28,810 --> 00:18:32,710\nto the vCenter from the last episode,\nso let me log out of that.\n\n354\n00:18:33,810 --> 00:18:37,920\nAnd what you would do is just point\nyour web browser at the new server\n\n355\n00:18:37,920 --> 00:18:38,680\nyou just brought up.\n\n356\n00:18:40,260 --> 00:18:43,040\nSo I'm going to browse to one of\nthose servers that I brought up.\n\n357\n00:18:45,130 --> 00:18:49,330\nAnd you'll get a certificate warning when\nyou browse to it because the server's\n\n358\n00:18:49,330 --> 00:18:50,810\nusing a self sign certificate.\n\n359\n00:18:52,430 --> 00:18:53,970\nBut when you browse to\nit you'll see this page.\n\n360\n00:18:53,970 --> 00:18:58,780\nNow notice, it didn't ask me for a\nusername or a password or anything, right.\n\n361\n00:18:58,780 --> 00:19:01,720\nIt's just an anonymous access page.\n\n362\n00:19:01,720 --> 00:19:05,420\nSo anybody can browse to the IP address\nthat was displayed on that screen,\n\n363\n00:19:05,420 --> 00:19:07,140\nand they get this page right here.\n\n364\n00:19:07,140 --> 00:19:09,970\nFortunately, you can't do\nanything from this page.\n\n365\n00:19:09,970 --> 00:19:14,940\nWhat this page does is it has a link\nto download the vSphere client.\n\n366\n00:19:14,940 --> 00:19:18,640\nThat's the stand alone client\nmanagement software that you can use.\n\n367\n00:19:18,640 --> 00:19:21,390\nNow remember what I mentioned\nin the first episode?\n\n368\n00:19:21,390 --> 00:19:24,310\nThis, it'll let us manage\nthat single client and\n\n369\n00:19:24,310 --> 00:19:28,460\nif your just running ESX essentials\nthen that's all you need, right.\n\n370\n00:19:28,460 --> 00:19:29,860\nBut it's not fully featured.\n\n371\n00:19:29,860 --> 00:19:31,770\nIt doesn't have a lot\nof the monitoring and\n\n372\n00:19:31,770 --> 00:19:34,470\nthe advanced functionality that we\nhave in the vSphere web client.\n\n373\n00:19:34,470 --> 00:19:36,830\nSo the Vsphere web client\nis the better way to go but\n\n374\n00:19:36,830 --> 00:19:39,170\nit requires vCenter which\ncosts a lot of money.\n\n375\n00:19:40,470 --> 00:19:45,320\nSome of the other things you'll see here\nis the ability to download VMware vCenter.\n\n376\n00:19:45,320 --> 00:19:49,270\nSo if you want to set up a vCenter, you\ncan go and download and pull that system.\n\n377\n00:19:49,270 --> 00:19:52,150\nNow, when you download\nthe V Sphere client and\n\n378\n00:19:52,150 --> 00:19:55,710\nthe vCenter, it's not just\ndownloading from the ESX box.\n\n379\n00:19:55,710 --> 00:19:59,760\nRemember the ESX box is stripped\ndown to only have what it needs.\n\n380\n00:19:59,760 --> 00:20:02,590\nYou're actually downloading\nthe software from the VMware website.\n\n381\n00:20:02,590 --> 00:20:05,370\nSo when you click on it,\nyou will get the latest edition\n\n382\n00:20:05,370 --> 00:20:07,830\neven if the server hasn't\nbeen updated in a long time.\n\n383\n00:20:07,830 --> 00:20:08,920\nThat's kind of a nice feature, all right.\n\n384\n00:20:10,360 --> 00:20:12,750\nYou'll also see over here some\nof the other things, like for\n\n385\n00:20:12,750 --> 00:20:16,770\nvSphere remote command line for access in\nthe command line of those servers, and\n\n386\n00:20:16,770 --> 00:20:20,680\nthey've got virtual appliances as well as\nWindows and Linux installers for that.\n\n387\n00:20:20,680 --> 00:20:23,380\nAnd a few other little\nfeatures on the page.\n\n388\n00:20:23,380 --> 00:20:26,220\nBut what we'll wanna do is\ndownload the vshpere client.\n\n389\n00:20:26,220 --> 00:20:28,260\nSo you just click on that and download it.\n\n390\n00:20:28,260 --> 00:20:30,170\nIt's a straight forward installer.\n\n391\n00:20:30,170 --> 00:20:33,120\nIt's one of those where you just click\nnext five times and it installs.\n\n392\n00:20:33,120 --> 00:20:36,320\nThe only question it asks is what\nfolder you want to install it on.\n\n393\n00:20:36,320 --> 00:20:38,720\nSo I won't bore you guys\nwith that installer.\n\n394\n00:20:38,720 --> 00:20:40,550\nIt's super straight forward.\n\n395\n00:20:40,550 --> 00:20:41,290\nAll right.\n\n396\n00:20:41,290 --> 00:20:48,020\nBut when it's done, you'll have a VMware\nvSphere client installed on your system.\n\n397\n00:20:48,020 --> 00:20:51,990\nAnd you can fire that up and\nyou'll get this screen right here.\n\n398\n00:20:51,990 --> 00:20:54,200\nAnd it just asks for\nsome real simple data.\n\n399\n00:20:54,200 --> 00:20:58,840\nThe IP address of the server you wanna\nmanage, the user name, and the password.\n\n400\n00:20:58,840 --> 00:21:03,170\nNow if you just finished your ESX install,\nthe only user you have is root.\n\n401\n00:21:03,170 --> 00:21:06,420\nSo you'll have the IP address of the\nserver which is displayed on the console\n\n402\n00:21:06,420 --> 00:21:09,800\nscreen, you'll have\nthe username which is root, and\n\n403\n00:21:09,800 --> 00:21:12,520\nthe password is whatever you\nset during the installer.\n\n404\n00:21:12,520 --> 00:21:17,290\nLet me go take a look at that\nmachine we fired up, here it is, so\n\n405\n00:21:17,290 --> 00:21:19,700\nI can see that it's at 10.1.230.93.\n\n406\n00:21:19,700 --> 00:21:22,380\nThat's where it ended up.\n\n407\n00:21:22,380 --> 00:21:26,950\nSo let me go back here and\nI'll punch in 10.1.230.93,\n\n408\n00:21:26,950 --> 00:21:31,230\nI'll put in my username of roots and\n\n409\n00:21:31,230 --> 00:21:34,440\nthe password that I specified\nhere in the install, all right.\n\n410\n00:21:34,440 --> 00:21:40,280\nI'll go ahead and login It sees the server\nand it doesn't recognize the certificate\n\n411\n00:21:40,280 --> 00:21:43,840\nbut I'm gonna tell it go ahead and install\nthe certificate because I trust it you\n\n412\n00:21:43,840 --> 00:21:48,170\nknow I'm the one who brought that server\nup and it's going to get connected.\n\n413\n00:21:48,170 --> 00:21:50,710\nOnce it's connected now we can do\nall sorts of cool stuff to it.\n\n414\n00:21:50,710 --> 00:21:51,580\nNow we can go in and\n\n415\n00:21:51,580 --> 00:21:55,670\nwe can update information we can\nchange the IP address to what we\n\n416\n00:21:55,670 --> 00:21:59,790\nwant it to be there's all sorts of little\nodds and ends we need to take care of.\n\n417\n00:21:59,790 --> 00:22:01,330\nNow that the install is done.\n\n418\n00:22:01,330 --> 00:22:03,770\nI punched in my IP address.\n\n419\n00:22:03,770 --> 00:22:08,180\nIf the host name is registered in DNS,\nyou can put it in that way also.\n\n420\n00:22:08,180 --> 00:22:10,070\nThat's always a good idea.\n\n421\n00:22:10,070 --> 00:22:12,630\nSo let me get out of here and\nwe'll fix that real quick.\n\n422\n00:22:12,630 --> 00:22:17,948\nSo that server I'm going to\ncall it ESX/server five, right.\n\n423\n00:22:17,948 --> 00:22:22,910\nSo i need to get connected\nto my DNS server so\n\n424\n00:22:22,910 --> 00:22:24,540\nlet me get connected to that real quick.\n\n425\n00:22:26,630 --> 00:22:29,180\nAnd I'm just going to\nadd that server to DNS.\n\n426\n00:22:29,180 --> 00:22:32,880\nNow when you add an entry for an ESX host\n\n427\n00:22:32,880 --> 00:22:36,690\nif you're going to be managing it with\nvCenter it's really important to do.\n\n428\n00:22:36,690 --> 00:22:39,960\nForward and\nreverse look up entries for it.\n\n429\n00:22:39,960 --> 00:22:41,610\nYou want to do both.\n\n430\n00:22:41,610 --> 00:22:44,840\nIf you're not gonna use vCenter,\nthen you can just do the forward lookup.\n\n431\n00:22:44,840 --> 00:22:46,440\nYou don't have to mess with reverse.\n\n432\n00:22:46,440 --> 00:22:48,380\nBut I find it's a good\npractice to do both.\n\n433\n00:22:48,380 --> 00:22:52,300\nAnd if you're using Windows for DNS it's\nsuper easy to do both at the same time.\n\n434\n00:22:52,300 --> 00:22:54,070\nSo I'm just going to go into lab here.\n\n435\n00:22:54,070 --> 00:22:56,730\nAnd I'm gonna do a new hoster A record.\n\n436\n00:22:56,730 --> 00:23:00,980\nAnd I'll punch in ESX- server five.\n\n437\n00:23:00,980 --> 00:23:02,490\nWell, I don't need to do the domain.\n\n438\n00:23:02,490 --> 00:23:04,480\nThat's what I'm gonna be calling it.\n\n439\n00:23:04,480 --> 00:23:08,440\nThe IP address is 10.230.93dot.\n\n440\n00:23:08,440 --> 00:23:11,010\nI'm gonna create the associated PTR.\n\n441\n00:23:11,010 --> 00:23:13,668\nThat's the reverse lookup record,\nat the same time.\n\n442\n00:23:17,048 --> 00:23:18,105\nAll right.\n\n443\n00:23:18,105 --> 00:23:24,480\nSo now that that's done I can test that\nout just to make sure it's working.\n\n444\n00:23:24,480 --> 00:23:29,323\nSo I'll try and ping esx-server5.\n\n445\n00:23:29,323 --> 00:23:32,675\nAnd I'm gonna add the full name to it.\n\n446\n00:23:32,675 --> 00:23:35,850\nLab.ITPro.tv There we go.\n\n447\n00:23:35,850 --> 00:23:37,540\nAnd it's resolving.\n\n448\n00:23:37,540 --> 00:23:41,940\nSo now I can fire up my vSphere client,\nand\n\n449\n00:23:41,940 --> 00:23:43,480\nthis time I should be\nable to connect by hand.\n\n450\n00:23:46,210 --> 00:23:49,850\nSo I'll just punch in ESX dot\nserver five dot lab dot IT\n\n451\n00:23:51,340 --> 00:23:54,740\npro dot tv, just name roots.\n\n452\n00:23:54,740 --> 00:23:55,312\nAnd the password.\n\n453\n00:23:57,655 --> 00:23:58,188\nAll right,\n\n454\n00:23:58,188 --> 00:24:01,719\nit's prompting about the certificate\nagain because I changed the host name.\n\n455\n00:24:01,719 --> 00:24:04,598\nWe'll just accept that and get connected.\n\n456\n00:24:04,598 --> 00:24:08,275\nNow, once we're connected, we probably\nwanna do some simple things like change\n\n457\n00:24:08,275 --> 00:24:10,460\nthat IP address to a static address.\n\n458\n00:24:10,460 --> 00:24:12,950\nI'm getting a warning about\nmy evaluation license.\n\n459\n00:24:12,950 --> 00:24:14,300\nI didn't install a license.\n\n460\n00:24:14,300 --> 00:24:16,300\nActually, it didn't even ask me to yet.\n\n461\n00:24:16,300 --> 00:24:19,270\nIf I wanna install a license,\nI need to do it now that the system is up.\n\n462\n00:24:19,270 --> 00:24:22,270\nI'll go ahead and say,\nokay to that, for now.\n\n463\n00:24:22,270 --> 00:24:23,270\nAnd so here's my server.\n\n464\n00:24:23,270 --> 00:24:26,050\nI can see it by host\nname instead of IP now.\n\n465\n00:24:26,050 --> 00:24:27,710\nAnd I can go in and\nI can start my configuration.\n\n466\n00:24:27,710 --> 00:24:30,810\nThe server's basically empty\nwhen it first comes up.\n\n467\n00:24:30,810 --> 00:24:32,580\nAnd you don't wanna jump in and\nstart creating VMs.\n\n468\n00:24:32,580 --> 00:24:36,870\nThere's a lot of other things we need\nto do first before we create VMs.\n\n469\n00:24:36,870 --> 00:24:39,380\nSo for example, the IP address.\n\n470\n00:24:39,380 --> 00:24:42,160\nI'm gonna go under configuration\nover here [SOUND] and\n\n471\n00:24:42,160 --> 00:24:45,442\nthen under configuration you'll\nsee hardware and software.\n\n472\n00:24:45,442 --> 00:24:47,114\nSo we can tweak a lot of different things.\n\n473\n00:24:47,114 --> 00:24:50,530\nUnder hardware I've got networking, right.\n\n474\n00:24:50,530 --> 00:24:52,340\nDon't confuse that with network adapters.\n\n475\n00:24:52,340 --> 00:24:55,000\nNetwork adapters is the physical\nadapters themselves.\n\n476\n00:24:55,000 --> 00:24:58,220\nI need to go into networking because\nVMware creates what are called\n\n477\n00:24:58,220 --> 00:24:59,300\nvirtual switches.\n\n478\n00:24:59,300 --> 00:25:01,710\nWe're gonna learn more about\nthese in another episode.\n\n479\n00:25:01,710 --> 00:25:04,090\nBut this is where I set the IP address for\nthis host.\n\n480\n00:25:05,390 --> 00:25:10,220\nI can go up here to properties and\nin here we'll start to\n\n481\n00:25:10,220 --> 00:25:13,460\nsee some of our information, and\nI need this management network.\n\n482\n00:25:13,460 --> 00:25:16,960\nAnd on the management network,\nthat's where my IP address is right there.\n\n483\n00:25:16,960 --> 00:25:18,650\nSo we can hit edit and\n\n484\n00:25:18,650 --> 00:25:23,630\nI'll just change that IP address by going\nto the IP settings tab, and there it is.\n\n485\n00:25:23,630 --> 00:25:28,160\nSo I am gonna tell it I don't want\nit to be 93, I want it to be 105.\n\n486\n00:25:30,005 --> 00:25:32,010\nAll right, so I will just punch that in.\n\n487\n00:25:32,010 --> 00:25:33,290\nThat is the address I want it to have.\n\n488\n00:25:33,290 --> 00:25:35,690\nIt's a static IP so\nit will always be the same.\n\n489\n00:25:37,010 --> 00:25:38,550\nAnd I will just apply that now.\n\n490\n00:25:38,550 --> 00:25:42,820\nWhenever you do something in the vSphere\nclient, it happens down here.\n\n491\n00:25:42,820 --> 00:25:44,650\nIt looks like it's already done,\nbut it's not.\n\n492\n00:25:44,650 --> 00:25:49,020\nSee how it says, in progress,\nmy problem is, I changed the IP.\n\n493\n00:25:49,020 --> 00:25:51,790\nSo it's not gonna be able to find\nout whether it's done or not.\n\n494\n00:25:51,790 --> 00:25:53,650\nSo I just need to close this window.\n\n495\n00:25:54,700 --> 00:25:56,430\nAnd then fire it up again.\n\n496\n00:25:56,430 --> 00:26:00,500\nSo I'll fire that vSphere client a second\ntime and I need to connect again.\n\n497\n00:26:00,500 --> 00:26:02,940\nNow my problem is,\nI was connecting by host name.\n\n498\n00:26:02,940 --> 00:26:04,280\nAnd that DNS record is wrong.\n\n499\n00:26:04,280 --> 00:26:08,790\nSo I do need to go and update that and\nput it back to the new address.\n\n500\n00:26:08,790 --> 00:26:11,460\nSo I'll go find ESX server 5 in my list.\n\n501\n00:26:12,780 --> 00:26:15,159\nAnd I'm gonna fix that,\npointing it to 105, all right.\n\n502\n00:26:16,855 --> 00:26:19,655\nAnd that'll update the reverse\nrecord at the same time.\n\n503\n00:26:20,885 --> 00:26:25,374\nNow, my client has probably cached it, so\nI'm just gonna flush my DNS cache real\n\n504\n00:26:25,374 --> 00:26:32,805\nquick So that I know it's not cached and\nthen I'm just gonna test it out.\n\n505\n00:26:32,805 --> 00:26:34,049\nYep, I'm getting 105.\n\n506\n00:26:35,320 --> 00:26:37,440\nNow I'll connect back up and\nwe should be in business.\n\n507\n00:26:39,650 --> 00:26:44,260\nSo here we go, connected nice and\nneat on our static IP.\n\n508\n00:26:44,260 --> 00:26:46,810\nA static IP is something that\nyou definitely want to have, so\n\n509\n00:26:46,810 --> 00:26:48,570\nthis is a step that you're\nalmost always gonna go through.\n\n510\n00:26:48,570 --> 00:26:51,440\nI say almost cuz you might\nhave a DACP reservation.\n\n511\n00:26:51,440 --> 00:26:54,940\nThat's another approach you could do\nto create like a pseudo static IP.\n\n512\n00:26:54,940 --> 00:26:59,140\nBut I like to actually assign, all right.\n\n513\n00:26:59,140 --> 00:27:01,600\nNow there's more I want\nto do to this system, but\n\n514\n00:27:01,600 --> 00:27:05,750\nfor right now it's installed,\nit's up, and it's running, all right?\n\n515\n00:27:05,750 --> 00:27:09,130\nAnd looking at the clock it's a good time\nto take a break, so why don't we do this?\n\n516\n00:27:09,130 --> 00:27:11,820\nWe'll stop here, and\nwhen we get back I'll show you some of\n\n517\n00:27:11,820 --> 00:27:16,100\nthe other follow up activities we do here\neven before joining this to a vCenter,\n\n518\n00:27:16,100 --> 00:27:17,750\nwhich will be the last thing\nthat I do on this one.\n\n519\n00:27:17,750 --> 00:27:23,050\nSo stay tuned, we'll be back after this.\n\n520\n00:27:23,050 --> 00:27:28,686\n[SOUND] All right, welcome back.\n\n521\n00:27:28,686 --> 00:27:31,700\nSo before the break we\ngot ESX installed and\n\n522\n00:27:31,700 --> 00:27:35,180\nwe updated the IP address of our machine.\n\n523\n00:27:35,180 --> 00:27:36,520\nVery exciting stuff.\n\n524\n00:27:36,520 --> 00:27:40,750\nSo we do have a couple last\nlittle housecleaning activities\n\n525\n00:27:40,750 --> 00:27:43,990\nto take care of before\nthe server is ready to rock.\n\n526\n00:27:43,990 --> 00:27:47,210\nIf we're going to be administering\nthis server using the v-spear client,\n\n527\n00:27:47,210 --> 00:27:48,150\nwe are done.\n\n528\n00:27:48,150 --> 00:27:50,510\nIf we are going to manage\nthe server independently.\n\n529\n00:27:50,510 --> 00:27:51,480\nI can go in.\n\n530\n00:27:51,480 --> 00:27:55,620\nI can start to create virtual machines and\ndo all that other good stuff, all right.\n\n531\n00:27:55,620 --> 00:27:59,410\nBut if I'm going to be joining this up to\nvCenter, one of the key things I need to\n\n532\n00:27:59,410 --> 00:28:04,120\ndo, is make sure the clock is\nset properly on this system.\n\n533\n00:28:04,120 --> 00:28:09,110\nNow in older versions of ESX, that meant\nwe had to go to the command line, we had\n\n534\n00:28:09,110 --> 00:28:13,630\nto edit some config files and get us set\nup for NTP, the Network Time Protocol,\n\n535\n00:28:13,630 --> 00:28:17,250\nthat allowed us to synchronize\nthe clocks and it was a pain.\n\n536\n00:28:17,250 --> 00:28:20,640\nBut in newer versions of ESX\nthey've made this a lot easier.\n\n537\n00:28:20,640 --> 00:28:26,230\nAll we have to do is fire up our V sphere\nclient and connect to our target host.\n\n538\n00:28:26,230 --> 00:28:30,750\nFrom there we go to configuration and here\nwe'll see a lot of configuration stuff and\n\n539\n00:28:30,750 --> 00:28:33,700\nright down here under software we'll see,\ntime configuration, all right.\n\n540\n00:28:34,880 --> 00:28:36,690\nIt's right beneath Licensed Features,\n\n541\n00:28:36,690 --> 00:28:39,520\nwhich is where we'd go if we\nwanted to manage our licensing.\n\n542\n00:28:39,520 --> 00:28:40,930\nYou'll see you've got\nthe Edit button there,\n\n543\n00:28:40,930 --> 00:28:43,660\nwe can set our licensing\nto enable various things.\n\n544\n00:28:43,660 --> 00:28:45,990\nFor time configuration we go in here, and\n\n545\n00:28:45,990 --> 00:28:49,020\nI can see my NTP client\nis currently stopped.\n\n546\n00:28:49,020 --> 00:28:52,550\nI'm just gonna go to Properties,\nand we'll change that, all right.\n\n547\n00:28:52,550 --> 00:28:57,890\nIt's showing me the time, which looking\nat it, my laptop says it's 3:58.\n\n548\n00:28:57,890 --> 00:28:59,240\nThis thing says it's 3:57.\n\n549\n00:28:59,240 --> 00:29:01,380\nSo there's a little bit of a disconnect.\n\n550\n00:29:01,380 --> 00:29:03,632\nBut it may not be enough to matter.\n\n551\n00:29:03,632 --> 00:29:09,530\nI'm gonna turn on the NTP client so\nI can synchronize off of a network source.\n\n552\n00:29:09,530 --> 00:29:11,960\nAnd almost any enterprise\nis going to have this.\n\n553\n00:29:11,960 --> 00:29:14,940\nWhere you've got a time server\nthat either you manage or\n\n554\n00:29:14,940 --> 00:29:18,590\nand external time server that you use\nto be able to synchronize against.\n\n555\n00:29:18,590 --> 00:29:21,630\nIt's up to you you can pick\nwhich one you want to use.\n\n556\n00:29:21,630 --> 00:29:23,540\nI'll use a public one here.\n\n557\n00:29:23,540 --> 00:29:27,150\nIf you're running the active directory,\nevery active directory domain controller\n\n558\n00:29:27,150 --> 00:29:30,160\nis an NTP server so\nyou can use one of them if you want.\n\n559\n00:29:30,160 --> 00:29:33,650\nBut for me, I'm just gonna reach out and\nuse one on the Internet.\n\n560\n00:29:33,650 --> 00:29:37,260\nWhen we go in here, you can see\nwhether NTP is set to start, and\n\n561\n00:29:37,260 --> 00:29:39,850\nI can see mine is set to start and\nstop manually, right.\n\n562\n00:29:39,850 --> 00:29:45,520\nAnd I can go into my NTP settings, and I\ncan specify who I want to use as a server.\n\n563\n00:29:45,520 --> 00:29:49,240\nNow I'm just gonna use pool.ntp.org.\n\n564\n00:29:49,240 --> 00:29:54,030\nThat's a public collection of NTP\nservers that are available for us.\n\n565\n00:29:54,030 --> 00:29:56,270\nThere's positives and negatives with that.\n\n566\n00:29:56,270 --> 00:30:00,060\nThe biggest negative is you don't\nknow who's running those servers.\n\n567\n00:30:00,060 --> 00:30:01,360\nAnd so if they get attacked,\n\n568\n00:30:01,360 --> 00:30:05,000\nif they aren't properly secured,\nyour system could pull down bad times.\n\n569\n00:30:05,000 --> 00:30:07,390\nAnd all of a sudden,\nyou could be denial of servicing yourself.\n\n570\n00:30:07,390 --> 00:30:08,750\nIt could be a real problem.\n\n571\n00:30:08,750 --> 00:30:11,790\nSo you may choose to use\nan internal one instead.\n\n572\n00:30:11,790 --> 00:30:17,300\nSo for example, I might choose to use like\none of my domain controllers here so I can\n\n573\n00:30:17,300 --> 00:30:22,300\npunch in that server and that's a domain\ncontroller right here on my network.\n\n574\n00:30:22,300 --> 00:30:23,080\nI control it.\n\n575\n00:30:23,080 --> 00:30:26,120\nI set the time and\nif I set all of my servers to use it,\n\n576\n00:30:26,120 --> 00:30:27,590\nit gives me a little bit of safety.\n\n577\n00:30:27,590 --> 00:30:29,550\nBut like I said,\nI'm just gonna use that public one.\n\n578\n00:30:29,550 --> 00:30:32,190\nAnd you can put in more\nthan one if you want.\n\n579\n00:30:32,190 --> 00:30:37,030\nIf you need to make sure you have\nredundancy and availability, all right.\n\n580\n00:30:37,030 --> 00:30:42,390\nSo once I've got that, it's got the\nrestart the NTP service to apply changes.\n\n581\n00:30:42,390 --> 00:30:46,670\nI don't really need that option because\nI'm not running the NTP service right now\n\n582\n00:30:46,670 --> 00:30:49,080\nbecause I actually need to go up here and\nchange it.\n\n583\n00:30:49,080 --> 00:30:52,200\nBut one thing I'm gonna do is go ahead and\nsay okay first\n\n584\n00:30:52,200 --> 00:30:56,410\nto make sure it saves the changes, I can\nsee it saving them right down there and\n\n585\n00:30:56,410 --> 00:30:58,110\nnow I'm gonna go back and\nturn that service on.\n\n586\n00:30:58,110 --> 00:31:01,770\nI'm gonna set it to start and\nstop with the host.\n\n587\n00:31:01,770 --> 00:31:05,950\nI wanna make sure that every time my\nsystem boots up NTP is running and\n\n588\n00:31:05,950 --> 00:31:07,950\nsynchronizing my time, okay.\n\n589\n00:31:07,950 --> 00:31:10,780\nAnd it's already started so\nI don't have to deal with it there.\n\n590\n00:31:10,780 --> 00:31:12,540\nI can hit restart if I want.\n\n591\n00:31:12,540 --> 00:31:13,960\nBut, I'll go ahead and hit okay.\n\n592\n00:31:13,960 --> 00:31:18,210\nAnd now, I'm synchronizing my\nclock against a public source.\n\n593\n00:31:18,210 --> 00:31:20,910\nFor now on,\nthe time is not being set here locally.\n\n594\n00:31:20,910 --> 00:31:23,490\nIt's being set from a remote server,\nall right.\n\n595\n00:31:23,490 --> 00:31:26,710\nAnd I can see, it's already\nadjusted itself or it should be.\n\n596\n00:31:26,710 --> 00:31:27,820\nLet me hit refresh here.\n\n597\n00:31:27,820 --> 00:31:30,580\nYou got a little Refresh button here\nto make sure that it's accurate.\n\n598\n00:31:30,580 --> 00:31:32,980\nSo, I can see, my NTP client is running.\n\n599\n00:31:32,980 --> 00:31:36,713\nIt's synchronizing against pool.ntp.org\nand that's the current date and\n\n600\n00:31:36,713 --> 00:31:37,965\ntime that it's showing.\n\n601\n00:31:39,846 --> 00:31:44,440\nAll right, so I've got that,\nmy time is set, I'm ready to go.\n\n602\n00:31:44,440 --> 00:31:45,460\nAll right.\n\n603\n00:31:45,460 --> 00:31:48,579\nThere are a few other things that\nwe might need to tweak, you may or\n\n604\n00:31:48,579 --> 00:31:51,414\nmay not need to do these, so\nthese are kind of optional, but\n\n605\n00:31:51,414 --> 00:31:54,290\nlet me just show you a few other\nthings that I like to look at.\n\n606\n00:31:54,290 --> 00:32:00,187\nOne thing is a lot of server\nprocessors now support hyperthreading.\n\n607\n00:32:00,187 --> 00:32:01,070\nAnd hyper-threading.\n\n608\n00:32:01,070 --> 00:32:02,149\nIt sounds like a great idea.\n\n609\n00:32:02,149 --> 00:32:06,899\nIt says a processor has a number\nof cores and in those cores,\n\n610\n00:32:06,899 --> 00:32:09,840\nit has instruction sets.\n\n611\n00:32:09,840 --> 00:32:11,850\nYou might be sending\na command to the processor,\n\n612\n00:32:11,850 --> 00:32:17,340\nthat uses certain parts of the CPU and\nother parts of the CPU are left idle.\n\n613\n00:32:17,340 --> 00:32:20,530\nSo if you have two commands that don't\noverlap, you could actually run them at\n\n614\n00:32:20,530 --> 00:32:24,650\nthe same time, effectively doubling\nwhat your processor can do.\n\n615\n00:32:24,650 --> 00:32:27,630\nThe problem is it's pretty\nrare that that happens and so\n\n616\n00:32:27,630 --> 00:32:30,300\nit creates inconsistent\nperformance on your system and\n\n617\n00:32:30,300 --> 00:32:34,140\nit can make things difficult\nlike monitoring CPU utilization.\n\n618\n00:32:34,140 --> 00:32:40,480\nSo in production, yes x environments, it's\nnot uncommon to disable hyper threading.\n\n619\n00:32:40,480 --> 00:32:43,140\nNow my particular system doesn't\nsupport hyper threading so\n\n620\n00:32:43,140 --> 00:32:44,630\nI don't have the option.\n\n621\n00:32:44,630 --> 00:32:47,780\nBut in a production environment,\nif yours does, under hardware,\n\n622\n00:32:47,780 --> 00:32:49,650\nyou just go to processors, and\n\n623\n00:32:49,650 --> 00:32:53,470\nyou'll see right here whether you\nsupport hyper threading, mine says n/a.\n\n624\n00:32:53,470 --> 00:32:56,970\nI've got two quarters, but I don't\ndo hyper threading on top of that so\n\n625\n00:32:56,970 --> 00:32:58,430\nI just have n/a there.\n\n626\n00:32:58,430 --> 00:33:03,280\nBut if it does say enabled, you'll be able\nto hit the Properties button right here\n\n627\n00:33:03,280 --> 00:33:04,460\nand disable hyperthreading.\n\n628\n00:33:04,460 --> 00:33:06,640\nIt's really the only thing\nyou can change here.\n\n629\n00:33:06,640 --> 00:33:10,070\nSo you can disable that and\nthen you'll end up with more or\n\n630\n00:33:10,070 --> 00:33:12,690\nless processors based on\nthe setting that you pick.\n\n631\n00:33:12,690 --> 00:33:15,240\nIn production environments it's\nusually a good idea to turn that off.\n\n632\n00:33:15,240 --> 00:33:17,280\nAll right.\n\n633\n00:33:17,280 --> 00:33:18,350\nOther things.\n\n634\n00:33:18,350 --> 00:33:19,550\nPower management.\n\n635\n00:33:19,550 --> 00:33:21,330\nPower management's a big deal.\n\n636\n00:33:21,330 --> 00:33:23,780\nOn most servers you may\nnot have power management.\n\n637\n00:33:23,780 --> 00:33:25,550\nSo you see on mine not supported.\n\n638\n00:33:25,550 --> 00:33:28,520\nIt's a server,\nI don't have power management on it.\n\n639\n00:33:28,520 --> 00:33:32,640\nBut if you're deploying\nESX onto a work station or\n\n640\n00:33:32,640 --> 00:33:37,030\na laptop that does have power management\nyou may not want it to go to sleep.\n\n641\n00:33:37,030 --> 00:33:41,180\nYou may not want it to do speed step on\nthe CPU to slow the processor down or\n\n642\n00:33:41,180 --> 00:33:43,600\nspeed it up, and so\nyou'll be able to come in here and\n\n643\n00:33:43,600 --> 00:33:45,980\nadjust that also under\nthe power management setting.\n\n644\n00:33:45,980 --> 00:33:48,400\nSo, that's another one that\nyou may need to tweak.\n\n645\n00:33:49,430 --> 00:33:51,450\nWhat are some of the other things?\n\n646\n00:33:52,640 --> 00:33:57,070\nBefore the break I went to networking,\nand under networking I pulled up\n\n647\n00:33:57,070 --> 00:34:01,720\nthe properties of the management\nnetwork and I adjusted my IP address.\n\n648\n00:34:01,720 --> 00:34:05,670\nBut you might have noticed on\nthere that there is no spot for\n\n649\n00:34:05,670 --> 00:34:09,030\na default gateway and\nthere is no spot for DNS servers, and\n\n650\n00:34:09,030 --> 00:34:11,680\nthat's because, well,\nthey're not on the screen.\n\n651\n00:34:11,680 --> 00:34:16,920\nSo if I close that, under software\nthere's another entry that says DNS and\n\n652\n00:34:16,920 --> 00:34:18,890\nrouting and if I go to DNS and\n\n653\n00:34:18,890 --> 00:34:23,400\nrouting that's where I'll see my DNS\nservers and my default gateway and\n\n654\n00:34:23,400 --> 00:34:27,840\nI can pull up the properties right there\nand manipulate them so you've got that.\n\n655\n00:34:27,840 --> 00:34:30,790\nOn the routing side you\ncan set a default for\n\n656\n00:34:30,790 --> 00:34:35,130\nIPv4 as well as IPv6, and\nunder the DNS configuration side\n\n657\n00:34:35,130 --> 00:34:38,780\nhere's where I can set my host\nname as well as my IP address.\n\n658\n00:34:38,780 --> 00:34:43,400\nSo my host name was ESX Dash server five\n\n659\n00:34:43,400 --> 00:34:47,270\ndot lab dot IT Pro dot TV so\nI can populate that right here.\n\n660\n00:34:47,270 --> 00:34:49,490\nIt didn't ask that during the installer so\n\n661\n00:34:49,490 --> 00:34:51,010\nthis is the only place were I can go for\nit.\n\n662\n00:34:52,520 --> 00:34:54,080\nSo we can go in a get that set.\n\n663\n00:34:54,080 --> 00:34:58,820\nIt warning me here that I do have\nIPV6 addresses on my system but\n\n664\n00:34:58,820 --> 00:35:02,010\nI didn't specify a gateway am\nI sure that;s what I want.\n\n665\n00:35:02,010 --> 00:35:06,110\nAnd that is, I'm not actually using\nIPV6 so, I'll just say yes to that.\n\n666\n00:35:06,110 --> 00:35:08,610\nAnd now it's updated and\nit's got the proper host name.\n\n667\n00:35:08,610 --> 00:35:12,490\nSo easy changes to make\nreally easy from the GUI\n\n668\n00:35:12,490 --> 00:35:14,920\nfrom the command line this stuff\nwould be a real hassle and\n\n669\n00:35:14,920 --> 00:35:17,450\nduring the install they want\nto keep it simple as possible.\n\n670\n00:35:18,460 --> 00:35:21,040\nAll right seems like there's some other\nstuff what else do we want to specify,\n\n671\n00:35:21,040 --> 00:35:23,989\nthat was power, hyper-threading the DNS.\n\n672\n00:35:25,320 --> 00:35:26,500\nOh memory.\n\n673\n00:35:26,500 --> 00:35:30,790\nSo we also have memory in CPU\navailable on this system and\n\n674\n00:35:30,790 --> 00:35:35,580\nwe may want to adjust what's available for\nVMware to use.\n\n675\n00:35:35,580 --> 00:35:39,510\nAnd so when you look at your\nsystem across the left side here,\n\n676\n00:35:39,510 --> 00:35:43,510\nif we go down here to software and\nscroll down a bit and\n\n677\n00:35:43,510 --> 00:35:47,870\nyou'll find system resource allocation,\nthis guy right here.\n\n678\n00:35:47,870 --> 00:35:50,220\nAnd if we go into system\nresource allocation.\n\n679\n00:35:50,220 --> 00:35:54,860\nHere I can see, like currently\nwhat's reserved for the system.\n\n680\n00:35:54,860 --> 00:35:57,940\nThe ESX OS itself.\n\n681\n00:35:57,940 --> 00:36:03,060\nThat hyper visor that's running on the\nbare metal, its reserved 300 megahertz,\n\n682\n00:36:03,060 --> 00:36:07,780\nor 10% of my CPU, and 1.4 gigs of memory.\n\n683\n00:36:07,780 --> 00:36:11,980\nNow, I've only got 8 gigs of memory\nin this particular system so\n\n684\n00:36:11,980 --> 00:36:15,900\nthat leaves me 6.5 gigs of RAM for\nmy virtual machines, but\n\n685\n00:36:15,900 --> 00:36:20,520\nthe host OS itself is taking 1.4 and\nwe can manipulate that.\n\n686\n00:36:20,520 --> 00:36:27,960\nIf you go into edit right here you can\nset CPU resources that are reserved.\n\n687\n00:36:27,960 --> 00:36:32,160\nYou can set limits and\nreservations, and memory resources.\n\n688\n00:36:32,160 --> 00:36:33,980\nSo the reservation,\n\n689\n00:36:33,980 --> 00:36:38,150\nthat's like the minimum amount of memory\nthat's going to be held for the system and\n\n690\n00:36:38,150 --> 00:36:42,930\nthe limit, that's the maximum amount\nthat you'll allow that host OS to take.\n\n691\n00:36:42,930 --> 00:36:45,440\nSo you can start to tweak these ranges.\n\n692\n00:36:45,440 --> 00:36:49,820\nAnd they're set with a minimum, the bare\nminimum that it requires to operate, but\n\n693\n00:36:49,820 --> 00:36:53,750\nthe maximum or the limit is set\nto unlimited by default and\n\n694\n00:36:53,750 --> 00:36:55,820\nyou might want to tweak that.\n\n695\n00:36:55,820 --> 00:37:00,330\nKeep in mind that if you set it too low,\nit can slow down the host OS,\n\n696\n00:37:00,330 --> 00:37:03,990\nwhich will cause problems with the virtual\nmachine so you don't normally need to\n\n697\n00:37:03,990 --> 00:37:09,050\nmanipulate these but\nin certain use scenarios you might\n\n698\n00:37:09,050 --> 00:37:13,610\nhave very specific resource utilization\nneeds and so you can adjust this.\n\n699\n00:37:13,610 --> 00:37:16,380\nThe default settings are kind of\ndesigned to be general purpose,\n\n700\n00:37:16,380 --> 00:37:17,990\nlike a one size fits all.\n\n701\n00:37:17,990 --> 00:37:20,190\nBut there's optimizations you might make.\n\n702\n00:37:20,190 --> 00:37:23,470\nVM Ware is really powerful\nas far as what they give you\n\n703\n00:37:23,470 --> 00:37:25,990\nin the configuration options of ESX.\n\n704\n00:37:25,990 --> 00:37:28,810\nIf you go to the advanced\nview it'll blow your mind.\n\n705\n00:37:28,810 --> 00:37:31,810\nAll the different things that you\ncan configure as you look in here.\n\n706\n00:37:31,810 --> 00:37:34,140\nThe memory heaps and specific addresses,\n\n707\n00:37:34,140 --> 00:37:37,810\nI mean there are a ton of\ncustomization options in here.\n\n708\n00:37:37,810 --> 00:37:42,750\nIf you really understand your application\nand you really understand the host OS and\n\n709\n00:37:42,750 --> 00:37:43,760\ntheir needs.\n\n710\n00:37:43,760 --> 00:37:48,140\nYou can tweak these values to\nmanipulate what's being reserved for\n\n711\n00:37:48,140 --> 00:37:50,380\nthe system and how it operates.\n\n712\n00:37:50,380 --> 00:37:52,460\nAnd I'm not going to kid you guys.\n\n713\n00:37:52,460 --> 00:37:55,370\nA lot of this stuff gets\nwell beyond my level.\n\n714\n00:37:55,370 --> 00:37:59,990\nBut developers may understand what each\npiece is that the system needs and\n\n715\n00:37:59,990 --> 00:38:01,150\nthey can tweak this.\n\n716\n00:38:01,150 --> 00:38:04,810\nFor most of us,\nwe'll not mess with these, right?\n\n717\n00:38:04,810 --> 00:38:08,490\nBut for really advanced power users,\nthere's settings in here they can\n\n718\n00:38:08,490 --> 00:38:11,480\nmanipulate to influence\nthe way the system behaves.\n\n719\n00:38:13,180 --> 00:38:14,120\nAll right.\n\n720\n00:38:14,120 --> 00:38:16,740\nOther than that there's a few other\nentries in here that I want to talk about\n\n721\n00:38:16,740 --> 00:38:20,210\nin other episodes, like the storage\npieces where we set up our data stores.\n\n722\n00:38:20,210 --> 00:38:21,500\nWe'll see that later.\n\n723\n00:38:21,500 --> 00:38:26,000\nStorage adapters, if we have external\nsands, or direct attached storage.\n\n724\n00:38:27,100 --> 00:38:30,540\nWe've got our individual\nnetwork adaptors themselves,\n\n725\n00:38:30,540 --> 00:38:34,000\nthey get their own screen because we can\nset up bonds where we team them together.\n\n726\n00:38:34,000 --> 00:38:36,280\nWe'll see that in another episode.\n\n727\n00:38:36,280 --> 00:38:39,140\nThen there's the advanced settings page,\nwhere you can set things like\n\n728\n00:38:39,140 --> 00:38:43,660\npass through hard drives and stuff that\nwe're going to see in later episodes.\n\n729\n00:38:43,660 --> 00:38:45,780\nSo if you're wondering why\nI'm not covering each and\n\n730\n00:38:45,780 --> 00:38:49,110\nevery single entry here, it's because\na lot of it we're going to get to later.\n\n731\n00:38:49,110 --> 00:38:52,920\nThe other thing is, we don't really want\nto mess with a lot of this from here.\n\n732\n00:38:52,920 --> 00:38:57,730\nThe better thing is, once we've got this\nserver set up, we need to jump over to\n\n733\n00:38:57,730 --> 00:39:02,480\nour vCenter and\nadd that server in here, right?\n\n734\n00:39:02,480 --> 00:39:04,390\nThat's going to be a new host to manage.\n\n735\n00:39:04,390 --> 00:39:06,630\nSo I come in here and add it as a host.\n\n736\n00:39:06,630 --> 00:39:10,020\nAnd we start managing it from here because\nyou might create a common configuration\n\n737\n00:39:10,020 --> 00:39:12,700\nthat you deploy across\nall of these machines.\n\n738\n00:39:12,700 --> 00:39:20,154\nSo I'm just going to come in here and\nI'll add in esx-server5.lab.itpro.tv.\n\n739\n00:39:21,380 --> 00:39:22,910\nWe'll get that added in and\n\n740\n00:39:22,910 --> 00:39:27,060\nthen from now on I won't manage\nit from the individual client.\n\n741\n00:39:27,060 --> 00:39:31,180\nInstead, I'll manage it right from\nhere in VCenter, right, that's what we\n\n742\n00:39:31,180 --> 00:39:35,230\nnormally want and you'll see all those\nsame configuration options that are in\n\n743\n00:39:35,230 --> 00:39:40,200\nthe regular VSphere client are right here\nin the VSphere web client, and more.\n\n744\n00:39:40,200 --> 00:39:43,060\nWe actually get additional\noptions here in the web client.\n\n745\n00:39:43,060 --> 00:39:46,460\nThat we don't have in that\nregular vSphere client.\n\n746\n00:39:46,460 --> 00:39:47,850\nAll right.\n\n747\n00:39:47,850 --> 00:39:49,620\nSo I'll add that one in.\n\n748\n00:39:49,620 --> 00:39:51,760\nAnd now we'll have it.\n\n749\n00:39:51,760 --> 00:39:53,080\nAll right.\nSo that pretty much wraps up\n\n750\n00:39:53,080 --> 00:39:55,030\ninstalling ESXi.\n\n751\n00:39:55,030 --> 00:39:56,730\nNot terribly exciting, right?\n\n752\n00:39:56,730 --> 00:39:59,490\nIt's once we start adding stuff to\nit that it gets really exciting.\n\n753\n00:39:59,490 --> 00:40:00,970\nWe need to create some virtual machines.\n\n754\n00:40:00,970 --> 00:40:03,710\nWe need to get some infrastructure\nrunning on top of this.\n\n755\n00:40:03,710 --> 00:40:06,720\nAnd that's what we're going\nto see in the coming episode.\n\n756\n00:40:06,720 --> 00:40:09,120\nBut for right now that's a pretty\ngood spot to wrap up this one.\n\n757\n00:40:09,120 --> 00:40:12,850\nI know it was a short episode, but there's\nnot really all that much to installing\n\n758\n00:40:12,850 --> 00:40:16,620\nESXi, so that's a good spot for\nus to stop.\n\n759\n00:40:16,620 --> 00:40:20,310\nRemember if you have any questions\non this, feel free to ask.\n\n760\n00:40:20,310 --> 00:40:22,570\nLive during the show you\ncan go to itpro.tv/live.\n\n761\n00:40:22,570 --> 00:40:25,690\nPost your questions right\nthere in the chat room.\n\n762\n00:40:25,690 --> 00:40:27,200\nIt's right beneath the video.\n\n763\n00:40:27,200 --> 00:40:29,940\nIf we're not live, use our Q and A forums.\n\n764\n00:40:29,940 --> 00:40:34,170\nAt the top of every page at itvpro.tv\nyou will see a link that says Q and A.\n\n765\n00:40:34,170 --> 00:40:35,750\nIt will take you into the forums.\n\n766\n00:40:35,750 --> 00:40:39,278\nYou can post your questions there and\nwe monitor and answer.\n\n767\n00:40:39,278 --> 00:40:42,350\nWe want to make sure you guys have the\ninformation you need to be successful when\n\n768\n00:40:42,350 --> 00:40:43,180\nyou deploy the technology.\n\n769\n00:40:44,190 --> 00:40:46,410\nAll right,\nwell I hope you guys enjoyed the show.\n\n770\n00:40:46,410 --> 00:40:50,613\nSigning off for IT PRO TV,\nI'm Don Pezet And I'll see you next time.\n\n771\n00:40:50,613 --> 00:41:00,613\n[MUSIC]\n\n",
          "vimeoId": "103262835"
        },
        {
          "description": "In this episode Don examines the process of updating vCenter and ESXi and some of the pitfalls that may arise. He also examines securing your ESXi installation to prevent unintended vulnerabilities.",
          "length": "4823",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/004-Updating-and-Securing-ESXi.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/004-Updating-and-Securing-ESXi-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/004-Updating-and-Securing-ESXi-sm.jpg",
          "title": "Updating and Securing ESXi",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,259 --> 00:00:36,223\nAll right, good morning,\ngood afternoon, and good evening.\n\n3\n00:00:36,223 --> 00:00:36,897\nAnd welcome back.\n\n4\n00:00:36,897 --> 00:00:38,836\nTo another episode of ITProTV.\n\n5\n00:00:38,836 --> 00:00:43,601\nI'm your host Don Pezet, back again\nwith another episode of VMware, right?\n\n6\n00:00:43,601 --> 00:00:47,288\nWe're doing the VMware certified\nprofessional VCP, DCV,\n\n7\n00:00:47,288 --> 00:00:49,171\nData Center Virtualization.\n\n8\n00:00:49,171 --> 00:00:51,620\nIt's quite the mouthful\nthis early in the morning.\n\n9\n00:00:52,740 --> 00:00:54,470\nYesterday we filmed a couple episodes and\n\n10\n00:00:54,470 --> 00:00:59,720\nwe took a look at getting vCenter\ninstalled and ESXi, right?\n\n11\n00:00:59,720 --> 00:01:03,370\nSo that the core components of\nvSphere we got them installed.\n\n12\n00:01:03,370 --> 00:01:04,360\nWe brought them up.\n\n13\n00:01:04,360 --> 00:01:08,330\nWe really didn't do anything exciting with\nthem other than getting them online and\n\n14\n00:01:08,330 --> 00:01:09,520\nrunning, right?\n\n15\n00:01:09,520 --> 00:01:14,197\nSo for the last part of the installation\nshow, or the initial setup shows,\n\n16\n00:01:14,197 --> 00:01:19,109\nwe needed to take a look at how we update\nand how we secure those installations.\n\n17\n00:01:19,109 --> 00:01:21,300\nSo a few more things we\ndo before we dive in and\n\n18\n00:01:21,300 --> 00:01:24,042\nreally start to create virtual\nmachines and all that.\n\n19\n00:01:24,042 --> 00:01:25,505\nSo keep that in mind.\n\n20\n00:01:25,505 --> 00:01:29,286\nIn real life, everything that we've\ndone in these first couple of episodes,\n\n21\n00:01:29,286 --> 00:01:33,110\nthis is stuff you need to do prior to\ncreating the first virtual machines.\n\n22\n00:01:33,110 --> 00:01:35,790\nSo, some people get ahead of themselves.\n\n23\n00:01:35,790 --> 00:01:37,180\nThey create a bunch of virtual machines.\n\n24\n00:01:37,180 --> 00:01:40,220\nAnd then they have to go back and\nstart changing security settings.\n\n25\n00:01:40,220 --> 00:01:43,610\nAnd it's very difficult to do\nwithout bringing your VMs offline.\n\n26\n00:01:43,610 --> 00:01:44,870\nSo in a mission-critical or\n\n27\n00:01:44,870 --> 00:01:47,814\na high-availability environment\nthat's a terrible practice.\n\n28\n00:01:47,814 --> 00:01:51,089\nGet your infrastructure set up first then,\ncreate your VMs.\n\n29\n00:01:51,089 --> 00:01:54,270\nAll right, now let's talk about updates.\n\n30\n00:01:54,270 --> 00:01:58,930\nVMware regularly releases updates for\nall of their products.\n\n31\n00:01:58,930 --> 00:02:02,720\nAnd, if they're security patches or\nhotfixes or\n\n32\n00:02:02,720 --> 00:02:05,790\nwhatever, those you need to\nroll out as soon as possible.\n\n33\n00:02:05,790 --> 00:02:08,120\nYou need to test them to make sure\nthey're safe for your environment, and\n\n34\n00:02:08,120 --> 00:02:09,340\nthen deploy them.\n\n35\n00:02:09,340 --> 00:02:11,910\nBut then there's bigger product updates.\n\n36\n00:02:11,910 --> 00:02:15,190\nAnd the product updates generally\ninclude things like new features and\n\n37\n00:02:15,190 --> 00:02:18,770\nfunctionality, things that you\nmight not necessarily need.\n\n38\n00:02:18,770 --> 00:02:22,680\nIf you don't need them there's not\na giant rush to go and do the update.\n\n39\n00:02:22,680 --> 00:02:25,150\nBut often times there'll be\nsome functionality you want.\n\n40\n00:02:25,150 --> 00:02:30,050\nA great example, I know I mentioned\nin earlier episodes that VMware,\n\n41\n00:02:30,050 --> 00:02:32,530\nas far as running the vShpere Web client,\n\n42\n00:02:32,530 --> 00:02:35,220\nthey really just support\nInternet Explorer, all right?\n\n43\n00:02:35,220 --> 00:02:37,870\nWell that's for\nofficial full compatibility.\n\n44\n00:02:37,870 --> 00:02:40,200\nBut you can run it inside of Chrome.\n\n45\n00:02:40,200 --> 00:02:44,070\nAnd if you're a Macintosh user,\nwell you can't run Internet Explorer.\n\n46\n00:02:44,070 --> 00:02:47,140\nAnd so using Chrome is\nan alternative that you can use.\n\n47\n00:02:47,140 --> 00:02:51,800\nWell, that support to be able to use\nChrome, it was really only introduced in\n\n48\n00:02:51,800 --> 00:02:56,180\na mature state in 5.5 and\nit's still not the official platform.\n\n49\n00:02:56,180 --> 00:02:57,910\nThe official platform's Internet Explorer,\nso\n\n50\n00:02:57,910 --> 00:03:00,240\nthat's what I've been\nusing here in the show.\n\n51\n00:03:00,240 --> 00:03:03,540\nBut if you wanted that functionality,\nthat would be something\n\n52\n00:03:03,540 --> 00:03:07,260\nthat would push you to update\nvCenter to vCenter 5.5, all right?\n\n53\n00:03:07,260 --> 00:03:10,470\nOtherwise, you might choose\nto stay at vCenter 5.1 if\n\n54\n00:03:10,470 --> 00:03:12,570\nthat wasn't functionality you needed,\nright?\n\n55\n00:03:12,570 --> 00:03:16,670\nBut if there's a hotfix,\na security patch, something like that,\n\n56\n00:03:16,670 --> 00:03:18,830\nyou wanna deploy those right away.\n\n57\n00:03:18,830 --> 00:03:20,790\nSo how do we manage that?\n\n58\n00:03:20,790 --> 00:03:22,330\nWell, you can manage it by hand.\n\n59\n00:03:22,330 --> 00:03:24,270\nYou can do these things manually.\n\n60\n00:03:24,270 --> 00:03:27,330\nOr you can use the VMware update manager,\n\n61\n00:03:27,330 --> 00:03:29,020\nwhich makes life a little\nbit easier on us.\n\n62\n00:03:29,020 --> 00:03:30,610\nWe can handle the updates there.\n\n63\n00:03:30,610 --> 00:03:34,770\nNow, I find in real life land most\npeople are really good about keeping\n\n64\n00:03:34,770 --> 00:03:36,110\nvCenter up-to-date.\n\n65\n00:03:36,110 --> 00:03:38,990\nA new update comes out,\nyou just download it and install it.\n\n66\n00:03:38,990 --> 00:03:40,390\nIt keeps all the old settings and\n\n67\n00:03:40,390 --> 00:03:43,360\nit usually doesn't upgrade right\non top of the existing one.\n\n68\n00:03:43,360 --> 00:03:46,310\nIt's super simple and\npeople knock it out, right?\n\n69\n00:03:46,310 --> 00:03:48,080\nSo that usually gets done.\n\n70\n00:03:48,080 --> 00:03:50,880\nThe one thing that gets neglected is EXSi.\n\n71\n00:03:50,880 --> 00:03:54,440\nWe get these hypervisors, these bare\nmetal hypervisors that we never log into,\n\n72\n00:03:54,440 --> 00:03:55,560\nthat we never see.\n\n73\n00:03:55,560 --> 00:03:57,045\nWe see the VMs, right?\n\n74\n00:03:57,045 --> 00:03:58,365\nSo the VMs are getting updates.\n\n75\n00:03:58,365 --> 00:03:59,895\nSo maybe you're running Red Hat, and\n\n76\n00:03:59,895 --> 00:04:02,505\nit's pulling updates from\nthe Red Hat repositories.\n\n77\n00:04:02,505 --> 00:04:05,325\nYou got Windows pulling\nthem from Windows updates,\n\n78\n00:04:05,325 --> 00:04:08,835\nMac OS pulling them\nfrom the Apple updates.\n\n79\n00:04:08,835 --> 00:04:11,225\nSo you're getting your\nupdates from various places,\n\n80\n00:04:11,225 --> 00:04:12,915\neverything runs great, right?\n\n81\n00:04:12,915 --> 00:04:16,180\nBut the hypervisor underneath, we neglect.\n\n82\n00:04:16,180 --> 00:04:20,113\nIt is running a scaled-down version of\nLinux and you'd get your regular Linux\n\n83\n00:04:20,113 --> 00:04:23,043\nupdates that come out as\nsecurity exploits are detected.\n\n84\n00:04:23,043 --> 00:04:27,084\nAnd then, the VMware Hypervisor sitting on\ntop of that, you get updates for that too.\n\n85\n00:04:27,084 --> 00:04:29,603\nSo we need to make sure they get updated.\n\n86\n00:04:29,603 --> 00:04:33,858\nIn a single server environment, that can\nbe challenging cuz we've gotta take our\n\n87\n00:04:33,858 --> 00:04:37,360\nVMs offline to do our updates and\nreboot the host and so on.\n\n88\n00:04:37,360 --> 00:04:40,870\nBut in a multi-server environment,\nwe can actually make use of clustering and\n\n89\n00:04:40,870 --> 00:04:45,210\nother technologies to let us do updates\nwithout taking our VMs offline.\n\n90\n00:04:45,210 --> 00:04:47,740\nNow we're not gonna tackle\nclustering in this episode.\n\n91\n00:04:47,740 --> 00:04:51,530\nWe're gonna see that in a later episode\nas we get high availability set up.\n\n92\n00:04:51,530 --> 00:04:55,850\nBut I wanna walk you through the basic\nprocesses of doing an update, all right?\n\n93\n00:04:55,850 --> 00:04:59,800\nLet's start with the manual way,\nthe old school way, all right?\n\n94\n00:04:59,800 --> 00:05:02,560\nStep one, actually regardless\nof which method you follow,\n\n95\n00:05:02,560 --> 00:05:07,460\nstep one needs to be to verify that your\nupgrade path is supported, all right?\n\n96\n00:05:07,460 --> 00:05:10,970\nSo for example, I've got an ESX\nserver kicking around here.\n\n97\n00:05:10,970 --> 00:05:16,269\nThis guy.\nAnd it's running ESXi 5.0.0, all right?\n\n98\n00:05:16,269 --> 00:05:19,984\nSo it's running the older five deployment,\nor from the original vSphere 5.\n\n99\n00:05:19,984 --> 00:05:24,267\nAnd in this show,\nwe're using 5.5, all right?\n\n100\n00:05:24,267 --> 00:05:29,520\nNow, there was 5.0 and\nthen there was 5.1 and now there's 5.5.\n\n101\n00:05:29,520 --> 00:05:34,214\nWell, I know I can upgrade from 5.1 to\n5.5, that's the next successor, right?\n\n102\n00:05:34,214 --> 00:05:36,478\nBut can I skip 5.1?\n\n103\n00:05:36,478 --> 00:05:40,135\nCan I go from 5.0 straight\nto 5.5 if I want?\n\n104\n00:05:40,135 --> 00:05:41,412\nI don't know, right?\n\n105\n00:05:41,412 --> 00:05:45,452\nSo for that we need to double check and\nmake sure our upgrade path is supported.\n\n106\n00:05:45,452 --> 00:05:50,070\nVMware publishes all that information so\nyou know what you can upgrade.\n\n107\n00:05:50,070 --> 00:05:53,480\nSometimes you can go directly\nfrom one version to the next.\n\n108\n00:05:53,480 --> 00:05:55,580\nOther times you have to leapfrog.\n\n109\n00:05:55,580 --> 00:06:00,550\nI might have to upgrade to 5.1 first and\nthen upgrade to 5.5.\n\n110\n00:06:00,550 --> 00:06:05,590\nNow in a nice stable environment\nwhere you're doing your updates\n\n111\n00:06:05,590 --> 00:06:06,970\nyou probably will never skip a version.\n\n112\n00:06:06,970 --> 00:06:08,430\nYou'll go through each one.\n\n113\n00:06:08,430 --> 00:06:12,040\nBut if a new version comes out that\ndoesn't have anything you need you\n\n114\n00:06:12,040 --> 00:06:16,280\nmight opt to skip that one,\nto not do that update and just\n\n115\n00:06:16,280 --> 00:06:20,030\nwait because there wasn't anything you\nneeded, no sense in imposing down time.\n\n116\n00:06:20,030 --> 00:06:23,170\nSo skipping an update isn't\nnecessarily a bad thing.\n\n117\n00:06:23,170 --> 00:06:26,200\nIt just depends on your environment,\nall right?\n\n118\n00:06:26,200 --> 00:06:29,430\nSo how do I know if my\nupgrade path is supported?\n\n119\n00:06:29,430 --> 00:06:32,890\nWell, there's a knowledge-based article\nand I'll post this in the show notes,\n\n120\n00:06:32,890 --> 00:06:34,490\nthe link to this article.\n\n121\n00:06:34,490 --> 00:06:38,187\nAnd it'll have the methods for\nupgrading to ESXi 5.5.\n\n122\n00:06:38,187 --> 00:06:42,864\nEvery time a new version of ESX comes\nout they put out a new article like this\n\n123\n00:06:42,864 --> 00:06:45,896\nthat's updated to reflect\nthe upgrade paths.\n\n124\n00:06:45,896 --> 00:06:49,860\nAnd it will basically walk you through\nwith information for doing the upgrade.\n\n125\n00:06:49,860 --> 00:06:54,180\nNow, in this particular one,\nnotice it says this article does\n\n126\n00:06:54,180 --> 00:06:58,460\nnot include the steps for\nupgrading to ESXi 5.5.\n\n127\n00:06:58,460 --> 00:07:03,650\nFor more information about upgrading from\n3.x or 4.x, see this other document, okay?\n\n128\n00:07:04,720 --> 00:07:08,804\nSo they're telling me if I'm running\nsomething really old, like 3.x or 4.x,\n\n129\n00:07:08,804 --> 00:07:12,900\nthere's a special document that's gonna\nhave the best practices and instructions\n\n130\n00:07:12,900 --> 00:07:17,580\nfor getting there, and those are most\nlikely going to be a leapfrog, okay?\n\n131\n00:07:17,580 --> 00:07:20,610\nBut if I'm running 5.x,\nthat's not in this list.\n\n132\n00:07:20,610 --> 00:07:26,150\nSo 5.0, 5.1, for those I'll most likely\nbe able to do the Direct Update.\n\n133\n00:07:26,150 --> 00:07:28,890\nAnd then it goes through and\nexplains the methods for updating.\n\n134\n00:07:28,890 --> 00:07:31,410\nI can use the vSphere Update Manager.\n\n135\n00:07:31,410 --> 00:07:32,570\nThat's the automated way,\n\n136\n00:07:32,570 --> 00:07:36,480\nwhich is kinda nice way to do it\nif you've got a lot of servers.\n\n137\n00:07:36,480 --> 00:07:40,250\nOr, if you have a single server and\nyou just wanna do it manually,\n\n138\n00:07:40,250 --> 00:07:45,040\nyou can upgrade interactively by\nusing a DVD or the ISO image, right?\n\n139\n00:07:45,040 --> 00:07:48,230\nSo you can boot off the installation\nmedia and do the upgrade that way.\n\n140\n00:07:48,230 --> 00:07:50,276\nI wanna show you guys both ways today.\n\n141\n00:07:50,276 --> 00:07:53,742\nAll right, and then it's basically\nexplaining right here, update\n\n142\n00:07:53,742 --> 00:07:57,939\nmanager 5.x does not support upgrading\nhost to a later version, in other words.\n\n143\n00:07:57,939 --> 00:07:59,434\n4.0 to 4.1.\n\n144\n00:07:59,434 --> 00:08:04,136\nIt only supports upgrading\nfrom 4.x to 5.0.\n\n145\n00:08:04,136 --> 00:08:05,760\nAnd that actually includes 5.5.\n\n146\n00:08:05,760 --> 00:08:06,642\nIt goes on to say here.\n\n147\n00:08:06,642 --> 00:08:08,490\nIt's a little bit confusing.\n\n148\n00:08:08,490 --> 00:08:12,320\nBut they're basically laying out\nwhat they can do right here.\n\n149\n00:08:12,320 --> 00:08:16,150\nWhen you load up the update manager,\n\n150\n00:08:16,150 --> 00:08:22,190\nif you have it as the 5.5 version,\nit will upgrade other OS's to 5.5.\n\n151\n00:08:22,190 --> 00:08:25,790\nIt doesn't want to upgrade other\nESX versions to 5.0 or 5.1,\n\n152\n00:08:25,790 --> 00:08:28,870\nit wants to go to the latest version and\nthat's really what you should do.\n\n153\n00:08:28,870 --> 00:08:31,540\nYou don't normally want to\nupgrade to a older version.\n\n154\n00:08:31,540 --> 00:08:34,860\nAll right, and so\nthey kind of lay that information out and\n\n155\n00:08:34,860 --> 00:08:36,890\nthen down here they've\ngot our upgrade methods.\n\n156\n00:08:36,890 --> 00:08:41,850\nNow I'm talking about\nupgrading from 5.0 to 5.5 and\n\n157\n00:08:41,850 --> 00:08:44,770\nso it lists the methods that I can use.\n\n158\n00:08:44,770 --> 00:08:46,850\nAnd see how I can use\nthe Vesta update manager.\n\n159\n00:08:46,850 --> 00:08:50,930\nIt'll go 5.0 to 5.5 and\nI can do an interactive upgrade.\n\n160\n00:08:50,930 --> 00:08:52,950\nSo I can just use the CD.\n\n161\n00:08:52,950 --> 00:08:58,510\nIf I was going 4.0 to 5.5,\nI could use the update manager or\n\n162\n00:08:58,510 --> 00:09:01,250\nI could do the interactive boot,\nall right.\n\n163\n00:09:01,250 --> 00:09:06,566\nSo I can see that those models\nare supported but 3.x not on the list.\n\n164\n00:09:06,566 --> 00:09:09,790\nAll right, so 3.x is not going to\nbe able to be updated with 5.5,\n\n165\n00:09:09,790 --> 00:09:11,640\nI'll have to hit a leapfrog.\n\n166\n00:09:11,640 --> 00:09:15,830\nI'll have to hit an intermediary update\nfirst before going all the way up.\n\n167\n00:09:15,830 --> 00:09:17,050\nSo just keep that in mind.\n\n168\n00:09:17,050 --> 00:09:21,910\nMake sure you doublecheck these articles\nto see if your upgrade path is supported.\n\n169\n00:09:23,430 --> 00:09:25,170\nAll right, so in my case it is.\n\n170\n00:09:25,170 --> 00:09:29,830\nRight, i can go from 5.0 to 5.5 and I can\ndo it really whatever method I choose.\n\n171\n00:09:29,830 --> 00:09:31,940\nSo let's take a look\nat that manual method.\n\n172\n00:09:31,940 --> 00:09:36,690\nSo here's my server and\nit's just kind of sitting here at the,\n\n173\n00:09:36,690 --> 00:09:41,100\nthey call this the DCUI,\nthe direct console user interface.\n\n174\n00:09:41,100 --> 00:09:44,800\nIf you go to the physical console\nof the machine you see the DCUI,\n\n175\n00:09:44,800 --> 00:09:45,820\nand it's sitting here.\n\n176\n00:09:45,820 --> 00:09:52,210\nAnd it doesn't really show up on my\nscreen, but at the very bottom of this,\n\n177\n00:09:52,210 --> 00:09:55,770\nthere's actually two little entries,\none that says, F2 to manage, or\n\n178\n00:09:55,770 --> 00:09:59,200\nsomething like that, and then one\nthat says, F12 to reboot or restart.\n\n179\n00:09:59,200 --> 00:10:03,070\nSo there actually is a little bit of\ninteractivity you can do from this screen.\n\n180\n00:10:03,070 --> 00:10:06,060\nFor the most part, it's giving you\nthe IP address, so you can go and\n\n181\n00:10:06,060 --> 00:10:09,070\nuse the vSphere client or\nthe vSphere webclient to manage it.\n\n182\n00:10:09,070 --> 00:10:11,220\nThat's typically what we want.\n\n183\n00:10:11,220 --> 00:10:14,580\nIf I have just a single server,\nI might not have Vcenter.\n\n184\n00:10:14,580 --> 00:10:15,980\nI might not have that other stuff.\n\n185\n00:10:15,980 --> 00:10:18,050\nSo I wanna do some things from right here.\n\n186\n00:10:18,050 --> 00:10:22,290\nIf I'm doing an interactive update\nthat means that I'm at the machine and\n\n187\n00:10:22,290 --> 00:10:23,770\nI'm doing the update myself.\n\n188\n00:10:23,770 --> 00:10:30,210\nSo, I go and I get my ESXi 5.5\ninstall CD and I pop it in the drive.\n\n189\n00:10:30,210 --> 00:10:32,070\nI've already done that.\n\n190\n00:10:32,070 --> 00:10:36,640\nThen I'll just hit F12 here and\nauthenticate And\n\n191\n00:10:36,640 --> 00:10:39,420\nI'm gonna tell it that I want to restart,\nokay.\n\n192\n00:10:39,420 --> 00:10:40,880\nSo I'm gonna go ahead and\nrestart the machine,\n\n193\n00:10:40,880 --> 00:10:45,400\nand when it reboots it's gonna\nboot from the CD drive, all right.\n\n194\n00:10:45,400 --> 00:10:48,310\nNow when it boots from the install\nmedia it's gonna give me two choices.\n\n195\n00:10:48,310 --> 00:10:51,220\nOne choice is to install ESX, and\n\n196\n00:10:51,220 --> 00:10:53,660\nthe other choice is to boot\nfrom the local hard drives.\n\n197\n00:10:53,660 --> 00:10:55,260\nIf I choose to boot from\nthe local hard drives,\n\n198\n00:10:55,260 --> 00:10:58,690\nit's just gonna boot up into 5.0 again and\nI didn't upgrade.\n\n199\n00:10:58,690 --> 00:11:01,510\nBut if I choose install, it's gonna walk\n\n200\n00:11:01,510 --> 00:11:06,080\nme through an almost identical process\nto when we installed ESX originally.\n\n201\n00:11:06,080 --> 00:11:08,900\nSo we installed it in yesterday's shows.\n\n202\n00:11:08,900 --> 00:11:10,940\nIt'll be the same basic process.\n\n203\n00:11:10,940 --> 00:11:14,890\nThe difference will be when\nit looks at the hard drives,\n\n204\n00:11:14,890 --> 00:11:19,140\nit's gonna see that there's already\na version of ESX on the hard drive.\n\n205\n00:11:19,140 --> 00:11:20,178\nHere we go.\n\n206\n00:11:20,178 --> 00:11:23,360\nSo I'm gonna tell it that I want\nto launch the standard installer.\n\n207\n00:11:23,360 --> 00:11:26,860\nAnd when it asks me to pick a hard drive,\nit's gonna see there's already an install\n\n208\n00:11:26,860 --> 00:11:31,200\nthere, and it's going to switch\nfrom just installing to upgrading.\n\n209\n00:11:31,200 --> 00:11:34,582\nAnd when it does the upgrade\nit'll put the new OS on there and\n\n210\n00:11:34,582 --> 00:11:38,870\nit will retain all of our settings,\nall of our configuration settings,\n\n211\n00:11:38,870 --> 00:11:43,360\nour IP addresses, users, passwords,\nvirtual machines, data stores,\n\n212\n00:11:43,360 --> 00:11:47,310\nall that stuff that we might have\ncreated would be retained, all right.\n\n213\n00:11:47,310 --> 00:11:52,990\nSo it just upgrades us to 5.5 and\nthen reboots and we're in business.\n\n214\n00:11:52,990 --> 00:11:56,950\nNow there are a few things we need to be\naware of during the upgrade, all right.\n\n215\n00:11:56,950 --> 00:12:02,120\nIf we're coming from an older\nversion of VMware like 4.x or 3.x.\n\n216\n00:12:02,120 --> 00:12:06,370\nThey used a different file\nsystem than we use in EXX5.\n\n217\n00:12:06,370 --> 00:12:11,231\nSo, you have what's called the VMFS,\nthe Virtual Machine File System.\n\n218\n00:12:11,231 --> 00:12:13,410\n[LAUGH] VMFS.\n\n219\n00:12:13,410 --> 00:12:18,580\nI don't know why I'm having\nsuch a hard time saying that.\n\n220\n00:12:18,580 --> 00:12:19,450\nYou've used VMFS 3.\n\n221\n00:12:19,450 --> 00:12:22,057\nThis is almost comical.\n\n222\n00:12:22,057 --> 00:12:27,325\nVMFS 3 in ESX3 and\nfour and now we have VMFS\n\n223\n00:12:27,325 --> 00:12:32,480\n5, so when we do the upgrade it's gonna\nask us what we wanna do about that.\n\n224\n00:12:32,480 --> 00:12:34,620\nAll right, and\nit's gonna give us three choices and\n\n225\n00:12:34,620 --> 00:12:36,620\nwe'll see if I can remember them off hand.\n\n226\n00:12:36,620 --> 00:12:42,810\nOne choice is to upgrade from VMFS 3 to\nVMFS 5, and usually that's what we want.\n\n227\n00:12:42,810 --> 00:12:44,370\nThe problem is if you do that upgrade,\n\n228\n00:12:44,370 --> 00:12:47,530\nit removes your ability to do\na proper rollback if you want to\n\n229\n00:12:47,530 --> 00:12:51,400\nroll back the update it's hard because\nthe file system has already been updated.\n\n230\n00:12:51,400 --> 00:12:57,080\nAnother choice is to not update and\njust leave it at VMFS 3.\n\n231\n00:12:57,080 --> 00:13:04,650\nYou can be on an ESXI 5.5 server, and\nstill have a VMFS 3 file store, all right.\n\n232\n00:13:04,650 --> 00:13:06,910\nSo you can go that route if you need to,\n\n233\n00:13:06,910 --> 00:13:10,790\nespecially if you wanna make it\neasier to rollback, you can do that.\n\n234\n00:13:10,790 --> 00:13:14,610\nAnd you can always update\nthe VMFS at a later date too, so\n\n235\n00:13:14,610 --> 00:13:17,400\nyou don't have to do it right\nnow if you don't want to.\n\n236\n00:13:17,400 --> 00:13:22,680\nAnd then lastly, there's an option that\nsays to create an all new data store.\n\n237\n00:13:22,680 --> 00:13:25,080\nYou don't normally want to do that\ncuz you'll lose your VMs, right.\n\n238\n00:13:25,080 --> 00:13:26,850\nYour VMs are in the data store.\n\n239\n00:13:26,850 --> 00:13:28,630\nWell, typically, not always.\n\n240\n00:13:28,630 --> 00:13:31,400\nYou might have your VMs stored\non a SAN somewhere else so\n\n241\n00:13:31,400 --> 00:13:34,490\nyou may lose data if\nyou choose that option.\n\n242\n00:13:34,490 --> 00:13:36,880\nSo you just have to be careful with that,\nalright?\n\n243\n00:13:36,880 --> 00:13:41,280\nSo, that'll be the really only hard\nchoice we have to make during the update.\n\n244\n00:13:41,280 --> 00:13:43,430\nThe rest of the process\nis pretty much automatic.\n\n245\n00:13:43,430 --> 00:13:44,960\nIt's going to copy over the files.\n\n246\n00:13:44,960 --> 00:13:45,810\nThe system will reboot.\n\n247\n00:13:45,810 --> 00:13:48,450\nAnd then we'll be running ESXI 5.5.\n\n248\n00:13:48,450 --> 00:13:52,008\nAll right, well,\nwhile we're waiting on that.\n\n249\n00:13:52,008 --> 00:13:57,108\n[COUGH] Let me just bring up,\nI didn't get it before the show but\n\n250\n00:13:57,108 --> 00:14:02,993\nthere is a article on VMware's site\nwhere they talk about, here we go,\n\n251\n00:14:02,993 --> 00:14:09,850\nthe differences between VMFS 5 and\nVMFS 3, so why you might want to upgrade.\n\n252\n00:14:09,850 --> 00:14:12,690\nHere's the number one reason\nright here support of\n\n253\n00:14:12,690 --> 00:14:17,588\ngreater than two terabyte storage\ndevices each VFMS extent.\n\n254\n00:14:17,588 --> 00:14:22,200\nIn VFMS 3, you're really limited to\ncreating slices out of it that are two\n\n255\n00:14:22,200 --> 00:14:25,820\nterabytes in size and\nif you want something larger than that,\n\n256\n00:14:25,820 --> 00:14:29,060\nwell you actually have to do multiple\nones and then string them together.\n\n257\n00:14:29,060 --> 00:14:32,930\nBut in VMFS 5,\nwe can do larger extents, and\n\n258\n00:14:32,930 --> 00:14:35,410\nthat's the main thing that\nwe want to have with that.\n\n259\n00:14:35,410 --> 00:14:38,630\nSo the other features in here are nice,\nbut\n\n260\n00:14:38,630 --> 00:14:40,960\nthey're not things that a lot\nof us are screaming for.\n\n261\n00:14:40,960 --> 00:14:44,181\nBut that larger partition size,\nthat's really the important piece.\n\n262\n00:14:46,726 --> 00:14:48,585\nAll right, we'll see how we're doing here.\n\n263\n00:14:48,585 --> 00:14:52,233\nOkay, so now this screen is identical\nto the installation screen that we saw\n\n264\n00:14:52,233 --> 00:14:55,710\nyesterday, it's just telling us that\nit's going to do an install, and\n\n265\n00:14:55,710 --> 00:14:57,655\nI need to accept the license agreement.\n\n266\n00:14:57,655 --> 00:15:01,882\nNow it's scanning for available devices,\nit should find my hard drives.\n\n267\n00:15:01,882 --> 00:15:05,584\nAnd when I pick the hard drive it's\ngoing to scan that drive, there it is,\n\n268\n00:15:05,584 --> 00:15:07,689\nseeing my hard drive, and I'll pick it.\n\n269\n00:15:08,690 --> 00:15:09,680\nAnd now, see how it says,\n\n270\n00:15:09,680 --> 00:15:12,350\ngathering additional information\nfrom the selected device?\n\n271\n00:15:12,350 --> 00:15:16,600\nIt's looking to see if there's a current\ninstallation of ESXi on there.\n\n272\n00:15:16,600 --> 00:15:17,750\nIt's looking for other things, too.\n\n273\n00:15:17,750 --> 00:15:20,740\nBut the one that I care about\nis that previous installation.\n\n274\n00:15:20,740 --> 00:15:24,610\nSo it's gonna see if it can find that,\nand hopefully it does.\n\n275\n00:15:24,610 --> 00:15:28,240\nIf it's an unsupported version,\nI'll get an error warning me about that.\n\n276\n00:15:28,240 --> 00:15:30,380\nIf it's a supported version,\nit's not really gonna warn me at all.\n\n277\n00:15:30,380 --> 00:15:32,340\nIt's just gonna tell me that it found it.\n\n278\n00:15:32,340 --> 00:15:33,760\nAnd ask me what it wants to do.\n\n279\n00:15:33,760 --> 00:15:34,290\nAnd here it is.\n\n280\n00:15:34,290 --> 00:15:36,550\nHere's those three choices\nI was talking about.\n\n281\n00:15:36,550 --> 00:15:41,940\nWe can upgrade ESXi and\npreserve the VMFS data store, all right?\n\n282\n00:15:41,940 --> 00:15:45,780\nThat's gonna upgrade us\nto 5.5 like we want.\n\n283\n00:15:45,780 --> 00:15:49,663\nWe can install ESXi and\npreserve the VMFS data store.\n\n284\n00:15:49,663 --> 00:15:50,578\nNow what does that mean?\n\n285\n00:15:50,578 --> 00:15:53,226\nWell, that means we're gonna\ninstall the new 5.5 but\n\n286\n00:15:53,226 --> 00:15:55,170\nwe're not gonna maintain our settings.\n\n287\n00:15:55,170 --> 00:15:57,091\nBut the data store will be preserved,\n\n288\n00:15:57,091 --> 00:16:00,460\nwhich means all of our virtual\nmachines will be there.\n\n289\n00:16:00,460 --> 00:16:04,410\nAnd then we can insert ESXI and\noverwrite the VMFS store,\n\n290\n00:16:04,410 --> 00:16:07,950\nwhich is going to wipe everything out and\nbasically give us a new install.\n\n291\n00:16:07,950 --> 00:16:11,010\nSo, I'm going to choose to upgrade,\nthat's the one that I want to do.\n\n292\n00:16:13,130 --> 00:16:14,610\nAnd we'll move forward on that.\n\n293\n00:16:14,610 --> 00:16:18,220\nAnd now it's just checking to make\nsure that the upgrade is possible.\n\n294\n00:16:18,220 --> 00:16:19,100\nRight.\nJust because\n\n295\n00:16:19,100 --> 00:16:21,690\nit found the OS didn't necessarily\nmean the upgrade was possible.\n\n296\n00:16:21,690 --> 00:16:24,460\nSo it's just double checking that,\ngathering additional information.\n\n297\n00:16:24,460 --> 00:16:27,250\nIt's looking for\nthings that we might have changed or\n\n298\n00:16:27,250 --> 00:16:29,630\nmodified that might stop the update.\n\n299\n00:16:29,630 --> 00:16:32,750\nSo it's just double checking to make\nsure that that's gonna be fine.\n\n300\n00:16:32,750 --> 00:16:34,060\nAnd then it'll progress.\n\n301\n00:16:34,060 --> 00:16:36,900\nIt's not terribly exciting\nbeyond this point.\n\n302\n00:16:36,900 --> 00:16:38,750\nIt's just copying the files.\n\n303\n00:16:38,750 --> 00:16:40,130\nAnd then it reboots and\nyou're running 5.5.\n\n304\n00:16:40,130 --> 00:16:42,500\nSo that's basically what happens.\n\n305\n00:16:42,500 --> 00:16:43,220\nI'll give it just a moment.\n\n306\n00:16:43,220 --> 00:16:46,380\nBut if it takes too long, I'll move\non to the other upgrade scenario.\n\n307\n00:16:48,060 --> 00:16:50,040\nIt is no fun staring at the screen.\n\n308\n00:16:50,040 --> 00:16:52,430\nBut yeah, so\nit's just checking that system.\n\n309\n00:16:52,430 --> 00:16:54,350\nShould be fine, should do the upgrade.\n\n310\n00:16:54,350 --> 00:16:56,930\nNow I am running this on\nVirtual Box right now.\n\n311\n00:16:56,930 --> 00:17:00,380\nSo it is gonna give me a warning about\nhardware virtualization support.\n\n312\n00:17:00,380 --> 00:17:03,060\nYou won't see that in\na production environment.\n\n313\n00:17:03,060 --> 00:17:04,940\nSo yeah there it is, so\nhardware virtualization support,\n\n314\n00:17:04,940 --> 00:17:07,610\nthere's my warning,\nI'll just it enter to continue.\n\n315\n00:17:07,610 --> 00:17:11,450\nIt's got everything that it needs so it's\nready to do the upgrade and there it goes.\n\n316\n00:17:11,450 --> 00:17:15,600\nSo now it's just copying over\nthose files to put is in place.\n\n317\n00:17:15,600 --> 00:17:18,480\nNow, if we have an issue,\nyou can rollback but\n\n318\n00:17:18,480 --> 00:17:21,340\ntypically this usually goes without issue.\n\n319\n00:17:21,340 --> 00:17:24,290\nI can't think of a single time\nthat I've had to rollback\n\n320\n00:17:24,290 --> 00:17:26,130\nbecause of an issue that\nstopped the update.\n\n321\n00:17:26,130 --> 00:17:30,600\nSo that is the interactive\nupdate process right there.\n\n322\n00:17:30,600 --> 00:17:33,180\nIt's interactive cuz I had to sit down and\ndo it.\n\n323\n00:17:33,180 --> 00:17:35,300\nAnd on a single machine, that's fine.\n\n324\n00:17:35,300 --> 00:17:36,450\nIt's not a big deal.\n\n325\n00:17:36,450 --> 00:17:38,450\nA single machine that you've\ngot physical access to,\n\n326\n00:17:38,450 --> 00:17:42,450\nyou can just walk right over,\nknock this out, no big deal, all right.\n\n327\n00:17:42,450 --> 00:17:45,610\nBut what if you've got\nhundreds of machines,\n\n328\n00:17:45,610 --> 00:17:48,180\nor thousands of machines of hosts, right?\n\n329\n00:17:48,180 --> 00:17:51,070\nYou don't wanna have to go to each\none of those and do the updates.\n\n330\n00:17:51,070 --> 00:17:53,910\nSo an automated process is preferred.\n\n331\n00:17:53,910 --> 00:17:57,000\nThe other thing is this is for\na full on upgrade.\n\n332\n00:17:57,000 --> 00:17:59,010\nI'm moving from one version to another.\n\n333\n00:17:59,010 --> 00:18:01,850\nWhat if we use hot fixes and\nsecurity patches?\n\n334\n00:18:01,850 --> 00:18:05,730\nWell, I don't want it to go to each and\nevery ESX host.\n\n335\n00:18:05,730 --> 00:18:07,750\nEvery time I want to\npush out an update,right,\n\n336\n00:18:07,750 --> 00:18:10,820\nyou want to have that centrally managed.\n\n337\n00:18:10,820 --> 00:18:13,320\nAnd that's when the vsphere\nupdate manager comes in handy.\n\n338\n00:18:13,320 --> 00:18:15,960\nSo we're going to take\na look at that next.\n\n339\n00:18:15,960 --> 00:18:20,490\nNow the vmware update manager,\nthe vSphere Update Manager.\n\n340\n00:18:20,490 --> 00:18:22,910\nIt's actually made up of\ntwo different pieces.\n\n341\n00:18:22,910 --> 00:18:23,430\nLet me show you.\n\n342\n00:18:23,430 --> 00:18:26,600\nI'm gonna jump over to our server\nthat we were using yesterday.\n\n343\n00:18:26,600 --> 00:18:28,450\nSo here's my vCenter Server.\n\n344\n00:18:29,850 --> 00:18:35,128\nWhen we installed vCenter Server,\nlet me just go back to my installation\n\n345\n00:18:35,128 --> 00:18:39,653\nmedia here, All right.\n\n346\n00:18:39,653 --> 00:18:44,501\nWhen we installed vCenter server,\nwe fired up the installer and\n\n347\n00:18:44,501 --> 00:18:47,440\nwe got this screen right here.\n\n348\n00:18:47,440 --> 00:18:49,060\nAnd I just did a simple install.\n\n349\n00:18:49,060 --> 00:18:52,670\nI installed all four of the components\nright here on one system.\n\n350\n00:18:52,670 --> 00:18:53,360\nAll right.\n\n351\n00:18:53,360 --> 00:18:57,160\nBut I mentioned that there was\nother stuff packaged on the CD.\n\n352\n00:18:57,160 --> 00:19:02,160\nAnd you can see it right down here as you\nstart to look down, you'll see the V spear\n\n353\n00:19:02,160 --> 00:19:07,852\nupdate manager is right here, and\nthe host agent pre upgrade checker.\n\n354\n00:19:07,852 --> 00:19:08,850\nAll right.\n\n355\n00:19:08,850 --> 00:19:10,190\nSo what are these tools,\n\n356\n00:19:10,190 --> 00:19:15,290\nwell the V spear update manager,\nit is a fully featured update suite.\n\n357\n00:19:15,290 --> 00:19:17,930\nThat allows you to create\nbaselines of updates so\n\n358\n00:19:17,930 --> 00:19:23,120\nyou actually choose to approve or\ndisapprove, decline, reject, whatever.\n\n359\n00:19:23,120 --> 00:19:27,210\nWhat updates you want to push out and\nwhat updates you don't want to push out.\n\n360\n00:19:27,210 --> 00:19:30,310\nRight.\nSo you control when updates go out.\n\n361\n00:19:30,310 --> 00:19:34,540\nThen, it can reach out to your\nvarious hosts and deploy the updates.\n\n362\n00:19:34,540 --> 00:19:35,500\nYou can create groups.\n\n363\n00:19:35,500 --> 00:19:36,650\nYou can separate them.\n\n364\n00:19:36,650 --> 00:19:37,940\nSo you might have your test and\n\n365\n00:19:37,940 --> 00:19:40,320\ndevelopment servers you push\nupdates out to right away.\n\n366\n00:19:40,320 --> 00:19:43,190\nAnd then you have your production\nservers that you wait and\n\n367\n00:19:43,190 --> 00:19:45,470\ndeploy only after testing is successful.\n\n368\n00:19:45,470 --> 00:19:46,530\nSo it allows you to do that.\n\n369\n00:19:46,530 --> 00:19:47,990\nYou can divide things up.\n\n370\n00:19:47,990 --> 00:19:50,710\nAnd it'll do hot fixes and patches.\n\n371\n00:19:50,710 --> 00:19:53,010\nIt'll also do full-on upgrades.\n\n372\n00:19:53,010 --> 00:19:56,566\nSo upgrading from 5.0 to 5.5,\nor 5.1 to 5.5.\n\n373\n00:19:56,566 --> 00:19:58,840\nIt'll do that for you.\n\n374\n00:19:58,840 --> 00:20:02,150\nSo great way to handle that when\nyou've got multiple machines.\n\n375\n00:20:03,430 --> 00:20:06,780\nThe host agent pre-upgrade\nchecker,all right?\n\n376\n00:20:06,780 --> 00:20:10,210\nThat website that was\nshowing the upgrade paths.\n\n377\n00:20:10,210 --> 00:20:11,720\nIt's pretty confusing, isn't it?\n\n378\n00:20:11,720 --> 00:20:12,700\nAs you read through it,\n\n379\n00:20:12,700 --> 00:20:15,700\nthere's even contradictions\nright there in the same page.\n\n380\n00:20:15,700 --> 00:20:19,515\nSo, it gets kind of challenging sometimes,\nto know if your upgrade path is supported.\n\n381\n00:20:19,515 --> 00:20:22,325\nSo this software figures it out for you.\n\n382\n00:20:22,325 --> 00:20:23,845\nNow it does something really nice.\n\n383\n00:20:23,845 --> 00:20:26,635\nIt goes a step beyond just\nchecking the version numbers.\n\n384\n00:20:26,635 --> 00:20:29,405\nIt actually looks at your plugins and\nextensions,\n\n385\n00:20:29,405 --> 00:20:33,787\nthings that you've added on to VM Ware to\nsee if any of them might be a problem.\n\n386\n00:20:33,787 --> 00:20:38,137\nSee if they might be incompatible, and if\nthey are it'll even offer to disable some\n\n387\n00:20:38,137 --> 00:20:41,387\nof them so that you can do the update and\nthen re-enable them afterwards.\n\n388\n00:20:41,387 --> 00:20:43,937\nSo it's a great tool for doing that.\n\n389\n00:20:43,937 --> 00:20:47,207\nNow the host agent pre-upgrade checker,\nit's just a wizard.\n\n390\n00:20:47,207 --> 00:20:50,147\nYou run it right here,\nfrom the installation media from vCenter.\n\n391\n00:20:50,147 --> 00:20:51,737\nIt just runs and it does its job.\n\n392\n00:20:51,737 --> 00:20:53,867\nIt doesn't have to be\ninstalled on a machine.\n\n393\n00:20:54,947 --> 00:20:58,560\nThe Update Manager, on the other hand,\nit does need to be installed.\n\n394\n00:20:59,640 --> 00:21:04,500\nIt is a fully featured software suite,\nso it's got a little web server,\n\n395\n00:21:04,500 --> 00:21:07,870\nit's go a database,\njust like we saw with vCenter yesterday.\n\n396\n00:21:07,870 --> 00:21:12,750\nIt's got it's own database, and\nas a result, in large environments,\n\n397\n00:21:12,750 --> 00:21:16,290\nyou'll probably want to run the update\nmanager from its own server,\n\n398\n00:21:16,290 --> 00:21:18,970\nfrom its own system or\nvirtual machine at least.\n\n399\n00:21:18,970 --> 00:21:19,650\nAll right?\n\n400\n00:21:19,650 --> 00:21:21,730\nIn a small environment like mine,\n\n401\n00:21:21,730 --> 00:21:24,400\nyou can run it from the same server\nas all these other components.\n\n402\n00:21:24,400 --> 00:21:26,140\nIt'll run fine without conflict.\n\n403\n00:21:26,140 --> 00:21:26,770\nAll right.\n\n404\n00:21:26,770 --> 00:21:29,820\nBut the larger your environment is,\nthe more resources it's gonna take.\n\n405\n00:21:29,820 --> 00:21:32,293\nAnd you'll probably want to split\nthat out to a separate box.\n\n406\n00:21:32,293 --> 00:21:33,370\nAll right?\n\n407\n00:21:33,370 --> 00:21:35,120\nInstalling it is real simple.\n\n408\n00:21:35,120 --> 00:21:37,760\nAnd I don't wanna bore\nus too much with that.\n\n409\n00:21:37,760 --> 00:21:41,960\nBasically when you launch the installer,\nyou just run through a handful of steps.\n\n410\n00:21:41,960 --> 00:21:45,510\nI've already got it installed on here so\nit's probably gonna complain about that.\n\n411\n00:21:45,510 --> 00:21:48,950\nBut basically you run through a handful\nof steps, just hitting next, next, next.\n\n412\n00:21:48,950 --> 00:21:52,090\nYou pick an installation path and\nyou pick a database.\n\n413\n00:21:52,090 --> 00:21:55,050\nThe database is the only real\nchoice you have to make.\n\n414\n00:21:55,050 --> 00:21:58,830\nIt will support connecting\nto a Microsoft SQL or\n\n415\n00:21:58,830 --> 00:22:01,070\nOracle database to be\nable to store its data.\n\n416\n00:22:02,110 --> 00:22:06,470\nOr it can install Microsoft SQL Server\n2008 Express, the free version.\n\n417\n00:22:06,470 --> 00:22:09,350\nSo if you're gonna be\nmanaging less than 50 VMs or\n\n418\n00:22:09,350 --> 00:22:11,650\nfive hosts, then you can do that.\n\n419\n00:22:11,650 --> 00:22:13,840\nAnd you don't need to set up\nyour own database server.\n\n420\n00:22:13,840 --> 00:22:14,350\nAll right?\n\n421\n00:22:14,350 --> 00:22:16,830\nBut larger environments, you'll probably\nwanna set up your own database server.\n\n422\n00:22:18,030 --> 00:22:19,210\nThe other thing to keep in mind.\n\n423\n00:22:19,210 --> 00:22:21,400\nJust a little word of warning.\n\n424\n00:22:22,400 --> 00:22:24,210\nWhen you do the install.\n\n425\n00:22:24,210 --> 00:22:25,080\nIf you tell it, yeah.\n\n426\n00:22:25,080 --> 00:22:26,900\nI've already got a database server.\n\n427\n00:22:26,900 --> 00:22:30,510\nDon't point it at the same\ndatabase that vCenter uses.\n\n428\n00:22:30,510 --> 00:22:32,020\nIt can be the same server.\n\n429\n00:22:32,020 --> 00:22:33,650\nBut it needs to be\na separate database,right?\n\n430\n00:22:33,650 --> 00:22:36,170\nAnd it's going to try and\ncreate that on its own.\n\n431\n00:22:36,170 --> 00:22:40,060\nSo it does maintain it own separate\ndatabase from the vCenter database and\n\n432\n00:22:40,060 --> 00:22:42,630\nthey can be on the same server,\nthey can be on separate servers,\n\n433\n00:22:42,630 --> 00:22:43,710\nit's really flexible.\n\n434\n00:22:43,710 --> 00:22:47,590\nBut just be careful that you don't\noverwrite an existing database thinking\n\n435\n00:22:47,590 --> 00:22:48,390\nthey'll share.\n\n436\n00:22:48,390 --> 00:22:50,780\nThey won't share the same database.\n\n437\n00:22:50,780 --> 00:22:51,500\nAlright.\n\n438\n00:22:51,500 --> 00:22:53,710\nSo the, like I said,\nthe install's pretty straight forward.\n\n439\n00:22:53,710 --> 00:22:56,070\nSince I've already got it installed\nit's going to try to move it, so\n\n440\n00:22:56,070 --> 00:22:57,520\nI'm just going to cancel that.\n\n441\n00:22:57,520 --> 00:22:59,970\nBut the database choice is the only\none that you really have to make.\n\n442\n00:23:01,520 --> 00:23:03,580\nThe host isn't pre upgrade\nchecker on the other hand,\n\n443\n00:23:03,580 --> 00:23:06,430\nyou don't really install it at all,\nyou just run it.\n\n444\n00:23:06,430 --> 00:23:11,480\nAnd so when we choose install and\nit launches, it's going to fire up and\n\n445\n00:23:11,480 --> 00:23:15,690\nit's gonna let us analyze\nthe hosts in our network and\n\n446\n00:23:15,690 --> 00:23:18,110\ndetermine whether there's\nan upgrade available.\n\n447\n00:23:18,110 --> 00:23:22,580\nSo let's do this, I'll walk us through the\nHost Agent Pre-Upgrade Checker first and\n\n448\n00:23:22,580 --> 00:23:25,710\nthen maybe we'll stop and take a break and\nafter that we'll take a look at\n\n449\n00:23:25,710 --> 00:23:28,770\nthe vSphere Update Manager and\nsee how it functions.\n\n450\n00:23:28,770 --> 00:23:30,600\nBut this guy's pretty straightforward.\n\n451\n00:23:30,600 --> 00:23:35,210\nBecause I have the vCenter 5.5 disk,\nit's going to be looking at my systems and\n\n452\n00:23:35,210 --> 00:23:38,000\nlooking whether or\nnot they can take an update to 5.5.\n\n453\n00:23:38,000 --> 00:23:42,824\nNow, most of my systems are already at 5.5\nbut I do have another one that's sitting\n\n454\n00:23:42,824 --> 00:23:47,124\nthere at 5.0 and it'll find that and\nlet me know if an update is possible.\n\n455\n00:23:47,124 --> 00:23:49,245\nSo, I'm gonna go ahead and hit next and\n\n456\n00:23:49,245 --> 00:23:52,151\nits going to ask me what\ndatabase I want to connect to.\n\n457\n00:23:52,151 --> 00:23:54,531\nNow, What database is it talking about?\n\n458\n00:23:54,531 --> 00:23:57,870\nIt is talking about my vCenter database,\nall right?\n\n459\n00:23:57,870 --> 00:24:01,780\nAnd so you will have a DSN for\nthat, a data source name, and so\n\n460\n00:24:01,780 --> 00:24:03,670\nyou'll see it's already found it here for\nme.\n\n461\n00:24:03,670 --> 00:24:08,600\nI've got my VMware, vCenter Database and\nI've got my vSphere update manager\n\n462\n00:24:08,600 --> 00:24:11,890\ndatabase, cuz I'm running them\nboth here on the same system.\n\n463\n00:24:11,890 --> 00:24:14,570\nWe want the VMware vCenter database.\n\n464\n00:24:14,570 --> 00:24:20,010\nThe upgrade checker,\nit's not dependent on the update manager.\n\n465\n00:24:20,010 --> 00:24:21,890\nSo we don't point that way,\nwe point to vCenter.\n\n466\n00:24:21,890 --> 00:24:25,100\nIt's just trying to find the hosts that\nare out there, that's really all it needs.\n\n467\n00:24:25,100 --> 00:24:27,210\nAnd in fact,\nyou don't even have to choose that.\n\n468\n00:24:27,210 --> 00:24:30,180\nIf down here you tell it to use\nyour VirtualCenter Credentials,\n\n469\n00:24:30,180 --> 00:24:31,710\nsee how it grayed all that out?\n\n470\n00:24:31,710 --> 00:24:34,730\nNow it knows, I wanna reach out\nto VirtualCenter, all right?\n\n471\n00:24:34,730 --> 00:24:37,300\nAnd, it'll use whatever credentials\nI use against VirtualCenter.\n\n472\n00:24:37,300 --> 00:24:39,440\nSee, it's already populated my name, too.\n\n473\n00:24:39,440 --> 00:24:41,590\nWe set up Active Directory integration, so\n\n474\n00:24:41,590 --> 00:24:44,500\nit's showing Lab/Don,\nthat's my AD account.\n\n475\n00:24:44,500 --> 00:24:46,440\nBut, that's what I'm using\nto log into vCenter.\n\n476\n00:24:46,440 --> 00:24:47,640\nAnd so it's happy with that.\n\n477\n00:24:47,640 --> 00:24:49,340\nAnd we don't have to worry\nabout the database at all.\n\n478\n00:24:52,220 --> 00:24:54,580\nAll right,\nthen it's gonna ask what we're doing.\n\n479\n00:24:54,580 --> 00:24:59,180\nThe standard mode is to\nscan all of our hosts and\n\n480\n00:24:59,180 --> 00:25:02,390\ndetermine, whether or\nnot they're ready for an upgrade.\n\n481\n00:25:02,390 --> 00:25:06,760\nOr whether they're compatible, whether\nit's other issues, and just analyze them.\n\n482\n00:25:06,760 --> 00:25:10,570\nSo, I can scan my whole environment, but\nI know the bulk of my servers are already\n\n483\n00:25:10,570 --> 00:25:13,430\nat 5.5, so it can be a waste\nof time to scan them all.\n\n484\n00:25:13,430 --> 00:25:15,760\nSo, you can choose custom mode, and\n\n485\n00:25:15,760 --> 00:25:18,600\nthat'll add the option to pick\nwhich host you wanna scan.\n\n486\n00:25:18,600 --> 00:25:21,940\nThat's the only thing that it adds,\nit's not really super custom.\n\n487\n00:25:21,940 --> 00:25:25,370\nAnd so, on the next screen, it parses.\n\n488\n00:25:25,370 --> 00:25:28,010\nAll the servers from vCenter\ndisplay on the screen, and\n\n489\n00:25:28,010 --> 00:25:32,210\nlet's me pick who it is I wanna scan.\n\n490\n00:25:32,210 --> 00:25:33,785\nAnd I'm gonna scan this guy right here.\n\n491\n00:25:33,785 --> 00:25:36,140\nESXserver2.lab.itpro.tv.\n\n492\n00:25:36,140 --> 00:25:41,140\nYou can see here that it's running 5.0,\nall of the other guys are running 5.5.\n\n493\n00:25:41,140 --> 00:25:45,560\nI guess I could go ahead and,\nhere, I'll scan server 3.\n\n494\n00:25:45,560 --> 00:25:47,780\nAll right, so I'll scan these two guys.\n\n495\n00:25:47,780 --> 00:25:50,440\nJust to see what's up, all right?\n\n496\n00:25:50,440 --> 00:25:53,220\nAnd when I hit Next,\nit's gonna run the scan.\n\n497\n00:25:53,220 --> 00:25:55,460\nI'll hit Run Pre Check and\nit's gonna take a look.\n\n498\n00:25:55,460 --> 00:26:00,610\nNow, when it runs these tests,\nit doesn't change anything on the servers.\n\n499\n00:26:00,610 --> 00:26:03,580\nSo, you could run these during\nproduction hours if you want.\n\n500\n00:26:03,580 --> 00:26:04,920\nIt doesn't create a performance load.\n\n501\n00:26:04,920 --> 00:26:07,370\nIt's really just collecting information.\n\n502\n00:26:07,370 --> 00:26:10,200\nIt's looking for\nversion numbers and libraries, and\n\n503\n00:26:10,200 --> 00:26:11,780\nother things that are installed.\n\n504\n00:26:11,780 --> 00:26:16,150\nIt also doesn't take very long unless\nyou're scanning a ton of hosts, and\n\n505\n00:26:16,150 --> 00:26:18,710\nwhen it's done, on the next page.\n\n506\n00:26:18,710 --> 00:26:23,730\nWe'll see whether we pass or fail for\ndoing the update, and it's the update,\n\n507\n00:26:23,730 --> 00:26:27,490\nthe 5.5 here that it's talking about,\nbecause I'm using the 5.5 media.\n\n508\n00:26:27,490 --> 00:26:29,130\nI could see both of my servers pass.\n\n509\n00:26:29,130 --> 00:26:32,860\nNow, I knew server 3 was going to pass,\nbecause it's already at 5.5.\n\n510\n00:26:32,860 --> 00:26:35,740\nThere's no reason that it\nwouldn't be able to upgrade.\n\n511\n00:26:35,740 --> 00:26:41,610\nBut, server 2 is running 5.0 and\nI can see that it passed its check also.\n\n512\n00:26:41,610 --> 00:26:43,690\nAnd if I click on that,\nit just gives me a little summary here.\n\n513\n00:26:43,690 --> 00:26:46,050\nThere were no errors\ndetected with the host.\n\n514\n00:26:46,050 --> 00:26:47,470\nIt looks like it should be good to go.\n\n515\n00:26:47,470 --> 00:26:48,040\nIt's ready to rock.\n\n516\n00:26:48,040 --> 00:26:50,420\nIt recognizes that it is 5.0.\n\n517\n00:26:50,420 --> 00:26:52,590\nBut it's okay, ready to do an update.\n\n518\n00:26:53,870 --> 00:26:57,780\nSo, just a quick tool there\nthat can help us to be sure\n\n519\n00:26:57,780 --> 00:27:00,050\nwe know our upgrade path is supported,\n\n520\n00:27:00,050 --> 00:27:03,720\nbecause sometimes the articles on the\nVMware site can be a little bit cryptic.\n\n521\n00:27:03,720 --> 00:27:08,250\nAll right so, we're good here so\nI'll just finish that up.\n\n522\n00:27:08,250 --> 00:27:10,580\nNow notice that the pre-checker.\n\n523\n00:27:10,580 --> 00:27:12,490\nIt doesn't actually let me do the update.\n\n524\n00:27:12,490 --> 00:27:14,370\nAll it does is check your pre-requisites.\n\n525\n00:27:14,370 --> 00:27:17,600\nCheck that you have\nthe required components,\n\n526\n00:27:17,600 --> 00:27:19,360\nto be able to do the update\nto the newest version.\n\n527\n00:27:19,360 --> 00:27:22,060\nSo, now that I'm finding I need\nto do the update I could go and\n\n528\n00:27:22,060 --> 00:27:25,560\nmanually do it like I just\ndid a few minutes ago, or\n\n529\n00:27:25,560 --> 00:27:28,430\nI could use the vSphere Update Manager and\nthat's what we're gonna do.\n\n530\n00:27:28,430 --> 00:27:32,450\nBut, I'm a little short on time on this\nsegment, so why don't we stop here and\n\n531\n00:27:32,450 --> 00:27:35,170\ntake a break and when we get back.\n\n532\n00:27:35,170 --> 00:27:40,030\nWe'll take a look at using the update\nmanager to get a system up to date.\n\n533\n00:27:40,030 --> 00:27:41,790\nAnd we also have securing\nthe installation,\n\n534\n00:27:41,790 --> 00:27:43,410\nwhich we might get to next segment.\n\n535\n00:27:43,410 --> 00:27:44,690\nOr we might have to go to a third segment.\n\n536\n00:27:44,690 --> 00:27:45,770\nWe'll, see how that goes.\n\n537\n00:27:45,770 --> 00:27:47,150\nSo stay tuned.\n\n538\n00:27:47,150 --> 00:27:48,252\nWe'll, be back with more after this.\n\n539\n00:27:48,252 --> 00:27:55,208\n[MUSIC]\n\n540\n00:27:55,208 --> 00:27:57,042\nAll right, welcome back everybody.\n\n541\n00:27:57,042 --> 00:28:01,441\nOkay, so during the break I had forgotten\nabout that machine I did the interactive\n\n542\n00:28:01,441 --> 00:28:05,517\nupdate on and it did finish, it rebooted,\nand if we take a look at my screen,\n\n543\n00:28:05,517 --> 00:28:07,050\nI can see it here.\n\n544\n00:28:07,050 --> 00:28:10,440\nNotice how it says that it's\nrunning ESXI 5.5.0 and then,\n\n545\n00:28:10,440 --> 00:28:15,590\nI can see download tools to manage\nthis host from 10.1.230.106.\n\n546\n00:28:15,590 --> 00:28:19,180\nThat's the static IP I assigned to it.\n\n547\n00:28:19,180 --> 00:28:20,870\nI see that it retained it.\n\n548\n00:28:20,870 --> 00:28:22,860\nSo, my settings are all preserved.\n\n549\n00:28:22,860 --> 00:28:26,860\nIt's up,\nit's running 5.5 that's really it.\n\n550\n00:28:26,860 --> 00:28:30,230\nDoing the interactive install, or upgrade\nlike that, it's really straightforward,\n\n551\n00:28:30,230 --> 00:28:31,230\nreally easy.\n\n552\n00:28:31,230 --> 00:28:32,730\nBut, not in bulk.\n\n553\n00:28:32,730 --> 00:28:34,320\nSo, let's see the bulk way of handling it,\n\n554\n00:28:34,320 --> 00:28:37,850\nwhich is to use the vSphere\nUpdate Manager.\n\n555\n00:28:37,850 --> 00:28:41,870\nSo let me jump over to my server,\nand we'll take a look at it.\n\n556\n00:28:41,870 --> 00:28:45,500\nNow, the vSphere Update Manager\nis a little bit weird because,\n\n557\n00:28:45,500 --> 00:28:49,450\nI mentioned in an earlier show, how we\nhave all these plug ins and extensions.\n\n558\n00:28:49,450 --> 00:28:53,930\nWe can really extend out the functionality\nof the vSphere web client,\n\n559\n00:28:53,930 --> 00:28:56,920\nwell the vSphere Update Manager\n\n560\n00:28:56,920 --> 00:29:01,410\nisn't fully integrated into\nthe vSphere web client yet.\n\n561\n00:29:01,410 --> 00:29:04,240\nThat'll happen eventually.\n\n562\n00:29:04,240 --> 00:29:08,610\nBut for now, we actually do have\nto use the older vSphere client,\n\n563\n00:29:08,610 --> 00:29:12,180\nthe local client to connect to it and\nmanage it and work with it.\n\n564\n00:29:12,180 --> 00:29:17,230\nSo, I'm going to just kind of\nminimize my vSphere web client there,\n\n565\n00:29:17,230 --> 00:29:20,240\nand I'm going to fire up the older\ndedicated vSphere client.\n\n566\n00:29:20,240 --> 00:29:23,580\nNow, normally, when we fire up\nthe vSphere client, what do we do?\n\n567\n00:29:23,580 --> 00:29:29,230\nWe put in the IP address of an ESXI server\nand connect to it, and start to manage it.\n\n568\n00:29:29,230 --> 00:29:33,590\nBut, you can also point it at a server\nrunning the Update Manager and\n\n569\n00:29:33,590 --> 00:29:35,460\nreally running vCenter as a whole.\n\n570\n00:29:35,460 --> 00:29:40,180\nIf you point it at a vCenter server,\nyou actually get the vCenter experience\n\n571\n00:29:40,180 --> 00:29:43,500\nin the vSphere client so,\nyou get a lot more functionality.\n\n572\n00:29:43,500 --> 00:29:47,250\nYou don't get everything, the web client\nis the one that we're supposed to use.\n\n573\n00:29:47,250 --> 00:29:51,640\nBut in this case, it's one of those times\nwhere we have to use the direct client.\n\n574\n00:29:51,640 --> 00:29:58,240\nSo, I'm gonna punch in the server\nthat I'm running vCenter on.\n\n575\n00:29:58,240 --> 00:30:03,120\nSo, I'm just punching in\nvm-server1.lab.itpro.tv,\n\n576\n00:30:03,120 --> 00:30:06,230\nand I'll punch in my user name and\npassword,\n\n577\n00:30:06,230 --> 00:30:10,560\nand so I have it integrated\nin the active directory.\n\n578\n00:30:10,560 --> 00:30:16,160\nOr I could log in with that\nadministrator@vsphere.local\n\n579\n00:30:16,160 --> 00:30:19,160\naccount that's that default\nadmin that was created.\n\n580\n00:30:19,160 --> 00:30:22,390\nSo, I can log in either way and\nit'll let me in.\n\n581\n00:30:22,390 --> 00:30:23,500\nSo, it's gonna get connected up.\n\n582\n00:30:23,500 --> 00:30:26,850\nIt is gonna flag my SSL certificate,\nbecause it is self-signed.\n\n583\n00:30:26,850 --> 00:30:29,770\nSo, I'll just let that connect and\nit's gonna reach out, and\n\n584\n00:30:29,770 --> 00:30:31,130\nconnect to that server.\n\n585\n00:30:31,130 --> 00:30:32,850\nNow when it's connected,\n\n586\n00:30:32,850 --> 00:30:37,130\nI'm not really gonna see anything\nmentioning the Update Manager, all right?\n\n587\n00:30:37,130 --> 00:30:39,070\nI'm just gonna be seeing vCenter stuff.\n\n588\n00:30:39,070 --> 00:30:43,094\nAnd the reason is the Update Manager\nis actually a plug in,\n\n589\n00:30:43,094 --> 00:30:46,780\nit's an extension to\nthe vSphere web client.\n\n590\n00:30:46,780 --> 00:30:49,180\nSo, we have to go and enable that.\n\n591\n00:30:49,180 --> 00:30:51,010\nSo, when we get logged in.\n\n592\n00:30:51,010 --> 00:30:53,920\nWe've got a little extra step\nto go through, all right?\n\n593\n00:30:53,920 --> 00:30:57,200\nNow, when you connect with\nthe vSphere client like this,\n\n594\n00:30:57,200 --> 00:31:00,970\nit looks a lot different than what\nwe saw with vCenter, doesn't it?\n\n595\n00:31:00,970 --> 00:31:02,700\nWell, it sort of does.\n\n596\n00:31:02,700 --> 00:31:03,510\nIt does on this screen.\n\n597\n00:31:03,510 --> 00:31:05,270\nOn this screen,\nwhere you see all these icons,\n\n598\n00:31:05,270 --> 00:31:07,450\nthat's a lot different than\nwhat we see on the web client.\n\n599\n00:31:07,450 --> 00:31:09,000\nBut, the instant you click on Something.\n\n600\n00:31:09,000 --> 00:31:11,210\nLike if I click on Host and Clusters.\n\n601\n00:31:11,210 --> 00:31:13,620\nIt's gonna return back to this view and\n\n602\n00:31:13,620 --> 00:31:16,940\nnow, it looks a lot more like we\nsaw in the web client before, okay?\n\n603\n00:31:16,940 --> 00:31:19,650\nSo don't freak out, the first time\nyou get connected this way and\n\n604\n00:31:19,650 --> 00:31:22,890\nthink that it all looks different,\nit's really just that home screen where\n\n605\n00:31:22,890 --> 00:31:25,590\nit goes to icons like\nthis that look different.\n\n606\n00:31:25,590 --> 00:31:29,360\nBut, when we get connected and we're not\nreally gonna see much, that's different.\n\n607\n00:31:29,360 --> 00:31:35,200\nWe need to add the Update Manager plug-in,\nto be able to manipulate and work with it.\n\n608\n00:31:35,200 --> 00:31:39,241\nWhen we do, when you have the Update\nManager plug-in, you'll see new tabs\n\n609\n00:31:39,241 --> 00:31:43,678\nacross the top here that are dealing with\nupdating, and monitoring your servers.\n\n610\n00:31:43,678 --> 00:31:46,719\nSo, that's gonna be my first step,\nis getting that added.\n\n611\n00:31:46,719 --> 00:31:50,899\nSo, I need to go up here to\nthe plug-in menu and manage plug-ins.\n\n612\n00:31:50,899 --> 00:31:52,535\nAll right.\n\n613\n00:31:52,535 --> 00:31:56,485\nAnd what you should see if\nthe update manager was detected,\n\n614\n00:31:56,485 --> 00:32:02,060\nyou'll see an entry for it here but notice\nhow it says available not installed.\n\n615\n00:32:02,060 --> 00:32:05,970\nIt's not actually here,\nwe need to download and install it, and\n\n616\n00:32:05,970 --> 00:32:07,460\nunder the status updates you'll see that.\n\n617\n00:32:07,460 --> 00:32:08,650\nDownload and Install.\n\n618\n00:32:08,650 --> 00:32:10,910\nAnd you can click that,\nit's just gonna reach out to the Internet.\n\n619\n00:32:10,910 --> 00:32:14,550\nIt's not very big, I think it's like\nthree megabytes in size or something.\n\n620\n00:32:14,550 --> 00:32:19,290\nSo it'll download pretty quick and we\njust need to let it install that plugin.\n\n621\n00:32:19,290 --> 00:32:23,630\nNow it's installing the plugin\non your client machine.\n\n622\n00:32:23,630 --> 00:32:26,170\nSo if you're gonna me managing this from\nmore than one client, you'll have to\n\n623\n00:32:26,170 --> 00:32:29,100\ninstall this plugin on each client\nthat you want to be able to manage it.\n\n624\n00:32:30,492 --> 00:32:32,430\nAll right, so I'm gonna go ahead and\njust kind of page through this.\n\n625\n00:32:32,430 --> 00:32:37,500\nI don't recall there being any options,\nyeah it's just,\n\n626\n00:32:37,500 --> 00:32:42,150\nagree to the licensing agreement and\nanswer a few questions there.\n\n627\n00:32:42,150 --> 00:32:46,390\nSo no real choices, you just kinda\nmove forward through the install.\n\n628\n00:32:46,390 --> 00:32:50,700\nWhen it's done, all right,\nit's gonna show that it's installing.\n\n629\n00:32:50,700 --> 00:32:53,050\nAnd then it's gonna move up and\nsay enabled.\n\n630\n00:32:53,050 --> 00:32:56,640\nI've gotta validate that certificate cuz\nnow it's reaching out to the update server\n\n631\n00:32:56,640 --> 00:33:00,400\nwhich has a different certificate,\nso I'll add that one, all right.\n\n632\n00:33:00,400 --> 00:33:01,650\nNow just for\n\n633\n00:33:01,650 --> 00:33:07,250\nreference, it should move it up to\ninstalled and automatically enable it.\n\n634\n00:33:07,250 --> 00:33:11,020\nI have seen before where it moved it\nto Installed but left it disabled.\n\n635\n00:33:11,020 --> 00:33:12,780\nIt shouldn't happen, but I have seen it.\n\n636\n00:33:12,780 --> 00:33:16,310\nIf that does happen just right click\non it and you can see enable or\n\n637\n00:33:16,310 --> 00:33:18,220\ndisable depending on your current status.\n\n638\n00:33:18,220 --> 00:33:20,940\nSo you'll choose to enable it to turn\nit on if it doesn't go by itself.\n\n639\n00:33:20,940 --> 00:33:22,750\nBut it should, and you can see mine did.\n\n640\n00:33:22,750 --> 00:33:24,490\nSo, I'm enabled.\n\n641\n00:33:24,490 --> 00:33:25,510\nI'm ready to rock, all right.\n\n642\n00:33:25,510 --> 00:33:27,640\nSo what did that plug in do?\n\n643\n00:33:27,640 --> 00:33:34,170\nWell, if I hit close here I can see I've\ngot a new tab, update manager, right.\n\n644\n00:33:35,210 --> 00:33:39,300\nThe update manager is now enabled\ninside of my vSphere client, and\n\n645\n00:33:39,300 --> 00:33:43,590\nas I start to manage my servers and\nother things, I'll start to notice\n\n646\n00:33:43,590 --> 00:33:47,680\nadditional tabs, and here's the update\nmanager tab again over here.\n\n647\n00:33:47,680 --> 00:33:51,730\nSo new functionality has been added\nthanks to this plug in, all right.\n\n648\n00:33:51,730 --> 00:33:55,080\nBut where I wanna start is right here,\nup on the update manager tab.\n\n649\n00:33:56,320 --> 00:34:01,170\nWith a default install of the update\nmanager, It does absolutely nothing.\n\n650\n00:34:01,170 --> 00:34:02,560\nIt just sits there and that's it.\n\n651\n00:34:02,560 --> 00:34:04,460\nIt's terribly unexciting.\n\n652\n00:34:04,460 --> 00:34:06,110\nWe need to configure it and\n\n653\n00:34:06,110 --> 00:34:10,520\nget it ready to rock and get it setup\nto do the things that we need it to do.\n\n654\n00:34:10,520 --> 00:34:12,640\nWhen we take a look at\nthe update manager tab,\n\n655\n00:34:12,640 --> 00:34:16,280\nwe need to start all the way\nup here at our vCenter server.\n\n656\n00:34:16,280 --> 00:34:18,820\nWe're configuring it on\nthe server first and\n\n657\n00:34:18,820 --> 00:34:22,190\nthen we start to worry about our\nindividual nodes from there.\n\n658\n00:34:22,190 --> 00:34:24,430\nOkay, when you start to configure these,\n\n659\n00:34:24,430 --> 00:34:27,700\nyou need to create what\nare called baseline groups.\n\n660\n00:34:27,700 --> 00:34:31,900\nBaseline groups are what you use to\ndivide up what systems get updates.\n\n661\n00:34:31,900 --> 00:34:35,430\nSi I might have a baseline group\ncalled Test Servers, right.\n\n662\n00:34:35,430 --> 00:34:37,990\nThose will contain the servers\nthat I deploy updates to right\n\n663\n00:34:37,990 --> 00:34:39,210\nwhen they come out.\n\n664\n00:34:39,210 --> 00:34:43,360\nAnd then, I might have another baseline\ngroup called Gainesville or Lando.\n\n665\n00:34:43,360 --> 00:34:47,150\nSo, I deploy updates at different\ntimes cuz they might have different\n\n666\n00:34:47,150 --> 00:34:48,400\ndowntime windows.\n\n667\n00:34:48,400 --> 00:34:51,410\nOr, I might have a baseline\ngroup just called All servers.\n\n668\n00:34:51,410 --> 00:34:54,890\nAnd I can do that and push my updates\nout to everybody all at once.\n\n669\n00:34:54,890 --> 00:34:58,000\nOr I may not choose to\nuse groups like that,\n\n670\n00:34:58,000 --> 00:35:02,020\nI may choose to just deploy updates to\nservers on a server by server basis.\n\n671\n00:35:02,020 --> 00:35:03,210\nAnd you can certainly do that too.\n\n672\n00:35:03,210 --> 00:35:07,850\nYou've got a lot of flexibility in\nhow you want to apply those updates.\n\n673\n00:35:07,850 --> 00:35:11,720\nAll right, and then over here\nyou'll see attached baselines.\n\n674\n00:35:11,720 --> 00:35:13,910\nThese are generally the updates.\n\n675\n00:35:13,910 --> 00:35:16,830\nSo when an update comes out,\nthat update is part of a baseline.\n\n676\n00:35:16,830 --> 00:35:20,360\nAnd it scans your servers to see\nif they already have the update.\n\n677\n00:35:20,360 --> 00:35:24,570\nIf they do, it says they're\ncompliant with that baseline.\n\n678\n00:35:24,570 --> 00:35:27,850\nIf they don't have the update it\nshows them as non-compliant, or\n\n679\n00:35:27,850 --> 00:35:31,520\nif the update doesn't apply to them\nit shows as incompatible, all right.\n\n680\n00:35:31,520 --> 00:35:34,630\nSo you'll have different statuses\nbased on the type of host you've got.\n\n681\n00:35:34,630 --> 00:35:38,170\nAnd then over here you can see\nthe host compliance summary.\n\n682\n00:35:38,170 --> 00:35:41,690\nNow this is all empty for me cuz I\nhaven't created any baseline groups or\n\n683\n00:35:41,690 --> 00:35:42,640\nbaselines at all, all right.\n\n684\n00:35:44,210 --> 00:35:48,260\nSo there's a little bit of work we need to\ngo through to get this thing set up to do\n\n685\n00:35:48,260 --> 00:35:48,940\nan update.\n\n686\n00:35:48,940 --> 00:35:54,090\nNow if you want to do hot fixes and\npatches it will reach\n\n687\n00:35:54,090 --> 00:35:58,925\nout to VMware and it'll download them and\nstore them right here on the server.\n\n688\n00:35:58,925 --> 00:36:02,355\nAs a result, you need some hard\ndrive space to handle that.\n\n689\n00:36:02,355 --> 00:36:05,715\nVMware recommends 120\ngigs of hard drive space.\n\n690\n00:36:05,715 --> 00:36:08,785\nNow you might say to yourself, wait\na minute, that's a lot of space, why so\n\n691\n00:36:08,785 --> 00:36:12,385\nbig when the VMware installs\nunder a gig in size itself?\n\n692\n00:36:12,385 --> 00:36:16,115\nAnd the reason is it's gotta get\ninstallation images, CDs, and\n\n693\n00:36:16,115 --> 00:36:20,650\nit does not just ESXi but\nit also does things like vSphere,\n\n694\n00:36:20,650 --> 00:36:23,930\nvCenter, so the other products\nthat are a part of vSphere.\n\n695\n00:36:23,930 --> 00:36:26,620\nIt gets updates for that too, so you need\nyou need a lot of hard drive space for\n\n696\n00:36:26,620 --> 00:36:27,610\nit, all right.\n\n697\n00:36:27,610 --> 00:36:30,770\nWell, I don't want us to sit here and\njust watch downloads all afternoon.\n\n698\n00:36:30,770 --> 00:36:36,470\nSo, what I'm gonna do is I'm gonna\ndeploy ESXI 5.5 from the ISO image and\n\n699\n00:36:36,470 --> 00:36:40,110\nyou can do that too,\nyou can manually import an update.\n\n700\n00:36:40,110 --> 00:36:42,210\nAs opposed to going out and\ndownloading it.\n\n701\n00:36:42,210 --> 00:36:43,720\nThat's useful in two scenarios.\n\n702\n00:36:43,720 --> 00:36:47,630\nOne, where you're impatient [LAUGH] and\nyou want to have it fast like me, or\n\n703\n00:36:47,630 --> 00:36:51,770\ntwo, when you're on a secure network\nthat doesn't have internet access.\n\n704\n00:36:51,770 --> 00:36:53,560\nIf you don't have internet access,\nit can't just go out and\n\n705\n00:36:53,560 --> 00:36:55,440\ndownload the updates from the m ware.\n\n706\n00:36:55,440 --> 00:36:58,150\nSo you would go and\ndownload there somewhere else,\n\n707\n00:36:58,150 --> 00:37:01,740\nrun them through your security screening\nprocess, bring them into the network and\n\n708\n00:37:01,740 --> 00:37:06,250\nimport them in, that's exactly\nwhat I'm gonna do here, all right.\n\n709\n00:37:06,250 --> 00:37:10,970\nThe first thing I need to do is, I need\nto get that image in here, all right.\n\n710\n00:37:10,970 --> 00:37:14,430\nOn this main screen, I don't really\nhave the ability to do that.\n\n711\n00:37:14,430 --> 00:37:17,260\nYou'll see this link up here,\nthat says, admin view.\n\n712\n00:37:17,260 --> 00:37:21,450\nWhen you go into admin view, you're gonna\nsee a lot of additional stuff in here,\n\n713\n00:37:21,450 --> 00:37:23,090\nthat allows us to tweak things.\n\n714\n00:37:24,240 --> 00:37:27,890\nThis is where I'd normally go,\ndownload patches and upgrades.\n\n715\n00:37:27,890 --> 00:37:30,830\nThat's when we reach out to VMware and\nwe download\n\n716\n00:37:30,830 --> 00:37:34,090\nthe various updates that apply to our\nsystems and we store them right here.\n\n717\n00:37:34,090 --> 00:37:38,670\nSo if we want this to be the longest\nepisode on record we could do that and\n\n718\n00:37:38,670 --> 00:37:40,200\nwe'd get it all, all right.\n\n719\n00:37:40,200 --> 00:37:46,560\nBut Instead I'm gonna go up here and I've\ngot a tab called ESXI images, all right.\n\n720\n00:37:46,560 --> 00:37:50,860\nYou've got the patch repository for\nindividual updates and hot fixes and\n\n721\n00:37:50,860 --> 00:37:55,220\nyou've got ESXI images that's where\nthe actual installer images for\n\n722\n00:37:55,220 --> 00:37:58,060\nnew updates for new product versions go.\n\n723\n00:37:58,060 --> 00:38:00,380\nSo I'll go there into my images,\nand I don't have any just yet.\n\n724\n00:38:00,380 --> 00:38:04,550\nAnd you'll see here where I've\ngot the import ESXI Image option.\n\n725\n00:38:04,550 --> 00:38:07,830\nSo I'm just gonna import an image\nthat I've already downloaded.\n\n726\n00:38:07,830 --> 00:38:14,025\nSo I'll browse and find that,\nwhich I thought I had sitting right here.\n\n727\n00:38:16,015 --> 00:38:19,545\nWell shoot, where did I put that thing?\n\n728\n00:38:19,545 --> 00:38:23,644\nLet me browse to another server and\nfind it.\n\n729\n00:38:30,645 --> 00:38:33,170\nGive me just a second, I gotta remember\nmy password on this other system.\n\n730\n00:38:36,375 --> 00:38:40,530\nAnd, what,\nactually that's an old version, shoot.\n\n731\n00:38:40,530 --> 00:38:42,480\nLet me see, where did I put that?\n\n732\n00:38:43,720 --> 00:38:45,020\nThis is another important part,\n\n733\n00:38:45,020 --> 00:38:49,510\nwe need to remember where we've put our\nfiles to be able to go out and get them.\n\n734\n00:38:49,510 --> 00:38:53,528\nLet's see,\nI bet I've got them sitting over here.\n\n735\n00:38:56,745 --> 00:38:57,686\nOr not.\n\n736\n00:38:57,686 --> 00:39:03,932\n[LAUGH] Almost, all right.\n\n737\n00:39:03,932 --> 00:39:07,834\nSo basically I'm gonna reach out and get a\nISO that I've got stuck over on this other\n\n738\n00:39:07,834 --> 00:39:10,234\nserver I'm gonna do something\nextremely silly and\n\n739\n00:39:10,234 --> 00:39:13,910\nsend my password in plain text but\nI know I've got the files there.\n\n740\n00:39:13,910 --> 00:39:15,050\nSo there we go.\n\n741\n00:39:15,050 --> 00:39:18,210\nSo I've got my\nVMvisor Installer 5.5 Update 1.\n\n742\n00:39:18,210 --> 00:39:22,680\nThat's the update that I wanna get and\nI wanna import.\n\n743\n00:39:22,680 --> 00:39:25,563\nSo I'm just gonna copy that\ninto my downloads folder.\n\n744\n00:39:27,838 --> 00:39:28,568\nThere we go.\n\n745\n00:39:28,568 --> 00:39:32,140\nAnd I'll be able to import\nthat into my update server.\n\n746\n00:39:32,140 --> 00:39:36,140\nAnd once it's there, now I can push\nit out to all of my clients and\n\n747\n00:39:36,140 --> 00:39:38,570\ndo my install and get that going.\n\n748\n00:39:38,570 --> 00:39:43,086\nSo this is important because you might not\nhave that Internet access to reach out to\n\n749\n00:39:43,086 --> 00:39:44,795\nVMWare and get it, all right.\n\n750\n00:39:44,795 --> 00:39:48,337\nI could have done it that way but it'll\nbe faster off my local network here, so\n\n751\n00:39:48,337 --> 00:39:50,751\njust copying that over and\nthen we'll import it in.\n\n752\n00:39:50,751 --> 00:39:55,012\nNow once we've got it there, we then need\nto determine who we wanna send it out to.\n\n753\n00:39:55,012 --> 00:39:57,910\nAnd, now most of my servers\nare already running 5.5.\n\n754\n00:39:57,910 --> 00:40:00,710\nIf I try and\nre-deploy this to a server running 5.5,\n\n755\n00:40:00,710 --> 00:40:04,170\nit'll just say that it's compliant and\nit won't do the update.\n\n756\n00:40:04,170 --> 00:40:07,440\nSo it doesn't hurt to try and\nre-apply it, it's just gonna ignore it.\n\n757\n00:40:07,440 --> 00:40:11,290\nBut, if I try and apply it to one\nof my systems that's running 5.0,\n\n758\n00:40:11,290 --> 00:40:14,830\nthere it's gonna see that it's missing and\nit's gonna do the update process.\n\n759\n00:40:14,830 --> 00:40:16,290\nSo, let me redo this here.\n\n760\n00:40:16,290 --> 00:40:18,170\nI'll do my Import Image.\n\n761\n00:40:18,170 --> 00:40:19,640\nAnd I'll go into my Downloads folder.\n\n762\n00:40:19,640 --> 00:40:23,180\nThere it is, all right.\n\n763\n00:40:23,180 --> 00:40:23,680\nAnd so here it is.\n\n764\n00:40:23,680 --> 00:40:24,710\nIt's just gonna look at it.\n\n765\n00:40:24,710 --> 00:40:27,910\nAnd again, more of my self signed\ncertificates just warning me here.\n\n766\n00:40:27,910 --> 00:40:30,600\nIt's gonna just double check it,\nand then it's gonna import it in.\n\n767\n00:40:30,600 --> 00:40:32,390\nSo there it goes importing it.\n\n768\n00:40:32,390 --> 00:40:35,120\nIt's treating it, just as if it\nhad downloaded it from VMware, but\n\n769\n00:40:35,120 --> 00:40:37,870\nit is pulling it right here\nfrom my local machine.\n\n770\n00:40:37,870 --> 00:40:41,000\nOnce it's in there,\nit's loaded in the data store and\n\n771\n00:40:41,000 --> 00:40:43,720\nnow it's ready to be\npushed out to our clients.\n\n772\n00:40:43,720 --> 00:40:47,740\nNow, every update has\na baseline attached to it.\n\n773\n00:40:47,740 --> 00:40:50,640\nSo on the next screen it's gonna ask\nme to name that baseline, and so\n\n774\n00:40:50,640 --> 00:40:52,560\nI'll just give it a name\nthat I can recognize.\n\n775\n00:40:52,560 --> 00:40:56,690\nAnd then I can run my client computers\nagainst it, to determine whether or\n\n776\n00:40:56,690 --> 00:40:58,870\nnot they need this update.\n\n777\n00:40:58,870 --> 00:41:01,920\nWhether they're compliant with\nthat baseline, or they're not.\n\n778\n00:41:01,920 --> 00:41:06,130\nSo there we go, it's just finishing up and\nit'll ask me the name.\n\n779\n00:41:06,130 --> 00:41:11,520\nI'll give it a name that makes sense\nto me, for example ESXI version 5.5.\n\n780\n00:41:11,520 --> 00:41:14,050\nSo, it's doing it's thing.\n\n781\n00:41:15,260 --> 00:41:18,290\nIt imports it, and then it does a\nverification of the file to make sure it's\n\n782\n00:41:18,290 --> 00:41:19,760\nintact, so it does take just a moment.\n\n783\n00:41:19,760 --> 00:41:23,090\nThere we go, and\non the next screen I can give it a name.\n\n784\n00:41:23,090 --> 00:41:30,253\nI'm just gonna call this\none the ESXI version 5.5.0.\n\n785\n00:41:31,930 --> 00:41:36,380\nSo now, I've got a baseline and\nif I go back to my compliance view,\n\n786\n00:41:36,380 --> 00:41:40,820\nso I was in admin view, and\nnow I'm gonna go back to compliance view.\n\n787\n00:41:40,820 --> 00:41:43,410\nI still don't really see anything in here.\n\n788\n00:41:43,410 --> 00:41:46,880\nThe reason is, the baselines\nactually have to be attached.\n\n789\n00:41:46,880 --> 00:41:49,310\nJust because a baseline exists,\ndoesn't mean,\n\n790\n00:41:49,310 --> 00:41:51,420\nyou've approved it in your environment.\n\n791\n00:41:51,420 --> 00:41:52,690\nWe've got to go to Attach.\n\n792\n00:41:54,150 --> 00:41:56,410\nAnd then, we can pick from our baselines.\n\n793\n00:41:56,410 --> 00:41:58,510\nNow, VMware's already defined too.\n\n794\n00:41:58,510 --> 00:42:02,000\nCritical Host Patches and\nNon-critical Host Patches.\n\n795\n00:42:02,000 --> 00:42:05,930\nVMware recommends that you apply\nthe Critical Host Patches to all of your\n\n796\n00:42:05,930 --> 00:42:06,720\nsystems.\n\n797\n00:42:06,720 --> 00:42:11,530\nThese are ones that VMware says this is\na hot ticket item, there's a security\n\n798\n00:42:11,530 --> 00:42:15,050\nvulnerability, or exploit that need\nto be patched as soon as possible.\n\n799\n00:42:15,050 --> 00:42:17,800\nSo, you should be pushing those out\nat your earliest convenience, right?\n\n800\n00:42:17,800 --> 00:42:21,800\nNon-critical though,\nthose are ones that fix bugs, and\n\n801\n00:42:21,800 --> 00:42:24,450\nthey're usually bugs that\ndon't pertain to everybody.\n\n802\n00:42:24,450 --> 00:42:26,710\nIt's a good idea to roll\nthem out as soon as you can.\n\n803\n00:42:26,710 --> 00:42:30,060\nBut, if you need to wait a week or\ntwo, it's not such a big deal.\n\n804\n00:42:30,060 --> 00:42:32,360\nIt's not like a security\nexploit is waiting on you.\n\n805\n00:42:32,360 --> 00:42:35,520\nSo, those are two that they create the\ndeal with the patches that are downloaded\n\n806\n00:42:35,520 --> 00:42:36,970\nfrom VMWare.\n\n807\n00:42:36,970 --> 00:42:40,330\nBut, Upgrades are thrown\ninto their own section.\n\n808\n00:42:40,330 --> 00:42:41,430\nYou can see this isn't a patch.\n\n809\n00:42:41,430 --> 00:42:44,160\nThis is a host upgrade,\nactually upgrading the OS.\n\n810\n00:42:44,160 --> 00:42:46,370\nAnd so I'm gonna come here,\nand choose that.\n\n811\n00:42:46,370 --> 00:42:49,760\nNow, my baseline groups,\nI haven't created any.\n\n812\n00:42:49,760 --> 00:42:52,590\nIt's giving me the chance\nto create some right now.\n\n813\n00:42:52,590 --> 00:42:57,500\nI could create a baseline group and I'll\njust call it my host baseline group, and\n\n814\n00:42:57,500 --> 00:43:03,130\nI can pick what upgrades, or patches are\ngoing to apply to this group and so on.\n\n815\n00:43:03,130 --> 00:43:06,170\nSo, I'll just call this my ESXI servers.\n\n816\n00:43:08,370 --> 00:43:11,840\nAnd you can kind of pick what\nthe upgrade baseline is going to be.\n\n817\n00:43:11,840 --> 00:43:14,450\nSo, I'm doing that ESXI\nversion 5.5 upgrade.\n\n818\n00:43:17,420 --> 00:43:20,840\nThen I can pick if I want any\nof these other patches to apply,\n\n819\n00:43:20,840 --> 00:43:23,290\nthe critical host or whatever?\n\n820\n00:43:23,290 --> 00:43:25,600\nI can pick if I have any\nextension baselines,\n\n821\n00:43:25,600 --> 00:43:28,020\nthose are the add on products that we use.\n\n822\n00:43:28,020 --> 00:43:31,640\nAnd then, we can finish up and\nit's created.\n\n823\n00:43:31,640 --> 00:43:34,960\nAnd then I'll go ahead, and\njust choose that baseline group here.\n\n824\n00:43:34,960 --> 00:43:38,880\nIf I expand it out you can see that it\nis attached there, and I'll just go and\n\n825\n00:43:38,880 --> 00:43:40,580\nattach it together.\n\n826\n00:43:40,580 --> 00:43:44,150\nSo, now I've got an ESXI servers group.\n\n827\n00:43:44,150 --> 00:43:45,940\nI've also got a all groups.\n\n828\n00:43:45,940 --> 00:43:49,350\nThat would kind of apply to everybody,\nbut here's ESXI servers.\n\n829\n00:43:49,350 --> 00:43:52,150\nAnd I've got the upgrade\nthat's attached to it.\n\n830\n00:43:52,150 --> 00:43:54,430\nI can see that I've got five hosts.\n\n831\n00:43:54,430 --> 00:43:57,670\nFour are in and unknown state,\nand one is non-compliant.\n\n832\n00:43:57,670 --> 00:44:01,890\nSo one is absolutely already failed,\nthe other four it doesn't know about.\n\n833\n00:44:01,890 --> 00:44:03,700\nWell, what's the deal there?\n\n834\n00:44:03,700 --> 00:44:05,360\nWell, what I need to do,\n\n835\n00:44:05,360 --> 00:44:10,290\nis I need to scan these systems to make\nsure they're compliant or not compliant.\n\n836\n00:44:10,290 --> 00:44:13,720\nAnd when you see an unknown, that just\nmeans they haven't been scanned, so\n\n837\n00:44:13,720 --> 00:44:15,070\nthat's my next step.\n\n838\n00:44:15,070 --> 00:44:16,370\nIs, what you'll generally do,\n\n839\n00:44:16,370 --> 00:44:18,960\nis just right up here at the top,\nyou got a Scan button.\n\n840\n00:44:18,960 --> 00:44:21,710\nYou can hit Scan, and\nit's gonna take a look at those.\n\n841\n00:44:21,710 --> 00:44:23,970\nI need to make sure that I do look for\nupgrades.\n\n842\n00:44:23,970 --> 00:44:27,333\nIt's not checked by default,\ncuz we don't do upgrades everyday.\n\n843\n00:44:27,333 --> 00:44:29,815\nSo, I 'm just gonna check that and\nhit Scan.\n\n844\n00:44:30,875 --> 00:44:32,585\nSo, now it's taking\na look at those servers.\n\n845\n00:44:32,585 --> 00:44:33,625\nIt's in progress.\n\n846\n00:44:33,625 --> 00:44:35,465\nIt's looking at all of my servers.\n\n847\n00:44:35,465 --> 00:44:37,305\nNow, one of my servers is offline.\n\n848\n00:44:37,305 --> 00:44:42,245\nSee how ESX server 5 has a red\ndiamond on it, or whatever?\n\n849\n00:44:42,245 --> 00:44:42,965\nIt's offline.\n\n850\n00:44:42,965 --> 00:44:44,705\nSo, it's not gonna be\nable to scan that one.\n\n851\n00:44:44,705 --> 00:44:46,305\nBut, it'll scan the other ones.\n\n852\n00:44:46,305 --> 00:44:50,280\nAnd they'll change from unknown\nto hopefully compliance,\n\n853\n00:44:50,280 --> 00:44:51,790\nis what they should show?\n\n854\n00:44:51,790 --> 00:44:54,740\nCuz they've already got 5.5 so we'll give\nit a moment while is sorts through that.\n\n855\n00:44:56,110 --> 00:44:57,590\nI didn't have to scan em all.\n\n856\n00:44:57,590 --> 00:45:01,020\nWhen you do these updates,\nyou could just pick somebody specifically.\n\n857\n00:45:01,020 --> 00:45:07,510\nYou could go in and pick just Server 2 or\nwhatever, and pick it to do the updates.\n\n858\n00:45:07,510 --> 00:45:12,242\nSo, you do have some flexibility there\nas far as how you wanna go about that,\n\n859\n00:45:12,242 --> 00:45:15,100\nall right?\n\n860\n00:45:15,100 --> 00:45:17,990\nSo, I know two is the one\nthat I want to update and\n\n861\n00:45:17,990 --> 00:45:22,440\nso, over here,\nthat view that I in was that unknown view,\n\n862\n00:45:22,440 --> 00:45:25,700\nlet me go back to that, because it gets\na little confusing if I jump around.\n\n863\n00:45:25,700 --> 00:45:29,670\nSo I was in the unknown view, so\nit was only showing unknown hosts.\n\n864\n00:45:29,670 --> 00:45:32,187\nBut I've got non-compliant right here, and\n\n865\n00:45:32,187 --> 00:45:35,230\nif I choose non-compliant\nit shows that ESX server 2.\n\n866\n00:45:35,230 --> 00:45:39,100\nYou could choose all, and\nyou'll see the whole grouping right?\n\n867\n00:45:39,100 --> 00:45:40,420\nThe instant I click on Server 2,\n\n868\n00:45:40,420 --> 00:45:44,580\nthough it'll take me right to Server 2's\npage see how my focus changed right there?\n\n869\n00:45:44,580 --> 00:45:48,190\nSo now, I can apply the update\njust to Server 2, if I want.\n\n870\n00:45:48,190 --> 00:45:51,610\nI don't even have to worry about the\ngroups anymore, I don't care about those.\n\n871\n00:45:51,610 --> 00:45:55,852\nI can come in and apply an update just\nto this server specifically, if I want.\n\n872\n00:45:55,852 --> 00:45:59,570\nAll right, now to actually update,\nactually it just finished, so\n\n873\n00:45:59,570 --> 00:46:03,180\nlet me go back to my main\nUpdate Manager Screen here.\n\n874\n00:46:05,130 --> 00:46:11,600\nSo on my main screen,\nif I go to my All Applicable Hosts page,\n\n875\n00:46:11,600 --> 00:46:16,090\nnotice that Server 3 and\nServer 4 don't show up anymore, all right?\n\n876\n00:46:16,090 --> 00:46:17,690\nWell, I think that's\nbecause I'm on Gainesville.\n\n877\n00:46:17,690 --> 00:46:19,290\nLet me jump up to my actual server.\n\n878\n00:46:19,290 --> 00:46:20,870\nThere, now I see them all, okay?\n\n879\n00:46:20,870 --> 00:46:23,800\nSo, when I was on Gainesville I was\nonly seeing the servers in Gainesville,\n\n880\n00:46:23,800 --> 00:46:27,600\nI've got Server 3 and 4 here in Orlando,\nthat's why they were missing.\n\n881\n00:46:27,600 --> 00:46:30,520\nSo, if I look here under\nmy vCenter server, so\n\n882\n00:46:30,520 --> 00:46:34,310\nseeing the whole environment,\nI can see my five servers.\n\n883\n00:46:34,310 --> 00:46:37,080\nI can see that Server 2 is non-compliant.\n\n884\n00:46:37,080 --> 00:46:41,270\nServers 1, 3 and 4 are already running\n5.5, they already show as compliant.\n\n885\n00:46:41,270 --> 00:46:44,060\nAnd so server five is unknown still,\nbecause its unreachable,\n\n886\n00:46:44,060 --> 00:46:47,148\nit's not on right now, okay?\n\n887\n00:46:47,148 --> 00:46:48,740\nBut Server 2 is the one\nthat not in compliant, and\n\n888\n00:46:48,740 --> 00:46:50,460\nthat's the one that I want to update.\n\n889\n00:46:50,460 --> 00:46:53,770\nWhen comes to doing the update, there's\na button, my head's covering it up, so\n\n890\n00:46:53,770 --> 00:46:55,990\nlet me resize my window so you can see it.\n\n891\n00:46:55,990 --> 00:46:57,730\nThere a button right here,\nat the bottom right.\n\n892\n00:46:57,730 --> 00:47:01,160\nThere's two buttons actually,\nstage and remediate, all right?\n\n893\n00:47:01,160 --> 00:47:05,560\nWhat Stage does is,\nit says take the update, or\n\n894\n00:47:05,560 --> 00:47:09,590\nupgrade, and copy it to the machine,\nbut don't install it yet.\n\n895\n00:47:09,590 --> 00:47:12,660\nJust copy it there and get it ready, okay?\n\n896\n00:47:12,660 --> 00:47:15,540\nIf you're trying to minimize\nyour downtime window,\n\n897\n00:47:15,540 --> 00:47:17,290\nthe Stage button can save you time.\n\n898\n00:47:17,290 --> 00:47:21,530\nIt'll copy the update to each server\nindividually throughout your environment.\n\n899\n00:47:21,530 --> 00:47:25,230\nThat you've chosen in your group,\nand it'll let it sit there.\n\n900\n00:47:25,230 --> 00:47:28,740\nAnd that way when it's time to do\nthe actual update, you move over here and\n\n901\n00:47:28,740 --> 00:47:32,250\nhit remediate and when you hit\nremediate that'll apply the update.\n\n902\n00:47:32,250 --> 00:47:34,610\nIt's already copied,\nit's already staged, it's ready to go,\n\n903\n00:47:34,610 --> 00:47:37,160\nand it just does the update\nminimizing your downtime.\n\n904\n00:47:38,190 --> 00:47:40,610\nYou can skip the stage button if you want.\n\n905\n00:47:40,610 --> 00:47:45,061\nIf you go straight to Remediate,\nthen it's got to copy the files over.\n\n906\n00:47:45,061 --> 00:47:50,042\nAnd once they're copied over, then it\ncan do the Update, and that's gonna take\n\n907\n00:47:50,042 --> 00:47:54,743\na longer period of time, so it's all\njust about kind of speeding things up.\n\n908\n00:47:54,743 --> 00:47:55,487\nAll right.\n\n909\n00:47:55,487 --> 00:47:59,747\nIn my case, I'm doing an upgrade but the\nservers right here on the local network,\n\n910\n00:47:59,747 --> 00:48:03,697\nand it's just this one guy that I need\nto update so I don't have to worry about\n\n911\n00:48:03,697 --> 00:48:06,905\nthe other ones and I can just go\nto Remediate and when I do that,\n\n912\n00:48:06,905 --> 00:48:11,920\nit's gonna ask what baseline group I'm\ndealing with, I'll choose my ESXi servers.\n\n913\n00:48:11,920 --> 00:48:14,550\nI'm doing the 5.5 update, and\n\n914\n00:48:14,550 --> 00:48:19,820\nsee how it's only checked off server two\nbecause the other servers are compliant.\n\n915\n00:48:19,820 --> 00:48:20,850\nIf I choose the other ones,\n\n916\n00:48:20,850 --> 00:48:24,090\nit's not gonna hurt, right,\ncuz it doesn't really have anything to do.\n\n917\n00:48:24,090 --> 00:48:27,370\nBut two is the only one I need to mess\nwith so I'll just leave the others be.\n\n918\n00:48:28,610 --> 00:48:29,930\nI'll go ahead and hit next.\n\n919\n00:48:29,930 --> 00:48:32,830\nI've got to agree to the end\nuser license for the install.\n\n920\n00:48:32,830 --> 00:48:34,470\nSo I'll choose that.\n\n921\n00:48:34,470 --> 00:48:37,110\nAnd then it's going to ask me\nsome basic information here.\n\n922\n00:48:37,110 --> 00:48:40,225\nDo I want to remove any\nthird party software that is\n\n923\n00:48:40,225 --> 00:48:41,897\nincompatible with the upgrade.\n\n924\n00:48:41,897 --> 00:48:43,875\nAll right.\nI don't have any.\n\n925\n00:48:43,875 --> 00:48:47,605\nIf I did, my upgrade pre-checker would\nhave turned that up in the first segment,\n\n926\n00:48:47,605 --> 00:48:49,645\nbut it didn't, so\nI don't have to worry about this.\n\n927\n00:48:49,645 --> 00:48:53,285\nBut if you had some, it could actually\nremove it for you during the upgrade, and\n\n928\n00:48:53,285 --> 00:48:55,705\nyou can add it back later\non with an updated version.\n\n929\n00:48:58,160 --> 00:48:59,270\nThen I can schedule it.\n\n930\n00:48:59,270 --> 00:49:00,270\nWhen do I want this to occur?\n\n931\n00:49:00,270 --> 00:49:03,060\nDo I want it to happen Saturday,\nor 1 am in the morning,\n\n932\n00:49:03,060 --> 00:49:04,780\nwhatever I can schedule that.\n\n933\n00:49:04,780 --> 00:49:06,210\nOr I can just go with immediate.\n\n934\n00:49:06,210 --> 00:49:09,506\nThat's what I'm going to do,\njust go with immediate.\n\n935\n00:49:09,506 --> 00:49:10,730\nAll right.\n\n936\n00:49:10,730 --> 00:49:13,000\nThen it's going to ask\nabout the power state,\n\n937\n00:49:13,000 --> 00:49:15,320\nwhether we want to change\nthe virtual machine power states.\n\n938\n00:49:15,320 --> 00:49:17,570\nDo we want to suspend them or\npower them off?\n\n939\n00:49:17,570 --> 00:49:21,230\nI'm going to leave it at do not change,\nI don't actually have any VMs on there, so\n\n940\n00:49:21,230 --> 00:49:23,860\nI'm not really messing with anything,\nbut you can change it.\n\n941\n00:49:23,860 --> 00:49:27,380\nYou can disable removable media\nwhile it's being updated, so\n\n942\n00:49:27,380 --> 00:49:29,430\nthat people can't pop in a DVD.\n\n943\n00:49:29,430 --> 00:49:33,230\nAnd you can try retry entering\nmaintenance mode in case of a failure.\n\n944\n00:49:33,230 --> 00:49:35,020\nTo do the upgrade,\nit's gotta go into maintenance mode,\n\n945\n00:49:35,020 --> 00:49:36,800\nwhich is gonna kinda take it offline.\n\n946\n00:49:36,800 --> 00:49:39,250\nIf something stops it from\ngoing in to maintenance mode,\n\n947\n00:49:39,250 --> 00:49:42,020\nyou can just have it retry\nat certain intervals.\n\n948\n00:49:42,020 --> 00:49:44,330\nI've got it set to five minutes,\nit'll try three times.\n\n949\n00:49:44,330 --> 00:49:44,830\nWe'll see how that goes.\n\n950\n00:49:46,888 --> 00:49:49,280\nAll right,\nnow it's ready to do the upgrade.\n\n951\n00:49:49,280 --> 00:49:52,010\nIt's going to be applying\nthat to a single server.\n\n952\n00:49:52,010 --> 00:49:55,350\nSo I'll go ahead and hit finish and\nit's gonna kick off in the background.\n\n953\n00:49:55,350 --> 00:49:57,050\nThe nice part about this?\n\n954\n00:49:57,050 --> 00:49:59,520\nI can walk away, it's doing the upgrade.\n\n955\n00:49:59,520 --> 00:50:02,810\nIf the upgrade fails for some reason,\nit'll automatically roll it back.\n\n956\n00:50:02,810 --> 00:50:04,400\nAnd the server will be at 5.0.\n\n957\n00:50:04,400 --> 00:50:08,670\nIf it's successful, it'll be at 5.5 and\nthe server will now be compliant.\n\n958\n00:50:08,670 --> 00:50:09,380\nAll right?\n\n959\n00:50:09,380 --> 00:50:12,280\nRight now it's just copying\nfiles over to that system.\n\n960\n00:50:12,280 --> 00:50:17,420\nIt does take a little while to get the\nstuff sent over there and copied in place.\n\n961\n00:50:17,420 --> 00:50:22,030\nSo we just sit here and\nlet it do its thing, right?\n\n962\n00:50:22,030 --> 00:50:24,960\nSpeaking of sitting here and letting it do\nits thing, it's probably a good spot for\n\n963\n00:50:24,960 --> 00:50:26,240\nus to stop and take a break.\n\n964\n00:50:26,240 --> 00:50:29,610\nSo, why don't we take a break while\nthat runs and does its upgrade.\n\n965\n00:50:29,610 --> 00:50:33,570\nWhen we get back, we're gonna be looking\nat, well hopefully that'll be finished so\n\n966\n00:50:33,570 --> 00:50:35,020\nwe can see a finished upgrade on it.\n\n967\n00:50:35,020 --> 00:50:38,220\nAnd the second thing we're gonna\ndo is we're gonna look at securing\n\n968\n00:50:38,220 --> 00:50:39,840\nthese default installs that we've done.\n\n969\n00:50:39,840 --> 00:50:41,150\nI've brought up several servers now,\n\n970\n00:50:41,150 --> 00:50:43,330\nand they're all really\njust in default installs.\n\n971\n00:50:43,330 --> 00:50:47,810\nSo, there's a couple of tweaks we may\nwanna make to adjust those configurations.\n\n972\n00:50:47,810 --> 00:50:49,110\nThat's gonna be coming up next.\n\n973\n00:50:49,110 --> 00:50:50,330\nStay tuned.\n\n974\n00:50:50,330 --> 00:50:55,692\nWe'll be back in a few.\n\n975\n00:50:55,692 --> 00:51:00,185\n[SOUND] All right, welcome back everybody.\n\n976\n00:51:00,185 --> 00:51:04,170\nOkay, so the upgrade is churning\nalong just fine in the background.\n\n977\n00:51:04,170 --> 00:51:06,790\nI walked over and looked at that\nphysical machine during the break and\n\n978\n00:51:06,790 --> 00:51:08,640\nit's doing its update.\n\n979\n00:51:08,640 --> 00:51:12,250\nBut it's only 22% done so it's kind of\nchurning along a little bit slowly.\n\n980\n00:51:12,250 --> 00:51:16,290\nSo we'll let it cook and\nwhile it's running, we'll go ahead and\n\n981\n00:51:16,290 --> 00:51:18,040\ntake a look at securing these installs.\n\n982\n00:51:18,040 --> 00:51:23,170\nNow when you do an installation\nof ESXi it is a very,\n\n983\n00:51:23,170 --> 00:51:24,750\nvery stripped down version of Linux.\n\n984\n00:51:24,750 --> 00:51:28,920\nSo it's really small which means they've\nleft out all the junk they didn't need,\n\n985\n00:51:28,920 --> 00:51:30,840\nthat makes it pretty secure.\n\n986\n00:51:30,840 --> 00:51:33,480\nSo a lot of exploits and\nvulnerabilities come out.\n\n987\n00:51:33,480 --> 00:51:37,150\nThey're based on software packages\nthat just aren't there in ESX.\n\n988\n00:51:37,150 --> 00:51:40,080\nThat means we've got a really reliable,\nand\n\n989\n00:51:40,080 --> 00:51:44,160\nstable, small,\nsecure operating system right off the bat.\n\n990\n00:51:44,160 --> 00:51:45,190\nBut updates do come out.\n\n991\n00:51:45,190 --> 00:51:46,000\nWe need to do that.\n\n992\n00:51:46,000 --> 00:51:50,060\nAnd there are steps that we can\ntake to further secure ESX and\n\n993\n00:51:50,060 --> 00:51:51,468\ngood just standard practices.\n\n994\n00:51:51,468 --> 00:51:52,143\nAll right.\n\n995\n00:51:52,143 --> 00:51:55,730\nOne thing that we might want\nto look at is that the host\n\n996\n00:51:55,730 --> 00:51:59,878\noperating system has a software firewall,\nthey call it the ESXi Firewall.\n\n997\n00:51:59,878 --> 00:52:05,130\nIt is pre-configured by VMware to\nhave some common security settings.\n\n998\n00:52:05,130 --> 00:52:06,650\nAnd they are good enough for most people.\n\n999\n00:52:06,650 --> 00:52:12,560\nAnd what they do, is they block all\nincoming connections to the host OS.\n\n1000\n00:52:12,560 --> 00:52:13,740\nNot the VMs, right?\n\n1001\n00:52:13,740 --> 00:52:15,480\nThe VMs, they're on their own.\n\n1002\n00:52:15,480 --> 00:52:19,270\nBut, it blocks all incoming\nconnections to the host except for\n\n1003\n00:52:19,270 --> 00:52:22,025\nconnections on the management ports.\n\n1004\n00:52:22,025 --> 00:52:23,510\nRight.\nThings like allowing the vSphere\n\n1005\n00:52:23,510 --> 00:52:24,690\nclient to attach.\n\n1006\n00:52:24,690 --> 00:52:26,720\nYou know, the port 80, port 4.43.\n\n1007\n00:52:26,720 --> 00:52:31,070\nIt also enables like SSH so\nthat we can get into the command line.\n\n1008\n00:52:31,070 --> 00:52:35,470\nSo that functionality is enabled and\nallowed through the software firewall.\n\n1009\n00:52:35,470 --> 00:52:39,220\nWe may want to strengthen that\nfurther beyond what's already done.\n\n1010\n00:52:39,220 --> 00:52:42,810\nSo I wanna show you guys that process and\ngive you a chance to look at that.\n\n1011\n00:52:42,810 --> 00:52:46,830\nNow I typically use the vSphere\nweb client to do this.\n\n1012\n00:52:46,830 --> 00:52:48,380\nWe can do it in either one.\n\n1013\n00:52:48,380 --> 00:52:51,080\nBut the web server client is\nwhere I normally jump to it.\n\n1014\n00:52:51,080 --> 00:52:52,740\nA little bit easier.\n\n1015\n00:52:52,740 --> 00:52:55,810\nAnd what we can do is we can go in\nhere and look at the firewall, and\n\n1016\n00:52:55,810 --> 00:52:58,650\nwe can look at the settings\nthat are in place right now and\n\n1017\n00:52:58,650 --> 00:53:01,300\nthen we can even modify\nthem to meet our needs.\n\n1018\n00:53:01,300 --> 00:53:05,202\nOne thing that I like to do is that,\nssh is enabled by default.\n\n1019\n00:53:05,202 --> 00:53:06,140\nAll right.\n\n1020\n00:53:06,140 --> 00:53:11,215\nSo, anybody can try to SSH into\nthat host and we all know that\n\n1021\n00:53:11,215 --> 00:53:16,270\nVMware creates a root user account by\ndefault and it's enabled with that saved.\n\n1022\n00:53:16,270 --> 00:53:17,740\nYou can log in with it.\n\n1023\n00:53:17,740 --> 00:53:20,670\nSo somebody could try and\nbrute force that account.\n\n1024\n00:53:20,670 --> 00:53:23,210\nSo what I like to do is I like\nto take that firewall rule and\n\n1025\n00:53:23,210 --> 00:53:25,160\nadd some more restrictions to it.\n\n1026\n00:53:25,160 --> 00:53:30,530\nI like to say that you can only SSH in if\nyour source IP matches a certain pattern.\n\n1027\n00:53:30,530 --> 00:53:33,170\nWe increase the security of that rule.\n\n1028\n00:53:33,170 --> 00:53:36,230\nYou might choose to disable\ncertain functionality altogether.\n\n1029\n00:53:36,230 --> 00:53:38,380\nMaybe you just don't want SSH to work.\n\n1030\n00:53:38,380 --> 00:53:41,440\nBut you do have to be careful with that,\nbecause if you disable too many things it\n\n1031\n00:53:41,440 --> 00:53:43,680\ncan interfere with\nvCenter's functionality.\n\n1032\n00:53:43,680 --> 00:53:48,490\nYou've got to make sure that\nthe vCenter is able to communicate too.\n\n1033\n00:53:48,490 --> 00:53:51,780\nSo let's take a look at\nhow that process works.\n\n1034\n00:53:51,780 --> 00:53:55,860\nAnd if we want to look at it we basically\ngo into a vSphere web client and we go\n\n1035\n00:53:55,860 --> 00:54:00,550\ninto vCenter and we need to go in and find\nour host that we're going to configure.\n\n1036\n00:54:00,550 --> 00:54:04,720\nSo I'm going to go into my hosting\nclusters and I'll find a host.\n\n1037\n00:54:04,720 --> 00:54:07,810\nI'll take, somebody is online\nlet's do server number three.\n\n1038\n00:54:09,010 --> 00:54:10,880\nLucky number three.\n\n1039\n00:54:10,880 --> 00:54:15,070\nNow when we jump into server number three\nwe really don't see a whole lot here\n\n1040\n00:54:15,070 --> 00:54:18,920\nabout security, but\nif we go under our Manage tab,\n\n1041\n00:54:18,920 --> 00:54:21,840\nwe'll start to see some of\nthe different things we can manage.\n\n1042\n00:54:21,840 --> 00:54:23,900\nIt's actually tucked in here.\n\n1043\n00:54:23,900 --> 00:54:27,260\nIf we scroll down you'll find\nSecurity Profile, it's in here some where.\n\n1044\n00:54:27,260 --> 00:54:29,410\nThere we go, that pesky alphabet thing.\n\n1045\n00:54:29,410 --> 00:54:30,610\nSecurity profile.\n\n1046\n00:54:30,610 --> 00:54:31,390\nAll right?\n\n1047\n00:54:31,390 --> 00:54:35,300\nUnder security profile, here's what\nwe're gonna see, our firewall settings.\n\n1048\n00:54:35,300 --> 00:54:37,720\nAnd you'll see all the different\nthings that are enabled, and\n\n1049\n00:54:37,720 --> 00:54:39,610\nit's telling you why.\n\n1050\n00:54:39,610 --> 00:54:40,410\nRight?\n\n1051\n00:54:40,410 --> 00:54:42,790\nHere's DHCP version 6,\n\n1052\n00:54:42,790 --> 00:54:47,170\nNFC, SNMP server, all these\ndifferent things that are turned on.\n\n1053\n00:54:47,170 --> 00:54:51,760\nAnd it's got the port that's allowed and\nwho is allowed to connect to it.\n\n1054\n00:54:51,760 --> 00:54:52,890\nAnd look at this list.\n\n1055\n00:54:52,890 --> 00:54:55,690\nIt's all, all the way down that list.\n\n1056\n00:54:55,690 --> 00:54:58,070\nSo, any incoming connection.\n\n1057\n00:54:58,070 --> 00:55:00,100\nAnd then they've got outgoing\nconnections down here,\n\n1058\n00:55:00,100 --> 00:55:01,900\nwho we're allowed to connect to.\n\n1059\n00:55:01,900 --> 00:55:05,030\nSo you'll see these entries in here,\nand you can tweak them.\n\n1060\n00:55:05,030 --> 00:55:06,140\nHowever you want.\n\n1061\n00:55:06,140 --> 00:55:11,770\nNotice here the NFS client has an entry\nhere for zero TCP to 10.1.230.100.\n\n1062\n00:55:11,770 --> 00:55:20,410\nWell that's actually a little\nlike naz box that I have setup.\n\n1063\n00:55:20,410 --> 00:55:22,310\nWhere I have my ISO images and\nstuff stored at.\n\n1064\n00:55:22,310 --> 00:55:23,880\nI created a data store for that.\n\n1065\n00:55:23,880 --> 00:55:28,480\nSo it created this roll automatically for\nthe NFS client to handle that connection.\n\n1066\n00:55:28,480 --> 00:55:32,740\nSo it will add and modify rules as needed,\nbased on your environment.\n\n1067\n00:55:32,740 --> 00:55:35,230\nBut most of these are gonna be saying,\nall.\n\n1068\n00:55:35,230 --> 00:55:35,790\nAll right?\n\n1069\n00:55:35,790 --> 00:55:36,620\nSo I wanna change that.\n\n1070\n00:55:36,620 --> 00:55:38,340\nI wanna change that for\nmy incoming connections.\n\n1071\n00:55:38,340 --> 00:55:41,610\nI don't want just anybody to\nbe able to SSH into this box.\n\n1072\n00:55:41,610 --> 00:55:43,480\nSo I can hit Edit.\n\n1073\n00:55:43,480 --> 00:55:45,210\nAnd it'll pull up the rules.\n\n1074\n00:55:45,210 --> 00:55:45,917\nAnd I can modify it.\n\n1075\n00:55:45,917 --> 00:55:47,635\nSo here's Secure Shell.\n\n1076\n00:55:47,635 --> 00:55:52,234\nAnd I can find the SSH server right here\nand I could turn it off if I wanted.\n\n1077\n00:55:52,234 --> 00:55:57,136\nBut, it's got the incoming port, the\noutgoing port, the protocol, and then down\n\n1078\n00:55:57,136 --> 00:56:02,510\nhere I can see IP addresses, and it's set\nto allow connections from any IP address.\n\n1079\n00:56:02,510 --> 00:56:05,750\nI might not want that,\nI'm gonna change it, so\n\n1080\n00:56:05,750 --> 00:56:09,050\nthat it's just my local network,\n10.1.230.0/24.\n\n1081\n00:56:09,050 --> 00:56:13,870\nThat means anybody whose\nIP address starts with\n\n1082\n00:56:13,870 --> 00:56:18,052\n10.1.230, we'll be able\nto connect to this host.\n\n1083\n00:56:18,052 --> 00:56:21,880\nAll right, but anybody on a different\nnetwork won't be able to connect in.\n\n1084\n00:56:21,880 --> 00:56:23,850\nThis tightens the security and\n\n1085\n00:56:23,850 --> 00:56:26,722\nrestricts, who's gonna be able\nto connect to that system.\n\n1086\n00:56:26,722 --> 00:56:30,130\nAll right, and you can do commas to\nput in specific IPs if you want.\n\n1087\n00:56:30,130 --> 00:56:31,272\nI'm just gonna do the whole subnet.\n\n1088\n00:56:31,272 --> 00:56:35,240\nAll right, so\nnow when I take a look at that rule.\n\n1089\n00:56:38,190 --> 00:56:39,310\nNow, let's see, it failed,\n\n1090\n00:56:39,310 --> 00:56:41,740\ncannot change the host configuration,\nwonder why it did that.\n\n1091\n00:56:41,740 --> 00:56:44,740\nWell, I got a warning about it failing,\nbut\n\n1092\n00:56:44,740 --> 00:56:46,842\nthen it actually took effect,\nthat's entertaining.\n\n1093\n00:56:46,842 --> 00:56:51,900\nAll right, so, if it fails to apply,\nit will actually retry,\n\n1094\n00:56:51,900 --> 00:56:55,370\nand apparently it worked on the retry so\nthere I can see ss8 server.\n\n1095\n00:56:55,370 --> 00:56:59,930\nNow has that limitation, it's limiting\nit down to that particular subnet.\n\n1096\n00:56:59,930 --> 00:57:03,110\nSo, this is an example of what you\nmight wanna do with that firewall.\n\n1097\n00:57:03,110 --> 00:57:07,630\nThis is host security,\ncontrolling who can touch the host.\n\n1098\n00:57:07,630 --> 00:57:12,080\nYou might be hosting public\nweb serves on this host.\n\n1099\n00:57:12,080 --> 00:57:14,140\nWell, you want the internet, right?\n\n1100\n00:57:14,140 --> 00:57:16,920\nThe public to be able to get to\nthe web servers to get to the VMs.\n\n1101\n00:57:16,920 --> 00:57:19,130\nYou don't want them to be\nable to get to the hosts.\n\n1102\n00:57:19,130 --> 00:57:21,970\nSo, controlling it here with a software\nfirewall, is one way to do that.\n\n1103\n00:57:21,970 --> 00:57:25,130\nObviously a physical\nfirewall is even better.\n\n1104\n00:57:25,130 --> 00:57:28,520\nBut, if the attacker is\ninside your organization,\n\n1105\n00:57:28,520 --> 00:57:30,190\nthen they're behind\nthat physical firewall.\n\n1106\n00:57:30,190 --> 00:57:32,430\nSo this gives us a second line of defense.\n\n1107\n00:57:32,430 --> 00:57:33,560\nTo protect our hosts.\n\n1108\n00:57:35,020 --> 00:57:38,950\nAll right, so that's one security\nmechanism I like to take.\n\n1109\n00:57:38,950 --> 00:57:42,838\nAnother security mechanism\nis lock-down mode.\n\n1110\n00:57:42,838 --> 00:57:46,030\nWe saw lock-down mode,\na little bit in one of yesterday's shows,\n\n1111\n00:57:46,030 --> 00:57:48,870\nwhen I added a server to vCenter.\n\n1112\n00:57:48,870 --> 00:57:52,570\nWhen we said it was gonna be managed\nby vCenter, during the wizard,\n\n1113\n00:57:52,570 --> 00:57:56,030\nit prompted me as to whether or\nnot I wanted to use lock-down load.\n\n1114\n00:57:56,030 --> 00:57:59,808\nLet me show you that again, in case\nanybody didn't watch the other episodes.\n\n1115\n00:57:59,808 --> 00:58:03,080\nSo, I'm gonna go and\nadd in a new server into Orlando here.\n\n1116\n00:58:04,750 --> 00:58:08,070\nAnd or actually let me get to\n\n1117\n00:58:13,820 --> 00:58:14,840\nhere, hosts.\n\n1118\n00:58:16,970 --> 00:58:18,620\nAnd I'll just add in a new host.\n\n1119\n00:58:22,708 --> 00:58:26,450\nAnd I'm gonna add in my server\nsix that is the one I upgraded,\n\n1120\n00:58:26,450 --> 00:58:30,718\nthe one I did the manual upgrade\nfrom 5.0 to 5.5, that's my server 6.\n\n1121\n00:58:30,718 --> 00:58:34,080\nSo, I'm gonna add that one,\nit's not added to the system yet.\n\n1122\n00:58:34,080 --> 00:58:37,870\nAnd so I'll get it added and\nI'll add it to Orlando.\n\n1123\n00:58:37,870 --> 00:58:44,790\nAll right, now when you add a server\nto be managed by vCenter, one\n\n1124\n00:58:44,790 --> 00:58:48,810\nof the things that it asks you is whether\nyou want to put it in lock-down mode.\n\n1125\n00:58:48,810 --> 00:58:50,880\nSo, as I move through my screens here,\nI'll get to this here.\n\n1126\n00:58:50,880 --> 00:58:53,210\nDo I want to enable lock-down mode.\n\n1127\n00:58:53,210 --> 00:58:59,920\nIf I turn that On, then the only way to\nmanage that system is through vCenter.\n\n1128\n00:58:59,920 --> 00:59:02,690\nIf somebody tries to\nlaunch vSphere client, and\n\n1129\n00:59:02,690 --> 00:59:06,110\nconnect directly to that\nhost it won't work.\n\n1130\n00:59:06,110 --> 00:59:10,069\nAnd even the direct counsel user interface\nthe DCUI is limited at that point.\n\n1131\n00:59:11,198 --> 00:59:15,350\nSo the lock-down mode, it's a great way to\nsecure a server that you don't necessarily\n\n1132\n00:59:15,350 --> 00:59:17,600\nhave in a secured physical location.\n\n1133\n00:59:17,600 --> 00:59:20,990\nIt helps to protect from that and\nincrease security on.\n\n1134\n00:59:20,990 --> 00:59:23,350\nWell, this is the easiest way\nto turn it on, right here.\n\n1135\n00:59:23,350 --> 00:59:26,940\nIf we turn it on in this wizard\nit's super simple, and it's done.\n\n1136\n00:59:26,940 --> 00:59:28,380\nBut, lets say we don't.\n\n1137\n00:59:28,380 --> 00:59:30,560\nSo, like on this server,\nI'm not gonna turn it on.\n\n1138\n00:59:30,560 --> 00:59:33,230\nOkay so I'm just going to add it.\n\n1139\n00:59:33,230 --> 00:59:35,340\nAnd its going to get added to Orlando.\n\n1140\n00:59:35,340 --> 00:59:36,510\nAnd there we go all right.\n\n1141\n00:59:36,510 --> 00:59:39,290\nSo, I'm adding it in and\nit will just be in my server list.\n\n1142\n00:59:39,290 --> 00:59:41,510\nAll right, so now I've got it wonderful.\n\n1143\n00:59:41,510 --> 00:59:42,710\nBut, now I've changed my mind.\n\n1144\n00:59:42,710 --> 00:59:45,320\nI want to turn on lock-down mode.\n\n1145\n00:59:45,320 --> 00:59:48,800\nWell, you actually can't turn\non lock-down mode from here.\n\n1146\n00:59:48,800 --> 00:59:52,170\nAnd let me show you what I mean,\nif I go into manage and\n\n1147\n00:59:52,170 --> 00:59:55,200\nsecurity profile I'm rushing it.\n\n1148\n00:59:55,200 --> 00:59:56,630\nIt's still inventorying that server.\n\n1149\n00:59:56,630 --> 00:59:58,970\nSo, let me give it a moment there.\n\n1150\n01:00:00,120 --> 01:00:03,390\nWhen you adda server, it's gotta do\nan initial inventory to collect it's data.\n\n1151\n01:00:03,390 --> 01:00:04,930\nThere we go and see,\n\n1152\n01:00:04,930 --> 01:00:09,050\nhow if I look in here under security\nprofile, I've got the firewall.\n\n1153\n01:00:09,050 --> 01:00:11,900\nAnd if I scroll down,\nI can see lock-down mode.\n\n1154\n01:00:11,900 --> 01:00:12,855\nHere's the lockdown mode.\n\n1155\n01:00:12,855 --> 01:00:15,460\nLock-down mode is currently disabled,\nokay?\n\n1156\n01:00:15,460 --> 01:00:19,150\nIf I edit that It's got\nwhere I can enable it.\n\n1157\n01:00:19,150 --> 01:00:24,040\nAnd on newer versions of ESX, like in 5.5,\nthis'll work and it'll turn it on.\n\n1158\n01:00:24,040 --> 01:00:26,550\nBut, if you're managing\nolder versionS of ESX,\n\n1159\n01:00:26,550 --> 01:00:28,580\nit won't let you turn it on from here.\n\n1160\n01:00:28,580 --> 01:00:30,980\nIt had to be done during the wizard,\nor it's too late.\n\n1161\n01:00:30,980 --> 01:00:34,050\nAnd so in that case,\nyou need to enable it another way.\n\n1162\n01:00:34,050 --> 01:00:36,640\nAnd there's several different\nways to turn it on.\n\n1163\n01:00:36,640 --> 01:00:39,080\nOne of the easiest is through the DCUI.\n\n1164\n01:00:39,080 --> 01:00:41,140\nSo, let's say I came in here and\nthis way grayed out.\n\n1165\n01:00:41,140 --> 01:00:43,640\nAnd I didn't have that\noption to turn it on.\n\n1166\n01:00:43,640 --> 01:00:47,680\nIf I was running an older version of\nESXI instead of enabling lock-down mode,\n\n1167\n01:00:47,680 --> 01:00:51,710\nhere I might jump over to\nthat machine's console\n\n1168\n01:00:53,440 --> 01:00:58,510\nand at the console we just press F2 and\nwe log in.\n\n1169\n01:01:01,210 --> 01:01:03,030\nAnd once we log in,\n\n1170\n01:01:03,030 --> 01:01:08,060\nwe'll see the option to turn on lock down\nmode right here, configure lock down mode.\n\n1171\n01:01:08,060 --> 01:01:10,680\nSo we can always turn\nin on after the fact,\n\n1172\n01:01:10,680 --> 01:01:14,540\nif we changed our mind here\ndirectly through the console.\n\n1173\n01:01:14,540 --> 01:01:18,740\nOr, if it's a supported version we\ncan do it via the WebSphere client.\n\n1174\n01:01:20,040 --> 01:01:23,150\nAll right, so there we go,\nnow I can see it is enabled and\n\n1175\n01:01:23,150 --> 01:01:26,810\nit's just telling us prevent users from\nlogging in directly into this host.\n\n1176\n01:01:26,810 --> 01:01:29,920\nThis host will only be available\nthrough this local console,\n\n1177\n01:01:29,920 --> 01:01:32,530\nor an authorized centralized\nmanagement application.\n\n1178\n01:01:32,530 --> 01:01:36,590\nIn other words, you can use vCenter or\nright here from the DCUI.\n\n1179\n01:01:36,590 --> 01:01:41,320\nThere are actually just a couple of little\nfeatures of the DCUI that get limited, but\n\n1180\n01:01:41,320 --> 01:01:43,160\nfor the most part we can get in here and\nwork with it.\n\n1181\n01:01:43,160 --> 01:01:46,696\nYou can actually turn off lock-down\nmode if you want from here.\n\n1182\n01:01:46,696 --> 01:01:51,524\nSo, you do still have to provide some\nphysical security to the system as\n\n1183\n01:01:51,524 --> 01:01:53,941\nfar as like a password or whatever.\n\n1184\n01:01:53,941 --> 01:01:59,166\nAll right, so a couple of\ndifferent ways to go about that.\n\n1185\n01:01:59,166 --> 01:02:02,485\nAll right, now let's see,\nwhat else do we have?\n\n1186\n01:02:02,485 --> 01:02:06,740\nPermissions, I lightly touched on\npermissions during the first episode when\n\n1187\n01:02:06,740 --> 01:02:08,160\nwe installed vCenter.\n\n1188\n01:02:08,160 --> 01:02:11,550\nRemember we installed vCenter and\nI said, it creates this default account,\n\n1189\n01:02:11,550 --> 01:02:15,900\nadministrator at vCenter.local, and\nthat account has access to everything.\n\n1190\n01:02:15,900 --> 01:02:19,230\nAnd then nobody has access\nto anything at all.\n\n1191\n01:02:19,230 --> 01:02:23,350\nSo, I said what if I want my domain admins\nand active directory to have access to\n\n1192\n01:02:23,350 --> 01:02:26,000\nthe server so\nwe made them an administrator, right?\n\n1193\n01:02:26,000 --> 01:02:29,180\nBut, that's really all we did\nwe added that right to them and\n\n1194\n01:02:29,180 --> 01:02:33,740\ngave them that access, but we may have\nother needs in our environment, we might\n\n1195\n01:02:33,740 --> 01:02:37,160\nhave like help desk employees that may\nneed to do certain things and so on.\n\n1196\n01:02:37,160 --> 01:02:39,790\nSo, we might need to create our own\n\n1197\n01:02:39,790 --> 01:02:42,600\nroles as another extension\nof securing our environment.\n\n1198\n01:02:42,600 --> 01:02:44,590\nSo let's take a look at that.\n\n1199\n01:02:44,590 --> 01:02:48,292\nIn our vSphere web client,\nlet me just go back to the home page,\n\n1200\n01:02:48,292 --> 01:02:51,245\nit will we go to administration.\n\n1201\n01:02:52,365 --> 01:02:55,635\nunder administration, here's where we\nset up our single sign on and stuff, but\n\n1202\n01:02:55,635 --> 01:02:59,085\nthe screen I want is already\nchosen by default roles.\n\n1203\n01:02:59,085 --> 01:03:03,255\nThese are the roles that are included for\nsecurity permissions inside of vCenter,\n\n1204\n01:03:03,255 --> 01:03:06,525\nand there's really only two, or\nthree that are intended for use.\n\n1205\n01:03:06,525 --> 01:03:10,395\nI've talked about these before, but\njust to summarize them, no access, that's\n\n1206\n01:03:10,395 --> 01:03:14,570\na user whose not allowed to log into\nvCenter, their not allowed to do anything.\n\n1207\n01:03:14,570 --> 01:03:18,320\nRead only, they can log in and\nsee everything, but\n\n1208\n01:03:18,320 --> 01:03:20,320\nthey can't change anything.\n\n1209\n01:03:20,320 --> 01:03:21,980\nThat's great if you have like a help desk,\n\n1210\n01:03:21,980 --> 01:03:24,610\nthat you just want to be\nable to monitor the system.\n\n1211\n01:03:24,610 --> 01:03:29,270\nRead only will let them do that, but they\nwont actually be able to do any changes.\n\n1212\n01:03:29,270 --> 01:03:32,350\nAdministrators on the other hand,\nthey can do everything.\n\n1213\n01:03:32,350 --> 01:03:35,990\nAnd as I click on each of them, on the\nright it's showing me who is using them.\n\n1214\n01:03:35,990 --> 01:03:40,590\nSo, when I choose Administrator, I can\nsee it's defined on our vCenter server,\n\n1215\n01:03:40,590 --> 01:03:41,537\nVM-SERVER1.\n\n1216\n01:03:41,537 --> 01:03:45,957\nIt's assigned to the\nVSPHERE.LOCAL/Administrator account that\n\n1217\n01:03:45,957 --> 01:03:47,562\nwas created by default.\n\n1218\n01:03:47,562 --> 01:03:49,317\nAnd lab slash domain admins.\n\n1219\n01:03:49,317 --> 01:03:51,970\nThat's what I added in,\nin yesterday's shows.\n\n1220\n01:03:53,730 --> 01:03:58,670\nIf I choose privileges though, here's\nwhere I can see what access they have.\n\n1221\n01:03:58,670 --> 01:04:06,370\nAnd see how if I go under host I\ncan see that If I go to host and\n\n1222\n01:04:06,370 --> 01:04:09,110\nconfiguration there's all these options\nhere checked for an administrator.\n\n1223\n01:04:09,110 --> 01:04:11,510\nAnd an administrator can\ndo whatever they want.\n\n1224\n01:04:11,510 --> 01:04:15,360\nIf I go to read only, and\nI take a look under host and\n\n1225\n01:04:15,360 --> 01:04:18,390\nconfiguration, none of these are checked,\nright.\n\n1226\n01:04:18,390 --> 01:04:21,700\nThey're not checked off because access\nisn't being granted on these, right.\n\n1227\n01:04:21,700 --> 01:04:24,210\nThey can't configure\nauthentication stores,\n\n1228\n01:04:24,210 --> 01:04:29,330\nthey don't have that access,\nthey can just look and see, so up above.\n\n1229\n01:04:29,330 --> 01:04:32,770\nOr actually somewhere in here there'll\nbe a read settings option, and\n\n1230\n01:04:32,770 --> 01:04:34,410\nthat'll be the one that is approved.\n\n1231\n01:04:34,410 --> 01:04:37,060\nIt'll be buried in here somewhere.\n\n1232\n01:04:37,060 --> 01:04:39,720\nI'm not quite sure where.\n\n1233\n01:04:39,720 --> 01:04:43,770\nBut you'll find those settings in\nhere based on what that user does.\n\n1234\n01:04:43,770 --> 01:04:46,140\nThere are a ton of settings in here.\n\n1235\n01:04:46,140 --> 01:04:48,310\nI've never counted, but\nit's well over 200.\n\n1236\n01:04:48,310 --> 01:04:50,360\nThere's a lot of settings.\n\n1237\n01:04:50,360 --> 01:04:53,600\nAs a result, we're not normally\ngoing to create these from scratch.\n\n1238\n01:04:53,600 --> 01:04:56,150\nVMWare has put some sample ones in here.\n\n1239\n01:04:56,150 --> 01:04:58,300\nVirtual Machine Power User.\n\n1240\n01:04:58,300 --> 01:04:59,190\nVirtual Machine User.\n\n1241\n01:04:59,190 --> 01:04:59,730\nA user?\n\n1242\n01:04:59,730 --> 01:05:02,710\nThat might be somebody who's allowed\nto connect to the console of it.\n\n1243\n01:05:02,710 --> 01:05:03,930\nBut a Power User?\n\n1244\n01:05:03,930 --> 01:05:07,850\nThey might be able to reboot it and\nchange the memory configuration.\n\n1245\n01:05:07,850 --> 01:05:12,320\nYou've got a resource pool administrator,\nVMR consolidated backup users.\n\n1246\n01:05:12,320 --> 01:05:15,260\nSo these are different ones\nthat are created based on\n\n1247\n01:05:15,260 --> 01:05:18,440\nthe roles that person\nserves within a company.\n\n1248\n01:05:18,440 --> 01:05:21,810\nAnd, over here, the permissions\nare changing reflecting what I've chosen.\n\n1249\n01:05:21,810 --> 01:05:23,790\nSo if I choose network administrator.\n\n1250\n01:05:23,790 --> 01:05:25,750\nSee how network has a box on it?\n\n1251\n01:05:25,750 --> 01:05:29,150\nAnd if I look under network I can\nsee assign network is chosen.\n\n1252\n01:05:29,150 --> 01:05:33,420\nThis person can connect to virtual\nmachines and assign a network to them.\n\n1253\n01:05:33,420 --> 01:05:34,220\nBut that's it.\n\n1254\n01:05:34,220 --> 01:05:35,640\nThey can't configure the networks.\n\n1255\n01:05:35,640 --> 01:05:37,260\nThey can't create them, right.\n\n1256\n01:05:37,260 --> 01:05:38,650\nThey can just assign them.\n\n1257\n01:05:40,050 --> 01:05:41,510\nAnd data store consumer, same thing.\n\n1258\n01:05:41,510 --> 01:05:45,160\nThey'll have access that's limited to\nsome particular aspects of their role.\n\n1259\n01:05:45,160 --> 01:05:48,050\nSo under data store we\ncan see allocate space.\n\n1260\n01:05:48,050 --> 01:05:51,290\nThey can create storage units\ninside of our data store.\n\n1261\n01:05:52,880 --> 01:05:55,420\nIf you want to create your own role,\nright.\n\n1262\n01:05:55,420 --> 01:05:58,280\nSo maybe you have a help desk, and\nyou want the help desk to have read only\n\n1263\n01:05:58,280 --> 01:06:02,270\naccess but also be able to\nreboot virtual machines, right?\n\n1264\n01:06:02,270 --> 01:06:05,000\nSo you can take Read- only and\nyou can clone it.\n\n1265\n01:06:05,000 --> 01:06:06,110\nThat's the recommendation.\n\n1266\n01:06:06,110 --> 01:06:09,840\nDon't try to create one from scratch,\nbut clone an existing one.\n\n1267\n01:06:09,840 --> 01:06:14,550\nAnd so I could clone Read-only and\nI can call it Help Desk.\n\n1268\n01:06:14,550 --> 01:06:17,350\nAnd then it's already got the Read-Only\npermission chosen in here,\n\n1269\n01:06:17,350 --> 01:06:18,910\nwhich you will see is really nothing.\n\n1270\n01:06:18,910 --> 01:06:20,490\nRight?\nNone of that seems to be chosen.\n\n1271\n01:06:20,490 --> 01:06:22,390\nWe can see but not change and\n\n1272\n01:06:22,390 --> 01:06:25,420\nthen from here I can go in and\nadd what it is that I need.\n\n1273\n01:06:25,420 --> 01:06:30,600\nSo if I go in and I find host,\nand under host we should be able\n\n1274\n01:06:30,600 --> 01:06:35,868\nto find like local operations and\nsomewhere in here we'll have reboot or,\n\n1275\n01:06:35,868 --> 01:06:40,340\nlet's see, apparently it's\nnot under local operations,\n\n1276\n01:06:40,340 --> 01:06:44,110\nlet's see if we can figure out\nwhere the reboot option is in here.\n\n1277\n01:06:44,110 --> 01:06:44,970\nHere, power.\n\n1278\n01:06:44,970 --> 01:06:48,130\nOkay so we can give them the power\noptions so power system operations, and\n\n1279\n01:06:48,130 --> 01:06:50,380\nyou'll see that includes things\nlike rebooting and so on.\n\n1280\n01:06:50,380 --> 01:06:56,140\nWe'll check that out and\nnow not only are they able to read,\n\n1281\n01:06:56,140 --> 01:06:58,460\nthe servers and\nlook at what's going on, but\n\n1282\n01:06:58,460 --> 01:07:01,670\nthey'll also have the permission\nto go in and power cycle a server.\n\n1283\n01:07:01,670 --> 01:07:05,120\nSo if it locks up or whatever,\nthey can reboot it, and off it goes.\n\n1284\n01:07:05,120 --> 01:07:08,380\nSo you can create your own\nroles based on your needs.\n\n1285\n01:07:08,380 --> 01:07:09,900\nAnd so there it is, Help Desk.\n\n1286\n01:07:11,110 --> 01:07:13,190\nYou can add them from scratch if you want,\nbut\n\n1287\n01:07:13,190 --> 01:07:15,880\nlike I said it's not typically\nsomething that we're going to do.\n\n1288\n01:07:17,610 --> 01:07:21,810\nAll right, from there we can just\nadd in users into those roles, so\n\n1289\n01:07:21,810 --> 01:07:24,760\nif you go under Users and\nGroups you can find the users you want.\n\n1290\n01:07:24,760 --> 01:07:27,710\nRemember with your user accounts\nyou've got vsphere.local.\n\n1291\n01:07:27,710 --> 01:07:30,278\nThose are ones that\nare created just in vSphere.\n\n1292\n01:07:30,278 --> 01:07:31,590\nI've got VM-SERVER1.\n\n1293\n01:07:31,590 --> 01:07:35,740\nThose will be local accounts\non the server running vCenter.\n\n1294\n01:07:35,740 --> 01:07:37,830\nAnd then i've got lab.itpro.tv.\n\n1295\n01:07:37,830 --> 01:07:41,420\nThat's my active directory that\nwe integrated earlier, right.\n\n1296\n01:07:41,420 --> 01:07:45,460\nSo, I can pick somebody like Nate here,\nand I could take him and\n\n1297\n01:07:45,460 --> 01:07:48,915\nI could put him and I could put him into\none of those roles like help Desk, and\n\n1298\n01:07:48,915 --> 01:07:52,025\nthen that's the access that you would\nhave when you work for the system.\n\n1299\n01:07:52,025 --> 01:07:52,625\nAll right.\n\n1300\n01:07:52,625 --> 01:07:54,575\nAnd you can create groups the same way.\n\n1301\n01:07:54,575 --> 01:07:56,095\nYou can put members into those groups.\n\n1302\n01:07:56,095 --> 01:07:58,135\nYou can do all sorts of\ndifferent things from in here,\n\n1303\n01:07:58,135 --> 01:08:00,375\nbased on what it is you\nneed in your environment.\n\n1304\n01:08:00,375 --> 01:08:01,355\nSo very customizable.\n\n1305\n01:08:03,755 --> 01:08:08,860\nNow once you've created those roles\nyou can then assign permissions,\n\n1306\n01:08:08,860 --> 01:08:12,400\neither based on the roles, but\nmore commonly assign permissions based on\n\n1307\n01:08:12,400 --> 01:08:15,870\nthe groups or\nthe user accounts themselves.\n\n1308\n01:08:15,870 --> 01:08:21,280\nSo if Nate, for example, let's say he's\ngoing to be a network administrator for\n\n1309\n01:08:21,280 --> 01:08:23,810\nall the servers in Gainesville, okay?\n\n1310\n01:08:23,810 --> 01:08:27,454\nSo when I go back to my home screen and\nI go into Vcenter,\n\n1311\n01:08:27,454 --> 01:08:31,150\nand I go into my day- well\nI go into hosts, right.\n\n1312\n01:08:31,150 --> 01:08:32,830\nSo, Ive got my various servers.\n\n1313\n01:08:32,830 --> 01:08:34,010\nSome of them are in Gainesville,\n\n1314\n01:08:34,010 --> 01:08:37,040\nsome of them are in Orlando\nthey're in different places.\n\n1315\n01:08:37,040 --> 01:08:41,190\nIf i want to give him permissions to each\nof the servers in Gainesville I could do\n\n1316\n01:08:41,190 --> 01:08:41,740\nit one by one.\n\n1317\n01:08:41,740 --> 01:08:44,190\nI could go to each server in Gainesville.\n\n1318\n01:08:44,190 --> 01:08:46,960\nAnd I can go in and\nassign him permissions, right here,\n\n1319\n01:08:46,960 --> 01:08:49,990\nby going to manage and permissions, okay?\n\n1320\n01:08:49,990 --> 01:08:52,740\nI can knock that out right here.\n\n1321\n01:08:52,740 --> 01:08:57,070\nPermissions can propagate inside of ESX,\ninside of V center.\n\n1322\n01:08:57,070 --> 01:08:59,370\nThat's kind of nice,\nbecause it makes things a lot easier.\n\n1323\n01:08:59,370 --> 01:09:03,730\nIf I assign the permissions on the servers\ndirectly, every time I add a new server,\n\n1324\n01:09:03,730 --> 01:09:05,960\nI've got to go and\nreassign permissions to it.\n\n1325\n01:09:05,960 --> 01:09:06,720\nRight?\n\n1326\n01:09:06,720 --> 01:09:08,730\nBut if I assign it to a higher level,\n\n1327\n01:09:08,730 --> 01:09:12,530\nthe permissions will propagate down\nwhich will include new servers.\n\n1328\n01:09:12,530 --> 01:09:15,850\nSo if I want Nate to be able to\nmanage every server in Gainesville,\n\n1329\n01:09:15,850 --> 01:09:17,950\nI can just go back to my data centers.\n\n1330\n01:09:19,020 --> 01:09:21,590\nAnd in my data center I\ncan pick Gainesville.\n\n1331\n01:09:23,690 --> 01:09:30,690\nAnd I can go to manage and permissions and\nI can give him permissions right here.\n\n1332\n01:09:30,690 --> 01:09:34,470\nWhen you assign somebody permission so\nI'll just add in somebody.\n\n1333\n01:09:34,470 --> 01:09:36,770\nI'm going to add in Nate so\nI'll just hit add.\n\n1334\n01:09:37,875 --> 01:09:40,565\nAnd I'll find it, I could do a group and\nthat would usually be better if you had\n\n1335\n01:09:40,565 --> 01:09:43,955\na help desk group, you would put all\nyour help desk users in that group.\n\n1336\n01:09:43,955 --> 01:09:46,535\nBut for right now,\nI'll just grab Nate individually.\n\n1337\n01:09:46,535 --> 01:09:48,485\nHe's in the lab domain.\n\n1338\n01:09:48,485 --> 01:09:49,725\nSo I'll just find him in here.\n\n1339\n01:09:50,775 --> 01:09:54,475\nThere we go.\nAll right, so\n\n1340\n01:09:54,475 --> 01:09:57,420\nI'm adding Nate and\non the right side here I'll pick\n\n1341\n01:09:57,420 --> 01:09:59,520\nthat help desk role that I\ncreated just a moment ago.\n\n1342\n01:09:59,520 --> 01:10:03,380\nSo Nate is going to be a help\ndesk user in Gainesville.\n\n1343\n01:10:03,380 --> 01:10:07,420\nAnd then you've got this checkbox\nright here, \"propagate to children\".\n\n1344\n01:10:07,420 --> 01:10:12,740\nIf I don't check that, he'll be able to\nlook at the data center of Gainesville,\n\n1345\n01:10:12,740 --> 01:10:15,910\nand he'll have power option\ncontrol over the data center.\n\n1346\n01:10:15,910 --> 01:10:20,540\nBut not the VMs themselves, but\nthis is checked by default.\n\n1347\n01:10:20,540 --> 01:10:23,410\nSo it will apply to all of the servers\nthat are in Gainesville, and\n\n1348\n01:10:23,410 --> 01:10:26,190\nas I add new servers,\nit'll get permissions on those too,\n\n1349\n01:10:26,190 --> 01:10:30,355\nand that's normally what we want, and\nthat's why it is checked by default.\n\n1350\n01:10:30,355 --> 01:10:33,545\nBut if this is a special thing, a one-off\nthing, you might want to uncheck that and\n\n1351\n01:10:33,545 --> 01:10:35,645\nit will only apply to this level.\n\n1352\n01:10:35,645 --> 01:10:38,435\nIf you don't know who the children are,\nyou can always hit View Children.\n\n1353\n01:10:38,435 --> 01:10:40,425\nAnd it'll give you a list\nof what's in Gainesville.\n\n1354\n01:10:40,425 --> 01:10:44,065\nSo I can see I'm about to give\nhim Server1, Server2 and Server5.\n\n1355\n01:10:46,290 --> 01:10:49,360\nAll right so I'm going to do that and,\nI'll apply it.\n\n1356\n01:10:49,360 --> 01:10:53,720\nNow, Nate has help desk permissions\nwhich gives him view and\n\n1357\n01:10:53,720 --> 01:10:58,490\npower control over the Gainesville data\ncenter and every server inside of it.\n\n1358\n01:10:58,490 --> 01:11:00,240\nEvery ESX server that I add or host.\n\n1359\n01:11:02,162 --> 01:11:05,910\nAll right, so keep that in mind especially\non the exam that the permissions\n\n1360\n01:11:05,910 --> 01:11:08,690\npropagate down to lower levels by default.\n\n1361\n01:11:08,690 --> 01:11:10,930\nBut they can be unchecked, so\njust be on the look out for that one.\n\n1362\n01:11:13,612 --> 01:11:17,988\nAll right, another thing that can\nbe useful is when we define these\n\n1363\n01:11:17,988 --> 01:11:22,130\npermissions, if I'm going to be\ndoing this over and over, and\n\n1364\n01:11:22,130 --> 01:11:26,880\nover again, to handle individual\nservers of a specific need.\n\n1365\n01:11:26,880 --> 01:11:29,270\nI might want to create what's\ncalled the host profile.\n\n1366\n01:11:29,270 --> 01:11:33,130\nNow, this profile is like a template,\na template where we can set up permissions\n\n1367\n01:11:33,130 --> 01:11:35,970\nand then we can just quickly\napply that wherever we want.\n\n1368\n01:11:35,970 --> 01:11:37,690\nThose are done back under our home screen.\n\n1369\n01:11:37,690 --> 01:11:40,907\nSo, if I go back to home.\n\n1370\n01:11:40,907 --> 01:11:46,082\nAll right, we can go here, and\nyou've got this rules and profiles link.\n\n1371\n01:11:46,082 --> 01:11:47,685\nSo, I'm not actually in V Center here.\n\n1372\n01:11:47,685 --> 01:11:49,183\nI'm going into Rules and Profiles.\n\n1373\n01:11:49,183 --> 01:11:52,144\nAnd here is where you can create\nhost profiles, all right?\n\n1374\n01:11:52,144 --> 01:11:56,780\nAnd these are basically templates for\nwhat you want your settings to be and\n\n1375\n01:11:56,780 --> 01:12:01,338\nI can go in and hit Add and when you\nhit the add button it's actually saying\n\n1376\n01:12:01,338 --> 01:12:05,973\nextract profile from the host and\nwhat it's gonna do is it's gonna look at\n\n1377\n01:12:05,973 --> 01:12:10,020\na current host and\nit's gonna pull the settings out of it.\n\n1378\n01:12:10,020 --> 01:12:12,250\nAnd it's gonna get things\nlike permissions, but\n\n1379\n01:12:12,250 --> 01:12:13,890\nit's also gonna get other settings.\n\n1380\n01:12:13,890 --> 01:12:16,650\nFor example, if I get ESX server 6,\n\n1381\n01:12:16,650 --> 01:12:19,190\nremember that's the one that\nI changed the firewall on.\n\n1382\n01:12:19,190 --> 01:12:22,100\nAnd I limited access to SSH.\n\n1383\n01:12:22,100 --> 01:12:24,140\nSo if I choose that one,\n\n1384\n01:12:24,140 --> 01:12:28,880\nit's going to extract the from it which\nwill include the firewall settings too.\n\n1385\n01:12:28,880 --> 01:12:31,750\nSo it's going to grab that and\nbuild a profile out of it.\n\n1386\n01:12:31,750 --> 01:12:34,950\nSo I'll call this my\nitprotvdefaulthostprofile, all right?\n\n1387\n01:12:34,950 --> 01:12:39,030\nThis is what I want my\ndefault host to have.\n\n1388\n01:12:40,290 --> 01:12:41,830\nAnd so I can finish that up.\n\n1389\n01:12:41,830 --> 01:12:46,340\nAnd it's gonna extract all those settings\nout of ESX Server 6 and now when I deploy\n\n1390\n01:12:46,340 --> 01:12:50,960\na new server I can apply this profile\nto it and it'll get the same settings.\n\n1391\n01:12:50,960 --> 01:12:54,393\nSo I don't have to remember to go and get\neach individual setting, kinda saves time.\n\n1392\n01:12:54,393 --> 01:12:56,994\nIt's like building up\na standard security policy.\n\n1393\n01:12:59,896 --> 01:13:00,477\nAll right.\n\n1394\n01:13:00,477 --> 01:13:01,313\nIt does take a moment.\n\n1395\n01:13:01,313 --> 01:13:03,860\nSee over here it's still\nextracting the host profile.\n\n1396\n01:13:03,860 --> 01:13:06,040\nCuz it parses through a lot of stuff.\n\n1397\n01:13:06,040 --> 01:13:08,960\nSo it will take a moment and\nwhen it's done, there we go.\n\n1398\n01:13:08,960 --> 01:13:10,590\nSo there's my profile.\n\n1399\n01:13:10,590 --> 01:13:13,070\nAnd notice it's applied to zero hosts.\n\n1400\n01:13:13,070 --> 01:13:15,370\nIt's not actually assigned to anybody.\n\n1401\n01:13:15,370 --> 01:13:21,050\nAnd you'll see options up here where\nwe can go and copy settings from host.\n\n1402\n01:13:21,050 --> 01:13:25,440\nYou've got check for\nhost compliance for associated people.\n\n1403\n01:13:25,440 --> 01:13:30,310\nAnd then you'll see options here to attach\nor detach a host profile to hosts and\n\n1404\n01:13:30,310 --> 01:13:31,550\nclusters.\n\n1405\n01:13:31,550 --> 01:13:33,920\nWe can use that button to attach it.\n\n1406\n01:13:33,920 --> 01:13:40,370\nTo other machines so they'll be compliant\nalso, so maybe I'll pick server 2, right.\n\n1407\n01:13:40,370 --> 01:13:44,450\nAnd I got it from server 6 but\nI'm gonna attach it there also.\n\n1408\n01:13:44,450 --> 01:13:45,490\nThat way if I ever come and\n\n1409\n01:13:45,490 --> 01:13:49,470\nedit this profile the changes\nwill apply back to server 6 too.\n\n1410\n01:13:49,470 --> 01:13:50,520\nSo I'll go ahead and do that.\n\n1411\n01:13:52,220 --> 01:13:53,730\nNow what it's gonna do,\nis it's gonna look for\n\n1412\n01:13:53,730 --> 01:13:57,570\nthe customizations we made and\npush those out to these hosts.\n\n1413\n01:13:57,570 --> 01:13:59,570\nI can monitor that\ncompliance whenever I want.\n\n1414\n01:13:59,570 --> 01:14:01,110\nHere it's showing some\nof the different things.\n\n1415\n01:14:01,110 --> 01:14:06,766\nNow, I do have to be careful with some\nof these, notice, like MAC addresses.\n\n1416\n01:14:06,766 --> 01:14:09,180\nA lot of these are considered\nto be unique values.\n\n1417\n01:14:09,180 --> 01:14:11,880\nSo the MAC address for ESX server 6,\n\n1418\n01:14:11,880 --> 01:14:14,600\nit's different than the Mac address for\nESX server 2.\n\n1419\n01:14:14,600 --> 01:14:16,290\nI want that right.\n\n1420\n01:14:16,290 --> 01:14:18,260\nSo it's showing me the things\nthat are different.\n\n1421\n01:14:18,260 --> 01:14:21,050\nAnd I might want to manipulate some\nof these like the host value right.\n\n1422\n01:14:21,050 --> 01:14:23,860\nThe host on these is\nthe default of local host so\n\n1423\n01:14:23,860 --> 01:14:29,130\nI might want to change that to ESX\nserver 2 and ESX dash server 6.\n\n1424\n01:14:29,130 --> 01:14:31,500\nWe can make those\nmanipulations right there.\n\n1425\n01:14:31,500 --> 01:14:34,168\nSo these are things that should be unique.\n\n1426\n01:14:34,168 --> 01:14:38,990\nThen when we finish, it's gonna take that\ncommon set of variable, or variables,\n\n1427\n01:14:38,990 --> 01:14:41,790\nvalues, all the settings, and\npush those out to these machines,\n\n1428\n01:14:41,790 --> 01:14:43,832\nto create a consistent\nsecurity infrastructure.\n\n1429\n01:14:43,832 --> 01:14:46,510\nAll right, and then\n\n1430\n01:14:46,510 --> 01:14:49,590\nwhat we can do is we can come back after\na few minutes right after it applies,\n\n1431\n01:14:49,590 --> 01:14:54,240\nand we'll be able to use this button to\nvalidate whether everybody's compliant.\n\n1432\n01:14:54,240 --> 01:14:57,640\nAnd that way if we don't have lockdown\nmode turned on, and somebody goes and\n\n1433\n01:14:57,640 --> 01:15:00,040\nchanges the firewall settings on one host,\n\n1434\n01:15:00,040 --> 01:15:03,510\nI'll see it right here because that\nhost won't we compliant anymore.\n\n1435\n01:15:03,510 --> 01:15:05,430\nSo pretty cool, easy way to check that.\n\n1436\n01:15:06,970 --> 01:15:09,080\nActually I'm going to do that right now.\n\n1437\n01:15:09,080 --> 01:15:13,570\nBecause it's showing compliant host zero,\nit just applied so it should be compliant,\n\n1438\n01:15:13,570 --> 01:15:16,190\nso I'll rerun that check,\nand we'll let it go.\n\n1439\n01:15:16,190 --> 01:15:19,960\nSee over here it's checking the compliance\nof both servers, two and six.\n\n1440\n01:15:19,960 --> 01:15:21,350\nSo it's going to hit them and\nsee what's up.\n\n1441\n01:15:21,350 --> 01:15:23,950\nSo this is a great way to save time.\n\n1442\n01:15:23,950 --> 01:15:28,525\nIt doesn't let you create a profile\nfrom scratch though, so remember,\n\n1443\n01:15:28,525 --> 01:15:33,250\nyou'll take one target host, get it\nconfigured the way that you want, and\n\n1444\n01:15:33,250 --> 01:15:36,862\nthen draw those settings in\nto create your host profile.\n\n1445\n01:15:36,862 --> 01:15:40,561\nSo it checked the compliance, and my\nscreen hasn't refreshed yet, but it will,\n\n1446\n01:15:40,561 --> 01:15:43,898\nand it should show that I have two\ncompliant hosts as soon as it refreshes.\n\n1447\n01:15:47,125 --> 01:15:47,752\nWe force it along.\n\n1448\n01:15:49,958 --> 01:15:51,722\nAll right, so\nit's showing one compliant host so far.\n\n1449\n01:15:51,722 --> 01:15:55,020\nI guess the other change\nmight still be taking effect.\n\n1450\n01:15:55,020 --> 01:15:57,899\nWhen you make the firewall change, it\nmakes that change and the firewall's gotta\n\n1451\n01:15:57,899 --> 01:16:00,080\nrestart, and so it might be taking\nit a moment to pick that up.\n\n1452\n01:16:00,080 --> 01:16:02,587\nBut looking at it right now,\nit's just showing that one compliant host.\n\n1453\n01:16:08,856 --> 01:16:10,412\nSo I'm just going to double check here.\n\n1454\n01:16:10,412 --> 01:16:12,380\nIt's showing server two is not compliant.\n\n1455\n01:16:12,380 --> 01:16:15,100\nIt makes sense that six would be compliant\nsince that's where we drew the settings\n\n1456\n01:16:15,100 --> 01:16:17,920\nfrom, but server two is not compliant and\nif I come in and\n\n1457\n01:16:17,920 --> 01:16:19,560\nlook it'll tell me why it's not compliant.\n\n1458\n01:16:22,660 --> 01:16:26,880\nIt'll tell me in a way that my screen\nis not going to render very well.\n\n1459\n01:16:26,880 --> 01:16:27,380\nThere we go.\n\n1460\n01:16:33,945 --> 01:16:34,635\nAll right.\n\n1461\n01:16:34,635 --> 01:16:37,325\nSo we've got host state doesn't match.\n\n1462\n01:16:38,765 --> 01:16:40,585\nOh, my hard drives\nare configured differently.\n\n1463\n01:16:40,585 --> 01:16:42,195\nSo these machines aren't identical.\n\n1464\n01:16:42,195 --> 01:16:44,035\nSo I really do need to go in and\nedit this and\n\n1465\n01:16:44,035 --> 01:16:46,835\ntake out some of these settings\nthat don't matter to me.\n\n1466\n01:16:46,835 --> 01:16:47,475\nRight?\n\n1467\n01:16:47,475 --> 01:16:49,955\nIt doesn't matter to me that the hard\ndrives are configured differently.\n\n1468\n01:16:49,955 --> 01:16:52,105\nIf I had a cluster environment.\n\n1469\n01:16:52,105 --> 01:16:54,955\nIf I was doing a rapid deployment or\n\n1470\n01:16:54,955 --> 01:16:57,460\nwhatever, I might want these\nto be exactly identical.\n\n1471\n01:16:57,460 --> 01:17:00,900\nAnd a variation in hard drive size or\ntype might be a red flag for me and\n\n1472\n01:17:00,900 --> 01:17:05,580\nthat's what it's picking up here but in my\ncase, the important stuff is actually ok,\n\n1473\n01:17:05,580 --> 01:17:08,030\nthe firewall settings\naren't turning up in here.\n\n1474\n01:17:08,030 --> 01:17:09,010\nSo I know I'm ok there.\n\n1475\n01:17:10,452 --> 01:17:13,300\nAll right, yeah I've got some\nhardware variations between the two.\n\n1476\n01:17:13,300 --> 01:17:16,470\nSo all this is red flagging now, showing\nme that there's something different\n\n1477\n01:17:16,470 --> 01:17:19,380\nabout this machine that is not matching\nthe other and that's pretty cool.\n\n1478\n01:17:19,380 --> 01:17:20,869\nMakes life a lot easier on us.\n\n1479\n01:17:23,160 --> 01:17:24,950\nAll right, so\n\n1480\n01:17:24,950 --> 01:17:28,250\nthose are some of the things that we\ncan do as we start to secure a machine.\n\n1481\n01:17:28,250 --> 01:17:29,930\nThere are some even more advanced things,\nbut\n\n1482\n01:17:29,930 --> 01:17:31,450\nthese are the ones that\nshow up on the exam.\n\n1483\n01:17:31,450 --> 01:17:34,530\nSo just remember you've got things\nlike lockdown mode, the ESXi\n\n1484\n01:17:35,830 --> 01:17:39,710\nfirewall permissions as\nwell as host profiles,\n\n1485\n01:17:39,710 --> 01:17:42,350\nall different things we can\nconfigure to improve security.\n\n1486\n01:17:44,200 --> 01:17:45,010\nAll right, lets go back and\n\n1487\n01:17:45,010 --> 01:17:47,330\ncheck on that upgrade that was\nrunning in the background.\n\n1488\n01:17:47,330 --> 01:17:49,540\nI'm gonna jump back over and\nsee where it's at.\n\n1489\n01:17:49,540 --> 01:17:52,470\nIt's probably still churning along,\nlets see.\n\n1490\n01:18:02,002 --> 01:18:05,790\nAll right, let's see, we upgraded ESX\nserver two if I recall correctly.\n\n1491\n01:18:05,790 --> 01:18:06,500\nAnd looking at it,\n\n1492\n01:18:06,500 --> 01:18:11,980\nESX server two is now showing as\ncompliant with ESXi version 5.5.0.\n\n1493\n01:18:11,980 --> 01:18:14,760\nSo it looks like that one\nhas finished it's upgrade.\n\n1494\n01:18:14,760 --> 01:18:16,370\nActually, let me just go\nall the way up top here.\n\n1495\n01:18:16,370 --> 01:18:17,890\nWe'll look at all our hosts.\n\n1496\n01:18:17,890 --> 01:18:19,200\nSo looking at all my host servers.\n\n1497\n01:18:19,200 --> 01:18:22,230\nOne, two, three and\nfour are all running 5.5 now.\n\n1498\n01:18:22,230 --> 01:18:23,550\nThe upgrade finished.\n\n1499\n01:18:23,550 --> 01:18:25,130\nI didn't have to go over and\ntouch that machine.\n\n1500\n01:18:25,130 --> 01:18:27,460\nAll pushed out automatically.\n\n1501\n01:18:27,460 --> 01:18:29,520\nSo really cool stuff, right?\n\n1502\n01:18:29,520 --> 01:18:30,450\nIt's not automatic.\n\n1503\n01:18:30,450 --> 01:18:31,650\nOr not set up automatically.\n\n1504\n01:18:31,650 --> 01:18:34,550\nWhen we install vCenter, it does\na lot of stuff right out of the box.\n\n1505\n01:18:34,550 --> 01:18:38,510\nBut it's up to us to go in set up the\nvSphere update manager and to apply some\n\n1506\n01:18:38,510 --> 01:18:42,580\nbasic security principles to our systems\nto make sure they're ready to go.\n\n1507\n01:18:42,580 --> 01:18:47,170\nAll right, well that pretty much\nwraps up our initial configuration.\n\n1508\n01:18:47,170 --> 01:18:51,920\nJust getting our VMware\ninfrastructure running and in place.\n\n1509\n01:18:51,920 --> 01:18:55,270\nIn the next set of episodes, the episodes\nwe're filming over the next two weeks,\n\n1510\n01:18:55,270 --> 01:18:56,590\nif you're watching live.\n\n1511\n01:18:56,590 --> 01:19:01,890\nThen what we're gonna be doing is actually\ngetting VMware up and doing something.\n\n1512\n01:19:01,890 --> 01:19:03,150\nAll right?\nWe need to take a look at\n\n1513\n01:19:03,150 --> 01:19:04,140\nconfiguring our storage.\n\n1514\n01:19:04,140 --> 01:19:05,640\nAnd we need to configure our network.\n\n1515\n01:19:05,640 --> 01:19:07,070\nSo we still haven't done those.\n\n1516\n01:19:07,070 --> 01:19:11,080\nAnd once that's done, then we're ready\nto start creating virtual machines, and\n\n1517\n01:19:11,080 --> 01:19:14,450\ngetting some real functionality up and\ngoing in our environment.\n\n1518\n01:19:14,450 --> 01:19:16,850\nSo definitely stay tuned for\nthose episodes.\n\n1519\n01:19:16,850 --> 01:19:19,370\nBut as far as our initial setup,\nwe're done.\n\n1520\n01:19:19,370 --> 01:19:22,210\nThis environment's ready to rock and\nit's ready for production use.\n\n1521\n01:19:22,210 --> 01:19:23,370\nWell, I say production.\n\n1522\n01:19:23,370 --> 01:19:25,983\nIt's stuck on a wooden bench\nin the back of our office, so.\n\n1523\n01:19:25,983 --> 01:19:28,196\n[LAUGH] So maybe not so much production.\n\n1524\n01:19:28,196 --> 01:19:30,290\nAll right, well, let me remind you guys.\n\n1525\n01:19:30,290 --> 01:19:33,470\nIf you have any questions on\nthis stuff be sure to ask.\n\n1526\n01:19:33,470 --> 01:19:35,890\nLive during this show you\ncan go to itpro.tv/live.\n\n1527\n01:19:35,890 --> 01:19:38,980\nYou'll see the chat box\nright beneath the video.\n\n1528\n01:19:38,980 --> 01:19:42,030\nYou can post your questions there and\nwe monitor and answer during the show.\n\n1529\n01:19:42,030 --> 01:19:44,530\nIf you have any questions after the show.\n\n1530\n01:19:44,530 --> 01:19:45,740\nUse the Q and A forum.\n\n1531\n01:19:45,740 --> 01:19:48,610\nAt the top of every page there\nis a link that says Q and A.\n\n1532\n01:19:48,610 --> 01:19:49,730\nIt'll take you to the forum.\n\n1533\n01:19:49,730 --> 01:19:53,840\nYou can post your questions there and\nwe monitor and answer even after the show.\n\n1534\n01:19:53,840 --> 01:19:57,930\nSo definitely take advantage of\nthat resource, it is there for you.\n\n1535\n01:19:57,930 --> 01:19:59,666\nAll right, well I hope you\nguys enjoyed the show today.\n\n1536\n01:19:59,666 --> 01:20:03,428\nSigning out for ITPro.TV, I'm Don Pezet,\nand I'll see you next time.\n\n1537\n01:20:03,428 --> 01:20:13,428\n[MUSIC]\n\n",
          "vimeoId": "103264528"
        }
      ],
      "title": "Plan, Install, Configure and Upgrade vCenter Server and VMware ESXi"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don introduces the viewers to VMware vSwitches. He shows how to configure management interfaces as well as storage interfaces for an ESXi host. He also demonstrates configuring distributed virtual switches and shows some of the advantages of the advanced configuration.",
          "length": "5378",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/005-Configuring-Networking.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/005-Configuring-Networking-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/005-Configuring-Networking-sm.jpg",
          "title": "Configuring Networking",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,201 --> 00:00:35,861\nAll right, good morning,\ngood afternoon, and good evening.\n\n3\n00:00:35,861 --> 00:00:38,301\nWelcome back to another\nepisode of IT Pro TV.\n\n4\n00:00:38,301 --> 00:00:40,460\nI'm your host Don Pezet.\n\n5\n00:00:40,460 --> 00:00:42,490\nBack again with another episode of\n\n6\n00:00:42,490 --> 00:00:46,310\nVMware Certified Professional\nData Center Virtualization.\n\n7\n00:00:46,310 --> 00:00:48,850\nOne of these episodes,\nI'll get it where that sounds smooth, but\n\n8\n00:00:48,850 --> 00:00:50,532\nit's quite a mouthful.\n\n9\n00:00:50,532 --> 00:00:54,590\nWe're gonna be jumping back into\nthe wonderful world of ESX today,\n\n10\n00:00:54,590 --> 00:00:57,630\nas we take a look at\na configuring some neat features.\n\n11\n00:00:57,630 --> 00:00:59,910\nAnd we're going to start off\nwith something kind of simple,\n\n12\n00:00:59,910 --> 00:01:02,000\nwhich is just networking, all right?\n\n13\n00:01:02,000 --> 00:01:05,260\nAs we start to create virtual machines,\nand keep in mind that we haven't\n\n14\n00:01:05,260 --> 00:01:09,350\ncreated any yet, but when we start to\ncreate virtual machines we're going\n\n15\n00:01:09,350 --> 00:01:13,100\nto want to have network access so we want\nthem to be connected to the network and\n\n16\n00:01:13,100 --> 00:01:16,520\nable to communicate as if they were\nreal physical machines, all right?\n\n17\n00:01:16,520 --> 00:01:19,730\nWe also have the ESX host itself,\n\n18\n00:01:19,730 --> 00:01:22,640\nwhich we need to be able to communicate\nwith all of the management protocols that\n\n19\n00:01:22,640 --> 00:01:25,120\nwe use to reach out to the devices and\nwork with them.\n\n20\n00:01:25,120 --> 00:01:28,380\nSo all of that depends on networking.\n\n21\n00:01:28,380 --> 00:01:31,780\nAnd VMware, inside of the vSphere Suite,\n\n22\n00:01:31,780 --> 00:01:35,480\nthey handle networking a bit differently\nthan the other vendors that are out there.\n\n23\n00:01:35,480 --> 00:01:39,410\nSo if you've worked with Microsoft HyperV,\nor Citrix XenServer,\n\n24\n00:01:39,410 --> 00:01:43,730\nthe way they handle virtual networking\nis really, really simplified.\n\n25\n00:01:43,730 --> 00:01:46,740\nYou take a virtual network adaptor and\na host and\n\n26\n00:01:46,740 --> 00:01:51,250\nyou either connect it to a physical\nadapter or you connect it to nothing and\n\n27\n00:01:51,250 --> 00:01:52,500\nit becomes an isolated machine.\n\n28\n00:01:52,500 --> 00:01:54,750\nThat's really it, with the other vendors.\n\n29\n00:01:54,750 --> 00:01:58,650\nBut with VMware, we create what\nare called virtual switches,\n\n30\n00:01:58,650 --> 00:02:01,740\nor vSwitches and\nthere's actually two different types.\n\n31\n00:02:01,740 --> 00:02:02,960\nThere's the standard vSwitch.\n\n32\n00:02:02,960 --> 00:02:04,590\nThat's what we're gonna start with.\n\n33\n00:02:04,590 --> 00:02:07,820\nAnd then there's the distributed\nVswitch or the DV switch,\n\n34\n00:02:07,820 --> 00:02:10,790\nwhich we're going to talk\nabout later in the episode.\n\n35\n00:02:10,790 --> 00:02:14,160\nEither one offers you\na ton of functionalities,\n\n36\n00:02:14,160 --> 00:02:16,078\nsome really impressive stuff.\n\n37\n00:02:16,078 --> 00:02:20,140\nThe standard Vswitch gives us all of\nthe various features that we have under\n\n38\n00:02:20,140 --> 00:02:21,880\nHyperV, SenseServe, and\nthe other products, right?\n\n39\n00:02:21,880 --> 00:02:23,750\nSo it gives us all of that functionality.\n\n40\n00:02:23,750 --> 00:02:25,600\nAnd is extremely simple to manage.\n\n41\n00:02:25,600 --> 00:02:28,250\nThe DVswitch is a little more complex.\n\n42\n00:02:28,250 --> 00:02:30,000\nBut boy does it do some amazing stuff.\n\n43\n00:02:30,000 --> 00:02:31,540\nWe'll get to see it later.\n\n44\n00:02:31,540 --> 00:02:33,660\nIf we're going to move on\ninto high availability and\n\n45\n00:02:33,660 --> 00:02:36,982\nclustering, we've got to make sure we\nunderstand the DVswitch side of things.\n\n46\n00:02:36,982 --> 00:02:39,860\nWe're gonna need that to\nprovide true high availability.\n\n47\n00:02:39,860 --> 00:02:41,320\nSo we'll get a chance to see\nthat as we work through this.\n\n48\n00:02:41,320 --> 00:02:45,024\nLet's start off with our basic networking.\n\n49\n00:02:45,024 --> 00:02:45,685\nAll right.\n\n50\n00:02:45,685 --> 00:02:49,958\nNow, when we configure virtual\nnetworking inside of ESX,\n\n51\n00:02:49,958 --> 00:02:54,470\nit's done on the individual host for\na standard Vswitch.\n\n52\n00:02:54,470 --> 00:02:59,620\nStandard Vswitches are tied\nto just a single ESXI host.\n\n53\n00:02:59,620 --> 00:03:03,430\nA DVswitch, that's where we\nspread it across multiple hosts.\n\n54\n00:03:03,430 --> 00:03:07,170\nFor right now, I'm gonna be working\non a single ESXI installation.\n\n55\n00:03:07,170 --> 00:03:09,650\nAnd when you bring up an ESX box,\n\n56\n00:03:09,650 --> 00:03:13,390\nit actually sets up the first\nvirtual switch for you.\n\n57\n00:03:13,390 --> 00:03:16,360\nAnd the reason it does that is,\nyou need to be able to manage the system.\n\n58\n00:03:16,360 --> 00:03:20,700\nRemember when we installed ESXI,\nthe system booted up and\n\n59\n00:03:20,700 --> 00:03:22,870\njust dropped us to a very\nsimple screen that said hey,\n\n60\n00:03:22,870 --> 00:03:27,160\nif you wanna manage the system, fire up a\nweb browser and browse to this IP address.\n\n61\n00:03:27,160 --> 00:03:29,640\nWell, in order for\nus to get to that IP address,\n\n62\n00:03:29,640 --> 00:03:33,800\nit had to set up a virtual switch, and\nprovide some basic connectivity to it, so\n\n63\n00:03:33,800 --> 00:03:37,200\nthat's kind of already done\non most of our systems.\n\n64\n00:03:37,200 --> 00:03:43,080\nI'm going to go into Vcenter here, and\nI will just pick a host at random, so\n\n65\n00:03:43,080 --> 00:03:48,340\nlet me take a look at like host 2 here.\n\n66\n00:03:48,340 --> 00:03:52,610\nSo I'll take a look at ESX server 2,\nand when I go into that host,\n\n67\n00:03:52,610 --> 00:03:57,390\nI'm just gonna go up to manage and\nnetworking, and under networking I'll see\n\n68\n00:03:57,390 --> 00:04:02,280\nmy virtual switches and I should see\none Vswitch created automatically.\n\n69\n00:04:02,280 --> 00:04:03,730\nThat's the one the installer creates, and\n\n70\n00:04:03,730 --> 00:04:09,350\nit's just called Vswitch zero,\nremember on the exam when you see Vswitch.\n\n71\n00:04:09,350 --> 00:04:10,970\nThat's a standard switch.\n\n72\n00:04:10,970 --> 00:04:12,450\nOr a standard V-switch.\n\n73\n00:04:12,450 --> 00:04:15,100\nWhen you see DVswitch,\nthat's the distributed one.\n\n74\n00:04:15,100 --> 00:04:17,030\nThat one little extra letter\nmakes a big difference.\n\n75\n00:04:18,610 --> 00:04:23,530\nIf we look down on this screen,\nyou'll see where they kind of\n\n76\n00:04:23,530 --> 00:04:27,590\ndraw a little picture of this switch and\nwhat it looks like.\n\n77\n00:04:27,590 --> 00:04:30,780\nIt's trying to illustrate what we've got,\n\n78\n00:04:30,780 --> 00:04:33,370\nis you've got a physical\nadapter in your machine.\n\n79\n00:04:33,370 --> 00:04:37,920\nSo my machine is showing this vm nic zero,\nit's a 100 megabit adapter, and\n\n80\n00:04:37,920 --> 00:04:39,830\nit's at full duplex.\n\n81\n00:04:39,830 --> 00:04:42,710\nSo there's my physical adapter.\n\n82\n00:04:42,710 --> 00:04:47,260\nIf I have virtual machines,\nor anything else like that.\n\n83\n00:04:47,260 --> 00:04:50,570\nIt won't be connected directly\nto the physical adapter.\n\n84\n00:04:50,570 --> 00:04:53,410\nInstead, it's connected to\nthis Vwitch right here.\n\n85\n00:04:53,410 --> 00:04:55,840\nAnd they kind of draw a picture of it.\n\n86\n00:04:55,840 --> 00:04:57,510\nNow I don't have any virtual\nmachines on this one.\n\n87\n00:04:57,510 --> 00:05:00,800\nLet me switch to a server that\ndoes have some virtual machines.\n\n88\n00:05:00,800 --> 00:05:03,110\nAnd we'll get a chance to see\nthat look a little better.\n\n89\n00:05:03,110 --> 00:05:06,020\nHere we go.\nSo this system, I've got VMserver 2 and\n\n90\n00:05:06,020 --> 00:05:06,910\nVMserver 1.\n\n91\n00:05:06,910 --> 00:05:08,250\nThose are our two servers.\n\n92\n00:05:08,250 --> 00:05:11,970\nActually VMserver one, is the one\nthat Vcenter is running on for me.\n\n93\n00:05:11,970 --> 00:05:14,110\nI can see those virtual machines, and\n\n94\n00:05:14,110 --> 00:05:16,570\nthey're plugged in to\nthis switch right here.\n\n95\n00:05:16,570 --> 00:05:18,480\nYou'll see the two ports.\n\n96\n00:05:18,480 --> 00:05:20,120\nSee how one port is green?\n\n97\n00:05:20,120 --> 00:05:22,140\nThat means it's got a link light.\n\n98\n00:05:22,140 --> 00:05:26,290\nVMServer 1 is powered on running and\nplugged into that port.\n\n99\n00:05:26,290 --> 00:05:30,110\nVM server 2 is powered off right now so\nit doesn't have the green triangle.\n\n100\n00:05:30,110 --> 00:05:34,520\nAnd so the port, it's an active port but\nit's not running right now because\n\n101\n00:05:34,520 --> 00:05:37,720\nthe device that's plugged into is turned\noff and so that's why it's white.\n\n102\n00:05:37,720 --> 00:05:39,060\nThink of it like a physical switch.\n\n103\n00:05:39,060 --> 00:05:42,240\nYou know when you plug in a device you\nonly get a link light if a device is\n\n104\n00:05:42,240 --> 00:05:43,370\nturned on.\n\n105\n00:05:43,370 --> 00:05:45,140\nWell I guess maybe it's\n[INAUDIBLE] on land.\n\n106\n00:05:45,140 --> 00:05:46,903\nIt might keep it on even\nif the machine is off.\n\n107\n00:05:46,903 --> 00:05:50,168\nBut with the virtual\nmachine we don't have that.\n\n108\n00:05:50,168 --> 00:05:55,360\nAll right, so the top part here is pretty\nself explanatory, our virtual machines\n\n109\n00:05:55,360 --> 00:06:00,176\nplug into a Vswitch and then the Vswitch\nplugs into the physical adapter, so\n\n110\n00:06:00,176 --> 00:06:04,766\nmy virtual machines get access to my\nphysical network via that link right\n\n111\n00:06:04,766 --> 00:06:09,129\nthere and when I click on that VN network,\nI get a little orange line,\n\n112\n00:06:09,129 --> 00:06:14,246\nit's probably hard to see in the video,\nbut a little orange line that's showing\n\n113\n00:06:14,246 --> 00:06:19,780\nthat connection between this group right\nhere and that physical adapter, all right?\n\n114\n00:06:19,780 --> 00:06:23,520\nThese are the three basic\ncomponents inside of a Vswitch.\n\n115\n00:06:23,520 --> 00:06:27,920\nYou've got your physical adapter,\nthe Vswitch itself, and\n\n116\n00:06:27,920 --> 00:06:31,110\nthen you have what's call a port group.\n\n117\n00:06:31,110 --> 00:06:32,660\nThe hosts here, they're actually.\n\n118\n00:06:32,660 --> 00:06:35,460\nNot the host, sorry, the,\nthe VM's, the guests.\n\n119\n00:06:35,460 --> 00:06:38,540\nThe guests, they're actually\nplugging into a port group and\n\n120\n00:06:38,540 --> 00:06:41,640\nit's the port group that really acts\nlike a traditional switch to us.\n\n121\n00:06:41,640 --> 00:06:45,930\nSo it's almost like I've got a 3 port\nswitch here, one port for VM server 1,\n\n122\n00:06:45,930 --> 00:06:49,640\none port for VM server 2, and\none port for the physical adapter, and\n\n123\n00:06:49,640 --> 00:06:54,560\nthey're all kind of combined\nin a 3 port switch right now.\n\n124\n00:06:54,560 --> 00:07:00,060\nWhen we have more than one host\nplugged into the same port group,\n\n125\n00:07:00,060 --> 00:07:02,710\nif those two hosts talk to each other.\n\n126\n00:07:02,710 --> 00:07:05,930\nI shouldn't use that word host,\nI get kinda caught in that terminology.\n\n127\n00:07:05,930 --> 00:07:08,520\nThey're really guests\nsitting on top of ESXI.\n\n128\n00:07:08,520 --> 00:07:10,320\nSo they might be a host for other things.\n\n129\n00:07:10,320 --> 00:07:12,830\nSo it might be a web host or an FTP host.\n\n130\n00:07:12,830 --> 00:07:15,620\nBut in the virtualization\nworld they're actually guests.\n\n131\n00:07:15,620 --> 00:07:19,610\nSo if these two guests are plugged\ninto the same port group and they talk\n\n132\n00:07:19,610 --> 00:07:24,140\nto each other, that communication is\ngonna happen entirely in software.\n\n133\n00:07:24,140 --> 00:07:26,410\nIt's not gonna go and\nhit the physical adapter.\n\n134\n00:07:26,410 --> 00:07:29,050\nIt's gonna be sent directly\nbetween the two machines, and\n\n135\n00:07:29,050 --> 00:07:30,910\nit's done extremely efficiently.\n\n136\n00:07:30,910 --> 00:07:32,830\nIt's done at a very, very fast rate.\n\n137\n00:07:32,830 --> 00:07:36,539\nYou can actually get communications\nbetween these two guests that will exceed\n\n138\n00:07:36,539 --> 00:07:40,321\n100Mbit, even though my physical\nadapter is only 100Mbit in this case.\n\n139\n00:07:40,321 --> 00:07:44,929\nAll right, now if VM server 1 guest wants\nto talk to somebody on the physical\n\n140\n00:07:44,929 --> 00:07:49,754\nnetwork though, like my laptop, that\ncommunication will be throttled to meet\n\n141\n00:07:49,754 --> 00:07:52,432\nwhatever that physical adaptor is tied to.\n\n142\n00:07:52,432 --> 00:07:58,110\nAnd that one port group doesn't have\nexclusive access to the physical adaptor.\n\n143\n00:07:58,110 --> 00:08:00,200\nIt can if we configure it that way.\n\n144\n00:08:00,200 --> 00:08:04,440\nBut we may configure other things to\nconnect to that physical adapter also.\n\n145\n00:08:04,440 --> 00:08:06,870\nIn fact,\nyou'll notice here in the diagram.\n\n146\n00:08:06,870 --> 00:08:07,770\nI didn't create this.\n\n147\n00:08:07,770 --> 00:08:09,160\nThese are the ones that\nare automatically created.\n\n148\n00:08:09,160 --> 00:08:11,100\nBut here's another port group.\n\n149\n00:08:11,100 --> 00:08:14,110\nAnd this port group,\nthey've called it management network.\n\n150\n00:08:14,110 --> 00:08:19,720\nAnd it's where I got my IP address that's\nactually attached to the ESSI host.\n\n151\n00:08:19,720 --> 00:08:24,400\nThat's attached to this special port group\nand that port group if I click on it.\n\n152\n00:08:24,400 --> 00:08:27,040\nSee how my orange line changes and\n\n153\n00:08:27,040 --> 00:08:30,740\nI can see that it is plugged\ninto the physical adapter also.\n\n154\n00:08:30,740 --> 00:08:35,580\nThese two different port groups are\nsharing access to the physical adapter.\n\n155\n00:08:35,580 --> 00:08:36,180\nAll right.\n\n156\n00:08:36,180 --> 00:08:40,120\nNow, my IP address here for my host, and\n\n157\n00:08:40,120 --> 00:08:43,590\nthe IP addresses I assign on the guests,\nthey're all on the same network.\n\n158\n00:08:43,590 --> 00:08:44,990\nThey're all on the same subnet.\n\n159\n00:08:44,990 --> 00:08:46,490\nSo they can talk to each other.\n\n160\n00:08:46,490 --> 00:08:49,380\nThey can communicate, but they're gonna\nthrough the physical adapter to do it,\n\n161\n00:08:49,380 --> 00:08:52,022\nbecause they're in separate port groups.\n\n162\n00:08:52,022 --> 00:08:56,090\nAll right, but I could put them\nin completely different networks.\n\n163\n00:08:56,090 --> 00:08:57,870\nAnd that's often what you want to do.\n\n164\n00:08:57,870 --> 00:09:00,920\nYour virtual machines\nmight be in one network.\n\n165\n00:09:00,920 --> 00:09:05,880\nBut your management side, you'll usually\npartition that off into its own,\n\n166\n00:09:05,880 --> 00:09:07,230\nthey call that out of band management.\n\n167\n00:09:07,230 --> 00:09:09,180\nA separate network just for management.\n\n168\n00:09:09,180 --> 00:09:12,590\nAnd that way you don't have to worry\nabout if somebody compromises a VM.\n\n169\n00:09:12,590 --> 00:09:14,820\nThey could then try and attack the host.\n\n170\n00:09:14,820 --> 00:09:17,950\nIf it's separate, two different networks\nthen they may not be able to do that.\n\n171\n00:09:17,950 --> 00:09:19,030\nYou can use firewalls and\n\n172\n00:09:19,030 --> 00:09:21,100\nother functionality to\nprevent that type of attack.\n\n173\n00:09:22,970 --> 00:09:26,980\nAll right, like I said, this is\nthe one that's created automatically.\n\n174\n00:09:26,980 --> 00:09:31,500\nWhen you install ESXi it creates\nthis vSwitch for us, all right.\n\n175\n00:09:31,500 --> 00:09:35,700\nBut let's see the process of creating one\nourselves, we wanted to make our own.\n\n176\n00:09:35,700 --> 00:09:37,890\nI'm gonna jump over to server three.\n\n177\n00:09:39,020 --> 00:09:43,320\nAnd on server three,\nI'll see that I got V Switch Zero, and\n\n178\n00:09:43,320 --> 00:09:45,780\nI whipped up a quick virtual\nmachine before the show.\n\n179\n00:09:45,780 --> 00:09:48,050\nJust a quick Linux box,\nit's up and running.\n\n180\n00:09:48,050 --> 00:09:49,840\nThese are all just\nthe default installations.\n\n181\n00:09:50,910 --> 00:09:52,760\nSo that's the basic one.\n\n182\n00:09:52,760 --> 00:09:56,180\nNow when it comes to working\nwith these V Switches,\n\n183\n00:09:56,180 --> 00:09:59,200\nI need to make some choices to\nfigure out what it is I want to do.\n\n184\n00:09:59,200 --> 00:10:02,490\nThere are times when we don't need\nto create a new vSwitch, we can just\n\n185\n00:10:02,490 --> 00:10:06,970\nedit the one that we've got, the existing\none, and just change it to meet our needs.\n\n186\n00:10:06,970 --> 00:10:12,220\nOr there's other times where we might\nwant to create an all new vSwitch.\n\n187\n00:10:12,220 --> 00:10:16,310\nAnd creating an all new vSwitch is not\nvery hard, all you have to do is well,\n\n188\n00:10:16,310 --> 00:10:19,150\nuse the little button up here\nthat says to add host networking.\n\n189\n00:10:19,150 --> 00:10:22,260\nSo I'm gonna choose that\nlittle button to do that and\n\n190\n00:10:22,260 --> 00:10:24,810\nit's gonna walk me through\nthe process of creating this system.\n\n191\n00:10:24,810 --> 00:10:29,630\nNow it doesn't really know if I'm gonna\nbe creating a new vSwitch yet, or\n\n192\n00:10:29,630 --> 00:10:31,190\nadding to an existing one.\n\n193\n00:10:31,190 --> 00:10:34,090\nSo it needs to figure out\nwhat it is I'm trying to do.\n\n194\n00:10:34,090 --> 00:10:36,580\nAnd, so it's gonna ask what I'm adding.\n\n195\n00:10:36,580 --> 00:10:39,690\nAm I adding a VMKernel Network Adapter?\n\n196\n00:10:39,690 --> 00:10:42,260\nAll right?\nNow that's a mouthful right there,\n\n197\n00:10:42,260 --> 00:10:43,490\nVMKernel Network Adaptor.\n\n198\n00:10:43,490 --> 00:10:46,120\nWhat it's talking about there is\na management interface, right?\n\n199\n00:10:46,120 --> 00:10:50,920\nAnd it even lays it out, am I adding\nsomething that does vMotion, iSCSI,\n\n200\n00:10:50,920 --> 00:10:53,890\nNFS, fault tolerance, VSAN.\n\n201\n00:10:53,890 --> 00:10:55,590\nWhat is it that this\nis gonna be providing?\n\n202\n00:10:55,590 --> 00:10:56,890\nIf it's gonna be a management interface,\n\n203\n00:10:56,890 --> 00:10:59,120\nthen I need to choose\nVMKernel network adapter.\n\n204\n00:10:59,120 --> 00:11:01,900\nAll right,\nnow I've already got one of those and\n\n205\n00:11:01,900 --> 00:11:04,030\nI don't really need\na second one right now.\n\n206\n00:11:04,030 --> 00:11:06,960\nI might add one later, but for\nright now I'll leave that the way it is.\n\n207\n00:11:07,990 --> 00:11:11,550\nWe could also be adding another\nphysical network adapter, right?\n\n208\n00:11:11,550 --> 00:11:13,240\nI've already got one\nadapter in the system.\n\n209\n00:11:13,240 --> 00:11:13,860\nWe saw it.\n\n210\n00:11:13,860 --> 00:11:15,340\nIt was a 100 megabit adapter.\n\n211\n00:11:15,340 --> 00:11:16,940\nMaybe I'm adding another adapter.\n\n212\n00:11:16,940 --> 00:11:18,530\nNow why would I do that?\n\n213\n00:11:18,530 --> 00:11:21,180\nWell, there's two main reasons\nwe add second adapters.\n\n214\n00:11:21,180 --> 00:11:22,750\nI guess there could be three.\n\n215\n00:11:22,750 --> 00:11:24,920\nThe main reason is we're\ntrying to get redundancy.\n\n216\n00:11:24,920 --> 00:11:26,500\nRight?\nIf one adapter fails,\n\n217\n00:11:26,500 --> 00:11:28,510\nwe want another adapter to kick in.\n\n218\n00:11:28,510 --> 00:11:31,300\nSo to get redundancy,\nwe just take those two adapters.\n\n219\n00:11:31,300 --> 00:11:34,170\nAnd we test them to the same vSwitch, and\n\n220\n00:11:34,170 --> 00:11:37,840\nnow the vSwitch has two physical\nadapters that it can go out using.\n\n221\n00:11:37,840 --> 00:11:42,380\nAnd it can do redundancy, if one link\nfails it jumps to the other one, or\n\n222\n00:11:42,380 --> 00:11:47,410\nit can do low balancing, where it actually\nsends traffic to both sets of links.\n\n223\n00:11:47,410 --> 00:11:51,410\nSo, performance and reliability, those\nare our two main reasons for doing it.\n\n224\n00:11:51,410 --> 00:11:56,560\nAnd there's also security, we might\nwant to isolate traffic from one set of\n\n225\n00:11:56,560 --> 00:12:00,080\nVMs to one physical adapter and\nother VMs to another physical adapter.\n\n226\n00:12:00,080 --> 00:12:05,210\nMaybe you've got a DMZ, a secured\nnetwork that's exposed to the internet,\n\n227\n00:12:05,210 --> 00:12:09,130\nand you've got a private servers and\nthey're being hosted on the same host.\n\n228\n00:12:09,130 --> 00:12:11,270\nOn the same EXMI box, right.\n\n229\n00:12:11,270 --> 00:12:13,350\nA lot of organizations frown upon that.\n\n230\n00:12:13,350 --> 00:12:17,470\nVM ware assures us that there's enough VM\nisolation or memory isolation that you\n\n231\n00:12:17,470 --> 00:12:22,260\ndon't have to worry about cross boundary\nattacks, but there is a risk, right.\n\n232\n00:12:22,260 --> 00:12:23,360\nSo, if we want to go a head and\n\n233\n00:12:23,360 --> 00:12:26,820\nrun them on the same box though, we might\nwant to have separate physical adapters.\n\n234\n00:12:26,820 --> 00:12:30,170\nOne physical adapter for\nour DMZ hosts, our guests, and\n\n235\n00:12:30,170 --> 00:12:33,250\nanother physical adapter for\nour internal guests.\n\n236\n00:12:35,240 --> 00:12:37,040\nAnd then, yet another reason,\n\n237\n00:12:37,040 --> 00:12:41,330\na little less common Is that we\nmight to be doing VLAN partitioning.\n\n238\n00:12:41,330 --> 00:12:45,310\nIf you've got virtual local area networks,\nVLANs, that's a function of your switches,\n\n239\n00:12:45,310 --> 00:12:49,412\nyour real, physical switches,\nyou might have Cisco, or HP, Extreme,\n\n240\n00:12:49,412 --> 00:12:53,860\net cetera,\nswitches from those other vendors, and\n\n241\n00:12:53,860 --> 00:12:58,190\nyou've divided the ports up into VLANs,\nvirtual local area networks.\n\n242\n00:12:58,190 --> 00:13:03,430\nWell, if you want more than one VLAN\nto be represented inside of a vSwitch,\n\n243\n00:13:03,430 --> 00:13:04,900\nyou can do that, right.\n\n244\n00:13:04,900 --> 00:13:08,830\nAnd it requires us to push\nmultiple VLANs across the single\n\n245\n00:13:08,830 --> 00:13:10,250\nphysical network adapters.\n\n246\n00:13:10,250 --> 00:13:12,370\nThat might not be good for\nperformance, right,\n\n247\n00:13:12,370 --> 00:13:14,450\nyou might get a saturation in that link.\n\n248\n00:13:14,450 --> 00:13:17,850\nSo we might want to have one\nphysical adapter tied to one or\n\n249\n00:13:17,850 --> 00:13:21,420\nmore VLANs and a second physical\nadapter tied to other VLANs.\n\n250\n00:13:21,420 --> 00:13:26,470\nSo those are some scenarios where we might\nwant to add another physical adapter.\n\n251\n00:13:26,470 --> 00:13:29,630\nAnd then the third one is\nto create a new port group.\n\n252\n00:13:29,630 --> 00:13:32,720\nIf I want to create a new port group,\na collection of virtual machines.\n\n253\n00:13:32,720 --> 00:13:37,280\nNow, when we do a port group we don't\ntypically need to do a new vSwitch,\n\n254\n00:13:37,280 --> 00:13:40,170\nyou can add multiple port groups\nthrough the same vSwitch.\n\n255\n00:13:40,170 --> 00:13:42,640\nBut I want to show you guys\ncreating a new vSwitch, so\n\n256\n00:13:42,640 --> 00:13:47,010\nI'm going to go with creating a completely\nseparate switching environment.\n\n257\n00:13:47,010 --> 00:13:50,660\nSo a separate physical adapter, a separate\nvSwitch, kind of creating it from scratch.\n\n258\n00:13:50,660 --> 00:13:53,790\nSo I'm going to choose to do adding\nanother physical network vector.\n\n259\n00:13:53,790 --> 00:13:56,540\nNow, I do have another\nadapter in this system so\n\n260\n00:13:56,540 --> 00:13:59,300\nI'll be able to choose that one\nwhen it becomes time to add it.\n\n261\n00:13:59,300 --> 00:14:05,220\nNow it's asking here do I want to add it\nto an existing switch or create a new one.\n\n262\n00:14:05,220 --> 00:14:08,800\nIf I add it to an existing switch, then\nI'm starting my journey down the road of\n\n263\n00:14:08,800 --> 00:14:11,290\ndoing load balancing or redundancy, right?\n\n264\n00:14:11,290 --> 00:14:15,880\nI'm adding an extra network adapter\nto a switch that already has one.\n\n265\n00:14:15,880 --> 00:14:18,300\nOr, I can do a new standard switch.\n\n266\n00:14:18,300 --> 00:14:20,090\nWhen we do a new switch,\n\n267\n00:14:20,090 --> 00:14:23,320\nthis one's going to be separate from\nthe vSwitch that we've already got.\n\n268\n00:14:23,320 --> 00:14:27,480\nAnd so it's going to ask me what\nadapters I want to attach to it, right?\n\n269\n00:14:27,480 --> 00:14:32,830\nSo I'm gonna go in and I'm gonna add\nmy second adapter, so I had VMNick0.\n\n270\n00:14:32,830 --> 00:14:36,550\nThat was my virtual machine\nnetwork interface card, zero.\n\n271\n00:14:36,550 --> 00:14:38,890\nThat's one that already\nattached to a vSwitch.\n\n272\n00:14:38,890 --> 00:14:39,970\nI've also got VMNick1.\n\n273\n00:14:39,970 --> 00:14:43,370\nAnd so it's showing right here,\nit's a gigabit card, it's an Intel E1000.\n\n274\n00:14:43,370 --> 00:14:45,840\nSo it's picked that up.\n\n275\n00:14:45,840 --> 00:14:47,192\nAnd I'm going to add it on.\n\n276\n00:14:47,192 --> 00:14:48,290\nAll right.\n\n277\n00:14:48,290 --> 00:14:49,190\nNow, when you add it on,\n\n278\n00:14:49,190 --> 00:14:52,300\nyou'll see there's a couple of\ndifferent places it can put it.\n\n279\n00:14:52,300 --> 00:14:54,330\nActive, standby, unused.\n\n280\n00:14:56,340 --> 00:15:00,420\nIf we have just one network adapter,\nthen you want it to go to active.\n\n281\n00:15:00,420 --> 00:15:02,200\nThis is going to be\nthe active network adapter,\n\n282\n00:15:02,200 --> 00:15:04,110\nwe're going to use it, and that's it.\n\n283\n00:15:04,110 --> 00:15:08,140\nBut if you have more than one, you\nmight wanna choose something different.\n\n284\n00:15:08,140 --> 00:15:10,100\nIf you have more than one adapter\nthat you're adding in and\n\n285\n00:15:10,100 --> 00:15:12,340\nthey're both active then,\nyou're gonna do load balancing.\n\n286\n00:15:12,340 --> 00:15:15,730\nIt's gonna balance traffic across\nboth links and it will use them both.\n\n287\n00:15:15,730 --> 00:15:19,409\nIf one link fails, it will move all\nthe traffic over to the other one, right.\n\n288\n00:15:19,409 --> 00:15:21,140\nA lot of people like that.\n\n289\n00:15:21,140 --> 00:15:22,360\nThat gives you great utility.\n\n290\n00:15:22,360 --> 00:15:24,660\nYou're making use of\nthe hardware you've got.\n\n291\n00:15:24,660 --> 00:15:26,800\nBut you can also choose to do a standby.\n\n292\n00:15:26,800 --> 00:15:31,070\nWith a standby, you'll have one card\nthat's active, or I guess you could have\n\n293\n00:15:31,070 --> 00:15:35,390\nmore, and then you'll have some cards\nthat are standbys that are doing nothing.\n\n294\n00:15:35,390 --> 00:15:39,280\nAnd only when the active adapter fails\nwill it jump over to the standby,\n\n295\n00:15:39,280 --> 00:15:40,200\nall right?\n\n296\n00:15:40,200 --> 00:15:42,910\nNow, you might ask yourself,\nwhy would I wanna do that?\n\n297\n00:15:42,910 --> 00:15:45,017\nWhy wouldn't I go ahead and\nhave both adapters running, all right?\n\n298\n00:15:45,017 --> 00:15:49,372\nWell there is some software out there and\nsome operating systems that\n\n299\n00:15:49,372 --> 00:15:54,268\nare really sensitive to how Unicash\n[INAUDIBLE] is carried across the switch.\n\n300\n00:15:54,268 --> 00:15:55,444\nRemember that a switch,\n\n301\n00:15:55,444 --> 00:15:58,251\none of the things that it does\nis it tracks your MAC address.\n\n302\n00:15:58,251 --> 00:16:03,740\nAnd it says what MAC addresses are on\nwhat physical ports of the switch.\n\n303\n00:16:03,740 --> 00:16:08,720\nSo if I have a 48 port switch from Cisco,\nand I plug my laptop into port 7,\n\n304\n00:16:08,720 --> 00:16:12,730\nit learns that my MAC address\nis there on port 7, okay.\n\n305\n00:16:12,730 --> 00:16:17,080\nBut when you're doing load balancing\nacross two physical adaptors,\n\n306\n00:16:17,080 --> 00:16:19,560\nthen your virtual machine's MAC address\n\n307\n00:16:19,560 --> 00:16:23,350\nmight show up on more than one\nphysical port of the switch.\n\n308\n00:16:23,350 --> 00:16:28,360\nOn the physical switch, it might show\nthat a laptop is on port seven and\n\n309\n00:16:28,360 --> 00:16:29,780\nport eight, all right?\n\n310\n00:16:29,780 --> 00:16:32,970\nAnd that can cause some issues with some\nsoftware that's not ready to handle that,\n\n311\n00:16:32,970 --> 00:16:34,860\nor switches that aren't\nready to handle that.\n\n312\n00:16:34,860 --> 00:16:36,700\nSays go switches handle it, fine.\n\n313\n00:16:36,700 --> 00:16:41,640\nOther ones especially like your\ndumb switches right, the ones that\n\n314\n00:16:41,640 --> 00:16:47,040\nare straight up layer 2 with no management\nside, a lot of those can't handle that.\n\n315\n00:16:47,040 --> 00:16:49,570\nAnd so with every frame that's\nbeing sent on the network,\n\n316\n00:16:49,570 --> 00:16:53,170\nit's moving that MAC address back and\nforth between the two ports, and\n\n317\n00:16:53,170 --> 00:16:56,520\nthat can result in some missed\ncommunications, all right.\n\n318\n00:16:56,520 --> 00:16:59,950\nSo for those scenarios, if you've got\na switch that just can't handle it, or\n\n319\n00:16:59,950 --> 00:17:01,860\nyou've got software\nthat's really sensitive,\n\n320\n00:17:01,860 --> 00:17:05,060\nyou're better off to go with\nan active standby model.\n\n321\n00:17:05,060 --> 00:17:08,580\nIn that model all of your traffic\ngoes over the active link and so\n\n322\n00:17:08,580 --> 00:17:11,780\nthe switch doesn't have to worry about\nthe Mac address showing up in two places.\n\n323\n00:17:11,780 --> 00:17:15,740\nAnd only if that link fails does\nit bring up the standby, and\n\n324\n00:17:15,740 --> 00:17:18,050\nthen your traffic starts\ngoing over that other link.\n\n325\n00:17:18,050 --> 00:17:21,060\nIt's the equivalent of\nunplugging from one port and\n\n326\n00:17:21,060 --> 00:17:24,300\nplugging into another,\nwhich every switch can handle.\n\n327\n00:17:24,300 --> 00:17:26,750\nSo it gives you stability to go that way.\n\n328\n00:17:26,750 --> 00:17:28,660\nSure, you don't get the bandwidth bump.\n\n329\n00:17:28,660 --> 00:17:30,580\nBut, if bandwidth isn't your problem,\n\n330\n00:17:30,580 --> 00:17:34,702\nyou'll get a more stable network\nby going the active standby way.\n\n331\n00:17:34,702 --> 00:17:37,510\nAll right,\nthe other method is to choose unused here.\n\n332\n00:17:37,510 --> 00:17:38,970\nThat's the other option.\n\n333\n00:17:38,970 --> 00:17:40,810\nThat just means the adaptor\nis doing nothing.\n\n334\n00:17:40,810 --> 00:17:44,040\nIt's not a whole lot of in point doing\nthat unless your like staging the adaptor,\n\n335\n00:17:44,040 --> 00:17:45,530\njust getting it ready for use later on.\n\n336\n00:17:46,800 --> 00:17:50,530\nAlright, but since this is gonna be the\nonly adaptor attached to this v-switch,\n\n337\n00:17:50,530 --> 00:17:53,360\nI'm gonna go ahead and\nchoose active to bring it up.\n\n338\n00:17:53,360 --> 00:17:55,300\nNow you'll see some other\nproperties in here.\n\n339\n00:17:55,300 --> 00:17:57,750\nThings that you can look\nat the configuration.\n\n340\n00:17:57,750 --> 00:18:00,950\nYou can see wether Cisco\ndiscovery protocol is supported or\n\n341\n00:18:00,950 --> 00:18:05,220\nLLDP is supported and\nwether you're gonna go that route.\n\n342\n00:18:05,220 --> 00:18:06,610\nThose are just for network discovery.\n\n343\n00:18:06,610 --> 00:18:09,980\nMost security professionals will tell\nyou to turn that stuff off anyway.\n\n344\n00:18:09,980 --> 00:18:10,920\nSo when I look here and\n\n345\n00:18:10,920 --> 00:18:13,960\nsee it's not available,\nI don't feel bad about that, right.\n\n346\n00:18:13,960 --> 00:18:15,990\nIt's something we normally turn off.\n\n347\n00:18:15,990 --> 00:18:20,619\nAll right, I'll say okay, and so\nnow it's got my new VM nic right there and\n\n348\n00:18:20,619 --> 00:18:25,265\nit's under the active category, and\nI could move it around if I needed to.\n\n349\n00:18:27,844 --> 00:18:29,816\nAll right, we'll go to next.\n\n350\n00:18:29,816 --> 00:18:33,210\nSo now it's ready to complete and\nit's gonna create V-switch 1.\n\n351\n00:18:33,210 --> 00:18:39,586\nSo when it's done, now when I look down\nhere, I'll see V-switch 0 and V-switch 1.\n\n352\n00:18:39,586 --> 00:18:41,300\nWell, eventually.\n\n353\n00:18:41,300 --> 00:18:42,250\nThis is where I have to be patient.\n\n354\n00:18:44,020 --> 00:18:44,520\nThere we go.\n\n355\n00:18:46,052 --> 00:18:48,920\nLet me try and\nget a little more screen real estate here.\n\n356\n00:18:48,920 --> 00:18:49,630\nThere.\n\n357\n00:18:49,630 --> 00:18:51,970\nSo I'll see vSwitch0 and vSwitch1.\n\n358\n00:18:51,970 --> 00:18:54,130\nvSwitch0, I didn't mess with it.\n\n359\n00:18:54,130 --> 00:18:55,650\nIt's still got VMNick0,\n\n360\n00:18:55,650 --> 00:18:59,260\nthere's that virtual machine and the\nmanagement network that's attached to it.\n\n361\n00:18:59,260 --> 00:19:01,040\nAnd if I go to vSwitch1.\n\n362\n00:19:02,170 --> 00:19:06,110\nHere's this new V switch that's\nconnected to that gigabit adaptor.\n\n363\n00:19:06,110 --> 00:19:09,017\nAnd I can see I've got a link light on it,\nthat gigabit adaptor is hot, right.\n\n364\n00:19:10,540 --> 00:19:11,880\nBut I'm not done yet.\n\n365\n00:19:11,880 --> 00:19:16,300\nI can't actually use this V switch\nuntil I add a port group to it.\n\n366\n00:19:16,300 --> 00:19:19,790\nAnd, had I bothered to read that final\nsummary screen it actually says, hey,\n\n367\n00:19:19,790 --> 00:19:22,370\nrecommended steps, you should\nconsider creating a port group or\n\n368\n00:19:22,370 --> 00:19:23,640\nassigning a policy.\n\n369\n00:19:23,640 --> 00:19:25,720\nSo, a port group is the next step.\n\n370\n00:19:25,720 --> 00:19:29,660\nIf I want to attach\nmanagement systems to this or\n\n371\n00:19:29,660 --> 00:19:33,700\nif I want to attach virtual machines to\nit I'm gonna need to create a port group.\n\n372\n00:19:33,700 --> 00:19:37,710\nAlright, so let's say for example I\nwanted to use this for management.\n\n373\n00:19:37,710 --> 00:19:38,900\nIt's a gigabit adapter.\n\n374\n00:19:38,900 --> 00:19:41,460\nThat other adapter is only 100 megabit and\n\n375\n00:19:41,460 --> 00:19:45,690\nmaybe I'm gonna be connecting to like\nan iScuzzy SAN, and so I wanna have this\n\n376\n00:19:45,690 --> 00:19:50,790\none gig card be dedicated just for\nIScuzzy traffic, all right.\n\n377\n00:19:50,790 --> 00:19:53,680\nWell, that's part of my\nmanagement processes.\n\n378\n00:19:53,680 --> 00:19:59,180\nSo what I would need to do is to\nadd a VM kernel connection to this,\n\n379\n00:19:59,180 --> 00:20:01,546\nwhich is what would allow me to push\nthat management traffic on there.\n\n380\n00:20:01,546 --> 00:20:03,790\nOr if I want If I wanted to attach VMs.\n\n381\n00:20:03,790 --> 00:20:05,060\nI wanted virtual machines on there.\n\n382\n00:20:05,060 --> 00:20:09,140\nI would need to create a port group for\nthem to attach that connection.\n\n383\n00:20:09,140 --> 00:20:12,030\nWell, the way we add that is the same\nway that we added the V switch in\n\n384\n00:20:12,030 --> 00:20:12,590\nthe first place.\n\n385\n00:20:12,590 --> 00:20:14,940\nWe go up top here and\ngo to add Host Networking again.\n\n386\n00:20:16,400 --> 00:20:20,610\nAnd this time, when we add it, if we wanna\ndo like a dedicated ISCSI interface,\n\n387\n00:20:20,610 --> 00:20:24,020\nwell I can choose to add a VM kernel\nnetwork adapter, or if I wanna\n\n388\n00:20:24,020 --> 00:20:27,460\nadd virtual machines, I would come down\nhere and say a port group, all right.\n\n389\n00:20:27,460 --> 00:20:30,160\nLet's see both,\nI'll start with the VM kernel, all right.\n\n390\n00:20:30,160 --> 00:20:31,980\nSo we'll go ahead and\nchoose that in hit next.\n\n391\n00:20:33,390 --> 00:20:35,670\nSo I can see right here,\nit's asking me where I'm gonna add it now,\n\n392\n00:20:35,670 --> 00:20:37,560\nbefore I created a new switch.\n\n393\n00:20:37,560 --> 00:20:40,010\nAnd this time I'm gonna\npick an existing switch.\n\n394\n00:20:40,010 --> 00:20:41,310\nI want it to be switch 1.\n\n395\n00:20:41,310 --> 00:20:45,430\nIt's the newest one so it's already in\nthere, but I could browse if I needed and\n\n396\n00:20:45,430 --> 00:20:49,570\npick from there, all right.\n\n397\n00:20:49,570 --> 00:20:52,235\nThen, I specify what it's gonna do.\n\n398\n00:20:52,235 --> 00:20:55,275\nGoing ahead and\nflagging it as a VM Kernel connection,\n\n399\n00:20:55,275 --> 00:20:59,105\nI can specify what protocol it's\ngonna be running, IPv4, v6 or both.\n\n400\n00:20:59,105 --> 00:21:02,895\nI can specify VLANs if they're in use,\n\n401\n00:21:02,895 --> 00:21:07,065\nI can specify if I have\nmodified TCPIP stats.\n\n402\n00:21:07,065 --> 00:21:09,835\nMost of us aren't gonna have\nmodified TCPIP stats but\n\n403\n00:21:09,835 --> 00:21:12,625\nyou might have special\nacceleration hardware,\n\n404\n00:21:12,625 --> 00:21:16,530\nthat let's you do things like TCP offload\nengine support and stuff like that.\n\n405\n00:21:16,530 --> 00:21:19,410\nAnd if you've got that, then you'll have\nadditional options here, most people\n\n406\n00:21:19,410 --> 00:21:23,980\naren't and then right here is where\nI pick what I'm going to limit it to.\n\n407\n00:21:23,980 --> 00:21:27,140\nDo I want it to be just v motion or\nstorage traffic?\n\n408\n00:21:27,140 --> 00:21:29,160\nDo I want it to be for\nfault tolerance logging,\n\n409\n00:21:29,160 --> 00:21:33,590\ndo I want it to be management traffic or\nvirtual sand traffic, all right.\n\n410\n00:21:33,590 --> 00:21:37,230\nSo I can pick what I want to limit\nthis to and I'm gonna pick my storage\n\n411\n00:21:37,230 --> 00:21:42,060\ntechnologies, I'm gonna pick VM Sand and\nin vMotion, all right.\n\n412\n00:21:42,060 --> 00:21:45,260\nSo I want that storage traffic going\nover this connection and that's it.\n\n413\n00:21:47,837 --> 00:21:51,980\nThen if we wanna assign an IP address\nto it, we can do it right here.\n\n414\n00:21:51,980 --> 00:21:54,390\nIf we're gonna be using this for\nmanagement, right?\n\n415\n00:21:54,390 --> 00:21:56,420\nLike with an iSCSI SAN connection,\n\n416\n00:21:56,420 --> 00:22:00,290\nwe have to have a source IP address if\nwe're gonna connect to a destination.\n\n417\n00:22:00,290 --> 00:22:03,460\nAnd so I can come in and\nI can specify what that's going to be.\n\n418\n00:22:03,460 --> 00:22:06,206\nSo maybe this is gonna be 10.1.230.200 or\n\n419\n00:22:06,206 --> 00:22:10,420\nsomething like that,\nactually I think that IP is in use.\n\n420\n00:22:10,420 --> 00:22:14,650\nI need to pick an IP that's [LAUGH] not\nin use and specify the subnet smash.\n\n421\n00:22:14,650 --> 00:22:20,230\nNow it's got a default gateway entered in\nhere for my other management network so\n\n422\n00:22:20,230 --> 00:22:22,750\nit's got that one in place and\nso it's already showing it.\n\n423\n00:22:22,750 --> 00:22:25,909\nThis is gonna be added in in addition\nto the one that's already there.\n\n424\n00:22:28,347 --> 00:22:31,770\nAll right,\nwhen I finish it's ready to create it.\n\n425\n00:22:31,770 --> 00:22:35,400\nIt's going to create that link and tie\nit with the physical switch, all right.\n\n426\n00:22:35,400 --> 00:22:39,090\nSo creating a VM kernel connection\nlike this not really a big deal\n\n427\n00:22:39,090 --> 00:22:42,100\njust remember that VM kernel that\nmeans that it's management traffic.\n\n428\n00:22:42,100 --> 00:22:45,600\nManagement traffic of one type or\nanother, all right.\n\n429\n00:22:45,600 --> 00:22:47,910\nNow, if I wanted to do this same thing but\nfor\n\n430\n00:22:47,910 --> 00:22:52,740\nvirtual machines to connect to it, that's\nwhere we start to get a few more options.\n\n431\n00:22:52,740 --> 00:22:53,890\nI'm just gonna cancel that one.\n\n432\n00:22:53,890 --> 00:22:57,700\nI don't want actually move any of\nmy management traffic over to it.\n\n433\n00:22:57,700 --> 00:23:01,880\nWhen it comes to virtual machines,\nyou may need to create one or\n\n434\n00:23:01,880 --> 00:23:05,860\nmore port groups based on what it is\nyou're trying to achieve, all right.\n\n435\n00:23:05,860 --> 00:23:09,650\nIf you've got a flat network, so you just\nhave one subnet and all your servers\n\n436\n00:23:09,650 --> 00:23:12,830\nare right there on that same network, then\nyou'll normally just need one port group.\n\n437\n00:23:12,830 --> 00:23:16,000\nThere's not a lot of point in\ncreating multiple ones, all right.\n\n438\n00:23:16,000 --> 00:23:20,290\nBut if you've got multiple subnets in your\nenvironment, the odds are, you're gonna be\n\n439\n00:23:20,290 --> 00:23:26,040\ncreating either more than one vSwitch,\nor more than one port group, okay.\n\n440\n00:23:26,040 --> 00:23:28,920\nSo what we can do, I could either\nkeep working with this one or\n\n441\n00:23:28,920 --> 00:23:30,570\nI can jump over and\ndeal with the other one.\n\n442\n00:23:30,570 --> 00:23:31,170\nLet's do this.\n\n443\n00:23:31,170 --> 00:23:32,089\nI'm going to get rid of switch one.\n\n444\n00:23:35,246 --> 00:23:38,990\nAnd so you've got a little delete option\nthere and you can just wipe it out.\n\n445\n00:23:38,990 --> 00:23:42,140\nKeep in mind that if you have virtual\nmachines attached to vSwitch.\n\n446\n00:23:42,140 --> 00:23:45,110\nWhen you delete the vSwitch, all those\nvirtual machines just got orphaned.\n\n447\n00:23:45,110 --> 00:23:47,724\nThey now have no network connection so\nyou need to go and update.\n\n448\n00:23:50,379 --> 00:23:54,875\nAll right, now if I just have a flat\nnetwork I've got my VM network here,\n\n449\n00:23:54,875 --> 00:23:59,023\nwhich is connected to my physical\nadaptor and off it goes, right.\n\n450\n00:23:59,023 --> 00:24:01,379\nI might just continue doing that.\n\n451\n00:24:01,379 --> 00:24:04,123\nStick my virtual machines in there,\nand we're done, and\n\n452\n00:24:04,123 --> 00:24:06,030\nwe never have to configure the V switch.\n\n453\n00:24:06,030 --> 00:24:08,670\nThe default configuration is fine for us.\n\n454\n00:24:08,670 --> 00:24:13,890\nBut if I have multiple subnets, then I may\nneed to use things like V LANS to provide\n\n455\n00:24:13,890 --> 00:24:18,080\nthat connectivity, dividing my workload\nup into virtual local area networks.\n\n456\n00:24:18,080 --> 00:24:19,730\nNow, your switches have to support that,\nso\n\n457\n00:24:19,730 --> 00:24:23,520\nyour network admins will tell you whether\nthat's supported, and then you can go in\n\n458\n00:24:23,520 --> 00:24:28,870\nmaking multiple port group,\ntying each port group to different V LANs,\n\n459\n00:24:28,870 --> 00:24:31,750\nit's a very effective solution,\na lot of organizations make use of that.\n\n460\n00:24:32,882 --> 00:24:35,130\nAll right, I'm looking at\nthe time I've got on the segment.\n\n461\n00:24:35,130 --> 00:24:37,290\nI don't know that I have enough\ntime to quite do what I want there.\n\n462\n00:24:37,290 --> 00:24:38,430\nSo let's do this.\n\n463\n00:24:38,430 --> 00:24:43,140\nInstead, I know I talked about adding\na second adaptor to an existing V switch.\n\n464\n00:24:43,140 --> 00:24:44,470\nLet me just show you guys adding one.\n\n465\n00:24:44,470 --> 00:24:46,640\nYou know, we didn't actually do it,\nso I'll show you.\n\n466\n00:24:46,640 --> 00:24:50,690\nMaybe I've got this 100 megabit adaptor\nand I want that to be my primary.\n\n467\n00:24:50,690 --> 00:24:54,040\nBut I want to add a standby link\njust in case the primary fails,\n\n468\n00:24:54,040 --> 00:24:56,770\nthe standby can jump in and take over.\n\n469\n00:24:56,770 --> 00:25:00,620\nSo if I want to do that, I can just\ngo up to add host networking and\n\n470\n00:25:00,620 --> 00:25:02,480\nI am going to add\na physical network adapter.\n\n471\n00:25:02,480 --> 00:25:06,120\nI am going to add it\nto an existing switch,\n\n472\n00:25:06,120 --> 00:25:07,700\nwhich is going to be my v switch, zero.\n\n473\n00:25:10,540 --> 00:25:14,320\nAnd then I see VM Nick zero that's\nthe one that's already there.\n\n474\n00:25:14,320 --> 00:25:16,168\nI want to add VM Nick one.\n\n475\n00:25:16,168 --> 00:25:21,270\nI'm going to go ahead and add it and I'll\npick VM Nick one and I'm going to add it\n\n476\n00:25:21,270 --> 00:25:25,900\nas a standby so I'm going to put that one\nin as a standby adaptor and there it is.\n\n477\n00:25:25,900 --> 00:25:29,330\nAnd it puts the word new by it just so you\ncan see which one you're working with and\n\n478\n00:25:29,330 --> 00:25:31,500\nthat's because you can you\nknow highlight it and move it.\n\n479\n00:25:31,500 --> 00:25:35,440\nSee how I just moved it to make it\nactive or move it down to unused.\n\n480\n00:25:35,440 --> 00:25:37,110\nI can kind of change my mind if I want.\n\n481\n00:25:37,110 --> 00:25:41,710\nI'm going to make it a stand by it's\ngoing to be a back up link for me.\n\n482\n00:25:41,710 --> 00:25:45,250\nWhen we move forward and\nfinish up it's going to attach it and\n\n483\n00:25:45,250 --> 00:25:49,140\nwe'll see this screen update to reflect\nthat there's now two physical adapters.\n\n484\n00:25:50,450 --> 00:25:54,410\nSo there they are and you'll notice when\nI click on these networks that the orange\n\n485\n00:25:54,410 --> 00:25:57,360\nline is only running\ninto the top adapter and\n\n486\n00:25:57,360 --> 00:26:00,550\nthat's because the top adaptor\nis the only one that's active.\n\n487\n00:26:00,550 --> 00:26:02,650\nThe other one is in standby right now.\n\n488\n00:26:02,650 --> 00:26:04,760\nSo it's sitting there,\nnot really doing anything.\n\n489\n00:26:04,760 --> 00:26:08,020\nIf I click on it, I get no orange lines.\n\n490\n00:26:08,020 --> 00:26:09,530\nBut if I click on vmnic0,\n\n491\n00:26:09,530 --> 00:26:13,440\nI get the orange lines showing\nme that it is the active one.\n\n492\n00:26:13,440 --> 00:26:17,260\nIf I were load balancing, If I had them\nboth as active, when I clicked on either\n\n493\n00:26:17,260 --> 00:26:20,710\none of them, I'd get orange lines\nrunning to the other host, all right?\n\n494\n00:26:20,710 --> 00:26:24,910\nSo that's adding redundancy and\nload balancing to our system.\n\n495\n00:26:24,910 --> 00:26:28,020\nI'm going to show you guys some things\na little bit later where we'll tweak\n\n496\n00:26:28,020 --> 00:26:30,990\nhow it does the load balancing, there's\nseveral different ways to handle it.\n\n497\n00:26:30,990 --> 00:26:32,900\nSo we may need to manipulate that,\n\n498\n00:26:32,900 --> 00:26:37,200\nand we'll get a chance to\nsee that later all right?\n\n499\n00:26:37,200 --> 00:26:38,670\nOne other thing we might\nwant to mess with,\n\n500\n00:26:38,670 --> 00:26:42,190\nwhen you take a look at these networks,\nlike VM network here.\n\n501\n00:26:42,190 --> 00:26:45,680\nIt assigns these names as\npart of the default install.\n\n502\n00:26:45,680 --> 00:26:48,870\nSo, VM network, that's supposed to be\nwhere you put your virtual machines.\n\n503\n00:26:48,870 --> 00:26:54,950\nAnd management network, that's where my\nDM fernal, my ESXI management stuff is.\n\n504\n00:26:54,950 --> 00:26:58,920\nYou can change these,\nthe names aren't set in stone.\n\n505\n00:26:58,920 --> 00:27:01,710\nYou can actually change a lot of this\nstuff if you hit the edit button.\n\n506\n00:27:01,710 --> 00:27:04,310\nYou'll see where you can come in here and\nchange that VM network.\n\n507\n00:27:04,310 --> 00:27:08,080\nAnd actually here's where we'd assign\nthe vLands too if we wanted to jump in and\n\n508\n00:27:08,080 --> 00:27:09,430\nstart to deal with that.\n\n509\n00:27:09,430 --> 00:27:12,820\nAnd you'll see some other settings that\nI'll walk us through in the next segment.\n\n510\n00:27:12,820 --> 00:27:17,170\nSo I might want to change this and\ncall it, you know, my internal machine\n\n511\n00:27:17,170 --> 00:27:20,950\nversus DMZ or whatever so you can\ncompletely manipulate that if you want to.\n\n512\n00:27:22,540 --> 00:27:25,800\nAll right, well that's a pretty good\nspot for us to stop and take a break.\n\n513\n00:27:25,800 --> 00:27:28,800\nWhen we get back I want to show you\nsome more advanced functionality with\n\n514\n00:27:28,800 --> 00:27:32,690\nthe vSwitches, and keep in mind we're\nstill just doing standard vSwitches,\n\n515\n00:27:32,690 --> 00:27:34,535\nwhat we would do on a single ESS box.\n\n516\n00:27:34,535 --> 00:27:37,495\nWe're going to take a look at\ndistributed ones a little bit later.\n\n517\n00:27:37,495 --> 00:27:38,835\nAnd those are even more cool.\n\n518\n00:27:38,835 --> 00:27:40,175\nSo stay tuned.\n\n519\n00:27:40,175 --> 00:27:42,863\nWe'll be back with more\nvirtual networking after this.\n\n520\n00:27:42,863 --> 00:27:49,817\n[MUSIC]\n\n521\n00:27:49,817 --> 00:27:51,710\nAll right.\nWelcome back everybody.\n\n522\n00:27:51,710 --> 00:27:54,500\nSo what I want to do now\nis take a look at some of\n\n523\n00:27:54,500 --> 00:27:56,960\nthe additional things that we\ncan configure on a v-switch.\n\n524\n00:27:56,960 --> 00:27:59,680\nI'm still just working\nwith a standard v-switch.\n\n525\n00:27:59,680 --> 00:28:01,870\nSo I just want to run\nover a few little pieces.\n\n526\n00:28:01,870 --> 00:28:03,130\nAnd after we're done looked at that,\n\n527\n00:28:03,130 --> 00:28:06,810\nwe're going to make the jump\nover to a distributed v-switch.\n\n528\n00:28:06,810 --> 00:28:11,300\nSo we saw adding physical adaptors here\nto have the whole active stand-by or\n\n529\n00:28:11,300 --> 00:28:13,350\neven double active if you\nwanted to go that way.\n\n530\n00:28:13,350 --> 00:28:15,530\nAnd I only did two,\nyou can actually do more.\n\n531\n00:28:15,530 --> 00:28:18,725\nThe limits are kind of determined\nbased on your hardware.\n\n532\n00:28:18,725 --> 00:28:20,630\nSo, if you have a server\nthat has four NICs,\n\n533\n00:28:20,630 --> 00:28:23,340\nyou can throw all four of them in here and\nbalance across them.\n\n534\n00:28:23,340 --> 00:28:24,690\nSo, lots of neat stuff you can do there.\n\n535\n00:28:25,700 --> 00:28:27,070\nSome of the other things.\n\n536\n00:28:27,070 --> 00:28:31,390\nIf you take a look at a port group itself,\nall right?\n\n537\n00:28:31,390 --> 00:28:33,900\nIf we want to start adding\nmore than one port group,\n\n538\n00:28:33,900 --> 00:28:36,860\nthe normal reason we're doing that is\nwe're trying to separate machines.\n\n539\n00:28:36,860 --> 00:28:40,830\nWhich usually involves VLANs,\nor virtual local area networks.\n\n540\n00:28:40,830 --> 00:28:44,500\nSo let's say, for example,\nthat I work for a school.\n\n541\n00:28:44,500 --> 00:28:48,200\nAt that school we've got our staff,\nour employees,\n\n542\n00:28:48,200 --> 00:28:49,880\nand then we've got our students.\n\n543\n00:28:49,880 --> 00:28:53,590\nSo I want to create a staff network and\na student network.\n\n544\n00:28:53,590 --> 00:28:57,450\nSo I just come up with some VLAN numbers,\nsome virtual local area network numbers\n\n545\n00:28:57,450 --> 00:28:59,450\nthat I want to assign to\nthose two separate networks.\n\n546\n00:28:59,450 --> 00:29:03,010\nNow normally whoever configures your\nphysical switches will have already\n\n547\n00:29:03,010 --> 00:29:03,590\nset that up.\n\n548\n00:29:03,590 --> 00:29:08,410\nThey'll already know what VLAN is for\nstudents, and what VLAN are for staff.\n\n549\n00:29:08,410 --> 00:29:11,840\nAll we have to do is set it up\nin VMware to recognize that.\n\n550\n00:29:11,840 --> 00:29:14,670\nSo we do that by creating port groups.\n\n551\n00:29:14,670 --> 00:29:18,950\nSo I could come down here and add in\na new port group, so I'm just going to\n\n552\n00:29:18,950 --> 00:29:21,870\ntell it I'm creating a virtual machine\nport group for a standard switch.\n\n553\n00:29:23,060 --> 00:29:24,310\nAnd when we create the port group,\n\n554\n00:29:24,310 --> 00:29:26,310\nI'm just going to stick\nit on that same V switch.\n\n555\n00:29:28,360 --> 00:29:32,280\nAnd I'm going to seta VLAN ID.\n\n556\n00:29:32,280 --> 00:29:36,540\nIf I don't set a VLAN ID,\nthe default is there is none, and\n\n557\n00:29:36,540 --> 00:29:39,860\nthis poor group will be able to\ncommunicate with the other poor groups.\n\n558\n00:29:39,860 --> 00:29:41,020\nLike normal.\n\n559\n00:29:41,020 --> 00:29:43,900\nSo you don't get isolation\nwhen you do it this way.\n\n560\n00:29:43,900 --> 00:29:48,150\nThe only reason you have more than one\nport group with the same VLAN ID, or\n\n561\n00:29:48,150 --> 00:29:51,880\nnone, would be if we were trying\nto do things like rate limiting\n\n562\n00:29:51,880 --> 00:29:55,310\nyou might want to rate limit some\nvirtual machines and not others.\n\n563\n00:29:55,310 --> 00:29:57,690\nAnd so you might have separate port\ngroups with different policies defined.\n\n564\n00:29:57,690 --> 00:30:01,320\nI'll talk about policies here in a minute,\nI'm getting ahead of myself.\n\n565\n00:30:01,320 --> 00:30:05,150\nBut I'm going to go ahead and create on\nhere, I'll call it the student network.\n\n566\n00:30:05,150 --> 00:30:10,980\nA right, and I'm going to choose a VLAN,\nnow the defaults are None and All.\n\n567\n00:30:10,980 --> 00:30:12,120\nAnd it gets a little confusing.\n\n568\n00:30:12,120 --> 00:30:13,620\nI definitely don't want all.\n\n569\n00:30:13,620 --> 00:30:16,780\nSo what you can do is just highlight this\nand type in the number that you want.\n\n570\n00:30:16,780 --> 00:30:22,030\nSo I want this to be VLAN, maybe all\nof my students are on VLAN number 2.\n\n571\n00:30:22,030 --> 00:30:23,020\nOkay?\n\n572\n00:30:23,020 --> 00:30:24,180\nSo, I'll just punch in two there.\n\n573\n00:30:24,180 --> 00:30:26,890\nAnd then I'll finish that up.\n\n574\n00:30:26,890 --> 00:30:31,350\nAnd then I'm going to turn right back\naround and create another port group.\n\n575\n00:30:31,350 --> 00:30:32,880\nWhich will be my staff network.\n\n576\n00:30:32,880 --> 00:30:34,660\nSo that was my student network.\n\n577\n00:30:34,660 --> 00:30:36,990\nNow I'm going to add in my staff network.\n\n578\n00:30:36,990 --> 00:30:41,920\nSo I'll just do another\nport group on vswitch 0.\n\n579\n00:30:41,920 --> 00:30:44,579\nI'll call it my staff network.\n\n580\n00:30:46,640 --> 00:30:49,220\nAnd I'm going to give that one,\nmaybe they're on V LAN 3, so\n\n581\n00:30:49,220 --> 00:30:56,020\nthe students on V LAN 2,\nthe staff is on V LAN 3.\n\n582\n00:30:56,020 --> 00:31:00,420\nAs that updates I can see down here\nmy V switch is getting bigger.\n\n583\n00:31:00,420 --> 00:31:04,930\nSee the vSwitch now has to add on for\nthe student and staff networks.\n\n584\n00:31:04,930 --> 00:31:08,040\nNow, there's no actual ports, because I\ndon't have any virtual machines in there.\n\n585\n00:31:08,040 --> 00:31:12,820\nThere's nothing actually on those\nnetworks, but they've been created and\n\n586\n00:31:12,820 --> 00:31:13,820\nthey're in place,\n\n587\n00:31:13,820 --> 00:31:18,980\nas I create virtual machines now,\nif I create a student virtual machine.\n\n588\n00:31:18,980 --> 00:31:21,980\nA server to provide\naccess to the students.\n\n589\n00:31:21,980 --> 00:31:26,170\nI can stick it in the student network and\nit would automatically be in V Land two.\n\n590\n00:31:26,170 --> 00:31:29,490\nBut if I put it in the staff\nnetwork it would be on vLand three.\n\n591\n00:31:29,490 --> 00:31:33,436\nAnd our switches, our physical switches,\ncan see that and make sure its only\n\n592\n00:31:33,436 --> 00:31:37,641\naccessible by other machines on the same\nvirtual local area network, all right.\n\n593\n00:31:37,641 --> 00:31:42,177\nSo that's one scenario where we\nmight use multiple port groups and\n\n594\n00:31:42,177 --> 00:31:46,227\nwe can always go and change our hosts,\nI mean our guests, so\n\n595\n00:31:46,227 --> 00:31:50,370\nlike I've got this one guest up here,\nVM Linux one, right?\n\n596\n00:31:50,370 --> 00:31:53,517\nSo if I take a look at VM Linux one.\n\n597\n00:31:53,517 --> 00:31:59,760\nI can change its network adapter to\nmove it over to another network.\n\n598\n00:31:59,760 --> 00:32:04,640\nLet me jump back to my virtual\nmachines and I'll show you that.\n\n599\n00:32:04,640 --> 00:32:06,360\nWe haven't worked with\nvirtual machines yet\n\n600\n00:32:06,360 --> 00:32:09,010\nso we'll get to see that\nin a later episode.\n\n601\n00:32:09,010 --> 00:32:14,660\nBut basically, we just go and find our\nvirtual machine, so that was VM Linux 1.\n\n602\n00:32:14,660 --> 00:32:21,670\nAnd we go into it's settings, so whenever\nit lets me get in here, there we go.\n\n603\n00:32:21,670 --> 00:32:25,740\nI can go into manage, and\n\n604\n00:32:25,740 --> 00:32:28,010\ninside of it's management,\nI can see it's various settings.\n\n605\n00:32:28,010 --> 00:32:30,640\nHere I see the network adapter's\nconnected to VM network.\n\n606\n00:32:30,640 --> 00:32:34,740\nAnd that's that generic network that\nwas created by the ESXI installer.\n\n607\n00:32:34,740 --> 00:32:36,527\nI'm just going to edit that and\n\n608\n00:32:36,527 --> 00:32:39,420\nwe can change it to whatever\nnetwork that we want.\n\n609\n00:32:39,420 --> 00:32:42,950\nThe network adapter right now is on\nVM Network, but if I drop it down,\n\n610\n00:32:42,950 --> 00:32:45,110\nthere's my staff and my student network.\n\n611\n00:32:45,110 --> 00:32:48,710\nSo maybe, this is a Linux server that's\nproviding some kind of software from my\n\n612\n00:32:48,710 --> 00:32:51,830\nstudents so I'll choose Student Network.\n\n613\n00:32:51,830 --> 00:32:52,420\nAnd I'll hit OK.\n\n614\n00:32:52,420 --> 00:32:56,210\nAnd now that virtual machine is\ngoing to move from the old network,\n\n615\n00:32:56,210 --> 00:32:58,848\nwhich had no VLAN whatsoever,\nand it's going\n\n616\n00:32:58,848 --> 00:33:03,400\nto move it over to the student network,\nwhich will basically put it on VLAN two.\n\n617\n00:33:06,233 --> 00:33:10,560\nAnd if I jump back over to my,\nVirtual networks.\n\n618\n00:33:12,830 --> 00:33:14,310\nLet me just go based on the host.\n\n619\n00:33:15,530 --> 00:33:20,430\nSo if I go back into, that was all on\nESX server, what was I working on three?\n\n620\n00:33:22,750 --> 00:33:23,530\nThis is the biggest problem,\n\n621\n00:33:23,530 --> 00:33:26,540\nwhen you have more than one server,\nremembering which one you worked on.\n\n622\n00:33:26,540 --> 00:33:28,350\nThere we go.\nBut if I jump back over to that server\n\n623\n00:33:28,350 --> 00:33:31,850\nright here that the student\nnetwork now has VM-LINUX1.\n\n624\n00:33:31,850 --> 00:33:35,520\nThat's got a nice little green\nport on it and so it's lit up and\n\n625\n00:33:35,520 --> 00:33:37,950\nit's on the network, all right?\n\n626\n00:33:37,950 --> 00:33:41,720\nSo kind of a neat feature there,\nmodifying the virtual local area network,\n\n627\n00:33:41,720 --> 00:33:45,790\nthe VLAN, now you can change\nthat stuff after the fact,\n\n628\n00:33:45,790 --> 00:33:50,340\nwe have properties for\neach port group and we have policies.\n\n629\n00:33:50,340 --> 00:33:54,330\nNow the policies are pretty\nlimited on a regular vswitch.\n\n630\n00:33:54,330 --> 00:33:56,120\nWe'll see when we get to the dv switches,\n\n631\n00:33:56,120 --> 00:33:59,160\nthe distributed ones that they\nhave a ton of policy options.\n\n632\n00:33:59,160 --> 00:34:03,520\nBut here there might be differences\nbetween the staff network and\n\n633\n00:34:03,520 --> 00:34:05,610\nthe student network that I want to impose.\n\n634\n00:34:05,610 --> 00:34:10,010\nAnd so if I pull up the settings for one\nof them I can modify their policy to put\n\n635\n00:34:10,010 --> 00:34:11,680\nall sorts of different settings in there.\n\n636\n00:34:11,680 --> 00:34:14,320\nI'll do the student network so\nI'm going to choose student network and\n\n637\n00:34:14,320 --> 00:34:16,680\nhit my Edit button.\n\n638\n00:34:16,680 --> 00:34:18,690\nAnd this screen,\nthis is what we saw in the wizard.\n\n639\n00:34:18,690 --> 00:34:22,480\nWe gave it a name and we picked\na VLAN number so we can change that.\n\n640\n00:34:22,480 --> 00:34:26,040\nBut what I'm concerned about\nare these other three.\n\n641\n00:34:26,040 --> 00:34:30,230\nThe other three entries here,\nthese are what are defining the policy for\n\n642\n00:34:30,230 --> 00:34:31,350\nthat network.\n\n643\n00:34:31,350 --> 00:34:34,140\nYou'll see we've got a security policy.\n\n644\n00:34:34,140 --> 00:34:38,810\nAnd on the security policy, here's where\nwe can turn on or off various options.\n\n645\n00:34:38,810 --> 00:34:40,970\nThe first option is promiscuous mode.\n\n646\n00:34:40,970 --> 00:34:44,110\nIf you've ever run an network\nsniffer like Wireshark or\n\n647\n00:34:44,110 --> 00:34:48,020\nsomething like that you'll know you were\nrunning your adaptor in promiscuous mode.\n\n648\n00:34:48,020 --> 00:34:52,470\nNormally, when a network adaptor\nreceives a communication, and\n\n649\n00:34:52,470 --> 00:34:56,420\nthe destination MAC address\ndoesn't match its own MAC address,\n\n650\n00:34:56,420 --> 00:35:00,200\nit just throws the frame away,\nit doesn't process it, okay?\n\n651\n00:35:00,200 --> 00:35:04,640\nBut when you go into Promiscuous Mode,\neven if you receive a frame that has\n\n652\n00:35:04,640 --> 00:35:08,910\na destination MAC address that isn't\nyour own, you'll still receive it and\n\n653\n00:35:08,910 --> 00:35:10,140\nyou'll still process it.\n\n654\n00:35:10,140 --> 00:35:11,280\nAnd if you're running a sniffer,\n\n655\n00:35:11,280 --> 00:35:14,266\nthat means that you can capture\ntraffic that wasn't destined for you.\n\n656\n00:35:15,485 --> 00:35:17,135\nSo, you might want that.\n\n657\n00:35:17,135 --> 00:35:19,985\nIf you're running a network management\nstation and you're trying to monitor\n\n658\n00:35:19,985 --> 00:35:22,615\ntraffic, If you're running\nan intrusion prevention system or\n\n659\n00:35:22,615 --> 00:35:26,962\nintrusion detection or something like\nthat, you want that functionality, but for\n\n660\n00:35:26,962 --> 00:35:30,622\nyour average normal server,\nit doesn't need that functionality.\n\n661\n00:35:30,622 --> 00:35:33,932\nIt can even create a security risk.\n\n662\n00:35:33,932 --> 00:35:37,396\nSo we might choose to override that\nbehavior and just say we're going to\n\n663\n00:35:37,396 --> 00:35:41,592\nreject any attempt on this network\nto move into promiscuous mode.\n\n664\n00:35:41,592 --> 00:35:43,862\nSo if one of our VMs tries\nto go into promiscuous mode,\n\n665\n00:35:43,862 --> 00:35:46,720\nwe will not let it happen, right?\n\n666\n00:35:46,720 --> 00:35:48,080\nMAC address changes.\n\n667\n00:35:48,080 --> 00:35:52,180\nWe can come in here and tell it that\nwe will not allow MAC address changes.\n\n668\n00:35:52,180 --> 00:35:55,280\nIf one of the VMs tries to adjust\nits MAC address it'll just not\n\n669\n00:35:55,280 --> 00:35:57,770\nallow that to communicate on the switch.\n\n670\n00:35:57,770 --> 00:35:59,560\nAnd then forged transmits.\n\n671\n00:35:59,560 --> 00:36:04,530\nIt will attempt to detect whether or\nnot someone is modifying\n\n672\n00:36:04,530 --> 00:36:08,470\na packet to show that it came from\na host that isn't the host it came from.\n\n673\n00:36:08,470 --> 00:36:10,840\nSo if somebody is sending out frames and\n\n674\n00:36:10,840 --> 00:36:15,910\nthe source MAC address doesn't match them,\nthen it's a forged communication.\n\n675\n00:36:15,910 --> 00:36:18,900\nAnd so it can block and\nremove that, right?\n\n676\n00:36:18,900 --> 00:36:21,900\nSo those options are there by default,\n\n677\n00:36:21,900 --> 00:36:24,150\nit actually allows all three\nof those behaviors and\n\n678\n00:36:24,150 --> 00:36:27,710\nthat's because VMware doesn't know how\nyou're going to be using this stuff.\n\n679\n00:36:27,710 --> 00:36:32,200\nAnd so they leave that functionality there\nand if you were to install a brand new\n\n680\n00:36:32,200 --> 00:36:36,130\nLinux box or Windows box or MacOS,\nthey allow it, too, by default.\n\n681\n00:36:36,130 --> 00:36:39,370\nBecause that's, again, they just don't\nknow how you're going to use it, so\n\n682\n00:36:39,370 --> 00:36:40,980\nthey provide that same functionality.\n\n683\n00:36:42,620 --> 00:36:44,460\nAll right, we also have traffic shaping.\n\n684\n00:36:44,460 --> 00:36:46,290\nThis is my student network.\n\n685\n00:36:46,290 --> 00:36:48,330\nWell, notice back here,\n\n686\n00:36:48,330 --> 00:36:50,740\nlet's see if I can get all of this\non the screen at the same time.\n\n687\n00:36:50,740 --> 00:36:55,040\nThat I've got my student and my staff\nnetwork, and they're both sharing those\n\n688\n00:36:55,040 --> 00:36:58,590\nphysical adapters, remember I've only had\none physical adapter that was active.\n\n689\n00:36:58,590 --> 00:37:02,284\nSo even though I've got two separate\nnetworks, the students and the teachers or\n\n690\n00:37:02,284 --> 00:37:04,940\nstaff, are sharing\nthe same physical adapter.\n\n691\n00:37:04,940 --> 00:37:09,580\nSo I might want to ensure that\nthe students can't monopolize that link.\n\n692\n00:37:09,580 --> 00:37:11,490\nI might want to rate limit it.\n\n693\n00:37:11,490 --> 00:37:15,020\nOur network adapter in this case is\nonly 100 megabit, which is not much.\n\n694\n00:37:15,020 --> 00:37:20,280\nSo I might want to come in here,\nand enable traffic shaping.\n\n695\n00:37:20,280 --> 00:37:24,370\nAnd I can come in and I can put in\nan average bandwidth and I can say,\n\n696\n00:37:24,370 --> 00:37:30,010\nI want to make sure that this one\naverages at about 50 megabit.\n\n697\n00:37:30,010 --> 00:37:32,956\nI don't want it going\nabove that on average.\n\n698\n00:37:32,956 --> 00:37:35,110\nYou're always going to have peaks and\nvalleys and\n\n699\n00:37:35,110 --> 00:37:40,390\ntraffic, but on average I want it to\nwork out to about 50% of that adapter.\n\n700\n00:37:40,390 --> 00:37:44,030\nWhen there's a peak,\nI'm going to cap that at\n\n701\n00:37:45,530 --> 00:37:50,190\nnot 100 but 90 megabit I'm\ngoing to say that even at peak,\n\n702\n00:37:50,190 --> 00:37:53,450\nif someone really slams this thing,\nstopping at 90 megabit.\n\n703\n00:37:53,450 --> 00:37:56,020\nThat way there's at least 10 megabit for\nthe staff network, so\n\n704\n00:37:56,020 --> 00:37:58,020\nthe staff can still work.\n\n705\n00:37:58,020 --> 00:38:00,040\nAnd then if we want to allow bursts,\n\n706\n00:38:00,040 --> 00:38:05,455\nthe burst 's right now is set to\nlet's see, we've got 102 megs.\n\n707\n00:38:05,455 --> 00:38:09,075\nWhich is basically the absolute\nhighest that we could hit to.\n\n708\n00:38:09,075 --> 00:38:10,825\nSo we might want to turn that down.\n\n709\n00:38:10,825 --> 00:38:13,185\nThe other two settings here will\nbe adequate for what I need.\n\n710\n00:38:13,185 --> 00:38:14,515\nSo we specify that.\n\n711\n00:38:14,515 --> 00:38:18,825\nAnd now it limits down that network and\nensures that we don't go crazy.\n\n712\n00:38:18,825 --> 00:38:20,695\nThe student network will be throttled.\n\n713\n00:38:20,695 --> 00:38:21,475\nThe staff network.\n\n714\n00:38:21,475 --> 00:38:22,785\nIf I don't set these policies,\n\n715\n00:38:22,785 --> 00:38:25,430\nthey can use 100% of the adaptor\nif they want, all right?\n\n716\n00:38:25,430 --> 00:38:29,010\nBut I might want to go and set this\nsame exact policy on the staff side\n\n717\n00:38:29,010 --> 00:38:32,400\nto ensure that somebody's not in\nthe teacher's lounge watching Netflix and\n\n718\n00:38:32,400 --> 00:38:33,800\nburning up our bandwidth.\n\n719\n00:38:33,800 --> 00:38:36,130\nThat we can kind of control\nthat a little bit better.\n\n720\n00:38:38,428 --> 00:38:42,380\nAll right, and then the last policy\noption here is Teaming and Failover.\n\n721\n00:38:42,380 --> 00:38:46,090\nWhen we have more than one network\nadaptor, and they're both active,\n\n722\n00:38:46,090 --> 00:38:48,770\nhow does it handle the load balancing?\n\n723\n00:38:48,770 --> 00:38:50,550\nAnd you'll see here,\nthe option where I can come in and\n\n724\n00:38:50,550 --> 00:38:52,380\noverride the default policy.\n\n725\n00:38:52,380 --> 00:38:55,780\nAnd the default is just a route based\non the originating virtual port.\n\n726\n00:38:57,130 --> 00:38:59,470\nIt actually balances based on the VMs.\n\n727\n00:38:59,470 --> 00:39:02,210\nSo one VM might be sent to one link, and\n\n728\n00:39:02,210 --> 00:39:05,600\nanother VM might be sent to the other\nlink, if we have more than one active.\n\n729\n00:39:05,600 --> 00:39:07,980\nBut if you have one VM\nthat's responsible for\n\n730\n00:39:07,980 --> 00:39:11,570\nmost of your traffic,\nthen this doesn't really help out.\n\n731\n00:39:11,570 --> 00:39:14,820\nYou're not really load balancing, so\nyou might want to choose one of the other\n\n732\n00:39:14,820 --> 00:39:20,190\nmechanisms, route based on IP address,\nroute based on source MAC address,\n\n733\n00:39:20,190 --> 00:39:24,740\nuse the explicit failover order,\nthe way the adaptors are listed.\n\n734\n00:39:24,740 --> 00:39:28,250\nSo we can manipulate how\nthat load balancing occurs.\n\n735\n00:39:28,250 --> 00:39:32,150\nWe can manipulate how link failures\nare detected, based on link status.\n\n736\n00:39:32,150 --> 00:39:33,840\nYou know,\nwhether they have a link light or not,\n\n737\n00:39:33,840 --> 00:39:37,190\nbased on an actual beacon,\nsend a communication.\n\n738\n00:39:37,190 --> 00:39:41,880\nWhen you have a network cable, your normal\ncat 5 or cat 6 cable has eight wires in\n\n739\n00:39:41,880 --> 00:39:45,770\nit, and it's really just two wires that\ndetermine whether you get a link light.\n\n740\n00:39:45,770 --> 00:39:49,142\nYou can have a link light on a line,\nand not be able to send data over it.\n\n741\n00:39:49,142 --> 00:39:51,686\nSo the beacon is a little\nbit more thorough.\n\n742\n00:39:51,686 --> 00:39:55,864\nIt will give you better indicators of\nwhether the lines are truly working.\n\n743\n00:39:55,864 --> 00:39:57,559\nNotify switches.\n\n744\n00:39:57,559 --> 00:40:01,310\nRemember, I mentioned that if one link\nfails, we jump over to the other one.\n\n745\n00:40:01,310 --> 00:40:04,660\nSo, our MAC addresses are all\nmoving to the other link.\n\n746\n00:40:04,660 --> 00:40:07,030\nThe switch has to learn that on its own.\n\n747\n00:40:07,030 --> 00:40:09,915\nIf you have virtual machines\nthat aren't talking very often,\n\n748\n00:40:09,915 --> 00:40:12,760\nthen the switch might not\nlearn that right away.\n\n749\n00:40:12,760 --> 00:40:15,620\nAnd so, we might miss some data\nwhen that fail over happens.\n\n750\n00:40:15,620 --> 00:40:20,760\nIf you choose to notify the switches,\nthe instant a fail over happens,\n\n751\n00:40:20,760 --> 00:40:25,000\nVMware, or ESX, will actually send out\na communication on the new link saying,\n\n752\n00:40:25,000 --> 00:40:27,240\nhey this MAC address is here and\nthat MAC address is there.\n\n753\n00:40:27,240 --> 00:40:30,150\nSo we tell the switch before the host or\n\n754\n00:40:30,150 --> 00:40:33,120\nthe guests even have a chance\nto communicate themselves.\n\n755\n00:40:33,120 --> 00:40:36,366\nThis minimizes the latency that\nhappens when a fail over occurs.\n\n756\n00:40:38,247 --> 00:40:39,907\nAnd then lastly, fail back.\n\n757\n00:40:39,907 --> 00:40:44,541\nIn the active standby model, when the\nactive one fails, the standby kicks in and\n\n758\n00:40:44,541 --> 00:40:47,627\nthe standby will stay active\nuntil it fails, right?\n\n759\n00:40:47,627 --> 00:40:51,122\nIt will never fail back to the other link,\neven if the other link comes back on, but\n\n760\n00:40:51,122 --> 00:40:53,706\nwe can turn that option on right here and\nsay yes, fail back,\n\n761\n00:40:53,706 --> 00:40:56,159\nif the other one comes back on,\nwe want to move back to it.\n\n762\n00:40:57,680 --> 00:40:58,270\nAll right?\n\n763\n00:40:58,270 --> 00:41:00,590\nAnd then we can override\nthat fail over order here.\n\n764\n00:41:00,590 --> 00:41:03,200\nWe can kinda change that\nbehavior if we need to.\n\n765\n00:41:03,200 --> 00:41:04,220\nAll right?\n\n766\n00:41:04,220 --> 00:41:08,040\nNow this is all based\non the student network.\n\n767\n00:41:08,040 --> 00:41:08,660\nRight?\n\n768\n00:41:08,660 --> 00:41:11,050\nWe also have the staff network.\n\n769\n00:41:11,050 --> 00:41:12,952\nYou can have different settings here for\n\n770\n00:41:12,952 --> 00:41:15,770\nfail over based on whether you're\non the student or the staff side.\n\n771\n00:41:15,770 --> 00:41:17,750\nMaybe if a link fails.\n\n772\n00:41:17,750 --> 00:41:20,060\nI just want the student network\nto die out and that's it, and\n\n773\n00:41:20,060 --> 00:41:22,020\nthe staff will fail over and have access.\n\n774\n00:41:22,020 --> 00:41:26,120\nSo we can do manipulations like that,\nall right.\n\n775\n00:41:26,120 --> 00:41:33,510\nThose are all some of the settings\nthat we have inside of our vSwitches.\n\n776\n00:41:33,510 --> 00:41:35,440\nIt's a lot of neat stuff,\n\n777\n00:41:35,440 --> 00:41:38,580\nreally cool things if you know\nwhat you want to achieve.\n\n778\n00:41:38,580 --> 00:41:42,600\nYou can go in and set that information,\nand then you're ready to rock.\n\n779\n00:41:42,600 --> 00:41:43,380\nAll right.\n\n780\n00:41:43,380 --> 00:41:47,510\nThe biggest problem with vSwitches\nis simply that they're tied to\n\n781\n00:41:47,510 --> 00:41:51,290\nthe individual ESXi hosts, all right.\n\n782\n00:41:51,290 --> 00:41:55,140\nSo if you just have one host, the built-in\nvSwitch will work just fine for you.\n\n783\n00:41:55,140 --> 00:41:58,190\nIf you have two or three hosts,\neven five hosts, it's not so bad.\n\n784\n00:41:58,190 --> 00:41:59,480\nYou can deal with those.\n\n785\n00:41:59,480 --> 00:42:02,428\nBut if you have 1,000\nhosts that are out there,\n\n786\n00:42:02,428 --> 00:42:06,400\n1,000 ESXi boxes, it becomes a little\nchallenging to have to go and\n\n787\n00:42:06,400 --> 00:42:09,700\nconfigure the vSwitches on each and every\none of them and have them be the same.\n\n788\n00:42:09,700 --> 00:42:11,500\nBecause what if we're doing fail over,\n\n789\n00:42:11,500 --> 00:42:15,120\nwhat if one machine jumps from\none physical host to another?\n\n790\n00:42:15,120 --> 00:42:18,650\nIt's gonna expect the network on the other\none to be the same and if it's not,\n\n791\n00:42:18,650 --> 00:42:22,600\nthen when that virtual machine jumps, it's\nnot gonna have network connectivity and\n\n792\n00:42:22,600 --> 00:42:23,410\nit's gonna be dead in the water.\n\n793\n00:42:23,410 --> 00:42:26,850\nYou might as well have not failed over,\nyou're gonna lose access to the machine.\n\n794\n00:42:26,850 --> 00:42:29,260\nSo what we really need\n\n795\n00:42:29,260 --> 00:42:34,170\nis a way to get a consistent\nconfiguration across multiple machines.\n\n796\n00:42:34,170 --> 00:42:37,070\nThat is easy to manage and\n\n797\n00:42:37,070 --> 00:42:41,000\nthat's what the distributed virtual\nswitches, or the dvSwitches, give us.\n\n798\n00:42:42,070 --> 00:42:45,670\nSo that's about all I want\nto do on a standard vSwitch,\n\n799\n00:42:45,670 --> 00:42:48,300\nlet's take a look at dvSwitches now,\nall right.\n\n800\n00:42:48,300 --> 00:42:52,970\nNow to set this up, I want to kind of\nremove some of the stuff I did here and\n\n801\n00:42:52,970 --> 00:42:56,150\nactually in the official exam objectives,\nit calls out.\n\n802\n00:42:56,150 --> 00:42:59,380\nNot just creating, but removing some\nof the entities that we've made.\n\n803\n00:42:59,380 --> 00:43:02,100\nIt's not very hard to remove\nsome of these things.\n\n804\n00:43:02,100 --> 00:43:04,410\nIf you wanna get like a physical\nadapter out of there,\n\n805\n00:43:05,650 --> 00:43:10,050\nall you have to do is edit the vSwitch and\nremove the physical adapter from it.\n\n806\n00:43:10,050 --> 00:43:13,840\nSo, like if I go into my vSwitch,\nnotice, and\n\n807\n00:43:13,840 --> 00:43:17,980\nthis is actually important here,\nwhen I edit that vSwitch,\n\n808\n00:43:17,980 --> 00:43:23,180\nI've got all those same policy options\nthat I saw on the individual port group.\n\n809\n00:43:24,330 --> 00:43:28,010\nSo the port group was overriding the\ndefault policy coming from the vSwitch.\n\n810\n00:43:28,010 --> 00:43:29,710\nSo that's what I'm looking at here.\n\n811\n00:43:29,710 --> 00:43:34,640\nThe difference of how I got to that was\ndown here I clicked on Management Network.\n\n812\n00:43:34,640 --> 00:43:35,970\nAnd then hit Edit.\n\n813\n00:43:35,970 --> 00:43:38,430\nBut if I go up here to vSwitch, and\n\n814\n00:43:38,430 --> 00:43:42,810\nhit edit, that's where I'm editing\nthe entire vSwitch as a whole.\n\n815\n00:43:42,810 --> 00:43:45,060\nAnd here's where I can go in and\nI can manipulate those settings.\n\n816\n00:43:45,060 --> 00:43:46,440\nThese would effect everybody though.\n\n817\n00:43:46,440 --> 00:43:48,670\nIn my scenario, I just wanted\nto effect the student network.\n\n818\n00:43:50,980 --> 00:43:53,770\nIf I go to teaming and fail over though,\nhere's where I can start to see some of\n\n819\n00:43:53,770 --> 00:43:59,310\nthese other adapters and I can manipulate\nthose or change them as needed.\n\n820\n00:43:59,310 --> 00:44:03,050\nBump them up, bump them down.\n\n821\n00:44:03,050 --> 00:44:07,080\nIf we want to remove something\nlike removing this port group,\n\n822\n00:44:07,080 --> 00:44:10,620\nwe just highlight it and we hit the x and\nthat will take that out of there.\n\n823\n00:44:10,620 --> 00:44:15,510\nNow it's just warning me here, did I pick\nmy, I think I picked my management one.\n\n824\n00:44:17,020 --> 00:44:19,710\nIt's warning me that I'm\nremoving the only VM kernel and\n\n825\n00:44:19,710 --> 00:44:21,190\nI picked the wrong one, I did.\n\n826\n00:44:21,190 --> 00:44:25,180\nSo if I remove that one, I'm gonna\nlose my connectivity to the ESXi host,\n\n827\n00:44:25,180 --> 00:44:26,040\nthat would be bad.\n\n828\n00:44:26,040 --> 00:44:27,520\nIt's not the end of the world,\n\n829\n00:44:27,520 --> 00:44:30,970\nyou can always go to the console\nof the machine and rebuild that.\n\n830\n00:44:30,970 --> 00:44:33,890\nSo it's not the end of the world,\nbut not something I meant to do.\n\n831\n00:44:33,890 --> 00:44:36,060\nI meant to delete student, there we go.\n\n832\n00:44:36,060 --> 00:44:39,190\nSo I can just take the student network and\ndelete that out of there.\n\n833\n00:44:39,190 --> 00:44:42,000\nNow VM Linux 1 was plugged\ninto that port group and so\n\n834\n00:44:42,000 --> 00:44:43,280\nit's gonna be upset about that so\n\n835\n00:44:43,280 --> 00:44:47,270\nI get a warning here about that telling\nme that the student network is in use.\n\n836\n00:44:47,270 --> 00:44:52,380\nSo I really need to move VM Linux\n1 out to somewhere else if\n\n837\n00:44:52,380 --> 00:44:58,180\nI want to be able to go in and\nremove that.\n\n838\n00:44:58,180 --> 00:45:00,955\nBut staff network is empty so\nI can take that one and delete it.\n\n839\n00:45:02,510 --> 00:45:04,910\nAnd that'll wipe that one out and\nthen I'll have to go and\n\n840\n00:45:04,910 --> 00:45:08,110\nmove VM Linux one back to\nthe other side to remove it.\n\n841\n00:45:08,110 --> 00:45:09,740\nRemoving a virtual switch is the same way,\n\n842\n00:45:09,740 --> 00:45:12,210\nyou just click the virtual\nswitch up here and hit delete.\n\n843\n00:45:12,210 --> 00:45:15,900\nBut if it's actively in use\nit's not gonna let you do that.\n\n844\n00:45:15,900 --> 00:45:18,360\nSo that's my primary issue right now.\n\n845\n00:45:20,350 --> 00:45:24,430\nYou've also got with the vSwitch you'll\nsee some of the other buttons up here,\n\n846\n00:45:24,430 --> 00:45:28,450\nlike this guy which is manage\nthe physical network adapters.\n\n847\n00:45:28,450 --> 00:45:31,380\nAnd if I choose that,\nthat's where I can see the adapters and\n\n848\n00:45:31,380 --> 00:45:33,870\nhere's where it'll let\nme remove the adapters.\n\n849\n00:45:33,870 --> 00:45:36,890\nSo if I want to remove vmnic1,\nI can do that, and\n\n850\n00:45:36,890 --> 00:45:40,280\nnow I'll go back to just having\na single active adapter.\n\n851\n00:45:40,280 --> 00:45:42,980\nSo pretty easy to manipulate this stuff.\n\n852\n00:45:42,980 --> 00:45:44,320\nJust be careful.\n\n853\n00:45:44,320 --> 00:45:47,270\nThere are times where you could\npotentially lock yourself\n\n854\n00:45:47,270 --> 00:45:48,560\nout of the system.\n\n855\n00:45:48,560 --> 00:45:52,240\nSo for example, really the VMkernel\none's are the best example.\n\n856\n00:45:52,240 --> 00:45:55,420\nIf I have a new vSwitch and\n\n857\n00:45:55,420 --> 00:45:59,430\nI want my kernel functionality to\nbe on the other vSwitch right?\n\n858\n00:45:59,430 --> 00:46:03,710\nThere's a moment where I can lose that\naccess and you probably noticed when I ran\n\n859\n00:46:03,710 --> 00:46:06,920\nto that wizard earlier to create a VM\nkernel I didn't finish the wizard.\n\n860\n00:46:06,920 --> 00:46:10,020\nI just clicked cancel and the reason is,\nI'm connected to that machine right now.\n\n861\n00:46:10,020 --> 00:46:11,840\nI don't wanna lose my connection.\n\n862\n00:46:11,840 --> 00:46:15,170\nSo what you really should do is\ncreate the other vSwitch first and\n\n863\n00:46:15,170 --> 00:46:19,600\nonce it's there, you'll see there's\nan option up here, if I float over it.\n\n864\n00:46:19,600 --> 00:46:22,910\nMigrate VM kernel network\nadapter to the selected switch.\n\n865\n00:46:22,910 --> 00:46:26,170\nAnd that will let you take your your\nexisting VM kernel connector that\n\n866\n00:46:26,170 --> 00:46:27,640\nmanagement interface and\n\n867\n00:46:27,640 --> 00:46:31,590\ngracefully move it over to the other\nlink and put it over there.\n\n868\n00:46:31,590 --> 00:46:35,290\nYou'll still lose connection but\nit'll come up on the other vSwitch and\n\n869\n00:46:35,290 --> 00:46:36,510\nyou'll be able to reconnect.\n\n870\n00:46:36,510 --> 00:46:39,409\nSo that kind of automates that process.\n\n871\n00:46:40,850 --> 00:46:41,680\nAll right.\n\n872\n00:46:41,680 --> 00:46:43,390\nSo if I wanna get rid of\nthis student network,\n\n873\n00:46:43,390 --> 00:46:45,720\nthat would be the last thing I need to do.\n\n874\n00:46:45,720 --> 00:46:48,980\nI just need to move that\nguest off of that port group.\n\n875\n00:46:48,980 --> 00:46:51,544\nSo let me go and tackle that real quick.\n\n876\n00:46:53,447 --> 00:46:54,880\nAnd I'll get into my virtual machines.\n\n877\n00:46:54,880 --> 00:46:59,390\nAnd I'm just gonna bump that VM Linux\n1 over to a different network.\n\n878\n00:47:03,280 --> 00:47:05,200\nSo I'll just go and edit its settings.\n\n879\n00:47:05,200 --> 00:47:07,040\nSo there.\nIt's connected to the student network.\n\n880\n00:47:07,040 --> 00:47:08,230\nShows it's actively connected.\n\n881\n00:47:08,230 --> 00:47:10,050\nThat's our problem.\n\n882\n00:47:10,050 --> 00:47:14,906\nSo I'll just flip that over and\nplug it into the default VM network.\n\n883\n00:47:14,906 --> 00:47:15,970\nAll right.\n\n884\n00:47:15,970 --> 00:47:19,161\nAnd once that's done now I can jump\nover and delete that port group.\n\n885\n00:47:22,469 --> 00:47:23,850\nYeah.\n\n886\n00:47:23,850 --> 00:47:26,900\nOne of the nice things about running\nthe vSphere client, the native client that\n\n887\n00:47:26,900 --> 00:47:30,190\nruns on your own machine,\nit's a little bit faster for the UI.\n\n888\n00:47:30,190 --> 00:47:33,050\nWith the web client,\nit's all web calls, so\n\n889\n00:47:33,050 --> 00:47:36,420\nit's a little bit slow to jump around,\nbut you get used to it.\n\n890\n00:47:36,420 --> 00:47:39,010\nThis is the recommended way\nto manage it from VMware,\n\n891\n00:47:39,010 --> 00:47:42,062\nthat's why I try to use the web client for\neverything when possible.\n\n892\n00:47:42,062 --> 00:47:45,171\nAll right.\n\n893\n00:47:45,171 --> 00:47:48,777\nSo let me get back over to that server,\nnow I've got a warning on that server\n\n894\n00:47:48,777 --> 00:47:51,637\nright now, from where I tried\nto remove that port group, so\n\n895\n00:47:51,637 --> 00:47:54,287\nthat warning is going to sit\nthere until I clear it out.\n\n896\n00:47:54,287 --> 00:47:56,476\nBut I'm about to go and\ndelete that core group anyway so\n\n897\n00:47:56,476 --> 00:47:57,724\nI'm not too worried about it.\n\n898\n00:47:57,724 --> 00:48:00,731\nAnd I can look, the core group\nis now empty so I can go in and\n\n899\n00:48:00,731 --> 00:48:04,010\nsuccessfully delete it and\nthat'll knock that out of there.\n\n900\n00:48:08,440 --> 00:48:09,240\nThere we go.\n\n901\n00:48:09,240 --> 00:48:11,980\nSo now I'm back to my original\nconfiguration easy enough.\n\n902\n00:48:11,980 --> 00:48:15,280\nAnd at no point did I damage\nmy VM kernel connection, so\n\n903\n00:48:15,280 --> 00:48:18,380\nI never lost connection to that server,\nI was able to keep working with it.\n\n904\n00:48:18,380 --> 00:48:19,680\nI move VM Linux.\n\n905\n00:48:19,680 --> 00:48:21,900\nNow when I move that virtual machine,\nwhat it sees,\n\n906\n00:48:21,900 --> 00:48:25,630\nthe virtual machine thinks we unplugged it\nfrom its adapter and plugged it back in.\n\n907\n00:48:25,630 --> 00:48:28,920\nAnd that's important because\nif you're running DHCP\n\n908\n00:48:28,920 --> 00:48:33,010\nthat adapter's state change is\nwhat'll trigger a new DHCP update.\n\n909\n00:48:33,010 --> 00:48:35,100\nSo it'll get an address\nfrom that new network.\n\n910\n00:48:35,100 --> 00:48:38,160\nI assigned a static IP to this one though,\nso it wouldn't have acted on that.\n\n911\n00:48:40,080 --> 00:48:41,230\nAll right.\n\n912\n00:48:41,230 --> 00:48:46,220\nSo what I want to do now is I want to\ntake a look at distributed V switches and\n\n913\n00:48:46,220 --> 00:48:49,950\nhow we can get this common\nconfiguration spread across hosts and\n\n914\n00:48:49,950 --> 00:48:51,360\nreally get some neat stuff.\n\n915\n00:48:51,360 --> 00:48:53,040\nAnd we'll actually get some\nadditional features and\n\n916\n00:48:53,040 --> 00:48:54,570\nfunctionalities with the DV switches.\n\n917\n00:48:54,570 --> 00:48:56,620\nSo really really cool there.\n\n918\n00:48:56,620 --> 00:48:59,070\nNow before I dive into that,\nlet me mention one thing.\n\n919\n00:49:00,230 --> 00:49:04,440\nV switches that's the standard\nstuff built right into ESXI.\n\n920\n00:49:05,860 --> 00:49:09,390\nDV switches, distributive virtual\nswitches, we have to create them, so\n\n921\n00:49:09,390 --> 00:49:14,670\nthey're not there by default, we have\nto add them in and it is a function of\n\n922\n00:49:14,670 --> 00:49:18,920\nthe vSphere Enterprise Plus suite,\nall right.\n\n923\n00:49:18,920 --> 00:49:21,150\nSo if you have vSphere Standard or\n\n924\n00:49:21,150 --> 00:49:24,910\nvSphere Enterprise, you won't have\ndistributed virtual switches.\n\n925\n00:49:24,910 --> 00:49:27,430\nSo it's got to be vSphere Enterprise Plus.\n\n926\n00:49:27,430 --> 00:49:30,650\nNow I'm running an evaluation right\nhere so I've got all the functionality.\n\n927\n00:49:30,650 --> 00:49:32,220\nSo I'll be able to do it just fine.\n\n928\n00:49:32,220 --> 00:49:36,170\nBut in your production environment, if\nyou notice this DV stuff is missing, and\n\n929\n00:49:36,170 --> 00:49:39,220\nthat's probably why, you're probably\nnot running the Enterprise Plus Suite.\n\n930\n00:49:40,390 --> 00:49:44,650\nThe other thing is that VM ware has\na real close relationship with Cisco,\n\n931\n00:49:44,650 --> 00:49:46,110\nthe networking company.\n\n932\n00:49:46,110 --> 00:49:50,630\nAnd so they actually made it where,\ninstead of using the DV switch,\n\n933\n00:49:50,630 --> 00:49:54,980\nyou can use Cisco's Nexus 1,000 V switch.\n\n934\n00:49:54,980 --> 00:49:57,240\nNow, Cisco makes hardware switches.\n\n935\n00:49:57,240 --> 00:50:02,210\nBut the Nexus 1000V is actually a virtual\nswitch, and it can run right on\n\n936\n00:50:02,210 --> 00:50:06,940\nyour ESX box and completely replace\nthe functionality of the DD switch.\n\n937\n00:50:06,940 --> 00:50:09,450\nNow, you might ask yourself,\nwhy would I do that?\n\n938\n00:50:09,450 --> 00:50:13,680\nAnd the answer is, the DV switch is\npowerful, it's got a lot of features,\n\n939\n00:50:13,680 --> 00:50:15,810\nwe're going to see,\nit's got a lot of neat stuff in it.\n\n940\n00:50:15,810 --> 00:50:18,030\nBut there's some things\nthat it doesn't do,\n\n941\n00:50:18,030 --> 00:50:20,070\nlike it doesn't have access control lists.\n\n942\n00:50:20,070 --> 00:50:22,730\nRight?\nI can't filter traffic based on MACs, or\n\n943\n00:50:22,730 --> 00:50:24,290\nIPs, or whatever.\n\n944\n00:50:24,290 --> 00:50:27,030\nBut the Nexus 1000V, it does.\n\n945\n00:50:27,030 --> 00:50:28,330\nIt can do policy routing,\n\n946\n00:50:28,330 --> 00:50:32,500\nit can do all sorts of crazy things\nthat Cisco is just an expert at.\n\n947\n00:50:32,500 --> 00:50:36,860\nThey're a networking company versus VM\nwear, they're a virtualization company.\n\n948\n00:50:36,860 --> 00:50:39,520\nSo that's why the partnered together\nto create that functionality.\n\n949\n00:50:39,520 --> 00:50:42,620\nNow the Nexus 1000 V software is not free.\n\n950\n00:50:42,620 --> 00:50:43,640\nYou have to purchase it and\n\n951\n00:50:43,640 --> 00:50:46,480\nit costs the same as a physical\nswitch even though it's virtual.\n\n952\n00:50:46,480 --> 00:50:47,860\nSo it's not cheap.\n\n953\n00:50:47,860 --> 00:50:50,450\nBut if you're running\nan enterprise class data center,\n\n954\n00:50:50,450 --> 00:50:52,250\nthe functionality it gives\nyou is really handy.\n\n955\n00:50:52,250 --> 00:50:54,920\nSo you may very well want to use that,\nall right?\n\n956\n00:50:54,920 --> 00:50:57,560\nOn the exam you're not going to see that,\n\n957\n00:50:57,560 --> 00:50:59,490\nthe most you'll see is just\nthe fact you can do it.\n\n958\n00:50:59,490 --> 00:51:03,970\nYou can use the Nexus 1000V if you want\nas a replacement for the dvSwitch.\n\n959\n00:51:03,970 --> 00:51:05,300\nThere's no need to use both.\n\n960\n00:51:05,300 --> 00:51:07,750\nThere'd never be a time when\nyou'd want both software.\n\n961\n00:51:07,750 --> 00:51:11,200\nAll right, but what we're going to take\na look at is the DV switches built in and\n\n962\n00:51:11,200 --> 00:51:14,200\nfor most people it's going to\nprovide exactly what you want\n\n963\n00:51:14,200 --> 00:51:18,006\nin a high end enterprise environment so\nyou might not need the Nexus side.\n\n964\n00:51:18,006 --> 00:51:23,440\nAll right, but you know what, this is a\ngood spot for us to stop and take a break.\n\n965\n00:51:23,440 --> 00:51:27,730\nSo why don't we pause here, I'll catch my\nbreath and then we will jump back into\n\n966\n00:51:27,730 --> 00:51:30,120\nDV switches and\nget a chance to see all the action there.\n\n967\n00:51:30,120 --> 00:51:32,328\nSo stay tuned, we'll be back after this.\n\n968\n00:51:32,328 --> 00:51:38,736\n[MUSIC]\n\n969\n00:51:38,736 --> 00:51:40,328\n[SOUND] All right, welcome back.\n\n970\n00:51:40,328 --> 00:51:46,050\nSo now we're going to dive into the world\nof distributed virtual switches.\n\n971\n00:51:46,050 --> 00:51:50,094\nI mentioned earlier,\nI kind of threw out a vague concept of,\n\n972\n00:51:50,094 --> 00:51:52,430\noh DV switches are awesome,\nyou should run them.\n\n973\n00:51:52,430 --> 00:51:55,070\nBut, we really do need to have\nan understanding of whether we'll\n\n974\n00:51:55,070 --> 00:51:58,080\ntruly benefit from what they\noffer because moving up to that\n\n975\n00:51:58,080 --> 00:52:00,400\nEnterprise Plus Suite, you know?\n\n976\n00:52:00,400 --> 00:52:02,390\nThat's going to cost you\nsome money right there,\n\n977\n00:52:02,390 --> 00:52:07,710\nI think that puts you at like $5000 per\nhost, I think is the retail price on that.\n\n978\n00:52:07,710 --> 00:52:10,340\nSo is it worth that much money, right?\n\n979\n00:52:10,340 --> 00:52:11,370\nTo get this extra functionality?\n\n980\n00:52:11,370 --> 00:52:14,530\nSo what are some of the things we\ngained by going to DV switches?\n\n981\n00:52:14,530 --> 00:52:18,230\nWell I summarized some of\nthe things here in my show notes so\n\n982\n00:52:18,230 --> 00:52:20,030\nI just want to bring this up real quick.\n\n983\n00:52:20,030 --> 00:52:22,800\nI mentioned that you have\nto have vc enterprise plus.\n\n984\n00:52:22,800 --> 00:52:26,010\nAnd I didn't mention it because it\nkind of goes without saying you need\n\n985\n00:52:26,010 --> 00:52:28,328\nvcenter server.\n\n986\n00:52:28,328 --> 00:52:32,110\nBecause the dvSwitch is going to\nspread across more than one host\n\n987\n00:52:32,110 --> 00:52:35,270\nyou can't manage it just\nfrom a single host.\n\n988\n00:52:35,270 --> 00:52:37,954\nThe regular vSphere clients and\nthe regular straight,\n\n989\n00:52:37,954 --> 00:52:40,900\nsingle-host management\nthat's not going to work.\n\n990\n00:52:40,900 --> 00:52:42,610\nYou've got to have vCenter.\n\n991\n00:52:42,610 --> 00:52:45,950\nSo, vCenter adds more to your cost, also.\n\n992\n00:52:45,950 --> 00:52:50,400\nBut, our big advantage is, I've showed\nyou guys traffic shaping under vSwitches.\n\n993\n00:52:50,400 --> 00:52:55,570\nOne of the things I forgot to mention is\na normal vSwitch can only traffic shape\n\n994\n00:52:55,570 --> 00:52:56,690\noutbound traffic.\n\n995\n00:52:56,690 --> 00:52:59,840\nTraffic coming in, it's coming in\ncan't really do much about it, right?\n\n996\n00:52:59,840 --> 00:53:02,180\nIt just shapes outbound traffic.\n\n997\n00:53:02,180 --> 00:53:03,580\nBut with the dvSwitch,\n\n998\n00:53:03,580 --> 00:53:08,070\nit can traffic shape both directions,\nincoming and outgoing.\n\n999\n00:53:08,070 --> 00:53:11,420\nWhen you have somebody who's browsing\nthe Internet, like going to Netflix\n\n1000\n00:53:11,420 --> 00:53:14,740\nthey're sending clicks,\nthey're just mouse clicks, up to Netflix.\n\n1001\n00:53:14,740 --> 00:53:17,100\nNetflix is sending a ton of video back,\n\n1002\n00:53:17,100 --> 00:53:21,750\nso inbound is oftentimes where most\nof our traffic is coming from anyway.\n\n1003\n00:53:21,750 --> 00:53:26,680\nSo that may be what we want to shape,\nso the dvSwitch gives us that ability.\n\n1004\n00:53:26,680 --> 00:53:31,240\nBefore we even go there, I'll tell you,\ntraffic shaping at this point, by the time\n\n1005\n00:53:31,240 --> 00:53:34,820\nthe traffic has already reached your host,\nmay not be the most effective thing.\n\n1006\n00:53:34,820 --> 00:53:38,300\nSo traffic shaping on your router,\nthat's an even better place to do it,\n\n1007\n00:53:38,300 --> 00:53:40,420\nright, at the border of your network.\n\n1008\n00:53:40,420 --> 00:53:41,990\nSo there are other ways to approach this,\n\n1009\n00:53:41,990 --> 00:53:46,310\ndon't feel like this is the only way\nthat you can shape that traffic.\n\n1010\n00:53:46,310 --> 00:53:50,660\nThe big benefit is if you're doing\nclustering, and you need to have a common\n\n1011\n00:53:50,660 --> 00:53:54,210\nconfiguration across your host,\na dvSwitch will enforce that.\n\n1012\n00:53:54,210 --> 00:53:58,900\nIt gives you that single configuration and\nso when you update, when you add more\n\n1013\n00:53:58,900 --> 00:54:02,900\nhost to this V Switch,to this DV switch,\nthey'll get that same configuration.\n\n1014\n00:54:02,900 --> 00:54:04,830\nIt will be consistent\nacross your environment.\n\n1015\n00:54:06,150 --> 00:54:09,930\nSome of the other things,\nthe load balancing side..The\n\n1016\n00:54:09,930 --> 00:54:14,270\nload balancing on the standard V Switch\nis effective but it's not perfect.\n\n1017\n00:54:14,270 --> 00:54:17,550\nThere are several scenarios where\nyour cards can get out of balance.\n\n1018\n00:54:17,550 --> 00:54:22,940\nWith the DV switch, it has support for\nLACP, the Link Aggregation and\n\n1019\n00:54:22,940 --> 00:54:28,070\nControl Protocol and that's a standard\nthat is supported by Cisco,\n\n1020\n00:54:28,070 --> 00:54:31,060\nHP, all the major switch\nvendors that are out there.\n\n1021\n00:54:31,060 --> 00:54:37,120\nWhere your EXS boxes and the physical\nswitches can talk to each other and\n\n1022\n00:54:37,120 --> 00:54:39,780\nshare information about the fact\nthat they're load balancing.\n\n1023\n00:54:39,780 --> 00:54:42,770\nAnd so, it'll take those\nmultiple physical adaptors and\n\n1024\n00:54:42,770 --> 00:54:47,530\nturn them into one big virtual adaptor\nthat's spread across multiple interfaces.\n\n1025\n00:54:47,530 --> 00:54:50,880\nWhen the switch understands,\nand the host understands,\n\n1026\n00:54:50,880 --> 00:54:54,760\nthen now traffic can jump across\ndifferent lines and it doesn't matter.\n\n1027\n00:54:54,760 --> 00:54:58,680\nYou can have one VM sending\ntraffic across all four VLANs.\n\n1028\n00:54:58,680 --> 00:55:03,930\nA standard vSwitch will send a single\nVM's traffic over just one of those NICs.\n\n1029\n00:55:03,930 --> 00:55:06,410\nWhen you start doing LACP,\nyou can move across all of them,\n\n1030\n00:55:06,410 --> 00:55:07,330\nit's really impressive.\n\n1031\n00:55:08,780 --> 00:55:11,070\nAll right, we also get enhanced\nmonitoring and reporting,\n\n1032\n00:55:11,070 --> 00:55:13,220\nbecause we're seeing\na bigger picture of traffic.\n\n1033\n00:55:13,220 --> 00:55:18,480\nWe're seeing traffic patterns across all\nof our devices and that includes NetFlow.\n\n1034\n00:55:18,480 --> 00:55:22,930\nNetFlow is a standard now,\nit wasn't always a standard.\n\n1035\n00:55:22,930 --> 00:55:27,570\nIt was developed heavily by Cisco, but it\nis a standard now that switches can use to\n\n1036\n00:55:27,570 --> 00:55:31,890\nreport back all sorts of information,\nas far as how much bandwidth each port\n\n1037\n00:55:31,890 --> 00:55:36,840\nwas using, what protocols were responsible\nfor that bandwidth, what host, or\n\n1038\n00:55:36,840 --> 00:55:41,000\nwhat guest, was talking to another guest,\nor what communications were happening.\n\n1039\n00:55:41,000 --> 00:55:44,010\nThe VMs or other machines,\nthe endpoints that we're talking.\n\n1040\n00:55:44,010 --> 00:55:45,850\nYou get tons of reporting.\n\n1041\n00:55:45,850 --> 00:55:46,968\nNow, if you run a sniffer and\n\n1042\n00:55:46,968 --> 00:55:49,727\nyou capture all the traffic you can\ngenerate those reports yourself.\n\n1043\n00:55:49,727 --> 00:55:54,369\nBut your captures will be massive because\nit's the actual network traffic in there.\n\n1044\n00:55:54,369 --> 00:55:58,875\nBut netflow, the reporting you get\nwith the dvSwitch It's not the actual\n\n1045\n00:55:58,875 --> 00:56:02,550\ntraffic payload,\nit's just descriptions of it.\n\n1046\n00:56:02,550 --> 00:56:04,560\nWhat host was talking to what other host?\n\n1047\n00:56:04,560 --> 00:56:06,350\nWhat protocol were they using?\n\n1048\n00:56:06,350 --> 00:56:07,840\nHow many bytes did they transfer?\n\n1049\n00:56:07,840 --> 00:56:11,070\nI don't need the actual bytes,\njust how many bytes, right?\n\n1050\n00:56:11,070 --> 00:56:13,540\nSo, it's reporting information\nlike that that gives you\n\n1051\n00:56:13,540 --> 00:56:17,794\nreally great insight into your system,\nand that comes from the DVswitch.\n\n1052\n00:56:19,100 --> 00:56:24,120\nWe also have support for 802.1p tagging\nthat's used for quality of service.\n\n1053\n00:56:24,120 --> 00:56:27,470\nWe don't normally do tagging in\nsoftware if we can avoid it.\n\n1054\n00:56:27,470 --> 00:56:30,140\nYour physical switches and\nyour routers can do it for\n\n1055\n00:56:30,140 --> 00:56:34,980\nyou but the earlier you tag\na packet as a particular type of\n\n1056\n00:56:34,980 --> 00:56:39,630\nservice the more efficiently,\nthat traffic can be handled.\n\n1057\n00:56:39,630 --> 00:56:42,580\nIf you've never worked with quality\nof service, the way it works is this.\n\n1058\n00:56:42,580 --> 00:56:47,600\nIf you have 2 computers communicating\nthrough a switch, they're sharing access,\n\n1059\n00:56:47,600 --> 00:56:49,890\nthey're sharing resources on that switch.\n\n1060\n00:56:49,890 --> 00:56:54,390\nAnd most switches work on what's called\na FIFO basis, first in first out.\n\n1061\n00:56:54,390 --> 00:56:57,300\nWhoever got there first is\nallowed to move through.\n\n1062\n00:56:57,300 --> 00:57:00,470\nBut on your network you might have some\ntraffic that's more sensitive than others,\n\n1063\n00:57:00,470 --> 00:57:02,780\nlike voice over IP traffic, right?\n\n1064\n00:57:02,780 --> 00:57:06,990\nSo with a web page,\nif I click on an image and\n\n1065\n00:57:06,990 --> 00:57:10,440\nit takes a second to download because\nthe network is slow, is that a big deal?\n\n1066\n00:57:10,440 --> 00:57:11,680\nNo I probably don't even notice.\n\n1067\n00:57:11,680 --> 00:57:15,470\nYou know it pauses for\na few milliseconds and then it displays.\n\n1068\n00:57:15,470 --> 00:57:18,850\nBut if I'm on a phone call and\nit's a pause, I notice.\n\n1069\n00:57:18,850 --> 00:57:21,750\nI notice somebody stopped talking right.\n\n1070\n00:57:21,750 --> 00:57:24,440\nAnd the problem with a phone call is\n\n1071\n00:57:24,440 --> 00:57:29,370\nwe can't just do a retransmit of what was\nlost, we've kind of moved back into time.\n\n1072\n00:57:29,370 --> 00:57:32,150\nSo what we have to do is just\ndrop that data and move past it.\n\n1073\n00:57:32,150 --> 00:57:34,870\nSo I actually notice\na loss of communication.\n\n1074\n00:57:34,870 --> 00:57:37,090\nSo voice over IP traffic\nis pretty sensitive.\n\n1075\n00:57:37,090 --> 00:57:39,400\nI want that data to get priority,\n\n1076\n00:57:39,400 --> 00:57:42,490\nover other traffic like watching\nvideos on the internet.\n\n1077\n00:57:42,490 --> 00:57:44,710\nWith quality of service,\nwe can enforce that.\n\n1078\n00:57:44,710 --> 00:57:47,250\nWe can say VoIP traffic\nis a higher priority.\n\n1079\n00:57:47,250 --> 00:57:50,260\nAnd if you've got a voice over IP PBX,\nright?\n\n1080\n00:57:50,260 --> 00:57:55,940\nIf you've got a free PBX box or something\nlike that running on the Mware v sphere.\n\n1081\n00:57:55,940 --> 00:58:00,500\nThen you might want that machine's traffic\nto get priority over other machines so\n\n1082\n00:58:00,500 --> 00:58:02,540\nyour voice call quality is good.\n\n1083\n00:58:02,540 --> 00:58:03,140\nAll right?\n\n1084\n00:58:03,140 --> 00:58:07,130\nSo by being able to do the tagging\nright there in the DVswitch,\n\n1085\n00:58:07,130 --> 00:58:10,090\nby the time you get to a physical\nswitch you're already tagged.\n\n1086\n00:58:10,090 --> 00:58:11,240\nThe switch knows what to do.\n\n1087\n00:58:11,240 --> 00:58:12,990\nIt knows to give you priority.\n\n1088\n00:58:12,990 --> 00:58:15,790\nIt doesn't have to analyze the traffic\nitself and then prioritize it,\n\n1089\n00:58:15,790 --> 00:58:16,500\nso it already knows.\n\n1090\n00:58:18,240 --> 00:58:20,090\nAnd we also get support for\nport mirroring.\n\n1091\n00:58:20,090 --> 00:58:24,468\nNow I just wrote port mirroring here,\nbut Cisco calls it SPAN or\n\n1092\n00:58:24,468 --> 00:58:30,320\nSwitch Port Analyzer.\n\n1093\n00:58:30,320 --> 00:58:35,660\nAnd what SPAM does is it allows you to\ntake all of the traffic on one port and\n\n1094\n00:58:35,660 --> 00:58:38,060\nmirror it, copy it to another port.\n\n1095\n00:58:38,060 --> 00:58:40,100\nWhy would we want to do that?\n\n1096\n00:58:40,100 --> 00:58:43,770\nWell, the most common example is if we\nhave an intrusion detection system,\n\n1097\n00:58:43,770 --> 00:58:45,110\nan IDS.\n\n1098\n00:58:45,110 --> 00:58:49,480\nIf you've got an IDS, we can send\na copy of all of our traffic to it.\n\n1099\n00:58:49,480 --> 00:58:53,000\nAnd IDS will scan that traffic and\nlook for well known attack patterns,\n\n1100\n00:58:53,000 --> 00:58:54,550\nand if it finds it, it can notify us.\n\n1101\n00:58:54,550 --> 00:58:58,220\nBut it requires us to get a copy\nof the data, if you get an IPS,\n\n1102\n00:58:58,220 --> 00:59:02,355\nan IPS sits in between\nthe monitored host and the network.\n\n1103\n00:59:02,355 --> 00:59:06,445\nBut the problem with an IPS,\nthe traffic flows through it.\n\n1104\n00:59:06,445 --> 00:59:08,555\nAnd as it scans it, it slows it down.\n\n1105\n00:59:08,555 --> 00:59:11,915\nSo an IDS does the same thing but\nwithout slowing us down.\n\n1106\n00:59:11,915 --> 00:59:15,700\nAnd so that's kind of a nice feature but\nit requires us to mirror that traffic.\n\n1107\n00:59:15,700 --> 00:59:17,550\nAnd a DVswitch can do that.\n\n1108\n00:59:17,550 --> 00:59:21,170\nIf you don't use a DVswitch,\nif you use a standard Vswitch,\n\n1109\n00:59:21,170 --> 00:59:23,760\nit'll be up to your physical\nswitch to do the mirroring.\n\n1110\n00:59:23,760 --> 00:59:28,140\nAnd the problem there is it's going to\nmirror all the traffic to the ESXI host,\n\n1111\n00:59:28,140 --> 00:59:30,578\nwhich is going to include tons of VMs.\n\n1112\n00:59:30,578 --> 00:59:35,140\nOn the DVswitch we can do it down to\njust a single port in a port group,\n\n1113\n00:59:35,140 --> 00:59:39,579\nwhich gives us just that VM's traffic,\nso much more streamlined process.\n\n1114\n00:59:41,330 --> 00:59:42,010\nAll right.\n\n1115\n00:59:42,010 --> 00:59:46,380\nSo those are some of the reasons why\nwe might want to go to a DVswitch.\n\n1116\n00:59:46,380 --> 00:59:49,770\nIf some of those sounded exciting to you\nand stuff that you might want to use,\n\n1117\n00:59:49,770 --> 00:59:51,980\nthen that's where you start\nyour cost justification.\n\n1118\n00:59:51,980 --> 00:59:53,320\nBut if you just heard that list and\n\n1119\n00:59:53,320 --> 00:59:57,260\nsaid eh, that's not stuff I need,\nthen stick with the standard vSwitch,\n\n1120\n00:59:57,260 --> 01:00:01,740\nit's free, they run just fine,\nyou can use it, and off you go.\n\n1121\n01:00:01,740 --> 01:00:03,640\nSo these aren't features\nthat you have to have.\n\n1122\n01:00:03,640 --> 01:00:06,120\nA lot of these you can do on\nyour physical switches anyway.\n\n1123\n01:00:06,120 --> 01:00:08,680\nSo you don't necessarily\nneed it here in software.\n\n1124\n01:00:08,680 --> 01:00:12,300\nThe biggest benefit in my opinion\nis the single configuration.\n\n1125\n01:00:12,300 --> 01:00:13,310\nThis guy right here.\n\n1126\n01:00:13,310 --> 01:00:17,870\nBecause as you add more and more hosts,\nmore and more ESXi servers,\n\n1127\n01:00:17,870 --> 01:00:21,750\nit gets really challenging to keep that\nconsistent across your systems, and\n\n1128\n01:00:21,750 --> 01:00:23,752\na DVswitch can facilitate that.\n\n1129\n01:00:23,752 --> 01:00:26,410\nAll right, now,\n\n1130\n01:00:26,410 --> 01:00:31,390\nwhen VM ware releases a new copy of ESXI\nor really the V sphere suite as a whole.\n\n1131\n01:00:31,390 --> 01:00:35,090\nEvery time a new version comes out,\na new version of the DVswitch comes out.\n\n1132\n01:00:35,090 --> 01:00:37,610\nSo, we're working with\nVsphere 5.5 right now.\n\n1133\n01:00:37,610 --> 01:00:40,700\nSo there is a DVswitch for 5.5.0.\n\n1134\n01:00:40,700 --> 01:00:45,330\nBut there was also one for\n5.1.0, 5.0, 4.3, right.\n\n1135\n01:00:45,330 --> 01:00:50,400\nSo, there have been other\nversions of the DVswitch.\n\n1136\n01:00:50,400 --> 01:00:53,910\nSo when we go to deploy\nthe DVswitch technology.\n\n1137\n01:00:53,910 --> 01:00:55,120\nWe need to be aware of that.\n\n1138\n01:00:55,120 --> 01:00:56,220\nAnd pick the right version.\n\n1139\n01:00:57,280 --> 01:01:01,865\nYou cannot have a DVswitch\nthat's tuned for\n\n1140\n01:01:01,865 --> 01:01:05,960\n5.5 run on top of an ESXI\nhost that's only 5.1.0.\n\n1141\n01:01:05,960 --> 01:01:10,570\nSo when it comes time to do an upgrade,\nremember your upgrade steps.\n\n1142\n01:01:10,570 --> 01:01:14,465\nYou upgrade vCenter first, vCenter is\nalways the first thing that you upgrade\n\n1143\n01:01:14,465 --> 01:01:16,500\nbecause it needs to be\nable to manage everything.\n\n1144\n01:01:16,500 --> 01:01:19,360\nThen, you upgrade your ESXI hosts.\n\n1145\n01:01:19,360 --> 01:01:23,490\nAnd once that's done then,\nyou upgrade the DVswitch last.\n\n1146\n01:01:23,490 --> 01:01:25,550\nI'll show you,\nit's really easy to upgrade them.\n\n1147\n01:01:25,550 --> 01:01:28,330\nBut, the DVswitch should be one\nof the last things you upgrade.\n\n1148\n01:01:28,330 --> 01:01:31,571\nYou can have a DVswitch that's 5.0 or\n\n1149\n01:01:31,571 --> 01:01:37,502\n5.1 running on top of ESXI 5.5 and\nrunning on top of vCenter 5.5.\n\n1150\n01:01:37,502 --> 01:01:38,780\nThat's fine.\n\n1151\n01:01:38,780 --> 01:01:40,350\nYou just can't do it the other way around,\n\n1152\n01:01:40,350 --> 01:01:44,500\nthe DVswitch can't have a higher version\nthan the host and v-center, all right?\n\n1153\n01:01:44,500 --> 01:01:46,815\nSo, keep that in mind as you\nwork with the DVswitches.\n\n1154\n01:01:48,442 --> 01:01:52,370\nAll right, so let's get, or take a look\nat actually getting these set up.\n\n1155\n01:01:52,370 --> 01:01:54,860\nIf I go back to my v-center, right?\n\n1156\n01:01:54,860 --> 01:01:59,150\nWhen I work with the v-switches, the\nstandard v-switches, I went to my host and\n\n1157\n01:01:59,150 --> 01:02:01,780\nI configured it on the host itself.\n\n1158\n01:02:01,780 --> 01:02:05,610\nBut a distributed virtual\nswitch isn't tied to one host.\n\n1159\n01:02:05,610 --> 01:02:06,850\nIt can be, right?\n\n1160\n01:02:06,850 --> 01:02:09,910\nIf you're setting up for the very first\ntime, you might tie it to just one host,\n\n1161\n01:02:09,910 --> 01:02:11,920\nbut normally it's going to\nbe tied to more than one.\n\n1162\n01:02:11,920 --> 01:02:15,670\nSo we actually get distributed\nswitch which is the entry\n\n1163\n01:02:15,670 --> 01:02:17,650\nright here on the Vcenter page.\n\n1164\n01:02:17,650 --> 01:02:20,080\nSo when I go into Vcenter,\ninstead of going to host,\n\n1165\n01:02:20,080 --> 01:02:22,380\nI'm going to go down to\ndistributed switches.\n\n1166\n01:02:23,662 --> 01:02:27,470\nAll right, and here I can see all the\ndistributed switches that I've got in my\n\n1167\n01:02:27,470 --> 01:02:29,210\nnetwork, which is none.\n\n1168\n01:02:29,210 --> 01:02:30,310\nSo, I need to add one in.\n\n1169\n01:02:30,310 --> 01:02:31,590\nSo, i'll go hit my little add button.\n\n1170\n01:02:33,280 --> 01:02:36,030\nAnd I'm going to create one.\n\n1171\n01:02:36,030 --> 01:02:41,740\nNow, for this distributed switch,\nmaybe I'll create my server switch.\n\n1172\n01:02:41,740 --> 01:02:44,360\nThis is what my servers\nare going to be plugged into.\n\n1173\n01:02:44,360 --> 01:02:47,710\nAll of my other stuff is going to be on\nthose 100 megabit adapters that I have.\n\n1174\n01:02:47,710 --> 01:02:51,490\nBut I want all of my servers to have\ngigabit connections, and I want it to be\n\n1175\n01:02:51,490 --> 01:02:55,950\nredundant across multiple hosts and so on,\nso I'm going to give this one a name, and\n\n1176\n01:02:55,950 --> 01:03:00,750\nI'll call this one my Server DVswitch,\nright?\n\n1177\n01:03:00,750 --> 01:03:05,110\nOr I might just want to call it\nDVswitch-servers, or something like that.\n\n1178\n01:03:05,110 --> 01:03:07,761\nGive it a name that you can recognize.\n\n1179\n01:03:07,761 --> 01:03:09,050\nAll right.\n\n1180\n01:03:09,050 --> 01:03:11,980\nAnd then I can pick where\nI want it to be located.\n\n1181\n01:03:11,980 --> 01:03:14,620\nI need to think about the servers\nthat are in a particular area.\n\n1182\n01:03:14,620 --> 01:03:18,490\nI'm going to span mine across\nmy servers that are in Orlando.\n\n1183\n01:03:18,490 --> 01:03:22,670\nYou can span a DVswitch across\nmultiple geographic areas.\n\n1184\n01:03:22,670 --> 01:03:24,430\nIt's not normally a good idea, right?\n\n1185\n01:03:24,430 --> 01:03:27,950\nThink of the type of traffic that's\ngoing over this like broadcast.\n\n1186\n01:03:27,950 --> 01:03:30,000\nYou don't want that going\nacross a wide area network.\n\n1187\n01:03:30,000 --> 01:03:32,475\nSo we're normally going to keep it\nlimited to a particular data center.\n\n1188\n01:03:35,250 --> 01:03:35,853\nAll right.\n\n1189\n01:03:35,853 --> 01:03:38,940\nNow it's going to ask me the version.\n\n1190\n01:03:38,940 --> 01:03:43,692\nSince I'm running all 5.5 my vCenter as\nwell as my EXSI host I'd go ahead and\n\n1191\n01:03:43,692 --> 01:03:48,012\ndo the 5.5 version, but if anything\nin my system is a lower version,\n\n1192\n01:03:48,012 --> 01:03:51,052\nI can come down here and\npick the appropriate one.\n\n1193\n01:03:51,052 --> 01:03:54,119\n5.1, 5.0, 4.1, 4.0.\n\n1194\n01:03:54,119 --> 01:03:55,858\nWe don't have anything before that.\n\n1195\n01:03:55,858 --> 01:03:59,261\nSo I'll go ahead and do 5.5.\n\n1196\n01:03:59,261 --> 01:04:03,700\nAnd now it's just gonna ask me how many\nuplinks I'm gonna have, all right?\n\n1197\n01:04:03,700 --> 01:04:06,180\nWhen you have a DVswitch,\n\n1198\n01:04:06,180 --> 01:04:11,120\nit expects at least one uplink on each\nhost that's gonna be a part of it.\n\n1199\n01:04:11,120 --> 01:04:14,220\nYou don't have to have that, but if a host\ndoesn't have an uplink it's gonna have to\n\n1200\n01:04:14,220 --> 01:04:15,170\nsend traffic to the other hosts.\n\n1201\n01:04:15,170 --> 01:04:17,180\nSo it's not very efficient.\n\n1202\n01:04:17,180 --> 01:04:20,210\nIn my case, I'm gonna have\ntwo servers in this DVswitch.\n\n1203\n01:04:20,210 --> 01:04:23,550\nSo I'm gonna lower my number\nof uplinks down to two.\n\n1204\n01:04:23,550 --> 01:04:25,510\nYou can always increase\nthis later if you want.\n\n1205\n01:04:25,510 --> 01:04:27,440\nBut I'm just going to bump it down to two.\n\n1206\n01:04:27,440 --> 01:04:30,400\nIt's also going to create a port group for\nme.\n\n1207\n01:04:30,400 --> 01:04:34,820\nSo I'm going to call this my\nDV port group dash servers.\n\n1208\n01:04:34,820 --> 01:04:36,760\nSo that's where my servers\nare going to be plugged into.\n\n1209\n01:04:39,340 --> 01:04:41,500\nAll right, and\nthen we can go ahead and finish that.\n\n1210\n01:04:41,500 --> 01:04:43,690\nNow it's telling me, suggested next steps.\n\n1211\n01:04:43,690 --> 01:04:46,440\nI should probably create a new\ndistributive port group,\n\n1212\n01:04:46,440 --> 01:04:49,890\nwhich it's kind of what I just did\nright there and my default port group.\n\n1213\n01:04:49,890 --> 01:04:52,170\nOr I should add and manage host.\n\n1214\n01:04:52,170 --> 01:04:55,430\nAdd some people to the port groups,\nso I'll go ahead and finish that.\n\n1215\n01:04:57,250 --> 01:05:00,860\nIf I have need to create one that's\nan older version, I can do that.\n\n1216\n01:05:00,860 --> 01:05:05,450\nWe can just go back up here and\ncreate a new distributed Vswitch, and\n\n1217\n01:05:05,450 --> 01:05:06,630\nmaybe I'll just whip up one.\n\n1218\n01:05:06,630 --> 01:05:09,950\nI'll call it my LegacyDSwitch.\n\n1219\n01:05:09,950 --> 01:05:11,260\nMaybe I'll put this one in Gainesville.\n\n1220\n01:05:13,410 --> 01:05:16,810\nAnd I'm gonna make one that's,\nI'll do 5.1.\n\n1221\n01:05:16,810 --> 01:05:21,360\nSo maybe in Gainesville I still have\nsome servers that are running 5.1, so\n\n1222\n01:05:21,360 --> 01:05:22,220\nI wanna go that route.\n\n1223\n01:05:22,220 --> 01:05:24,840\nSo, I'll just go ahead and whip this\none up and stick with the defaults.\n\n1224\n01:05:25,980 --> 01:05:27,470\nNow that's gonna run just fine and\n\n1225\n01:05:27,470 --> 01:05:31,114\nmaybe I chose that because I still had\nsome servers that were running 5.1.\n\n1226\n01:05:32,540 --> 01:05:36,310\nWell if I to my main\ndistributed switches screen,\n\n1227\n01:05:37,750 --> 01:05:41,480\nwhich it's not gonna let\nme go back to is it, here.\n\n1228\n01:05:41,480 --> 01:05:42,910\nSo we go to our main screen.\n\n1229\n01:05:42,910 --> 01:05:46,000\nWe can see the different\nswitches right here.\n\n1230\n01:05:46,000 --> 01:05:49,624\nI don't really see a difference\nbetween one being 5.1 or 5.0.\n\n1231\n01:05:49,624 --> 01:05:52,570\nBut I know that my legacy one is 5.1.\n\n1232\n01:05:52,570 --> 01:05:55,790\nAnd if I wanna upgrade it,\nit's super easy.\n\n1233\n01:05:55,790 --> 01:05:57,990\nYou make sure you've\nupgraded Vcenter first.\n\n1234\n01:05:57,990 --> 01:06:00,570\nYou make sure your ESXI\nhosts are upgraded.\n\n1235\n01:06:00,570 --> 01:06:03,870\nAnd then you just right click on it and\nchoose upgrade distributed switch.\n\n1236\n01:06:03,870 --> 01:06:04,990\nIt's that easy.\n\n1237\n01:06:04,990 --> 01:06:07,330\nYou just need to pick what\nyou're gonna be upgrading to.\n\n1238\n01:06:07,330 --> 01:06:10,180\nNow, it will only upgrade\nto the latest version,\n\n1239\n01:06:10,180 --> 01:06:13,790\nthe version that Vcenter is running,\nso it wants to take it to 5.5 and\n\n1240\n01:06:13,790 --> 01:06:16,780\nif I hit Next, it's gonna check for\ncompatibility issues.\n\n1241\n01:06:16,780 --> 01:06:20,250\nNow I don't have anything attached to it,\nso there's nothing there, but if it spots\n\n1242\n01:06:20,250 --> 01:06:23,890\na problem, something in my configuration\nthat's gonna block the upgrade,\n\n1243\n01:06:23,890 --> 01:06:28,160\nI'll get my notice right here and I can\ngo and I can fix whatever that issue is.\n\n1244\n01:06:28,160 --> 01:06:31,120\nMaybe I have a host who doesn't have\nthe right amount of network adapters.\n\n1245\n01:06:31,120 --> 01:06:32,230\nMaybe there's a fault.\n\n1246\n01:06:32,230 --> 01:06:33,860\nIn the Vswitch right now.\n\n1247\n01:06:33,860 --> 01:06:36,360\nCan't upgrade a Vswitch that's\ngot a problem already, so\n\n1248\n01:06:36,360 --> 01:06:37,700\nyou need to fix the problem first.\n\n1249\n01:06:39,010 --> 01:06:41,560\nAnd then when you're done,\nit just runs through the update.\n\n1250\n01:06:41,560 --> 01:06:45,450\nThe updates really straightforward,\nyou can finish that up, and\n\n1251\n01:06:45,450 --> 01:06:50,000\nit will knock it out, and\nnow it will be a 5.5 Vswitch.\n\n1252\n01:06:50,000 --> 01:06:52,200\nSo, definitely not a big deal.\n\n1253\n01:06:52,200 --> 01:06:53,480\nTo do the upgrade.\n\n1254\n01:06:53,480 --> 01:06:56,170\nBut it is manual just because\nthey don't necessarily know\n\n1255\n01:06:56,170 --> 01:06:58,490\nwhen you've finished all your\nother upgrades to do that.\n\n1256\n01:06:58,490 --> 01:06:59,737\nSo it won't do it for you.\n\n1257\n01:07:01,261 --> 01:07:03,961\nAnd when you're done with the VSwitch,\nif you don't need it anymore,\n\n1258\n01:07:03,961 --> 01:07:06,440\nlike I don't really need\nthis legacy Vswitch anymore.\n\n1259\n01:07:06,440 --> 01:07:09,770\nYou can always just right click on it and\ngo to all these center actions and\n\n1260\n01:07:09,770 --> 01:07:12,480\nremove from inventory, and\nthat will knock it out.\n\n1261\n01:07:12,480 --> 01:07:15,946\nSo I'll just go ahead and\ntoast that, and it'll go away.\n\n1262\n01:07:15,946 --> 01:07:18,840\nIf the Vswitch is in use, if you\nactually have machines attached to it,\n\n1263\n01:07:18,840 --> 01:07:23,030\nit won't let you remove it, it will give\nyou a big warning, and say if you remove\n\n1264\n01:07:23,030 --> 01:07:26,560\nthis, you'll also lose your port groups,\nyour VM connections and so on.\n\n1265\n01:07:26,560 --> 01:07:27,584\nSo you'll get a warning about that.\n\n1266\n01:07:29,737 --> 01:07:30,930\nAll right.\n\n1267\n01:07:30,930 --> 01:07:34,230\nSo now I've got a Vswitch,\nI'm done or a DVswitch, I'm done.\n\n1268\n01:07:34,230 --> 01:07:35,730\nWell, not really.\n\n1269\n01:07:35,730 --> 01:07:38,440\nThe DVswitch that I created\nis kind of useless.\n\n1270\n01:07:38,440 --> 01:07:41,520\nYou might have noticed it never asked\nabout things like physical adapters.\n\n1271\n01:07:41,520 --> 01:07:43,880\nIt never even asked about what\nservers were going to be a part of it.\n\n1272\n01:07:43,880 --> 01:07:45,670\nI just picked a data center.\n\n1273\n01:07:45,670 --> 01:07:47,490\nI picked the Orlando data center.\n\n1274\n01:07:47,490 --> 01:07:49,090\nI never really attached anything.\n\n1275\n01:07:49,090 --> 01:07:52,440\nSo I need to follow up with\nsome additional configuration.\n\n1276\n01:07:52,440 --> 01:07:54,520\nSo I'm gonna click on that DVswitch.\n\n1277\n01:07:54,520 --> 01:07:56,680\nHere's my DVswitch servers.\n\n1278\n01:07:56,680 --> 01:08:00,530\nAnd I can see I've got my hosts,\nvirtual machines, port groups and\n\n1279\n01:08:00,530 --> 01:08:01,680\nuplink port groups.\n\n1280\n01:08:01,680 --> 01:08:04,820\nSo, here's my various information\nthat I need to go through and set up.\n\n1281\n01:08:05,990 --> 01:08:09,179\nFirst off I need to add some hosts to it,\nso I'm gonna click on hosts.\n\n1282\n01:08:10,760 --> 01:08:13,280\nAnd I can see that I don't\nhave any hosts right now.\n\n1283\n01:08:13,280 --> 01:08:16,430\nAnd I've got my little basic task\nhere to add and manage hosts.\n\n1284\n01:08:16,430 --> 01:08:17,420\nSo I'll go ahead and do that.\n\n1285\n01:08:17,420 --> 01:08:20,080\nAnd so\nwe're going to add some hosts to it.\n\n1286\n01:08:22,320 --> 01:08:25,240\nAnd I can go through and I can pick,\nso I'm going to do some new ones.\n\n1287\n01:08:25,240 --> 01:08:28,320\nAnd it's showing me all the ones\nthat are in that data center.\n\n1288\n01:08:28,320 --> 01:08:29,910\nSo I've got server three and server four.\n\n1289\n01:08:29,910 --> 01:08:30,974\nI'm gonna do both of them.\n\n1290\n01:08:34,164 --> 01:08:35,220\nAll right.\n\n1291\n01:08:35,220 --> 01:08:36,780\nNow when I add them in,\n\n1292\n01:08:36,780 --> 01:08:39,875\nit's gonna ask me what network\nadaptors that I want to bring in.\n\n1293\n01:08:39,875 --> 01:08:42,010\nRight?\nI can manage the physical adaptors,\n\n1294\n01:08:42,010 --> 01:08:45,540\nI can also manage the VM Kernel adaptors,\nso I've got some choices.\n\n1295\n01:08:45,540 --> 01:08:47,640\nAs to what I want to bring into the DV.\n\n1296\n01:08:47,640 --> 01:08:50,302\nNow, I'm not gonna do the Kernel adaptor.\n\n1297\n01:08:50,302 --> 01:08:51,320\nAll right?\n\n1298\n01:08:51,320 --> 01:08:54,080\nThe reason is the Kernel adaptor,\nfor me on those,\n\n1299\n01:08:54,080 --> 01:08:58,040\nis attached to just the standard Vswitch,\nand I want to leave that be for now.\n\n1300\n01:08:58,040 --> 01:08:59,910\nI don't want to lose connectivity.\n\n1301\n01:08:59,910 --> 01:09:05,400\nBut I do want to mess with my physical\nadaptor, so I'm gonna choose that one.\n\n1302\n01:09:05,400 --> 01:09:08,630\nYou can migrate virtual machine\nnetworking, what that'll do\n\n1303\n01:09:08,630 --> 01:09:13,140\nis take the existing VM's that are on\nthere, and move them to the DVswitch.\n\n1304\n01:09:13,140 --> 01:09:15,680\nIf they're all plugged into the same\nport group, that's fine, but\n\n1305\n01:09:15,680 --> 01:09:17,770\nif they're in different ones,\nit can be a little hairy.\n\n1306\n01:09:17,770 --> 01:09:19,320\nI prefer to do that\nmanually after the fact.\n\n1307\n01:09:20,880 --> 01:09:23,970\nAll right, so we'll go ahead and\njust hit Next.\n\n1308\n01:09:23,970 --> 01:09:25,970\nAnd now it's gonna ask about\nthe physical adaptors.\n\n1309\n01:09:25,970 --> 01:09:29,930\nNotice that my vmnic0 shows\nit's attached switch 0.\n\n1310\n01:09:29,930 --> 01:09:31,270\nSo I'm not gonna mess with that.\n\n1311\n01:09:31,270 --> 01:09:34,720\nI'm gonna leave that be, because\nthat's where my vm kernel is, right?\n\n1312\n01:09:35,890 --> 01:09:37,800\nBut I'll go ahead and take vm nic 1.\n\n1313\n01:09:37,800 --> 01:09:41,490\nThat's that gigabit adapter that's sitting\nthere; and I'm gonna assign that uplink.\n\n1314\n01:09:42,650 --> 01:09:44,660\nAnd I'll assign it as uplink number 1.\n\n1315\n01:09:44,660 --> 01:09:49,720\nSo uplink number 1 is now\nvm nic 1 on server 3.\n\n1316\n01:09:49,720 --> 01:09:51,890\nAll right, remember I said I\nwas gonna have two uplinks?\n\n1317\n01:09:51,890 --> 01:09:54,720\nSo there's my first uplink on Server 3.\n\n1318\n01:09:54,720 --> 01:09:57,610\nMy other uplink is gonna be on Server 4,\nright?\n\n1319\n01:09:57,610 --> 01:10:00,180\nThis is distributed across the servers, so\n\n1320\n01:10:00,180 --> 01:10:02,290\nthe other uplink is gonna\nbe this guy right here.\n\n1321\n01:10:02,290 --> 01:10:05,340\nSo I'll assign it, and\nthat one's gonna be Uplink 2.\n\n1322\n01:10:05,340 --> 01:10:09,490\nNow I could choose Auto Assign,\nAuto assign is useful if you're gonna have\n\n1323\n01:10:09,490 --> 01:10:12,870\nmore physical adapters than\nyou do actual uplinks.\n\n1324\n01:10:12,870 --> 01:10:14,690\nAnd the numbers don't have to match.\n\n1325\n01:10:14,690 --> 01:10:16,720\nI picked two uplinks.\n\n1326\n01:10:16,720 --> 01:10:20,030\nIf I had four network adapters and\nleave them auto assigned,\n\n1327\n01:10:20,030 --> 01:10:23,120\ntwo of them will go active and\nthe other two will stay standby.\n\n1328\n01:10:23,120 --> 01:10:25,270\nIf I went the other way around and\nI chose four uplinks and\n\n1329\n01:10:25,270 --> 01:10:27,310\nI only added two physical adapters.\n\n1330\n01:10:27,310 --> 01:10:31,220\nBoth physical adapters will go up, but\nthen, there'd be basically two uplinks\n\n1331\n01:10:31,220 --> 01:10:33,960\nthat are down, it'll set off some\nlittle alarms, and it'll get annoying.\n\n1332\n01:10:33,960 --> 01:10:36,420\nSo you probably wanna set it\naccurately to what you've got.\n\n1333\n01:10:36,420 --> 01:10:38,440\nAll right.\n\n1334\n01:10:38,440 --> 01:10:44,160\nSo uplink number one is on server three,\nuplink number two is on server four.\n\n1335\n01:10:44,160 --> 01:10:47,256\nThe DVswitch spreads across\nboth of those servers.\n\n1336\n01:10:47,256 --> 01:10:49,044\nEach one has one uplink.\n\n1337\n01:10:49,044 --> 01:10:49,830\nAll right?\n\n1338\n01:10:49,830 --> 01:10:53,130\nIf one of them loses an uplink, there's\nthe other server that we can go through.\n\n1339\n01:10:53,130 --> 01:10:54,540\nAnd we can move our VMs over to it.\n\n1340\n01:10:54,540 --> 01:10:56,690\nAnd we'll be able to get\nto that same network.\n\n1341\n01:10:56,690 --> 01:10:59,830\nIt's the same network just\non two physical hosts.\n\n1342\n01:11:02,240 --> 01:11:06,040\nNow whenever we make changes to networking\nthere's always a chance you could lock\n\n1343\n01:11:06,040 --> 01:11:07,470\nyourself out of the host.\n\n1344\n01:11:07,470 --> 01:11:10,240\nEspecially if we mess with that vm\ninternal adaptor you can lose your\n\n1345\n01:11:10,240 --> 01:11:11,320\nconnectivity.\n\n1346\n01:11:11,320 --> 01:11:13,970\nSo on the next screen,\nit will analyze your impact.\n\n1347\n01:11:13,970 --> 01:11:18,350\nIt will show you whether you're gonna\ndrop your VM kernel connection,\n\n1348\n01:11:18,350 --> 01:11:20,690\nwhether you have virtual machines\nthat are gonna be orphaned.\n\n1349\n01:11:20,690 --> 01:11:23,300\nIt will show you if\nyour ISCSI connections,\n\n1350\n01:11:23,300 --> 01:11:25,830\nif you're connected to an ISCSI CN,\nthey'll get damaged and\n\n1351\n01:11:25,830 --> 01:11:29,270\nyou can see because I didn't move\nmy VM kernel when I get no impact.\n\n1352\n01:11:29,270 --> 01:11:30,130\nIt's all clear,\n\n1353\n01:11:30,130 --> 01:11:35,850\nI don't have to worry about any lockouts\nand we can go ahead and finish that.\n\n1354\n01:11:35,850 --> 01:11:40,100\nAnd now I'll have a real DVswitch.\n\n1355\n01:11:40,100 --> 01:11:41,470\nIt's on more than one host.\n\n1356\n01:11:41,470 --> 01:11:42,760\nIt's got more than one uplink.\n\n1357\n01:11:42,760 --> 01:11:45,050\nThey're gonna come up,\nand it's ready to rock.\n\n1358\n01:11:45,050 --> 01:11:47,170\nAnd it even created\nthe default port group for me.\n\n1359\n01:11:47,170 --> 01:11:49,081\nI can see my port group right there.\n\n1360\n01:11:49,081 --> 01:11:52,613\nNow, the creation process for\na distributive Vswitch is not fast.\n\n1361\n01:11:52,613 --> 01:11:54,993\nIt does take a moment to reach out and\ndo it.\n\n1362\n01:11:54,993 --> 01:11:58,003\nMy numbers, there they go see,\nit didn't take too long.\n\n1363\n01:11:58,003 --> 01:12:01,270\nBut it's not an immediate\nlike a lot of our changes.\n\n1364\n01:12:01,270 --> 01:12:03,600\nI can see that I have two hosts.\n\n1365\n01:12:03,600 --> 01:12:07,880\nServer three and server four, they've both\ngot a normal status, their links are up.\n\n1366\n01:12:09,100 --> 01:12:13,090\nI've got one port group which is the one\nthat we made during the install,\n\n1367\n01:12:13,090 --> 01:12:17,910\nthe DV port group dash servers,\nand my up link port group, right,\n\n1368\n01:12:17,910 --> 01:12:22,370\nhere's my up links, and\nif I look at my summary there,\n\n1369\n01:12:22,370 --> 01:12:25,560\nthese are the two up links that\nare connecting up to the switches, and\n\n1370\n01:12:25,560 --> 01:12:28,760\nso I can see that I've got two,\nand they're both being can use.\n\n1371\n01:12:28,760 --> 01:12:30,220\nThey're up and running.\n\n1372\n01:12:30,220 --> 01:12:31,770\nI have a capacity of four.\n\n1373\n01:12:31,770 --> 01:12:33,150\nI could bump up to four.\n\n1374\n01:12:33,150 --> 01:12:34,750\nSo I have three, too.\n\n1375\n01:12:34,750 --> 01:12:36,810\nI could add two more if I wanted.\n\n1376\n01:12:36,810 --> 01:12:39,236\nBut I set my normal limit to two, so\n\n1377\n01:12:39,236 --> 01:12:43,022\nit's perfectly happy with\nwhere it's at right now.\n\n1378\n01:12:43,022 --> 01:12:43,811\nAll right.\n\n1379\n01:12:43,811 --> 01:12:46,528\nSo now I've got a DV Switch.\n\n1380\n01:12:46,528 --> 01:12:50,950\nIf I take a look at my distributed port\ngroup right here, my DV port group.\n\n1381\n01:12:50,950 --> 01:12:53,120\nHere it is, and\nit doesn't have any VMs attached to it.\n\n1382\n01:12:53,120 --> 01:12:54,380\nIt's kind of lonely right now.\n\n1383\n01:12:54,380 --> 01:12:56,680\nIt's just kind of sitting there.\n\n1384\n01:12:56,680 --> 01:13:00,344\nNow all I need to do is take my servers\nthat I want to attach to it and go and\n\n1385\n01:13:00,344 --> 01:13:02,721\nattach them to this new\ndistributed Switch.\n\n1386\n01:13:05,649 --> 01:13:08,476\nAll right, so\nwhen I go back to my distributive switch,\n\n1387\n01:13:08,476 --> 01:13:11,900\nI see I've got that DV Switch servers,\nit's right there.\n\n1388\n01:13:11,900 --> 01:13:15,880\nAnd if you browse through here there's\na couple of screens that kind of\n\n1389\n01:13:15,880 --> 01:13:18,710\nshow you some information but\nif I go into manage and\n\n1390\n01:13:18,710 --> 01:13:23,440\nsettings I'll see that it looks\njust like a standard vSwitch.\n\n1391\n01:13:23,440 --> 01:13:27,850\nI've got my port group over here,\nI've got my adapters over here,\n\n1392\n01:13:27,850 --> 01:13:32,000\nI'm load balancing so both of them are\nhot, see I've got my double orange lines.\n\n1393\n01:13:32,000 --> 01:13:34,470\nNot really any different from\na vSwitch at this point.\n\n1394\n01:13:34,470 --> 01:13:36,510\nIt's the underlying\ntechnology that's important.\n\n1395\n01:13:36,510 --> 01:13:38,504\nIt doesn't show me that\nthese two adapters,\n\n1396\n01:13:38,504 --> 01:13:41,150\nthose are two separate physical hosts.\n\n1397\n01:13:41,150 --> 01:13:43,520\nThis is now spread across\nthose physical hosts.\n\n1398\n01:13:45,110 --> 01:13:50,540\nAll right, so what I can do next is I can\nstick a virtual machine in there, right.\n\n1399\n01:13:50,540 --> 01:13:53,350\nSo maybe I'll take that\nLinux box that I had, right.\n\n1400\n01:13:53,350 --> 01:13:54,740\nLet me go find that one.\n\n1401\n01:13:54,740 --> 01:13:59,198\nThat was VM Linux one.\n\n1402\n01:13:59,198 --> 01:14:03,390\nAll right, so I'm gonna take this guy,\nand I'll go into his settings.\n\n1403\n01:14:03,390 --> 01:14:06,190\nAnd, I'm gonna move his network\nadapter over to this new\n\n1404\n01:14:06,190 --> 01:14:08,680\nserver's port group that we made.\n\n1405\n01:14:08,680 --> 01:14:11,990\nWhen I look,\nhere's my DV port group servers.\n\n1406\n01:14:11,990 --> 01:14:13,980\nAnd there's the DV Switch\nservers all together.\n\n1407\n01:14:13,980 --> 01:14:14,912\nBut, I'm gonna go to that port group.\n\n1408\n01:14:18,245 --> 01:14:19,290\nAnd I'll just hit OK.\n\n1409\n01:14:19,290 --> 01:14:21,828\nIt's gonna to move it over there and\nit's going to be the only host,\n\n1410\n01:14:21,828 --> 01:14:23,590\nso it'll have plenty of room to grow.\n\n1411\n01:14:23,590 --> 01:14:29,740\nSo it's now got access to two load balance\ngigabit adapters all by itself, all right.\n\n1412\n01:14:29,740 --> 01:14:32,748\nThe cool part there is when we start\ntalking about fail over, right.\n\n1413\n01:14:32,748 --> 01:14:37,440\nIf server three fails, that's where this\nis right now, if server three fails, this\n\n1414\n01:14:37,440 --> 01:14:41,550\nvirtual machine would be able to jump over\nto server four and it's the same network.\n\n1415\n01:14:41,550 --> 01:14:44,890\nThe network is already set up and\nready to receive it because it's there and\n\n1416\n01:14:44,890 --> 01:14:45,850\nit's configured.\n\n1417\n01:14:45,850 --> 01:14:50,410\nYou can achieve that with just vSwitches\nbut you have to manually make sure that\n\n1418\n01:14:50,410 --> 01:14:54,210\nall the settings are identical between the\ntwo and there's a lot of room for error.\n\n1419\n01:14:55,720 --> 01:14:58,680\nAll right, lets go take a look at\nthat DV Switch now that its got some\n\n1420\n01:14:58,680 --> 01:14:59,600\nactual stuff in it.\n\n1421\n01:15:01,810 --> 01:15:06,018\nSo here's my DV Switch-servers, and\n\n1422\n01:15:06,018 --> 01:15:11,260\nhere's my port group for\nport group-servers.\n\n1423\n01:15:11,260 --> 01:15:12,530\nAnd virtual machines?\n\n1424\n01:15:12,530 --> 01:15:14,410\nI can see VMLINUX1 is there.\n\n1425\n01:15:14,410 --> 01:15:16,480\nAnd if I click on it,\nit's got its orange line.\n\n1426\n01:15:16,480 --> 01:15:19,810\nNow notice how the orange line is\njust going to the first adapter.\n\n1427\n01:15:19,810 --> 01:15:22,950\nIt's being mode bounced based on\nit's source Mac address, right?\n\n1428\n01:15:22,950 --> 01:15:26,540\nThat's the default way, so\nit's trying it to that first adapter.\n\n1429\n01:15:26,540 --> 01:15:29,800\nIf I brought up a second host, it would go\nto the second adapter and a third host to\n\n1430\n01:15:29,800 --> 01:15:32,740\nthe first one and so on, back and\nforth, it does round robbining, right?\n\n1431\n01:15:32,740 --> 01:15:35,530\nAnd we can manipulate that\nall inside of the policies.\n\n1432\n01:15:35,530 --> 01:15:38,270\nThat's what all of this other\nstuff is over here on the left.\n\n1433\n01:15:39,400 --> 01:15:40,610\nAll right.\n\n1434\n01:15:40,610 --> 01:15:43,390\nAs far as creating a DV Switch,\nnot very hard.\n\n1435\n01:15:43,390 --> 01:15:44,070\nRight?\n\n1436\n01:15:44,070 --> 01:15:46,920\nAnd, in fact, a lot of the complexity\nis masked from us once it's in place.\n\n1437\n01:15:46,920 --> 01:15:50,270\nI don't even necessarily see that there's\nall these different hosts behind it.\n\n1438\n01:15:50,270 --> 01:15:51,300\nI only added two hosts.\n\n1439\n01:15:51,300 --> 01:15:52,450\nYou can add a ton.\n\n1440\n01:15:52,450 --> 01:15:55,520\nIf you go on VMware's site, they have\nsome white papers where they show\n\n1441\n01:15:55,520 --> 01:15:57,220\nsome massive distributive\nvirtual Switches.\n\n1442\n01:15:57,220 --> 01:15:58,660\nThey're pretty impressive.\n\n1443\n01:15:58,660 --> 01:16:01,190\nBut the basics of it,\nit's pretty straightforward.\n\n1444\n01:16:02,210 --> 01:16:04,620\nWhy don't we go ahead and\nstop and take a break here.\n\n1445\n01:16:04,620 --> 01:16:07,210\nWhen we get back I want to show you\nsome of the more advanced settings on\n\n1446\n01:16:07,210 --> 01:16:08,640\nthe DV Switches.\n\n1447\n01:16:08,640 --> 01:16:11,720\nSome of the policy settings that we didn't\nhave under vSwitch that we have here,\n\n1448\n01:16:11,720 --> 01:16:13,080\nI want to walk through those.\n\n1449\n01:16:13,080 --> 01:16:13,900\nAnd I think that's about it,\n\n1450\n01:16:13,900 --> 01:16:15,400\nI do have a note that I want\nto mention earlier about it,\n\n1451\n01:16:15,400 --> 01:16:19,500\nI do have a note to mention something I\ndidn't mention earlier about jumbo frames,\n\n1452\n01:16:19,500 --> 01:16:21,920\nand we'll get to that too,\nso let's stop here.\n\n1453\n01:16:21,920 --> 01:16:24,430\nTake a break.\nAnd when we get back, we'll wrap this show\n\n1454\n01:16:24,430 --> 01:16:27,815\nup talking about the advanced features\nof DV Switches all see you then.\n\n1455\n01:16:27,815 --> 01:16:31,226\n[SOUND] All right,\n\n1456\n01:16:31,226 --> 01:16:36,233\nwelcome back everybody.\n\n1457\n01:16:36,233 --> 01:16:40,053\nWhat I want to do now is I wanna\nwalk-through some of the more advance\n\n1458\n01:16:40,053 --> 01:16:41,750\nfeatures of the DV Switches.\n\n1459\n01:16:41,750 --> 01:16:44,100\nAnd the screens, once it's created,\n\n1460\n01:16:44,100 --> 01:16:48,690\nit's pretty much like a regular vSwitch as\nfar as adding in our virtual machines and\n\n1461\n01:16:48,690 --> 01:16:51,830\nso on, there's not too much\nthat we need to tweak.\n\n1462\n01:16:51,830 --> 01:16:55,150\nBut you'll see along the left side here we\ncan do some of the advanced things that we\n\n1463\n01:16:55,150 --> 01:16:57,460\ndon't have in a regular vSwitch.\n\n1464\n01:16:57,460 --> 01:16:58,280\nAll right?\n\n1465\n01:16:58,280 --> 01:17:00,850\nSome of the things are things like,\nunder properties,\n\n1466\n01:17:01,950 --> 01:17:04,870\nwhere we see basic information about\nthe Switch and we can edit that.\n\n1467\n01:17:04,870 --> 01:17:08,220\nAnd in here's where we can\nchange that number of uplinks.\n\n1468\n01:17:08,220 --> 01:17:10,120\nI set mine to two,\ncuz that's all I've got right now.\n\n1469\n01:17:10,120 --> 01:17:13,310\nAnd I didn't want it bugging\nme about not having enough.\n\n1470\n01:17:13,310 --> 01:17:14,170\nI set that value.\n\n1471\n01:17:14,170 --> 01:17:16,510\nBut I could bump that\nup here if I needed to.\n\n1472\n01:17:16,510 --> 01:17:21,270\nYou can also go down here under\nadvanced and tweak some other settings.\n\n1473\n01:17:21,270 --> 01:17:22,240\nHere's a great one.\n\n1474\n01:17:22,240 --> 01:17:23,810\nDiscovery protocol.\n\n1475\n01:17:23,810 --> 01:17:28,160\nIt supports Cisco discovery protocol and\nlink layer discovery protocol.\n\n1476\n01:17:28,160 --> 01:17:31,740\nIf you're not familiar with these,\nCDP was the original one.\n\n1477\n01:17:31,740 --> 01:17:35,610\nAnd it allowed Cisco devices,\nCisco routers, switches, firewalls.\n\n1478\n01:17:35,610 --> 01:17:38,170\nThey could talk to each other and\ndiscover they were there.\n\n1479\n01:17:38,170 --> 01:17:39,740\nYou could use them to\nmap out your network.\n\n1480\n01:17:39,740 --> 01:17:41,450\nIt was kind of nice.\n\n1481\n01:17:41,450 --> 01:17:45,830\nBut there's some weaknesses to that,\nit was just Cisco.\n\n1482\n01:17:45,830 --> 01:17:50,090\nSo we got an open standard called LLDP\nwhich does the exact same thing but\n\n1483\n01:17:50,090 --> 01:17:52,450\nit's supported across\nmore than one vendor.\n\n1484\n01:17:52,450 --> 01:17:55,090\nAnd so even Cisco now supports LLDP.\n\n1485\n01:17:55,090 --> 01:17:57,460\nBut you're security guys\nwill hate you if you run it.\n\n1486\n01:17:57,460 --> 01:17:59,460\nBecause an attacker could\nlisten out on the network for\n\n1487\n01:17:59,460 --> 01:18:03,440\nthese communications and learn information\nlike the IP addresses of your hosts and\n\n1488\n01:18:03,440 --> 01:18:05,100\nthe software versions they run.\n\n1489\n01:18:05,100 --> 01:18:06,370\nAnd things like that.\n\n1490\n01:18:06,370 --> 01:18:08,990\nA lot of us choose to disable that.\n\n1491\n01:18:08,990 --> 01:18:12,370\nBut notice in the default here,\nif we go CDP or LDP,\n\n1492\n01:18:12,370 --> 01:18:15,450\nthe default is to listen,\nnot to advertise.\n\n1493\n01:18:15,450 --> 01:18:19,500\nSo that means that we'll listen and hear,\nabout other devices on the network, but\n\n1494\n01:18:19,500 --> 01:18:21,810\nwe won't actually advertise ourselves.\n\n1495\n01:18:21,810 --> 01:18:23,760\nIt's up to you how you want\nto configure that, but\n\n1496\n01:18:23,760 --> 01:18:26,030\nyou can manipulate that value right here.\n\n1497\n01:18:26,030 --> 01:18:26,840\nAll right?\n\n1498\n01:18:26,840 --> 01:18:29,300\nThe other thing is this MTU bytes.\n\n1499\n01:18:29,300 --> 01:18:32,470\nNow this is not a feature\nof just DV Switches.\n\n1500\n01:18:32,470 --> 01:18:33,840\nIt was on vSwitches also.\n\n1501\n01:18:33,840 --> 01:18:35,460\nI just forgot to point it out\nwhile we were on that one.\n\n1502\n01:18:36,530 --> 01:18:40,490\nWhen you send frame on the network\non Ethernet frame on a network.\n\n1503\n01:18:40,490 --> 01:18:44,700\nIt's generally limited to what's called\nan MTR Maximum Transmission Unit.\n\n1504\n01:18:44,700 --> 01:18:49,359\nThe standard, what almost everybody does,\nis 1,500 bytes.\n\n1505\n01:18:49,359 --> 01:18:51,994\nOkay?\nYou've got 1,500 bytes that you're allowed\n\n1506\n01:18:51,994 --> 01:18:53,220\nto send on a frame.\n\n1507\n01:18:53,220 --> 01:18:57,310\nIf your data is more than 1,500 bytes,\nwhich it almost most always is.\n\n1508\n01:18:57,310 --> 01:18:59,900\nYou've got to break it\nup into multiple frames.\n\n1509\n01:18:59,900 --> 01:19:02,660\nYou'll have as many frames as\nyou need to contain your data.\n\n1510\n01:19:02,660 --> 01:19:03,920\nBut each one will be 1,500 bytes.\n\n1511\n01:19:06,200 --> 01:19:11,130\nFor normal communications- web browsing,\nemail, whatever- that's fine, works great.\n\n1512\n01:19:12,330 --> 01:19:14,310\nBut it you're doing heavy disc IO,\n\n1513\n01:19:14,310 --> 01:19:18,140\nlike on an iSCSI network,\nwhen you're communicating using iSCSI,\n\n1514\n01:19:18,140 --> 01:19:22,480\nyou're sending reads and\nwrites to a hard drive across the network.\n\n1515\n01:19:22,480 --> 01:19:25,150\nAnd for every 1,500 bytes,\n\n1516\n01:19:25,150 --> 01:19:29,080\nyou're having to calculate what's called\nthe cyclical redundancy check, a CRC.\n\n1517\n01:19:29,080 --> 01:19:33,040\nAnd that CRC is like a hash value to\ndetermine whether the frame was damaged in\n\n1518\n01:19:33,040 --> 01:19:34,160\ntransit.\n\n1519\n01:19:34,160 --> 01:19:38,930\nAnd if you're doing that for every 1,500\nbytes, it kinda slows things down a bit.\n\n1520\n01:19:38,930 --> 01:19:40,370\nIt's a heavy mathematical operation.\n\n1521\n01:19:41,880 --> 01:19:47,489\nIn a storage dedicated network, we may\nwant to use something called jumbo frames.\n\n1522\n01:19:47,489 --> 01:19:52,678\nJumbo frames are where we take that\n1,500 bytes and we bump it up to 9,000.\n\n1523\n01:19:52,678 --> 01:19:53,189\nOkay.\n\n1524\n01:19:53,189 --> 01:20:00,540\n9,000 bytes or 9k, that's the standard\njumbo frame size used on storage networks.\n\n1525\n01:20:00,540 --> 01:20:04,788\nSo, if you have a dedicated iSCS,\nwe have one here in our server room.\n\n1526\n01:20:04,788 --> 01:20:09,660\nWe've got a CSCO switch that's\nset with a 9,000 byte MTU.\n\n1527\n01:20:09,660 --> 01:20:13,660\nOur servers are set\nwith 9000 byte MTUs and\n\n1528\n01:20:13,660 --> 01:20:18,570\nour SAN, our storage area network,\nis set to a 9000 byte MTU.\n\n1529\n01:20:18,570 --> 01:20:23,760\nWhen all those devices are set that way,\nyou can communicate with larger frames.\n\n1530\n01:20:23,760 --> 01:20:25,880\nAnd that means you're\ncalculating less CRCs.\n\n1531\n01:20:25,880 --> 01:20:31,820\nIf you think about it,\nyou can fit six 1500 bite frames,\n\n1532\n01:20:31,820 --> 01:20:35,000\ninside of one 9000 bite frame.\n\n1533\n01:20:35,000 --> 01:20:40,140\nSo, you're reducing your overall CRC's,\nyour calculations by quite a bit,\n\n1534\n01:20:40,140 --> 01:20:43,190\nyou're doing one for\nevery six of a normal network.\n\n1535\n01:20:43,190 --> 01:20:45,260\nAnd that's gonna improve performance.\n\n1536\n01:20:45,260 --> 01:20:48,580\nNow you don't wanna do that on\nyour regular workstation networks.\n\n1537\n01:20:48,580 --> 01:20:50,760\nIts only on storage\nnetworks that you do that.\n\n1538\n01:20:50,760 --> 01:20:52,900\nSo if you're creating a vSwitch\nthat's gonna be used for\n\n1539\n01:20:52,900 --> 01:20:56,750\nstorage, like iSCSI, you'll wanna\nbump that MTU size up, all right.\n\n1540\n01:20:56,750 --> 01:21:00,197\nSo that's not just on a DV switch,\nyou do that on a vSwitch also.\n\n1541\n01:21:01,740 --> 01:21:05,400\nAll right but\nI'm gonna leave mine at 1500.\n\n1542\n01:21:05,400 --> 01:21:08,899\nAll right, so those are some of the things\nthat we can manipulate here just as far as\n\n1543\n01:21:08,899 --> 01:21:12,600\nthe switches functionality itself but\nthe advance things are right down here.\n\n1544\n01:21:12,600 --> 01:21:16,910\nThere's things like LACP right, that's\nthat link aggregation protocol that I was\n\n1545\n01:21:16,910 --> 01:21:21,840\ntalking about and it will ensure\nthat you get true load balancing.\n\n1546\n01:21:21,840 --> 01:21:24,110\nIt's sending people across multiple lines.\n\n1547\n01:21:24,110 --> 01:21:28,740\nAnd even a single guest VM can get load\nbalanced across more than one link.\n\n1548\n01:21:29,790 --> 01:21:33,170\nIn order to do it you do\nhave to define the LACP.\n\n1549\n01:21:33,170 --> 01:21:34,930\nThe link aggregation group.\n\n1550\n01:21:34,930 --> 01:21:37,150\nThe LAG, that you're going to be using.\n\n1551\n01:21:37,150 --> 01:21:40,690\nThe switch on the other side, whoever it\nis that you're physically plugged into,\n\n1552\n01:21:40,690 --> 01:21:42,330\nthey need to be configured also.\n\n1553\n01:21:42,330 --> 01:21:46,380\nSo if you've got a Cisco switch or\na HP switch like a Pro Curve,\n\n1554\n01:21:46,380 --> 01:21:48,560\nthen you need to go and\npull the documentation on that or\n\n1555\n01:21:48,560 --> 01:21:52,130\nget with the network admins, and say,\nhey, can you take ports four, five and\n\n1556\n01:21:52,130 --> 01:21:55,780\nsix, on that switch, and\nput it into a lack LACP group.\n\n1557\n01:21:55,780 --> 01:21:59,970\nAnd then, on your end,\nyou'd come in and you'd add in a group.\n\n1558\n01:21:59,970 --> 01:22:03,390\nAnd you flag your adapters,\nyour number of ports, to put it in there.\n\n1559\n01:22:03,390 --> 01:22:04,610\nAnd that will build up that group.\n\n1560\n01:22:04,610 --> 01:22:08,020\nIt will aggregate those together and\nyou'll be in business.\n\n1561\n01:22:08,020 --> 01:22:10,030\nThe only real setting you\nhave to manipulate in here.\n\n1562\n01:22:10,030 --> 01:22:11,410\nThe number of ports is important.\n\n1563\n01:22:11,410 --> 01:22:12,570\nYou need to specify how many you have.\n\n1564\n01:22:12,570 --> 01:22:14,150\nAnd then, there's the mode.\n\n1565\n01:22:14,150 --> 01:22:16,260\nLACP operates in two modes.\n\n1566\n01:22:16,260 --> 01:22:17,172\nActive and Passive.\n\n1567\n01:22:17,172 --> 01:22:20,442\nAll right, in active mode,\nwhen your server comes up,\n\n1568\n01:22:20,442 --> 01:22:25,017\nit's gonna reach out to that switch and\nsay, hey we need to form a LACP group.\n\n1569\n01:22:25,017 --> 01:22:28,950\nAnd if the switch doesn't know\nwhat's going on, it's gonna fail and\n\n1570\n01:22:28,950 --> 01:22:32,230\nthe link isn't gonna come up, and\nit will drop back to using these\n\n1571\n01:22:32,230 --> 01:22:36,692\nindividual links which are load balanced\nthrough vSwitch normal methods.\n\n1572\n01:22:36,692 --> 01:22:41,150\nAll right, if you go passive,\nyour servers are gonna come up and\n\n1573\n01:22:41,150 --> 01:22:43,370\nthey're not gonna try and\nbuild a LACP group at all.\n\n1574\n01:22:43,370 --> 01:22:46,920\nThey're just gonna come up and\nsay hey, we're independent links.\n\n1575\n01:22:46,920 --> 01:22:52,110\nAnd if the switch says hey,\nlet's form a group, then you'll do it, but\n\n1576\n01:22:52,110 --> 01:22:53,230\nsomebody has to ask.\n\n1577\n01:22:53,230 --> 01:22:55,170\nYou're not gonna do it\nwithout being asked.\n\n1578\n01:22:55,170 --> 01:22:57,560\nSo you determine how\nyou wanna go about it.\n\n1579\n01:22:57,560 --> 01:23:02,080\nI almost always go active, I want it\nto form that LACP group if it can.\n\n1580\n01:23:02,080 --> 01:23:03,580\nIf it fails, sure, go ahead and\n\n1581\n01:23:03,580 --> 01:23:07,470\ndefault back to the other way cuz at\nleast that works, but try and form it up.\n\n1582\n01:23:08,880 --> 01:23:13,140\nThen notice on the load balancing mode,\nthere's more options here\n\n1583\n01:23:13,140 --> 01:23:17,170\nthan we had in the other method,\nactually quite a few options.\n\n1584\n01:23:17,170 --> 01:23:20,240\nWhen you do LACP you can\nbalance on all sorts of things.\n\n1585\n01:23:20,240 --> 01:23:25,200\nYou can do it based on IP address,\nyou can do it based on TCP and UDP port,\n\n1586\n01:23:25,200 --> 01:23:29,580\nyou can do it based on MACs, VLAN,\njust all sorts of stuff in here.\n\n1587\n01:23:29,580 --> 01:23:33,486\nSo you can really get some good load\nbalancing based on what criteria works\n\n1588\n01:23:33,486 --> 01:23:35,000\nbest for your environment.\n\n1589\n01:23:39,066 --> 01:23:41,370\nAll right, some of the other things,\n\n1590\n01:23:41,370 --> 01:23:46,220\nI don't believe private VLANs are on\nthe exam, but When we create a VLAN.\n\n1591\n01:23:46,220 --> 01:23:51,570\nIf I create VLAN ten and\nI put four virtual machines on VLAN ten,\n\n1592\n01:23:51,570 --> 01:23:55,010\nall four of those virtual machines\nwill be able to see each other, right.\n\n1593\n01:23:55,010 --> 01:23:59,260\nBut with a private VLAN,\nif I create a VLAN called VLAN ten and\n\n1594\n01:23:59,260 --> 01:24:03,050\nit's a private VLAN and\nI put four virtual machines on there,\n\n1595\n01:24:03,050 --> 01:24:06,250\nthey won't be able to see each other,\nall right?\n\n1596\n01:24:06,250 --> 01:24:08,800\nBut you create what's\ncalled a community port and\n\n1597\n01:24:08,800 --> 01:24:10,400\nthey'll all be able to\nsee that community port.\n\n1598\n01:24:10,400 --> 01:24:13,406\nNow, that's a confusing idea,\nlike why would we do that?\n\n1599\n01:24:13,406 --> 01:24:18,390\nThink about your cable,\nif you have a cable or DSL at home, right,\n\n1600\n01:24:18,390 --> 01:24:21,600\nI've got a cable modem at home,\nand so if I go home and\n\n1601\n01:24:21,600 --> 01:24:25,400\nI sit down at my desktop I'm connected to\na cable modem that connects me to a cable\n\n1602\n01:24:25,400 --> 01:24:27,770\nhigh speed internet network, all right.\n\n1603\n01:24:27,770 --> 01:24:30,300\nThere's other people in my neighborhood\nthat are connected to that network\n\n1604\n01:24:30,300 --> 01:24:31,710\nalso, all right?\n\n1605\n01:24:31,710 --> 01:24:35,320\nAnd we all go to the cable company and\ngo out to the internet.\n\n1606\n01:24:35,320 --> 01:24:37,770\nBut if I try and\ntalk to one of my neighbors if I try and\n\n1607\n01:24:37,770 --> 01:24:39,430\nget to them, I'm not allowed.\n\n1608\n01:24:39,430 --> 01:24:42,190\nWe're on the same network but\nI'm not allowed to talk to them.\n\n1609\n01:24:42,190 --> 01:24:45,050\nWe're all allowed to talk\nto the cable company, but\n\n1610\n01:24:45,050 --> 01:24:46,500\nwe're not allowed to talk to each other.\n\n1611\n01:24:46,500 --> 01:24:48,290\nThat's what a Private VLAN is.\n\n1612\n01:24:48,290 --> 01:24:52,030\nThe individual VMs inside of it\nare not allowed to talk to each other.\n\n1613\n01:24:52,030 --> 01:24:56,960\nBut they are allowed to go to the gateway,\nor whatever community ports you define.\n\n1614\n01:24:56,960 --> 01:25:00,180\nSo when you come in here\nyou create a Private VLAN.\n\n1615\n01:25:00,180 --> 01:25:03,820\nAnd then you assign people,\nthey call it a secondary VLAN ID,\n\n1616\n01:25:03,820 --> 01:25:06,430\nto determine what they're\nactually able to access.\n\n1617\n01:25:06,430 --> 01:25:08,360\nThey won't be able to access each other.\n\n1618\n01:25:08,360 --> 01:25:12,590\nMost enterprise networks don't use this,\nunless you're a service provider.\n\n1619\n01:25:12,590 --> 01:25:13,480\nIf you have customers.\n\n1620\n01:25:13,480 --> 01:25:15,090\nIf you are hosting virtual machines for\n\n1621\n01:25:15,090 --> 01:25:19,470\na customer, you don't want one\ncustomer to see another customer.\n\n1622\n01:25:19,470 --> 01:25:22,130\nYou want to isolate that traffic and\nprivate VLANs allow for that.\n\n1623\n01:25:24,140 --> 01:25:26,000\nHere's the NetFlow settings\nI was talking about.\n\n1624\n01:25:26,000 --> 01:25:29,360\nThis is for the advanced\nreporting that a DVSwitch does.\n\n1625\n01:25:29,360 --> 01:25:32,970\nSo you can come in here and\nedit it to define who your collector is.\n\n1626\n01:25:32,970 --> 01:25:36,160\nNetFlow requires a collector,\nyou've gotta have a machine on the network\n\n1627\n01:25:36,160 --> 01:25:39,510\nthat is ready to receive these logs and\ngenerate reporting.\n\n1628\n01:25:40,800 --> 01:25:44,490\nVMware, they do have some little\nservices that'll report on that, but\n\n1629\n01:25:44,490 --> 01:25:47,390\none of the most common ones\nthat's out there is a product\n\n1630\n01:25:47,390 --> 01:25:49,980\ncalled SolarWinds Network\nPerformance Monitoring and\n\n1631\n01:25:49,980 --> 01:25:52,140\nit's got a NetFlow reporting\ntool in it that's pretty nice.\n\n1632\n01:25:52,140 --> 01:25:55,390\nSo there's plenty of third parties\nout there that make reporting tools\n\n1633\n01:25:55,390 --> 01:25:55,960\nthat work with it.\n\n1634\n01:25:57,400 --> 01:25:58,930\nWe also have port mirroring.\n\n1635\n01:25:58,930 --> 01:26:02,760\nSo here's where I could take\na port on my switch and\n\n1636\n01:26:02,760 --> 01:26:05,210\nduplicate its traffic\nto send somewhere else.\n\n1637\n01:26:05,210 --> 01:26:09,900\nthe way we do that is by defining the port\nmirror so when you hit add it'll ask you\n\n1638\n01:26:09,900 --> 01:26:12,810\nto pick those ports so we need to say\nthat we're doing like distributive\n\n1639\n01:26:12,810 --> 01:26:17,600\nport mirroring and we pick the source and\nthen the destination so\n\n1640\n01:26:17,600 --> 01:26:21,310\nwhere the traffic is coming from and\nwhere we're going to send it to.\n\n1641\n01:26:21,310 --> 01:26:25,710\nIf I do port mirroring I'll just call\nthis session zero, I'm gonna enable it.\n\n1642\n01:26:27,050 --> 01:26:29,740\nYou can come through and specify whether\nyou wanna manipulate that data at all.\n\n1643\n01:26:29,740 --> 01:26:30,850\nI'm just gonna leave it alone.\n\n1644\n01:26:30,850 --> 01:26:36,170\nAnd then you pick the source, so\nwhat port you're gonna be monitoring.\n\n1645\n01:26:36,170 --> 01:26:39,400\nAnd you'll see where I can\nselect distributed ports or\n\n1646\n01:26:39,400 --> 01:26:45,090\nwe can do a distributive port as\na source here so we can do either route.\n\n1647\n01:26:45,090 --> 01:26:46,410\nSo I'll do a distributed port.\n\n1648\n01:26:48,300 --> 01:26:51,190\nAnd I've just got that VM Linux,\nI'll choose that one.\n\n1649\n01:26:52,460 --> 01:26:54,310\nAnd then on the next screen\nI picked the destination.\n\n1650\n01:26:54,310 --> 01:26:56,820\nI'm gonna have a little problem here\nbecause I don't really have anybody else\n\n1651\n01:26:56,820 --> 01:26:57,820\nto send it to.\n\n1652\n01:26:57,820 --> 01:27:00,760\nSo I could send it back to itself but\nthere's not a lot of point.\n\n1653\n01:27:00,760 --> 01:27:02,800\nSo if I had an IDS appliance,\n\n1654\n01:27:02,800 --> 01:27:07,010\nanother VM that was doing intrusion\ndetection, I would pick that one here.\n\n1655\n01:27:07,010 --> 01:27:09,570\nAnd then any traffic going to VM Linux 1,\n\n1656\n01:27:09,570 --> 01:27:12,500\nwould be mirrored to\nthat other destination.\n\n1657\n01:27:12,500 --> 01:27:15,800\nthey would get that traffic and\nthey will be able to analyze it.\n\n1658\n01:27:15,800 --> 01:27:17,600\nIf I do this, I'm gonna create a loop and\n\n1659\n01:27:17,600 --> 01:27:20,482\nit's gonna receive duplicate\npackets which will be a mess.\n\n1660\n01:27:20,482 --> 01:27:24,870\nBut that's what it wants to do there so\nI'll just cancel that.\n\n1661\n01:27:24,870 --> 01:27:25,570\nAll right.\n\n1662\n01:27:25,570 --> 01:27:27,690\nThen the last one is\nthe advanced health check.\n\n1663\n01:27:27,690 --> 01:27:31,350\nThis is where it's gonna examine your\nVLANs, your teaming, your failover.\n\n1664\n01:27:31,350 --> 01:27:34,520\nIt's gonna monitor all that,\nto keep track of the health, and\n\n1665\n01:27:34,520 --> 01:27:36,580\nalert you if there are problems.\n\n1666\n01:27:36,580 --> 01:27:40,130\nThe standard vSwitch does monitoring also,\nbut this goes beyond it.\n\n1667\n01:27:40,130 --> 01:27:41,800\nIt does more than just like the beacons.\n\n1668\n01:27:41,800 --> 01:27:45,060\nIt's actually monitoring the traffic,\nto see that things are healthy, so\n\n1669\n01:27:45,060 --> 01:27:46,410\nwe can turn that on.\n\n1670\n01:27:46,410 --> 01:27:49,450\nThose are all advanced\nfunctions of the DVSwitch.\n\n1671\n01:27:49,450 --> 01:27:51,780\nThey're pretty easy to setup all in all.\n\n1672\n01:27:51,780 --> 01:27:54,680\nThe technology sounds more\nintimidating than it is.\n\n1673\n01:27:54,680 --> 01:27:58,300\nDistributed virtual switch, and I've got\nto deploy it across multiple machines.\n\n1674\n01:27:58,300 --> 01:27:59,790\nWell, was it hard?\n\n1675\n01:27:59,790 --> 01:28:00,620\nNot really.\nIt took me.\n\n1676\n01:28:00,620 --> 01:28:01,510\nI don't know.\n\n1677\n01:28:01,510 --> 01:28:02,090\nWhat?\nEight or\n\n1678\n01:28:02,090 --> 01:28:04,160\nnine clicks there to get it knocked out.\n\n1679\n01:28:04,160 --> 01:28:05,340\nAnd it's in place.\n\n1680\n01:28:05,340 --> 01:28:07,240\nAnd it's up and running.\n\n1681\n01:28:07,240 --> 01:28:08,390\nAll right.\n\n1682\n01:28:08,390 --> 01:28:15,010\nSo as far as the networking side of\nvSphere is concerned, that's really it.\n\n1683\n01:28:15,010 --> 01:28:18,100\nSmall and medium businesses\nare gonna use standard vSwitches.\n\n1684\n01:28:18,100 --> 01:28:19,750\nThey provide everything that you need.\n\n1685\n01:28:19,750 --> 01:28:21,020\nIn an enterprise environment,\n\n1686\n01:28:21,020 --> 01:28:24,200\nyou may step up to the DVSwitch\nif you need that functionality.\n\n1687\n01:28:24,200 --> 01:28:26,980\nEspecially if you're gonna be doing\nclustering and high availability,\n\n1688\n01:28:26,980 --> 01:28:30,620\nit really helps out there to\nget consistent network inputs.\n\n1689\n01:28:30,620 --> 01:28:34,600\nAll right, that's not all I've got on\nthat, so let me just remind you guys.\n\n1690\n01:28:34,600 --> 01:28:38,510\nIf you have any questions on this,\nmake sure to ask.\n\n1691\n01:28:38,510 --> 01:28:41,320\nLive during the show you\ncan go to itpro.tv/live and\n\n1692\n01:28:41,320 --> 01:28:43,700\nyou'll see the chatroom\nright beneath the video.\n\n1693\n01:28:43,700 --> 01:28:44,640\nPost your questions there.\n\n1694\n01:28:44,640 --> 01:28:46,970\nWe monitor and answer during the show.\n\n1695\n01:28:46,970 --> 01:28:50,120\nIf you have questions after the show,\nuse our Q and A forums.\n\n1696\n01:28:50,120 --> 01:28:53,990\nThere's a link at the top of every\npage at itpro.tv that says Q and A.\n\n1697\n01:28:53,990 --> 01:28:55,820\nIt'll take you to the Q and A forums.\n\n1698\n01:28:55,820 --> 01:28:56,600\nPost your question there.\n\n1699\n01:28:56,600 --> 01:28:57,920\nWe monitor and answer there too.\n\n1700\n01:28:57,920 --> 01:28:59,920\nRight.\nIt's great for after hour stuff.\n\n1701\n01:28:59,920 --> 01:29:01,830\nNow we don't watch it 24 hours a day.\n\n1702\n01:29:01,830 --> 01:29:04,430\nBut at least one of us checks\nit every single day, so\n\n1703\n01:29:04,430 --> 01:29:06,460\nwe make sure that it gets updated.\n\n1704\n01:29:06,460 --> 01:29:06,990\nAll right.\n\n1705\n01:29:06,990 --> 01:29:09,180\nI hope you guys enjoyed the show.\n\n1706\n01:29:09,180 --> 01:29:11,080\nStay tuned,\nwe've got more episodes coming up.\n\n1707\n01:29:11,080 --> 01:29:13,070\nWe're going to be diving\ninto storage next.\n\n1708\n01:29:13,070 --> 01:29:15,730\nWe've gotta have some place\nto put our virtual machines.\n\n1709\n01:29:15,730 --> 01:29:17,370\nDefinitely an exciting one there.\n\n1710\n01:29:17,370 --> 01:29:20,029\nStay tuned for that and\nI'll see you next time.\n\n1711\n01:29:20,029 --> 01:29:30,029\n[MUSIC]\n\n",
          "vimeoId": "103421558"
        }
      ],
      "title": "Plan and Configure vSphere Networking"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don takes a look at configuring data stores in vSphere. He demonstrates using local and shared data stores to hold virtual machines as well as installation images.",
          "length": "4138",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/006-Configuring-Storage.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/006-Configuring-Storage-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/006-Configuring-Storage-sm.jpg",
          "title": "Configuring Storage",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,220 --> 00:00:22,590\n[SOUND]\n\n3\n00:00:22,590 --> 00:00:32,590\n[MUSIC]\n\n4\n00:00:33,590 --> 00:00:34,421\nAll right.\n\n5\n00:00:34,421 --> 00:00:36,591\nGood morning, good afternoon,\nand good evening.\n\n6\n00:00:36,591 --> 00:00:39,291\nAnd welcome back to another\nepisode of ITProTV.\n\n7\n00:00:39,291 --> 00:00:44,780\nI'm your host Don Pezet, back again with\nanother episode of VMware vSphere 5.\n\n8\n00:00:44,780 --> 00:00:49,140\nWe're jumping back into\nour VCP-DCV [LAUGH] show.\n\n9\n00:00:49,140 --> 00:00:51,670\nOne of these days on the intro I\nwill not laugh when I say that.\n\n10\n00:00:51,670 --> 00:00:52,880\nIt's just too many letters.\n\n11\n00:00:52,880 --> 00:00:57,020\nBut anyhow, we're diving back\ninto the world of VMware vSphere.\n\n12\n00:00:57,020 --> 00:00:59,550\nWe have talked about getting it installed.\n\n13\n00:00:59,550 --> 00:01:01,600\nWe talk about centrally managing it, and\n\n14\n00:01:01,600 --> 00:01:05,800\nin the last episode we talked about\nvirtual switches and virtual networking.\n\n15\n00:01:05,800 --> 00:01:09,010\nToday we're gonna talk about storage.\n\n16\n00:01:09,010 --> 00:01:12,670\nWhen we create virtual machines, it's kind\nof funny that we're a third of the way\n\n17\n00:01:12,670 --> 00:01:15,780\nthrough this whole series and\nwe haven't even created a VM yet, but\n\n18\n00:01:15,780 --> 00:01:19,300\nif we're gonna create virtual machines,\nwe've got to have somewhere to put them.\n\n19\n00:01:19,300 --> 00:01:23,935\nSomewhere they can store their data and\nwell for that we have a datastore, right?\n\n20\n00:01:23,935 --> 00:01:26,420\n[LAUGH] I'll use the words and\nthe definition.\n\n21\n00:01:26,420 --> 00:01:29,395\nWe have various data stores where\nwe can put our information, so\n\n22\n00:01:29,395 --> 00:01:32,755\nwe need to understand how VMWare handles\nthose, how we work with them and\n\n23\n00:01:32,755 --> 00:01:36,721\nsome of the different ways we can use them\nbecause there's really cool stuff in here,\n\n24\n00:01:36,721 --> 00:01:37,300\nall right.\n\n25\n00:01:37,300 --> 00:01:40,420\nSo let's just start off with what\ntypes of storage are supported.\n\n26\n00:01:40,420 --> 00:01:42,590\nI whipped up a quick list here.\n\n27\n00:01:42,590 --> 00:01:47,527\nESXI the hypervisors,\nthe host can support storage\n\n28\n00:01:47,527 --> 00:01:51,800\nin a number of different places,\nall right.\n\n29\n00:01:51,800 --> 00:01:55,629\nProbably the most common storage is\nscuzzy, SCSI or SAS, which is serial\n\n30\n00:01:55,629 --> 00:01:59,990\nattached SCSI, they're just two\ndifferent types of the same technology.\n\n31\n00:01:59,990 --> 00:02:04,190\nThat's what you're gonna find in\na lot of your servers, your HP or\n\n32\n00:02:04,190 --> 00:02:06,290\nDell or IBM servers.\n\n33\n00:02:06,290 --> 00:02:08,570\nThey'll have internal SCSI storage.\n\n34\n00:02:08,570 --> 00:02:11,370\nAnd if you're storing your VM's\nright there on the server,\n\n35\n00:02:11,370 --> 00:02:13,870\ntypically that's where your\ndata stores are going to be,\n\n36\n00:02:13,870 --> 00:02:17,520\nyou're going to have SCSI based\ndata storage right on the system.\n\n37\n00:02:17,520 --> 00:02:18,110\nRight?\n\n38\n00:02:18,110 --> 00:02:24,460\nThat's fine for stand alone ESXI servers,\nor servers that we manage individually.\n\n39\n00:02:24,460 --> 00:02:28,130\nBut if we want to have\nfail over clustering,\n\n40\n00:02:28,130 --> 00:02:32,520\nif we want virtual machines to be able\nto jump from one host to another,\n\n41\n00:02:32,520 --> 00:02:37,540\nwe need more than one host to be\nable to see the same exact storage.\n\n42\n00:02:37,540 --> 00:02:40,530\nAnd SCSI and SAS even SATA serial ATA,\n\n43\n00:02:40,530 --> 00:02:43,540\nthose technologies,\nthey won't allow for that.\n\n44\n00:02:43,540 --> 00:02:44,680\nThese technologies right here,\n\n45\n00:02:44,680 --> 00:02:49,520\nSATA, SCSI, SAS, I didn't bother\nputting like parallel ATA in there.\n\n46\n00:02:49,520 --> 00:02:53,800\nBut those guys, they're designed for\nsingle server storage.\n\n47\n00:02:53,800 --> 00:02:56,910\nIf we wanna go share the storage,\nwe need to step it up.\n\n48\n00:02:56,910 --> 00:03:02,900\nAnd move up to either something like\niSCSI which is SCSI over Ethernet, right.\n\n49\n00:03:02,900 --> 00:03:06,800\nWe just send it over an internet\nconnection or IP based connection.\n\n50\n00:03:06,800 --> 00:03:11,655\nOr we can do fiber channel SAN's and\nfiber channel over Ethernet SAN's.\n\n51\n00:03:12,830 --> 00:03:15,090\nThose types of SAN's,\nthe fiber channel SAN's.\n\n52\n00:03:15,090 --> 00:03:17,840\nThat's where we have\na storage area network and\n\n53\n00:03:17,840 --> 00:03:21,730\nall of our servers connect to\nit via usually fiber optics.\n\n54\n00:03:21,730 --> 00:03:25,600\nIt can be done over copper but\nnormally it's over fiber optic cable, and\n\n55\n00:03:25,600 --> 00:03:30,070\nfrom there we're able to send very rapid\nscuzzy based communications over the fiber\n\n56\n00:03:30,070 --> 00:03:34,070\nlines to communicate to that storage, and\nwe can have where more than one sever will\n\n57\n00:03:34,070 --> 00:03:39,851\nsee the same resources on that SAN, which\nis perfect for doing fail over, all right.\n\n58\n00:03:39,851 --> 00:03:43,620\nI-scuzzy does the same basic thing\nexcept is sending that i-scuzzy traffic\n\n59\n00:03:43,620 --> 00:03:45,410\nnot over dedicated fiber, but\n\n60\n00:03:45,410 --> 00:03:50,010\nover your regular TCP/IP based network,\nyour IPv4 or IPv6 network.\n\n61\n00:03:51,180 --> 00:03:55,840\nThat works but you get a lot of TCP\noverhead with it, so it's not as good for\n\n62\n00:03:55,840 --> 00:04:00,100\nperformance and\ni-scuzzy is saying on its best day.\n\n63\n00:04:00,100 --> 00:04:03,680\nWill never perform better than\nfiber channel on its worst day.\n\n64\n00:04:03,680 --> 00:04:07,060\nSo you're always better off going with\nfiber channel, now if that's the case, if\n\n65\n00:04:07,060 --> 00:04:11,430\nyou're always better off going with fiber\nchannel, why would we even have iSCSI?\n\n66\n00:04:11,430 --> 00:04:12,930\nAnd the answer is cost.\n\n67\n00:04:12,930 --> 00:04:16,848\niSCSI is super cheap to implement,\nbecause it just uses your regular network.\n\n68\n00:04:16,848 --> 00:04:22,490\nThe trade off is performance, because you\nget a lower price and lower performance.\n\n69\n00:04:22,490 --> 00:04:26,150\nFiber channel will give you the best\nperformance but it's expensive.\n\n70\n00:04:26,150 --> 00:04:30,658\nThe switch alone is gonna cost you 4 or\n$5,000, that's not counting the cables or\n\n71\n00:04:30,658 --> 00:04:31,690\neven the sand.\n\n72\n00:04:31,690 --> 00:04:33,570\nJust the switch is 4 or $5,000.\n\n73\n00:04:34,870 --> 00:04:37,230\nAll right, fiber channel over Ethernet.\n\n74\n00:04:37,230 --> 00:04:41,650\nWell if fiber channel is the best\nconnection that I can get,\n\n75\n00:04:41,650 --> 00:04:45,130\nwhy would I even dream of doing fiber\nchannel communications over Ethernet?\n\n76\n00:04:45,130 --> 00:04:46,190\nWhy would I wanna do that?\n\n77\n00:04:46,190 --> 00:04:48,060\nWhy would I wanna take\nthat performance hit?\n\n78\n00:04:48,060 --> 00:04:52,790\nAnd the answer is, if I have sands\nin multiple geographic locations and\n\n79\n00:04:52,790 --> 00:04:56,940\nI want to replicate between them,\nwe can use fiber channel over Ethernet.\n\n80\n00:04:56,940 --> 00:04:59,850\nNow we don't normally host\nour virtual machines there.\n\n81\n00:04:59,850 --> 00:05:04,270\nBut we'll see things like the disaster\nrecovery service, the DRS, you know\n\n82\n00:05:04,270 --> 00:05:08,810\nsystems like that within VMware and\nvSphere suite, that allow us to replicate\n\n83\n00:05:08,810 --> 00:05:13,141\ndata between locations and they'll make\nuse of fiber channel over Ethernet.\n\n84\n00:05:13,141 --> 00:05:16,420\nWell the final one that I've put here\nis something completely different.\n\n85\n00:05:16,420 --> 00:05:21,150\nAll of these guys up here, are ways that\nwe can directly connect to hard drives and\n\n86\n00:05:21,150 --> 00:05:25,210\nhave them available for storing virtual\nmachines inside of VMware, all right.\n\n87\n00:05:25,210 --> 00:05:26,670\nBut the last one is NFS.\n\n88\n00:05:26,670 --> 00:05:28,870\nThat's the network file system.\n\n89\n00:05:28,870 --> 00:05:32,030\nAnd NFS,\nit's like shared folders for Unix.\n\n90\n00:05:32,030 --> 00:05:35,640\nIn the Unix world this is how you share\nfolders and files across the network.\n\n91\n00:05:35,640 --> 00:05:37,850\nIn Windows you have Samba or SMB.\n\n92\n00:05:37,850 --> 00:05:41,140\nI mean not Samba,\nit's Server Message Block, sorry,\n\n93\n00:05:41,140 --> 00:05:42,650\nSamba is the open source version of it.\n\n94\n00:05:42,650 --> 00:05:47,620\nBut SMB is Server Message Block In Apple,\nyou have AFP, the Apple File Protocol.\n\n95\n00:05:47,620 --> 00:05:52,420\nWell in Unix based OS's, you have NFS,\nthe Network File System.\n\n96\n00:05:52,420 --> 00:05:58,500\nAnd under the hood of ESXi,\nyou have Linux and so it supports NFS.\n\n97\n00:05:58,500 --> 00:06:01,150\nBut it's a file sharing protocol.\n\n98\n00:06:01,150 --> 00:06:04,170\nIt's not really designed for\nheavy disk I/O and performance.\n\n99\n00:06:04,170 --> 00:06:06,370\nSo why would we even\nbother supporting that?\n\n100\n00:06:06,370 --> 00:06:11,055\nWell, as you create your virtual machines,\noftentimes you're gonna want to boot them\n\n101\n00:06:11,055 --> 00:06:14,230\nfrom a CD or\na DVD to install an operating system.\n\n102\n00:06:14,230 --> 00:06:16,830\nAnd when you do that,\nif you have the physical disk,\n\n103\n00:06:16,830 --> 00:06:21,090\nyou can walk right up to your ESXi server,\npop it in the drive and do your install.\n\n104\n00:06:21,090 --> 00:06:24,400\nBut if that servers in another city,\nyou don't want to call somebody and\n\n105\n00:06:24,400 --> 00:06:24,936\nget them to do that.\n\n106\n00:06:24,936 --> 00:06:27,980\nHeck you might have bought servers\nthat don't even have a CD or\n\n107\n00:06:27,980 --> 00:06:29,740\nDVD drive on them, right?\n\n108\n00:06:29,740 --> 00:06:32,560\nSo instead we can mount images, ISO.\n\n109\n00:06:32,560 --> 00:06:35,610\nWe can have digital image of a CD or DVD.\n\n110\n00:06:35,610 --> 00:06:38,329\nAnd if we stick it into a NFS\nshared folder somewhere.\n\n111\n00:06:39,580 --> 00:06:43,920\nESXi can connect to it, and\nsee all of the ISO images, so\n\n112\n00:06:43,920 --> 00:06:47,820\nthat when we boot up a virtual machine, we\ncan insert one of those digital images of\n\n113\n00:06:47,820 --> 00:06:51,270\na disk and it'll boot right up off\nof it as if it was a real disk.\n\n114\n00:06:51,270 --> 00:06:53,180\nSo that's where we use NFS.\n\n115\n00:06:53,180 --> 00:06:58,270\nBut all of these show up in ESXi\nas what's called a data store.\n\n116\n00:06:58,270 --> 00:07:02,370\nAnd a data store is just a place\nwhere you can put your information.\n\n117\n00:07:02,370 --> 00:07:04,800\nWe're normally talking\nabout virtual machines, but\n\n118\n00:07:04,800 --> 00:07:09,470\nit can be things like ISO images and\ntemplates also, all right.\n\n119\n00:07:09,470 --> 00:07:11,860\nWhen we create one of these data stores.\n\n120\n00:07:11,860 --> 00:07:16,400\nIt's gonna take wherever you're storing\nthat data, if it's anything except NFS.\n\n121\n00:07:16,400 --> 00:07:18,890\nIf it's any of these guys up here,\nit's gonna take it,\n\n122\n00:07:18,890 --> 00:07:24,010\nand it's gonna format it to\nVMware specific requirements.\n\n123\n00:07:24,010 --> 00:07:29,470\nVsphere uses something called VMFS,\nor Virtual Machine File System,\n\n124\n00:07:29,470 --> 00:07:32,440\nand it's a special way of formatting\nthe drive to be able to handle\n\n125\n00:07:32,440 --> 00:07:37,210\nmultiple virtual machines data, kind of\ntucking it all away inside of that drive.\n\n126\n00:07:37,210 --> 00:07:41,920\nSo whenever we set up one these data\nstores up here, that drive or collection\n\n127\n00:07:41,920 --> 00:07:47,110\nof drives or RAID array, or whatever it is\nis gonna get formatted by ESXi, all right.\n\n128\n00:07:47,110 --> 00:07:49,832\nBut when you connect to NFS,\nbecause it's just a shared folder,\n\n129\n00:07:49,832 --> 00:07:50,833\nit doesn't format it.\n\n130\n00:07:50,833 --> 00:07:53,880\nIt connects to that shared folder and then\nyou have access to whatever's in there.\n\n131\n00:07:55,250 --> 00:07:57,833\nAll right, so just be aware of\nthat as we work with storage.\n\n132\n00:07:57,833 --> 00:08:02,125\nNow When we create storage,\nby default it is not shared.\n\n133\n00:08:02,125 --> 00:08:04,850\nI know the objective is actually\ncalled shared storage but\n\n134\n00:08:04,850 --> 00:08:08,640\nwhen we create these guys and\nadd them in they're not shared by default.\n\n135\n00:08:08,640 --> 00:08:13,560\nEach ESXI host is managing its own\nconnection to these resources.\n\n136\n00:08:13,560 --> 00:08:15,200\nBut when we build up a cluster,\n\n137\n00:08:15,200 --> 00:08:19,520\nwhich we'll see later on in the high\navailability episodes, we'll actually\n\n138\n00:08:19,520 --> 00:08:23,530\nshare these, where more than one host will\nhave a connection to the same storage.\n\n139\n00:08:23,530 --> 00:08:26,050\nSo all of these are capable\nof being shared.\n\n140\n00:08:26,050 --> 00:08:27,660\nThey just aren't by default.\n\n141\n00:08:27,660 --> 00:08:31,060\nThe exception would be like NFS which is\ndesigned for sharing from the beginning.\n\n142\n00:08:32,760 --> 00:08:36,220\nAll right, now,\nwhen we add hard drives to our system.\n\n143\n00:08:36,220 --> 00:08:38,500\nWhen we add and\nstart to get things configured.\n\n144\n00:08:38,500 --> 00:08:44,170\nThey can show up different ways inside of\nVcenter or inside ESXI for that matter.\n\n145\n00:08:44,170 --> 00:08:46,270\nYou'll see a number of different\nnaming conventions and\n\n146\n00:08:46,270 --> 00:08:49,250\nso I wanted to call those out real quick\njust so that we're familiar with them.\n\n147\n00:08:49,250 --> 00:08:53,550\nThe most common one you're gonna see is\nwhat's called a path based identifier and\n\n148\n00:08:53,550 --> 00:08:57,720\nthat's typically what your hard drives,\nyour physical drives, they'll show up as.\n\n149\n00:08:57,720 --> 00:09:01,375\nAnd you'll see them listed\nin a format like this.\n\n150\n00:09:01,375 --> 00:09:06,267\nIt'll start with VMHBA followed by\na bunch of other information which if you\n\n151\n00:09:06,267 --> 00:09:09,791\ndon't know what it is,\nis kind of gibberish, right?\n\n152\n00:09:09,791 --> 00:09:16,440\nSo if I see VMHBA0:C0:T0:L0:2, right?\n\n153\n00:09:16,440 --> 00:09:17,750\nWhat the heck does that mean?\n\n154\n00:09:17,750 --> 00:09:20,125\nWell, it's actually not as\nbad as it seems, right?\n\n155\n00:09:20,125 --> 00:09:25,875\nVMHBA0, that's Virtual Machine Hardware or\nHost Bus Adaptor.\n\n156\n00:09:25,875 --> 00:09:28,730\nSo Virtual Machine Host Bus Adaptor\nnumber zero.\n\n157\n00:09:28,730 --> 00:09:32,090\nSo, that means you have a drive\ncontroller, a hard drive controller,\n\n158\n00:09:32,090 --> 00:09:33,350\nin your system.\n\n159\n00:09:33,350 --> 00:09:34,220\nAnd this is number zero.\n\n160\n00:09:34,220 --> 00:09:35,410\nThe very first one.\n\n161\n00:09:35,410 --> 00:09:37,650\nYou might have more than one HPA.\n\n162\n00:09:37,650 --> 00:09:39,500\nMore than one Host Plus Adapter.\n\n163\n00:09:39,500 --> 00:09:44,050\nNow most motherboards have their\nHost Plus Adapter built right into it.\n\n164\n00:09:44,050 --> 00:09:45,680\nSo it's not really an adapter at all.\n\n165\n00:09:45,680 --> 00:09:47,560\nThey're just local drives.\n\n166\n00:09:47,560 --> 00:09:51,350\nBut if you're connecting to a fiber\nchannel SAN, then you more than likely\n\n167\n00:09:51,350 --> 00:09:56,440\nhave a dedicated fiber HBA that\nyou stick inside of that server\n\n168\n00:09:56,440 --> 00:09:59,830\nthat then gives you the fiber optic cords\nto run to the switch and then to your SAN.\n\n169\n00:10:01,320 --> 00:10:06,880\nWith iSCSI,\niSCSI normally uses your regular network.\n\n170\n00:10:06,880 --> 00:10:10,400\nYour regular TCPIP based ethernet network.\n\n171\n00:10:10,400 --> 00:10:13,740\nSo you just have a regular network\nadapter, like a gigabit or\n\n172\n00:10:13,740 --> 00:10:15,990\n10 gig adapter in your system.\n\n173\n00:10:15,990 --> 00:10:21,105\nBut they do make special\nSpecial hardware iSCSI cards,\n\n174\n00:10:21,105 --> 00:10:23,115\nthey look just like network cards.\n\n175\n00:10:23,115 --> 00:10:25,715\nBut they have a lot of\nextra circuitry on board.\n\n176\n00:10:25,715 --> 00:10:30,276\nYou know you can buy a server grade\nnetwork card for under $100, all right?\n\n177\n00:10:30,276 --> 00:10:31,735\nA single port one.\n\n178\n00:10:31,735 --> 00:10:36,025\nBut a dedicated iSCSI controller card,\n\n179\n00:10:36,025 --> 00:10:41,020\nthey'll usually be $800, $900 and that's\nbecause they've got all the logic for\n\n180\n00:10:41,020 --> 00:10:44,660\ncommunicating via SCSI over\nethernet right there on the card.\n\n181\n00:10:44,660 --> 00:10:46,550\nThey're doing that stuff in hardware.\n\n182\n00:10:46,550 --> 00:10:50,880\nIf you do iSCSI with a normal network\nadaptor, then all that's being done in\n\n183\n00:10:50,880 --> 00:10:55,370\nsoftware, by CPU cycles on your host,\nso you're actually taking\n\n184\n00:10:55,370 --> 00:10:59,912\nsome of the performance away from your\nESXI box by doing that in software.\n\n185\n00:10:59,912 --> 00:11:03,290\nAl lright, so in a high disk IO\nenvironment you might buy on of those iSCI\n\n186\n00:11:03,290 --> 00:11:04,420\ncontroller cards to do that.\n\n187\n00:11:04,420 --> 00:11:06,650\nThat would kind of be\nlike if you're in between\n\n188\n00:11:07,670 --> 00:11:11,426\nonly being able to afford iSCI versus\nbeing able to afford a fiber channel SAN.\n\n189\n00:11:11,426 --> 00:11:14,912\nYou know that iSCI controller card kind of\nserver as a little stop gap in the middle.\n\n190\n00:11:14,912 --> 00:11:16,040\nAll right?\n\n191\n00:11:16,040 --> 00:11:19,350\nWhen you add those in they show up as an\nHPA just like a fiber channel card would.\n\n192\n00:11:20,660 --> 00:11:24,490\nSo we'll see VMHBA zero one\ntwo three four, or whatever.\n\n193\n00:11:24,490 --> 00:11:26,660\nBased on however many cards we have.\n\n194\n00:11:26,660 --> 00:11:28,570\nThen you've got colon C zero.\n\n195\n00:11:28,570 --> 00:11:30,080\nThat's gonna be your channel.\n\n196\n00:11:30,080 --> 00:11:34,450\nWhen you deal with things like SCSI\ncommunications, SCSI channels inside of\n\n197\n00:11:34,450 --> 00:11:40,020\nthere, that identify what collection\nof discs we're looking at.\n\n198\n00:11:41,120 --> 00:11:44,800\nAfter that is the target,\nT, followed by a number.\n\n199\n00:11:44,800 --> 00:11:48,090\nIf you're dealing with iSCSI you have a\niSCSI target numbers that are assigned to\n\n200\n00:11:48,090 --> 00:11:51,090\nit, and even on traditional SCSI,\nand fiber channel.\n\n201\n00:11:51,090 --> 00:11:54,530\nOn fiber channel you've got\na target which is the SAN\n\n202\n00:11:55,630 --> 00:11:57,020\narray that you're reaching out to.\n\n203\n00:11:58,720 --> 00:12:01,560\nOnce you're there, once you've\ngot the target, the next is LUN.\n\n204\n00:12:01,560 --> 00:12:03,450\nLUN is the most important one.\n\n205\n00:12:03,450 --> 00:12:05,840\nThat's that logical unit number and\n\n206\n00:12:05,840 --> 00:12:09,480\nit's identifying the actual\nhard drive you're connected to.\n\n207\n00:12:09,480 --> 00:12:13,780\nNow, this could be a physical\nhard drive on the SCSI bus.\n\n208\n00:12:13,780 --> 00:12:16,650\nYou know, cause you could have 14,\n15 drives on the SCSI bus.\n\n209\n00:12:16,650 --> 00:12:18,860\nThis would identify which drive it was.\n\n210\n00:12:18,860 --> 00:12:21,540\nOn a SAN it's normally a virtual slice.\n\n211\n00:12:21,540 --> 00:12:25,570\nWe've cut out a bit of storage and\nturned it into a volume and\n\n212\n00:12:25,570 --> 00:12:27,170\nwe're making that available.\n\n213\n00:12:27,170 --> 00:12:31,590\nTo one of our hosts, and\nwe do that by assigning a LUN to it.\n\n214\n00:12:31,590 --> 00:12:33,260\nSo that LUN will have a number and\n\n215\n00:12:33,260 --> 00:12:35,660\nit's identified right here with L,\nfollowed by a number.\n\n216\n00:12:35,660 --> 00:12:38,980\nAnd then the last value,\nyou won't always see this one.\n\n217\n00:12:38,980 --> 00:12:40,580\nIt depends on how you're looking at it.\n\n218\n00:12:40,580 --> 00:12:42,650\nBut this would be the partition.\n\n219\n00:12:42,650 --> 00:12:45,690\nIf there is a partition on the drive,\nit will numbered here.\n\n220\n00:12:45,690 --> 00:12:48,530\nAnd so\nyou'll see this one is partition number 2.\n\n221\n00:12:48,530 --> 00:12:51,430\nSo identifying a particular\nspot on that drive.\n\n222\n00:12:52,930 --> 00:12:55,950\nThere is a variation of this\nnaming convention you might see.\n\n223\n00:12:55,950 --> 00:13:01,052\nIf multipathing is turned on, you may\nsee MPX stuck at the beginning of it.\n\n224\n00:13:01,052 --> 00:13:03,663\nAll right?\nThat just identifies that there is more\n\n225\n00:13:03,663 --> 00:13:06,416\nthan one way to get to\nthis particular storage.\n\n226\n00:13:06,416 --> 00:13:09,958\nI can get to it by vmhba0.\n\n227\n00:13:09,958 --> 00:13:13,610\nThat HBA can take me over\nto this particular entity.\n\n228\n00:13:13,610 --> 00:13:19,490\nBut there might be another way out there,\nwhich is something like vmhba1,\n\n229\n00:13:22,510 --> 00:13:27,080\nwhich is actually pointing\nto the same exact storage.\n\n230\n00:13:27,080 --> 00:13:32,070\nI might have redundant HBAs and\nif one fails I\n\n231\n00:13:32,070 --> 00:13:36,240\ncan just jump down to the other one and\nget to the same exact destination.\n\n232\n00:13:36,240 --> 00:13:40,990\nNow normally the system doesn't support\nthat, the second one is just not used, but\n\n233\n00:13:40,990 --> 00:13:44,930\nif you turn on multipath IO,\nit's sometimes called MPIO.\n\n234\n00:13:44,930 --> 00:13:49,490\nMultipath IO that will let us track\nthe two different ways to get there and\n\n235\n00:13:49,490 --> 00:13:53,460\nit can flip and flop between them\nbased on changes to you're network.\n\n236\n00:13:53,460 --> 00:13:56,730\nIf you're doing a fiber channel\nSAN it's not uncommon for\n\n237\n00:13:56,730 --> 00:14:01,730\npeople to get multiple fiber channel\nswitches and multiple fiber HBAs in their\n\n238\n00:14:01,730 --> 00:14:06,890\nservers to get full redundancy to ensure\nwe can flip over whenever we need to.\n\n239\n00:14:06,890 --> 00:14:10,690\nSo you may see that MPX\ndesignator attached, you may not,\n\n240\n00:14:10,690 --> 00:14:12,600\nit just depends on whether\nMPIO is turned on.\n\n241\n00:14:14,262 --> 00:14:17,280\nAll right, now there are other\nways that these can show up,\n\n242\n00:14:17,280 --> 00:14:19,620\nways that are far less common.\n\n243\n00:14:19,620 --> 00:14:21,800\nYou may actually see\nthe raw SCSI identifiers,\n\n244\n00:14:21,800 --> 00:14:23,500\nthese are part of the SCSI standard.\n\n245\n00:14:23,500 --> 00:14:26,416\nAnd you'll recognize those\ncuz they'll start with eui.\n\n246\n00:14:26,416 --> 00:14:27,458\nOr naa.\n\n247\n00:14:27,458 --> 00:14:29,670\nRight?\nAs opposed to VM HPA.\n\n248\n00:14:29,670 --> 00:14:34,260\nSo if you see these, these are just\nkind of the traditional what's part\n\n249\n00:14:34,260 --> 00:14:37,270\nof the SCSI standards,\nwhat like a normal PC would see.\n\n250\n00:14:37,270 --> 00:14:40,290\nYou don't normally see that in Vcenter or\nplaces like that.\n\n251\n00:14:41,410 --> 00:14:44,780\nAnd then there is the legacy identifier\nthese are the older ones that are still\n\n252\n00:14:44,780 --> 00:14:45,570\nthere sometimes for\n\n253\n00:14:45,570 --> 00:14:51,150\nbackwards compatibility with previous\nversions of Vsphere and they'll be VML.\n\n254\n00:14:51,150 --> 00:14:52,870\nFollowed by and identifier stream.\n\n255\n00:14:52,870 --> 00:14:55,440\nAnd the identifier stream is\nnormally a mixture of letters and\n\n256\n00:14:55,440 --> 00:14:57,690\nnumbers that represent\nthe identity of that device.\n\n257\n00:15:00,220 --> 00:15:04,520\nYou may even see a colon and\nanother number to identify a partition.\n\n258\n00:15:04,520 --> 00:15:06,750\nYou might see that from\ntime to time on those.\n\n259\n00:15:06,750 --> 00:15:12,880\nBut most commonly this is what\nwe're gonna see up here, all right.\n\n260\n00:15:12,880 --> 00:15:16,850\nIf we just bought up\nsome new ESXI boxes and\n\n261\n00:15:16,850 --> 00:15:19,020\nregardless of whether\nwe have Vcenter of not.\n\n262\n00:15:19,020 --> 00:15:22,430\nWe want to go and\nstore our virtual machines on them.\n\n263\n00:15:22,430 --> 00:15:25,250\nSo we need to make use of\nthe storage that's in those devices.\n\n264\n00:15:25,250 --> 00:15:28,290\nWe need to create some data stores.\n\n265\n00:15:28,290 --> 00:15:32,610\nWell, step one, no matter which type\nof data store you're working with,\n\n266\n00:15:32,610 --> 00:15:37,790\nis to verify that whatever hardware\nyou're using is actually supported.\n\n267\n00:15:37,790 --> 00:15:39,770\nIt's on the hardware compatibility list.\n\n268\n00:15:39,770 --> 00:15:43,030\nWith VM ware, so\nVM ware is a really good site for this and\n\n269\n00:15:43,030 --> 00:15:46,010\nthe link will be in the notes.\n\n270\n00:15:46,010 --> 00:15:49,622\nBut let me just show you guys,\nI'm gonna fire this up here, so\n\n271\n00:15:49,622 --> 00:15:54,500\nthis is VM wares compatibility guide, and\nit's nice because you can come in here.\n\n272\n00:15:54,500 --> 00:15:57,000\nAnd you can pick what it\nis you're looking for.\n\n273\n00:15:57,000 --> 00:15:59,875\nSo, I kinda might go to storage and SAN.\n\n274\n00:15:59,875 --> 00:16:04,167\nAnd then in here I can tell it\nthat I am running ESXi 5.5.\n\n275\n00:16:04,167 --> 00:16:07,703\nAnd then I can tell it that maybe\nI'm trying to look up some kind of\n\n276\n00:16:07,703 --> 00:16:09,570\niSCSI adapter.\n\n277\n00:16:09,570 --> 00:16:14,100\nAnd we can go through and we can start to\npull that up based on who manufactures it.\n\n278\n00:16:14,100 --> 00:16:16,692\nSo maybe I've got like an Intel.\n\n279\n00:16:16,692 --> 00:16:19,421\nOr actually QLogic,\nthey make a bunch of them.\n\n280\n00:16:21,831 --> 00:16:23,880\nOh, shoot,\nthey have a different name apparently.\n\n281\n00:16:23,880 --> 00:16:24,895\nSo they're not showing up.\n\n282\n00:16:24,895 --> 00:16:28,470\nQLogic, they got bought by somebody and\nI don't remember who.\n\n283\n00:16:28,470 --> 00:16:30,570\nSo I'll just stick with Intel.\n\n284\n00:16:30,570 --> 00:16:34,917\nAnd then you can go through and pick these\nentries and you can do an update and\n\n285\n00:16:34,917 --> 00:16:39,418\nview results and it'll search and\ngive you the equipment that is supported.\n\n286\n00:16:39,418 --> 00:16:42,518\nSo I told it that I had an iSCSI array.\n\n287\n00:16:42,518 --> 00:16:46,730\nWe have an Intel type and\nnone of those were supported.\n\n288\n00:16:46,730 --> 00:16:50,556\nSo apparently that wasn't\na good choice on my part.\n\n289\n00:16:50,556 --> 00:16:53,891\nWe can try somebody else like, let's see,\n\n290\n00:16:53,891 --> 00:16:58,776\nI'm sure EMC makes some,\nI know HP does, here HP is in the list.\n\n291\n00:16:58,776 --> 00:17:01,700\nAnd let's just change\nthis to fiber channel.\n\n292\n00:17:01,700 --> 00:17:05,795\nSo maybe I've got a Hewlett-Packard\nfiber channel HBA.\n\n293\n00:17:05,795 --> 00:17:08,425\nAnd so I can refresh and here you go.\n\n294\n00:17:08,425 --> 00:17:12,338\nHere's the list of fiber channel\nHBA's from Hewlett-Packard and\n\n295\n00:17:12,338 --> 00:17:14,953\nstorage arrays and so\non that are supported.\n\n296\n00:17:14,953 --> 00:17:16,282\nAnd so I can look at this and\n\n297\n00:17:16,282 --> 00:17:19,770\nfigure out whether it's\nsupported by my version, right?\n\n298\n00:17:19,770 --> 00:17:23,690\nIf it's not supported, you might\nstill be able to get it to work but\n\n299\n00:17:23,690 --> 00:17:25,180\nit's not recommended, right?\n\n300\n00:17:25,180 --> 00:17:27,400\nThese are the ones that VMware supports.\n\n301\n00:17:27,400 --> 00:17:30,720\nThey'll help you with them on the phone if\nyou're having issues getting connectivity.\n\n302\n00:17:30,720 --> 00:17:35,532\nIf you do one that's not supported,\nthey can't support you.\n\n303\n00:17:35,532 --> 00:17:43,990\nAll right, a couple of notes before we\nactually start creating these data stores.\n\n304\n00:17:43,990 --> 00:17:48,420\nWhen we create a data store,\none of the things we do is we specify\n\n305\n00:17:48,420 --> 00:17:50,810\nhow much of the storage on\nthat data store we wanna use.\n\n306\n00:17:50,810 --> 00:17:54,770\nWhen we connect to a SAN or\nto an iSCSI SAN, or\n\n307\n00:17:54,770 --> 00:17:57,560\nwhatever, it's gonna see\na certain amount of storage.\n\n308\n00:17:57,560 --> 00:17:58,696\nAnd it's gonna ask us\nhow much we wanna use.\n\n309\n00:17:58,696 --> 00:18:03,771\nAnd, at that time, we have a choice\nbetween doing thin provisioning or\n\n310\n00:18:03,771 --> 00:18:05,389\nthick provisioning.\n\n311\n00:18:05,389 --> 00:18:10,065\nAll right, when you do thick\nprovisioning or fixed provisioning,\n\n312\n00:18:10,065 --> 00:18:14,248\nif you tell it you wanna create\na 100 gigabyte data store,\n\n313\n00:18:14,248 --> 00:18:16,890\nit will provision 100 gigabytes.\n\n314\n00:18:16,890 --> 00:18:19,910\nIt will grab 100 gigabytes of that data.\n\n315\n00:18:19,910 --> 00:18:23,300\nAnd flag it as all in-use\nat that very moment.\n\n316\n00:18:23,300 --> 00:18:27,670\nEven though the data store's empty,\nit will show us using 100 gigs of storage\n\n317\n00:18:27,670 --> 00:18:30,197\non whatever device it is that's\nhosting that storage, right?\n\n318\n00:18:31,460 --> 00:18:32,910\nThat's called thick provisioning.\n\n319\n00:18:32,910 --> 00:18:35,170\nWe get all of our data at once,\nall of our space.\n\n320\n00:18:36,360 --> 00:18:37,965\nThe other option is thin provisioning.\n\n321\n00:18:37,965 --> 00:18:43,510\nAnd with the thin provisioning, that's\nwhere you say I want 100 gigs of space.\n\n322\n00:18:43,510 --> 00:18:45,120\nBut I don't need it all right now.\n\n323\n00:18:45,120 --> 00:18:46,700\nIn fact, right now it's empty.\n\n324\n00:18:46,700 --> 00:18:50,640\nSo let's just define my storage and\nnot take the space.\n\n325\n00:18:50,640 --> 00:18:54,170\nAnd then as you copy data into it,\nit grows,\n\n326\n00:18:54,170 --> 00:18:56,760\nit grows to reflect the amount\nof data that you copied into it.\n\n327\n00:18:56,760 --> 00:19:01,540\nSo if you create a thin provisioned\n100 gigabyte data store and\n\n328\n00:19:01,540 --> 00:19:04,210\nyou copy 10 gigs of data into it,\n\n329\n00:19:04,210 --> 00:19:08,660\non the actual hard drive it's only\ntaking 10 gigs of space, all right?\n\n330\n00:19:08,660 --> 00:19:12,050\nBut if you copy another 20 gigs,\nnow it'll take 30 gigs of space, right,\n\n331\n00:19:12,050 --> 00:19:13,922\njust grows as you need it.\n\n332\n00:19:13,922 --> 00:19:17,060\nAll right, there are pros and\ncons to both models.\n\n333\n00:19:17,060 --> 00:19:19,910\nThe pro to thin provisioning\n\n334\n00:19:19,910 --> 00:19:24,390\nis you only use the space that\nyou've actually copied data into.\n\n335\n00:19:24,390 --> 00:19:27,050\nSo you can do what's\ncalled oversubscription.\n\n336\n00:19:27,050 --> 00:19:30,300\nI might have a 1 terabyte data store.\n\n337\n00:19:30,300 --> 00:19:37,240\nBut I could thin provision two 1\nterabyte drives, 2 terabytes of storage.\n\n338\n00:19:37,240 --> 00:19:39,510\nAs long as they're empty\nI've got plenty of room.\n\n339\n00:19:39,510 --> 00:19:43,303\nAnd as long as I don't copy more than one\nterabyte of data total to the two drives\n\n340\n00:19:43,303 --> 00:19:45,906\nI've created I won't exceed\nmy overall drive size.\n\n341\n00:19:45,906 --> 00:19:48,251\nSo it allows for oversubscription, right?\n\n342\n00:19:48,251 --> 00:19:50,380\nThat's the positive side.\n\n343\n00:19:50,380 --> 00:19:54,680\nThe negative side is they\ngrow as you use them and\n\n344\n00:19:54,680 --> 00:19:57,740\nthat growing process hurts performance.\n\n345\n00:19:57,740 --> 00:19:58,700\nIt's not as good.\n\n346\n00:19:58,700 --> 00:20:02,500\nWe get fragmentation, we get performance\nissues when you have a grow like that.\n\n347\n00:20:02,500 --> 00:20:06,343\nSo for test environments,\nresearch, lab, whatever,\n\n348\n00:20:06,343 --> 00:20:09,320\nthere use thin-provisioning like crazy.\n\n349\n00:20:09,320 --> 00:20:13,550\nBut in a production environment,\nyou wanna grab all that data at once.\n\n350\n00:20:13,550 --> 00:20:16,510\nCuz it will line up 1 terabyte, or\n\n351\n00:20:16,510 --> 00:20:20,120\nwhatever sizes we've picked up\ncontiguous space all in order.\n\n352\n00:20:20,120 --> 00:20:21,950\nThey'll flag it out and\nsay now we're using it.\n\n353\n00:20:21,950 --> 00:20:23,590\nThis is space we're using, all right?\n\n354\n00:20:23,590 --> 00:20:25,830\nEven though it's empty,\nnobody else can use it.\n\n355\n00:20:25,830 --> 00:20:28,830\nIt's ours, we've got it,\nhere it is, right?\n\n356\n00:20:28,830 --> 00:20:32,280\nNow as I copy data to it it doesn't have\nto grow, it's already got the space.\n\n357\n00:20:32,280 --> 00:20:34,620\nSo it's not as efficient, we waste space.\n\n358\n00:20:34,620 --> 00:20:37,620\nAnything that's empty is just empty and\ncan't be used.\n\n359\n00:20:37,620 --> 00:20:39,890\nBut it's better for performance.\n\n360\n00:20:39,890 --> 00:20:43,330\nSo in production environments,\nyou always wanna do the thick\n\n361\n00:20:43,330 --> 00:20:46,812\nprovisioning where you just lay it all\nout right there, at the beginning.\n\n362\n00:20:46,812 --> 00:20:50,540\nNow, one of the biggest negatives of that,\nin the old days,\n\n363\n00:20:50,540 --> 00:20:53,950\nwhen we would do that fixed provisioning,\nwhere we would just say go ahead and\n\n364\n00:20:53,950 --> 00:20:57,360\nlay it all out, and you'll see different\nterms, so thick provisioning and\n\n365\n00:20:57,360 --> 00:20:59,820\nfixed provisioning,\nthose are the two most common.\n\n366\n00:20:59,820 --> 00:21:04,490\nBut when you do that,\nit used to write a zero to every sector,\n\n367\n00:21:04,490 --> 00:21:09,420\nthroughout that entire store array\nthat you created, all right?\n\n368\n00:21:09,420 --> 00:21:12,250\nWell if you created a 1\nterabyte data store,\n\n369\n00:21:12,250 --> 00:21:14,790\nit would take a long time to\nwrite zeros to all of that.\n\n370\n00:21:14,790 --> 00:21:17,400\nIt actually could take\nhours in some cases.\n\n371\n00:21:17,400 --> 00:21:18,370\nSo that was one of the negatives.\n\n372\n00:21:18,370 --> 00:21:20,596\nSome people would thin provision\njust cuz it would be done instantly\n\n373\n00:21:20,596 --> 00:21:21,347\nif you were in a hurry.\n\n374\n00:21:21,347 --> 00:21:25,625\nWell, with a fixed provisioning side,\nif you do that,\n\n375\n00:21:25,625 --> 00:21:31,260\nwhen you go to lay it out, it actually\ngives the option to do lazy zeros.\n\n376\n00:21:31,260 --> 00:21:35,370\nLazy zeros is where it doesn't zero\nout the whole drive right then.\n\n377\n00:21:35,370 --> 00:21:38,360\nIt goes ahead and flags, says, hey,\nthis 1 terabyte of storage, this is ours.\n\n378\n00:21:38,360 --> 00:21:40,410\nWe're gonna use it and no one else can.\n\n379\n00:21:40,410 --> 00:21:42,110\nBut it doesn't write zeros to it.\n\n380\n00:21:42,110 --> 00:21:45,160\nNow, as your operating system\nstarts to write data in there,\n\n381\n00:21:45,160 --> 00:21:48,320\nthey'll just overwrite whatever\nwas there without it zeroing out.\n\n382\n00:21:48,320 --> 00:21:51,160\nOn a positive side,\nwe can provision much more quickly.\n\n383\n00:21:51,160 --> 00:21:55,020\nAnd if it's a brand new storage array,\nthen there wasn't any data there anyway,\n\n384\n00:21:55,020 --> 00:21:55,947\nso there's no negative, right?\n\n385\n00:21:57,370 --> 00:21:59,947\nOn a negative side though,\nif there was already data there,\n\n386\n00:21:59,947 --> 00:22:01,372\nwe didn't actually wipe it out.\n\n387\n00:22:01,372 --> 00:22:04,205\nAnd so\nif you fire up a new virtual machine, and\n\n388\n00:22:04,205 --> 00:22:07,476\nsomebody on that VM fires\nup like undelete software,\n\n389\n00:22:07,476 --> 00:22:12,362\nthey might be able to recover some of\nthat data that wasn't zeroed out, right?\n\n390\n00:22:12,362 --> 00:22:16,051\nNow, if you don't deal with sensitive\ndata, if you're a single company and\n\n391\n00:22:16,051 --> 00:22:19,240\nyou have your own information,\nyou don't care about that.\n\n392\n00:22:19,240 --> 00:22:21,680\nAnd the lazy zeros are fine, right?\n\n393\n00:22:21,680 --> 00:22:24,380\nBut if you deal with multiple\ncustomers and you don't wanna\n\n394\n00:22:24,380 --> 00:22:27,840\naccidentally bleed data in between them,\nthat's a terrible thing to do.\n\n395\n00:22:27,840 --> 00:22:29,571\nYou don't want to do lazy zeros, so\n\n396\n00:22:29,571 --> 00:22:32,236\nyou want it to zero out every\nsector when it creates it.\n\n397\n00:22:32,236 --> 00:22:34,386\nSo the biggest negative\nof doing the fixed or\n\n398\n00:22:34,386 --> 00:22:36,719\nthick provisioning is\nthat it just takes time.\n\n399\n00:22:36,719 --> 00:22:39,930\nIt takes time to lay out all\nof that storage in place.\n\n400\n00:22:39,930 --> 00:22:43,090\nSo keep that in mind when\nyou create these arrays.\n\n401\n00:22:43,090 --> 00:22:46,890\nWe're gonna see that same exact\nterminology not just on the data stores.\n\n402\n00:22:46,890 --> 00:22:50,210\nBut later on when we create our virtual\nhard drives for our virtual machines.\n\n403\n00:22:50,210 --> 00:22:51,100\nThey do the same thing.\n\n404\n00:22:51,100 --> 00:22:56,395\nIt's the same concept,\nthin provisioning versus fixed provision.\n\n405\n00:22:56,395 --> 00:22:59,108\nAll right,\nthe other thing to keep in mind,\n\n406\n00:22:59,108 --> 00:23:03,180\nwe generally use vCenter to manage\na lot of this stuff, all right?\n\n407\n00:23:03,180 --> 00:23:06,650\nYou could fire up the vSphere client and\n\n408\n00:23:06,650 --> 00:23:11,980\nconnect directly to an ESXi host and\nstart to add in storage, all right?\n\n409\n00:23:11,980 --> 00:23:15,400\nBut if its shared storage you really\nneed to do it in vCenter, all right?\n\n410\n00:23:15,400 --> 00:23:19,390\nBut if you do it directly on the host,\nit will see that new storage right away.\n\n411\n00:23:19,390 --> 00:23:23,350\nBut when we add it in vCenter, our host\nmay not see the storage right away.\n\n412\n00:23:23,350 --> 00:23:27,290\nOr more commonly the host sees it but\nvCenter doesn't see it right away.\n\n413\n00:23:27,290 --> 00:23:30,920\nSo as I go through and show you guys\nsome examples of adding this in,\n\n414\n00:23:30,920 --> 00:23:34,710\nyou might see me hitting\nthe Rescan button in the display.\n\n415\n00:23:34,710 --> 00:23:38,339\nAnd I'm doing that just to force vCenter\nalong to scan and detect that storage.\n\n416\n00:23:39,520 --> 00:23:41,420\nIn real life land I\nwouldn't normally bother.\n\n417\n00:23:41,420 --> 00:23:43,660\nIn real life land,\nI'm normally a very patient person.\n\n418\n00:23:43,660 --> 00:23:46,762\nBut on the show,\nI'm working against this clock over here.\n\n419\n00:23:46,762 --> 00:23:49,708\nAnd so I always wanna make sure things\nhappen at a relatively decent speed.\n\n420\n00:23:49,708 --> 00:23:51,208\nSo I'll hit that Rescan button.\n\n421\n00:23:51,208 --> 00:23:54,208\nBut there are some times in real life\nwhere you might need to do that.\n\n422\n00:23:54,208 --> 00:23:57,458\nFor example,\nlet's say you're using an iSCSI SAN.\n\n423\n00:23:57,458 --> 00:24:00,494\niSCSI communicates over your\nregular network and, as a result,\n\n424\n00:24:00,494 --> 00:24:01,710\npeople could attack it.\n\n425\n00:24:01,710 --> 00:24:05,410\nPeople could try and connect to it versus\na fiber channel network that's isolated.\n\n426\n00:24:06,450 --> 00:24:09,060\nSo on an iSCSI SAN one would\nnormally assign a user name and\n\n427\n00:24:09,060 --> 00:24:13,730\npassword to our drives that we provide\non there and we usually use CHAP,\n\n428\n00:24:13,730 --> 00:24:16,020\nthe Challenge-Handshake\nAuthentication Protocol.\n\n429\n00:24:16,020 --> 00:24:20,377\nWell if you change the username and\npassword on a iSCSI SAN for\n\n430\n00:24:20,377 --> 00:24:26,369\nthe connectivity to a LAN, well your ESXi\nboxes, they may not see that right away.\n\n431\n00:24:26,369 --> 00:24:29,329\nRight, cuz they just authenticate once and\nthen they're connected and they go and\n\n432\n00:24:29,329 --> 00:24:31,920\nthey'll for\nyears without authenticating again.\n\n433\n00:24:31,920 --> 00:24:34,960\nSo if you change it,\nyou might need to go and do a rescan so\n\n434\n00:24:34,960 --> 00:24:37,170\nit can see that this\npassword is no longer valid.\n\n435\n00:24:37,170 --> 00:24:40,650\nOr that you can at least test to make sure\nthat it's authenticated using the new one.\n\n436\n00:24:40,650 --> 00:24:44,355\nSo there are times where you'll need that\nrescan button, but I can guarantee you I'm\n\n437\n00:24:44,355 --> 00:24:47,902\ngonna use it more here in the show\nthan most people will use it ever.\n\n438\n00:24:47,902 --> 00:24:51,980\n[LAUGH] So just keep that in\nmind as we move through it.\n\n439\n00:24:51,980 --> 00:24:53,140\nThat's my full disclosure.\n\n440\n00:24:54,670 --> 00:24:55,530\nAll right.\n\n441\n00:24:55,530 --> 00:24:59,690\nSo what we're gonna do next,\nis we're gonna create a few data stores.\n\n442\n00:24:59,690 --> 00:25:03,410\nI'm gonna start out pretty simple,\njust creating some local data stores.\n\n443\n00:25:03,410 --> 00:25:07,520\nAnd then we're gonna create one that's\nstored on an iSCI SAN, I'll reach out and\n\n444\n00:25:07,520 --> 00:25:12,110\nget one of those, and then after that\nIll show you doing some NFS stores.\n\n445\n00:25:12,110 --> 00:25:13,810\nNFS are where I normally start.\n\n446\n00:25:13,810 --> 00:25:15,484\nBut I wanna follow\nthe exam objective order.\n\n447\n00:25:15,484 --> 00:25:17,340\nSo I'm gonna start with the other ones.\n\n448\n00:25:17,340 --> 00:25:19,000\nAnd we'll kind of work through those.\n\n449\n00:25:19,000 --> 00:25:22,840\nSo we'll get to see a few examples,\nand get an idea of how they work.\n\n450\n00:25:22,840 --> 00:25:25,720\nBut, looking at the clock, it's actually\na pretty decent spot to stop and\n\n451\n00:25:25,720 --> 00:25:26,260\ntake a break.\n\n452\n00:25:26,260 --> 00:25:27,530\nSo let's take a pause.\n\n453\n00:25:27,530 --> 00:25:29,960\nAnd when we get back,\nwe'll create some data stores.\n\n454\n00:25:29,960 --> 00:25:31,170\nSo stay tuned.\n\n455\n00:25:31,170 --> 00:25:32,092\nWe'll be back after this.\n\n456\n00:25:32,092 --> 00:25:40,747\n[SOUND] Welcome back everybody.\n\n457\n00:25:40,747 --> 00:25:43,834\nSo what I wanna do now is I wanna\ntake a look at our servers and\n\n458\n00:25:43,834 --> 00:25:45,603\nsee about creating a data store.\n\n459\n00:25:45,603 --> 00:25:51,890\nNow when we installed ESXI it actually\nalready created one data store for us.\n\n460\n00:25:51,890 --> 00:25:55,840\nWhat it does is it says during the install\nasks hard drive you want to install on.\n\n461\n00:25:57,020 --> 00:26:02,110\nESXI, it only takes up a little bit of\nthat hard drive, about a gig, maybe more.\n\n462\n00:26:02,110 --> 00:26:03,240\nWhat does it do with the rest?\n\n463\n00:26:03,240 --> 00:26:06,160\nWell, it goes ahead and\npartitions it out, and\n\n464\n00:26:06,160 --> 00:26:07,840\ngets it ready to store virtual machines.\n\n465\n00:26:07,840 --> 00:26:10,710\nNow you may or may not use that,\nbut that's what it does.\n\n466\n00:26:10,710 --> 00:26:12,550\nIt stores that information there.\n\n467\n00:26:12,550 --> 00:26:16,130\nAnd that data storage just calls it\ndata store one, that's all it does,\n\n468\n00:26:16,130 --> 00:26:17,750\ngives it a nice generic name.\n\n469\n00:26:17,750 --> 00:26:18,560\nAll right.\n\n470\n00:26:18,560 --> 00:26:22,200\nFrom there you can add more\nif that's what you want.\n\n471\n00:26:22,200 --> 00:26:24,310\nSo for\nexample let me go to one of my servers.\n\n472\n00:26:24,310 --> 00:26:27,691\nI'll go to host number two.\n\n473\n00:26:27,691 --> 00:26:28,990\nSo if I go to this guy.\n\n474\n00:26:28,990 --> 00:26:34,420\nWhen I go into host number two,\nhe's gonna have a data store created and\n\n475\n00:26:34,420 --> 00:26:38,000\nthat data store will be called, well,\nnormally it'll be called data store one.\n\n476\n00:26:38,000 --> 00:26:39,740\nNow I've gone and renamed it.\n\n477\n00:26:39,740 --> 00:26:41,480\nThis is a habit I have.\n\n478\n00:26:41,480 --> 00:26:45,000\nIf you just leave it the way that it is,\nas you add more and more servers,\n\n479\n00:26:45,000 --> 00:26:47,940\nthey all have a data store\ncalled data store one.\n\n480\n00:26:47,940 --> 00:26:50,510\nAnd it gets really annoying\nbecause when you go back to your,\n\n481\n00:26:50,510 --> 00:26:51,470\nlet me go back to my home page.\n\n482\n00:26:51,470 --> 00:26:53,490\nI'll show you guys why I rename it.\n\n483\n00:26:53,490 --> 00:26:58,230\nWhen you go into V center, you've got this\nscreen right here, where you can view\n\n484\n00:26:58,230 --> 00:27:03,660\nall of the data stores across all of\nyour hosts in one nice neat place.\n\n485\n00:27:03,660 --> 00:27:06,167\nIf you've never renamed the data stores,\n\n486\n00:27:06,167 --> 00:27:11,470\nyou're gonna see a bunch of stuff like\nthis: data store 1(1), data store 1(3).\n\n487\n00:27:11,470 --> 00:27:14,030\nThat means this was not the third but\n\n488\n00:27:14,030 --> 00:27:18,780\nactually the fourth data store that was\nadded that was just called DataStore1.\n\n489\n00:27:18,780 --> 00:27:21,060\nSo if you've never renamed\nthese data stores,\n\n490\n00:27:21,060 --> 00:27:25,540\nyou'll just see a bunch of DataStore1's\nall with parenthesis numbers beside them.\n\n491\n00:27:25,540 --> 00:27:27,430\nBecause of the duplicate names.\n\n492\n00:27:27,430 --> 00:27:29,050\nSo you can see what I do.\n\n493\n00:27:29,050 --> 00:27:33,720\nI normally come in and rename them so\nthat they don't have duplicate names.\n\n494\n00:27:33,720 --> 00:27:35,530\nI usually just stick\nthe server name before it.\n\n495\n00:27:35,530 --> 00:27:38,590\nSo here I've got ESXserver2-datastore1.\n\n496\n00:27:38,590 --> 00:27:42,020\nYou can easily rename these data\nstores after they've been created.\n\n497\n00:27:42,020 --> 00:27:45,380\nYou just right click on them and it's\nright there in the menu to rename them.\n\n498\n00:27:45,380 --> 00:27:47,530\nSo I make it a habit of that.\n\n499\n00:27:47,530 --> 00:27:53,457\nSo when I go to server two,\nit's got a data store called datastore1,\n\n500\n00:27:53,457 --> 00:27:58,190\nbut I've renamed it to\nESX-server2-datastore1.\n\n501\n00:27:58,190 --> 00:28:01,490\nSo let me just get into that server and\nwe'll see that.\n\n502\n00:28:01,490 --> 00:28:02,740\nWhen I go into the server,\n\n503\n00:28:02,740 --> 00:28:04,990\nthat's what I'm expecting to\nsee is this single data store.\n\n504\n00:28:06,050 --> 00:28:09,600\nWhen we go to the server,\nso here's ESX-server2.\n\n505\n00:28:09,600 --> 00:28:13,120\nAnd I can go to manage and storage, and\n\n506\n00:28:13,120 --> 00:28:16,960\nthere's where I'm going to start seeing\nstorage information about this system.\n\n507\n00:28:16,960 --> 00:28:21,040\nNow by default what I'm going\nto see is internal storage.\n\n508\n00:28:21,040 --> 00:28:25,247\nThis one has a serial ATA IDE controller,\nand\n\n509\n00:28:25,247 --> 00:28:30,353\nhere's another four port\nserial ATA IDE controller.\n\n510\n00:28:30,353 --> 00:28:34,900\nAnd so, I'm seeing the local drive\ncontrollers on that particular system.\n\n511\n00:28:36,020 --> 00:28:40,120\nSo, there they are and\nthe various devices that are a part of it.\n\n512\n00:28:40,120 --> 00:28:45,790\nSo, these are internal storage adapters\nthat ESXI has already detected.\n\n513\n00:28:45,790 --> 00:28:48,560\nWhen it comes to hardware adapters,\nit's gonna find them.\n\n514\n00:28:48,560 --> 00:28:51,370\nYou should see your\nfiber HBAs in this list,\n\n515\n00:28:51,370 --> 00:28:55,240\nas well as any traditional Serial ATA or\nSCSI HBAs.\n\n516\n00:28:55,240 --> 00:28:56,770\nThey should show up in this list.\n\n517\n00:28:56,770 --> 00:29:00,230\nThe only thing that won't show up,\nis a software iSCSI.\n\n518\n00:29:00,230 --> 00:29:01,579\nBecause it's software, right?\n\n519\n00:29:01,579 --> 00:29:02,450\nIt's not hardware.\n\n520\n00:29:02,450 --> 00:29:05,010\nIf you have a hardware iSCSI card,\nit will show up here.\n\n521\n00:29:05,010 --> 00:29:08,798\nSo you should already see your\ndrive controller in here and\n\n522\n00:29:08,798 --> 00:29:13,835\nhere we're starting to see that\nnaming convention, vmhba33, vmhba1.\n\n523\n00:29:13,835 --> 00:29:19,560\nIt's assigning numbers to\nthese to keep track of them.\n\n524\n00:29:19,560 --> 00:29:25,410\nWhen we start to setup for storage,\nwe need to put our information somewhere,\n\n525\n00:29:25,410 --> 00:29:29,020\nso it's going to go into some of these\ndevices right here to fill them up.\n\n526\n00:29:29,020 --> 00:29:31,890\nNow let me go back to my\ndatastores screen, so I'm just\n\n527\n00:29:31,890 --> 00:29:37,060\ngonna jump back out here to vCenter and\ngo down to Datastores, all right?\n\n528\n00:29:37,060 --> 00:29:38,132\nNow server2,\n\n529\n00:29:38,132 --> 00:29:43,915\nif I look over here I've only got one\nsystem called esx-server2-datastore1.\n\n530\n00:29:43,915 --> 00:29:46,000\nSo it's only got one data store.\n\n531\n00:29:46,000 --> 00:29:48,650\nI know for a fact,\nthat system has a second hard drive.\n\n532\n00:29:48,650 --> 00:29:50,140\nI just saw it in that adapter list.\n\n533\n00:29:50,140 --> 00:29:54,190\nI know it's got two hard drives in it,\nbut I'm not using that second one.\n\n534\n00:29:54,190 --> 00:29:56,489\nSo if I wanna partition\nout that hard drive and\n\n535\n00:29:56,489 --> 00:30:00,680\nuse it to store virtual machines,\nI need to create a data store there.\n\n536\n00:30:00,680 --> 00:30:02,130\nAll I need to do is go up here and\n\n537\n00:30:02,130 --> 00:30:06,020\nhit the add datastore button or\ncreate a new data store.\n\n538\n00:30:06,020 --> 00:30:06,640\nSo I'll hit that.\n\n539\n00:30:06,640 --> 00:30:10,150\nAnd it's gonna ask what\nlocation am I working in, well,\n\n540\n00:30:10,150 --> 00:30:13,550\nserver two is right here under\nGainesville, so I'm gonna pick server two.\n\n541\n00:30:15,070 --> 00:30:18,150\nAnd, on the next screen it's\ngonna ask what type I'm creating.\n\n542\n00:30:18,150 --> 00:30:23,690\nHere I'm picking between VMFS,\nwhich is storage where I'll put my VMs,\n\n543\n00:30:23,690 --> 00:30:27,640\nor NFS, NFS usually just being for\nISO shares.\n\n544\n00:30:27,640 --> 00:30:31,740\nSo I will go ahead and\nchoose VMFS and hit next, and\n\n545\n00:30:31,740 --> 00:30:34,780\nnow I need to pick a device what it's\ngoing to do is it's going to query\n\n546\n00:30:34,780 --> 00:30:39,850\nserver two and it's going to give me\na list of drives that are not in use.\n\n547\n00:30:39,850 --> 00:30:42,420\nNow I might have some\ndrives that are in use and\n\n548\n00:30:42,420 --> 00:30:43,560\nthose aren't going to show up here.\n\n549\n00:30:43,560 --> 00:30:45,320\nSo I got two hard drives in this system.\n\n550\n00:30:46,460 --> 00:30:48,480\nOne has ESXi installed directly on it,\n\n551\n00:30:48,480 --> 00:30:51,700\nthat's where data store one is,\nthat doesn't show up on the list.\n\n552\n00:30:51,700 --> 00:30:55,940\nI just see this second hard drive\nthat's not in use, it's 150 gig drive,\n\n553\n00:30:55,940 --> 00:30:58,230\njust sitting there doing nothing.\n\n554\n00:30:58,230 --> 00:31:02,665\nWell, I'm gonna choose that and\nI'm gonna give it a name of\n\n555\n00:31:02,665 --> 00:31:07,645\nESX-server2-datastore2, I've\nalready got datastore1.\n\n556\n00:31:07,645 --> 00:31:10,916\nThis will be datastore2.\n\n557\n00:31:10,916 --> 00:31:16,388\nOn the next screen it's going to ask if\nI want to format that as VMS three or\n\n558\n00:31:16,388 --> 00:31:17,214\nVMS five.\n\n559\n00:31:17,214 --> 00:31:20,435\nI talked a little bit about\nthis in an earlier episode, but\n\n560\n00:31:20,435 --> 00:31:23,355\nthere are some differences\nbetween the two.\n\n561\n00:31:23,355 --> 00:31:29,715\nThe primary difference is this\nguy right here, 2+TB LUN.\n\n562\n00:31:29,715 --> 00:31:35,493\nIf I want to have a data store over two\nterabytes in size, I really need VMSF-5.\n\n563\n00:31:35,493 --> 00:31:39,390\nIt gave us that ability to\nget past that limitation.\n\n564\n00:31:39,390 --> 00:31:42,320\nIf go VMFS 3,\nwe have increased compatibility with\n\n565\n00:31:42,320 --> 00:31:45,350\nother versions of VM ware,\nlike older versions of V Sphere.\n\n566\n00:31:45,350 --> 00:31:48,710\nBut we can't create data\nscores over two terabytes.\n\n567\n00:31:48,710 --> 00:31:51,375\nSo we have to be careful\nwith which one we choose.\n\n568\n00:31:51,375 --> 00:31:55,404\nNow, if you choose five,\nyou're at five, that's it But\n\n569\n00:31:55,404 --> 00:32:00,440\nif you choose 3, you can always upgrade\nto 5 if you want at a later time.\n\n570\n00:32:00,440 --> 00:32:04,300\nIt's really easy, I'll show you as soon as\nthis wizard is done, to do the upgrade.\n\n571\n00:32:05,412 --> 00:32:09,420\nAll right, so I'm going to stick with\nVMFS 5 on this one, and I'll hit next.\n\n572\n00:32:09,420 --> 00:32:12,150\nAnd now it asks how I\nwant to partition it.\n\n573\n00:32:12,150 --> 00:32:16,930\nDo I want to use the entire drive for\ndatastore 2, or do I just want to use\n\n574\n00:32:16,930 --> 00:32:21,090\na portion of it so that I can use the\nother parts of the drive for other things.\n\n575\n00:32:21,090 --> 00:32:21,679\nIt's up to me.\n\n576\n00:32:21,679 --> 00:32:23,260\nRight?\nI'm going to go ahead and\n\n577\n00:32:23,260 --> 00:32:24,680\njust say use the whole thing.\n\n578\n00:32:26,680 --> 00:32:27,370\nAll right?\n\n579\n00:32:27,370 --> 00:32:28,040\nAnd that's it.\n\n580\n00:32:28,040 --> 00:32:30,730\nIt's gonna finish and\ncreate that data store.\n\n581\n00:32:30,730 --> 00:32:35,830\nAnd now after a moment I'll\nhave an ESX-Server2-DataStore2.\n\n582\n00:32:35,830 --> 00:32:38,640\nAnd later on when we create\nour virtual machines\n\n583\n00:32:38,640 --> 00:32:41,020\nit's gonna ask us where we\nwant to put our drives.\n\n584\n00:32:41,020 --> 00:32:43,730\nI'll have that data store available\nto put the virtual machine in.\n\n585\n00:32:47,050 --> 00:32:50,950\nWhen I look in my list of\ndata stores here, all right?\n\n586\n00:32:50,950 --> 00:32:53,900\nHere's the ESX server 2,\ndata store 1, and data store 2.\n\n587\n00:32:53,900 --> 00:32:54,930\nSo they're there.\n\n588\n00:32:54,930 --> 00:33:02,393\nAnd I can see their VMFS5, but I've got\none down here on server 4, which is VMFS3.\n\n589\n00:33:02,393 --> 00:33:05,205\nAnd you'll see where I've named it so\nI could remember what I did.\n\n590\n00:33:05,205 --> 00:33:09,266\nI called it ESX Server\n4 Data Store 2-Legacy.\n\n591\n00:33:09,266 --> 00:33:11,862\nThis is one that's VMFS 3.\n\n592\n00:33:11,862 --> 00:33:14,362\nTo convert it is pretty straight forward.\n\n593\n00:33:14,362 --> 00:33:18,252\nYou just right click on it and\nyou'll actually see the option in here.\n\n594\n00:33:18,252 --> 00:33:19,792\nAnd let's see,\nit's buried in here somewhere.\n\n595\n00:33:19,792 --> 00:33:24,412\nIf I go to all these center actions and\nupgrade to VMFS five, it's right there.\n\n596\n00:33:25,440 --> 00:33:27,140\nSo we can choose to upgrade it,\n\n597\n00:33:27,140 --> 00:33:32,840\nnow the upgrade process it does do a lot\nof thrashing on the hard drive and\n\n598\n00:33:32,840 --> 00:33:35,790\nso it affects performance, and\nyou typically wanna do this at\n\n599\n00:33:35,790 --> 00:33:39,580\na time when you can shut the VMs\ndown that are running on that host.\n\n600\n00:33:39,580 --> 00:33:42,320\nThat way it gets done as fast as possible.\n\n601\n00:33:42,320 --> 00:33:45,060\nBut if you're in a zero downtime\nenvironment that might not be something\n\n602\n00:33:45,060 --> 00:33:45,970\nthat you can do.\n\n603\n00:33:45,970 --> 00:33:48,890\nSo it does require a little bit of\nplanning to make sure your system\n\n604\n00:33:48,890 --> 00:33:49,980\nis unaffected.\n\n605\n00:33:49,980 --> 00:33:52,000\nBut otherwise the process\nis really straightforward.\n\n606\n00:33:52,000 --> 00:33:54,010\nYou just check off what\nyou want to update.\n\n607\n00:33:54,010 --> 00:33:58,130\nAnd you hit Ok, and it's gonna run\nthrough and do it, and that's about it.\n\n608\n00:33:58,130 --> 00:34:00,660\nIt's one of the least exciting\nthings that I can show you.\n\n609\n00:34:00,660 --> 00:34:04,160\nNow it still says VMFS3 here\ncuz it takes a little while.\n\n610\n00:34:04,160 --> 00:34:06,470\nAnd I can see my status right here.\n\n611\n00:34:06,470 --> 00:34:07,290\nIt's gotta go through.\n\n612\n00:34:07,290 --> 00:34:12,210\nAnd what it does is it moves data around\nand kind of reformats and moves data back,\n\n613\n00:34:12,210 --> 00:34:16,240\nand kind of runs through that process\nto get things rearranged and updated.\n\n614\n00:34:16,240 --> 00:34:19,730\nNow my data store was completely empty,\nand so it's gonna happen pretty quick.\n\n615\n00:34:19,730 --> 00:34:22,300\nIn real life land,\nthat might take a while.\n\n616\n00:34:22,300 --> 00:34:26,240\nBut now I can see it's running VMFS 5,\nand I'm in business.\n\n617\n00:34:26,240 --> 00:34:28,330\nReady to rock, and off we go.\n\n618\n00:34:28,330 --> 00:34:30,730\nJust remember that performance will\nbe effected while that's running.\n\n619\n00:34:30,730 --> 00:34:33,392\nWe'll slow the system down\nwhile it handles that.\n\n620\n00:34:33,392 --> 00:34:36,650\nAll right.\n\n621\n00:34:36,650 --> 00:34:40,010\nSo creating a local data\nstore is no big deal.\n\n622\n00:34:40,010 --> 00:34:44,251\nIf you've got local SCSI drive,\nSerial ATA, Serial Attached SCSI, or\n\n623\n00:34:44,251 --> 00:34:46,893\nDirect Attached SCSI, all of those things,\n\n624\n00:34:46,893 --> 00:34:51,014\nthey just show up right there as\nuseable drives, and we connect them.\n\n625\n00:34:51,014 --> 00:34:52,150\nAnd that's it, right?\n\n626\n00:34:52,150 --> 00:34:54,250\nYou create the data store and\nstick it on there.\n\n627\n00:34:54,250 --> 00:34:59,100\nIf you have a fiber channel SAN,\nwell your fiber channel HBA needs to\n\n628\n00:34:59,100 --> 00:35:03,450\nshow up first and then you're able to\nconnect to see the drives and mount to it.\n\n629\n00:35:03,450 --> 00:35:05,300\nNow a word of caution there.\n\n630\n00:35:05,300 --> 00:35:07,920\nWith fiber channel SANs, almost\n\n631\n00:35:07,920 --> 00:35:12,760\neveryone who deploys the store jerry\nnetwork does some sort of LUN masking.\n\n632\n00:35:12,760 --> 00:35:13,510\nAll right?\n\n633\n00:35:13,510 --> 00:35:16,310\nLUN masking is where on the SAN,\n\n634\n00:35:16,310 --> 00:35:19,440\nthey can restrict what drives\nyour server is able to see.\n\n635\n00:35:20,550 --> 00:35:24,460\nRemember that SAN will be storing hard\ndrives for a ton of servers, right?\n\n636\n00:35:24,460 --> 00:35:27,660\nYou wouldn't want somebody to be\nable to hack into one server and\n\n637\n00:35:27,660 --> 00:35:31,440\nthen be able to get at the storage for\nanother server by passing through the SAN.\n\n638\n00:35:31,440 --> 00:35:33,290\nThat would be bad news.\n\n639\n00:35:33,290 --> 00:35:36,450\nSo they use one masking to make it where\nyou only see the ones you need to see.\n\n640\n00:35:36,450 --> 00:35:41,470\nAnd it's typically tied to\neither the Mac address of your\n\n641\n00:35:41,470 --> 00:35:44,500\nHBA or what's called a worldwide name.\n\n642\n00:35:44,500 --> 00:35:46,970\nA worldwide name is an identifier\nthat can be attached to those HBAs.\n\n643\n00:35:46,970 --> 00:35:50,240\nThis is all done on the SAN side,\nnot done in VMware.\n\n644\n00:35:50,240 --> 00:35:54,990\nSo be aware that when you connect up\nto a fiber channel sand, you might not\n\n645\n00:35:54,990 --> 00:35:59,160\nsee your lungs at all, they might not show\nup and it might not be VMware's problem,\n\n646\n00:35:59,160 --> 00:36:02,280\nor V Sphere's problem,\nit might be on the sand side, you see?\n\n647\n00:36:02,280 --> 00:36:05,613\nYou might need to get with your\nsand administrator and say, hey,\n\n648\n00:36:05,613 --> 00:36:09,309\nare you showing me all the lines,\ndo you have the right world wide name for\n\n649\n00:36:09,309 --> 00:36:12,842\nmy system or what is it that you're\nusing to identify me to make sure.\n\n650\n00:36:12,842 --> 00:36:15,997\nVerifying the HBA shows up is the easiest\npart because there we just go to\n\n651\n00:36:15,997 --> 00:36:16,845\nthe host, right?\n\n652\n00:36:16,845 --> 00:36:20,387\nWe go to whichever host it is\nthat is containing that and\n\n653\n00:36:20,387 --> 00:36:25,239\nwe go into the storage adapters and\nwe see if it's there, hopefully it is.\n\n654\n00:36:26,610 --> 00:36:31,190\nSo, if I go down here to my hosts and\nI'll take server number 3 this time.\n\n655\n00:36:32,540 --> 00:36:36,840\nIf I take server number 3 and,\nI go to Storage and Storage Adapters.\n\n656\n00:36:36,840 --> 00:36:41,150\nAssuming that the fiber channel HBA\nthat I've chosen is on the VMWare's\n\n657\n00:36:41,150 --> 00:36:42,600\ncompatibility list.\n\n658\n00:36:42,600 --> 00:36:46,120\nI'll see it right in here, it'll show\nup as a fiber channel controller.\n\n659\n00:36:47,220 --> 00:36:53,340\nIf I don't see it here, then it's either\nmalfunctioning or not on vmware's list.\n\n660\n00:36:53,340 --> 00:36:55,810\nThe only time we should ever\nhave to come in here and\n\n661\n00:36:55,810 --> 00:37:00,210\nadd something,\nis when it's a software iSCSI connector.\n\n662\n00:37:00,210 --> 00:37:03,080\nBecause it's software,\nthey don't actually exist, so\n\n663\n00:37:03,080 --> 00:37:06,322\nif we're going to connect to an iSCSI\nSAN we would need to add that to it.\n\n664\n00:37:06,322 --> 00:37:07,710\nAll right?\n\n665\n00:37:07,710 --> 00:37:12,828\nAs of right now, server three,\nserver 3 has two hard drives in it also.\n\n666\n00:37:12,828 --> 00:37:18,290\nAnd I wanna say that I created\ntwo data stores on it already.\n\n667\n00:37:18,290 --> 00:37:23,220\nBut if I wanna connect it to an iSCSI\nSAN to add even more storage,\n\n668\n00:37:23,220 --> 00:37:24,760\nI can do it right through here.\n\n669\n00:37:24,760 --> 00:37:27,970\nNow iSCSI SAN It's not\nthe easiest thing to set up.\n\n670\n00:37:27,970 --> 00:37:30,870\nWe have to jump through a few\nhoops to get them in place.\n\n671\n00:37:30,870 --> 00:37:32,560\nLet me show you that process.\n\n672\n00:37:32,560 --> 00:37:33,270\nAll right?\n\n673\n00:37:33,270 --> 00:37:37,790\nFirst, we have to tell it that\nwe're gonna be using iSCSI.\n\n674\n00:37:37,790 --> 00:37:40,890\nLooking at the adapters here,\niSCSI doesn't even show up.\n\n675\n00:37:40,890 --> 00:37:41,560\nOkay.\n\n676\n00:37:41,560 --> 00:37:44,405\nYou need to hit the add button,\nto add in a new adapter.\n\n677\n00:37:45,710 --> 00:37:48,280\nAnd notice on mine, I've got iSCSI and\n\n678\n00:37:48,280 --> 00:37:52,240\nsoftware fiber channel over ethernet,\nright?\n\n679\n00:37:52,240 --> 00:37:55,530\nNow that one's grayed out on me, because\nI, I don't have any HBAs anyway, so\n\n680\n00:37:55,530 --> 00:37:58,940\nits not gonna handle that translation,\nbut iSCSI is right there, so\n\n681\n00:37:58,940 --> 00:37:59,980\nI'm gonna choose to add that.\n\n682\n00:38:01,150 --> 00:38:01,730\nAll right?\n\n683\n00:38:01,730 --> 00:38:04,010\nSo its just warning me that its\ngonna be adding that to the server?\n\n684\n00:38:04,010 --> 00:38:04,750\nAnd I'll say okay.\n\n685\n00:38:04,750 --> 00:38:07,890\nAnd it'll add it to the list.\n\n686\n00:38:07,890 --> 00:38:08,552\nAll right?\n\n687\n00:38:08,552 --> 00:38:12,560\nNow iSCSI works by punching in\nthe IP address of a target so\n\n688\n00:38:12,560 --> 00:38:15,470\nyou have to have and iSCSI SAN sum\nwhere that you are targeting and\n\n689\n00:38:15,470 --> 00:38:19,890\nonce that's done then its got to parse the\nlist of drives that are attached to it.\n\n690\n00:38:19,890 --> 00:38:25,220\nSo now that I added it if I scroll down\nthere is my iSCSI software adapter,\n\n691\n00:38:25,220 --> 00:38:27,860\nit's online and it's ready to go.\n\n692\n00:38:27,860 --> 00:38:29,050\nOkay.\n\n693\n00:38:29,050 --> 00:38:31,540\nI could from there go in and add a target.\n\n694\n00:38:33,880 --> 00:38:37,110\nAnd right here the bottom of the screen\nI've got targets and I'll add one in.\n\n695\n00:38:37,110 --> 00:38:41,125\nAnd I'm gonna punch in\na server by it's IP address,\n\n696\n00:38:41,125 --> 00:38:46,000\nISCI uses port 3260 by default and\nyou know you might have\n\n697\n00:38:46,000 --> 00:38:49,190\nconfigured authentication settings so\nyou might have to come in and\n\n698\n00:38:49,190 --> 00:38:53,450\ntell it you're using CHAP and provide\na user name and password if that's set up.\n\n699\n00:38:53,450 --> 00:38:56,818\nOn mine I didn't set that so you may have\nsome additional options to put in there.\n\n700\n00:38:56,818 --> 00:39:02,000\nBut I'm gonna say connect to this box and\nit's going to reach out to it, now\n\n701\n00:39:02,000 --> 00:39:05,550\nthis is one of those times where I'll have\nto use a re-scan see how it's warning me.\n\n702\n00:39:05,550 --> 00:39:07,440\nDue to recent configuration changes,\n\n703\n00:39:07,440 --> 00:39:09,720\na rescan of this storage\nadapter is recommended.\n\n704\n00:39:10,740 --> 00:39:16,950\nWith a hardware host bus adapter,\nany changes, it's gonna see those, right?\n\n705\n00:39:16,950 --> 00:39:18,910\nIt can detect a state change.\n\n706\n00:39:18,910 --> 00:39:22,730\nBut with something software, like ISCSI,\nit can't tell if there's a state change.\n\n707\n00:39:22,730 --> 00:39:24,550\nSo, that's why it's making me rescan.\n\n708\n00:39:24,550 --> 00:39:27,200\nThat's the rescan button I mentioned\nin the beginning of the show.\n\n709\n00:39:27,200 --> 00:39:28,470\nYou'll see it right here.\n\n710\n00:39:28,470 --> 00:39:31,750\nIt's these little disks with\nthe circle arrow on it.\n\n711\n00:39:31,750 --> 00:39:36,583\nSo I'll just hit that to do a rescan and\nI'm going to let it rescan my system.\n\n712\n00:39:36,583 --> 00:39:37,500\nSo we'll just give it a moment.\n\n713\n00:39:37,500 --> 00:39:42,286\nNow while I'm waiting on that,\nwhen it comes to iSCSI SAN,\n\n714\n00:39:42,286 --> 00:39:48,129\nit's always a best practice to have\na dedicated network adapter just for\n\n715\n00:39:48,129 --> 00:39:49,875\nyour iSCSI traffic.\n\n716\n00:39:49,875 --> 00:39:50,583\nAll right?\n\n717\n00:39:50,583 --> 00:39:54,810\nSo, a best practice would be\nto go to add another v-switch.\n\n718\n00:39:54,810 --> 00:39:56,667\nAdd a dedicated v-switch.\n\n719\n00:39:56,667 --> 00:40:00,240\nAttach a dedicated physical\nadapter to that v-switch.\n\n720\n00:40:00,240 --> 00:40:05,850\nAnd attach a VMkernel port group to it,\nthat just handles iSCSI traffic.\n\n721\n00:40:05,850 --> 00:40:08,120\nAnd put your IP address in there and\n\n722\n00:40:08,120 --> 00:40:12,740\nassign it to that interface just for\niSCSI.\n\n723\n00:40:12,740 --> 00:40:15,970\nOnce you've done that, once you've\ncreated that dedicated v-switch,\n\n724\n00:40:15,970 --> 00:40:19,950\nyou can come down here and\nyou've got Network Port Binding.\n\n725\n00:40:19,950 --> 00:40:24,940\nThat's where you can define what\nnetwork port iSCSI is going to use.\n\n726\n00:40:24,940 --> 00:40:25,880\nSee how right now, it says,\n\n727\n00:40:25,880 --> 00:40:30,810\nno VMkernel network adapters are bound\nto this iSCSI host bus adapter.\n\n728\n00:40:30,810 --> 00:40:34,693\nIt's not actually tied to any particular\nadapter and when you do that,\n\n729\n00:40:34,693 --> 00:40:38,200\nit's kind of a crap shoot of\nwhat's going to happen, you know?\n\n730\n00:40:38,200 --> 00:40:40,818\nWhether or not it's going to be able\nto reach out and get to that host,\n\n731\n00:40:40,818 --> 00:40:42,142\nwhether things are going to work.\n\n732\n00:40:42,142 --> 00:40:43,688\nAnd so what you'll find is that,\n\n733\n00:40:43,688 --> 00:40:47,611\nalthough you've defined the target, you\nmight go to devices and not see anything,\n\n734\n00:40:47,611 --> 00:40:51,130\nwhich actually,\nI'm not seeing anything right now.\n\n735\n00:40:51,130 --> 00:40:55,960\nI'm gonna go to my Network Port Binding\nand I'm gonna attach one now.\n\n736\n00:40:55,960 --> 00:40:59,180\nI'm just gonna go ahead and\nuse my regular Management Interface.\n\n737\n00:41:00,320 --> 00:41:03,060\nIn a lab or practice environment,\nthat's fine.\n\n738\n00:41:03,060 --> 00:41:06,340\nBut like I said, in real life\nyou'd wanna use a dedicated NIC.\n\n739\n00:41:06,340 --> 00:41:09,660\nI actually do have a dedicated gigabyte\nNIC here, but it's plugged into\n\n740\n00:41:09,660 --> 00:41:12,930\na different network than the iSCSI SANs,\nso it won't be able to get there.\n\n741\n00:41:12,930 --> 00:41:14,800\nThat's the only reason\nwhy I'm not using it.\n\n742\n00:41:14,800 --> 00:41:18,750\nBut I'll go ahead and choose this one.\n\n743\n00:41:18,750 --> 00:41:24,270\nNow that that's bound it has\nan adapter tied to the iSCSI target and\n\n744\n00:41:24,270 --> 00:41:25,480\nit's ready to rock.\n\n745\n00:41:25,480 --> 00:41:28,070\nOkay, but I need to do a re-scan.\n\n746\n00:41:28,070 --> 00:41:30,810\nI'm gonna come up here and\njust hit that re-scan button and\n\n747\n00:41:30,810 --> 00:41:33,308\nwe'll give it another shot here.\n\n748\n00:41:33,308 --> 00:41:37,070\nNow iSCSI SANs are not the fastest\nthings on the planet, and so\n\n749\n00:41:37,070 --> 00:41:41,230\nsometimes even after a re-scan\nthe drives might not show up.\n\n750\n00:41:41,230 --> 00:41:44,400\nI have seen that, so\nsometimes you just have to be patient.\n\n751\n00:41:44,400 --> 00:41:46,400\nSo let's see if I have any\ndevices showing up now.\n\n752\n00:41:47,740 --> 00:41:49,680\nNo, still no devices.\n\n753\n00:41:49,680 --> 00:41:52,980\nIf this happens, there's two\nthings that I normally do here.\n\n754\n00:41:52,980 --> 00:41:57,200\nOne is I wait impatiently clicking\nre-scan over and over again.\n\n755\n00:41:57,200 --> 00:42:01,450\nOr two, I go to the main data storage\nscreen and I do the scan from there.\n\n756\n00:42:01,450 --> 00:42:03,670\nThere's a few different\nways to go about it.\n\n757\n00:42:03,670 --> 00:42:06,560\nI don't know that scanning from\nthe other place makes a difference.\n\n758\n00:42:06,560 --> 00:42:09,330\nAnd probably reality is,\nthe amount of time it takes me to get to\n\n759\n00:42:09,330 --> 00:42:13,840\nthe other screen It's probably how long it\ntakes to stall until this update happens.\n\n760\n00:42:13,840 --> 00:42:16,090\nSo that's probably what's going on.\n\n761\n00:42:16,090 --> 00:42:19,330\nJust because I'm impatient,\nI'll just jump to a different server.\n\n762\n00:42:19,330 --> 00:42:24,490\nSo here's ESX Server 4, and\non this one, if I scroll down,\n\n763\n00:42:24,490 --> 00:42:27,510\nI can see I've got an iSCSI\nsoftware adapter and\n\n764\n00:42:27,510 --> 00:42:32,360\nsee how it's got a target defined, that\nsame host that I pointed out a moment ago.\n\n765\n00:42:32,360 --> 00:42:36,220\nAnd under devices it's already seeing\nthat one, it's seeing that iSCSI disk.\n\n766\n00:42:36,220 --> 00:42:39,000\nNow I actually do have\na hardware iSCSI SANs\n\n767\n00:42:39,000 --> 00:42:40,510\nsitting over there that\nI was going to use for\n\n768\n00:42:40,510 --> 00:42:44,200\nthe show and I had a drive die this\nmorning, it doesn't seem to be too happy.\n\n769\n00:42:44,200 --> 00:42:47,149\nI whipped up just a quick\nMicrosoft iSCSI target, so\n\n770\n00:42:47,149 --> 00:42:49,435\nit's a Microsoft like storage server.\n\n771\n00:42:49,435 --> 00:42:53,248\nIt's up and it's running and\nit's getting me a 1 terabyte disk, so\n\n772\n00:42:53,248 --> 00:42:57,970\nI've got a terabyte of, or actually,\nno, that's only a gigabyte, isn't it?\n\n773\n00:42:57,970 --> 00:43:01,640\nThat is a small, small disk,\nif I could read my numbers.\n\n774\n00:43:01,640 --> 00:43:03,890\nSo [LAUGH] it's actually\nnot a very big disk at all.\n\n775\n00:43:03,890 --> 00:43:07,370\nBut it's giving me access to this\ndisk that's out there on the network.\n\n776\n00:43:07,370 --> 00:43:12,025\nI can now create a data store and\nput the data store right there on that\n\n777\n00:43:12,025 --> 00:43:15,990\niSCSI disk and now I'll have a network\nresource where I can store information.\n\n778\n00:43:17,740 --> 00:43:18,810\nSo let me do that.\n\n779\n00:43:18,810 --> 00:43:24,229\nLet me go ahead and go back to my home\nscreen and I'll go back to my data stores.\n\n780\n00:43:27,968 --> 00:43:29,380\nAnd now I'll add in a new one.\n\n781\n00:43:29,380 --> 00:43:33,535\nNow if this were a fiber channel\n\n782\n00:43:33,535 --> 00:43:35,450\nSANs I wouldn't have had to\nhave done all that other stuff.\n\n783\n00:43:35,450 --> 00:43:38,270\nThe drives would have automatically\nbeen detected because it's basically\n\n784\n00:43:38,270 --> 00:43:39,530\na physical attachment.\n\n785\n00:43:39,530 --> 00:43:43,010\nBut with iSCSI, we have to do all the\nextra cuz it's a logical attachment over\n\n786\n00:43:43,010 --> 00:43:43,560\nyour normal network.\n\n787\n00:43:45,430 --> 00:43:48,060\nI'm gonna go in here,\nand that was Server 4.\n\n788\n00:43:48,060 --> 00:43:52,840\nI'm gonna create a new data\nstore here on Server 4.\n\n789\n00:43:52,840 --> 00:43:54,250\nIt's gonna be a VMFS store.\n\n790\n00:43:55,710 --> 00:43:59,370\nAnd there's that Microsoft iSCSI disk,\nso I'll choose that one.\n\n791\n00:43:59,370 --> 00:44:05,800\nAnd I'm gonna call this one, let's see,\nthis'll be esx-server4-datastore3.\n\n792\n00:44:05,800 --> 00:44:08,212\nI don't really know what number I'm up to\nright now so I'll just choose that one.\n\n793\n00:44:10,270 --> 00:44:12,715\nI will go ahead and choose the new VMFS 5.\n\n794\n00:44:14,890 --> 00:44:17,300\nIt's gonna partition out the whole\nthing and, oh, is it to small?\n\n795\n00:44:18,830 --> 00:44:23,880\nVMFS, it has its own little overhead and\nsince this disk is only 1 gig in size,\n\n796\n00:44:23,880 --> 00:44:26,880\nit might not be enough I\nthink is gonna complain.\n\n797\n00:44:26,880 --> 00:44:28,550\nOh yeah, it's not big enough.\n\n798\n00:44:28,550 --> 00:44:30,610\nAll right,\nI'll have to add a bigger storage array.\n\n799\n00:44:30,610 --> 00:44:32,680\nBut it'll be able to build it up.\n\n800\n00:44:32,680 --> 00:44:35,380\nThe point here though is that it\njust shows up like a regular disk.\n\n801\n00:44:35,380 --> 00:44:37,580\nRight?\nSo it shows up as a regular disk.\n\n802\n00:44:37,580 --> 00:44:40,220\nI can partition that out and\nI'm in business.\n\n803\n00:44:40,220 --> 00:44:42,170\nWell, the other advantage, though.\n\n804\n00:44:42,170 --> 00:44:44,290\nIt shows up like a regular disk, but\n\n805\n00:44:44,290 --> 00:44:49,760\nbecause it's on the network,\nmore than one EXI host can connect to it.\n\n806\n00:44:49,760 --> 00:44:53,330\nAnd that's really important if we\nwant to do things like v-motion.\n\n807\n00:44:53,330 --> 00:44:55,110\nIf we want to do fail over.\n\n808\n00:44:55,110 --> 00:44:58,260\nHave a VM jump from one\nphysical host to another.\n\n809\n00:44:58,260 --> 00:45:00,520\nThat can only happen if\nyou have shared storage.\n\n810\n00:45:00,520 --> 00:45:05,100\nAnd that won't work with regular SADA and\nSCSI directed attached storage.\n\n811\n00:45:05,100 --> 00:45:08,015\nIt'll only work with\nfiber channel SANs and\n\n812\n00:45:08,015 --> 00:45:11,380\niSCSI SANs that provide us shared storage.\n\n813\n00:45:12,540 --> 00:45:14,310\nSo that's a key component.\n\n814\n00:45:14,310 --> 00:45:16,750\nMy problem here is I made it too small.\n\n815\n00:45:16,750 --> 00:45:20,850\nSo I typed in 1000 thinking that was\na terabyte and it was only a gigabyte.\n\n816\n00:45:20,850 --> 00:45:24,320\nI'll have to make that bigger\nif I intend to use it.\n\n817\n00:45:24,320 --> 00:45:27,290\nI wonder if VMFS 3 will\nlet me go that small?\n\n818\n00:45:28,980 --> 00:45:30,830\nNope, yeah it won't let me do it.\n\n819\n00:45:30,830 --> 00:45:34,550\nSo, anyhow I won't be able\nto partition that out.\n\n820\n00:45:34,550 --> 00:45:38,180\nBut once we've got it added in,\nnow we've got another data store.\n\n821\n00:45:38,180 --> 00:45:40,970\nAnd once you've added it,\nthe data stores all work the same.\n\n822\n00:45:40,970 --> 00:45:43,780\nAll these VMFS data stores,\nthey work the same.\n\n823\n00:45:43,780 --> 00:45:48,180\nWhen I create a virtual machine,\nI need to store the data somewhere.\n\n824\n00:45:48,180 --> 00:45:51,000\nIt'll ask me where, and\nI'll just pick the data store.\n\n825\n00:45:51,000 --> 00:45:52,580\nIn our next episode,\n\n826\n00:45:52,580 --> 00:45:55,640\nwhen we start creating virtual machines,\nwe'll see that in action.\n\n827\n00:45:55,640 --> 00:45:59,352\nI'll create a bigger iSCSI store for\nthat episode so that we'll have it.\n\n828\n00:45:59,352 --> 00:46:02,570\nNow, notice I've got these two guys here,\ndata store 1 and\n\n829\n00:46:02,570 --> 00:46:04,830\ndata store 1 that have the same name.\n\n830\n00:46:04,830 --> 00:46:07,370\nI don't necessarily know\nwhich server they're on.\n\n831\n00:46:07,370 --> 00:46:09,070\nThere's a nice little\nthing that we can do here.\n\n832\n00:46:09,070 --> 00:46:13,645\nIf you click on the data store,\nyou've got this related objects tab, and\n\n833\n00:46:13,645 --> 00:46:16,810\nthat'll show you things\nassociated with that data store.\n\n834\n00:46:16,810 --> 00:46:20,310\nYou can see virtual machines that\nhave their storage on there,\n\n835\n00:46:20,310 --> 00:46:23,740\nas well as hosts that it resides on.\n\n836\n00:46:23,740 --> 00:46:27,920\nI can see that this data store actually\nresides on ESX Server 4, and so\n\n837\n00:46:27,920 --> 00:46:32,550\nthat's an easy way to get in here and\nkind of clean up the names so\n\n838\n00:46:32,550 --> 00:46:38,330\nthat you can remember who is connected\nto what and not get them all mixed up.\n\n839\n00:46:38,330 --> 00:46:40,710\nI can just go in and\nrename that and fix it.\n\n840\n00:46:40,710 --> 00:46:45,040\nThere's that one and then the other one\nhere, which is on what, Server 1, I think.\n\n841\n00:46:46,320 --> 00:46:46,980\nYeah, that's Server 1.\n\n842\n00:46:46,980 --> 00:46:48,640\nI'll just go ahead and rename that one.\n\n843\n00:46:48,640 --> 00:46:52,030\nAgain, just trying to make it easier\non us so that we don't mix them up.\n\n844\n00:46:52,030 --> 00:46:56,660\nThat's always the worst, especially\nwhen it comes to deleting a data store.\n\n845\n00:46:56,660 --> 00:46:58,850\nWhen you're done with a data store,\nyou might want to go in and\n\n846\n00:46:58,850 --> 00:47:00,130\ndelete it out of there.\n\n847\n00:47:00,130 --> 00:47:03,750\nWell, if its in use somewhere and\nyou don't know that, and\n\n848\n00:47:03,750 --> 00:47:06,450\nyou delete the wrong line,\nit might be taking out\n\n849\n00:47:06,450 --> 00:47:09,550\nsomething where virtual machines are still\nhosted there, and it's going to complain.\n\n850\n00:47:09,550 --> 00:47:11,760\nNow it will warn you if that happens.\n\n851\n00:47:11,760 --> 00:47:16,240\nIf you try and delete a data store that\nhas a virtual machine residing on it,\n\n852\n00:47:16,240 --> 00:47:18,105\nit'll warn you and it'll stop you.\n\n853\n00:47:18,105 --> 00:47:18,990\nYou actually have to go and\n\n854\n00:47:18,990 --> 00:47:22,090\nremove the virtual machine first and\nthen you can remove the data store.\n\n855\n00:47:22,090 --> 00:47:23,540\nOr you can move the virtual machine.\n\n856\n00:47:23,540 --> 00:47:28,820\nYou can always relocate them\nto storage somewhere else.\n\n857\n00:47:30,000 --> 00:47:31,910\nThat's the way these data stores work.\n\n858\n00:47:31,910 --> 00:47:35,080\nAnd the VMFS stores,\nthose are the ones we normally work with.\n\n859\n00:47:35,080 --> 00:47:36,560\nThat's where we're putting\nour virtual machine.\n\n860\n00:47:36,560 --> 00:47:38,542\nSo those are pretty important, right?\n\n861\n00:47:38,542 --> 00:47:42,146\nThe other type of data store, that I\nhaven't really talked about is the NFS,\n\n862\n00:47:42,146 --> 00:47:43,708\nthe network file system stores.\n\n863\n00:47:43,708 --> 00:47:46,622\nAnd those are really important,\ncuz they work great for\n\n864\n00:47:46,622 --> 00:47:50,950\nstoring all your ISO images to make it\neasy to build up new VMs, all right?\n\n865\n00:47:50,950 --> 00:47:52,958\nBut why don't we do this,\nwhy don't we stop and take a break.\n\n866\n00:47:52,958 --> 00:47:55,581\nAnd when we get back we'll take\na look at those NFS stores and\n\n867\n00:47:55,581 --> 00:47:56,958\nkind of see how they function.\n\n868\n00:47:56,958 --> 00:47:57,950\nThey're pretty neat.\n\n869\n00:47:57,950 --> 00:48:01,316\nSo stay tuned,\nwe'll pick up with that after this.\n\n870\n00:48:01,316 --> 00:48:08,177\n[SOUND].\n\n871\n00:48:08,177 --> 00:48:09,950\nAll right, welcome back everybody.\n\n872\n00:48:09,950 --> 00:48:13,701\nSo during the break I took a minute and I\nactually stretched out that iSCSI storage\n\n873\n00:48:13,701 --> 00:48:16,940\n[LAUGH] since I accidentally put\nit in as 1 gig instead of 1TB.\n\n874\n00:48:16,940 --> 00:48:23,212\nSo I bumped it up a bit so I could show\nyou actually finishing that VMFS format.\n\n875\n00:48:23,212 --> 00:48:25,650\nSo, here's that drive,\nI just bumped it up to 20 gigs.\n\n876\n00:48:26,860 --> 00:48:30,490\nAnd if I move forward and do VMFS5 it'll\nbe happy with that size this time.\n\n877\n00:48:30,490 --> 00:48:33,590\nOh, I guess I did forget to set the name,\nlet me go back and do that.\n\n878\n00:48:33,590 --> 00:48:40,350\nSo I want to call this\nESX-server4-datastore2, 3.\n\n879\n00:48:40,350 --> 00:48:42,170\nI think I'm up to three, all right.\n\n880\n00:48:42,170 --> 00:48:44,855\nSo I'll go ahead and set that, VMFS5.\n\n881\n00:48:44,855 --> 00:48:46,950\nI'll let it use the whole drive.\n\n882\n00:48:46,950 --> 00:48:49,480\nAnd now it's gonna reach out there and\nformat that.\n\n883\n00:48:49,480 --> 00:48:52,740\nThe only difference from being local\nstorage now is just the fact that\n\n884\n00:48:52,740 --> 00:48:55,030\nit's remote, but I treat it the same.\n\n885\n00:48:55,030 --> 00:48:58,610\nWhen we create VMs and stuff,\nlocal data stores, remote data stores,\n\n886\n00:48:58,610 --> 00:49:01,530\nthey're all treated the same\nonce they've been made.\n\n887\n00:49:01,530 --> 00:49:03,810\nThe difference is just getting\nthem set up initially.\n\n888\n00:49:03,810 --> 00:49:07,960\nSo, now I'll be able to see it here,\nthis'll refresh here in a moment.\n\n889\n00:49:07,960 --> 00:49:10,520\nIt's gotta reach out,\nyou see it right here, it's creating.\n\n890\n00:49:10,520 --> 00:49:15,399\nSo it's gotta reach out to that iSCSI SAN,\nformat out that drive to get it ready, and\n\n891\n00:49:15,399 --> 00:49:18,100\nthen it'll populate\nhere into the database.\n\n892\n00:49:18,100 --> 00:49:20,800\nAll right,\nnow I also mentioned the NFS stores.\n\n893\n00:49:20,800 --> 00:49:23,670\nAnd you can see I've already got\na couple of these NFS stores where\n\n894\n00:49:23,670 --> 00:49:27,070\nI've called them, ISOstore1, all right?\n\n895\n00:49:27,070 --> 00:49:30,630\nWell, ISO stores,\nthat's where I put my CD images,\n\n896\n00:49:30,630 --> 00:49:33,170\nso that I'll be able to do my installs,\nright?\n\n897\n00:49:33,170 --> 00:49:36,490\nIf I want to install Windows Server,\nor Sent OS, or\n\n898\n00:49:36,490 --> 00:49:39,830\nsomething like that, I got to be able\nto get the media from somewhere.\n\n899\n00:49:39,830 --> 00:49:42,110\nSo NFS stores are a great way to do it.\n\n900\n00:49:42,110 --> 00:49:45,420\nWhat you can do is you can\ntake any Linux or Mac OS box,\n\n901\n00:49:45,420 --> 00:49:49,259\neven Windows Server has an NFS\nserver function in it now, and\n\n902\n00:49:49,259 --> 00:49:54,270\nyou can put your ISOs there and\nyou can share that folder out using NFS.\n\n903\n00:49:54,270 --> 00:49:59,100\nOnce that's done,\nyou can go into vCenter and\n\n904\n00:49:59,100 --> 00:50:01,920\nyou can add that as another data store.\n\n905\n00:50:01,920 --> 00:50:03,970\nWith that new data store available,\n\n906\n00:50:03,970 --> 00:50:06,590\nnow your virtual machine's\navailable to mount to ISOs.\n\n907\n00:50:06,590 --> 00:50:12,730\nAnd so you can see, if I take Server 3\nISO store and I choose it, that you can\n\n908\n00:50:12,730 --> 00:50:18,790\ncome in and kinda get a little look at\nit and see what's going on with it.\n\n909\n00:50:18,790 --> 00:50:20,762\nWell, as far as what's using it and so on.\n\n910\n00:50:20,762 --> 00:50:25,150\nBut there's not all that\nterribly much to see about it.\n\n911\n00:50:25,150 --> 00:50:30,032\nIf I look, this one's attached to Server\n3, and somewhere in here I can get the,\n\n912\n00:50:30,032 --> 00:50:34,340\nactually here,\nlet's go to manage and settings.\n\n913\n00:50:34,340 --> 00:50:36,460\nIt should have a server\nthat it's connected to.\n\n914\n00:50:36,460 --> 00:50:39,945\nWhen you connect to an NFS store you\nreally just provide the IP address of\n\n915\n00:50:39,945 --> 00:50:41,688\nthe server that's hosting it, and\n\n916\n00:50:41,688 --> 00:50:44,440\nthe shared folder that contains\nthe data that you want.\n\n917\n00:50:44,440 --> 00:50:46,610\nAnd that's buried in here somewhere,\nhere we go.\n\n918\n00:50:46,610 --> 00:50:50,660\nSo I can see this one's actually\nattached to 10.1.230.100.\n\n919\n00:50:50,660 --> 00:50:56,243\nThat's my server that's hosting the share,\nand the path is \\var\\nfs.\n\n920\n00:50:56,243 --> 00:51:01,038\nThat's a folder I created on that server\nso that's not in VMware or in vSphere,\n\n921\n00:51:01,038 --> 00:51:05,690\nthat's on the Linux box where\nI'm actually hosting that share.\n\n922\n00:51:05,690 --> 00:51:09,120\nSo it's got it, it's there,\nand my data's in place.\n\n923\n00:51:09,120 --> 00:51:13,520\nAnd if you go into files,\nit'll actually parse what's on there and\n\n924\n00:51:13,520 --> 00:51:15,320\nyou can see the information.\n\n925\n00:51:15,320 --> 00:51:19,340\nSo like I said in my example, there's\nmy Windows Server install disk, and\n\n926\n00:51:19,340 --> 00:51:21,260\nI've got a Sent OS install disk.\n\n927\n00:51:21,260 --> 00:51:24,350\nBut I've also got my various\nVMware ISOs in there.\n\n928\n00:51:24,350 --> 00:51:27,670\nSo like when we installed\nvCenter in episode number one,\n\n929\n00:51:27,670 --> 00:51:30,850\nI was actually installing it from this\ndata store that was already there.\n\n930\n00:51:32,180 --> 00:51:35,190\nCreating these data stores, super simple.\n\n931\n00:51:35,190 --> 00:51:40,950\nAll we do is we go up to our data store\nscreen, and we choose to add a data store.\n\n932\n00:51:40,950 --> 00:51:44,710\nAnd the only difference is in the wizard\ninstead of choosing a VMFS store,\n\n933\n00:51:44,710 --> 00:51:48,070\nwe'll choose to do a NFS store.\n\n934\n00:51:48,070 --> 00:51:50,300\nNow the NFS store is out on the network.\n\n935\n00:51:50,300 --> 00:51:54,866\nIt's not necessarily\nattached to a single host.\n\n936\n00:51:54,866 --> 00:51:58,935\nBut in the beginning you do need to attach\nit to one, and then we can spread it and\n\n937\n00:51:58,935 --> 00:52:00,980\nattach it to others if we want.\n\n938\n00:52:00,980 --> 00:52:06,208\nSo, for example, if I want ESX Server\n4 to have access to those ISO images,\n\n939\n00:52:06,208 --> 00:52:08,182\nI can choose it and hit Next.\n\n940\n00:52:08,182 --> 00:52:11,960\nI can tell it I'm creating\nan NFS store and hit Next.\n\n941\n00:52:11,960 --> 00:52:16,820\nAnd then it just needs a name,\nan IP address, and a folder.\n\n942\n00:52:16,820 --> 00:52:25,518\nAnd so\nI could call this ESX-server4-isostore1.\n\n943\n00:52:25,518 --> 00:52:29,480\nThe server, 10.1.230.100 for me.\n\n944\n00:52:29,480 --> 00:52:34,720\nAnd the folder /var/nfs,\nthat's where I park that.\n\n945\n00:52:34,720 --> 00:52:39,600\nWhen I do that, I can hit Next, and\nit'll finish up, and it'll get created.\n\n946\n00:52:39,600 --> 00:52:42,290\nNow it'll have access to those ISOs.\n\n947\n00:52:42,290 --> 00:52:45,487\nThere is a little problem though,\nnotice the warning down here.\n\n948\n00:52:45,487 --> 00:52:50,579\nIf a data store already exists in the data\ncenter, if you've already used it\n\n949\n00:52:50,579 --> 00:52:56,151\nsomewhere else, and you add it here, and\nany of this information doesn't match,\n\n950\n00:52:56,151 --> 00:53:00,310\nit'll add it as a new data store\nthat's treated separately.\n\n951\n00:53:00,310 --> 00:53:01,860\nEven though it points to\nthe same destination,\n\n952\n00:53:01,860 --> 00:53:04,400\nit treats it separately from\nthe one that's already there.\n\n953\n00:53:04,400 --> 00:53:09,100\nBut if you've already created one\nNFS data store to this location,\n\n954\n00:53:09,100 --> 00:53:11,110\nyou can just share it across of them.\n\n955\n00:53:11,110 --> 00:53:13,430\nThe advantage there is that if\nyou ever need to update it,\n\n956\n00:53:13,430 --> 00:53:16,480\nyou just make the change in one place and\nit takes effect everywhere.\n\n957\n00:53:16,480 --> 00:53:17,850\nMakes life a lot more simple.\n\n958\n00:53:17,850 --> 00:53:19,240\nThat's what that warning's about.\n\n959\n00:53:19,240 --> 00:53:22,560\nI could just disregard it and\nhit Next and then just be done.\n\n960\n00:53:23,900 --> 00:53:27,430\nBut now I've got all these individual\ndata stores I've got to deal with.\n\n961\n00:53:27,430 --> 00:53:32,128\nInstead I could cancel it and\nI could take one of the existing ones\n\n962\n00:53:32,128 --> 00:53:36,571\nthat I've already made like\nESX-server1-isostore1.\n\n963\n00:53:36,571 --> 00:53:38,280\nThis guy right here, all right?\n\n964\n00:53:38,280 --> 00:53:41,998\nSo that's the one that I already created\nthat I was using when we installed\n\n965\n00:53:41,998 --> 00:53:43,780\nvCenter, all right?\n\n966\n00:53:43,780 --> 00:53:49,500\nAnd when I click on it notice down here,\nit's showing here's one data store and\n\n967\n00:53:49,500 --> 00:53:52,710\nit's trying to parse the files\nthat are in it, there we go.\n\n968\n00:53:52,710 --> 00:53:57,120\nBut it's basically just attached\nto ESX server 1 and that's it.\n\n969\n00:53:57,120 --> 00:54:00,180\nBut if you right click on it,\nyou'll see where you've got some\n\n970\n00:54:00,180 --> 00:54:04,830\nother options buried in here\nwhere we can extend that out.\n\n971\n00:54:04,830 --> 00:54:08,221\nWe've got unmount and mount and actually\nyou know what, I'm not seeing, shoot,\n\n972\n00:54:08,221 --> 00:54:09,100\nwhere is the option?\n\n973\n00:54:10,300 --> 00:54:13,270\nThere's an option in here which\nI thought was on that screen but\n\n974\n00:54:13,270 --> 00:54:15,990\nwasn't, where we can just\nattach it to other servers.\n\n975\n00:54:15,990 --> 00:54:19,480\nSo we can expand that out to\nbring in the other systems.\n\n976\n00:54:19,480 --> 00:54:23,270\nIt's buried away under one of the menus\nhere, I've got to remember where it is.\n\n977\n00:54:23,270 --> 00:54:27,752\nLet's see, not register VM,\nnot manage storage providers.\n\n978\n00:54:30,202 --> 00:54:31,330\nWell shoot.\n\n979\n00:54:32,400 --> 00:54:35,000\nThe other option is to run through\nthe wizard like we did a moment ago and\n\n980\n00:54:35,000 --> 00:54:37,680\nyou just have to enter\nthe exact same data.\n\n981\n00:54:37,680 --> 00:54:39,172\nBut I know I'm bad about that and so\n\n982\n00:54:39,172 --> 00:54:42,810\nthere's a menu item I normally\nuse that I'm just not seeing.\n\n983\n00:54:42,810 --> 00:54:45,119\nLet me go back to the main\ndata store screen here.\n\n984\n00:54:48,614 --> 00:54:54,390\nAnd I'll take ESX server 1 ISO store and,\nhere it is.\n\n985\n00:54:54,390 --> 00:54:58,050\nAll right, so you got a few options up\nhere that are a little bit different.\n\n986\n00:54:58,050 --> 00:54:59,940\nSo instead of clicking on\nthe data store over here,\n\n987\n00:54:59,940 --> 00:55:02,980\nif I pull it in the list,\nsee you've got add a new data store?\n\n988\n00:55:02,980 --> 00:55:04,300\nThat's what I was using.\n\n989\n00:55:04,300 --> 00:55:07,698\nYou've got register an existing VM.\n\n990\n00:55:07,698 --> 00:55:11,821\nIf you attach a data store that's already\nformatted, that already contains virtual\n\n991\n00:55:11,821 --> 00:55:15,770\nmachines, like if you're recovering a SAN,\nyou might want to pull some VMs out of\n\n992\n00:55:15,770 --> 00:55:18,250\nit to register them and\nbe able to boot them back up.\n\n993\n00:55:18,250 --> 00:55:21,790\nSo you've got that option,\nyou got the browse files, and\n\n994\n00:55:21,790 --> 00:55:25,610\nthen, actually I'm still not\nseeing the option, shoot.\n\n995\n00:55:27,000 --> 00:55:29,550\nWell, daggummit, I just don't\nremember where that option is.\n\n996\n00:55:29,550 --> 00:55:34,120\nBut you can come in here, and\nyou can add the existing other servers.\n\n997\n00:55:34,120 --> 00:55:35,810\nI guess I'll do it the hard way.\n\n998\n00:55:35,810 --> 00:55:38,518\nSo the hard way is you just go ahead and\nchose to add it, and\n\n999\n00:55:38,518 --> 00:55:41,020\nyou enter it in manually\nwith the same data.\n\n1000\n00:55:41,020 --> 00:55:43,000\nSo my problem that I'm gonna\nbump into is the name.\n\n1001\n00:55:43,000 --> 00:55:47,583\nSo I called mine ESX-server1-ISOstore1.\n\n1002\n00:55:47,583 --> 00:55:48,875\nI'm just gonna rename that.\n\n1003\n00:55:52,583 --> 00:55:54,941\nWhich it might give me\ngrief if it's still in use.\n\n1004\n00:55:54,941 --> 00:55:58,000\nI might have to go check my virtual\nmachines to make sure I don't have any CDs\n\n1005\n00:55:58,000 --> 00:55:59,140\nmounted right now.\n\n1006\n00:55:59,140 --> 00:56:03,150\nBut I'm just gonna rename it isostore\none so it's a little bit more generic,\n\n1007\n00:56:03,150 --> 00:56:06,500\nsince it's not gonna be tied\nto just server one anymore.\n\n1008\n00:56:06,500 --> 00:56:07,270\nAll right.\nSo there it is.\n\n1009\n00:56:07,270 --> 00:56:08,900\nI've got isostore one.\n\n1010\n00:56:08,900 --> 00:56:11,900\nAnd now, in my data stores,\nI can add it again.\n\n1011\n00:56:11,900 --> 00:56:14,520\nAnd this is the hard way.\n\n1012\n00:56:14,520 --> 00:56:15,460\nI swear to you,\n\n1013\n00:56:15,460 --> 00:56:18,930\nthere is a button somewhere,\nwhere you can just add the other servers.\n\n1014\n00:56:18,930 --> 00:56:22,010\nBut I'll go in here and\nmaybe I'll add server two to this one.\n\n1015\n00:56:24,100 --> 00:56:26,630\nAnd so\nI'll tell it I'm creating a NFS store.\n\n1016\n00:56:26,630 --> 00:56:31,480\nAnd on here, we just enter in the same\nInformation that we did before.\n\n1017\n00:56:31,480 --> 00:56:37,350\nSo I'll put ISO Store 1,\n10.1.230.100/var/nfs.\n\n1018\n00:56:37,350 --> 00:56:41,920\nBy making it all identical it'll\nrecognize that it is the same and\n\n1019\n00:56:41,920 --> 00:56:45,350\ntie those together instead of\ntreating them as separate entities.\n\n1020\n00:56:46,930 --> 00:56:47,430\nAll right.\n\n1021\n00:56:48,660 --> 00:56:50,030\nActually, let me do one more change.\n\n1022\n00:56:50,030 --> 00:56:51,440\nI gotta go back.\n\n1023\n00:56:51,440 --> 00:56:55,660\nBecause it's an ISO store, I don't wanna\nput virtual machines in there, and so\n\n1024\n00:56:55,660 --> 00:56:58,710\nwhen I mounted it on the other server,\nI flagged it as read-only.\n\n1025\n00:56:58,710 --> 00:57:00,530\nNo point in making changes.\n\n1026\n00:57:00,530 --> 00:57:03,350\nIf I wanna add ISOs,\nI'll go to my desktop.\n\n1027\n00:57:03,350 --> 00:57:06,570\nI'll connect to the NFS here myself,\nand I'll copy the ISO files.\n\n1028\n00:57:06,570 --> 00:57:09,310\nBut the VMware servers, they don't\nneed to be changing the ISO files.\n\n1029\n00:57:09,310 --> 00:57:10,710\nThey just need to read them.\n\n1030\n00:57:10,710 --> 00:57:12,230\nSo I mounted it read-only\non the other one.\n\n1031\n00:57:14,292 --> 00:57:17,490\nAll right, so I'll go ahead and\nfinish that and it's going to attach it.\n\n1032\n00:57:17,490 --> 00:57:22,020\nSo, now I'll have these two different\nservers that will be able to access it.\n\n1033\n00:57:22,020 --> 00:57:24,280\nThe screen just refreshed, it's done but\n\n1034\n00:57:24,280 --> 00:57:29,220\nnotice how i've only got one entry for\nisostore1, okay?\n\n1035\n00:57:29,220 --> 00:57:33,170\nIf any of my settings had been different,\nI would have two entries for isostore1.\n\n1036\n00:57:33,170 --> 00:57:36,490\nI'd have have isostore1 and isostore(1).\n\n1037\n00:57:36,490 --> 00:57:38,340\nRight.\nA second one, and\n\n1038\n00:57:38,340 --> 00:57:39,690\nthey'd be treated independently.\n\n1039\n00:57:39,690 --> 00:57:43,000\nNow they're connected, and\nthese are both attached to the same host.\n\n1040\n00:57:44,780 --> 00:57:45,500\nAl lright.\n\n1041\n00:57:45,500 --> 00:57:46,152\nSo, oops.\n\n1042\n00:57:46,152 --> 00:57:46,907\nOh there.\n\n1043\n00:57:46,907 --> 00:57:51,200\nSo isostore1, and if I click on hosts,\nsee how I've got two hosts, right there?\n\n1044\n00:57:51,200 --> 00:57:56,290\nSo it is recognizing that I've got\nthe extra host attached to it.\n\n1045\n00:57:56,290 --> 00:57:58,340\nAnd so I could go on and\nattach everybody to it.\n\n1046\n00:57:58,340 --> 00:58:01,170\nI could attach server three, server four.\n\n1047\n00:58:01,170 --> 00:58:05,350\nAnd now they'll all have access to that\ncentralized repository of ISO files,\n\n1048\n00:58:05,350 --> 00:58:06,600\nso that people can use them.\n\n1049\n00:58:06,600 --> 00:58:09,630\nAnd I can see some of my virtual\nmachines are actually using it.\n\n1050\n00:58:09,630 --> 00:58:12,250\nVM Server 1 and\nVM Server 2 are attached to it.\n\n1051\n00:58:12,250 --> 00:58:18,470\nVM Linux One, I must have emptied\nthe CD drive so it's not attached.\n\n1052\n00:58:18,470 --> 00:58:23,150\nBut that's an example there of doing NFS,\nand like I said, we typically use that for\n\n1053\n00:58:23,150 --> 00:58:25,780\nstoring CD images.\n\n1054\n00:58:25,780 --> 00:58:27,400\nYou can store virtual machines,\n\n1055\n00:58:27,400 --> 00:58:30,070\nlet me give you a scenario where you\nmight do that, because it sounds crazy.\n\n1056\n00:58:30,070 --> 00:58:35,670\nPerformance wise, you don't want an active\nrunning virtual machine sitting on NFS.\n\n1057\n00:58:35,670 --> 00:58:38,030\nIt's just not gonna give\nyou good performance.\n\n1058\n00:58:38,030 --> 00:58:40,900\nBut, maybe you've decommissioned\na virtual machine.\n\n1059\n00:58:40,900 --> 00:58:43,170\nYou've shut it down,\nyou don't need it anymore.\n\n1060\n00:58:43,170 --> 00:58:45,300\nBut, you don't wanna delete it just yet.\n\n1061\n00:58:45,300 --> 00:58:46,920\nYou wanna have a safety net.\n\n1062\n00:58:46,920 --> 00:58:49,910\nYou might move that virtual\nmachine into an NFS store.\n\n1063\n00:58:49,910 --> 00:58:51,980\nJust have it sit there, for storage.\n\n1064\n00:58:51,980 --> 00:58:53,220\nRight?\n\n1065\n00:58:53,220 --> 00:58:56,240\nMaybe that's really cheap,\nslow SATA storage.\n\n1066\n00:58:56,240 --> 00:58:58,080\nSo you just move it over there.\n\n1067\n00:58:58,080 --> 00:59:02,310\nThat gets it off of your 15,000\nRPM fiber channel SCSI drives.\n\n1068\n00:59:02,310 --> 00:59:02,830\nRight?\n\n1069\n00:59:02,830 --> 00:59:05,770\nSo you get it off the expensive drives,\nyou put it on the cheap drives and\n\n1070\n00:59:05,770 --> 00:59:06,460\nit just sits there.\n\n1071\n00:59:06,460 --> 00:59:09,840\nIt's not running, so\nnobody notices that it's slow.\n\n1072\n00:59:09,840 --> 00:59:13,790\nBut if something happens, and you go,\noh gosh I wish I had that virtual machine.\n\n1073\n00:59:13,790 --> 00:59:14,750\nInstead of having to go and\n\n1074\n00:59:14,750 --> 00:59:19,120\nrestore it from backup, you just retrieve\nit from the NFS store and move it back\n\n1075\n00:59:19,120 --> 00:59:23,400\ninto one of your regular VMFS stores,\nboot it up, and you've got access to it.\n\n1076\n00:59:23,400 --> 00:59:28,061\nSo that's a scenario where you\nmight put something other than ISO\n\n1077\n00:59:28,061 --> 00:59:29,765\nimages in an NFS store.\n\n1078\n00:59:29,765 --> 00:59:30,265\nAll right.\n\n1079\n00:59:30,265 --> 00:59:35,160\nSo those are some of the things that\nwe work with with the datastores.\n\n1080\n00:59:35,160 --> 00:59:36,920\nWe'll see these a little bit\nmore as we go through and\n\n1081\n00:59:36,920 --> 00:59:39,380\nstart actually creating virtual machines.\n\n1082\n00:59:39,380 --> 00:59:42,340\nAnd when we get to the high\navailability section we'll really see\n\n1083\n00:59:42,340 --> 00:59:44,350\nit more there because we\nneed that shared storage.\n\n1084\n00:59:45,590 --> 00:59:46,120\nAll right.\n\n1085\n00:59:46,120 --> 00:59:49,180\nI think I have covered most stuff.\n\n1086\n00:59:49,180 --> 00:59:50,660\nLet's see, did I leave anything out?\n\n1087\n00:59:50,660 --> 00:59:53,770\nLet's see, I talked about that,\nI talked about that.\n\n1088\n00:59:53,770 --> 00:59:54,660\nOh, filters.\n\n1089\n00:59:54,660 --> 01:00:01,170\nAll right, for whatever reason,\nVMWare on the exam objectives,\n\n1090\n01:00:01,170 --> 01:00:04,400\nthey called out something called\nstorage filters, all right.\n\n1091\n01:00:04,400 --> 01:00:09,590\nThere are software storage filters that\nyou can use inside of vSphere that\n\n1092\n01:00:09,590 --> 01:00:12,760\nkind of changes the way that\nour storage is represented.\n\n1093\n01:00:12,760 --> 01:00:14,100\nThere's four in particular.\n\n1094\n01:00:14,100 --> 01:00:17,000\nAnd the reason I say this kind of weird,\n\n1095\n01:00:17,000 --> 01:00:18,540\nit's not something you're\never gonna use in real life.\n\n1096\n01:00:18,540 --> 01:00:20,310\nAll right.\nThere's these four filters that you're\n\n1097\n01:00:20,310 --> 01:00:22,090\nnever, ever, ever going to use.\n\n1098\n01:00:22,090 --> 01:00:25,720\nAnd on ever website, every reference\nthat you see that calls these out\n\n1099\n01:00:25,720 --> 01:00:28,560\nThey say don't use these in production.\n\n1100\n01:00:28,560 --> 01:00:31,640\nSo, it kind of shows like\nwhere you can use this.\n\n1101\n01:00:31,640 --> 01:00:32,960\nBut they are on the exam objectives, so\n\n1102\n01:00:32,960 --> 01:00:37,740\nI do want to talk about them just on the\noff chance they do come up on the exam.\n\n1103\n01:00:37,740 --> 01:00:39,990\nThe filters, they do different things.\n\n1104\n01:00:39,990 --> 01:00:44,400\nLet me bring up my show notes so\nI can show you, I've got them tucked away.\n\n1105\n01:00:44,400 --> 01:00:47,640\nHere these are the four filters.\n\n1106\n01:00:47,640 --> 01:00:52,970\nVMFS filter, there's the RDM filter,\nthere's the Same Hosts and\n\n1107\n01:00:52,970 --> 01:00:57,070\nTransport filter, and\nthere's the Host Rescan filter.\n\n1108\n01:00:57,070 --> 01:01:03,430\nEach one allows you to limit\nthe storage that a host is able to see.\n\n1109\n01:01:03,430 --> 01:01:06,730\nNormally when we limit storage we do\nit through things like LUN-masking\n\n1110\n01:01:06,730 --> 01:01:07,580\non a SAN right?\n\n1111\n01:01:07,580 --> 01:01:09,440\nThat's how we're normally gonna do it.\n\n1112\n01:01:09,440 --> 01:01:14,140\nBut you've got software filters inside of\nvSphere where you can do it there, too.\n\n1113\n01:01:14,140 --> 01:01:16,530\nThe first one is the VMFS filter.\n\n1114\n01:01:16,530 --> 01:01:20,530\nWhat it does is it says if there\n\n1115\n01:01:20,530 --> 01:01:25,650\nare some VMFS data stores\nthat are currently in use,\n\n1116\n01:01:25,650 --> 01:01:29,900\ndon't show them when somebody\ntries to go and create a new one.\n\n1117\n01:01:29,900 --> 01:01:33,510\nWell, it already filters that out so\nthat's not terribly useful.\n\n1118\n01:01:33,510 --> 01:01:35,980\nBut what it doesn't mention\nin the description is,\n\n1119\n01:01:35,980 --> 01:01:41,100\nif you ever decommission a datastore,\nso if you remove a VMFS datastore,\n\n1120\n01:01:41,100 --> 01:01:44,380\nthe datastore still exists,\nit's just not attached anymore.\n\n1121\n01:01:44,380 --> 01:01:47,910\nAnd so somebody else can come along and\nattach it back again.\n\n1122\n01:01:47,910 --> 01:01:49,670\nAnd when they attach it back again,\n\n1123\n01:01:49,670 --> 01:01:51,650\nthey'll have access to\nthe data that was on there.\n\n1124\n01:01:51,650 --> 01:01:52,210\nAll right?\n\n1125\n01:01:52,210 --> 01:01:56,940\nSo turning on this filter,\nthis vmsFilter, will make it where you\n\n1126\n01:01:56,940 --> 01:02:01,920\ncannot attach a VMFS data store\nthat is anything other than empty.\n\n1127\n01:02:01,920 --> 01:02:03,610\nYou can attach an empty one, but\n\n1128\n01:02:03,610 --> 01:02:05,490\nyou won't be able to attach\nones that already have data.\n\n1129\n01:02:05,490 --> 01:02:07,830\nIt will hide them from the system.\n\n1130\n01:02:07,830 --> 01:02:10,020\nNow you should never have to do that.\n\n1131\n01:02:10,020 --> 01:02:13,910\nWhen somebody decommissions a VMFS\ndata store, it should be destroyed,\n\n1132\n01:02:13,910 --> 01:02:15,530\nit should be completely removed.\n\n1133\n01:02:15,530 --> 01:02:19,880\nYou basically follow it up by going\nto the SAN and destroying that LUN.\n\n1134\n01:02:19,880 --> 01:02:21,210\nThat's that extra step.\n\n1135\n01:02:21,210 --> 01:02:23,110\nBut if you're worried about\nsomebody forgetting and\n\n1136\n01:02:23,110 --> 01:02:27,020\nskipping that step,\nthis is a way to protect from it.\n\n1137\n01:02:27,020 --> 01:02:28,820\nThe next one, the RDM filter.\n\n1138\n01:02:28,820 --> 01:02:30,480\nIt's the exact same thing.\n\n1139\n01:02:30,480 --> 01:02:37,030\nExcept instead of VMFS datastores it's\ntalking about raw device mapping filters.\n\n1140\n01:02:37,030 --> 01:02:41,650\nRDM raw device mapping,\nif you want the highest disk IO\n\n1141\n01:02:41,650 --> 01:02:46,860\nperformance you can expose a physical\ndisk directly to a virtual machine.\n\n1142\n01:02:46,860 --> 01:02:49,650\nThe virtual machine can have\naccess directly to that\n\n1143\n01:02:49,650 --> 01:02:51,800\nphysical disk it's called a raw device.\n\n1144\n01:02:52,820 --> 01:02:54,870\nYou get really great disc IO.\n\n1145\n01:02:54,870 --> 01:02:58,280\nBut, you loose the ability to do any\ntype of sharing for that storage.\n\n1146\n01:02:58,280 --> 01:03:00,470\nAnd you usually loose the ability for\nVM Motion.\n\n1147\n01:03:00,470 --> 01:03:02,390\nSo there is a price you pay for it.\n\n1148\n01:03:02,390 --> 01:03:03,930\nBut there is a filter there for RDM,\n\n1149\n01:03:03,930 --> 01:03:07,650\nand it works the same way\nas the VMF filter one.\n\n1150\n01:03:07,650 --> 01:03:11,560\nThe third one is the same\nhost in transports filter.\n\n1151\n01:03:11,560 --> 01:03:16,990\nAnd what that does is it says when you\ngo to create a data store, If there's\n\n1152\n01:03:16,990 --> 01:03:21,570\nany local media that's not compatible,\njust hide it and don't show it.\n\n1153\n01:03:21,570 --> 01:03:22,170\nAll right.\n\n1154\n01:03:22,170 --> 01:03:27,230\nRemember a moment ago, I tried to add\nan iSCSI SAN, or a data store, and\n\n1155\n01:03:27,230 --> 01:03:30,410\nI made it too small so it wasn't\ncompatible and I couldn't create it.\n\n1156\n01:03:30,410 --> 01:03:33,280\nIf I had this filter turned on,\nit wouldn't have even shown up.\n\n1157\n01:03:34,290 --> 01:03:35,620\nSo, you might want that.\n\n1158\n01:03:35,620 --> 01:03:38,210\nThe negative is it makes\ntroubleshooting really hard.\n\n1159\n01:03:38,210 --> 01:03:42,106\nI knew it was too small because when I got\nto that screen where I can put in a size,\n\n1160\n01:03:42,106 --> 01:03:43,417\nit had a red box around it.\n\n1161\n01:03:43,417 --> 01:03:47,133\nBut if it was hidden I wouldn't even\nsee it, so It does make troubleshooting\n\n1162\n01:03:47,133 --> 01:03:49,875\nmore difficult, but\nit would just hide that outright.\n\n1163\n01:03:49,875 --> 01:03:53,660\nAnd then the last one is\nthe hostRescanFilter.\n\n1164\n01:03:53,660 --> 01:03:57,000\nI had to hit the Rescan button a few times\nto be able to find those changes and\n\n1165\n01:03:57,000 --> 01:03:58,280\nit kept warning me.\n\n1166\n01:03:58,280 --> 01:04:01,420\nIf you turn this filter on, this is\nthe first one that doesn't hide things.\n\n1167\n01:04:01,420 --> 01:04:03,290\nWhat this one does is it says,\n\n1168\n01:04:03,290 --> 01:04:07,570\nevery time somebody makes a change,\nautomatically do the rescan.\n\n1169\n01:04:08,700 --> 01:04:13,010\nThis can result in excessive rescans, and\nin a production environment that's bad.\n\n1170\n01:04:13,010 --> 01:04:15,710\nBut in a lab or test environment\nwhere you're making a lot of changes,\n\n1171\n01:04:15,710 --> 01:04:16,790\nthat might be worthwhile.\n\n1172\n01:04:16,790 --> 01:04:19,900\nYou can have it automatically\ndoing the rescans for you.\n\n1173\n01:04:19,900 --> 01:04:23,527\nThey don't recommend it production though,\nso again, it's yet\n\n1174\n01:04:23,527 --> 01:04:26,065\nanother filter that you\nprobably won't use.\n\n1175\n01:04:26,065 --> 01:04:31,065\nThe filters are not the easiest\nthings to turn on in the world.\n\n1176\n01:04:31,065 --> 01:04:33,356\nYou don't actually have\nlike GUI buttons for them.\n\n1177\n01:04:33,356 --> 01:04:35,660\nLet me show you how we\nwould turn these on.\n\n1178\n01:04:35,660 --> 01:04:40,390\nBasically, in vCenter, we need to\nbrowse in to our particular server.\n\n1179\n01:04:40,390 --> 01:04:44,180\nSo let me browse into, I'll do Server 4.\n\n1180\n01:04:44,180 --> 01:04:50,190\nSo I'm gonna browse in here,\nI'll go into my vCenter servers.\n\n1181\n01:04:50,190 --> 01:04:53,888\nAnd I'm gonna go ahead and configure\nit on the vCenter server instead of on\n\n1182\n01:04:53,888 --> 01:04:57,800\nan individual server, cuz that'll\nmake sure it applies everywhere.\n\n1183\n01:04:57,800 --> 01:05:00,200\nSo I'm going here into\nthat vCenter server.\n\n1184\n01:05:01,460 --> 01:05:05,086\nAnd then I'll go under Manage and,\nlet's see,\n\n1185\n01:05:05,086 --> 01:05:08,190\nunder Manage I need to go under Settings.\n\n1186\n01:05:10,232 --> 01:05:13,940\nAnd under Settings,\nI need to go under Advanced Settings.\n\n1187\n01:05:13,940 --> 01:05:16,680\nYou have your normal settings here,\nbut I need to go to Advanced.\n\n1188\n01:05:16,680 --> 01:05:19,960\nAnd when you go to Advanced,\nyou see a really interesting screen.\n\n1189\n01:05:19,960 --> 01:05:25,648\nIt's basically giving you the raw keys and\nvalues that define your configuration.\n\n1190\n01:05:25,648 --> 01:05:28,686\nAll the GUI stuff,\nthis is what it's actually representing,\n\n1191\n01:05:28,686 --> 01:05:30,880\nthese physical keys and their values.\n\n1192\n01:05:30,880 --> 01:05:32,050\nAnd it's kind of a mess.\n\n1193\n01:05:32,050 --> 01:05:34,170\nThere's no help documentation or\nanything like that.\n\n1194\n01:05:34,170 --> 01:05:37,981\nI guess some of them have a summary,\nbut it's pretty much just raw data.\n\n1195\n01:05:37,981 --> 01:05:41,707\nIf you you want to use one of\nthe four filters that I talked about,\n\n1196\n01:05:41,707 --> 01:05:44,065\nwhat you have to do is\nhere you go to Edit.\n\n1197\n01:05:45,970 --> 01:05:49,398\nAnd scroll all the way down to the bottom.\n\n1198\n01:05:49,398 --> 01:05:52,773\nOr, I guess you don't really have to\nscroll cuz the entries are right here,\n\n1199\n01:05:52,773 --> 01:05:55,482\nwe just need to add in the key and\nthe value that we want to use.\n\n1200\n01:05:55,482 --> 01:06:00,431\nSo if I wanted to add in the Rescan one,\n\n1201\n01:06:00,431 --> 01:06:07,088\nI could say config.vpxd.filter.hostRescan,\n\n1202\n01:06:07,088 --> 01:06:13,606\nactually let me make sure\nI'm typing this right.\n\n1203\n01:06:13,606 --> 01:06:21,410\nHost rescan filter, and\nI can set its value to true, all right?\n\n1204\n01:06:21,410 --> 01:06:24,130\nWhen I do that,\nthat's gonna turn that filter on.\n\n1205\n01:06:24,130 --> 01:06:28,170\nAnd I'm turning it on on my vCenter,\nso when people browse to the vCenter\n\n1206\n01:06:28,170 --> 01:06:31,320\nserver and start to do work,\nthat rescan's gonna be automatic.\n\n1207\n01:06:31,320 --> 01:06:32,680\nIf they use the vSphere client and\n\n1208\n01:06:32,680 --> 01:06:35,190\nconnect directly to a host,\nthat's not gonna happen.\n\n1209\n01:06:35,190 --> 01:06:37,070\nBut when they go through vCenter, it will.\n\n1210\n01:06:39,020 --> 01:06:41,350\nAnd I could add any of\nthe other filters the same way,\n\n1211\n01:06:41,350 --> 01:06:46,080\nyou set it to true to turn it on,\nyou set it to false to turn it off.\n\n1212\n01:06:46,080 --> 01:06:47,910\nSo those are the four filters.\n\n1213\n01:06:47,910 --> 01:06:49,960\nThese are things that I\ndon't remember normally,\n\n1214\n01:06:49,960 --> 01:06:51,420\nit's why I put them in my show notes.\n\n1215\n01:06:51,420 --> 01:06:54,250\nAnd I'll post the show notes for\nthis episode so you can see them.\n\n1216\n01:06:54,250 --> 01:06:59,120\nBut it does specifically mention storage\nfilters inside of the exam objectives.\n\n1217\n01:06:59,120 --> 01:07:02,760\nOn the exam, you're more likely to see the\nfilters referred to as the LUN masking,\n\n1218\n01:07:02,760 --> 01:07:05,300\nthe LUN masking that we do on SANs,\nthat's more common.\n\n1219\n01:07:05,300 --> 01:07:06,732\nBut these filters might turn up also.\n\n1220\n01:07:08,398 --> 01:07:11,640\nAll right, so\nI'll go ahead and cancel that.\n\n1221\n01:07:11,640 --> 01:07:13,890\nAll right, so those are the data stores.\n\n1222\n01:07:13,890 --> 01:07:17,860\nWe saw iSCSI data stores,\nwe saw NSF data stores, and\n\n1223\n01:07:17,860 --> 01:07:20,060\njust the local storage data stores.\n\n1224\n01:07:20,060 --> 01:07:21,985\nThe only ones I didn't\ndo are Fiber Channel,\n\n1225\n01:07:21,985 --> 01:07:24,732\nbecause I don't have an extra\nFiber Channel SAN laying around.\n\n1226\n01:07:24,732 --> 01:07:27,504\nBut they show up just like\nlocal data stores do, so\n\n1227\n01:07:27,504 --> 01:07:30,770\nit just shows up as drives\nattached to the system.\n\n1228\n01:07:30,770 --> 01:07:33,740\nSo it doesn't look any different,\nit's just a lot more expensive and\n\n1229\n01:07:33,740 --> 01:07:34,480\na lot faster.\n\n1230\n01:07:34,480 --> 01:07:37,470\nSo [LAUGH] that's what those are like.\n\n1231\n01:07:37,470 --> 01:07:39,290\nBut that's basically it.\n\n1232\n01:07:39,290 --> 01:07:41,410\nIf you're gonna create virtual machines,\n\n1233\n01:07:41,410 --> 01:07:45,070\nyou need at least one data store\nsomewhere to store your data.\n\n1234\n01:07:45,070 --> 01:07:48,870\nAnd those local data stores,\nthey're tied to individual servers so\n\n1235\n01:07:48,870 --> 01:07:51,450\nyou're not gonna be able to do\nthings like VMotion with them.\n\n1236\n01:07:51,450 --> 01:07:53,730\nThat's where shared storage comes in.\n\n1237\n01:07:53,730 --> 01:07:57,260\nSo, we'll need an iSCSI SAN or\na Fiber Channel SAN for\n\n1238\n01:07:57,260 --> 01:07:59,570\nshared storage in the following episodes.\n\n1239\n01:07:59,570 --> 01:08:01,370\nBut for\nright now we've seen the data stores.\n\n1240\n01:08:01,370 --> 01:08:02,460\nAnd that's basically how they function.\n\n1241\n01:08:03,910 --> 01:08:06,700\nAll right, well, that's a lot\nto take in in one episode, but\n\n1242\n01:08:06,700 --> 01:08:09,970\nif you have any questions be sure to ask.\n\n1243\n01:08:09,970 --> 01:08:12,750\nLive during the show you can\ngot to itpro.tv/live and\n\n1244\n01:08:12,750 --> 01:08:15,590\nyou'll see the chat box right\nbeneath the video, right.\n\n1245\n01:08:15,590 --> 01:08:18,570\nPost your questions, we monitor and\nanswer during the show.\n\n1246\n01:08:18,570 --> 01:08:22,760\nIf you have questions after the show,\njust jump on over to the Q&A forums.\n\n1247\n01:08:22,760 --> 01:08:25,610\nAt the top of every page you'll\nsee a ling that says Q&A.\n\n1248\n01:08:25,610 --> 01:08:28,280\nIt'll take you into the forums,\nyou can post your questions there.\n\n1249\n01:08:28,280 --> 01:08:29,675\nWe monitor and answer.\n\n1250\n01:08:29,675 --> 01:08:32,548\nSo take advantage of that,\nthat resource is there for you.\n\n1251\n01:08:32,548 --> 01:08:35,820\nAll right,\nwell I hope you guys enjoyed the show.\n\n1252\n01:08:35,820 --> 01:08:39,940\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n1253\n01:08:39,940 --> 01:08:49,940\n[MUSIC]\n\n1254\n01:08:52,023 --> 01:08:57,700\n[SOUND]\n\n",
          "vimeoId": "103421557"
        }
      ],
      "title": "Plan and Configure vSphere Storage"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don walks the viewer through creating a virtual machine and examines the various configuration options available inside of ESXi.",
          "length": "4767",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/007-Creating-Virtual-Machines.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/007-Creating-Virtual-Machines-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/007-Creating-Virtual-Machines-sm.jpg",
          "title": "Creating Virtual Machines",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,999 --> 00:00:22,151\n[SOUND]\n\n3\n00:00:22,151 --> 00:00:32,151\n[MUSIC]\n\n4\n00:00:33,676 --> 00:00:36,616\nAll right, good morning,\ngood afternoon, and good evening, and\n\n5\n00:00:36,616 --> 00:00:38,588\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:38,588 --> 00:00:45,051\nI'm your host Don Pezet, back again with\nanother episode of VMware vSphere 5.5.\n\n7\n00:00:45,051 --> 00:00:49,146\nWe're gonna be diving right back into\nthe world of vSphere as we move on to,\n\n8\n00:00:49,146 --> 00:00:53,306\nwhat a lot of people assumed we would've\ncovered in the very first episode,\n\n9\n00:00:53,306 --> 00:00:55,800\nwhich was setting up virtual machines.\n\n10\n00:00:55,800 --> 00:00:58,720\nWe filmed, I don't know,\nfour or five episodes now and\n\n11\n00:00:58,720 --> 00:01:01,050\nwe haven't even created our\nvery first virtual machine.\n\n12\n00:01:01,050 --> 00:01:06,860\nAnd the reason is It is super important to\nget your infrastructure in place first,\n\n13\n00:01:06,860 --> 00:01:09,430\nbefore you start populating it with\na bunch of machines that may be\n\n14\n00:01:09,430 --> 00:01:10,670\nmission critical.\n\n15\n00:01:10,670 --> 00:01:12,200\nSo that's what we've done.\n\n16\n00:01:12,200 --> 00:01:15,320\nWe created our vSphere,\nour vCenter installation,\n\n17\n00:01:15,320 --> 00:01:19,050\nour ESXi hosts,\nwe got all of that centrally managed.\n\n18\n00:01:19,050 --> 00:01:20,760\nWe set up our virtual networking.\n\n19\n00:01:20,760 --> 00:01:23,690\nWe set up our storage repositories or\ndata stores.\n\n20\n00:01:23,690 --> 00:01:26,150\nSo we got all that stuff put in place.\n\n21\n00:01:26,150 --> 00:01:28,560\nNow we're ready to start\ncreating some virtual machines.\n\n22\n00:01:28,560 --> 00:01:31,590\nSo that's what we're\ngonna take a look at now.\n\n23\n00:01:31,590 --> 00:01:33,550\nWhen we create a virtual machine?\n\n24\n00:01:33,550 --> 00:01:37,400\nWhat we're doing is creating a,\na like a container,\n\n25\n00:01:37,400 --> 00:01:40,085\na partition, on our physical server,\n\n26\n00:01:40,085 --> 00:01:44,210\nwhere we can start to run these virtual\nsystems, virtual operating systems.\n\n27\n00:01:44,210 --> 00:01:47,890\nAnd you can run as many as your\nhardware will provide, right.\n\n28\n00:01:47,890 --> 00:01:52,040\nSo the higher end your hardware,\nthe more virtual machines you can run,\n\n29\n00:01:52,040 --> 00:01:55,820\nthe lower end your hardware the less, and\nusually memory is our bottleneck because\n\n30\n00:01:55,820 --> 00:01:59,500\nyou got to be able to provide RAM\nto each of these virtual machines.\n\n31\n00:01:59,500 --> 00:02:02,045\nWhen we go to create a virtual machine\nthere's a few things we need to\n\n32\n00:02:02,045 --> 00:02:02,590\nthink about.\n\n33\n00:02:02,590 --> 00:02:05,603\nThe main thing reason that what\noperating system are we gonna run?\n\n34\n00:02:05,603 --> 00:02:10,603\nBecause when it comes to running\na guest inside of vSphere or\n\n35\n00:02:10,603 --> 00:02:16,605\non top of ESXi, there are certain\nsupported guest operating systems,\n\n36\n00:02:16,605 --> 00:02:21,230\nand so\nyou have the VMware compatibility guide.\n\n37\n00:02:21,230 --> 00:02:23,620\nI know I brought this\nup in other episodes.\n\n38\n00:02:23,620 --> 00:02:27,760\nWe just need to make sure that whatever\nguest it is we're about to run\n\n39\n00:02:27,760 --> 00:02:28,940\nis supported by VMware.\n\n40\n00:02:28,940 --> 00:02:32,400\nNow I'll tell you you can\nrun all sorts of guest OS's,\n\n41\n00:02:32,400 --> 00:02:35,750\neven ones that aren't\nsupported by VMware but\n\n42\n00:02:35,750 --> 00:02:39,390\nthere might be problems that just\nhaven't been tested and detected yet\n\n43\n00:02:39,390 --> 00:02:41,770\nby the guys at VMware, and they're\nnot even gonna be looking for them.\n\n44\n00:02:41,770 --> 00:02:46,320\nIf you run a fringe operating system if\nyou wanna run something like Windows 98.\n\n45\n00:02:46,320 --> 00:02:47,750\nRight.\n\n46\n00:02:47,750 --> 00:02:49,750\nYou can run Windows 98 on top of ESXi.\n\n47\n00:02:49,750 --> 00:02:51,815\nIt's actually not that hard to do it.\n\n48\n00:02:51,815 --> 00:02:55,010\nBut it's not supported by VMware.\n\n49\n00:02:55,010 --> 00:02:57,400\nSo if you run into any problems,\nyou're on your own.\n\n50\n00:02:57,400 --> 00:02:59,280\nThere might be certain\nthings that just don't work,\n\n51\n00:02:59,280 --> 00:03:03,270\nthings that VMware could fix, but\nthey're not going to because there's no\n\n52\n00:03:03,270 --> 00:03:06,130\nneed to support an operating\nsystem that's over 20 years old.\n\n53\n00:03:06,130 --> 00:03:07,110\nRight?\n\n54\n00:03:07,110 --> 00:03:08,640\nThe one I always hear about is OS/2.\n\n55\n00:03:08,640 --> 00:03:12,460\nThere's a lot of banks that are out\nthere that still need to run OS/2 for\n\n56\n00:03:12,460 --> 00:03:13,820\nvarious reasons.\n\n57\n00:03:13,820 --> 00:03:15,660\nNobody supports it anymore.\n\n58\n00:03:15,660 --> 00:03:20,220\nYou can get it to run under ESXi,\nbut they don't support it, and\n\n59\n00:03:20,220 --> 00:03:23,638\nso if you have any issues,\nagain, you're on your own.\n\n60\n00:03:23,638 --> 00:03:27,270\nSo we wanna make sure out guest OS is\nsupported, and when you come in here and\n\n61\n00:03:27,270 --> 00:03:31,240\ngo into the compatibility guide,\nyou can pick what your product is,\n\n62\n00:03:31,240 --> 00:03:35,100\nyour OS, and you can pick\nadditional criteria to specify\n\n63\n00:03:35,100 --> 00:03:37,110\nthe virtual machine you're\ntalking about running.\n\n64\n00:03:37,110 --> 00:03:41,130\nSo like here under OS type, we could\nsay that we're running a server and\n\n65\n00:03:41,130 --> 00:03:43,600\nthe OS family will be Windows.\n\n66\n00:03:43,600 --> 00:03:46,142\nAnd you can go through and\nyou specify like this.\n\n67\n00:03:46,142 --> 00:03:49,890\nOn the left side,\nwe tell it that we are dealing with ESXi,\n\n68\n00:03:49,890 --> 00:03:52,040\nparticularly 5.5 update 1.\n\n69\n00:03:52,040 --> 00:03:57,360\nAnd we can get really\nspecific as far as the OS's.\n\n70\n00:03:57,360 --> 00:04:00,270\nIn fact, just kind of scrolling down\nthis list, you see what's supported.\n\n71\n00:04:00,270 --> 00:04:03,910\nIf it's not in this list, then it's\nnot gonna be supported at all, but\n\n72\n00:04:03,910 --> 00:04:07,330\neven some of these that are limited\nto particular product versions.\n\n73\n00:04:07,330 --> 00:04:09,920\nSo we pick what it is\nthat we're looking for.\n\n74\n00:04:09,920 --> 00:04:13,960\nMaybe I want to run a version of\nWindows that isn't in this list.\n\n75\n00:04:13,960 --> 00:04:15,180\nLook at there, Windows 98.\n\n76\n00:04:15,180 --> 00:04:16,770\nLet's see if we can pull that up.\n\n77\n00:04:16,770 --> 00:04:22,100\nSo I want Windows 98 and\nI'll just put that back to all over there.\n\n78\n00:04:22,100 --> 00:04:24,670\nAnd let's see what we get down here.\n\n79\n00:04:24,670 --> 00:04:29,700\nAnd we get sorry there were no guest OS's\nmatching your search criteria, all right.\n\n80\n00:04:29,700 --> 00:04:32,540\nSo if I wanna run Windows 98,\nI'm on my own.\n\n81\n00:04:32,540 --> 00:04:35,400\nBut if I wanna run something\nlike Windows Server 2008 or\n\n82\n00:04:35,400 --> 00:04:37,950\nif I want to run Red Hat Linux, all right.\n\n83\n00:04:37,950 --> 00:04:42,400\nSo I want to run Red Hat Enterprise Linux,\nlet's do 7, Red Hat Enterprise Linux 7,\n\n84\n00:04:42,400 --> 00:04:46,010\njust came out a few weeks ago\nfrom when this video was filmed.\n\n85\n00:04:46,010 --> 00:04:47,480\nAnd so we can go in here and\n\n86\n00:04:47,480 --> 00:04:50,700\nwe can say, let's go and\nfind out if that's supported yet.\n\n87\n00:04:50,700 --> 00:04:52,300\nMaybe, maybe it isn't.\n\n88\n00:04:52,300 --> 00:04:55,840\nAnd so I update it, and sure enough, even\nthough it just came out a few weeks ago,\n\n89\n00:04:55,840 --> 00:05:00,310\nit is supported in ESXi 5.5 update 1.\n\n90\n00:05:00,310 --> 00:05:01,470\nWhat if I'm not running update 1?\n\n91\n00:05:01,470 --> 00:05:03,500\nOr what if I'm running 5.1?\n\n92\n00:05:03,500 --> 00:05:08,070\nWell I can update and look and\nI can see no it's not supported there.\n\n93\n00:05:08,070 --> 00:05:11,040\nSo the compatibility listing\nis gonna be really important.\n\n94\n00:05:11,040 --> 00:05:13,740\nYou can run unsupported OS's but\n\n95\n00:05:13,740 --> 00:05:16,837\nthe number one problem you are gonna\nbump into are the VMware tools.\n\n96\n00:05:18,200 --> 00:05:19,790\nWhat are the VMware tools?\n\n97\n00:05:19,790 --> 00:05:25,610\nWell when you install a guest, when you\ninstall an OS on a virtual machine,\n\n98\n00:05:25,610 --> 00:05:29,310\nthat operating system actually has\nno idea that it's being virtualized.\n\n99\n00:05:29,310 --> 00:05:31,510\nThey can see that it's running on real,\nphysical hardware.\n\n100\n00:05:31,510 --> 00:05:33,270\nIt doesn't know, right?\n\n101\n00:05:33,270 --> 00:05:36,440\nAnd that might be okay but\nit does cause some problems.\n\n102\n00:05:36,440 --> 00:05:39,130\nThere's some advanced\nfunctionality that we want,\n\n103\n00:05:39,130 --> 00:05:43,300\nthat we don't get if the guest\nOS is completely clueless.\n\n104\n00:05:43,300 --> 00:05:48,150\nSo for example, if a guest OS knows that\nits running on a virtual set of hardware,\n\n105\n00:05:48,150 --> 00:05:53,200\nthen when the host machine,\nthe ESXi box, goes to shut down,\n\n106\n00:05:53,200 --> 00:05:57,610\nthe guest machine, this virtual machine,\nwill know to shut down also.\n\n107\n00:05:57,610 --> 00:06:00,950\nBut if it's clueless, if it doesn't know\nthat it's running on top of a host and\n\n108\n00:06:00,950 --> 00:06:02,930\nthe host goes to shut down.\n\n109\n00:06:02,930 --> 00:06:05,405\nThe guest thinks that you just\nyanked the power cable out.\n\n110\n00:06:05,405 --> 00:06:09,724\nJust pulled the power plug right out and\nit'll do a nongraceful shut down.\n\n111\n00:06:09,724 --> 00:06:11,850\nSo it's definitely not\nsomething that we want.\n\n112\n00:06:11,850 --> 00:06:15,990\nSo we want to make sure that the guest\nOS is aware that its running on top\n\n113\n00:06:15,990 --> 00:06:19,580\nof virtualization, and the way we do\nthat is by installing a little software\n\n114\n00:06:19,580 --> 00:06:22,510\npackage called the VMware tools.\n\n115\n00:06:22,510 --> 00:06:27,520\nThe VMware tools are made up of drivers,\ndrivers that are built for that guest OS,\n\n116\n00:06:27,520 --> 00:06:31,150\nthat will tell it that it's\nrunning on top of ESXi and\n\n117\n00:06:31,150 --> 00:06:33,070\nwe'll set it up to do\nsome really neat things.\n\n118\n00:06:33,070 --> 00:06:35,260\nWe'll see it during the show\nhere as we create them.\n\n119\n00:06:35,260 --> 00:06:39,060\nThings like synchronizing the clock,\nand doing graceful shut downs,\n\n120\n00:06:39,060 --> 00:06:42,020\nand reporting health\ninformation to the host OS, so\n\n121\n00:06:42,020 --> 00:06:45,120\nthat we can monitor that,\nthat's all important stuff.\n\n122\n00:06:45,120 --> 00:06:48,390\nIf you pick a OS combination for\n\n123\n00:06:48,390 --> 00:06:53,090\nyour guest and host that are compatible,\nright, like we see right here.\n\n124\n00:06:53,090 --> 00:06:57,480\nThat means that I'm gonna have full\nsupport for installing the VMware tools.\n\n125\n00:06:57,480 --> 00:07:02,100\nBut if I pick an OS that's not compatible,\nI can still install it, but\n\n126\n00:07:02,100 --> 00:07:03,920\nI won't be able to install VMware tools,\nand\n\n127\n00:07:03,920 --> 00:07:07,970\nI'm gonna be missing certain components\nlike the ability to do graceful shutdowns.\n\n128\n00:07:07,970 --> 00:07:10,380\nAll right, so\nthat's the first thing that we need to do.\n\n129\n00:07:10,380 --> 00:07:13,710\nJust make sure that our guest OS is\ngoing to be compatible, all right.\n\n130\n00:07:13,710 --> 00:07:18,620\nThe second thing we need to do is we need\nto get the installation media for that OS.\n\n131\n00:07:18,620 --> 00:07:21,550\nVMware does not ship any\ninstallation media for\n\n132\n00:07:21,550 --> 00:07:23,320\ndesktop rating systems with their product.\n\n133\n00:07:23,320 --> 00:07:25,650\nSo when you install\nvSphere the first time,\n\n134\n00:07:25,650 --> 00:07:30,140\nand you bring up your first ESXi box,\nif you want to bring up a VM you've got\n\n135\n00:07:30,140 --> 00:07:32,880\nto have installation media somewhere else,\nall right?\n\n136\n00:07:32,880 --> 00:07:34,270\nYou can use a CD, right?\n\n137\n00:07:34,270 --> 00:07:36,800\nSo if you've got it burned to\na physical disk you can use\n\n138\n00:07:36,800 --> 00:07:38,670\nthat to install your guest.\n\n139\n00:07:38,670 --> 00:07:40,356\nOr you can install from an ISO image, and\n\n140\n00:07:40,356 --> 00:07:42,348\nI know I've mentioned\nthat in other episodes.\n\n141\n00:07:42,348 --> 00:07:45,050\nIn fact,\nI think it was in the last episode or\n\n142\n00:07:45,050 --> 00:07:48,338\nthe one before where we created\na shared data store and\n\n143\n00:07:48,338 --> 00:07:53,397\nI said you can put your ISO images in that\nshared data store and install from there.\n\n144\n00:07:53,397 --> 00:07:55,439\nAnd that's actually what I'm gonna do.\n\n145\n00:07:55,439 --> 00:08:00,361\nIs if I go into my Vcenter here,\nI've got a data store,\n\n146\n00:08:00,361 --> 00:08:03,578\nwhich I called my shared ISO store.\n\n147\n00:08:03,578 --> 00:08:05,230\nThis guy right here.\n\n148\n00:08:05,230 --> 00:08:08,870\nSo, that's a data store that all of\nmy virtual machines are connected to.\n\n149\n00:08:08,870 --> 00:08:12,370\nAnd if I take a look at it, and\nI go into the files in that data store,\n\n150\n00:08:12,370 --> 00:08:15,210\nyou'll see where I've copied\nsome ISOs over to it.\n\n151\n00:08:15,210 --> 00:08:17,130\nSo, I've got CentOS 6.5.\n\n152\n00:08:17,130 --> 00:08:19,620\nThat's a Red Hat Linux variant.\n\n153\n00:08:19,620 --> 00:08:23,200\nI've got Windows Server\n2008 R2 sitting there.\n\n154\n00:08:23,200 --> 00:08:24,990\nAnd then a bunch of VMWare disks.\n\n155\n00:08:24,990 --> 00:08:27,990\nSo, those are the only two real\nOSs I've got copied to it.\n\n156\n00:08:27,990 --> 00:08:31,190\nBut now if I ever wanna build up a virtual\nmachine that's running CentOS or\n\n157\n00:08:31,190 --> 00:08:33,830\nWindows Server 2008, I've got the ISO.\n\n158\n00:08:33,830 --> 00:08:35,660\nI've got the CD image right here.\n\n159\n00:08:35,660 --> 00:08:37,820\nI can mount it to the virtual machine and\ndo the install.\n\n160\n00:08:39,000 --> 00:08:40,700\nNow, both of those operating systems,\n\n161\n00:08:40,700 --> 00:08:45,450\nCentOS 6.5 and Windows Server\n2008 are fully supported by ESXI.\n\n162\n00:08:45,450 --> 00:08:47,120\nSo, I'm good to go.\n\n163\n00:08:47,120 --> 00:08:52,250\nAnd specifically,\nI'm running ESXI 5.5, update 1.\n\n164\n00:08:52,250 --> 00:08:53,170\nKnow which version you're running,\n\n165\n00:08:53,170 --> 00:08:55,090\nbecause that will effect\nwhich guest OS's you can run.\n\n166\n00:08:56,620 --> 00:08:59,560\nAlright, the next thing I need\nto think about is when I go\n\n167\n00:08:59,560 --> 00:09:01,262\nto create the virtual machine.\n\n168\n00:09:01,262 --> 00:09:06,009\nThe virtual machine creates\na appearance of certain hardware.\n\n169\n00:09:06,009 --> 00:09:09,388\nSo, the guest OS is going to\nsee a certain set of hardware.\n\n170\n00:09:09,388 --> 00:09:14,300\nAnd as the VMware Product Suite has\nevolved over the last 20 years.\n\n171\n00:09:14,300 --> 00:09:18,060\nSo has that virtual set of hardware\nthat we present to our guest OSs.\n\n172\n00:09:18,060 --> 00:09:21,900\nSo, they've made tweaks, improvements,\nupgrades, lots of changes.\n\n173\n00:09:22,910 --> 00:09:26,350\nSo, when you go to build a virtual\nmachine, one of the questions they'll ask\n\n174\n00:09:26,350 --> 00:09:29,540\nyou is, what version do you want\nthat virtual machine to be?\n\n175\n00:09:29,540 --> 00:09:33,410\nAnd they're talking about\nthe hardware version from VMware.\n\n176\n00:09:33,410 --> 00:09:35,330\nSo, here's the list.\n\n177\n00:09:35,330 --> 00:09:37,190\nThis is off of VMware's website.\n\n178\n00:09:37,190 --> 00:09:40,060\nAnd I'll post this link\nwith the show notes.\n\n179\n00:09:40,060 --> 00:09:45,610\nBut, basically, they have a table here\nthat lays out the different versions.\n\n180\n00:09:45,610 --> 00:09:50,925\nAnd it goes way back to the beginning,\nwhen you had the old ESX and GSX servers.\n\n181\n00:09:50,925 --> 00:09:54,245\nThey were creating virtual machines\nwith a hardware version of three.\n\n182\n00:09:54,245 --> 00:09:56,395\nAnd as they've updated the product, so\n\n183\n00:09:56,395 --> 00:10:01,325\nas we get to the newer stuff like\nESXI 5.0, was hardware version 8.\n\n184\n00:10:01,325 --> 00:10:03,825\nAnd ESX 5.1 was hardware version 9.\n\n185\n00:10:03,825 --> 00:10:07,000\nAnd ESX 5.5, that's now version 10.\n\n186\n00:10:07,000 --> 00:10:11,780\nSo, when we create new virtual machines,\nwe may be tempted to go straight to\n\n187\n00:10:11,780 --> 00:10:17,030\nversion 10 to be able to throw that\non our system and have it, right?\n\n188\n00:10:17,030 --> 00:10:19,190\nBut that creates a little\nbit of a problem.\n\n189\n00:10:19,190 --> 00:10:22,400\nIf you create a virtual machine\nthat's hardware version 10,\n\n190\n00:10:22,400 --> 00:10:28,220\nit can only run on ESXi 5.5 and\nhigher hosts.\n\n191\n00:10:28,220 --> 00:10:31,510\nIf you're using V motion and\nclustering support like that.\n\n192\n00:10:31,510 --> 00:10:34,460\nIf you've got multiple hosts that are out\nthere, some of which aren't 5.5 yet.\n\n193\n00:10:34,460 --> 00:10:40,650\nIf you still have some 5.1s or 5.0s,\nwell you won't be able to move this\n\n194\n00:10:40,650 --> 00:10:44,770\nguest over to one of those other machines\ncause the hardware version is too new.\n\n195\n00:10:44,770 --> 00:10:48,740\nSo, you don't necessarily jump on\na new hardware version right away.\n\n196\n00:10:48,740 --> 00:10:51,180\nYou need to find out what features\nare there and determine whether or\n\n197\n00:10:51,180 --> 00:10:53,310\nnot you're really ready to go\nwith that in your version.\n\n198\n00:10:53,310 --> 00:10:54,070\nAll right.\n\n199\n00:10:54,070 --> 00:10:57,320\nFor most people,\nVersion 8 has a lot of what they need.\n\n200\n00:10:57,320 --> 00:10:59,180\nAnd when you go out there\nin the enterprise world,\n\n201\n00:10:59,180 --> 00:11:01,975\nmost of the virtual machines you\nencounter will be Version 8.\n\n202\n00:11:01,975 --> 00:11:04,895\nThere's a big change from\nversion 7 to version 8.\n\n203\n00:11:04,895 --> 00:11:07,995\nThat's where we went\nfrom ESXi 4 to ESXi 5.\n\n204\n00:11:07,995 --> 00:11:09,585\nSo big jump.\n\n205\n00:11:09,585 --> 00:11:11,325\nAnd we got some new features.\n\n206\n00:11:11,325 --> 00:11:15,095\nOne of the best features, in my opinion,\nis USB pass through, right?\n\n207\n00:11:15,095 --> 00:11:15,785\nEvery now and\n\n208\n00:11:15,785 --> 00:11:21,410\nthen, you might have a USB device that you\nneed your guest operating system to see.\n\n209\n00:11:21,410 --> 00:11:24,610\nWell ,when you plug a USB\ndevice into an ESXi host\n\n210\n00:11:24,610 --> 00:11:27,960\nit connects to the host not the guests,\nright?\n\n211\n00:11:27,960 --> 00:11:31,280\nWell, that was true in ESXi version 4 and\nearlier.\n\n212\n00:11:31,280 --> 00:11:35,940\nBut in version 5 we now have\nthe ability to do USB pass through.\n\n213\n00:11:35,940 --> 00:11:38,670\nWe can plug in a USB device to the host.\n\n214\n00:11:38,670 --> 00:11:42,250\nAnd it can pass through all\nthe communications of that directly\n\n215\n00:11:42,250 --> 00:11:43,160\nto a guest.\n\n216\n00:11:43,160 --> 00:11:46,530\nAnd so, the guest will think that you\njust plugged that USB device into it.\n\n217\n00:11:46,530 --> 00:11:51,440\nSo, that's a reason why we might want\nto go with hardware version 8, right.\n\n218\n00:11:51,440 --> 00:11:54,210\nBut, why would we go with version 9 or\nversion 10?\n\n219\n00:11:54,210 --> 00:11:56,220\nYou need to look at the features.\n\n220\n00:11:56,220 --> 00:11:58,580\nAnd if there's a feature\nthat you absolutely need,\n\n221\n00:11:58,580 --> 00:12:01,600\nthat's when you move up to the newer\nhardware version, all right.\n\n222\n00:12:01,600 --> 00:12:05,520\nSo, this is the main article\nthat VMware has and like I said,\n\n223\n00:12:05,520 --> 00:12:08,020\nI'll post this with the show notes.\n\n224\n00:12:08,020 --> 00:12:12,859\nBut there's another link that I wanna give\nyou guys, and it's in the vSphere 5.5\n\n225\n00:12:12,859 --> 00:12:17,550\nDocumentation Center,\nwhere they list what those changes are.\n\n226\n00:12:17,550 --> 00:12:21,980\nWhy might you want to go with one\nof those newer versions, right?\n\n227\n00:12:21,980 --> 00:12:23,900\nAnd this article only\ngoes back to version 4.\n\n228\n00:12:23,900 --> 00:12:28,670\nBut if you're running something earlier\nthan ESX 3.5 you're in big trouble anyway,\n\n229\n00:12:28,670 --> 00:12:31,530\nso you've got different issues.\n\n230\n00:12:31,530 --> 00:12:35,190\nBut in production right now you're\nreally gonna see ESXi 4 and higher.\n\n231\n00:12:35,190 --> 00:12:39,160\nSo, don't expect to see hardware versions\nlower than these guys right here\n\n232\n00:12:39,160 --> 00:12:40,440\nin production.\n\n233\n00:12:40,440 --> 00:12:43,610\nBut if you look at them,\nthere's little changes that happened.\n\n234\n00:12:43,610 --> 00:12:48,460\nLike, when we went from version 4 to 5,\nyou're gonna see big differences here.\n\n235\n00:12:48,460 --> 00:12:51,743\nIn the previous versions,\nin the hardware versions 7 and\n\n236\n00:12:51,743 --> 00:12:54,692\nearlier, the maximum amount\nof memory was capped.\n\n237\n00:12:54,692 --> 00:13:00,130\nAnd you'll see here, that we've got\nthis one capped at 261 Gigs of RAM.\n\n238\n00:13:00,130 --> 00:13:04,150\nSo, you couldn't have more than 261\nGigs of RAM on a single guest OS.\n\n239\n00:13:04,150 --> 00:13:06,980\nBut, when you move up\nto hardware version 8,\n\n240\n00:13:06,980 --> 00:13:11,970\nit jumps up even higher and\nit jumps up to a Terabyte.\n\n241\n00:13:11,970 --> 00:13:14,880\nYou could have a Terabyte of\nRAM attached to a single VM.\n\n242\n00:13:14,880 --> 00:13:18,450\nNow, most of us aren't dealing with\nthat much memory right now anyways, so\n\n243\n00:13:18,450 --> 00:13:20,480\nit's not that big of deal right.\n\n244\n00:13:20,480 --> 00:13:24,200\nBut if you're running a high end data\ncenter you might have databases that need\n\n245\n00:13:24,200 --> 00:13:25,770\na lot of addressable memory.\n\n246\n00:13:25,770 --> 00:13:28,160\nAnd that extra bump right\nthere could be important.\n\n247\n00:13:28,160 --> 00:13:31,060\nHere's a bigger one though,\nLogical Processors.\n\n248\n00:13:31,060 --> 00:13:34,860\nA lot of us do deal with many,\nmany cores on our systems.\n\n249\n00:13:34,860 --> 00:13:38,550\nAnd so we might need a lot of logical\nprocessors to support some kind\n\n250\n00:13:38,550 --> 00:13:40,160\nof CPU intensive task.\n\n251\n00:13:40,160 --> 00:13:44,830\nWell, in hardware version 7, you could\nonly go to eight Logical processors.\n\n252\n00:13:44,830 --> 00:13:48,030\nBut in version 8,\nthey quadrupled it to 32.\n\n253\n00:13:48,030 --> 00:13:50,470\nIt doubled in version 9 to 64.\n\n254\n00:13:50,470 --> 00:13:53,750\nSo, in hardware version\n9 we can go even higher.\n\n255\n00:13:53,750 --> 00:13:56,580\nThat's a reason why we might want\nto go to hardware version nine.\n\n256\n00:13:56,580 --> 00:13:59,350\nNotice that version 10,\nit's the same for those values.\n\n257\n00:13:59,350 --> 00:14:02,800\nSo, that's not a reason to push us\nup to version 10 or the new 5.5 one.\n\n258\n00:14:04,040 --> 00:14:05,770\nAll right.\n\n259\n00:14:05,770 --> 00:14:10,150\nSo, then we've got virtual CPU based\non cores, which is basically the same.\n\n260\n00:14:10,150 --> 00:14:13,130\nLooking at some of the other ones,\nmaximum SCSI adapters,\n\n261\n00:14:13,130 --> 00:14:14,800\nthat hasn't changed in a long time.\n\n262\n00:14:14,800 --> 00:14:16,840\nA lot of these values haven't\nchanged in a long time.\n\n263\n00:14:16,840 --> 00:14:20,190\nSo, again,\nnot something that would push us higher.\n\n264\n00:14:20,190 --> 00:14:22,030\nBut SATA controllers.\n\n265\n00:14:22,030 --> 00:14:22,650\nAll right.\n\n266\n00:14:22,650 --> 00:14:27,690\nIf you wanna have a emulated serial ATA\ncontroller, notice that version nine and\n\n267\n00:14:27,690 --> 00:14:31,170\nearlier just didn't even support those but\nversion ten does.\n\n268\n00:14:31,170 --> 00:14:34,500\nNow, why would I wanna SATA controller,\na virtual SATA controller?\n\n269\n00:14:34,500 --> 00:14:37,740\nWell, this is something that's really\nuseful if you're doing virtual desktop\n\n270\n00:14:37,740 --> 00:14:38,870\nenvironments.\n\n271\n00:14:38,870 --> 00:14:42,720\nDesktop operating systems don't expect\nto have SCSI controllers, right.\n\n272\n00:14:42,720 --> 00:14:44,650\nWhat we normally see inside\nof a virtual machine.\n\n273\n00:14:44,650 --> 00:14:46,150\nThey expect to see Serial ATA.\n\n274\n00:14:46,150 --> 00:14:51,510\nAnd so, some desktop operating systems\nmay not function properly on top of ESXi.\n\n275\n00:14:51,510 --> 00:14:55,100\nWe didn't worry about that in the past,\nbecause virtualization was for servers.\n\n276\n00:14:55,100 --> 00:14:58,260\nBut now,\nwith virtual desktop infrastructure, VDI,\n\n277\n00:14:58,260 --> 00:15:02,810\nwe're seeing people deploy desktop\nOS's in vSphere a lot more commonly.\n\n278\n00:15:02,810 --> 00:15:04,061\nAnd so, that support is kinda handy.\n\n279\n00:15:05,953 --> 00:15:09,480\nSome of the other things you'll see,\nmost of these are common features.\n\n280\n00:15:09,480 --> 00:15:11,480\nI'm just trying to point out\nthe ones that are different,\n\n281\n00:15:11,480 --> 00:15:13,770\nthat would make us want to upgrade.\n\n282\n00:15:13,770 --> 00:15:17,220\nMaximum number of NICs,\nthat was boosted way back in 6 and 7.\n\n283\n00:15:17,220 --> 00:15:18,300\nLet's see.\n\n284\n00:15:19,720 --> 00:15:21,610\nI think that's about it.\n\n285\n00:15:21,610 --> 00:15:24,740\ne1000 support,\nthat was introduced in version 7.\n\n286\n00:15:24,740 --> 00:15:26,010\nOr E1000 E.\n\n287\n00:15:26,010 --> 00:15:27,560\nBetter compatibility there.\n\n288\n00:15:28,920 --> 00:15:31,980\nUSB 3.0 support was introduced with ESX 5.\n\n289\n00:15:31,980 --> 00:15:34,570\nSo, a couple of little differences there.\n\n290\n00:15:34,570 --> 00:15:38,669\nNot a whole heck of a lot to make us\njump on that new version right away.\n\n291\n00:15:38,669 --> 00:15:43,515\nAll right, so, just be aware that just\nbecause you can go to hardware version 10\n\n292\n00:15:43,515 --> 00:15:45,919\ndoesn't mean you necessarily should.\n\n293\n00:15:45,919 --> 00:15:50,791\nIf all of your servers are at ESX 5.5 and\nhigher right as new ones come out.\n\n294\n00:15:50,791 --> 00:15:53,681\nThen yeah,\nit's safe to go to hardware version ten.\n\n295\n00:15:53,681 --> 00:15:59,000\nAnd you can always upgrade the hardware\nversion of a VM after the fact.\n\n296\n00:15:59,000 --> 00:16:02,410\nSo if I create a VM today and\nI set it at hardware version eight because\n\n297\n00:16:02,410 --> 00:16:05,120\nI know it's the most compatible and\nit gives me what I need.\n\n298\n00:16:05,120 --> 00:16:09,090\nDown the road as new hardware versions\ncome out or I change my mind, I can\n\n299\n00:16:09,090 --> 00:16:12,687\nupgrade it to version nine or version\nten and it only takes a few minutes.\n\n300\n00:16:12,687 --> 00:16:14,800\nYou do have to shut the VM\ndown to do it though, so\n\n301\n00:16:14,800 --> 00:16:16,390\nthere's a little bit of down time.\n\n302\n00:16:16,390 --> 00:16:19,540\nBut it's a pretty painless process.\n\n303\n00:16:19,540 --> 00:16:22,380\nBut what you can't do,\nis downgrade the hardware,\n\n304\n00:16:22,380 --> 00:16:24,330\nbecause that causes various problems.\n\n305\n00:16:24,330 --> 00:16:27,500\nSo at that point you really have to\nclone the VM and make changes that way.\n\n306\n00:16:27,500 --> 00:16:29,760\nSo it's a little bit more\ninvolved to downgrade.\n\n307\n00:16:29,760 --> 00:16:30,990\nUpgrading is really easy.\n\n308\n00:16:32,410 --> 00:16:35,020\nAll right, so those are all\nthings we need to think about.\n\n309\n00:16:35,020 --> 00:16:37,090\nLet me recap cuz I talk about a lot,\nright?\n\n310\n00:16:37,090 --> 00:16:39,460\nFirst off, if we're gonna create a VM,\n\n311\n00:16:39,460 --> 00:16:42,320\nis the guest OS we're gonna\nrun supported by VMware?\n\n312\n00:16:42,320 --> 00:16:43,090\nAll right?\n\n313\n00:16:43,090 --> 00:16:44,270\nShould be yes.\n\n314\n00:16:44,270 --> 00:16:46,480\nSecondly, I need to get my install media.\n\n315\n00:16:46,480 --> 00:16:49,740\nA physical disk or an ISO image,\nwhichever I can get.\n\n316\n00:16:49,740 --> 00:16:50,390\nAll right?\n\n317\n00:16:50,390 --> 00:16:55,380\nAnd then thirdly, I need to decide\nwhat hardware version I want to run.\n\n318\n00:16:55,380 --> 00:16:55,950\nOkay?\n\n319\n00:16:55,950 --> 00:16:57,960\nPick a version and run with it.\n\n320\n00:16:59,070 --> 00:17:01,500\nAfter that,\nwe're ready to create our virtual machine.\n\n321\n00:17:01,500 --> 00:17:03,880\nAll right?\nSo after over four episodes,\n\n322\n00:17:03,880 --> 00:17:06,870\nwe're now ready to create our\nvery first virtual machine.\n\n323\n00:17:06,870 --> 00:17:10,510\nYou can create VM's in\nvCenter if you want.\n\n324\n00:17:10,510 --> 00:17:14,750\nOr you can create them in the vCenter\nvia the vSphere web client.\n\n325\n00:17:14,750 --> 00:17:18,230\nOr you can use the vSphere client\nitself on your own machine.\n\n326\n00:17:18,230 --> 00:17:20,140\nEither one is effective.\n\n327\n00:17:20,140 --> 00:17:23,930\nWhen you do it through vCenter we're\ngonna have a lot of targeting questions.\n\n328\n00:17:23,930 --> 00:17:26,200\nWhere do you want the virtual\nmachine to reside?\n\n329\n00:17:26,200 --> 00:17:29,010\nDo you want it to reside on this server or\nthat server?\n\n330\n00:17:29,010 --> 00:17:31,830\nDo you want it to reside in this\ndata center or that data center?\n\n331\n00:17:31,830 --> 00:17:36,190\nAnd that's important, because with\nvCenter we might be doing clustering.\n\n332\n00:17:36,190 --> 00:17:39,040\nWe might wanna have vMotion,\nwhere that VM, that guest,\n\n333\n00:17:39,040 --> 00:17:41,620\ncan jump from host to host to host.\n\n334\n00:17:41,620 --> 00:17:44,520\nSo you don't wanna tie it\nto one particular host.\n\n335\n00:17:44,520 --> 00:17:46,150\nIn the vSphere client,\n\n336\n00:17:46,150 --> 00:17:51,610\nthe actual local client, there we\nusually point to just one ESX server.\n\n337\n00:17:51,610 --> 00:17:55,150\nAnd when we start to create a VM, we don't\nneed all that targeting question stuff,\n\n338\n00:17:55,150 --> 00:17:57,830\ncuz it's just going right\nthere on that single machine.\n\n339\n00:17:57,830 --> 00:18:01,740\nSo, little variation in the setup\nprocess based on where we're doing it.\n\n340\n00:18:01,740 --> 00:18:05,786\nBut let's take a look at it through\nvcenter, so let me jump back over to that,\n\n341\n00:18:05,786 --> 00:18:07,050\nand we'll see it here.\n\n342\n00:18:07,050 --> 00:18:13,100\nSo I'm just gonna jump up to my top\nlevel and I'll go into my vCenter.\n\n343\n00:18:14,710 --> 00:18:17,940\nAnd right down here I've\ngot my virtual machines.\n\n344\n00:18:17,940 --> 00:18:20,110\nNow, I've already got some virtual\nmachines on my network but\n\n345\n00:18:20,110 --> 00:18:21,240\nI'm going to create an all new one.\n\n346\n00:18:21,240 --> 00:18:22,500\nAll right?\n\n347\n00:18:22,500 --> 00:18:26,790\nSo, let's say that we are setting\nup some kind of web application.\n\n348\n00:18:26,790 --> 00:18:29,580\nRight?\nSo, we've come up with the next great\n\n349\n00:18:29,580 --> 00:18:30,120\nthing right?\n\n350\n00:18:30,120 --> 00:18:32,830\nThe next Instagram or\nTwitter or whatever and\n\n351\n00:18:32,830 --> 00:18:34,860\nwe need to create some infrastructure for\nit.\n\n352\n00:18:34,860 --> 00:18:39,050\nSo I need a database server, I already\ngot one of those here is my app database.\n\n353\n00:18:39,050 --> 00:18:45,710\nI also need a web front end for it and I\nknow this is going to be a scalable app so\n\n354\n00:18:45,710 --> 00:18:50,840\nI might need more than one web server,\nI might need two web front ends and\n\n355\n00:18:50,840 --> 00:18:54,875\none database back end so I've already got\nthe database how about the web front end.\n\n356\n00:18:54,875 --> 00:18:57,970\nOkay, well I need to create a new one.\n\n357\n00:18:57,970 --> 00:19:00,380\nNow to create a new\nvirtual machine up top,\n\n358\n00:19:00,380 --> 00:19:02,950\nyou'll see a couple of\ndifferent options there.\n\n359\n00:19:02,950 --> 00:19:06,710\nThere's create a new virtual\nmachine from scratch and\n\n360\n00:19:06,710 --> 00:19:10,850\nthere's deploy an OVF template, okay.\n\n361\n00:19:10,850 --> 00:19:12,620\nSo, what the heck is that.\n\n362\n00:19:12,620 --> 00:19:15,850\nWell, when you go to creat a new\nvirtual machine you don't necessarily\n\n363\n00:19:15,850 --> 00:19:17,590\nhave to start from scratch.\n\n364\n00:19:17,590 --> 00:19:20,826\nThere's many companies out there\nthat sell their products and\n\n365\n00:19:20,826 --> 00:19:24,673\nrelease them in a virtual form where\nyou can just download an OVF template,\n\n366\n00:19:24,673 --> 00:19:28,946\na virtual machine export file, and you can\njust import that right in and now you've\n\n367\n00:19:28,946 --> 00:19:33,370\ngot that fully functional machine without\nhaving to go through the install process.\n\n368\n00:19:33,370 --> 00:19:35,240\nIt's kinda nice, all right.\n\n369\n00:19:35,240 --> 00:19:37,240\nVMware does that with vCenter.\n\n370\n00:19:37,240 --> 00:19:39,976\nInstead of installing vCenter\nyourself you can go and\n\n371\n00:19:39,976 --> 00:19:43,864\ndownload the vCenter appliance and all\nit is is an OVF file that you import and\n\n372\n00:19:43,864 --> 00:19:47,780\nnow you've got vCenter up and running\nwithout having to set it up yourself.\n\n373\n00:19:47,780 --> 00:19:52,171\nOr maybe you just heard of, well I'm using\nan example later in the show, Drupal,\n\n374\n00:19:52,171 --> 00:19:52,820\nall right?\n\n375\n00:19:52,820 --> 00:19:55,910\nDrupal is a web content\nmanagement platform.\n\n376\n00:19:55,910 --> 00:19:58,370\nMaybe you just heard about it and\nyou want to learn about it.\n\n377\n00:19:58,370 --> 00:20:00,192\nBut you're not sure if it's right for\nyou, so\n\n378\n00:20:00,192 --> 00:20:02,484\nyou don't want to learn\nthe whole installation process,\n\n379\n00:20:02,484 --> 00:20:05,820\nyou just want to get a quick demo\nenvironment up that you can mess with.\n\n380\n00:20:05,820 --> 00:20:10,930\nWell, there's company's out\nthere like Turn Key that sell,\n\n381\n00:20:10,930 --> 00:20:14,150\nor actually they give them away for\nfree, these templates.\n\n382\n00:20:14,150 --> 00:20:18,420\nAnd, so here is a Drupal 7 installation\n\n383\n00:20:18,420 --> 00:20:23,715\nthat's been done on top of Debian Linux,\nand it's It's set for 64 bit.\n\n384\n00:20:23,715 --> 00:20:26,455\nI downloaded it, here's the OVF file.\n\n385\n00:20:26,455 --> 00:20:30,905\nSo I don't have to install Linux,\ninstall VMware tools,\n\n386\n00:20:30,905 --> 00:20:35,445\ninstall Drupal and all of its requirements\nto do its basic configuration.\n\n387\n00:20:35,445 --> 00:20:39,805\nI can just import this, and\nnow the virtual machine is ready to rock.\n\n388\n00:20:39,805 --> 00:20:41,385\nAnd off I go, right.\n\n389\n00:20:41,385 --> 00:20:44,175\nThat's what that OVF template button is,\nright.\n\n390\n00:20:44,175 --> 00:20:47,790\nThat allows us to quickly provision\nmachines that have already been defined.\n\n391\n00:20:48,960 --> 00:20:51,600\nBut we're gonna create one from scratch,\nso I'm gonna go ahead and\n\n392\n00:20:51,600 --> 00:20:54,040\nchoose this option over here\nto create one from scratch.\n\n393\n00:20:55,550 --> 00:20:57,910\nAll right, now when we go to deploy it,\n\n394\n00:20:57,910 --> 00:21:00,800\nit's gonna ask us a few questions\nhere as we run through.\n\n395\n00:21:00,800 --> 00:21:02,530\nAre we creating a new virtual machine?\n\n396\n00:21:02,530 --> 00:21:04,290\nAnd that's exactly what I wanna do.\n\n397\n00:21:04,290 --> 00:21:08,560\nOr we could deploy from a template if\nwe already had a template in place and\n\n398\n00:21:08,560 --> 00:21:10,410\nI'll talk more about those later.\n\n399\n00:21:10,410 --> 00:21:15,720\nWe could also clone an existing machine\nthat might be that I've got one VM setup,\n\n400\n00:21:15,720 --> 00:21:18,150\nso I'll just clone it and\nuse it, all right.\n\n401\n00:21:18,150 --> 00:21:22,170\nWell, we'll do that later, for right\nnow I'm just gonna start from scratch.\n\n402\n00:21:22,170 --> 00:21:26,070\nWe could clone a virtual machine to a\ntemplate if we wanted to make a template,\n\n403\n00:21:26,070 --> 00:21:29,320\nwe can clone a template to a template\nif we wanted to duplicate that, or\n\n404\n00:21:29,320 --> 00:21:33,100\ncovert a template to a virtual machine,\nbringing that template live.\n\n405\n00:21:33,100 --> 00:21:36,710\nBut what we're going to chose nine\ntimes out of ten is this guy up here,\n\n406\n00:21:36,710 --> 00:21:37,980\ncreate a new virtual machine.\n\n407\n00:21:38,990 --> 00:21:39,730\nAll right.\n\n408\n00:21:39,730 --> 00:21:40,680\nNow some settings.\n\n409\n00:21:40,680 --> 00:21:42,020\nI need to give it a name.\n\n410\n00:21:42,020 --> 00:21:45,990\nThis is gonna be my app web server, and\nI'm gonna plan for more of them, so\n\n411\n00:21:45,990 --> 00:21:49,600\nI'm just gonna call it app dash web one,\nall right?\n\n412\n00:21:49,600 --> 00:21:51,360\nIt's asking where I wanna put it.\n\n413\n00:21:51,360 --> 00:21:54,038\nAnd so, I've only got one data\ncenter here, the ITProTV labs,\n\n414\n00:21:54,038 --> 00:21:54,990\nso I'll choose that.\n\n415\n00:21:57,160 --> 00:21:59,280\nAnd in that lab, I've got these hosts.\n\n416\n00:21:59,280 --> 00:22:01,330\nWhich host do I wanna put it on?\n\n417\n00:22:01,330 --> 00:22:03,370\nI'm gonna put this one on server two.\n\n418\n00:22:06,610 --> 00:22:09,410\nThen, it's gonna ask me where\nI want to store the files.\n\n419\n00:22:09,410 --> 00:22:11,370\nNow, what files is it talking about?\n\n420\n00:22:11,370 --> 00:22:15,042\nWhen we create a virtual machine, there's\nseveral files that are created, but\n\n421\n00:22:15,042 --> 00:22:17,660\nthere's two that are really important,\nright?\n\n422\n00:22:17,660 --> 00:22:21,170\nOne of them is a VMX file,\nwhich has our configuration.\n\n423\n00:22:21,170 --> 00:22:24,100\nIt states all the information\nabout that virtual machine.\n\n424\n00:22:24,100 --> 00:22:27,940\nIts name, how much memory it has,\nwhat hard drives are attached to it,\n\n425\n00:22:27,940 --> 00:22:29,760\nwhat networks are attached to it.\n\n426\n00:22:29,760 --> 00:22:33,360\nAll the details about the hardware\nconfiguration for that virtual machine.\n\n427\n00:22:33,360 --> 00:22:37,680\nAnd then the other file is a VMDK file,\nand\n\n428\n00:22:37,680 --> 00:22:41,350\nthe VMDK, that's a VMware disk file.\n\n429\n00:22:41,350 --> 00:22:42,720\nThat's the hard drive.\n\n430\n00:22:42,720 --> 00:22:45,630\nAll the content that we copy to this\nvirtual machine's hard drive will go in\n\n431\n00:22:45,630 --> 00:22:46,760\nthat VMDK file.\n\n432\n00:22:46,760 --> 00:22:50,360\nAnd you can have more than one hard drive,\nyou'll just have more than one VMDK file.\n\n433\n00:22:51,370 --> 00:22:54,510\nBut there'll be at least one created\nby default because that's where\n\n434\n00:22:54,510 --> 00:22:56,060\nwe're gonna install our OS.\n\n435\n00:22:57,420 --> 00:22:59,730\nSo I'm gonna go and\nput this one local just so\n\n436\n00:22:59,730 --> 00:23:01,190\nthe installation goes a little faster.\n\n437\n00:23:02,460 --> 00:23:05,130\nI could put it on my shared data\nstorage right there if I wanted.\n\n438\n00:23:05,130 --> 00:23:09,290\nI've got a terrabyte drive out there but\nfor right now, I'll just leave it be.\n\n439\n00:23:11,160 --> 00:23:12,480\nAll right?\n\n440\n00:23:12,480 --> 00:23:16,740\nThen, it's gonna ask what I'm gonna\nbe compatible with, all right?\n\n441\n00:23:16,740 --> 00:23:19,620\nAnd what it's really asking is\nwhat hardware version do I want.\n\n442\n00:23:19,620 --> 00:23:21,910\nAnd see how it defaults to ESXI 5.5 and\nlater.\n\n443\n00:23:21,910 --> 00:23:26,030\nAnd it says this virtual machine,\nVM version 10,\n\n444\n00:23:26,030 --> 00:23:29,163\nprovides the best performance,\nblah blah blah, under 5.5.\n\n445\n00:23:29,163 --> 00:23:33,340\nAll right, so there's what it's telling\nyou, which hardware version do I want.\n\n446\n00:23:33,340 --> 00:23:37,075\nAnd if I drop that down, I can pick from\nthe others, and you'll see updates to\n\n447\n00:23:37,075 --> 00:23:40,296\nreflect that hardware version, and\nit just tells me as a warning,\n\n448\n00:23:40,296 --> 00:23:43,996\nsome virtual machine hardware features\nare unavailable with this option.\n\n449\n00:23:43,996 --> 00:23:46,921\nIf there was anything new\nthat was added under ten,\n\n450\n00:23:46,921 --> 00:23:49,108\nI won't have that when I choose nine.\n\n451\n00:23:49,108 --> 00:23:54,476\nAnd the further back I go, like if I\ngo back to 4.0 I'm losing more and\n\n452\n00:23:54,476 --> 00:23:57,535\nmore features by going back really far.\n\n453\n00:23:57,535 --> 00:23:59,900\nAll right, I'm gonna go ahead and\ndo 5.1 just so\n\n454\n00:23:59,900 --> 00:24:02,760\nI can show you guys the upgrade\nprocess after this is all done.\n\n455\n00:24:04,630 --> 00:24:05,920\nAll right.\n\n456\n00:24:05,920 --> 00:24:08,280\nOn the next screen, it's gonna\nask me what guest OS I'm running.\n\n457\n00:24:08,280 --> 00:24:12,060\nNow, remember,\nVMware doesn't include installation media.\n\n458\n00:24:12,060 --> 00:24:13,380\nBut what they do is,\n\n459\n00:24:13,380 --> 00:24:18,930\nthey have certain prebuilt configurations\nthat improve compatibility with the OS's.\n\n460\n00:24:18,930 --> 00:24:20,700\nSo that's why it's asking here.\n\n461\n00:24:20,700 --> 00:24:22,900\nThey don't really care what OS we run,\n\n462\n00:24:22,900 --> 00:24:25,720\nbut they can help us out to\nmake sure that its successful.\n\n463\n00:24:25,720 --> 00:24:28,780\nSo they're having us pick\nbasically a hardware template.\n\n464\n00:24:28,780 --> 00:24:29,390\nSo I'm gonna tell.\n\n465\n00:24:29,390 --> 00:24:31,740\nThis is Linux,\nI'm gonna install Linux on it.\n\n466\n00:24:31,740 --> 00:24:35,040\nAnd I'm gonna install CentOS 6.5.\n\n467\n00:24:35,040 --> 00:24:37,780\nCentOS is a clone of Red Hat.\n\n468\n00:24:37,780 --> 00:24:40,830\nSo I could pick Red Hat 6 but\n\n469\n00:24:40,830 --> 00:24:43,780\nI'm pretty sure CentOS has it's\nown entry so let me find it.\n\n470\n00:24:43,780 --> 00:24:44,502\nThere we go.\n\n471\n00:24:44,502 --> 00:24:48,866\nSo we've got CentOS 4, 5,\nand 6, 32 bit or 64 bit.\n\n472\n00:24:48,866 --> 00:24:50,850\nI'm gonna do a 64 bit install.\n\n473\n00:24:50,850 --> 00:24:54,776\nThat 64 or 32 bit, that's a big\ndifference, right, so you've gotta make\n\n474\n00:24:54,776 --> 00:25:01,100\nsure you chose the right one based on\nthe OS you're installing All right.\n\n475\n00:25:01,100 --> 00:25:04,960\nThen it's gonna give me that\ndefault hardware template.\n\n476\n00:25:04,960 --> 00:25:07,500\nSo it's saying, for CentOS,\nhere's what we recommend.\n\n477\n00:25:07,500 --> 00:25:10,966\nAnd it's giving me that list of\nall the stuff they recommend, but\n\n478\n00:25:10,966 --> 00:25:14,620\nwe can always change it, and\nthere will usually be a few things that we\n\n479\n00:25:14,620 --> 00:25:18,043\nwanna change, so for\nexample the new hard disk it's creating.\n\n480\n00:25:18,043 --> 00:25:22,804\nThey're recommending a 16 gig hard drive,\nokay, I might not need that much,\n\n481\n00:25:22,804 --> 00:25:26,164\nI might shrink it down if I\nknow I'm gonna be doing a very,\n\n482\n00:25:26,164 --> 00:25:28,351\nvery streamlined install, right?\n\n483\n00:25:28,351 --> 00:25:31,447\nOr I might wanna make it bigger,\nI might wanna go to 36 gigs or\n\n484\n00:25:31,447 --> 00:25:34,880\nsomething to make sure I've\ngot enough room later on.\n\n485\n00:25:34,880 --> 00:25:35,580\nSo it's up to you.\n\n486\n00:25:35,580 --> 00:25:36,813\nYou can start to manipulate that.\n\n487\n00:25:36,813 --> 00:25:40,938\nThe amount of memory,\nthe amount of virtual CPU's, all of these\n\n488\n00:25:40,938 --> 00:25:45,438\nare different things that we can tweak and\nchange based on what we want.\n\n489\n00:25:45,438 --> 00:25:46,410\nAll right.\n\n490\n00:25:46,410 --> 00:25:48,860\nNow you can always change this\nstuff after the fact too, so\n\n491\n00:25:48,860 --> 00:25:50,800\nwhat you pick here is not set in stone.\n\n492\n00:25:50,800 --> 00:25:54,260\nIt is what you're gonna run with, but\nyou can go and manipulate that later on.\n\n493\n00:25:54,260 --> 00:25:54,930\nAnd I'll come back and\n\n494\n00:25:54,930 --> 00:25:57,070\nlook at some of these other\noptions later on in the show too.\n\n495\n00:25:58,410 --> 00:25:59,580\nAll right.\n\n496\n00:25:59,580 --> 00:26:01,340\nI'll go and hit next.\n\n497\n00:26:01,340 --> 00:26:02,690\nAnd now it just give me the summary.\n\n498\n00:26:02,690 --> 00:26:05,530\nAnd it's gonna go ahead and\ncreate it, all right.\n\n499\n00:26:05,530 --> 00:26:08,860\nNow when it creates it,\nit's gonna whip up that virtual machine.\n\n500\n00:26:08,860 --> 00:26:13,820\nThe virtual machine now exists,\nexcept it's got an empty hard drive.\n\n501\n00:26:13,820 --> 00:26:17,490\nThe hard drive is blank and\nthere's no operating system on it.\n\n502\n00:26:17,490 --> 00:26:21,030\nSo my next step needs to be\ninstalling the operating system.\n\n503\n00:26:22,050 --> 00:26:24,280\nNow I'm normally gonna\ninstall that from an ISO, but\n\n504\n00:26:24,280 --> 00:26:26,600\nyou could install from\na physical disk if you want.\n\n505\n00:26:26,600 --> 00:26:29,980\nBut that's gonna need to be our first\nstep is getting that installation media\n\n506\n00:26:29,980 --> 00:26:31,390\ninto this machine.\n\n507\n00:26:31,390 --> 00:26:35,970\nNow we can connect to the console of\nthe machine to see what's on its screen.\n\n508\n00:26:35,970 --> 00:26:40,070\nBut you can only connect to the console\nafter the machine is already turned on\n\n509\n00:26:40,070 --> 00:26:43,910\nwhich is a little late to get in there and\neffect the boot process.\n\n510\n00:26:43,910 --> 00:26:47,980\nSo if I want to boot from an installation\nmedia, I actually need to edit the virtual\n\n511\n00:26:47,980 --> 00:26:52,110\nmachine, and\nput the disk in there before I turn it on.\n\n512\n00:26:52,110 --> 00:26:55,680\nSo that's what I'm gonna do, I'm gonna\nedit this app web one machine that we just\n\n513\n00:26:55,680 --> 00:27:00,560\ncreated, I'm just gonna right click\non it and go into edit settings.\n\n514\n00:27:02,290 --> 00:27:05,090\nAnd I'm gonna insert\na disc into its drive.\n\n515\n00:27:05,090 --> 00:27:06,480\nSo here's the various settings.\n\n516\n00:27:06,480 --> 00:27:09,898\nAnd of the devices was this, CD/DVD drive.\n\n517\n00:27:09,898 --> 00:27:13,430\nAll right, now it's asking me\nwhat's gonna be in that drive, and\n\n518\n00:27:13,430 --> 00:27:15,594\nright here it's saying client device,\nokay.\n\n519\n00:27:15,594 --> 00:27:20,140\nWell what that's talking about is just\nyou know basically nothing in my case.\n\n520\n00:27:20,140 --> 00:27:23,320\nBut if I drop it down I\ncan choose host device.\n\n521\n00:27:23,320 --> 00:27:26,620\nThat's the CD drive on my server.\n\n522\n00:27:26,620 --> 00:27:29,080\nSo this is on ESX dash server two.\n\n523\n00:27:29,080 --> 00:27:30,740\nSo if I choose host device,\n\n524\n00:27:30,740 --> 00:27:34,220\nit's gonna connect to\nthe physical drive on that host.\n\n525\n00:27:34,220 --> 00:27:36,280\nOn ESX server two.\n\n526\n00:27:36,280 --> 00:27:39,430\nSo I can walk over there, stick the disk\nin that, and boot off it and install.\n\n527\n00:27:40,460 --> 00:27:44,230\nOr I can choose a data store ISO file.\n\n528\n00:27:44,230 --> 00:27:48,760\nWhen I choose that, it lets me browse\nmy data stores, and I can find\n\n529\n00:27:48,760 --> 00:27:52,180\nan ISO file from here, and I'm gonna find\nthat CentOS installation, there it is.\n\n530\n00:27:53,790 --> 00:27:55,080\nAnd I'll hit OK.\n\n531\n00:27:55,080 --> 00:27:59,400\nAnd now it's gonna insert that\none into the machine, all right.\n\n532\n00:27:59,400 --> 00:28:03,650\nIt's got a connect option here, I can\ncheck that, and that says when we power\n\n533\n00:28:03,650 --> 00:28:08,820\non, have this already in the drive, all\nright, I need that so I can boot up on it.\n\n534\n00:28:08,820 --> 00:28:13,545\nSo I'm just gonna check that off and\nI'll hit Ok.\n\n535\n00:28:13,545 --> 00:28:17,676\nAll right, now that that's done\nI'm ready to fire this up and\n\n536\n00:28:17,676 --> 00:28:22,449\nactually boot into my operating system and\ndo the install, all right.\n\n537\n00:28:22,449 --> 00:28:25,540\nSo it's powered off right now I'm\ngonna go ahead and power it on.\n\n538\n00:28:25,540 --> 00:28:27,050\nSo I'll just right click and hit power on.\n\n539\n00:28:29,000 --> 00:28:31,750\nAnd it just takes a second to\nactually flip the power on it.\n\n540\n00:28:31,750 --> 00:28:35,550\nAnd then I'm gonna right click on it and\nhit open console.\n\n541\n00:28:35,550 --> 00:28:39,420\nNow I can't remember if we didn't install\nthe plugin then we won't be able to see\n\n542\n00:28:39,420 --> 00:28:40,550\nthe console.\n\n543\n00:28:40,550 --> 00:28:43,580\nI'm pretty sure I did those,\nso let's verify.\n\n544\n00:28:43,580 --> 00:28:46,250\nYou know, way back when we first\nlogged into the vSphere web\n\n545\n00:28:46,250 --> 00:28:49,820\nclient there was that plugin that we\ninstalled which enables the console view.\n\n546\n00:28:49,820 --> 00:28:51,200\nSo I should have that.\n\n547\n00:28:51,200 --> 00:28:53,050\nYeah.\nIf I didn't I would have already received\n\n548\n00:28:53,050 --> 00:28:55,470\nan error saying I was missing the plugin.\n\n549\n00:28:55,470 --> 00:28:57,000\nSo this is gonna let me see the console.\n\n550\n00:28:57,000 --> 00:29:00,320\nNow I can see what's on\nthe screen of that system.\n\n551\n00:29:00,320 --> 00:29:01,400\nNow I'll tell you,\n\n552\n00:29:01,400 --> 00:29:06,030\nthis is one of the bigger limitations\nof using the vSphere Web Client.\n\n553\n00:29:06,030 --> 00:29:10,250\nThe console, I know the VMware guys say\nit's the same, but to me it's a little bit\n\n554\n00:29:10,250 --> 00:29:14,880\nmore sluggish than the console that you\nhave in the regular vSphere client, and so\n\n555\n00:29:14,880 --> 00:29:18,120\nsometimes I'll find myself going to\nthe regular vSphere client for this part.\n\n556\n00:29:18,120 --> 00:29:19,928\nBut it doesn't matter.\n\n557\n00:29:19,928 --> 00:29:23,920\nOnce the OS is installed, you'll normally\nremote directly into the guest OS and\n\n558\n00:29:23,920 --> 00:29:25,640\nso you're not using\nthe VMware pieces at all.\n\n559\n00:29:25,640 --> 00:29:29,000\nSo it's usually just during\nthe installation that we need this, right.\n\n560\n00:29:29,000 --> 00:29:32,370\nBut there is a full screen button up\nhere that helps out a little bit.\n\n561\n00:29:32,370 --> 00:29:34,060\nAnd we'll get that up on your screen.\n\n562\n00:29:34,060 --> 00:29:37,520\nBut the video drivers for\nVMware aren't loaded yet.\n\n563\n00:29:37,520 --> 00:29:40,820\nSo it's not gonna automatically\nscale to fill my screen.\n\n564\n00:29:40,820 --> 00:29:43,530\nOnce the VM tools are installed,\nwe'll get autoscaling and\n\n565\n00:29:43,530 --> 00:29:44,590\nthings will look a lot nicer.\n\n566\n00:29:45,900 --> 00:29:48,300\nSo for me it doesn't really matter\nwhether I go full screen or\n\n567\n00:29:48,300 --> 00:29:50,400\nnot, because it's not scaling.\n\n568\n00:29:51,530 --> 00:29:52,110\nAll right.\n\n569\n00:29:52,110 --> 00:29:55,420\nBut what's happening now is I'm\nbooting off that CentOS disk, and\n\n570\n00:29:55,420 --> 00:30:00,410\nI can go through and I can install CentOS\nand so that's exactly what I'm gonna do.\n\n571\n00:30:00,410 --> 00:30:04,880\nNow because the VM tool drivers\naren't loaded, my keyboard and\n\n572\n00:30:04,880 --> 00:30:08,520\nmouse when you click on that\nscreen to start working in it,\n\n573\n00:30:08,520 --> 00:30:11,150\nit's gonna take over your keyboard and\nmouse.\n\n574\n00:30:11,150 --> 00:30:14,650\nAnything I type is now going to the\nvirtual machine and if I move my mouse,\n\n575\n00:30:14,650 --> 00:30:17,750\nI don't even see my mouse cursor anymore,\nit's disappeared, right?\n\n576\n00:30:17,750 --> 00:30:21,630\nThat's because they're trapped\ninside of the virtual machine.\n\n577\n00:30:21,630 --> 00:30:24,820\nSo there's a nice little shortcut, they\nhave it written right there on the screen.\n\n578\n00:30:24,820 --> 00:30:27,520\nWhich is if you want to\nrelease your keyboard and\n\n579\n00:30:27,520 --> 00:30:29,760\nmouse to get them out\nof the virtual machine,\n\n580\n00:30:29,760 --> 00:30:33,900\nsee how my mouse is getting stuck on those\nedges and I can't get outside of it.\n\n581\n00:30:33,900 --> 00:30:38,750\nIf you just tap control+alt on your\nkeyboard it releases the mouse, and\n\n582\n00:30:38,750 --> 00:30:41,230\nyou can get free and you can start\nto work with the machine again.\n\n583\n00:30:41,230 --> 00:30:43,690\nSo that's a nice little\nshortcut to remember.\n\n584\n00:30:45,520 --> 00:30:46,220\nAll right.\n\n585\n00:30:46,220 --> 00:30:50,760\nWell, I'm gonna do a quick install of\nCentOS here, and this isn't a CentOS\n\n586\n00:30:50,760 --> 00:30:54,040\ncertification, although if you wanna learn\nit, we cover it in our Linux Plush show.\n\n587\n00:30:54,040 --> 00:30:56,500\nYou're more than welcome to jump over and\ncheck out.\n\n588\n00:30:56,500 --> 00:31:00,370\nBut I'm just gonna do a basic\ninstall here, nothing too special.\n\n589\n00:31:00,370 --> 00:31:01,440\nAnd you'll see it.\n\n590\n00:31:01,440 --> 00:31:04,470\nIt's recognizing that 36 gig\nhard drive that we created.\n\n591\n00:31:04,470 --> 00:31:08,472\nSo I'm gonna tell it to go ahead and\nformat that thing.\n\n592\n00:31:08,472 --> 00:31:11,300\nAnd we'll just get it set\nup the rest of the way.\n\n593\n00:31:11,300 --> 00:31:13,320\nActually, I need to make sure\nthe network adapter gets turned on.\n\n594\n00:31:13,320 --> 00:31:16,760\nLet me go back a screen.\n\n595\n00:31:16,760 --> 00:31:21,788\nThere's a few annoying things about the\nway that Linux sets up, and one of those\n\n596\n00:31:21,788 --> 00:31:26,685\nis network supports, so let me just fix\nthat before we run into that problem.\n\n597\n00:31:28,670 --> 00:31:29,290\nThere we go.\n\n598\n00:31:31,790 --> 00:31:34,211\nAnd I'll assign a super secret password.\n\n599\n00:31:43,839 --> 00:31:46,002\nAll right, so\nit's gonna format that hard drive,\n\n600\n00:31:46,002 --> 00:31:48,282\nit's just warning me that\nit's gonna lose the data.\n\n601\n00:31:48,282 --> 00:31:53,262\nWell I just created this virtual machine,\nso its virtual hard drive is blank.\n\n602\n00:31:53,262 --> 00:31:55,480\nI don't care that it's gonna format it,\nright.\n\n603\n00:31:55,480 --> 00:31:58,400\nSo, it's gonna format it and\nget ready to do that install.\n\n604\n00:31:58,400 --> 00:32:01,420\nAnd, as soon as the install\nis done running, we'll go and\n\n605\n00:32:01,420 --> 00:32:02,940\ntake a look at the other option.\n\n606\n00:32:02,940 --> 00:32:05,610\nActually, you know, looking at the clock,\nit's about time for a break, anyway.\n\n607\n00:32:05,610 --> 00:32:06,920\nSo, why don't we do this.\n\n608\n00:32:06,920 --> 00:32:10,130\nI'll finish this CentOS\ninstall during the break.\n\n609\n00:32:10,130 --> 00:32:13,470\nAnd when we get back, we'll get a chance\nto see the virtual machine actually up and\n\n610\n00:32:13,470 --> 00:32:16,470\nrunning, I think that will be a good time.\n\n611\n00:32:16,470 --> 00:32:17,834\nSo yeah, let's stop here and\n\n612\n00:32:17,834 --> 00:32:21,122\ntake a break and when we get back,\nwe'll finish this virtual machine.\n\n613\n00:32:21,122 --> 00:32:27,856\n[MUSIC]\n\n614\n00:32:27,856 --> 00:32:29,621\n[SOUND] All right, welcome back everybody.\n\n615\n00:32:29,621 --> 00:32:33,770\nOkay, so during the break,\nthe installation of CentOS finished.\n\n616\n00:32:33,770 --> 00:32:38,310\nIt fully installed, it rebooted, and now\nit's up and running and I'm done right?\n\n617\n00:32:38,310 --> 00:32:40,180\nWell, I'm sort of done.\n\n618\n00:32:40,180 --> 00:32:42,660\nNormally this is the part where\nI'd launch into CentOS and\n\n619\n00:32:42,660 --> 00:32:45,940\nstart doing all the various\ncustomations I do there, right?\n\n620\n00:32:45,940 --> 00:32:47,710\nCreating a user account that's not rude.\n\n621\n00:32:47,710 --> 00:32:51,380\nit's securing this system,\ndoing the updates, installing software,\n\n622\n00:32:51,380 --> 00:32:52,160\nall that other good stuff.\n\n623\n00:32:53,250 --> 00:32:56,370\nOr if this was Windows I'd have a whole\ndifferent set of stuff that I'd follow\n\n624\n00:32:56,370 --> 00:32:59,095\nthrough with Windows to get\nit ready in my environment.\n\n625\n00:32:59,095 --> 00:33:04,005\nBut before I do either of those,\nI need to make sure that the OS is happy\n\n626\n00:33:04,005 --> 00:33:08,725\nrunning on top of ESXi, and the main way I\ndo that is by installing the VMware tool.\n\n627\n00:33:08,725 --> 00:33:13,425\nSo I need to teach it that it's running\non top of a virtualization host.\n\n628\n00:33:13,425 --> 00:33:14,015\nOkay?\n\n629\n00:33:14,015 --> 00:33:16,298\nSo we need to get that installed and\nthat needs to be our next step.\n\n630\n00:33:16,298 --> 00:33:19,052\nAnd if you don't, right,\nif you don't install the tools,\n\n631\n00:33:19,052 --> 00:33:21,429\nyou'll actually see some\nwarnings pop up about it.\n\n632\n00:33:21,429 --> 00:33:24,994\nSo for example here I'm in vCenter and\nI browse through my machine.\n\n633\n00:33:24,994 --> 00:33:28,680\nIf I go to the summary of\nthe machine I get that warning.\n\n634\n00:33:28,680 --> 00:33:31,000\nVMware tools is not installed\non this virtual machine.\n\n635\n00:33:31,000 --> 00:33:34,260\nAnd you'll start to receive notifications\nperiodically that telling you\n\n636\n00:33:34,260 --> 00:33:35,690\nthose aren't installed.\n\n637\n00:33:35,690 --> 00:33:36,980\nAnd as long as they're not installed,\n\n638\n00:33:36,980 --> 00:33:39,350\nthere's certain functionality\nthat just won't work.\n\n639\n00:33:39,350 --> 00:33:43,070\nLike USB pass-through won't work unless\nyou have the VM Tools installed.\n\n640\n00:33:43,070 --> 00:33:45,950\nSo there's little things like that\nthat we need to get taken care of.\n\n641\n00:33:47,000 --> 00:33:49,300\nTo install these tools is\npretty straight forward.\n\n642\n00:33:49,300 --> 00:33:53,190\nIf you're in the regular vSphere client,\nyou can just right click on the VM and\n\n643\n00:33:53,190 --> 00:33:56,730\nchoose to install the VMware Tools.\n\n644\n00:33:56,730 --> 00:34:01,230\nIf you're in the vCenter web client,\nyou can just use the link right here.\n\n645\n00:34:01,230 --> 00:34:04,470\nSo I'll go ahead and\nhit install VMware Tools.\n\n646\n00:34:04,470 --> 00:34:07,710\nNow, it's not actually installing them.\n\n647\n00:34:07,710 --> 00:34:12,330\nAll it does is it puts an ISO\nimage that has the tools on it.\n\n648\n00:34:12,330 --> 00:34:16,900\nIt puts it in the virtual CD drive of\nthat machine and then just sits there.\n\n649\n00:34:16,900 --> 00:34:19,995\nIf you're on a Windows machine,\nyou would then browse into that CD,\n\n650\n00:34:19,995 --> 00:34:23,490\ndouble-click on the little setup file,\nand click Next ten times, right?\n\n651\n00:34:23,490 --> 00:34:26,970\nIt'll reboot after that, the machine'll\nthen have all the drivers it needs, and\n\n652\n00:34:26,970 --> 00:34:28,270\nit would be happy.\n\n653\n00:34:28,270 --> 00:34:32,270\nBut on a Linux box we've\nactually gotta mount the CD and\n\n654\n00:34:32,270 --> 00:34:33,480\nrun the installer and stuff,\n\n655\n00:34:33,480 --> 00:34:36,660\nso there's a few other steps that we're\ngonna have to go through to get it happy.\n\n656\n00:34:37,800 --> 00:34:39,495\nSo let me go ahead and do that real quick.\n\n657\n00:34:39,495 --> 00:34:44,106\nSo I'm gonna go ahead and\nmount that CD-ROM drive.\n\n658\n00:34:46,880 --> 00:34:53,450\nAnd then I'm going to unzip\nthe files that are on there.\n\n659\n00:34:55,710 --> 00:34:56,420\nThere we go.\n\n660\n00:34:56,420 --> 00:35:00,960\nSo here it is, VMware Tools,\nthese are version 9.4.5-1598834.\n\n661\n00:35:00,960 --> 00:35:05,040\nNew versions come out all the time so\nwe do have to upgrade these,\n\n662\n00:35:05,040 --> 00:35:07,380\nand you probably saw\nthe upgrade option earlier.\n\n663\n00:35:07,380 --> 00:35:11,000\nBut the VMware Tools can do installs and\nupgrades.\n\n664\n00:35:11,000 --> 00:35:14,010\nAnd so I am just gonna extract that here,\nit's gonna create a folder for\n\n665\n00:35:14,010 --> 00:35:18,460\nme called VMware Tools dash distrib,\nthere's actually some scripts that\n\n666\n00:35:18,460 --> 00:35:22,300\nare included on the CD,\nlet me show you those, here\n\n667\n00:35:24,660 --> 00:35:29,960\nwe go, so there's some scripts on here\nlike the Run Upgrader dot SAH and\n\n668\n00:35:29,960 --> 00:35:33,320\nthen the other executables for\ninstalling the VMware Tools.\n\n669\n00:35:33,320 --> 00:35:36,190\nBut on my installation with\nCentOS there's some kind of\n\n670\n00:35:36,190 --> 00:35:38,170\na problem where those aren't working for\nme, and\n\n671\n00:35:38,170 --> 00:35:41,930\nyou get that with Linux from time to time\nwhere you need certain dependencies.\n\n672\n00:35:41,930 --> 00:35:44,190\nI didn't install a graphical\nuser interface on this,\n\n673\n00:35:44,190 --> 00:35:46,570\nI just did command line, and\nthat's probably what it's upset about.\n\n674\n00:35:46,570 --> 00:35:48,470\nSo, that's why I'm not running those.\n\n675\n00:35:48,470 --> 00:35:51,170\nOtherwise, we could just run those\nscripts and it would do the same thing.\n\n676\n00:35:51,170 --> 00:35:53,950\nSo, I'm doing a little bit of this\nmanually just to make sure that it\n\n677\n00:35:53,950 --> 00:35:56,440\nworks within my system.\n\n678\n00:35:56,440 --> 00:35:58,220\nBut you'll see in here\nthere's other scripts.\n\n679\n00:35:58,220 --> 00:36:01,920\nAnd there's just a little PERL script\nright here called VMware-install.\n\n680\n00:36:01,920 --> 00:36:06,530\nAnd that's what's actually going to\ninstall the VMware Tools on this machine.\n\n681\n00:36:06,530 --> 00:36:09,930\nAnd when you run it, unless you run\ninto some kind of crazy errors or\n\n682\n00:36:09,930 --> 00:36:11,620\nwhatever, it's pretty straight forward.\n\n683\n00:36:11,620 --> 00:36:13,330\nIt should just run through and install.\n\n684\n00:36:13,330 --> 00:36:15,620\nIt's asking me what folders\nI wanna install in.\n\n685\n00:36:15,620 --> 00:36:17,276\nAnd so I'm just gonna accept\nthe defaults on these.\n\n686\n00:36:20,421 --> 00:36:24,730\nAnd once it's done, it's just having\nto create some of those paths there.\n\n687\n00:36:24,730 --> 00:36:27,899\nYou can change these if you want, I\nrecommend that you don't though because it\n\n688\n00:36:27,899 --> 00:36:30,843\nmakes upgrading a lot easier if you\nleave the paths the same as they were.\n\n689\n00:36:30,843 --> 00:36:36,040\nSo it's just setting all that, and\nnow it's actually doing the installation.\n\n690\n00:36:36,040 --> 00:36:39,460\nOnce the VMware Tools are installed it\nwill need to reboot the machine, so\n\n691\n00:36:39,460 --> 00:36:40,610\nwe have to be aware of that.\n\n692\n00:36:40,610 --> 00:36:43,270\nAnd it's also giving me another warning\nhere, it's saying before running\n\n693\n00:36:43,270 --> 00:36:47,280\nVMware Tools for the first time, we need\nto configure it by running this script.\n\n694\n00:36:47,280 --> 00:36:49,860\nAnd so, it's just telling me and\nasking me if I want to run it.\n\n695\n00:36:49,860 --> 00:36:52,010\nNow, I'll go ahead and say yes to it.\n\n696\n00:36:52,010 --> 00:36:53,130\nSo, it's just gonna run.\n\n697\n00:36:53,130 --> 00:36:55,890\nNow, it's gonna try and\nlaunch a graphical user interface, and\n\n698\n00:36:55,890 --> 00:36:58,540\nI didn't install the GUI\nwith this Linux install.\n\n699\n00:36:58,540 --> 00:37:02,470\nSo part of the little wizard is not gonna\nwork for me, I'll probably see a warning\n\n700\n00:37:02,470 --> 00:37:07,120\nfor that, but it is setting the command\nline pieces up which is important right?\n\n701\n00:37:07,120 --> 00:37:09,980\nCuz we need that if we're\nrunning on a server, right now\n\n702\n00:37:09,980 --> 00:37:14,490\nit's asking me if I want to allow shared\nfolders between the host and guest OS's.\n\n703\n00:37:14,490 --> 00:37:17,460\nI'm not a big fan of that feature and\nthe default is no so\n\n704\n00:37:17,460 --> 00:37:18,670\nI'm gonna leave that feature off.\n\n705\n00:37:20,450 --> 00:37:23,214\nIt's asking me if I want drag and\ndrop for copying of files,\n\n706\n00:37:23,214 --> 00:37:25,662\nthat only works with a GUI,\nso I don't need it here.\n\n707\n00:37:25,662 --> 00:37:26,961\nI'll leave that at no.\n\n708\n00:37:26,961 --> 00:37:29,680\nWould I like automatic kernel modules?\n\n709\n00:37:29,680 --> 00:37:33,400\nI'll go ahead and say yes to that one,\nthat way it can update my kernel.\n\n710\n00:37:33,400 --> 00:37:34,530\nSee here's my warning,\n\n711\n00:37:34,530 --> 00:37:38,300\nno X install found, he couldn't find\nthe graphical user interface, but\n\n712\n00:37:38,300 --> 00:37:41,550\nthat's fine it is installing the pieces\nthat will work for my system.\n\n713\n00:37:43,100 --> 00:37:43,719\nSo it's gonna put that in there.\n\n714\n00:37:43,719 --> 00:37:47,541\nNow, that last one there where\nit's doing a new initrd,\n\n715\n00:37:47,541 --> 00:37:51,480\nthat's the RAM disk that\nLinux uses when it boots up.\n\n716\n00:37:51,480 --> 00:37:54,420\nIt's putting special hooks in there for\nVMWare and\n\n717\n00:37:54,420 --> 00:37:57,980\nit's gonna optimize my system to make\nit boot faster and more reliably,\n\n718\n00:37:57,980 --> 00:38:00,940\nso you actually do get\nimprovements by doing this.\n\n719\n00:38:00,940 --> 00:38:01,620\nSo we'll let it do that.\n\n720\n00:38:01,620 --> 00:38:05,316\nWhen it's done,\nI'll be able to eject that CD and\n\n721\n00:38:05,316 --> 00:38:09,380\nreboot and\nnow I'll have the VMware Tools installed.\n\n722\n00:38:09,380 --> 00:38:12,390\nWhen I go back to my vCenter screens,\nit'll be happy.\n\n723\n00:38:12,390 --> 00:38:15,030\nIt'll be able to communicate\nwith the VMware Tools and\n\n724\n00:38:15,030 --> 00:38:18,250\nit will be able to properly\nintegrate with that virtual machine.\n\n725\n00:38:18,250 --> 00:38:21,600\nI'll be able to do things like graceless\nshut downs, and things like that.\n\n726\n00:38:21,600 --> 00:38:22,300\nAll right.\n\n727\n00:38:22,300 --> 00:38:27,490\nSo, if I take a machine that didn't\nfinish, here, so that one just finished.\n\n728\n00:38:27,490 --> 00:38:30,613\nAll right, so\nI'm going to unmount that CD drive.\n\n729\n00:38:33,829 --> 00:38:34,909\nOh it already did.\n\n730\n00:38:34,909 --> 00:38:38,254\nAnd I'll go ahead and give it a reboot.\n\n731\n00:38:38,254 --> 00:38:38,811\nAll right.\n\n732\n00:38:38,811 --> 00:38:40,560\nSo that one's gonna reboot.\n\n733\n00:38:40,560 --> 00:38:42,820\nAnd while we're waiting\non that one to reboot,\n\n734\n00:38:42,820 --> 00:38:47,950\nif I take a server like this guy, who\ndidn't have the VMware Tools installed.\n\n735\n00:38:47,950 --> 00:38:50,960\nWell, oh, I guess he's not even powered\non, so that'll make it hard to show.\n\n736\n00:38:50,960 --> 00:38:53,470\nBut when you right-click\non one of these guys and\n\n737\n00:38:53,470 --> 00:38:56,460\nyou do something like choose shutdown or\nchoose reboot,\n\n738\n00:38:56,460 --> 00:38:59,170\nit actually gets really angry at you\ncuz it doesn't have the VMware Tools.\n\n739\n00:38:59,170 --> 00:39:02,200\nAnd it'll tell you, sorry,\nwe can't control that machine.\n\n740\n00:39:02,200 --> 00:39:04,080\nWould you like us to cut the power to it?\n\n741\n00:39:04,080 --> 00:39:05,070\nAnd so it can do that.\n\n742\n00:39:05,070 --> 00:39:08,810\nIt can yank the power cable out of it just\nfine but that's not a graceful shutdown.\n\n743\n00:39:08,810 --> 00:39:12,734\nThose are some of the things we lose\nby not having the VMware Tools.\n\n744\n00:39:12,734 --> 00:39:16,686\nSo my system is slowing down now\ncuz I'm rebooting that one and\n\n745\n00:39:16,686 --> 00:39:18,213\nit's recognizing it.\n\n746\n00:39:18,213 --> 00:39:20,036\nWe'll give it a moment while\nit sorts through that.\n\n747\n00:39:20,036 --> 00:39:24,260\nSo that's basically it for\ngetting the guest OS set up.\n\n748\n00:39:24,260 --> 00:39:25,820\nNow I'm ready to run.\n\n749\n00:39:25,820 --> 00:39:26,960\nSo now I can fire it up and\n\n750\n00:39:26,960 --> 00:39:30,553\nI can start doing all the different\nthings that I do with a new Linux system.\n\n751\n00:39:30,553 --> 00:39:34,801\nSo I can go in and start to do my\nupdates and all that good stuff to get\n\n752\n00:39:34,801 --> 00:39:39,300\nthis system ready for whatever\npurpose it was that I was building it.\n\n753\n00:39:40,950 --> 00:39:41,920\nAll right.\n\n754\n00:39:41,920 --> 00:39:45,148\nSo that's basically creating a guest OS.\n\n755\n00:39:45,148 --> 00:39:48,693\nFrom here you can figure remote\nmanagement of that guest OS,\n\n756\n00:39:48,693 --> 00:39:50,512\nwhichever OS it happens to be.\n\n757\n00:39:50,512 --> 00:39:53,437\nAnd from now on you just remote\ndirectly into that guest.\n\n758\n00:39:53,437 --> 00:39:56,642\nYou really don't need to use the this\nconsole anymore unless there's a problem,\n\n759\n00:39:56,642 --> 00:39:58,420\nlike if you're troubleshooting a guest OS.\n\n760\n00:39:58,420 --> 00:40:01,128\nOtherwise, you don't necessarily\nneed to come here anymore.\n\n761\n00:40:01,128 --> 00:40:03,290\nI'm not gonna do these updates\njust cuz there's a bunch of them.\n\n762\n00:40:05,240 --> 00:40:09,050\nBut you see it's ready to rock.\n\n763\n00:40:09,050 --> 00:40:14,080\nBack here when I go into my app web one,\nand I go to the summary screen and\n\n764\n00:40:14,080 --> 00:40:18,540\nI'll see that it's no longer complaining\nabout not having the VMware tools.\n\n765\n00:40:18,540 --> 00:40:23,391\nSo it shows that, and if I were to right\nclick on this guy, app web one, and\n\n766\n00:40:23,391 --> 00:40:27,540\n[LAUGH] if my right click menu\never comes up, there we go.\n\n767\n00:40:27,540 --> 00:40:31,260\nSo now I've got things like\nshut down the guest OS.\n\n768\n00:40:31,260 --> 00:40:33,670\nNot just shut down the machine,\nnot just pull its power, but\n\n769\n00:40:33,670 --> 00:40:36,850\nactually do a graceful\nshut down of the guest OS.\n\n770\n00:40:36,850 --> 00:40:38,940\nAnd let me show you what that's,\nwhat that's like.\n\n771\n00:40:38,940 --> 00:40:44,080\nIf I choose to shutdown the guest OS,\nall right, it's gonna reach in and\n\n772\n00:40:44,080 --> 00:40:47,450\ndo a graceful shut down on that machine.\n\n773\n00:40:47,450 --> 00:40:51,680\nAnd so if I jump to that machine, if I can\nget there quick enough, let's see if I do.\n\n774\n00:40:53,780 --> 00:40:56,210\nIf I can get there quick enough\nI'll actually see it, oh shoot,\n\n775\n00:40:56,210 --> 00:40:57,080\nI didn't get there quick enough.\n\n776\n00:40:57,080 --> 00:41:00,470\nYou can actually see it going through and\nstopping the services and\n\n777\n00:41:00,470 --> 00:41:01,380\npowering the machine down.\n\n778\n00:41:01,380 --> 00:41:06,310\nSo it actually goes through\nthat graceful process to do it.\n\n779\n00:41:06,310 --> 00:41:09,660\nI mentioned that we can upgrade\nthe hardware version of a VM.\n\n780\n00:41:09,660 --> 00:41:12,160\nSo if you picked to do hardware\nversion eight or whatever,\n\n781\n00:41:12,160 --> 00:41:15,880\nthat you can upgrade it to a newer\nversion pretty painlessly.\n\n782\n00:41:15,880 --> 00:41:18,570\nThe process for that is pretty straight\nforward, you shut it down like I just did,\n\n783\n00:41:18,570 --> 00:41:25,050\nand then you right click on it, and if\nyou go down here to all V center actions,\n\n784\n00:41:25,050 --> 00:41:29,230\nin here you'll have the option to do the\nupgrade, and it actually gets buried away.\n\n785\n00:41:29,230 --> 00:41:32,540\nLet's see, where does it get buried,\nyou know what,\n\n786\n00:41:32,540 --> 00:41:35,990\nI'm actually I'm not gonna see because\nI am in version ten, all right, shoot.\n\n787\n00:41:35,990 --> 00:41:39,150\nBut yeah it shows up right up under here,\nand you can come through and you can\n\n788\n00:41:39,150 --> 00:41:43,530\nchoose to launch that upgrade process and\nget it moved up to the new version.\n\n789\n00:41:43,530 --> 00:41:46,130\nIt's just takes it a moment,\nand then it boots up.\n\n790\n00:41:46,130 --> 00:41:49,560\nOne word of caution if your dealing\nwith Windows, in the Windows world\n\n791\n00:41:49,560 --> 00:41:54,210\nupgrading that hardware version will\noftentimes trip your activation process.\n\n792\n00:41:54,210 --> 00:41:57,415\nSo you may need to go and reactivate your\nlicense with Microsoft when you do that.\n\n793\n00:41:57,415 --> 00:42:00,656\nIt doesn't always do it,\nbut sometimes it does, so\n\n794\n00:42:00,656 --> 00:42:03,023\njust be aware that that could happen.\n\n795\n00:42:03,023 --> 00:42:03,701\nAll right.\n\n796\n00:42:03,701 --> 00:42:06,820\nNow wait a minute,\nI did build this one as a version nine.\n\n797\n00:42:06,820 --> 00:42:08,420\nI should have seen the upgrade option.\n\n798\n00:42:08,420 --> 00:42:10,250\nWhy did I not see that?\n\n799\n00:42:10,250 --> 00:42:11,320\nLet's go back in here and look.\n\n800\n00:42:11,320 --> 00:42:12,790\nI may have just overlooked it then.\n\n801\n00:42:13,960 --> 00:42:17,130\nBut it does get buried\naway down in here and\n\n802\n00:42:17,130 --> 00:42:21,200\nwe should see the option to\nstart the upgrade, here it is.\n\n803\n00:42:21,200 --> 00:42:25,810\nSo I went under all these interactions,\nand then compatibility and that's where we\n\n804\n00:42:25,810 --> 00:42:31,190\ncan see upgrade VM compatibility or\nschedule the VM compatibility upgrade.\n\n805\n00:42:31,190 --> 00:42:35,110\nI may not wanna do the upgrade right now,\nI might want to tap in tonight at 1 AM so\n\n806\n00:42:35,110 --> 00:42:36,222\nI can schedule it.\n\n807\n00:42:36,222 --> 00:42:37,630\nI'm gonna go ahead and\ndo the actual upgrade.\n\n808\n00:42:39,180 --> 00:42:40,080\nThere we go.\n\n809\n00:42:40,080 --> 00:42:43,230\nSo it's just warning me that I'm gonna\nupgrade it'll make it incompatible\n\n810\n00:42:43,230 --> 00:42:44,640\nwith earlier versions.\n\n811\n00:42:44,640 --> 00:42:46,700\nI'm compatible with ESXi 5.1 and\nhigher now,\n\n812\n00:42:46,700 --> 00:42:51,300\nafter this upgrade I'll only\nbe compatible with 5.5.\n\n813\n00:42:51,300 --> 00:42:52,300\nSo I'm gonna go ahead and choose that.\n\n814\n00:42:52,300 --> 00:42:54,150\nThat should be the only\noption that I can pick.\n\n815\n00:42:55,320 --> 00:42:56,340\nYeah.\nAnd I'll say okay to that.\n\n816\n00:42:56,340 --> 00:42:58,100\nAnd it's gonna do the upgrade.\n\n817\n00:42:58,100 --> 00:43:01,780\nThe upgrade happens pretty quickly,\nit's not like a big long drawn out thing.\n\n818\n00:43:01,780 --> 00:43:03,380\nSo like I said, it's pretty painless.\n\n819\n00:43:03,380 --> 00:43:04,820\nThere, it's already done.\n\n820\n00:43:04,820 --> 00:43:06,480\nAnd then I can start that machine back up.\n\n821\n00:43:07,700 --> 00:43:09,850\nAnd now it's a version ten.\n\n822\n00:43:09,850 --> 00:43:12,490\nAnd you'll see VMware tools are current.\n\n823\n00:43:12,490 --> 00:43:15,600\nThe VMware hardware is\nshowing as VM version ten.\n\n824\n00:43:15,600 --> 00:43:17,660\nIt's up, healthy and happy.\n\n825\n00:43:20,850 --> 00:43:23,910\nNow when we start to create\na lot of virtual machines,\n\n826\n00:43:23,910 --> 00:43:28,600\nif you're managing them with the vSphere\nclient, with this guy, right.\n\n827\n00:43:28,600 --> 00:43:30,110\nThe actual vSphere client,\n\n828\n00:43:30,110 --> 00:43:33,880\nyou're connecting typically to like\na single host, so I am connected\n\n829\n00:43:33,880 --> 00:43:37,550\nto ESX server two, and I see just\nthe virtual machines that are on there.\n\n830\n00:43:37,550 --> 00:43:41,830\nAnd that works out great if you're\nmanaging that, but if you've got hundreds\n\n831\n00:43:41,830 --> 00:43:47,740\nof thousands of VM's spread across tens or\nhundreds of hosts, it's difficult to keep\n\n832\n00:43:47,740 --> 00:43:52,080\ntrack of where those virtual machines are\nand which server they reside on and so on.\n\n833\n00:43:52,080 --> 00:43:54,930\nThat's where VM Vcenter really excels.\n\n834\n00:43:54,930 --> 00:43:57,780\nIn vCenter I just see a list\nof my virtual machines.\n\n835\n00:43:57,780 --> 00:44:01,210\nThese are all of all of my\nVM's across all of my hosts.\n\n836\n00:44:01,210 --> 00:44:02,920\nNow just the ones from a particular host.\n\n837\n00:44:02,920 --> 00:44:07,168\nSo this is another reason why we wanna\nmake sure that we use the vCenter\n\n838\n00:44:07,168 --> 00:44:09,790\nweb client or the vSphere client.\n\n839\n00:44:09,790 --> 00:44:15,290\nYou can point the vSphere client at\nvCenter and it will actually start or end\n\n840\n00:44:15,290 --> 00:44:18,990\nof this across this virtual environment,\nbut the web client is the recommended way.\n\n841\n00:44:21,250 --> 00:44:24,110\nAll right, so\nthat's creating a virtual machine.\n\n842\n00:44:24,110 --> 00:44:27,670\nI did Linux because its faster, but you\nknow Windows is the same basic process.\n\n843\n00:44:27,670 --> 00:44:31,800\nYou just have to install the tools and\nyou're in business there too.\n\n844\n00:44:31,800 --> 00:44:35,910\nNow once a virtual machine is created\ntime to time you might need to go and\n\n845\n00:44:35,910 --> 00:44:37,370\ntweak some of the setting's on it.\n\n846\n00:44:37,370 --> 00:44:40,790\nSo for example, I might find that it's\nrunning out of memory, so I wanna\n\n847\n00:44:40,790 --> 00:44:45,410\nincrease the memory on it or I want to\nbump up the CPU or whatever on the system.\n\n848\n00:44:46,730 --> 00:44:49,300\nYou can make hardware changes, but\n\n849\n00:44:49,300 --> 00:44:53,570\nsome changes require the virtual machine\nto be turned off when you make them.\n\n850\n00:44:53,570 --> 00:44:55,748\nOthers can be made while\nthe machine is on.\n\n851\n00:44:55,748 --> 00:44:59,620\nSo increasing CPU's, you can't do that\nwhile the virtual machine is running.\n\n852\n00:44:59,620 --> 00:45:01,840\nYou've got to shut it down and\nmake the change.\n\n853\n00:45:01,840 --> 00:45:03,710\nBut a hard drive.\n\n854\n00:45:03,710 --> 00:45:06,400\nWe can do a hot expansion of a hard drive.\n\n855\n00:45:06,400 --> 00:45:10,520\nWe can give it more space if we need to,\npretty easily.\n\n856\n00:45:10,520 --> 00:45:13,848\nSo for example, let me take a different\nserver here, let me take my server,\n\n857\n00:45:13,848 --> 00:45:14,940\nthe server that I'm on.\n\n858\n00:45:14,940 --> 00:45:18,420\nThis server that I'm on right now,\nthat's running vCenter.\n\n859\n00:45:18,420 --> 00:45:25,030\nIt has a 64 gig hard drive and\na terabyte drive.\n\n860\n00:45:25,030 --> 00:45:27,190\nThat's actually a USB hard drive\nthat I've got attached, so\n\n861\n00:45:27,190 --> 00:45:32,830\nI'm doing USB pass through right there,\nso that's actually a good example.\n\n862\n00:45:32,830 --> 00:45:35,460\nBut here I've got a 64 gig hard drive.\n\n863\n00:45:35,460 --> 00:45:38,930\nMaybe that's not enough, and\nI wanna bump it up to 100 gig,\n\n864\n00:45:38,930 --> 00:45:43,110\nwell that is a change,\nI can make while this server is online.\n\n865\n00:45:43,110 --> 00:45:47,030\nAll I do is I go into my vSphere web\nclient and I find that virtual machine.\n\n866\n00:45:47,030 --> 00:45:49,710\nSo that's myvm-server1.\n\n867\n00:45:49,710 --> 00:45:52,494\nAnd you'll see the hardware\nconfigurations down here and\n\n868\n00:45:52,494 --> 00:45:54,208\nthe information that's set on it.\n\n869\n00:45:56,077 --> 00:45:59,020\nAnd I want to edit those settings.\n\n870\n00:45:59,020 --> 00:46:01,980\nSo what I'm gonna do is I'll\njust right click on this turkey.\n\n871\n00:46:03,210 --> 00:46:04,910\nAnd I'll go into my Edit Settings.\n\n872\n00:46:07,310 --> 00:46:10,720\nAnd some of these I'll be able to change,\nsome I won't.\n\n873\n00:46:10,720 --> 00:46:14,990\nIf I try and change something like CPU,\nwell it's grayed out.\n\n874\n00:46:14,990 --> 00:46:17,240\nIt's just grayed out because\nthe machine is turned on right now.\n\n875\n00:46:17,240 --> 00:46:19,690\nIf I were to shut it down,\nthose items would light up.\n\n876\n00:46:19,690 --> 00:46:22,920\nAnd I could increase the memory,\nor I could upgrade the CPU.\n\n877\n00:46:22,920 --> 00:46:25,930\nSo it's really easy to\ntell what you can do live.\n\n878\n00:46:25,930 --> 00:46:29,500\nI can plug that network adaptor into\na different network while it's live.\n\n879\n00:46:29,500 --> 00:46:31,600\nThink about what you could\ndo with a physical machine.\n\n880\n00:46:31,600 --> 00:46:33,740\nCan you unplug a physical\nnetwork adaptor and\n\n881\n00:46:33,740 --> 00:46:36,200\nplug it in again on a live\nmachine while it's on?\n\n882\n00:46:36,200 --> 00:46:36,990\nYeah.\n\n883\n00:46:36,990 --> 00:46:39,120\nCan you swap out its CPU's, though?\n\n884\n00:46:39,120 --> 00:46:42,570\nNo, you can't do it on a physical machine\nand you can't do it in a VM either.\n\n885\n00:46:43,570 --> 00:46:47,060\nBut the hard disk I can bump that up,\nI'm just gonna take it and\n\n886\n00:46:47,060 --> 00:46:49,280\nbump it up to 100 gigs in size.\n\n887\n00:46:49,280 --> 00:46:52,010\nSo I'm bumping that size up\nto get a little more space.\n\n888\n00:46:53,320 --> 00:46:56,140\nThis is also the place that I would go for\nUSB pass through,\n\n889\n00:46:56,140 --> 00:46:59,690\nsee how I got that USB drive right there,\nI'm gonna remove it real quick.\n\n890\n00:46:59,690 --> 00:47:00,290\nAll right.\n\n891\n00:47:00,290 --> 00:47:05,600\nSo I plugged that USB drive\ninto the physical ESXi host.\n\n892\n00:47:06,730 --> 00:47:09,390\nWhen you plug it into the host,\nthe host connects to it, right?\n\n893\n00:47:09,390 --> 00:47:12,190\nSo the ESXi box sees this USB hard drive.\n\n894\n00:47:12,190 --> 00:47:15,100\nBut I wanted my virtual machine to see it,\nso\n\n895\n00:47:15,100 --> 00:47:17,390\nI used the USB pass through functionality.\n\n896\n00:47:17,390 --> 00:47:20,590\nAnd that was introduced in\nthat hardware version seven.\n\n897\n00:47:20,590 --> 00:47:22,345\nI'm gonna go ahead and\nedit this guy again.\n\n898\n00:47:24,641 --> 00:47:28,716\nAnd when I go into the settings, it's\nshowing me all of the current hardware,\n\n899\n00:47:28,716 --> 00:47:31,123\nbut at the bottom of\nthe screen is new device and\n\n900\n00:47:31,123 --> 00:47:35,500\nhere's where I can add devices that\naren't present in the list right now.\n\n901\n00:47:35,500 --> 00:47:38,230\nAnd if I pick that,\nyou'll see all sorts of stuff we can add.\n\n902\n00:47:38,230 --> 00:47:42,192\nNew hard drives, new network adaptors,\nCD, floppy, serial ports.\n\n903\n00:47:42,192 --> 00:47:46,954\nBut host USB device,\nthat's the USB pass through one that says,\n\n904\n00:47:46,954 --> 00:47:51,986\ntake some USB device on my ESXi host and\nmake it visible to this guest.\n\n905\n00:47:51,986 --> 00:47:53,692\nAnd so you can choose that.\n\n906\n00:47:53,692 --> 00:47:57,790\nAnd when we add it in, it'll then give\nyou a drop down box where you can pick,\n\n907\n00:47:57,790 --> 00:48:00,180\ncuz you might have more\nthan one USB device.\n\n908\n00:48:00,180 --> 00:48:03,330\nSo you can pick, maybe it's a thumb drive,\nmaybe it's a hard drive,\n\n909\n00:48:03,330 --> 00:48:06,090\nmaybe it's a USB serial port.\n\n910\n00:48:06,090 --> 00:48:06,980\nWho knows.\n\n911\n00:48:06,980 --> 00:48:08,730\nI've used those quite a few times.\n\n912\n00:48:08,730 --> 00:48:11,020\nSo it just kind of depends\non what it is that you need.\n\n913\n00:48:11,020 --> 00:48:12,787\nSo that'll add it onto that system.\n\n914\n00:48:14,214 --> 00:48:15,230\nAll right.\n\n915\n00:48:15,230 --> 00:48:16,510\nSo I'll go ahead and hit OK.\n\n916\n00:48:16,510 --> 00:48:18,980\nThe main change I made here was\nbumping up that hard drive size.\n\n917\n00:48:18,980 --> 00:48:22,710\nSee how my hard drive is\nnow 100 gigs in size?\n\n918\n00:48:22,710 --> 00:48:27,005\nWell, if I go into my disk\nmanagement here on this server,\n\n919\n00:48:27,005 --> 00:48:33,052\nwhat I should see is my 64 gig drive that\nI had a few moments ago is now 100 gigs,\n\n920\n00:48:33,052 --> 00:48:35,594\nthat live while the system was up,\n\n921\n00:48:35,594 --> 00:48:41,058\nit extended it out to 100 gigs in size and\nthat will come up eventually.\n\n922\n00:48:41,058 --> 00:48:44,480\nThere we go.\n\n923\n00:48:44,480 --> 00:48:46,660\nI added a USB drive at the same time,\n\n924\n00:48:46,660 --> 00:48:49,730\nso going to slow it down there,\nit'll take it a moment to come up.\n\n925\n00:48:49,730 --> 00:48:52,140\nBut it's gonna ncrease\nthe hard drive size.\n\n926\n00:48:52,140 --> 00:48:55,470\nNow, that's on the hardware side.\n\n927\n00:48:55,470 --> 00:48:59,540\nThe hardware for that drive was\njust increased to 100 gigs in size.\n\n928\n00:48:59,540 --> 00:49:00,910\nBut on the software side or\n\n929\n00:49:00,910 --> 00:49:04,180\ndesktop operating systems they\nformat those format those drives.\n\n930\n00:49:04,180 --> 00:49:05,950\nThey set up the partition scheme.\n\n931\n00:49:05,950 --> 00:49:10,130\nSo my partitions won't recognize that yet.\n\n932\n00:49:11,190 --> 00:49:13,530\nMy Eindows box,\nit'll have a 100 gig hard drive but\n\n933\n00:49:13,530 --> 00:49:16,390\nthe partition will still\nbe 64 gigs in size.\n\n934\n00:49:16,390 --> 00:49:20,570\nSo for example if I were to\njust browse to this screen, and\n\n935\n00:49:20,570 --> 00:49:24,480\nlet me hit the refresh button F5 or\nsomething like that.\n\n936\n00:49:24,480 --> 00:49:26,560\nWell let me just move to\nanother folder and move back.\n\n937\n00:49:26,560 --> 00:49:30,960\nI can see here that it's\nstill 64 gigs in size, right.\n\n938\n00:49:30,960 --> 00:49:34,690\nSo that didn't extend it's up\nto the guest OS to do that.\n\n939\n00:49:34,690 --> 00:49:39,330\nSo in LINUX you can use one of the ESXF\nutilities to extend out your drive.\n\n940\n00:49:39,330 --> 00:49:43,200\nIn Windows, we use the disk manager,\nwhich is slowly loading in the background.\n\n941\n00:49:43,200 --> 00:49:45,000\nAnd we can extend that out.\n\n942\n00:49:45,000 --> 00:49:46,760\nAt this point, it'd probably be faster for\n\n943\n00:49:46,760 --> 00:49:51,540\nme to use the command\nprompt to extent that one.\n\n944\n00:49:51,540 --> 00:49:54,980\nIt comes down to your guest\noperating system to increase it.\n\n945\n00:49:54,980 --> 00:50:00,340\nSo let's see, well that command\nprompt's taking a little while too.\n\n946\n00:50:00,340 --> 00:50:01,960\nSo the server's having\nto rediscover things.\n\n947\n00:50:01,960 --> 00:50:05,130\nWhat it's probably doing is installing\ndrivers for that USB drive.\n\n948\n00:50:05,130 --> 00:50:09,300\nAnd so that's holding up the Virtual Disk\nService while it does that detection,\n\n949\n00:50:09,300 --> 00:50:10,980\nso it'll come up eventually.\n\n950\n00:50:10,980 --> 00:50:12,747\nBut now I can extend that out,\n\n951\n00:50:12,747 --> 00:50:16,296\nI made a change to my hardware\nlive while the machine was on.\n\n952\n00:50:16,296 --> 00:50:19,190\nSo that's pretty cool, you can do that,\nand you'll know the difference.\n\n953\n00:50:19,190 --> 00:50:21,600\nAnything you can't do live,\nwill be grayed out.\n\n954\n00:50:21,600 --> 00:50:23,990\nYou've got to shut the machine down,\nand you can change it.\n\n955\n00:50:23,990 --> 00:50:26,030\nIf you want to see that,\nlet me pick another machine.\n\n956\n00:50:26,030 --> 00:50:30,400\nLet me take this other Linux box that\nI've got that's not turned on right now.\n\n957\n00:50:30,400 --> 00:50:34,670\nIf I edit its settings,\nwe can go in here and\n\n958\n00:50:34,670 --> 00:50:39,760\nyou'll see it will let me change\nthe CPUs and the memory and so on.\n\n959\n00:50:39,760 --> 00:50:42,750\nSo, these are things that are easy to\nchange when the machine is turned off.\n\n960\n00:50:45,740 --> 00:50:47,550\nAll right.\nJust another word of caution if your\n\n961\n00:50:47,550 --> 00:50:52,020\ndealing with Windows OS, is modifying this\nhardware may trip your reactivation, so\n\n962\n00:50:52,020 --> 00:50:53,530\nyou may have to reactivate your license.\n\n963\n00:50:53,530 --> 00:50:55,759\nAnytime hardware changes in Windows,\nthat's a risk.\n\n964\n00:50:56,900 --> 00:50:57,550\nAll right.\n\n965\n00:50:57,550 --> 00:51:00,300\nYeah, so here,\nI can bump it up to two CPUs or\n\n966\n00:51:00,300 --> 00:51:03,750\nI can, maybe I'll take some\nmemory down off of that one.\n\n967\n00:51:03,750 --> 00:51:06,600\nMaybe it's got two gigs and\nI only need it to have one gig of memory.\n\n968\n00:51:06,600 --> 00:51:07,210\nSo I can go through and\n\n969\n00:51:07,210 --> 00:51:09,670\nstart to adjust that stuff that I\nwouldn't normally be able to do\n\n970\n00:51:09,670 --> 00:51:10,420\nwhile the system is on.\n\n971\n00:51:13,950 --> 00:51:17,230\nAll right, let's see, what else might\nI wanna mess with on this thing?\n\n972\n00:51:18,460 --> 00:51:21,640\nThose are some of the basics there\nof creating a virtual machine.\n\n973\n00:51:21,640 --> 00:51:24,940\nI created the virtual\nmachine from scratch.\n\n974\n00:51:24,940 --> 00:51:29,590\nI also talked about how we could import\nan OVF template to create a virtual\n\n975\n00:51:29,590 --> 00:51:31,630\nmachine that way so\nwe don't have to go through and build it.\n\n976\n00:51:31,630 --> 00:51:34,500\nThat's another way that we can\nget these virtual machines.\n\n977\n00:51:34,500 --> 00:51:38,190\nAnd I've mentioned that\nDrupal template earlier.\n\n978\n00:51:38,190 --> 00:51:42,110\nI want to show you that in action so\nyou can see what it's like.\n\n979\n00:51:42,110 --> 00:51:43,790\nSo maybe we'll do another one here.\n\n980\n00:51:45,260 --> 00:51:48,590\nSo I'm gonna go and\nwell create another virtual machine.\n\n981\n00:51:48,590 --> 00:51:54,450\nNow before, I went to this icon here which\nlet me create a new virtual machine.\n\n982\n00:51:54,450 --> 00:51:58,370\nBut right beside it I've\ngot deploy OVF template.\n\n983\n00:51:58,370 --> 00:52:03,180\nAnd I can choose that and what it\nwill do is it will let me browse and\n\n984\n00:52:03,180 --> 00:52:04,040\nfind that template.\n\n985\n00:52:04,040 --> 00:52:06,860\nAnd you can pull it right from\nthe Internet if you've got a URL that\n\n986\n00:52:06,860 --> 00:52:07,890\ngoes to it.\n\n987\n00:52:07,890 --> 00:52:10,095\nOr if you've got it locally,\nyou can browse and find it, and\n\n988\n00:52:10,095 --> 00:52:11,144\nthat's what I'm gonna do.\n\n989\n00:52:12,606 --> 00:52:15,250\nAnd I think I put it on my desktop,\nso let me jump up there.\n\n990\n00:52:16,400 --> 00:52:17,140\nHere we go.\n\n991\n00:52:17,140 --> 00:52:23,280\nSo here's this drupal.ovf file,\nand it's just a copy of Debian or\n\n992\n00:52:23,280 --> 00:52:26,540\nUbuntu or one of those distributions\nthat's running Drupal.\n\n993\n00:52:28,592 --> 00:52:32,050\nAl lright,\noh hey my disk screen finally came up.\n\n994\n00:52:32,050 --> 00:52:34,460\nWell let me finish my thought over\nhere and we'll jump back to that.\n\n995\n00:52:34,460 --> 00:52:36,890\nSo now it's got the file and\nI'll just hit next.\n\n996\n00:52:36,890 --> 00:52:40,230\nAnd on the next screen it's gonna\nask me to review some details.\n\n997\n00:52:40,230 --> 00:52:43,630\nWhen you import a template like\nthis they normally pre-specify\n\n998\n00:52:43,630 --> 00:52:45,070\nthe hardware that you need.\n\n999\n00:52:45,070 --> 00:52:47,790\nSo you'll see here like the size on disk,\n\n1000\n00:52:47,790 --> 00:52:50,830\nyou know what's gonna be thin or\nthick provision and so on.\n\n1001\n00:52:50,830 --> 00:52:53,490\nSo giving information about\nwhat that's gonna be like,\n\n1002\n00:52:53,490 --> 00:52:56,240\nyou can modify some of this stuff and\n\n1003\n00:52:56,240 --> 00:52:59,160\nso as we move forward you'll see options\nhere for selecting different things.\n\n1004\n00:52:59,160 --> 00:53:02,580\nBut you can also modify it after\nthe fact by editing the settings, so\n\n1005\n00:53:02,580 --> 00:53:05,090\nit's not like it's all set in stone.\n\n1006\n00:53:06,410 --> 00:53:11,375\nSo I'll deploy this out to\na server in my ITProTV lab, and\n\n1007\n00:53:11,375 --> 00:53:14,070\nI'll call this a Demo Drupal.\n\n1008\n00:53:16,694 --> 00:53:17,760\nAll right.\n\n1009\n00:53:17,760 --> 00:53:19,751\nFor the server I'll stick\nthis on server three.\n\n1010\n00:53:23,710 --> 00:53:28,470\nAnd then after that I can pick whether I\nwant it to be thick or thin provisioned.\n\n1011\n00:53:28,470 --> 00:53:30,810\nThin provision would be good for\na test or eval server,\n\n1012\n00:53:30,810 --> 00:53:32,730\nI talked about these in another episode.\n\n1013\n00:53:32,730 --> 00:53:35,870\nThick provision I could do lazy or\neager zeroes.\n\n1014\n00:53:35,870 --> 00:53:38,496\nEager zero's, it'll try and\nzero out all that space right now,\n\n1015\n00:53:38,496 --> 00:53:40,120\nit's gonna take longer.\n\n1016\n00:53:40,120 --> 00:53:43,380\nLazy zero, it'll just zero them out\nlater on, which makes it faster.\n\n1017\n00:53:43,380 --> 00:53:46,020\nBut I'll just pin provision for now.\n\n1018\n00:53:46,020 --> 00:53:49,530\nAnd I'll park this one in that\nserver's local data store.\n\n1019\n00:53:51,578 --> 00:53:54,030\nAnd then it's gonna ask me what\nnetwork I wanna plug it into, so\n\n1020\n00:53:54,030 --> 00:53:57,210\nI'll pick the V switch and the port\ngroup that it's gonna be attached to.\n\n1021\n00:53:57,210 --> 00:53:59,460\nI'll just attach this to\nthe regular VM network.\n\n1022\n00:54:00,720 --> 00:54:01,230\nAll right.\n\n1023\n00:54:01,230 --> 00:54:04,532\nRight now it's reaching up to that data\nstorage just to make sure that it actually\n\n1024\n00:54:04,532 --> 00:54:06,877\nhas the space,\nthat we're able to communicate with it.\n\n1025\n00:54:06,877 --> 00:54:09,857\nWith shared storage there's always\na chance that communications could break\n\n1026\n00:54:09,857 --> 00:54:11,130\ndown so it's got to verify that.\n\n1027\n00:54:12,520 --> 00:54:13,840\nSo we'll give it a moment.\n\n1028\n00:54:13,840 --> 00:54:16,620\nIn fact while we're waiting on that\nvalidation I can go back to my drive\n\n1029\n00:54:16,620 --> 00:54:17,770\nextension right?\n\n1030\n00:54:17,770 --> 00:54:19,220\nThat's sitting back here.\n\n1031\n00:54:19,220 --> 00:54:22,760\nI can see I've got my 64 gig drive and\nyou know what,\n\n1032\n00:54:22,760 --> 00:54:26,820\nit did that whole rescan and it didn't\npick up that it's 100 gigs, look at that.\n\n1033\n00:54:26,820 --> 00:54:30,430\nSo in Windows, you may actually have to do\na rescan, so I'm gonna tell it to do that,\n\n1034\n00:54:30,430 --> 00:54:31,470\nrescan the disks.\n\n1035\n00:54:31,470 --> 00:54:36,080\nSo that it can pick up that it is\nnow a 100 gig disk, not a 64 gig.\n\n1036\n00:54:36,080 --> 00:54:37,990\nThere it goes.\n\n1037\n00:54:37,990 --> 00:54:41,655\nSo now I see I've got this 36\ngigs of space here that's extra.\n\n1038\n00:54:41,655 --> 00:54:47,600\nVMWare grew the size of that drive,\nbut Windows isn't using it yet.\n\n1039\n00:54:47,600 --> 00:54:49,030\nSo I'm just gonna extend this one.\n\n1040\n00:54:51,160 --> 00:54:53,630\nAnd then that way it'll take up\nthat extra 36 gigs of space.\n\n1041\n00:54:54,910 --> 00:54:58,810\nAnd now I've got a 100 gig drive\ninstead of a 64 gig drive.\n\n1042\n00:54:58,810 --> 00:55:00,630\nSo that was a live change to the hardware.\n\n1043\n00:55:02,850 --> 00:55:05,170\nAnd I can verify that real quick,\njust by looking here.\n\n1044\n00:55:05,170 --> 00:55:06,886\nAnd I can see it's now 100 Gigs.\n\n1045\n00:55:10,867 --> 00:55:13,330\nMeanwhile, that validation\nis still running.\n\n1046\n00:55:13,330 --> 00:55:14,874\nThat's gonna take a while apparently.\n\n1047\n00:55:14,874 --> 00:55:18,420\nSo if I had thick provisions,\nit wouldn't just validate.\n\n1048\n00:55:18,420 --> 00:55:21,748\nIt would actually start zeroing out all\nthat space and that can take even longer.\n\n1049\n00:55:21,748 --> 00:55:26,260\nSo I chose thin, this should have\nhappened much more quickly than it is.\n\n1050\n00:55:26,260 --> 00:55:29,500\nI guess we'll just have to wait and see.\n\n1051\n00:55:29,500 --> 00:55:32,870\nBut looking at the clock, it's actually\na decent spot to stop and take a break.\n\n1052\n00:55:32,870 --> 00:55:34,960\nMaybe we'll take a break here and wait.\n\n1053\n00:55:34,960 --> 00:55:37,290\nThe next screen's just going\nto ask me to pick a network.\n\n1054\n00:55:37,290 --> 00:55:39,630\nAnd then after that it imports the OVF.\n\n1055\n00:55:39,630 --> 00:55:42,390\nSo it just draws it in,\ncreates a virtual machine.\n\n1056\n00:55:42,390 --> 00:55:43,872\nIt's already got the OS set up on it.\n\n1057\n00:55:43,872 --> 00:55:47,036\nA lot of times you can find them\nwhere they've already installed\n\n1058\n00:55:47,036 --> 00:55:49,623\nthe VMWare Tools, so\nwe may not even have to do that.\n\n1059\n00:55:49,623 --> 00:55:52,224\nI don't remember on this one if\nit's got the VMWare Tools or not.\n\n1060\n00:55:52,224 --> 00:55:56,880\nSo if it doesn't we'll have to install\nthose, but otherwise the installer's done,\n\n1061\n00:55:56,880 --> 00:55:59,450\nand we've got that system pre-built for\nus.\n\n1062\n00:55:59,450 --> 00:56:00,780\nReally nice to have those.\n\n1063\n00:56:00,780 --> 00:56:04,070\nYou'll here people call\nthose virtual appliances?\n\n1064\n00:56:04,070 --> 00:56:07,210\nThey've already built all the software for\nyou, you don't have to worry about that.\n\n1065\n00:56:07,210 --> 00:56:11,305\nOn the exam, you wanna be careful\nwith that terminology though,\n\n1066\n00:56:11,305 --> 00:56:14,190\nbecause we also have vApps,\nwhich are a lot different.\n\n1067\n00:56:14,190 --> 00:56:17,380\nAnd in fact I'll talk about\nvApps later on in this episode.\n\n1068\n00:56:17,380 --> 00:56:19,780\nSo stay tuned and\nwe'll dive into that too.\n\n1069\n00:56:19,780 --> 00:56:23,169\nBut for right now, let's stop and take\na break, and we'll be back after this.\n\n1070\n00:56:23,169 --> 00:56:29,919\n[SOUND].\n\n1071\n00:56:29,919 --> 00:56:32,210\nAll right, welcome back everybody.\n\n1072\n00:56:32,210 --> 00:56:35,285\nSo during the break,\na couple of different things happened.\n\n1073\n00:56:35,285 --> 00:56:39,430\n[LAUGH] I did not have a clothing\naccident, it's actually the next day.\n\n1074\n00:56:39,430 --> 00:56:40,840\nFor those of you watching live,\nyou'll know.\n\n1075\n00:56:40,840 --> 00:56:42,867\nBut if you're watching this recorded,\n\n1076\n00:56:42,867 --> 00:56:45,967\nat the end of the last segment\nmy machine that I was importing,\n\n1077\n00:56:45,967 --> 00:56:49,860\nthat Drupal template that I was bringing\nin, it said that it was validating.\n\n1078\n00:56:49,860 --> 00:56:53,464\nAnd I made a comment that it seemed like\nit was taking a little bit longer so\n\n1079\n00:56:53,464 --> 00:56:55,360\nwe'd wait during the break.\n\n1080\n00:56:55,360 --> 00:56:57,850\nWell, it doesn't normally\ntake very long to validate.\n\n1081\n00:56:57,850 --> 00:57:00,500\nIt just looks to see if it can\ncommunicate with the server and if it can\n\n1082\n00:57:00,500 --> 00:57:05,130\nthen it copies over that OVF file,\ngets that template deployed and of you go.\n\n1083\n00:57:05,130 --> 00:57:08,570\nIn my case though, it had lost\ncommunications with that server.\n\n1084\n00:57:08,570 --> 00:57:11,680\nYou might remember in another episode I\nhad a hard drive fail in my iSCSI SAN so\n\n1085\n00:57:11,680 --> 00:57:14,850\nI had to get that repaired.\n\n1086\n00:57:14,850 --> 00:57:18,860\nWell now I had a system failure on my DNS\nserver, and so it wasn't able to find it.\n\n1087\n00:57:18,860 --> 00:57:23,450\nSo this is like, a good week for\nhardware failures here at the studio.\n\n1088\n00:57:23,450 --> 00:57:29,100\nSo anyhow, it took longer to bring that\nsystem back online than it should have and\n\n1089\n00:57:29,100 --> 00:57:30,142\nnow we're in tomorrow.\n\n1090\n00:57:30,142 --> 00:57:32,506\nSo [LAUGH] that's why we're\nnow on Hawaiian shirt Friday.\n\n1091\n00:57:32,506 --> 00:57:37,051\nSo a little bit of excitement there,\nbut the import did succeed.\n\n1092\n00:57:37,051 --> 00:57:41,004\nSo it said validating,\nonce I fixed our DNS infrastructure,\n\n1093\n00:57:41,004 --> 00:57:44,620\nit found that server and\nthen it copied over the VM.\n\n1094\n00:57:44,620 --> 00:57:46,490\nIt does it without a lot of fanfare.\n\n1095\n00:57:46,490 --> 00:57:48,280\nIt just copies it over and that's it.\n\n1096\n00:57:48,280 --> 00:57:51,360\nSo when it's done this is all you see.\n\n1097\n00:57:51,360 --> 00:57:54,300\nYou see your regular VMs,, and\nthere's the one that I imported,\n\n1098\n00:57:54,300 --> 00:57:55,836\ndemodruple, it's right there.\n\n1099\n00:57:55,836 --> 00:57:56,603\nAll right?\n\n1100\n00:57:56,603 --> 00:57:59,550\nSo now I'm done, right?\n\n1101\n00:57:59,550 --> 00:58:01,010\nI can just walk away.\n\n1102\n00:58:01,010 --> 00:58:03,860\nWell, there's probably a few\nmore things that I need to do.\n\n1103\n00:58:03,860 --> 00:58:07,914\nThis template, whoever built this, right,\nthey built it to be a generic install\n\n1104\n00:58:07,914 --> 00:58:12,114\nthat's already got everything configured\nfor it so we don't have to figure it out.\n\n1105\n00:58:12,114 --> 00:58:15,400\nSo I can get Drupal up and\nrunning right away, all right.\n\n1106\n00:58:15,400 --> 00:58:18,930\nBut I don't know if they did things\nlike install the VMware Tools.\n\n1107\n00:58:18,930 --> 00:58:22,430\nSo it's always a good idea\nto follow up with that and\n\n1108\n00:58:22,430 --> 00:58:24,565\nsee if the VMware Tools are installed.\n\n1109\n00:58:24,565 --> 00:58:28,887\nSo if I browse into that demo Drupal\nvirtual machine and go to the Summary tab,\n\n1110\n00:58:28,887 --> 00:58:31,897\nit'll tell me wither or\nnot the tools are installed.\n\n1111\n00:58:31,897 --> 00:58:33,383\nAnd I can see that they are not.\n\n1112\n00:58:33,383 --> 00:58:38,500\nSo my next step would really be to\ninstall the VMware tools on here.\n\n1113\n00:58:38,500 --> 00:58:42,220\nAnd I will tell you that many people that\nrelease these virtualized packages like\n\n1114\n00:58:42,220 --> 00:58:45,390\nthis, they'll already include\nthe VMware Tools in there.\n\n1115\n00:58:45,390 --> 00:58:48,420\nBut even if they've done that,\nthey might be out of date.\n\n1116\n00:58:48,420 --> 00:58:53,534\nThey might be the VMware Tools for\nESXI 5 or 5.1, and you're running 5.5.\n\n1117\n00:58:53,534 --> 00:58:57,240\nSo even if the tools are there,\nwe might have to upgrade them.\n\n1118\n00:58:57,240 --> 00:58:59,120\nIf they're out of date,\nit'll warn you right here,\n\n1119\n00:58:59,120 --> 00:59:02,480\nit'll say that you need to\nupgrade the VMware Tools.\n\n1120\n00:59:02,480 --> 00:59:05,460\nAnd upgrading and\ninstalling really is the same process.\n\n1121\n00:59:05,460 --> 00:59:09,800\nYou mount the install image, and then you\nrun the packages to get it installed.\n\n1122\n00:59:09,800 --> 00:59:13,616\nNow this is just a random Linux package\nthat I pulled off the Internet.\n\n1123\n00:59:13,616 --> 00:59:17,940\nI actually don't know\nall that much about it.\n\n1124\n00:59:17,940 --> 00:59:19,392\nSo let's take a look at it here.\n\n1125\n00:59:19,392 --> 00:59:22,240\nI'm gonna launch its console, and\n\n1126\n00:59:22,240 --> 00:59:26,340\nI can see that it's already not showing\nme a normal Linux-like login screen.\n\n1127\n00:59:26,340 --> 00:59:30,834\nSo they've done some customization to\nit to help you get started faster.\n\n1128\n00:59:30,834 --> 00:59:33,470\nAnd I think it's asking for a password.\n\n1129\n00:59:33,470 --> 00:59:35,961\nYeah, so it's asking me to enter in\na new password for the root account.\n\n1130\n00:59:35,961 --> 00:59:39,370\nAnd that's because when they\ndeploy a template like this,\n\n1131\n00:59:39,370 --> 00:59:44,220\nthey don't want everybody who uses the\ntemplate to have the same password, right?\n\n1132\n00:59:44,220 --> 00:59:47,070\nSo they wanna make it\nwhere you can specify one.\n\n1133\n00:59:47,070 --> 00:59:52,570\nSo I'm just gonna go in here an specify\nthat so that I'll have it for the system.\n\n1134\n00:59:52,570 --> 00:59:54,490\nSome of the other things\nthat I need to configure.\n\n1135\n00:59:54,490 --> 00:59:56,399\nI gotta get VMware Tools installed, and\n\n1136\n00:59:56,399 --> 00:59:59,110\nthen I need to configure\nmy network interfaces.\n\n1137\n00:59:59,110 --> 01:00:02,080\nThe odds are they've set this thing for\nDHCP.\n\n1138\n01:00:02,080 --> 01:00:06,010\nIf I'm just demoing it then that's fine,\na DHCP address is okay.\n\n1139\n01:00:06,010 --> 01:00:09,110\nBut if I'm gonna be pushing\nthis into production\n\n1140\n01:00:09,110 --> 01:00:12,780\nthen I'll probably want to assign a static\nIP and all of that other good stuff.\n\n1141\n01:00:12,780 --> 01:00:16,330\nSo let me just get all of this punched in.\n\n1142\n01:00:16,330 --> 01:00:18,269\nIt wants my admin account.\n\n1143\n01:00:21,572 --> 01:00:26,760\nPunch in don@ITPro.TV,\nand we'll get it going.\n\n1144\n01:00:26,760 --> 01:00:30,375\nSo those are some of the steps that we\nneed to take with a virtual machine.\n\n1145\n01:00:30,375 --> 01:00:33,540\nAnd I don't want to wait on this one so\nmaybe I'll just jump over and\n\n1146\n01:00:33,540 --> 01:00:35,310\ntake one of my other servers.\n\n1147\n01:00:35,310 --> 01:00:40,560\nSo, I've got my other server,\nI'll take VM Server 1, this guy.\n\n1148\n01:00:40,560 --> 01:00:44,870\nNow this is a Windows Server box, so\nit's running Windows Server 2008 R2.\n\n1149\n01:00:44,870 --> 01:00:45,970\nIt's up and it's running.\n\n1150\n01:00:45,970 --> 01:00:49,050\nI don't have a warning here about\nthe virtual machine tools, so\n\n1151\n01:00:49,050 --> 01:00:50,590\nit's already got the VM tools on it.\n\n1152\n01:00:50,590 --> 01:00:53,300\nAnd it's up and happy.\n\n1153\n01:00:53,300 --> 01:00:56,750\nBut there are some other things that we\nmay want to adjust on the virtual machine\n\n1154\n01:00:56,750 --> 01:00:58,565\nonce it's up and running.\n\n1155\n01:00:58,565 --> 01:01:01,505\nEspecially when it comes to the VMware\nTools cuz the VMware Tools have a number\n\n1156\n01:01:01,505 --> 01:01:04,215\nof different little components in\nthem that we might want to tweak.\n\n1157\n01:01:05,425 --> 01:01:08,956\nSo what I'm gonna do is I'm gonna go and\nI'll just right-click on that server and\n\n1158\n01:01:08,956 --> 01:01:09,992\nchoose Edit Settings.\n\n1159\n01:01:13,738 --> 01:01:17,258\nAnd when you get in here,\nI showed you guys this screen earlier and\n\n1160\n01:01:17,258 --> 01:01:22,170\nI was talking about the hardware pieces,\nCPU memory, network adapter, and so on.\n\n1161\n01:01:22,170 --> 01:01:25,170\nBut there are other things in\nhere that you might want to\n\n1162\n01:01:25,170 --> 01:01:27,290\ntweak as you kind of look around.\n\n1163\n01:01:27,290 --> 01:01:29,560\nUp at the top you've got\nthese different buttons, and\n\n1164\n01:01:29,560 --> 01:01:32,290\nthe one that I want\nright now is VM Options.\n\n1165\n01:01:32,290 --> 01:01:36,580\nVM Options is really talking about\nthe VMware Tools, how we can\n\n1166\n01:01:36,580 --> 01:01:41,000\ninteract with that guest virtual machine\nfrom our host, from our ESXI host.\n\n1167\n01:01:41,000 --> 01:01:41,640\nAll right?\n\n1168\n01:01:41,640 --> 01:01:44,400\nAnd so you'll see simple things\nlike what the VM's name is, right?\n\n1169\n01:01:45,890 --> 01:01:51,580\nRemote Console Options, what we want to\ndo there as far as, if I'm looking at\n\n1170\n01:01:51,580 --> 01:01:56,610\nthat console and I log in, I put in all my\ncredentials and then I close the console.\n\n1171\n01:01:56,610 --> 01:01:57,980\nI'm still logged in.\n\n1172\n01:01:57,980 --> 01:02:01,770\nSomebody else could connect to the console\nand now they're logged in as me.\n\n1173\n01:02:01,770 --> 01:02:05,440\nSo I could tell it hey, every time\nthat I close my console, go ahead and\n\n1174\n01:02:05,440 --> 01:02:06,730\nlock the screen.\n\n1175\n01:02:06,730 --> 01:02:07,420\nLock the screen so\n\n1176\n01:02:07,420 --> 01:02:10,630\nthat if somebody else comes along they'll\nsee that I'm logged in there or whatever.\n\n1177\n01:02:10,630 --> 01:02:13,640\nIt'll prevent someone from\nbeing able to get in as me.\n\n1178\n01:02:13,640 --> 01:02:17,890\nWe can limit the maximum amount of people\nor connections to the virtual machine.\n\n1179\n01:02:17,890 --> 01:02:20,660\nYou can see here it's limited to 40.\n\n1180\n01:02:20,660 --> 01:02:23,650\nWell, if this is gonna be a web\nserver facing the Internet,\n\n1181\n01:02:23,650 --> 01:02:25,620\nI probably want more than 40 sessions.\n\n1182\n01:02:25,620 --> 01:02:28,530\nBut really when we talk\nabout these connections,\n\n1183\n01:02:28,530 --> 01:02:30,138\nwe're talking about our\nconsole connections.\n\n1184\n01:02:30,138 --> 01:02:34,233\nWe're not normally exposing that,\nwe're normally exposing a web server or\n\n1185\n01:02:34,233 --> 01:02:34,928\nsomething.\n\n1186\n01:02:34,928 --> 01:02:38,020\nSo in those cases this\nmight be a low number.\n\n1187\n01:02:38,020 --> 01:02:41,840\nYou might have a handful of administrators\nand never run into that limit of 40.\n\n1188\n01:02:41,840 --> 01:02:44,940\nBut some of the other things that are a\nlittle more common are these guys right\n\n1189\n01:02:44,940 --> 01:02:47,050\nhere like VMware Tools settings.\n\n1190\n01:02:47,050 --> 01:02:49,980\nAnd here you'll see power options.\n\n1191\n01:02:49,980 --> 01:02:53,660\nAnd my machine is turned on right now so\nsome of these are grayed out and\n\n1192\n01:02:53,660 --> 01:02:55,140\nthat's why I can't change them.\n\n1193\n01:02:55,140 --> 01:03:00,050\nBut basically it's saying what to\ndo when the host state changes.\n\n1194\n01:03:00,050 --> 01:03:03,390\nIf the host shuts down,\nwhat do I do with the VM?\n\n1195\n01:03:03,390 --> 01:03:07,400\nAnd if I start the host up,\nwhat do I do with the VM there too?\n\n1196\n01:03:07,400 --> 01:03:11,790\nSo you'll see what my buttons do as far\nas like restarting a guest, suspending,\n\n1197\n01:03:11,790 --> 01:03:13,280\nshutting down the guest.\n\n1198\n01:03:13,280 --> 01:03:15,360\nAnd then some of the other\nscripts that happen.\n\n1199\n01:03:15,360 --> 01:03:19,760\nSo, when the machine boots up,\nwe run the VMware Tools scripts.\n\n1200\n01:03:19,760 --> 01:03:24,220\nOr if it resumes, if it suspends,\nwhen do we run our VMware Tools scripts?\n\n1201\n01:03:24,220 --> 01:03:27,439\nAnd you normally want it to run all\nthe time, you always need those tools.\n\n1202\n01:03:28,930 --> 01:03:32,383\nYou've got where it can check for upgrades\nto the VMware Tools before every power on.\n\n1203\n01:03:32,383 --> 01:03:36,640\nSo before it even powers on the machine\nit'll look for updates for that.\n\n1204\n01:03:36,640 --> 01:03:40,119\nThat's turned off by default because a lot\nof times when you do the updates you've\n\n1205\n01:03:40,119 --> 01:03:41,742\ngot to install them and reboot the VM.\n\n1206\n01:03:41,742 --> 01:03:44,848\nAnd VMWare doesn't want you to\nhave any unexpected reboots so\n\n1207\n01:03:44,848 --> 01:03:47,727\nthey leave it up to you to go and\ndo the updates by default.\n\n1208\n01:03:47,727 --> 01:03:51,337\nThis is probably one of the most\nimportant options right here.\n\n1209\n01:03:51,337 --> 01:03:54,100\nAt least in the Windows world it is.\n\n1210\n01:03:54,100 --> 01:03:58,500\nWhich is synchronized guest\ntime with host, all right?\n\n1211\n01:03:58,500 --> 01:04:02,700\nIf you check that off,\nthe guest virtual machine's clock,\n\n1212\n01:04:02,700 --> 01:04:05,650\nits system clock and\nthe software clock in the guest OS,\n\n1213\n01:04:05,650 --> 01:04:10,840\nwill synchronize with the hardware\nclock on the ESXI host, all right.\n\n1214\n01:04:10,840 --> 01:04:12,480\nNow that sounds like a great idea,\n\n1215\n01:04:12,480 --> 01:04:16,060\neasy way to keep the times all\nsynchronized across the machines.\n\n1216\n01:04:16,060 --> 01:04:20,840\nBut it can cause problems in networks\nwhere you might have an NTP server.\n\n1217\n01:04:20,840 --> 01:04:25,660\nIf you have an NTP server set up, and your\nNTP server has a different time than your\n\n1218\n01:04:25,660 --> 01:04:29,890\nESXi host, then as your clients try and\nupdate themselves,\n\n1219\n01:04:29,890 --> 01:04:33,930\nESXi's gonna overwrite their time\nwith the host machine's time.\n\n1220\n01:04:33,930 --> 01:04:36,810\nSo we have to make sure our host machines\nhave the accurate time before you\n\n1221\n01:04:36,810 --> 01:04:38,050\nuse that option.\n\n1222\n01:04:38,050 --> 01:04:42,970\nAnther word of caution, if you build up\na Windows Server domain controller, right,\n\n1223\n01:04:42,970 --> 01:04:46,500\nso Windows Server 2003, 2008,\n2012, doesn't matter, if you build\n\n1224\n01:04:46,500 --> 01:04:50,870\nup an Active Directory domain controller,\nyou do not want to use this option.\n\n1225\n01:04:50,870 --> 01:04:53,103\nIt can cause a lot of problems\nin the Active Directory.\n\n1226\n01:04:53,103 --> 01:04:57,515\nFortunately it's turned off by default,\nbut if it's something that I want to use,\n\n1227\n01:04:57,515 --> 01:05:01,322\nI can check it off, and that time is\ngonna be synchronized with the host.\n\n1228\n01:05:01,322 --> 01:05:02,158\nAll right?\n\n1229\n01:05:02,158 --> 01:05:06,033\nSome of the other ones, we've got the boot\noptions that I mentioned earlier as far as\n\n1230\n01:05:06,033 --> 01:05:07,243\nwhat to do when we boot up.\n\n1231\n01:05:07,243 --> 01:05:09,970\nYou can set a boot delay.\n\n1232\n01:05:09,970 --> 01:05:10,948\nAnd that's kinda nice.\n\n1233\n01:05:10,948 --> 01:05:15,590\nIf you've got five virtual machines on\nthis one host, and you have them all set\n\n1234\n01:05:15,590 --> 01:05:20,350\nto start up when the hosts starts, well,\nthey're all gonna start at the same time.\n\n1235\n01:05:20,350 --> 01:05:22,260\nSo you've got five machines\nall booting at once.\n\n1236\n01:05:22,260 --> 01:05:26,030\nAnd if they're competing for\naccess to something like a local disk or\n\n1237\n01:05:26,030 --> 01:05:29,300\niSCSI SAN It's going to\nslow down their boot time.\n\n1238\n01:05:29,300 --> 01:05:31,270\nSo you may want to come in and\nset an order.\n\n1239\n01:05:31,270 --> 01:05:36,770\nYou might want to say this server starts\n120 milliseconds after the other ones.\n\n1240\n01:05:36,770 --> 01:05:40,110\nOr 1000 milliseconds,\nwhich would be one second.\n\n1241\n01:05:40,110 --> 01:05:43,330\nOr you can go really\nhigh like a full minute.\n\n1242\n01:05:43,330 --> 01:05:46,840\nSo you can lay out that\ntime to get a delay for\n\n1243\n01:05:46,840 --> 01:05:50,600\nhow long to wait before actually powering\nthis one on after the host boots.\n\n1244\n01:05:50,600 --> 01:05:56,600\nWe'll see other ways to control that later\non, but this is one method right here.\n\n1245\n01:05:56,600 --> 01:05:59,830\nIt's got a few other steps in here\nas far as what to do if a failure\n\n1246\n01:05:59,830 --> 01:06:00,638\nhappens during boot.\n\n1247\n01:06:00,638 --> 01:06:04,820\nIf you wanna try and retry the boot or\nsomething like that, you can do it.\n\n1248\n01:06:04,820 --> 01:06:06,560\nYou've got those options.\n\n1249\n01:06:06,560 --> 01:06:08,260\nAnd then lastly you've\ngot the advanced screens.\n\n1250\n01:06:08,260 --> 01:06:12,090\nAnd the advanced screens, boy, you know\nthey really open up all sorts of stuff.\n\n1251\n01:06:12,090 --> 01:06:14,270\nWhether we want to disable\nhardware acceleration.\n\n1252\n01:06:14,270 --> 01:06:16,267\nYou know maybe you've got\nsome compatibility issues and\n\n1253\n01:06:16,267 --> 01:06:17,063\nyou don't want that.\n\n1254\n01:06:17,063 --> 01:06:19,651\nIf you want logging, debugging,\n\n1255\n01:06:19,651 --> 01:06:25,468\nright some of the more advanced things\nthat we can turn on and off right there.\n\n1256\n01:06:25,468 --> 01:06:30,058\nAll right, so those are some of the things\nthat we tweaked, now this section here\n\n1257\n01:06:30,058 --> 01:06:34,663\nunder VMWare tools, none of these work\nunless you have VMWare tools installed.\n\n1258\n01:06:34,663 --> 01:06:36,788\nSo that's why it's such an important\npart of getting that done.\n\n1259\n01:06:36,788 --> 01:06:39,783\nIt should be one of the first steps that\nyou do when you create a virtual machine.\n\n1260\n01:06:42,732 --> 01:06:43,777\nAll right.\n\n1261\n01:06:43,777 --> 01:06:49,140\nAs far as creating a VM,\nit's pretty straightforward, right?\n\n1262\n01:06:49,140 --> 01:06:51,953\nIf we're creating it from\ninstallation media, right,\n\n1263\n01:06:51,953 --> 01:06:55,760\ninstalling from an ISO like I did earlier,\nwhen we installed.\n\n1264\n01:06:55,760 --> 01:06:59,950\nOr if we're installing from a virtual\nmachine appliance like that OVF file for\n\n1265\n01:06:59,950 --> 01:07:01,960\nDrupal, that I just imported in.\n\n1266\n01:07:01,960 --> 01:07:05,050\nBut, there is a third way that\nwe can create a virtual machine.\n\n1267\n01:07:05,050 --> 01:07:08,960\nAnd that's my importing\nan existing machine, alright?\n\n1268\n01:07:08,960 --> 01:07:12,060\nYou might already have a physical server,\nand\n\n1269\n01:07:12,060 --> 01:07:14,850\nyou wanna convert it to\nbecome a virtual machine.\n\n1270\n01:07:14,850 --> 01:07:20,330\nOr you might have virtual machines in\nanother product like Microsoft Hyper-V or\n\n1271\n01:07:20,330 --> 01:07:25,000\nsomething like that, and you wanna import\nthat virtual machine into VMware, alright?\n\n1272\n01:07:25,000 --> 01:07:30,490\nSo vSphere does support importing\nvirtual machines from other systems,\n\n1273\n01:07:30,490 --> 01:07:32,270\nand importing physical machines.\n\n1274\n01:07:32,270 --> 01:07:33,330\nAll right?\n\n1275\n01:07:33,330 --> 01:07:35,990\nAnd the way we do that is by\nusing a software package called\n\n1276\n01:07:35,990 --> 01:07:37,570\nthe VMWare Converter.\n\n1277\n01:07:37,570 --> 01:07:38,080\nAll right?\n\n1278\n01:07:38,080 --> 01:07:40,801\nThe VMWare converter,\nit's a stand alone product.\n\n1279\n01:07:40,801 --> 01:07:46,772\nThat is, it's available from VMware, and\nit's not a part of Vcenter by default.\n\n1280\n01:07:46,772 --> 01:07:49,280\nSo it's not like installed with Vcenter.\n\n1281\n01:07:49,280 --> 01:07:51,416\nBut I installed it here on this machine.\n\n1282\n01:07:51,416 --> 01:07:54,179\nIt's called the Vcenter converter.\n\n1283\n01:07:54,179 --> 01:07:57,755\nWhen you install it, you can install\nit in a client server model.\n\n1284\n01:07:57,755 --> 01:08:01,230\nWhere you run the converter on one system,\nbut it stores all its data on another,\n\n1285\n01:08:01,230 --> 01:08:03,908\nor you can install it as a standalone,\nand that's what I did.\n\n1286\n01:08:03,908 --> 01:08:06,624\nThat's where the client and the server\nare right here on the same machine.\n\n1287\n01:08:06,624 --> 01:08:09,980\nThat's where we're gonna be doing\nthe import and controlling all that,\n\n1288\n01:08:09,980 --> 01:08:11,180\njust right from one host.\n\n1289\n01:08:12,420 --> 01:08:15,800\nSo I'm gonna fire up that VMWare\nconverter and I'll show you that process.\n\n1290\n01:08:15,800 --> 01:08:19,338\nNow, The VMware converter like I said\nit can pull from a number of different\n\n1291\n01:08:19,338 --> 01:08:19,854\nsources.\n\n1292\n01:08:19,854 --> 01:08:23,066\nSo when we come in here and tell it we\nwant to convert a machine it doesn't\n\n1293\n01:08:23,066 --> 01:08:26,709\nreally know if we're talking about a\nphysical machine or a virtual machine yet,\n\n1294\n01:08:26,709 --> 01:08:30,001\nit just knows we're going to be pulling\nfrom some other kind of machine.\n\n1295\n01:08:30,001 --> 01:08:33,452\nAnd so when we hit convert it's\ngoing to launch a little wizard and\n\n1296\n01:08:33,452 --> 01:08:35,921\nwe tell it where we're\ngetting our data from.\n\n1297\n01:08:35,921 --> 01:08:38,684\nYou can get your data from\na number of cool places.\n\n1298\n01:08:38,684 --> 01:08:41,470\nA powered on machine is\nprobably the coolest.\n\n1299\n01:08:41,470 --> 01:08:42,040\nAll right?\n\n1300\n01:08:42,040 --> 01:08:46,030\nThis is where we can point it\nto an IP address of a machine.\n\n1301\n01:08:46,030 --> 01:08:47,517\nAnd we can provide it a user name and\n\n1302\n01:08:47,517 --> 01:08:51,173\na password of an administrator on that\nsystem, right, you gotta have full access.\n\n1303\n01:08:51,173 --> 01:08:54,517\nAnd it will reach out, Windows or Linux.\n\n1304\n01:08:54,517 --> 01:08:58,882\nIt will install a special\nutility on that machine.\n\n1305\n01:08:58,882 --> 01:09:01,506\nAnd then, that machine will reboot.\n\n1306\n01:09:01,506 --> 01:09:06,234\nAnd when the machine reboots,\nit'll fire up the converter and it will\n\n1307\n01:09:06,234 --> 01:09:11,860\nupload a cloned image of that machine\nright here to our VMware converter.\n\n1308\n01:09:11,860 --> 01:09:12,590\nAll right.\n\n1309\n01:09:12,590 --> 01:09:16,480\nAnd after that, it leaves,\nthe machine shut down.\n\n1310\n01:09:17,750 --> 01:09:22,310\nWe can then import this image that we\nmade right in as a virtual machine and\n\n1311\n01:09:22,310 --> 01:09:24,740\nnow we virtualize that physical box.\n\n1312\n01:09:24,740 --> 01:09:27,210\nThe original physical\nbox is just shut down.\n\n1313\n01:09:27,210 --> 01:09:28,400\nNo changes were made to it.\n\n1314\n01:09:28,400 --> 01:09:31,300\nSo if something goes wrong in\nthe conversion, we can just go and\n\n1315\n01:09:31,300 --> 01:09:32,420\nboot it right back up.\n\n1316\n01:09:32,420 --> 01:09:34,240\nAnd it'll be happy and healthy again.\n\n1317\n01:09:34,240 --> 01:09:35,880\nSo it's kind of a safety net.\n\n1318\n01:09:35,880 --> 01:09:37,950\nIt does have to reboot,\nthough, it's got to shut down.\n\n1319\n01:09:37,950 --> 01:09:40,900\nSo there is down time during\nthe conversion process.\n\n1320\n01:09:40,900 --> 01:09:43,740\nBut if you've got a bunch\nof physical servers,\n\n1321\n01:09:43,740 --> 01:09:47,680\nthis is a great way to convert them,\nand I can give you a great example.\n\n1322\n01:09:47,680 --> 01:09:53,220\nI was working for a bank out in Seattle\nand we were in a skyscraper and\n\n1323\n01:09:53,220 --> 01:09:58,710\nour server room, we had about 250,\n270 servers in there, physical servers.\n\n1324\n01:09:58,710 --> 01:10:01,390\nYou know each server serving\na particular purpose.\n\n1325\n01:10:01,390 --> 01:10:05,000\nAnd we got notified from our\nbuilding superintendent that\n\n1326\n01:10:05,000 --> 01:10:08,120\nwe had reached the floor load for\nour floor.\n\n1327\n01:10:08,120 --> 01:10:11,010\nThat you could only have so\nmuch weight in the data center,\n\n1328\n01:10:11,010 --> 01:10:13,600\ncuz we were on the 19th\nfloor of the building, and\n\n1329\n01:10:13,600 --> 01:10:16,190\nyou don't want it to collapse and\ndrop down to the lower floor.\n\n1330\n01:10:16,190 --> 01:10:20,430\nSo any time we added a new server\nwe had to take a server out.\n\n1331\n01:10:20,430 --> 01:10:23,250\nNew server comes in old server\nhas to go out to compensate for\n\n1332\n01:10:23,250 --> 01:10:25,170\nthat weight we were at our limit.\n\n1333\n01:10:25,170 --> 01:10:28,370\nWell we switched or\nimplemented virtualization.\n\n1334\n01:10:28,370 --> 01:10:29,500\nWe used VMWare.\n\n1335\n01:10:29,500 --> 01:10:34,520\nIt was vSphere 3 back then but\nwhich really wasn't called vSphere but\n\n1336\n01:10:34,520 --> 01:10:36,440\nanyhow, it doesn't matter.\n\n1337\n01:10:36,440 --> 01:10:39,480\nSo we went in and\ndeployed ESXI, there we go.\n\n1338\n01:10:39,480 --> 01:10:43,050\nAnd, actually it wasn't ESXI back then\nit was just ESX but it doesn't matter.\n\n1339\n01:10:43,050 --> 01:10:47,640\nSo we went and deployed that and what\nwe did was we used the VMware converter\n\n1340\n01:10:47,640 --> 01:10:51,570\nto take our existing converter so like we\nhad a web server and a file server and\n\n1341\n01:10:51,570 --> 01:10:53,940\ndomain controllers and\nall this different systems.\n\n1342\n01:10:53,940 --> 01:10:59,580\nAnd we fired up the converter, and had\nit reach out, and it cloned the systems,\n\n1343\n01:10:59,580 --> 01:11:03,710\nbrought them in as a virtual machine,\nand booted them up, ready to rock\n\n1344\n01:11:03,710 --> 01:11:07,830\nas a virtual machine with the same name,\nsame IP address, same configuration.\n\n1345\n01:11:07,830 --> 01:11:12,610\nAll the things that were necessary and\nwith VM ware tools installed and\n\n1346\n01:11:12,610 --> 01:11:14,440\nconfigured operate on top of EXX.\n\n1347\n01:11:14,440 --> 01:11:17,230\nIt was an excellent process and for\n\n1348\n01:11:17,230 --> 01:11:22,120\nevery ten servers we migrated, there were\nprobably two or three that had issues.\n\n1349\n01:11:22,120 --> 01:11:25,740\nSo a good seven migrated over with\nout us having to really do anything,\n\n1350\n01:11:25,740 --> 01:11:29,090\nthe other ones we had to tweak or\nmodify or whatever to get them set, so\n\n1351\n01:11:29,090 --> 01:11:29,920\nsometimes it doesn't work.\n\n1352\n01:11:29,920 --> 01:11:33,040\nIn fact, domain controllers,\nthat's generally not good idea to use,\n\n1353\n01:11:33,040 --> 01:11:34,670\nI think we had most of those fail.\n\n1354\n01:11:34,670 --> 01:11:37,830\nSo with active directory domain controls\nit's easier to build new ones, and\n\n1355\n01:11:37,830 --> 01:11:39,300\nthat's what we ended up doing.\n\n1356\n01:11:39,300 --> 01:11:44,299\nBut by the end of the day, we were able to\nreduce our 250 to 270 physical servers,\n\n1357\n01:11:44,299 --> 01:11:46,643\ndown to under 100 physical servers.\n\n1358\n01:11:46,643 --> 01:11:52,352\nSo we cut our data center in almost\nto a third of the previous size.\n\n1359\n01:11:52,352 --> 01:11:55,153\nSo we were well under the maximum\nfloor load at that point.\n\n1360\n01:11:55,153 --> 01:11:58,172\nAnd we really got a lot better\nutility out of our equipment.\n\n1361\n01:11:58,172 --> 01:12:02,064\nSo, that's the type of advantage\nyou get by virtualizing, and\n\n1362\n01:12:02,064 --> 01:12:05,150\nthe VMware Converter helps with it.\n\n1363\n01:12:05,150 --> 01:12:07,540\nAll right, some of the other ways\nthat we can bring things in,\n\n1364\n01:12:07,540 --> 01:12:11,560\nwe can bring it in from an older\nVMware infrastructure virtual machine.\n\n1365\n01:12:11,560 --> 01:12:15,673\nSo, back in VMware or\nESXi, whatever, version 3,\n\n1366\n01:12:15,673 --> 01:12:19,270\nwhat I was talking about,\nit didn't used to be called vSphere.\n\n1367\n01:12:19,270 --> 01:12:22,010\nIt used to be called VI,\nVirtual Infrastructure.\n\n1368\n01:12:22,010 --> 01:12:25,530\nSo we had VMware VI3,\nthat's what we were running back then.\n\n1369\n01:12:25,530 --> 01:12:29,290\nBut if you have old virtual machines\nthat were defined that way,\n\n1370\n01:12:29,290 --> 01:12:31,190\nyou can import them right here.\n\n1371\n01:12:31,190 --> 01:12:34,541\nWe can bring in virtual machines\ncreated with VMware Workstation, or\n\n1372\n01:12:34,541 --> 01:12:38,920\nVMware Fusion, that's what they mean\nby other VMware virtual machines.\n\n1373\n01:12:38,920 --> 01:12:43,650\nYou can also bring it in from backup\nimages or third party virtual machines.\n\n1374\n01:12:43,650 --> 01:12:44,850\nThis is kinda neat.\n\n1375\n01:12:44,850 --> 01:12:49,490\nYou might have an Acronis True Image\nbackup of a physical machine.\n\n1376\n01:12:49,490 --> 01:12:52,939\nWell, the VMware Converter can convert\nthat and turn it into a virtual machine.\n\n1377\n01:12:54,480 --> 01:12:56,746\nBut you could also bring it\nin from third party software,\n\n1378\n01:12:56,746 --> 01:12:58,221\nlike Microsoft HyperV or whatever.\n\n1379\n01:12:58,221 --> 01:13:01,520\nAnd then lastly you can bring\nit in directly from HyperV.\n\n1380\n01:13:01,520 --> 01:13:06,120\nYou can point it to a HyperV server and\nit'll grab that VM and bring it right over\n\n1381\n01:13:06,120 --> 01:13:10,810\ninto VMware, making the necessary\nchanges to get it functional, all right.\n\n1382\n01:13:10,810 --> 01:13:12,120\nJust to show you an example,\n\n1383\n01:13:12,120 --> 01:13:16,550\nI'm gonna pull from a third party virtual\nmachine, I've got one here on my desktop.\n\n1384\n01:13:18,160 --> 01:13:21,300\nThis one is actually coming over\nfrom Microsoft Virtual Server,\n\n1385\n01:13:21,300 --> 01:13:23,470\nwhich is an older virtualization product.\n\n1386\n01:13:23,470 --> 01:13:25,080\nSo I've got it grabbed right there.\n\n1387\n01:13:25,080 --> 01:13:29,815\n[COUGH] If I take a look at my source\ndetails, it'll open up that file, and\n\n1388\n01:13:29,815 --> 01:13:34,222\nit'll give me information about the\nvirtual machine that I'm about to import.\n\n1389\n01:13:34,222 --> 01:13:36,360\nSo it'll tell me how much memory it had,\n\n1390\n01:13:36,360 --> 01:13:38,570\nhow much hard drive space it had,\nhere we go.\n\n1391\n01:13:38,570 --> 01:13:42,025\nI can see that it had a 64-gig hard drive,\nit only had 1 gig of RAM.\n\n1392\n01:13:42,025 --> 01:13:44,730\nIt had a single network adapter,\na single processor.\n\n1393\n01:13:44,730 --> 01:13:49,015\nIt's running Windows Server\n2003 Enterprise 32-bit, so\n\n1394\n01:13:49,015 --> 01:13:51,392\nit's only a 32-bit OS on this VM.\n\n1395\n01:13:51,392 --> 01:13:53,947\nAnd I can see that it's really only using\n\n1396\n01:13:53,947 --> 01:13:58,300\n4 gigs of the 64-gig hard drive\nthat I have assigned to it.\n\n1397\n01:13:58,300 --> 01:14:02,700\nSo I need to know this information because\nwhen we create the virtual machine that\n\n1398\n01:14:02,700 --> 01:14:06,856\nthis is gonna become, well, I need to\nat least have that level of hardware.\n\n1399\n01:14:08,714 --> 01:14:11,970\nAll right, on the next screen it's\ngonna ask where I'm gonna put it.\n\n1400\n01:14:11,970 --> 01:14:14,110\nSo I need to tell it where\nit's going to go to.\n\n1401\n01:14:14,110 --> 01:14:17,380\nAnd I'm gonna tell it that it's\ngonna become a VMware infrastructure\n\n1402\n01:14:17,380 --> 01:14:18,720\nvirtual machine.\n\n1403\n01:14:18,720 --> 01:14:20,380\nAnd I'll tell it the server\nthat it's gonna go to.\n\n1404\n01:14:20,380 --> 01:14:22,260\nNow this is confusing.\n\n1405\n01:14:22,260 --> 01:14:26,950\nIf you have a standalone ESXi server,\nthen that's what you put in here,\n\n1406\n01:14:26,950 --> 01:14:30,600\nthe IP address of that server,\nthe username, and the password.\n\n1407\n01:14:30,600 --> 01:14:34,460\nBut if you're like me and you're using\nvCenter to manage this, when it asks for\n\n1408\n01:14:34,460 --> 01:14:38,510\nthe destination server, you actually need\nto put in your vCenter server information.\n\n1409\n01:14:38,510 --> 01:14:42,490\nSo that's what I'm putting in here,\nis the account and\n\n1410\n01:14:42,490 --> 01:14:45,722\nother information for that vCenter server.\n\n1411\n01:14:48,926 --> 01:14:52,635\nAll right, so now it's gonna reach out to\nvCenter and find out about the different\n\n1412\n01:14:52,635 --> 01:14:56,550\nservers that I've got, and it's gonna\nask me where I want to deploy this.\n\n1413\n01:14:56,550 --> 01:14:59,200\nNow, notice how it shows my existing VMs?\n\n1414\n01:14:59,200 --> 01:15:01,570\nIf you've already made\na virtual machine for\n\n1415\n01:15:01,570 --> 01:15:05,850\nthis, you can deploy the image right on\ntop of that existing virtual machine.\n\n1416\n01:15:05,850 --> 01:15:09,310\nBut otherwise,\nyou can just choose the data center and\n\n1417\n01:15:09,310 --> 01:15:13,620\nit will create a new virtual\nmachine with this name right here.\n\n1418\n01:15:13,620 --> 01:15:16,120\nAnd that's what I want,\nI don't wanna overwrite an existing one.\n\n1419\n01:15:18,310 --> 01:15:22,392\nAll right, and now it's gonna ask what\nphysical server and datastore I want it to\n\n1420\n01:15:22,392 --> 01:15:26,810\nreside on, so I can pick a server, and\nI get my capacity information over here.\n\n1421\n01:15:26,810 --> 01:15:29,842\nI'll put it on server 2 and\nwe'll just stick it in datastore 1,\n\n1422\n01:15:29,842 --> 01:15:30,954\nit's got enough room.\n\n1423\n01:15:34,772 --> 01:15:37,710\nOh, it also asks for\nwhat virtual machine hardware version.\n\n1424\n01:15:37,710 --> 01:15:40,310\nI didn't change it,\nI left it at version 10.\n\n1425\n01:15:40,310 --> 01:15:42,880\nBut I could manipulate that if I\nwanted to go to a lower version.\n\n1426\n01:15:44,110 --> 01:15:47,550\nThen we get a last minute screen here\nto change some of the other options.\n\n1427\n01:15:47,550 --> 01:15:50,470\nWe can change things\nlike the virtual disk.\n\n1428\n01:15:50,470 --> 01:15:53,690\nThe virtual disk on the old machine was\n64 gigs and you can come in here and\n\n1429\n01:15:53,690 --> 01:15:56,790\nchoose to thick or thin provision\nit based on what it is you want.\n\n1430\n01:15:56,790 --> 01:15:58,460\nI'm gonna go ahead and\nthin provision this one so\n\n1431\n01:15:58,460 --> 01:16:00,710\nit'll go a little bit faster for me.\n\n1432\n01:16:00,710 --> 01:16:02,670\nYou'll see other things like CPUs.\n\n1433\n01:16:02,670 --> 01:16:04,779\nWe could bump up the CPUs or memory.\n\n1434\n01:16:04,779 --> 01:16:08,335\nWe can adjust our network, because our\nnetwork name probably doesn't match with\n\n1435\n01:16:08,335 --> 01:16:12,130\nwhatever was used in the old system so\nwe'll probably need to re-map that.\n\n1436\n01:16:12,130 --> 01:16:14,960\nSo you've got various options in here\nthat you might wanna tinker with.\n\n1437\n01:16:14,960 --> 01:16:17,480\nOne of the ones I like\nis this one right here,\n\n1438\n01:16:17,480 --> 01:16:20,220\nInstall VMware Tools on\nthe destination machine.\n\n1439\n01:16:20,220 --> 01:16:23,780\nIt can do post-conversion processing and\n\n1440\n01:16:23,780 --> 01:16:26,110\nactually install software and\ndo things like that.\n\n1441\n01:16:26,110 --> 01:16:28,590\nSo it's kind of nice to\nhave that functionality.\n\n1442\n01:16:28,590 --> 01:16:32,280\nIt's also got this remove\nsystem restore checkpoints.\n\n1443\n01:16:32,280 --> 01:16:35,670\nIn Windows,\nI don't think Server 2003 had it, but\n\n1444\n01:16:35,670 --> 01:16:38,610\nI know that Server 2008 does and\nWindows 7 and so on.\n\n1445\n01:16:38,610 --> 01:16:39,556\nThey have these restore points.\n\n1446\n01:16:39,556 --> 01:16:44,292\nWhat you don't want is one of your end\nusers to roll back a virtual machine to\n\n1447\n01:16:44,292 --> 01:16:47,950\nsomething prior to when you\ninstalled VMware Tools.\n\n1448\n01:16:47,950 --> 01:16:51,285\nSo it's a good idea to wipe\nthose restore points out.\n\n1449\n01:16:51,285 --> 01:16:54,660\nSo a couple of different options that\nwe can kinda tweak and change in here.\n\n1450\n01:16:56,600 --> 01:16:59,720\nAnd then when we hit Next, it's got\nall the information that it needs, and\n\n1451\n01:16:59,720 --> 01:17:01,760\nit'll start the conversion, all right?\n\n1452\n01:17:01,760 --> 01:17:05,200\nNow I'm converting a virtual machine\nfile that's right here on my system,\n\n1453\n01:17:05,200 --> 01:17:08,130\nso it won't take too long,\nit'll probably take maybe 20 minutes.\n\n1454\n01:17:08,130 --> 01:17:10,740\nIf you're converting\na physical machine though,\n\n1455\n01:17:10,740 --> 01:17:14,350\nit's gotta copy an image of\nthat VM across the network.\n\n1456\n01:17:14,350 --> 01:17:16,670\nThis process could take hours, right.\n\n1457\n01:17:16,670 --> 01:17:19,360\nA lot of times, we would cue up two or\nthree of them each night and\n\n1458\n01:17:19,360 --> 01:17:22,655\njust let them run overnight and\nhave them ready in the morning.\n\n1459\n01:17:22,655 --> 01:17:24,625\nMission critical servers\nwere a little bit different.\n\n1460\n01:17:24,625 --> 01:17:26,095\nBut you can see this one kicking off here.\n\n1461\n01:17:26,095 --> 01:17:28,465\nAnd actually it's giving me\nan estimated time of an hour.\n\n1462\n01:17:28,465 --> 01:17:30,570\nSo that's a good long\nconversion right there.\n\n1463\n01:17:30,570 --> 01:17:34,155\nBut we'll just let it run and\nit'll convert and import that machine.\n\n1464\n01:17:35,535 --> 01:17:39,235\nSo in this episode we've seen three\ndifferent ways to create virtual machines.\n\n1465\n01:17:39,235 --> 01:17:42,285\nWe can create them from scratch\njust by whipping up a VM and\n\n1466\n01:17:42,285 --> 01:17:45,240\nplugging in an installation media and\ninstalling our OS.\n\n1467\n01:17:45,240 --> 01:17:47,950\nThe second way was we could\nimport a pre-built machine,\n\n1468\n01:17:47,950 --> 01:17:52,210\nan OVF template that somebody's made,\nwe can import it and bring it in that way.\n\n1469\n01:17:52,210 --> 01:17:55,990\nA third way is we can\nconvert an existing machine,\n\n1470\n01:17:55,990 --> 01:17:59,280\nwhich actually it looks like,\nyeah, well whatever.\n\n1471\n01:17:59,280 --> 01:18:02,510\nSo we can convert an existing machine and\nbring it in that way.\n\n1472\n01:18:02,510 --> 01:18:06,229\nThat's kind of a nice way to go P-to-V,\nphysical-to-virtual, or even V-to-V,\n\n1473\n01:18:06,229 --> 01:18:09,240\nvirtual-to-virtual which\nis what I was doing.\n\n1474\n01:18:09,240 --> 01:18:12,020\nThere is a fourth way that I haven't\ntalked about which are templates.\n\n1475\n01:18:12,020 --> 01:18:15,144\nAnd I wanna talk about those in the next\nepisode because templates can be really\n\n1476\n01:18:15,144 --> 01:18:17,560\nuseful for all sorts of different things.\n\n1477\n01:18:17,560 --> 01:18:20,020\nBut the three methods that we saw here,\nthese are the most common.\n\n1478\n01:18:20,020 --> 01:18:22,664\nSo just keep that in mind as\nyou start to work with VMware.\n\n1479\n01:18:22,664 --> 01:18:26,670\nAll right, well that's a pretty good\nspot for us to wrap up this episode.\n\n1480\n01:18:26,670 --> 01:18:28,800\nSo, let me just remind you guys,\n\n1481\n01:18:28,800 --> 01:18:32,130\nif you have any questions on any of this,\nlet me know.\n\n1482\n01:18:32,130 --> 01:18:35,500\nJump into the forums, we've got the Q&A\nforums at the top of every page.\n\n1483\n01:18:35,500 --> 01:18:38,270\nYou'll see that link, that says Q&A,\npost your questions there,\n\n1484\n01:18:38,270 --> 01:18:40,290\nwe monitor and answer.\n\n1485\n01:18:40,290 --> 01:18:43,730\nIf it's live during the show, you're\nalways welcome to use that chat room.\n\n1486\n01:18:43,730 --> 01:18:47,950\nIf you go to itpro.tv/live you'll\nsee the chat box beneath the video.\n\n1487\n01:18:47,950 --> 01:18:50,760\nPost your questions there,\nwe monitor and answer during the show.\n\n1488\n01:18:50,760 --> 01:18:54,650\nWe want to make sure you guys have\nthe information you need to be successful.\n\n1489\n01:18:54,650 --> 01:18:57,510\nAll right,\nwell I hope you guys enjoyed this episode\n\n1490\n01:18:57,510 --> 01:19:01,015\neven in spite of the bizarre\nwardrobe change in between segments.\n\n1491\n01:19:01,015 --> 01:19:04,200\nBut [LAUGH] it's part of the excitement,\nright?\n\n1492\n01:19:04,200 --> 01:19:05,094\nSo I hope you guys enjoyed it.\n\n1493\n01:19:05,094 --> 01:19:09,494\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n1494\n01:19:09,494 --> 01:19:19,494\n[MUSIC]\n\n1495\n01:19:22,008 --> 01:19:27,940\n[SOUND]\n\n",
          "vimeoId": "103538712"
        },
        {
          "description": "In this episode Don demonstrates how to use vApps to group and manage multiple virtual machines in support of a disturbed application. He also takes a look at how to clone a virtual machine and build templates for rapid deployment.",
          "length": "3764",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/008-Creating-Virtual-Machines-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/008-Creating-Virtual-Machines-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/008-Creating-Virtual-Machines-Pt-2-sm.jpg",
          "title": "Creating Virtual Machines Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,623 --> 00:00:22,426\n[SOUND]\n\n3\n00:00:22,426 --> 00:00:32,426\n[MUSIC]\n\n4\n00:00:33,548 --> 00:00:36,789\nAll right, good morning,\ngood afternoon, and good evening,\n\n5\n00:00:36,789 --> 00:00:39,258\nand welcome back to another\nepisode of IT Pro TV.\n\n6\n00:00:39,258 --> 00:00:43,220\nI'm your host Don Pezet, back again on\nanother exciting Hawaiian shirt Friday.\n\n7\n00:00:43,220 --> 00:00:48,910\n[LAUGH] We are back with another episode\nof VMware Certified Professional, VCP.\n\n8\n00:00:48,910 --> 00:00:52,490\nWe're going to dive right back in to\nthe world of data center virtualization.\n\n9\n00:00:52,490 --> 00:00:56,980\nIn our last episode, we finally started\ncreating some virtual machines, and\n\n10\n00:00:56,980 --> 00:01:00,110\nI showed you guys a couple of different\nways we can go about creating vms.\n\n11\n00:01:00,110 --> 00:01:04,415\nBut what I want to do now,\nis kick it up a notch, do the Lagasse,\n\n12\n00:01:04,415 --> 00:01:08,635\nBam, and really take our virtual\nmachine creation to the next level.\n\n13\n00:01:08,635 --> 00:01:10,235\nI know I'm being super lame today.\n\n14\n00:01:10,235 --> 00:01:14,575\nSo what we want to do is see some of the\nadvanced functionality we have though and\n\n15\n00:01:14,575 --> 00:01:17,090\nthere's some really really cool stuff.\n\n16\n00:01:17,090 --> 00:01:20,350\nI want to kick it off talking about vApps.\n\n17\n00:01:20,350 --> 00:01:24,610\nI mentioned vApps once before and\nsimply how they had a word of confusion.\n\n18\n00:01:24,610 --> 00:01:29,950\nOn the internet, you can find a number\nof people who offer virtual appliances.\n\n19\n00:01:29,950 --> 00:01:32,500\nThese are virtual machines that are pre\n\n20\n00:01:32,500 --> 00:01:34,410\nbuilt that have software\ninstalled in them.\n\n21\n00:01:34,410 --> 00:01:36,000\nSo you don't have to figure\nout how to install it.\n\n22\n00:01:36,000 --> 00:01:37,970\nYou just import the VM, and you're done.\n\n23\n00:01:37,970 --> 00:01:40,080\nAnd I gave an example of like Drupal.\n\n24\n00:01:40,080 --> 00:01:44,130\nIf I wanted to run the Drupal content\nmanagement software, I could just go and\n\n25\n00:01:44,130 --> 00:01:47,690\nget that turn key a solution,\ndeploy it, run it, and see.\n\n26\n00:01:47,690 --> 00:01:51,104\nIt's great for trying out software without\nhaving to learn all the nuts and bolts,\n\n27\n00:01:51,104 --> 00:01:51,609\nall right?\n\n28\n00:01:51,609 --> 00:01:55,266\nBut, a vApp is something different, okay.\n\n29\n00:01:55,266 --> 00:01:58,120\nA vApp is not a virtual appliance.\n\n30\n00:01:58,120 --> 00:02:00,240\nA vApp is more like a container.\n\n31\n00:02:00,240 --> 00:02:01,120\nMore and more,\n\n32\n00:02:01,120 --> 00:02:05,980\nwe're starting to see applications\nbeing developed as web applications.\n\n33\n00:02:05,980 --> 00:02:11,000\nAnd the application isn't run on just one\nserver, it's run on multiple servers.\n\n34\n00:02:11,000 --> 00:02:14,550\nAnd the main reason we see that is\nbecause a lot of internet start-ups, and\n\n35\n00:02:14,550 --> 00:02:19,185\norganizations like that, have explosive\ngrowth in the early days of their company.\n\n36\n00:02:19,185 --> 00:02:22,695\nJust look at Twitter, when Twitter first\nstarted they had like five servers, and\n\n37\n00:02:22,695 --> 00:02:25,185\nthat was is cuz they just\nstarted writing their software.\n\n38\n00:02:25,185 --> 00:02:28,865\nNow they've probably got over 5,000\nservers because of how massive their\n\n39\n00:02:28,865 --> 00:02:30,605\norganization has grown.\n\n40\n00:02:30,605 --> 00:02:35,205\nSo their applications, when they write\nthem, have to be designed to scale.\n\n41\n00:02:35,205 --> 00:02:38,285\nThey have to break it apart in to\na client server type model where\n\n42\n00:02:38,285 --> 00:02:41,830\nyou've got your web front end\nthat your clients all see.\n\n43\n00:02:41,830 --> 00:02:44,710\nAnd then you've got database servers\non the back end that are storing all\n\n44\n00:02:44,710 --> 00:02:48,420\nthe tweets and other information\nright there on the back end, right?\n\n45\n00:02:48,420 --> 00:02:53,840\nSo immediately our software is gonna be\nmade up of two virtual machines, not one.\n\n46\n00:02:53,840 --> 00:02:58,060\nAnd I kind of started to set some of\nthat up just as we were building virtual\n\n47\n00:02:58,060 --> 00:03:00,460\nmachines in earlier episodes.\n\n48\n00:03:00,460 --> 00:03:06,030\nYou might remember that I created\na App- web one and an App-database,\n\n49\n00:03:06,030 --> 00:03:08,850\nright those were two virtual\nmachines I created in earlier shows.\n\n50\n00:03:08,850 --> 00:03:12,190\nThey're both running Linux and they've\ngot the VMware tools loaded on them.\n\n51\n00:03:12,190 --> 00:03:14,040\nBut the idea being here\nis my web interface,\n\n52\n00:03:14,040 --> 00:03:16,530\nthis is what my end\nusers are gonna hit and\n\n53\n00:03:16,530 --> 00:03:20,170\nthen it's gonna make queries against\nmy database on the back end.\n\n54\n00:03:20,170 --> 00:03:23,720\nAnd there might be other components\nthat are built into this application.\n\n55\n00:03:23,720 --> 00:03:28,090\nI might have an authentication server\nif I'm doing Dual factor, or RADIUS, or\n\n56\n00:03:28,090 --> 00:03:30,440\nsomething like that,\nI might have a separate box for that.\n\n57\n00:03:30,440 --> 00:03:32,708\nI might have other components\nthat are required.\n\n58\n00:03:32,708 --> 00:03:34,850\nLook at Amazon.com,\n\n59\n00:03:34,850 --> 00:03:40,460\nAmazon has two completely separate\ninventory tracking and sales databases.\n\n60\n00:03:40,460 --> 00:03:44,810\nSo when you go to their website and search\nfor products, you're hitting one set\n\n61\n00:03:44,810 --> 00:03:48,550\nof databases that are completely read\nonly that you're not able to modify.\n\n62\n00:03:48,550 --> 00:03:52,480\nBut when you place an order, you're\nwriting an order to a database that you\n\n63\n00:03:52,480 --> 00:03:54,580\nare able to modify,\ncuz you gotta write your record to it.\n\n64\n00:03:54,580 --> 00:03:58,670\nSo two completely separate sets of\ndatabases and that may be necessary.\n\n65\n00:03:58,670 --> 00:04:02,030\nSo there could be many,\nmany servers involved in a VM.\n\n66\n00:04:02,030 --> 00:04:05,030\nNow normally,\nvSphere doesn't care about that.\n\n67\n00:04:05,030 --> 00:04:06,900\nIt just cares about the virtual machines.\n\n68\n00:04:06,900 --> 00:04:09,800\nIt doesn't know that they're tied\ntogether, that they're interrelated.\n\n69\n00:04:11,260 --> 00:04:12,830\nBut, they are.\n\n70\n00:04:12,830 --> 00:04:15,350\nThey are interrelated and\nwe need to be aware of that.\n\n71\n00:04:15,350 --> 00:04:18,980\nThat is especially true in\nweb apps like this where\n\n72\n00:04:18,980 --> 00:04:22,690\nIs the web front end gonna work\nif the database is offline?\n\n73\n00:04:22,690 --> 00:04:23,192\nNo.\n\n74\n00:04:23,192 --> 00:04:25,492\nYou'll go to the web page and\nit won't return any results.\n\n75\n00:04:25,492 --> 00:04:26,730\nIt won't function.\n\n76\n00:04:26,730 --> 00:04:30,290\nThe web server is dependent\non the database server.\n\n77\n00:04:30,290 --> 00:04:31,840\nOr you might have authentication, right?\n\n78\n00:04:31,840 --> 00:04:34,350\nYou might have an active\ndirectory domain controller, and\n\n79\n00:04:34,350 --> 00:04:36,870\nthen you've got a web server\nthat has an authenticated page.\n\n80\n00:04:36,870 --> 00:04:39,740\nWell, the domain controller needs to\nbe up first before you can get to\n\n81\n00:04:39,740 --> 00:04:41,060\nthe authenticated page.\n\n82\n00:04:41,060 --> 00:04:46,380\nSo, wouldn't it be nice if there\nwas a way we could teach vSphere\n\n83\n00:04:46,380 --> 00:04:49,760\nabout how our machines\nare related together?\n\n84\n00:04:49,760 --> 00:04:52,540\nAnd you can using a vApp, all right?.\n\n85\n00:04:52,540 --> 00:04:55,530\nvApps are just a way to tie our\nvirtual machines together so\n\n86\n00:04:55,530 --> 00:04:58,210\nthey understand their internal\nrelationship, all right?\n\n87\n00:04:58,210 --> 00:05:01,080\nSo let's say that this app right here,\n\n88\n00:05:01,080 --> 00:05:04,720\nthis is gonna be my new Internet store,\nokay?\n\n89\n00:05:04,720 --> 00:05:07,540\nSo VMware doesn't know about that at all,\nit just knows\n\n90\n00:05:07,540 --> 00:05:10,500\nthat I've got two virtual machines and\nthat they do something, all right?\n\n91\n00:05:10,500 --> 00:05:14,600\nBut I can come in and define a vApp and\nlink these guys together and you can link\n\n92\n00:05:14,600 --> 00:05:18,410\nstorage repositories to it, you can link\nnetworks, your virtual machines networks,\n\n93\n00:05:18,410 --> 00:05:21,910\nyou can link all sorts of stuff\ntogether into a single VM.\n\n94\n00:05:23,150 --> 00:05:26,820\nSo what I'm gonna do is I'm gonna\njump back out to my vCenter here.\n\n95\n00:05:26,820 --> 00:05:30,740\nAnd inside of vCenter, I've been\ngoing down here to virtual machines.\n\n96\n00:05:30,740 --> 00:05:34,030\nBut right beneath it, I've got vApps.\n\n97\n00:05:34,030 --> 00:05:36,390\nAnd if I go into vApps,\nthere's none by default.\n\n98\n00:05:36,390 --> 00:05:41,790\nBut I can go in and I can create one,\nnow you can create it from scratch or\n\n99\n00:05:41,790 --> 00:05:46,980\njust like with our virtual machines,\nyou can import an OVF template.\n\n100\n00:05:46,980 --> 00:05:51,170\nIt may be that someone out there has\nreleased their software already pre built\n\n101\n00:05:51,170 --> 00:05:55,920\nfor this as a vApp with multiple VMs, and\nyou can import those right here just like\n\n102\n00:05:55,920 --> 00:05:59,610\nI did with that Drupal one, now the droop\none I imported was just a single machine.\n\n103\n00:05:59,610 --> 00:06:02,450\nSo it wasn't a vApp,\nit was just an independent box.\n\n104\n00:06:02,450 --> 00:06:03,550\nBut if you had more than one VM,\n\n105\n00:06:03,550 --> 00:06:07,190\nyou might be able to import it\nif that vendor has provided it.\n\n106\n00:06:07,190 --> 00:06:09,590\nBut I'm gonna create one from scratch.\n\n107\n00:06:09,590 --> 00:06:12,320\nAll right, so I'm gonna create a new vApp.\n\n108\n00:06:12,320 --> 00:06:15,660\nNow, you might already have an existing\nvApp, and you can clone it.\n\n109\n00:06:15,660 --> 00:06:19,280\nThat clone feature's really cool,\nbecause it will copy everything.\n\n110\n00:06:19,280 --> 00:06:22,240\nAll the virtual machines inside of it,\nall that and clone it.\n\n111\n00:06:22,240 --> 00:06:26,310\nSo if you have a production environment\nand you want to create a dev or\n\n112\n00:06:26,310 --> 00:06:29,780\na test environment, you can quickly\nclone your production environment and\n\n113\n00:06:29,780 --> 00:06:31,020\ncreate that test environment.\n\n114\n00:06:31,020 --> 00:06:33,360\nTest things out without\naffecting the production world.\n\n115\n00:06:33,360 --> 00:06:35,170\nReally cool stuff, All right?\n\n116\n00:06:35,170 --> 00:06:36,590\nBut I'm gonna create\na new one from scratch.\n\n117\n00:06:38,050 --> 00:06:38,630\nAll right.\n\n118\n00:06:38,630 --> 00:06:40,760\nThen it's gonna ask where\nI want to store it.\n\n119\n00:06:40,760 --> 00:06:44,590\nSo I've got my one data center and\nI'm gonna store this one on server two.\n\n120\n00:06:44,590 --> 00:06:50,450\nThat's the server I've been working\nfrom so I'll pick that one, all right?\n\n121\n00:06:50,450 --> 00:06:52,060\nAnd then I need to give the app a name.\n\n122\n00:06:52,060 --> 00:06:55,160\nI'm gonna call this my Internet Store,\nall right.\n\n123\n00:06:55,160 --> 00:06:59,040\nOr my My Web Store, or\nwhatever we're going to call it.\n\n124\n00:06:59,040 --> 00:07:01,810\nAnd it's just gonna be stored\nright here in ITProTV lab.\n\n125\n00:07:01,810 --> 00:07:03,010\nSo, that's my internet store.\n\n126\n00:07:04,320 --> 00:07:06,720\nAnd then I need to handle\nmy resource allocations.\n\n127\n00:07:06,720 --> 00:07:08,570\nNow, this is a really neat screen.\n\n128\n00:07:08,570 --> 00:07:12,670\nI showed you in an earlier\nepisode how we can put limits\n\n129\n00:07:12,670 --> 00:07:17,390\non the amount of CPU that a VM has or\nthe amount of memory that they have.\n\n130\n00:07:17,390 --> 00:07:20,200\nWe can set minimums and maximums.\n\n131\n00:07:20,200 --> 00:07:24,170\nWell, on a vApp, you can actually\ndo it for the entire vApp, and\n\n132\n00:07:24,170 --> 00:07:28,980\nthat's pretty cool, because it might\njust be one VM that's spiking high or\n\n133\n00:07:28,980 --> 00:07:32,540\nanother one or maybe all together\ncombined, they spike high, so\n\n134\n00:07:32,540 --> 00:07:35,020\nwe might want to set a limit\non the vApp as a whole and\n\n135\n00:07:35,020 --> 00:07:38,530\nwe can do it right here, you'll see the\nreservation, that's our minimum, right?\n\n136\n00:07:38,530 --> 00:07:42,690\nThe minimum amount of processor or memory\nthat's gonna be available for that vApp.\n\n137\n00:07:42,690 --> 00:07:47,430\nAnd then you can set limits, that's the\nmaximum, where we want to cap it off at.\n\n138\n00:07:47,430 --> 00:07:49,314\nThe default is no limit, right?\n\n139\n00:07:49,314 --> 00:07:51,792\nZero is the minimum,\nunlimited is the maximum, so\n\n140\n00:07:51,792 --> 00:07:53,702\nit can use whatever resources it gets.\n\n141\n00:07:53,702 --> 00:07:57,499\nAnd I'm gonna leave it that way for now.\n\n142\n00:07:57,499 --> 00:07:59,321\nAll right, and then we're gonna finish.\n\n143\n00:07:59,321 --> 00:08:00,480\nAnd I now have a V-App.\n\n144\n00:08:00,480 --> 00:08:01,840\nAll right?\n\n145\n00:08:01,840 --> 00:08:05,210\nNow, it's not a very exciting\nV-App because it's empty.\n\n146\n00:08:05,210 --> 00:08:06,860\nSo here's my Internet store.\n\n147\n00:08:06,860 --> 00:08:11,200\nIt's created, and it'll show as\ncompletely healthy here in the system.\n\n148\n00:08:11,200 --> 00:08:14,660\nIf I go to my summary screen it's\ngonna give me information about it,\n\n149\n00:08:14,660 --> 00:08:19,870\nbut CPU usage is zero, memory usage is\nzero because the V app itself is empty.\n\n150\n00:08:19,870 --> 00:08:22,540\nWhat I need to do now\nis one of two things.\n\n151\n00:08:22,540 --> 00:08:23,220\nRight?\nOne.\n\n152\n00:08:23,220 --> 00:08:25,290\nIf you've already got VMs like I do,\n\n153\n00:08:25,290 --> 00:08:27,870\nwe just need to move\nthose VMs into the V-App.\n\n154\n00:08:27,870 --> 00:08:29,380\nAll right?\n\n155\n00:08:29,380 --> 00:08:32,420\nOr two, if you don't have VMS,\nif you're creating this from scratch.\n\n156\n00:08:32,420 --> 00:08:33,440\nWell, you can go in and\n\n157\n00:08:33,440 --> 00:08:37,340\nstart to create virtual machines\nright here inside of the V-App.\n\n158\n00:08:37,340 --> 00:08:38,740\nAll right.\nIt serves as a container.\n\n159\n00:08:38,740 --> 00:08:40,030\nYou just create the VM's in here.\n\n160\n00:08:40,030 --> 00:08:40,700\nAll right.\n\n161\n00:08:40,700 --> 00:08:43,260\nSo if we were gonna go\nthat route to create VM's,\n\n162\n00:08:43,260 --> 00:08:46,320\nit's no different than what\nwe saw in earlier episodes.\n\n163\n00:08:46,320 --> 00:08:48,000\nYou just create them and\nstick them in here.\n\n164\n00:08:48,000 --> 00:08:51,190\nBut I've got ones I wanna move so\nI'm gonna go back up to my virtual machine\n\n165\n00:08:51,190 --> 00:08:54,180\nscreen and I'm gonna find\nthe ones that I want to move.\n\n166\n00:08:54,180 --> 00:08:55,810\nSo I'll start with the database.\n\n167\n00:08:55,810 --> 00:08:57,990\nAll right.\nSo here's my app-database.\n\n168\n00:08:57,990 --> 00:09:01,240\nAnd I'll just right click on that and\nI'll choose move to.\n\n169\n00:09:03,940 --> 00:09:05,560\nAnd we choose move to.\n\n170\n00:09:05,560 --> 00:09:08,390\nIt'll show places that we can move it to.\n\n171\n00:09:08,390 --> 00:09:10,190\nAnd we can move it to the data center,\n\n172\n00:09:10,190 --> 00:09:13,240\nto a particular host or\ncluster is where we normally go.\n\n173\n00:09:13,240 --> 00:09:17,730\nBut if you expand out server two,\nthere is my V-App.\n\n174\n00:09:17,730 --> 00:09:20,060\nAnd so I can move the virtual\nmachine right into the V-App.\n\n175\n00:09:20,060 --> 00:09:23,710\nNow This is one of those where\nI know we're supposed to use\n\n176\n00:09:23,710 --> 00:09:28,070\nthe V Sphere web client for everything,\nbut the regular V Sphere client,\n\n177\n00:09:28,070 --> 00:09:31,510\nthe one you can install locally, you can\nactually just drag and drop these VM's,\n\n178\n00:09:31,510 --> 00:09:34,010\nand that's kind of nice and\nI like that better, bu\n\n179\n00:09:34,010 --> 00:09:37,900\nthere we just use the move to option, so I\nam going to move it to the internet store.\n\n180\n00:09:37,900 --> 00:09:38,570\nAll right?\n\n181\n00:09:38,570 --> 00:09:40,080\nSo that one's gonna move.\n\n182\n00:09:40,080 --> 00:09:42,360\nAnd then I'll do the same\nthing with app-web1.\n\n183\n00:09:42,360 --> 00:09:48,434\nI'm gonna go ahead and move that one\ninto the Internet store V-App also.\n\n184\n00:09:52,764 --> 00:09:54,900\nThere's my Internet store.\n\n185\n00:09:54,900 --> 00:09:56,440\nAnd I wanna send it on over.\n\n186\n00:09:56,440 --> 00:09:57,250\nAll right.\n\n187\n00:09:57,250 --> 00:10:00,520\nNow looking at a VMs,\nthey don't look any different do they?\n\n188\n00:10:00,520 --> 00:10:01,190\nWell they aren't.\n\n189\n00:10:01,190 --> 00:10:04,210\nThey're, they're still virtual machines,\nthey're still running on server two,\n\n190\n00:10:04,210 --> 00:10:05,710\nI think is where those guys are sitting.\n\n191\n00:10:05,710 --> 00:10:07,270\nSo they're, they're just sitting there,\n\n192\n00:10:07,270 --> 00:10:10,810\nnothing changed as far as\nthe virtual machines themselves.\n\n193\n00:10:10,810 --> 00:10:13,010\nBut now they show as being\na part of the V-App.\n\n194\n00:10:13,010 --> 00:10:17,490\nAnd that means I can set policies and\nconfigurations on the V-App and\n\n195\n00:10:17,490 --> 00:10:19,580\nthey will apply, they will trickle down or\n\n196\n00:10:19,580 --> 00:10:22,710\nbe inherited by these virtual machines,\nright?\n\n197\n00:10:22,710 --> 00:10:24,060\nThey call it propagation, right?\n\n198\n00:10:24,060 --> 00:10:27,570\nSo if I set permissions on the V-App,\nthey propagate down to the VMs.\n\n199\n00:10:27,570 --> 00:10:30,830\nIf I set limits on the V-App,\nthey propagate down to the VMs.\n\n200\n00:10:30,830 --> 00:10:35,780\nSo, now I can start to assign things based\non that I'm gonna go back to my V-App\n\n201\n00:10:35,780 --> 00:10:40,320\nselection screen and we'll some things\nare a little bit different now.\n\n202\n00:10:40,320 --> 00:10:42,250\nWhen I go into my internet store and\n\n203\n00:10:42,250 --> 00:10:46,920\ngo to my summary, I should see that\nI have some CPU and memory usage.\n\n204\n00:10:46,920 --> 00:10:49,010\nI'll give it just a moment to update.\n\n205\n00:10:49,010 --> 00:10:49,520\nas they should.\n\n206\n00:10:49,520 --> 00:10:52,940\nI didn't actually check to see whether\nthose virtual machines were on or not.\n\n207\n00:10:52,940 --> 00:10:56,160\n[LAUGH] So, if they're turned off I\nmight not see a lot of CPU usage.\n\n208\n00:10:56,160 --> 00:11:01,100\nBut moving the VM into a VF doesn't\nactually change their power state or\n\n209\n00:11:01,100 --> 00:11:03,350\nanything like that so\nit just comes right over.\n\n210\n00:11:03,350 --> 00:11:06,920\nYou know,\nin my case it doesn't seem to show it.\n\n211\n00:11:06,920 --> 00:11:11,750\nWell anyhow, once we're in here we can\nstart to check various things to make sure\n\n212\n00:11:11,750 --> 00:11:13,530\nthey're working, and\nI need to go through and verify.\n\n213\n00:11:13,530 --> 00:11:16,170\nYou're going to see some\nneat stuff in here,\n\n214\n00:11:16,170 --> 00:11:19,890\nand one of things we can see is\nlike product version and vendor.\n\n215\n00:11:19,890 --> 00:11:21,710\nThose are values that we set.\n\n216\n00:11:21,710 --> 00:11:25,050\nAgain, VM ware,\nthey don't know about our application.\n\n217\n00:11:25,050 --> 00:11:26,670\nWe have to tell it.\n\n218\n00:11:26,670 --> 00:11:30,460\nAnd so it's cool because as we define this\nwe can specify what the product's name is,\n\n219\n00:11:30,460 --> 00:11:33,050\nwhat the version is and so on, right?\n\n220\n00:11:33,050 --> 00:11:37,100\nSo maybe my Internet store\nis built off of WordPress.\n\n221\n00:11:37,100 --> 00:11:39,620\nAnd so I want to put here that\nthe product is WordPress and\n\n222\n00:11:39,620 --> 00:11:42,155\nthe version is 3.9.2, right?\n\n223\n00:11:42,155 --> 00:11:45,910\nAnd then when a new version comes out,\nlike 3.9.3,\n\n224\n00:11:45,910 --> 00:11:50,190\nI might clone the Internet store and\ntest my upgrade in the clone.\n\n225\n00:11:50,190 --> 00:11:50,860\nRight?\n\n226\n00:11:50,860 --> 00:11:53,190\nAnd if everything tests out fine,\n\n227\n00:11:53,190 --> 00:11:56,790\nthen I might transition services\nover to that clone or I might go and\n\n228\n00:11:56,790 --> 00:11:59,840\nupdate the production one, you know,\nbut you can kind of keep track of that.\n\n229\n00:11:59,840 --> 00:12:00,580\nWith these values.\n\n230\n00:12:01,710 --> 00:12:04,248\nAll right.\nNow those values are all specified by us.\n\n231\n00:12:04,248 --> 00:12:06,840\nIf we right-click on\nthat Internet store and\n\n232\n00:12:06,840 --> 00:12:10,550\ngo to Edit Settings,\nwe'll see the settings of the V-App.\n\n233\n00:12:10,550 --> 00:12:13,740\nAnd here's where we can start to\nspecify some of that information.\n\n234\n00:12:13,740 --> 00:12:15,260\nAnd there's some neat things in here.\n\n235\n00:12:15,260 --> 00:12:18,110\nA lot of this is just the stuff\nthat we saw in the wizard, right?\n\n236\n00:12:18,110 --> 00:12:20,730\nSo here's my CPU resources which\n\n237\n00:12:20,730 --> 00:12:23,530\nis just straight out of that\nwizard from earlier and memory.\n\n238\n00:12:23,530 --> 00:12:27,410\nSome of the other things we get\nare things like IP allocations.\n\n239\n00:12:27,410 --> 00:12:28,820\nThere's OVF sections.\n\n240\n00:12:28,820 --> 00:12:30,660\nIf you import it from an OVF file,\n\n241\n00:12:30,660 --> 00:12:32,610\nanything that wasn't recognized\nwill be displayed there.\n\n242\n00:12:32,610 --> 00:12:34,140\nI didn't do that so it's empty.\n\n243\n00:12:34,140 --> 00:12:38,560\nAlright, I can see how my IP allocations\nare happening, now what's that about?\n\n244\n00:12:38,560 --> 00:12:42,300\nWell when you have a V app,\nthere's virtual machines inside of it and\n\n245\n00:12:42,300 --> 00:12:45,280\nthey need to get their IP\naddresses from somewhere.\n\n246\n00:12:45,280 --> 00:12:47,700\nWell if you're using DHCP on your network,\n\n247\n00:12:47,700 --> 00:12:50,140\nthen the might just be pulling\nfrom DHCP and that's fine.\n\n248\n00:12:50,140 --> 00:12:52,480\nOr you might want to do\na static assignment.\n\n249\n00:12:52,480 --> 00:12:58,440\nOr you can dedicate a specific IP\naddressing policy just to this V-App and\n\n250\n00:12:58,440 --> 00:13:01,360\nwe'll see that down here\nunder IP allocations.\n\n251\n00:13:01,360 --> 00:13:03,150\nWe'll look at that in a moment.\n\n252\n00:13:03,150 --> 00:13:04,640\nI guess we can go and look at it now.\n\n253\n00:13:04,640 --> 00:13:08,280\nIf you look at it, see how it's got\nwhere I can turn on do I want it to be\n\n254\n00:13:08,280 --> 00:13:11,970\nfrom DHCP where they'll just get\ntheir addresses automatically or\n\n255\n00:13:11,970 --> 00:13:16,530\ndo I want it to pull from configuration\nfiles in the OVF environment?\n\n256\n00:13:16,530 --> 00:13:19,660\nAnd then down here we'll see the IP\nprotocols we want to support,\n\n257\n00:13:19,660 --> 00:13:21,530\nis it just gonna be IPv4, IPv6, or both?\n\n258\n00:13:21,530 --> 00:13:26,090\nMaybe I want to limit it just to IPv4, so\n\n259\n00:13:26,090 --> 00:13:29,900\nI can come in I can specify the things\nthat I want to do, all right?\n\n260\n00:13:29,900 --> 00:13:32,760\nNow, it's warning me that\nwhatever network I'm connected to\n\n261\n00:13:32,760 --> 00:13:36,160\ndoesn't seem to have a DHCP\nserver present right now.\n\n262\n00:13:36,160 --> 00:13:37,110\nSo that might be a problem.\n\n263\n00:13:37,110 --> 00:13:39,400\nI might need to go and\nconfigure that, and get that set up.\n\n264\n00:13:39,400 --> 00:13:42,330\nAll right.\n\n265\n00:13:43,990 --> 00:13:47,400\nSome of the other things we can\nput in here, the product, right?\n\n266\n00:13:47,400 --> 00:13:51,010\nWhen we saw that product name,\nversion, vendor, right,\n\n267\n00:13:51,010 --> 00:13:52,740\nhere's where those values come from.\n\n268\n00:13:52,740 --> 00:13:57,910\nSo I might say that my product\nis WordPress and my version\n\n269\n00:13:57,910 --> 00:14:02,800\nis 3.9.2 and the vendor is I\nthink is just WordPress, but\n\n270\n00:14:02,800 --> 00:14:06,180\nmaybe I'll put ITProTV as\nthe vendor cause we're making it.\n\n271\n00:14:06,180 --> 00:14:11,180\nAnd so I can specify all sorts of\ndifferent information in here to identify\n\n272\n00:14:11,180 --> 00:14:11,950\nthat software.\n\n273\n00:14:11,950 --> 00:14:13,350\nThis is just for my personal use.\n\n274\n00:14:13,350 --> 00:14:16,030\nIt doesn't actually\nimpact the V-App itself.\n\n275\n00:14:16,030 --> 00:14:18,350\nAlthough it is kind of important if\nyou're gonna be re-distributing this.\n\n276\n00:14:18,350 --> 00:14:21,920\nIf you're building a V-App to give to\nother people, you want to make sure this\n\n277\n00:14:21,920 --> 00:14:24,770\nstuff is detailed and\nthat you've got URLs entered in so\n\n278\n00:14:24,770 --> 00:14:28,310\npeople can come back to find you if\nthey need assistance or whatever.\n\n279\n00:14:29,420 --> 00:14:34,040\nYou've also got properties down here\nwhere you can specify individual,\n\n280\n00:14:34,040 --> 00:14:36,342\ncustom components,\nwhatever it is that you want.\n\n281\n00:14:36,342 --> 00:14:38,810\nThe V-App is running right now so\nI'm not allowed to change any of them, but\n\n282\n00:14:38,810 --> 00:14:40,820\nyou can come in and modify those.\n\n283\n00:14:40,820 --> 00:14:45,610\nBut probably the most important one\nis this guy right here, Start Order.\n\n284\n00:14:45,610 --> 00:14:49,990\nStart Order is where we can define\nthe order that these virtual machines\n\n285\n00:14:49,990 --> 00:14:53,230\nare gonna boot up in You\ncan group them together and\n\n286\n00:14:53,230 --> 00:14:54,960\nhave them boot at certain times.\n\n287\n00:14:54,960 --> 00:14:58,250\nBy default, each virtual machine\nwill be in its own group.\n\n288\n00:14:58,250 --> 00:15:00,980\nWell, I want group one to\nbe my database server.\n\n289\n00:15:00,980 --> 00:15:03,920\nI want the database server to start first.\n\n290\n00:15:03,920 --> 00:15:07,730\nAnd after the database server is up,\nthen I want my web servers to start.\n\n291\n00:15:07,730 --> 00:15:10,070\nNow I could have each web\nserver in its own group and\n\n292\n00:15:10,070 --> 00:15:15,470\nthey'll start one after the other or I\ncould put all my web servers in one group.\n\n293\n00:15:15,470 --> 00:15:18,580\nAnd when all the web servers are there\nthey'll all start at the same time.\n\n294\n00:15:18,580 --> 00:15:21,060\nSo I might be booting\nmultiple web servers at once.\n\n295\n00:15:21,060 --> 00:15:23,330\nAs long as I give the database\nserver enough time to kick on.\n\n296\n00:15:23,330 --> 00:15:24,510\nAll right?\n\n297\n00:15:24,510 --> 00:15:27,150\nAnd so you'll see over here,\noperation, power on.\n\n298\n00:15:27,150 --> 00:15:30,830\nSo when we power on the V-App\nstartup sequence proceeds when\n\n299\n00:15:30,830 --> 00:15:34,270\nthis amount of seconds have passed or\nVMWare tools are ready.\n\n300\n00:15:34,270 --> 00:15:34,860\nAll right?\n\n301\n00:15:34,860 --> 00:15:36,940\nI really like this option right here.\n\n302\n00:15:36,940 --> 00:15:41,630\nWhen a server boots up, just because\nit powered on doesn't mean it's ready.\n\n303\n00:15:41,630 --> 00:15:43,130\nThe operating system has to boot up.\n\n304\n00:15:43,130 --> 00:15:45,100\nIt might not be answering\nthe network calls.\n\n305\n00:15:45,100 --> 00:15:47,620\nIf you're running a database,\nmaybe you're running MySQL.\n\n306\n00:15:47,620 --> 00:15:50,290\nMySQL needs time to start, right?\n\n307\n00:15:50,290 --> 00:15:53,832\nSo when you let that system boot up,\nit's not ready to go right away.\n\n308\n00:15:53,832 --> 00:15:55,305\nSo you can set a time if you want.\n\n309\n00:15:55,305 --> 00:15:56,733\nLike here, they've done two minutes.\n\n310\n00:15:56,733 --> 00:15:58,104\n120 seconds.\n\n311\n00:15:58,104 --> 00:16:01,330\nBut what if your server boots\nfaster Then two minutes.\n\n312\n00:16:01,330 --> 00:16:04,012\nIf that happens, then it just waits.\n\n313\n00:16:04,012 --> 00:16:06,830\nIt waits til two minutes are up\nbefore it boots the other ones.\n\n314\n00:16:06,830 --> 00:16:10,218\nBut you can tell it, or\nVMware Tools are ready.\n\n315\n00:16:10,218 --> 00:16:12,250\nIf the VMware Tools boot up and\n\n316\n00:16:12,250 --> 00:16:15,220\nthey start communicating to the host,\nthen you're good to go.\n\n317\n00:16:15,220 --> 00:16:18,500\nYour services are likely running by\nthat point and you're ready to rock.\n\n318\n00:16:18,500 --> 00:16:19,445\nSo you can get a head start.\n\n319\n00:16:19,445 --> 00:16:23,445\nIf 120 seconds aren't up yet,\nit'll start early, all right?\n\n320\n00:16:23,445 --> 00:16:26,760\nOr it'll wait until 120 seconds, so\nthat's kind of a nice option to have.\n\n321\n00:16:28,870 --> 00:16:30,990\nYou can also specify what\nto do during shut down.\n\n322\n00:16:30,990 --> 00:16:34,450\nIf you want to power off or suspend,\nthose are normally the ones that we want.\n\n323\n00:16:34,450 --> 00:16:37,365\nOr guest shut down,\nthat's kind of a nice one.\n\n324\n00:16:37,365 --> 00:16:39,815\nInstead of just yanking\nthe power out of our guest,\n\n325\n00:16:39,815 --> 00:16:41,955\nwe can gracefully shut them down.\n\n326\n00:16:41,955 --> 00:16:45,965\nAnd you can specify that sequence too,\nall right.\n\n327\n00:16:45,965 --> 00:16:48,545\nAnd all of this can be rearranged,\nsee, we can move them around so\n\n328\n00:16:48,545 --> 00:16:51,795\nnow the database and the web server\nwould start at the same time.\n\n329\n00:16:51,795 --> 00:16:55,055\nOr I can move that down and\nnow it's separate, all right?\n\n330\n00:16:55,055 --> 00:16:58,655\nAnd those options that I just set right\nthere, that was for app-database.\n\n331\n00:16:58,655 --> 00:17:01,780\nYou'll notice that app-web\nhas its own settings.\n\n332\n00:17:01,780 --> 00:17:04,810\nAnd so we can come through and\nspecify those on app web,\n\n333\n00:17:04,810 --> 00:17:10,170\nwhat we wanna do for\nthat one too, all right?\n\n334\n00:17:10,170 --> 00:17:13,440\nNow that's stuff that you wouldn't\nnormally have because VMware,\n\n335\n00:17:13,440 --> 00:17:16,460\nor vSphere just wouldn't know that\nthese virtual machines are related,\n\n336\n00:17:16,460 --> 00:17:18,680\nit thinks that they're\nseparate virtual machines.\n\n337\n00:17:18,680 --> 00:17:20,960\nAnd we could go and\ntweak timings and so on.\n\n338\n00:17:20,960 --> 00:17:22,392\nBut this is much more efficient.\n\n339\n00:17:22,392 --> 00:17:26,840\nAll right, now when I say okay to that,\n\n340\n00:17:26,840 --> 00:17:29,420\nit's gonna update that,\nit knows the order I want to start things.\n\n341\n00:17:29,420 --> 00:17:32,162\nIt shows my product,\nmy version, my vendor, right,\n\n342\n00:17:32,162 --> 00:17:34,320\nthat information is showing right there.\n\n343\n00:17:34,320 --> 00:17:38,530\nAnd my system appears to be normal,\nmy vApp is running.\n\n344\n00:17:38,530 --> 00:17:42,140\nWhen we start and stop the vApp,\nwhen we power it on or\n\n345\n00:17:42,140 --> 00:17:47,540\nshut it down, it's gonna power on or\nshut down all the VMs inside of it too.\n\n346\n00:17:47,540 --> 00:17:50,840\nSo they're all tied together,\nit really helps to avoid mistakes.\n\n347\n00:17:50,840 --> 00:17:54,350\nThere might be somebody else, another\nnetwork admin that's just not really\n\n348\n00:17:54,350 --> 00:17:57,400\nfamiliar with this application, and\nthey boot things up in the wrong order.\n\n349\n00:17:57,400 --> 00:17:59,850\nOr they boot up some of the servers and\nnot others.\n\n350\n00:17:59,850 --> 00:18:01,330\nThis ties them all together.\n\n351\n00:18:01,330 --> 00:18:03,110\nSo this power on and shut down,\n\n352\n00:18:03,110 --> 00:18:08,000\nthat's gonna affect all of my virtual\nmachines that are a part of this vApp.\n\n353\n00:18:09,470 --> 00:18:12,240\nIf we jump over to Monitor that's\nwhere we can start to see alerts and\n\n354\n00:18:12,240 --> 00:18:13,370\nperformance information.\n\n355\n00:18:13,370 --> 00:18:17,350\nAnd again, it's reporting across all the\nvirtual machines that are inside of it.\n\n356\n00:18:17,350 --> 00:18:20,300\nAnd I just created this so\nI'm not gonna see any information.\n\n357\n00:18:20,300 --> 00:18:23,310\nIt tries to pull data\nfrom a period of days,\n\n358\n00:18:23,310 --> 00:18:25,060\nit's not gonna have anything in here.\n\n359\n00:18:25,060 --> 00:18:28,890\nBut you can start to see information\nbased on what you're currently using,\n\n360\n00:18:28,890 --> 00:18:34,800\nthe amount of memory and so on,\naggregated across your VMs, all right?\n\n361\n00:18:34,800 --> 00:18:37,290\nUnder the Manage tab, that's where\nwe can get into our settings and\n\n362\n00:18:37,290 --> 00:18:40,920\nother values,\nyou get your alarm definitions right here.\n\n363\n00:18:40,920 --> 00:18:44,680\nYou want alarms to notify you when\nsomething is wrong with the application,\n\n364\n00:18:44,680 --> 00:18:49,570\nand so you can define all sorts of\ndifferent things to warn you about there.\n\n365\n00:18:49,570 --> 00:18:51,620\nWe also have our permissions.\n\n366\n00:18:51,620 --> 00:18:53,710\nWhen you assign permissions on the vApp,\nso\n\n367\n00:18:53,710 --> 00:18:56,780\nif I allocate somebody administrator\nprivileges of this vApp,\n\n368\n00:18:56,780 --> 00:19:00,750\nthey also get those privileges against the\nVMs and data stores that are inside of it.\n\n369\n00:19:00,750 --> 00:19:04,020\nSo it allows you to create that kind\nof compartmentalized permissions.\n\n370\n00:19:06,210 --> 00:19:10,340\nAll right, now the Related Objects tab\nis probably one of the more useful ones.\n\n371\n00:19:10,340 --> 00:19:11,660\nBecause that's where we can go in and\n\n372\n00:19:11,660 --> 00:19:15,220\nwe can see what virtual\nmachines are tied to this vApp.\n\n373\n00:19:15,220 --> 00:19:19,540\nHere I can see app database and app web,\nand actually my app database is not\n\n374\n00:19:19,540 --> 00:19:22,860\nrunning, it's turned off right now,\nversus app web which is running.\n\n375\n00:19:22,860 --> 00:19:25,410\nSo I can spot that, and I can fix it.\n\n376\n00:19:25,410 --> 00:19:27,770\nI can you know,\nturn the machines on or off.\n\n377\n00:19:27,770 --> 00:19:30,480\nIf you go to Virtual Machines\nit just applies that filter.\n\n378\n00:19:30,480 --> 00:19:33,528\nBut you can also come in and look at\nthe data stores that are a part of it.\n\n379\n00:19:33,528 --> 00:19:36,300\nSo I've got everything on\nESX Server 2 right now.\n\n380\n00:19:36,300 --> 00:19:37,550\nAnd I can go to my Networks and\n\n381\n00:19:37,550 --> 00:19:41,380\nsee the networks that\nare attached to the vApp also.\n\n382\n00:19:41,380 --> 00:19:43,937\nAll right, if I shut that vApp down, so\n\n383\n00:19:43,937 --> 00:19:47,910\nI'm gonna go up here and\nI'll just tell it to shut down.\n\n384\n00:19:47,910 --> 00:19:49,290\nIt's gonna go and turn it off.\n\n385\n00:19:49,290 --> 00:19:53,500\nAnd when it shuts it down, it's gonna shut\nthe VMs that are a part of it down too.\n\n386\n00:19:53,500 --> 00:19:56,240\nSo it's reaching out and\nperforming that graceful shutdown.\n\n387\n00:19:56,240 --> 00:19:57,800\nSo that'll take it\na moment while it goes and\n\n388\n00:19:57,800 --> 00:20:00,390\ndoes that, and it turns the machines off.\n\n389\n00:20:00,390 --> 00:20:02,970\nAnd then when it's time\nto turn it back on again,\n\n390\n00:20:02,970 --> 00:20:05,750\nit's gonna boot them up in\nthe order that we specified.\n\n391\n00:20:05,750 --> 00:20:09,900\nSo the database server will come up first,\nand then the web server and so on.\n\n392\n00:20:09,900 --> 00:20:13,920\nAnd, I can't remember if the web\nserver has its tools or not.\n\n393\n00:20:15,230 --> 00:20:17,978\nOh, there we go, sorry,\nit did, so it just powered off.\n\n394\n00:20:17,978 --> 00:20:20,170\nIf I tried to power it off and\ndo the graceful shutdown and\n\n395\n00:20:20,170 --> 00:20:23,050\nit didn't have the tools it might fail,\nso I was just waiting on that.\n\n396\n00:20:23,050 --> 00:20:25,600\nSo I can see they're both\npowered off right now.\n\n397\n00:20:25,600 --> 00:20:28,863\nAnd if I take that Internet store and\nI power it on,\n\n398\n00:20:28,863 --> 00:20:31,445\nits gonna go to boot these machines up.\n\n399\n00:20:31,445 --> 00:20:34,580\nAnd what I should see, and\nI'll just wait for the screen to refresh,\n\n400\n00:20:34,580 --> 00:20:36,020\nI should see the App Database.\n\n401\n00:20:36,020 --> 00:20:36,685\nThere it goes.\n\n402\n00:20:36,685 --> 00:20:39,490\nIt's powered on, but\nthe web server is still powered off.\n\n403\n00:20:39,490 --> 00:20:40,120\nSo its gonna wait.\n\n404\n00:20:40,120 --> 00:20:44,150\nAnd it's gonna wait either 2 minutes,\n120 seconds, or\n\n405\n00:20:44,150 --> 00:20:48,230\nit's going to wait until the VMware Tools\non App Database start to communicate,\n\n406\n00:20:48,230 --> 00:20:51,600\nto let us know that it's ready to rock,\nall right?\n\n407\n00:20:51,600 --> 00:20:54,790\nNow, I guess we could take\na look at App Database and\n\n408\n00:20:54,790 --> 00:20:59,970\nsee if it actually has the VMware\ntools installed on it.\n\n409\n00:20:59,970 --> 00:21:00,780\nOh, it doesn't.\n\n410\n00:21:00,780 --> 00:21:02,510\nSo it doesn't have\nthe VMware Tools installed so\n\n411\n00:21:02,510 --> 00:21:04,340\nit's never gonna get that notification.\n\n412\n00:21:04,340 --> 00:21:09,218\nSo it is gonna wait a full\ntwo minutes before it kicks\n\n413\n00:21:09,218 --> 00:21:11,945\nin to boot up that other one.\n\n414\n00:21:11,945 --> 00:21:14,589\nAll right, so\nthat's basically what a vApp is,\n\n415\n00:21:14,589 --> 00:21:18,070\njust a way to tie these\nvirtual machines together.\n\n416\n00:21:18,070 --> 00:21:22,903\nIf you don't need the vApp anymore but\nyou still want to keep the VMs, you can.\n\n417\n00:21:22,903 --> 00:21:24,390\nYou just need to take them out.\n\n418\n00:21:24,390 --> 00:21:26,990\nYou can come in and take any one\nof these virtual machines, and\n\n419\n00:21:26,990 --> 00:21:29,460\nyou can right-click on them and\nchoose Move To.\n\n420\n00:21:29,460 --> 00:21:32,486\nAnd you can just move\nthem out of the vApp.\n\n421\n00:21:32,486 --> 00:21:36,109\nAnd now the policies and other things that\nare set on the Vapp no longer apply to\n\n422\n00:21:36,109 --> 00:21:37,910\nthat VM, and it's separate.\n\n423\n00:21:37,910 --> 00:21:41,760\nWhen you wanna delete a vApp, you can\njust move all the VMs out of it and\n\n424\n00:21:41,760 --> 00:21:44,330\ndelete the vApp, and\nyou'll still have your VMs.\n\n425\n00:21:44,330 --> 00:21:49,070\nIf you delete the vApp while it has VMs\nin there, it'll delete the VMs also.\n\n426\n00:21:49,070 --> 00:21:53,640\nSo if I were to delete my Internet store,\nit would wipe out these two servers.\n\n427\n00:21:53,640 --> 00:21:56,290\nThey'd be gone and I wouldn't have\naccess to them anymore, all right?\n\n428\n00:21:56,290 --> 00:21:58,903\nSo just be aware of that\nas you work with the vApps.\n\n429\n00:22:00,528 --> 00:22:05,330\nAll right, now I showed you start up and\nshut down, we can also do suspends.\n\n430\n00:22:05,330 --> 00:22:06,489\nI didn't do it here, but\n\n431\n00:22:06,489 --> 00:22:09,320\nif you right click on it you'll\nsee where I've got Suspend.\n\n432\n00:22:09,320 --> 00:22:12,279\nAnd that's where we do a save state of\nall the machines that are in there and\n\n433\n00:22:12,279 --> 00:22:13,890\nfreeze them at a point in time.\n\n434\n00:22:13,890 --> 00:22:16,450\nI can't do it right now cuz I'm\nstill in the boot up process,\n\n435\n00:22:16,450 --> 00:22:18,780\nsee on my active running task over here.\n\n436\n00:22:18,780 --> 00:22:21,301\nBut when that finishes I could\nright-click and suspend it, and\n\n437\n00:22:21,301 --> 00:22:22,794\nit'll just freeze everything in it,\n\n438\n00:22:22,794 --> 00:22:25,236\nmakes it really convenient to\nwork with these applications.\n\n439\n00:22:27,486 --> 00:22:29,410\nAll right, so let's see, that is vApps.\n\n440\n00:22:29,410 --> 00:22:31,780\nI think I covered\neverything that's on that.\n\n441\n00:22:31,780 --> 00:22:34,960\nThe next thing I want to talk\nabout are clones and templates,\n\n442\n00:22:34,960 --> 00:22:37,780\nbut there's not really all that\nmuch time left in this segment.\n\n443\n00:22:37,780 --> 00:22:38,530\nSo why don't we do this?\n\n444\n00:22:38,530 --> 00:22:40,240\nWhy don't we stop here and take a break?\n\n445\n00:22:40,240 --> 00:22:43,610\nAnd when we get back,\nwe'll take a look at clones and templates.\n\n446\n00:22:43,610 --> 00:22:44,850\nSo stay tuned.\n\n447\n00:22:44,850 --> 00:22:45,986\nWe'll be back after this.\n\n448\n00:22:45,986 --> 00:22:53,111\n[SOUND].\n\n449\n00:22:53,111 --> 00:22:54,737\nAll right, welcome back, everybody.\n\n450\n00:22:54,737 --> 00:22:58,300\nOkay, so what I wanna look at next\nis something a little bit different.\n\n451\n00:22:58,300 --> 00:23:00,750\nWe saw creating virtual\nmachines from scratch.\n\n452\n00:23:00,750 --> 00:23:05,440\nAnd we saw them from importing OVF\nfiles from the Internet or wherever.\n\n453\n00:23:05,440 --> 00:23:10,390\nNow I want to show you how to duplicate\nVMs that you've created yourself.\n\n454\n00:23:10,390 --> 00:23:14,236\nA lot of times we have the need for\nmultiple servers that are all very,\n\n455\n00:23:14,236 --> 00:23:14,860\nvery similar.\n\n456\n00:23:14,860 --> 00:23:16,672\nAnd so\ninstead of creating them from scratch,\n\n457\n00:23:16,672 --> 00:23:20,210\nit's kinda nice to be able to clone\nsomething that already exists.\n\n458\n00:23:20,210 --> 00:23:25,070\nAnd we have a cloning system built right\ninto vCenter that we can use to do that.\n\n459\n00:23:25,070 --> 00:23:28,413\nSo for example, I had my web app,\n\n460\n00:23:28,413 --> 00:23:33,040\nwhere I had app-database and app-web1.\n\n461\n00:23:33,040 --> 00:23:35,050\nThat was my first web server.\n\n462\n00:23:35,050 --> 00:23:39,445\nWell, if I need a second web server,\nit's gonna be the same as Web 1.\n\n463\n00:23:39,445 --> 00:23:41,257\nIt's gonna have the same content on it,\n\n464\n00:23:41,257 --> 00:23:43,296\nit's gonna reach out\nto the same databases.\n\n465\n00:23:43,296 --> 00:23:49,127\nSo instead of starting from scratch, I can\njust go to my existing virtual machine,\n\n466\n00:23:49,127 --> 00:23:51,724\nI can go to Web 1, and I can clone it.\n\n467\n00:23:51,724 --> 00:23:55,486\nMaking a duplicate copy that\nsaves me a ton of time.\n\n468\n00:23:55,486 --> 00:23:57,830\nWeb1 already has Linux installed.\n\n469\n00:23:57,830 --> 00:23:59,212\nIt's already got the VMware tools.\n\n470\n00:23:59,212 --> 00:24:01,380\nIt's already got everything we need.\n\n471\n00:24:01,380 --> 00:24:03,490\nI can just clone it.\n\n472\n00:24:03,490 --> 00:24:06,380\nWhen you clone a virtual machine,\nyou can just right click on it and\n\n473\n00:24:06,380 --> 00:24:09,480\nyou'll see clone to virtual machine.\n\n474\n00:24:09,480 --> 00:24:12,980\nThat will create a new virtual\nmachine right from this one.\n\n475\n00:24:12,980 --> 00:24:15,940\nSo I can clone it and\nkick that process off.\n\n476\n00:24:15,940 --> 00:24:23,910\nThis one will be app-web2,\nwhich we'll stick right there in our lab.\n\n477\n00:24:23,910 --> 00:24:25,050\nWe'll keep it on server two.\n\n478\n00:24:25,050 --> 00:24:27,680\nIt doesn't have to be on the same\nserver or the same data store,\n\n479\n00:24:27,680 --> 00:24:29,450\nyou can clone it to where every you want.\n\n480\n00:24:29,450 --> 00:24:31,810\nIf you clone it on the same server and\nthe same data store,\n\n481\n00:24:31,810 --> 00:24:33,620\nit actually happens fairly quickly.\n\n482\n00:24:33,620 --> 00:24:36,600\nIf you go between data stores though,\nit's got to copy that data, so\n\n483\n00:24:36,600 --> 00:24:38,520\nthe clone will take longer.\n\n484\n00:24:38,520 --> 00:24:41,790\nSo I'm gonna go ahead and\ntell it to do the clone, and\n\n485\n00:24:41,790 --> 00:24:44,710\nthen it's gonna ask where I'm gonna\nstore it, and I'll choose to store\n\n486\n00:24:44,710 --> 00:24:49,620\nit just in the same place, which is\nthis ESX server two data store one.\n\n487\n00:24:49,620 --> 00:24:54,460\nNow notice the virtual disk format,\nit's the same format as source.\n\n488\n00:24:54,460 --> 00:24:55,280\nIf I drop that down,\n\n489\n00:24:55,280 --> 00:24:59,390\nI can actually change how this other\none is going to be provisioned.\n\n490\n00:24:59,390 --> 00:25:01,470\nIf I want it to be thick or\nthin provisioned and\n\n491\n00:25:01,470 --> 00:25:02,950\nwhether I want to zero it out.\n\n492\n00:25:02,950 --> 00:25:04,720\nI'm gonna go in provision\njust to make it faster.\n\n493\n00:25:07,120 --> 00:25:07,870\nAll right.\n\n494\n00:25:07,870 --> 00:25:11,170\nThen we can pick other options we\nmight want to do with this clone.\n\n495\n00:25:11,170 --> 00:25:13,730\nIf you're cloning a Linux box,\nthere's really not much\n\n496\n00:25:13,730 --> 00:25:16,830\nwe have to do to exchange the IP\naddress and you're in business.\n\n497\n00:25:16,830 --> 00:25:20,010\nBut if you're cloning a Windows box, well,\n\n498\n00:25:20,010 --> 00:25:23,850\nWindows machines have what's called\na security identifier, or SID.\n\n499\n00:25:23,850 --> 00:25:27,450\nIt identifies that machine as far\nas it's security credentials go.\n\n500\n00:25:27,450 --> 00:25:32,070\nAnd if you clone it, your clone will have\nthe same SID as the original machine, and\n\n501\n00:25:32,070 --> 00:25:33,200\nthat's not good.\n\n502\n00:25:33,200 --> 00:25:36,110\nSo for those,\nwe may need to modify the machine.\n\n503\n00:25:36,110 --> 00:25:39,570\nAnd so we'll see options like\nCustomize the Operating System.\n\n504\n00:25:39,570 --> 00:25:40,160\nAll right.\n\n505\n00:25:40,160 --> 00:25:43,340\nAnd you can have it where it\nwill attempt to do that for you.\n\n506\n00:25:43,340 --> 00:25:43,930\nAll right.\n\n507\n00:25:43,930 --> 00:25:45,930\nCustomize the virtual machine's hardware.\n\n508\n00:25:45,930 --> 00:25:48,710\nMaybe the new machine doesn't need\nthe same hardware configuration as\n\n509\n00:25:48,710 --> 00:25:50,520\nthe other one, so you can tweak it there.\n\n510\n00:25:50,520 --> 00:25:53,210\nAnd then power on the virtual\nmachine after creation.\n\n511\n00:25:53,210 --> 00:25:55,090\nGo ahead and make it and\nfire it up right now.\n\n512\n00:25:55,090 --> 00:25:56,150\nAll right.\n\n513\n00:25:56,150 --> 00:25:57,610\nThat customized the operating system.\n\n514\n00:25:57,610 --> 00:26:01,140\nYou'll see here on the next screen,\nit learns about the guest OS.\n\n515\n00:26:01,140 --> 00:26:03,040\nAnd if it's a Linux box like this,\n\n516\n00:26:03,040 --> 00:26:05,770\nwe don't see a whole\nheck of a lot of options.\n\n517\n00:26:05,770 --> 00:26:07,609\nBut if I had picked a Windows box,\n\n518\n00:26:07,609 --> 00:26:11,637\nwe would see the ability to change\nthe hosts name and insist that in fact.\n\n519\n00:26:11,637 --> 00:26:14,760\nLet me cancel this and\nI'll show you on a windows machine.\n\n520\n00:26:14,760 --> 00:26:16,072\nLet me take VM Server here.\n\n521\n00:26:18,510 --> 00:26:20,687\nAnd I'll go Clone to Virtual Machine.\n\n522\n00:26:24,201 --> 00:26:24,763\nAll right.\nSo\n\n523\n00:26:24,763 --> 00:26:26,983\nI'm just gonna repeat that same process.\n\n524\n00:26:32,580 --> 00:26:34,640\nAnd I'm not gonna mess with any of this.\n\n525\n00:26:34,640 --> 00:26:38,226\nWell, I guess maybe I'll put it, here.\n\n526\n00:26:38,226 --> 00:26:39,540\nAll right.\n\n527\n00:26:39,540 --> 00:26:42,150\nAnd then if I choose Customize\nthe Operating System, when I hit Next,\n\n528\n00:26:42,150 --> 00:26:42,790\nit's gonna look at it.\n\n529\n00:26:42,790 --> 00:26:44,370\nIt's gonna see that it is Windows.\n\n530\n00:26:44,370 --> 00:26:46,420\nWindows Server 2008 R2.\n\n531\n00:26:46,420 --> 00:26:51,540\nAnd now I get a spot where I can go in\nhere and start to customize some options.\n\n532\n00:26:51,540 --> 00:26:56,160\nAnd so when I go to do it, here it's\ncreating my Customization Specifications.\n\n533\n00:26:56,160 --> 00:27:00,320\nSee where I can set things like\nRegistration, I can set a Sysprep\n\n534\n00:27:00,320 --> 00:27:03,690\nanswer file if I've got one,\nthat will provide the data that we need.\n\n535\n00:27:03,690 --> 00:27:07,730\nOtherwise, we can specify\nother things in here.\n\n536\n00:27:07,730 --> 00:27:10,508\nOur name and organization,\nour computer name,\n\n537\n00:27:10,508 --> 00:27:14,060\noh it's gonna make me\nspecify something isn't it?\n\n538\n00:27:14,060 --> 00:27:15,580\nAll right, we'll do that.\n\n539\n00:27:18,871 --> 00:27:22,820\nHere we go a computer name, so\nthis might be VM server two.\n\n540\n00:27:22,820 --> 00:27:26,490\nI can append numeric values if I\nwant to create uniqueness that way.\n\n541\n00:27:26,490 --> 00:27:31,420\nWe can then go through and specify\nthings like our Windows license, right,\n\n542\n00:27:31,420 --> 00:27:33,310\nour product key that we\nneed to punch in there.\n\n543\n00:27:35,240 --> 00:27:36,930\nWe've got our administrator password.\n\n544\n00:27:38,490 --> 00:27:40,750\nIf we wanna have a unique\npassword on that system.\n\n545\n00:27:43,130 --> 00:27:44,530\nOur time zone and so on.\n\n546\n00:27:44,530 --> 00:27:47,410\nAnd basically what it's gonna do\nis it's gonna take this data and\n\n547\n00:27:47,410 --> 00:27:49,600\nit's gonna run the utility called Sysprep.\n\n548\n00:27:49,600 --> 00:27:52,260\nAnd Sysprep, it's a Windows utility that\n\n549\n00:27:52,260 --> 00:27:56,230\nremoves the unique values from\na machine and regenerates new ones.\n\n550\n00:27:56,230 --> 00:28:00,180\nSo that it would get us that new security\nidentifier to make sure that our clone\n\n551\n00:28:00,180 --> 00:28:02,140\nisn't going to be problematic.\n\n552\n00:28:02,140 --> 00:28:05,860\nSo definitely a good idea\non a Windows system and\n\n553\n00:28:05,860 --> 00:28:07,520\nI don't really need to change\nany of these other things.\n\n554\n00:28:07,520 --> 00:28:10,450\nBut it's this last one right here\nset operating system options,\n\n555\n00:28:10,450 --> 00:28:11,880\ngenerate new SID.\n\n556\n00:28:11,880 --> 00:28:15,520\nWith a Windows box, unless this is just\nan isolated network you're using for\n\n557\n00:28:15,520 --> 00:28:18,900\ntest purposes, if this is a machine\nthat's going into production,\n\n558\n00:28:18,900 --> 00:28:22,210\nyou need to generate a new SID,\nso, so that option is right there.\n\n559\n00:28:22,210 --> 00:28:23,060\nAll right.\n\n560\n00:28:23,060 --> 00:28:26,790\nNow that virtual machine's actually\nkinda large, so I'm gonna cancel that.\n\n561\n00:28:26,790 --> 00:28:29,670\nAnd I wanna clone my web server.\n\n562\n00:28:29,670 --> 00:28:32,550\nSo I'm gonna go and clone that web server,\nand then we'll just have a good pick.\n\n563\n00:28:32,550 --> 00:28:35,170\nJust like that, saves a ton of time.\n\n564\n00:28:35,170 --> 00:28:38,120\nAll right.\nNow what's going on on the back end is\n\n565\n00:28:38,120 --> 00:28:42,880\nVMware or ESXi is really taking\na snapshot of that virtual machine, and\n\n566\n00:28:42,880 --> 00:28:46,500\nthen writing it to an all new\nvirtual machine, creating the clone.\n\n567\n00:28:46,500 --> 00:28:49,150\nAll of our virtual machines are made\nup of just a couple of files,\n\n568\n00:28:49,150 --> 00:28:51,550\nthe files that identify\nthe configuration and\n\n569\n00:28:51,550 --> 00:28:54,540\nthen a virtual file that\ncontains all the hard drive data.\n\n570\n00:28:54,540 --> 00:28:56,860\nSo it's really just\ncloning that information.\n\n571\n00:28:56,860 --> 00:29:01,210\nIt doesn't really take\nan amazing amount of work,\n\n572\n00:29:01,210 --> 00:29:04,860\nespecially on Linux boxes where it just\nclones them right off, no big deal there.\n\n573\n00:29:06,552 --> 00:29:08,090\nAll right, so I am gonna go ahead and\n\n574\n00:29:08,090 --> 00:29:10,400\nclone this guy and\nwe'll just fire that up.\n\n575\n00:29:10,400 --> 00:29:12,270\nI won't customize this but\nI won't need to.\n\n576\n00:29:14,390 --> 00:29:17,890\nAll right, that's gonna kick off\nthe cloning process, and off it goes.\n\n577\n00:29:17,890 --> 00:29:21,470\nThe longest part of the cloning process\nis simply copying the hard drive.\n\n578\n00:29:21,470 --> 00:29:23,740\nAnd so we just have to wait for\nthat to happen.\n\n579\n00:29:23,740 --> 00:29:28,200\nAnd if we go and\ntake a look at one of our data stores, so\n\n580\n00:29:28,200 --> 00:29:31,570\nI'll go into that server two data\nstore where those machines reside.\n\n581\n00:29:31,570 --> 00:29:35,080\nWhen you go into the data store, you can\ngo in and look at the files inside of it.\n\n582\n00:29:35,080 --> 00:29:37,880\nAnd you'll see a folder for\neach of your virtual machines.\n\n583\n00:29:37,880 --> 00:29:40,450\nIt isolates the virtual\nmachines into their own folder.\n\n584\n00:29:40,450 --> 00:29:45,060\nAnd so here is app web one, and when I\nlook at it I'll see the various files\n\n585\n00:29:45,060 --> 00:29:48,785\nthat make up app web one, and\nthe two main files that I care about,\n\n586\n00:29:48,785 --> 00:29:54,090\nthere's this app web one.vmx, that's\nthe virtual machines configuration file,\n\n587\n00:29:54,090 --> 00:29:57,410\nit specifies all the hardware that\nwe've got and how it's defined.\n\n588\n00:29:57,410 --> 00:30:03,530\nAnd then, I'll also see in here\nthe VMDK file right here appweb1.vmdk.\n\n589\n00:30:03,530 --> 00:30:06,120\nThat's the virtual hard drive,\nand so it's got it there.\n\n590\n00:30:07,180 --> 00:30:10,320\nYou may see other files in\nhere as I look down my list,\n\n591\n00:30:10,320 --> 00:30:13,770\nI'll see things like this one,\nthat's got a long name here.\n\n592\n00:30:13,770 --> 00:30:17,290\nThat's a virtual swap file,\nlog files and so on.\n\n593\n00:30:17,290 --> 00:30:19,960\nBut all of these other files may come and\ngo.\n\n594\n00:30:19,960 --> 00:30:23,060\nIf I shut the virtual machine down,\na lot of these files will disappear.\n\n595\n00:30:23,060 --> 00:30:25,780\nYou know, the swap file gets purged and\nVRAM gets cleared.\n\n596\n00:30:25,780 --> 00:30:29,450\nSo you know, a lot of that stuff starts\nto disappear, but if I fire it up and\n\n597\n00:30:29,450 --> 00:30:32,270\nit's running like it is right now,\nyou'll see a ton of these files.\n\n598\n00:30:32,270 --> 00:30:33,810\nAlso if I start taking snapshots,\n\n599\n00:30:33,810 --> 00:30:38,030\nwhich we'll talk about in another episode,\nthose will appear in here also.\n\n600\n00:30:38,030 --> 00:30:39,720\nThere's one right here, a snapshot.\n\n601\n00:30:39,720 --> 00:30:43,300\nSo those things are constantly coming and\ngoing, but the two main files,\n\n602\n00:30:43,300 --> 00:30:47,100\nthat VMX And the VMDK's those\nare the main ones that we care about.\n\n603\n00:30:47,100 --> 00:30:51,410\nAnd its already made a folder for app web\ntwo, and if I look inside of it I should\n\n604\n00:30:51,410 --> 00:30:56,330\nsee where its created, there the VMDK and\nit's copying data to it.\n\n605\n00:30:56,330 --> 00:31:00,596\nNow I told it to thin provisions\nthat file is gonna keep growing,\n\n606\n00:31:00,596 --> 00:31:03,204\nright now it's at 1.2 gigs in size.\n\n607\n00:31:03,204 --> 00:31:04,398\nAnd if I sit here and\n\n608\n00:31:04,398 --> 00:31:08,964\nrefresh, I should be able to see that\ncontinue to grow as it copies data.\n\n609\n00:31:08,964 --> 00:31:11,320\nNow it's 1.5 gigs in size.\n\n610\n00:31:11,320 --> 00:31:14,500\nSo it's actively copying that data\nright now, and when it's done,\n\n611\n00:31:14,500 --> 00:31:15,560\nI'll have a clone.\n\n612\n00:31:17,200 --> 00:31:20,600\nSo real easy to duplicate\nsystems like that.\n\n613\n00:31:20,600 --> 00:31:23,420\nThere is another way we can\nachieve the same thing, and\n\n614\n00:31:23,420 --> 00:31:25,180\nthat's through using a template.\n\n615\n00:31:25,180 --> 00:31:27,840\nRight.\nTemplates work a lot like clones.\n\n616\n00:31:27,840 --> 00:31:29,710\nWhen we clone the virtual machine,\n\n617\n00:31:29,710 --> 00:31:34,400\ninstead of cloning it to another VM\nready to run, we clone it to a template.\n\n618\n00:31:34,400 --> 00:31:39,060\nAnd a template is a VM,\nit's just a VM, but not one that runs.\n\n619\n00:31:39,060 --> 00:31:43,300\nIt's one that sits there offline,\njust sitting there on a hard drive folder.\n\n620\n00:31:43,300 --> 00:31:44,472\nYou can't boot it up.\n\n621\n00:31:44,472 --> 00:31:47,843\nAnd then whenever you create\na new virtual machine instead\n\n622\n00:31:47,843 --> 00:31:50,937\nof closing an existing one,\nyou clone the template,\n\n623\n00:31:50,937 --> 00:31:54,120\nand the template will provision\nout a VM and fire it up.\n\n624\n00:31:54,120 --> 00:31:56,847\nNow that sounds like an extra step and\nit is.\n\n625\n00:31:56,847 --> 00:31:58,369\nWhy would we want to do that?\n\n626\n00:31:58,369 --> 00:31:59,728\nThere's two main reasons.\n\n627\n00:31:59,728 --> 00:32:01,710\nThe first reason is performance,\nall right?\n\n628\n00:32:03,010 --> 00:32:05,080\nI'm cloning App Web One.\n\n629\n00:32:05,080 --> 00:32:10,120\nAnd while I do that I'm flashing the hard\ndrive that App Web One is stored on to\n\n630\n00:32:10,120 --> 00:32:11,520\nread all that data.\n\n631\n00:32:11,520 --> 00:32:14,680\nAnd that means that App Web One\nis going to slow down.\n\n632\n00:32:14,680 --> 00:32:17,950\nThere's gonna be disk contention for\naccess to it's storage resources.\n\n633\n00:32:17,950 --> 00:32:21,830\nSo, if this is a production\nenvironment that customers are on\n\n634\n00:32:21,830 --> 00:32:24,160\nI probably don't want the system\nto slow down for them, right?\n\n635\n00:32:24,160 --> 00:32:26,570\nI want them to have a good\nexperience on the site.\n\n636\n00:32:26,570 --> 00:32:29,970\nSo, cloning is not necessarily\nthe greatest for performance.\n\n637\n00:32:29,970 --> 00:32:33,990\nThe second thing is, if I'm gonna be\nprovisioning out web servers throughout\n\n638\n00:32:33,990 --> 00:32:39,210\nthe month, throughout the year, when we\nstart making changes to App Web One When I\n\n639\n00:32:39,210 --> 00:32:42,691\nclone App Web One, the clone will\nhave those changes, too all right?\n\n640\n00:32:43,730 --> 00:32:45,760\nWell, I may have created a baseline for\n\n641\n00:32:45,760 --> 00:32:50,470\nmy web servers, and app web 1 may have\nbeen modified from that baseline.\n\n642\n00:32:50,470 --> 00:32:52,990\nNow all my clones will be modified also.\n\n643\n00:32:52,990 --> 00:32:57,870\nBut if I had taken and made a template,\na template that stored offline,\n\n644\n00:32:57,870 --> 00:32:59,550\nthe template is not being changed.\n\n645\n00:32:59,550 --> 00:33:03,170\nSo now every time I clone a web\nserver from that template,\n\n646\n00:33:03,170 --> 00:33:05,340\nI know it will be exactly the same.\n\n647\n00:33:05,340 --> 00:33:09,370\nIt won't include changes made to web one\nor web two or whatever server I clone.\n\n648\n00:33:09,370 --> 00:33:11,040\nSo it ensures consistency.\n\n649\n00:33:11,040 --> 00:33:14,380\nSo performance is the main\nreasons we use templates, but\n\n650\n00:33:14,380 --> 00:33:16,750\nconsistent deployment\nis the second reason.\n\n651\n00:33:16,750 --> 00:33:18,710\nSo those are why we make use of those.\n\n652\n00:33:20,180 --> 00:33:21,010\nAll right.\n\n653\n00:33:21,010 --> 00:33:23,000\nSo, it looks like it's done cloning.\n\n654\n00:33:23,000 --> 00:33:27,070\nSo it cloned App Web One, and so\nnow if I go back to my virtual machines,\n\n655\n00:33:27,070 --> 00:33:29,690\nI should see that I've got an App Web Two.\n\n656\n00:33:29,690 --> 00:33:30,950\nThere it is.\n\n657\n00:33:30,950 --> 00:33:31,880\nAnd it's ready to rock.\n\n658\n00:33:31,880 --> 00:33:33,790\nI can start it up,\nI've got another web server.\n\n659\n00:33:35,600 --> 00:33:38,700\nBut let's say I wanted\nto have that template.\n\n660\n00:33:38,700 --> 00:33:42,360\nWith a template,\nyou just right click on the server and\n\n661\n00:33:42,360 --> 00:33:46,630\ninstead of choosing Clone to Virtual\nMachine, you choose Clone to Template.\n\n662\n00:33:46,630 --> 00:33:50,670\nThat will build a template out of this\nvirtual machine and store it offline,\n\n663\n00:33:50,670 --> 00:33:52,880\ninstead of a system that's already up and\nrunning.\n\n664\n00:33:52,880 --> 00:33:56,430\nSo when I clone that template,\nI'll need to give it a name, so\n\n665\n00:33:56,430 --> 00:33:57,690\nI'm just gonna call it app-web,\n\n666\n00:33:57,690 --> 00:34:01,550\nI'm not sticking a number on the end\nof it cuz this is my generic template.\n\n667\n00:34:01,550 --> 00:34:05,050\nMaybe I actually wanna call\nit that app-web-template,\n\n668\n00:34:05,050 --> 00:34:08,120\nand it'll be a part of me\nITProTV lab data center.\n\n669\n00:34:10,550 --> 00:34:13,000\nAnd I'll store it attached to a server,\n\n670\n00:34:13,000 --> 00:34:14,790\nI'll keep it on ESX server 2 for\nright now.\n\n671\n00:34:16,110 --> 00:34:16,870\nAll right.\n\n672\n00:34:16,870 --> 00:34:17,990\nAnd then where I want to store it,\n\n673\n00:34:17,990 --> 00:34:21,020\nwell if I put it on my shared data store\nthat would be nice because it'll be easy\n\n674\n00:34:21,020 --> 00:34:23,780\nto clone to other servers\nif I want to put it there.\n\n675\n00:34:23,780 --> 00:34:28,070\nOr I could stick it down here on my\nserver where I put everything else.\n\n676\n00:34:28,070 --> 00:34:31,410\nI'll just keep it there for\nnow, all right?\n\n677\n00:34:31,410 --> 00:34:32,840\nAnd then it's gonna clone it.\n\n678\n00:34:32,840 --> 00:34:34,250\nAnd it's gonna make a template.\n\n679\n00:34:34,250 --> 00:34:36,180\nNow the clone process\nhere is the exact same.\n\n680\n00:34:36,180 --> 00:34:37,420\nIt's still cloning it.\n\n681\n00:34:37,420 --> 00:34:40,660\nBut instead of cloning it to a virtual\nmachine that'll be ready to run,\n\n682\n00:34:40,660 --> 00:34:41,910\nit's gonna clone it to a template.\n\n683\n00:34:41,910 --> 00:34:45,630\nSo I won't see it appear in\nmy list of virtual machines.\n\n684\n00:34:45,630 --> 00:34:48,120\nI'll see it appear in\nmy list of templates.\n\n685\n00:34:48,120 --> 00:34:51,770\nIf I go back to vcenter,\nsee how I've got virtual machines here?\n\n686\n00:34:51,770 --> 00:34:54,020\nAnd then right beneath it,\nI have VM templates.\n\n687\n00:34:54,020 --> 00:34:56,290\nThat's where my templates get stored.\n\n688\n00:34:56,290 --> 00:34:57,750\nAnd you won't have any by default.\n\n689\n00:34:57,750 --> 00:34:59,660\nYou have to make your own templates.\n\n690\n00:34:59,660 --> 00:35:03,900\nSo we can build them up and they'll be\nright here and they'll be ready to rock.\n\n691\n00:35:03,900 --> 00:35:09,150\nNow when you've got a template, whenever\nyou create a new virtual machine, you can\n\n692\n00:35:09,150 --> 00:35:13,560\ncreate the virtual machine from scratch or\nyou can pick from your templates.\n\n693\n00:35:13,560 --> 00:35:16,670\nSo if I need a new web server,\nI can just go to create a new VM.\n\n694\n00:35:16,670 --> 00:35:20,490\nSelect this template, and it'll deploy and\nI'll now have a new web server.\n\n695\n00:35:20,490 --> 00:35:21,780\nJust like that.\n\n696\n00:35:21,780 --> 00:35:23,780\nSo templates are kind of nice for that.\n\n697\n00:35:23,780 --> 00:35:25,970\nThey're consistent deployments\nbecause they're off-line,\n\n698\n00:35:25,970 --> 00:35:29,590\nthey're not being modified, and it doesn't\nhurt the performance of the original\n\n699\n00:35:29,590 --> 00:35:33,450\nserver assuming that the template is\nstored on a different set of hard drives.\n\n700\n00:35:33,450 --> 00:35:36,260\nIn my case, I started on the same\nhard drive, so it didn't really help.\n\n701\n00:35:36,260 --> 00:35:39,440\nBut I might have the templates\nstored on shared storage and\n\n702\n00:35:39,440 --> 00:35:42,450\nthen the web servers themselves running\non local storage, something like that.\n\n703\n00:35:42,450 --> 00:35:45,280\nThen that removes that contention and\nit saves performance.\n\n704\n00:35:47,650 --> 00:35:50,590\nAlright, let me see what else I\nneed to mention on templates.\n\n705\n00:35:50,590 --> 00:35:56,580\nOh, you know I imported an OVF file for\nthat Drupal machine in a previous episode.\n\n706\n00:35:56,580 --> 00:35:58,080\nWhen you import a machine like that,\n\n707\n00:35:58,080 --> 00:36:00,290\nyou can actually import it\nas a template if you want.\n\n708\n00:36:00,290 --> 00:36:02,330\nIf you know you're gonna be\nprovisioning a lot of those.\n\n709\n00:36:02,330 --> 00:36:06,800\nSo anytime that you import something you\ncan import it as a VM or as a template.\n\n710\n00:36:06,800 --> 00:36:09,620\nAnd when you export,\nyou can export as a VM or a template.\n\n711\n00:36:09,620 --> 00:36:11,830\nSo you've got that flexibility\ncuz they really are the same.\n\n712\n00:36:11,830 --> 00:36:13,500\nIt's the same stuff.\n\n713\n00:36:13,500 --> 00:36:16,770\nIt's just whether or not it's gonna\nbe able to be powered on or not.\n\n714\n00:36:17,790 --> 00:36:18,510\nAll right.\n\n715\n00:36:18,510 --> 00:36:19,960\nSo that's gonna run and churn along.\n\n716\n00:36:19,960 --> 00:36:23,520\nSee if there's anything else I\ndidn't mention about my templates.\n\n717\n00:36:23,520 --> 00:36:26,280\nYeah, that's about it.\n\n718\n00:36:26,280 --> 00:36:30,960\nYou do wanna make sure, again, if you're\ngonna be cloning like Windows machines,\n\n719\n00:36:30,960 --> 00:36:33,950\njust be aware of some of the problems\nyou can have when you clone them.\n\n720\n00:36:33,950 --> 00:36:37,190\nWhat I like to do,\nis I like to run Cisprep myself, and\n\n721\n00:36:37,190 --> 00:36:40,270\nshut the VM down, and\nthen clone it from that point, so\n\n722\n00:36:40,270 --> 00:36:43,460\nthat VM ware doesn't have to worry\nabout running Cisprep for me.\n\n723\n00:36:43,460 --> 00:36:45,870\nThat way, it's just one less\nthing to worry about, but\n\n724\n00:36:45,870 --> 00:36:47,730\nit's up to you how you\nwant to set that up.\n\n725\n00:36:47,730 --> 00:36:49,210\nIf you're dealing with servers,\n\n726\n00:36:49,210 --> 00:36:51,810\nespecially with Linux,\na lot of times it's not a problem.\n\n727\n00:36:53,660 --> 00:36:58,990\nAll right, so that's basically it for\ntemplates and clones.\n\n728\n00:36:58,990 --> 00:37:01,340\nThat's not the only thing\nthat you can clone.\n\n729\n00:37:01,340 --> 00:37:04,950\nYou'll see other areas where you can\nclone things and duplicate things.\n\n730\n00:37:04,950 --> 00:37:06,270\nLike, we saw V- apps, right?\n\n731\n00:37:06,270 --> 00:37:11,000\nWe can clone our V-App, or we could even\ncreate a V-App template if we wanted,\n\n732\n00:37:11,000 --> 00:37:13,740\nand the only difference there\nis that it just includes.\n\n733\n00:37:13,740 --> 00:37:17,990\nThe V app configuration and multiple\nvirtual machines instead of just one\n\n734\n00:37:17,990 --> 00:37:21,230\nthat's really handy if you're\ntrying to deploy a web app and\n\n735\n00:37:21,230 --> 00:37:22,430\nyou want to create testing or\n\n736\n00:37:22,430 --> 00:37:26,680\nstaging environments things like that you\ncan clone them quickly and deploy them\n\n737\n00:37:26,680 --> 00:37:30,170\nmess around with them If you break it you\njust delete it and provision another one.\n\n738\n00:37:30,170 --> 00:37:31,549\nYou can quickly provision those out.\n\n739\n00:37:34,230 --> 00:37:37,880\nAll right,\nthat is about all I've got on templates.\n\n740\n00:37:37,880 --> 00:37:41,780\nNow I was kind of hoping that this one\nwould finish while I was talking there but\n\n741\n00:37:41,780 --> 00:37:44,170\nit's still sitting at\n80 percent right now.\n\n742\n00:37:44,170 --> 00:37:47,070\nLet's go check out the store\nwhere we put that.\n\n743\n00:37:47,070 --> 00:37:48,670\nIf I jump over to my data store, and\n\n744\n00:37:48,670 --> 00:37:51,480\nI stuck all that right here\non the server two, and\n\n745\n00:37:51,480 --> 00:37:54,740\nI go into my files, you'll see all\nthe different folders that are in here.\n\n746\n00:37:54,740 --> 00:37:56,890\nAnd notice that app web template,\n\n747\n00:37:56,890 --> 00:37:59,930\nit's right in there right alongside\nthe other Virtual Machines.\n\n748\n00:37:59,930 --> 00:38:02,830\nAnd when we look inside of it,\nit's cloning that VM DK.\n\n749\n00:38:02,830 --> 00:38:05,550\nSo as far as it being stored on the drive,\n\n750\n00:38:05,550 --> 00:38:08,260\nthere's really not much\ndifference to that.\n\n751\n00:38:08,260 --> 00:38:09,760\nOh, it just finished, good.\n\n752\n00:38:09,760 --> 00:38:11,940\nSo, it just finished, and\nnow I've got this template.\n\n753\n00:38:11,940 --> 00:38:15,420\nIt has a VMDK, it's got a, you know,\n\n754\n00:38:15,420 --> 00:38:19,080\na VM configuration,\nnotice that it's not showing a VMX file,\n\n755\n00:38:19,080 --> 00:38:21,470\nlet me just refresh and\nmake sure that's going to stay that way.\n\n756\n00:38:21,470 --> 00:38:25,410\nYep and that's because\nthe configuration might change.\n\n757\n00:38:25,410 --> 00:38:28,370\nWhen we deploy it, we can override\nthe configuration of it, so\n\n758\n00:38:28,370 --> 00:38:33,040\na VMX will be created just for\nthat individual server that we create.\n\n759\n00:38:33,040 --> 00:38:36,070\nBut now if I go back\nto my template screen.\n\n760\n00:38:37,680 --> 00:38:41,530\nNow I've got a template right here,\napp-web-template and\n\n761\n00:38:41,530 --> 00:38:46,610\nyou'll see up here in the options, that\nwe can deploy a VM from this template,\n\n762\n00:38:46,610 --> 00:38:51,770\nso we just pick the template, here it is\nrunning Sent OS and I can quickly deploy\n\n763\n00:38:51,770 --> 00:38:58,660\nout a new VM, so I'll create app-web 3 And\nit's going to build it from the template.\n\n764\n00:38:58,660 --> 00:39:02,130\nNow the nice thing about this is I\ndon't have to specify a ton of options,\n\n765\n00:39:02,130 --> 00:39:05,920\nlike I never did really, but\nthings like memory, hard drive,\n\n766\n00:39:05,920 --> 00:39:08,750\nnetwork, it's going to pull\nall that from the template.\n\n767\n00:39:08,750 --> 00:39:12,210\nNow I can override it, you can\ncertainly change whatever you want, but\n\n768\n00:39:12,210 --> 00:39:14,910\nit's nice to have it already\nconfigured the way that you need it.\n\n769\n00:39:14,910 --> 00:39:17,240\nSo you can deploy this virtual machine.\n\n770\n00:39:17,240 --> 00:39:19,930\nSo I'll deploy it right\nthere on the same server.\n\n771\n00:39:22,680 --> 00:39:25,140\nAnd I don't need to customize this one.\n\n772\n00:39:25,140 --> 00:39:26,390\nAnd we can finish it up.\n\n773\n00:39:26,390 --> 00:39:30,330\nAll right, and when it deploys, it'll have\nthe same size hard drive, the same amount\n\n774\n00:39:30,330 --> 00:39:34,920\nof memory, the same CPU limits,\nthe same power on, power off options,\n\n775\n00:39:34,920 --> 00:39:38,290\nall the different things that we set for\nthat VM will be deployed on this new one.\n\n776\n00:39:38,290 --> 00:39:39,640\nSo, it's gonna deploy out.\n\n777\n00:39:39,640 --> 00:39:43,040\nAnd see how it just says cloning\nvirtual machine app web template?\n\n778\n00:39:43,040 --> 00:39:46,544\nIt's really the same process\nas cloning a production one,\n\n779\n00:39:46,544 --> 00:39:48,794\nit's just that this one's offline.\n\n780\n00:39:48,794 --> 00:39:53,113\nAnd if I go into my virtual machines, I'll\nsee that one starting to come up in here.\n\n781\n00:39:53,113 --> 00:39:55,337\nAnd if you forget you've got the template,\n\n782\n00:39:55,337 --> 00:39:58,763\nwhen you go to create a new virtual\nmachine So when we go to create it,\n\n783\n00:39:58,763 --> 00:40:02,155\nsee how you've got the option right here,\ndeploy from template.\n\n784\n00:40:02,155 --> 00:40:04,085\nSo you don't have to go\nto the template screen,\n\n785\n00:40:04,085 --> 00:40:06,500\nyou can just do it right\nfrom Virtual Machines.\n\n786\n00:40:06,500 --> 00:40:11,260\nChoose to deploy from a template and from\nthere on the next screen you'll get to\n\n787\n00:40:11,260 --> 00:40:13,540\npick your template, and\nyou'll see all your various templates\n\n788\n00:40:14,590 --> 00:40:17,610\nthat are in here and there's app web\ntemplate, I can use that to play it.\n\n789\n00:40:21,498 --> 00:40:26,260\nAll right, well, the last thing I want\nto talk about in this episode is, I\n\n790\n00:40:26,260 --> 00:40:30,830\nwant to dive into some advanced features,\nsome kind of neat little odds and ends.\n\n791\n00:40:30,830 --> 00:40:33,030\nBut we are running towards\nthe end of this segment.\n\n792\n00:40:33,030 --> 00:40:35,140\nSo let's do this,\nlet's stop and take a break.\n\n793\n00:40:35,140 --> 00:40:38,290\nWhen we get back, we're gonna jump\ninto some storage policies and\n\n794\n00:40:38,290 --> 00:40:40,340\na few other neat little\nthings that we can do.\n\n795\n00:40:40,340 --> 00:40:42,870\nAnd then we'll wrap up creating\nvirtual machines from there.\n\n796\n00:40:42,870 --> 00:40:44,100\nSo, stay tuned.\n\n797\n00:40:44,100 --> 00:40:47,421\nWe'll be back in a few.\n[MUSIC]\n\n798\n00:40:47,421 --> 00:40:51,544\n[SOUND].\n\n799\n00:40:51,544 --> 00:40:52,856\nAll right, welcome back everybody.\n\n800\n00:40:52,856 --> 00:40:56,139\nThe last thing I wanna talk\nabout is some advanced features\n\n801\n00:40:56,139 --> 00:40:59,090\nthat we'll make use of in\nenterprise environment.\n\n802\n00:40:59,090 --> 00:41:02,710\nSmall and medium environments might\nnot but enterprises definitely.\n\n803\n00:41:02,710 --> 00:41:06,200\nI want to talk about policies and\nprofiles.\n\n804\n00:41:06,200 --> 00:41:08,130\nWhen we create a virtual machine,\n\n805\n00:41:08,130 --> 00:41:12,500\nthat virtual machine kind of has\na default configuration applied to it.\n\n806\n00:41:12,500 --> 00:41:14,270\nAnd we can certainly modify it.\n\n807\n00:41:14,270 --> 00:41:16,510\nBut those default values\ncome from somewhere.\n\n808\n00:41:16,510 --> 00:41:19,930\nWhen we have a template,\nwe don't have to worry about that, because\n\n809\n00:41:19,930 --> 00:41:23,680\nwhen somebody clones a template or clones\nVM, they get the exact same settings.\n\n810\n00:41:23,680 --> 00:41:28,230\nBut what if somebody just builds\na new VM from scratch without any\n\n811\n00:41:28,230 --> 00:41:30,520\ncustom setting without\ncloning somebody at all?\n\n812\n00:41:30,520 --> 00:41:32,750\nWell, they can pick whatever\nthe heck they want.\n\n813\n00:41:32,750 --> 00:41:36,870\nSo we might want to define\nwhat's called a host profile\n\n814\n00:41:36,870 --> 00:41:38,900\nto basically put those settings in place.\n\n815\n00:41:38,900 --> 00:41:42,090\nJust say, here's what your default\nprocessor and so on is going to be.\n\n816\n00:41:42,090 --> 00:41:44,650\nAnd there's a ton of options that\nwe can manipulate with that.\n\n817\n00:41:44,650 --> 00:41:45,960\nIt's all called a host profile.\n\n818\n00:41:45,960 --> 00:41:50,470\nAnd if I go back to my vCenter home page,\nright here on the home page,\n\n819\n00:41:50,470 --> 00:41:54,480\nI'll see my host profiles and\nmy VM storage policies.\n\n820\n00:41:54,480 --> 00:41:57,970\nNow, VM storage policies,\nthose used to be called storage profiles.\n\n821\n00:41:57,970 --> 00:42:01,450\nSo you had Host Profiles and\nStorage Profiles.\n\n822\n00:42:01,450 --> 00:42:03,970\nNow there are Host Profiles and\nVM Storage Policies.\n\n823\n00:42:03,970 --> 00:42:05,580\nSo they kind of have a different name.\n\n824\n00:42:05,580 --> 00:42:08,980\nBut we can go in and\nkind of customize these to change what\n\n825\n00:42:08,980 --> 00:42:11,650\npeople are going to end up with\nas far as a configuration.\n\n826\n00:42:11,650 --> 00:42:13,300\nIf you go into Host Profiles,\n\n827\n00:42:13,300 --> 00:42:17,220\nyou'll see in here that I've already\ngot an IT/ProTV default host profile.\n\n828\n00:42:17,220 --> 00:42:21,010\nI didn't create that, IT/ProTV\nthat's the name of my data center,\n\n829\n00:42:21,010 --> 00:42:25,080\nevery time you create a data center,\nit will have its own default host profile.\n\n830\n00:42:25,080 --> 00:42:27,820\nAnd you can go in and\nyou can manipulate that if you want or\n\n831\n00:42:27,820 --> 00:42:28,950\nyou can create your own.\n\n832\n00:42:28,950 --> 00:42:31,540\nAnd you can create your own settings and\nwhatever.\n\n833\n00:42:31,540 --> 00:42:34,610\nWhen you go in here into management,\nyou'll see the settings for it, and\n\n834\n00:42:34,610 --> 00:42:36,760\nyou'll see the various\nthings we can define.\n\n835\n00:42:38,550 --> 00:42:43,750\nThese are our host machines, like our ESXI\nboxes, so we can apply things there, but\n\n836\n00:42:43,750 --> 00:42:46,890\nmany of these settings will also apply to\nvirtual machines created on those hosts.\n\n837\n00:42:46,890 --> 00:42:49,520\nSo you do have to be aware that\nit can be a little tricky.\n\n838\n00:42:49,520 --> 00:42:51,860\nThere are a lot of settings in here.\n\n839\n00:42:51,860 --> 00:42:54,610\nAll sorts of advanced configurations and\n\n840\n00:42:54,610 --> 00:42:58,230\nthings that can affect the way\nthat host machine works.\n\n841\n00:42:58,230 --> 00:43:00,430\nSo just a ton of stuff in here.\n\n842\n00:43:01,690 --> 00:43:04,530\nBecause most people aren't going to\nuse this to restrict the systems,\n\n843\n00:43:04,530 --> 00:43:06,320\nit's actually not even\nturned on by default.\n\n844\n00:43:06,320 --> 00:43:09,950\nYou might have noticed back\non my host profile screen\n\n845\n00:43:09,950 --> 00:43:12,030\nthat it shows number of hosts, zero.\n\n846\n00:43:12,030 --> 00:43:13,640\nNumber of compliant hosts, zero.\n\n847\n00:43:13,640 --> 00:43:16,500\nIt's not actually applied to anybody.\n\n848\n00:43:16,500 --> 00:43:20,270\nSo what I have to do is attach hosts and\nclusters to it for\n\n849\n00:43:20,270 --> 00:43:22,490\nthis to take effect, all right?\n\n850\n00:43:22,490 --> 00:43:24,590\nSo, I can configure all\nsorts of things here.\n\n851\n00:43:24,590 --> 00:43:28,310\nMost of the settings do apply to the host,\nthe ESXi host itself.\n\n852\n00:43:28,310 --> 00:43:31,110\nBut you'll see as you browse around\nin there, the settings that apply to\n\n853\n00:43:31,110 --> 00:43:34,600\nthe VMs that we create and the default\nhardware profiles in there too.\n\n854\n00:43:34,600 --> 00:43:36,020\nSo we can set those and\n\n855\n00:43:36,020 --> 00:43:39,660\nattach those to enforce the consistent\nconfiguration, all right?.\n\n856\n00:43:39,660 --> 00:43:41,840\nNow they don't call this out\nin the exam objectives, but\n\n857\n00:43:41,840 --> 00:43:43,780\nI wanted to point it out\nbecause it's right here.\n\n858\n00:43:43,780 --> 00:43:47,570\nWhat the exam objectives call\nout are storage policies, right?\n\n859\n00:43:47,570 --> 00:43:50,840\nAnd storage policies are very\nclosely related to these\n\n860\n00:43:50,840 --> 00:43:55,250\nhost profiles right here because it's\nthe same kind of idea except for storage.\n\n861\n00:43:55,250 --> 00:43:59,040\nWhen you create a new virtual machine\nit asks where you want to store it and\n\n862\n00:43:59,040 --> 00:44:01,210\nyou can pick from darn near anywhere.\n\n863\n00:44:01,210 --> 00:44:04,760\nBut you more than likely want to\nrestrict where people store the VM's,\n\n864\n00:44:04,760 --> 00:44:08,580\nyou don't want people storing them all\nover the place and I showed you in\n\n865\n00:44:08,580 --> 00:44:12,380\none of the earlier episodes, how the\ndefault names can get really confusing,\n\n866\n00:44:12,380 --> 00:44:15,870\nbecause you know, what does it call\nthat default local store by default?\n\n867\n00:44:15,870 --> 00:44:17,500\nWell, datastore one.\n\n868\n00:44:17,500 --> 00:44:20,990\nAnd if you got 50 hosts,\nyou've got 50 datastore ones, and so\n\n869\n00:44:20,990 --> 00:44:23,800\nit's really confusing as\nfar as what they are.\n\n870\n00:44:23,800 --> 00:44:27,260\nAnd when you go to create shared storage,\nwell, it calls that datastore one also.\n\n871\n00:44:27,260 --> 00:44:29,960\nSo you might need to go in and\nmanipulate that.\n\n872\n00:44:29,960 --> 00:44:35,930\nWell, we can use VM storage profiles or\npolicies to be able\n\n873\n00:44:35,930 --> 00:44:41,060\nto categorize that storage ensure people\nare picking the right one for storing.\n\n874\n00:44:41,060 --> 00:44:44,440\nAnd you can get really advanced with this\nyou can do all sorts of crazy limitations.\n\n875\n00:44:44,440 --> 00:44:46,400\nI'm gonna show you guys the basics of it,\n\n876\n00:44:46,400 --> 00:44:48,440\ncause that's all that\nmakes it on the exam.\n\n877\n00:44:48,440 --> 00:44:51,800\nBut it is definitely something you\nwant to be aware of, all right.\n\n878\n00:44:51,800 --> 00:44:55,170\nSo let's take a look and then I'm\ngonna go back to my vCenter home and\n\n879\n00:44:55,170 --> 00:44:58,810\nI'm gonna go into my VM Storage Policies,\nall right.\n\n880\n00:44:58,810 --> 00:45:01,120\nSo here's where I can define my policies.\n\n881\n00:45:01,120 --> 00:45:04,530\nAnd what the policies are really doing\nis creating categories of storage.\n\n882\n00:45:04,530 --> 00:45:07,870\nSo I need some way to\ncategorize my storage.\n\n883\n00:45:07,870 --> 00:45:11,730\nWell, if you have an EMC SAN, or\nlike a Dell EqualLogic SAN or\n\n884\n00:45:11,730 --> 00:45:15,010\nsomething like that, you get a lot of\nvendor properties that come in when you\n\n885\n00:45:15,010 --> 00:45:18,530\nconnect to those, and you can use\nthose to categorize your storage.\n\n886\n00:45:18,530 --> 00:45:20,150\nIn my case, I don't have that, though.\n\n887\n00:45:20,150 --> 00:45:22,970\nI'm using an iSCSI SAN, and\niSCSI doesn't hand that off.\n\n888\n00:45:22,970 --> 00:45:26,800\nSo I don't have the categories that I'm\ngonna need to be able to create these\n\n889\n00:45:26,800 --> 00:45:27,730\npolicies.\n\n890\n00:45:27,730 --> 00:45:30,510\nSo instead, I can use tags.\n\n891\n00:45:30,510 --> 00:45:33,110\nNow, you've probably seen\nthe tag button appear all\n\n892\n00:45:33,110 --> 00:45:35,330\nthroughout vCenter on these shows and\nI've never used it.\n\n893\n00:45:35,330 --> 00:45:36,870\nThis is gonna be the first time.\n\n894\n00:45:36,870 --> 00:45:43,050\nTags allow us as administrators to create\ncategories or notes, or kind of like\n\n895\n00:45:43,050 --> 00:45:48,310\na comment that identifies what type of VM,\nor what type of storage or whatever.\n\n896\n00:45:48,310 --> 00:45:51,030\nSome kind of characteristic\nthat we need to identify with.\n\n897\n00:45:51,030 --> 00:45:54,140\nSo, tags are completely\ncustomizable by us.\n\n898\n00:45:54,140 --> 00:45:59,573\nSo lets say that I want to categorize\nmy storage into read only ISO storage,\n\n899\n00:45:59,573 --> 00:46:03,814\nso don't put a VM there local storage and\nshared storage.\n\n900\n00:46:03,814 --> 00:46:05,933\nWell I could create three tags, and\n\n901\n00:46:05,933 --> 00:46:10,750\nany time I add a new data store I\ncould add the appropriate tag to them.\n\n902\n00:46:10,750 --> 00:46:14,040\nThen I can come back here and\ncreate a storage policy that says\n\n903\n00:46:14,040 --> 00:46:16,800\nif storage has this tag,\nput it in this category.\n\n904\n00:46:16,800 --> 00:46:18,610\nIf it has that tag,\nput it in that category.\n\n905\n00:46:18,610 --> 00:46:22,370\nAnd when people create VMs we can\nsteer them in the right direction\n\n906\n00:46:22,370 --> 00:46:25,000\nbased on these policies right here,\nall right?\n\n907\n00:46:25,000 --> 00:46:26,480\nSo let's go set some tags first,\n\n908\n00:46:26,480 --> 00:46:29,350\nand then we'll be able to create\na policy that actually does something.\n\n909\n00:46:29,350 --> 00:46:33,540\nSo what I'm gonna do first,\nI'm gonna just go into my datastores.\n\n910\n00:46:33,540 --> 00:46:37,070\nSo I'll go into vCenter, and\ngo into my datastores, and\n\n911\n00:46:37,070 --> 00:46:41,380\nI'll start with a datastore\nlike I'll do this shared one.\n\n912\n00:46:41,380 --> 00:46:42,930\nThis is shared storage.\n\n913\n00:46:42,930 --> 00:46:45,040\nIf somebody wants to\ndo clustered machines,\n\n914\n00:46:45,040 --> 00:46:49,220\nthey need to put it on shared storage,\nthis is a data store that provides that.\n\n915\n00:46:49,220 --> 00:46:54,300\nI'll go ahead and\nedit the settings of that data store and\n\n916\n00:46:54,300 --> 00:46:56,620\nI'm going to go to tags.\n\n917\n00:46:56,620 --> 00:47:00,880\nI can see the tags assigned to\nthis machine or this data storage.\n\n918\n00:47:00,880 --> 00:47:07,980\nSo I'm going to assign a new tag and I'm\ngonna call it shared storage, all right?\n\n919\n00:47:07,980 --> 00:47:16,000\nAnd I'll call it iSCSI SAN storage for\ncluster, or let's\n\n920\n00:47:18,210 --> 00:47:23,750\ndo for for VMs with HA,\nright with high availability.\n\n921\n00:47:23,750 --> 00:47:26,460\nSo that's what I'm gonna call it.\n\n922\n00:47:26,460 --> 00:47:30,560\nI can then create categories\nto categorize these tags.\n\n923\n00:47:30,560 --> 00:47:32,880\nNow when you create a tag,\n\n924\n00:47:32,880 --> 00:47:35,170\nyou can technically assign\nit to whatever you want it.\n\n925\n00:47:35,170 --> 00:47:38,350\nYou could assign it to VMs, you could\nassign it to storage, you could assign it\n\n926\n00:47:38,350 --> 00:47:42,210\nto virtual networks, V switches,\nyou can assign a tag to anything.\n\n927\n00:47:42,210 --> 00:47:44,815\nBut you can use a category\nto limit the type of\n\n928\n00:47:44,815 --> 00:47:46,936\ndevices that you attach the tag to.\n\n929\n00:47:46,936 --> 00:47:49,733\nAnd I had actually already\ncreated one called datastore, but\n\n930\n00:47:49,733 --> 00:47:52,276\njust to show you guys,\nI'm gonna hit the new category.\n\n931\n00:47:52,276 --> 00:47:57,872\nWhen you create a category,\nyou can Give the category a name.\n\n932\n00:47:57,872 --> 00:48:00,194\nSo I like to create one\ncalled Data Stores.\n\n933\n00:48:00,194 --> 00:48:02,827\nAnd these will be tags that\njust apply to data stores,\n\n934\n00:48:02,827 --> 00:48:06,115\nI don't want these tags to apply\nto virtual machines or whatever.\n\n935\n00:48:06,115 --> 00:48:10,439\nAnd then you can specify whether\na target can only have one tag or\n\n936\n00:48:10,439 --> 00:48:12,323\nif they can have many tags.\n\n937\n00:48:12,323 --> 00:48:15,350\nRight and oftentimes we want a system\nto be able to have many tags.\n\n938\n00:48:15,350 --> 00:48:18,380\nBecause I might have different\ntypes of shared storage.\n\n939\n00:48:18,380 --> 00:48:20,660\nI might have shared storage that's iSCSI,\nand\n\n940\n00:48:20,660 --> 00:48:22,820\nI might have shared storage\nthat's fiber channel.\n\n941\n00:48:22,820 --> 00:48:25,100\nSo I might have additional\ntags that customize that.\n\n942\n00:48:25,100 --> 00:48:28,040\nSo we'll usually go with\nsomething like many tags.\n\n943\n00:48:28,040 --> 00:48:31,320\nAnd then we specify what objects\nare allowed to get that tag.\n\n944\n00:48:31,320 --> 00:48:35,060\nSo maybe I want it to be Data Stores,\nwhich is what I'm on right now,\n\n945\n00:48:35,060 --> 00:48:36,300\nthat's why that's grayed out.\n\n946\n00:48:36,300 --> 00:48:40,680\nBut I might also want it to apply to\nData Store Clusters or, let's see,\n\n947\n00:48:40,680 --> 00:48:43,960\nthere's another one in here,\nResource Pools.\n\n948\n00:48:43,960 --> 00:48:45,438\nI might want it to apply to folders.\n\n949\n00:48:45,438 --> 00:48:50,656\nSo I pick where I want this tag\nto be able to be used, all right.\n\n950\n00:48:50,656 --> 00:48:53,580\nAnd once I've got it,\nthen I'll have that category.\n\n951\n00:48:53,580 --> 00:48:55,781\nAnd I'm gonna cancel that.\n\n952\n00:48:56,948 --> 00:48:58,260\nLet me go back in here.\n\n953\n00:48:58,260 --> 00:49:01,050\nSince I had already created the category\nbefore the show I'll just reuse it.\n\n954\n00:49:01,050 --> 00:49:04,560\nSo I'm going to go back here\nto creating shared storage.\n\n955\n00:49:04,560 --> 00:49:06,290\nI lost my description but\nI'm not worried about that.\n\n956\n00:49:06,290 --> 00:49:09,550\nAnd I'll put it in\nthe Data Stores category.\n\n957\n00:49:09,550 --> 00:49:14,780\nAll right, so\nnow this particular data store,\n\n958\n00:49:14,780 --> 00:49:19,112\nshared data store,\nhas a tag called Shared Storage.\n\n959\n00:49:19,112 --> 00:49:22,450\nAll right, I could then go through and\ntag my other storage.\n\n960\n00:49:22,450 --> 00:49:27,490\nSo for example, my Shared ISO Store,\nright here where I'm putting my ISOs.\n\n961\n00:49:27,490 --> 00:49:30,988\nWell, I went ahead and assigned a tag\nto it already called ISO Storage,\n\n962\n00:49:30,988 --> 00:49:34,100\nand it's in the Data Stores category also.\n\n963\n00:49:34,100 --> 00:49:38,717\nAnd then lastly I might wanna tag all\nthese other guys, right, Server 1 and\n\n964\n00:49:38,717 --> 00:49:42,490\nall the way through Server 4 is\nall being like local storage.\n\n965\n00:49:42,490 --> 00:49:44,605\nSo if I want to tag more than one,\nlet's see,\n\n966\n00:49:44,605 --> 00:49:46,460\nI know how I do it in the vSphere client.\n\n967\n00:49:46,460 --> 00:49:49,271\nBut in vCenter,\nwith the vSphere web client,\n\n968\n00:49:49,271 --> 00:49:53,320\nlet me see if it'll let me\nselect multiples at once.\n\n969\n00:49:53,320 --> 00:49:56,282\nIf I can select all of these, there we go.\n\n970\n00:49:56,282 --> 00:49:59,670\nAnd then we can go through and\nwe can assign a tag all at the same time,\n\n971\n00:49:59,670 --> 00:50:01,823\nthat saves us a little\nbit of effort there.\n\n972\n00:50:01,823 --> 00:50:04,725\nSo I'm gonna assign a tag to these guys,\nand\n\n973\n00:50:04,725 --> 00:50:07,323\nI am going to call these Local Storage.\n\n974\n00:50:07,323 --> 00:50:10,820\nNow that's gonna be another new tag,\nso I've gotta do a new tag,\n\n975\n00:50:10,820 --> 00:50:12,610\nwhich I will call Local Storage.\n\n976\n00:50:14,870 --> 00:50:17,360\nOr we can call it Direct Attached Storage\nor whatever we want it to be,\n\n977\n00:50:17,360 --> 00:50:19,600\nI'll just call it Local.\n\n978\n00:50:19,600 --> 00:50:24,730\nAnd now all of those data stores\nare gonna get tagged as Local Storage,\n\n979\n00:50:24,730 --> 00:50:26,010\nthat's the one that I want.\n\n980\n00:50:27,090 --> 00:50:28,830\nAll right, so\nthey'll knock all those out at once.\n\n981\n00:50:28,830 --> 00:50:32,910\nSo now may data stores are tagged\nbased on what kind of data they have.\n\n982\n00:50:32,910 --> 00:50:35,730\nNow I need to go create\na VM Storage Policy\n\n983\n00:50:35,730 --> 00:50:38,790\nthat ties that tag to something useful,\nto a policy.\n\n984\n00:50:40,670 --> 00:50:45,210\nAll right, so I'll jump back out here and\ngo to my, actually\n\n985\n00:50:45,210 --> 00:50:49,260\nI need to go to my homepage, cuz it's on\nthe homepage, my VM Storage Policies.\n\n986\n00:50:50,500 --> 00:50:56,010\nAnd now I can create three policies\nbased on the different types of tags.\n\n987\n00:50:56,010 --> 00:50:57,610\nSo I go up here to create a new policy.\n\n988\n00:50:59,610 --> 00:51:02,640\nAnd I'll create a policy\nhere called Shared Storage.\n\n989\n00:51:04,240 --> 00:51:09,020\nAnd the next page, well next page it gives\nme a summary, but on the page after that,\n\n990\n00:51:09,020 --> 00:51:10,650\nit lets me pick the rules.\n\n991\n00:51:10,650 --> 00:51:14,650\nWhat storage is gonna\ncount as Shared Storage?\n\n992\n00:51:14,650 --> 00:51:18,360\nAnd if I had vendor-specific capabilities,\nstuff coming in from my SAN,\n\n993\n00:51:18,360 --> 00:51:19,770\nI'd have options right here.\n\n994\n00:51:19,770 --> 00:51:22,730\nBut since I don't,\nI'm gonna use a tag-based rule.\n\n995\n00:51:22,730 --> 00:51:28,294\nSo in my tag here, I'm gonna say, anything\nthat is flagged as Shared Storage,\n\n996\n00:51:28,294 --> 00:51:33,110\nanything that has the Shared Storage tag,\nis gonna show up here under\n\n997\n00:51:33,110 --> 00:51:37,365\nthis Shared Storage Policy\nthat I'm creating, all right?\n\n998\n00:51:37,365 --> 00:51:40,660\nOn the next page it'll show me a summary\nand I've only got one that meets it,\n\n999\n00:51:40,660 --> 00:51:41,840\nthat's fine.\n\n1000\n00:51:41,840 --> 00:51:44,115\nAnd we can finish that one.\n\n1001\n00:51:44,115 --> 00:51:48,280\nI'll create another policy for\nmy ISOs, right, for my ISO storage.\n\n1002\n00:51:48,280 --> 00:51:49,820\nSo, I'll just call it ISO Storage.\n\n1003\n00:51:51,290 --> 00:51:52,160\nAnd I'll do the same thing.\n\n1004\n00:51:52,160 --> 00:51:54,031\nThis time I'm just going\nto pick the other tag.\n\n1005\n00:51:56,920 --> 00:51:58,240\nWhich was the ISO Storage.\n\n1006\n00:52:00,698 --> 00:52:02,850\nAnd I've only got one of those.\n\n1007\n00:52:02,850 --> 00:52:05,031\nAnd then the last one\nwas my Local Storage.\n\n1008\n00:52:05,031 --> 00:52:07,573\nSo I'll create another policy\nhere called Local Storage.\n\n1009\n00:52:11,240 --> 00:52:12,740\nAnd I'll add that tag.\n\n1010\n00:52:16,823 --> 00:52:20,792\nAll right, now just for kicks,\nI might want to go ahead and\n\n1011\n00:52:20,792 --> 00:52:22,990\ncreate one that is All Storage.\n\n1012\n00:52:22,990 --> 00:52:27,031\nRight, so I might come in here and\nsay, All Storage.\n\n1013\n00:52:30,656 --> 00:52:36,450\nAnd on this one I'll do a tag-based rule,\nand I'll just pick all the tags, right?\n\n1014\n00:52:36,450 --> 00:52:39,448\nSo if you match any of those tags,\nyou'll show up under All Storage.\n\n1015\n00:52:39,448 --> 00:52:42,150\nAnd so there they all are,\nand I can finish that up.\n\n1016\n00:52:42,150 --> 00:52:43,659\nSo now I've got four storage policies.\n\n1017\n00:52:44,680 --> 00:52:46,830\nAll right, so\nwhere does this come into play?\n\n1018\n00:52:46,830 --> 00:52:51,410\nWell, when we create a new virtual\nmachine, on the screen where we pick\n\n1019\n00:52:51,410 --> 00:52:53,490\nstorage there's actually\na little drop-down box for\n\n1020\n00:52:53,490 --> 00:52:55,130\npicking your storage policy.\n\n1021\n00:52:55,130 --> 00:52:58,660\nWe probably didn't point that out\nearlier so let's go see that.\n\n1022\n00:52:58,660 --> 00:53:01,156\nIf I go and create a new virtual machine.\n\n1023\n00:53:04,656 --> 00:53:06,822\nI'm just gonna jump into my\nvirtual machine screen here and\n\n1024\n00:53:06,822 --> 00:53:07,700\nI'll create a new one.\n\n1025\n00:53:09,180 --> 00:53:12,687\nSo when I create that new virtual machine\nand I move forward in the wizard,\n\n1026\n00:53:12,687 --> 00:53:15,698\nit's gonna ask me for a name for\nit, so I'll just call this my,\n\n1027\n00:53:19,156 --> 00:53:22,781\n[LAUGH] New_vm, having a hard time typing.\n\n1028\n00:53:22,781 --> 00:53:26,823\nOh, shoot, I put an underscore\nin there instead of a hyphen.\n\n1029\n00:53:30,490 --> 00:53:30,990\nThere.\n\n1030\n00:53:32,140 --> 00:53:33,860\nAnd I'll stick in the ITProTV lab.\n\n1031\n00:53:35,330 --> 00:53:38,520\nIt's gonna ask me what server to stick\nit on, I'll stick it on Server 2.\n\n1032\n00:53:38,520 --> 00:53:40,610\nAnd then it's gonna ask about the storage.\n\n1033\n00:53:40,610 --> 00:53:44,950\nNow up top, I've got my VM Storage Policy.\n\n1034\n00:53:44,950 --> 00:53:49,540\nAnd normally I would drop that down to be\nable to filter the storage that I see,\n\n1035\n00:53:49,540 --> 00:53:53,330\noh shoot,\nit's cuz I'm not in a cluster right now.\n\n1036\n00:53:53,330 --> 00:53:59,270\nSince I'm not clustered, it's only showing\nme the storage that ESX Server 2 can see.\n\n1037\n00:53:59,270 --> 00:54:02,690\nIt's not showing me storage that other\npeople can see, so it's limiting it down\n\n1038\n00:54:02,690 --> 00:54:06,000\nand that's why I can't pick my storage\npolicy there, that's why it's limited.\n\n1039\n00:54:06,000 --> 00:54:08,760\nLet me show you another way where we\nactually will be able to drop that down.\n\n1040\n00:54:08,760 --> 00:54:09,440\nLet me just cancel that.\n\n1041\n00:54:09,440 --> 00:54:14,347\nAnd I'll take an existing virtual machine,\nso I'll take Appweb 3.\n\n1042\n00:54:15,550 --> 00:54:18,740\nAnd if I edit Appweb 3 and\nadd an extra hard drive to it,\n\n1043\n00:54:18,740 --> 00:54:21,400\nthat's another place where\nwe'll see that drop-down.\n\n1044\n00:54:21,400 --> 00:54:23,490\nSo I'm gonna go and manage that one.\n\n1045\n00:54:25,073 --> 00:54:27,365\nAnd I'm gonna edit its settings.\n\n1046\n00:54:27,365 --> 00:54:29,573\nAnd I'm gonna go to Add A New Hard Drive.\n\n1047\n00:54:31,281 --> 00:54:32,448\nEventually.\n\n1048\n00:54:32,448 --> 00:54:34,810\n[LAUGH] There we go.\n\n1049\n00:54:34,810 --> 00:54:36,858\nSo I'm gonna add a new\nhard drive on this one, so\n\n1050\n00:54:36,858 --> 00:54:38,406\nlet me just get that stuck on there.\n\n1051\n00:54:38,406 --> 00:54:39,710\nAnd let's see, New Hard Disk.\n\n1052\n00:54:41,720 --> 00:54:44,190\nSo there's the new hard disk\nthat it's gonna be adding.\n\n1053\n00:54:44,190 --> 00:54:48,710\nAnd if I expand that out,\nI get some more details about it, right?\n\n1054\n00:54:48,710 --> 00:54:51,644\nAnd so\nhere I can see the VMware Storage Policy.\n\n1055\n00:54:51,644 --> 00:54:55,800\nAnd, oh, you know,\nactually I'm not seeing that there either.\n\n1056\n00:54:55,800 --> 00:54:57,600\nAll right, so it's telling me\nto enable the functionality.\n\n1057\n00:54:57,600 --> 00:54:59,780\nOh shoot, I didn't apply the policy.\n\n1058\n00:55:00,810 --> 00:55:01,680\nDadgum it.\n\n1059\n00:55:01,680 --> 00:55:04,540\nAll right, so\nI need to apply the storage policy, so\n\n1060\n00:55:04,540 --> 00:55:06,180\nthat's what it wass warning me about.\n\n1061\n00:55:06,180 --> 00:55:09,910\nThe policies, I created them, but\nthey're not enabled by default,\n\n1062\n00:55:09,910 --> 00:55:11,380\nbecause it's a licensed feature.\n\n1063\n00:55:11,380 --> 00:55:13,151\nSo see how it's showing it here, and\n\n1064\n00:55:13,151 --> 00:55:16,823\nI basically need to pick the servers I\nwanna turn it on for, and enable them.\n\n1065\n00:55:16,823 --> 00:55:18,650\nSo let me just do that real quick.\n\n1066\n00:55:18,650 --> 00:55:21,073\nAnd then I'll get my drop-down box.\n\n1067\n00:55:21,073 --> 00:55:25,031\nI thought it was cuz I wasn't clustered\nbut I had just forgotten to enable it.\n\n1068\n00:55:25,031 --> 00:55:27,449\nAll right, there we go,\nso now they're enabled.\n\n1069\n00:55:27,449 --> 00:55:31,365\nNow if I go back to this screen,\nI should have my option.\n\n1070\n00:55:33,240 --> 00:55:36,150\nAll right, so once I'm there basically\nI'll have that drop-down box.\n\n1071\n00:55:36,150 --> 00:55:39,825\nAnd what the drop-down box is gonna do is\nit's gonna filter the storage that I see\n\n1072\n00:55:39,825 --> 00:55:42,450\nso that I only see the data\nstores that meet my requirements.\n\n1073\n00:55:42,450 --> 00:55:44,905\nSo now, I don't care if somebody\ngave it a stupid name or\n\n1074\n00:55:44,905 --> 00:55:46,222\nI can't identify what it is.\n\n1075\n00:55:46,222 --> 00:55:50,309\nI'll know if it's Shared Storage,\nLocal Storage, or ISO Storage, so\n\n1076\n00:55:50,309 --> 00:55:51,785\nI'll pick the right one.\n\n1077\n00:55:51,785 --> 00:55:55,092\nAnd you know, I've made a bunch of\nchanges at once and now it's angry at me.\n\n1078\n00:55:55,092 --> 00:55:59,100\nIt still sees me as editing that\nvirtual machine in the background,\n\n1079\n00:55:59,100 --> 00:56:01,930\nbecause I left that screen\nto turn on my policy.\n\n1080\n00:56:01,930 --> 00:56:05,688\nSo, now, it's just kind of stuck.\n\n1081\n00:56:05,688 --> 00:56:06,220\nLet me just cancel that.\n\n1082\n00:56:10,070 --> 00:56:11,190\nIf it will let me.\n\n1083\n00:56:11,190 --> 00:56:13,500\nI've got my work in progress flag.\n\n1084\n00:56:13,500 --> 00:56:19,110\nLet me resize this window so you guys can\nsee it, on the right side of the screen,\n\n1085\n00:56:19,110 --> 00:56:22,430\nyou get all of your active tasks,\nthey show up.\n\n1086\n00:56:22,430 --> 00:56:27,270\nAnd what I've got right now\nis work in progress and\n\n1087\n00:56:27,270 --> 00:56:31,470\nit's showing that activity that\nit's trying to do and it's stuck.\n\n1088\n00:56:31,470 --> 00:56:34,030\nAnd so I won't be able to edit\nthe machine until that finishes.\n\n1089\n00:56:34,030 --> 00:56:34,930\nAnd if I try to pull that up,\n\n1090\n00:56:34,930 --> 00:56:39,900\nsee my restore data doesn't contain the\nstorage map property so it's messed up.\n\n1091\n00:56:39,900 --> 00:56:43,320\nSo I just need to cancel that activity,\nthere we go.\n\n1092\n00:56:43,320 --> 00:56:44,990\nAnd now I should be able to edit that VM.\n\n1093\n00:56:50,500 --> 00:56:51,440\nUnless I've really broken it.\n\n1094\n00:56:51,440 --> 00:56:52,520\nThere we go.\n\n1095\n00:56:52,520 --> 00:56:55,990\nAll right, so now when I go through and\nI create a new hard drive,\n\n1096\n00:56:55,990 --> 00:56:56,880\nlet me add one in.\n\n1097\n00:56:58,090 --> 00:57:01,480\nOr I bet if I ran my new VM wizard,\nI'd see it there too.\n\n1098\n00:57:01,480 --> 00:57:06,420\nWhen I add that new hard drive, now my\nstorage policy box should be lit up and\n\n1099\n00:57:06,420 --> 00:57:09,080\nI can pick the policy I want to pick from,\nright?\n\n1100\n00:57:09,080 --> 00:57:14,210\nI can say all storage, ISO local or\nshared ,and if I go local, now it's gonna\n\n1101\n00:57:14,210 --> 00:57:19,500\nmake sure that whatever storage it uses,\nwill be a local storage device and\n\n1102\n00:57:19,500 --> 00:57:22,880\none of the hard drives that are available\nin that particular category.\n\n1103\n00:57:22,880 --> 00:57:24,800\nSo that's a good way to limit that.\n\n1104\n00:57:24,800 --> 00:57:27,000\nIt's much more visible\nin the new VM wizards.\n\n1105\n00:57:27,000 --> 00:57:30,563\nLet me go back to that one.\n\n1106\n00:57:30,563 --> 00:57:32,430\nAnd we'll see where it\nactually filters things down.\n\n1107\n00:57:34,712 --> 00:57:37,600\nAl right, we'll just move forward on that,\nwe'll call it test.\n\n1108\n00:57:39,550 --> 00:57:43,190\nGot to pick my data center.\n\n1109\n00:57:43,190 --> 00:57:46,490\nPick my server, and then my storage.\n\n1110\n00:57:46,490 --> 00:57:50,060\nSure enough, my drop down box is lit,\nso right now I'm seeing\n\n1111\n00:57:50,060 --> 00:57:54,680\nmy shared data stores and my local data\nstores, so I can pick from any of them.\n\n1112\n00:57:54,680 --> 00:57:58,530\nIf I drop this down and I say just local\nstorage, it's gonna filter it out.\n\n1113\n00:57:58,530 --> 00:58:03,570\nAnd see how I see my compatible\nESX server two, data store one.\n\n1114\n00:58:03,570 --> 00:58:05,630\nIncompatible, these shared guys.\n\n1115\n00:58:05,630 --> 00:58:09,710\nSo it's showing me what storage is\ncompliant with the policy I'm thinking of.\n\n1116\n00:58:09,710 --> 00:58:12,430\nIf I say man, I need shared storage, and\n\n1117\n00:58:12,430 --> 00:58:16,680\nI pick that is going to just show that\ndata store and not the other ones.\n\n1118\n00:58:16,680 --> 00:58:19,360\nI mean they show up but\nit tells me they're not compatible.\n\n1119\n00:58:19,360 --> 00:58:23,870\nSo if shared storage is what I need\nthis is the guy that I'm gonna pick.\n\n1120\n00:58:23,870 --> 00:58:28,530\nYou might create other policies that\nare things like 15,000 RPM drives,\n\n1121\n00:58:28,530 --> 00:58:32,920\nyou might have 10,000 RPM drives and 7,200\nRPM drives, you can create policies and\n\n1122\n00:58:32,920 --> 00:58:36,630\npeople can pick that,\nthey say hey I'm building up an OLAP\n\n1123\n00:58:36,630 --> 00:58:39,130\ndatabase that needs to be able\nto read as fast as possible.\n\n1124\n00:58:39,130 --> 00:58:40,640\nI need 15,000 RPM drives.\n\n1125\n00:58:40,640 --> 00:58:43,690\nSo you can pick that up here, and\nit'll show you which ones are compatible.\n\n1126\n00:58:43,690 --> 00:58:47,950\nBut it's up to you to tag the systems\nappropriately to be able to recognize\n\n1127\n00:58:47,950 --> 00:58:52,040\nthat, or to have a supported SAN\nthat's reporting that information in,\n\n1128\n00:58:52,040 --> 00:58:54,150\nfor you to be able to build\nyour policies around it.\n\n1129\n00:58:54,150 --> 00:58:57,140\nSo that's the functionality\nthere with the storage profile.\n\n1130\n00:58:57,140 --> 00:59:01,320\nIt's pretty cool stuff, the reason\nthey added in in this objective is\n\n1131\n00:59:01,320 --> 00:59:03,570\nit's a part of creating the VM,\nwhen you create the VM,\n\n1132\n00:59:03,570 --> 00:59:06,930\nyou want to make sure you pick\nthe appropriate storage for your needs.\n\n1133\n00:59:06,930 --> 00:59:09,304\nAnd the VM storage policies\nare what let you do that.\n\n1134\n00:59:11,015 --> 00:59:12,855\nAll right, so,\ncouple of neat things there.\n\n1135\n00:59:12,855 --> 00:59:14,235\nDefinitely on the advanced side.\n\n1136\n00:59:14,235 --> 00:59:17,105\nIf you're running a small environment or\neven medium sized environment,\n\n1137\n00:59:17,105 --> 00:59:18,495\nyou'll probably never use this.\n\n1138\n00:59:18,495 --> 00:59:22,305\nBut in an enterprise environment where\nyou're managing thousands of hosts,\n\n1139\n00:59:22,305 --> 00:59:23,965\nthis is a very common practice.\n\n1140\n00:59:23,965 --> 00:59:25,325\nIf you have more than one SAN,\n\n1141\n00:59:25,325 --> 00:59:28,000\nyou gotta be able to select\nthe right storage for your needs.\n\n1142\n00:59:28,000 --> 00:59:30,920\nAnd these policies let you do it.\n\n1143\n00:59:30,920 --> 00:59:32,940\nI think that wraps up everything.\n\n1144\n00:59:32,940 --> 00:59:35,130\nLet me just check my notes and\nmake sure I haven't missed anything.\n\n1145\n00:59:37,500 --> 00:59:39,390\nYeah.\nThe only other thing they mention\n\n1146\n00:59:39,390 --> 00:59:42,250\nis adjusting virtual machine resources.\n\n1147\n00:59:42,250 --> 00:59:45,820\nOnce we've assigned all this stuff\nto a VM, it's not set in stone.\n\n1148\n00:59:45,820 --> 00:59:49,550\nYou can always go back and\nedit almost any of the settings.\n\n1149\n00:59:49,550 --> 00:59:51,720\nSome of the settings will be grayed\nout if the machine is turned on.\n\n1150\n00:59:51,720 --> 00:59:55,620\nBut if you shut it down, you can go and\nedit the settings of that machine.\n\n1151\n00:59:55,620 --> 00:59:59,060\nAnd you can change all sorts of stuff,\nyou could even move the storage, right?\n\n1152\n00:59:59,060 --> 01:00:01,440\nIf you deployed it on local storage,\nand then you say,\n\n1153\n01:00:01,440 --> 01:00:05,450\nyou know what, I really need this VM\nto be on my shared storage instead.\n\n1154\n01:00:05,450 --> 01:00:08,990\nYou can do that, you can move\nthese things after the fact, so\n\n1155\n01:00:08,990 --> 01:00:14,370\nlike if I right click on app web two and\nchoose move to,\n\n1156\n01:00:14,370 --> 01:00:17,950\nI can move it to another physical server,\nI can move it to another data center,\n\n1157\n01:00:17,950 --> 01:00:21,600\nyou've got a lot of different choices and\nso maybe I want to move this one to\n\n1158\n01:00:21,600 --> 01:00:24,752\ndifferent storage,\nI'll move it to my shared data store.\n\n1159\n01:00:24,752 --> 01:00:27,380\nAll right, so there it goes.\n\n1160\n01:00:27,380 --> 01:00:30,020\nIt's gonna move that machine\nover to the other store.\n\n1161\n01:00:30,020 --> 01:00:32,700\nI've got what I'm doing,\nis just changing stores.\n\n1162\n01:00:32,700 --> 01:00:36,740\nYou could change the host,\nto move it to another ESXI box, or\n\n1163\n01:00:36,740 --> 01:00:38,390\nyou could change both.\n\n1164\n01:00:38,390 --> 01:00:40,750\nThe host it's running from and\nthe data store.\n\n1165\n01:00:40,750 --> 01:00:43,950\nI just wanna change the data store,\nall right.\n\n1166\n01:00:43,950 --> 01:00:46,950\nSo it's gonna still run\nfrom ESX server two, but\n\n1167\n01:00:46,950 --> 01:00:49,890\nits hard drive will be\nstored on the iSCSI storage.\n\n1168\n01:00:51,020 --> 01:00:52,630\nSo it's already got it chosen for me here,\n\n1169\n01:00:52,630 --> 01:00:55,190\nthe shared data store that\nI picked from a moment ago.\n\n1170\n01:00:55,190 --> 01:00:59,940\nAnd we'll just provision it the same\nway it is and we'll let it finish.\n\n1171\n01:00:59,940 --> 01:01:01,980\nSo off it goes, now it's gonna copy.\n\n1172\n01:01:01,980 --> 01:01:04,500\nIt's copying over the network this time,\nso it's gonna take longer.\n\n1173\n01:01:04,500 --> 01:01:05,140\nI won't wait for\n\n1174\n01:01:05,140 --> 01:01:08,830\nit to finish, although it seems to be\nmoving nice and quick, doesn't it?\n\n1175\n01:01:08,830 --> 01:01:11,280\nIt's already at 35% but\nit's gonna move it along.\n\n1176\n01:01:11,280 --> 01:01:13,120\nSo all this stuff can be changed.\n\n1177\n01:01:13,120 --> 01:01:17,530\nI showed you guys stretching a hard\ndrive earlier in I think one episode or\n\n1178\n01:01:17,530 --> 01:01:18,440\ntwo episodes ago.\n\n1179\n01:01:18,440 --> 01:01:21,970\nSo we can make drives bigger, we can\nadd memory, take away memory and so on.\n\n1180\n01:01:21,970 --> 01:01:24,770\nIt's all easily customizable\nonce the vApps are done.\n\n1181\n01:01:26,252 --> 01:01:29,780\nAll right, well that pretty much\nwraps up creating a virtual machine.\n\n1182\n01:01:29,780 --> 01:01:32,920\nThere's still a lot more cool\nstuff we haven't gotten to.\n\n1183\n01:01:32,920 --> 01:01:37,140\nWe haven't talked about backing up and\nrestoring VMs, we haven't talked about\n\n1184\n01:01:37,140 --> 01:01:41,340\nclustering the VMs and doing VMotion and\nall that neat stuff, that's all to come.\n\n1185\n01:01:41,340 --> 01:01:44,450\nSo you definitely want to stay tuned for\nthose episodes.\n\n1186\n01:01:44,450 --> 01:01:46,890\nBut for now, that about wraps this one up.\n\n1187\n01:01:46,890 --> 01:01:48,150\nLet me just remind you guys.\n\n1188\n01:01:48,150 --> 01:01:51,760\nIf you have any questions on this stuff,\nfeel free to ask.\n\n1189\n01:01:51,760 --> 01:01:54,840\nLive during the show you can\ngo to itpro.tv/live, and\n\n1190\n01:01:54,840 --> 01:01:59,030\nyou'll see the chat room right beneath\nthe video, post your questions there.\n\n1191\n01:01:59,030 --> 01:02:01,070\nWe monitor and answer during the show.\n\n1192\n01:02:01,070 --> 01:02:04,750\nIf you have questions after the show,\nlike when we're running re-runs,\n\n1193\n01:02:04,750 --> 01:02:08,850\nyou can use the Q&A forms on the top\nof every page on the IT Pro TV website,\n\n1194\n01:02:08,850 --> 01:02:13,150\nyou'll see a link that says Q&A, click on\nit, it'll take you right into our forms.\n\n1195\n01:02:13,150 --> 01:02:17,490\nPost a question there,\nwe monitor and answer.\n\n1196\n01:02:17,490 --> 01:02:19,790\nThat's, yeah, that's really\nabout all I've got on this one.\n\n1197\n01:02:19,790 --> 01:02:22,150\nSo, I hope you guys\nenjoyed the show today.\n\n1198\n01:02:22,150 --> 01:02:26,912\nSigning off for IT Pro TV, I'm Don Pezet,\nand I will see you next time.\n\n1199\n01:02:26,912 --> 01:02:36,912\n[MUSIC]\n\n1200\n01:02:39,334 --> 01:02:44,190\n>> [SOUND]\n\n",
          "vimeoId": "103542926"
        }
      ],
      "title": "Deploy and Administer Virtual Machines and vApps"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don introduces the viewer to cluster technologies inside of VMware. He discusses the various methods of ensuring virtual machines remain online in the event of a failure. He then demonstrates vMotion and the VMware vSphere Distributed Resource Scheduler.",
          "length": "5292",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/009-vSphere-Clustering.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/009-vSphere-Clustering-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/009-vSphere-Clustering-sm.jpg",
          "title": "vSphere Clustering",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,607 --> 00:00:36,601\nAll right, good morning,\ngood afternoon, and good evening and\n\n3\n00:00:36,601 --> 00:00:38,681\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:38,681 --> 00:00:42,850\nI'm your host Don Pezet back again\nwith another episode of VMWare.\n\n5\n00:00:42,850 --> 00:00:47,510\nWe're diving right back into the VMWare\ncertified professional, VCP5-DCV,\n\n6\n00:00:47,510 --> 00:00:50,870\nthe data center virtualization track.\n\n7\n00:00:50,870 --> 00:00:56,430\nAnd we're gonna be picking up with a,\nkind of a new change of pace today.\n\n8\n00:00:56,430 --> 00:00:59,990\nIn all of our earlier episodes we\nwere really focused on getting things\n\n9\n00:00:59,990 --> 00:01:01,250\ninstalled, right.\n\n10\n00:01:01,250 --> 00:01:05,070\nSo we talked about installing ESXI,\ninstalling V Center,\n\n11\n00:01:05,070 --> 00:01:06,480\nconnecting the two together.\n\n12\n00:01:06,480 --> 00:01:10,120\nWe saw creating our data stores,\ncreating our virtual networks, right,\n\n13\n00:01:10,120 --> 00:01:11,910\nall building infrastructure.\n\n14\n00:01:12,970 --> 00:01:17,160\nBut today we're gonna switch and say,\nall right, we built our infrastructure,\n\n15\n00:01:17,160 --> 00:01:20,970\nwhat are some new things we can add\non top of it to make it better?\n\n16\n00:01:20,970 --> 00:01:24,130\nAnd in particular we're going to\nbe looking at high availability.\n\n17\n00:01:25,400 --> 00:01:28,220\nNow, what is high availability?\n\n18\n00:01:28,220 --> 00:01:32,045\nMost companies, if you are a large or\nenterprise type organization,\n\n19\n00:01:32,045 --> 00:01:33,850\nprovide some kind of a service.\n\n20\n00:01:33,850 --> 00:01:39,058\nThat service might be a service to the\ngeneral public like we do with ITProTV.\n\n21\n00:01:39,058 --> 00:01:42,520\nHere at ITProTV we\nprovide video content and\n\n22\n00:01:42,520 --> 00:01:46,830\nall of our customers are out there on\nthe internet somewhere across the world.\n\n23\n00:01:46,830 --> 00:01:48,173\nAnd they want access to our videos.\n\n24\n00:01:48,173 --> 00:01:52,387\nSo how do we provide you guys\nwith access to those videos and\n\n25\n00:01:52,387 --> 00:01:56,210\nensure that they're always available?\n\n26\n00:01:56,210 --> 00:02:00,070\nIf I run all of our videos off of a little\nserver sitting back here in the studio and\n\n27\n00:02:00,070 --> 00:02:04,330\nthat server goes offline all of our\ncustomers lose access to the videos.\n\n28\n00:02:04,330 --> 00:02:05,750\nThat's a problem, right?\n\n29\n00:02:05,750 --> 00:02:08,385\nSo for us we focus on that\naspect right there, and\n\n30\n00:02:08,385 --> 00:02:12,641\nwe need our videos to be available to all\nof our customers as often as possible.\n\n31\n00:02:12,641 --> 00:02:13,250\nAll right?\n\n32\n00:02:13,250 --> 00:02:17,438\nBut your company might be something\ndifferent, like a hospital,\n\n33\n00:02:17,438 --> 00:02:20,354\nin which case your servers and\nyour software,\n\n34\n00:02:20,354 --> 00:02:24,550\nyou're not giving that to your customers,\nto the patients.\n\n35\n00:02:24,550 --> 00:02:26,470\nYou're giving that to your own employees.\n\n36\n00:02:26,470 --> 00:02:30,350\nYou need your employees to be able to\nwork, to look up what medication should be\n\n37\n00:02:30,350 --> 00:02:34,740\nissued to patient A versus patient B, and\nif those computer systems go offline,\n\n38\n00:02:34,740 --> 00:02:38,080\nthey don't know what medication to issue\nand now you've got a real problem.\n\n39\n00:02:38,080 --> 00:02:41,950\nAnd so somebody like a hospital is\nlooking to increase availability just for\n\n40\n00:02:41,950 --> 00:02:43,970\ntheir own internal employees right?\n\n41\n00:02:43,970 --> 00:02:47,910\nSo different companies have different\nneeds, different reasons for doing this.\n\n42\n00:02:47,910 --> 00:02:51,840\nBut many companies need their systems\nto be online as much as possible.\n\n43\n00:02:51,840 --> 00:02:57,702\nNow, the real challenge with high\navailability is finding out what it means.\n\n44\n00:02:57,702 --> 00:03:01,840\nCuz if you ask somebody, what does high\navailability mean, they'll say what I've\n\n45\n00:03:01,840 --> 00:03:05,090\nsaid which is just keeping servers\nonline as much as possible.\n\n46\n00:03:05,090 --> 00:03:08,440\nWell, how do you measure\nas much as possible?\n\n47\n00:03:09,510 --> 00:03:12,850\nIf you look at the official\nexam objective for\n\n48\n00:03:12,850 --> 00:03:17,220\nthis one, the exam objective is\nmaintaining service levels, right?\n\n49\n00:03:17,220 --> 00:03:18,840\nI think that's exactly what it's called.\n\n50\n00:03:18,840 --> 00:03:24,070\nAnd what they're talking about is\nservice levels are what we measure as\n\n51\n00:03:24,070 --> 00:03:27,020\navailability, what our services\nshould be available for,\n\n52\n00:03:27,020 --> 00:03:30,720\nhow often they should be online\nversus down or offline, right?\n\n53\n00:03:30,720 --> 00:03:32,260\nWell, different people\nmeasure it different ways.\n\n54\n00:03:32,260 --> 00:03:33,840\nIt's hard to put a number on it.\n\n55\n00:03:33,840 --> 00:03:37,540\nIf you ask your CEO or CIO, your chief\ninformation officer, and you say all\n\n56\n00:03:37,540 --> 00:03:41,400\nright, when we build our servers how\nmuch availability should we plan for?\n\n57\n00:03:41,400 --> 00:03:43,680\nHow much down time do we\nwanna have in a given year?\n\n58\n00:03:43,680 --> 00:03:45,110\nWhat's the CIO gonna say?\n\n59\n00:03:45,110 --> 00:03:45,720\nZero.\n\n60\n00:03:45,720 --> 00:03:47,400\nI want them to always be up.\n\n61\n00:03:47,400 --> 00:03:48,100\nOkay.\n\n62\n00:03:48,100 --> 00:03:49,950\nThat's a very common response.\n\n63\n00:03:49,950 --> 00:03:52,220\nBut then we say, okay, well I can do that.\n\n64\n00:03:52,220 --> 00:03:54,900\nCan you put a million\ndollars in the budget please?\n\n65\n00:03:54,900 --> 00:03:57,770\nAnd they say well what for, and you say\nwell, you wanted zero down time right?\n\n66\n00:03:57,770 --> 00:04:01,285\nSo, I'm going to need a redundant data\ncenter, I'm going to need multiple ISPs,\n\n67\n00:04:01,285 --> 00:04:04,649\nI'm going to need IP failover, I'm going\nto need duplicate sets of hardware,\n\n68\n00:04:04,649 --> 00:04:06,770\nI'm going to need replication software.\n\n69\n00:04:06,770 --> 00:04:09,190\nA million dollars may be on\nthe low end of that budget.\n\n70\n00:04:09,190 --> 00:04:11,340\nIt may actually be much,\nmuch more expensive.\n\n71\n00:04:11,340 --> 00:04:16,010\nAnd the CIO says, whoa,\nI want the servers to be available, but\n\n72\n00:04:16,010 --> 00:04:17,520\nI only wanna pay this much, right?\n\n73\n00:04:17,520 --> 00:04:21,650\nI've only got this much of a budget or\nyour risk analysts say,\n\n74\n00:04:21,650 --> 00:04:24,640\nhere's the dollar offset value,\nhere's the point where\n\n75\n00:04:24,640 --> 00:04:27,690\nspending money versus just having\na failure, kind of outweighs itself.\n\n76\n00:04:27,690 --> 00:04:30,170\nSo, they'll determine based on a budget,\n\n77\n00:04:30,170 --> 00:04:33,540\ntypically, what availability\nyou're gonna be able to create.\n\n78\n00:04:33,540 --> 00:04:37,220\nAnd then based on that budget,\nyou then set out there to create it.\n\n79\n00:04:37,220 --> 00:04:41,770\nSo just be aware that the term\nhigh availability itself\n\n80\n00:04:41,770 --> 00:04:45,180\ncan have a few different meanings\nthat you might see out there.\n\n81\n00:04:45,180 --> 00:04:49,150\nWe typically measure\navailability in terms of nines.\n\n82\n00:04:49,150 --> 00:04:53,736\nWhen you say that you want 99% uptime\nthat means, in a given year, that your\n\n83\n00:04:53,736 --> 00:04:58,130\nservers may be down or your service\nmay be down 1% of the time, all right?\n\n84\n00:04:59,690 --> 00:05:02,570\nWhich doesn't sound like a lot,\nbut it actually is a good bit.\n\n85\n00:05:02,570 --> 00:05:07,560\nLet me bring up the Wikipedia\narticle on high availability,\n\n86\n00:05:07,560 --> 00:05:10,390\ncuz they have a nice little chart\nthat shows the mathematics of it.\n\n87\n00:05:10,390 --> 00:05:12,930\nI don't like to rely on them for\nother information,\n\n88\n00:05:12,930 --> 00:05:16,470\nbut the chart they have is just math,\nso we can trust it.\n\n89\n00:05:16,470 --> 00:05:22,130\nSo, if you look at this chart,\nwhat it does is they take availability and\n\n90\n00:05:22,130 --> 00:05:24,220\nbreak it down into what it means.\n\n91\n00:05:24,220 --> 00:05:28,600\nSo, when somebody says 99% availability,\nthey call it two nines, right?\n\n92\n00:05:28,600 --> 00:05:29,995\nCuz it's nine nine.\n\n93\n00:05:29,995 --> 00:05:34,315\nAnd then if you look at\nthe downtime per year, 3.65 days.\n\n94\n00:05:34,315 --> 00:05:38,215\nYour service could be offline for\nthree and a half days.\n\n95\n00:05:38,215 --> 00:05:40,725\nAnd still have 99% availability.\n\n96\n00:05:40,725 --> 00:05:44,565\nWell, if you're Amazon.com,\nwhen Amazon.com goes offline,\n\n97\n00:05:44,565 --> 00:05:46,635\nthey lose a million dollars an hour.\n\n98\n00:05:46,635 --> 00:05:52,530\nSo, if they're off for 3.65 days that\nis a ton of money that they lost.\n\n99\n00:05:52,530 --> 00:05:54,530\nThat's not good enough for them.\n\n100\n00:05:54,530 --> 00:05:56,490\nThey need to minimize that even more.\n\n101\n00:05:56,490 --> 00:05:59,890\nAnd the one that you'll hear batted\naround the most is five nines.\n\n102\n00:05:59,890 --> 00:06:02,020\nFive nines right here 99.999% up time.\n\n103\n00:06:03,270 --> 00:06:11,040\nFive nines means downtime of\n5.26 minutes per year, okay.\n\n104\n00:06:11,040 --> 00:06:15,516\nCan you have a server that only has\ndown time 5.26 minutes per year?\n\n105\n00:06:15,516 --> 00:06:17,568\nIt's really, really hard.\n\n106\n00:06:17,568 --> 00:06:18,462\nRight?\n\n107\n00:06:18,462 --> 00:06:22,752\nIf you apply a software update, a hotfix,\na security patch that comes out for\n\n108\n00:06:22,752 --> 00:06:26,448\nyour OS and you have to reboot\nthe server many servers take more than\n\n109\n00:06:26,448 --> 00:06:28,770\nfive minutes just to reboot.\n\n110\n00:06:28,770 --> 00:06:31,442\nIf it takes more than five\nminutes just to reboot it once,\n\n111\n00:06:31,442 --> 00:06:34,180\nhow can you guarantee\navailability throughout the year?\n\n112\n00:06:35,250 --> 00:06:36,300\nAnd the answer is you can't.\n\n113\n00:06:36,300 --> 00:06:38,600\nYou can't provide that\nwith most modern servers.\n\n114\n00:06:39,640 --> 00:06:43,090\nThe solution is to have\nmore than one server.\n\n115\n00:06:43,090 --> 00:06:47,380\nRight, Amazon, Google,\nthey've got thousands of servers, so if\n\n116\n00:06:47,380 --> 00:06:52,200\none of their servers goes offline, nobody\nnotices, the other ones pick up the slack.\n\n117\n00:06:52,200 --> 00:06:55,025\nAnd that's what we're talking\nabout with high availability.\n\n118\n00:06:55,025 --> 00:06:58,920\nVMWare gives us a whole\nsuite of methods of\n\n119\n00:06:58,920 --> 00:07:01,570\ntools to be able to do this\ninside of the V center suit.\n\n120\n00:07:01,570 --> 00:07:03,330\nSo we've got a lot of choices.\n\n121\n00:07:03,330 --> 00:07:07,560\nAs an enterprise if you want to provide\nthe highest level of availability\n\n122\n00:07:07,560 --> 00:07:11,940\npossible, you're going to use all the\ntools that we talk about in this episode.\n\n123\n00:07:11,940 --> 00:07:15,360\nBut if you're a small or medium\nbusiness that's operating on a budget\n\n124\n00:07:15,360 --> 00:07:17,330\nyou're going to look at these and\nyou're going to pick and choose.\n\n125\n00:07:17,330 --> 00:07:20,370\nYou might only implement one of these, you\nmight implement two or three of them and\n\n126\n00:07:20,370 --> 00:07:22,920\ncreate the availability that you need,\nall right?\n\n127\n00:07:22,920 --> 00:07:26,640\nBut just keep that in mind,\nthe less downtime you want, right?\n\n128\n00:07:26,640 --> 00:07:30,610\nThe more reduced you want that downtime to\nbe, the more expensive this is going to\n\n129\n00:07:30,610 --> 00:07:33,990\nget, as you have to bump up to higher\nlicense levels like Enterprise or\n\n130\n00:07:33,990 --> 00:07:38,040\nEnterprise Plus or you just have to buy\nmore hardware or specialized hardware.\n\n131\n00:07:38,040 --> 00:07:39,710\nIt gets expensive.\n\n132\n00:07:39,710 --> 00:07:40,210\nAll right.\n\n133\n00:07:40,210 --> 00:07:41,460\nSo in real life land,\n\n134\n00:07:41,460 --> 00:07:44,210\nyou might not use all the tools\nwe've talked about in this episode.\n\n135\n00:07:44,210 --> 00:07:45,340\nJust keep that in mind.\n\n136\n00:07:45,340 --> 00:07:47,980\nMost of them are designed to\ninteract with each other, and\n\n137\n00:07:47,980 --> 00:07:50,465\nin enterprise is going to use all of them.\n\n138\n00:07:50,465 --> 00:07:51,026\nSo you can do that.\n\n139\n00:07:51,026 --> 00:07:53,673\nYou can use all of them combined,\nand then even more.\n\n140\n00:07:53,673 --> 00:07:56,772\nThere's third party solutions out there\nthat can help to get that downtime\n\n141\n00:07:56,772 --> 00:07:58,062\nreduced, as low as possible.\n\n142\n00:07:58,062 --> 00:08:02,879\nAlright, so I mentioned VMware has\nfour different components, right?\n\n143\n00:08:02,879 --> 00:08:04,880\nSo, let's take a look at that.\n\n144\n00:08:04,880 --> 00:08:05,585\nWhere are my notes?\n\n145\n00:08:05,585 --> 00:08:08,640\nHere.The four components I'm\ntalking about are right here,\n\n146\n00:08:08,640 --> 00:08:13,150\nDistributed Resources Schedule or\nDRS, High Availability or\n\n147\n00:08:13,150 --> 00:08:16,852\nHA, Fault Tolerance, FT, and vMotion.\n\n148\n00:08:16,852 --> 00:08:17,970\nOkay.\n\n149\n00:08:17,970 --> 00:08:20,650\nMost of these the name kind\nof describes what they do.\n\n150\n00:08:20,650 --> 00:08:24,270\nBut it does get a little confusing because\nwhen we say high availability, well,\n\n151\n00:08:24,270 --> 00:08:26,370\nthat's what we're trying to provide,\nright?\n\n152\n00:08:26,370 --> 00:08:30,700\nWell, VMware actually has a particular\ntool set that they call High Availability,\n\n153\n00:08:30,700 --> 00:08:31,610\nor HA.\n\n154\n00:08:31,610 --> 00:08:36,480\nSo for the exam we need to make sure\nwe understand VMware's terminology.\n\n155\n00:08:36,480 --> 00:08:37,730\nLet's take a look at each one of these and\n\n156\n00:08:37,730 --> 00:08:41,540\nwhat they do The first one is Distributed\nResources Scheduler, all right?\n\n157\n00:08:41,540 --> 00:08:43,520\nThis is a really neat one.\n\n158\n00:08:43,520 --> 00:08:47,210\nDRS is a part of vSphere,\nit's not turned on by default.\n\n159\n00:08:47,210 --> 00:08:51,200\nAnd when you enable it, what it does\nis it monitors your virtual machines.\n\n160\n00:08:51,200 --> 00:08:53,820\nAnd it monitors the hosts\nthat they run on top of.\n\n161\n00:08:53,820 --> 00:08:55,980\nAnd it's looking at the host and\n\n162\n00:08:55,980 --> 00:08:59,810\nit's trying to determine when\nit's getting overwhelmed.\n\n163\n00:08:59,810 --> 00:09:02,570\nWhen that server is doing too much work.\n\n164\n00:09:02,570 --> 00:09:09,070\nSo if it sees one server that's operating\nat 90% of its disk I/O bandwidth,\n\n165\n00:09:09,070 --> 00:09:13,870\nand it looks at another host and it's\nonly at 40% of its disk I/O bandwidth,\n\n166\n00:09:13,870 --> 00:09:16,740\nthen it recognizes that\nthe virtual machines running\n\n167\n00:09:16,740 --> 00:09:20,910\non the first host are gonna be slower\ncuz there's so much disk I/O going on.\n\n168\n00:09:20,910 --> 00:09:25,140\nAnd it will automatically\nmove a virtual machine\n\n169\n00:09:25,140 --> 00:09:29,290\nfrom the heavy use server to a lower\nuse server to balance things out.\n\n170\n00:09:29,290 --> 00:09:34,110\nSo DRS, Distributed Resource Scheduler,\nis really a load balancer.\n\n171\n00:09:34,110 --> 00:09:36,950\nIt's balancing your load across equipment.\n\n172\n00:09:36,950 --> 00:09:42,080\nIt does not provide availability and\nredundancy itself.\n\n173\n00:09:42,080 --> 00:09:44,170\nIt's really just doing load balancing.\n\n174\n00:09:44,170 --> 00:09:47,160\nNow, that is still a type\nof high availability.\n\n175\n00:09:47,160 --> 00:09:48,810\nIf I go to a website and\n\n176\n00:09:48,810 --> 00:09:52,040\nI can't get the website because\nit says the server is busy.\n\n177\n00:09:52,040 --> 00:09:54,630\nYou get one of those server 500 errors,\nserver is busy.\n\n178\n00:09:54,630 --> 00:09:57,020\nWell, that server might\nas well be turned off.\n\n179\n00:09:57,020 --> 00:09:58,320\nI didn't get the page.\n\n180\n00:09:58,320 --> 00:10:00,250\nRight?\nI don't care that I did get a response\n\n181\n00:10:00,250 --> 00:10:01,100\nfrom the server.\n\n182\n00:10:01,100 --> 00:10:04,410\nIt was so busy it couldn't give me the web\npage, it might as well be turned off.\n\n183\n00:10:04,410 --> 00:10:07,430\nSo DRS makes sure that doesn't happen.\n\n184\n00:10:07,430 --> 00:10:10,550\nIt makes sure the VMs are getting\nmoved to physical hosts\n\n185\n00:10:10,550 --> 00:10:13,790\nthat have the resources necessary\nto provide the function.\n\n186\n00:10:13,790 --> 00:10:15,190\nThe other thing is,\n\n187\n00:10:15,190 --> 00:10:19,200\nin like a denial of service attack\nwhere you target one particular host.\n\n188\n00:10:19,200 --> 00:10:24,070\nWe can move machines off, moves VMs off\nto remove that burden from the server and\n\n189\n00:10:24,070 --> 00:10:27,040\nput them on other systems that\nare available and functional.\n\n190\n00:10:27,040 --> 00:10:29,050\nSo that's what DRS does.\n\n191\n00:10:29,050 --> 00:10:31,270\nIt automatically moves the VMs around.\n\n192\n00:10:31,270 --> 00:10:33,010\nAnd it's really pretty cool.\n\n193\n00:10:33,010 --> 00:10:37,230\nI used to work for\na company that had over 100 VMware hosts,\n\n194\n00:10:37,230 --> 00:10:40,580\nthese ESXI hosts, and we used DRS and\n\n195\n00:10:40,580 --> 00:10:43,440\nit was cool because you could come in\nthe morning and you'd say all right,\n\n196\n00:10:43,440 --> 00:10:47,690\nI'm going to work on this VM today and\nI wonder what physical host it's on?\n\n197\n00:10:47,690 --> 00:10:50,260\nYou wouldn't know,\nthere are over 100 physical hosts that\n\n198\n00:10:50,260 --> 00:10:54,920\nthat VM could have been on that morning\njust depending on conditions overnight.\n\n199\n00:10:54,920 --> 00:10:58,290\nThat night maybe things got busy,\nthe VM got moved here or there or there.\n\n200\n00:10:58,290 --> 00:11:00,210\nI don't know where it is.\n\n201\n00:11:00,210 --> 00:11:02,580\nAnd it does create a little confusion.\n\n202\n00:11:02,580 --> 00:11:05,410\nIf you're using the vSphere client and\n\n203\n00:11:05,410 --> 00:11:09,520\nyou're managing your ESXI boxes directly,\nthat's a real challenge.\n\n204\n00:11:09,520 --> 00:11:10,540\nHow do you know where the VM is?\n\n205\n00:11:10,540 --> 00:11:11,970\nYou've got to go out and try and find it.\n\n206\n00:11:11,970 --> 00:11:12,770\nRight?\n\n207\n00:11:12,770 --> 00:11:15,980\nBut that's where the V center\nsoftware really comes in handy.\n\n208\n00:11:15,980 --> 00:11:19,690\nIf we're using our vSphere web client,\nwe don't have to view the virtual machines\n\n209\n00:11:19,690 --> 00:11:23,430\nbased on what host they're on,\nwe can just view all of our VM's.\n\n210\n00:11:23,430 --> 00:11:25,320\nWe don't care what host they're on, right?\n\n211\n00:11:25,320 --> 00:11:28,070\nIf one host fails, we can just\nmove the VM somewhere else anyway,\n\n212\n00:11:28,070 --> 00:11:31,740\nso who cares if it's on host number 7 or\nhost number 24.\n\n213\n00:11:31,740 --> 00:11:32,990\nIt doesn't matter, right.\n\n214\n00:11:32,990 --> 00:11:34,520\nBecause as long as the VM is up,\n\n215\n00:11:34,520 --> 00:11:37,040\nas long as people can get\nto it it achieves our goal.\n\n216\n00:11:38,080 --> 00:11:41,200\nSo that's what the distributed\nresource scheduler is doing.\n\n217\n00:11:41,200 --> 00:11:45,990\nIt's moving VM's around\nbased on what they do or\n\n218\n00:11:45,990 --> 00:11:50,020\nwhat load they are generating and\nwhat load hosts are under.\n\n219\n00:11:50,020 --> 00:11:51,120\nAnd it's really smart.\n\n220\n00:11:51,120 --> 00:11:56,340\nIt looks at things like DIsc I/O,\nnetwork bandwidth, CPU utilization and\n\n221\n00:11:56,340 --> 00:12:00,130\nRAM consumption and\nit moves VM's based on that, so\n\n222\n00:12:00,130 --> 00:12:04,410\nif you have one VM that's like\nreally high disc I/O usage and\n\n223\n00:12:04,410 --> 00:12:09,320\nyou have another VM that's really high CPU\nusage, it might put those two together,\n\n224\n00:12:09,320 --> 00:12:12,070\nbecause they're not competing for\nthe same resource.\n\n225\n00:12:12,070 --> 00:12:14,510\nDRS can see that and\nit can take care of it.\n\n226\n00:12:14,510 --> 00:12:16,090\nAnd it's dynamic.\n\n227\n00:12:16,090 --> 00:12:18,480\nNo VM runs, well I shouldn't say no.\n\n228\n00:12:18,480 --> 00:12:22,390\nMost VMs don't run at one\nparticular pattern all the time.\n\n229\n00:12:22,390 --> 00:12:23,710\nThey usually have spikes.\n\n230\n00:12:23,710 --> 00:12:28,050\nSometimes they might be disk intensive or\nsometimes they might be CPU intensive\n\n231\n00:12:28,050 --> 00:12:31,550\nbased on whatever activity they're\nperforming, DRS can respond to that.\n\n232\n00:12:31,550 --> 00:12:34,010\nIf we try to manage that by hand\nit'd be really challenging.\n\n233\n00:12:34,010 --> 00:12:34,580\nRight?\n\n234\n00:12:34,580 --> 00:12:39,740\nMaybe I have something like a web server\nthat's serving up static web pages.\n\n235\n00:12:39,740 --> 00:12:44,050\nWell static web pages get cached into RAM\npretty fast, and so a web server serving\n\n236\n00:12:44,050 --> 00:12:48,250\nup static web pages will be high CPU and\nhigh network bandwidth, and that's it.\n\n237\n00:12:48,250 --> 00:12:50,370\nIt will have negligible Disc I/O.\n\n238\n00:12:50,370 --> 00:12:52,130\nAnd RAM consumption will\njust be the web pages.\n\n239\n00:12:52,130 --> 00:12:54,000\nSo RAM and disc are pretty low.\n\n240\n00:12:54,000 --> 00:12:59,530\nBut a new software update comes out,\nlet's say its a Microsoft one,\n\n241\n00:12:59,530 --> 00:13:02,880\nand it's several Gigs in size, that's\nhow Microsoft has been rolling lately.\n\n242\n00:13:02,880 --> 00:13:07,180\nSo when I go to push data out, that's a\nlot of disk I/O as it applies the update,\n\n243\n00:13:07,180 --> 00:13:10,330\nand RAM usage as it's kind of\nprocessing through the update.\n\n244\n00:13:10,330 --> 00:13:13,670\nSo the characteristics of that\nvirtual machine just change.\n\n245\n00:13:13,670 --> 00:13:16,920\nAnd it might only change for\nthe next hour, while we do the update, but\n\n246\n00:13:16,920 --> 00:13:18,175\nit has changed.\n\n247\n00:13:18,175 --> 00:13:20,300\nDRS can respond to that right away.\n\n248\n00:13:20,300 --> 00:13:22,430\nIf we're doing it by hand ,we\nmight not even think about it.\n\n249\n00:13:22,430 --> 00:13:24,400\nLike, it's a web server,\nit's already tuned right.\n\n250\n00:13:24,400 --> 00:13:25,770\nBut when you're applying that update,\n\n251\n00:13:25,770 --> 00:13:28,800\nit's now behaving in a different manner,\nDRS response.\n\n252\n00:13:30,430 --> 00:13:33,430\nAlright, now DRS is rarely\ndeployed by itself.\n\n253\n00:13:33,430 --> 00:13:37,540\nIt's normally deployed with a couple of\nthe other solutions at the same time.\n\n254\n00:13:37,540 --> 00:13:42,710\nAt a minimum, it's got to be deployed\nwith one other technology called vMotion.\n\n255\n00:13:44,150 --> 00:13:51,630\nvMotion is a VMware proprietary technology\nthat allows them to move a virtual machine\n\n256\n00:13:51,630 --> 00:13:56,680\nfrom one physical host to another physical\nhost without interrupting service.\n\n257\n00:13:56,680 --> 00:13:59,000\nWithout taking the server offline.\n\n258\n00:13:59,000 --> 00:13:59,680\nAll right.\n\n259\n00:13:59,680 --> 00:14:05,260\nYou know, to have a VM jump from one\nphysical set of hardware to a completely\n\n260\n00:14:05,260 --> 00:14:09,650\nseparate set of physical hardware, that's\nnormally gonna involved at least a reboot.\n\n261\n00:14:09,650 --> 00:14:10,575\nBut with vMotion,\n\n262\n00:14:10,575 --> 00:14:15,090\nit can do it live while the guest is\nonline without interrupting service.\n\n263\n00:14:15,090 --> 00:14:17,890\nAnd that is a really, really cool feature.\n\n264\n00:14:17,890 --> 00:14:20,390\nIt's included with all\nthe additions of vSphere, or\n\n265\n00:14:20,390 --> 00:14:22,750\nat least the standard and above.\n\n266\n00:14:22,750 --> 00:14:23,480\nIt's in there.\n\n267\n00:14:23,480 --> 00:14:24,360\nIt lets you do that.\n\n268\n00:14:24,360 --> 00:14:26,550\nIt's really cool stuff.\n\n269\n00:14:26,550 --> 00:14:29,800\nIt does have some prerequisites\nwe've got to meet.\n\n270\n00:14:29,800 --> 00:14:32,580\nFor example, we have to have\nshared storage for it to work.\n\n271\n00:14:32,580 --> 00:14:36,034\nBut assuming you have the right equipment,\nyou've got the right configuration,\n\n272\n00:14:36,034 --> 00:14:37,920\nvMotion is awesome.\n\n273\n00:14:37,920 --> 00:14:44,300\nIn order for DRS to move virtual machines\nfrom one host to another It needs vMotion.\n\n274\n00:14:44,300 --> 00:14:47,790\nSo at a minimum,\nthat is one that you're gonna need.\n\n275\n00:14:47,790 --> 00:14:51,460\nAnd almost everybody who deploys\nhigh availability of some form or\n\n276\n00:14:51,460 --> 00:14:53,550\nanother is going to be using vMotion.\n\n277\n00:14:53,550 --> 00:14:56,510\nSo this is the one that you can pretty\nmuch guarantee on somebody having.\n\n278\n00:14:56,510 --> 00:14:59,050\nSmall business,\nlarge business, enterprise.\n\n279\n00:14:59,050 --> 00:15:03,420\nIf they've got more than one host then\nthey're probably enabling vMotion.\n\n280\n00:15:04,990 --> 00:15:07,450\nAfter that we've got DRS.\n\n281\n00:15:07,450 --> 00:15:12,680\nand DRS can be combined with another\nfunction called High Availability or HA.\n\n282\n00:15:14,470 --> 00:15:17,520\nDRS is looking at live servers.\n\n283\n00:15:17,520 --> 00:15:18,660\nLive VMs.\n\n284\n00:15:18,660 --> 00:15:21,340\nAnd moving them around\nbased on their resources.\n\n285\n00:15:21,340 --> 00:15:24,230\nBut, what happens if a failure occurs?\n\n286\n00:15:24,230 --> 00:15:26,480\nIf a VM fails?\n\n287\n00:15:26,480 --> 00:15:30,370\nWell, VMware doesn't really know about it,\nright?\n\n288\n00:15:30,370 --> 00:15:35,220\nWhat happens is we rely on something\nelse to detect the failure and\n\n289\n00:15:35,220 --> 00:15:37,990\nhandle it, and it's HA that does that.\n\n290\n00:15:37,990 --> 00:15:40,040\nHA detects failures.\n\n291\n00:15:40,040 --> 00:15:42,020\nAnd restarts the VMs.\n\n292\n00:15:42,020 --> 00:15:46,605\nSo, DRS is great when things\nare working like they're supposed to,\n\n293\n00:15:46,605 --> 00:15:50,640\nHA is great when things aren't\nworking like they're supposed to.\n\n294\n00:15:50,640 --> 00:15:53,340\nDRS can recognize when a host\nis getting overloaded.\n\n295\n00:15:53,340 --> 00:15:57,410\nHigh Availability can recognize\nwhen a host disappears.\n\n296\n00:15:57,410 --> 00:15:59,129\nWhat if a physical host just powers off?\n\n297\n00:15:59,129 --> 00:16:00,522\nAll it's power supplies just die?\n\n298\n00:16:00,522 --> 00:16:06,480\nWell, when that happens, DRS doesn't\nsee that, it's just gone, or whatever.\n\n299\n00:16:06,480 --> 00:16:08,810\nThere's no more load\ncoming from that server.\n\n300\n00:16:08,810 --> 00:16:11,160\nBut HA will see that it's gone, and\n\n301\n00:16:11,160 --> 00:16:14,955\nit'll boot the virtual\nmachine up somewhere else.\n\n302\n00:16:14,955 --> 00:16:17,365\nWhy would I team that with DRS?\n\n303\n00:16:17,365 --> 00:16:21,015\nWell, the reason is when HA goes to\nmove the virtual machine somewhere else,\n\n304\n00:16:21,015 --> 00:16:22,485\nwhere does it move them to?\n\n305\n00:16:22,485 --> 00:16:26,535\nIt can speak to DRS, and say hey,\nwhere is the best place to put this VM,\n\n306\n00:16:26,535 --> 00:16:30,465\nwhat's the second best server out there\nthat's got enough CPU, or whatever.\n\n307\n00:16:30,465 --> 00:16:32,945\nAnd DRS can steer it in\nthe right direction to\n\n308\n00:16:32,945 --> 00:16:35,410\npoint the VM to boot up in a new location.\n\n309\n00:16:35,410 --> 00:16:39,600\nSo, HA will bring that guest\noperating system back online.\n\n310\n00:16:39,600 --> 00:16:44,732\nNow, when you have a failure like this,\nthe original host fail, power supplies\n\n311\n00:16:44,732 --> 00:16:49,880\nwent out, that server went off, that means\nthe guest VM just went offline also.\n\n312\n00:16:49,880 --> 00:16:51,520\nWhatever it had in RAM is now gone.\n\n313\n00:16:52,720 --> 00:16:58,580\nSo, when HA goes to bring that virtual\nmachine backup, on another machine.\n\n314\n00:16:58,580 --> 00:17:00,710\nIt's got to boot it up from scratch.\n\n315\n00:17:00,710 --> 00:17:03,950\nSo, HA does not eliminate your down time.\n\n316\n00:17:03,950 --> 00:17:05,960\nIt minimizes it.\n\n317\n00:17:05,960 --> 00:17:09,270\nIt sees a failure,\nrecognizes it right away, and\n\n318\n00:17:09,270 --> 00:17:11,450\nstarts the VM up on another host.\n\n319\n00:17:11,450 --> 00:17:13,540\nSo, you've got to boot the VM up.\n\n320\n00:17:13,540 --> 00:17:17,962\nAnd that means your down time is going to\nequal whatever amount of time it takes,\n\n321\n00:17:17,962 --> 00:17:20,160\nto reboot that virtual machine.\n\n322\n00:17:20,160 --> 00:17:22,756\nThe virtual machine will boot backup,\nand you're in business.\n\n323\n00:17:22,756 --> 00:17:27,770\nIf the VM takes two minutes to boot,\nthen from failure to full operation again,\n\n324\n00:17:27,770 --> 00:17:30,880\nyou should have at least two\nminutes right in detection time,\n\n325\n00:17:30,880 --> 00:17:32,510\nwhich may be a few seconds more.\n\n326\n00:17:32,510 --> 00:17:34,310\nBut it should be at\nleast that two minutes.\n\n327\n00:17:34,310 --> 00:17:40,600\nSo, HA does not give us five nines\nof availability in most scenarios.\n\n328\n00:17:40,600 --> 00:17:43,820\nWhat it does is it just ensures\nthat our system self-repairs.\n\n329\n00:17:43,820 --> 00:17:47,810\nIf a host dies out, the virtual\nmachines will start somewhere else.\n\n330\n00:17:47,810 --> 00:17:49,870\nAnd the host dying out,\nit could be any number of things.\n\n331\n00:17:49,870 --> 00:17:51,520\nI mentioned power supplies.\n\n332\n00:17:51,520 --> 00:17:54,330\nAll the power supplies go out,\nthe server just winks out, and that's it.\n\n333\n00:17:54,330 --> 00:17:56,380\nBut it could be something\nmuch more simple.\n\n334\n00:17:56,380 --> 00:17:59,200\nIt loses its link light\non its network adaptor.\n\n335\n00:17:59,200 --> 00:18:02,682\nIt loses a connection to a SAN,\nsomething like that happens.\n\n336\n00:18:02,682 --> 00:18:05,917\nIf something very simple like that\nhappens, it'll trigger HA, and\n\n337\n00:18:05,917 --> 00:18:08,113\nmove those virtual\nmachines somewhere else.\n\n338\n00:18:10,448 --> 00:18:14,600\nSo DRS is great,\nwhen the hosts are online.\n\n339\n00:18:14,600 --> 00:18:17,860\nHA is great when the hosts are offline,\nwhen they've failed.\n\n340\n00:18:17,860 --> 00:18:21,380\nAnd the two working together,\nwill have you covered most of the time.\n\n341\n00:18:22,440 --> 00:18:25,680\nNow, HA doesn't need vMotion.\n\n342\n00:18:25,680 --> 00:18:29,710\nIt doesn't need vMotion cuz HA is\nnever gonna do a live migration.\n\n343\n00:18:29,710 --> 00:18:31,570\nHA, the host has failed.\n\n344\n00:18:31,570 --> 00:18:33,570\nWe got to get that VM\nbooted somewhere else.\n\n345\n00:18:33,570 --> 00:18:36,630\nI guess there are a few little\nscenarios where I might use vMotion.\n\n346\n00:18:36,630 --> 00:18:38,200\nBut it doesn't actually depend on it,\n\n347\n00:18:38,200 --> 00:18:42,570\nbecause if the host is gone,\nthere's no RAM to move over.\n\n348\n00:18:43,580 --> 00:18:46,220\nLet me explain that a little more though,\nthe RAM side of things.\n\n349\n00:18:47,450 --> 00:18:49,960\nIf we take a look at,\nI've got a simple diagram here.\n\n350\n00:18:51,730 --> 00:18:57,360\nWhen we fire up a virtual machine, and\nit's on a standalone server like Server 1.\n\n351\n00:18:57,360 --> 00:19:00,020\nWell, that server's got local storage.\n\n352\n00:19:00,020 --> 00:19:02,780\nAnd our virtual machine\nis gonna be stored there.\n\n353\n00:19:02,780 --> 00:19:05,230\nAnd our virtual machine is really\nmade up of a number of files, but\n\n354\n00:19:05,230 --> 00:19:07,450\nthere's two that we really care about.\n\n355\n00:19:07,450 --> 00:19:10,260\nThere's a configuration\nfile that specifies\n\n356\n00:19:10,260 --> 00:19:12,710\nwhat hardware that virtual\nmachine should have.\n\n357\n00:19:12,710 --> 00:19:15,860\nAnd then the second file\nis the virtual hard drive.\n\n358\n00:19:15,860 --> 00:19:17,514\nYou might have more than\none virtual hard drive.\n\n359\n00:19:17,514 --> 00:19:18,999\nNormally, we just have one.\n\n360\n00:19:18,999 --> 00:19:20,697\nSo that virtual hard drive,\n\n361\n00:19:20,697 --> 00:19:25,200\nthose are both gonna be stored right\nhere on the local storage on Server 1.\n\n362\n00:19:25,200 --> 00:19:29,080\nWhen we boot up the virtual machine,\nit's got it's storage right here.\n\n363\n00:19:29,080 --> 00:19:33,044\nAnd whatever that virtual\nmachine is using for RAM,\n\n364\n00:19:33,044 --> 00:19:36,569\nthat's gonna be stored\nin RAM on that server.\n\n365\n00:19:36,569 --> 00:19:40,539\nIf the virtual machine has a problem,\nor if the host underneath it,\n\n366\n00:19:40,539 --> 00:19:41,873\nor if Server 1 fails.\n\n367\n00:19:41,873 --> 00:19:45,630\nWell, the virtual machine stored\nright here on these hard drives.\n\n368\n00:19:45,630 --> 00:19:49,480\nAnd if Server 1 fails, Server 2,\nServer 3, they can't get to it.\n\n369\n00:19:49,480 --> 00:19:52,510\nThey can't reach out, and\nget to that virtual machine because\n\n370\n00:19:52,510 --> 00:19:55,240\nit was stored on a server,\nthey don't have access to.\n\n371\n00:19:55,240 --> 00:19:59,040\nBut we could pop these hard drives out,\nthrow them in a new server, and\n\n372\n00:19:59,040 --> 00:20:00,380\nbring that server up.\n\n373\n00:20:00,380 --> 00:20:03,160\nAnd now, our virtual machine's\ninformation is right there.\n\n374\n00:20:03,160 --> 00:20:04,960\nWe can bring it live, we can get at it.\n\n375\n00:20:04,960 --> 00:20:06,480\nAnd off we go.\n\n376\n00:20:06,480 --> 00:20:08,928\nThat doesn't require HA,\nor DRS, or anything.\n\n377\n00:20:08,928 --> 00:20:12,955\nThat's us going, and\npulling those drives, and moving it.\n\n378\n00:20:12,955 --> 00:20:18,554\nBut if we have a SAN, a Storage Area\nNetwork, then the virtual hard drives,\n\n379\n00:20:18,554 --> 00:20:23,400\nand the virtual machine config\nfiles can be stored here.\n\n380\n00:20:23,400 --> 00:20:27,060\nAnd the cool part about that, is when\nthey're all stored in one location,\n\n381\n00:20:27,060 --> 00:20:32,080\nServer 1, Server 2, Server 3,\nthey all have access to those hard drives.\n\n382\n00:20:32,080 --> 00:20:36,240\nSo, if Server 1 fails, if it goes offline.\n\n383\n00:20:36,240 --> 00:20:38,770\nWhen it fails, and disappears.\n\n384\n00:20:38,770 --> 00:20:42,000\nSo, this guy, whoops,\nthat's not what I wanted.\n\n385\n00:20:42,000 --> 00:20:44,740\nSo this guys fails, and goes offline.\n\n386\n00:20:44,740 --> 00:20:50,140\nWhen that happens, well, the other\nservers find out about it somehow.\n\n387\n00:20:50,140 --> 00:20:52,010\nNow, how do they find out about it?\n\n388\n00:20:52,010 --> 00:20:54,950\nWell, they find out about it through HA.\n\n389\n00:20:54,950 --> 00:20:59,160\nThat HA system is what's monitoring that,\nto see that the failure has occurred.\n\n390\n00:20:59,160 --> 00:21:02,710\nSo Server 2, Server 3,\nthey see that the failures happened.\n\n391\n00:21:02,710 --> 00:21:07,950\nAnd one of them will reach out,\ngrab the virtual machine config file,\n\n392\n00:21:07,950 --> 00:21:10,730\ngrab the virtual hard drives,\nand boot up off of it.\n\n393\n00:21:10,730 --> 00:21:12,570\nBoot a VM off of that.\n\n394\n00:21:12,570 --> 00:21:14,500\nNow, who's gonna be,\nServer 2, or Server 3?\n\n395\n00:21:14,500 --> 00:21:17,090\nWell, DRS will make that decision.\n\n396\n00:21:17,090 --> 00:21:22,070\nIf you don't have DRS, HA will just\npick whichever one has the necessary\n\n397\n00:21:22,070 --> 00:21:25,740\ningredients, which one has the most\nmemory, or whatever available.\n\n398\n00:21:25,740 --> 00:21:28,330\nIt'll make a decision based\nsolely on memory, and CPU.\n\n399\n00:21:28,330 --> 00:21:30,380\nIt won't look at things\nlike network bandwidth, and\n\n400\n00:21:30,380 --> 00:21:34,210\ndisk I/O, because HA doesn't\nhave that visibility, DRS does.\n\n401\n00:21:35,280 --> 00:21:37,920\nBut it's this shared storage\nthat facilitates that.\n\n402\n00:21:37,920 --> 00:21:40,610\nAnd so, HA doesn't really need vMotion,\n\n403\n00:21:40,610 --> 00:21:45,730\nbecause these servers can already see the\ndisks, and there is no RAM to transmit.\n\n404\n00:21:48,150 --> 00:21:52,100\nDRS, it's moving VMs while they're live,\nwhile they're up, and running.\n\n405\n00:21:52,100 --> 00:21:55,660\nAnd so, there is memory to transmit.\n\n406\n00:21:55,660 --> 00:21:58,730\nIf I have Server 1, and\nServer 1 is healthy.\n\n407\n00:21:58,730 --> 00:22:01,950\nAnd there's a VM on there\nthat's running right now.\n\n408\n00:22:01,950 --> 00:22:05,360\nAnd I wanna move all the VMs off of\nServer 1, so I can do some maintenance.\n\n409\n00:22:05,360 --> 00:22:07,070\nI wanna do some software updates.\n\n410\n00:22:07,070 --> 00:22:07,930\nReboot the server.\n\n411\n00:22:07,930 --> 00:22:08,890\nStuff like that.\n\n412\n00:22:08,890 --> 00:22:12,270\nI wanna move that off to Server 1,\nso that I can take it offline.\n\n413\n00:22:12,270 --> 00:22:14,625\nWell, the virtual hard\ndrives are down here.\n\n414\n00:22:14,625 --> 00:22:17,131\nSo the Server 2, and\nServer 3 can already see them.\n\n415\n00:22:17,131 --> 00:22:19,970\nBut I don't wanna reboot the VMs.\n\n416\n00:22:19,970 --> 00:22:22,840\nIf I reboot the VM,\nif I shut the VM down on Server 1,\n\n417\n00:22:22,840 --> 00:22:26,530\nand then I start it on Server 2,\nthat'll work great.\n\n418\n00:22:26,530 --> 00:22:27,540\nI don't need vMotion for that.\n\n419\n00:22:28,840 --> 00:22:30,130\nBut it was downtime.\n\n420\n00:22:30,130 --> 00:22:33,310\nThe virtual machine was offline for\na moment, while we did that.\n\n421\n00:22:33,310 --> 00:22:34,250\nBut with vMotion,\n\n422\n00:22:34,250 --> 00:22:38,770\nwhat it can do, is it can say okay,\nServer 1 can see the hard drive.\n\n423\n00:22:38,770 --> 00:22:40,500\nServer 2 can see the hard drive.\n\n424\n00:22:40,500 --> 00:22:42,720\nSo, storage is already taken care of.\n\n425\n00:22:44,220 --> 00:22:47,280\nThe only thing we really\nneed is what's in RAM.\n\n426\n00:22:47,280 --> 00:22:50,917\nWhat's in RAM for the virtual machine\nis stored right here in Server 1.\n\n427\n00:22:50,917 --> 00:22:54,000\nWith vMotion, when we go to move a VM,\n\n428\n00:22:54,000 --> 00:22:58,250\nit starts synchronizing that\nRAM between the two servers.\n\n429\n00:22:58,250 --> 00:23:00,620\nSo, it's synchronizing it between the two,\nand\n\n430\n00:23:00,620 --> 00:23:05,390\nwhen it's got a mirror image of whats\nin RAM for that VM on these two boxes.\n\n431\n00:23:05,390 --> 00:23:09,790\nThen it just flips, and it says Server 1\nis no longer the primary, Server 2 is.\n\n432\n00:23:09,790 --> 00:23:12,460\nAnd now, that virtual machine\nis running right over here\n\n433\n00:23:12,460 --> 00:23:16,770\nwith everything that it had in RAM,\naccess to its hard drive, ready to go.\n\n434\n00:23:16,770 --> 00:23:20,630\nThe guest operating system won't\neven know a change happened.\n\n435\n00:23:20,630 --> 00:23:22,580\nIt just flips right over, and\n\n436\n00:23:22,580 --> 00:23:26,250\nyour end-users will oftentimes\nnot even know a change happened.\n\n437\n00:23:26,250 --> 00:23:30,225\nI say oftentimes, when you do this flip,\nyou normally lose about,\n\n438\n00:23:30,225 --> 00:23:33,820\nit's kind of works out to between two,\n\n439\n00:23:33,820 --> 00:23:38,470\nand four milliseconds of access to that\nserver when the actual flip happens.\n\n440\n00:23:38,470 --> 00:23:40,950\nNow, two to four milliseconds\nis next to nothing.\n\n441\n00:23:40,950 --> 00:23:42,120\nA human won't notice it.\n\n442\n00:23:42,120 --> 00:23:46,385\nBut some software, and Lotus Notes\nis the one that pops into mind,\n\n443\n00:23:46,385 --> 00:23:49,828\nthat some software is\nextremely network sensitive.\n\n444\n00:23:49,828 --> 00:23:54,069\nAnd even a little blip like that can cause\nthe software to lock up But the end user\n\n445\n00:23:54,069 --> 00:23:58,258\njust closes the application, and\nlaunches it again, and they're back in.\n\n446\n00:23:58,258 --> 00:23:59,500\nRight.\n\n447\n00:23:59,500 --> 00:24:02,100\nSo they don't even, usually,\nrealize that it's a network issue.\n\n448\n00:24:02,100 --> 00:24:04,760\nThey think it's just their own machine,\nthat was the problem.\n\n449\n00:24:04,760 --> 00:24:08,620\nBut most modern software,\nLotus Notes is not modern software,\n\n450\n00:24:08,620 --> 00:24:13,180\nmost modern software is built to handle\nlosses far greater than four milliseconds.\n\n451\n00:24:13,180 --> 00:24:16,390\nThey just do a retransmit, and\nthey don't even notice the problem.\n\n452\n00:24:16,390 --> 00:24:20,250\nSo in those scenarios,\nthis fail over is almost seamless.\n\n453\n00:24:20,250 --> 00:24:22,210\nIt's zero down time, to the end users.\n\n454\n00:24:22,210 --> 00:24:23,910\nThey're in the system the whole time.\n\n455\n00:24:23,910 --> 00:24:25,005\nThey don't even notice.\n\n456\n00:24:25,005 --> 00:24:26,530\nRight.\nThat's where we start to get\n\n457\n00:24:26,530 --> 00:24:28,250\ntrue high availability.\n\n458\n00:24:28,250 --> 00:24:30,374\nvMotion is what facilitates that.\n\n459\n00:24:30,374 --> 00:24:31,250\nRight.\n\n460\n00:24:31,250 --> 00:24:33,860\nNow on the hardware side, we need a SAN.\n\n461\n00:24:33,860 --> 00:24:35,110\nWe need a storage area network.\n\n462\n00:24:35,110 --> 00:24:37,960\nWe need shared storage,\nfor this to happen.\n\n463\n00:24:37,960 --> 00:24:38,850\nOkay.\n\n464\n00:24:38,850 --> 00:24:41,890\nThe second thing is, synchronizing RAM.\n\n465\n00:24:41,890 --> 00:24:47,410\nBetween virtual machines, RAM is very\nfast, and it's changing all the time.\n\n466\n00:24:47,410 --> 00:24:48,760\nAnd so while we're synchronizing RAM,\n\n467\n00:24:48,760 --> 00:24:52,615\nthe virtual machine's actually slowed\ndown a bit, to facilitate that sync.\n\n468\n00:24:52,615 --> 00:24:57,845\nThe more memory you have, the more time\nthat'll take, and so it's recommended\n\n469\n00:24:57,845 --> 00:25:02,995\nthat you have a dedicated virtual switch,\na dedicated physical adapter,\n\n470\n00:25:02,995 --> 00:25:08,992\njust for vMotion, just for synchronizing\nthat memory across these various hosts.\n\n471\n00:25:08,992 --> 00:25:09,552\nAll right.\n\n472\n00:25:09,552 --> 00:25:14,232\nSo often times we'll do a dedicated\nnetwork adapter in our ESXI boxes,\n\n473\n00:25:14,232 --> 00:25:15,592\njust for vMotion.\n\n474\n00:25:15,592 --> 00:25:17,702\nRight.\nNetwork adapters are inexpensive,\n\n475\n00:25:17,702 --> 00:25:19,852\na lot of servers come with\na minimum of two these days,\n\n476\n00:25:19,852 --> 00:25:22,747\nbut you can get quad port cards, you can\nget all sorts of network adapters in your\n\n477\n00:25:22,747 --> 00:25:25,770\nhosts,it makes it really\neasy to facilitate that.\n\n478\n00:25:25,770 --> 00:25:28,920\nSo that's kind of an optional component,\nif you don't mind slow fail over,\n\n479\n00:25:28,920 --> 00:25:30,840\nyou can actually do it off\nof your regular niche.\n\n480\n00:25:30,840 --> 00:25:32,090\nYou don't have to have that.\n\n481\n00:25:32,090 --> 00:25:34,620\nBut shared storage, is a requirement.\n\n482\n00:25:34,620 --> 00:25:36,620\nAnd Fibre Channel SANs,\n\n483\n00:25:36,620 --> 00:25:39,630\nare gonna give you the best performance,\nthis will work with iSCSI.\n\n484\n00:25:39,630 --> 00:25:42,890\nI'm gonna use iSCSI here on the show,\nwhen we configure this later, but\n\n485\n00:25:42,890 --> 00:25:45,890\nit's definitely faster, and\nmore reliable with Fibre Channel.\n\n486\n00:25:48,490 --> 00:25:49,870\nAll right.\nNow that leaves just one more.\n\n487\n00:25:49,870 --> 00:25:53,800\nSo I talk about vMotion,\nHigh Availability, and DRS.\n\n488\n00:25:53,800 --> 00:25:56,420\nThe last one is, Fault Tolerance.\n\n489\n00:25:57,660 --> 00:25:59,800\nFault Tolerance is really neat.\n\n490\n00:25:59,800 --> 00:26:05,610\nWith all of these other guys, it required\nus to move virtual machines around.\n\n491\n00:26:05,610 --> 00:26:08,280\nDRS moved them while they were running,\n\n492\n00:26:08,280 --> 00:26:11,640\nHigh Availability rebooted\nthem after they failed.\n\n493\n00:26:11,640 --> 00:26:13,800\nFault Tolerance takes\na different approach.\n\n494\n00:26:13,800 --> 00:26:19,080\nFault Tolerance, says none of the other\noptions provide truly zero downtime.\n\n495\n00:26:19,080 --> 00:26:23,160\nvMotion, you lose a couple\nof milliseconds of activity.\n\n496\n00:26:23,160 --> 00:26:25,820\nHigh Availability,\nyou're rebooting the system.\n\n497\n00:26:25,820 --> 00:26:27,640\nDRS, you're assuming things\nare already healthy,\n\n498\n00:26:27,640 --> 00:26:32,280\nthey're just kinda slowing down, Fault\nTolerance says, how can we get it to zero?\n\n499\n00:26:32,280 --> 00:26:32,990\nAll right.\n\n500\n00:26:32,990 --> 00:26:35,930\nAnd when you're running\nthe Fault Tolerance module, what it does,\n\n501\n00:26:35,930 --> 00:26:40,620\nis it takes your virtual machine,\nand it creates a mirror.\n\n502\n00:26:40,620 --> 00:26:42,230\nThey call it a shadow VM.\n\n503\n00:26:42,230 --> 00:26:43,650\nA second virtual machine,\n\n504\n00:26:43,650 --> 00:26:47,955\nstored on a separate host,\nthat is identical to the production one.\n\n505\n00:26:47,955 --> 00:26:48,850\nAll right.\n\n506\n00:26:48,850 --> 00:26:52,390\nAnd the idea is by already\nhaving two of them up and\n\n507\n00:26:52,390 --> 00:26:56,790\nrunning, when one fails, the other one\njust steps right in, and takes over.\n\n508\n00:26:56,790 --> 00:26:59,500\nNo synchronizing RAM, it's already done.\n\n509\n00:26:59,500 --> 00:27:02,440\nNo moving hard drives, or\nvMotion, it's already done.\n\n510\n00:27:02,440 --> 00:27:04,185\nWe just flip it right over.\n\n511\n00:27:04,185 --> 00:27:05,246\nRight.\nWe tell the switch,\n\n512\n00:27:05,246 --> 00:27:08,650\nhey, this Mac address is now available,\non this other port, and off you go.\n\n513\n00:27:08,650 --> 00:27:09,390\nThat's it.\n\n514\n00:27:09,390 --> 00:27:11,040\nRight.\nYou get the absolute,\n\n515\n00:27:11,040 --> 00:27:15,715\nsmallest down time possible,\nthat's able to be provided by VM Wear.\n\n516\n00:27:15,715 --> 00:27:17,110\nAll right.\n\n517\n00:27:17,110 --> 00:27:20,800\nThe reason I say by VM Wear,\nyou might have software applications,\n\n518\n00:27:20,800 --> 00:27:23,570\nthat has clustering support itself.\n\n519\n00:27:23,570 --> 00:27:26,480\nSo software like,\nMicrosoft Exchange, or SQL,\n\n520\n00:27:26,480 --> 00:27:30,460\nprograms like that,\nthey have their own clustering support.\n\n521\n00:27:30,460 --> 00:27:33,310\nOracle, a lot of those guys have\ntheir own clustering support.\n\n522\n00:27:33,310 --> 00:27:36,430\nAnd with those,\nthey often times have their own solution.\n\n523\n00:27:36,430 --> 00:27:39,860\nThey can eliminate downtime,\nthey can cause that not to happen.\n\n524\n00:27:39,860 --> 00:27:44,900\nThe nice thing about the VMware solution,\nis your software doesn't even know,\n\n525\n00:27:44,900 --> 00:27:45,740\nthat it's being clustered.\n\n526\n00:27:45,740 --> 00:27:47,080\nIt's completely independent.\n\n527\n00:27:47,080 --> 00:27:51,440\nSo if you have software that doesn't\nsupport clustering, you can use FT, and\n\n528\n00:27:51,440 --> 00:27:56,300\nget the equivalent, of a zero down time\nfully available cluster, highly redundant.\n\n529\n00:27:56,300 --> 00:27:56,980\nAll right.\n\n530\n00:27:56,980 --> 00:28:00,730\nBut if your software is cluster aware,\nyou're often better off using\n\n531\n00:28:00,730 --> 00:28:03,670\nits clustering technology,\nthan you are VMware.\n\n532\n00:28:03,670 --> 00:28:06,790\nSo FT is really good when\nyou've got software that just\n\n533\n00:28:06,790 --> 00:28:10,110\ndoesn't support clustering, but\nyou want that same level of support.\n\n534\n00:28:10,110 --> 00:28:10,680\nAll right.\n\n535\n00:28:10,680 --> 00:28:11,740\nSo just keep that in mind.\n\n536\n00:28:11,740 --> 00:28:15,360\nFT is probably the least\nused of these four options,\n\n537\n00:28:15,360 --> 00:28:18,890\nbecause If you've got\nmission critical software,\n\n538\n00:28:18,890 --> 00:28:22,210\nit's almost a guarantee that software\nhas its own clustering support.\n\n539\n00:28:22,210 --> 00:28:25,110\nBut the way it works is by\nmaintaining that shadow instance.\n\n540\n00:28:25,110 --> 00:28:28,450\nWhen we have a fail over,\nwe just flip right over to this VM,\n\n541\n00:28:28,450 --> 00:28:30,090\nthat's already running.\n\n542\n00:28:30,090 --> 00:28:33,500\nNow obviously, there's gonna be\na lot of network bandwidth required,\n\n543\n00:28:33,500 --> 00:28:34,660\nto maintain something like that.\n\n544\n00:28:34,660 --> 00:28:39,800\nSo this is not something that we just turn\non, on junker machines, with a single NIC.\n\n545\n00:28:39,800 --> 00:28:40,380\nRight.\nSo\n\n546\n00:28:40,380 --> 00:28:43,940\nthere is some planning that needs to go\ninto FT, but it is one of the neater ones.\n\n547\n00:28:45,410 --> 00:28:46,290\nAll right.\n\n548\n00:28:46,290 --> 00:28:48,510\nSo those are the four main components.\n\n549\n00:28:48,510 --> 00:28:52,140\nObjective five actually does\ncover a few other things,\n\n550\n00:28:52,140 --> 00:28:54,200\nthat I'm gonna push off\nto the next episode.\n\n551\n00:28:54,200 --> 00:28:56,290\nBut I wanna focus on these four,\nfor this episode.\n\n552\n00:28:56,290 --> 00:28:58,292\nSo we're gonna look at how\nto get these configured.\n\n553\n00:28:58,292 --> 00:29:00,780\nI'm wanna start with vMotion, because\nit's one of the more important ones, so\n\n554\n00:29:00,780 --> 00:29:02,690\nI'm gonna kind of work my way backwards.\n\n555\n00:29:02,690 --> 00:29:06,120\nSo we'll see vMotion, HA, DRS, and FT.\n\n556\n00:29:06,120 --> 00:29:09,155\nWe'll move through each one,\nthrough the rest of episode.\n\n557\n00:29:09,155 --> 00:29:11,800\nI've lectured us here, this first segment.\n\n558\n00:29:11,800 --> 00:29:14,844\nI promise we will go\nhands on the rest of it.\n\n559\n00:29:14,844 --> 00:29:15,520\nAll right.\n\n560\n00:29:15,520 --> 00:29:18,580\nWell looking at the clock, there's\na pretty good spot for us to stop, and\n\n561\n00:29:18,580 --> 00:29:19,280\ntake a break.\n\n562\n00:29:19,280 --> 00:29:20,020\nSo let's do that.\n\n563\n00:29:20,020 --> 00:29:23,600\nWe'll take a pause here, when we get back,\nwe're gonna configure vMotion.\n\n564\n00:29:23,600 --> 00:29:25,503\nSo stay tuned, we'll be back after this.\n\n565\n00:29:25,503 --> 00:29:32,968\n[MUSIC]\n\n566\n00:29:32,968 --> 00:29:34,070\nAll right.\nWelcome back.\n\n567\n00:29:34,070 --> 00:29:39,043\nSo what we're gonna do now, is we're gonna\ntake a look at, really our first stab at\n\n568\n00:29:39,043 --> 00:29:44,534\nclustering VMware hosts together, the ESXi\nhosts together, and implementing vMotion.\n\n569\n00:29:44,534 --> 00:29:45,590\nAll right.\n\n570\n00:29:45,590 --> 00:29:48,290\nSo there's a few little things we\nneed to do, before we dive in.\n\n571\n00:29:48,290 --> 00:29:51,480\nAnd then, there's actually\nsome more advanced things,\n\n572\n00:29:51,480 --> 00:29:53,020\nthat I'll talk about a little bit later.\n\n573\n00:29:53,020 --> 00:29:56,200\nBut if you're gonna be implementing\nVMotion on your system,\n\n574\n00:29:56,200 --> 00:30:00,050\nI mentioned it's a really\ngood idea to use a dedicated\n\n575\n00:30:01,390 --> 00:30:04,860\nNIC ,just for\nsynchronizing your VMotion information.\n\n576\n00:30:04,860 --> 00:30:05,360\nAll right.\n\n577\n00:30:05,360 --> 00:30:08,260\nAnd so, that's what I'm gonna do, for\nsynchronizing RAM between machines.\n\n578\n00:30:08,260 --> 00:30:10,390\nIf you have a dedicated network, just for\n\n579\n00:30:10,390 --> 00:30:13,250\nthat, it'll insure\nthe fastest motion time.\n\n580\n00:30:13,250 --> 00:30:15,190\nThe faster the motion happens,\n\n581\n00:30:15,190 --> 00:30:19,090\nthe smaller that little window\nof lost data is going to be.\n\n582\n00:30:19,090 --> 00:30:23,730\nNow I covered setting up dedicated\nNICs for things, in another episode.\n\n583\n00:30:23,730 --> 00:30:25,123\nSo I've still got those set up,\n\n584\n00:30:25,123 --> 00:30:27,840\nI just want to show you real\nquick on some of my hosts.\n\n585\n00:30:27,840 --> 00:30:31,867\nSo what I'm gonna be doing is,\nI'm gonna be clustering two of my hosts,\n\n586\n00:30:31,867 --> 00:30:34,272\nI'm gonna cluster ESX server 3, and 4.\n\n587\n00:30:34,272 --> 00:30:39,440\nI'm gonna take these two guys, and\nmake a VMware cluster, out of them.\n\n588\n00:30:39,440 --> 00:30:41,920\nAnd then,\nwe're gonna turn on vMotion first,\n\n589\n00:30:41,920 --> 00:30:44,430\nwhich actually kind of\ngets turned on by itself.\n\n590\n00:30:44,430 --> 00:30:49,450\nAnd then, we're gonna add DRS and HA to\nit, and then at the very end we'll add FT.\n\n591\n00:30:49,450 --> 00:30:51,290\nSo by the time this is all done,\n\n592\n00:30:51,290 --> 00:30:54,180\nwe'll be running all four features\non this new little cluster.\n\n593\n00:30:54,180 --> 00:30:56,670\nNow just because you're managing\nmultiple servers like this,\n\n594\n00:30:56,670 --> 00:30:59,020\ndoesn't mean they all have\nto be in the cluster.\n\n595\n00:30:59,020 --> 00:31:01,780\nIt's up to you, which ones,\nyou want to bind together.\n\n596\n00:31:01,780 --> 00:31:07,540\nNow, the reason I mentioned that is,\nwhen you cluster ESXi hosts,\n\n597\n00:31:07,540 --> 00:31:11,492\nyou want their hardware to\nbe as similar as possible.\n\n598\n00:31:11,492 --> 00:31:13,220\nAll right.\nThat means they should have\n\n599\n00:31:13,220 --> 00:31:16,555\nthe same amount of network adapters,\nand the same V switches set up,\n\n600\n00:31:16,555 --> 00:31:20,340\n,nd it means you should have\nthe same processors in them.\n\n601\n00:31:20,340 --> 00:31:20,960\nAll right.\n\n602\n00:31:20,960 --> 00:31:22,242\nSo let's talk about each of these.\n\n603\n00:31:22,242 --> 00:31:26,120\nOn the network side,\nyou wanna have the same network set up,\n\n604\n00:31:26,120 --> 00:31:29,150\nbecause when a virtual machine\nflips from one host to another,\n\n605\n00:31:29,150 --> 00:31:31,152\nit needs connectivity to the same network.\n\n606\n00:31:31,152 --> 00:31:33,330\nAll right.\nNow you can do that by hand.\n\n607\n00:31:33,330 --> 00:31:33,930\nYou can go through, and\n\n608\n00:31:33,930 --> 00:31:37,210\ncreate duplicate V switches on\neach of these hosts, if you want.\n\n609\n00:31:37,210 --> 00:31:40,960\nBut the best way to deal with it,\nis with a distributed virtual switch, or\n\n610\n00:31:40,960 --> 00:31:42,520\na dv switch, all right.\n\n611\n00:31:42,520 --> 00:31:44,340\nWe covered those in another episode.\n\n612\n00:31:44,340 --> 00:31:47,510\nThere's two advantages to\nusing a DVswitch on a cluster.\n\n613\n00:31:47,510 --> 00:31:51,341\nAdvantage number one,\nis the configuration is consistent.\n\n614\n00:31:51,341 --> 00:31:54,765\nYou know the network is the same,\non each of the nodes in the cluster.\n\n615\n00:31:54,765 --> 00:31:57,439\nYou might have 20 servers\nin your cluster and\n\n616\n00:31:57,439 --> 00:32:00,810\nyou want them all to have\nthe same network configuration.\n\n617\n00:32:00,810 --> 00:32:02,130\nThat's really challenging.\n\n618\n00:32:02,130 --> 00:32:05,500\nUse a DV switch and\nit'll be the seam across them, right?\n\n619\n00:32:05,500 --> 00:32:09,120\nThe other advantage is, you might remember\nform the networking episode I mentioned\n\n620\n00:32:09,120 --> 00:32:11,150\nhow DV switches have better reporting.\n\n621\n00:32:11,150 --> 00:32:13,850\nThey'll show us all sorts of information\nabout the network traffic coming\n\n622\n00:32:13,850 --> 00:32:15,050\nout of a VM.\n\n623\n00:32:15,050 --> 00:32:20,000\nWell, if your VM is jumping from\nhost to host, to host, right,\n\n624\n00:32:20,000 --> 00:32:21,640\nthat's different vSwitches.\n\n625\n00:32:21,640 --> 00:32:24,770\nSo, how are you supposed to get a big\npicture of the network utilization of\n\n626\n00:32:24,770 --> 00:32:27,980\nthat guest if it keeps\njumping around on hosts?\n\n627\n00:32:27,980 --> 00:32:32,360\nWell with the DV switch,\nit doesn't matter which host the VM is on.\n\n628\n00:32:32,360 --> 00:32:37,300\nThe guest traffic will be reported based\non the distributed virtual switch,\n\n629\n00:32:37,300 --> 00:32:38,220\nthe DV switch.\n\n630\n00:32:38,220 --> 00:32:40,390\nSo it won't matter what host it's on.\n\n631\n00:32:40,390 --> 00:32:43,734\nSo you get consistent reporting and\nconsistent configuration.\n\n632\n00:32:43,734 --> 00:32:47,624\nSo in a cluster you typically\ndo wanna use a DV switch.\n\n633\n00:32:47,624 --> 00:32:50,658\nAll right, now mine's gonna be really\nsmall so I'm not gonna worry so\n\n634\n00:32:50,658 --> 00:32:51,440\nmuch about that.\n\n635\n00:32:51,440 --> 00:32:53,360\nI'll just use my regular vSwitches.\n\n636\n00:32:53,360 --> 00:32:57,690\nBut I do want a dedicated NIC for\nmy vMotion, all right?\n\n637\n00:32:57,690 --> 00:33:01,310\nSo, you basically just go in to\nyour server with your host, and\n\n638\n00:33:01,310 --> 00:33:05,420\nyou'll have to do this on each of\nthe host and you'll go under Manage and\n\n639\n00:33:05,420 --> 00:33:09,020\nNetworking, and in here you're\ngonna see your virtual switches.\n\n640\n00:33:09,020 --> 00:33:12,195\nAnd basically you're gonna\nadd a new virtual switch.\n\n641\n00:33:12,195 --> 00:33:14,690\nIt's gonna be setup just for the motion.\n\n642\n00:33:14,690 --> 00:33:16,240\nSo you can see where\nI've already done that.\n\n643\n00:33:16,240 --> 00:33:19,190\nI've got switch 0, that's the one\nthat was created by my installer.\n\n644\n00:33:19,190 --> 00:33:22,900\nAnd you can see it's got my management\nnetwork, my VM network, and\n\n645\n00:33:22,900 --> 00:33:24,810\nmy first physical adapter.\n\n646\n00:33:24,810 --> 00:33:29,220\nBut I've put a gigabit adapter in there,\nthat I'm gonna just use for vMotion.\n\n647\n00:33:29,220 --> 00:33:35,090\nSo I added another switch, and\nI've attached that gigabit card to it.\n\n648\n00:33:35,090 --> 00:33:38,290\nI added a VMkernel interface.\n\n649\n00:33:38,290 --> 00:33:39,580\nThat's the important part there.\n\n650\n00:33:39,580 --> 00:33:42,170\nThis is not a regular\nvirtual machine network.\n\n651\n00:33:42,170 --> 00:33:43,843\nIt's got to be the VMkernel one.\n\n652\n00:33:43,843 --> 00:33:44,958\nSo when you go up here to add,\n\n653\n00:33:44,958 --> 00:33:47,240\nyou're actually adding a VMkernel adapter,\nall right?\n\n654\n00:33:48,430 --> 00:33:51,916\nAnd when you add the VMkernel\nadapter you get that option to\n\n655\n00:33:51,916 --> 00:33:55,360\nspecify what VMkernel\ntraffic it's gonna carry.\n\n656\n00:33:55,360 --> 00:33:59,070\nAnd, let's see,\nI think I see it right here, yeah.\n\n657\n00:33:59,070 --> 00:34:00,440\nActually, no, we don't see it.\n\n658\n00:34:00,440 --> 00:34:01,090\nIt's too late now.\n\n659\n00:34:01,090 --> 00:34:04,110\nI guess I've already created it,\nso it's not gonna show it to me.\n\n660\n00:34:04,110 --> 00:34:06,780\nWell here, you know what,\nI'll pretend like I'm adding a new one.\n\n661\n00:34:06,780 --> 00:34:11,680\nIf I go up here to VMkernal Adapters and\nI go to add one in, right?\n\n662\n00:34:11,680 --> 00:34:14,520\nI'm gonna tell it that I'm doing\na VMkernal network adapter.\n\n663\n00:34:14,520 --> 00:34:18,050\nNot a physical or a virtual machine\nport group, just a kernel adapter.\n\n664\n00:34:19,060 --> 00:34:22,720\nAnd in here we specify whether\nit's gonna be a new switch.\n\n665\n00:34:22,720 --> 00:34:24,500\nAnd I went with an entirely new switch.\n\n666\n00:34:25,982 --> 00:34:28,650\nAll right, and\nthen I assign a physical adapter to it.\n\n667\n00:34:28,650 --> 00:34:33,890\nNow i don't have one to assign,\nlet's see if it'll let me move pass that.\n\n668\n00:34:33,890 --> 00:34:38,610\nIt's on this screen that we pick which\nservices that we want to enable, and\n\n669\n00:34:38,610 --> 00:34:40,540\nyou'll see vMotion right there.\n\n670\n00:34:40,540 --> 00:34:42,890\nSo when I added that\nswitch before the show,\n\n671\n00:34:42,890 --> 00:34:45,730\nthat's the only thing that I checked,\nwas just vMotion.\n\n672\n00:34:45,730 --> 00:34:49,740\nI only wanted vMotion traffic\nacross this NIC, all right?\n\n673\n00:34:49,740 --> 00:34:53,370\nNow if you're gonna do Fault Tolerance,\nyou'll need that turned on also.\n\n674\n00:34:53,370 --> 00:34:55,140\nSo that's gonna enable FT.\n\n675\n00:34:55,140 --> 00:35:00,520\nHA and DRS don't need these,\nbut FT and vMotion do.\n\n676\n00:35:00,520 --> 00:35:04,850\nNow, fault tolerance logging,\nit's actually pretty intensive also,\n\n677\n00:35:04,850 --> 00:35:06,820\ncuz it's maintaining a shadow VM.\n\n678\n00:35:06,820 --> 00:35:10,400\nSo you want to have a dedicated NIC for\nhandling that too.\n\n679\n00:35:10,400 --> 00:35:12,910\nYou can use the same NIC if you want but\n\n680\n00:35:12,910 --> 00:35:16,735\nnow your shadow traffic is gonna be\ncompeting with vMotion activities.\n\n681\n00:35:16,735 --> 00:35:20,950\nBut vMotion activities, they don't happen\nall the time, unless you're using DRS,\n\n682\n00:35:20,950 --> 00:35:23,890\nif you're using DRS they happen all\nthe time as it moves VMs around.\n\n683\n00:35:23,890 --> 00:35:27,816\nBut if you're not using DRS, vMotion\nonly happens when a failure happens.\n\n684\n00:35:27,816 --> 00:35:32,983\nBut fault tolerance, mirroring that shadow\nimage, that's happening all the time.\n\n685\n00:35:32,983 --> 00:35:35,440\nYou've just got to\nmaintain a constant image.\n\n686\n00:35:35,440 --> 00:35:39,020\nSo, you typically want a separate NIC for\nfault tolerance also.\n\n687\n00:35:40,530 --> 00:35:44,728\nAll right, so that's what I did here\nwhen I look at my virtual switches.\n\n688\n00:35:44,728 --> 00:35:49,199\nI've got a vSwitch1 here\nwhich is got a VMkernel\n\n689\n00:35:49,199 --> 00:35:52,913\nadapter that is just set up for vMotion.\n\n690\n00:35:52,913 --> 00:35:55,165\nAll right, and\nI did the same thing on Server4.\n\n691\n00:35:55,165 --> 00:35:56,106\nSo it's got the same.\n\n692\n00:35:56,106 --> 00:36:00,770\nIt's a vSwitch1 just for\nvMotion, all right?\n\n693\n00:36:01,795 --> 00:36:06,605\nSo once we've got that in place,\nnow we're good to go, all right?\n\n694\n00:36:06,605 --> 00:36:10,415\nWe need our virtual machines to be\nstored in shared storage somewhere.\n\n695\n00:36:10,415 --> 00:36:13,045\nAnd I've got that, so\nI've got a couple of virtual machines.\n\n696\n00:36:13,045 --> 00:36:15,080\nLet me pull up my VMs here.\n\n697\n00:36:15,080 --> 00:36:18,500\nSo I've got appweb1, web2, and web3.\n\n698\n00:36:18,500 --> 00:36:21,070\nSo I've got these three web servers\nright here that I want to be in\n\n699\n00:36:21,070 --> 00:36:21,658\na cluster, all right?\n\n700\n00:36:21,658 --> 00:36:26,338\nI need their storage to be\nin shared storage, right,\n\n701\n00:36:26,338 --> 00:36:29,672\nnot local storage on a single server.\n\n702\n00:36:29,672 --> 00:36:33,177\nSo I didn't want us to sit here and\nwatch a status bar move all show.\n\n703\n00:36:33,177 --> 00:36:35,500\nSo I went ahead and\nmoved their storage already.\n\n704\n00:36:35,500 --> 00:36:41,984\nSo if you don't know it already,\nyou can just right-click on a guest and\n\n705\n00:36:41,984 --> 00:36:48,700\nin the menu that eventually comes up,\nthere we go, you can choose Move To.\n\n706\n00:36:48,700 --> 00:36:51,219\nAnd that's how we can\neasily move their storage.\n\n707\n00:36:51,219 --> 00:36:53,239\nAnd so\nyou can move them to somewhere else.\n\n708\n00:36:53,239 --> 00:36:56,153\nAnd so I can go into my storage and\nI can pick.\n\n709\n00:36:56,153 --> 00:36:59,810\nAnd so I've sent them over to\none of my shared data stores.\n\n710\n00:36:59,810 --> 00:37:02,860\nThey were in some of\nthe local data stores, but\n\n711\n00:37:02,860 --> 00:37:04,940\nvMotion doesn't work when\nthey're in a local data store.\n\n712\n00:37:04,940 --> 00:37:06,053\nIt's gotta be in shared storage.\n\n713\n00:37:06,053 --> 00:37:07,423\nSo that's what I've got.\n\n714\n00:37:09,629 --> 00:37:15,760\nAll right, so the next thing I need to do\nis actually cluster my hosts together.\n\n715\n00:37:15,760 --> 00:37:17,080\nAnd that's really easy.\n\n716\n00:37:17,080 --> 00:37:19,410\nHere in vCenter,\nI'm just gonna go up to clusters.\n\n717\n00:37:21,330 --> 00:37:22,990\nAnd then I'll hit Add a New Cluster.\n\n718\n00:37:25,340 --> 00:37:27,480\nAll right, when we go to add it,\nwe give it a name.\n\n719\n00:37:27,480 --> 00:37:31,242\nAnd you normally name it based on\nsomething, a geographic location,\n\n720\n00:37:31,242 --> 00:37:33,997\nservers involved,\nits purpose, whatever it is.\n\n721\n00:37:33,997 --> 00:37:39,464\nI'll just call this my ITProTV cluster,\nall right?\n\n722\n00:37:39,464 --> 00:37:43,960\nAnd it's got the options\nto turn on DRS and HA.\n\n723\n00:37:43,960 --> 00:37:45,770\nI'm not gonna turn them on right now.\n\n724\n00:37:45,770 --> 00:37:47,280\nI wanna turn them on manually later.\n\n725\n00:37:47,280 --> 00:37:49,120\nBut if you want you could just\ncheck them off right here and\n\n726\n00:37:49,120 --> 00:37:51,260\nit will turn them on automatically.\n\n727\n00:37:51,260 --> 00:37:55,310\nEVC is another one and I'm gonna\ntalk about it a little bit later.\n\n728\n00:37:55,310 --> 00:37:57,796\nThat's an enhancement to vMotion and so\n\n729\n00:37:57,796 --> 00:38:01,680\nwe'll see that it's EVC is\nenhanced vMotion compatibility.\n\n730\n00:38:01,680 --> 00:38:03,020\nLet me make sure that's it.\n\n731\n00:38:03,020 --> 00:38:06,807\nYeah, enhanced vMotion compatibility which\nis something we'll talk about a little\n\n732\n00:38:06,807 --> 00:38:07,340\nbit later.\n\n733\n00:38:08,490 --> 00:38:10,710\nAll right so I'm gonna go ahead and\njust specify that cluster.\n\n734\n00:38:12,430 --> 00:38:14,100\nAnd oh, I didn't specify location.\n\n735\n00:38:14,100 --> 00:38:15,260\nProbably need to do that.\n\n736\n00:38:15,260 --> 00:38:17,093\nSo I need to tell it where\nthe cluster resides,\n\n737\n00:38:17,093 --> 00:38:18,511\nat which data center it resides in.\n\n738\n00:38:18,511 --> 00:38:21,017\nSo I've just got the one, ITProTV lab.\n\n739\n00:38:21,017 --> 00:38:24,480\nAll right, there we go.\n\n740\n00:38:24,480 --> 00:38:25,575\nAnd I'll just hit OK.\n\n741\n00:38:27,040 --> 00:38:28,710\nAll right,\nthat's gonna create the cluster.\n\n742\n00:38:28,710 --> 00:38:29,780\nSo I'm done, right?\n\n743\n00:38:29,780 --> 00:38:31,170\nWell, not quite.\n\n744\n00:38:31,170 --> 00:38:33,620\nIt creates the cluster but\nthe cluster is empty.\n\n745\n00:38:33,620 --> 00:38:36,674\nIt's not gonna do us any good\nuntil we put some hosts in it and\n\n746\n00:38:36,674 --> 00:38:39,610\nwe put some virtual machines in it,\nall right?\n\n747\n00:38:39,610 --> 00:38:44,630\nSo, I'm gonna click on my ITProTV cluster,\nall right?\n\n748\n00:38:44,630 --> 00:38:49,220\nAnd you can see in here that\nif I go to related objects and\n\n749\n00:38:49,220 --> 00:38:53,190\nhosts, that it's empty,\nthere's no hosts in here, all right?\n\n750\n00:38:53,190 --> 00:38:55,560\nAnd you've got the Add\na Host button right here.\n\n751\n00:38:55,560 --> 00:39:00,050\nWe can add a new host if we're bringing\none directly into the cluster.\n\n752\n00:39:00,050 --> 00:39:01,812\nBut for me server3 and server4,\n\n753\n00:39:01,812 --> 00:39:04,760\nI'm already managing them\nas independent servers.\n\n754\n00:39:04,760 --> 00:39:06,110\nSo I'm not adding new ones.\n\n755\n00:39:06,110 --> 00:39:09,240\nI need to move existing ones in here.\n\n756\n00:39:09,240 --> 00:39:11,280\nSo I'm gonna go back\nout to my host screen.\n\n757\n00:39:14,500 --> 00:39:19,197\nAll right, and\nI'm gonna take server3 and server4.\n\n758\n00:39:19,197 --> 00:39:22,681\nAnd we'll just right-click on those guys,\nand choose Move To.\n\n759\n00:39:22,681 --> 00:39:25,466\nI'm gonna move them\nright into that cluster.\n\n760\n00:39:25,466 --> 00:39:27,480\nSo we'll just say, Yes.\n\n761\n00:39:27,480 --> 00:39:31,310\nAnd as I navigate into here,\nI can see my cluster right there.\n\n762\n00:39:31,310 --> 00:39:33,950\nIf you had other data centers,\nthey would show up in here also.\n\n763\n00:39:33,950 --> 00:39:37,179\nBut for me, I've just got the one.\n\n764\n00:39:38,817 --> 00:39:43,480\nAll right, so now my OK button\nis barely on the screen there.\n\n765\n00:39:44,510 --> 00:39:46,917\nThere we go.\nSo now it's gonna move those hosts into\n\n766\n00:39:46,917 --> 00:39:47,763\nthat cluster.\n\n767\n00:39:47,763 --> 00:39:50,445\nNow when it's done, see I've got my\nlittle status bar over here working.\n\n768\n00:39:50,445 --> 00:39:53,010\nWhen it's done This screen is not\ngoing to look much different.\n\n769\n00:39:53,010 --> 00:39:54,044\nThey're still hosts.\n\n770\n00:39:54,044 --> 00:39:55,205\nI'm still managing them.\n\n771\n00:39:55,205 --> 00:39:56,590\nRight?\n\n772\n00:39:56,590 --> 00:39:58,200\nBut over here under the cluster column,\n\n773\n00:39:58,200 --> 00:40:01,950\nI can see they are now a part\nof the ITP Pro TV cluster.\n\n774\n00:40:01,950 --> 00:40:02,750\nAll right?\n\n775\n00:40:02,750 --> 00:40:06,240\nI've got shared storage that these\nguys are both connected to, and\n\n776\n00:40:06,240 --> 00:40:08,310\nnow they know that they're in a cluster.\n\n777\n00:40:08,310 --> 00:40:09,940\nThey know they need to\nstart watching each other.\n\n778\n00:40:09,940 --> 00:40:12,800\nThey need to start watching each\nother to see if one person fails.\n\n779\n00:40:12,800 --> 00:40:15,680\nThey need to be ready to exchange\ninformation between each other.\n\n780\n00:40:17,350 --> 00:40:19,790\nAll right.\nNow, vMotion.\n\n781\n00:40:19,790 --> 00:40:24,630\nIt will actually work between\nhosts that are not in a cluster.\n\n782\n00:40:24,630 --> 00:40:28,000\nI don't have to put them in\na cluster if I don't want to.\n\n783\n00:40:28,000 --> 00:40:31,730\nYou can have vMotion configured to\nmove VMs between physical, separate,\n\n784\n00:40:31,730 --> 00:40:33,230\nindependent systems.\n\n785\n00:40:33,230 --> 00:40:35,100\nThing is,\nyou still have to have a shared storage.\n\n786\n00:40:35,100 --> 00:40:36,280\nYou gotta have that.\n\n787\n00:40:36,280 --> 00:40:40,080\nAnd then the other thing is, they don't\nreally watch each other at that point, so\n\n788\n00:40:40,080 --> 00:40:43,450\nit would be manual vMotion,\nwe go in and tell VM's when to move and\n\n789\n00:40:43,450 --> 00:40:47,100\nthere's some authentication issues that\nyou can bump into between the two hosts.\n\n790\n00:40:47,100 --> 00:40:50,760\nWhen we cluster them together, they're\nhappier and they'll communicate properly.\n\n791\n00:40:50,760 --> 00:40:53,140\nWe'll see some balancing\noptions we can configure and\n\n792\n00:40:53,140 --> 00:40:55,430\nit makes monitoring a lot easier.\n\n793\n00:40:55,430 --> 00:40:58,740\nYou lose that monitoring piece when you do\nvMotion between just independent hosts.\n\n794\n00:41:00,240 --> 00:41:03,210\nAlright, so I've got these guys clustered,\nnow I'm done.\n\n795\n00:41:03,210 --> 00:41:05,876\nNow I've got a cluster\nthat's got two hosts in it.\n\n796\n00:41:05,876 --> 00:41:09,060\nBut the cluster's not gonna be very\nexciting until I put some virtual\n\n797\n00:41:09,060 --> 00:41:10,322\nmachines in there.\n\n798\n00:41:10,322 --> 00:41:14,240\nAll right, now I could just go and start\nto create new virtual machines in there.\n\n799\n00:41:14,240 --> 00:41:18,400\nSo if I go back to vCenter,\nand I go to clusters, and\n\n800\n00:41:18,400 --> 00:41:24,730\nI pick my cluster, I can go into\nrelated objects and virtual machines.\n\n801\n00:41:24,730 --> 00:41:27,820\nAnd so here I see the virtual\nmachines that are in the cluster and\n\n802\n00:41:27,820 --> 00:41:31,040\nwe can start to add in new virtual\nmachines to get them created.\n\n803\n00:41:31,040 --> 00:41:34,140\nWhen we create a new VM we'll have this\ncluster as a location we can deposit to.\n\n804\n00:41:35,520 --> 00:41:37,890\nBut I've already got my virtual machines.\n\n805\n00:41:37,890 --> 00:41:40,240\nI just need to move them into the cluster.\n\n806\n00:41:40,240 --> 00:41:43,090\nNow, if the virtual machines\nare not on shared storage,\n\n807\n00:41:43,090 --> 00:41:44,490\nwhen I move them into the cluster,\n\n808\n00:41:44,490 --> 00:41:48,820\nI'll need to move their configuration,\nas well as their virtual hard drives.\n\n809\n00:41:48,820 --> 00:41:51,160\nI'll need to move the VMs\ninto the cluster, and\n\n810\n00:41:51,160 --> 00:41:53,760\ntheir storage into shared storage.\n\n811\n00:41:53,760 --> 00:41:56,400\nBut if they're already on\nshared storage like mine, and\n\n812\n00:41:56,400 --> 00:41:58,080\nall we have to do is\nmove the configuration.\n\n813\n00:41:58,080 --> 00:42:00,710\nSo it actually doesn't\ntake very long at all.\n\n814\n00:42:00,710 --> 00:42:03,610\nWe can go back up to our hosts.\n\n815\n00:42:03,610 --> 00:42:04,290\nSorry, not our hosts.\n\n816\n00:42:04,290 --> 00:42:05,180\nOur virtual machines.\n\n817\n00:42:05,180 --> 00:42:07,160\nI had to get to the right screen here.\n\n818\n00:42:07,160 --> 00:42:09,040\nI'll go to my virtual machines.\n\n819\n00:42:09,040 --> 00:42:11,710\nAnd I can pick whoever it is I\nwanna move into the cluster.\n\n820\n00:42:11,710 --> 00:42:15,200\nI wanna move web one through web three.\n\n821\n00:42:15,200 --> 00:42:17,690\nI've got them all powered off right now.\n\n822\n00:42:17,690 --> 00:42:21,060\nWhen you are moving VMs like this\nbetween non-clustered and clustered,\n\n823\n00:42:21,060 --> 00:42:22,790\nit's usually a good idea\nto have them powered off.\n\n824\n00:42:24,600 --> 00:42:28,010\nI'm just going to right click on\nthose guys and I'll choose move to.\n\n825\n00:42:29,560 --> 00:42:33,150\nAnd when we move them, it's gonna\nask me where I wanna move them to.\n\n826\n00:42:33,150 --> 00:42:37,030\nAnd what we'll see\nare the Hosting Clusters folder and\n\n827\n00:42:37,030 --> 00:42:42,070\nI can pick, Other Hosts or the cluster.\n\n828\n00:42:42,070 --> 00:42:42,910\nAnd that's what I want.\n\n829\n00:42:42,910 --> 00:42:44,827\nI wanna move them to my ITProTV cluster.\n\n830\n00:42:48,545 --> 00:42:49,148\nAll right?\n\n831\n00:42:49,148 --> 00:42:52,330\nNow when it goes to move them\nit's gonna ask me what I'm doing.\n\n832\n00:42:52,330 --> 00:42:57,330\nDo I want to change just the host that\nthey run on, just their data store,\n\n833\n00:42:57,330 --> 00:42:58,610\nor both?\n\n834\n00:42:58,610 --> 00:43:01,430\nIf they're not on shared storage,\nI'll need to do both.\n\n835\n00:43:01,430 --> 00:43:04,050\nI'll need to move the host and\nthe data store.\n\n836\n00:43:04,050 --> 00:43:06,130\nSo I've got to switch\ntheir configuration and\n\n837\n00:43:06,130 --> 00:43:10,180\ntheir virtual hard drives over to the\nclustered environment and shared storage.\n\n838\n00:43:10,180 --> 00:43:12,420\nBut since mine are already\non the shared storage,\n\n839\n00:43:12,420 --> 00:43:14,560\nI can just choose to change the host.\n\n840\n00:43:14,560 --> 00:43:17,840\nThe storage is already stored in\na place where all of the cluster\n\n841\n00:43:17,840 --> 00:43:19,640\nnodes have access to it.\n\n842\n00:43:19,640 --> 00:43:22,460\nSo I'll choose change host, and hit next,\n\n843\n00:43:22,460 --> 00:43:26,350\nand it's gonna ask where we're gonna move\nit, so I want to move it into the cluster.\n\n844\n00:43:28,120 --> 00:43:30,280\nAnd so it's just kind of loading that,\nso here it is.\n\n845\n00:43:30,280 --> 00:43:33,060\nSee how it says select the cluster,\nhost, resource pool or whatever?\n\n846\n00:43:33,060 --> 00:43:34,510\nI am going with the cluster.\n\n847\n00:43:36,770 --> 00:43:37,290\nAll right.\n\n848\n00:43:37,290 --> 00:43:40,070\nNow, notice I didn't\npick a specific server.\n\n849\n00:43:40,070 --> 00:43:43,840\nI'm gonna talk later about\nsomething called affinity.\n\n850\n00:43:43,840 --> 00:43:49,400\nYou can set a virtual machine to prefer\none particular host over another.\n\n851\n00:43:49,400 --> 00:43:51,870\nIf you pick a server here,\nthat's what you're doing.\n\n852\n00:43:51,870 --> 00:43:54,460\nYou're picking somebody\nto have affinity towards.\n\n853\n00:43:54,460 --> 00:43:55,070\nRight?\n\n854\n00:43:55,070 --> 00:43:57,650\nBut in a cluster,\nwe don't need that necessarily.\n\n855\n00:43:57,650 --> 00:44:01,900\nSo we just pick the cluster itself,\nnot an individual server, so\n\n856\n00:44:01,900 --> 00:44:06,140\nthat it'll boot off of any of\nthe servers that are in that cluster.\n\n857\n00:44:06,140 --> 00:44:08,910\nNow we can still set up affinity and\nmake it prefer things.\n\n858\n00:44:08,910 --> 00:44:11,000\nBut by default,\nthey don't care what host they run on.\n\n859\n00:44:11,000 --> 00:44:15,840\nThey'll boot off of any host that's in\nITProTV cluster, and we can add and\n\n860\n00:44:15,840 --> 00:44:18,540\nremove hosts from that\ncluster over time and\n\n861\n00:44:18,540 --> 00:44:20,640\nthe virtual machines automatically\nuse that one available.\n\n862\n00:44:20,640 --> 00:44:24,820\nAll right, so\nhere it is showing ESX server 3 and 4, and\n\n863\n00:44:24,820 --> 00:44:28,010\nI'll go ahead and get those moved over, oh\n\n864\n00:44:28,010 --> 00:44:31,644\nit is asking me to pick at least one host\nto communicate with so I'll pick server 3.\n\n865\n00:44:32,990 --> 00:44:33,562\nAnd we'll send that over.\n\n866\n00:44:35,303 --> 00:44:36,302\nAll right, so there we go.\n\n867\n00:44:36,302 --> 00:44:39,550\nWe'll finish that up, and\nnow it's gonna do the move.\n\n868\n00:44:39,550 --> 00:44:42,450\nIf you're moving your virtual hard drives,\nthis is gonna take a while.\n\n869\n00:44:42,450 --> 00:44:43,150\nRight?\nCuz it's gotta\n\n870\n00:44:43,150 --> 00:44:46,660\ncopy all that data over to shared\nstorage and then move the configs.\n\n871\n00:44:46,660 --> 00:44:47,550\nBut if you're doing like me and\n\n872\n00:44:47,550 --> 00:44:50,428\njust moving the hosts,\nit doesn't take very long at all.\n\n873\n00:44:50,428 --> 00:44:52,690\nSo it's gonna move through,\nit's already done web three,\n\n874\n00:44:52,690 --> 00:44:55,210\nit's finishing up web one and\ntwo, there we go.\n\n875\n00:44:55,210 --> 00:44:58,550\nSo all three of these VM's\nare now inside of my cluster.\n\n876\n00:45:00,010 --> 00:45:04,050\nIf I jump back over to the cluster,\nnow I get a little bit of excitement.\n\n877\n00:45:04,050 --> 00:45:07,580\nNow when I go into the cluster,\nhere's my ITProTV cluster.\n\n878\n00:45:08,670 --> 00:45:13,430\nIf I go to my hosts,\nI see I've got two hosts in here.\n\n879\n00:45:13,430 --> 00:45:17,757\nAnd if I go to my virtual machines, I'll\nsee the three VMs right there, all right?\n\n880\n00:45:17,757 --> 00:45:18,721\nI'm gonna power one of them on.\n\n881\n00:45:18,721 --> 00:45:21,438\nI'm gonna power APP-WEB1 on.\n\n882\n00:45:21,438 --> 00:45:23,930\nAnd these three,\nthey're all just running Linux.\n\n883\n00:45:23,930 --> 00:45:27,920\nI think it's actually CentOS\nthat's installed on them.\n\n884\n00:45:27,920 --> 00:45:30,850\nSo I'll just fire one of those guys up and\nstart to work with it.\n\n885\n00:45:30,850 --> 00:45:35,460\nNow, when these VM's fire up,\nwhich hosts are they gonna fire up on?\n\n886\n00:45:35,460 --> 00:45:38,110\nIt could be either one.\n\n887\n00:45:38,110 --> 00:45:42,130\nIt depends on what nodes of the cluster\nare actually available and online.\n\n888\n00:45:43,240 --> 00:45:46,729\nServer 3 is the first on on the list, so\nit's probably gonna jump over to server 3,\n\n889\n00:45:46,729 --> 00:45:48,518\njust kind of the order they're listed in.\n\n890\n00:45:48,518 --> 00:45:52,665\nBut if server 3 is not online, it'll just\nbounce over to server 4 and that's that,\n\n891\n00:45:52,665 --> 00:45:55,672\nright, so that's kind of nice,\neasy functionality there.\n\n892\n00:45:55,672 --> 00:45:58,530\nSo it's going to fire up and\ndo that right now.\n\n893\n00:45:58,530 --> 00:46:00,060\nAll right, let me fire up this console,\n\n894\n00:46:00,060 --> 00:46:02,087\nI need to find out what it's\nIP address is real quick.\n\n895\n00:46:04,354 --> 00:46:05,502\nLet's see what it gets.\n\n896\n00:46:09,496 --> 00:46:14,015\nNow as far as vMotion itself, vMotion\nis not something I have to turn on,\n\n897\n00:46:14,015 --> 00:46:16,270\nit's automatically there.\n\n898\n00:46:16,270 --> 00:46:19,410\nVMotion is present whenever you have\na virtual machine that's stored\n\n899\n00:46:19,410 --> 00:46:20,680\non shared storage like this.\n\n900\n00:46:20,680 --> 00:46:23,815\nSo we can go in and move the virtual\nmachine around however we want.\n\n901\n00:46:23,815 --> 00:46:26,440\nThere's really not anything else\nwe need to configure for that.\n\n902\n00:46:26,440 --> 00:46:31,410\nBut what I wanna do is I wanna get login\nto this machine real quick, just so\n\n903\n00:46:31,410 --> 00:46:34,070\nI can show you something, all right.\n\n904\n00:46:34,070 --> 00:46:40,270\nThis is one is 10.1.230.26.\n\n905\n00:46:40,270 --> 00:46:42,250\nI'm gonna start a ping.\n\n906\n00:46:42,250 --> 00:46:48,790\n10.1.230.26, all right.\n\n907\n00:46:48,790 --> 00:46:54,430\nThis is a continual ping to that\nvirtual machine, all right?\n\n908\n00:46:54,430 --> 00:46:56,200\nI'm pinging app web one.\n\n909\n00:46:56,200 --> 00:47:01,420\nNow app web one, if I go and\ntake a look at it, here's app web one,\n\n910\n00:47:01,420 --> 00:47:06,120\nand if I go to its related objects,\nlet's see, actually, you know what?\n\n911\n00:47:06,120 --> 00:47:09,110\nThat's not going to tell me what I need,\nif I go back to my servers.\n\n912\n00:47:16,360 --> 00:47:19,210\nActually I want my hosts,\nI'll go to my hosts in server 3,\n\n913\n00:47:19,210 --> 00:47:20,490\nI'm going to look at my related objects,\n\n914\n00:47:20,490 --> 00:47:24,630\nI want to figure out where that\nvirtual machine is residing right now.\n\n915\n00:47:24,630 --> 00:47:27,740\nSo if I go in here, and\nI take a look at server 3.\n\n916\n00:47:27,740 --> 00:47:31,097\nApp Web 1 right now is powered on and\nrunning from server 3.\n\n917\n00:47:31,097 --> 00:47:35,350\nOkay, so that's where it's residing,\nand it's up and it's healthy.\n\n918\n00:47:35,350 --> 00:47:37,610\nOkay, I'm able to log into it,\nI'm able to ping it.\n\n919\n00:47:37,610 --> 00:47:39,450\nSo it's out there on the network.\n\n920\n00:47:39,450 --> 00:47:41,730\nI know that I'm gonna do some\nmaintenance on server 3.\n\n921\n00:47:41,730 --> 00:47:45,560\nI need to take server 3 offline to apply\nsome hot fixes and other updates to it.\n\n922\n00:47:45,560 --> 00:47:48,602\nSo I need to move the virtual\nmachines off of server 3.\n\n923\n00:47:48,602 --> 00:47:52,654\nWell, Web 2 and Web 3, these guys,\nthey're not even powered on.\n\n924\n00:47:52,654 --> 00:47:55,875\nAnd since they're not powered on,\nI don't have to worry about them,\n\n925\n00:47:55,875 --> 00:47:58,190\nI'm not gonna effect my network.\n\n926\n00:47:58,190 --> 00:48:01,560\nBut Web 1, Web 1 is powered on.\n\n927\n00:48:01,560 --> 00:48:06,260\nSo, if I wanna move it over to Server 4,\nI could shut it down, and\n\n928\n00:48:06,260 --> 00:48:11,000\nonce it's shut down, I can choose to start\nit, and I can start it on the other host,\n\n929\n00:48:11,000 --> 00:48:13,310\non Server 4 if I want, right?\n\n930\n00:48:13,310 --> 00:48:16,790\nSo if I want to go that route I can,\nbut with a system that's already on,\n\n931\n00:48:16,790 --> 00:48:19,290\nI don't want to interfere\nwith my end users.\n\n932\n00:48:19,290 --> 00:48:23,110\nSo what we can do is we can migrate it.\n\n933\n00:48:23,110 --> 00:48:26,860\nWhen you have a virtual machine like this,\nlike App-web1,\n\n934\n00:48:26,860 --> 00:48:31,910\nearlier I did a right-click on it,\nand I went to Move, right?\n\n935\n00:48:31,910 --> 00:48:34,240\nI wanted to move it to another system.\n\n936\n00:48:34,240 --> 00:48:37,800\nBut for vMotion,\nwhat we do is we choose to migrate it.\n\n937\n00:48:37,800 --> 00:48:40,540\nMigrate says leave it on,\nleave it running,\n\n938\n00:48:40,540 --> 00:48:44,960\ndon't take it offline, and\nmove it from one host to another.\n\n939\n00:48:44,960 --> 00:48:47,060\nSo I'm gonna choose to migrate.\n\n940\n00:48:47,060 --> 00:48:49,830\nAnd when you go to Migrate you can\npick what it is you're migrating.\n\n941\n00:48:49,830 --> 00:48:54,466\nAnd a little bit later I'll talk about,\nthere's actually a vMotion for\n\n942\n00:48:54,466 --> 00:48:59,150\nstorage also so you can live migrate\nyour virtual disks if you want.\n\n943\n00:48:59,150 --> 00:49:01,070\nBut for right now I'm just doing the host,\n\n944\n00:49:01,070 --> 00:49:04,260\nmoving that virtual machine\nover to another host.\n\n945\n00:49:04,260 --> 00:49:06,910\nSo I'll go ahead and hit Next,\nand it's gonna come up and\n\n946\n00:49:06,910 --> 00:49:09,190\nit's gonna show where I can move it to.\n\n947\n00:49:09,190 --> 00:49:12,540\nI'm staying in my cluster, right, I don't\nwant to take it out of the cluster.\n\n948\n00:49:12,540 --> 00:49:14,700\nAnd I'm on Server 3 right now.\n\n949\n00:49:14,700 --> 00:49:17,490\nI want to migrate it over to Server 4.\n\n950\n00:49:17,490 --> 00:49:20,640\nSo I'll go ahead and\njust choose Server 4 and hit Next.\n\n951\n00:49:20,640 --> 00:49:26,010\nAnd it's gonna ask about what we do so\nwe can keep it kind of on and running.\n\n952\n00:49:26,010 --> 00:49:28,810\nAnd it's just letting me know\nhere that it's gonna try and\n\n953\n00:49:28,810 --> 00:49:32,160\nreserve CPU for doing vMotion.\n\n954\n00:49:32,160 --> 00:49:34,200\nThere's two ways to do this.\n\n955\n00:49:34,200 --> 00:49:38,700\nOne way is to say vMotion\nis my number one priority.\n\n956\n00:49:38,700 --> 00:49:43,100\nSlow the host down and\ndo as much vMotion as you can to\n\n957\n00:49:43,100 --> 00:49:46,520\nmove this machine as quickly and\nreliably as possible.\n\n958\n00:49:46,520 --> 00:49:49,960\nIf I'm in a hurry,\nif I know that Server 3 is failing and\n\n959\n00:49:49,960 --> 00:49:54,470\nI need to get the VMs off as fast as I\ncan, this is what I want, reserve CPU.\n\n960\n00:49:54,470 --> 00:49:56,750\nBut it is gonna affect\nperformance of the VMs.\n\n961\n00:49:56,750 --> 00:49:57,630\nI mentioned that earlier.\n\n962\n00:49:57,630 --> 00:50:00,770\nIt's gonna slow the VMs down\na little bit while this happens.\n\n963\n00:50:00,770 --> 00:50:04,310\nThe other option though,\nis not to do the reservation.\n\n964\n00:50:04,310 --> 00:50:07,210\nJust perform it with\nthe available CPU resources.\n\n965\n00:50:07,210 --> 00:50:10,970\nWhat this is gonna do is it's gonna\nmake the flip over take longer, but\n\n966\n00:50:10,970 --> 00:50:13,030\nit's gonna impact my VMs less.\n\n967\n00:50:13,030 --> 00:50:17,960\nSo my virtual machines will continue\nrunning at more normal speeds, but\n\n968\n00:50:17,960 --> 00:50:19,780\nthe transition might take longer.\n\n969\n00:50:19,780 --> 00:50:23,400\nIn my scenario, where my servers\nare basically empty, if I choose this one,\n\n970\n00:50:23,400 --> 00:50:25,510\nthe failover should happen\nin less than a minute.\n\n971\n00:50:25,510 --> 00:50:30,204\nBut if I choose to perform with available\nCPU resources, it might take five minutes\n\n972\n00:50:30,204 --> 00:50:33,410\nor ten minutes to do the flip over\ncuz it's just doing it when it can.\n\n973\n00:50:33,410 --> 00:50:37,480\nIn a heavy production environment,\nit might make your failover take an hour.\n\n974\n00:50:37,480 --> 00:50:40,830\nIt could take a long time to get to that\npoint where everything's synchronized and\n\n975\n00:50:40,830 --> 00:50:42,110\nit's ready to flip over.\n\n976\n00:50:42,110 --> 00:50:45,270\nBut if you're not in a hurry,\nit'll create less impact on your users.\n\n977\n00:50:45,270 --> 00:50:46,996\nSo that's what it's asking me about here.\n\n978\n00:50:46,996 --> 00:50:51,090\nSince I'm in a hurry, I'm gonna go\nahead and choose to reserve CPU,\n\n979\n00:50:51,090 --> 00:50:52,371\nfocus in on vMotion.\n\n980\n00:50:54,163 --> 00:50:56,900\nAll right, so now I hit Next and\nI'll hit Finish.\n\n981\n00:50:56,900 --> 00:51:00,610\nAnd now it's migrating that\nguest over to the other host.\n\n982\n00:51:00,610 --> 00:51:03,026\nAnd while it's doing that,\nI wanna bring this ping up.\n\n983\n00:51:03,026 --> 00:51:05,871\nOkay, so\nI am constantly pinging that system.\n\n984\n00:51:05,871 --> 00:51:07,288\nAnd see over here, it's moving.\n\n985\n00:51:07,288 --> 00:51:11,480\nWhat it's doing, the storage doesn't have\nto move, it's synchronizing the RAM.\n\n986\n00:51:11,480 --> 00:51:15,884\nSo, the RAM that's running on\nESX Server 3, the RAM for this VM,\n\n987\n00:51:15,884 --> 00:51:19,830\nis now synchronizing with Server 4 and\ngetting it in line.\n\n988\n00:51:19,830 --> 00:51:21,620\nAnd I can see it's done.\n\n989\n00:51:21,620 --> 00:51:24,372\nThe virtual machine is now\nrunning over on Server 4.\n\n990\n00:51:24,372 --> 00:51:27,250\nAnd look,\nI didn't even lose a single ping.\n\n991\n00:51:27,250 --> 00:51:29,540\nYou can actually probably spot\nthe moment it happened right here,\n\n992\n00:51:29,540 --> 00:51:33,730\nwhen it went from less than one\nmillisecond to two milliseconds of ping.\n\n993\n00:51:33,730 --> 00:51:37,569\nSo it slowed down a little bit, but\notherwise the transition happened [SOUND],\n\n994\n00:51:37,569 --> 00:51:38,163\nlike that.\n\n995\n00:51:38,163 --> 00:51:40,710\nAll right, very, very quick.\n\n996\n00:51:40,710 --> 00:51:43,180\nNo downtime to the end\nusers in this scenario.\n\n997\n00:51:43,180 --> 00:51:47,050\nNow the more RAM you have,\nthe longer that might take.\n\n998\n00:51:47,050 --> 00:51:51,590\nBut the process itself is designed\nto be seamless to the end user.\n\n999\n00:51:51,590 --> 00:51:53,620\nThat virtual machine is\nnow running on Server 4.\n\n1000\n00:51:53,620 --> 00:51:55,876\nI can verify that if I\ngo back here into my,\n\n1001\n00:51:55,876 --> 00:51:59,038\noh, actually I'm already in\nmy host screen, aren't I?\n\n1002\n00:51:59,038 --> 00:52:02,978\nSo if I go into my host screen,\nand I go to Server 3,\n\n1003\n00:52:02,978 --> 00:52:08,038\nRelated Objects, Virtual Machines,\nApp-web1 is not there.\n\n1004\n00:52:08,038 --> 00:52:13,560\nBut if I go to Server 4, Related Objects\nand Virtual Machines, there's App-web1.\n\n1005\n00:52:13,560 --> 00:52:17,350\nIt jumped from one hardware to the other,\nand\n\n1006\n00:52:17,350 --> 00:52:21,110\nit did it while the server was online,\nand my end users were unaffected.\n\n1007\n00:52:21,110 --> 00:52:23,600\nThat's vMotion, and it's really cool.\n\n1008\n00:52:23,600 --> 00:52:25,540\nI didn't even have to turn it on.\n\n1009\n00:52:25,540 --> 00:52:29,180\nYou just have a dedicated NIC set up for\nit, and you don't have to.\n\n1010\n00:52:29,180 --> 00:52:32,870\nIf you don't have a dedicated NIC it'll\njust use your regular management adapter.\n\n1011\n00:52:32,870 --> 00:52:34,240\nBut that's gonna hurt performance, right?\n\n1012\n00:52:34,240 --> 00:52:36,970\nSo if you can, have a dedicated NIC.\n\n1013\n00:52:36,970 --> 00:52:40,160\nAnd then I clustered the nodes together\nto take care of authentication.\n\n1014\n00:52:40,160 --> 00:52:42,955\nNow they're able to communicate\nbetween each other just fine.\n\n1015\n00:52:42,955 --> 00:52:44,955\n[SOUND] And flip over happens like that.\n\n1016\n00:52:44,955 --> 00:52:47,770\nReally, really cool stuff, that's vMotion.\n\n1017\n00:52:47,770 --> 00:52:52,020\nAnd I wanted to cover that one\nfirst because DRS uses vMotion.\n\n1018\n00:52:52,020 --> 00:52:55,170\nIt's kind of a building block\nto get DRS up and running.\n\n1019\n00:52:55,170 --> 00:52:59,350\nSo we wanna make sure that we have\nthings proper and where they need to be.\n\n1020\n00:52:59,350 --> 00:53:01,310\nNow, a few things about vMotion.\n\n1021\n00:53:01,310 --> 00:53:02,940\nWhen it fails over like this,\n\n1022\n00:53:02,940 --> 00:53:06,400\nwhen we flip a VM over to another host,\nit just stays there.\n\n1023\n00:53:06,400 --> 00:53:09,970\nIt's not gonna move it back,\nit's not gonna do what they call failback.\n\n1024\n00:53:09,970 --> 00:53:11,700\nWe have to move it back ourselves.\n\n1025\n00:53:11,700 --> 00:53:14,680\nIf we use DRS, we can,\nwe can have things like that.\n\n1026\n00:53:14,680 --> 00:53:17,413\nBut without DRS,\nit's just a manual process.\n\n1027\n00:53:17,413 --> 00:53:22,180\nSo I'm gonna take App-web1, and\nI'm gonna move it back to where it was.\n\n1028\n00:53:22,180 --> 00:53:24,790\nI'm gonna move it back over to the other\nserver cuz I wanna show you some\n\n1029\n00:53:24,790 --> 00:53:25,500\nother neat things.\n\n1030\n00:53:25,500 --> 00:53:28,740\nSo I'm gonna migrate that guy, and\nI'll just send him right back.\n\n1031\n00:53:28,740 --> 00:53:33,580\nSo I'll choose to change host and I'll\nsend him right back to where he came from,\n\n1032\n00:53:33,580 --> 00:53:36,199\nstaying in the cluster and\ngoing back to Server 3.\n\n1033\n00:53:36,199 --> 00:53:39,799\nAll right, so this is really\nneat stuff cuz it lets us do,\n\n1034\n00:53:39,799 --> 00:53:43,788\nnot just failover scenarios,\nbut just routine maintenance.\n\n1035\n00:53:43,788 --> 00:53:46,434\nWhere you used to have to\nschedule a downtime, and\n\n1036\n00:53:46,434 --> 00:53:50,403\ncome into the office at 2 AM in the\nmorning to impact the network as little as\n\n1037\n00:53:50,403 --> 00:53:52,371\npossible and do your upgrades then.\n\n1038\n00:53:52,371 --> 00:53:56,656\nNow, I can just move all the VMs off\nof one host, in the middle of the day,\n\n1039\n00:53:56,656 --> 00:53:58,740\npeople don't even notice.\n\n1040\n00:53:58,740 --> 00:54:01,770\nAnd now that first host is now empty,\nI can do all the maintenance I want.\n\n1041\n00:54:01,770 --> 00:54:04,630\nTake it offline, upgrade it,\ndo whatever I need.\n\n1042\n00:54:04,630 --> 00:54:07,400\nAnd when I'm done,\nI just move the VMs back over.\n\n1043\n00:54:07,400 --> 00:54:10,820\nAnd users never notice, I don't have\nto come into the office at 2 AM.\n\n1044\n00:54:10,820 --> 00:54:13,400\nIt's also really cool if you\nwant to grow your cluster.\n\n1045\n00:54:13,400 --> 00:54:16,150\nMaybe I want to add more\nservers to the cluster.\n\n1046\n00:54:16,150 --> 00:54:19,840\nSo all I have to do is, well,\njust add them to the cluster, and\n\n1047\n00:54:19,840 --> 00:54:20,710\nnow they're there.\n\n1048\n00:54:20,710 --> 00:54:24,206\nAnd then I can use the vMotion to\nmove VMs over to that new node, and\n\n1049\n00:54:24,206 --> 00:54:25,996\nI've increased my capability.\n\n1050\n00:54:25,996 --> 00:54:28,790\nAll in the middle of the day,\nall without impacting my users.\n\n1051\n00:54:28,790 --> 00:54:29,430\nReally cool stuff.\n\n1052\n00:54:30,580 --> 00:54:33,360\nAll right, well,\nthat's enough about vMotion.\n\n1053\n00:54:33,360 --> 00:54:37,660\nNow I wanna move into some of\nthe other things, like DRS and HA.\n\n1054\n00:54:37,660 --> 00:54:39,330\nBut, I'm out of time for this segment.\n\n1055\n00:54:39,330 --> 00:54:41,340\nSo, let's stop here and take a break.\n\n1056\n00:54:41,340 --> 00:54:43,600\nAnd when we get back, we'll jump into DRS.\n\n1057\n00:54:43,600 --> 00:54:44,900\nSo stay tuned.\n\n1058\n00:54:44,900 --> 00:54:45,830\nWe'll be back in a few.\n\n1059\n00:54:45,830 --> 00:54:53,538\n[SOUND].\n\n1060\n00:54:53,538 --> 00:54:55,450\nAll right, welcome back everybody.\n\n1061\n00:54:55,450 --> 00:54:56,935\nSo, I forgot something.\n\n1062\n00:54:56,935 --> 00:54:59,621\n[LAUGH] We wrapped up\nvMotion in the last segment.\n\n1063\n00:54:59,621 --> 00:55:02,556\nAnd I mentioned I wanted\nto talk about EVC later,\n\n1064\n00:55:02,556 --> 00:55:06,500\nwhich was that enhanced\nvMotion compatibility option.\n\n1065\n00:55:06,500 --> 00:55:09,750\nWhen we did the install,\nwhen we created that cluster,\n\n1066\n00:55:09,750 --> 00:55:14,060\nit asked me if I wanted to turn on EVC,\nand I didn't check it, all right?\n\n1067\n00:55:14,060 --> 00:55:14,730\nAnd why didn't I?\n\n1068\n00:55:14,730 --> 00:55:16,180\nWell, here's the thing.\n\n1069\n00:55:16,180 --> 00:55:20,700\nWhen you do vMotion it's synchronizing\nthe RAM on the VMs between one host and\n\n1070\n00:55:20,700 --> 00:55:24,140\nanother and basically jumping\nthat VM over to the other host.\n\n1071\n00:55:24,140 --> 00:55:31,190\nWell, what if the CPUs on those\nphysical hosts don't match?\n\n1072\n00:55:31,190 --> 00:55:35,960\nIn an ideal VMware cluster, when you've\ngot ESXi boxes clustered together,\n\n1073\n00:55:35,960 --> 00:55:38,790\nthe CPUs should be identical.\n\n1074\n00:55:38,790 --> 00:55:41,360\nI mean identical down to the part number.\n\n1075\n00:55:41,360 --> 00:55:44,538\nSo you don't just want two Intel Xeons,\nright?\n\n1076\n00:55:44,538 --> 00:55:48,790\nYou need two Intel Xeons that are of\nthis step stepping and megahertz,\n\n1077\n00:55:48,790 --> 00:55:52,408\ngigahertz, whatever, very,\nvery similar processors.\n\n1078\n00:55:52,408 --> 00:55:56,539\nThe reason they need to be similar\nis that different CPUs have\n\n1079\n00:55:56,539 --> 00:55:58,940\ndifferent instruction sets.\n\n1080\n00:55:58,940 --> 00:56:03,960\nThere might be certain features built in\nto one processor that's not on another, or\n\n1081\n00:56:03,960 --> 00:56:07,390\none might have a certain amount\nof L2 cache or L3 cache and\n\n1082\n00:56:07,390 --> 00:56:09,390\nthe other processor doesn't have it.\n\n1083\n00:56:09,390 --> 00:56:13,110\nWell, with a type one\nhyperviser like ESXi,\n\n1084\n00:56:13,110 --> 00:56:16,060\nthe virtual machines actually see the CPU.\n\n1085\n00:56:16,060 --> 00:56:17,860\nThey see the instruction sets.\n\n1086\n00:56:17,860 --> 00:56:21,880\nThey see the information on the physical\nCPU, so they know what it is.\n\n1087\n00:56:21,880 --> 00:56:25,568\nAnd when they jump from one\nphysical box to another, and\n\n1088\n00:56:25,568 --> 00:56:28,770\nthe CPUs don't match\nIt can cause problems.\n\n1089\n00:56:28,770 --> 00:56:32,220\nIn Windows, it often results\nin a blue screen of death.\n\n1090\n00:56:32,220 --> 00:56:33,230\nSo you do V motion.\n\n1091\n00:56:33,230 --> 00:56:37,200\nYou jump the VM live, it jumps over to\nthe new host with synchronized RAM, and\n\n1092\n00:56:37,200 --> 00:56:38,719\nthe blue screens and re-boots.\n\n1093\n00:56:38,719 --> 00:56:41,610\nNow it re-booting, and\nyou've got down time.\n\n1094\n00:56:41,610 --> 00:56:42,830\nBut after the re-boot it's happy.\n\n1095\n00:56:42,830 --> 00:56:44,650\nIt boots up,\nsees it's a different processor and\n\n1096\n00:56:44,650 --> 00:56:47,440\nit's fine, but a re-boot happened.\n\n1097\n00:56:47,440 --> 00:56:49,380\nSo how do we eliminate that?\n\n1098\n00:56:49,380 --> 00:56:53,020\nWell, the number one way to eliminate\nthat is to have the same processor\n\n1099\n00:56:53,020 --> 00:56:54,930\nacross your cluster, all right?\n\n1100\n00:56:54,930 --> 00:56:59,320\nNow that's great if you're building\nyour cluster today, if you go out and\n\n1101\n00:56:59,320 --> 00:57:03,300\nyou order ten identical servers and you\nbring them up in a cluster with ten nodes\n\n1102\n00:57:03,300 --> 00:57:06,260\nyou know they're identical cuz you\nbought them all at the same time.\n\n1103\n00:57:06,260 --> 00:57:10,010\nBut a year from now you might decide\nto add 2 more notes to that cluster.\n\n1104\n00:57:10,010 --> 00:57:13,100\nSo you go back to HP, or Dell,\nor Lenovo, or whatever, and\n\n1105\n00:57:13,100 --> 00:57:16,100\nyou go to price out a server, and\nthey don't sell that one anymore.\n\n1106\n00:57:16,100 --> 00:57:17,310\nThey sell a new one.\n\n1107\n00:57:17,310 --> 00:57:18,710\nOr they still sell the one you had, but\n\n1108\n00:57:18,710 --> 00:57:23,330\nthe processor models have been updated\nto reflect newer speeds or whatever.\n\n1109\n00:57:23,330 --> 00:57:24,260\nNow they don't match.\n\n1110\n00:57:24,260 --> 00:57:27,690\nNow the processors are at different\nstepping or a different family and\n\n1111\n00:57:27,690 --> 00:57:29,170\nthey don't match what you've got.\n\n1112\n00:57:29,170 --> 00:57:32,320\nAnd if you put those in,\nit'll let you, you can put them in.\n\n1113\n00:57:32,320 --> 00:57:35,670\nBut you run the risk of getting\na blue screen or a segment fault or\n\n1114\n00:57:35,670 --> 00:57:39,370\na buffer overflow or whatever kind of\ncrash it is that that OS responds with\n\n1115\n00:57:39,370 --> 00:57:42,360\nwhen it sees the wrong\ninstruction sets on the CPU.\n\n1116\n00:57:42,360 --> 00:57:42,940\nAlright.\n\n1117\n00:57:42,940 --> 00:57:45,050\nSo that's where EVC comes in.\n\n1118\n00:57:45,050 --> 00:57:47,000\nEnhanced View Motion Compatibility.\n\n1119\n00:57:47,000 --> 00:57:51,120\nWhat it does is it looks at\nall the CPUs in your cluster.\n\n1120\n00:57:51,120 --> 00:57:54,350\nIt says, okay, I've got three different\ntypes of CPUs in this cluster.\n\n1121\n00:57:54,350 --> 00:57:57,570\nLet me dumb my virtual machines down, so\n\n1122\n00:57:57,570 --> 00:58:00,640\nthat they only support\na common feature set.\n\n1123\n00:58:00,640 --> 00:58:04,350\nA set of features that are common\nacross all the nodes in my cluster.\n\n1124\n00:58:04,350 --> 00:58:05,420\nThat way when we jump around,\n\n1125\n00:58:05,420 --> 00:58:09,650\nthrough the different CPUs, but you\nknow they'll have this instruction set.\n\n1126\n00:58:09,650 --> 00:58:11,910\nIt creates that compatibility\nbetween the systems.\n\n1127\n00:58:13,292 --> 00:58:15,960\nAnd for\nenvironments that are rapidly changing,\n\n1128\n00:58:15,960 --> 00:58:20,950\nthat don't have large purchases right up\nfront, that's a really nice thing, right?\n\n1129\n00:58:20,950 --> 00:58:22,040\nIt creates that compatibility.\n\n1130\n00:58:24,010 --> 00:58:29,200\nIf you want to learn about it, there's\na link which I'll post in the show notes,\n\n1131\n00:58:29,200 --> 00:58:31,970\nbut there's an article that\nVMware has right here,\n\n1132\n00:58:31,970 --> 00:58:36,220\nwhich is the Enhanced vMotion\nCompatibility processor support.\n\n1133\n00:58:36,220 --> 00:58:41,050\nNot every CPU supports EVC, so\nyou can't just run any willy\n\n1134\n00:58:41,050 --> 00:58:43,380\nnilly processor that you go out and\nbuy, all right.\n\n1135\n00:58:43,380 --> 00:58:44,580\nSo, a couple of criteria.\n\n1136\n00:58:44,580 --> 00:58:48,020\nFirst off, all of your CPUs need\nto be from the same vendor.\n\n1137\n00:58:48,020 --> 00:58:51,000\nSo, you need to either be all Intel or\nall AMD.\n\n1138\n00:58:51,000 --> 00:58:52,410\nThere's no mixing the two.\n\n1139\n00:58:52,410 --> 00:58:54,300\nYou can't have some AMD servers and\nsome Intel.\n\n1140\n00:58:54,300 --> 00:58:55,260\nIt just doesn't work.\n\n1141\n00:58:55,260 --> 00:58:57,530\nSo, it's gotta be all Intel or all AMD.\n\n1142\n00:58:57,530 --> 00:58:58,950\nAll right?\n\n1143\n00:58:58,950 --> 00:59:03,250\nOn top of that,\nif it's an AMD processor, or\n\n1144\n00:59:03,250 --> 00:59:06,960\nif it's an intel processor there's an\nactual separate instruction set that you\n\n1145\n00:59:06,960 --> 00:59:11,470\nneed to have and I'm sure it's in here but\nthere's so much in here.\n\n1146\n00:59:11,470 --> 00:59:15,310\nLet me just bring up my show notes, cause\nI've got it written in there to show you.\n\n1147\n00:59:15,310 --> 00:59:17,440\nBasically if you're going to be doing EVC,\n\n1148\n00:59:17,440 --> 00:59:22,360\nif it's an Intel it's got to\nsupport Intel flex migration.\n\n1149\n00:59:22,360 --> 00:59:24,660\nThat's what they call it,\nIntel flex migration.\n\n1150\n00:59:24,660 --> 00:59:29,180\nAnd if it's AMD it's gotta\nsupport AMD V extended migration.\n\n1151\n00:59:29,180 --> 00:59:31,610\nRight?\nThat's the hardware side\n\n1152\n00:59:31,610 --> 00:59:35,000\nthat allows the CPU to basically\nstep down its feature set.\n\n1153\n00:59:35,000 --> 00:59:36,930\nTo step it to where it\nmatches the other guys and\n\n1154\n00:59:36,930 --> 00:59:40,490\nfacilitates that migration\nbetween one host and another.\n\n1155\n00:59:40,490 --> 00:59:41,080\nAlright.\n\n1156\n00:59:41,080 --> 00:59:45,840\nNow almost all the Intel and AMD\nprocessors that are sold today have that.\n\n1157\n00:59:45,840 --> 00:59:47,680\nBut if you're dealing with\nan older data center,\n\n1158\n00:59:47,680 --> 00:59:51,330\none that's got a services from three, five\nyears ago, they may not support that, and\n\n1159\n00:59:51,330 --> 00:59:55,340\nso you need to take a look and\nsee whether your hardware supports it.\n\n1160\n00:59:55,340 --> 00:59:56,050\nAlright?\n\n1161\n00:59:56,050 --> 00:59:57,420\nBut if your hardware supports it,\n\n1162\n00:59:57,420 --> 01:00:01,090\nif you've got that functionality,\nyou can turn on EVC and\n\n1163\n01:00:01,090 --> 01:00:05,810\nit'll make it where you can flip between\nthe nodes without actually having\n\n1164\n01:00:05,810 --> 01:00:09,180\na segment falter or whatever due\nto that changing instruction set.\n\n1165\n01:00:09,180 --> 01:00:11,380\nNow I could have turned\nit on during the wizard.\n\n1166\n01:00:11,380 --> 01:00:12,290\nI didn't.\n\n1167\n01:00:12,290 --> 01:00:13,970\nIf you didn't turn it\non during the wizard,\n\n1168\n01:00:13,970 --> 01:00:16,300\nit's actually a setting\nbased on the cluster itself.\n\n1169\n01:00:16,300 --> 01:00:17,580\nSo I can just go into the cluster.\n\n1170\n01:00:18,810 --> 01:00:21,690\nAnd I'll take my ITProTV\ncluster that we made.\n\n1171\n01:00:21,690 --> 01:00:25,350\nAnd you can go to manage and settings.\n\n1172\n01:00:25,350 --> 01:00:28,550\nAnd under settings you'll find VMware EVC.\n\n1173\n01:00:30,770 --> 01:00:34,200\nAnd right in here is where we can see\nwhether it's enabled or disabled.\n\n1174\n01:00:34,200 --> 01:00:35,850\nAnd I can just edit that.\n\n1175\n01:00:35,850 --> 01:00:36,590\nAnd I'm gonna turn it on.\n\n1176\n01:00:36,590 --> 01:00:42,140\nNow notice that I got enable EVC for\nAMD hosts and enable EVC for Intel hosts.\n\n1177\n01:00:42,140 --> 01:00:44,220\nThere's no turning on for\na mixed environment.\n\n1178\n01:00:44,220 --> 01:00:46,170\nThere's no both option.\n\n1179\n01:00:46,170 --> 01:00:47,220\nSo I pick what I got.\n\n1180\n01:00:47,220 --> 01:00:50,100\nNow my nodes, they have Intel processors.\n\n1181\n01:00:50,100 --> 01:00:51,190\nAnd they're actually identical.\n\n1182\n01:00:51,190 --> 01:00:54,150\nSo server one, two, three, and\nfour all have identical processors,\n\n1183\n01:00:54,150 --> 01:00:54,890\ndown to the stepping.\n\n1184\n01:00:54,890 --> 01:00:56,950\nThey were all ordered at the same time but\n\n1185\n01:00:56,950 --> 01:01:01,360\nnone of mine actually support\nthe Intel Flex Migration.\n\n1186\n01:01:01,360 --> 01:01:05,010\nSo I won't be able to turn it on,\nit will crash my servers.\n\n1187\n01:01:05,010 --> 01:01:07,635\nBasically what you do is\nyou check that option and\n\n1188\n01:01:07,635 --> 01:01:10,040\nthen you tell it you're EVC mode.\n\n1189\n01:01:10,040 --> 01:01:14,200\nAnd you'll see what you're\npicking here is a generic\n\n1190\n01:01:14,200 --> 01:01:17,690\nCPU that's going to be\npresented to your guests.\n\n1191\n01:01:17,690 --> 01:01:22,560\nDo you want your guests to see it as\nMerom, Penryn, Nehalem, Westmere,\n\n1192\n01:01:22,560 --> 01:01:24,250\nSandy Bridge, Ivy Bridge, right.\n\n1193\n01:01:24,250 --> 01:01:29,620\nWhich family of processors is it that\nwe're gonna present to our guests.\n\n1194\n01:01:29,620 --> 01:01:31,120\nSo you want to pick\nthe one that matches and\n\n1195\n01:01:31,120 --> 01:01:33,670\nthey even give you little\nsummaries of what to expect.\n\n1196\n01:01:33,670 --> 01:01:35,910\nSo if you've got like a Xeon Core i7 and\n\n1197\n01:01:35,910 --> 01:01:40,365\nyou'll pick a Nehalem and\nyou'll go from there.\n\n1198\n01:01:40,365 --> 01:01:44,240\nNow once that's selected,\nnow you get that ability to flip.\n\n1199\n01:01:44,240 --> 01:01:47,490\nNow notice that I've got a warning\ndown here, this host can not be added.\n\n1200\n01:01:47,490 --> 01:01:49,340\nServer three Doesn't support it.\n\n1201\n01:01:49,340 --> 01:01:50,900\nWell server four doesn't either, but\n\n1202\n01:01:50,900 --> 01:01:53,260\nit got one red flag, and\nI guess it just stopped there.\n\n1203\n01:01:53,260 --> 01:01:57,620\nSo I'm not gonna be able to implement it,\nbut that's basically how this works.\n\n1204\n01:01:57,620 --> 01:02:00,620\nAnd if you choose AMD,\nit's basically the same process.\n\n1205\n01:02:00,620 --> 01:02:04,310\nYou pick which generation of\nprocessor you're gonna present.\n\n1206\n01:02:04,310 --> 01:02:08,240\nAnd so you tell it, is it an Opteron\ngeneration one, two, three, four or\n\n1207\n01:02:08,240 --> 01:02:10,970\npile driver, and\nit'll know what to do from there.\n\n1208\n01:02:10,970 --> 01:02:12,920\nNow none of mine are compatible with that.\n\n1209\n01:02:12,920 --> 01:02:14,910\nSo getting big red flags there.\n\n1210\n01:02:14,910 --> 01:02:20,030\nBut that's what ECV is and it solves\na problem that a lot of people have had.\n\n1211\n01:02:20,030 --> 01:02:22,820\nNot everybody buys there\nservers all at the same time.\n\n1212\n01:02:22,820 --> 01:02:27,360\nPeople normally buy them in batches and\nadd as there needs grow.\n\n1213\n01:02:27,360 --> 01:02:29,960\nAnd that does create\na pretty significant problem\n\n1214\n01:02:29,960 --> 01:02:31,690\nif you are trying to do clustering.\n\n1215\n01:02:31,690 --> 01:02:32,600\nSo that's ECV.\n\n1216\n01:02:33,800 --> 01:02:36,580\nThe other thing I wanted to\ntalk about though was DRS.\n\n1217\n01:02:36,580 --> 01:02:38,700\nThe Distributed Resource Scheduler.\n\n1218\n01:02:38,700 --> 01:02:43,890\nThis is where vSphere will start to\nmonitor our virtual machines and\n\n1219\n01:02:43,890 --> 01:02:48,870\nlook at the load they're creating,\nCPU, memory, disk I/O, network, and\n\n1220\n01:02:48,870 --> 01:02:54,480\nit's gonna move virtual machines from host\nto host based on what's happening, right?\n\n1221\n01:02:54,480 --> 01:02:56,270\nBased on their load,\nwhat they're doing and\n\n1222\n01:02:56,270 --> 01:02:59,750\nhow much activity they're generating,\nso DRS is really cool.\n\n1223\n01:02:59,750 --> 01:03:02,140\nI could have turned it on during\nthe wizard earlier, right?\n\n1224\n01:03:02,140 --> 01:03:05,110\nIt was just check mark and off you go,\nbut I wanted to do it manually, so\n\n1225\n01:03:05,110 --> 01:03:08,560\nwe are going to turn on DRS for\nour cluster and you'll notice,\n\n1226\n01:03:08,560 --> 01:03:13,320\nit's actually right here, when we go\nto our cluster Manage and Settings.\n\n1227\n01:03:13,320 --> 01:03:16,760\nYou've got DRS and\nHA right beside each other, and\n\n1228\n01:03:16,760 --> 01:03:19,580\nthat's because we're oftentimes\ndeploying them together,right?\n\n1229\n01:03:19,580 --> 01:03:21,470\nThese guys are a team most of the time.\n\n1230\n01:03:21,470 --> 01:03:23,180\nMost people aren't gonna\ndeploy them independently.\n\n1231\n01:03:24,820 --> 01:03:27,570\nAll right, if we go to DRS though,\nI can go in here, and I can turn it on.\n\n1232\n01:03:28,700 --> 01:03:31,240\nAnd when I turn it on,\nit asks a few simple questions, right?\n\n1233\n01:03:31,240 --> 01:03:33,040\nFirst I am gonna turn it on.\n\n1234\n01:03:33,040 --> 01:03:35,670\nAnd then it's going to ask me what\nmode I want, and there's 3 modes.\n\n1235\n01:03:36,930 --> 01:03:38,320\nManual mode.\n\n1236\n01:03:38,320 --> 01:03:41,160\nWith manual mode, what it does is it says,\nI'm going to look at the servers.\n\n1237\n01:03:41,160 --> 01:03:45,920\nI'm going to look at the loads, but\nI'm not going to do anything about it.\n\n1238\n01:03:45,920 --> 01:03:46,910\nI'm never going to move a VM.\n\n1239\n01:03:46,910 --> 01:03:49,490\nI'm just going to make suggestions.\n\n1240\n01:03:49,490 --> 01:03:52,278\nSo when we log in,\nwe'll get suggestions that will tell us,\n\n1241\n01:03:52,278 --> 01:03:55,573\nyou might want to move this VM to that\nhost, or this VM to the other host.\n\n1242\n01:03:55,573 --> 01:03:56,513\nBut it's up to you to do it.\n\n1243\n01:03:56,513 --> 01:03:58,197\nIt's not gonna move it for us.\n\n1244\n01:03:58,197 --> 01:03:59,078\nAll right?\n\n1245\n01:03:59,078 --> 01:04:03,454\nSome people like that, especially in the\nearly days when you're just learning DRS,\n\n1246\n01:04:03,454 --> 01:04:07,910\nbecause it won't impact your production\nenvironment, it's just looking.\n\n1247\n01:04:07,910 --> 01:04:08,930\nAll right?\n\n1248\n01:04:08,930 --> 01:04:11,680\nThe other option is partially automated.\n\n1249\n01:04:11,680 --> 01:04:15,460\nWhen you go partially automated,\nwhat it's gonna do here is\n\n1250\n01:04:15,460 --> 01:04:20,310\nit's gonna do load balancing, but\nonly when you reboot virtual machines.\n\n1251\n01:04:20,310 --> 01:04:25,060\nSo when you boot up a new VM,\nit'll make the decision at boot time and\n\n1252\n01:04:25,060 --> 01:04:26,760\nit'll move the VM to where it goes.\n\n1253\n01:04:26,760 --> 01:04:31,280\nBut once the VM is up and running,\nit leaves it wherever it is.\n\n1254\n01:04:31,280 --> 01:04:36,660\nSo it's just at boot time that it does\nload balancing for each individual VM.\n\n1255\n01:04:36,660 --> 01:04:39,300\nAnd then the last one is fully automated.\n\n1256\n01:04:39,300 --> 01:04:43,750\nWhen a VM boots, it'll place it on the\nbest server possible, on the best host.\n\n1257\n01:04:43,750 --> 01:04:48,290\nAnd then as time progresses, it'll move\nit based on conditions on that host,\n\n1258\n01:04:48,290 --> 01:04:51,890\nas things start to change and\nactivities vary, it'll go in and\n\n1259\n01:04:51,890 --> 01:04:53,980\nmove things around to accommodate for\nthat, all right?\n\n1260\n01:04:53,980 --> 01:04:55,330\nI'm gonna go fully automated.\n\n1261\n01:04:56,480 --> 01:05:01,390\nNow, for the most part, DRS is watching\nperformance of the network and\n\n1262\n01:05:01,390 --> 01:05:04,620\nit's just trying to get us the best\nperformance out of our equipment.\n\n1263\n01:05:04,620 --> 01:05:06,854\nAnd if I hit the little down arrow here,\n\n1264\n01:05:06,854 --> 01:05:09,850\nI'll see other tweaks I can\nmake to configure that.\n\n1265\n01:05:09,850 --> 01:05:12,270\nHow sensitive do I want it to be?\n\n1266\n01:05:12,270 --> 01:05:14,910\nI don't want it just moving virtual\nmachines around all the time.\n\n1267\n01:05:14,910 --> 01:05:17,910\nYou know, there's gotta be certain\nthresholds that get triggered.\n\n1268\n01:05:17,910 --> 01:05:19,950\nBy default,\nthat's kind of set in the middle.\n\n1269\n01:05:19,950 --> 01:05:24,480\nIf you move it to aggressive, then as\nsoon as it sees a possible benefit,\n\n1270\n01:05:24,480 --> 01:05:26,380\nit'll start to move VMs.\n\n1271\n01:05:26,380 --> 01:05:28,070\nBut you guys know the problem.\n\n1272\n01:05:28,070 --> 01:05:31,590\nYour guests, they'll have spikes,\npeaks and valleys, right.\n\n1273\n01:05:31,590 --> 01:05:35,670\nSo they'll have spikes of activity and\nthen drop down into idle for a while.\n\n1274\n01:05:35,670 --> 01:05:40,160\nYou don't want it to hit a spike and move\nthe VM just for something very temporary.\n\n1275\n01:05:40,160 --> 01:05:44,640\nSo we normally want to be in the middle\nsaying, it's gotta be busy for\n\n1276\n01:05:44,640 --> 01:05:46,650\na little while, right, for\nfive minutes or whatever,\n\n1277\n01:05:46,650 --> 01:05:49,270\nbefore we start to move\nit over to another host.\n\n1278\n01:05:49,270 --> 01:05:52,395\nSo that creates a more stable environment.\n\n1279\n01:05:52,395 --> 01:05:55,580\nAnd you can even go very conservative if\nyou want, it's up to you to adjust that.\n\n1280\n01:05:56,880 --> 01:06:01,050\nAnd then down here for the virtual machine\nautomation, we're basically saying,\n\n1281\n01:06:01,050 --> 01:06:04,660\ndo we want to allow the virtual\nmachines to override these settings?\n\n1282\n01:06:04,660 --> 01:06:07,920\nYou can actually tweak\nthe settings on a per-VM basis.\n\n1283\n01:06:07,920 --> 01:06:10,980\nSo some of your VMs might need\nto be more sensitive, and\n\n1284\n01:06:10,980 --> 01:06:15,160\nother VMs might need to be less sensitive\nto cause that trigger to happen.\n\n1285\n01:06:15,160 --> 01:06:19,180\nNow my environment is going to\nbe extremely low utilization.\n\n1286\n01:06:19,180 --> 01:06:20,770\nNobody is using these VMs.\n\n1287\n01:06:20,770 --> 01:06:24,360\nSo I'm gonna bump it up to aggressive,\nand even at aggressive\n\n1288\n01:06:24,360 --> 01:06:26,895\nI might not be able to cause an event\nto cause it to load balance.\n\n1289\n01:06:26,895 --> 01:06:30,010\nCuz it's hard to load balance a set\nof servers that's doing nothing.\n\n1290\n01:06:30,010 --> 01:06:32,870\nBut I couldn't find anybody\nwilling to donate their production\n\n1291\n01:06:32,870 --> 01:06:33,870\nenvironment for the show.\n\n1292\n01:06:33,870 --> 01:06:36,980\nSo [LAUGH] we'll just kinda have to see\nhow things go, but I'm gonna go ahead and\n\n1293\n01:06:36,980 --> 01:06:38,530\ncrank mine all the way to the top.\n\n1294\n01:06:38,530 --> 01:06:40,720\nYou generally don't want to do\nthat in a production environment.\n\n1295\n01:06:41,780 --> 01:06:44,710\nAll right,\nanother cool thing we can use DRS for.\n\n1296\n01:06:45,830 --> 01:06:47,140\nNot only can it balance for\n\n1297\n01:06:47,140 --> 01:06:51,640\nperformance, it can also do\npower management, all right?\n\n1298\n01:06:51,640 --> 01:06:54,180\nDRS power management is really neat, okay?\n\n1299\n01:06:54,180 --> 01:06:55,990\nLet's say that you've got 50 hosts.\n\n1300\n01:06:57,190 --> 01:07:00,560\nAnd of those 50 hosts,\nthey're carrying your VMs.\n\n1301\n01:07:00,560 --> 01:07:03,800\nBut they're really just\nbusy from 8 AM to 5 PM.\n\n1302\n01:07:03,800 --> 01:07:08,840\nSo from 8 AM to 5 PM, all 50 hosts\nare fired up running full tilt.\n\n1303\n01:07:08,840 --> 01:07:10,900\nBut then at 5 PM everybody goes home.\n\n1304\n01:07:10,900 --> 01:07:14,820\nAnd at night, all of those hosts\nare really just sitting there idling.\n\n1305\n01:07:14,820 --> 01:07:19,372\nThey idle all the way till 8 AM the next\nday, then they get busy again, okay?\n\n1306\n01:07:19,372 --> 01:07:23,790\nWell, overnight a lot of those\nhosts weren't doing anything.\n\n1307\n01:07:23,790 --> 01:07:30,280\nSo what DRS can do is it can move the VMs\nto overlap them since they're idling.\n\n1308\n01:07:30,280 --> 01:07:34,330\nAnd so maybe it can move,\nfree up ten hosts,\n\n1309\n01:07:34,330 --> 01:07:37,950\nmove VMs off of ten hosts and get it so\nthey're emptied out, all right?\n\n1310\n01:07:37,950 --> 01:07:40,980\nThen they can take those ten hosts,\nand they can put them to sleep.\n\n1311\n01:07:40,980 --> 01:07:44,280\nThey can put them into a power save\nmode so they're not drawing electricity.\n\n1312\n01:07:44,280 --> 01:07:48,302\nAnd then in the morning at 8 AM as\nthings tart getting busy again,\n\n1313\n01:07:48,302 --> 01:07:53,400\nit can wake up those ten hosts and move\nthe VMs over to it and off it goes again.\n\n1314\n01:07:53,400 --> 01:07:55,450\nIt's really cool stuff.\n\n1315\n01:07:55,450 --> 01:08:00,104\nYou can really save power for\ncompanies that aren't 24/7, or\n\n1316\n01:08:00,104 --> 01:08:03,190\ncompanies that have peaks, like Netflix.\n\n1317\n01:08:03,190 --> 01:08:07,050\nNetflix, they're 24/7, right,\nthey have customers in there all the time.\n\n1318\n01:08:07,050 --> 01:08:10,530\nBut Friday nights and Sundays,\nthose are their busy days,\n\n1319\n01:08:10,530 --> 01:08:11,950\nthat's when they have their peak load.\n\n1320\n01:08:11,950 --> 01:08:15,310\nSo they've got the most VMs\nfired up on those days.\n\n1321\n01:08:15,310 --> 01:08:19,770\nBut on other days, like Tuesday afternoon,\nthat's a slow time for them.\n\n1322\n01:08:19,770 --> 01:08:24,010\nSo they can start putting servers to\nsleep and saving power, all right?\n\n1323\n01:08:24,010 --> 01:08:27,250\nThe only requirement for this is\nthe servers have to have some kind of\n\n1324\n01:08:27,250 --> 01:08:29,310\npower management, and\na lot of servers don't.\n\n1325\n01:08:29,310 --> 01:08:33,060\nSo the two that VMware supports,\nthere's Wake-on-LAN.\n\n1326\n01:08:33,060 --> 01:08:37,440\nSo if you have traditional ACPI power\nmanagement, the system can go to sleep and\n\n1327\n01:08:37,440 --> 01:08:40,110\nwe can use Wake-on-LAN to wake it back up,\nall right.\n\n1328\n01:08:40,110 --> 01:08:43,280\nThe other method they\nsupport is what's called iLO.\n\n1329\n01:08:43,280 --> 01:08:46,184\niLO is the Integrated Lights-Out\nmanagement, and\n\n1330\n01:08:46,184 --> 01:08:48,500\nit's a feature of almost all HP servers.\n\n1331\n01:08:48,500 --> 01:08:51,995\nAnd what it does is it lets VMware\nbasically reach right into the iLO board\n\n1332\n01:08:51,995 --> 01:08:54,470\nand turn the server off and\nactually power it down.\n\n1333\n01:08:54,470 --> 01:08:56,180\nIt can power it completely off.\n\n1334\n01:08:56,180 --> 01:08:58,780\nAnd then it can power it back\non again when it's needed.\n\n1335\n01:08:58,780 --> 01:08:59,930\nSo it's not even asleep there,\n\n1336\n01:08:59,930 --> 01:09:02,490\nit's actually drawing zero\nelectricity when it's powered off.\n\n1337\n01:09:02,490 --> 01:09:05,230\nThe iLO board draws a little electricity.\n\n1338\n01:09:05,230 --> 01:09:08,210\nSo I can turn that on\nright here if I want.\n\n1339\n01:09:08,210 --> 01:09:10,730\nI can set it to manual or automatic.\n\n1340\n01:09:10,730 --> 01:09:14,300\nManual, it'll make recommendations,\nwhen I could be saving power,\n\n1341\n01:09:14,300 --> 01:09:16,450\nwhen I can move VMs off and save power.\n\n1342\n01:09:16,450 --> 01:09:18,730\nAutomatic, it's gonna\ndo it whenever it can.\n\n1343\n01:09:18,730 --> 01:09:22,490\nNow, I'm not gonna turn that on,\nbecause my environment is so low-use,\n\n1344\n01:09:22,490 --> 01:09:24,950\nthat it'll basically power\noff my second node and\n\n1345\n01:09:24,950 --> 01:09:28,100\nI won't be able to show a failover,\nso I'm not gonna do that.\n\n1346\n01:09:28,100 --> 01:09:32,220\nBut you can go in here and tweak all sorts\nof stuff for the DRS power management.\n\n1347\n01:09:32,220 --> 01:09:36,040\nAnd you'll see it's even mentioning in\nhere, you need to have iLO or Wake-on-LAN.\n\n1348\n01:09:36,040 --> 01:09:39,650\nActually they mention IPMI,\nI did not know that it had IPMI support.\n\n1349\n01:09:39,650 --> 01:09:44,020\nThat's another remote management software,\nvery similar to iLO.\n\n1350\n01:09:44,020 --> 01:09:46,670\nYou see that on a lot of generic servers.\n\n1351\n01:09:46,670 --> 01:09:49,042\nSo, you can go in and\ntweak that setting too.\n\n1352\n01:09:49,042 --> 01:09:50,900\nAll right,\n\n1353\n01:09:50,900 --> 01:09:55,020\nso once we've got this all set the way\nthat we want, that's pretty much it for\n\n1354\n01:09:55,020 --> 01:10:00,170\nDRS, we can hit OK, and it's gonna start\nwatching our servers right away, okay?\n\n1355\n01:10:00,170 --> 01:10:04,649\nIt's watching the hosts to look at\ntheir total memory and total CPU,\n\n1356\n01:10:04,649 --> 01:10:06,900\ntotal network, total disk I/O.\n\n1357\n01:10:06,900 --> 01:10:10,760\nAnd it's looking at the guests to\nfigure out who's generating that load.\n\n1358\n01:10:10,760 --> 01:10:13,579\nAnd when it knows who is\nthe one generating the load,\n\n1359\n01:10:13,579 --> 01:10:15,640\nit'll then take actions based on it.\n\n1360\n01:10:15,640 --> 01:10:18,699\nSo it's up, it's fully automatic,\nI didn't turn on power management,\n\n1361\n01:10:18,699 --> 01:10:21,892\nI didn't turn on anything advanced either,\nand it's running.\n\n1362\n01:10:21,892 --> 01:10:25,510\nNow, we don't have to\nrun DRS all the time.\n\n1363\n01:10:25,510 --> 01:10:28,400\nWe can go to Schedule DRS, and\n\n1364\n01:10:28,400 --> 01:10:32,170\nyou'll see in here where you\ncan set scheduling options.\n\n1365\n01:10:32,170 --> 01:10:33,900\nWe can kinda tweak what's gonna happen.\n\n1366\n01:10:33,900 --> 01:10:37,770\nNow I've got mine set to fully automated,\nso it's pretty much gonna run whenever.\n\n1367\n01:10:37,770 --> 01:10:41,290\nAnd if I go under scheduling,\nI'll see I've got no scheduler configured.\n\n1368\n01:10:41,290 --> 01:10:42,980\nI can change that.\n\n1369\n01:10:42,980 --> 01:10:46,290\nAnd I can specify when I want DRS to run.\n\n1370\n01:10:46,290 --> 01:10:48,040\nDo I want it to run right now?\n\n1371\n01:10:48,040 --> 01:10:50,330\nDo I want it to run after\nthe host starts up?\n\n1372\n01:10:50,330 --> 01:10:51,760\nDo I wanna schedule it to run?\n\n1373\n01:10:51,760 --> 01:10:52,910\nDo I want it to run recurring?\n\n1374\n01:10:54,030 --> 01:10:56,230\nWhen do I want DRS to fire off?\n\n1375\n01:10:56,230 --> 01:11:00,120\nMaybe I want it to run every hour,\nevery one hour.\n\n1376\n01:11:00,120 --> 01:11:03,460\nGo ahead and run,\nrebalance my network, all right?\n\n1377\n01:11:03,460 --> 01:11:04,868\nYou might just want it to run once a day.\n\n1378\n01:11:04,868 --> 01:11:09,412\nSo every day at midnight, rebalance my VMs\nso I don't have to deal with it, right?\n\n1379\n01:11:09,412 --> 01:11:13,870\nOr every day at 5PM or whatever,\nyou specify when you want DRS to run.\n\n1380\n01:11:13,870 --> 01:11:16,380\nAnd you can actually set it pretty low.\n\n1381\n01:11:16,380 --> 01:11:24,880\nIf I take it to run every one hour,\nand 15 minutes after the hour.\n\n1382\n01:11:24,880 --> 01:11:29,715\nSo at 7:15 AM, 8:15 AM, 9:15 AM,\n10:15, it's gonna re-run and\n\n1383\n01:11:29,715 --> 01:11:31,810\nbalance out my network, all right.\n\n1384\n01:11:33,020 --> 01:11:36,510\nYou might not want DRS to run during\nthe day when your network is busy.\n\n1385\n01:11:36,510 --> 01:11:37,810\nMaybe you just want it to run at night.\n\n1386\n01:11:37,810 --> 01:11:40,190\nYou pick, right,\nyou get to set that schedule.\n\n1387\n01:11:41,250 --> 01:11:41,760\nAll right?\n\n1388\n01:11:41,760 --> 01:11:43,220\nAnd you can always tell it to run now.\n\n1389\n01:11:43,220 --> 01:11:45,970\nIf you wanna come in and\nforce it to run right now you can do that.\n\n1390\n01:11:45,970 --> 01:11:47,710\nAnd it'll run, and\nit'll balance your systems.\n\n1391\n01:11:50,010 --> 01:11:52,657\nAll right, so that's basically DRS.\n\n1392\n01:11:52,657 --> 01:11:54,816\nIt's not a hard thing to get set.\n\n1393\n01:11:54,816 --> 01:11:56,998\nAnd oh, it's going to complain\nnow because I went in there.\n\n1394\n01:11:56,998 --> 01:11:58,577\nLet me just cancel out that.\n\n1395\n01:11:58,577 --> 01:12:02,469\nBut, it's a pretty straight forward thing,\nwe can get that set,\n\n1396\n01:12:02,469 --> 01:12:03,800\nwe can get it fired up.\n\n1397\n01:12:03,800 --> 01:12:06,000\nI guess I could go ahead and\ntell it to run right now.\n\n1398\n01:12:06,000 --> 01:12:07,740\nThat'll make it happy.\n\n1399\n01:12:07,740 --> 01:12:11,230\nYou know, I've got a one node that's up,\nI guess I could fire up the other nodes.\n\n1400\n01:12:11,230 --> 01:12:15,050\nI don't know that I have enough traffic to\nactually generate any kind of balancing.\n\n1401\n01:12:15,050 --> 01:12:19,590\nLet me start up those other two nodes, so\nI'm gonna fire up web two and web three.\n\n1402\n01:12:21,412 --> 01:12:25,060\nAll right, so these guys are gonna\nfire up now at boot time.\n\n1403\n01:12:25,060 --> 01:12:28,810\nWhen these VMs are booting,\nDRS is gonna look at my load and\n\n1404\n01:12:28,810 --> 01:12:30,480\nbalance things appropriately.\n\n1405\n01:12:30,480 --> 01:12:32,900\nNow you might think to yourself,\nI've got two hosts, so\n\n1406\n01:12:32,900 --> 01:12:36,190\nobviously it's gonna start two on one and\none on the other.\n\n1407\n01:12:36,190 --> 01:12:37,700\nThat's not always the case.\n\n1408\n01:12:37,700 --> 01:12:40,170\nEspecially if we have like\na Power Management function turned on.\n\n1409\n01:12:40,170 --> 01:12:42,960\nBecause then it'll put\nall three on one host,\n\n1410\n01:12:42,960 --> 01:12:45,100\nknowing that it can power\ndown the other host.\n\n1411\n01:12:45,100 --> 01:12:47,940\nSo don't expect a 50/50 split.\n\n1412\n01:12:47,940 --> 01:12:51,530\nDRS is taking a lot of things\ninto consideration when it makes\n\n1413\n01:12:51,530 --> 01:12:52,220\nthese decisions.\n\n1414\n01:12:53,340 --> 01:12:58,010\nAll right, so it's firing up there and\nif I go into my hosts,\n\n1415\n01:12:58,010 --> 01:13:04,140\nlets just see where our hosts, where\nour VM's kind of dropped to right now.\n\n1416\n01:13:04,140 --> 01:13:08,420\nSo if I take server three, it's thinking\nabout a couple of things, all right?\n\n1417\n01:13:08,420 --> 01:13:09,990\nOh, it actually did do some balancing.\n\n1418\n01:13:09,990 --> 01:13:12,940\nSo I've got Web 1 and\nWeb 3 are right here on Server 3.\n\n1419\n01:13:12,940 --> 01:13:18,034\nAnd if I take a look at Server 4, Web 2\nmust be over here, yep, there's Web 2.\n\n1420\n01:13:18,034 --> 01:13:19,840\nSo it actually did do some balancing.\n\n1421\n01:13:19,840 --> 01:13:23,250\nIt said, hey I'm firing up this\nextra VM so let me split it across.\n\n1422\n01:13:23,250 --> 01:13:25,420\nI didn't turn on Power Management, so\n\n1423\n01:13:25,420 --> 01:13:28,610\nI guess it just said hey, based on that,\nwe'll go ahead and spread it out.\n\n1424\n01:13:28,610 --> 01:13:33,050\nSo DRS did that for me, making sure\nthat they were on the separate nodes\n\n1425\n01:13:33,050 --> 01:13:36,750\nif DRS wasn't on, all three of these\nwould have started on Server 3.\n\n1426\n01:13:36,750 --> 01:13:41,110\nIt's a cluster, so if Server 3 failed,\nserver four would take over, right?\n\n1427\n01:13:41,110 --> 01:13:46,290\nBut it wouldn't have done it\nautomatically like DRS did.\n\n1428\n01:13:46,290 --> 01:13:48,770\nAnd then I can go through and\nadjust my load balancing levels and\n\n1429\n01:13:48,770 --> 01:13:51,940\nwhatever, as needed\nbased on my environment.\n\n1430\n01:13:51,940 --> 01:13:55,770\nAnd as these servers pick up utilization,\nthey get busier and they'll move around.\n\n1431\n01:13:55,770 --> 01:13:57,000\nIt's kind of neat.\n\n1432\n01:13:57,000 --> 01:13:59,470\nThe coolest thing about DRS is when\nyou come into work in the morning and\n\n1433\n01:13:59,470 --> 01:14:02,240\nyou just don't know where your VMs are and\nit's not a problem.\n\n1434\n01:14:02,240 --> 01:14:05,130\nYou're like, I don't really know what\nphysical host this VM is running on,\n\n1435\n01:14:05,130 --> 01:14:08,490\nbut I don't really care either because I\nknow DRS is making sure it's ending up on\n\n1436\n01:14:08,490 --> 01:14:09,370\nthe right one.\n\n1437\n01:14:09,370 --> 01:14:12,739\nSo, I just need to go in,\naccess the VM directly and work.\n\n1438\n01:14:15,072 --> 01:14:16,930\nAll right, so, there we go.\n\n1439\n01:14:16,930 --> 01:14:19,880\nThat is DRS in a nutshell.\n\n1440\n01:14:19,880 --> 01:14:24,560\nNow, we normally combine DRS with HA,\nwith the high availability feature, and\n\n1441\n01:14:24,560 --> 01:14:26,390\nthat's what we're gonna\ntake a look at next.\n\n1442\n01:14:26,390 --> 01:14:28,580\nBut I am running low on\ntime on this segment,\n\n1443\n01:14:28,580 --> 01:14:30,450\nso let's stop here and take a break.\n\n1444\n01:14:30,450 --> 01:14:33,120\nAnd when we get back we'll dive into HA.\n\n1445\n01:14:33,120 --> 01:14:34,570\nSo stay tuned.\n\n1446\n01:14:34,570 --> 01:14:35,706\nWe'll be back after this.\n\n1447\n01:14:35,706 --> 01:14:39,801\n[SOUND] All right,\nwelcome back everybody, so\n\n1448\n01:14:39,801 --> 01:14:46,416\nbefore the break we were talking about\ndistributed resource scheduler and\n\n1449\n01:14:46,416 --> 01:14:51,570\nwe got it set up,\nreally wasn't a big deal at all, was it?\n\n1450\n01:14:51,570 --> 01:14:55,260\nAnd we got it put in place, we talked\nabout it's power management side.\n\n1451\n01:14:55,260 --> 01:15:00,610\nOne thing that I didn't really get\ninto was when we assign the DRS and\n\n1452\n01:15:00,610 --> 01:15:06,890\nwe set it up to run, by default, it's\nreally just looking at CPU RAM, right?\n\n1453\n01:15:06,890 --> 01:15:10,680\nCPU and RAM, that's it's main thing\nthat it's looking at for balancing, but\n\n1454\n01:15:10,680 --> 01:15:14,920\nI did mention that it could\nmonitor storage and disk IO also.\n\n1455\n01:15:14,920 --> 01:15:19,640\nThe thing to remember for real life\nland is, it doesn't do that by default.\n\n1456\n01:15:19,640 --> 01:15:22,170\nWhat I just set up in the last segment.\n\n1457\n01:15:22,170 --> 01:15:23,780\nYes.\nIt will do load balancing.\n\n1458\n01:15:23,780 --> 01:15:26,460\nAnd it will base based on CPU and\nRAM utilization.\n\n1459\n01:15:26,460 --> 01:15:29,710\nBut it's not actually\nbalancing based on disk I/O.\n\n1460\n01:15:29,710 --> 01:15:37,300\nAnd the thing is with disk I/O moving a\nVM, moving a VM from one host to another,\n\n1461\n01:15:37,300 --> 01:15:42,510\nif they're using shared storage, if\nthey're using the same storage location,\n\n1462\n01:15:42,510 --> 01:15:47,490\nmoving the VM from host to\nanother doesn't impact disk I/O.\n\n1463\n01:15:47,490 --> 01:15:50,150\nIt's still the same disk I/O.\n\n1464\n01:15:50,150 --> 01:15:52,120\nSo, let me show you what I mean.\n\n1465\n01:15:52,120 --> 01:15:55,370\nOn my server,\nI've got these virtual machines.\n\n1466\n01:15:55,370 --> 01:16:00,350\nSo if I go into my virtual machines,\nI've got app dash web one through Web 3.\n\n1467\n01:16:00,350 --> 01:16:02,760\nSo, here's my three virtual machines.\n\n1468\n01:16:02,760 --> 01:16:06,677\nAnd if I take a look at each one and\nI go to their related objects and\n\n1469\n01:16:06,677 --> 01:16:10,903\ntheir data store, I can see that\nappweb1 is on shared data store 1.\n\n1470\n01:16:10,903 --> 01:16:14,398\nAnd appweb2 is on shared data store 1.\n\n1471\n01:16:14,398 --> 01:16:17,800\nAnd appweb3 is on shared data store 1.\n\n1472\n01:16:17,800 --> 01:16:20,140\nThey're all in the shared data store.\n\n1473\n01:16:20,140 --> 01:16:25,910\nSo if appweb1 starts generating a ton of\ndisk I/O and appweb2 starts generating\n\n1474\n01:16:25,910 --> 01:16:31,530\na ton of disk I/O They're both generating\ndisk I/O, on shared data store one.\n\n1475\n01:16:31,530 --> 01:16:37,825\nIt doesn't matter, if Web 1 is on host 1,\nand Web 2 is on host 2.\n\n1476\n01:16:37,825 --> 01:16:39,300\nThat doesn't matter.\n\n1477\n01:16:39,300 --> 01:16:43,240\nBecause where their discs\nare is the same exact place.\n\n1478\n01:16:43,240 --> 01:16:47,704\nThat's why the distributor resource\nscheduler doesn't balance disk I/O by\n\n1479\n01:16:47,704 --> 01:16:48,650\ndefault.\n\n1480\n01:16:48,650 --> 01:16:51,650\nFor a lot of people,\nthey've only got one SAN.\n\n1481\n01:16:51,650 --> 01:16:57,160\nThey only have one place to store\ntheir data, so it doesn't matter.\n\n1482\n01:16:57,160 --> 01:17:01,200\nBut, if you are trying to get\nthe best environment possible,\n\n1483\n01:17:01,200 --> 01:17:06,850\nthe most optimized environment possible,\nwhat you need are two data stores.\n\n1484\n01:17:06,850 --> 01:17:10,030\nTwo data stores preferably\non separate hardware.\n\n1485\n01:17:10,030 --> 01:17:11,280\nTwo separate SANs.\n\n1486\n01:17:11,280 --> 01:17:15,700\nAnd even more preferably,\nthat we have two HPAs that connect us to\n\n1487\n01:17:15,700 --> 01:17:19,540\neach of our hosts should have two\ncompletely separate disk controllers.\n\n1488\n01:17:19,540 --> 01:17:23,450\nEither fiber channel HBAs or\ndedicated iScuzzy adapters.\n\n1489\n01:17:23,450 --> 01:17:25,670\nThat are pointing to\nthese two different Sans.\n\n1490\n01:17:25,670 --> 01:17:32,090\nThen, we can distribute our resources\nacross multiple storage locations.\n\n1491\n01:17:32,090 --> 01:17:34,670\nThat's when we get the big benefit there.\n\n1492\n01:17:34,670 --> 01:17:37,670\nIt's an extra level of\nrequirement to do it.\n\n1493\n01:17:37,670 --> 01:17:40,460\nThe setup is actually pretty easy.\n\n1494\n01:17:40,460 --> 01:17:43,990\nYou might not have noticed the back\nend of the main vCenter screen.\n\n1495\n01:17:43,990 --> 01:17:46,610\nI've been working under\nclusters this whole time.\n\n1496\n01:17:46,610 --> 01:17:48,570\nSo when we go back to\nthe main vCenter screen,\n\n1497\n01:17:48,570 --> 01:17:50,650\nI've been going right here to clusters.\n\n1498\n01:17:50,650 --> 01:17:53,490\nAnd that's where I define the cluster\nthat we set up of the machines and\n\n1499\n01:17:53,490 --> 01:17:55,500\nwe turned on DRS for it, right?\n\n1500\n01:17:55,500 --> 01:17:57,800\nThat was CPU and RAM.\n\n1501\n01:17:57,800 --> 01:18:01,660\nBut if we wanna do it for storage, just\na little bit further down on my screen,\n\n1502\n01:18:01,660 --> 01:18:04,585\nI've got DataStore Clusters, all right?\n\n1503\n01:18:04,585 --> 01:18:08,980\nDatastore clusters are the same\nthing as the regular clusters except\n\n1504\n01:18:08,980 --> 01:18:13,570\nhere we're talking about storage,\nclustering our storage resources together.\n\n1505\n01:18:13,570 --> 01:18:18,120\nSo if I go into here, what I can do is,\nI can take existing data stores and\n\n1506\n01:18:18,120 --> 01:18:21,080\nI can combine them into\na clustered environment, and\n\n1507\n01:18:21,080 --> 01:18:26,600\nthen DRS can monitor that, and it can\nmove the virtual disk files, the VMDKs.\n\n1508\n01:18:26,600 --> 01:18:30,020\nIt can move them in between the two\ndifferent data stores, or three or\n\n1509\n01:18:30,020 --> 01:18:30,890\nten different data stores,\n\n1510\n01:18:30,890 --> 01:18:35,710\nhowever many it is you have,\nto balance out the disk I/O on the system.\n\n1511\n01:18:35,710 --> 01:18:39,360\nSo it's an extra step to\nget DRS to monitor disks.\n\n1512\n01:18:39,360 --> 01:18:41,910\nSo I'm gonna go ahead and do that really\nquick, I'm just gonna hit add here.\n\n1513\n01:18:43,110 --> 01:18:46,120\nNow, when we were talking\nabout balancing servers and\n\n1514\n01:18:46,120 --> 01:18:50,650\nputting them in a cluster, I commented on\nhow, boy you really need to have the same\n\n1515\n01:18:50,650 --> 01:18:55,505\nCPU in each of your cluster nodes, or if\nthey're different, they need to be close.\n\n1516\n01:18:55,505 --> 01:18:59,545\nThey need to all be the same Intel\nfamily or the same AMD family, and\n\n1517\n01:18:59,545 --> 01:19:04,645\nwe can use ECD to get around that and\nget our enhanced compatibility,\n\n1518\n01:19:04,645 --> 01:19:07,555\nor EVC, get all that in place.\n\n1519\n01:19:07,555 --> 01:19:10,620\nOn storage It's not quite the same.\n\n1520\n01:19:10,620 --> 01:19:13,900\nOn storage, you could actually have\ndifferent storage types in place.\n\n1521\n01:19:13,900 --> 01:19:18,335\nThey recommend that they be similar, so\nif you have 15,000 RPM drives in one, and\n\n1522\n01:19:18,335 --> 01:19:23,410\n10,000 RPM drives in the other, V sphere,\nit might not be able to see that, it\n\n1523\n01:19:23,410 --> 01:19:27,200\nmight not be able to understand it, so you\nmay miss out on some of the performance.\n\n1524\n01:19:27,200 --> 01:19:30,570\nSo, it is recommended that\nthey be the same, all right?\n\n1525\n01:19:30,570 --> 01:19:31,430\nBut you don't have to.\n\n1526\n01:19:31,430 --> 01:19:33,530\nYou can kind of cheat it if you want.\n\n1527\n01:19:33,530 --> 01:19:36,410\nSo what I'm gonna do,\nis I'm gonna create a data store cluster.\n\n1528\n01:19:36,410 --> 01:19:40,399\nAnd the main reason for creating a data\nstore cluster is for DRS and so you'll\n\n1529\n01:19:40,399 --> 01:19:44,470\nnotice, right here on the very first page,\nTurn on Storage DRS, all right?\n\n1530\n01:19:44,470 --> 01:19:46,510\nIf you're not gonna use storage DRS,\n\n1531\n01:19:46,510 --> 01:19:50,100\nthere's not a whole lot of point\nin creating a data store cluster.\n\n1532\n01:19:50,100 --> 01:19:52,863\nSo, that's why it's checked by default.\n\n1533\n01:19:52,863 --> 01:19:54,325\nThey expect me to do it.\n\n1534\n01:19:54,325 --> 01:19:56,020\nAll right.\n\n1535\n01:19:56,020 --> 01:19:58,087\nThen we pick where it's gonna be stored.\n\n1536\n01:19:58,087 --> 01:20:04,060\nI'll put it in my ITProTV Lab Data Center,\nall right.\n\n1537\n01:20:04,060 --> 01:20:06,730\nThen it's gonna ask me about DRS.\n\n1538\n01:20:06,730 --> 01:20:09,210\nAnd just like we saw on the other side,\nI'm picking.\n\n1539\n01:20:09,210 --> 01:20:12,250\nDo I want it to be fully automated,\nor no automation?\n\n1540\n01:20:12,250 --> 01:20:14,390\nI don't have a partial automation.\n\n1541\n01:20:14,390 --> 01:20:17,790\nRemember on the server side,\nno automation meant it would just give me\n\n1542\n01:20:17,790 --> 01:20:21,610\nrecommendations and then I could\nmove things around as I wanted.\n\n1543\n01:20:21,610 --> 01:20:26,710\nPartial automation said when a VM boots\nup, do the balancing and then that's it.\n\n1544\n01:20:26,710 --> 01:20:30,710\nAnd fully automated said when a VM boots\nup, or when a VM is running, go ahead and\n\n1545\n01:20:30,710 --> 01:20:31,700\ndo the balancing.\n\n1546\n01:20:31,700 --> 01:20:34,360\nWhat with storage,\nthere is no boot up, right?\n\n1547\n01:20:34,360 --> 01:20:35,960\nSo there's no need for partial.\n\n1548\n01:20:35,960 --> 01:20:38,420\nHere, it's either gonna be manual or\nfully automatic.\n\n1549\n01:20:38,420 --> 01:20:41,340\nWe're either gonna have it move it for\nus, or we'll move it ourselves.\n\n1550\n01:20:41,340 --> 01:20:42,700\nSo we can kind of pick which one we want.\n\n1551\n01:20:42,700 --> 01:20:45,370\nI'll go fully automated, all right.\n\n1552\n01:20:45,370 --> 01:20:46,670\nSo that's gonna be my automation level.\n\n1553\n01:20:46,670 --> 01:20:50,440\nYou'll see there are some advanced options\ndown here which are really tailored\n\n1554\n01:20:50,440 --> 01:20:52,880\nto you setting your own\nconfiguration parameters.\n\n1555\n01:20:52,880 --> 01:20:57,460\nThese are useful if you have specialized\nsans that have visibility into VMware.\n\n1556\n01:20:57,460 --> 01:20:59,060\nYou can kind of tweak things there.\n\n1557\n01:20:59,060 --> 01:21:01,700\nYou won't see that on the exam, all right.\n\n1558\n01:21:01,700 --> 01:21:03,990\nOn the next screen,\nwe get our DRS settings.\n\n1559\n01:21:03,990 --> 01:21:07,570\nSo, information here on when I\nwould want to try and balance.\n\n1560\n01:21:07,570 --> 01:21:11,770\nAnd you'll see that it's got enable\nIO metric for SDRS recommendation.\n\n1561\n01:21:11,770 --> 01:21:15,730\nSo it's going to be monitoring\ndisk I/O making recommendations.\n\n1562\n01:21:15,730 --> 01:21:18,630\nIf we turn off the monitoring,\nthat's a problem.\n\n1563\n01:21:18,630 --> 01:21:20,970\nIt's not going to be able to\nsee how things are going.\n\n1564\n01:21:20,970 --> 01:21:23,120\nIt's not going to be able to\nmake as good of decisions.\n\n1565\n01:21:23,120 --> 01:21:25,100\nIt's going to balance based\non just the number of\n\n1566\n01:21:25,100 --> 01:21:26,490\nhosts on a particular data store.\n\n1567\n01:21:27,870 --> 01:21:32,470\nYou can specify the thresholds,\nwhen we need to see things move around.\n\n1568\n01:21:32,470 --> 01:21:36,980\nIt does it based on two things,\none is disk space, the default is 80%.\n\n1569\n01:21:36,980 --> 01:21:41,310\nIf one data store hits 80% utilization,\nit'll try and\n\n1570\n01:21:41,310 --> 01:21:45,620\nmove things off to another data\nstore to balance that out.\n\n1571\n01:21:45,620 --> 01:21:48,680\nThat normally happens when\nwe're thin provisioning things.\n\n1572\n01:21:48,680 --> 01:21:51,320\nIf you're thin provisioning VMs so\n\n1573\n01:21:51,320 --> 01:21:54,000\nthey're not eating up all\ntheir data store from day one.\n\n1574\n01:21:54,000 --> 01:21:56,640\nThey start out very small and\nthey grow as you fill them up.\n\n1575\n01:21:56,640 --> 01:22:00,280\nAs they grow you hit 80% and\nso it moves something off.\n\n1576\n01:22:00,280 --> 01:22:02,150\nIf you're thick provisioning,\n\n1577\n01:22:02,150 --> 01:22:05,480\nthen you would know when you created\nthe VM that you were gonna exceed 80% and\n\n1578\n01:22:05,480 --> 01:22:08,030\nit'll recommend a different server for\nyou to use.\n\n1579\n01:22:09,105 --> 01:22:11,040\nI/O latency is the big one, though.\n\n1580\n01:22:11,040 --> 01:22:14,030\nIf a virtual machine requests a read or\na write, right?\n\n1581\n01:22:14,030 --> 01:22:17,170\nDisk input or output, reading or\nwriting to the disk, and\n\n1582\n01:22:17,170 --> 01:22:20,520\nit takes more than 15 milliseconds,\nis the default.\n\n1583\n01:22:20,520 --> 01:22:24,280\nIf it takes more than 15 milliseconds,\nthat's a red flag and\n\n1584\n01:22:24,280 --> 01:22:28,180\nDRS will want to move us to\nanother data storage, alright?\n\n1585\n01:22:28,180 --> 01:22:30,730\nYou can adjust that\nbased on your own needs,\n\n1586\n01:22:30,730 --> 01:22:33,780\nyou don't want it moving VM's if\nit's just a temporary thing and\n\n1587\n01:22:33,780 --> 01:22:38,040\nremember, DRS runs on a schedule, so\nit's gonna run once an hour or whenever,\n\n1588\n01:22:38,040 --> 01:22:43,500\nto actually reach in and\nmake those moves, all right.\n\n1589\n01:22:43,500 --> 01:22:45,560\nThen we pick the clusters and hosts.\n\n1590\n01:22:45,560 --> 01:22:48,660\nAnd so we're gonna be\neffecting the ITProTV cluster.\n\n1591\n01:22:48,660 --> 01:22:51,210\nYou'll see I can do this\non standalone host.\n\n1592\n01:22:51,210 --> 01:22:53,840\nThere's my server one and\nserver two, which are standalone.\n\n1593\n01:22:53,840 --> 01:22:57,420\nSo I could do it on them but normally\nwe're attaching it to a cluster, so\n\n1594\n01:22:57,420 --> 01:22:58,260\nthat's where I'm gonna go.\n\n1595\n01:22:59,450 --> 01:23:03,980\nAnd then we pick our data stores, now,\nI've got my shared datastore one,\n\n1596\n01:23:03,980 --> 01:23:08,010\nthat's where my VMs are now, but just for\nthis example, I've added two more.\n\n1597\n01:23:08,010 --> 01:23:11,200\nSo I've got shared datastore two and\nthree, and these guys are identical,\n\n1598\n01:23:11,200 --> 01:23:12,580\nthey're the same size.\n\n1599\n01:23:12,580 --> 01:23:14,390\nThey don't have to be identical,\n\n1600\n01:23:14,390 --> 01:23:18,040\nlike I said, especially size that\nreally doesn't matter on these.\n\n1601\n01:23:18,040 --> 01:23:21,710\nIt's talking more about like the speed,\nthe type of disk, and so on.\n\n1602\n01:23:23,740 --> 01:23:25,840\nOne thing I should mention here,\n\n1603\n01:23:25,840 --> 01:23:29,090\nnotice that all of my data\nstores are VMFS data stores.\n\n1604\n01:23:29,090 --> 01:23:32,200\nThe data store cluster\ndoesn not support NFS.\n\n1605\n01:23:32,200 --> 01:23:36,090\nSo if you built an NFS data store you can\nuse it, you can even throw VMs on it,\n\n1606\n01:23:36,090 --> 01:23:36,970\nit's fine.\n\n1607\n01:23:36,970 --> 01:23:39,070\nBut it can't be in a data store cluster.\n\n1608\n01:23:40,930 --> 01:23:44,150\nAll right, and the reason is it's\nnear impossible to measure disk I/O\n\n1609\n01:23:44,150 --> 01:23:44,870\nremotely for NFS.\n\n1610\n01:23:44,870 --> 01:23:47,500\nIt's just not something that they can do,\nbut VMFS, they can.\n\n1611\n01:23:48,570 --> 01:23:50,750\nAll right, so I'll choose those guys and\nI'll finish up.\n\n1612\n01:23:50,750 --> 01:23:55,740\nAnd the cool part here is, we can always\nadd and remove data storage to this as\n\n1613\n01:23:55,740 --> 01:24:00,630\nwe please, and when DRS runs it will\nrearrange our storage based on that.\n\n1614\n01:24:00,630 --> 01:24:05,910\nSo now I've added,\nI think they were like 97 gigs each or\n\n1615\n01:24:05,910 --> 01:24:08,690\nsomething, 2 data stores.\n\n1616\n01:24:08,690 --> 01:24:11,270\nAnd it combines them so\nmy capacity is now 195 gigs.\n\n1617\n01:24:12,270 --> 01:24:14,500\nWhen I go to store a VM somewhere,\n\n1618\n01:24:14,500 --> 01:24:18,130\nwhen I'm creating a virtual machine,\nI can put it in the cluster, and\n\n1619\n01:24:18,130 --> 01:24:22,160\nI can choose this data stored\ncluster as where the VM will reside.\n\n1620\n01:24:22,160 --> 01:24:26,630\nAnd I don't care which data store\nit goes in underneath that.\n\n1621\n01:24:26,630 --> 01:24:28,140\nDRS will balance that out for me.\n\n1622\n01:24:28,140 --> 01:24:30,510\nIt'll make sure that it gets\nput in the right place.\n\n1623\n01:24:30,510 --> 01:24:32,960\nSo I can see that it's up, it's going, and\n\n1624\n01:24:32,960 --> 01:24:35,840\nnow it's distributing the resources\nacross those two entries.\n\n1625\n01:24:35,840 --> 01:24:40,450\nSo pretty cool stuff,\ncouple extra steps involved, and really,\n\n1626\n01:24:40,450 --> 01:24:45,190\nhonestly guys, it's only useful if\nyou really have two separate SAN's.\n\n1627\n01:24:45,190 --> 01:24:46,680\nOr, at a minimum,\n\n1628\n01:24:46,680 --> 01:24:50,740\ntwo different pathways to the same SAN,\ndedicated NIC's or something like that.\n\n1629\n01:24:50,740 --> 01:24:52,140\nTo give you two different paths.\n\n1630\n01:24:52,140 --> 01:24:55,170\nIf these are going to the same place then\n\n1631\n01:24:55,170 --> 01:24:59,490\nit really defeats the purpose of having\na data store cluster at all, so.\n\n1632\n01:24:59,490 --> 01:25:02,660\nBut may places implement more\nthan one SAN specifically for\n\n1633\n01:25:02,660 --> 01:25:06,460\nthis reason to be able to\nbalance things out, all right.\n\n1634\n01:25:06,460 --> 01:25:08,320\nSo that's a data store cluster, and\n\n1635\n01:25:08,320 --> 01:25:11,530\nthey really go hand in hand\nwith our regular cluster.\n\n1636\n01:25:11,530 --> 01:25:13,930\nBut a regular cluster,\nthe CPU and RAM balancing,\n\n1637\n01:25:13,930 --> 01:25:16,240\nthat's something that\neverybody is gonna do.\n\n1638\n01:25:16,240 --> 01:25:20,780\nData store clusters are something that\na much smaller user set is gonna make use\n\n1639\n01:25:20,780 --> 01:25:23,790\nof, and that's why they break\nit off into a separate feature.\n\n1640\n01:25:23,790 --> 01:25:26,610\nBut now when I go to create\na virtual machine, we'll see some of\n\n1641\n01:25:26,610 --> 01:25:31,350\nthe new options that I have as I go\nthrough to create a new VM in environment.\n\n1642\n01:25:31,350 --> 01:25:32,220\nI'll create a new one.\n\n1643\n01:25:33,840 --> 01:25:35,170\nWhen we go to give it a name,\n\n1644\n01:25:35,170 --> 01:25:38,450\nI'll just call this one test,\nI can pick where I'm gonna put it.\n\n1645\n01:25:38,450 --> 01:25:39,790\nI'll go into ITPro TV lab.\n\n1646\n01:25:40,820 --> 01:25:44,600\nWhen it tells me to pick a compute\nresource I'll stick it in the IT Pro TV\n\n1647\n01:25:44,600 --> 01:25:46,710\ncluster, all right?\n\n1648\n01:25:46,710 --> 01:25:50,790\nWhen I select my storage,\nsee how I've got my other data stores and\n\n1649\n01:25:50,790 --> 01:25:53,170\nnow I have data store cluster.\n\n1650\n01:25:53,170 --> 01:25:54,580\nAnd I can choose that, and\n\n1651\n01:25:54,580 --> 01:25:57,650\nit shows the two individual data stores\nthat are a part of that cluster.\n\n1652\n01:25:57,650 --> 01:25:59,300\nThat means it's gonna be aware of that.\n\n1653\n01:25:59,300 --> 01:26:00,400\nAnd you can override it.\n\n1654\n01:26:00,400 --> 01:26:02,640\nSee how it's got disable storage DRS.\n\n1655\n01:26:02,640 --> 01:26:06,420\nIf I always want it to be right\nhere on this data store, I can.\n\n1656\n01:26:06,420 --> 01:26:11,220\nBut if I uncheck that, sure,\nI might pick data store 2 for now.\n\n1657\n01:26:11,220 --> 01:26:14,480\nBut in the future, it might move it\nover to data store 3 if need be,\n\n1658\n01:26:14,480 --> 01:26:16,420\nto balance out the workload it's handling.\n\n1659\n01:26:17,720 --> 01:26:20,240\nThat's what we add by punching\nin a data store cluster.\n\n1660\n01:26:21,340 --> 01:26:26,900\nSo if you want true full DRS, CPU,\nmemory, network, disk I/O, right?\n\n1661\n01:26:26,900 --> 01:26:32,019\nIf you want all of that, you've got to do\nthe cluster and the data store cluster.\n\n1662\n01:26:34,300 --> 01:26:37,580\nAlright, well that pretty\nmuch wraps up DRS for us.\n\n1663\n01:26:37,580 --> 01:26:39,780\nNow I've got a few more technologies\nI haven't talked about.\n\n1664\n01:26:39,780 --> 01:26:43,200\nWe still have high availability and\nfault tolerance that I want to get to, but\n\n1665\n01:26:43,200 --> 01:26:46,430\nI talked a little bit longer on some\nof the other topics this episode.\n\n1666\n01:26:46,430 --> 01:26:48,080\nI rambled too much.\n\n1667\n01:26:48,080 --> 01:26:50,830\nSo why don't we do this, we'll stop and\ntake a well no, we're not gonna stop and\n\n1668\n01:26:50,830 --> 01:26:52,340\ntake a break it's the end of the show.\n\n1669\n01:26:52,340 --> 01:26:54,660\nSo we'll go ahead and wrap the show up.\n\n1670\n01:26:54,660 --> 01:26:57,180\nWhat we'll do is, we'll do a part two.\n\n1671\n01:26:57,180 --> 01:26:57,720\nStay tuned.\n\n1672\n01:26:57,720 --> 01:27:00,540\nWe'll have another episode,\nwhere we jump in to high availability and\n\n1673\n01:27:00,540 --> 01:27:01,100\nfault tolerance.\n\n1674\n01:27:01,100 --> 01:27:03,280\nDefinitely good stuff to know.\n\n1675\n01:27:03,280 --> 01:27:04,330\nLet me remind you guys,\n\n1676\n01:27:04,330 --> 01:27:08,540\nif you have questions on any of this,\nfeel free to ask.\n\n1677\n01:27:08,540 --> 01:27:11,920\nLive during the show,\nyou can go to itpro.tv/live,\n\n1678\n01:27:11,920 --> 01:27:15,410\nyou'll see the chat room right beneath\nthe video, post your questions there,\n\n1679\n01:27:15,410 --> 01:27:17,490\nwe monitor and answer during the show.\n\n1680\n01:27:17,490 --> 01:27:20,230\nGot some great stuff in the chat\ntoday regarding some of the other\n\n1681\n01:27:20,230 --> 01:27:23,010\nVMware certifications and\ntraining costs and stuff.\n\n1682\n01:27:23,010 --> 01:27:26,530\nSo that's always going on in the chat\nroom, definitely take part in that.\n\n1683\n01:27:26,530 --> 01:27:30,530\nThe other thing is, if you have questions\nafter the show, when we're in re-runs, or\n\n1684\n01:27:30,530 --> 01:27:34,270\nif the studio is empty, then you can use\nour Q and A forums, there's a link at\n\n1685\n01:27:34,270 --> 01:27:37,040\nthe top of the page that says Q and\nA, it'll take you right in there,\n\n1686\n01:27:37,040 --> 01:27:40,510\nyou can post your questions, and\nwe monitor and answer after the show.\n\n1687\n01:27:40,510 --> 01:27:41,880\nSo, take advantage of that.\n\n1688\n01:27:41,880 --> 01:27:44,140\nThat resource is there for you.\n\n1689\n01:27:44,140 --> 01:27:46,350\nAll right, well,\nI hope you guys enjoyed this episode.\n\n1690\n01:27:46,350 --> 01:27:47,810\nStay tuned, cuz we got more coming up.\n\n1691\n01:27:47,810 --> 01:27:50,273\nWe got a lot more VMware after this,\nso I hope to see you then.\n\n1692\n01:27:50,273 --> 01:27:55,234\nSigning out from IT Pro TV, I'm Don Pezet,\nand I'll see you next time.\n\n1693\n01:27:55,234 --> 01:28:05,234\n[MUSIC]\n\n1694\n01:28:07,586 --> 01:28:13,010\n[SOUND]\n\n",
          "vimeoId": "103818527"
        },
        {
          "description": "In this episode Don continues exploring the high availability features inside VMware vSphere. He demonstrates how to configure vSphere HA and Fault Tolerance (FT) in a vSphere datacenter.",
          "length": "3215",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/010-vSphere-Clustering-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/010-vSphere-Clustering-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/010-vSphere-Clustering-Pt-2-sm.jpg",
          "title": "vSphere Clustering Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:01,206\n[SOUND]\n\n2\n00:00:01,206 --> 00:00:05,043\n[MUSIC]\n\n3\n00:00:05,043 --> 00:00:05,844\n[SOUND]\n\n4\n00:00:05,844 --> 00:00:15,271\n[MUSIC]\n\n5\n00:00:15,271 --> 00:00:22,353\n[SOUND]\n\n6\n00:00:22,353 --> 00:00:32,353\n[MUSIC]\n\n7\n00:00:33,474 --> 00:00:36,738\nGood morning, good afternoon,\nand good evening.\n\n8\n00:00:36,738 --> 00:00:39,112\nAnd welcome back to another\nepisode of ITProTV.\n\n9\n00:00:39,112 --> 00:00:41,250\nI'm your host, Don Pezet.\n\n10\n00:00:41,250 --> 00:00:43,640\nBack again with some more VMware training.\n\n11\n00:00:43,640 --> 00:00:47,484\nWe're diving right back into the VMware,\n\n12\n00:00:47,484 --> 00:00:53,050\nvSphere sort of IT professional\nVCP5-DCV Certification.\n\n13\n00:00:53,050 --> 00:00:56,250\nMaybe one of these days I'll get that\nsomeway that roles nice, and smooth, but\n\n14\n00:00:56,250 --> 00:00:58,010\nits just a long title for a certification.\n\n15\n00:00:59,160 --> 00:01:03,920\nPoint being, in our last [LAUGH] episode\nwe dived into high availability,\n\n16\n00:01:03,920 --> 00:01:06,880\nand I thought I could get through\nall of it in one episode, but\n\n17\n00:01:06,880 --> 00:01:09,780\nI talked too much as I tend to do.\n\n18\n00:01:09,780 --> 00:01:11,940\nSo, we're coming back at you\nwith episode number two, and\n\n19\n00:01:11,940 --> 00:01:15,280\nwe're gonna be taking a look at\nsome of the additional things\n\n20\n00:01:15,280 --> 00:01:20,450\nthat I didn't manage to get to, like\nhigh availability, and fault tolerance.\n\n21\n00:01:20,450 --> 00:01:22,980\nNow, at the end of the last\nepisode we dived into\n\n22\n00:01:22,980 --> 00:01:25,810\nthe Distributed Resource Schedule, DRS.\n\n23\n00:01:25,810 --> 00:01:29,350\nAnd one of the things that I said probably\ntoo many times in the episode was,\n\n24\n00:01:29,350 --> 00:01:32,070\nwe normally deploy DRS with HA.\n\n25\n00:01:32,070 --> 00:01:34,430\nThey're normally deployed together.\n\n26\n00:01:34,430 --> 00:01:37,700\nAnd the reason is DRS does load-balancing.\n\n27\n00:01:37,700 --> 00:01:41,512\nIt balances your virtual machines across\nyour physical hosts, while everything is\n\n28\n00:01:41,512 --> 00:01:45,620\nhappy, while everything [LAUGH] is\nrunning the way it's supposed to.\n\n29\n00:01:45,620 --> 00:01:50,080\nBut when something fails,\nDRS doesn't really know about it, and\n\n30\n00:01:50,080 --> 00:01:52,450\nit won't recover a VM that's failed.\n\n31\n00:01:52,450 --> 00:01:56,080\nIt's just balancing the VMs that are\nrunning, not the ones that have failed.\n\n32\n00:01:57,280 --> 00:02:01,810\nHA on the other hand, high availability,\nit doesn't do load-balancing.\n\n33\n00:02:01,810 --> 00:02:05,470\nBut what it does do,\nis recover VMs that have failed.\n\n34\n00:02:05,470 --> 00:02:10,420\nIf a VM fails on one host,\nHA will kick in, grab it, and\n\n35\n00:02:10,420 --> 00:02:12,650\nboot it on another host to get it up,\nand running.\n\n36\n00:02:13,680 --> 00:02:15,840\nNow, on a positive side we want that.\n\n37\n00:02:15,840 --> 00:02:18,190\nWe want our VMs [LAUGH] up,\nand running again.\n\n38\n00:02:18,190 --> 00:02:21,340\nOn a negative side,\nHA could take that failed VM, and\n\n39\n00:02:21,340 --> 00:02:25,400\nbring it up on a host that's already\noverloaded, or over burdened.\n\n40\n00:02:25,400 --> 00:02:28,351\nSo, and it may have to,\nit may not have a choice.\n\n41\n00:02:28,351 --> 00:02:31,910\nBut if you've got DRS,\nDRS will see the host go down,\n\n42\n00:02:31,910 --> 00:02:36,560\nit won't do anything about the VM's,\nbut the host it will see.\n\n43\n00:02:36,560 --> 00:02:39,250\nAnd it'll rebalance based\non the hosts that are left.\n\n44\n00:02:39,250 --> 00:02:41,610\nAnd when HA goes to bring this new VM up,\n\n45\n00:02:41,610 --> 00:02:44,770\nit'll place it somewhere where\nthere is available room.\n\n46\n00:02:44,770 --> 00:02:47,460\nAnd if there isn't, DRS will kick in,\nand move things around.\n\n47\n00:02:47,460 --> 00:02:48,820\nSo, they work together like a team.\n\n48\n00:02:48,820 --> 00:02:50,680\nIt's a good idea to have both of them.\n\n49\n00:02:50,680 --> 00:02:54,360\nAnd in a lab environment, sure,\nyou might use one, or the other.\n\n50\n00:02:54,360 --> 00:02:57,970\nOr in certain environments, you might use\none or the other, but in almost every\n\n51\n00:02:57,970 --> 00:03:03,280\nproduction environment I've worked in, we\nused them together as a team, HA, and DRS.\n\n52\n00:03:03,280 --> 00:03:05,880\nSo, in the last episode\nI had turned on DRS.\n\n53\n00:03:05,880 --> 00:03:06,840\nI just left that on.\n\n54\n00:03:06,840 --> 00:03:08,000\nNo sense in turning it off.\n\n55\n00:03:08,000 --> 00:03:12,140\nI left it turned on,\ncuz now I'm gonna stick HA on top of that.\n\n56\n00:03:12,140 --> 00:03:15,600\nSo HA, high availability,\nthat's the recovery piece.\n\n57\n00:03:15,600 --> 00:03:17,390\nThat's what's gonna help us\nget our systems back online,\n\n58\n00:03:17,390 --> 00:03:19,280\nwhen there's a failure.\n\n59\n00:03:19,280 --> 00:03:21,030\nTurning it on is pretty easy.\n\n60\n00:03:21,030 --> 00:03:22,500\nIn the cluster wizard,\n\n61\n00:03:22,500 --> 00:03:26,135\nwhen you create a cluster it offers right\nthere in the wizard to turn it on for you.\n\n62\n00:03:26,135 --> 00:03:27,440\nSo check mark, and you're done.\n\n63\n00:03:28,440 --> 00:03:29,260\nBut if you're like me, and\n\n64\n00:03:29,260 --> 00:03:31,620\nyou didn't do it through the wizard,\nyou've got to do it manually.\n\n65\n00:03:31,620 --> 00:03:34,100\nBut even manually, it's not very hard.\n\n66\n00:03:34,100 --> 00:03:37,780\nWe need to go into our cluster settings,\nand we can turn it on there.\n\n67\n00:03:37,780 --> 00:03:39,910\nSo, I'm just gonna browse into my cluster,\nand\n\n68\n00:03:39,910 --> 00:03:42,910\nthere's the ITProTV cluster that\nwe created in the last episode.\n\n69\n00:03:44,190 --> 00:03:46,720\nAnd when I go up here to Manage, and\n\n70\n00:03:46,720 --> 00:03:51,210\nSettings, I'll see vSphere DRS,\nand vSphere HA.\n\n71\n00:03:51,210 --> 00:03:54,080\nSo here's that high availability piece,\nand we can turn it on.\n\n72\n00:03:54,080 --> 00:03:57,100\nNow, it's turned off for\nme because I didn't turn it on.\n\n73\n00:03:57,100 --> 00:03:58,570\nSo, that's probably a problem.\n\n74\n00:03:58,570 --> 00:04:02,320\nSo I'll go in here, and\nhit Edit, and we'll turn it on.\n\n75\n00:04:02,320 --> 00:04:05,220\nNow, if we're happy with all the defaults,\nthat's all we've got to do.\n\n76\n00:04:05,220 --> 00:04:07,970\nWe turn it on, we hit OK,\nshortest episode ever.\n\n77\n00:04:09,140 --> 00:04:14,180\nBut there are a lot of things that we can\ntweak in here, to modify how it behaves.\n\n78\n00:04:14,180 --> 00:04:16,620\nFirst off,\nwe've got enable host-monitoring.\n\n79\n00:04:16,620 --> 00:04:17,750\nWhat's that all about?\n\n80\n00:04:17,750 --> 00:04:22,830\nWell, HA is gonna keep an eye\non the hosts in the cluster.\n\n81\n00:04:22,830 --> 00:04:24,970\nIt's gonna keep an eye on the VMs also.\n\n82\n00:04:24,970 --> 00:04:28,850\nIt's gonna do that regardless, but here\nwe can get it to keep an eye on the host.\n\n83\n00:04:28,850 --> 00:04:33,510\nIf a host fails, it will immediately\nrecognize that all the VMs attached\n\n84\n00:04:33,510 --> 00:04:36,100\nto the host have failed, and act upon it.\n\n85\n00:04:36,100 --> 00:04:39,840\nIt doesn't have to wait to detect\nthe VMs failing, if the host fails,\n\n86\n00:04:39,840 --> 00:04:43,160\nit knows the VMs are off,\nand it acts upon that.\n\n87\n00:04:43,160 --> 00:04:45,370\nSo typically, we want that option.\n\n88\n00:04:45,370 --> 00:04:48,100\nIf we expand it out though,\nyou'll see there's a little more to it.\n\n89\n00:04:48,100 --> 00:04:54,410\nWe can tweak the restart priority,\nand the host isolation response.\n\n90\n00:04:54,410 --> 00:04:55,600\nNow, what are these?\n\n91\n00:04:55,600 --> 00:04:57,630\nWell the VM restart priority.\n\n92\n00:04:57,630 --> 00:05:00,430\nWhen we go to reboot these VMs, so\n\n93\n00:05:00,430 --> 00:05:03,640\nthe VMs have failed, we need to\nboot them backup on another host.\n\n94\n00:05:03,640 --> 00:05:05,700\nWhen they boot up, well,\n\n95\n00:05:05,700 --> 00:05:08,470\nthat's gonna start to interfere\nwith our regular production use.\n\n96\n00:05:08,470 --> 00:05:10,070\nOur VMs that are already in place.\n\n97\n00:05:10,070 --> 00:05:12,340\nSo, how much priority\ndo I wanna give that?\n\n98\n00:05:12,340 --> 00:05:16,360\nDo I wanna give that high priority, so\nthey boot as fast as possible to get our\n\n99\n00:05:16,360 --> 00:05:18,400\nsystems recovered back\nto the way they were?\n\n100\n00:05:18,400 --> 00:05:19,790\nDo we want it to be low priority?\n\n101\n00:05:19,790 --> 00:05:22,620\nIn other words,\ndon't impact other systems just cuz\n\n102\n00:05:22,620 --> 00:05:24,490\nyou're recovering these failed ones.\n\n103\n00:05:24,490 --> 00:05:27,760\nIt's up to you how you define this\nthe more critical your systems are.\n\n104\n00:05:27,760 --> 00:05:30,430\nI'll go ahead, and leave it at medium.\n\n105\n00:05:30,430 --> 00:05:33,270\nNow, you might ask yourself\nwait a minute Don,\n\n106\n00:05:33,270 --> 00:05:35,800\ndon't we want these to come backup\n[LAUGH] as fast as possible?\n\n107\n00:05:35,800 --> 00:05:37,400\nWell, keep an eye on this.\n\n108\n00:05:37,400 --> 00:05:41,410\nThe defaults can be overridden for\nindividual virtual machines.\n\n109\n00:05:41,410 --> 00:05:44,440\nThat's where I like to do it,\non the individual VMs.\n\n110\n00:05:44,440 --> 00:05:46,790\nIf I have one VM that's mission critical,\nyeah,\n\n111\n00:05:46,790 --> 00:05:49,210\nI'm gonna set its restart\npriority to high.\n\n112\n00:05:49,210 --> 00:05:51,480\nAnd if I have VMs that are test,\nor research, or\n\n113\n00:05:51,480 --> 00:05:56,370\nlab type VMs, I'll set them to low,\nbut I like to do it on a per VM basis.\n\n114\n00:05:57,930 --> 00:06:00,460\nYou also have this host\nisolation response.\n\n115\n00:06:00,460 --> 00:06:04,700\nNow, if the host fails, and\nwe need to move the VMs off.\n\n116\n00:06:04,700 --> 00:06:06,990\nWell, if the host is\nactually dead in the water.\n\n117\n00:06:06,990 --> 00:06:08,400\nIf it lost power.\n\n118\n00:06:08,400 --> 00:06:10,250\nIt's completely offline.\n\n119\n00:06:10,250 --> 00:06:13,460\nWell, that's pretty obvious, it's got\na problem, we're not gonna mess with it.\n\n120\n00:06:13,460 --> 00:06:17,610\nBut what if it's something a little more\nsimple, like it lost a network link.\n\n121\n00:06:17,610 --> 00:06:19,390\nOne of its network connections died out.\n\n122\n00:06:19,390 --> 00:06:23,730\nOr 1 RAM chip out of the 16\nin it seems to have died, and\n\n123\n00:06:23,730 --> 00:06:25,760\nwe can't address it properly.\n\n124\n00:06:25,760 --> 00:06:29,220\nWell, in those scenarios, the host\nmight actually be up, and reachable.\n\n125\n00:06:29,220 --> 00:06:30,910\nWe can talk to the host.\n\n126\n00:06:30,910 --> 00:06:34,740\nBut it's just not working properly,\nit's not at 100%.\n\n127\n00:06:34,740 --> 00:06:39,732\nSo, the default option is when we\nflag a host as dead, if it's on,\n\n128\n00:06:39,732 --> 00:06:42,420\nwe leave it on, we just leave it on.\n\n129\n00:06:43,570 --> 00:06:47,850\nThe risk there with leaving it on,\nis that if the problem is intermittent,\n\n130\n00:06:47,850 --> 00:06:50,010\nand the problem goes away.\n\n131\n00:06:50,010 --> 00:06:52,640\nThen the host might be\nviewed as healthy again.\n\n132\n00:06:52,640 --> 00:06:54,010\nIf it's viewed as healthy,\n\n133\n00:06:54,010 --> 00:06:58,840\nthe next time DRS runs, DRS might\nload-balance some VMs over to it.\n\n134\n00:06:58,840 --> 00:07:02,420\nAnd now, it's back in production,\njust waiting for a failure again.\n\n135\n00:07:02,420 --> 00:07:07,700\nSo what we might do is we might say,\nIf it failed go ahead, and power it off.\n\n136\n00:07:07,700 --> 00:07:09,120\nOr go ahead, and shut it down.\n\n137\n00:07:09,120 --> 00:07:13,080\nShut it down means attempt a graceful shut\ndown, which will let us move the VMs off.\n\n138\n00:07:13,080 --> 00:07:17,950\nPower it off means we don't want to\ntrust what's on that machine already.\n\n139\n00:07:17,950 --> 00:07:20,900\nThere might be bad stuff in RAM, so\nwe don't wanna try, and migrate that,\n\n140\n00:07:20,900 --> 00:07:22,290\ndo a vMotion.\n\n141\n00:07:22,290 --> 00:07:25,010\nInstead, we'll just power it off,\nand call it a day.\n\n142\n00:07:25,010 --> 00:07:28,760\nBut these last two options are kind of\nnice because that machine will then stay\n\n143\n00:07:28,760 --> 00:07:31,220\noff until we come, and deal with it.\n\n144\n00:07:31,220 --> 00:07:34,394\nAnd so, as a system admin you've got\nthat chance to go, and get a vault, and\n\n145\n00:07:34,394 --> 00:07:38,060\ncertify the machine is healthy\nbefore you bring it back online.\n\n146\n00:07:38,060 --> 00:07:40,140\nYou might not want that if you're remote,\nand so\n\n147\n00:07:40,140 --> 00:07:42,390\nthe default option is\njust leave powered on.\n\n148\n00:07:44,400 --> 00:07:46,310\nWe've also got a few other things in here.\n\n149\n00:07:46,310 --> 00:07:47,353\nWe've got admission control.\n\n150\n00:07:47,353 --> 00:07:52,947\nAdmission control is\na really weird concept.\n\n151\n00:07:52,947 --> 00:07:59,201\nIf I have two hosts, like in my lab here,\nI've got ESX servers 2, or 3, and 4.\n\n152\n00:07:59,201 --> 00:08:00,311\nESX servers 3, and\n\n153\n00:08:00,311 --> 00:08:03,914\n4 Those two servers each have\na certain amount of memory in them.\n\n154\n00:08:03,914 --> 00:08:07,210\nAnd so they can handle a certain\namount of virtual machines.\n\n155\n00:08:07,210 --> 00:08:12,670\nIf one fails, the other one is gonna have\nto pick up the load, pick up the slack.\n\n156\n00:08:12,670 --> 00:08:16,090\nSo all the VMs running on server three are\ngonna have to relaunch on server four for\n\n157\n00:08:16,090 --> 00:08:16,650\nme to be healthy.\n\n158\n00:08:17,750 --> 00:08:22,510\nWell, if I want that work If I\nhave two nodes, and I want one\n\n159\n00:08:22,510 --> 00:08:27,260\nnode to carry the whole load, then I need\nto look at the load of one server, and\n\n160\n00:08:27,260 --> 00:08:29,640\nmake sure I've got enough memory,\nand disc,\n\n161\n00:08:29,640 --> 00:08:33,130\nand CPU, and all that on the other\nserver to handle that load.\n\n162\n00:08:33,130 --> 00:08:39,436\nWhich means in a two-node cluster no\nsingle node can be over 50% utilization.\n\n163\n00:08:39,436 --> 00:08:43,490\nIf it's over 50%,\nI've got one server running at 50% and\n\n164\n00:08:43,490 --> 00:08:45,440\none server running at 60%.\n\n165\n00:08:45,440 --> 00:08:49,000\nIf one of them fails,\nthat whole load moves to a single server,\n\n166\n00:08:49,000 --> 00:08:52,666\nI've got 110% on one server\nthat doesn't work, right?\n\n167\n00:08:52,666 --> 00:08:56,350\nSo we can use admission\ncontrol to help control that.\n\n168\n00:08:56,350 --> 00:08:59,880\nWe can limit things, like what our\n\n169\n00:08:59,880 --> 00:09:04,460\nmaximum amount of failures can be that\nwe can actually recover from and so on.\n\n170\n00:09:04,460 --> 00:09:08,910\nAnd so you'll see options in here like\nreserve fail over capacity, all right?\n\n171\n00:09:08,910 --> 00:09:13,350\nReserve fail over capacity says it's\ngonna look at how many hosts we have and\n\n172\n00:09:13,350 --> 00:09:17,170\nwe tell it how many hosts\nwe want to allow to fail.\n\n173\n00:09:17,170 --> 00:09:20,450\nAnd then we can reserve capacity for that.\n\n174\n00:09:20,450 --> 00:09:22,880\nSo if I have a two node cluster and\n\n175\n00:09:22,880 --> 00:09:27,070\nI'm reserving capacity for\none host, that means I need to have\n\n176\n00:09:27,070 --> 00:09:31,290\na second host that's completely able\nto cover the load of the first host.\n\n177\n00:09:31,290 --> 00:09:34,950\nSo I'm really gonna have an active\nstandby type environment.\n\n178\n00:09:34,950 --> 00:09:37,130\nOne server's gonna be active with VMs.\n\n179\n00:09:37,130 --> 00:09:40,060\nThe other server's gonna be standing\nby waiting to make resources\n\n180\n00:09:40,060 --> 00:09:41,650\navailable to the other one, all right.\n\n181\n00:09:41,650 --> 00:09:43,960\nIf the two servers are identical.\n\n182\n00:09:43,960 --> 00:09:47,270\nIf I have a three-node cluster though,\nor a four node or\n\n183\n00:09:47,270 --> 00:09:50,660\na five node, I don't need an entire\nmachine standing by anymore.\n\n184\n00:09:50,660 --> 00:09:53,470\nI can use resources\nspread across the nodes.\n\n185\n00:09:53,470 --> 00:09:57,700\nAnd so I specify how much\ncapacity I want to reserve.\n\n186\n00:09:57,700 --> 00:09:59,650\nHow many nodes do I want to plan for\nfailure.\n\n187\n00:10:01,100 --> 00:10:02,501\nAll right?\nAnd then down here,\n\n188\n00:10:02,501 --> 00:10:04,480\nwe can say how we measure that.\n\n189\n00:10:04,480 --> 00:10:07,180\nNow it measures it in terms\nin what are called slots.\n\n190\n00:10:07,180 --> 00:10:09,620\nAnd a slot represents a virtual machine.\n\n191\n00:10:09,620 --> 00:10:12,400\nHow many virtual machines am I gonna have?\n\n192\n00:10:12,400 --> 00:10:15,420\nAnd you'll see, your cover all\npowered on virtual machines.\n\n193\n00:10:15,420 --> 00:10:17,230\nThat's my slot size.\n\n194\n00:10:17,230 --> 00:10:20,220\nIf a virtual machine is powered on,\nit's one slot.\n\n195\n00:10:20,220 --> 00:10:24,020\nBut there are times where you have one\nvirtual machine with a ton of memory or\n\n196\n00:10:24,020 --> 00:10:25,920\na ton of CPUs, right?\n\n197\n00:10:25,920 --> 00:10:28,680\nVirtual cores assigned to it.\n\n198\n00:10:28,680 --> 00:10:32,490\nAnd it might count as two slots or\neven three slots in some environments.\n\n199\n00:10:32,490 --> 00:10:36,980\nSo it's figuring that out on its own and\nnormally we want to trust what its got.\n\n200\n00:10:36,980 --> 00:10:39,660\nWe just go with the defaults and\nthat's it.\n\n201\n00:10:39,660 --> 00:10:42,940\nBut you can choose to do what's\ncalled a fixed slot size.\n\n202\n00:10:42,940 --> 00:10:48,320\nIn a fixed slot size you specify\nhow you divide up CPU and\n\n203\n00:10:48,320 --> 00:10:51,800\nhow you divide up memory to\ndesignate what a slot is.\n\n204\n00:10:51,800 --> 00:10:55,430\nAnd you'll see the default for\nchoosing fixed is 32 megahertz for\n\n205\n00:10:55,430 --> 00:10:58,490\na CPU and 100 megabytes for memory.\n\n206\n00:10:58,490 --> 00:11:00,970\nSo if I've got a server\nwith a gig of memory,\n\n207\n00:11:00,970 --> 00:11:04,450\nthat's actually gonna be ten memory slots.\n\n208\n00:11:04,450 --> 00:11:08,419\nAnd if it's got a one gigahertz processor\nassigned to it, that's gonna be what,\n\n209\n00:11:08,419 --> 00:11:09,520\n300 CPU slots.\n\n210\n00:11:09,520 --> 00:11:12,980\nSo that's how it's measuring that.\n\n211\n00:11:12,980 --> 00:11:15,850\nAnd those are really big numbers there,\nbut that's how it divides it.\n\n212\n00:11:15,850 --> 00:11:18,260\nAnd it measures that\nagainst the other servers.\n\n213\n00:11:18,260 --> 00:11:22,510\nSo I'm bringing a new server up\nthat's got 16 gigs of RAM in it.\n\n214\n00:11:22,510 --> 00:11:25,100\nThat new host comes up\nwith 16 gigs of RAM.\n\n215\n00:11:25,100 --> 00:11:28,960\nI just created 160 new memory slots.\n\n216\n00:11:28,960 --> 00:11:31,030\nAnd so\nnow I can have those fail over 161,600?\n\n217\n00:11:31,030 --> 00:11:33,660\nI might have bad math there.\n\n218\n00:11:33,660 --> 00:11:35,010\nBut you guys get the idea there.\n\n219\n00:11:35,010 --> 00:11:36,680\nSo it's measuring in these slots.\n\n220\n00:11:36,680 --> 00:11:40,520\nFor the most part, we just want to go with\ncover all powered on virtual machines.\n\n221\n00:11:40,520 --> 00:11:43,355\nIf a virtual machine is powered off,\nwe don't count it,\n\n222\n00:11:43,355 --> 00:11:46,210\ncuz it's not actually consuming memory or\nCPU.\n\n223\n00:11:46,210 --> 00:11:49,500\nSo we just look what's there and\napply the slots to it.\n\n224\n00:11:49,500 --> 00:11:51,490\nThe system is what uses\nthe slots to calculate so\n\n225\n00:11:51,490 --> 00:11:53,310\nwe don't normally need to\nget involved in that at all.\n\n226\n00:11:54,792 --> 00:11:55,460\nAll right,\n\n227\n00:11:55,460 --> 00:11:59,440\nyou'll also see down here where we can\ndefine other things like percentages.\n\n228\n00:11:59,440 --> 00:12:02,120\nRight.\nPercentages can be a little more useful.\n\n229\n00:12:02,120 --> 00:12:04,970\nIn my case I have two servers.\n\n230\n00:12:04,970 --> 00:12:07,330\nSo, if I start doing slot calculations and\nthings like that,\n\n231\n00:12:07,330 --> 00:12:09,250\nit's gonna get really weird really fast.\n\n232\n00:12:09,250 --> 00:12:12,970\nAnd I don't want to do a straight up\ncalculation because it's gonna end up\n\n233\n00:12:12,970 --> 00:12:16,390\nreserving one entire server to carry\nthe load for the other entire server.\n\n234\n00:12:16,390 --> 00:12:18,210\nSo that's not what I want either.\n\n235\n00:12:18,210 --> 00:12:20,490\nSo I might choose to do percentages.\n\n236\n00:12:20,490 --> 00:12:23,890\nSo I could say reserve fail\nover CPU capacity, 50%.\n\n237\n00:12:23,890 --> 00:12:27,010\nAnd reserve fail over memory, 50%.\n\n238\n00:12:27,010 --> 00:12:33,330\nNow, when I go to create VMs on my hosts,\nit'll stop me at 50%.\n\n239\n00:12:33,330 --> 00:12:35,620\nI might have 16 gigs of RAM, But\n\n240\n00:12:35,620 --> 00:12:39,050\nafter I allocate eight gigs of ram,\nit'll tell me I have none left.\n\n241\n00:12:39,050 --> 00:12:42,510\nAnd that because it's reserving 50%,\nfor my failover.\n\n242\n00:12:42,510 --> 00:12:45,530\nIn a two node cluster that's\nnormally what we want.\n\n243\n00:12:45,530 --> 00:12:49,270\nif we go to a three node cluster,\nthen we would need at least 33%,\n\n244\n00:12:49,270 --> 00:12:51,020\nto be able to have one node fail.\n\n245\n00:12:51,020 --> 00:12:54,150\nAnd if it went to four nodes\nwe would need 25% to allow for\n\n246\n00:12:54,150 --> 00:12:55,540\none node to fail and so on.\n\n247\n00:12:55,540 --> 00:13:00,340\nThis is what it's reserving\nto make available for fail.\n\n248\n00:13:00,340 --> 00:13:05,210\nAll right another option is you can use\nwhat's called a dedicated failover host.\n\n249\n00:13:05,210 --> 00:13:06,890\nThis is where you have one or\n\n250\n00:13:06,890 --> 00:13:10,770\nmore physical servers that\nare flagged as failover hosts.\n\n251\n00:13:10,770 --> 00:13:13,770\nThat they do absolutely nothing,\nthey just sit there and\n\n252\n00:13:13,770 --> 00:13:15,692\nwait for a failure, all right.\n\n253\n00:13:15,692 --> 00:13:19,280\nNow at first you might look at that and\nsay, man that's bad,\n\n254\n00:13:19,280 --> 00:13:22,700\nwhy would I want to have hardware sitting\nthere that I'm not using, all right.\n\n255\n00:13:22,700 --> 00:13:24,820\nWhy would I want to waste that?\n\n256\n00:13:24,820 --> 00:13:28,140\nAnd in a small or medium environment, I\ncan see that, I can see that argument and\n\n257\n00:13:28,140 --> 00:13:29,220\nit makes sense.\n\n258\n00:13:29,220 --> 00:13:32,900\nBut in an enterprise environment where\nthis is mission critical hardware,\n\n259\n00:13:32,900 --> 00:13:36,390\nyou've got servers that\nare sitting there under no load.\n\n260\n00:13:36,390 --> 00:13:39,320\nAnd that means their hard\ndrives aren't thrashing.\n\n261\n00:13:39,320 --> 00:13:41,250\nTheir CPUs aren't running at 100%.\n\n262\n00:13:41,250 --> 00:13:43,280\nTheir lifetimes are gonna be longer.\n\n263\n00:13:43,280 --> 00:13:44,940\nSo when a failure does happen,\n\n264\n00:13:44,940 --> 00:13:48,740\nthese machines are gonna be healthier and\nready to go and kick in.\n\n265\n00:13:48,740 --> 00:13:51,250\nThey're sitting there, and\nthey're off and running.\n\n266\n00:13:51,250 --> 00:13:54,910\nYou operational servers,\nyou can use 100% of their resources.\n\n267\n00:13:54,910 --> 00:13:59,280\nYou don't have to do these reservations up\nhere because you've got dedicated boxes\n\n268\n00:13:59,280 --> 00:14:00,292\nready and waiting.\n\n269\n00:14:00,292 --> 00:14:02,720\nAll right.\nAnd that's kind of a nice thing.\n\n270\n00:14:02,720 --> 00:14:04,530\nSo when the budget allows for\n\n271\n00:14:04,530 --> 00:14:08,130\nit in a larger organization,\nit's a great option to use.\n\n272\n00:14:08,130 --> 00:14:10,190\nNow I'm gonna go ahead and\nchoose this last one,\n\n273\n00:14:10,190 --> 00:14:12,870\nwhich is,\ndo not reserve failover capacity.\n\n274\n00:14:12,870 --> 00:14:17,030\nMy servers are scaled pretty low and\nI've only got two of them in this cluster.\n\n275\n00:14:17,030 --> 00:14:19,710\nAnd a two node cluster\nis always a weird thing.\n\n276\n00:14:19,710 --> 00:14:23,110\nYou really wanna have three or\nmore if you can.\n\n277\n00:14:24,280 --> 00:14:27,520\nBut if I don't choose do not reserve\nI'm gonna get some warnings.\n\n278\n00:14:27,520 --> 00:14:28,310\nActually forget it.\n\n279\n00:14:28,310 --> 00:14:32,400\nI'll go ahead and turn it on so we can\nsee If I choose to define my failover\n\n280\n00:14:32,400 --> 00:14:35,900\ncapacity here as saying allow for\none host to fail,\n\n281\n00:14:35,900 --> 00:14:39,050\nthen my second host is gonna be able\nto entirely compensate for that.\n\n282\n00:14:39,050 --> 00:14:41,930\nBut since I've only got two nodes\nit's gonna give me a red flag.\n\n283\n00:14:41,930 --> 00:14:43,540\nSo I'll see some warnings\na little bit later.\n\n284\n00:14:43,540 --> 00:14:44,819\nYou'll get an idea of\nwhat that looks like.\n\n285\n00:14:47,220 --> 00:14:49,770\nSome of the other things we can specific.\n\n286\n00:14:49,770 --> 00:14:52,790\nThat was all host monitoring.\n\n287\n00:14:52,790 --> 00:14:55,270\nYou also have VM monitoring.\n\n288\n00:14:55,270 --> 00:14:57,770\nDo we want to watch the virtual machines.\n\n289\n00:14:57,770 --> 00:15:00,170\nThat's usually a good thing to turn on.\n\n290\n00:15:00,170 --> 00:15:02,110\nIf we turn that option on,\n\n291\n00:15:02,110 --> 00:15:07,540\nwhat it's gonna do is it's gonna let us\ncommunicate with the virtual machine and\n\n292\n00:15:07,540 --> 00:15:11,350\nmake sure it's healthy Now the way\nit works is one of two ways.\n\n293\n00:15:11,350 --> 00:15:13,620\nYou can do VM Monitoring only.\n\n294\n00:15:13,620 --> 00:15:18,310\nAnd what happens is your host will\nstart to monitor the VM tools.\n\n295\n00:15:18,310 --> 00:15:21,488\nRemember the VM tools we\ninstalled back in episode four or\n\n296\n00:15:21,488 --> 00:15:23,680\nfive earlier in the series?\n\n297\n00:15:23,680 --> 00:15:25,010\nWe brought up a virtual machine,\n\n298\n00:15:25,010 --> 00:15:28,730\na guest, and\nin the guest OS we installed the VM tools.\n\n299\n00:15:28,730 --> 00:15:31,915\nWell the cluster can monitor that,\nand HA can monitor that.\n\n300\n00:15:31,915 --> 00:15:36,120\nAnd if the VM tools stop responding,\nlike, if that service gets stopped.\n\n301\n00:15:36,120 --> 00:15:38,360\nIt will recognize that as a failure and\n\n302\n00:15:38,360 --> 00:15:42,060\nit will initiate failover to\nmove the VM somewhere else.\n\n303\n00:15:42,060 --> 00:15:46,960\nThe other option is VM and\napplication monitoring.\n\n304\n00:15:46,960 --> 00:15:49,450\nWell, VM monitoring,\nthat's monitoring VM tools.\n\n305\n00:15:49,450 --> 00:15:50,671\nWe already know what that one is.\n\n306\n00:15:50,671 --> 00:15:53,190\nBut application monitoring.\n\n307\n00:15:53,190 --> 00:15:57,247\nVMware has a fully open vSphere API.\n\n308\n00:15:57,247 --> 00:15:58,526\nThe programming interface.\n\n309\n00:15:58,526 --> 00:16:01,853\nSo developers,\nwhen they write their applications,\n\n310\n00:16:01,853 --> 00:16:03,960\nthey can make it VMware aware.\n\n311\n00:16:03,960 --> 00:16:08,030\nThey can make it know that it's\nrunning on top of vSphere, and ESXi.\n\n312\n00:16:08,030 --> 00:16:11,555\nAnd if it knows, it can also talk to HA.\n\n313\n00:16:11,555 --> 00:16:14,848\nIt can tell HA how to monitor it,\nand know the application is working.\n\n314\n00:16:14,848 --> 00:16:18,807\nReally handy, if you're running\nsomething like Oracle, Oracle 11G.\n\n315\n00:16:18,807 --> 00:16:22,296\nThey've got a little module in there\nthat makes it VMware aware, and so\n\n316\n00:16:22,296 --> 00:16:25,240\nit can communicate when there's a failure.\n\n317\n00:16:25,240 --> 00:16:30,320\nJust because the VMware tools are running,\nit doesn't mean your application is.\n\n318\n00:16:30,320 --> 00:16:33,030\nSo it's nice to have your application be\nable to report that back to be able to\n\n319\n00:16:33,030 --> 00:16:38,170\nsee that failure, and\nknow that there's a problem.\n\n320\n00:16:38,170 --> 00:16:42,610\nNow, another thing it does, that it\ndoesn't mention here in my dropdown box.\n\n321\n00:16:42,610 --> 00:16:49,700\nRegardless of which one I choose, its also\nmonitoring disk I/O, and CPU utilization.\n\n322\n00:16:50,780 --> 00:16:54,400\nIf it sees the CPU\nutilization drop to zero, or\n\n323\n00:16:54,400 --> 00:16:57,730\nif sees the disk I/O stop,\nin other words if the machine is frozen.\n\n324\n00:16:57,730 --> 00:17:00,720\nThat's really the only time your CPU,\nand disk utilization would be zero.\n\n325\n00:17:00,720 --> 00:17:04,290\nSo, if it sees the machine not\ninteracting with the hardware.\n\n326\n00:17:04,290 --> 00:17:07,390\nThen it knows it's frozen, and\nit'll recognize that as a failure too.\n\n327\n00:17:07,390 --> 00:17:09,390\nSo, it's not an option\nhere in the dropdown, but\n\n328\n00:17:09,390 --> 00:17:12,197\nthey do mention it in the description\nthat it's monitoring I/Os,\n\n329\n00:17:12,197 --> 00:17:14,980\nInput/Output operations,\nso it's checking that out.\n\n330\n00:17:16,950 --> 00:17:20,280\nThen we've got our monitoring sensitivity,\nnotice the default is set to high.\n\n331\n00:17:20,280 --> 00:17:22,970\nIt wants to notice as fast as possible.\n\n332\n00:17:22,970 --> 00:17:26,440\nIf there's a failure we wanna act\nright away to minimize our downtime.\n\n333\n00:17:26,440 --> 00:17:30,616\nRemember, when a failure's detected, it's\ngot to boot this VM up on another host.\n\n334\n00:17:30,616 --> 00:17:34,783\nAnd so, our boot time is gonna\nimpact how long we're down.\n\n335\n00:17:34,783 --> 00:17:38,009\nWell, if we take a long\ntime to detect the failure,\n\n336\n00:17:38,009 --> 00:17:41,171\nthen it's gonna take even\nlonger to get the VM up.\n\n337\n00:17:41,171 --> 00:17:45,463\nSo, by moving this up to high, it\nensures that we get the fastest possible\n\n338\n00:17:45,463 --> 00:17:50,425\ndetection, and you can lower it,\nnotice the times down here are changing.\n\n339\n00:17:50,425 --> 00:17:54,455\nSee how on low, my failure interval\nis 120 seconds, two minutes.\n\n340\n00:17:54,455 --> 00:18:00,086\nMy minimum up time is 480\nseconds that is eight minutes.\n\n341\n00:18:00,086 --> 00:18:04,710\nAnd then I've got my maximum per VM\nresets, and my reset timer window.\n\n342\n00:18:04,710 --> 00:18:07,630\nBasically, if it looks like a VM is down,\n\n343\n00:18:07,630 --> 00:18:10,730\nwe wait two minutes to make\nsure it's actually down.\n\n344\n00:18:10,730 --> 00:18:15,340\nAnd if it still is, then we move it\nover to another host, two minutes.\n\n345\n00:18:15,340 --> 00:18:17,730\nAnd we still have a reboot on top of that.\n\n346\n00:18:17,730 --> 00:18:22,960\nBut if we go to high, it monitors the VM,\nand the failure interval is 30 seconds.\n\n347\n00:18:22,960 --> 00:18:26,900\nIf we don't hear from that machine for\n30 seconds, we'll initiate that failover.\n\n348\n00:18:26,900 --> 00:18:29,910\nWe'll move it over to another host,\nmuch smaller.\n\n349\n00:18:29,910 --> 00:18:32,880\nAnd you can go Custom, and\nyou'll notice, in Custom,\n\n350\n00:18:32,880 --> 00:18:35,520\nwe can take that down even further.\n\n351\n00:18:35,520 --> 00:18:37,550\nNow, you don't wanna get too aggressive.\n\n352\n00:18:37,550 --> 00:18:40,116\nIf you're too aggressive, and\nmaybe the server just got busy, and so\n\n353\n00:18:40,116 --> 00:18:41,910\nwe don't hear that heartbeat message.\n\n354\n00:18:41,910 --> 00:18:45,600\nWe might cause a failover to happen,\nwhen it wasn't necessary.\n\n355\n00:18:45,600 --> 00:18:49,860\nBut you might wanna go to five seconds, or\nthree seconds, or something really short.\n\n356\n00:18:49,860 --> 00:18:53,416\nYou can do that, and now if the system\nis frozen, or whatever it can flip over.\n\n357\n00:18:57,238 --> 00:19:00,848\nYou can also set\nthe maximum per VM resets.\n\n358\n00:19:00,848 --> 00:19:04,760\nYou don't wanna VM just jumping\nfrom host to host to host to host.\n\n359\n00:19:04,760 --> 00:19:08,470\nIf your application has died, and it's\nactually a problem with the application.\n\n360\n00:19:08,470 --> 00:19:09,620\nYou don't wanna to just sit there, and\n\n361\n00:19:09,620 --> 00:19:12,190\nbounce across all of your VM\nhosts all night long, and\n\n362\n00:19:12,190 --> 00:19:14,710\nyou come in in the morning, and\nyou see that it's done vMotion.\n\n363\n00:19:14,710 --> 00:19:18,830\nOr just rebooted the VM 100 times\ncuz it kept going over, and over.\n\n364\n00:19:18,830 --> 00:19:19,780\nSo, you can set a limit.\n\n365\n00:19:19,780 --> 00:19:20,400\nThe limit is three.\n\n366\n00:19:20,400 --> 00:19:24,130\nIf it tries to reboot the VM\nthree times on different hosts,\n\n367\n00:19:24,130 --> 00:19:27,330\nand it's still not functional\nthen it just gives up.\n\n368\n00:19:27,330 --> 00:19:28,879\nThe VM is down, and\nyou're gonna have to get involved.\n\n369\n00:19:32,063 --> 00:19:36,561\nNow, the heartbeat that's happening,\nby default, the heartbeat for the hosts,\n\n370\n00:19:36,561 --> 00:19:40,363\nit's just happening right across\nthe VM current network adapter, and\n\n371\n00:19:40,363 --> 00:19:42,710\nthey're communicating that way.\n\n372\n00:19:42,710 --> 00:19:44,840\nBut an even better way to do it,\n\n373\n00:19:44,840 --> 00:19:47,850\nis to communicate through\na data store heartbeat.\n\n374\n00:19:47,850 --> 00:19:51,290\nAll of these servers are gonna\nhave to have shared storage.\n\n375\n00:19:51,290 --> 00:19:56,100\nIf one server, or one host, wants to boot\na guest VM that's stored on another host.\n\n376\n00:19:56,100 --> 00:19:59,070\nThey've got to have access to\nthe same hard drives, shared storage.\n\n377\n00:19:59,070 --> 00:20:01,420\nSo, we can use shared storage for\nthat heart beat, and\n\n378\n00:20:01,420 --> 00:20:03,400\nthat's the most reliable way to see it.\n\n379\n00:20:03,400 --> 00:20:08,420\nSo, you can see in here it's got set for\nautomatically selected data store access,\n\n380\n00:20:08,420 --> 00:20:11,080\nor use a data store from a specified list.\n\n381\n00:20:11,080 --> 00:20:15,880\nOr use them from a specified list, and\ncomplement automatically if needed.\n\n382\n00:20:15,880 --> 00:20:17,020\nThat's the nicest option,\n\n383\n00:20:17,020 --> 00:20:20,760\nbecause it allows you to pick what data\nstorage you used for the heartbeat.\n\n384\n00:20:20,760 --> 00:20:24,080\nBut if there is ever a problem, if there's\nnot enough, it can add more to it.\n\n385\n00:20:24,080 --> 00:20:26,460\nIt can just dynamically correct for\nthe issue.\n\n386\n00:20:26,460 --> 00:20:29,393\nReally useful if a data store fails,\nthat you wanna have that kind of backup.\n\n387\n00:20:29,393 --> 00:20:34,105\nHere I can go through, and I can pick who\nI wanna use, and it's listing my VMFS data\n\n388\n00:20:34,105 --> 00:20:38,704\nstores, and if they're in a cluster, or\nnot, I can pick who it is I want to use.\n\n389\n00:20:38,704 --> 00:20:43,570\nSo for me, maybe I'll use data store 3,\nI'll flag that one.\n\n390\n00:20:43,570 --> 00:20:47,680\nAnd you can do more than one, so that it\ncan do heartbeats that way if they want.\n\n391\n00:20:47,680 --> 00:20:50,780\nOr you can just pick a single one,\nit's up to you.\n\n392\n00:20:50,780 --> 00:20:54,140\nSo, if we leave it as\nautomatically select,\n\n393\n00:20:54,140 --> 00:20:55,800\nthen it's just gonna figure it out for us.\n\n394\n00:20:55,800 --> 00:20:58,490\nWe don't have to mess with it,\nit'll figure out whatever is the best one.\n\n395\n00:21:01,980 --> 00:21:05,966\nAnd then Advanced Options again,\nif you have a hardware that is able to\n\n396\n00:21:05,966 --> 00:21:10,170\ninteract with VMware, and vSphere,\nthen you can add in Custom options.\n\n397\n00:21:12,250 --> 00:21:16,610\nBut otherwise, that's pretty much it for\ngetting HA turned on.\n\n398\n00:21:16,610 --> 00:21:21,010\nOnce that turns on, I can hit OK,\nand now it's gonna turn it on,\n\n399\n00:21:21,010 --> 00:21:22,280\nit'll take a moment.\n\n400\n00:21:22,280 --> 00:21:26,030\nIt's probably gonna be a little mad at\nme cuz I've got a two-node cluster, and\n\n401\n00:21:26,030 --> 00:21:29,240\nI might not have the resources available\nto handle failover, so we'll see.\n\n402\n00:21:29,240 --> 00:21:31,510\nI've got a warning signal right now.\n\n403\n00:21:31,510 --> 00:21:33,210\nI'm gonna wait a moment cuz\nthat will normally go away.\n\n404\n00:21:33,210 --> 00:21:36,892\nWhen it starts to set this up, it's\nmissing heartbeats, and things like that,\n\n405\n00:21:36,892 --> 00:21:40,300\nso it's still kind of going through\nthat configuration process.\n\n406\n00:21:40,300 --> 00:21:41,870\nSo, you may need to give it a moment.\n\n407\n00:21:41,870 --> 00:21:44,890\nIf it doesn't clear shortly though,\nthen we may need to find out why.\n\n408\n00:21:46,540 --> 00:21:52,360\nSo, we'll give that a second here, and\nI'm just kind of taking a peek here.\n\n409\n00:21:52,360 --> 00:21:54,820\nMy ITProTV cluster does\nhave a little warning.\n\n410\n00:21:54,820 --> 00:21:58,520\nBut if I go under monitoring, and issues,\noh, yeah, there it is right there.\n\n411\n00:21:58,520 --> 00:22:03,580\nSee, how I've got insufficient\nresources to satisfy HA failover.\n\n412\n00:22:03,580 --> 00:22:06,670\nWhat it's telling me is,\nI've got a two-node cluster,\n\n413\n00:22:06,670 --> 00:22:08,539\nand neither of them\nhave anything reserved.\n\n414\n00:22:09,570 --> 00:22:13,259\nSo, if one fails, it might have to take up\nthe entire other server to deal with it,\n\n415\n00:22:13,259 --> 00:22:15,000\nbut I haven't reserved that.\n\n416\n00:22:15,000 --> 00:22:17,250\nSo it's upset about it, and\nit's giving me that warning.\n\n417\n00:22:17,250 --> 00:22:18,270\nThat warning didn't go away.\n\n418\n00:22:19,440 --> 00:22:23,150\nSo, that's just letting me\nknow that in a failure,\n\n419\n00:22:23,150 --> 00:22:26,670\nHA will try to bring up\nas many VMs as it can.\n\n420\n00:22:26,670 --> 00:22:31,220\nBut it very likely won't be\nable to bring up all of my VMs.\n\n421\n00:22:31,220 --> 00:22:34,020\nSo, I don't have a truly\nredundant environment.\n\n422\n00:22:34,020 --> 00:22:35,950\nSo to fix that, I really need to go,\n\n423\n00:22:35,950 --> 00:22:40,450\nand edit my HA configuration\nto put in some limits.\n\n424\n00:22:40,450 --> 00:22:42,210\nAnd that was under Admission Control.\n\n425\n00:22:42,210 --> 00:22:46,160\nThat's where we control the nodes\nthat are being added in.\n\n426\n00:22:46,160 --> 00:22:49,040\nAnd you'll see, where I've got\nthat define failover capacity.\n\n427\n00:22:49,040 --> 00:22:52,420\nWell, if I change that, and\njust do it as a static reservation.\n\n428\n00:22:52,420 --> 00:22:57,856\nIf I reserve 50% of my CPU, and 50% of\nmy memory it should be okay with that.\n\n429\n00:23:01,312 --> 00:23:03,529\nSo I'll go ahead, and set that.\n\n430\n00:23:03,529 --> 00:23:04,191\nIt's making the change now.\n\n431\n00:23:04,191 --> 00:23:05,572\nAnd now, it'll flag it.\n\n432\n00:23:05,572 --> 00:23:07,656\nAnd now,\nI just have a couple of VMs on each, so\n\n433\n00:23:07,656 --> 00:23:09,615\nI should have plenty of resources.\n\n434\n00:23:09,615 --> 00:23:12,505\nAnd I can see my warning just went away.\n\n435\n00:23:12,505 --> 00:23:17,295\nAnd if I go back to my Monitor, and\nIssues, I don't have any issues anymore.\n\n436\n00:23:18,380 --> 00:23:26,280\nBut 50% of the resources on Server 3,\n50% of those resources are being reserved,\n\n437\n00:23:26,280 --> 00:23:29,860\nand 50% of the resources on\nServer 4 are being reserved now.\n\n438\n00:23:29,860 --> 00:23:33,689\nSo, it's holding those for me, I can't put\nany more than 50% of its system on there\n\n439\n00:23:33,689 --> 00:23:36,695\nbecause it needs to be able to handle\nfailover from the other nodes.\n\n440\n00:23:36,695 --> 00:23:39,431\nAnd actually I do have a little warning\nthere, let's see what it's going on about.\n\n441\n00:23:42,092 --> 00:23:43,160\nAnd let's see.\n\n442\n00:23:43,160 --> 00:23:46,869\nThe host currently,\nhas no management network redundancy.\n\n443\n00:23:46,869 --> 00:23:51,720\nSo, I've only got one management\nnetwork card in that machine.\n\n444\n00:23:51,720 --> 00:23:52,767\nSo, it's not redundant.\n\n445\n00:23:52,767 --> 00:23:54,448\nIf that fails,\nwe won't be able to see the host.\n\n446\n00:23:54,448 --> 00:23:55,273\nIt's going to failover.\n\n447\n00:23:55,273 --> 00:23:56,003\nSo, I'm getting a warning there.\n\n448\n00:23:56,003 --> 00:23:57,407\nThat's not\n>> cluster related.\n\n449\n00:23:57,407 --> 00:24:00,861\nThat's just ESXI related.\n\n450\n00:24:00,861 --> 00:24:03,847\nSo a couple of things we have\nto think about there but\n\n451\n00:24:03,847 --> 00:24:07,150\nonce it's turned on,\nnow HA just does its job.\n\n452\n00:24:07,150 --> 00:24:11,970\nIt's watching the VM's and\nif it sees a failure it will go ahead and\n\n453\n00:24:11,970 --> 00:24:17,730\nflip things around for us so what I'd like\nto do is kind of see that failure, right.\n\n454\n00:24:17,730 --> 00:24:22,370\nIf I go into my hosts right now and\nI go into my related objects and\n\n455\n00:24:22,370 --> 00:24:26,850\nvirtual machines, let me go in here\nto like server three, all right.\n\n456\n00:24:26,850 --> 00:24:32,200\nSo if I look at server three, it's\nrunning app web one and app web three.\n\n457\n00:24:32,200 --> 00:24:36,680\nIf I go to server four,\nit's running app web two.\n\n458\n00:24:36,680 --> 00:24:38,820\nServer four is just\nhosting that one machine.\n\n459\n00:24:39,860 --> 00:24:44,700\nIf one of these guys were to fail,\nthen HA should detect that and\n\n460\n00:24:44,700 --> 00:24:46,792\nmove it over to the other system.\n\n461\n00:24:46,792 --> 00:24:48,780\nSo I'd like to simulate that,\n\n462\n00:24:48,780 --> 00:24:52,250\nbut the servers are way far\naway from where I that.\n\n463\n00:24:52,250 --> 00:24:54,760\nHey Nate, can you hear me?\n\n464\n00:24:54,760 --> 00:24:56,650\nCould I get you to do me a favor?\n\n465\n00:24:56,650 --> 00:24:58,430\nIn my server bank over there,\n\n466\n00:24:58,430 --> 00:25:02,190\ncan you take the one that's all the way to\nthe right and just yank its power cable.\n\n467\n00:25:02,190 --> 00:25:03,310\n>> Yep.\n\n468\n00:25:03,310 --> 00:25:05,760\n>> All right, so we're gonna do\na straight up power failure.\n\n469\n00:25:05,760 --> 00:25:11,800\nNow, I've got my server set up where\nHA is set to do a 30 second detection.\n\n470\n00:25:11,800 --> 00:25:14,810\nSo he's gonna yank the power\nout of server four.\n\n471\n00:25:14,810 --> 00:25:17,150\nAnd when that happens,\nit's gonna go offline.\n\n472\n00:25:18,290 --> 00:25:21,200\nAnd then, HA is gonna do its magic.\n\n473\n00:25:21,200 --> 00:25:22,850\nHA will take 30 seconds.\n\n474\n00:25:22,850 --> 00:25:24,730\nI'm pretty sure, I left it at 30 seconds.\n\n475\n00:25:24,730 --> 00:25:26,260\nIt will take 30 seconds to detect that.\n\n476\n00:25:26,260 --> 00:25:28,600\nWhen it sees that VM is not there.\n\n477\n00:25:28,600 --> 00:25:31,470\nIt was appweb 2, I think.\n\n478\n00:25:31,470 --> 00:25:33,860\nWhen it sees,\nthat web server's no longer running.\n\n479\n00:25:33,860 --> 00:25:37,440\nIt's gonna go ahead and reboot it and\nboot it up on the other server.\n\n480\n00:25:37,440 --> 00:25:39,910\nAnd so\nI'm just gonna go here into my hosts.\n\n481\n00:25:39,910 --> 00:25:44,610\nAnd I can see that I have an alert and\na warning in place, so\n\n482\n00:25:44,610 --> 00:25:46,860\nI've got a couple of different\nthings going on here.\n\n483\n00:25:46,860 --> 00:25:48,580\nAll my servers show connected though.\n\n484\n00:25:48,580 --> 00:25:51,850\nSo it doesn't actually know\nthe host is gone just yet,\n\n485\n00:25:51,850 --> 00:25:55,190\nso I'm gonna wait a moment\nwhile it tries to detect that.\n\n486\n00:25:55,190 --> 00:25:58,220\nAnd we'll just have to refresh our\nscreen a little bit while we wait.\n\n487\n00:26:00,824 --> 00:26:03,701\nWell, all right, let's just go see what\nour alerts are while we're waiting.\n\n488\n00:26:03,701 --> 00:26:06,800\nEventually it is going to pick that up.\n\n489\n00:26:06,800 --> 00:26:08,050\nSo I'm just gonna go here.\n\n490\n00:26:08,050 --> 00:26:11,800\nI've got network connectivity lost and\nhost currently has no management,\n\n491\n00:26:11,800 --> 00:26:13,860\nno redundancy, on server three.\n\n492\n00:26:13,860 --> 00:26:15,580\nI'm sorry,\nI thought we were unplugging server four.\n\n493\n00:26:15,580 --> 00:26:18,240\nI guess we got number three, or\nthat's at least what it thinks.\n\n494\n00:26:18,240 --> 00:26:20,020\nI might have mixed them up in my configs.\n\n495\n00:26:20,020 --> 00:26:23,390\nSo anyhow, it's picking that one up,\nconnectivity lost.\n\n496\n00:26:23,390 --> 00:26:28,130\nIf I look at server four Close connection\nand power state triggered alarm.\n\n497\n00:26:28,130 --> 00:26:30,120\nVsphereHA host status triggered.\n\n498\n00:26:30,120 --> 00:26:32,302\nIt was server four that went down.\n\n499\n00:26:32,302 --> 00:26:34,880\nAll right so this is the one\nthat is showing it's warning.\n\n500\n00:26:34,880 --> 00:26:40,240\nAnd HA, see my HA alerts right there,\ndetected a possible host failure.\n\n501\n00:26:40,240 --> 00:26:41,960\nNow why is it possible?\n\n502\n00:26:41,960 --> 00:26:44,340\nWell I had a 30 second window, right.\n\n503\n00:26:44,340 --> 00:26:46,350\nSo, this server might reappear, right.\n\n504\n00:26:46,350 --> 00:26:50,328\nIt may have just been a blip on the radar\nthat I lost that little moment.\n\n505\n00:26:50,328 --> 00:26:55,250\nSo it's gonna give me a moment, and after\n30 seconds, it's gonna say, all right,\n\n506\n00:26:55,250 --> 00:26:58,190\nit's not a possible host failure,\nit is a host failure.\n\n507\n00:26:58,190 --> 00:27:02,270\nThe host is gone, I'm not seeing\nheartbeats on the disk storage anymore,\n\n508\n00:27:02,270 --> 00:27:04,000\nit's just not available.\n\n509\n00:27:04,000 --> 00:27:04,800\nAnd let me refresh that.\n\n510\n00:27:04,800 --> 00:27:06,610\nI think I've gabbed for 30 seconds.\n\n511\n00:27:07,730 --> 00:27:10,320\nAnd so I'll refresh here and\nsee what it gets.\n\n512\n00:27:10,320 --> 00:27:13,250\nIt's still showing as\npossible host status, but\n\n513\n00:27:13,250 --> 00:27:16,250\nit did flip to a red\ndiamond instead of yellow.\n\n514\n00:27:16,250 --> 00:27:21,060\nSo we've definitely elevated\nour danger zone, right.\n\n515\n00:27:21,060 --> 00:27:24,220\nAnd if I go back to server three\nwhat should be happening is,\n\n516\n00:27:24,220 --> 00:27:28,350\nserver three's upset because it's in a\ncluster and the cluster is damaged, right.\n\n517\n00:27:28,350 --> 00:27:31,000\nBut HA should be kicking in and\n\n518\n00:27:31,000 --> 00:27:34,070\nthe VM should be booting\nup right here on Server 3.\n\n519\n00:27:34,070 --> 00:27:38,290\nAnd so if I go into my related objects and\nvirtual machine, sure enough\n\n520\n00:27:38,290 --> 00:27:43,280\nI can see all three web servers are now\nrunning right here on Server 3, right.\n\n521\n00:27:43,280 --> 00:27:45,060\nDRS didn't do that.\n\n522\n00:27:45,060 --> 00:27:46,230\nHA did.\n\n523\n00:27:46,230 --> 00:27:50,312\nHa is monitoring the VMs and booting\nthem up on another host when necessary,\n\n524\n00:27:50,312 --> 00:27:51,000\nall right.\n\n525\n00:27:51,000 --> 00:27:54,660\nSo, DRS and\nHA are normally deployed together and\n\n526\n00:27:54,660 --> 00:27:57,030\nas a result people start to mix them up.\n\n527\n00:27:57,030 --> 00:27:59,910\nOn the exam you've got to keep\nthem separate in your head.\n\n528\n00:27:59,910 --> 00:28:01,380\nDRS is load balancing.\n\n529\n00:28:01,380 --> 00:28:05,680\nIt will smooth your VMs across your\nhosts that are working, right.\n\n530\n00:28:05,680 --> 00:28:07,230\nWhen things are running nice.\n\n531\n00:28:07,230 --> 00:28:09,580\nHA kicks in when things\nare not running nice.\n\n532\n00:28:09,580 --> 00:28:15,130\nWhen a host fails, HA will recover the VMs\non other hosts and it is rebooting them.\n\n533\n00:28:15,130 --> 00:28:19,270\nIt's booting the Vms up so whatever was\nin RAM when the failure happened is gone.\n\n534\n00:28:19,270 --> 00:28:21,210\nThere is down time with HA.\n\n535\n00:28:21,210 --> 00:28:23,799\nHA does not give you zero down time.\n\n536\n00:28:25,910 --> 00:28:29,650\nAll right, so the next thing I wanna\ntalk about is fault olerance but\n\n537\n00:28:29,650 --> 00:28:33,090\nI need to do two things, one I need\nto recover this server [LAUGH] and\n\n538\n00:28:33,090 --> 00:28:34,940\nso I'll do that during the break.\n\n539\n00:28:34,940 --> 00:28:38,100\nAnd then the second thing is I\njust need to clear my errors so\n\n540\n00:28:38,100 --> 00:28:41,010\nduring the break I'll take care\nof that and when we get back,\n\n541\n00:28:41,010 --> 00:28:44,240\nwe'll get a chance to see fault\ntolerance which in theory can give us.\n\n542\n00:28:44,240 --> 00:28:45,150\nZero downtimes,\n\n543\n00:28:45,150 --> 00:28:49,180\nthat would be awesome if we can get that\nin place, so we'll take a look at that but\n\n544\n00:28:49,180 --> 00:28:52,720\nfor right now, let's stop and take a break\nand when we get back, fault tolerance.\n\n545\n00:28:52,720 --> 00:28:59,185\nSo stay tuned we'll be back after this.\n\n546\n00:28:59,185 --> 00:29:02,324\n[NOISE].\n\n547\n00:29:02,324 --> 00:29:04,217\nAll right, welcome back everybody.\n\n548\n00:29:04,217 --> 00:29:09,100\nOkay, so the next thing I wanna\ntalk about is fault tolerance.\n\n549\n00:29:09,100 --> 00:29:11,880\nWhen we looked at high availability,\nyeah, it's great.\n\n550\n00:29:11,880 --> 00:29:14,500\nA VM fails,\nit boots it up somewhere else, wonderful.\n\n551\n00:29:14,500 --> 00:29:15,760\nBut there was that boot time.\n\n552\n00:29:15,760 --> 00:29:19,980\nAnd we gotta wait for that VM to boot up\nbefore it's actually truly up and healthy.\n\n553\n00:29:19,980 --> 00:29:23,270\nThe VM fails over pretty quickly and\nmine was 30 seconds, right.\n\n554\n00:29:23,270 --> 00:29:25,550\nBut then it's got to boot up and\nthat Linux box there,\n\n555\n00:29:25,550 --> 00:29:27,720\nthat Linux VM probably\nbooted in about 30 seconds.\n\n556\n00:29:27,720 --> 00:29:31,110\nSo, I've probably had about a minute\nof true down time when that happened.\n\n557\n00:29:31,110 --> 00:29:34,150\nBut if we wanna get that\ndown to one second or\n\n558\n00:29:34,150 --> 00:29:37,680\nas small as possible,\nHA is not the solution for us, all right.\n\n559\n00:29:37,680 --> 00:29:40,760\nFT, fault tolerance, is.\n\n560\n00:29:40,760 --> 00:29:42,560\nFault tolerance works a different way.\n\n561\n00:29:42,560 --> 00:29:46,670\nInstead of monitoring a VM, and\ndealing with it after it fails,\n\n562\n00:29:46,670 --> 00:29:51,090\nfault tolerance makes a clone of\nthat VM ahead of time, all right.\n\n563\n00:29:51,090 --> 00:29:55,070\nIt's got a shadow VM,\na second copy of that virtual machine\n\n564\n00:29:55,070 --> 00:29:59,300\nthat is being copied to another host and\nconstantly updated.\n\n565\n00:29:59,300 --> 00:30:00,700\nThe two VMs are in lock step.\n\n566\n00:30:00,700 --> 00:30:03,490\nIf a change happens on one,\nit happens on the other.\n\n567\n00:30:03,490 --> 00:30:07,770\nNow the shadow, it's not doing anything,\nit's just sitting there being a clone.\n\n568\n00:30:07,770 --> 00:30:11,750\nBut if a failure is ever detected,\nfault tolerance will kick in and\n\n569\n00:30:11,750 --> 00:30:14,630\nsay go to the clone,\nthe clone is now active.\n\n570\n00:30:14,630 --> 00:30:16,650\nAnd then that way it\nimmediately takes over,\n\n571\n00:30:16,650 --> 00:30:19,720\nno synchronizing of data needs\nto happen cuz it's already done.\n\n572\n00:30:19,720 --> 00:30:23,010\nNo booting of the VM needs to\nhappen cuz that's already done.\n\n573\n00:30:23,010 --> 00:30:25,170\nIt's just that it's being isolated and\n\n574\n00:30:25,170 --> 00:30:27,570\nwhen failure happens it\nremoves the isolation.\n\n575\n00:30:27,570 --> 00:30:30,780\nIt takes the boundaries off of it and\nnow the VM is ready to go.\n\n576\n00:30:30,780 --> 00:30:35,360\nSo fault tolerance will give us\nreal time synchronization and\n\n577\n00:30:35,360 --> 00:30:38,350\nas small of a failure window as possible.\n\n578\n00:30:38,350 --> 00:30:42,080\nNow in the first segment\nof the last show [LAUGH].\n\n579\n00:30:42,080 --> 00:30:43,960\nThis is getting kind of distant,\n\n580\n00:30:43,960 --> 00:30:48,670\nmy cousin's sister's roommate's\nboyfriend told me that FT,\n\n581\n00:30:48,670 --> 00:30:54,730\nit's great, but it's not a substitute for\ngood clustering in a software application.\n\n582\n00:30:54,730 --> 00:30:59,140\nA lot of software applications have their\nown clustering technology that can provide\n\n583\n00:30:59,140 --> 00:31:02,260\nrapid fail over like\nthis with zero downtime.\n\n584\n00:31:02,260 --> 00:31:04,060\nIf they have it, use it.\n\n585\n00:31:04,060 --> 00:31:06,710\nThe applications will have stuff that\ntuned more specifically to them and\n\n586\n00:31:06,710 --> 00:31:08,170\nthat's the better way to go.\n\n587\n00:31:08,170 --> 00:31:11,000\nBut FT is great if you've\ngot an application that\n\n588\n00:31:11,000 --> 00:31:12,510\ndoesn't support clustering.\n\n589\n00:31:12,510 --> 00:31:14,700\nYou can do FT for\n\n590\n00:31:14,700 --> 00:31:18,510\nany software because it's not\nthe software that's being clustered.\n\n591\n00:31:18,510 --> 00:31:21,900\nWe're cloning the VM and\nany VM can be cloned, right.\n\n592\n00:31:21,900 --> 00:31:25,070\nSo FT gives us a much more well\nrounded solution that works in\n\n593\n00:31:25,070 --> 00:31:26,210\nevery scenario, all right.\n\n594\n00:31:26,210 --> 00:31:28,400\nThere are a couple of requirements.\n\n595\n00:31:28,400 --> 00:31:32,360\nIf you wanna do FT,\nwe've got to create a shadowed VM.\n\n596\n00:31:32,360 --> 00:31:33,590\nWe've got to clone this VM.\n\n597\n00:31:33,590 --> 00:31:35,730\nAnd that takes a lot of network bandwidth,\nright.\n\n598\n00:31:35,730 --> 00:31:38,520\nCuz every change is being written\nas having to be synchronized.\n\n599\n00:31:38,520 --> 00:31:41,020\nAnd the RAM, what's going on in memory,\nhas to be synchronized.\n\n600\n00:31:41,020 --> 00:31:45,312\nSo you want to have a dedicated\nnetwork adapter just for\n\n601\n00:31:45,312 --> 00:31:47,747\nfault tolerance, all right.\n\n602\n00:31:47,747 --> 00:31:52,560\nIn my lab, I'm just gonna use the same\nadapter that I use for V Motion.\n\n603\n00:31:52,560 --> 00:31:54,235\nBut in real life you\ndon't want to do that.\n\n604\n00:31:54,235 --> 00:31:58,184\nBecause if you're ever doing VMotion,\nif you're migrating a VM, it's gonna slow\n\n605\n00:31:58,184 --> 00:32:01,090\ndown the shadow replications and\nso it's gonna slow down FT.\n\n606\n00:32:01,090 --> 00:32:05,500\nAll right, FT and\nVMotion compete for access.\n\n607\n00:32:05,500 --> 00:32:10,640\nSo ideally you'll have one adapter for\nVMotion and another adapter for FT.\n\n608\n00:32:10,640 --> 00:32:14,870\nKeeping in mind that you might use V\nmotion on all your VMs, but you're only\n\n609\n00:32:14,870 --> 00:32:18,715\ngonna use FT on mission-critical ones so\nit'll be far less VM's involved.\n\n610\n00:32:18,715 --> 00:32:23,880\nAlright, so all I did is I took my V\nMotion adapter that I created in the last\n\n611\n00:32:23,880 --> 00:32:27,950\nshow, and I just went in there and enabled\nFault Tolerance as an option on it.\n\n612\n00:32:27,950 --> 00:32:29,550\nSo I had V Motion and\n\n613\n00:32:29,550 --> 00:32:33,560\nI just turned on Fault Tolerance\nlogging so it's up there now.\n\n614\n00:32:33,560 --> 00:32:36,120\nWhy do they call it\nFault Tolerance logging?\n\n615\n00:32:36,120 --> 00:32:41,240\nWell, the VMDK, the virtual hard drive,\nboth servers already have access to that.\n\n616\n00:32:41,240 --> 00:32:43,490\nSo we don't actually need\nto clone the hard drive.\n\n617\n00:32:43,490 --> 00:32:46,260\nAll we need to do is clone\nthe changes that are happening,\n\n618\n00:32:46,260 --> 00:32:47,790\nas things change what's in RAM.\n\n619\n00:32:47,790 --> 00:32:51,030\nAnd it does that by creating what\nare called transaction logs.\n\n620\n00:32:51,030 --> 00:32:54,150\nIt doesn't send all the RAM,\nwell I guess it does in the beginning.\n\n621\n00:32:54,150 --> 00:32:56,100\nBut in the future, it's whatever changes.\n\n622\n00:32:56,100 --> 00:32:58,610\nAny changes to RAM is being\nsent over to the other side, so\n\n623\n00:32:58,610 --> 00:33:00,650\nthey can be processed and\nactivated there too.\n\n624\n00:33:00,650 --> 00:33:04,110\nSo, the two systems are in lock step and\nthey're ready to rock.\n\n625\n00:33:04,110 --> 00:33:08,000\nSo, I turned it on in this same adapter,\nand I'll be ready to fire on from there.\n\n626\n00:33:08,000 --> 00:33:08,830\nAlright?\n\n627\n00:33:08,830 --> 00:33:11,230\nAfter that, it's actually really easy.\n\n628\n00:33:11,230 --> 00:33:14,510\nWe just go and turn on fault tolerance for\nthe VM's that are affected.\n\n629\n00:33:14,510 --> 00:33:18,890\nSo I can go in and\nfind my virtual machines by cluster or\n\n630\n00:33:18,890 --> 00:33:19,870\nhowever I want to go.\n\n631\n00:33:19,870 --> 00:33:20,970\nSo I'll do it by cluster.\n\n632\n00:33:22,300 --> 00:33:25,530\nAnd so I can go in here, and\nmy cluster is still throwing some red\n\n633\n00:33:25,530 --> 00:33:29,020\nflags from the failure earlier, so\nI've got a little warning there.\n\n634\n00:33:30,130 --> 00:33:33,810\nBut, if I go in here to my VM's, so\nI'll just go to related objects,\n\n635\n00:33:33,810 --> 00:33:38,445\nvirtual machines, and I'll take\none of them like App Web One Okay,\n\n636\n00:33:38,445 --> 00:33:41,600\nI want App Web One to\nhave fault tolerance.\n\n637\n00:33:41,600 --> 00:33:43,640\nI want it to have that shadow copy.\n\n638\n00:33:43,640 --> 00:33:44,390\nRight?\n\n639\n00:33:44,390 --> 00:33:48,080\nSo I can go under here and\nI can go under Manage and Settings.\n\n640\n00:33:49,480 --> 00:33:52,510\nAnd it's buried in here,\nand we can look in here and\n\n641\n00:33:52,510 --> 00:33:54,780\nwe can find the fault tolerance option,\nand let's see.\n\n642\n00:33:54,780 --> 00:33:59,020\nIt is, now I've gotta\nremember where the option is.\n\n643\n00:33:59,020 --> 00:33:59,969\nLet's see, Manage.\n\n644\n00:34:04,323 --> 00:34:05,706\nAnd where the heck is that buried?\n\n645\n00:34:08,945 --> 00:34:11,360\nOh shoot,\nyou know what I'm in the wrong spot.\n\n646\n00:34:11,360 --> 00:34:12,570\nLet me cancel this.\n\n647\n00:34:12,570 --> 00:34:13,620\nSorry.\n\n648\n00:34:13,620 --> 00:34:15,260\nWe have to turn it on for vCenter.\n\n649\n00:34:15,260 --> 00:34:17,613\nvCenter is what's actually pulling\noff the management piece of this so\n\n650\n00:34:17,613 --> 00:34:20,210\nI'm not in the wrong spot,\nthat's why I'm not seeing my option.\n\n651\n00:34:20,210 --> 00:34:21,909\nI'm going to go back to\nmy main vCenter page.\n\n652\n00:34:23,090 --> 00:34:28,240\nAnd what I'm gonna do is I\nneed to do a couple of things.\n\n653\n00:34:28,240 --> 00:34:30,850\nActually, I'm second guessing myself,\nI was in the right spot.\n\n654\n00:34:30,850 --> 00:34:32,800\nLet me go back to AppWeb One.\n\n655\n00:34:32,800 --> 00:34:36,800\nWhat we need to do is we need to\nright-click on the App Web One,\n\n656\n00:34:36,800 --> 00:34:41,500\nand if we go down here to all these center\nactions, that's what I'm looking for, and\n\n657\n00:34:41,500 --> 00:34:43,360\nthere's fault tolerance, all right.\n\n658\n00:34:43,360 --> 00:34:47,140\nFault tolerance will be turned off for\nall of your VM's by default.\n\n659\n00:34:47,140 --> 00:34:50,650\nIt's not gonna maintain shadow copies\nbecause it knows it's resource intensive.\n\n660\n00:34:50,650 --> 00:34:52,270\nYou then go and pick and choose.\n\n661\n00:34:52,270 --> 00:34:54,100\nSo, sorry about the confusion there.\n\n662\n00:34:54,100 --> 00:34:58,540\nYou just right click on the VM Go\nto All V Center Actions, and\n\n663\n00:34:58,540 --> 00:35:01,660\nthen it's under Fault Tolerance,\nright there, and you can turn it on.\n\n664\n00:35:01,660 --> 00:35:04,330\nNow once it's turned on,\nwe've got all sorts of different options.\n\n665\n00:35:04,330 --> 00:35:07,600\nI'm gonna turn that on, and it's just\ngonna let me know that it's gonna happen.\n\n666\n00:35:07,600 --> 00:35:10,210\nSee where it says the DRS\nautomation level for\n\n667\n00:35:10,210 --> 00:35:13,000\nthis VM will change to\nautomated parts are disabled.\n\n668\n00:35:13,000 --> 00:35:15,160\nThat's because we don't need DRS anymore.\n\n669\n00:35:15,160 --> 00:35:17,130\nWe're not going to load balance this VM.\n\n670\n00:35:17,130 --> 00:35:19,380\nThere's going to be a production one and\nthere's going to be a shadow,\n\n671\n00:35:19,380 --> 00:35:21,330\nand they're going to stay where they are.\n\n672\n00:35:21,330 --> 00:35:23,250\nDRS is not going to mess with them.\n\n673\n00:35:23,250 --> 00:35:25,030\nIf one fails, the other kicks in.\n\n674\n00:35:25,030 --> 00:35:27,470\nSo, it's just warning me that\nthat's going to get turned off.\n\n675\n00:35:27,470 --> 00:35:30,910\nSo, I'll go ahead and say yes,\nand now it's enabled.\n\n676\n00:35:30,910 --> 00:35:31,560\nAlright?\n\n677\n00:35:31,560 --> 00:35:34,930\nWhat's going to happen now is it's\ngoing to go and enable it, and\n\n678\n00:35:34,930 --> 00:35:36,310\nI'm going to get an error.\n\n679\n00:35:36,310 --> 00:35:40,390\nI've got a little Fault Tolerance\nconfiguration issue here.\n\n680\n00:35:40,390 --> 00:35:41,010\nIf you look at it,\n\n681\n00:35:41,010 --> 00:35:45,900\nsee how it says that I've got some host\ncompatibility issues for this system.\n\n682\n00:35:45,900 --> 00:35:49,530\nIf you wanna do fault tolerance,\nyour system does have to be\n\n683\n00:35:49,530 --> 00:35:53,590\nfully VMware compatible, I mean it has to\nbe on the hardware compatibility list.\n\n684\n00:35:53,590 --> 00:35:56,710\nAnd here it's telling me that I'm not\ncompatible, and I'm not sure why.\n\n685\n00:35:56,710 --> 00:35:59,880\nLet's see virtual machines in the same\nfault tolerance pair cannot be\n\n686\n00:35:59,880 --> 00:36:01,200\non the same host.\n\n687\n00:36:02,360 --> 00:36:06,670\nOh, it's trying to put it on 4, but\n4's throwing an error with compatibility.\n\n688\n00:36:06,670 --> 00:36:09,150\nAnd does it tell me why?\n\n689\n00:36:09,150 --> 00:36:13,750\nJust check the host summary for\nthe V Sphere FT incompatibility issues.\n\n690\n00:36:13,750 --> 00:36:16,450\nSo let me got check my host\nsummary on that server and\n\n691\n00:36:16,450 --> 00:36:17,990\nwe'll see what's incompatible.\n\n692\n00:36:17,990 --> 00:36:20,650\nSometimes it's something we can fix,\nyou know maybe some other\n\n693\n00:36:20,650 --> 00:36:23,890\nfeature that I've turned on or\nsome data stores not working.\n\n694\n00:36:23,890 --> 00:36:26,760\nOther times it's problems\ncould be actual hardware.\n\n695\n00:36:26,760 --> 00:36:30,410\nAnd if it's the hardware then I just\nwon't be able to turn on FT for it.\n\n696\n00:36:30,410 --> 00:36:35,320\nSo let me go into my hosts and\nI'll take a look at server four.\n\n697\n00:36:36,640 --> 00:36:37,790\nAnd I'll go into my summary.\n\n698\n00:36:40,100 --> 00:36:43,760\nAnd let's see what I've\ngot here when it loads.\n\n699\n00:36:46,090 --> 00:36:49,420\nAlright so in my summary here if I have\nany incompatibilities, any problems,\n\n700\n00:36:49,420 --> 00:36:51,870\nthey'll show up right\nhere in my summary page.\n\n701\n00:36:51,870 --> 00:36:56,950\nAnd as I scan down the list\nhere...it's still loading so\n\n702\n00:36:56,950 --> 00:36:59,120\nI'll give it a moment to sort itself out.\n\n703\n00:36:59,120 --> 00:37:01,130\nAnd then we'll find out what's what.\n\n704\n00:37:01,130 --> 00:37:02,240\nAnd then I'll check out server three.\n\n705\n00:37:02,240 --> 00:37:03,910\nNow server three is throwing a warning but\n\n706\n00:37:03,910 --> 00:37:06,680\nthe warning here is that I don't\nhave redundant management adapters.\n\n707\n00:37:06,680 --> 00:37:08,550\nAnd that's one you can ignore.\n\n708\n00:37:08,550 --> 00:37:11,130\nBut, well it's just taking it's time.\n\n709\n00:37:11,130 --> 00:37:11,630\nThere we go.\n\n710\n00:37:13,470 --> 00:37:14,160\nAlright.\n\n711\n00:37:14,160 --> 00:37:15,250\nSo looking at fault tolerance,\n\n712\n00:37:15,250 --> 00:37:19,100\nhere I can see that this server has\na fault tolerance version of 5.0.\n\n713\n00:37:19,100 --> 00:37:21,660\nSo I'm compatible with 5.0 host, and\n\n714\n00:37:21,660 --> 00:37:23,780\nI'm not really seeing any\nwarnings there under FT.\n\n715\n00:37:25,880 --> 00:37:30,090\nAnd not seeing anything else jumping\nout at me here as being a problem.\n\n716\n00:37:31,710 --> 00:37:33,870\nThings look okay,\nlet me check server number three, and\n\n717\n00:37:33,870 --> 00:37:36,560\nmake sure it's in the same boat.\n\n718\n00:37:36,560 --> 00:37:39,890\nBut I am using machines that are not,\noh actually, what do we have here?\n\n719\n00:37:39,890 --> 00:37:42,030\nJust the network redundancy flag again.\n\n720\n00:37:43,653 --> 00:37:46,010\nThat one shouldn't be enough to stop us,\nwe're 5.0.\n\n721\n00:37:46,010 --> 00:37:48,488\nActually, you know it is saying\nthat we're compatible here.\n\n722\n00:37:53,668 --> 00:37:58,940\nAll right then, well, that is going to\nmake it harder for me to turn on FT.\n\n723\n00:37:58,940 --> 00:38:03,070\nSo when we turn on FT, your nodes it has\nto be compatible and they have to be\n\n724\n00:38:03,070 --> 00:38:05,940\nsimilar enough to be able to create\nthat clone and get it up and running.\n\n725\n00:38:05,940 --> 00:38:08,870\nSo it's just failing my\ncheck here on server three.\n\n726\n00:38:08,870 --> 00:38:10,980\nAnd actually I do know a way\nto cheat around this but\n\n727\n00:38:10,980 --> 00:38:13,965\nI really don't wanna do\nit if I don't have to.\n\n728\n00:38:13,965 --> 00:38:15,342\n[LAUGH].\n\n729\n00:38:15,342 --> 00:38:19,580\nBut you can override some of these errors,\nbut let me give you a word of caution.\n\n730\n00:38:19,580 --> 00:38:21,620\nIn a lab it's one thing but,\nin a production environment,\n\n731\n00:38:21,620 --> 00:38:25,040\nif you start overriding errors,\nit can lead to some real problems.\n\n732\n00:38:25,040 --> 00:38:26,270\nAnd if you ever VMWare for\n\n733\n00:38:26,270 --> 00:38:29,840\nsupport, they won't help you because\nyou've overridden some of the settings.\n\n734\n00:38:29,840 --> 00:38:33,080\nSo it's not something you want\nto do if you can avoid it.\n\n735\n00:38:33,080 --> 00:38:36,650\nBut yeah, so it's gonna be\na little bit upset about that.\n\n736\n00:38:36,650 --> 00:38:40,460\nIt's funny, because my server four\nactually has the exact same configuration,\n\n737\n00:38:40,460 --> 00:38:43,218\njust different IP's, but\nit's not red-flagging it.\n\n738\n00:38:43,218 --> 00:38:45,430\nIt's just red-flagging server three,\n\n739\n00:38:45,430 --> 00:38:47,730\nbecause of that failure\nthat we had earlier.\n\n740\n00:38:47,730 --> 00:38:53,120\nI bet if we turn off DRS and\nHA it'll probably get happy again.\n\n741\n00:38:53,120 --> 00:38:53,960\nLet me do that.\n\n742\n00:38:59,059 --> 00:39:01,200\nSo I\"m just gonna go, and\ndisable some of the things.\n\n743\n00:39:01,200 --> 00:39:03,830\nWhen we start combining all of these,\nyou've really gotta be careful about\n\n744\n00:39:03,830 --> 00:39:08,150\nmaintaining a compatible configuration, or\nyou do start to get conflicts like this.\n\n745\n00:39:08,150 --> 00:39:10,370\nSo let me just tweak this a little bit.\n\n746\n00:39:13,219 --> 00:39:15,401\nAll right, so I'm gonna turn off HA.\n\n747\n00:39:18,234 --> 00:39:20,000\nAnd we'll turn off DRS also.\n\n748\n00:39:22,460 --> 00:39:27,260\nYeah, now Fault Tolerance, FT,\nit doesn't rely on things like VMotion,\n\n749\n00:39:27,260 --> 00:39:29,810\nbecause it's not having to move the VM.\n\n750\n00:39:29,810 --> 00:39:32,710\nIt's actually already\nreplicated on the other side.\n\n751\n00:39:32,710 --> 00:39:35,570\nSo a lot of these features we\nmay implement them together, but\n\n752\n00:39:35,570 --> 00:39:36,790\ntheir not actually necessary.\n\n753\n00:39:36,790 --> 00:39:41,253\nSo we can turn some of them off and\nkind of pick and choose.\n\n754\n00:39:41,253 --> 00:39:46,368\nSo I'm just gonna through and\nturn these off.\n\n755\n00:39:46,368 --> 00:39:50,490\nAll right, and it's probably also a little\nunhappy about that storage cluster.\n\n756\n00:39:50,490 --> 00:39:53,647\nBut you know what it still\nhasn't cleared my warning.\n\n757\n00:39:59,245 --> 00:40:02,165\nInsufficient Vsphere HA\nfail over resources.\n\n758\n00:40:02,165 --> 00:40:03,555\nWell that's nice.\n\n759\n00:40:03,555 --> 00:40:06,005\nConsidering I turned off HA.\n\n760\n00:40:06,005 --> 00:40:07,435\nThere we go.\n\n761\n00:40:07,435 --> 00:40:08,805\nAll right.\nLet's see if it will let me do it now.\n\n762\n00:40:08,805 --> 00:40:10,315\nIf it doesn't, I'm not gonna force it.\n\n763\n00:40:10,315 --> 00:40:13,390\nBut a really, FT you just turn it on.\n\n764\n00:40:13,390 --> 00:40:14,890\nOnce it's on, it's already cloning it.\n\n765\n00:40:14,890 --> 00:40:17,070\nIt's got that other system in place.\n\n766\n00:40:17,070 --> 00:40:20,160\nFT, when you turn it on,\nit's not immediately done.\n\n767\n00:40:20,160 --> 00:40:23,230\nIt has to do a synchronization\nof memory the first time.\n\n768\n00:40:23,230 --> 00:40:24,540\nThat can take a minute or two.\n\n769\n00:40:24,540 --> 00:40:29,300\nIt can take an hour if you have a ton of\nmemory in a slow network dedicated to FT.\n\n770\n00:40:29,300 --> 00:40:34,650\nIt could take a while, once it's in lock\nstep, it stays in synchronization and\n\n771\n00:40:34,650 --> 00:40:39,560\nit can then go through, and\nflip things over as needed, and\n\n772\n00:40:39,560 --> 00:40:43,340\ndo everything that we need,\nso it's pretty neat stuff.\n\n773\n00:40:44,480 --> 00:40:46,430\nLet me get back to my cluster,\nwe'll see if we can turn this on again.\n\n774\n00:40:49,382 --> 00:40:54,549\nAll right, so here I'm going in to my\ncluster, I'll go in to my related objects,\n\n775\n00:40:55,870 --> 00:40:57,340\nand we'll try and\nturn this on one more time.\n\n776\n00:40:57,340 --> 00:41:04,650\nI'm just gonna right click on it.\n\n777\n00:41:04,650 --> 00:41:06,110\nI'll go to my All vCenter Actions.\n\n778\n00:41:06,110 --> 00:41:09,050\nI'll go to fault tolerance and\nturn on fault tolerance.\n\n779\n00:41:11,140 --> 00:41:15,201\nAnd now,\nit's still showing me the same problem,\n\n780\n00:41:15,201 --> 00:41:19,440\nall right, it says the configuration\nissues for fault tolerance so\n\n781\n00:41:19,440 --> 00:41:21,230\nit's not gonna be happy about that.\n\n782\n00:41:21,230 --> 00:41:22,880\nAll right, well I'll deal with that later.\n\n783\n00:41:22,880 --> 00:41:25,480\nBut once it's turned on there's\nnot really much that we tweak.\n\n784\n00:41:25,480 --> 00:41:28,360\nYou'll notice under the menus there that\nthere's not a whole heck of a lot cuz\n\n785\n00:41:28,360 --> 00:41:29,930\nit is fairly automatic.\n\n786\n00:41:29,930 --> 00:41:33,830\nWhen you go under fault tolerance you'll\nsee, enable or disable fault tolerance.\n\n787\n00:41:33,830 --> 00:41:38,030\nYou can turn it on and off and then you\ncan temporarily enable and disable it.\n\n788\n00:41:38,030 --> 00:41:40,960\nThe nice part there is when you enable it\nagain, it just kind of re-synchs back and\n\n789\n00:41:40,960 --> 00:41:42,010\nit's in business.\n\n790\n00:41:42,010 --> 00:41:45,870\nYou can migrate the secondary,\nthe secondary is the shadow, right?\n\n791\n00:41:45,870 --> 00:41:48,700\nIf the shadow is sitting on one server,\nyou might want to move it to another one.\n\n792\n00:41:48,700 --> 00:41:50,088\nThat's migrate the secondary.\n\n793\n00:41:50,088 --> 00:41:54,330\nIf you wanna migrate the primary, you just\nmigrate it like a normal VM, you right\n\n794\n00:41:54,330 --> 00:41:57,850\nclick on it and you choose migrate and\nmove it, but the secondary has to have\n\n795\n00:41:57,850 --> 00:42:02,270\nit's own entity and then you've got test\nfail over and then test restart secondary.\n\n796\n00:42:02,270 --> 00:42:04,830\nYou can test it out and\nmake sure that it's working.\n\n797\n00:42:04,830 --> 00:42:08,570\nBut other than that FT just runs,\njust does its thing and that's about it so\n\n798\n00:42:08,570 --> 00:42:09,690\nit's really neat technology.\n\n799\n00:42:11,310 --> 00:42:15,370\nNow that leads me to another point\nwhich I wasn't thinking about earlier,\n\n800\n00:42:15,370 --> 00:42:17,940\nbut affinity.\n\n801\n00:42:17,940 --> 00:42:20,630\nWhen you boot a virtual machine up.\n\n802\n00:42:20,630 --> 00:42:23,570\nIf you have DRS turned on,\nI've turned it off, but\n\n803\n00:42:23,570 --> 00:42:28,620\nif I turn DRS back on DRS is gonna try and\nload balance our virtual machines.\n\n804\n00:42:29,710 --> 00:42:31,360\nIt's also going to try and\n\n805\n00:42:31,360 --> 00:42:35,620\nload balance things like,\na fault tolerant machine when it boots up.\n\n806\n00:42:35,620 --> 00:42:39,530\nNow once it's already up it doesn't\nmess with it disables the DRS stuff but\n\n807\n00:42:39,530 --> 00:42:42,240\nwhen it boots up it tries to\nput them in nice even places.\n\n808\n00:42:43,320 --> 00:42:48,280\nWell, DRS it's running,\nit's doing it's thing, but we\n\n809\n00:42:48,280 --> 00:42:53,300\nmight prefer to have our virtual machines\non one particular server over another one.\n\n810\n00:42:53,300 --> 00:42:55,120\nMaybe it's just for nostalgia purposes.\n\n811\n00:42:55,120 --> 00:42:59,440\nMaybe it's so that when you trouble shoot,\nyou have an idea of where they should be.\n\n812\n00:42:59,440 --> 00:43:02,310\nThe other thing is, with DRS,\nwhen it moves a server off,\n\n813\n00:43:02,310 --> 00:43:06,050\nmaybe even because a failure,\nlike when HA moves a server off.\n\n814\n00:43:06,050 --> 00:43:08,520\nWhen the original server\nbecomes healthy again,\n\n815\n00:43:08,520 --> 00:43:11,420\nit won't automatically move the VM's back.\n\n816\n00:43:11,420 --> 00:43:13,420\nDRS might move other VM's back, but\n\n817\n00:43:13,420 --> 00:43:15,370\nit's not a guarantee it's\ngonna move the same ones back.\n\n818\n00:43:15,370 --> 00:43:17,480\nCuz it's all situational.\n\n819\n00:43:17,480 --> 00:43:19,840\nWe might want to set\nwhat's called affinity.\n\n820\n00:43:19,840 --> 00:43:21,660\nAffinity is a preference.\n\n821\n00:43:21,660 --> 00:43:23,330\nWe might set a preference for\n\n822\n00:43:23,330 --> 00:43:26,200\na VM to start up on one particular host or\nanother.\n\n823\n00:43:26,200 --> 00:43:30,460\nOr a preference that when a failure is\ncorrected we want the VMs to go back\n\n824\n00:43:30,460 --> 00:43:31,660\nto where they came from.\n\n825\n00:43:31,660 --> 00:43:32,190\nRight?\n\n826\n00:43:32,190 --> 00:43:34,240\nThat preference is called affinity, and\n\n827\n00:43:34,240 --> 00:43:37,800\nwe set it up through what\nare called DRS rules.\n\n828\n00:43:37,800 --> 00:43:41,930\nDRS rules define how DRS is gonna\nmove the virtual machines around.\n\n829\n00:43:41,930 --> 00:43:42,960\nLet me show you how those work.\n\n830\n00:43:42,960 --> 00:43:44,690\nThey actually work pretty easy.\n\n831\n00:43:44,690 --> 00:43:46,630\nFirst off, I just turned of DRS.\n\n832\n00:43:46,630 --> 00:43:48,100\nSo I need to turn it back on again.\n\n833\n00:43:49,140 --> 00:43:53,740\nLet me just go into the settings for my\ncluster, and I'll turn on DRS real quick.\n\n834\n00:43:53,740 --> 00:43:55,540\nI'm not gonna tweak the settings here.\n\n835\n00:43:55,540 --> 00:43:59,200\nI'll just go with the defaults and\nget it turned on.\n\n836\n00:43:59,200 --> 00:44:04,660\nOnce DRS is on, then I can go in, and\nI can start to set up my DRS rules.\n\n837\n00:44:04,660 --> 00:44:07,950\nNow the rules, work based on groups.\n\n838\n00:44:07,950 --> 00:44:10,080\nWe create DRS groups.\n\n839\n00:44:10,080 --> 00:44:15,170\nWe group together VM's, or\nguests and our servers, our hosts.\n\n840\n00:44:15,170 --> 00:44:15,790\nAll right?\n\n841\n00:44:15,790 --> 00:44:20,680\nAnd then we define rules that defines how\nthose hosts end up on those guests or\n\n842\n00:44:20,680 --> 00:44:21,590\non those hosts.\n\n843\n00:44:21,590 --> 00:44:24,150\nOther way around,\nhow the guests end up on the hosts.\n\n844\n00:44:24,150 --> 00:44:28,130\nI go in here to DRS groups, and here's\nwhere I can start to define them and\n\n845\n00:44:28,130 --> 00:44:30,500\nI define them based on my own needs,\nall right?\n\n846\n00:44:30,500 --> 00:44:34,350\nIf I want to deal with a very\nparticular server, so app web 1,\n\n847\n00:44:34,350 --> 00:44:36,900\nI need to create a DRS group for it.\n\n848\n00:44:36,900 --> 00:44:40,145\nAnd so\nI'll create a DRS group called app web 1,\n\n849\n00:44:40,145 --> 00:44:45,130\nall right and its gonna be\na virtual machine DRS group and so\n\n850\n00:44:45,130 --> 00:44:49,620\nI'm gonna add a member to it and\nI'm gonna add App Web 1.\n\n851\n00:44:49,620 --> 00:44:50,720\nOkay.\nSo there it is.\n\n852\n00:44:51,840 --> 00:44:55,870\nHere's a DRS group specifically for\nApp Web 1.\n\n853\n00:44:55,870 --> 00:45:00,390\nAnd then I can add in another group\nmaybe for the other two servers.\n\n854\n00:45:00,390 --> 00:45:01,430\nApp Web 2 and App Web 3.\n\n855\n00:45:01,430 --> 00:45:05,420\nAs soon as it's done I'll hit add.\n\n856\n00:45:05,420 --> 00:45:06,970\nAnd I'll create a new one.\n\n857\n00:45:06,970 --> 00:45:08,020\nThere we go.\n\n858\n00:45:08,020 --> 00:45:08,870\nNow I'll create another one.\n\n859\n00:45:08,870 --> 00:45:13,270\nAnd this'll be another\n\n860\n00:45:13,270 --> 00:45:17,893\nAPP Web 2 and APP Web 3.\n\n861\n00:45:17,893 --> 00:45:18,497\nAll right.\n\n862\n00:45:18,497 --> 00:45:19,843\nAnd I'll just add those\nother servers in there.\n\n863\n00:45:23,744 --> 00:45:24,450\nAll right.\n\n864\n00:45:25,510 --> 00:45:28,560\nNow I've created these two VM groups.\n\n865\n00:45:28,560 --> 00:45:32,920\nWe also have host groups, where we define\nthe hosts that they can end up on.\n\n866\n00:45:32,920 --> 00:45:36,770\nAnd I might want this to be for\na single host, or for multiple hosts.\n\n867\n00:45:36,770 --> 00:45:38,300\nI can define it however I want.\n\n868\n00:45:38,300 --> 00:45:42,160\nI might have like high-end hosts\nthat have higher end processors and\n\n869\n00:45:42,160 --> 00:45:44,030\nmore memory and faster disk.\n\n870\n00:45:44,030 --> 00:45:47,480\nAnd I might have low end hosts\nthat have slower processors and\n\n871\n00:45:47,480 --> 00:45:49,510\nolder disks or whatever.\n\n872\n00:45:49,510 --> 00:45:55,250\nI might have an affinity to get my server,\nmy VM's running on the faster hosts but\n\n873\n00:45:55,250 --> 00:45:57,370\nif there's a failure, sure,\ngo ahead and use the older hosts.\n\n874\n00:45:57,370 --> 00:45:59,260\nSo that's when we define that.\n\n875\n00:45:59,260 --> 00:46:04,950\nI might go in here and add, I might create\none that's called Current Equipment.\n\n876\n00:46:07,380 --> 00:46:13,830\nAnd I might create a host group and\nadd in ESX server three.\n\n877\n00:46:13,830 --> 00:46:16,510\nThat's the one that is on current,\nlatest and greatest equipment.\n\n878\n00:46:18,040 --> 00:46:22,810\nAnd then I might create another host\ngroup that is for older systems.\n\n879\n00:46:22,810 --> 00:46:26,630\nAnd so my ESX hosts that have\nbeen around a little while.\n\n880\n00:46:26,630 --> 00:46:32,330\nI might add another group, I'll create\na host group called Older Equipment,\n\n881\n00:46:33,690 --> 00:46:37,130\nand I'll add in whatever\nhosts that matches up with.\n\n882\n00:46:37,130 --> 00:46:38,489\nYou can, obviously,\ncheck as many as you want.\n\n883\n00:46:41,100 --> 00:46:46,390\nThen, I can start to define affinity,\nhow these things interact.\n\n884\n00:46:46,390 --> 00:46:48,740\nThese groups, they don't actually\ndo anything by themselves.\n\n885\n00:46:48,740 --> 00:46:52,070\nThey're the building blocks for\nthe rules that we're gonna make.\n\n886\n00:46:52,070 --> 00:46:55,310\nOn the left side here we can\nthen go to DRS rules, and\n\n887\n00:46:55,310 --> 00:46:58,100\nthat's where we define how\nthese work together, all right?\n\n888\n00:46:58,100 --> 00:47:00,830\nAnd there's four main ways\nthat these work, all right?\n\n889\n00:47:00,830 --> 00:47:03,260\nWe have affinity, which is a preference.\n\n890\n00:47:03,260 --> 00:47:08,390\nWe can prefer that a single\nguest runs on a particular host.\n\n891\n00:47:09,610 --> 00:47:14,290\nOr we can prefer that certain\nguests stick together, right?\n\n892\n00:47:14,290 --> 00:47:18,450\nOr we can create rules that say we prefer\ncertain guests didn't stick together.\n\n893\n00:47:18,450 --> 00:47:20,000\nThey call it negative affinity.\n\n894\n00:47:20,000 --> 00:47:21,960\nWe don't want them to stay together.\n\n895\n00:47:21,960 --> 00:47:26,150\nOr we can say that we don't want\na certain guest to run on a certain host.\n\n896\n00:47:26,150 --> 00:47:28,330\nWhen we define stuff like that,\n\n897\n00:47:28,330 --> 00:47:31,543\nwe are trying to separate out\nresources resources intensive systems.\n\n898\n00:47:31,543 --> 00:47:36,118\nMaybe I have two database servers, and\nI know they both generate a lot of CPU, so\n\n899\n00:47:36,118 --> 00:47:38,780\nI don't want them running\non the same host, so\n\n900\n00:47:38,780 --> 00:47:41,200\nI might create a rule that splits them up.\n\n901\n00:47:41,200 --> 00:47:44,622\nSo when we define a DRS rule, we just\ncome in, and we give it a name, and\n\n902\n00:47:44,622 --> 00:47:47,230\nwe specify what it is\nthat we're trying to do.\n\n903\n00:47:47,230 --> 00:47:50,220\nSo, I might create one just for APP WEB1.\n\n904\n00:47:50,220 --> 00:47:52,100\nThis is my APP WEB1 rule, and\n\n905\n00:47:52,100 --> 00:47:57,530\nI am gonna create a rule that says,\nvirtual machine to host.\n\n906\n00:47:57,530 --> 00:48:01,610\nAnd I'll say,\nanybody in the APP WEB1 VM group.\n\n907\n00:48:01,610 --> 00:48:08,370\nAnd then you've got must run, should run,\nmust not run, or should not run.\n\n908\n00:48:08,370 --> 00:48:09,500\nBe careful here.\n\n909\n00:48:09,500 --> 00:48:12,480\nA must rule, that is set in stone.\n\n910\n00:48:12,480 --> 00:48:15,740\nAPP WEB1 must run on this post.\n\n911\n00:48:15,740 --> 00:48:20,630\nIf I say APP WEB1 must\nrun on current equipment.\n\n912\n00:48:21,650 --> 00:48:25,680\nAnd all the current equipment servers\nfail, APP WEB1 will go offline.\n\n913\n00:48:25,680 --> 00:48:29,940\nIt will not start up on older equipment,\nbecause that's the rule that I've defined.\n\n914\n00:48:29,940 --> 00:48:30,780\nSo, be careful with that.\n\n915\n00:48:32,390 --> 00:48:37,070\nInstead, you should use the should rules,\nit should run on current equipment.\n\n916\n00:48:37,070 --> 00:48:39,620\nBut if there is no current equipment\navailable, then great, go ahead, and\n\n917\n00:48:39,620 --> 00:48:41,100\nmove to the older equipment.\n\n918\n00:48:41,100 --> 00:48:42,722\nThat's the rule that I've defined.\n\n919\n00:48:42,722 --> 00:48:46,860\nApp Web1 should run on hosts in\nthe current equipment group.\n\n920\n00:48:48,820 --> 00:48:52,100\nAnd that's a virtual machine to host rule.\n\n921\n00:48:52,100 --> 00:48:54,860\nThe other rule types are just as useful,\nthough.\n\n922\n00:48:54,860 --> 00:48:59,760\nIf I have App Web2, and App Web3,\nI've got those grouped together.\n\n923\n00:48:59,760 --> 00:49:02,500\nSo I might come in here, and\ncreate a rule that says,\n\n924\n00:49:02,500 --> 00:49:04,960\nthat these two guys are very similar.\n\n925\n00:49:04,960 --> 00:49:10,280\nSo App Web2, and App Web3,\nthis is the rule I'm gonna make.\n\n926\n00:49:10,280 --> 00:49:13,610\nI'm might create a separate\nvirtual machines rule.\n\n927\n00:49:13,610 --> 00:49:18,180\nAnd when I go to add that in, I can\npick the virtual machines right here,\n\n928\n00:49:18,180 --> 00:49:19,310\nApp Web2, and App Web3.\n\n929\n00:49:19,310 --> 00:49:21,910\nI wanna keep those guys separate.\n\n930\n00:49:21,910 --> 00:49:26,620\nSo, don't boot them on the same host,\nunless you absolutely have to.\n\n931\n00:49:26,620 --> 00:49:28,480\nIf you have to, great.\n\n932\n00:49:28,480 --> 00:49:31,790\nBut if you can,\nseparate these two guys out, so\n\n933\n00:49:31,790 --> 00:49:34,690\nthey're not running on the same box.\n\n934\n00:49:34,690 --> 00:49:38,850\nThese rules are usually just a preference.\n\n935\n00:49:38,850 --> 00:49:42,670\nIf you do that must stuff, that's where\nyou override it, and it's a hard set rule.\n\n936\n00:49:42,670 --> 00:49:46,350\nBut you set these preferences, and\nnow you basically have like a home server.\n\n937\n00:49:46,350 --> 00:49:47,700\nYou can define that where you say,\n\n938\n00:49:47,700 --> 00:49:53,490\nI really want APP WEB1\nto run on ESX Server 3.\n\n939\n00:49:53,490 --> 00:49:54,750\nI really want that.\n\n940\n00:49:54,750 --> 00:49:56,120\nIf it fails, move it somewhere else.\n\n941\n00:49:56,120 --> 00:49:59,480\nBut if Server 3 comes back up,\nmove APP WEB1 back over there.\n\n942\n00:49:59,480 --> 00:50:01,050\nGet it put back to where it was.\n\n943\n00:50:01,050 --> 00:50:05,610\nSo, this let's us influence\nthe decision that DRS is making.\n\n944\n00:50:05,610 --> 00:50:08,030\nNow, HA is gonna be kick over, and\n\n945\n00:50:08,030 --> 00:50:11,240\ncause failover to happen,\nwhen a host fails, and it'll move it off.\n\n946\n00:50:11,240 --> 00:50:13,690\nBut HA is not gonna move it back,\nit's not what it does.\n\n947\n00:50:13,690 --> 00:50:14,830\nBut DRS will.\n\n948\n00:50:14,830 --> 00:50:17,210\nDRS will look at these rules,\nand make decisions,\n\n949\n00:50:17,210 --> 00:50:19,090\nand move the VM back if that's suitable.\n\n950\n00:50:19,090 --> 00:50:20,476\nIf that's what the rule is we've defined.\n\n951\n00:50:20,476 --> 00:50:23,041\nOr maybe, we define that we leave it be.\n\n952\n00:50:23,041 --> 00:50:25,582\nOr situations change, things move around.\n\n953\n00:50:25,582 --> 00:50:27,590\nIt's gonna make sure that,\nthat all gets squared away.\n\n954\n00:50:27,590 --> 00:50:31,290\nSo, that's what the DRS rules are for.\n\n955\n00:50:31,290 --> 00:50:32,980\nSo, here's how we manage that.\n\n956\n00:50:32,980 --> 00:50:36,660\nNow, notice that it is DRS rules,\nand DRS groups.\n\n957\n00:50:36,660 --> 00:50:38,119\nSo, you've got to be running DRS,\n\n958\n00:50:38,119 --> 00:50:41,320\nyou've have to be running\nthe Distributed Resource Scheduler.\n\n959\n00:50:41,320 --> 00:50:44,330\nOr otherwise,\nit's not gonna move this stuff around.\n\n960\n00:50:44,330 --> 00:50:47,760\nSo if I was just running HA,\nthen I'm out of luck.\n\n961\n00:50:49,000 --> 00:50:51,930\nSo make sure you've got that, but this is\na great way for us to get in there, and\n\n962\n00:50:51,930 --> 00:50:55,460\ninfluence what's gonna happen.\n\n963\n00:50:55,460 --> 00:50:57,370\nSo, let's see that was affinity.\n\n964\n00:50:57,370 --> 00:51:00,930\nWe took a look at HA, and\nwe talked about fault tolerance.\n\n965\n00:51:00,930 --> 00:51:05,400\nI didn't get to turn it on, cuz my\nservers were upset from the failover.\n\n966\n00:51:05,400 --> 00:51:07,090\nBut that's pretty much it.\n\n967\n00:51:07,090 --> 00:51:11,520\nSo all in all, in the last three\nepisodes we saw four main technologies.\n\n968\n00:51:11,520 --> 00:51:16,260\nWe saw vMotion, which allows us to\nlive migrate Vms between hosts.\n\n969\n00:51:16,260 --> 00:51:20,770\nWe saw HA,\nwhich allows us to recover a failed host,\n\n970\n00:51:20,770 --> 00:51:25,240\nor failed guest by bringing it up\non another host, when it needs to.\n\n971\n00:51:25,240 --> 00:51:26,420\nLike during a failure.\n\n972\n00:51:26,420 --> 00:51:32,370\nWe also saw DRS, which allowed us to\nload-balance our guests across our hosts.\n\n973\n00:51:32,370 --> 00:51:35,840\nAnd then lastly, we say fault tolerance,\nwhich allows us to clone our guest, and\n\n974\n00:51:35,840 --> 00:51:39,800\ncause immediate failover\nwhen a failure is detected.\n\n975\n00:51:39,800 --> 00:51:44,530\nSo, couple of different examples there\nthat all lead to high availability.\n\n976\n00:51:44,530 --> 00:51:48,130\nIn an enterprise environment,\nyou may well use all four of these.\n\n977\n00:51:48,130 --> 00:51:51,780\nIf you use all of these technologies\ntogether, you'll have a very resilient,\n\n978\n00:51:51,780 --> 00:51:56,120\nvery healthy environment with very little,\nif not no downtime.\n\n979\n00:51:56,120 --> 00:51:59,620\nIn a smaller medium environment,\nyou're gonna pick, and choose.\n\n980\n00:51:59,620 --> 00:52:01,210\nYou won't need all of these.\n\n981\n00:52:01,210 --> 00:52:04,060\nAlmost everybody uses vMotion,\nbut the others you'll pick, and\n\n982\n00:52:04,060 --> 00:52:05,290\nchoose based on your needs.\n\n983\n00:52:06,420 --> 00:52:10,760\nBut for the exam, remember that even\nthese are normally deployed together,\n\n984\n00:52:10,760 --> 00:52:12,250\nremember each one individually.\n\n985\n00:52:12,250 --> 00:52:14,070\nWhat each one does, and\nhow they're implemented.\n\n986\n00:52:14,070 --> 00:52:16,560\nThey're not hard to implement,\nbut they are easy to confuse.\n\n987\n00:52:16,560 --> 00:52:17,880\nSo, just keep that in mind.\n\n988\n00:52:19,830 --> 00:52:21,995\nWell, that's a pretty good spot for\nus to wrap this one up.\n\n989\n00:52:21,995 --> 00:52:24,566\nWe still have more to\ncome in objective five.\n\n990\n00:52:24,566 --> 00:52:27,517\nI know we've got backup, and\nre-storage to talk about, and\n\n991\n00:52:27,517 --> 00:52:30,320\na few other things that fall\nin the recovery environment.\n\n992\n00:52:30,320 --> 00:52:35,390\nSo, stay tuned for more of VMware episodes\nas we jump into all that good stuff.\n\n993\n00:52:35,390 --> 00:52:36,979\nWell, for this episode we're\ngonna call it wraps here.\n\n994\n00:52:36,979 --> 00:52:40,820\nSo let me remind you guys,\nif you have any questions on this stuff,\n\n995\n00:52:40,820 --> 00:52:43,507\nyou can always post them\nlive during the show.\n\n996\n00:52:43,507 --> 00:52:47,808\nGo to itpro.tv/live, and you'll see\nthe chat box right beneath the video.\n\n997\n00:52:47,808 --> 00:52:52,240\nYou can post your questions there,\nwe monitor, and answer it during the show.\n\n998\n00:52:52,240 --> 00:52:55,790\nIf you have questions after the show,\nuse our Q&A forums.\n\n999\n00:52:55,790 --> 00:52:59,402\nAt the top of every page on ITProTV,\nyou'll see a link that says Q&A,\n\n1000\n00:52:59,402 --> 00:53:01,060\n[INAUDIBLE] on in there.\n\n1001\n00:53:01,060 --> 00:53:04,162\nIt's our forums, you can post questions,\nwe monitor, and we answer it.\n\n1002\n00:53:04,162 --> 00:53:06,601\nWe wanna make sure you guys\nget the answers you need, so\n\n1003\n00:53:06,601 --> 00:53:08,948\nthat you're ready when you go,\nand take that exam.\n\n1004\n00:53:08,948 --> 00:53:13,375\nWell, I hope you guys enjoyed the show,\nsigning off for ITProTV,\n\n1005\n00:53:13,375 --> 00:53:16,394\nI'm Don Pezet, and\nI will see you next time.\n\n1006\n00:53:16,394 --> 00:53:26,394\n[MUSIC]\n\n1007\n00:53:28,939 --> 00:53:35,920\n[SOUND]\n\n",
          "vimeoId": "103818528"
        },
        {
          "description": "In this episode Don wraps up the series on vSphere clustering. He demonstrates using VDP to backup virtual machines and using vSphere replication to copy virtual machines to another location.",
          "length": "7327",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/011-vSphere-Clustering-Pt-3.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/011-vSphere-Clustering-Pt-3-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/011-vSphere-Clustering-Pt-3-sm.jpg",
          "title": "vSphere Clustering Part 3",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,899 --> 00:00:36,423\nGood morning, good afternoon,\nand good evening and\n\n3\n00:00:36,423 --> 00:00:40,480\nwelcome back to another episode of\nIT Pro TV, and I'm your host Don Posset.\n\n4\n00:00:40,480 --> 00:00:44,250\nDiving right back in to\nthe world of VMWare vSphere.\n\n5\n00:00:44,250 --> 00:00:46,140\nYou're probably getting tired of it but\n\n6\n00:00:46,140 --> 00:00:51,030\nthis is going to be part three of our\nvSphere clustering series because\n\n7\n00:00:51,030 --> 00:00:55,950\nboy is there a lot of high availability\nstuff available inside of vSphere.\n\n8\n00:00:55,950 --> 00:00:59,010\nWe've talked about,\njust all sorts of things right?\n\n9\n00:00:59,010 --> 00:01:00,650\nWe saw building of a vSphere cluster.\n\n10\n00:01:00,650 --> 00:01:05,340\nWe saw AJ, FT, DRS right?\n\n11\n00:01:05,340 --> 00:01:08,080\nAny acronym you can throw at it,\nwe've seen.\n\n12\n00:01:08,080 --> 00:01:13,040\nSome of them are really really slick, some\nof them are useful but not as graceful.\n\n13\n00:01:13,040 --> 00:01:15,870\nIt just kinda depends on our\nenvironment which one we pick.\n\n14\n00:01:15,870 --> 00:01:19,500\nToday we're gonna add even more to that\nlist of things we can do to ensure that\n\n15\n00:01:19,500 --> 00:01:21,440\nour servers are up and running and\n\n16\n00:01:21,440 --> 00:01:24,580\nthat our VM's are running\nas they're supposed to.\n\n17\n00:01:24,580 --> 00:01:27,080\nI wanna start off with one\nthat's easy to implement, and\n\n18\n00:01:27,080 --> 00:01:30,180\none that we've sort of already seen.\n\n19\n00:01:30,180 --> 00:01:35,480\nWhen we create a virtual machine, we have\nthe option to assign resource limits.\n\n20\n00:01:35,480 --> 00:01:39,000\nYou can restrict how much CPU utilization,\nor\n\n21\n00:01:39,000 --> 00:01:43,970\nhow much memory or whatever, that a single\nvirtual machine is able to access.\n\n22\n00:01:43,970 --> 00:01:46,210\nAnd the reason we can do that,\n\n23\n00:01:46,210 --> 00:01:49,200\nthe reason we saw that in\nan earlier episode was twofold.\n\n24\n00:01:49,200 --> 00:01:52,200\nOne was to set maximums so\n\n25\n00:01:52,200 --> 00:01:56,840\nthat no one virtual machine can\ntake more resources than it should.\n\n26\n00:01:56,840 --> 00:02:00,350\nYou don't want one guest\nmonopolizing an entire host.\n\n27\n00:02:00,350 --> 00:02:03,370\nThat all the other guests on\nthat host start to slow down and\n\n28\n00:02:03,370 --> 00:02:05,330\nnot be able to perform\nthe way they're supposed to.\n\n29\n00:02:06,460 --> 00:02:09,620\nThe other reason we can do it\nis to set minimums, right,\n\n30\n00:02:09,620 --> 00:02:10,820\nnot maximums but minimums.\n\n31\n00:02:10,820 --> 00:02:15,440\nWe can reserve certain amounts\nof memory and CPU and so on.\n\n32\n00:02:15,440 --> 00:02:19,340\nFor a virtual machine so that it's\nguaranteed to have it when it's ready.\n\n33\n00:02:20,410 --> 00:02:24,700\nNow, for most of us, if we're a private\norganization and we're only running\n\n34\n00:02:24,700 --> 00:02:27,890\nvirtual machines for our own environment,\nwe don't worry about that so much.\n\n35\n00:02:27,890 --> 00:02:29,700\nA lot of people just never set the limits,\n\n36\n00:02:29,700 --> 00:02:32,060\nthey put the VM's in place and\noff they go.\n\n37\n00:02:32,060 --> 00:02:35,880\nBut if you're a service provider, if\nyou're running a cloud hosting service or\n\n38\n00:02:35,880 --> 00:02:40,040\nsomething of that nature, then you'll\nuse those limits very frequently\n\n39\n00:02:40,040 --> 00:02:44,390\nbecause you don't want one customer\nimpacting another customer.\n\n40\n00:02:44,390 --> 00:02:47,440\nNow the only problem with the way that we\nsaw how to do that in an earlier episode\n\n41\n00:02:47,440 --> 00:02:51,690\nwas that we did it on\nthe virtual machines themselves.\n\n42\n00:02:51,690 --> 00:02:58,560\nWell if we don't care so much about one VM\nby itself, but VM's, as a group, right?\n\n43\n00:02:58,560 --> 00:03:00,300\nMaybe I have customer one, two and\n\n44\n00:03:00,300 --> 00:03:04,400\nthree and each customer has\nfive virtual machines each.\n\n45\n00:03:04,400 --> 00:03:09,380\nWell, I don't care if one of their VM's is\nconsuming a lot of CPU cycles, I care if\n\n46\n00:03:09,380 --> 00:03:14,200\nall of their VM's as a whole, reach a\ncertain level of utilization on my server.\n\n47\n00:03:14,200 --> 00:03:16,970\nWe have a technology\ncalled resource pools.\n\n48\n00:03:16,970 --> 00:03:23,360\nAnd a resource pool is where we can create\na collection of memory or CPU utilization,\n\n49\n00:03:23,360 --> 00:03:29,040\nand we can have one or more virtual\nmachines all drawing from the same pool.\n\n50\n00:03:29,040 --> 00:03:31,370\nIt's a great way to\ncompartmentalize your environment,\n\n51\n00:03:31,370 --> 00:03:34,230\nto divide up resources among-st customers.\n\n52\n00:03:34,230 --> 00:03:38,560\nOr in a private environment you might\ndo this where you have your production\n\n53\n00:03:38,560 --> 00:03:42,720\nvirtual machines, and you might have your\ntest and development virtual machines.\n\n54\n00:03:42,720 --> 00:03:45,270\nYou might have your test and\ndevelopment throttled down so\n\n55\n00:03:45,270 --> 00:03:48,252\nthey can't consume more than 10%\nof the CPU at any given time.\n\n56\n00:03:48,252 --> 00:03:52,720\nThey're gonna run slower but\nthere's not a lot of users in there.\n\n57\n00:03:52,720 --> 00:03:54,450\nAnd if someone is doing test and\ndevelopment and\n\n58\n00:03:54,450 --> 00:03:56,990\nthey break something and\nthey're CPU elevations skyrocket,\n\n59\n00:03:56,990 --> 00:04:02,080\nit will never consume more than 10%\nof you production system resources.\n\n60\n00:04:02,080 --> 00:04:05,640\nYou can start to kind of\ncompartmentalized things there also.\n\n61\n00:04:05,640 --> 00:04:08,470\nResource groups are super easy to create,\nso\n\n62\n00:04:08,470 --> 00:04:10,490\nit's just really recognizing\nthat we need to do it.\n\n63\n00:04:11,840 --> 00:04:16,210\nIf you're just trying to restrict one VM,\nyou don't need resource groups.\n\n64\n00:04:16,210 --> 00:04:17,930\nYou can do that right on the VM itself.\n\n65\n00:04:17,930 --> 00:04:21,990\nYou can set resource limits,\njust like we did earlier in the series.\n\n66\n00:04:21,990 --> 00:04:27,760\nBut if you want to create a pool, a shared\nset of resources that a couple of virtual\n\n67\n00:04:27,760 --> 00:04:32,740\nmachines are gonna be limited to, that's\nwhere resource pools come in, all right,\n\n68\n00:04:32,740 --> 00:04:36,240\nnow technically you already\nuse resource pools.\n\n69\n00:04:36,240 --> 00:04:41,350\nWhen you install ESXi,\nthat host has a resource pool created.\n\n70\n00:04:41,350 --> 00:04:43,280\nIt just happens to be unlimited.\n\n71\n00:04:43,280 --> 00:04:45,820\nAll of your stuff gets put in that\nresource pool and it's kind of unlimited.\n\n72\n00:04:45,820 --> 00:04:48,070\nAnd there's another resource\npool that's created just for\n\n73\n00:04:48,070 --> 00:04:49,330\nyour management interface.\n\n74\n00:04:49,330 --> 00:04:51,360\nNow those are hidden from us,\nwe don't see those.\n\n75\n00:04:53,150 --> 00:04:55,470\nThey might as well not even exist, right?\n\n76\n00:04:55,470 --> 00:04:57,230\nBut they are there, and\n\n77\n00:04:57,230 --> 00:05:00,820\nwe just need to add our own resource\npools to start customizing things.\n\n78\n00:05:00,820 --> 00:05:04,770\nTo start customizing and implementing\nstuff that meet our particular needs.\n\n79\n00:05:04,770 --> 00:05:07,440\nLet me show you how that works.\n\n80\n00:05:07,440 --> 00:05:11,360\nLet me just go back here into my vCenter.\n\n81\n00:05:11,360 --> 00:05:15,760\nAnd what we do is when you want\nto create a resource pool,\n\n82\n00:05:15,760 --> 00:05:19,300\nwe just need to go in and find where\nit is that we're gonna be creating it.\n\n83\n00:05:19,300 --> 00:05:24,210\nTypically, we are gonna create\nthese on a cluster or a host.\n\n84\n00:05:24,210 --> 00:05:26,290\nA cluster,\nyou have multiple hosts in there, and\n\n85\n00:05:26,290 --> 00:05:29,120\nyou might want a resource pool\nthat spans the entire cluster.\n\n86\n00:05:29,120 --> 00:05:31,670\nA lot of times you can\ndo it on a single host.\n\n87\n00:05:31,670 --> 00:05:33,560\nYou can implement on either place.\n\n88\n00:05:33,560 --> 00:05:34,940\nI'll take a host here.\n\n89\n00:05:34,940 --> 00:05:37,130\nI'm gonna take I'll\ntake server number two.\n\n90\n00:05:37,130 --> 00:05:38,498\nAll right.\n\n91\n00:05:38,498 --> 00:05:39,580\nServer number two for me,\n\n92\n00:05:39,580 --> 00:05:43,210\nif I look at it, it's got a couple of\nvirtual machines that are sitting on it.\n\n93\n00:05:43,210 --> 00:05:45,737\nIt's got APP Web one, two,\nthree and the file server.\n\n94\n00:05:45,737 --> 00:05:46,457\nAll right.\n\n95\n00:05:46,457 --> 00:05:51,482\nThese systems are all sitting right\nhere on server two and as it stands,\n\n96\n00:05:51,482 --> 00:05:57,035\nthey're all competing for access to CPU,\nmemory, disc IO network, right?\n\n97\n00:05:57,035 --> 00:06:00,965\nThey're all competing for access to\nresources and I don't have limits on\n\n98\n00:06:00,965 --> 00:06:06,038\nany of them, they're just, running free,\ndoing whatever they want, okay?\n\n99\n00:06:06,038 --> 00:06:10,640\nIf I wanna start limiting them, I could go\nand pull up the settings for one VM and\n\n100\n00:06:10,640 --> 00:06:12,730\nlimit that VM specifically.\n\n101\n00:06:12,730 --> 00:06:16,360\nBut, what if APP Web one and\nAPP Web two and APP Web three,\n\n102\n00:06:16,360 --> 00:06:18,360\nthat's all one customer.\n\n103\n00:06:18,360 --> 00:06:21,098\nAnd then FILESERVER,\nthat's a second customer.\n\n104\n00:06:21,098 --> 00:06:23,590\nAnd I wanna make sure\nthat the second customer\n\n105\n00:06:23,590 --> 00:06:27,300\nhas equal access to resources\nas the first customer.\n\n106\n00:06:28,580 --> 00:06:31,700\nI don't want one guy getting more\nresources just cuz he has three VM's\n\n107\n00:06:31,700 --> 00:06:34,650\nversus another guy getting less\nresources because he just has one.\n\n108\n00:06:34,650 --> 00:06:36,090\nI wanna balance that out.\n\n109\n00:06:36,090 --> 00:06:36,840\nAll right.\n\n110\n00:06:36,840 --> 00:06:39,800\nI can create resource\npools that enforce that.\n\n111\n00:06:39,800 --> 00:06:41,350\nI'll just right click on my host here.\n\n112\n00:06:42,950 --> 00:06:45,910\nAnd if we go down to all\nthese center actions,\n\n113\n00:06:45,910 --> 00:06:50,020\nin here you'll see the option new resource\npool, it's right there at the top.\n\n114\n00:06:51,312 --> 00:06:53,196\nAll right, I'm gonna go ahead and\ncreate that new resource pool.\n\n115\n00:06:58,403 --> 00:07:01,221\nNow when we create a resource\npool we just give it a name and\n\n116\n00:07:01,221 --> 00:07:04,390\nI might call it something\nlike Customer one, right?\n\n117\n00:07:04,390 --> 00:07:07,070\nAnd then we come in and\nwe start to define our limits.\n\n118\n00:07:07,070 --> 00:07:11,260\nAnd this screen is just like what\nwe saw on the individual VM's.\n\n119\n00:07:11,260 --> 00:07:14,538\nThe only difference here is it's\ngonna be shared across multiple VM's.\n\n120\n00:07:14,538 --> 00:07:17,250\nFor Customer once's resource\npool I'm gonna come in and\n\n121\n00:07:17,250 --> 00:07:23,210\ndefine things like whether there's a\ncertain amount of reserved CPU resources.\n\n122\n00:07:23,210 --> 00:07:26,210\nOr a certain amount of reserved memory and\nso on.\n\n123\n00:07:26,210 --> 00:07:27,300\nAll right.\n\n124\n00:07:27,300 --> 00:07:29,360\nWe can start to specify those options.\n\n125\n00:07:29,360 --> 00:07:33,510\nNow when we specify them, these options,\n\n126\n00:07:33,510 --> 00:07:36,410\nthe default is they're kind\nof like a soft option.\n\n127\n00:07:36,410 --> 00:07:39,560\nSee how it's got this option here where\nit says reservation type expandable?\n\n128\n00:07:40,630 --> 00:07:44,990\nWhat expandable means is,\nif I set a reservation of,\n\n129\n00:07:44,990 --> 00:07:49,388\nlet's say down here I set a memory\nreservation of one gigabyte I\n\n130\n00:07:49,388 --> 00:07:54,400\nwanna ensure that this customer always has\none gigabyte of memory available to it.\n\n131\n00:07:54,400 --> 00:07:55,330\nOkay?\n\n132\n00:07:55,330 --> 00:07:58,280\nWhat happens if he uses up that one gig?\n\n133\n00:07:58,280 --> 00:08:02,369\nWell, if I turn expandable off,\nwhen it hits that one gig reservation,\n\n134\n00:08:02,369 --> 00:08:04,120\nit's gonna have that one gig.\n\n135\n00:08:04,120 --> 00:08:08,450\nAnd if I set the limit\nup here to one gig also,\n\n136\n00:08:08,450 --> 00:08:12,548\nthis is a hard value that I am specifying,\n\n137\n00:08:12,548 --> 00:08:17,233\nso it is going to basically\nsay I am reserving one\n\n138\n00:08:17,233 --> 00:08:21,970\ngigabyte of memory just for this customer.\n\n139\n00:08:21,970 --> 00:08:26,180\nAnd if they use that entire one gig,\nwhat happens then?\n\n140\n00:08:26,180 --> 00:08:29,100\nWell, if I don't have Expandable checked,\nthat's it.\n\n141\n00:08:29,100 --> 00:08:31,440\nThey get their 1 gig and\nthere's nothing more.\n\n142\n00:08:31,440 --> 00:08:35,510\nIf they create one guest that has\na gig of memory and then they go to\n\n143\n00:08:35,510 --> 00:08:39,000\ncreate a second guest, there'll be\nno memory available, all right.\n\n144\n00:08:39,000 --> 00:08:41,950\nBut if I leave Expandable on,\nExpandable will say,\n\n145\n00:08:41,950 --> 00:08:47,090\nokay, you've used up your resource pool,\nletâ€™s look to the parent.\n\n146\n00:08:47,090 --> 00:08:50,500\nLetâ€™s go to the parent object,\nwhich in this case would be my host.\n\n147\n00:08:50,500 --> 00:08:55,210\nWe can go to the parent, and from there we\ncan say, hey, do you have any extra memory\n\n148\n00:08:55,210 --> 00:08:58,370\nlying around somethings thatâ€™s not\nreserved for another customer yet?\n\n149\n00:08:58,370 --> 00:09:01,370\nIf there's anything left,\ncan I have it please?\n\n150\n00:09:01,370 --> 00:09:04,240\nAnd it'll reach out and it'll try and\nget that memory that's left or\n\n151\n00:09:04,240 --> 00:09:05,540\nwhatever's available.\n\n152\n00:09:05,540 --> 00:09:08,520\nSo, Expandable says, here,\nif there's memory or CPU or\n\n153\n00:09:08,520 --> 00:09:11,840\nwhatever that's not currently in use,\nlet's go ahead and use it.\n\n154\n00:09:11,840 --> 00:09:14,680\nAllow that expansion,\nbut it's not guaranteed.\n\n155\n00:09:14,680 --> 00:09:19,380\nYou can tell your customer, hey, you get\n1 gig of RAM and that's it, all right?\n\n156\n00:09:19,380 --> 00:09:23,470\nBut if they try and go over it, if it's\nthere, we'll let them have it, right.\n\n157\n00:09:23,470 --> 00:09:25,540\nThat's what that Expandable option does.\n\n158\n00:09:25,540 --> 00:09:27,980\nYou can do the same thing with\nCPU where you can come in and\n\n159\n00:09:27,980 --> 00:09:30,540\nyou can set a particular reservation.\n\n160\n00:09:30,540 --> 00:09:35,850\nI wanna ensure that this guy has at\nleast one gigahertz available to him.\n\n161\n00:09:35,850 --> 00:09:39,370\nAnd I might choose not\nto reserve any at all.\n\n162\n00:09:39,370 --> 00:09:40,680\nWhen I reserve it.\n\n163\n00:09:40,680 --> 00:09:41,900\nWhether they use it or\n\n164\n00:09:41,900 --> 00:09:46,500\nnot, that one gigahertz is now\nassigned to this resource pool.\n\n165\n00:09:46,500 --> 00:09:51,980\nSo even if the resource pool is empty it's\nnow holding one gigahertz of CPU resources\n\n166\n00:09:51,980 --> 00:09:53,080\non this host.\n\n167\n00:09:53,080 --> 00:09:53,980\nNo one else can use it.\n\n168\n00:09:53,980 --> 00:09:55,080\nIt's reserved.\n\n169\n00:09:55,080 --> 00:09:59,590\nSo I might choose to set\nthe reservation to zero gigahertz but\n\n170\n00:09:59,590 --> 00:10:04,710\nset a limit of one gigahertz and\nleave it as Expandable, okay.\n\n171\n00:10:04,710 --> 00:10:10,400\nThat way the customer is going to be\nable to get up to that one gigahertz,\n\n172\n00:10:10,400 --> 00:10:11,530\nthat's guaranteed, right.\n\n173\n00:10:11,530 --> 00:10:16,130\nI've got that limit and then after\nthat they may be able to get more or\n\n174\n00:10:16,130 --> 00:10:17,020\nthey may not, right.\n\n175\n00:10:17,020 --> 00:10:19,810\nBecause I've got that\nflagged as Expandable.\n\n176\n00:10:19,810 --> 00:10:22,690\nSo, maybe I'll do the same\nthing here with memory.\n\n177\n00:10:22,690 --> 00:10:25,140\nI'll set the reservation to zero gigs and\n\n178\n00:10:25,140 --> 00:10:30,560\nthen a limit of one gig or\nI'll take it up to two.\n\n179\n00:10:30,560 --> 00:10:35,790\nSo, I'll do a limit of two gigs of RAM for\nthis resource pool, all right.\n\n180\n00:10:35,790 --> 00:10:39,680\nNow then, I can go and create\nthe same thing for another customer.\n\n181\n00:10:39,680 --> 00:10:42,485\nSo, I can come in and\ncreate another resource pool.\n\n182\n00:10:45,509 --> 00:10:47,111\nLet me just let that finish loading.\n\n183\n00:10:47,111 --> 00:10:49,735\nAll right, so I'm gonna go and\ncreate another resource pool.\n\n184\n00:10:54,193 --> 00:10:56,470\nAnd on this one,\nthis would be customer 2, right.\n\n185\n00:10:56,470 --> 00:10:59,040\nAnd so\ncustomer 2 maybe when they sign up for\n\n186\n00:10:59,040 --> 00:11:03,360\ntheir contract they want more resources so\nI charge them more, right.\n\n187\n00:11:03,360 --> 00:11:07,390\nSo I come in and maybe I do wanna\ninsure that they have a reservation.\n\n188\n00:11:07,390 --> 00:11:12,490\nThat they are guaranteed at least that one\ngiga hertz and I'm gonna set there limit\n\n189\n00:11:12,490 --> 00:11:15,890\nat one giga hertz but\nI'll leave it as Expandable, all right.\n\n190\n00:11:15,890 --> 00:11:18,790\nAnd then on the memory side\nmaybe I wanna ensure that ,yes,\n\n191\n00:11:18,790 --> 00:11:21,310\nthey get at least 1 giga byte of memory.\n\n192\n00:11:21,310 --> 00:11:26,690\nI'll set there limit maybe at 3 gigs but\nleaving it Expandable also, all right.\n\n193\n00:11:26,690 --> 00:11:29,100\nSo different requirements for\nthe different customers.\n\n194\n00:11:29,100 --> 00:11:31,076\nI come in and\ndefine what I want them to have.\n\n195\n00:11:32,701 --> 00:11:35,657\nAll right,\nonce you've created the resource pool,\n\n196\n00:11:35,657 --> 00:11:38,620\nthings don't really look much different,\ndo they?\n\n197\n00:11:38,620 --> 00:11:43,630\nWhen we look in here, our screens and so\non, they don't really look different but\n\n198\n00:11:43,630 --> 00:11:48,500\nthere is now a new entity created\non that host that is these\n\n199\n00:11:48,500 --> 00:11:50,380\nresource pools, all right.\n\n200\n00:11:50,380 --> 00:11:54,600\nAnd we can see that when we start\nto go back up to vCenter here and\n\n201\n00:11:54,600 --> 00:11:57,250\nwe can pull up our resource pools.\n\n202\n00:11:57,250 --> 00:11:59,180\nAnd right here I can\nsee the customer 1 and\n\n203\n00:11:59,180 --> 00:12:01,880\ncustomer 2 resource pools that we created.\n\n204\n00:12:01,880 --> 00:12:05,160\nNow, once they're created,\nthey don't actually do anything.\n\n205\n00:12:05,160 --> 00:12:06,140\nThey're just sitting there.\n\n206\n00:12:06,140 --> 00:12:07,960\nThere's no virtual machines in there.\n\n207\n00:12:07,960 --> 00:12:10,670\nIf I set minimums,\nthey are reserving resources.\n\n208\n00:12:10,670 --> 00:12:13,140\nBut otherwise they're just\nsitting there doing nothing.\n\n209\n00:12:13,140 --> 00:12:17,560\nI need to move the customers\nvirtual machines into those pools.\n\n210\n00:12:17,560 --> 00:12:20,570\nAnd as I move the VM's in, if they\n\n211\n00:12:20,570 --> 00:12:25,530\nexceed the resource pools allocated amount\nof memory or CPU, the it will stop me.\n\n212\n00:12:25,530 --> 00:12:29,840\nAnd it won't let me move them in because\nthere's not enough resources available for\n\n213\n00:12:29,840 --> 00:12:32,460\nthat customer, it's kind of like\na red flag that it gives me.\n\n214\n00:12:32,460 --> 00:12:38,900\nSo I can go back up to my host,\nwhich was EXS server 2 down here,\n\n215\n00:12:38,900 --> 00:12:42,470\nand actually on this screen if I expand it\nI should see the resource pools turned up.\n\n216\n00:12:42,470 --> 00:12:47,710\nActually they're not showing up just yet,\nprobably because they're empty.\n\n217\n00:12:47,710 --> 00:12:49,260\nSo what we can do is we\ncan take these VMs and\n\n218\n00:12:49,260 --> 00:12:51,040\nwe can start to move them\ninto the resource pool.\n\n219\n00:12:51,040 --> 00:12:52,570\nAnd then that'll show up for us.\n\n220\n00:12:52,570 --> 00:12:55,485\nSo I'll take app,\nactually here let me go this way.\n\n221\n00:12:55,485 --> 00:12:58,440\nCuz you can move more than one at\na time if you go through the related\n\n222\n00:12:58,440 --> 00:12:59,900\nobjects screen.\n\n223\n00:12:59,900 --> 00:13:02,290\nAnd so\nI'll take app web 1 through app web 3.\n\n224\n00:13:02,290 --> 00:13:07,550\nAnd I'm gonna move all of those\ninto maybe this will be customer 2.\n\n225\n00:13:07,550 --> 00:13:09,920\nSo I'll take here and I'll go to move to.\n\n226\n00:13:11,062 --> 00:13:16,640\nAll right, and for the destination,\nI've done moves throughout the show, and\n\n227\n00:13:16,640 --> 00:13:19,900\nmost of the time when I've moved them I've\neither been moving them to another host or\n\n228\n00:13:19,900 --> 00:13:21,870\nto a cluster, right.\n\n229\n00:13:21,870 --> 00:13:23,540\nThat's kind of how we've been moving them.\n\n230\n00:13:23,540 --> 00:13:26,310\nBut now because we created those\nresource pools, if I go and\n\n231\n00:13:26,310 --> 00:13:31,170\nexpand out Server two,\nthere's the resource pools right there.\n\n232\n00:13:31,170 --> 00:13:34,330\nAnd there's my v app from way back\nin the beginning of the show.\n\n233\n00:13:34,330 --> 00:13:37,890\nSo I can actually move those VM's into\na particular resource pool right here.\n\n234\n00:13:37,890 --> 00:13:39,410\nSo I'm going to make them customer 2.\n\n235\n00:13:39,410 --> 00:13:43,020\nNow, notice there's a triangle\nhere to the left of customer two,\n\n236\n00:13:43,020 --> 00:13:46,770\nyou can actually create nested\nresource pools, all right.\n\n237\n00:13:46,770 --> 00:13:51,300\nSo sure I guaranteed customer 2\nthis access or these resources.\n\n238\n00:13:51,300 --> 00:13:53,820\nAnd then customer two might come to me and\nsay hey, you know what?\n\n239\n00:13:53,820 --> 00:13:55,710\nWe've gotta test in\na production environment.\n\n240\n00:13:55,710 --> 00:13:58,420\nCan we subdivide our resource pool?\n\n241\n00:13:58,420 --> 00:14:02,620\nAnd when you do that now you've got\nthat whole parent child environment.\n\n242\n00:14:02,620 --> 00:14:06,140\nYou'll have a parent resource pool and\nchild resource pools underneath it.\n\n243\n00:14:06,140 --> 00:14:09,850\nAnd so you might have the parent\nset to non-expandable.\n\n244\n00:14:09,850 --> 00:14:11,760\nthat's the resources they get and\nthat's it.\n\n245\n00:14:11,760 --> 00:14:15,140\nBut then you might have the child\nresource pool set to Expandable so\n\n246\n00:14:15,140 --> 00:14:17,010\nthey can reach up to the parent and\ngrab what's left.\n\n247\n00:14:18,180 --> 00:14:20,960\nYou've really got a lot of\nflexible control there.\n\n248\n00:14:20,960 --> 00:14:23,989\nSo I'm going to choose\nthat resource pool and,\n\n249\n00:14:23,989 --> 00:14:27,712\nlet me put this thing into\nfull screen real quick, there.\n\n250\n00:14:29,956 --> 00:14:33,207\nSo it's gonna move those over there if\nthere is enough resources available\n\n251\n00:14:33,207 --> 00:14:36,715\nthe VM's will move in there and it will be\ngreat, if there is not enough resources\n\n252\n00:14:36,715 --> 00:14:40,530\navailable I will get an error and\nit'll let me know there was a problem.\n\n253\n00:14:40,530 --> 00:14:43,840\nBut no it moved over so that's fine and\nI'll take the file server and\n\n254\n00:14:43,840 --> 00:14:46,370\nI'm gonna move that to\nthe other resource pool.\n\n255\n00:14:46,370 --> 00:14:48,510\nSo I'll go to move to, and I'll move it.\n\n256\n00:14:48,510 --> 00:14:52,620\nNow this is a logical move, not a physical\nmove, I'm not moving the datastore or\n\n257\n00:14:52,620 --> 00:14:56,210\nmoving the virtual machine configuration,\nso the moves happen really fast and\n\n258\n00:14:56,210 --> 00:14:58,310\nthey don't interrupt\nservice when they move.\n\n259\n00:14:59,330 --> 00:15:01,505\nSo if I take this one,\nI'll make this customer 1.\n\n260\n00:15:02,890 --> 00:15:04,850\nSo it should usually\nhappen pretty quickly.\n\n261\n00:15:04,850 --> 00:15:07,560\nThe only problem you're normally\ngonna see is if you don't have enough\n\n262\n00:15:07,560 --> 00:15:08,600\nresources available.\n\n263\n00:15:10,000 --> 00:15:15,010\nAll right, so now if I take ESX server 2,\nnow my resource pools are showing up.\n\n264\n00:15:15,010 --> 00:15:16,540\nNow that there's actually\nsome VMs in there,\n\n265\n00:15:16,540 --> 00:15:18,610\nthey're showing up on\nmy navigation screen.\n\n266\n00:15:18,610 --> 00:15:22,560\nSo I can take a look at customer 1,\nand related objects and\n\n267\n00:15:22,560 --> 00:15:26,440\nhere I can see the virtual machines\nthat customer 1 has assigned.\n\n268\n00:15:26,440 --> 00:15:30,460\nAnd if I go to customer 2,\nhere I can see their virtual machines.\n\n269\n00:15:30,460 --> 00:15:34,550\nAnd this is the resource pool, so if I go\nto manage, I'm gonna see settings based\n\n270\n00:15:34,550 --> 00:15:39,280\non the CPU and memory limitations\nthat I've imposed on this customer.\n\n271\n00:15:39,280 --> 00:15:42,440\nAll right, so\nyou might be asking yourself, Don,\n\n272\n00:15:42,440 --> 00:15:46,200\nhow does this pertain to clustering and\nhigh availability?\n\n273\n00:15:46,200 --> 00:15:51,284\nWell, when you've got more than one\nset of resources, more than one type\n\n274\n00:15:51,284 --> 00:15:56,204\nof environment in your vSphere deployment,\nyou could have one guest or\n\n275\n00:15:56,204 --> 00:16:01,455\none set of guests that are sapping so\nmany resources from your environment.\n\n276\n00:16:01,455 --> 00:16:06,180\nThat it decreases the performance of\nother systems on your deployment.\n\n277\n00:16:06,180 --> 00:16:10,250\nAnd when that happens the other systems\nthat get affected may become unavailable.\n\n278\n00:16:10,250 --> 00:16:12,080\nIt's like a denial of service attack.\n\n279\n00:16:12,080 --> 00:16:14,550\nAnd that means that the systems\nare effectively offline,\n\n280\n00:16:14,550 --> 00:16:15,910\nsure they're up and running.\n\n281\n00:16:15,910 --> 00:16:17,090\nBut if you customers or\n\n282\n00:16:17,090 --> 00:16:19,850\nyour end users can't get to\nthem they might as well be off.\n\n283\n00:16:19,850 --> 00:16:21,890\nAnd that means you've\nhad a service failure.\n\n284\n00:16:21,890 --> 00:16:26,470\nResource pools like this help us\nto stop that before it happens.\n\n285\n00:16:26,470 --> 00:16:28,390\nWe set limits, we set caps and\n\n286\n00:16:28,390 --> 00:16:31,880\nsay you know what,\nthese VMs cannot exceed this level.\n\n287\n00:16:31,880 --> 00:16:35,750\nIt forces everybody to play nice when\nthere's contention for hardware,\n\n288\n00:16:35,750 --> 00:16:41,780\nwhen there's people sharing the same CPU,\nsharing the same Memory, making\n\n289\n00:16:41,780 --> 00:16:45,030\nsure that we don't get that contention\nwhen they're fighting against each other.\n\n290\n00:16:45,030 --> 00:16:46,140\nThese are partitions.\n\n291\n00:16:46,140 --> 00:16:48,430\nThat's effectively what you're\ndoing is taking your host or\n\n292\n00:16:48,430 --> 00:16:53,560\nyour cluster and partitioning it, dividing\nit up to contain multiple subunits.\n\n293\n00:16:55,660 --> 00:16:58,780\nAnd if I take customer two here when you\nright click on it you'll see you can\n\n294\n00:16:58,780 --> 00:17:02,380\ncreate virtual machines right into\nthe resource pool if you want.\n\n295\n00:17:02,380 --> 00:17:06,110\nBut you also have this\nnew resource pool option.\n\n296\n00:17:06,110 --> 00:17:09,300\nAnd that's where we can come in and\nstart to create the child resource pool.\n\n297\n00:17:09,300 --> 00:17:13,150\nSo I might have\na production resource pool.\n\n298\n00:17:13,150 --> 00:17:16,300\nAnd I'll come in and\nset its reservation at whatever.\n\n299\n00:17:16,300 --> 00:17:19,920\nNotice my max reservation is one gigahertz\nbecause that's what I capped this at.\n\n300\n00:17:19,920 --> 00:17:24,000\nSo, I might come in and\nset no limit on this one, right?\n\n301\n00:17:24,000 --> 00:17:26,450\nI don't need a reservation,\ni don't need a limit.\n\n302\n00:17:26,450 --> 00:17:28,040\nI'm going to leave this one unlimited.\n\n303\n00:17:28,040 --> 00:17:32,190\nIt's expandable, so it can reach up to the\nparent and draw from it if it's available,\n\n304\n00:17:32,190 --> 00:17:34,480\nso I'm not going to really\nset any limits on production.\n\n305\n00:17:35,650 --> 00:17:40,240\nBut then I'll create another resource\npool called development, and\n\n306\n00:17:40,240 --> 00:17:42,750\non that one I will set limits.\n\n307\n00:17:42,750 --> 00:17:46,890\nSo here I'll do another one\nwhich I will call Development.\n\n308\n00:17:50,680 --> 00:17:54,110\nAnd on this one,\nI'm not going to set a reservation.\n\n309\n00:17:54,110 --> 00:17:57,760\nI don't want to reserve stuff for my dev\nenvironment but I do want to set a cap.\n\n310\n00:17:57,760 --> 00:18:00,886\nAnd I want to basically cap\nit at 20% of my resources.\n\n311\n00:18:00,886 --> 00:18:06,370\nSo I'm going to cap it at 200 Megahertz\nout of my one that I assigned to it.\n\n312\n00:18:06,370 --> 00:18:10,750\nAnd from memory, I'm going to cap it at,\nmaybe I'll just do one gig on this one.\n\n313\n00:18:11,870 --> 00:18:13,230\nOh shoot, not a reservation.\n\n314\n00:18:13,230 --> 00:18:14,740\nI meant to do a limit there.\n\n315\n00:18:14,740 --> 00:18:16,640\nA one gig limit.\n\n316\n00:18:16,640 --> 00:18:19,270\nAnd I'll go ahead and\nleave it as expandable.\n\n317\n00:18:19,270 --> 00:18:23,580\nIf there happen to be resources available\nat the parent, great, go ahead and use it.\n\n318\n00:18:23,580 --> 00:18:27,920\nBut if not, if there's no resources\navailable, then your limit\n\n319\n00:18:27,920 --> 00:18:33,180\nis that one gig that I've assigned\nright here you won't go beyond that.\n\n320\n00:18:33,180 --> 00:18:35,820\nOr I may choose not to make that\nexpandable maybe I don't want it to go\n\n321\n00:18:35,820 --> 00:18:36,390\nbeyond it.\n\n322\n00:18:36,390 --> 00:18:38,210\nNow I actually have a limit.\n\n323\n00:18:38,210 --> 00:18:41,580\nI won't get more than 200 megahertz\nof resource on the CPU side.\n\n324\n00:18:41,580 --> 00:18:44,840\nAnd I won't get more than\none gig of ram in this pool.\n\n325\n00:18:44,840 --> 00:18:48,260\nAnd so when I hit okay on that, it's\ngoing to create it in the background and\n\n326\n00:18:48,260 --> 00:18:54,650\nnow customer two, that resource pool, has\ntwo sub pools and so I've got app web one,\n\n327\n00:18:54,650 --> 00:18:57,560\napp web two, app web three,\nthese are all just here in the parent.\n\n328\n00:18:57,560 --> 00:19:01,930\nI can now start to move these web servers\naround into the child pools based on\n\n329\n00:19:01,930 --> 00:19:02,580\ntheir needs.\n\n330\n00:19:02,580 --> 00:19:07,140\nSo I might take App web two, and\nmove that to another location.\n\n331\n00:19:08,210 --> 00:19:10,360\nSo I'll take that one, and\nmaybe that's one of my,\n\n332\n00:19:12,260 --> 00:19:15,910\nlet's say app web one and\ntwo, those are production.\n\n333\n00:19:15,910 --> 00:19:21,660\nAnd so I'll just go in and\nmove those and stick them in the trial.\n\n334\n00:19:21,660 --> 00:19:23,595\nSo pop down in here and find that.\n\n335\n00:19:25,895 --> 00:19:28,472\nSo they're going to be production.\n\n336\n00:19:28,472 --> 00:19:32,136\nAnd then I'll take appweb 3 and\nI'm going to make\n\n337\n00:19:32,136 --> 00:19:38,677\nit Whoops.\n\n338\n00:19:38,677 --> 00:19:41,110\nI'll do it up here.\n\n339\n00:19:41,110 --> 00:19:42,570\nGot a little click happy on that one.\n\n340\n00:19:42,570 --> 00:19:47,170\nSo I'm going to go ahead and move it so\nit'll be in the development environment.\n\n341\n00:19:47,170 --> 00:19:49,670\nAnd you can move them in,\nmove them back out again.\n\n342\n00:19:49,670 --> 00:19:52,340\nThis is something you can do pretty\neasy I mean you see me doing it here.\n\n343\n00:19:52,340 --> 00:19:54,562\nIt only takes a few moments, as we go and\n\n344\n00:19:54,562 --> 00:19:58,060\nkind of divide these up to allow the\ncustomer to control their own resources.\n\n345\n00:19:58,060 --> 00:19:59,570\nSo, really, really powerful stuff.\n\n346\n00:20:01,090 --> 00:20:03,200\nNow I'm deploying it\nhere on a single host,\n\n347\n00:20:03,200 --> 00:20:05,705\nit's even better when you\nhave it on a cluster, right?\n\n348\n00:20:05,705 --> 00:20:09,940\nBecause a cluster, you could have 50\nnodes in there and each one has it's own\n\n349\n00:20:09,940 --> 00:20:12,500\nseparate set of resources,\nthat's a lot of resources to manage.\n\n350\n00:20:12,500 --> 00:20:15,420\nSo when we create a resource pool\nthat spreads across a cluster,\n\n351\n00:20:15,420 --> 00:20:18,230\nthat gives us a lot of granularity there.\n\n352\n00:20:18,230 --> 00:20:21,560\nBut now I can take a look at it here,\nI've got customer two.\n\n353\n00:20:21,560 --> 00:20:24,810\nAnd in customer two I've got\ndevelopment and production.\n\n354\n00:20:24,810 --> 00:20:29,350\nAnd in development I've got app web three,\nwhich is now being limited to 200 MHz and\n\n355\n00:20:29,350 --> 00:20:30,720\none gig of RAM.\n\n356\n00:20:30,720 --> 00:20:34,560\nAnd if I take a look at my production\nside, here's app web one and app web two.\n\n357\n00:20:34,560 --> 00:20:38,410\nNow notice right here where it's saying,\nunder development,\n\n358\n00:20:38,410 --> 00:20:43,350\nHow I got zero CPU reservation and\nunlimited CPU limit.\n\n359\n00:20:43,350 --> 00:20:48,030\nWell, I assigned a limit to the pool, why\nis it saying I don't have a limit here?\n\n360\n00:20:48,030 --> 00:20:51,370\nThe reason is, it's talking about\nthe limits assigned to the VM itself, and\n\n361\n00:20:51,370 --> 00:20:53,610\nI never put any limits on the VM itself.\n\n362\n00:20:53,610 --> 00:20:56,000\nIt's the resource pool\nthat's creating my limits.\n\n363\n00:20:56,000 --> 00:21:00,220\nIf you're using resource pools, you don't\nreally need limits on the individual VMs.\n\n364\n00:21:00,220 --> 00:21:04,400\nUnless you're worried about the VM's\nthemselves taking too many resources\n\n365\n00:21:04,400 --> 00:21:05,390\ninside of a pool.\n\n366\n00:21:05,390 --> 00:21:07,760\nBut you can get super\ngranular with this stuff.\n\n367\n00:21:07,760 --> 00:21:09,820\nBut, there does come a point\nwhere you over plan.\n\n368\n00:21:09,820 --> 00:21:13,370\nSo, there is a limit to\nhow useful this gets.\n\n369\n00:21:13,370 --> 00:21:15,830\nBut, you can continue\nto nest resource pools.\n\n370\n00:21:15,830 --> 00:21:17,500\nI don't know what the actual depth is.\n\n371\n00:21:17,500 --> 00:21:22,055\nI know you can you can go further but\nI've never had a need to go more than two.\n\n372\n00:21:22,055 --> 00:21:26,810\nBut you create those you put them\nin place and off you go right, so\n\n373\n00:21:26,810 --> 00:21:31,395\nwhile it doesn't seem like a high\navailability thing or a redundancy thing.\n\n374\n00:21:31,395 --> 00:21:34,464\nThese resource pulls are pretty useful\nbecause they stop that crazy over\n\n375\n00:21:34,464 --> 00:21:35,945\nutilization of your resources.\n\n376\n00:21:37,605 --> 00:21:40,285\nWhile we are talking about resources\nthere is another really neat\n\n377\n00:21:40,285 --> 00:21:43,005\nthing that introduced in ESXI 5.5.\n\n378\n00:21:43,005 --> 00:21:48,375\nWe talked about memory and\ndisk size, right, like RAM and\n\n379\n00:21:48,375 --> 00:21:52,570\nreading and writing to your hard drives\nand how there's some performance concerns,\n\n380\n00:21:52,570 --> 00:21:55,140\nespecially when it comes to\nreaching out to those hard drives.\n\n381\n00:21:55,140 --> 00:22:01,750\nSo in ESX 5.5 they introduce support for\nwhat is called vFlash, all right?\n\n382\n00:22:01,750 --> 00:22:06,550\nYou will hear it called vFlash Read Cache,\nwhich is a little more accurate.\n\n383\n00:22:06,550 --> 00:22:10,520\nWhat it is, is where we can take\na solid state drive, all right?\n\n384\n00:22:10,520 --> 00:22:14,690\nEither flash that's built onto\nthe motherboard, or flash that you've\n\n385\n00:22:15,700 --> 00:22:19,280\nadded in the form of an SSD drive or\n\n386\n00:22:19,280 --> 00:22:22,760\none of those PCI express cards that\nyou add in that adds flash memory.\n\n387\n00:22:22,760 --> 00:22:28,110\nAnd ESX can use that as read cache for\nwhen it's accessing your disks.\n\n388\n00:22:28,110 --> 00:22:31,410\nSo if there's data that you're constantly\naccessing inside of one of your data\n\n389\n00:22:31,410 --> 00:22:36,710\nstores, it can cache that to this SSD\nflash, which is super fast, right?\n\n390\n00:22:36,710 --> 00:22:40,190\nWay faster than reading from the disks,\nit's a really neat thing.\n\n391\n00:22:40,190 --> 00:22:44,490\nSo if you've got that type of memory,\nyou can enable that functionality, and\n\n392\n00:22:44,490 --> 00:22:48,380\nonce it's enabled, you can then define\nwhich virtual machines are allowed to use\n\n393\n00:22:48,380 --> 00:22:50,250\nit and how much of it they're able to use.\n\n394\n00:22:50,250 --> 00:22:52,640\nSo it's another resource\nthat we need to control.\n\n395\n00:22:52,640 --> 00:22:56,090\nAll right, now I don't have a vFlash\nmodule inside of my host but\n\n396\n00:22:56,090 --> 00:22:58,150\nI can still show you the configuration.\n\n397\n00:22:58,150 --> 00:23:01,290\nThe first thing we need to do is we\nneed to tell our system whether or\n\n398\n00:23:01,290 --> 00:23:02,660\nnot it even has vFlash.\n\n399\n00:23:02,660 --> 00:23:04,140\nWe need to get that turned on.\n\n400\n00:23:04,140 --> 00:23:07,110\nSo, you've got to have the hardware\nthat's the first part.\n\n401\n00:23:07,110 --> 00:23:13,900\nThe other thing is ESXi, it only supports\nup to four terabytes of the flash.\n\n402\n00:23:13,900 --> 00:23:16,840\nSo, If you go out right now it's pretty\nhard to find a flash that's over\n\n403\n00:23:16,840 --> 00:23:17,760\nfour terabytes.\n\n404\n00:23:17,760 --> 00:23:21,350\nBut if you are watching this\nvideo in 2015 a four tier by\n\n405\n00:23:21,350 --> 00:23:25,110\nflash drive might not be uncommon and so\nthat is going to be our upper limit, so\n\n406\n00:23:25,110 --> 00:23:28,330\nwe need to have something smaller\nthan that, we have it in the system.\n\n407\n00:23:28,330 --> 00:23:32,540\nThen we need to tell our system that\nit's there and that we enabled it so\n\n408\n00:23:32,540 --> 00:23:34,780\nwe need our system to be\naware that it's got it.\n\n409\n00:23:35,800 --> 00:23:38,520\nSo to do that we need to go into our host.\n\n410\n00:23:38,520 --> 00:23:39,810\nIt's actually tied to the host.\n\n411\n00:23:39,810 --> 00:23:41,630\nSo I'll continue working with Server 2.\n\n412\n00:23:41,630 --> 00:23:45,060\nAll right, and\nif we go into the Settings of Server 2.\n\n413\n00:23:45,060 --> 00:23:48,207\nSo I'm just going to go\nto Manage > Settings,\n\n414\n00:23:48,207 --> 00:23:52,335\nway down at the bottom here,\nthis is actually off my screen.\n\n415\n00:23:52,335 --> 00:23:56,807\nYou've got Virtual Flash and so you've\ngot virtual flash resource management,\n\n416\n00:23:56,807 --> 00:24:00,241\nand virtual flash host swap cache\nconfiguration What we want to\n\n417\n00:24:00,241 --> 00:24:04,285\ntake a look at right off is just\nthe resource management side, all right?\n\n418\n00:24:04,285 --> 00:24:08,451\nAnd you'll see where it's talking about\nusing the SSD device to connect up and\n\n419\n00:24:08,451 --> 00:24:09,950\nmanage and so on.\n\n420\n00:24:09,950 --> 00:24:15,190\nWell what you need to do is if you have\nthe device, it should show up down here.\n\n421\n00:24:15,190 --> 00:24:17,760\nNow it might not show up right away,\nyou've got your little refresh button and\n\n422\n00:24:17,760 --> 00:24:18,700\nthat's fine.\n\n423\n00:24:18,700 --> 00:24:21,889\nYou can hit \"add capacity\" to\nconfigure and change that, right?\n\n424\n00:24:21,889 --> 00:24:25,940\nWell, I don't have a device,\nso I don't have it right here.\n\n425\n00:24:25,940 --> 00:24:28,130\nStep one would be to add that in.\n\n426\n00:24:28,130 --> 00:24:29,390\nGet that device right here.\n\n427\n00:24:29,390 --> 00:24:32,975\nIt will be under your device backing\nlist that you've got that drive.\n\n428\n00:24:32,975 --> 00:24:38,410\nNow, you may not want to use\nthe entire drive for V flash,\n\n429\n00:24:38,410 --> 00:24:42,450\nso you can edit your settings and set what\nthe capacity is,so what your upper limit\n\n430\n00:24:42,450 --> 00:24:47,290\nis but once that device is added to\nthe host, the host knows it's there and\n\n431\n00:24:47,290 --> 00:24:49,590\nit's ready to use it for this read cache.\n\n432\n00:24:49,590 --> 00:24:52,090\nNow we just need to assign\non the VM's whether or\n\n433\n00:24:52,090 --> 00:24:54,990\nnot they're allowed to use it and\nhow much they get.\n\n434\n00:24:54,990 --> 00:24:57,580\nNow this is something we don't\ncontrol from a resource pool.\n\n435\n00:24:57,580 --> 00:25:00,680\nWe actually do have to control\nthis on the guest itself.\n\n436\n00:25:00,680 --> 00:25:04,080\nSo what we do is we go down\nto a particular guest.\n\n437\n00:25:04,080 --> 00:25:06,970\nSo I'll take one of my production\nservers from our earlier example.\n\n438\n00:25:08,410 --> 00:25:12,030\nAlright, so I'll take appweb one and\nI'm just gonna go into its settings.\n\n439\n00:25:13,670 --> 00:25:15,810\nAnd the settings are actually\ngonna be under the hard drive.\n\n440\n00:25:15,810 --> 00:25:18,400\nSo I need to find the virtual\nhard drive in here.\n\n441\n00:25:18,400 --> 00:25:20,000\nSo my hard disk is right here.\n\n442\n00:25:20,000 --> 00:25:25,350\nWhen you expand it out,\nyou'll see in the information here,\n\n443\n00:25:25,350 --> 00:25:28,720\nVirtual Flash Read Cache, okay?\n\n444\n00:25:28,720 --> 00:25:34,510\nThat's that vFlash and you have to\ntell it how much it's allowed to use.\n\n445\n00:25:34,510 --> 00:25:39,280\nSo just adding the vFlash to the ESXi\nhost doesn't actually do anything.\n\n446\n00:25:39,280 --> 00:25:42,880\nWe have to turn it on on the guest\nto actually get them to use it and\n\n447\n00:25:42,880 --> 00:25:45,780\nit's done on a guest by guest basis.\n\n448\n00:25:45,780 --> 00:25:51,680\nAll right, so I might say yeah, this\nguy's allowed to use one gig of vFlash.\n\n449\n00:25:51,680 --> 00:25:55,770\nI might have two terabytes of it, but\nthis guy's only allowed to use one gig or\n\n450\n00:25:55,770 --> 00:26:00,790\nI might want it to use the whole set,\nso I might come in and say 2000 gigs.\n\n451\n00:26:00,790 --> 00:26:03,410\nI'm well over my reservation for\nmy resource pool there,\n\n452\n00:26:03,410 --> 00:26:08,380\nso maybe I limit it to 500 megs or\nwhatever.\n\n453\n00:26:08,380 --> 00:26:09,710\nActually it's saying that that's over.\n\n454\n00:26:13,350 --> 00:26:16,510\nWell the fact that I don't have any\nis going to impact that isn't it?\n\n455\n00:26:16,510 --> 00:26:19,630\nBut let me specify how much\nof it we're allowed to use.\n\n456\n00:26:19,630 --> 00:26:24,380\nSo maybe I want to allow it\nto use one GB and that's it.\n\n457\n00:26:24,380 --> 00:26:26,590\nSo I can come in and\nI can assign that data type.\n\n458\n00:26:26,590 --> 00:26:29,120\nSo I can assign it and\nnow it'll start to use it.\n\n459\n00:26:29,120 --> 00:26:30,970\nAnd my other VMs I can set that too,\n\n460\n00:26:30,970 --> 00:26:33,960\nsetting how much of that\nvFlash they're allowed to use.\n\n461\n00:26:33,960 --> 00:26:36,478\nAfter that, the system takes over and\nit deals with it.\n\n462\n00:26:36,478 --> 00:26:39,230\nWhen it sees a write\noccurring from a system,\n\n463\n00:26:39,230 --> 00:26:42,390\nit's sending it to the guest OS but\nit's also caching it on the SSD.\n\n464\n00:26:42,390 --> 00:26:46,710\nSo it's got a rapid retrieval\nif it ever needs it again.\n\n465\n00:26:46,710 --> 00:26:48,190\nAll right.\n\n466\n00:26:48,190 --> 00:26:51,250\nOne word of caution,\nif you're using DRS, right,\n\n467\n00:26:51,250 --> 00:26:56,100\nthe Distributor Resource Scheduler,\nDRS likes to move your VMs around based\n\n468\n00:26:56,100 --> 00:27:00,510\non resources whether there's\navailable CPU and memory and so on.\n\n469\n00:27:00,510 --> 00:27:06,160\nWhen you're using vFlash, your cache is\nbeing stored in that SSD on that host.\n\n470\n00:27:06,160 --> 00:27:08,520\nIf you move to another host,\nwhat happens to your cache?\n\n471\n00:27:08,520 --> 00:27:09,050\nIt gets wiped out.\n\n472\n00:27:09,050 --> 00:27:10,330\nAll right?\n\n473\n00:27:10,330 --> 00:27:15,340\nSo when you have V flash enabled on\na host like this, DRS will work.\n\n474\n00:27:15,340 --> 00:27:16,630\nI mean on a guest.\n\n475\n00:27:16,630 --> 00:27:18,890\nDRS will work when you boot the guest.\n\n476\n00:27:18,890 --> 00:27:23,410\nWhen you boot the guest up, it'll place\nit where it's most appropriate but\n\n477\n00:27:23,410 --> 00:27:27,760\nafter that, DRS will not\nautomatically move this guest.\n\n478\n00:27:27,760 --> 00:27:30,510\nThis guest will stay on\nthe host that it's on\n\n479\n00:27:30,510 --> 00:27:32,620\nbecause DRS doesn't wanna wipe it's cache.\n\n480\n00:27:32,620 --> 00:27:35,430\nIt knows that that'll hurt performance,\nand so it'll leave it where it is.\n\n481\n00:27:35,430 --> 00:27:40,330\nYou can move it manually whenever you\nwant but DRS will always prefer to move\n\n482\n00:27:40,330 --> 00:27:45,680\nnon v flash enabled guests before it\nmoves one that is v flash enabled.\n\n483\n00:27:45,680 --> 00:27:49,905\nSo just be aware of that behavior that\nit will effect the way the D-R-S makes\n\n484\n00:27:49,905 --> 00:27:50,925\ndecisions.\n\n485\n00:27:50,925 --> 00:27:54,880\nAll right and, you know, I haven't really\npushed it but I don't think D-R-S will\n\n486\n00:27:54,880 --> 00:27:58,310\nactually move it even if that's\nthe only thing that's left to move,\n\n487\n00:27:58,310 --> 00:27:59,440\nI don't think it'll do it.\n\n488\n00:27:59,440 --> 00:28:01,490\nYou've gotta get in there and\ndo it yourself.\n\n489\n00:28:01,490 --> 00:28:02,140\nAll right.\n\n490\n00:28:02,140 --> 00:28:03,590\nBut that's how V Flash works.\n\n491\n00:28:03,590 --> 00:28:07,610\nNow if I turn it on for my system notice\nit didn't complain about the fact that I\n\n492\n00:28:07,610 --> 00:28:09,500\ndon't actually have V Flash.\n\n493\n00:28:09,500 --> 00:28:12,240\nIf it doesn't see V Flash\nthere it just won't use it.\n\n494\n00:28:12,240 --> 00:28:15,640\nSo if I were to move this to\na host that had no V Flash,\n\n495\n00:28:15,640 --> 00:28:16,880\nit doesn't stop it from booting.\n\n496\n00:28:16,880 --> 00:28:17,630\nIt'll still boot up.\n\n497\n00:28:17,630 --> 00:28:19,240\nIt just won't have that acceleration.\n\n498\n00:28:19,240 --> 00:28:20,810\nSo that's a neat feature.\n\n499\n00:28:20,810 --> 00:28:25,343\nIt was added in ESXi 5.5, so\nif you're still running 5.1 or\n\n500\n00:28:25,343 --> 00:28:29,700\n5.0, you're not gonna see that option\nin there but it is a pretty cool thing.\n\n501\n00:28:29,700 --> 00:28:34,130\nYou're starting to see some vendors,\nlike IBM, slash Lenovo now,\n\n502\n00:28:34,130 --> 00:28:38,570\nwhere they're starting to integrate some\nextra flash on their motherboards just for\n\n503\n00:28:38,570 --> 00:28:41,950\nthat purpose but you can also get\nPCI Express cards that you can\n\n504\n00:28:41,950 --> 00:28:44,870\nthrow into your servers and\nget an extra, you know.\n\n505\n00:28:44,870 --> 00:28:50,740\nEven if you add a 500 gig\nSSD PCIe Express card in there,\n\n506\n00:28:50,740 --> 00:28:52,070\nyou still get advantages out of that.\n\n507\n00:28:52,070 --> 00:28:54,700\nYou still get a boost in\ndisk read performance.\n\n508\n00:28:54,700 --> 00:28:58,880\nNow if you're reading off of an SAN,\nand it's a iSCSI SAN,\n\n509\n00:28:58,880 --> 00:29:02,900\nit is a noticeable boost in performance\nbut if you're reading off of like a fiber\n\n510\n00:29:02,900 --> 00:29:06,770\nchannel SAN that's not very heavily used,\nyou might not really notice the benefit,\n\n511\n00:29:06,770 --> 00:29:09,270\nso different environments are gonna\nbenefit different ways from that.\n\n512\n00:29:10,850 --> 00:29:15,480\nAll right, so that pretty much wraps\nup resource, pools and V flash, so\n\n513\n00:29:15,480 --> 00:29:18,670\na couple of neat little resources there\nthat we can tweak inside of our system.\n\n514\n00:29:18,670 --> 00:29:21,450\nObviously not required, a lot of\nenvironments aren't going to use them but\n\n515\n00:29:21,450 --> 00:29:23,670\nthey're neat, they're there and\nthey're on the exam.\n\n516\n00:29:23,670 --> 00:29:26,710\nAll right, we've got a couple of other\nthings that we need to talk about.\n\n517\n00:29:26,710 --> 00:29:29,400\nWe're gonna talk about backing\nup our servers, our guests.\n\n518\n00:29:29,400 --> 00:29:32,829\nWe're gonna talk about replicating our\nguests and stuff but for this segment,\n\n519\n00:29:32,829 --> 00:29:33,915\nI'm kind of out of time.\n\n520\n00:29:33,915 --> 00:29:36,082\nSo why don't we stop here and\ntake a break, and\n\n521\n00:29:36,082 --> 00:29:39,540\nwhen we get back we'll have some more\nclustering excitement after this.\n\n522\n00:29:39,540 --> 00:29:41,236\nStay tuned, I'll see you there.\n\n523\n00:29:41,236 --> 00:29:48,820\n[MUSIC].\n\n524\n00:29:48,820 --> 00:29:49,995\nWelcome back everybody.\n\n525\n00:29:49,995 --> 00:29:54,840\nOkay so, what we are going to take a look\nat next; we are going to step away from\n\n526\n00:29:54,840 --> 00:29:58,047\nthe idea of keeping our servers up and\nrunning, and\n\n527\n00:29:58,047 --> 00:30:03,280\ntake a look at ways that we can\nrecover from issues that might arise.\n\n528\n00:30:03,280 --> 00:30:06,210\nThere's several times where\ndown time is just unavailable,\n\n529\n00:30:06,210 --> 00:30:09,160\nwhere virtual machines get damaged and\nhave to be rebuilt and so\n\n530\n00:30:09,160 --> 00:30:11,930\non, and we want ways to avoid that,\nall right?\n\n531\n00:30:11,930 --> 00:30:13,410\nLet me give you a great example.\n\n532\n00:30:13,410 --> 00:30:18,220\nEvery so often Microsoft will release\na new service pack for Windows.\n\n533\n00:30:18,220 --> 00:30:23,470\nSo you might be running Windows Server\n2003, Windows Server 2008, 2012, and\n\n534\n00:30:23,470 --> 00:30:28,275\nyou're running just fine and\nthen Microsoft releases a Service Pack.\n\n535\n00:30:28,275 --> 00:30:33,623\n[SOUND] And Service Pack [LAUGH] it\nmight include a number of fixes and\n\n536\n00:30:33,623 --> 00:30:38,792\nsecurity patches but\nit might also include some new features.\n\n537\n00:30:38,792 --> 00:30:41,254\nAnd some of those features might\nbe something that you want, so\n\n538\n00:30:41,254 --> 00:30:44,000\nyou look at it and you're like, man,\nI really want that new feature.\n\n539\n00:30:44,000 --> 00:30:44,700\nGreat.\n\n540\n00:30:44,700 --> 00:30:46,950\nSo you go to deploy the service pack.\n\n541\n00:30:46,950 --> 00:30:49,970\nNow, you always deploy a service\npack in a test environment\n\n542\n00:30:49,970 --> 00:30:53,510\nfirst to make sure that things work\nout right and, assuming that they do,\n\n543\n00:30:53,510 --> 00:30:55,355\nthen you go and take them into production.\n\n544\n00:30:55,355 --> 00:31:00,040\nSo you take your production server and\nyou deploy this new service back to it and\n\n545\n00:31:00,040 --> 00:31:02,270\nit blue screens and\nit won't boot up anymore and\n\n546\n00:31:02,270 --> 00:31:06,610\nit crashes because sometimes,\nwhen you deploy something in test,\n\n547\n00:31:06,610 --> 00:31:09,590\nyou can only mirror your\nproduction environment so well.\n\n548\n00:31:09,590 --> 00:31:12,380\nSometimes, there are subtle differences\nthat might not be noticed and\n\n549\n00:31:12,380 --> 00:31:16,290\nwhen you deploy it in production,\nthings go south fast or, something got\n\n550\n00:31:16,290 --> 00:31:19,500\npast your detection and testing and now\nits in production and your server crashes.\n\n551\n00:31:19,500 --> 00:31:21,920\nSo you need to be able to\nrecover as quickly as possible.\n\n552\n00:31:21,920 --> 00:31:25,140\nNow in the past, what that meant was you\nhad to go and get your back up tapes,\n\n553\n00:31:25,140 --> 00:31:28,350\nand you had to restore your back up that\nyou took prior to doing the update and\n\n554\n00:31:28,350 --> 00:31:29,650\nget your system back online and\n\n555\n00:31:29,650 --> 00:31:35,170\nit would take a while but\nin vSphere, we can take snapshots.\n\n556\n00:31:35,170 --> 00:31:39,430\nA snapshot is when we freeze a virtual\nmachine at a certain point in time and\n\n557\n00:31:39,430 --> 00:31:43,570\nthen we can go and make changes to it,\nand if anything goes wrong,\n\n558\n00:31:43,570 --> 00:31:47,230\nwe can just roll right back to\nthe snapshot, it tak a matter of seconds.\n\n559\n00:31:47,230 --> 00:31:50,400\nConsiderably faster than going to\nback up tape and the older options.\n\n560\n00:31:50,400 --> 00:31:56,155\nNow, quick word of caution, snapshots\nare not a substitute for backups.\n\n561\n00:31:56,155 --> 00:31:57,774\nYou still need backups.\n\n562\n00:31:57,774 --> 00:32:02,255\nThe main reason is the snapshots\nare stored on the same hard drives as\n\n563\n00:32:02,255 --> 00:32:07,206\nthe actual virtual machine So\nif the virtual machines' hard drives fail,\n\n564\n00:32:07,206 --> 00:32:09,107\nyou lost your snapshot too.\n\n565\n00:32:09,107 --> 00:32:13,070\nSo, a snapshot will protect\nyou from a software fault.\n\n566\n00:32:13,070 --> 00:32:15,660\nIt will not protect you\nfrom a hardware fault.\n\n567\n00:32:15,660 --> 00:32:17,540\nYou still need to do good backups.\n\n568\n00:32:17,540 --> 00:32:19,990\nAnd we'll talk about\nbackups a little bit later.\n\n569\n00:32:19,990 --> 00:32:21,700\nBut this is not a substitute for it.\n\n570\n00:32:21,700 --> 00:32:23,620\nBut they're super easy to use.\n\n571\n00:32:23,620 --> 00:32:25,780\nAnd they work on a pretty neat principle.\n\n572\n00:32:25,780 --> 00:32:28,730\nWhat happens is when you take\na snapshot of a virtual machine,\n\n573\n00:32:28,730 --> 00:32:32,840\nif the virtual machine is powered\noff when you take the snapshot,\n\n574\n00:32:32,840 --> 00:32:37,160\nwhat it does is it makes a copy of\nthe virtual machine's configuration.\n\n575\n00:32:37,160 --> 00:32:38,770\nRight?\nYou have a configuration file that\n\n576\n00:32:38,770 --> 00:32:42,140\nidentifies how much memory you have,\nhow many network adapters you have,\n\n577\n00:32:42,140 --> 00:32:44,200\nwhat virtual networks those\nadapters are connected to,\n\n578\n00:32:44,200 --> 00:32:48,040\nall that information about\nthe hardware of that guest.\n\n579\n00:32:48,040 --> 00:32:52,070\nThen it takes the hard drive,\n\n580\n00:32:52,070 --> 00:32:56,590\nthe VMDK files, those virtual hard\ndrives and it flags them read-only.\n\n581\n00:32:56,590 --> 00:33:00,790\nSo it makes them read-only, so no new\nchanges can be made to that hard drive.\n\n582\n00:33:00,790 --> 00:33:04,170\nAnd then it creates a new\nvirtual hard drive,\n\n583\n00:33:04,170 --> 00:33:08,720\nwhich is called a delta file,\nand any changes that are made to\n\n584\n00:33:08,720 --> 00:33:13,670\nthe hard drives are written to the delta\ninstead of the original drive.\n\n585\n00:33:13,670 --> 00:33:15,990\nThat's how we can flip right\nback in a matter of seconds.\n\n586\n00:33:15,990 --> 00:33:17,950\nWe still have the original hard drives,\nright?\n\n587\n00:33:17,950 --> 00:33:20,840\nSo we can flip right back all the changes\nare being written to the delta file,\n\n588\n00:33:20,840 --> 00:33:21,940\nall right?\n\n589\n00:33:21,940 --> 00:33:24,345\nSo, we've got a backup\nof our configuration, so\n\n590\n00:33:24,345 --> 00:33:26,875\nif we change our hardware components,\nadd network cards,\n\n591\n00:33:26,875 --> 00:33:29,715\nwhatever, we can still rollback from that,\nand\n\n592\n00:33:29,715 --> 00:33:33,115\nwe've got our hard drive frozen at that\npoint in time so we can go back to that.\n\n593\n00:33:33,115 --> 00:33:34,725\nSo we've got a lot of flexibility there.\n\n594\n00:33:34,725 --> 00:33:36,622\nReally cool stuff, right?\n\n595\n00:33:36,622 --> 00:33:40,081\nBut, with all the good,\nthere does come some bad.\n\n596\n00:33:40,081 --> 00:33:42,718\nWhen you're talking about a delta disk,\n\n597\n00:33:42,718 --> 00:33:46,950\nany write that happens isn't being\nwritten to the original disk.\n\n598\n00:33:46,950 --> 00:33:47,860\nLet me draw a picture.\n\n599\n00:33:47,860 --> 00:33:49,080\nLet me see if I can illustrate this.\n\n600\n00:33:49,080 --> 00:33:54,930\nCuz if I describe it out loud\nit's kind of confusing sometimes.\n\n601\n00:33:54,930 --> 00:33:57,490\nLet me get into my drawing program here.\n\n602\n00:33:57,490 --> 00:33:59,740\nOf course it wants to update.\n\n603\n00:33:59,740 --> 00:34:02,285\nGod forbid it can go\na day without updating.\n\n604\n00:34:02,285 --> 00:34:08,140\nAright, so let's say that on\nthe left I have my hard drive.\n\n605\n00:34:08,140 --> 00:34:14,610\nOn my hard drive I have assorted data,\nand the data is written in\n\n606\n00:34:14,610 --> 00:34:20,060\nlittle blocks like these, so,\nI'll just throw these blocks out here.\n\n607\n00:34:22,538 --> 00:34:24,930\nI don't wanna bore us to death\nwatching me draw blocks,\n\n608\n00:34:24,930 --> 00:34:29,440\nbut basically we just have\nblocks of data that we write.\n\n609\n00:34:29,440 --> 00:34:35,020\nAnd as we write to the data, we're\nswapping these out with ones and zeroes.\n\n610\n00:34:35,020 --> 00:34:38,240\nThat's basically what's\nbeing stored in our disk.\n\n611\n00:34:38,240 --> 00:34:41,570\nWell, when we take a snapshot,\nwhat it does is it,\n\n612\n00:34:41,570 --> 00:34:43,605\nit makes this disk on the left read-only.\n\n613\n00:34:44,830 --> 00:34:48,920\nIt makes a new disk,\nour delta disk, over here.\n\n614\n00:34:49,990 --> 00:34:53,711\nAnd as we write data to it,\nit's just updating it and\n\n615\n00:34:53,711 --> 00:34:56,510\nstoring that new data over here.\n\n616\n00:34:56,510 --> 00:34:58,690\nSo some blocks may be unchanged.\n\n617\n00:34:58,690 --> 00:35:01,872\nThe bulk of your hard drive doesn't\nget changed on a regular basis.\n\n618\n00:35:01,872 --> 00:35:05,050\nYou've got a lot of statics that\nare static that don't change.\n\n619\n00:35:05,050 --> 00:35:09,780\nBut as we write data, maybe we're changing\nthe data right here in this block.\n\n620\n00:35:09,780 --> 00:35:16,920\nInstead of writing the data here, it will\nwrite it over here, into the delta file.\n\n621\n00:35:16,920 --> 00:35:20,790\nAnd so that's gonna happen throughout\nthe life of this snapshot.\n\n622\n00:35:20,790 --> 00:35:24,560\nAs people write data,\nthe changes are being written over here.\n\n623\n00:35:24,560 --> 00:35:28,850\nSo the delta file itself doesn't contain\na full picture of your hard drive,\n\n624\n00:35:28,850 --> 00:35:30,770\nit only contains the changes.\n\n625\n00:35:30,770 --> 00:35:33,260\nSo the delta is useless by itself.\n\n626\n00:35:33,260 --> 00:35:37,699\nThat's why it's stored on the same\ndisk as the regular VMDK, right?\n\n627\n00:35:37,699 --> 00:35:40,250\nI mean, let me add some text\nlabels to this so we can remember.\n\n628\n00:35:40,250 --> 00:35:47,450\nSo this is the the snapshot,\nor this is the original VMDK.\n\n629\n00:35:47,450 --> 00:35:51,070\nThat is probably the smallest\nfont that I could use if I tried.\n\n630\n00:35:52,290 --> 00:35:53,270\nJust bump that up a bit.\n\n631\n00:35:55,035 --> 00:35:58,500\nAright, so\nthat's my original VMDK on the left and\n\n632\n00:35:58,500 --> 00:36:03,020\nthen on the right,\nthis is my snapshot, okay.\n\n633\n00:36:03,020 --> 00:36:07,160\nNow when somebody goes to read,\nmaybe they wanna read the whole disk,\n\n634\n00:36:07,160 --> 00:36:11,410\nwhat happens is the reads actually\nhave to pass through the snapshot.\n\n635\n00:36:11,410 --> 00:36:16,070\nEvery read has to be filtered through the\ndelta file to see if there were changes.\n\n636\n00:36:16,070 --> 00:36:20,130\nAnd if there weren't changes, then it\ngets passed through to the original VMDK.\n\n637\n00:36:20,130 --> 00:36:22,600\nAright, now there's a problem.\n\n638\n00:36:22,600 --> 00:36:27,000\nIs that, whenever we do a read from the\nhard drive, we're now having to read not\n\n639\n00:36:27,000 --> 00:36:31,400\none, but two files to find\nthe data that we're looking for.\n\n640\n00:36:31,400 --> 00:36:34,150\nAnd that's different than\nwhat we're used to, right?\n\n641\n00:36:34,150 --> 00:36:38,430\nNormally we'd just reach right in and\nwe'd get the data that we want, right?\n\n642\n00:36:38,430 --> 00:36:42,810\nThat's the way these operations normally\nwork, but when we've got a snapshot,\n\n643\n00:36:42,810 --> 00:36:47,240\nit's definitely on the different side\nbecause we've got to reach around and\n\n644\n00:36:47,240 --> 00:36:52,380\nfind that data that might actually\nbe in more than one place, right?\n\n645\n00:36:52,380 --> 00:36:55,680\nDepending on whether changes occurred or\nnot.\n\n646\n00:36:55,680 --> 00:36:57,170\nSo if a change was made,\n\n647\n00:36:57,170 --> 00:36:59,890\nsure, we find it right there in\nthe first file that we look at.\n\n648\n00:36:59,890 --> 00:37:02,380\nIt's just right there in the snapshot.\n\n649\n00:37:02,380 --> 00:37:09,160\nBut if no change had been made we'd\ndo a lookup against the snapshot.\n\n650\n00:37:09,160 --> 00:37:10,760\nWe don't find our data.\n\n651\n00:37:10,760 --> 00:37:15,180\nAnd then we end up having to look through\nall the way to the file underneath.\n\n652\n00:37:15,180 --> 00:37:17,270\nThat's an extra step.\n\n653\n00:37:17,270 --> 00:37:19,835\nAnd what that means is that\nwhile you have a snapshot,\n\n654\n00:37:19,835 --> 00:37:21,606\nyour performance will be degraded.\n\n655\n00:37:21,606 --> 00:37:25,545\nAny read that you're performing on\nthe drive is gonna be slower than normal.\n\n656\n00:37:25,545 --> 00:37:28,923\nSo snap shots are designed to\nbe used temporarily, right?\n\n657\n00:37:28,923 --> 00:37:32,522\nYou do not wanna take a snapshot and\nkeep it forever, all right?\n\n658\n00:37:32,522 --> 00:37:35,160\nIn fact,\nthe VMware's recommendation is three days.\n\n659\n00:37:35,160 --> 00:37:37,005\nYou never wanna keep a snapshot\nmore than three days.\n\n660\n00:37:37,005 --> 00:37:40,309\nYou should be able to identify within\nthree days whether or not you're gonna\n\n661\n00:37:40,309 --> 00:37:44,170\nhave a problem big enough that needs\nyou to roll back to that snapshot.\n\n662\n00:37:44,170 --> 00:37:45,740\nOr back in the original drive.\n\n663\n00:37:45,740 --> 00:37:50,480\nSo what you should do is take a snapshot,\nmake your changes.\n\n664\n00:37:50,480 --> 00:37:53,680\nIf they blow up,\nyou just roll right back, right.\n\n665\n00:37:53,680 --> 00:37:54,860\nAnd what is rolling back?\n\n666\n00:37:54,860 --> 00:37:57,030\nWell, rolling back just\nsays delete this file and\n\n667\n00:37:57,030 --> 00:37:58,550\nhave people go to the original VMDK.\n\n668\n00:37:58,550 --> 00:38:00,680\nTake it from read-only,\nmake it read-write, and\n\n669\n00:38:00,680 --> 00:38:01,590\nnow you're in business, right?\n\n670\n00:38:01,590 --> 00:38:02,370\nThat's rolling back.\n\n671\n00:38:02,370 --> 00:38:03,070\nThat's why it's so fast.\n\n672\n00:38:03,070 --> 00:38:05,400\nBecause it's already got that file there.\n\n673\n00:38:05,400 --> 00:38:09,140\nBut, you take the snapshot,\nyou make your changes,\n\n674\n00:38:09,140 --> 00:38:12,570\nyou might not know right away whether or\nnot everything's working right.\n\n675\n00:38:12,570 --> 00:38:14,640\nSo you might wanna wait 24 hours.\n\n676\n00:38:14,640 --> 00:38:19,225\nMake sure things are working smoothly,\nand then when they are, you have to\n\n677\n00:38:19,225 --> 00:38:24,355\nmerge the snapshot, and merging the\nsnapshot is where it takes these changes,\n\n678\n00:38:24,355 --> 00:38:27,715\nand it moves them in to the original file.\n\n679\n00:38:27,715 --> 00:38:31,425\nAnd then it deletes the snapshot and\nall you have is the original file.\n\n680\n00:38:31,425 --> 00:38:32,575\nSo, that's what we want.\n\n681\n00:38:32,575 --> 00:38:37,005\nA successful change,\nwe need to merge the snapshot in.\n\n682\n00:38:37,005 --> 00:38:39,605\nUnsuccessful change,\nwe need to delete the snapshot and\n\n683\n00:38:39,605 --> 00:38:41,620\nwe go back to our original disk.\n\n684\n00:38:41,620 --> 00:38:45,370\nNow there is another reason\nwhy performance is hurt.\n\n685\n00:38:45,370 --> 00:38:51,010\nWhen you create an original VMDK, you have\nthe option to thick or thin provision it.\n\n686\n00:38:51,010 --> 00:38:53,050\nAnd I know I talked about\nthat in another episode,\n\n687\n00:38:53,050 --> 00:38:56,840\nwith thick provisioning we\nreserve all of our space at once.\n\n688\n00:38:56,840 --> 00:38:59,050\nAnd that ensures good performance.\n\n689\n00:38:59,050 --> 00:39:03,450\nWe get contiguous space all in a row,\nno fragmentation on the hard drive side,\n\n690\n00:39:03,450 --> 00:39:04,850\nit's all in one big file.\n\n691\n00:39:04,850 --> 00:39:06,900\nSo the best performance possible.\n\n692\n00:39:06,900 --> 00:39:10,820\nWith thin provisioning,\nyou allocate space as you need it.\n\n693\n00:39:10,820 --> 00:39:13,730\nSo as your hard drive grows,\nyou start allocating the space.\n\n694\n00:39:13,730 --> 00:39:15,360\nWell the space might not be contiguous.\n\n695\n00:39:15,360 --> 00:39:18,800\nYou might get fragmented at the VMDK side,\non the file side.\n\n696\n00:39:18,800 --> 00:39:21,443\nSo you could have\nfragmentation in the file and\n\n697\n00:39:21,443 --> 00:39:23,760\nthen fragmentation of the file itself.\n\n698\n00:39:23,760 --> 00:39:27,130\nYou have double fragmentation, and\nthat results in poor performance.\n\n699\n00:39:27,130 --> 00:39:31,180\nWell, even if your original\ndisk is thick provisioned,\n\n700\n00:39:31,180 --> 00:39:34,320\nthe snapshots are always thin provisioned.\n\n701\n00:39:34,320 --> 00:39:38,280\nIt doesn't know how big the snapshot\nis going to need to grow to\n\n702\n00:39:38,280 --> 00:39:41,220\nbecause it's containing the delta.\n\n703\n00:39:41,220 --> 00:39:47,010\nSo this really it's just the delta or\nchanges.\n\n704\n00:39:47,010 --> 00:39:48,410\nThat's what's going in here.\n\n705\n00:39:48,410 --> 00:39:52,340\nIt doesn't know how many changes\nare gonna be made in here, so\n\n706\n00:39:52,340 --> 00:39:57,100\nit creates a thin provision file\nthat's growing as you put data in it.\n\n707\n00:39:57,100 --> 00:40:00,180\nThe more changes you make,\nthe bigger that delta file grows, and\n\n708\n00:40:00,180 --> 00:40:02,654\nthe worse your performance\nis gonna get as a result.\n\n709\n00:40:02,654 --> 00:40:06,196\nSo that's another reason why you don't\nwanna leave snapshots laying around.\n\n710\n00:40:06,196 --> 00:40:08,656\nI know a lot of people\ndo that in production.\n\n711\n00:40:08,656 --> 00:40:11,442\nThey'll get the server working just the\nway they want and they'll take a snapshot.\n\n712\n00:40:11,442 --> 00:40:14,310\nAnd they'll leave it there saying,\nboy I like having that safety net.\n\n713\n00:40:14,310 --> 00:40:14,920\nAll right.\n\n714\n00:40:14,920 --> 00:40:16,990\nYou like the safety net,\nbut you're paying for it.\n\n715\n00:40:16,990 --> 00:40:22,280\nYou might not realize it but\nyou're disk I/O is being affected by that.\n\n716\n00:40:22,280 --> 00:40:25,920\nAnd on like an active directory domain\ncontroller you probably won't notice.\n\n717\n00:40:25,920 --> 00:40:27,030\nA snapshot's probably okay.\n\n718\n00:40:27,030 --> 00:40:29,600\nAlthough domain controller's are a mess\nwhen it comes to snapshots, so\n\n719\n00:40:29,600 --> 00:40:30,760\nyou wanna be careful there.\n\n720\n00:40:30,760 --> 00:40:36,580\nBut on a SQL server or an exchange server,\ndatabase servers like that, oh it hurts.\n\n721\n00:40:36,580 --> 00:40:37,780\nIt does hurt performance.\n\n722\n00:40:37,780 --> 00:40:41,050\nYou definitely don't want to leave a\nsnapshot on those longer than you need to.\n\n723\n00:40:41,050 --> 00:40:44,630\nBut boy are they convenient as that\nsafety net for testing Windows.\n\n724\n00:40:44,630 --> 00:40:47,340\nAnd they're super easy to implement,\nlet me show you what I mean.\n\n725\n00:40:47,340 --> 00:40:49,770\nI'm gonna take a server,\none of my guests, right?\n\n726\n00:40:49,770 --> 00:40:51,510\nI've got a file server on here somewhere.\n\n727\n00:40:53,670 --> 00:40:55,050\nLet me find him.\n\n728\n00:40:55,050 --> 00:41:01,310\nAnd so somewhere on here I've got\na virtual machine that is a file server.\n\n729\n00:41:01,310 --> 00:41:02,280\nThere it is.\n\n730\n00:41:02,280 --> 00:41:03,300\nAll right.\n\n731\n00:41:03,300 --> 00:41:08,390\nHere's my file server, and\nit is sitting here on ESX server two,\n\n732\n00:41:08,390 --> 00:41:13,140\nit's my file server and I am running\nWIndows Server 2008, R 2 on it, so\n\n733\n00:41:13,140 --> 00:41:16,740\nit's up, it's happy, it's doing\nit's job on my network, all right?\n\n734\n00:41:16,740 --> 00:41:21,660\nNow that file server, it's got various\ncomponents attached to it, right?\n\n735\n00:41:21,660 --> 00:41:23,670\nIf I look at it's related objects,\n\n736\n00:41:23,670 --> 00:41:27,690\nI can see that it's got a virtual network\nattached to it and under data stores.\n\n737\n00:41:27,690 --> 00:41:29,400\nIt's storing its data.\n\n738\n00:41:29,400 --> 00:41:31,210\nActually, it's associated with two stores.\n\n739\n00:41:31,210 --> 00:41:32,940\nOh, that's the shared ISO store.\n\n740\n00:41:32,940 --> 00:41:36,010\nI must have left a virtual\nCD in its CD drive.\n\n741\n00:41:36,010 --> 00:41:38,820\nBut the ESX server two data store one.\n\n742\n00:41:38,820 --> 00:41:41,640\nIts hard drives,\nits configuration, and so on,\n\n743\n00:41:41,640 --> 00:41:43,420\nare being stored right\nhere on data store one.\n\n744\n00:41:43,420 --> 00:41:48,110\nAnd if I browse through that data store,\nlet me just browse into it.\n\n745\n00:41:50,250 --> 00:41:54,920\nIf I go into manage and files, I can\nsee all the files in that data store.\n\n746\n00:41:54,920 --> 00:41:57,660\nI should see a folder in\nhere called file server.\n\n747\n00:41:57,660 --> 00:41:59,060\nThere it is.\n\n748\n00:41:59,060 --> 00:42:02,550\nWhen I look in there, I'll see all the\nfiles that are related to my file server.\n\n749\n00:42:02,550 --> 00:42:06,940\nNow, if the virtual machine is powered on,\nyou're gonna see more files in here,\n\n750\n00:42:06,940 --> 00:42:08,260\nthen if it were powered off.\n\n751\n00:42:08,260 --> 00:42:10,650\nRight.\nThings change based on the power state.\n\n752\n00:42:10,650 --> 00:42:13,450\nBut the main files that I'm looking for\nare this guy right here,\n\n753\n00:42:13,450 --> 00:42:18,110\nthis VMX file, that's the configuration\nof my virtual machine.\n\n754\n00:42:18,110 --> 00:42:21,270\nHow much memory did I assign to it,\nwhat virtual network is it attached to, so\n\n755\n00:42:21,270 --> 00:42:22,980\non that's all stored right there.\n\n756\n00:42:22,980 --> 00:42:24,615\nAnd then here's my VM DK.\n\n757\n00:42:25,735 --> 00:42:27,815\nThat's my virtual disk.\n\n758\n00:42:27,815 --> 00:42:31,405\nMy hard drive that I'm using\non that server right now.\n\n759\n00:42:32,435 --> 00:42:35,998\nIf I take a snapshot of this machine the,\nof file server,\n\n760\n00:42:35,998 --> 00:42:40,705\nit's gonna make this file read only,\nand create that new delta file.\n\n761\n00:42:40,705 --> 00:42:42,295\nThat's where my changes are gonna go.\n\n762\n00:42:42,295 --> 00:42:44,085\nIt's also gonna backup the VMX.\n\n763\n00:42:45,700 --> 00:42:49,350\nIf the virtual machine is powered\non when I take the snapshot,\n\n764\n00:42:49,350 --> 00:42:51,470\nit'll also capture what's in RAM.\n\n765\n00:42:51,470 --> 00:42:53,650\nIt'll grab what's in\nmemory on that system,.\n\n766\n00:42:55,040 --> 00:42:58,320\nAnd if it's powered on it'll\nremember that it was powered on.\n\n767\n00:42:58,320 --> 00:43:02,530\nIf I ever revert to snapshot,\nif I roll back to the snapshot.\n\n768\n00:43:02,530 --> 00:43:05,620\nIf it was powered on during snapshot,\nit'll power on when I roll back.\n\n769\n00:43:05,620 --> 00:43:06,690\nAnd whatever was in RAM,\n\n770\n00:43:06,690 --> 00:43:09,640\nwhatever it was doing at that\ntime will be brought back also.\n\n771\n00:43:10,730 --> 00:43:12,620\nBut if the machine is powered off,\n\n772\n00:43:12,620 --> 00:43:15,700\nif it's powered off I don't need to back\nup the memory cuz the memory's empty.\n\n773\n00:43:15,700 --> 00:43:17,860\nDepending on when you take the snapshot,\nyou may or\n\n774\n00:43:17,860 --> 00:43:20,400\nmay not have that collection\nof what's in RAM.\n\n775\n00:43:20,400 --> 00:43:22,240\nAnd that can increase\nthe size of your snapshot.\n\n776\n00:43:24,320 --> 00:43:28,400\nAnother thing worth noting, if you\nsnapshot a virtual machine while it's\n\n777\n00:43:28,400 --> 00:43:33,370\npowered on, the virtual machine could\nbe midway through writing a file.\n\n778\n00:43:33,370 --> 00:43:34,870\nAnd you take that snapshot.\n\n779\n00:43:34,870 --> 00:43:36,580\nWhen you go and\n\n780\n00:43:36,580 --> 00:43:41,370\nrestore that virtual machine, it could\nbe trying to finish writing that file.\n\n781\n00:43:41,370 --> 00:43:44,870\nBut conditions could have changed in\na way that the file fails to write.\n\n782\n00:43:46,120 --> 00:43:49,240\nThere are things that could\nhappen that make it inconsistent.\n\n783\n00:43:49,240 --> 00:43:53,400\nIf you want a truly consistent snapshot,\nyou'll do it while the machine is turned\n\n784\n00:43:53,400 --> 00:43:57,040\noff, but if it's a mission critical system\nyou don't want to turn it off, right.\n\n785\n00:43:58,090 --> 00:44:03,410\nWhat VM ware did is they actually work\nwith Microsoft and got it where the VM\n\n786\n00:44:03,410 --> 00:44:08,080\nware tools will work with the volume\nshadow copy service inside of Windows.\n\n787\n00:44:08,080 --> 00:44:12,080\nAnd so if you're running Windows Server\n2003, 2008, 2012 then the snapshot\n\n788\n00:44:13,450 --> 00:44:17,010\nsystem in VMware will\nactually talk to Windows and\n\n789\n00:44:17,010 --> 00:44:19,840\ndo what's called quiescing\nthe file system.\n\n790\n00:44:19,840 --> 00:44:23,100\nQuiescing the file system just says\nhey before we take this snapshot,\n\n791\n00:44:23,100 --> 00:44:24,970\nfinish writing whatever you're writing.\n\n792\n00:44:24,970 --> 00:44:27,270\nFinish any write to the hard drive.\n\n793\n00:44:27,270 --> 00:44:30,270\nThen we'll take our snapshot,and then\nyou can finish doing rights again.\n\n794\n00:44:30,270 --> 00:44:32,910\nAnd what it does is,\nit just kind of cashes the rights in RAM,\n\n795\n00:44:32,910 --> 00:44:35,150\ninstead of writing them to\nthe drive while it acquiesces.\n\n796\n00:44:35,150 --> 00:44:38,980\nAnd then when it's done, it takes\nthat back up, and you're in business.\n\n797\n00:44:38,980 --> 00:44:42,750\nThat works in Windows,\nif you've got a Linux guest, it doesn't.\n\n798\n00:44:42,750 --> 00:44:44,330\nIt doesn't work there.\n\n799\n00:44:44,330 --> 00:44:47,996\nOn a Linux guest, to make sure you get\nthe best snapshot possible, you shut it\n\n800\n00:44:47,996 --> 00:44:52,370\ndown,and take the snapshot but, if you've\ngot the machine up and you know it's not\n\n801\n00:44:52,370 --> 00:44:55,730\ndoing any crazy disc writes or whatever,\nthen you can take it while it's live.\n\n802\n00:44:55,730 --> 00:44:58,220\nThere's just a small chance that\nyou might have some disc corruption\n\n803\n00:44:58,220 --> 00:44:58,770\nwhen that happens.\n\n804\n00:44:58,770 --> 00:44:59,818\nYou lose some writes.\n\n805\n00:45:01,100 --> 00:45:02,540\nAll right.\n\n806\n00:45:02,540 --> 00:45:06,493\nI'm gonna take a snapshot of my file\nserver and my file server is up and\n\n807\n00:45:06,493 --> 00:45:11,058\nrunning right now, so I'll just leave it\npowered on while I do the snapshot, so\n\n808\n00:45:11,058 --> 00:45:14,943\nI am gonna go into my virtual machines and\nI will take my file server,\n\n809\n00:45:14,943 --> 00:45:16,191\nthis guy right here.\n\n810\n00:45:19,285 --> 00:45:21,360\nAnd I'm just gonna\nright-click on that one.\n\n811\n00:45:21,360 --> 00:45:24,950\nAnd you'll see right in here\nthat we've got Take a Snapshot,\n\n812\n00:45:24,950 --> 00:45:28,570\nRevert to Latest Snapshot,\nand Manage Snapshots.\n\n813\n00:45:28,570 --> 00:45:30,200\nThose are our snapshot\noptions right there.\n\n814\n00:45:30,200 --> 00:45:32,850\nI wanna take a snapshot, all right.\n\n815\n00:45:32,850 --> 00:45:36,200\nAnd so I'll call it maybe,\nprior to installing.\n\n816\n00:45:38,700 --> 00:45:39,850\nService Pack two.\n\n817\n00:45:39,850 --> 00:45:40,720\nOkay.\n\n818\n00:45:40,720 --> 00:45:42,400\nI just wanna make a note\nof why I'm doing that.\n\n819\n00:45:42,400 --> 00:45:45,140\nAnd see how I've got snapshot\nthe virtual machine's memory?\n\n820\n00:45:45,140 --> 00:45:48,110\nThat means that it is gonna try and\ncapture what's in RAM so\n\n821\n00:45:48,110 --> 00:45:50,840\nthat I can return the system right\nback to the way that it was.\n\n822\n00:45:50,840 --> 00:45:55,250\nAnd you also have quiesce, the guest file\nsystem needs VMware tools installed,\n\n823\n00:45:55,250 --> 00:45:58,960\nwhich I thought I had installed but\napparently I didn't.\n\n824\n00:45:58,960 --> 00:46:02,360\nIf you see that grayed out, then that\nmeans that you didn't install VMware tools\n\n825\n00:46:02,360 --> 00:46:06,300\nor you're running an unsupported OS,\nmaybe it's running Linux, right.\n\n826\n00:46:06,300 --> 00:46:08,830\nAnd so it's not supported for quiescing.\n\n827\n00:46:08,830 --> 00:46:10,780\nMy option is grayed out,\nI guess I didn't install my tools.\n\n828\n00:46:10,780 --> 00:46:13,980\nAll right, I'll go ahead and\nsay OK to that.\n\n829\n00:46:13,980 --> 00:46:15,820\nAnd there it goes,\nit's taking the snapshot.\n\n830\n00:46:15,820 --> 00:46:18,720\nNow the snapshot happens pretty\nquick because what's it doing?\n\n831\n00:46:18,720 --> 00:46:22,000\nIt's really just renaming some files and\nchanging permissions.\n\n832\n00:46:22,000 --> 00:46:24,440\nIt happens on a pretty quick basis.\n\n833\n00:46:24,440 --> 00:46:28,480\nThe longest part of the snapshot,\nis the memory side of things.\n\n834\n00:46:28,480 --> 00:46:32,380\nIt's gotta take all that was in RAM and\nwrite it to disk.\n\n835\n00:46:32,380 --> 00:46:34,780\nIf you've got four gigs of\nRAM assigned to that VM and\n\n836\n00:46:34,780 --> 00:46:38,050\nit's using all of it has\nto write a four gig file.\n\n837\n00:46:38,050 --> 00:46:39,740\nSo that's what takes the longest.\n\n838\n00:46:39,740 --> 00:46:43,610\nIf the machine is powered off,\nthe snapshot happens almost instantly.\n\n839\n00:46:43,610 --> 00:46:47,160\nIt doesn't take very long at all to do\na snapshot of a machine that's turned off.\n\n840\n00:46:47,160 --> 00:46:49,640\nIn fact, while I wait on that one,\nlet me take a machine that is turned off.\n\n841\n00:46:49,640 --> 00:46:50,730\nI'll take APP Web one here.\n\n842\n00:46:50,730 --> 00:46:53,090\nAnd I'm gonna snapshot that one.\n\n843\n00:46:54,520 --> 00:46:56,150\nNow this one is running Linux.\n\n844\n00:46:56,150 --> 00:46:58,180\nIt's powered off, though, so\nit doesn't really matter.\n\n845\n00:46:58,180 --> 00:46:59,920\nI'll say prior to updates.\n\n846\n00:47:01,080 --> 00:47:03,800\nI don't have the virtual memory\noption cuz the machine is off and\n\n847\n00:47:03,800 --> 00:47:06,870\nI don't have quiesce cuz it's not Windows.\n\n848\n00:47:06,870 --> 00:47:08,860\nI'll say okay and\nit's gonna snapshot that one.\n\n849\n00:47:08,860 --> 00:47:12,100\nSince it's turned off, APP Web one\nwill snapshot much, much faster.\n\n850\n00:47:12,100 --> 00:47:12,680\nSo, there you go.\nSee,\n\n851\n00:47:12,680 --> 00:47:15,680\nit's already caught up with file server\nand it'll pass it here in a moment.\n\n852\n00:47:15,680 --> 00:47:16,400\nThere, it's already done.\n\n853\n00:47:18,900 --> 00:47:22,870\nNow we'll look at APP Web one while\nwe're waiting on File Server.\n\n854\n00:47:22,870 --> 00:47:26,700\nWhen APP Web one is done, its got that\nsnapshot and I'll see some additional\n\n855\n00:47:26,700 --> 00:47:30,850\nfiles on its drive if I go and\ntake look at its data store.\n\n856\n00:47:30,850 --> 00:47:33,240\nLet me go find its data store.\n\n857\n00:47:33,240 --> 00:47:35,440\nIt's in my shared data store so\nI'll jump over there.\n\n858\n00:47:37,740 --> 00:47:42,451\nAnd so I will find the APP Web one folder,\nand inside of there I am gonna see a VMDK.\n\n859\n00:47:42,451 --> 00:47:46,443\nThere's my virtual machine disk,\nand I see my VMX,\n\n860\n00:47:46,443 --> 00:47:50,076\nthat's my virtual machine configuration,\nso\n\n861\n00:47:50,076 --> 00:47:54,340\nthose are the files that I\nexpect to see right there, but\n\n862\n00:47:54,340 --> 00:47:58,150\nI can also APP Web one dash\nsnapshot two dot VMSN and\n\n863\n00:47:58,150 --> 00:48:01,917\nAPP-Web one 000001.vmdk, all right?\n\n864\n00:48:01,917 --> 00:48:04,796\nThese are my deltas.\n\n865\n00:48:04,796 --> 00:48:07,655\nMy virtual machine configuration and\nmy snapshot data,\n\n866\n00:48:07,655 --> 00:48:09,770\nwhich is right here in this file.\n\n867\n00:48:09,770 --> 00:48:12,660\nAnd then the delta drive that it made.\n\n868\n00:48:12,660 --> 00:48:16,230\nThe second hard drive,\nthat's now thin provisioned and\n\n869\n00:48:16,230 --> 00:48:18,310\ngonna grow as we put data in it.\n\n870\n00:48:18,310 --> 00:48:21,820\nNotice the AppWeb1 hard\ndrive is 37 gigs in size.\n\n871\n00:48:21,820 --> 00:48:24,080\nI made a 36 drive for it.\n\n872\n00:48:24,080 --> 00:48:25,180\nAnd it was thick provision.\n\n873\n00:48:25,180 --> 00:48:27,014\nSo, it's all laid out right now, 36 gigs.\n\n874\n00:48:27,014 --> 00:48:33,167\nBut the AppWeb 1-00001 this\nguy is only one meg in size.\n\n875\n00:48:33,167 --> 00:48:35,620\nThat's the smallest one it could create.\n\n876\n00:48:35,620 --> 00:48:40,820\nAnd as I start making changes in that VM,\nit's gonna grow to reflect those changes.\n\n877\n00:48:40,820 --> 00:48:41,420\nAll right.\n\n878\n00:48:41,420 --> 00:48:44,670\nAnd you might wonder, why it's sticking\nall these zeros and ones at the end.\n\n879\n00:48:44,670 --> 00:48:45,810\nYou can do more than one snapshot.\n\n880\n00:48:45,810 --> 00:48:48,010\nSo you can actually do tiered snapshots.\n\n881\n00:48:48,010 --> 00:48:49,960\nSo, maybe I'm gonna make\na series of changes,\n\n882\n00:48:49,960 --> 00:48:53,330\nI can take a snapshot\neach step along the way.\n\n883\n00:48:53,330 --> 00:48:57,100\nJust be aware that each snapshot you take,\nis degrading performance that much more.\n\n884\n00:48:57,100 --> 00:49:01,580\nIf I have five snapshots tiered, right,\none after the other, whenever I read from\n\n885\n00:49:01,580 --> 00:49:04,720\nthe hard drive, I'm gonna be having\nto read from five different files.\n\n886\n00:49:04,720 --> 00:49:07,270\nFour of which, in my case,\nare gonna be thin provisioned.\n\n887\n00:49:07,270 --> 00:49:10,910\nSo, your performance starts to\nget worse and worse as it goes.\n\n888\n00:49:13,480 --> 00:49:16,860\nOkay, I'm gonna take AppWeb1m,\nand I'm gonna start it up.\n\n889\n00:49:16,860 --> 00:49:20,040\nThe file server snapshot is done, so\nI'm gonna take a look at it next.\n\n890\n00:49:20,040 --> 00:49:21,128\nBut let me power up AppWeb1.\n\n891\n00:49:24,690 --> 00:49:26,280\nSo, it's gonna power on.\n\n892\n00:49:26,280 --> 00:49:30,542\nLet's go take a look at file server here,\nand its stuff shoot.\n\n893\n00:49:30,542 --> 00:49:33,100\nSo, AppWeb1,\nI had stuck in a resource pool earlier.\n\n894\n00:49:33,100 --> 00:49:34,890\nAnd I think I've exceeded my resources.\n\n895\n00:49:34,890 --> 00:49:37,367\nLet me move it, out of the resource pool.\n\n896\n00:49:40,684 --> 00:49:41,670\nLet's see.\n\n897\n00:49:41,670 --> 00:49:42,920\nIt was in a cluster.\n\n898\n00:49:42,920 --> 00:49:47,113\nSo, I'll leave it I'll leave\nit in the cluster, but\n\n899\n00:49:47,113 --> 00:49:50,669\nI just need to get it out\nof the resource pool.\n\n900\n00:50:02,828 --> 00:50:05,090\nAll right, so File Server is done.\n\n901\n00:50:05,090 --> 00:50:06,420\nLet me go take a look at its files.\n\n902\n00:50:06,420 --> 00:50:09,050\nNow the only difference between\nthe snapshot, I did for AppWeb1, and\n\n903\n00:50:09,050 --> 00:50:09,840\nthe snapshot I did for\n\n904\n00:50:09,840 --> 00:50:14,740\nfile server, is that File Server\nwas on when I took the snapshot.\n\n905\n00:50:14,740 --> 00:50:16,390\nSo, when I go and\nlook at the data store for\n\n906\n00:50:16,390 --> 00:50:22,030\nthat one, what I'm gonna see is\nthat has got a few extra files.\n\n907\n00:50:22,030 --> 00:50:23,930\nAnd so, when I go into file server here,\n\n908\n00:50:23,930 --> 00:50:25,750\nI should have looked at\nhow much memory it had.\n\n909\n00:50:25,750 --> 00:50:28,740\nBut, when I look at it,\nnotice the snapshot.vmsn.\n\n910\n00:50:28,740 --> 00:50:31,840\nOn the other server, it was 26K, right?\n\n911\n00:50:31,840 --> 00:50:34,830\nIt was really small,\ncuz the machine was powered off.\n\n912\n00:50:34,830 --> 00:50:37,250\nBut, on this one it's 2 gigs in size.\n\n913\n00:50:37,250 --> 00:50:39,750\nI must have 2 gigs of RAM\nassigned to this machine.\n\n914\n00:50:39,750 --> 00:50:42,080\nSo, it's got that assigned to it.\n\n915\n00:50:42,080 --> 00:50:44,940\nThat's storing what was\nin RAM on this system.\n\n916\n00:50:44,940 --> 00:50:49,620\nSo, it knows how it was configured\nhardware wise, what was in RAM, and\n\n917\n00:50:49,620 --> 00:50:50,930\nhow the hard drives looked.\n\n918\n00:50:50,930 --> 00:50:55,590\nI can easily roll back if I go and\nstart to make changes, all right?\n\n919\n00:50:55,590 --> 00:50:57,810\nSo, I'll go make some changes\non the virtual machine.\n\n920\n00:50:57,810 --> 00:50:59,820\nLet me jump back to that one.\n\n921\n00:50:59,820 --> 00:51:03,324\nActually, I think I have its console\nopen in the background somewhere.\n\n922\n00:51:07,460 --> 00:51:09,280\nThere we go.\n\n923\n00:51:09,280 --> 00:51:12,662\nSo, this is the console for\nthat virtual machine, that file server.\n\n924\n00:51:12,662 --> 00:51:21,920\nAnd Ctrl+Alt+ Delete in there right now.\n\n925\n00:51:21,920 --> 00:51:23,140\nAll right.\n\n926\n00:51:23,140 --> 00:51:26,500\nI'm now remote into one machine,\nremoting into a second machine so\n\n927\n00:51:26,500 --> 00:51:27,930\nmy keyboard shortcuts aren't working.\n\n928\n00:51:27,930 --> 00:51:30,010\nI've gotta use the on screen prompts.\n\n929\n00:51:30,010 --> 00:51:32,920\nBut now, I can jump in here and\nI can start to make changes.\n\n930\n00:51:32,920 --> 00:51:36,450\nSo maybe, I install service pack two or\nwhatever which I don't have.\n\n931\n00:51:36,450 --> 00:51:38,930\nBut let me just find some file I can copy,\n\n932\n00:51:38,930 --> 00:51:42,630\nI'm sure there's something\ngood on here that I can use.\n\n933\n00:51:43,750 --> 00:51:48,300\nLet me do a advance search for\ngigantic files.\n\n934\n00:51:48,300 --> 00:51:51,430\nSo, I'll find some big file that I\ncan use here and I'll jut copy it.\n\n935\n00:51:51,430 --> 00:51:53,530\nWhen I copy it I'm creating a new file.\n\n936\n00:51:53,530 --> 00:51:57,440\nSo it's a duplicate, and that's gonna\nbe written to the snapshot, and\n\n937\n00:51:57,440 --> 00:51:58,750\nnot to the original hard drive.\n\n938\n00:51:58,750 --> 00:52:00,900\nThat's gonna be part of the delta,\n\n939\n00:52:00,900 --> 00:52:03,190\nassuming it ever finds something\nbig enough for me to copy.\n\n940\n00:52:04,730 --> 00:52:08,680\nThis is a plain install of Windows, so\nthere's not a whole heck of a lot on here.\n\n941\n00:52:08,680 --> 00:52:10,030\nI guess I could just\npick a file at random.\n\n942\n00:52:12,660 --> 00:52:16,230\nWe'll take Windows mail, and\nI'll just copy that to my desktop.\n\n943\n00:52:18,750 --> 00:52:22,358\nApparently it's incredibly\nsmall 640k that's terrible.\n\n944\n00:52:22,358 --> 00:52:25,560\n[LAUGH] I'm having a hard time\nshowing of the growth of this thing,\n\n945\n00:52:25,560 --> 00:52:28,350\nif I can only move a handful\nof space at a time.\n\n946\n00:52:28,350 --> 00:52:30,190\nThere is got to be something\nin here that is bigger.\n\n947\n00:52:31,230 --> 00:52:32,855\nInternet Explorer that's gotta\nbe bloated enough right?\n\n948\n00:52:35,252 --> 00:52:36,269\n4.9 megs.\n\n949\n00:52:38,750 --> 00:52:40,840\nAll this stuff is just tiny.\n\n950\n00:52:40,840 --> 00:52:46,290\nLet's just grab it all,\nwe'll go crazy, all right?\n\n951\n00:52:46,290 --> 00:52:47,830\nSo basically,\nI'm just moving some files around.\n\n952\n00:52:47,830 --> 00:52:50,110\nI'm making duplicates, so\nit's gotta move all this stuff.\n\n953\n00:52:50,110 --> 00:52:51,900\nI made about 100 megs of stuff there.\n\n954\n00:52:51,900 --> 00:52:55,830\nAnd as I'm writing this, the Virtual\nMachine, it just looks like it's done.\n\n955\n00:52:55,830 --> 00:52:58,340\nIt sees that data and that's it.\n\n956\n00:52:58,340 --> 00:53:01,920\nBut in the background, vSphere,\n\n957\n00:53:01,920 --> 00:53:05,900\nESXI is making sure those rights\ndon't go to the actual hard drive.\n\n958\n00:53:05,900 --> 00:53:11,310\nSo if I jump back,\nI'll just get out of that Virtual Machine,\n\n959\n00:53:11,310 --> 00:53:16,610\nif I jump back here to ESX Server 2 disk,\nor one, and I take a look at\n\n960\n00:53:16,610 --> 00:53:23,460\nthe files on it, I'll notice it's\nDelta VMDK has started to grow.\n\n961\n00:53:24,950 --> 00:53:26,860\nIt shouldn't have grown by much,\nbut there we go.\n\n962\n00:53:26,860 --> 00:53:29,700\nI can see it's grown to 99 MB in\nsize cuz that's what I copied.\n\n963\n00:53:29,700 --> 00:53:32,040\nThere's all those changes right there.\n\n964\n00:53:32,040 --> 00:53:35,690\nAnd if something's gone wrong, if things\naren't working the way that I wanted them\n\n965\n00:53:35,690 --> 00:53:37,870\nto, I can right-click on that VM.\n\n966\n00:53:37,870 --> 00:53:40,830\nAnd I can just choose to\nrevert to the latest snapshot,\n\n967\n00:53:40,830 --> 00:53:43,560\nif I've done tiered snapshots,\nmore than one.\n\n968\n00:53:43,560 --> 00:53:48,190\nI can go to Manage Snapshots, and I can\npick which one I wanna roll back to, so\n\n969\n00:53:48,190 --> 00:53:52,162\nhere I see prior to installing service\nback too, I might see multiple levels,\n\n970\n00:53:52,162 --> 00:53:52,810\nall right?\n\n971\n00:53:52,810 --> 00:53:54,300\nSo, if I decide I wanna roll back.\n\n972\n00:53:54,300 --> 00:53:57,490\nI can just pick that one and\nhit Revert To, all right?\n\n973\n00:53:57,490 --> 00:53:58,890\nWhen I do that,\n\n974\n00:53:58,890 --> 00:54:02,188\nI have the option of whether I wanna\nkeep the old snapshot laying around.\n\n975\n00:54:02,188 --> 00:54:04,910\nDo I wanna take a snapshot for\nthis UR here, and\n\n976\n00:54:04,910 --> 00:54:08,040\nmaintain that because I might\nwanna fix its problem later on.\n\n977\n00:54:08,040 --> 00:54:11,930\nBut, normally we just roll back and that's\nit, but if we're happy, if everything\n\n978\n00:54:11,930 --> 00:54:15,220\nworked out the way that we want,\nwhat you do is you choose your snapshot,\n\n979\n00:54:15,220 --> 00:54:18,040\nthis prior to installing\nService Pack 2 and just hit Delete.\n\n980\n00:54:18,040 --> 00:54:21,240\nWhen it deletes it,\nthere is no other snapshot.\n\n981\n00:54:21,240 --> 00:54:22,690\nSo it's gonna merge.\n\n982\n00:54:22,690 --> 00:54:25,960\nThe UR here changes,\ninto that original file.\n\n983\n00:54:27,100 --> 00:54:30,000\nIt'll merge it together, and\nnow you don't have a snapshot anymore.\n\n984\n00:54:30,000 --> 00:54:32,980\nYou're back at full performance,\nand you're running along.\n\n985\n00:54:32,980 --> 00:54:33,870\nBut if we rollback,\n\n986\n00:54:33,870 --> 00:54:37,460\nI'll just choose it and hit Revert To,\nit's gonna roll me back.\n\n987\n00:54:37,460 --> 00:54:39,450\nAnd the rollback time here,\nbecause I have RAM.\n\n988\n00:54:39,450 --> 00:54:42,530\nIt's gotta copy that 2 gigs\nof data back into RAM, and\n\n989\n00:54:42,530 --> 00:54:44,670\nput the Virtual Machine\nback to the way it was.\n\n990\n00:54:44,670 --> 00:54:48,140\nNow the VM is not accessible\nwhile this is happening so,\n\n991\n00:54:48,140 --> 00:54:50,268\nend users are kicked out\nof the system basically.\n\n992\n00:54:50,268 --> 00:54:54,430\nAnd it's gonna roll back, and\nbring that system back to where it was.\n\n993\n00:54:54,430 --> 00:54:56,450\nActually it looks like it\nhappened very quickly.\n\n994\n00:54:56,450 --> 00:54:58,160\nIt seems to think that it's already done.\n\n995\n00:55:00,560 --> 00:55:02,660\nSo, I'm just gonna open up the console for\nthat machine.\n\n996\n00:55:02,660 --> 00:55:05,840\nIf it is done, those files that I copied\nto the hard drive should be gone.\n\n997\n00:55:05,840 --> 00:55:07,520\nThe ones that I copied to my desktop.\n\n998\n00:55:07,520 --> 00:55:09,350\nThose should not be there anymore.\n\n999\n00:55:10,610 --> 00:55:11,898\nAnd so,\nI'm just getting connected in here.\n\n1000\n00:55:14,447 --> 00:55:18,126\nIt's kind of neat when you roll this back,\nbecause if you took the snapshot and\n\n1001\n00:55:18,126 --> 00:55:20,840\nyou were logged into\nthe console when it happened.\n\n1002\n00:55:20,840 --> 00:55:24,580\nWhen you revert to the snapshot,\nyou'll still be logged in on that console.\n\n1003\n00:55:24,580 --> 00:55:26,540\nSo it's kind of interesting.\n\n1004\n00:55:26,540 --> 00:55:29,000\nI didn't think it was ready yet.\n\n1005\n00:55:30,190 --> 00:55:32,140\nIt still, yeah just sitting\nhere at a black screen so\n\n1006\n00:55:32,140 --> 00:55:33,160\nit's not actually ready yet.\n\n1007\n00:55:33,160 --> 00:55:37,744\nLet me try and reconnect.\n\n1008\n00:55:44,395 --> 00:55:45,740\nThere we go.\n\n1009\n00:55:45,740 --> 00:55:48,192\nAll right, so\nI'm just gonna get logged back in, and\n\n1010\n00:55:48,192 --> 00:55:50,167\nassuming the snapshot applied properly.\n\n1011\n00:55:50,167 --> 00:55:54,598\nWell, the files that I copied to the\ndesktop, those windows mail and the other\n\n1012\n00:55:54,598 --> 00:55:58,761\njunk, those should all be gone because\nthose were written in the delta and\n\n1013\n00:55:58,761 --> 00:55:59,988\nI've now reverted.\n\n1014\n00:55:59,988 --> 00:56:01,103\nOkay, apparently, it's still thinking.\n\n1015\n00:56:01,103 --> 00:56:07,163\nIt's not responding to my Ctrl+Alt+Delete.\n\n1016\n00:56:07,163 --> 00:56:09,396\nWell, while we're waiting on that,\nif I jump back and\n\n1017\n00:56:09,396 --> 00:56:15,201\ntake a look at my file server though,\nif I go to manage snapshot, Right here,\n\n1018\n00:56:15,201 --> 00:56:17,290\nI reverted back to that snapshot.\n\n1019\n00:56:17,290 --> 00:56:19,540\nAnd see how the snapshot still exists?\n\n1020\n00:56:19,540 --> 00:56:23,510\nSo I've got a UR here where I am now,\nbut the snapshot is still there, right?\n\n1021\n00:56:23,510 --> 00:56:25,630\nJust reverting doesn't\nactually eliminate it.\n\n1022\n00:56:25,630 --> 00:56:26,840\nIt doesn't merge things back.\n\n1023\n00:56:26,840 --> 00:56:30,410\nSo if I'm ready to merge it,\nI need to choose it and hit delete.\n\n1024\n00:56:30,410 --> 00:56:31,920\nAnd now it's gonna get rid of it.\n\n1025\n00:56:31,920 --> 00:56:33,760\nAnd now performance will\nbe restored back to normal.\n\n1026\n00:56:33,760 --> 00:56:35,385\nNow that revert process takes a moment.\n\n1027\n00:56:35,385 --> 00:56:38,440\nCuz having to merge those disk changes in.\n\n1028\n00:56:38,440 --> 00:56:42,260\nThe more changes you had,\nthe longer it takes them to merge in.\n\n1029\n00:56:42,260 --> 00:56:45,120\nSo, in mine because I just\nrolled back to the snapshot,\n\n1030\n00:56:45,120 --> 00:56:46,800\nI shouldn't have many changes.\n\n1031\n00:56:46,800 --> 00:56:48,290\nSo my merger should happen pretty quickly.\n\n1032\n00:56:50,660 --> 00:56:51,160\nThere we go.\n\n1033\n00:56:53,370 --> 00:56:55,516\nAnd let's see if my console\nhas woken up on this yet.\n\n1034\n00:56:55,516 --> 00:56:56,963\nThere it goes.\n\n1035\n00:57:01,574 --> 00:57:05,039\nSo I'll just get logged in here and\nI should see, because I reverted,\n\n1036\n00:57:05,039 --> 00:57:08,678\nsure enough, the files on my desktop\nare gone, I'm back to the way I was,\n\n1037\n00:57:08,678 --> 00:57:09,960\nvery quick, all right?\n\n1038\n00:57:09,960 --> 00:57:14,160\nNot a substitute for backups, but a good\nway to quickly revert from a change,\n\n1039\n00:57:14,160 --> 00:57:16,770\nif you're making a change that\nyou either haven't tested or\n\n1040\n00:57:16,770 --> 00:57:19,910\none that's been through testing, but\nyou just want that safety net, right?\n\n1041\n00:57:19,910 --> 00:57:20,520\nIt's a good thing to have.\n\n1042\n00:57:22,172 --> 00:57:24,470\nAll right, well I rambled on\na little too long on that.\n\n1043\n00:57:24,470 --> 00:57:25,650\nSo I know I'm over my time.\n\n1044\n00:57:25,650 --> 00:57:27,860\nSo let's do this,\nlet's stop here and take a break.\n\n1045\n00:57:27,860 --> 00:57:31,100\nWhen we get back I've got more\navailability technologies to talk about so\n\n1046\n00:57:31,100 --> 00:57:32,460\nwe definitely need to get into that.\n\n1047\n00:57:32,460 --> 00:57:34,120\nWe're gonna talk about backups and\nreplication,\n\n1048\n00:57:34,120 --> 00:57:36,920\nwe still have all that,\nhopefully I can get it in on this episode,\n\n1049\n00:57:36,920 --> 00:57:40,580\notherwise we might have to go to a part\nfour which would be I think a record here.\n\n1050\n00:57:40,580 --> 00:57:41,700\nWe'll have to see.\n\n1051\n00:57:41,700 --> 00:57:43,140\nBut all right, so let's stop here.\n\n1052\n00:57:43,140 --> 00:57:44,296\nI'll see you guys back after this.\n\n1053\n00:57:44,296 --> 00:57:51,285\n[MUSIC]\n\n1054\n00:57:51,285 --> 00:57:53,690\nAll right, welcome back, everybody.\n\n1055\n00:57:53,690 --> 00:57:57,410\nOkay, so I mentioned in the last segment\nthat snapshots are pretty cool, but\n\n1056\n00:57:57,410 --> 00:58:00,110\nthey're not a substitute for backups.\n\n1057\n00:58:00,110 --> 00:58:02,680\nSo, we need new backups right?\n\n1058\n00:58:02,680 --> 00:58:03,960\nSo how do we do that?\n\n1059\n00:58:03,960 --> 00:58:07,830\nWell there are a number of third\nparty products that are out there and\n\n1060\n00:58:07,830 --> 00:58:09,380\na lot of them are great.\n\n1061\n00:58:09,380 --> 00:58:15,930\nI know this is one of those areas where\nI kind of agree to disagree with VMware.\n\n1062\n00:58:15,930 --> 00:58:18,680\nThere are various ways to back\nup your virtual machines.\n\n1063\n00:58:18,680 --> 00:58:20,510\nSome are better than others.\n\n1064\n00:58:20,510 --> 00:58:22,750\nPersonally, for my virtual machines, for\n\n1065\n00:58:22,750 --> 00:58:27,390\nmy guests, I prefer to do backups\nfrom within the guest itself.\n\n1066\n00:58:27,390 --> 00:58:30,760\nFor Linux servers, there's certain\nways that I like to do my backups.\n\n1067\n00:58:30,760 --> 00:58:32,970\nAnd for Windows servers, there's\ncertain ways I like to do my backups.\n\n1068\n00:58:32,970 --> 00:58:36,250\nAnd there's third-party software and\nvendor built-in software.\n\n1069\n00:58:36,250 --> 00:58:38,220\nThat you can use to do those backups.\n\n1070\n00:58:38,220 --> 00:58:43,170\nSo, I prefer to backup from within\nthe guest, that's my personal take.\n\n1071\n00:58:43,170 --> 00:58:46,900\nBut you might want to go\na different route, and\n\n1072\n00:58:46,900 --> 00:58:51,045\nbackup, not from within the guest,\nbut backup the guest itself.\n\n1073\n00:58:51,045 --> 00:58:52,685\nThe entire virtual machine.\n\n1074\n00:58:52,685 --> 00:58:55,635\nThat's kind of nice if\nyou want to be able to\n\n1075\n00:58:55,635 --> 00:58:59,305\nmove a VM quickly from one server to\nanother that are completely unrelated.\n\n1076\n00:58:59,305 --> 00:59:02,965\nBackup to an external data\nstore you then take off site.\n\n1077\n00:59:02,965 --> 00:59:06,405\nYou've got the entire\nvirtual machine backed up.\n\n1078\n00:59:06,405 --> 00:59:09,425\nYou don't have to go through the process\nof reinstalling the guest OS and\n\n1079\n00:59:09,425 --> 00:59:10,315\nthen restoring your data.\n\n1080\n00:59:10,315 --> 00:59:11,925\nYou can just restore the entire VM.\n\n1081\n00:59:13,250 --> 00:59:18,350\nSo to facilitate that,\nVMware teamed up with EMC and\n\n1082\n00:59:18,350 --> 00:59:23,810\nthey created a software package called\nVDP, or VMware Data Protection, all right?\n\n1083\n00:59:23,810 --> 00:59:24,970\nThe VMware Data Protection,\n\n1084\n00:59:24,970 --> 00:59:28,560\nit's a software suite that we run\non a virtual machine appliance.\n\n1085\n00:59:28,560 --> 00:59:31,380\nSo you actually go to VMware's website and\nyou purchase it or\n\n1086\n00:59:31,380 --> 00:59:35,470\nyou download the demo, and\nthey give you an OVF template file.\n\n1087\n00:59:35,470 --> 00:59:40,080\nSo it's a template of a virtual\nmachine and you import that into your\n\n1088\n00:59:40,080 --> 00:59:45,030\nvSphere environment somewhere and\nyou fire it up and its a software suit\n\n1089\n00:59:45,030 --> 00:59:49,250\nthat will back up entire virtual\nmachines or you can do granular.\n\n1090\n00:59:49,250 --> 00:59:50,520\nYou can get individual files, but\n\n1091\n00:59:50,520 --> 00:59:52,910\nit really wants to back up\nthe entire virtual machine.\n\n1092\n00:59:52,910 --> 00:59:55,910\nAnd stored in the specialized data store\nsomewhere where you can retrieve it at\n\n1093\n00:59:55,910 --> 00:59:57,080\na later time, right?\n\n1094\n00:59:57,080 --> 00:59:58,530\nSo it's a nice little software package.\n\n1095\n00:59:58,530 --> 01:00:03,320\nIt is directly supported by VMware,\nso you're running VMware\n\n1096\n01:00:03,320 --> 01:00:08,390\nbackup software on top of VMware vSphere\nand you're backing up vSphere VMs,\n\n1097\n01:00:08,390 --> 01:00:12,020\nso the entire backup process is\nunder the helm of one vendor.\n\n1098\n01:00:12,020 --> 01:00:13,680\nWe call that one throat to choke, right?\n\n1099\n01:00:13,680 --> 01:00:15,520\nSo if something goes wrong,\nyou know who to call.\n\n1100\n01:00:15,520 --> 01:00:17,180\nSo that is one advantage to that.\n\n1101\n01:00:17,180 --> 01:00:18,980\nIt is kinda nice.\n\n1102\n01:00:18,980 --> 01:00:22,210\nSo if you want to use VDP, it's an option.\n\n1103\n01:00:22,210 --> 01:00:22,830\nIt's out there.\n\n1104\n01:00:22,830 --> 01:00:25,250\nIt is on the exam,\nwhich is why we're covering it here.\n\n1105\n01:00:25,250 --> 01:00:28,749\nI'm not the biggest fan of the software,\nbut it is certainly viable.\n\n1106\n01:00:29,820 --> 01:00:33,700\nThey teamed up with EMC, not because\nVMware doesn't know how to backup VMs, but\n\n1107\n01:00:33,700 --> 01:00:37,420\nbecause they wanted to do what's\ncalled data deduplication.\n\n1108\n01:00:37,420 --> 01:00:40,170\nIf I back up a virtual machine\nthat's 500 gigs in size.\n\n1109\n01:00:40,170 --> 01:00:42,460\nAll right, and I back it up today.\n\n1110\n01:00:42,460 --> 01:00:46,230\nAnd then tomorrow, I do a full backup of\nthat machine, that's another 500 gigs.\n\n1111\n01:00:46,230 --> 01:00:48,880\nAnd the next day I do a full backup,\nthat's another 500 gigs.\n\n1112\n01:00:48,880 --> 01:00:52,630\nSo as I start to save these old backups,\nit gets bigger and bigger and bigger.\n\n1113\n01:00:52,630 --> 01:00:54,270\nRight?\nIt's a lot of data.\n\n1114\n01:00:54,270 --> 01:00:59,070\nWell, with EMC's technology, they have\nwhat's called data deduplication.\n\n1115\n01:00:59,070 --> 01:01:00,950\nAnd it lets you do full backups.\n\n1116\n01:01:00,950 --> 01:01:05,670\nBut it says, hey if a file hasn't changed,\nI don't need to store a second copy of it.\n\n1117\n01:01:05,670 --> 01:01:08,270\nAnd so,\nwhat it's really doing is storing deltas.\n\n1118\n01:01:08,270 --> 01:01:13,995\nKind of like differential backups or\nthe interval type back ups,\n\n1119\n01:01:13,995 --> 01:01:15,085\nwhere we're just getting the changes.\n\n1120\n01:01:15,085 --> 01:01:16,625\nWell, like our snapshots, right?\n\n1121\n01:01:16,625 --> 01:01:19,965\nSo, it's doing that so that we don't\nhave to store the same data over and\n\n1122\n01:01:19,965 --> 01:01:20,875\nover and over again.\n\n1123\n01:01:20,875 --> 01:01:24,755\nAnd that means we can get a lot more\nbackups stored in a small place.\n\n1124\n01:01:24,755 --> 01:01:26,460\nNow, you might be saying, well Don,\n\n1125\n01:01:26,460 --> 01:01:30,210\nwhy don't we just do differential backups,\nwe've got that technology.\n\n1126\n01:01:30,210 --> 01:01:32,300\nAnd the thing is with\na differential backup,\n\n1127\n01:01:32,300 --> 01:01:34,940\nwhen you go to restore,\nyou've got to get the various tapes.\n\n1128\n01:01:34,940 --> 01:01:37,830\nYou've gotta have your last full backup,\nyou're latest differential,\n\n1129\n01:01:37,830 --> 01:01:40,470\nyou gotta get all that stuff and\nkind of put it together.\n\n1130\n01:01:40,470 --> 01:01:44,450\nWith this, it's doing dedup,\nit's actually sees these as full backups.\n\n1131\n01:01:44,450 --> 01:01:47,690\nSo you just go to one place,\npull the data and recover it.\n\n1132\n01:01:47,690 --> 01:01:49,230\nSo it's doing all\nthe work on the back end.\n\n1133\n01:01:49,230 --> 01:01:51,790\nSo it's really just a convenience\nfactor is what it's all about.\n\n1134\n01:01:52,842 --> 01:01:57,358\nAll right now, if you decide to go with\na VDP there's actually two versions of it.\n\n1135\n01:01:57,358 --> 01:02:00,902\nThere's the VMware Data Protection\nStandard or just VDP and\n\n1136\n01:02:00,902 --> 01:02:04,320\nthen there's VDPA,\nVirtual Data Protection Advanced.\n\n1137\n01:02:05,570 --> 01:02:08,120\nThe difference is really in their sizing.\n\n1138\n01:02:08,120 --> 01:02:09,490\nLet me bring up my show notes,\n\n1139\n01:02:09,490 --> 01:02:13,610\ncuz I've got it in there wherever\nI've got my show notes part.\n\n1140\n01:02:15,920 --> 01:02:16,500\nHere.\n\n1141\n01:02:16,500 --> 01:02:18,640\nSo, it's really a difference in sizing.\n\n1142\n01:02:18,640 --> 01:02:24,050\nWith VDP, just the standard one,\nyou can backup up to 100 virtual machines.\n\n1143\n01:02:24,050 --> 01:02:25,500\nSo, up to 100 guests.\n\n1144\n01:02:25,500 --> 01:02:27,470\nAnd the data store that is uses,\n\n1145\n01:02:27,470 --> 01:02:30,800\nwhere it's backing it up to,\nhas a maximum size of two terabytes.\n\n1146\n01:02:30,800 --> 01:02:32,840\nSo you can back up up to\ntwo terabytes of data.\n\n1147\n01:02:32,840 --> 01:02:36,170\nNow, you might say to yourself wait\na minute, that's not a whole ton of space.\n\n1148\n01:02:36,170 --> 01:02:40,650\nBut remember it is doing deduplication,\nand it's not just doing dedup between\n\n1149\n01:02:40,650 --> 01:02:44,430\none VM and its future backups,\nit's doing dedup through all your VMs.\n\n1150\n01:02:44,430 --> 01:02:47,110\nSo if you're running 20 virtual machines.\n\n1151\n01:02:47,110 --> 01:02:48,750\nAll running Windows Server 2008 R2,\n\n1152\n01:02:48,750 --> 01:02:52,298\nthere's a lot of duplicate\nfiles in the host OS.\n\n1153\n01:02:52,298 --> 01:02:53,830\nIt will dedup those, so\n\n1154\n01:02:53,830 --> 01:02:57,240\nit's not storing those more than once,\nunless the files have changed.\n\n1155\n01:02:58,710 --> 01:03:02,270\nOne thing to note about this,\nduring the installation,\n\n1156\n01:03:02,270 --> 01:03:04,420\nyou'll pick the size of the data store.\n\n1157\n01:03:04,420 --> 01:03:07,290\nAnd if you're doing VDP, that's it.\n\n1158\n01:03:07,290 --> 01:03:09,850\nThe size you pick is\nthe size that it's got.\n\n1159\n01:03:09,850 --> 01:03:12,640\nSo you've got to allocate that\nspace right there at the beginning.\n\n1160\n01:03:12,640 --> 01:03:16,930\nWith VDP Advanced, it adds support for\n\n1161\n01:03:16,930 --> 01:03:21,300\nup to 400 guests, and\nup to eight terabytes for the data store.\n\n1162\n01:03:21,300 --> 01:03:25,130\nNot only that, when you pick that\nsize during the initial deployment,\n\n1163\n01:03:25,130 --> 01:03:28,130\nyou can then expand it after the fact.\n\n1164\n01:03:28,130 --> 01:03:32,640\nSo maybe you only do two terabytes today,\nand then down the road you add more and\n\n1165\n01:03:32,640 --> 01:03:35,470\nyou grow it up to that maximum\neight terabytes size for\n\n1166\n01:03:35,470 --> 01:03:37,010\nthe data store that it manages.\n\n1167\n01:03:37,010 --> 01:03:37,790\nAll right?\n\n1168\n01:03:37,790 --> 01:03:41,510\nYou can also upgrade from VDP to VDPA.\n\n1169\n01:03:41,510 --> 01:03:45,120\nSo if you undersized your VDP\ndeployment and you wanna grow it but\n\n1170\n01:03:45,120 --> 01:03:48,260\nyou can't, you could always go ahead and\npurchase the upgrade to go advanced.\n\n1171\n01:03:48,260 --> 01:03:49,210\nAnd then you'll have that.\n\n1172\n01:03:49,210 --> 01:03:50,720\nIt's just a matter of\npunching in a license key.\n\n1173\n01:03:50,720 --> 01:03:54,168\nSo easy enough to kind\nof flip between them.\n\n1174\n01:03:54,168 --> 01:03:58,545\nNow the storage space is one\nbig reason to go to VDPA.\n\n1175\n01:03:58,545 --> 01:04:03,550\nBut another reason is it has integrated\nsupport for Microsoft servers.\n\n1176\n01:04:03,550 --> 01:04:07,240\nSo if you're running Windows server\nMicrosoft SQL Microsoft Exchange\n\n1177\n01:04:07,240 --> 01:04:11,200\nSharePoint, it actually supports things\nlike flushing the transaction logs,\n\n1178\n01:04:11,200 --> 01:04:14,440\ndoing backups of those databases,\ndoing proper restores.\n\n1179\n01:04:14,440 --> 01:04:18,710\nIt also supports granular\nresource restoring not the VM but\n\n1180\n01:04:18,710 --> 01:04:23,990\na particular file or a particular database\nor a mailbox that kind of support.\n\n1181\n01:04:23,990 --> 01:04:30,220\nSo you get a lot of extended support with\nVDPA is very powerful and for the clients\n\n1182\n01:04:30,220 --> 01:04:33,820\nand people that I've dealt with I don't\nknow anybody that actually just VDP\n\n1183\n01:04:33,820 --> 01:04:38,990\neveryone I know went with VDPA but\nthey each kind of fit a different market.\n\n1184\n01:04:38,990 --> 01:04:42,430\nIf you just want to get backups of the\nentire VMs and knock it out or if you're\n\n1185\n01:04:42,430 --> 01:04:46,500\na Linux environment, then VDP is usually\ngood enough and if you're a Windows\n\n1186\n01:04:46,500 --> 01:04:50,100\nenvironment and you want to get advanced\nbackups, then VDPA is the way to go.\n\n1187\n01:04:51,470 --> 01:04:52,360\nAll right, so\n\n1188\n01:04:52,360 --> 01:04:57,490\nthose are some of the different things\nthat we need to be aware of with VDP.\n\n1189\n01:04:57,490 --> 01:04:58,480\nGetting it installed and\n\n1190\n01:04:58,480 --> 01:05:02,140\nrunning is really not a big deal because\nwe don't have to install the software.\n\n1191\n01:05:02,140 --> 01:05:06,050\nWe just go and\nwe get this template from VMware and\n\n1192\n01:05:06,050 --> 01:05:09,180\nI've already downloaded\nit on this machine here.\n\n1193\n01:05:10,500 --> 01:05:16,320\nIf I take a look at my desktop,\nfor VDP, this is it right here.\n\n1194\n01:05:16,320 --> 01:05:18,310\nI went to VMware's website and\nI downloaded and\n\n1195\n01:05:18,310 --> 01:05:22,890\nyou see vSphere data protection\ndash 5.5.6, blah, blah, blah.\n\n1196\n01:05:22,890 --> 01:05:24,900\nIt's the same for VDP and\n\n1197\n01:05:24,900 --> 01:05:28,660\nVDPA, the difference is just the license\nkey you punch in during the installation.\n\n1198\n01:05:28,660 --> 01:05:31,210\nThat's gonna figure out\nwhat mode it operates in.\n\n1199\n01:05:31,210 --> 01:05:35,110\nSo once you download that template file,\nright, and this one is actually an OVA,\n\n1200\n01:05:35,110 --> 01:05:38,930\nOVA's, OVF's, they are pretty much\nthe same when we go to import them.\n\n1201\n01:05:38,930 --> 01:05:42,340\nSo now,\nI just need to import it into my system.\n\n1202\n01:05:42,340 --> 01:05:45,320\nI did the import before the show\nbecause it takes a little while but\n\n1203\n01:05:45,320 --> 01:05:48,040\nI want to show you that process so\nI will start the importing and\n\n1204\n01:05:48,040 --> 01:05:50,130\ncancel it so you guys can see it.\n\n1205\n01:05:50,130 --> 01:05:53,190\nIf I want to import it, I need to figure\nout what server I want to run it from, so\n\n1206\n01:05:53,190 --> 01:05:57,220\nI will pull up my hosts and you know\nmaybe I will stick it here on server one.\n\n1207\n01:05:59,730 --> 01:06:04,330\nAnd when I look at my virtual machines I\ncan see the VMs I've got right now and\n\n1208\n01:06:04,330 --> 01:06:07,910\nI can import from a template I have got\nright here, deploy an OVF template.\n\n1209\n01:06:10,200 --> 01:06:16,080\nAlright, and I will just browse and\nfind that file on my desktop and\n\n1210\n01:06:16,080 --> 01:06:19,960\nI've got an add on file also,\nactually wait, that's the replication one.\n\n1211\n01:06:19,960 --> 01:06:23,010\nHere we go, this is the one I want.\n\n1212\n01:06:23,010 --> 01:06:26,830\nSo I'll open that up, and\nnow it's gonna start that import process.\n\n1213\n01:06:26,830 --> 01:06:31,430\nNow this template is from VMware and\nVMware\n\n1214\n01:06:31,430 --> 01:06:35,550\nknow the full functionality of their\nimport process and so it's really cool.\n\n1215\n01:06:35,550 --> 01:06:38,510\nA lot of times, when you import these\ntemplates, you then need to fire up\n\n1216\n01:06:38,510 --> 01:06:41,630\nthe console of that VM and\ncomplete some kind of a wizard, but\n\n1217\n01:06:41,630 --> 01:06:44,650\nbecause VMware made this,\nit's actually got the wizard right here.\n\n1218\n01:06:44,650 --> 01:06:47,557\nSo as we do the import, we can provide\nall of the information that we need.\n\n1219\n01:06:47,557 --> 01:06:51,941\nIn reality, you should never have to log\ninto the console of your VDP device,\n\n1220\n01:06:51,941 --> 01:06:56,338\nit just shouldn't happen unless you\nneed to like, change it's IP later on.\n\n1221\n01:06:56,338 --> 01:06:59,460\nFor the most part,\nthis import wizard is all you need.\n\n1222\n01:06:59,460 --> 01:07:00,920\nNotice it gives us for information here.\n\n1223\n01:07:00,920 --> 01:07:02,780\nThe publisher is actually EMC.\n\n1224\n01:07:02,780 --> 01:07:04,660\nThis is VM ware teamed with EMC.\n\n1225\n01:07:05,660 --> 01:07:09,400\nThe download size is 2.9 gigs,\nthe size on disk is a little bit bigger.\n\n1226\n01:07:09,400 --> 01:07:14,600\nIt's gonna thick provision 100 gigs\nof storage if I thick provision it.\n\n1227\n01:07:14,600 --> 01:07:18,060\nIf I thin, it's only gonna to 6.8 gigs and\nthen grow as needed.\n\n1228\n01:07:19,960 --> 01:07:23,423\nI've got my End User License Agreement I\nneed to sign off on, so I'll do that and\n\n1229\n01:07:23,423 --> 01:07:25,301\nthen I need to pick\nwhere it's going to go.\n\n1230\n01:07:25,301 --> 01:07:29,864\nSo I can a pick a name for\nthe VM, I might call this VDP or\n\n1231\n01:07:29,864 --> 01:07:33,530\nwhatever and pick where it's going to go.\n\n1232\n01:07:33,530 --> 01:07:35,580\nI'll stick it in my IT Pro TV Lab.\n\n1233\n01:07:37,430 --> 01:07:39,700\nFor the storage,\nI'll choose where to throw it.\n\n1234\n01:07:39,700 --> 01:07:40,920\nI'll throw it on shared.\n\n1235\n01:07:40,920 --> 01:07:41,850\nWell, I don't wanna use shared.\n\n1236\n01:07:41,850 --> 01:07:42,990\nLet's just go local.\n\n1237\n01:07:42,990 --> 01:07:47,350\nI'll go to my local data store here and\nI'll thin provision it.\n\n1238\n01:07:47,350 --> 01:07:49,600\nYou know, you can thick,\nthick would be better for performance.\n\n1239\n01:07:50,840 --> 01:07:53,220\nThen I need to specify\ninformation about the network.\n\n1240\n01:07:53,220 --> 01:07:56,330\nSo on the setup networks page it's gonna\nask what network it's gonna plug in to.\n\n1241\n01:07:56,330 --> 01:08:02,470\nI'll plug it into my VM network and notice\nthe IP allocation is set to static manual.\n\n1242\n01:08:02,470 --> 01:08:05,990\nI need to assign an IP address to this\nmachine to be able to get into it.\n\n1243\n01:08:05,990 --> 01:08:09,500\nAlright, well on the next screen\nI get customize template and\n\n1244\n01:08:09,500 --> 01:08:12,140\nhere's where I can put\nin my IP information.\n\n1245\n01:08:12,140 --> 01:08:17,850\nSo I'll give it a default,\ngateway, a DNS server to use\n\n1246\n01:08:17,850 --> 01:08:21,820\nand its IP address that\nthis machine is gonna have.\n\n1247\n01:08:21,820 --> 01:08:23,670\nI also need to give it a subnet mask.\n\n1248\n01:08:25,270 --> 01:08:28,748\nNow, once I do that it is ready\nto import it and bring it live.\n\n1249\n01:08:28,748 --> 01:08:32,734\nNow I already did that, and so in the\nbackground here I have actually got that\n\n1250\n01:08:32,734 --> 01:08:35,115\nmachine imported just\nto save a little time.\n\n1251\n01:08:35,115 --> 01:08:38,398\nAnd if you connect to the console,\nthere is not much you can do there and\n\n1252\n01:08:38,398 --> 01:08:41,308\nin fact it is just going to tell\nyou to fire up your web browser.\n\n1253\n01:08:41,308 --> 01:08:43,966\nReally once that import is done,\nyou shouldnâ€™t have to log\n\n1254\n01:08:43,966 --> 01:08:47,219\ninto the console anymore, the rest\nof it's done from your web browser.\n\n1255\n01:08:47,219 --> 01:08:50,073\nSo you fire up a browser and\nyou point it to that machine but\n\n1256\n01:08:50,073 --> 01:08:53,714\nif we take a look at the console it\njust tells you the address to browse to.\n\n1257\n01:08:53,714 --> 01:08:59,350\nThe address is really\npretty straight forward,\n\n1258\n01:08:59,350 --> 01:09:05,545\nit is, hang on let me get\nthis out of full screen mode.\n\n1259\n01:09:05,545 --> 01:09:12,690\nAll right, so it's just https://\nwhatever that virtual server name is.\n\n1260\n01:09:12,690 --> 01:09:16,360\nAnd when you create it, you really need to\ncreate a DNS entry for it so you got it.\n\n1261\n01:09:16,360 --> 01:09:24,088\nSo I did one just called vdp.itpro.tv/,\nactually not slash.\n\n1262\n01:09:24,088 --> 01:09:26,061\nI need to do colon cuz\nit's on a different port.\n\n1263\n01:09:26,061 --> 01:09:32,050\nIt's on port8543/vdp-configure, all right?\n\n1264\n01:09:32,050 --> 01:09:35,830\nIf I were to login to the console, that's\nthe page it would be telling me to go to.\n\n1265\n01:09:35,830 --> 01:09:38,110\nIt'd say go to this page and\nyou'll get to it.\n\n1266\n01:09:38,110 --> 01:09:40,391\nOh, shoot you know what, actually hang on,\n\n1267\n01:09:40,391 --> 01:09:43,350\nlet me really get out of\nfull screen this time.\n\n1268\n01:09:43,350 --> 01:09:48,780\nWhere is that option?\n\n1269\n01:09:48,780 --> 01:09:52,710\nThere, all right,\nactually it's vdp.lab.itpro.tv.\n\n1270\n01:09:52,710 --> 01:09:53,210\nThere we go.\n\n1271\n01:09:54,390 --> 01:09:58,110\nSo when I get there, what I'll get is\na login screen and I'll need to login.\n\n1272\n01:09:58,110 --> 01:09:59,710\nIt's got some default credentials.\n\n1273\n01:09:59,710 --> 01:10:02,880\nThe user name is root and\nthe password is changeme.\n\n1274\n01:10:02,880 --> 01:10:05,990\nAnd so when we log in one of the first\nthing's it'll do is ask me to change\n\n1275\n01:10:05,990 --> 01:10:06,990\nthat password.\n\n1276\n01:10:06,990 --> 01:10:08,670\nYou know, I'm not getting there am I?\n\n1277\n01:10:08,670 --> 01:10:09,510\nIt just says it's waiting.\n\n1278\n01:10:09,510 --> 01:10:10,400\nLet me see if I can ping that machine.\n\n1279\n01:10:16,668 --> 01:10:17,930\nIt is pinging.\n\n1280\n01:10:17,930 --> 01:10:21,400\nAnd let me make sure I've got DNS set up,\nI might not have.\n\n1281\n01:10:25,460 --> 01:10:26,760\nOh, I've got DNS set up wrong.\n\n1282\n01:10:26,760 --> 01:10:27,340\nShoot.\n\n1283\n01:10:27,340 --> 01:10:30,420\nI've got it pointing to the wrong IP,\nwell I'll browse to it by IP.\n\n1284\n01:10:30,420 --> 01:10:32,310\nIt is not a good idea to browse by IP,\n\n1285\n01:10:32,310 --> 01:10:34,460\nyou should have your name\nresolution set up right.\n\n1286\n01:10:34,460 --> 01:10:35,960\nI just pointed it to the wrong address so,\n\n1287\n01:10:35,960 --> 01:10:41,100\nlet me do that and that should\nwork a little bit better or not.\n\n1288\n01:10:45,300 --> 01:10:46,940\nYou know what?\nLet me make sure my virtual machine is\n\n1289\n01:10:46,940 --> 01:10:47,720\nactually turned on.\n\n1290\n01:10:47,720 --> 01:10:49,920\nI said I imported it before, but\nI might have left it turned off.\n\n1291\n01:10:49,920 --> 01:10:52,000\nSo let me just double\ncheck that real quick.\n\n1292\n01:10:52,000 --> 01:10:55,320\nSo if I go into my virtual machines,\nhere's the vSphere data protection that I\n\n1293\n01:10:55,320 --> 01:10:57,540\nimported, and sure enough,\nI've got it turned off.\n\n1294\n01:10:57,540 --> 01:10:59,538\nIt doesn't work very well when it's\nturned off, so let me start that one up.\n\n1295\n01:11:03,565 --> 01:11:05,320\nOkay.\n\n1296\n01:11:05,320 --> 01:11:11,140\nSo it's gonna power on and\nlet's see, oh I'm\n\n1297\n01:11:11,140 --> 01:11:15,580\ngetting my recommendation from distributor\nresource scheduler being turned on.\n\n1298\n01:11:15,580 --> 01:11:18,730\nI have it in manual mode, so\nthat's why I am getting that prompt.\n\n1299\n01:11:18,730 --> 01:11:22,410\nI'll just power that on, if I connect to\nit's console, I can see if it's actually\n\n1300\n01:11:22,410 --> 01:11:26,530\nfinished booting but I'm not actually\ngoing to do anything from the console.\n\n1301\n01:11:26,530 --> 01:11:29,350\nI'm just going to connect up and\nmake sure it's booting.\n\n1302\n01:11:29,350 --> 01:11:32,790\nIt is running Linux, so you'll see\na Linux operating system booting up.\n\n1303\n01:11:32,790 --> 01:11:33,650\nThere it goes.\n\n1304\n01:11:33,650 --> 01:11:35,880\nAnd you're not expected\nto really work with this.\n\n1305\n01:11:35,880 --> 01:11:39,120\nSo even if your an all Windows\nenvironment, you don't have to sweat it.\n\n1306\n01:11:39,120 --> 01:11:42,500\nSo we'll just let it churn through,\nand get fired up.\n\n1307\n01:11:42,500 --> 01:11:43,030\nAll right.\n\n1308\n01:11:43,030 --> 01:11:46,695\nWhen it's done it will basically be\nsitting at a weird like blue and\n\n1309\n01:11:46,695 --> 01:11:49,902\nblack screen where it will give\nus the information to go and\n\n1310\n01:11:49,902 --> 01:11:51,485\nbrowse that web interface.\n\n1311\n01:11:51,485 --> 01:11:54,529\nIf you forget the URL,\nyou can just look at the console and\n\n1312\n01:11:54,529 --> 01:11:56,186\nit will have it right on there.\n\n1313\n01:11:56,186 --> 01:11:57,243\nWe'll give it just a moment.\n\n1314\n01:11:57,243 --> 01:11:59,204\nIt's turning through,\nstarting all of its various things.\n\n1315\n01:12:01,643 --> 01:12:04,281\nAnd eventually, it'll be ready to rock.\n\n1316\n01:12:06,030 --> 01:12:09,680\nYou might see some failures, like I\njust got an httpd2 failure right there.\n\n1317\n01:12:09,680 --> 01:12:12,690\nThat's expected the first time,\ncuz our configuration isn't done.\n\n1318\n01:12:12,690 --> 01:12:13,790\nSo you might see that.\n\n1319\n01:12:13,790 --> 01:12:16,400\nIt's usually related to things like\ncertificates not being generated.\n\n1320\n01:12:16,400 --> 01:12:18,830\nAll right, here's the blue\nscreen I was talking about and\n\n1321\n01:12:18,830 --> 01:12:21,790\nsee how it's giving me the url\nto browse to right there.\n\n1322\n01:12:21,790 --> 01:12:23,400\nSo if you ever forget it,\nit's right there.\n\n1323\n01:12:23,400 --> 01:12:27,230\nAnd you can do basic configurations right\nhere as far as setting your network and\n\n1324\n01:12:27,230 --> 01:12:28,400\ntime zone and stuff.\n\n1325\n01:12:28,400 --> 01:12:31,770\nBut it's a lot easier to do\nthat from the GUI if possible,\n\n1326\n01:12:31,770 --> 01:12:34,440\nthat's what you really want\nto do if given the choice.\n\n1327\n01:12:35,970 --> 01:12:40,639\nConnect up to that system again, and we\nshould get some better results this time.\n\n1328\n01:12:44,145 --> 01:12:47,214\nAll right, now the fist time I log in,\nhere we go, I get my username and\n\n1329\n01:12:47,214 --> 01:12:50,460\npassword, and the password is just\nchange me the first time you connect.\n\n1330\n01:12:52,080 --> 01:12:53,170\nAnd it's gonna make me change it.\n\n1331\n01:12:54,600 --> 01:12:57,580\nNow, when you change it, this is one of\nthe more annoying things, we move through\n\n1332\n01:12:57,580 --> 01:13:02,030\nit's gonna make the password policy\non VDP is a little annoying,\n\n1333\n01:13:02,030 --> 01:13:03,350\nwhich we'll see here in a minute.\n\n1334\n01:13:03,350 --> 01:13:05,240\nLet me just move forward on the wizard.\n\n1335\n01:13:05,240 --> 01:13:08,385\nSo it's asking me to verify my\nIP address information, and I\n\n1336\n01:13:08,385 --> 01:13:12,783\ncan punch in my actual host name here, so\nI'm just verifying what was already done.\n\n1337\n01:13:14,504 --> 01:13:19,880\nAll right, I need to pick my time zone so\nI'll go America/New York.\n\n1338\n01:13:23,280 --> 01:13:24,400\nMy VDP credentials.\n\n1339\n01:13:24,400 --> 01:13:25,650\nHere's my new password.\n\n1340\n01:13:25,650 --> 01:13:27,720\nNow the new password you have\nto have an upper case and\n\n1341\n01:13:27,720 --> 01:13:29,880\nlower case character you\nhave to have a number,\n\n1342\n01:13:29,880 --> 01:13:34,790\nyou have to have a special character and\nyou have to have nine characters.\n\n1343\n01:13:34,790 --> 01:13:35,740\nThat's the annoying part.\n\n1344\n01:13:35,740 --> 01:13:36,390\nYou can't have eight.\n\n1345\n01:13:36,390 --> 01:13:37,230\nYou can't have seven.\n\n1346\n01:13:37,230 --> 01:13:38,020\nYou can't have 10.\n\n1347\n01:13:38,020 --> 01:13:38,520\nYou can't have 11.\n\n1348\n01:13:38,520 --> 01:13:43,240\nIt's gotta be nine characters exactly,\nwhich is really frustrating for\n\n1349\n01:13:43,240 --> 01:13:46,780\nme, because I never do\nnine character passwords.\n\n1350\n01:13:46,780 --> 01:13:48,232\nBut I'll punch in a nine\ncharacter password.\n\n1351\n01:13:49,730 --> 01:13:53,284\nAll right, then it's gonna register\nitself with vCenter, right.\n\n1352\n01:13:53,284 --> 01:13:56,135\nSo it needs to be able to communicate\nwith vCenter to do the backup, so\n\n1353\n01:13:56,135 --> 01:13:58,310\nit's asking for vCenter credentials.\n\n1354\n01:13:58,310 --> 01:14:06,110\nSo I'm gonna give it my local vSphere\naccount and punch in my credentials there.\n\n1355\n01:14:06,110 --> 01:14:07,953\nAnd my vCenter server.\n\n1356\n01:14:11,367 --> 01:14:12,087\nAll right.\n\n1357\n01:14:12,087 --> 01:14:16,560\nIt's a good idea to hit test connection\njust to see if it can talk to vCenter.\n\n1358\n01:14:16,560 --> 01:14:17,140\nIt should.\n\n1359\n01:14:17,140 --> 01:14:17,640\nThere we go.\n\n1360\n01:14:18,700 --> 01:14:22,220\nThen we can hit next and\nwe can check our license, all right.\n\n1361\n01:14:22,220 --> 01:14:24,660\nNow, on the license screen it's\ngonna ask what my license is.\n\n1362\n01:14:24,660 --> 01:14:29,450\nIf I wanna do VDPA, if I wanna get up to\neight terabytes of expandable capacity and\n\n1363\n01:14:29,450 --> 01:14:32,780\nall that, I'm gonna have to put\nin my license key, all right.\n\n1364\n01:14:32,780 --> 01:14:34,810\nBut I don't have one so\nI'll just hit next and\n\n1365\n01:14:34,810 --> 01:14:37,730\nthat means I'll be running VDP, all right.\n\n1366\n01:14:37,730 --> 01:14:40,130\nI need to create some storage for\nit and I need to pick my size.\n\n1367\n01:14:40,130 --> 01:14:44,200\nNow, you can choose up to two terabytes,\nthat's my maximum or\n\n1368\n01:14:44,200 --> 01:14:47,280\nyou can do one terabyte or 500 gigs.\n\n1369\n01:14:47,280 --> 01:14:48,610\nI'm gonna do 500 gigs.\n\n1370\n01:14:48,610 --> 01:14:52,930\nNow, when we do this,\nthe data stores that we put this on,\n\n1371\n01:14:52,930 --> 01:14:56,420\nit's actually gonna spread\nit across three hard drives.\n\n1372\n01:14:56,420 --> 01:15:00,230\nSo I either need to have three physical\nhard drives in that host that this is\n\n1373\n01:15:00,230 --> 01:15:05,370\nrunning on, or shared storage on a SAN,\nI'll need three drives, okay.\n\n1374\n01:15:05,370 --> 01:15:10,110\nAnd if I specify 500 gigs, it's gonna try\nand spread that data across the three\n\n1375\n01:15:10,110 --> 01:15:15,410\ndrives in a way that one could fail and\nthe other two will still survive, right.\n\n1376\n01:15:15,410 --> 01:15:20,490\nSo what I really need is 150%\nof the storage that I designate\n\n1377\n01:15:20,490 --> 01:15:24,450\nhere to be able to survive that\nfailure in a three drive environment.\n\n1378\n01:15:24,450 --> 01:15:28,930\nSo if I say 500 gigs I'm actually\ngonna need 750 gigs of storage\n\n1379\n01:15:28,930 --> 01:15:30,440\nspread across three drives, all right.\n\n1380\n01:15:30,440 --> 01:15:36,850\nSo just be aware of that when you\nstart to allocate this out, all right.\n\n1381\n01:15:36,850 --> 01:15:40,410\nSo then I'm just gonna hit next here and\nit's gonna ask me to pick those drives.\n\n1382\n01:15:40,410 --> 01:15:42,190\nAnd so I can come through here and pick.\n\n1383\n01:15:42,190 --> 01:15:45,350\nIf you choose store with appliance\nit's gonna try and find local storage.\n\n1384\n01:15:45,350 --> 01:15:47,370\nI don't have enough local\nstorage in that server.\n\n1385\n01:15:47,370 --> 01:15:51,500\nSo I actually created some\nshared storage that I can use.\n\n1386\n01:15:51,500 --> 01:15:52,840\nSo I'm gonna go ahead and allocate these.\n\n1387\n01:15:52,840 --> 01:15:55,900\nAnd notice how this line down\nhere is filling up to show like,\n\n1388\n01:15:55,900 --> 01:15:58,130\nI 've got two of three disks now.\n\n1389\n01:15:58,130 --> 01:15:59,150\nAnd now I've got three of three.\n\n1390\n01:15:59,150 --> 01:16:01,880\nSo you need to allocate those three disks.\n\n1391\n01:16:01,880 --> 01:16:04,860\nAnd if you look I did three 300 gig disks.\n\n1392\n01:16:04,860 --> 01:16:06,750\nSo that's 900 gigs of storage.\n\n1393\n01:16:06,750 --> 01:16:08,440\nThat's more than what it needs.\n\n1394\n01:16:08,440 --> 01:16:13,250\nIt tells me down here that each\ndisk needs to be at least 256 gigs\n\n1395\n01:16:13,250 --> 01:16:18,470\nto accommodate the 500 gig data store\nthat I asked it to create, all right.\n\n1396\n01:16:18,470 --> 01:16:20,590\nAnd I'll just thin provision\nit to make it faster.\n\n1397\n01:16:20,590 --> 01:16:21,601\nIn real life, you'd probably thick.\n\n1398\n01:16:24,100 --> 01:16:27,090\nAll right,\nthen it's gonna ask about CPU and memory.\n\n1399\n01:16:27,090 --> 01:16:31,190\nNow I'm gonna have a slight problem here,\nbecause that host only has two CPUs.\n\n1400\n01:16:31,190 --> 01:16:37,520\nWell, the requirement here is four virtual\nCPUs for operation and four gigs of RAM.\n\n1401\n01:16:37,520 --> 01:16:40,070\nThat's to make sure that\nthe backups run in a timely manner,\n\n1402\n01:16:40,070 --> 01:16:41,732\nthese are the resources they want.\n\n1403\n01:16:41,732 --> 01:16:44,671\nI'm gonna lie to it and\ntell it something different in a minute.\n\n1404\n01:16:44,671 --> 01:16:45,866\nAll right, and then it's ready to go.\n\n1405\n01:16:45,866 --> 01:16:50,570\nIt can run a performance\nanalysis today because It can\n\n1406\n01:16:50,570 --> 01:16:54,070\ntake 30 minutes to several hours.\n\n1407\n01:16:54,070 --> 01:16:56,310\nWhat it's doing is it's figuring\nout how fast it can read and\n\n1408\n01:16:56,310 --> 01:16:59,630\nwrite to the discs, so\nit can do appropriate back up estimates.\n\n1409\n01:16:59,630 --> 01:17:00,940\nHow long is a backup going to take?\n\n1410\n01:17:02,262 --> 01:17:05,040\nAll right, so I'll go ahead and hit next\non that and it's going to go ahead and\n\n1411\n01:17:05,040 --> 01:17:07,680\nfire up and create everything we need.\n\n1412\n01:17:07,680 --> 01:17:10,760\nWhen it's done,\nI'll be ready to rock, all right.\n\n1413\n01:17:10,760 --> 01:17:13,440\nNow, I am going to get some\ncomplaints on the wizard here,\n\n1414\n01:17:13,440 --> 01:17:16,100\nbecause my CPU is not high enough and\nso on.\n\n1415\n01:17:16,100 --> 01:17:19,000\nI think I've only got two cores\nassigned to it, it wants four, and\n\n1416\n01:17:19,000 --> 01:17:20,370\nit wants four gigs of RAM.\n\n1417\n01:17:20,370 --> 01:17:23,890\nI think I have assigned, actually I\nthink I did assign four gigs of ram so,\n\n1418\n01:17:23,890 --> 01:17:26,530\nit assigns stuff to itself, here.\n\n1419\n01:17:26,530 --> 01:17:27,730\nSo I get a fatal error.\n\n1420\n01:17:27,730 --> 01:17:31,150\nSo I'm getting, it says here that,\n\n1421\n01:17:31,150 --> 01:17:34,370\nthe storage configuration of\nthe appliance is unrecoverable.\n\n1422\n01:17:34,370 --> 01:17:37,840\nIt could be due to the data store\nnot having enough free space.\n\n1423\n01:17:37,840 --> 01:17:40,650\nWhich it actually did, so\nI'll have to see what happened there.\n\n1424\n01:17:40,650 --> 01:17:44,450\nBut it actually did complete,\neven though it doesn't get to complete.\n\n1425\n01:17:44,450 --> 01:17:45,950\nIt thinks that it's done.\n\n1426\n01:17:45,950 --> 01:17:49,070\nAnd you know that because if\nyou browse back to the host,\n\n1427\n01:17:49,070 --> 01:17:51,430\nyou'll be able to log in and\nstart to work with it a bit.\n\n1428\n01:17:51,430 --> 01:17:55,850\nSo what it expects us to have, is to have\nthat in there, in place and ready to rock.\n\n1429\n01:17:55,850 --> 01:17:58,950\nSo I might have kind of underspeced\nsome of the performance, and\n\n1430\n01:17:58,950 --> 01:18:00,120\nso it's a little angry on that.\n\n1431\n01:18:01,750 --> 01:18:02,680\nAll right.\n\n1432\n01:18:02,680 --> 01:18:05,490\nWell, what we're gonna do next,\nis we can take VDP and\n\n1433\n01:18:05,490 --> 01:18:08,440\nwe can point it at our virtual machines\nand start to set up our backups.\n\n1434\n01:18:08,440 --> 01:18:10,540\nAnd it's gonna back up\nthat shared data store,\n\n1435\n01:18:10,540 --> 01:18:15,150\nthose three data stores that we just\ncombine to serve as a VDP store.\n\n1436\n01:18:15,150 --> 01:18:19,270\nFrom there, it's just a matter of picking\nyour virtual machines and backing them up.\n\n1437\n01:18:19,270 --> 01:18:23,990\nNow, VDP doesn't directly\nintegrate into vCenter.\n\n1438\n01:18:23,990 --> 01:18:27,890\nIn other words, when you wanna manage your\nbackups, you're browsing to this server.\n\n1439\n01:18:27,890 --> 01:18:30,920\nYou're browsing to it's webpage and\nit's getting in there and\n\n1440\n01:18:30,920 --> 01:18:33,060\nsetting your backups and\nmoving on from there.\n\n1441\n01:18:33,060 --> 01:18:35,920\nWe're going to learn about\nV Sphere replication later.\n\n1442\n01:18:35,920 --> 01:18:40,450\nIt does integrate into vSphere and so you\nwill have menu options and thing in there.\n\n1443\n01:18:40,450 --> 01:18:42,160\nSo the management is\na little bit different.\n\n1444\n01:18:42,160 --> 01:18:45,700\nBut this one is really designed\nas that stand-alone product.\n\n1445\n01:18:45,700 --> 01:18:48,570\nAll right, well, let's stop here and\ntake a break, and\n\n1446\n01:18:48,570 --> 01:18:51,400\nduring the break I'll find out why it\nthrew a storage error saying I didn't have\n\n1447\n01:18:51,400 --> 01:18:53,290\nenough space when I definitely\ngave it enough space.\n\n1448\n01:18:53,290 --> 01:18:56,860\nSo I'll figure that out and then we'll\nget it back up and see a backup.\n\n1449\n01:18:56,860 --> 01:19:01,142\nSo let's stop here, and\nI'll see you guys back in a few.\n\n1450\n01:19:01,142 --> 01:19:06,772\n[SOUND].\n\n1451\n01:19:06,772 --> 01:19:08,375\nAll right welcome back everybody.\n\n1452\n01:19:08,375 --> 01:19:12,475\nSo when I installed VDP before the break I\nwas throwing it onto a machine that didn't\n\n1453\n01:19:12,475 --> 01:19:15,757\nmeet the minimum requirements so\nit let me go through the wizard but\n\n1454\n01:19:15,757 --> 01:19:17,190\nit didn't let me fire it up.\n\n1455\n01:19:17,190 --> 01:19:20,100\nDuring the break I went ahead and\nmoved it over to an entirely new box.\n\n1456\n01:19:20,100 --> 01:19:22,040\nSo, now I've got it fired up.\n\n1457\n01:19:22,040 --> 01:19:27,620\nNow, all we did before the break was to\ndeploy that OVF file and once it came up,\n\n1458\n01:19:27,620 --> 01:19:31,550\nwe browsed the webpage and\nwe punched in our configuration, ll right?\n\n1459\n01:19:31,550 --> 01:19:34,170\nThe configuration just being IP address or\nwhatever.\n\n1460\n01:19:34,170 --> 01:19:36,440\nThen the system reboots, all right.\n\n1461\n01:19:36,440 --> 01:19:39,070\nAfter it reboots,\nthere's a few things that happen.\n\n1462\n01:19:39,070 --> 01:19:44,160\nFirst off it has to build the VDP\ndatabase and that process takes awhile.\n\n1463\n01:19:44,160 --> 01:19:47,680\nSo you'll need to watch the console\nof the virtual app of that\n\n1464\n01:19:47,680 --> 01:19:49,880\nvSphere data protection server.\n\n1465\n01:19:49,880 --> 01:19:51,350\nThat guest that you created.\n\n1466\n01:19:51,350 --> 01:19:55,792\nSo watch its console until it finally\nreturns you to the blue screen giving you\n\n1467\n01:19:55,792 --> 01:19:57,720\nthe website address to log into.\n\n1468\n01:19:57,720 --> 01:20:02,619\nSo, it's basically just a matter\nof sitting there and waiting.\n\n1469\n01:20:02,619 --> 01:20:03,558\nUntil it's done.\n\n1470\n01:20:03,558 --> 01:20:07,327\nSo if I take a look at the console for\nmine, I can bring it up here and\n\n1471\n01:20:07,327 --> 01:20:08,780\nit's that blue screen.\n\n1472\n01:20:08,780 --> 01:20:11,570\nAnd see how it's giving you the URL\nagain just like we saw before,\n\n1473\n01:20:11,570 --> 01:20:12,980\nthat's how we know that it's ready.\n\n1474\n01:20:14,230 --> 01:20:18,280\nAnd on mine after I re-did it,\nit did take about 20 minutes for\n\n1475\n01:20:18,280 --> 01:20:20,770\nit to build its database and\nget it set up.\n\n1476\n01:20:20,770 --> 01:20:23,940\nThat's running on a dedicated box so\nit can take a while.\n\n1477\n01:20:25,230 --> 01:20:27,650\nOnce it's there, though,\nyou can really know it's done\n\n1478\n01:20:27,650 --> 01:20:29,580\nif you browse back to the website and\nthen log in.\n\n1479\n01:20:29,580 --> 01:20:31,910\nThis is the same site I went to earlier.\n\n1480\n01:20:31,910 --> 01:20:37,580\nThe server name \"colon eight five\nfour three slash VP dash configure\".\n\n1481\n01:20:37,580 --> 01:20:38,590\nI already configured it, but\n\n1482\n01:20:38,590 --> 01:20:42,910\nI just need to browse back here just\nto verify that it's actually done.\n\n1483\n01:20:42,910 --> 01:20:46,150\nYou'll know it's done if when you log in,\nyou see a message like this.\n\n1484\n01:20:46,150 --> 01:20:47,500\nThe VDP Health Check.\n\n1485\n01:20:47,500 --> 01:20:50,940\nWe didn't see that before, it took us\nright to the configuration wizard.\n\n1486\n01:20:50,940 --> 01:20:54,610\nAnd it should scan and\nshow that all the services are running.\n\n1487\n01:20:54,610 --> 01:20:55,440\nThat's what we hope to see.\n\n1488\n01:20:57,050 --> 01:21:00,370\nOnce we've reached that\nstage you don't really do\n\n1489\n01:21:00,370 --> 01:21:03,010\nanything from this application ever again.\n\n1490\n01:21:03,010 --> 01:21:05,860\nThe only time you would come to this web\npage is if something was wrong, something\n\n1491\n01:21:05,860 --> 01:21:09,660\nwasn't working or you were trying to do\na manual upgrade, something like that.\n\n1492\n01:21:09,660 --> 01:21:14,100\nOtherwise, that's it, you just need to\nmake sure that the app stays running.\n\n1493\n01:21:14,100 --> 01:21:18,500\nThat right here, the V Sphere data\nprotection guest that we created,\n\n1494\n01:21:18,500 --> 01:21:20,079\nthat it stay sup and running.\n\n1495\n01:21:21,130 --> 01:21:23,840\nAll right, now we're ready to\nactually configure backups.\n\n1496\n01:21:23,840 --> 01:21:28,030\nI mentioned earlier that VDP is not truly\n\n1497\n01:21:28,030 --> 01:21:32,580\nintegrated into VCenter web client or\njust into VCenter in general.\n\n1498\n01:21:32,580 --> 01:21:36,580\nSo if I take a look at one of my virtual\nmachines here, let's say I want to back up\n\n1499\n01:21:36,580 --> 01:21:40,270\nmy VM Linux one, right, so\nI want to back up this guest.\n\n1500\n01:21:40,270 --> 01:21:44,570\nWell, if I right-click on it I don't\nhave any new menu items in here.\n\n1501\n01:21:44,570 --> 01:21:47,150\nI don't see anything in here\nthat's talking about backing up\n\n1502\n01:21:47,150 --> 01:21:48,980\nthe system that I didn't have before.\n\n1503\n01:21:48,980 --> 01:21:53,690\nAnd the reason is the software's actually\ndeveloped by EMC more than VMware and\n\n1504\n01:21:53,690 --> 01:21:56,620\nso they just kind of put\nsome web hooks into it.\n\n1505\n01:21:56,620 --> 01:21:58,659\nIf you go back to the vCenter home page\n\n1506\n01:21:59,730 --> 01:22:01,950\nwe have to go all the way\nback to the home page.\n\n1507\n01:22:01,950 --> 01:22:07,500\nWhat you should see is a new entry here\nthat says vSphere data protection, okay?\n\n1508\n01:22:07,500 --> 01:22:10,710\nThat's the click, the thing you need to\nclick on that's going to take you to where\n\n1509\n01:22:10,710 --> 01:22:12,950\nyou manage the vSphere data protection,\nall right?\n\n1510\n01:22:12,950 --> 01:22:16,710\nSo it's not really tied in\nwith our regular tasks.\n\n1511\n01:22:16,710 --> 01:22:19,560\nNow once we get in here, it's going to\nwarn me that we need to do a few things.\n\n1512\n01:22:19,560 --> 01:22:23,650\nIf this is the very first time you've\nlaunched it, it's going to ask you what\n\n1513\n01:22:23,650 --> 01:22:28,730\nserver you need to connect to because\nyou might have more than one VDP.\n\n1514\n01:22:28,730 --> 01:22:31,450\nIn my case I've only got one, but if you\ndo have more than one, there's a drop\n\n1515\n01:22:31,450 --> 01:22:36,030\ndown box right here where you can pick and\nchoose between your various VDP servers.\n\n1516\n01:22:37,270 --> 01:22:40,120\nFrom there we just need to get it set up,\nall right?\n\n1517\n01:22:40,120 --> 01:22:42,030\nIf we wanted to add a license\nwe could it from here.\n\n1518\n01:22:42,030 --> 01:22:45,040\nBut we're normally we're going to be\nfocused on these two tabs right here.\n\n1519\n01:22:45,040 --> 01:22:47,430\nBackup and restore, right?\n\n1520\n01:22:47,430 --> 01:22:49,620\nWe go into backup to\nschedule our backup jobs.\n\n1521\n01:22:49,620 --> 01:22:52,700\nAnd it's just like any\nother backup software.\n\n1522\n01:22:52,700 --> 01:22:55,830\nWhen you go in here you're just going\nto come in and create a new job.\n\n1523\n01:22:55,830 --> 01:22:57,880\nSo under backup job actions we'll see new.\n\n1524\n01:22:59,060 --> 01:23:02,580\nAnd we can specify what it\nis that we want to back up.\n\n1525\n01:23:02,580 --> 01:23:05,530\nNow when you backup you can\nbackup as a full image,\n\n1526\n01:23:05,530 --> 01:23:10,740\nthe entire virtual machine or you can\npick specific virtual machine discs.\n\n1527\n01:23:10,740 --> 01:23:12,785\nA lot of us just have one\ndisc attached to a VM, so\n\n1528\n01:23:12,785 --> 01:23:15,550\nthere's not really much\ndifference between the two.\n\n1529\n01:23:15,550 --> 01:23:17,410\nBut if you have more\nthan one disk on a VM,\n\n1530\n01:23:17,410 --> 01:23:20,450\nyou might only want to backup\ncertain ones, so you could pick.\n\n1531\n01:23:20,450 --> 01:23:21,410\nI'm going to do a full image.\n\n1532\n01:23:22,850 --> 01:23:25,100\nAnd then we need to pick\nwho we want to backup.\n\n1533\n01:23:25,100 --> 01:23:27,070\nAnd you just go through and\nyou check the ones that you want.\n\n1534\n01:23:27,070 --> 01:23:30,030\nI could check my whole datacenter\nif I wanted to go crazy but\n\n1535\n01:23:30,030 --> 01:23:34,020\nI want to backup VM-LINUX1, so\nI'm just going to browse in and find it.\n\n1536\n01:23:34,020 --> 01:23:36,250\nAnd check it off.\n\n1537\n01:23:36,250 --> 01:23:38,810\nThere are some accelerations\nin here with Windows.\n\n1538\n01:23:38,810 --> 01:23:43,100\nIf we're backing up a Windows server, we\ncan do things like granular file recovery.\n\n1539\n01:23:43,100 --> 01:23:45,210\nBut I'm just picking my Linux server,\njust because it's small,\n\n1540\n01:23:45,210 --> 01:23:47,740\nI think it's like 3 gigs in size,\nso it'll backup fast.\n\n1541\n01:23:48,760 --> 01:23:50,100\nThen I can set my schedule.\n\n1542\n01:23:50,100 --> 01:23:51,810\nHow often do I want to back it up?\n\n1543\n01:23:51,810 --> 01:23:56,720\nDo I want it to backup daily, weekly, the\nfirst Sunday of every month, or whatever.\n\n1544\n01:23:56,720 --> 01:24:00,930\nYou can kind of pick and choose what\nit is you want for that backup to run.\n\n1545\n01:24:00,930 --> 01:24:03,340\nSo maybe I want mine to run weekly.\n\n1546\n01:24:03,340 --> 01:24:09,680\nEvery Sunday at like 2:00 AM, all right?\n\n1547\n01:24:09,680 --> 01:24:12,500\nSo at 2:00 AM every Sunday it's going\nto run a backup of this machine.\n\n1548\n01:24:13,610 --> 01:24:16,380\nAnd then we can say how\nlong we want to keep them.\n\n1549\n01:24:16,380 --> 01:24:19,390\nNow, it says forever, keep forever.\n\n1550\n01:24:19,390 --> 01:24:22,980\nWell, the problem with keep forever is\nevery backup that you take is adding more\n\n1551\n01:24:22,980 --> 01:24:25,110\nand more into your VDP data store.\n\n1552\n01:24:25,110 --> 01:24:28,200\nWhen the data store gets full you won't\nhave room for anymore backups and\n\n1553\n01:24:28,200 --> 01:24:30,770\nso you won't be able to\ntake anymore backups.\n\n1554\n01:24:30,770 --> 01:24:31,790\nYou'll have a problem.\n\n1555\n01:24:31,790 --> 01:24:34,980\nBut if you set a time limit,\nold stuff will get removed.\n\n1556\n01:24:34,980 --> 01:24:39,580\nIt makes room for new stuff and\nyou can keep backing up forever really.\n\n1557\n01:24:39,580 --> 01:24:42,300\nBut if you choose forever, you need\nto just make sure you do maintenance.\n\n1558\n01:24:42,300 --> 01:24:44,900\nThat you go and delete old backups\nwhen you don't need them anymore.\n\n1559\n01:24:44,900 --> 01:24:46,959\nI'm going to go ahead and\njust say 60 days.\n\n1560\n01:24:49,810 --> 01:24:54,110\nThen I need to give it a job name and I'm\ngoing to call this one backupvm-linux one.\n\n1561\n01:24:57,940 --> 01:24:58,870\nAnd there we go.\n\n1562\n01:24:58,870 --> 01:24:59,850\nSo it's ready.\n\n1563\n01:24:59,850 --> 01:25:01,070\nIt's got it set up.\n\n1564\n01:25:01,070 --> 01:25:02,740\nAnd now it's got a back up job.\n\n1565\n01:25:02,740 --> 01:25:06,660\nNow that back is going to\nrun Sunday at 2:00 a.m.\n\n1566\n01:25:06,660 --> 01:25:08,610\nAnd that system would get backed up.\n\n1567\n01:25:08,610 --> 01:25:12,030\nAnd a copy of that system, a full back up,\nis going to happen the first time.\n\n1568\n01:25:12,030 --> 01:25:14,990\nAnd so it's going to get\nstored in the VDP database.\n\n1569\n01:25:14,990 --> 01:25:20,158\nThen every Sunday after that, it's just\ngoing to get the changes, the delta.\n\n1570\n01:25:20,158 --> 01:25:22,350\nIt's going to get the changes that\nhave been stored on the system.\n\n1571\n01:25:22,350 --> 01:25:26,300\nAnd I'll be able to restore either all the\nway back to the original full backup or\n\n1572\n01:25:26,300 --> 01:25:29,920\nto any of the deltas in between\nI'll have that flexibility.\n\n1573\n01:25:29,920 --> 01:25:31,590\nSo, it's all right there.\n\n1574\n01:25:31,590 --> 01:25:34,710\nNow, I have it set to\nrun Sunday at 2:00 a.m.\n\n1575\n01:25:34,710 --> 01:25:38,524\nI don't want to wait here until Sunday at\n2:00 a.m.so I'm just going to highlight\n\n1576\n01:25:38,524 --> 01:25:40,470\nthat backup job and hit backup now.\n\n1577\n01:25:40,470 --> 01:25:44,545\nThat's going to kick it off right now and\nit'll cause that backup to happen.\n\n1578\n01:25:44,545 --> 01:25:47,125\nSo there, it's been issued,\nand it's going to run.\n\n1579\n01:25:47,125 --> 01:25:49,925\nSo, it's reaching out\nto the VDP appliance.\n\n1580\n01:25:49,925 --> 01:25:53,535\nAnd initiating the back up, now this\nbackup's going to occur over the network.\n\n1581\n01:25:53,535 --> 01:25:57,405\nSo, I need to wait and it's going to\ntake a while for that back up to happen.\n\n1582\n01:25:57,405 --> 01:26:00,455\nYou've got reports up\nhere where you can go and\n\n1583\n01:26:00,455 --> 01:26:02,675\nlook to see whether the job is finished.\n\n1584\n01:26:02,675 --> 01:26:06,440\nNow for me, I just need to look at like\nmy last start time my duration and\n\n1585\n01:26:06,440 --> 01:26:11,400\nthe successes, I should see a start time\nshowing that the job has started and\n\n1586\n01:26:11,400 --> 01:26:13,790\nI should see a success when it's done.\n\n1587\n01:26:13,790 --> 01:26:16,740\nIf something happened I'll see a failure\nand I'll get my little warnings over here.\n\n1588\n01:26:16,740 --> 01:26:20,150\nYou know you've got your\nvarious activities that pop up\n\n1589\n01:26:20,150 --> 01:26:21,430\nin here from time to time.\n\n1590\n01:26:21,430 --> 01:26:24,400\nBut because the software\nis not directly integrated\n\n1591\n01:26:24,400 --> 01:26:25,900\nyou don't really get a progress.\n\n1592\n01:26:25,900 --> 01:26:29,890\nI don't see if I go into running here I\ndon't have my little bar her showing me\n\n1593\n01:26:29,890 --> 01:26:31,560\nthat I have something actively going on.\n\n1594\n01:26:31,560 --> 01:26:34,790\nSo, we just kind of have to be\naware that's it a little bit weird.\n\n1595\n01:26:36,222 --> 01:26:39,960\nAll right, if I have a system\nthat's acting up or failing.\n\n1596\n01:26:39,960 --> 01:26:43,330\nI can just go back under restore and\nright here from restore I'll be able to\n\n1597\n01:26:43,330 --> 01:26:46,010\npick from the virtual machines\nthat I've backed up and\n\n1598\n01:26:46,010 --> 01:26:49,510\nrestore them to either the latest and\ngreatest backup I've got or\n\n1599\n01:26:49,510 --> 01:26:52,750\nall the way back to the original,\nanywhere in between you pick and choose.\n\n1600\n01:26:52,750 --> 01:26:53,960\nAnd you restore the system.\n\n1601\n01:26:53,960 --> 01:26:56,540\nIt's really pretty straightforward.\n\n1602\n01:26:56,540 --> 01:26:59,090\nIt's good software, it's reliable.\n\n1603\n01:26:59,090 --> 01:27:02,140\nIt's backing up the VM itself,\nthe entire Virtual Machine.\n\n1604\n01:27:02,140 --> 01:27:04,850\nThat makes backups and\nrestores pretty easy.\n\n1605\n01:27:04,850 --> 01:27:07,700\nPersonally, I preferred to go with\nthird party software on this one, but\n\n1606\n01:27:07,700 --> 01:27:12,640\nthis is a good software package\nyou can make use of, all right?\n\n1607\n01:27:12,640 --> 01:27:15,110\nOther than that,\nthat's really about it for VP.\n\n1608\n01:27:15,110 --> 01:27:18,460\nWhen you go to restore a windows machine,\nyou'll get a few more options like\n\n1609\n01:27:18,460 --> 01:27:22,660\nthe ability to browse in and pick granular\nfiles, specific files you want to restore.\n\n1610\n01:27:22,660 --> 01:27:24,600\nWhen you back up something\nlike a Linux box like I did,\n\n1611\n01:27:24,600 --> 01:27:26,130\nI'm not going to have that choice.\n\n1612\n01:27:26,130 --> 01:27:28,650\nI can either restore the whole VM or\nnothing.\n\n1613\n01:27:28,650 --> 01:27:30,390\nBut you get a little bit\nof flexibility there.\n\n1614\n01:27:30,390 --> 01:27:32,990\nYou can restore to other\ndestinations cause the original\n\n1615\n01:27:32,990 --> 01:27:34,920\nhost might be offline, right?\n\n1616\n01:27:34,920 --> 01:27:37,620\nOur images are being stored\nin a separate vdp data store.\n\n1617\n01:27:37,620 --> 01:27:39,840\nSo if our VMware,\n\n1618\n01:27:39,840 --> 01:27:43,540\nESX host go offline I've still got access\nto the backups, I can bring them back.\n\n1619\n01:27:45,360 --> 01:27:48,990\nAll right, so that's an example\nof vSphere data protection.\n\n1620\n01:27:48,990 --> 01:27:54,274\nHow it works, what it does, like I\nsaid it's pretty straight forward and\n\n1621\n01:27:54,274 --> 01:27:57,342\nfor me I just need to sit here and\nwatch, and\n\n1622\n01:27:57,342 --> 01:28:02,304\neventually this backup job will finish and\nI'll have it, in place.\n\n1623\n01:28:02,304 --> 01:28:05,182\nAll right, now, VDP is nice.\n\n1624\n01:28:05,182 --> 01:28:06,749\nIt does a full backup of the system.\n\n1625\n01:28:06,749 --> 01:28:07,887\nI've got it available.\n\n1626\n01:28:07,887 --> 01:28:12,126\nBut the problem with something like\nVDP is it can get out of date.\n\n1627\n01:28:12,126 --> 01:28:16,290\nAnd because it's backing up directly over\nthe network, it can take a long time.\n\n1628\n01:28:16,290 --> 01:28:19,140\nIt may not be as flexible as we want,\nall right.\n\n1629\n01:28:19,140 --> 01:28:22,030\nThere is another solution\nthat's available for us.\n\n1630\n01:28:22,030 --> 01:28:24,820\nThere's what's call vSphere Replication.\n\n1631\n01:28:24,820 --> 01:28:28,000\nThe vSphere Replication appliance\nis very similar, all right?\n\n1632\n01:28:28,000 --> 01:28:30,580\nWhat it's designed to do is\na little different, though.\n\n1633\n01:28:30,580 --> 01:28:34,150\nWhen you run the V sphere replication,\nthis is just a product from VMware.\n\n1634\n01:28:34,150 --> 01:28:37,140\nIt's not like licences\nthrough EMC like VDP was and\n\n1635\n01:28:37,140 --> 01:28:39,750\nit integrates right into the V center.\n\n1636\n01:28:39,750 --> 01:28:43,390\nIt ties into all of the virtual machines,\nand it allows you to create\n\n1637\n01:28:43,390 --> 01:28:48,300\na replica of them that is stored in\nanother location, another data center,\n\n1638\n01:28:48,300 --> 01:28:52,340\nmaybe even another building,\na completely separate subnet, whatever.\n\n1639\n01:28:52,340 --> 01:28:57,500\nYou can store a replica of a VM darn\nnear anywhere with these replication.\n\n1640\n01:28:58,580 --> 01:29:01,970\nThere's positives and negative to it and\nright off the bat you might be thinking,\n\n1641\n01:29:01,970 --> 01:29:04,810\nhey Don, didn't we talk about\nFT in the last episode,\n\n1642\n01:29:04,810 --> 01:29:07,950\nand with FT didn't it create\na clone of our virtual machines?\n\n1643\n01:29:07,950 --> 01:29:09,210\nWell it did, right?\n\n1644\n01:29:09,210 --> 01:29:12,595\nYou had your active guest, and\nyou had the shadow, right?\n\n1645\n01:29:12,595 --> 01:29:15,990\nThat shadow VM that was created,\nthat was like the backup.\n\n1646\n01:29:15,990 --> 01:29:17,190\nAnd if the active one failed,\n\n1647\n01:29:17,190 --> 01:29:20,570\nthat shadow kicked right in and\nyou had zero down time.\n\n1648\n01:29:20,570 --> 01:29:23,840\nThe problem there is the shadow\nhas to be in the same data center.\n\n1649\n01:29:23,840 --> 01:29:27,550\nIt has to be right there because it's got\nto be able to replicate very very fast.\n\n1650\n01:29:27,550 --> 01:29:30,740\nYou can't put that shadow in\na separate geographic location.\n\n1651\n01:29:30,740 --> 01:29:32,590\nThe latency is too great.\n\n1652\n01:29:32,590 --> 01:29:37,530\nSo, FT, fault tolerance, that's\ndesigned to create zero down time for\n\n1653\n01:29:37,530 --> 01:29:41,280\na single VM failing inside\na particular data center but\n\n1654\n01:29:41,280 --> 01:29:45,170\nif an entire data center fails,\nFT doesn't help you.\n\n1655\n01:29:45,170 --> 01:29:49,010\nWe need some way to maintain\na replica copy of our\n\n1656\n01:29:49,010 --> 01:29:53,080\nVM In another location and\nV sphere replication does that.\n\n1657\n01:29:53,080 --> 01:29:57,530\nBasically V sphere replication\nis the same thing as FT\n\n1658\n01:29:57,530 --> 01:29:59,950\nexcept it doesn't synchronize ram.\n\n1659\n01:29:59,950 --> 01:30:04,970\nWhen you replicate a virtual machine\nfrom one geographic location to another.\n\n1660\n01:30:04,970 --> 01:30:11,000\nSynchronizing ram is really, really\nchallenging, and so, they don't, right?\n\n1661\n01:30:11,000 --> 01:30:14,250\nThere's no real good way to keep it in\nlockstep without really slowing down\n\n1662\n01:30:14,250 --> 01:30:15,800\nthe production server.\n\n1663\n01:30:15,800 --> 01:30:20,050\nSo what it does is it basically runs\nat a particular interval, right?\n\n1664\n01:30:20,050 --> 01:30:21,670\nA lot of people set it to 15 minutes.\n\n1665\n01:30:21,670 --> 01:30:23,110\nThat's the one that you normally see.\n\n1666\n01:30:23,110 --> 01:30:25,700\nAnd so every 15 minutes it runs, and\n\n1667\n01:30:25,700 --> 01:30:28,810\nit looks at the virtual machine,\nand it looks for changes.\n\n1668\n01:30:28,810 --> 01:30:32,180\nSo we've got our initial replication that\nhappens when we clone the VM at the other\n\n1669\n01:30:32,180 --> 01:30:36,450\nlocation and then every fifteen minutes\nit looks for changes just like VDP does.\n\n1670\n01:30:36,450 --> 01:30:38,860\nThe only difference is, instead of\njust backing up those changes and\n\n1671\n01:30:38,860 --> 01:30:43,520\nstoring them somewhere, it takes\nthe changes and applies them to the copy.\n\n1672\n01:30:43,520 --> 01:30:47,990\nSo that your copy, your replicated VM,\nif you set the interval to 15,\n\n1673\n01:30:47,990 --> 01:30:51,070\nwould be within 15 minutes\nof the production one.\n\n1674\n01:30:51,070 --> 01:30:55,260\nSo if you lost your production\nvirtual machine, the one over in your\n\n1675\n01:30:55,260 --> 01:30:58,470\ndisaster recovery center or wherever\nit is that you're replicating this to\n\n1676\n01:30:58,470 --> 01:31:01,320\nwould be within 15 minutes of that and\nyou can stretch it out.\n\n1677\n01:31:01,320 --> 01:31:02,930\nYou can make it an hour, 24 hours.\n\n1678\n01:31:02,930 --> 01:31:04,240\nYou can set whatever interval you want.\n\n1679\n01:31:04,240 --> 01:31:07,310\n15 minutes is pretty awesome\nthough to just lose that much.\n\n1680\n01:31:07,310 --> 01:31:10,791\nYou could lose your entire data center,\nlose an entire building, and\n\n1681\n01:31:10,791 --> 01:31:13,387\na new building could be up and\nrunning with your VMs,\n\n1682\n01:31:13,387 --> 01:31:15,468\nwith Less than 15 minutes of data loss.\n\n1683\n01:31:15,468 --> 01:31:16,590\nAll right.\n\n1684\n01:31:16,590 --> 01:31:18,430\nThat might not be acceptable to you.\n\n1685\n01:31:18,430 --> 01:31:21,400\nIf you need even less data loss than that,\n\n1686\n01:31:21,400 --> 01:31:24,170\nthen you'll need to leverage other\ntechnologies, like your databases.\n\n1687\n01:31:24,170 --> 01:31:27,050\nOracle, Microsoft SQL, they have\ntheir own replication, where they\n\n1688\n01:31:27,050 --> 01:31:31,630\ncan be within nanoseconds or milliseconds\nof the replicas, right, but for\n\n1689\n01:31:31,630 --> 01:31:35,069\nthe virtual machines themselves, these are\nsome of the best numbers that we can get.\n\n1690\n01:31:36,140 --> 01:31:38,150\nSo it's pretty straightforward to set up.\n\n1691\n01:31:38,150 --> 01:31:45,067\nIt's just like VDP in that we import\na OVA an appliance that the VM ware has.\n\n1692\n01:31:45,067 --> 01:31:49,010\nSo I've already done that just to save a,\nwhoops, a little bit of time here.\n\n1693\n01:31:50,380 --> 01:31:53,730\nThe appliance if I can minimize that,\nthere we go.\n\n1694\n01:31:53,730 --> 01:31:58,101\nThe appliance, they actually give you the\nvSphere Replication Appliance as an ISO\n\n1695\n01:31:58,101 --> 01:32:01,548\nimage, as a CD, so I had to extract that,\nwhich I did right here.\n\n1696\n01:32:01,548 --> 01:32:05,972\nAnd so when you get it,\nthe CD has a bunch of stuff on there, but\n\n1697\n01:32:05,972 --> 01:32:11,096\nthe vSphere Replication ovf10.ovf,\nthat's the guy right there.\n\n1698\n01:32:11,096 --> 01:32:13,370\nAnd it's not very big, right?\n\n1699\n01:32:13,370 --> 01:32:18,680\nAbout 500 megs in size and\nwe import that into a VM in our system.\n\n1700\n01:32:18,680 --> 01:32:19,620\nAll right.\n\n1701\n01:32:19,620 --> 01:32:25,380\nOnce it's imported, you boot up and\nit will display a screen on it's console.\n\n1702\n01:32:25,380 --> 01:32:28,660\nLet me just get back here to my V center.\n\n1703\n01:32:28,660 --> 01:32:30,860\nIt'll display a screen on this console and\n\n1704\n01:32:30,860 --> 01:32:33,260\nit will let you know\nthat it's ready to rock.\n\n1705\n01:32:33,260 --> 01:32:37,820\nNow the vSphere replication,\nit is completely built by VMware so\n\n1706\n01:32:37,820 --> 01:32:41,670\nthey actually have the majority of\nthe setup done during the import process.\n\n1707\n01:32:41,670 --> 01:32:43,387\nLet me redo the import so\nyou guys can see it.\n\n1708\n01:32:43,387 --> 01:32:46,008\nIf I go to virtual machine here and\n\n1709\n01:32:46,008 --> 01:32:51,824\nI go to create a new one from a template\nI will browse and pick that OVA file.\n\n1710\n01:32:51,824 --> 01:32:54,980\nAll right, so here it is.\n\n1711\n01:32:56,260 --> 01:33:00,780\nSo here's the vSphere replication, so\nvery similar to what I did with VDP.\n\n1712\n01:33:00,780 --> 01:33:04,650\nThe difference here is, this virtual\nmachine was created by VMware so it's got\n\n1713\n01:33:04,650 --> 01:33:07,900\na lot of neat stuff just right here in\nthe wizard, most of what we need so\n\n1714\n01:33:07,900 --> 01:33:10,830\nthat we never really have to log in\nto the consul of this machine either.\n\n1715\n01:33:11,840 --> 01:33:13,880\nSo here it's just giving me\na summary of what it's going to do.\n\n1716\n01:33:14,900 --> 01:33:16,502\nI can sign my End User License Agreement.\n\n1717\n01:33:18,236 --> 01:33:21,590\nI can specify where I wanna put it.\n\n1718\n01:33:21,590 --> 01:33:22,800\nAnd I've already got an appliance,\n\n1719\n01:33:22,800 --> 01:33:24,250\nlet me just stick a number\ntwo at the end of that one.\n\n1720\n01:33:25,330 --> 01:33:28,510\nAll right, I can then specify\nwhere it's actually gonna reside.\n\n1721\n01:33:28,510 --> 01:33:29,719\nMaybe I'll stick it here on server one.\n\n1722\n01:33:29,719 --> 01:33:31,785\nAll right.\n\n1723\n01:33:31,785 --> 01:33:36,674\nI can pick the data store\nthat it's going to reside on,\n\n1724\n01:33:36,674 --> 01:33:41,580\nI guess I'll go shared and\nthen I can pick my networks.\n\n1725\n01:33:41,580 --> 01:33:44,470\nNow when you pick the network,\nthis is a chance for us to come in and\n\n1726\n01:33:44,470 --> 01:33:47,340\nsay I want to do a manual IP address.\n\n1727\n01:33:47,340 --> 01:33:49,010\nAnd this screen is a little bit weird,\n\n1728\n01:33:49,010 --> 01:33:52,330\nbecause it gives you a chance to put\nin your DNS server, your net mask,\n\n1729\n01:33:52,330 --> 01:33:56,860\nyour gateway but it doesn't give you the\nchance to actually put in the IP address.\n\n1730\n01:33:56,860 --> 01:33:58,630\nYou'll see that on the next screen.\n\n1731\n01:33:58,630 --> 01:34:00,650\nOn the next screen is\ncustomize my template.\n\n1732\n01:34:00,650 --> 01:34:07,100\nHere I can put in the password that I\nwant this system to have, just like that.\n\n1733\n01:34:07,100 --> 01:34:08,800\nAnd right here under\nnetworking properties,\n\n1734\n01:34:08,800 --> 01:34:11,712\nthis is where I can\nspecify the IP address.\n\n1735\n01:34:11,712 --> 01:34:12,490\nAll right.\n\n1736\n01:34:12,490 --> 01:34:14,030\nSo I've put in that IP\naddress right there.\n\n1737\n01:34:14,030 --> 01:34:17,540\nIt's got everything that it needs\nthen it just gives me my summary,\n\n1738\n01:34:17,540 --> 01:34:19,500\nsays it's about ready to go and\nI hit finish.\n\n1739\n01:34:21,430 --> 01:34:24,720\nWhen you finish it deploys\nthat virtual machine and\n\n1740\n01:34:24,720 --> 01:34:28,340\nyou'll see what I've got right here\nthis V Sphere replication appliance.\n\n1741\n01:34:28,340 --> 01:34:30,639\nAnd if I take a look at its console,\nit's not much to look at.\n\n1742\n01:34:34,505 --> 01:34:35,530\nThere we go.\n\n1743\n01:34:35,530 --> 01:34:38,740\nAnd it's basically just telling us,\nhey if you want to work with this machine,\n\n1744\n01:34:38,740 --> 01:34:41,310\nyou need to browse to this address.\n\n1745\n01:34:41,310 --> 01:34:43,650\nSo again,\nnot much to do here from the console.\n\n1746\n01:34:43,650 --> 01:34:44,907\nSo I'm going to browse to that address.\n\n1747\n01:34:47,691 --> 01:34:51,978\nAnd when you do, you'll get this screen\nright here where we can log in with\n\n1748\n01:34:51,978 --> 01:34:55,190\nthe user account that was\ndefined during set up.\n\n1749\n01:34:55,190 --> 01:34:59,340\nWhen we imported it we specified\na password the user name is root and\n\n1750\n01:34:59,340 --> 01:35:00,480\nwe'll get logged in.\n\n1751\n01:35:00,480 --> 01:35:03,350\nNow there is not a whole heck of\na lot to do from here is really\n\n1752\n01:35:03,350 --> 01:35:05,620\njust giving us a summary\nof our information.\n\n1753\n01:35:05,620 --> 01:35:10,620\nWhen we imported it in it actually\nregistered itself with V Center.\n\n1754\n01:35:10,620 --> 01:35:13,070\nSo I didn't even really have\nto come here and log in.\n\n1755\n01:35:13,070 --> 01:35:16,970\nYou can come in here and verify your\nconfiguration and your settings.\n\n1756\n01:35:16,970 --> 01:35:20,690\nYou can punch in your V Center\ninformation if it's not already there but\n\n1757\n01:35:20,690 --> 01:35:22,770\nit should already be there.\n\n1758\n01:35:22,770 --> 01:35:25,140\nYou'll punch it in if you need to,\nall right, if for\n\n1759\n01:35:25,140 --> 01:35:29,810\nsome reason it wasn't able to find it but\notherwise, not much to do from here.\n\n1760\n01:35:29,810 --> 01:35:35,865\nvSphere Replication does fully\nintegrate into the vSphere web client.\n\n1761\n01:35:35,865 --> 01:35:40,370\nSo, on here, if I go back to my home page,\nI can go and find.\n\n1762\n01:35:40,370 --> 01:35:44,427\nWell, actually if I go all the way back\nto the home page you'll see vSphere\n\n1763\n01:35:44,427 --> 01:35:49,006\nReplication right here and under vSphere\nreplication, you can see the summary but\n\n1764\n01:35:49,006 --> 01:35:53,960\nnotice how there's not a bunch of tabs for\nconfiguring, and all that stuff up here.\n\n1765\n01:35:53,960 --> 01:35:57,790\nIt's really just designed for\nan overall status screen.\n\n1766\n01:35:57,790 --> 01:36:00,149\nIs vSphere replication enabled or not?\n\n1767\n01:36:00,149 --> 01:36:04,469\nOkay, what we really need to do is go and\nconfigure this on our VMs, and\n\n1768\n01:36:04,469 --> 01:36:06,826\nit is integrated with the interface.\n\n1769\n01:36:06,826 --> 01:36:10,330\nAll right, so\na couple of things that we need to do.\n\n1770\n01:36:11,340 --> 01:36:14,480\nFirst off, we need to go and find a VM\nthat we want to replicate, right?\n\n1771\n01:36:14,480 --> 01:36:15,760\nI can go in and I can pick one,\n\n1772\n01:36:15,760 --> 01:36:19,000\nmaybe I'll replicate that file\nserver I was talking about.\n\n1773\n01:36:19,000 --> 01:36:22,420\nActually I'll pick a smaller\nsever like APP Web one, so\n\n1774\n01:36:22,420 --> 01:36:25,429\nlet me go into vCenter here and\nI'll go to my virtual machines.\n\n1775\n01:36:26,630 --> 01:36:32,380\nAnd I'll find somebody like APP Web one,\nand when you right click on APP Web one,\n\n1776\n01:36:32,380 --> 01:36:36,910\nyou'll see we have a new menu item\ncalled all vSphere replication actions.\n\n1777\n01:36:36,910 --> 01:36:41,170\nIf you don't see it right away, you may\nneed to close vCenter and reopen it,\n\n1778\n01:36:41,170 --> 01:36:43,510\nthat happens a lot.\n\n1779\n01:36:43,510 --> 01:36:47,140\nIf you were in the vSphere web\nclient while you did the install,\n\n1780\n01:36:47,140 --> 01:36:49,190\nthen it won't show up right away,\nyou might have to close and reopen.\n\n1781\n01:36:50,410 --> 01:36:53,060\nBut once I go in here,\nI'll see configure replication.\n\n1782\n01:36:53,060 --> 01:36:56,070\nAnd that's how I can turn\non replication for this VM.\n\n1783\n01:36:56,070 --> 01:36:58,830\nIt is done on a per VM basis.\n\n1784\n01:36:58,830 --> 01:36:59,580\nRight?\nWe don't want to just\n\n1785\n01:36:59,580 --> 01:37:00,640\nreplicate everything.\n\n1786\n01:37:01,750 --> 01:37:03,710\nWe can go through and\npick what it is we're gonna replicate.\n\n1787\n01:37:03,710 --> 01:37:05,870\nThe first thing we need to do is\npick where we're gonna send it to.\n\n1788\n01:37:05,870 --> 01:37:09,803\nI've only got one site, one vCenter\nserver, so I'm gonna pick that one.\n\n1789\n01:37:13,762 --> 01:37:14,842\nAnd we'll hit Next.\n\n1790\n01:37:14,842 --> 01:37:18,120\nAnd you'll see there\nwas an Add Remote Site.\n\n1791\n01:37:18,120 --> 01:37:21,180\nIf I had another site out there, I could\nadd it in and punch in credentials for\n\n1792\n01:37:21,180 --> 01:37:23,380\nit and I could send to\na completely unlinked system.\n\n1793\n01:37:24,550 --> 01:37:27,420\nThen we specify who the vSphere\nreplication server is gonna be if you have\n\n1794\n01:37:27,420 --> 01:37:28,380\nmore than one.\n\n1795\n01:37:28,380 --> 01:37:29,430\nI've only got one.\n\n1796\n01:37:29,430 --> 01:37:32,341\nThe more clients replicating,\nthe busier the CPU and\n\n1797\n01:37:32,341 --> 01:37:35,324\nthe memory is gonna get on\nthat vSphere app appliance.\n\n1798\n01:37:35,324 --> 01:37:37,164\nYou might need to create more and\n\n1799\n01:37:37,164 --> 01:37:40,240\nmore vSphere replication\nappliances if you need to.\n\n1800\n01:37:40,240 --> 01:37:42,910\nI'll go ahead and set auto assign\nsince I only have one anyway.\n\n1801\n01:37:46,090 --> 01:37:50,940\nAll right, then it's gonna ask\nabout where I'm gonna replicate to.\n\n1802\n01:37:50,940 --> 01:37:53,940\nRemember, we're not synchronizing Ram here\nso it really just needs to know where to\n\n1803\n01:37:53,940 --> 01:37:57,760\nstore this copy of the virtual\nmachine configuration and hard drives,\n\n1804\n01:37:57,760 --> 01:38:00,920\nthe VM dks and\nsynchronized changes with it.\n\n1805\n01:38:00,920 --> 01:38:03,800\nI need to pick a data store\nthat's available for it.\n\n1806\n01:38:03,800 --> 01:38:06,920\nI can replicate to,\nsee what would be a fun one.\n\n1807\n01:38:06,920 --> 01:38:12,250\nLet's go to I didn't even check to see\nwhat server that thing was already on.\n\n1808\n01:38:12,250 --> 01:38:17,610\nWell right now the App dash Web one\nis stored on my shared data store.\n\n1809\n01:38:17,610 --> 01:38:21,006\nSo maybe I'll replicate it to one of\nmy non shared data stores like Server\n\n1810\n01:38:21,006 --> 01:38:23,010\nfour's data store one if it's got room.\n\n1811\n01:38:25,170 --> 01:38:28,470\nAll right.\nI'll take that one, and I'll hit next.\n\n1812\n01:38:32,900 --> 01:38:35,430\nAnd now it's just gonna\nask about quiescing.\n\n1813\n01:38:35,430 --> 01:38:36,500\nI mentioned this earlier,\n\n1814\n01:38:36,500 --> 01:38:40,140\nif you're running Windows since\nwe're not synchronizing RAM,\n\n1815\n01:38:40,140 --> 01:38:43,990\nif the OS is in mid write,\nif it's writing something to the disk and\n\n1816\n01:38:43,990 --> 01:38:48,240\nI clone it I might be getting a partial\nwrite which can cause disk corruption.\n\n1817\n01:38:48,240 --> 01:38:51,440\nA lot of OS's recover from that pretty\neasily so we don't have to sweat it.\n\n1818\n01:38:51,440 --> 01:38:55,275\nIf I had picked Windows I'd be\nable to choose a method here.\n\n1819\n01:38:55,275 --> 01:38:58,818\nAnd I could choose VMware VSS, that means\nit would tie into the volume shadow copy\n\n1820\n01:38:58,818 --> 01:39:02,431\nservice but since I picked a Linux VM I\ndon't have that choice, it's grayed out.\n\n1821\n01:39:05,288 --> 01:39:06,136\nAll right.\n\n1822\n01:39:06,136 --> 01:39:08,370\nNow is where I pick my RPO.\n\n1823\n01:39:08,370 --> 01:39:10,650\nMy Recovery Point Objective.\n\n1824\n01:39:10,650 --> 01:39:14,940\nWhen I have a failure,\nhow much data can I use measured in time.\n\n1825\n01:39:14,940 --> 01:39:18,585\nAnd you'll see that I can set\nit as low as 15 minutes or\n\n1826\n01:39:18,585 --> 01:39:20,574\nI can go as high as 24 hours.\n\n1827\n01:39:20,574 --> 01:39:24,509\nIf I wanna lose just 15 minutes of\ndata when I have this fail over.\n\n1828\n01:39:24,509 --> 01:39:26,850\nThen I can crank it all the way up.\n\n1829\n01:39:26,850 --> 01:39:29,080\nBut that's obviously gonna\nrequire more resources.\n\n1830\n01:39:29,080 --> 01:39:33,100\nEvery 15 minutes it's basically\ndoing a snapshot to get changes.\n\n1831\n01:39:33,100 --> 01:39:34,420\nIt's not actually a snapshot, though, so\n\n1832\n01:39:34,420 --> 01:39:36,400\nit doesn't hurt performance\nlike a snapshot does.\n\n1833\n01:39:36,400 --> 01:39:41,260\nBut it takes a temporary snapshot,\nI guess, grabs the changes, and\n\n1834\n01:39:41,260 --> 01:39:45,310\nsends them over to the other side,\nand then, wipes out that snapshot.\n\n1835\n01:39:45,310 --> 01:39:47,560\nThat's gonna happen every 15 minutes.\n\n1836\n01:39:47,560 --> 01:39:49,710\nThat might be too aggressive for\nmy needs so,\n\n1837\n01:39:49,710 --> 01:39:53,140\nI might wanna bump that up to\nsomething like four hours or whatever.\n\n1838\n01:39:53,140 --> 01:39:54,690\nWhatever is good for my company.\n\n1839\n01:39:54,690 --> 01:39:56,930\nWhatever meets my company's needs.\n\n1840\n01:39:56,930 --> 01:39:59,030\nAnd then, you can even specify like,\n\n1841\n01:39:59,030 --> 01:40:01,830\nif you wanna maintain\npoint in time instances.\n\n1842\n01:40:01,830 --> 01:40:04,970\nThis is good because one\nof the problems we have.\n\n1843\n01:40:04,970 --> 01:40:09,010\nLet's say, we're not recovering from a\nhardware fault or losing the data center.\n\n1844\n01:40:09,010 --> 01:40:12,080\nMaybe somebody actually deleted\na bunch of junk from this server or\n\n1845\n01:40:12,080 --> 01:40:15,250\nput in a bad configuration change or\na bad update.\n\n1846\n01:40:15,250 --> 01:40:18,510\nI just want to flip over to\nmy disaster recovery center,\n\n1847\n01:40:18,510 --> 01:40:20,550\nbecause I am trying to dodge this update.\n\n1848\n01:40:20,550 --> 01:40:25,130\nWell if I have a real aggressive schedule\nlike every 15 minutes set, within 15\n\n1849\n01:40:25,130 --> 01:40:30,300\nminutes the problem I caused in production\nis gonna replicate to the other site.\n\n1850\n01:40:30,300 --> 01:40:35,210\nI might want to keep some\nprevious replication instances.\n\n1851\n01:40:35,210 --> 01:40:38,700\nSo that I can roll back, and I'm doing it\nevery 15 minutes and I set it to three,\n\n1852\n01:40:38,700 --> 01:40:43,950\nthat would give me the last 45 minutes\nthat I could roll back to if I wanted.\n\n1853\n01:40:43,950 --> 01:40:47,150\nKind of a nice little thing to have,\nif you've got the storage place for it and\n\n1854\n01:40:47,150 --> 01:40:50,100\nyou're not worried about that,\nit gives you that flexibility\n\n1855\n01:40:50,100 --> 01:40:53,470\nif your machine gets a virus,\nit's gonna replicate.\n\n1856\n01:40:53,470 --> 01:40:56,680\nThe virus, replicate the software\nover the other site, so\n\n1857\n01:40:56,680 --> 01:40:59,050\nhaving those previous versions let's\nus roll back and get around that.\n\n1858\n01:41:00,365 --> 01:41:03,670\nAnd I said when we talked about\nsnapshots but you don't want to keep\n\n1859\n01:41:03,670 --> 01:41:07,010\nextra snapshots around on a production\nserver if you can avoid it.\n\n1860\n01:41:07,010 --> 01:41:10,250\nWell that's true but\nthis isn't a production server is it?\n\n1861\n01:41:10,250 --> 01:41:12,850\nThis is a replica being\nstored somewhere else, so\n\n1862\n01:41:12,850 --> 01:41:15,500\nif we have extra snapshots there\nit doesn't hurt performance.\n\n1863\n01:41:15,500 --> 01:41:19,290\nNow if we ever fell over into it and\nit becomes the production system,\n\n1864\n01:41:19,290 --> 01:41:22,080\nwe'll wanna wipe those snapshots\nout to improve performance.\n\n1865\n01:41:22,080 --> 01:41:26,310\nBut at that stage in the game, having\na functional server that's a little slow\n\n1866\n01:41:26,310 --> 01:41:28,420\nis better than not having a server at all.\n\n1867\n01:41:28,420 --> 01:41:33,250\nIt's up to us to figure out\nwhich one is gonna work there.\n\n1868\n01:41:33,250 --> 01:41:36,390\nI'll leave it at four hours,\nI'm not gonna turn on extra copies.\n\n1869\n01:41:36,390 --> 01:41:38,010\nI'll just let that go.\n\n1870\n01:41:38,010 --> 01:41:41,070\nAnd now it's got all\nthe stuff that it needs.\n\n1871\n01:41:41,070 --> 01:41:43,570\nNow it is warning me here,\nvirtual machine is not powered on.\n\n1872\n01:41:43,570 --> 01:41:46,620\nReplication will begin when\nthe virtual machine is powered on.\n\n1873\n01:41:46,620 --> 01:41:48,930\nThere's not a whole heck of a lot of\nreason to replicate a machine that\n\n1874\n01:41:48,930 --> 01:41:49,570\nis not turned on.\n\n1875\n01:41:49,570 --> 01:41:51,370\nThere's no changes happening.\n\n1876\n01:41:51,370 --> 01:41:53,300\nI'm just getting that\nlittle warning there.\n\n1877\n01:41:53,300 --> 01:41:54,720\nAnd now it's done.\n\n1878\n01:41:54,720 --> 01:41:56,710\nAnd I can fire that machine up.\n\n1879\n01:41:59,090 --> 01:42:01,370\nActually I'm kind of\nrushing it a little bit.\n\n1880\n01:42:01,370 --> 01:42:02,440\nLet me give it a second.\n\n1881\n01:42:02,440 --> 01:42:07,830\nSee how it says configuring APP Web\none and creating a virtual disk.\n\n1882\n01:42:07,830 --> 01:42:11,580\nIt's creating a new virtual disk on\nthat other data store that we're gonna\n\n1883\n01:42:11,580 --> 01:42:12,850\nbe replicating to.\n\n1884\n01:42:12,850 --> 01:42:15,830\nAnd so I need to give it a little\nwhile while it does that.\n\n1885\n01:42:15,830 --> 01:42:17,200\nAnd then I'll start up APP Web one.\n\n1886\n01:42:17,200 --> 01:42:19,160\nWhich actually I should be\nable to start right now.\n\n1887\n01:42:20,390 --> 01:42:21,680\nAnd it's gonna fire up.\n\n1888\n01:42:21,680 --> 01:42:25,450\nAnd once that's done, it'll be able\nto start doing your application.\n\n1889\n01:42:25,450 --> 01:42:29,050\nNow, DRS is gonna start warning\nme about some things here because\n\n1890\n01:42:29,050 --> 01:42:32,430\nit's basically saying I've got to find\na system that has resources available.\n\n1891\n01:42:32,430 --> 01:42:35,110\nI had assigned vFlash to\nthis system earlier, so\n\n1892\n01:42:35,110 --> 01:42:38,960\nit's just complaining that there is no\nsystem in my environment that has vFlash.\n\n1893\n01:42:38,960 --> 01:42:40,270\nI know that.\n\n1894\n01:42:40,270 --> 01:42:43,580\nI'll say okay and it will just start up\non another system, or at least it should.\n\n1895\n01:42:44,930 --> 01:42:47,990\nI guess I could always just go in and\nturn off vFlash, that's another solution.\n\n1896\n01:42:49,660 --> 01:42:51,288\nIf I wanted to do it the right way.\n\n1897\n01:42:51,288 --> 01:42:54,290\n[LAUGH] Okay.\n\n1898\n01:42:54,290 --> 01:42:56,510\nThat's basically vSphere replication.\n\n1899\n01:42:56,510 --> 01:42:58,640\nI am gonna let it set itself up and\nget to working.\n\n1900\n01:42:58,640 --> 01:43:00,570\nI want to show you guys what that's like.\n\n1901\n01:43:00,570 --> 01:43:02,960\nBut looking at the timer here,\nI'm kind of at the end of this segment,\n\n1902\n01:43:02,960 --> 01:43:04,780\nso let's stop and take a break.\n\n1903\n01:43:04,780 --> 01:43:05,950\nWhen we get back,\n\n1904\n01:43:05,950 --> 01:43:09,420\nwe'll take a look at what this is like\nwhen it's fully functional and in place.\n\n1905\n01:43:09,420 --> 01:43:10,620\nStay tuned.\n\n1906\n01:43:10,620 --> 01:43:11,635\nWe'll be back after this.\n\n1907\n01:43:11,635 --> 01:43:14,982\n[SOUND] All right,\n\n1908\n01:43:14,982 --> 01:43:20,344\nwelcome back, everybody.\n\n1909\n01:43:20,344 --> 01:43:24,060\nWe left our backups\nrunning during the break.\n\n1910\n01:43:24,060 --> 01:43:26,730\nAnd we've got our vSphere\nreplication running.\n\n1911\n01:43:26,730 --> 01:43:28,340\nSo all sorts of things are going.\n\n1912\n01:43:28,340 --> 01:43:31,410\nYou probably notice that\nI've done a wardrobe change.\n\n1913\n01:43:31,410 --> 01:43:34,080\nWe let those run overnight just so\nthat everything would settle down and\n\n1914\n01:43:34,080 --> 01:43:34,780\nget finished.\n\n1915\n01:43:34,780 --> 01:43:37,900\nAnd now we're back to\ncheck on our progress.\n\n1916\n01:43:37,900 --> 01:43:42,720\nSetting up the back up, setting up the\nreplication that's really just step one.\n\n1917\n01:43:42,720 --> 01:43:44,670\nStep two is monitoring and\nmaking sure it happens,\n\n1918\n01:43:44,670 --> 01:43:46,880\nwe need to verify that\nour backup succeeded.\n\n1919\n01:43:46,880 --> 01:43:50,090\nWe need to verify that our\nreplication is working successfully.\n\n1920\n01:43:50,090 --> 01:43:52,700\nAnd then after that, step three is,\nin the event of a failure,\n\n1921\n01:43:52,700 --> 01:43:55,280\nwe need to be able to recover from them.\n\n1922\n01:43:55,280 --> 01:43:57,242\nPretty straightforward process for\nall that.\n\n1923\n01:43:57,242 --> 01:44:02,163\nLet's start with, I guess we'll start\nwith VDP, we'll start with our back up.\n\n1924\n01:44:02,163 --> 01:44:02,965\nAll right.\n\n1925\n01:44:02,965 --> 01:44:05,640\nI'm just gonna jump back\ninto my vSphere And\n\n1926\n01:44:05,640 --> 01:44:08,690\nI'll go in here into my\nVsphere data protection.\n\n1927\n01:44:10,790 --> 01:44:13,310\nAnd I'm just going to check and\nmake sure that my backups happened.\n\n1928\n01:44:13,310 --> 01:44:16,980\nNow during this show I set up a backup,\nI think I just did the LINUX server then.\n\n1929\n01:44:16,980 --> 01:44:20,220\nI went ahead and backed up my Windows\nfile server also after the show.\n\n1930\n01:44:20,220 --> 01:44:22,930\nSo when I go into my backups\nI'll actually see two sets.\n\n1931\n01:44:22,930 --> 01:44:26,300\nThe backup VM Linux,\nthat's what I setup live during the show.\n\n1932\n01:44:26,300 --> 01:44:28,460\nThe backup file server is right there.\n\n1933\n01:44:28,460 --> 01:44:33,010\nI can see that both of them had a start\ntime from yesterday and their duration.\n\n1934\n01:44:33,010 --> 01:44:35,750\nThat Linux server took a long time to run.\n\n1935\n01:44:35,750 --> 01:44:37,020\nIt took an hour and 50 minutes.\n\n1936\n01:44:37,020 --> 01:44:40,410\nThat's why I didn't wait and\nwatch for it here in the show.\n\n1937\n01:44:40,410 --> 01:44:42,270\nIt actually turns out that it took so\n\n1938\n01:44:42,270 --> 01:44:47,620\nlong because the video streaming software\non my laptop was bogging down the network.\n\n1939\n01:44:47,620 --> 01:44:51,330\nThe other one I ran after hours,\nyou can see I ran it later in the day and\n\n1940\n01:44:51,330 --> 01:44:52,910\nit only took 17 minutes.\n\n1941\n01:44:52,910 --> 01:44:57,490\nThis server right here, it's actually four\ntimes the size of the Linux server and\n\n1942\n01:44:57,490 --> 01:44:59,130\nit backed up considerable faster.\n\n1943\n01:44:59,130 --> 01:45:02,890\nSo it just shows how network congestion\ncan really affect your backup window.\n\n1944\n01:45:02,890 --> 01:45:04,550\nYou've got to be careful with that.\n\n1945\n01:45:04,550 --> 01:45:06,740\nBut I can see I've got successes.\n\n1946\n01:45:06,740 --> 01:45:11,820\nIf I had a failure then that backup is not\na valid backup, I can't rely on it, right?\n\n1947\n01:45:11,820 --> 01:45:14,910\nSo I need to go and\nfind out why and redo the backup.\n\n1948\n01:45:14,910 --> 01:45:16,080\nThat's important.\n\n1949\n01:45:16,080 --> 01:45:19,810\nBecause if you have a backup fail, let's\nsay you do a backup once a night, right?\n\n1950\n01:45:19,810 --> 01:45:21,810\nSo every night you do a backup.\n\n1951\n01:45:21,810 --> 01:45:25,250\nThat means that if you ever have\na server failure, you'll never lose more\n\n1952\n01:45:25,250 --> 01:45:29,400\nthan 24 hours of data, because you've\ngot 24 hours in between backups.\n\n1953\n01:45:29,400 --> 01:45:31,690\nBut if you have a backup fail and\nyou just wait for\n\n1954\n01:45:31,690 --> 01:45:35,100\nthe next one,\nyour backup window just became 48 hours.\n\n1955\n01:45:35,100 --> 01:45:38,240\nAnd if you have a server failure you\ncould lose up to 48 ours of data.\n\n1956\n01:45:38,240 --> 01:45:41,132\nSo failed backups need to\nbe addressed very quickly.\n\n1957\n01:45:41,132 --> 01:45:44,990\nAll right, when I support a network\nchecking the back ups is the first thing\n\n1958\n01:45:44,990 --> 01:45:46,140\nI do when I get in the office.\n\n1959\n01:45:46,140 --> 01:45:48,760\nWhen I get in the office in the morning,\nI look for my backups and\n\n1960\n01:45:48,760 --> 01:45:51,540\nthat's assuming that I don't have it\nset to automatically email me anyway.\n\n1961\n01:45:51,540 --> 01:45:53,960\nYou know, a lot of times you get\nfailure reports that way, but\n\n1962\n01:45:53,960 --> 01:45:57,140\nI check the back ups because they're so\nimportant, right?\n\n1963\n01:45:57,140 --> 01:45:59,430\nSo it's part of my daily routine.\n\n1964\n01:45:59,430 --> 01:46:02,650\nSo looking here, I've got my successes,\nso we're in business.\n\n1965\n01:46:02,650 --> 01:46:06,610\nThe cool thing here is if I\never need to do a restore.\n\n1966\n01:46:06,610 --> 01:46:09,360\nThis is a backup of\nthe entire virtual machine.\n\n1967\n01:46:09,360 --> 01:46:12,100\nI did image back up so\nI've got the whole thing.\n\n1968\n01:46:12,100 --> 01:46:16,440\nSo, anytime I have a problem on either of\nthese two servers I can just jump over to\n\n1969\n01:46:16,440 --> 01:46:21,280\nmy Restore tab and I can pick the server\nor servers I want to restore.\n\n1970\n01:46:21,280 --> 01:46:23,410\nYou can do more than one if you want.\n\n1971\n01:46:23,410 --> 01:46:27,320\nSo I can take something like file\nserver here and I'll click on it.\n\n1972\n01:46:27,320 --> 01:46:30,260\nAnd it'll give me a list of\nall the backups that I made.\n\n1973\n01:46:30,260 --> 01:46:33,870\nAnd I only made one backup,\nit's right here from 8-19.\n\n1974\n01:46:33,870 --> 01:46:38,000\nI've got that backup and it's got\nit's backup of a single hard drive.\n\n1975\n01:46:38,000 --> 01:46:41,330\nIf I had more than one hard drive,\nthey'd all be here in the list.\n\n1976\n01:46:41,330 --> 01:46:44,080\nAnd if I want to restore it,\nI can just check it off and\n\n1977\n01:46:44,080 --> 01:46:47,810\nyou'll see where I've got my restore\noption, now notice it's got an expiration\n\n1978\n01:46:47,810 --> 01:46:52,800\ndate, if I don't do anything two\nmonths from now, because I set it for\n\n1979\n01:46:52,800 --> 01:46:55,950\n60 days retention, so two months from\nnow it's going to delete this back up.\n\n1980\n01:46:55,950 --> 01:46:59,680\nBut I can lock it and\nthat'll make the backup stay all right,\n\n1981\n01:46:59,680 --> 01:47:01,210\nnow why would I want to do that?\n\n1982\n01:47:01,210 --> 01:47:06,940\nWell, your company may be involved in some\nkind of litigation and a judge or a court\n\n1983\n01:47:06,940 --> 01:47:10,490\norder might come down that mandates you\nmaintain records from a certain time.\n\n1984\n01:47:10,490 --> 01:47:12,310\nSo you might need to freeze that backup so\n\n1985\n01:47:12,310 --> 01:47:15,170\nthat you can recover that\ndata per the judges orders.\n\n1986\n01:47:15,170 --> 01:47:18,020\nYou might have something like that,\nor maybe just know that it is\n\n1987\n01:47:18,020 --> 01:47:22,050\na good backup and you want to keep it so\nyou have a known tested backup.\n\n1988\n01:47:22,050 --> 01:47:25,840\nYou might not test a restore on every\nsingle backup that you do, right?\n\n1989\n01:47:25,840 --> 01:47:28,750\nIt takes a lot of time so\nyou might not have that available.\n\n1990\n01:47:28,750 --> 01:47:30,950\nSo, when you do test the restore and\n\n1991\n01:47:30,950 --> 01:47:34,510\nyou know it is successful, you might want\nto lock that one just so you know, hey,\n\n1992\n01:47:34,510 --> 01:47:38,040\nthis is a guaranteed good\nbackup that I can restore.\n\n1993\n01:47:38,040 --> 01:47:41,690\nIt might be old but it least it gives me\nthe foundation I can get that server back\n\n1994\n01:47:41,690 --> 01:47:42,450\nup and running with this.\n\n1995\n01:47:42,450 --> 01:47:45,100\nSo those are reasons\nwhy you might do that.\n\n1996\n01:47:45,100 --> 01:47:47,320\nSo we can choose what we want.\n\n1997\n01:47:47,320 --> 01:47:49,190\nAnd we can pick the server\nthat we want to restore.\n\n1998\n01:47:49,190 --> 01:47:51,130\nAnd then we can just hit\nthe restore button and\n\n1999\n01:47:51,130 --> 01:47:55,460\nit'll cue that job up to be able to\nget in there and restore that system.\n\n2000\n01:47:55,460 --> 01:47:57,910\nNow, when you restore,\nyou have a few options.\n\n2001\n01:47:57,910 --> 01:48:00,350\nThere's really not a whole\nheck of a lot to pick from.\n\n2002\n01:48:00,350 --> 01:48:04,570\nIn fact, on this one, it doesn't really\nlook like I've got many options at all.\n\n2003\n01:48:04,570 --> 01:48:07,320\nSo I've got restore to original location.\n\n2004\n01:48:07,320 --> 01:48:10,540\nIf I uncheck that I can\nrestore to a different place.\n\n2005\n01:48:10,540 --> 01:48:13,840\nThat's useful if the original\nhost is no longer available.\n\n2006\n01:48:13,840 --> 01:48:15,770\nWe can move it wherever we need to,\nall right?\n\n2007\n01:48:15,770 --> 01:48:18,410\nAnd then you've got other\nadvanced options down here like\n\n2008\n01:48:18,410 --> 01:48:20,250\nchoosing what data store to go to.\n\n2009\n01:48:20,250 --> 01:48:22,760\nWhether you want to power it\non after the restore or not.\n\n2010\n01:48:22,760 --> 01:48:24,920\nAnd whether you want the network\ncard to be reconnected.\n\n2011\n01:48:24,920 --> 01:48:29,160\nSo just a few options there,\nhit finish and it restores the box.\n\n2012\n01:48:29,160 --> 01:48:31,020\nReally pretty straightforward.\n\n2013\n01:48:31,020 --> 01:48:31,800\nAll right?\n\n2014\n01:48:31,800 --> 01:48:33,200\nThat's my Windows machine there.\n\n2015\n01:48:33,200 --> 01:48:34,210\nI could've done the Linux one.\n\n2016\n01:48:34,210 --> 01:48:36,800\nIt's really the same exact\nprocess on the Linux side.\n\n2017\n01:48:36,800 --> 01:48:40,030\nWe pick the back-up we want to restore and\nwe restore it.\n\n2018\n01:48:40,030 --> 01:48:43,040\nAgain, not all that much to mess with.\n\n2019\n01:48:43,040 --> 01:48:46,490\nYou can see its actually queued both\nof those back-up jobs for me now.\n\n2020\n01:48:46,490 --> 01:48:49,529\nSo I can go in and\nfire those up at the same time.\n\n2021\n01:48:49,529 --> 01:48:55,010\nSo that's the vSphere data protection.\n\n2022\n01:48:55,010 --> 01:48:58,350\nThat's how we monitor to see\nwhether the job was successful and\n\n2023\n01:48:58,350 --> 01:49:01,410\nhow we do the resource,\na pretty straightforward process.\n\n2024\n01:49:01,410 --> 01:49:04,760\nYou've also got other things like your\nreporting,in here where it'll take a look,\n\n2025\n01:49:04,760 --> 01:49:07,330\nand you can check to see your backup logs.\n\n2026\n01:49:07,330 --> 01:49:10,250\nIf you're backing up a ton of servers,\nthis is a great place to go so\n\n2027\n01:49:10,250 --> 01:49:12,190\nyou can start to find out what's going on.\n\n2028\n01:49:12,190 --> 01:49:16,450\nI like the summary screen that it gives\nbecause it lists all of your VMs and\n\n2029\n01:49:16,450 --> 01:49:19,040\nnotice most of my virtual machines\nhave never been backed up, so\n\n2030\n01:49:19,040 --> 01:49:20,310\nit's letting me know that.\n\n2031\n01:49:20,310 --> 01:49:23,150\nBut I can see these two\nguys were backed up.\n\n2032\n01:49:23,150 --> 01:49:26,310\nAnd when that time was,\nwhether it was successful, and so on.\n\n2033\n01:49:26,310 --> 01:49:28,630\nSo I can get that status\ninformation right there.\n\n2034\n01:49:28,630 --> 01:49:29,360\nAnd if you click on them,\n\n2035\n01:49:29,360 --> 01:49:31,100\nyou get a summary of their\nbackup down at the bottom.\n\n2036\n01:49:31,100 --> 01:49:33,210\nSo it's just nice,\neasy way to kind of see things.\n\n2037\n01:49:34,320 --> 01:49:38,260\nThe other thing this screen shows us is\nVDP maintains a database of where these\n\n2038\n01:49:38,260 --> 01:49:39,330\nbackups are.\n\n2039\n01:49:39,330 --> 01:49:43,780\nThe one that I built, I built one that was\none terabyte in size, or I think I did.\n\n2040\n01:49:43,780 --> 01:49:46,230\nSo it's telling me here my used capacity,\n\n2041\n01:49:46,230 --> 01:49:49,920\nthat I'm only using a very\nsmall part of that data store.\n\n2042\n01:49:49,920 --> 01:49:52,130\nSo I've got plenty of room for\nnew backups.\n\n2043\n01:49:52,130 --> 01:49:55,910\nBut we can use that to monitor and\nsee if we've got a space concern,\n\n2044\n01:49:55,910 --> 01:49:58,260\nif we're running out of\nspace with our backups.\n\n2045\n01:49:58,260 --> 01:49:59,910\nIt's all just kind of\ntucked away right in there.\n\n2046\n01:50:01,460 --> 01:50:05,356\nAll right, so that is basically VDP\nin a nutshell, not too difficult.\n\n2047\n01:50:05,356 --> 01:50:07,366\nV sphere replication.\n\n2048\n01:50:07,366 --> 01:50:10,580\nVsphere replication, you'll remember\nI turned on replication for\n\n2049\n01:50:10,580 --> 01:50:13,260\none of my VMs and\nthat process was pretty easy, right?\n\n2050\n01:50:13,260 --> 01:50:16,510\nWe just went in and\nfound a VM Right-clicked on it and\n\n2051\n01:50:16,510 --> 01:50:22,160\nwent to all vCenter replication actions\nand chose to turn on replication.\n\n2052\n01:50:22,160 --> 01:50:26,000\nAnd so we turned that on for\na host, and off it went.\n\n2053\n01:50:26,000 --> 01:50:29,240\nOne of the problems with vSphere\nreplication is that it is turned on on\n\n2054\n01:50:29,240 --> 01:50:30,920\na VM by VM basis, and so\n\n2055\n01:50:30,920 --> 01:50:35,730\nyou can forget which virtual machines\nyou've turned it on for or turned it off.\n\n2056\n01:50:35,730 --> 01:50:39,360\nBut that's okay because we have a nice\nlittle summary screen that we can use.\n\n2057\n01:50:39,360 --> 01:50:45,330\nIf we go back to our vCenter Home,\nin here we can go to our vCenter Server.\n\n2058\n01:50:46,380 --> 01:50:51,354\nI'm just going to pull up my\nvCenter Server, VM_SERVER1.lab.tv.\n\n2059\n01:50:51,354 --> 01:50:56,110\nAnd here, if we jump over to our\nmonitor tab, in the monitoring for\n\n2060\n01:50:56,110 --> 01:51:00,120\nvCenter, we'll actually see that we\nhave vSphere replication right there and\n\n2061\n01:51:00,120 --> 01:51:01,850\nthat's really useful.\n\n2062\n01:51:01,850 --> 01:51:06,200\nBecause when you're tracking VMs\nacross multiple hosts that may or\n\n2063\n01:51:06,200 --> 01:51:07,540\nmay not even be clustered.\n\n2064\n01:51:07,540 --> 01:51:09,900\nSo you might have some in a cluster,\nsome not in a cluster, and\n\n2065\n01:51:09,900 --> 01:51:11,510\nthey have multiple data centers.\n\n2066\n01:51:11,510 --> 01:51:14,390\nIt gets really difficult to\nkeep track of the replication,\n\n2067\n01:51:14,390 --> 01:51:17,540\nespecially because the source\nof the replication and\n\n2068\n01:51:17,540 --> 01:51:22,440\nthe target of the replication may be in\ntwo completely different environments.\n\n2069\n01:51:22,440 --> 01:51:23,360\nIn those scenarios,\n\n2070\n01:51:23,360 --> 01:51:26,450\nwe need a nice little summary stream and\nV center will give it to us.\n\n2071\n01:51:26,450 --> 01:51:29,810\nThe thing is remember is to\nnavigate into the V center server.\n\n2072\n01:51:29,810 --> 01:51:35,880\nI navigated into the V center server, and\ngo to \"monitor\" and V sphere replication.\n\n2073\n01:51:35,880 --> 01:51:39,550\nAnd here's where you can see your\noutgoing and incoming replications.\n\n2074\n01:51:40,600 --> 01:51:43,492\nAn outgoing replication,\nthose are your sources.\n\n2075\n01:51:43,492 --> 01:51:48,110\nAll right, these are my source VMs that\nare being replicated somewhere else.\n\n2076\n01:51:48,110 --> 01:51:52,860\nAnd so I can see right here that I am\nrunning replication for App Web One, for\n\n2077\n01:51:52,860 --> 01:51:55,370\nthat server I am running replication.\n\n2078\n01:51:55,370 --> 01:51:56,170\nOkay.\n\n2079\n01:51:56,170 --> 01:51:57,300\nAnd I can see its health.\n\n2080\n01:51:57,300 --> 01:51:58,470\nIts status is okay.\n\n2081\n01:51:58,470 --> 01:52:01,340\nI can see the target where\nit's being replicated to.\n\n2082\n01:52:01,340 --> 01:52:04,614\nSo this one's being sent right\nback here to this same system.\n\n2083\n01:52:04,614 --> 01:52:08,432\nI'm actually just replicating to another\ndata store here in my same environment.\n\n2084\n01:52:08,432 --> 01:52:11,019\nBut this might be a completely\ndifferent vCenter server,\n\n2085\n01:52:11,019 --> 01:52:13,960\none that's just linked to our environment.\n\n2086\n01:52:13,960 --> 01:52:17,590\nThen you can see what server\nis handling the replication.\n\n2087\n01:52:17,590 --> 01:52:21,110\nThat's the vSphere replication\nappliance that we created.\n\n2088\n01:52:21,110 --> 01:52:25,370\nWe can see the sync information,\nthe duration, the size and my RPO.\n\n2089\n01:52:25,370 --> 01:52:27,820\nSo right now I'm at four-hour RPO.\n\n2090\n01:52:27,820 --> 01:52:31,520\nSo, if I have a failure,\nI can flip over to my replica and\n\n2091\n01:52:31,520 --> 01:52:33,710\nit will be updated within\nthe last four hours.\n\n2092\n01:52:33,710 --> 01:52:36,270\nSo that's the maximum amount\nof data that I will loose\n\n2093\n01:52:36,270 --> 01:52:38,180\nas long as the status says ok.\n\n2094\n01:52:38,180 --> 01:52:39,950\nIf the status says warning or\n\n2095\n01:52:39,950 --> 01:52:42,760\nanything else, I might loose\nmore than four hours of data.\n\n2096\n01:52:42,760 --> 01:52:45,190\nAs long as I see that green\ncircle with a check mark.\n\n2097\n01:52:45,190 --> 01:52:48,100\nI'll know that I am within four\nhours of current at my replica.\n\n2098\n01:52:49,900 --> 01:52:53,520\nAll right, so this is the outgoing side,\nright, my sources.\n\n2099\n01:52:53,520 --> 01:52:57,628\nMy destination or\nmy target those are incoming replications.\n\n2100\n01:52:57,628 --> 01:53:00,810\nAn incoming, I've got that same box and\nthat's because I'm\n\n2101\n01:53:00,810 --> 01:53:05,560\nreplicating the VM just to another data\nstore right here in the same data center.\n\n2102\n01:53:05,560 --> 01:53:07,780\nSo it's an outgoing and an incoming.\n\n2103\n01:53:07,780 --> 01:53:11,320\nBut you might have it where it's empty\nhere, where there are no incoming.\n\n2104\n01:53:11,320 --> 01:53:14,890\nAnd that might be because you've got\nanother vCenter server at a whole\n\n2105\n01:53:14,890 --> 01:53:17,100\nseparate location somewhere else.\n\n2106\n01:53:17,100 --> 01:53:21,250\nAnd on that one, it'll have a list of\nall the incoming replications coming\n\n2107\n01:53:21,250 --> 01:53:22,495\nfrom our original vCenter.\n\n2108\n01:53:23,740 --> 01:53:25,930\nSo that's the difference\nthat you'll see there.\n\n2109\n01:53:25,930 --> 01:53:30,060\nOtherwise it reads the same way, you see\nthe virtual machine, mine is app Web1.\n\n2110\n01:53:30,060 --> 01:53:34,810\nI can see the status, and the RPO, and\nas long as I see that green circle and\n\n2111\n01:53:34,810 --> 01:53:39,018\na check mark, I know that this\nmachine is current within four hours.\n\n2112\n01:53:39,018 --> 01:53:42,159\nAll right.\n\n2113\n01:53:42,159 --> 01:53:45,430\nNow if I want to do a recovery,\n\n2114\n01:53:45,430 --> 01:53:51,400\nthe recovery's a little bit different\nthan what we see with our VDP.\n\n2115\n01:53:51,400 --> 01:53:55,845\nWith VDP, we just choose the backup and\nhit restore and off it goes.\n\n2116\n01:53:55,845 --> 01:53:58,770\nWith vSphere replication,\nthere's a little more to it, all right?\n\n2117\n01:53:58,770 --> 01:54:02,705\nVSphere replication doesn't have a great\nway of detecting whether it needs\n\n2118\n01:54:02,705 --> 01:54:03,205\na fail over.\n\n2119\n01:54:03,205 --> 01:54:07,365\nRemember that if there is a hardware\nfailure, that is easy to detect and\n\n2120\n01:54:07,365 --> 01:54:09,170\nwe're able to move over to the other one.\n\n2121\n01:54:09,170 --> 01:54:12,680\nBut if it's a software issue or something\nlike that, it can't really detect that.\n\n2122\n01:54:12,680 --> 01:54:16,142\nso the fail over process for\nvSphere replication is actually manual.\n\n2123\n01:54:16,142 --> 01:54:18,540\nAll right.\nSo, what we need to do is,\n\n2124\n01:54:18,540 --> 01:54:22,140\nstep one is power off the source.\n\n2125\n01:54:22,140 --> 01:54:24,300\nThe outgoing replication, this guy,\n\n2126\n01:54:24,300 --> 01:54:28,540\nthe active version of app Web1,\nwe need to power it off.\n\n2127\n01:54:28,540 --> 01:54:32,160\nAnd that's why you see here under outgoing\nreplication you've got a few options up\n\n2128\n01:54:32,160 --> 01:54:36,660\nhere like to stop the replication,\nto pause it, and I thought you actually\n\n2129\n01:54:36,660 --> 01:54:39,440\nhad the option to power the VM off,\nbut apparently you don't.\n\n2130\n01:54:39,440 --> 01:54:41,030\nLet me see if it's right here.\n\n2131\n01:54:41,030 --> 01:54:41,710\nNo you don't.\n\n2132\n01:54:41,710 --> 01:54:44,240\nI could have swore you could\nhave stopped it from here.\n\n2133\n01:54:44,240 --> 01:54:47,760\nBut anyhow, we do need to power\noff that virtual machine.\n\n2134\n01:54:47,760 --> 01:54:48,910\nSo that's gonna be step one.\n\n2135\n01:54:48,910 --> 01:54:50,960\nYou take the source and you power it off.\n\n2136\n01:54:50,960 --> 01:54:56,400\nSo I'm gonna go into app web one and\nI'm just gonna shut it down.\n\n2137\n01:54:56,400 --> 01:54:58,410\nAll right, so I oh,\nit's already shut down isn't it?\n\n2138\n01:54:58,410 --> 01:55:00,340\nWell no it's now, it says, there we go.\n\n2139\n01:55:00,340 --> 01:55:01,840\nIt just took it a minute\nto figure out it was on.\n\n2140\n01:55:01,840 --> 01:55:05,360\nAll right, so I'm gonna go ahead and\nshut it down and power off the source.\n\n2141\n01:55:05,360 --> 01:55:08,880\nYou have to power off the source,\nif you don't, and you try and\n\n2142\n01:55:08,880 --> 01:55:12,360\nbring up the replica you're gonna\nget duplicate names, duplicate ip's,\n\n2143\n01:55:12,360 --> 01:55:14,050\na lot of duplicate stuff.\n\n2144\n01:55:14,050 --> 01:55:16,740\nIf you're in a moment of failure though\nthen the source has all ready failed,\n\n2145\n01:55:16,740 --> 01:55:19,030\nyou don't want the power off it's\nall ready dead in the water, right?\n\n2146\n01:55:19,030 --> 01:55:21,060\nSo you may not have to\nworry about that step but\n\n2147\n01:55:21,060 --> 01:55:24,930\nI always just remember step one make\nsure the source is powered off.\n\n2148\n01:55:24,930 --> 01:55:25,570\nAll right.\n\n2149\n01:55:25,570 --> 01:55:27,300\nSo I'll give it a moment\nwhile it powers off.\n\n2150\n01:55:27,300 --> 01:55:28,960\nIt shouldn't take to terribly long.\n\n2151\n01:55:31,540 --> 01:55:33,120\nAnd just kind of churn along.\n\n2152\n01:55:33,120 --> 01:55:34,590\nI'm just going to open this console so\n\n2153\n01:55:34,590 --> 01:55:37,130\nI can see whether it is\nactually powering off.\n\n2154\n01:55:37,130 --> 01:55:40,270\nI have my VM tools installed, so\nit is doing a graceful shutdown.\n\n2155\n01:55:40,270 --> 01:55:43,330\nIt's going to try and\nstop its services and power it down.\n\n2156\n01:55:46,950 --> 01:55:47,930\nSo, we'll give it a moment.\n\n2157\n01:55:47,930 --> 01:55:51,510\nMy vCenter seems to have gotten really\nsluggish there during the shutdown.\n\n2158\n01:55:51,510 --> 01:55:52,960\nOnce it's shut down,\n\n2159\n01:55:52,960 --> 01:55:57,340\nwe go back to our vSphere monitoring\npage that I was on just a moment ago.\n\n2160\n01:55:57,340 --> 01:56:00,370\nAnd we go to the incoming replica.\n\n2161\n01:56:00,370 --> 01:56:01,300\nRight?\nThe incoming.\n\n2162\n01:56:01,300 --> 01:56:03,090\nThat means the destination, right?\n\n2163\n01:56:03,090 --> 01:56:03,910\nThe target.\n\n2164\n01:56:03,910 --> 01:56:05,440\nWe go to the incoming one.\n\n2165\n01:56:05,440 --> 01:56:08,140\nAnd we choose to make it the active one.\n\n2166\n01:56:08,140 --> 01:56:10,100\nWe bring it active from there.\n\n2167\n01:56:10,100 --> 01:56:12,810\nAll right, so we'll give it a moment.\n\n2168\n01:56:14,010 --> 01:56:14,674\nIt seems to be thinking.\n\n2169\n01:56:19,701 --> 01:56:23,788\nWell, while it's waiting, whenever it does\nmanage to finish when we actually get in\n\n2170\n01:56:23,788 --> 01:56:26,171\nthere to the replica,\nwe'll right click on it and\n\n2171\n01:56:26,171 --> 01:56:30,250\nyou'll see there'll be the option on\nthe incoming one to choose Recover.\n\n2172\n01:56:30,250 --> 01:56:33,626\nAnd what the recover option means\nis basically, stop replicating,\n\n2173\n01:56:33,626 --> 01:56:36,380\ncause we don't wanna pull anything\nelse from the bad source, right?\n\n2174\n01:56:36,380 --> 01:56:39,240\nSo, we stop replicating and\nwe boot that VM up.\n\n2175\n01:56:39,240 --> 01:56:41,330\nWe bring that system up and\nwe get it in business.\n\n2176\n01:56:41,330 --> 01:56:43,200\nIn face, I don't need my console anymore.\n\n2177\n01:56:43,200 --> 01:56:44,530\nI know it's stopped.\n\n2178\n01:56:44,530 --> 01:56:46,890\nSo, there we go.\nI can see app web one is stopped.\n\n2179\n01:56:46,890 --> 01:56:50,320\nSo, I'll just go back here to\nmy replication monitoring.\n\n2180\n01:56:51,810 --> 01:56:54,190\nAnd I'll go to my incoming replications.\n\n2181\n01:56:54,190 --> 01:56:55,070\nSo here's app Web1.\n\n2182\n01:56:56,530 --> 01:57:01,780\nAnd notice that it just switched\nfrom okay to not active.\n\n2183\n01:57:01,780 --> 01:57:04,980\nIt's not active, it can't\nreplicate while the source is off.\n\n2184\n01:57:04,980 --> 01:57:06,140\nAnd that's actually a good note.\n\n2185\n01:57:06,140 --> 01:57:09,440\nWhen you set up a replica, if your source\nmachine is off when you set it up,\n\n2186\n01:57:09,440 --> 01:57:10,260\nyou'll get a warning.\n\n2187\n01:57:10,260 --> 01:57:11,990\nI think that happened in the last segment.\n\n2188\n01:57:11,990 --> 01:57:14,340\nAnd you just start it up, and\nit'll start replicating from there.\n\n2189\n01:57:14,340 --> 01:57:16,070\nOnce you boot that VM.\n\n2190\n01:57:16,070 --> 01:57:16,670\nSo there we go.\n\n2191\n01:57:16,670 --> 01:57:19,170\nIt's up.\nI can right-click on it,\n\n2192\n01:57:19,170 --> 01:57:21,810\nand I can choose Recover.\n\n2193\n01:57:21,810 --> 01:57:23,090\nRight here.\n\n2194\n01:57:23,090 --> 01:57:24,050\nWhen I choose recover,\n\n2195\n01:57:24,050 --> 01:57:28,990\nthat's gonna tell it to make the replicate\nthe active version of that VM.\n\n2196\n01:57:28,990 --> 01:57:32,680\nNow, if it hasn't replicated for\nthree hours and 59 minutes,\n\n2197\n01:57:32,680 --> 01:57:36,340\nthen I just lost four hours of data and\nthat's okay cuz that's my RPO.\n\n2198\n01:57:36,340 --> 01:57:39,590\nBut it may have replicated in the last\nhour or 30 minutes or whatever.\n\n2199\n01:57:39,590 --> 01:57:43,250\nSo just because your RPO was four hours\ndoesn't mean you necessarily lost all\n\n2200\n01:57:43,250 --> 01:57:44,240\nfour hours.\n\n2201\n01:57:44,240 --> 01:57:46,000\nSo I'm gonna choose to recover it and\n\n2202\n01:57:46,000 --> 01:57:47,830\nnotice you've got\na couple of options here.\n\n2203\n01:57:47,830 --> 01:57:50,670\nRecover with recent changes, all right?\n\n2204\n01:57:50,670 --> 01:57:54,090\nIf the source VM is still accessible.\n\n2205\n01:57:54,090 --> 01:57:55,480\nIt's going to reach out to it and\n\n2206\n01:57:55,480 --> 01:57:59,830\ntry enforce one last replication to\nget that data and bring it active.\n\n2207\n01:57:59,830 --> 01:58:03,460\nBecause it's just pulling a delta,\nthat normally happens pretty quick.\n\n2208\n01:58:03,460 --> 01:58:05,600\nThen you won't lose any data.\n\n2209\n01:58:05,600 --> 01:58:09,020\nYou will come back up with the exact\nsame data you had in production.\n\n2210\n01:58:09,020 --> 01:58:12,480\nThat's awesome, but\nit requires the source to be available.\n\n2211\n01:58:12,480 --> 01:58:16,200\nIf you are in a true state of failure,\nthough, if you've lost the source,\n\n2212\n01:58:16,200 --> 01:58:19,810\nyou can choose to recover with the latest\navailable data, and in that scenario it'll\n\n2213\n01:58:19,810 --> 01:58:22,890\njust give up on the source, and\nit'll bring up whatever it has.\n\n2214\n01:58:22,890 --> 01:58:25,590\nAnd that's where our RPO comes in,\nall right.\n\n2215\n01:58:25,590 --> 01:58:26,350\nSo, that's what I'm gonna do.\n\n2216\n01:58:26,350 --> 01:58:29,900\nI'm gonna choose to recover with\nthe latest data, and I'll hit next.\n\n2217\n01:58:29,900 --> 01:58:32,130\nIt's gonna ask where I'm\ngonna put the new VM.\n\n2218\n01:58:32,130 --> 01:58:34,250\nBecause it's really just\nreplicating the hard drives.\n\n2219\n01:58:34,250 --> 01:58:35,950\nFor me.\nIt's not replicating RAM.\n\n2220\n01:58:35,950 --> 01:58:38,840\nSo the VMDK, the hard drive,\nit's already replicated.\n\n2221\n01:58:38,840 --> 01:58:40,580\nNow it just needs to know where to put it.\n\n2222\n01:58:40,580 --> 01:58:42,070\nSo I'm going to put it in my data center.\n\n2223\n01:58:44,020 --> 01:58:47,205\nAnd I need to pick a host inside of it.\n\n2224\n01:58:47,205 --> 01:58:52,860\n[LAUGH] The selected folder already\ncontains an entity with the same name.\n\n2225\n01:58:52,860 --> 01:58:56,240\nSo I still have that app web\none that exists from before, so\n\n2226\n01:58:56,240 --> 01:59:00,560\nI really need to delete that out of\nthere or restore to another data center.\n\n2227\n01:59:00,560 --> 01:59:03,570\nSo I don't actually have another\ndata center to restore to.\n\n2228\n01:59:03,570 --> 01:59:06,370\nBut basically,\nwe would just pick that other data center.\n\n2229\n01:59:06,370 --> 01:59:07,720\nAnd it asks for a resource.\n\n2230\n01:59:07,720 --> 01:59:10,170\nIf we wanna move the datastore,\nwe can at that point.\n\n2231\n01:59:10,170 --> 01:59:14,110\nBut normally, we just map the virtual\nnetwork and that's it and you hit finish.\n\n2232\n01:59:14,110 --> 01:59:17,430\nWhen it's done, it doesn't take long cuz\nit's just putting the virtual machine\n\n2233\n01:59:17,430 --> 01:59:18,620\nconfiguration in there.\n\n2234\n01:59:18,620 --> 01:59:20,280\nIt doesn't have to do the hard drives.\n\n2235\n01:59:20,280 --> 01:59:23,710\nAnd it brings the app up,\nor in my case, app Web1.\n\n2236\n01:59:23,710 --> 01:59:26,740\nIt brings that guest up and\nyou are back in business.\n\n2237\n01:59:26,740 --> 01:59:29,280\nSame name, same IP, same configuration.\n\n2238\n01:59:29,280 --> 01:59:31,930\nThe guest doesn't even know\nthat it has been moved,\n\n2239\n01:59:31,930 --> 01:59:34,200\nit just sees that it is rebooting, right.\n\n2240\n01:59:34,200 --> 01:59:36,570\nSo, you do have downtime with replication.\n\n2241\n01:59:36,570 --> 01:59:40,600\nBe aware of that, you will have downtime,\nbecause you have to power off the source,\n\n2242\n01:59:40,600 --> 01:59:44,340\nor the source is probably failed, and\nthen you've got to manually go in and\n\n2243\n01:59:44,340 --> 01:59:46,270\nchoose to recover that replica.\n\n2244\n01:59:46,270 --> 01:59:48,970\nSo, just keep that in\nmind with this system.\n\n2245\n01:59:50,780 --> 01:59:54,200\nAll right, so\nthat in a nut shell is VDP and\n\n2246\n01:59:54,200 --> 01:59:57,200\nvSphere replication and I'm learning\nboth of them at the same time.\n\n2247\n01:59:57,200 --> 01:59:59,270\nYou absolutely can do that, right.\n\n2248\n01:59:59,270 --> 02:00:03,070\nRemember with VDP it's assuming\nthe entire virtual machine is lost and\n\n2249\n02:00:03,070 --> 02:00:04,540\nyou've got to recover the whole thing.\n\n2250\n02:00:04,540 --> 02:00:05,900\nThat takes time.\n\n2251\n02:00:05,900 --> 02:00:06,530\nRight.\n\n2252\n02:00:06,530 --> 02:00:09,360\nBut with VDP it's really easy\nto take those backups and\n\n2253\n02:00:09,360 --> 02:00:12,920\nstore multiple versions of them and\neven send them off site.\n\n2254\n02:00:12,920 --> 02:00:17,910\nWith vSphere replication, you're really\njust maintaining one, I mean you could set\n\n2255\n02:00:17,910 --> 02:00:21,300\nit to do restore points, but by default\nit's just one, it's the most current.\n\n2256\n02:00:21,300 --> 02:00:25,090\nAnd it's live and it's ready to rock,\nso you could recover more quickly with\n\n2257\n02:00:25,090 --> 02:00:30,850\nvSphere replication, but you can recover\nmore historical data points with VDP.\n\n2258\n02:00:30,850 --> 02:00:35,080\nSo using both creates a good mixture,\na good solution.\n\n2259\n02:00:35,080 --> 02:00:39,630\nBut I know I said early in the show, I'm\nnot a big fan of VDP in the real world.\n\n2260\n02:00:39,630 --> 02:00:42,820\nSo you might have third party solutions or\nother methods you use.\n\n2261\n02:00:42,820 --> 02:00:45,320\nI prefer to do my backups from\nwithin the guests themselves,\n\n2262\n02:00:45,320 --> 02:00:48,500\nbut again it's entirely up to\nyou which solutions you pick.\n\n2263\n02:00:48,500 --> 02:00:51,910\nI have used vSphere replication\nat a number of locations.\n\n2264\n02:00:51,910 --> 02:00:56,920\nVDP, I've really deployed it at just\none location and that's just because\n\n2265\n02:00:56,920 --> 02:01:01,020\nI almost always use other solutions,\nbut whatever works for you, you pick.\n\n2266\n02:01:01,020 --> 02:01:04,240\nOn the exam you're going to see VDP,\nso that's the one you need to know.\n\n2267\n02:01:05,860 --> 02:01:08,270\nAll right, well that pretty much\nwraps up high availability.\n\n2268\n02:01:08,270 --> 02:01:10,580\nI know we went into three separate\nepisodes on this one, but\n\n2269\n02:01:10,580 --> 02:01:11,670\nit was a lot to cover.\n\n2270\n02:01:11,670 --> 02:01:14,450\nSo we wanted to make sure that we\ngot in there nice and thorough.\n\n2271\n02:01:14,450 --> 02:01:16,980\nSo I think we've covered it all.\n\n2272\n02:01:16,980 --> 02:01:21,060\nBut as always, if you have any questions,\nfeel free to ask, right.\n\n2273\n02:01:21,060 --> 02:01:24,100\nLive during the show,\nyou can go to itpro.tv/live, and\n\n2274\n02:01:24,100 --> 02:01:26,390\nyou'll see the chat box\nright beneath the video.\n\n2275\n02:01:26,390 --> 02:01:29,390\nPost your questions, we monitor and\nanswer during the show.\n\n2276\n02:01:29,390 --> 02:01:31,000\nIf you have questions after the show,\n\n2277\n02:01:31,000 --> 02:01:33,720\nif you're watching this recorded,\nuse the Q and A forums.\n\n2278\n02:01:33,720 --> 02:01:36,280\nAt the top of every page is\na link that says Q and A.\n\n2279\n02:01:36,280 --> 02:01:37,000\nJump right in there.\n\n2280\n02:01:37,000 --> 02:01:38,070\nPost your questions.\n\n2281\n02:01:38,070 --> 02:01:39,160\nWe all monitor and answer.\n\n2282\n02:01:39,160 --> 02:01:43,060\nWe want to make sure you guys have\nthe information you need to be successful.\n\n2283\n02:01:43,060 --> 02:01:46,882\nAll right, well I hope you guys enjoyed\nthe show, signing off for itpro tv,\n\n2284\n02:01:46,882 --> 02:01:49,178\nI'm Don Pazet, and I'll see you next time.\n\n2285\n02:01:49,178 --> 02:01:59,178\n[MUSIC]\n\n2286\n02:02:01,044 --> 02:02:07,590\n[SOUND]\n\n",
          "vimeoId": "104132976"
        }
      ],
      "title": "Establish and Maintain Service Levels"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don runs through the general techniques used to troubleshoot a VMware vSphere deployment. He breaks down the various tools that can be used to troubleshoot specific areas such as networking and performance.",
          "length": "5800",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/012-Troubleshooting.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/012-Troubleshooting-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/012-Troubleshooting-sm.jpg",
          "title": "Troubleshooting",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,336 --> 00:00:22,461\n[SOUND]\n\n3\n00:00:22,461 --> 00:00:32,461\n[MUSIC]\n\n4\n00:00:33,586 --> 00:00:36,952\nAll right, good morning,\ngood afternoon and good evening and\n\n5\n00:00:36,952 --> 00:00:39,379\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:39,379 --> 00:00:45,504\nI'm your host Don Pezet, back again with\nanother episode of VMware vSphere 5.5.\n\n7\n00:00:45,504 --> 00:00:49,987\nWe're gonna be diving back in and\nthis time, we just wrapped up a three part\n\n8\n00:00:49,987 --> 00:00:54,080\nseries on high availability so\nyou have a ton of stuff there.\n\n9\n00:00:54,080 --> 00:00:56,380\nNow we're gonna jump into troubleshooting.\n\n10\n00:00:56,380 --> 00:00:58,380\nSo a chance for\nus to tackle something new.\n\n11\n00:00:59,730 --> 00:01:04,084\nHopefully, you deploy VMware\nvSphere in your environment and\n\n12\n00:01:04,084 --> 00:01:07,628\nthings run great,\nyou have no issues whatsoever.\n\n13\n00:01:07,628 --> 00:01:11,250\nBut, the odds are, before too long, you're\ngonna bump into some kind of a problem.\n\n14\n00:01:11,250 --> 00:01:14,860\nAnd when that happens, you're gonna need\nto be able to troubleshoot, isolate, and\n\n15\n00:01:14,860 --> 00:01:16,180\nlocate the issues.\n\n16\n00:01:16,180 --> 00:01:18,880\nAnd from there you need to correct\nthem and get the system back in place.\n\n17\n00:01:18,880 --> 00:01:21,171\nSo that's something that's\ngonna be an ongoing activity.\n\n18\n00:01:21,171 --> 00:01:26,025\nAnd in fact you can look at this episode,\nin one of my early episodes for\n\n19\n00:01:26,025 --> 00:01:29,260\njust this show I had my iSCSI SAN fail,\nright?\n\n20\n00:01:29,260 --> 00:01:30,472\nA disk failed in there and\n\n21\n00:01:30,472 --> 00:01:34,128\nI didn't have redundancy because it's\nnot sensitive data and so it died.\n\n22\n00:01:34,128 --> 00:01:36,716\nWell, that wasn't a vSphere problem,\nper se,\n\n23\n00:01:36,716 --> 00:01:39,253\nit wasn't VMware software\nthat was the issue.\n\n24\n00:01:39,253 --> 00:01:42,990\nIt was my iSCSI SAN that died,\nbut I saw it in vSphere.\n\n25\n00:01:42,990 --> 00:01:46,060\nThat's where I was seeing the issues and\nI had to go and rebuild that box.\n\n26\n00:01:46,060 --> 00:01:49,980\nAnd even since then, I've bumped\ninto other issues during this show,\n\n27\n00:01:49,980 --> 00:01:53,380\nmostly centered around me\nnot following the HCL,\n\n28\n00:01:53,380 --> 00:01:57,000\nthe hardware compatibility list,\nwhich is really, really common.\n\n29\n00:01:57,000 --> 00:02:02,050\nBut these are the type of things that can\nstem from just a routine installation and\n\n30\n00:02:02,050 --> 00:02:04,700\nconfiguration and operating of vSphere.\n\n31\n00:02:04,700 --> 00:02:09,100\nSo we need to be familiar with the tools\nof the trade, what's available for\n\n32\n00:02:09,100 --> 00:02:11,140\nus to use when it comes\nto troubleshooting.\n\n33\n00:02:11,140 --> 00:02:15,930\nAnd it's really interesting because you've\ngot guest OSs and all the tools and\n\n34\n00:02:15,930 --> 00:02:17,330\nutilities they have.\n\n35\n00:02:17,330 --> 00:02:21,970\nAnd then we have the ESXI hosts and\nthe various tools that they have.\n\n36\n00:02:21,970 --> 00:02:24,390\nAnd then we've got vCenter and\nthe various tools that it has.\n\n37\n00:02:24,390 --> 00:02:28,140\nSo there's all sorts of different places\nwe can go to look to find information.\n\n38\n00:02:28,140 --> 00:02:31,950\nSo I wanna start off really general,\njust talking about those tools.\n\n39\n00:02:31,950 --> 00:02:36,660\nWhat are some of the things that we can\nuse to start testing out our system and\n\n40\n00:02:36,660 --> 00:02:39,790\nseeing how it works and\nwhat it does and so on.\n\n41\n00:02:39,790 --> 00:02:43,550\nSo there's a few different\nthings that are available for\n\n42\n00:02:43,550 --> 00:02:48,080\nus and the first one I want to mention\nis just the vSphere Web Client, right.\n\n43\n00:02:48,080 --> 00:02:52,540\nIf we have vCenter in place, and\nwe're using the vSphere web client,\n\n44\n00:02:52,540 --> 00:02:55,100\nyou can do a lot of your\ntroubleshooting right from here.\n\n45\n00:02:56,330 --> 00:02:59,180\nNow I know all through\nthis series I've said\n\n46\n00:02:59,180 --> 00:03:02,503\nthe vSphere Web Client is\nwhat you need to be using.\n\n47\n00:03:02,503 --> 00:03:05,785\nAnd that VMware has made some options\navailable in the vSphere Web Client that\n\n48\n00:03:05,785 --> 00:03:08,008\naren't available in\nthe regular vSphere Client and\n\n49\n00:03:08,008 --> 00:03:11,280\nthat you really need to be working here,\nthis needs to be your go-to place.\n\n50\n00:03:11,280 --> 00:03:14,340\nBut I'll also tell you that when it comes\nto troubleshooting that the vSphere\n\n51\n00:03:14,340 --> 00:03:18,910\nWeb Client has one major problem, and\nthat is that it's painfully slow.\n\n52\n00:03:18,910 --> 00:03:21,780\nIt takes a while to navigate\nbetween pages and get your data,\n\n53\n00:03:21,780 --> 00:03:24,240\nespecially when it comes\nto performance reporting.\n\n54\n00:03:24,240 --> 00:03:27,310\nAnd in real life land,\nI get pretty frustrated with it.\n\n55\n00:03:27,310 --> 00:03:30,880\nSo, when it's general maintenance,\nmonitoring configuration, yes,\n\n56\n00:03:30,880 --> 00:03:33,050\nI use the Web Client, use it all the time.\n\n57\n00:03:33,050 --> 00:03:36,820\nBut when I start to troubleshoot, I almost\nimmediately ditch the Web Client and\n\n58\n00:03:36,820 --> 00:03:39,470\njump over to just\nthe regular vSphere Client.\n\n59\n00:03:39,470 --> 00:03:42,690\nIt operates a lot more quickly,\nlets me dive in and work on stuff.\n\n60\n00:03:42,690 --> 00:03:46,420\nSo that's a personal preference,\nbut you can go either way.\n\n61\n00:03:46,420 --> 00:03:49,940\nAnd in fact I'm gonna talk a little\nbit later about iSCSI maps.\n\n62\n00:03:49,940 --> 00:03:50,670\nIt's a great way for\n\n63\n00:03:50,670 --> 00:03:54,590\ntroubleshooting iSCSI stuff that\naren't available in the Web Client.\n\n64\n00:03:54,590 --> 00:03:56,567\nYou actually can't get to\nthem in the Web Client,\n\n65\n00:03:56,567 --> 00:03:58,128\nnone of the maps work in the Web Client.\n\n66\n00:03:58,128 --> 00:04:01,453\nBut in the regular vSphere Client we've\ngot that, you've got the maps, and\n\n67\n00:04:01,453 --> 00:04:02,950\nit's neat for troubleshooting.\n\n68\n00:04:02,950 --> 00:04:06,470\nSo you're gonna end up\nusing a mixture of both.\n\n69\n00:04:06,470 --> 00:04:08,998\nWhen it comes to troubleshooting,\nrely on both.\n\n70\n00:04:08,998 --> 00:04:11,990\nUse whatever tool's at your disposal,\nbut keep the regular,\n\n71\n00:04:11,990 --> 00:04:15,750\nthe older vSphere Client, keep that handy,\nbecause it does come in useful.\n\n72\n00:04:16,980 --> 00:04:20,192\nAll right, so we've been using\nthe Web Client all through this show,\n\n73\n00:04:20,192 --> 00:04:23,086\nI probably don't need to spend\ntoo much time talking about it.\n\n74\n00:04:23,086 --> 00:04:25,875\nBut there's some really good stuff here\nthat I haven't really highlighted, so\n\n75\n00:04:25,875 --> 00:04:27,810\nI just want to point that out.\n\n76\n00:04:27,810 --> 00:04:32,490\nIf there are issues with the server or\nissues with data stores or issues with\n\n77\n00:04:32,490 --> 00:04:36,720\nback ups or something like that, there\nare a number of visual cues that we'll see\n\n78\n00:04:36,720 --> 00:04:40,060\nright here inside of the Web Client\nletting us know that, all right.\n\n79\n00:04:40,060 --> 00:04:43,330\nAnd you've probably noticed that on my\nservers cuz a lot of my servers that\n\n80\n00:04:43,330 --> 00:04:46,360\nI've got, and I think I'm up to\nsix hosts now for this show.\n\n81\n00:04:46,360 --> 00:04:51,060\nA lot of them I didn't follow the HCL,\nthe hardware compatibility list, and so\n\n82\n00:04:51,060 --> 00:04:53,810\nsome of them are not fully compatible.\n\n83\n00:04:53,810 --> 00:04:57,380\nAnd so every now and\nthen you'll see a little yellow triangle\n\n84\n00:04:57,380 --> 00:05:01,260\nwith an exclamation point letting me\nknow there's a warning on a server, or\n\n85\n00:05:01,260 --> 00:05:03,800\na red diamond letting me know\nthere's an error on the server.\n\n86\n00:05:03,800 --> 00:05:05,710\nSo you'll see things like that.\n\n87\n00:05:05,710 --> 00:05:09,240\nNow, actually it looks like all my servers\nare healthy right now, isn't that amazing?\n\n88\n00:05:09,240 --> 00:05:12,440\nSo the moment I criticize my servers,\nthey all start running fine.\n\n89\n00:05:12,440 --> 00:05:15,350\nMaybe that's my new technique, I'll\njust start making fun of my equipment.\n\n90\n00:05:15,350 --> 00:05:18,650\nBut you'll also see other\nthings like historical or, so\n\n91\n00:05:18,650 --> 00:05:21,500\nit might be that an alert was flagged\non one of these and it's gone now.\n\n92\n00:05:21,500 --> 00:05:24,290\nIn fact, I know there was\nan alert on Server 1 earlier.\n\n93\n00:05:24,290 --> 00:05:27,230\nAnd what you'll do is you'll see\nthose over here on your right.\n\n94\n00:05:27,230 --> 00:05:30,730\nWhen you run your various activities, this\nis really what I've been looking at here,\n\n95\n00:05:30,730 --> 00:05:31,890\nrecent tasks.\n\n96\n00:05:31,890 --> 00:05:37,045\nAll my recent tasks, what's running right\nnow, what tasks have failed recently.\n\n97\n00:05:37,045 --> 00:05:39,545\nBut down at the bottom there is another\noption and let me move it up to the top so\n\n98\n00:05:39,545 --> 00:05:40,379\nwe'll be able to see it.\n\n99\n00:05:40,379 --> 00:05:42,590\nMy head's gonna cover it\nup where it is right now.\n\n100\n00:05:44,350 --> 00:05:45,910\nSo let me just move this one up.\n\n101\n00:05:45,910 --> 00:05:49,008\nThere's another little pane down\nhere at the bottom which, well yeah,\n\n102\n00:05:49,008 --> 00:05:51,820\nhere I'll just minimize that,\ncalled Alarms.\n\n103\n00:05:51,820 --> 00:05:56,450\nAnd this will show me any alarms that my\nsystem might be experiencing right now.\n\n104\n00:05:56,450 --> 00:05:59,630\nNow, these alarms,\nonce they're triggered they stay there.\n\n105\n00:05:59,630 --> 00:06:03,930\nSo the problem that caused it might\nalready be gone, it may have fixed itself.\n\n106\n00:06:03,930 --> 00:06:05,940\nBut does that mean we can just ignore it?\n\n107\n00:06:05,940 --> 00:06:06,500\nNo.\n\n108\n00:06:06,500 --> 00:06:10,003\nA problem that comes and\ngoes is likely to come and go again.\n\n109\n00:06:10,003 --> 00:06:12,340\nAnd so we want to prevent\nit from happening any more.\n\n110\n00:06:12,340 --> 00:06:14,982\nSo all alarms need to be addressed.\n\n111\n00:06:14,982 --> 00:06:17,040\nAnd so I can see I've got two warnings.\n\n112\n00:06:17,040 --> 00:06:20,570\nI've got, or actually, I've got a full-on\nalert here, which is, VM Server 1,\n\n113\n00:06:20,570 --> 00:06:24,640\nthat's my vCenter server,\nhas a health status monitoring issue.\n\n114\n00:06:25,710 --> 00:06:29,460\nAnd then Datastore 1 has\na datastore usage on disk warning.\n\n115\n00:06:29,460 --> 00:06:31,840\nSo I've got two issues\nthat I need to deal with.\n\n116\n00:06:31,840 --> 00:06:35,200\nThis is under my All Alarms,\nI can also go to New.\n\n117\n00:06:35,200 --> 00:06:38,398\nAnd the reason we have a New column\nis that once an alarm is there,\n\n118\n00:06:38,398 --> 00:06:40,410\nit stays there until we clear it.\n\n119\n00:06:40,410 --> 00:06:43,050\nSo it's just gonna remain there forever.\n\n120\n00:06:43,050 --> 00:06:45,940\nAnd if you start to have them pile on you\nwanna be able to differentiate which ones\n\n121\n00:06:45,940 --> 00:06:49,030\nare the new ones that need to be\ndealt with versus maybe old ones that\n\n122\n00:06:49,030 --> 00:06:50,240\nare sitting there.\n\n123\n00:06:50,240 --> 00:06:55,130\nAnd then if somebody fixes the issue, they\ndo what's called acknowledging the alarm.\n\n124\n00:06:55,130 --> 00:06:57,550\nNow when you acknowledge it that\nmeans you're working on it.\n\n125\n00:06:57,550 --> 00:07:00,850\nSo we know somebody's already working on\nit, maybe we don't need to worry about it.\n\n126\n00:07:00,850 --> 00:07:02,610\nAnd that's when it moves over\nto this Acknowledge tab.\n\n127\n00:07:03,870 --> 00:07:06,550\nAnd when you fix the alarm,\nwhen you fix the problem,\n\n128\n00:07:06,550 --> 00:07:09,760\nthere will be a little button\nthat'll say Reset to Green, and\n\n129\n00:07:09,760 --> 00:07:12,710\nthat will take the alarm away and\nput the system back to healthy.\n\n130\n00:07:12,710 --> 00:07:15,890\nNow the system might already be healthy,\nit doesn't know,\n\n131\n00:07:15,890 --> 00:07:18,330\nit's just giving me that alarm and\nletting it sit there.\n\n132\n00:07:18,330 --> 00:07:20,670\nSo let's look at these\ntwo alarms that I've got.\n\n133\n00:07:20,670 --> 00:07:24,260\nLet me start with Datastore 1,\ndata usage on disk.\n\n134\n00:07:24,260 --> 00:07:27,280\nIf I click on it I get a little pop-up,\nand here I can see it's a warning,\n\n135\n00:07:27,280 --> 00:07:29,770\nit's new, it was triggered this morning.\n\n136\n00:07:29,770 --> 00:07:32,745\nOr it was triggered yesterday,\nI guess I've been ignoring it for a while.\n\n137\n00:07:32,745 --> 00:07:37,115\nAnd I can see default alarm to\nmonitor datastore disk usage,\n\n138\n00:07:37,115 --> 00:07:39,135\nall right, not very detailed.\n\n139\n00:07:39,135 --> 00:07:43,752\nBut I'm probably either running\nout of space on that datastore, or\n\n140\n00:07:43,752 --> 00:07:47,622\nit's experiencing excessive disk I/O and\nit's having performance degradation.\n\n141\n00:07:47,622 --> 00:07:49,632\nI don't really know from here, okay.\n\n142\n00:07:49,632 --> 00:07:52,728\nSo, I need to go and\ntroubleshoot that resource,\n\n143\n00:07:52,728 --> 00:07:55,542\nfind out what's going on with Datastore 1.\n\n144\n00:07:55,542 --> 00:07:58,833\nNow, that's something\nI'm gonna go through.\n\n145\n00:07:58,833 --> 00:08:01,762\nAnd we've got a section on troubleshooting\nstorage that we'll get to a little bit\n\n146\n00:08:01,762 --> 00:08:02,917\nlater so we'll tackle it then.\n\n147\n00:08:02,917 --> 00:08:06,750\nBut if I'm gonna start working on it,\nit's important that I hit acknowledge.\n\n148\n00:08:06,750 --> 00:08:10,825\nAcknowledge doesn't clear the alarm,\nit's just my way of saying hey, I see it,\n\n149\n00:08:10,825 --> 00:08:12,280\nI'm working on it.\n\n150\n00:08:12,280 --> 00:08:16,060\nAnd that way if another admin comes in and\nthey see the alarm,\n\n151\n00:08:16,060 --> 00:08:18,780\nI don't want them to start working\non it too, we'll butt heads.\n\n152\n00:08:18,780 --> 00:08:19,300\nRight?\n\n153\n00:08:19,300 --> 00:08:22,300\nSo acknowledging it is just\nthat way of saying got it.\n\n154\n00:08:22,300 --> 00:08:23,950\nI'm gonna work on it, okay?\n\n155\n00:08:23,950 --> 00:08:26,680\nAnd see how it stays here under all?\n\n156\n00:08:26,680 --> 00:08:29,400\nIt's just got a little check mark on\nit though to let it know that it's\n\n157\n00:08:29,400 --> 00:08:30,450\nbeen acknowledged.\n\n158\n00:08:30,450 --> 00:08:32,450\nI know it's there, and I'm working on it.\n\n159\n00:08:32,450 --> 00:08:34,500\nOther admins can see that,\nand they can see that.\n\n160\n00:08:34,500 --> 00:08:36,450\nAnd they can see this one up here\ndoesn't have the check mark.\n\n161\n00:08:36,450 --> 00:08:38,750\nIt hasn't been acknowledged, all right?\n\n162\n00:08:38,750 --> 00:08:41,570\nSo we can get an idea of who's\nworking on these things.\n\n163\n00:08:41,570 --> 00:08:44,240\nNow under new I can see I still\nhave this other alert, and\n\n164\n00:08:44,240 --> 00:08:47,670\nif I click on it it's a critical alert,\nso this one's bad.\n\n165\n00:08:47,670 --> 00:08:51,710\nAnd it says default alarm to monitor\nchanges in overall health status\n\n166\n00:08:51,710 --> 00:08:54,830\nsee vCenter service health in\nthe administration application for\n\n167\n00:08:54,830 --> 00:08:55,840\nmore details.\n\n168\n00:08:55,840 --> 00:08:59,140\nSo, it's not really giving\nme much detail here at all.\n\n169\n00:08:59,140 --> 00:09:02,720\nIt's telling me that I need to go and\nlook at the vCenter service health and\n\n170\n00:09:02,720 --> 00:09:06,610\nfind out what's going on there to get\na better idea of what this issue is.\n\n171\n00:09:06,610 --> 00:09:09,070\nSo I would need to go and\nthat find that and correct that.\n\n172\n00:09:09,070 --> 00:09:13,160\nNow I know what the issue is,\nI've only got one vCenter server, and\n\n173\n00:09:13,160 --> 00:09:14,720\nI rebooted it before the show.\n\n174\n00:09:14,720 --> 00:09:18,100\nSo, for\na period of time vCenter was inaccessible.\n\n175\n00:09:18,100 --> 00:09:20,150\nAnd that's why it's\nthrowing up this alert.\n\n176\n00:09:20,150 --> 00:09:22,370\nit's saying that the general\nhealth was gone.\n\n177\n00:09:22,370 --> 00:09:24,490\nMy last vCenter server was offline.\n\n178\n00:09:24,490 --> 00:09:25,580\nSo, it threw up this alert.\n\n179\n00:09:25,580 --> 00:09:30,230\nNow, I know that, so I might acknowledge\nthis, right, so now it's an acknowledged.\n\n180\n00:09:30,230 --> 00:09:35,110\nSee, now I've go no new alerts anymore,\nbut I can see the alert right here.\n\n181\n00:09:36,480 --> 00:09:37,716\nAnd now I've got my reset to green.\n\n182\n00:09:41,894 --> 00:09:44,790\nSorry, I've gotta sneeze,\nlike right on the verge there.\n\n183\n00:09:44,790 --> 00:09:47,120\nSo I've got my reset to green.\n\n184\n00:09:47,120 --> 00:09:49,180\nAnd so I can go in and I can reset that.\n\n185\n00:09:49,180 --> 00:09:50,740\nThat's the only option I've got.\n\n186\n00:09:50,740 --> 00:09:53,030\nAnd that'll say hey,\nI know what the problem was.\n\n187\n00:09:53,030 --> 00:09:54,430\nI've already fixed it and cleared it.\n\n188\n00:09:54,430 --> 00:09:55,110\nLet's reset it.\n\n189\n00:09:55,110 --> 00:09:59,080\nNow, if I didn't actually fix the problem,\nif the problem was still there.\n\n190\n00:09:59,080 --> 00:10:00,990\nWell, it's just gonna come back again.\n\n191\n00:10:00,990 --> 00:10:01,510\nRight.\n\n192\n00:10:01,510 --> 00:10:03,380\nIt's constantly monitoring and attacking.\n\n193\n00:10:03,380 --> 00:10:05,540\nSo if I was wrong,\nmaybe there was some other issue.\n\n194\n00:10:05,540 --> 00:10:08,270\nYeah, I rebooted it, but\nmaybe that was coincidental.\n\n195\n00:10:08,270 --> 00:10:08,770\nRight?\n\n196\n00:10:08,770 --> 00:10:11,260\nWell then that arrow will pop back\nup in the next few minutes and\n\n197\n00:10:11,260 --> 00:10:13,370\nI'll know I didn't fix\nwhat I thought I fixed.\n\n198\n00:10:14,470 --> 00:10:17,780\nSo, acknowledging the alarms is\nsomething that's important, but\n\n199\n00:10:17,780 --> 00:10:21,070\nthen resetting them to green is\nwhat's actually gonna clear it out.\n\n200\n00:10:21,070 --> 00:10:23,450\nAnd now when I go to all\nalarms the other one's gone.\n\n201\n00:10:23,450 --> 00:10:27,570\nSo, the alarms, they're a really good\nthing to use, to monitor your system and\n\n202\n00:10:27,570 --> 00:10:28,670\nknow when there's an issue and\n\n203\n00:10:28,670 --> 00:10:31,610\nthey point you in the right\ndirection to start troubleshooting.\n\n204\n00:10:31,610 --> 00:10:34,500\nBut they don't really tell you\nhow to troubleshoot, do they?\n\n205\n00:10:34,500 --> 00:10:38,430\nIn fact we're tackling objective number\nsix right now, which is troubleshooting.\n\n206\n00:10:38,430 --> 00:10:41,140\nObjective number seven what we're\ngoing to do in our next show\n\n207\n00:10:41,140 --> 00:10:42,540\nis monitoring and alerting.\n\n208\n00:10:42,540 --> 00:10:44,420\nSo we are going to learn how to\nset up some of these alerts for\n\n209\n00:10:44,420 --> 00:10:47,070\nourselves we can create our own alerts\nthat are a little more specific.\n\n210\n00:10:49,560 --> 00:10:53,150\nThose are some of the tools that\nwe have in the vSphere WebClient.\n\n211\n00:10:53,150 --> 00:10:56,910\nWe've also got various other reports and\nthings that are built in here, so\n\n212\n00:10:56,910 --> 00:11:02,180\nif I pick a host, like ESX server one,\nI can go into monitor,\n\n213\n00:11:02,180 --> 00:11:05,060\nand you'll have all sorts\nof monitoring right here.\n\n214\n00:11:05,060 --> 00:11:09,190\nI can look at issues and\nif I actually did have an issue with this\n\n215\n00:11:09,190 --> 00:11:11,900\nhost it would show right here\nin the list and what it was.\n\n216\n00:11:11,900 --> 00:11:14,770\nAnd if I had any triggered alarms\nthey would show up here too.\n\n217\n00:11:14,770 --> 00:11:18,700\nSo, we'll be using this a lot\nmore in the next episode.\n\n218\n00:11:18,700 --> 00:11:20,980\nBut you can also jump into performance and\n\n219\n00:11:20,980 --> 00:11:23,490\nyou can start to look at the performance\ninformation for this system.\n\n220\n00:11:23,490 --> 00:11:26,990\nNow, notice how it's kind of blank and\nnow it's saying loading and\n\n221\n00:11:26,990 --> 00:11:28,150\nit's gonna sit here.\n\n222\n00:11:28,150 --> 00:11:29,300\nAnd it takes forever.\n\n223\n00:11:29,300 --> 00:11:31,990\nThis is part of it where\nI never really use this.\n\n224\n00:11:31,990 --> 00:11:35,210\nBecause it's so\nmuch faster in the regular vSphere client\n\n225\n00:11:35,210 --> 00:11:38,480\nthat if I wanna look at performance\nreports, I'll almost always just jump over\n\n226\n00:11:38,480 --> 00:11:43,145\nto the regular vSphere client and go\nfrom there, I guess that wasn't too bad.\n\n227\n00:11:43,145 --> 00:11:46,815\nSo here's my performance report, and\nI can look at CPU loads and things.\n\n228\n00:11:46,815 --> 00:11:50,625\nAgain, as a troubleshooter, I might be\nable to look here and say, all right,\n\n229\n00:11:50,625 --> 00:11:52,525\nwell I'm maximizing them.\n\n230\n00:11:52,525 --> 00:11:56,725\nI'm utilizing all of the CPU resources\nI've got, I need to upgrade this server.\n\n231\n00:11:56,725 --> 00:11:58,165\nOr, I need to find who the problem is.\n\n232\n00:11:58,165 --> 00:12:00,945\nWho is it that's consuming\nall of this CPU utilization?\n\n233\n00:12:00,945 --> 00:12:02,495\nSo I need to look at the guest OSs and\n\n234\n00:12:02,495 --> 00:12:04,735\nfind out which one is\ngenerating the most load.\n\n235\n00:12:06,860 --> 00:12:08,780\nAnd CPU is just one of\nthe things we can monitor here.\n\n236\n00:12:08,780 --> 00:12:13,240\nYou'll also see there's memory, and\nwe've got disk utilization, disk IO,\n\n237\n00:12:13,240 --> 00:12:16,200\nthat's often times\nthe bottleneck on our servers.\n\n238\n00:12:16,200 --> 00:12:20,830\nWe've also got CPU breakdown by megahertz,\nthere's all sorts of data that's tucked\n\n239\n00:12:20,830 --> 00:12:23,850\naway in here, and network bandwidth,\nall kinda laid out.\n\n240\n00:12:26,322 --> 00:12:29,480\nAll right, we'll see it in the next show,\na lot of this can be edited and changed,\n\n241\n00:12:29,480 --> 00:12:33,010\nyou can create custom reports,\nyou can do a lot of stuff with this.\n\n242\n00:12:33,010 --> 00:12:34,610\nSo, neat things that are in here,\n\n243\n00:12:34,610 --> 00:12:38,540\none of other places that I like to go\nare the tasks and events sections.\n\n244\n00:12:38,540 --> 00:12:39,640\nIf you go to tasks,\n\n245\n00:12:39,640 --> 00:12:42,510\nyou can see any ongoing work\nthat's being done on the system.\n\n246\n00:12:42,510 --> 00:12:45,290\nIf something's broken,\nodds are somebody caused it.\n\n247\n00:12:45,290 --> 00:12:48,610\nAnd you can come into tasks and\nyou can see what was run recently.\n\n248\n00:12:48,610 --> 00:12:52,070\nMaybe somebody performed an action on\nthis host that has led to this problem.\n\n249\n00:12:52,070 --> 00:12:54,930\nMaybe they removed the data store,\nor they added a new one and\n\n250\n00:12:54,930 --> 00:12:59,020\nit's created some different kind of\nperformance metrics for the system.\n\n251\n00:12:59,020 --> 00:13:02,980\nBut under events, that's where we'll\nsee things like our alerts, alarms,\n\n252\n00:13:02,980 --> 00:13:06,230\nand other activities,\npower on events, power off events.\n\n253\n00:13:06,230 --> 00:13:10,130\nAll that stuff gets thrown in here, so\nyou'll see where I had some alarms a few\n\n254\n00:13:10,130 --> 00:13:12,790\ndays ago, actually no,\nthat's this morning.\n\n255\n00:13:12,790 --> 00:13:17,420\nSo I had some host memory\nusage alarms earlier, so\n\n256\n00:13:17,420 --> 00:13:20,410\nI've just got some informational notes on\nthose, they must have cleared themselves,\n\n257\n00:13:20,410 --> 00:13:24,220\nnot enough to trigger a full on alarm,\nbut I can see that information in here.\n\n258\n00:13:24,220 --> 00:13:25,770\nAnd I can start to make decisions,\n\n259\n00:13:25,770 --> 00:13:30,410\nI can see when systems started, when\na particular user logged into the system,\n\n260\n00:13:30,410 --> 00:13:33,850\nlot of good information here\nthat helps with troubleshooting.\n\n261\n00:13:33,850 --> 00:13:34,650\nAll right.\n\n262\n00:13:34,650 --> 00:13:36,400\nSo here's an iSCSI failure.\n\n263\n00:13:36,400 --> 00:13:40,220\nI can see it tried to connect to\nthe iSCSI initiator and it failed and\n\n264\n00:13:40,220 --> 00:13:41,070\nthat was yesterday, so\n\n265\n00:13:41,070 --> 00:13:44,430\nthat was probably during a re-boot or\nwhile I was modifying the initiator.\n\n266\n00:13:44,430 --> 00:13:47,679\nSo these are great ways to find out\nwhat's going on, on our system.\n\n267\n00:13:49,047 --> 00:13:51,877\nAll right,\nnow using the vSphere Client and\n\n268\n00:13:51,877 --> 00:13:56,170\nusing the vSphere WebClient\nare great when the system's up.\n\n269\n00:13:56,170 --> 00:13:58,670\nActually now that I say that, I haven't\n\n270\n00:13:58,670 --> 00:14:02,870\nreally used the vSphere Client at all\nduring this show, so let me show you that.\n\n271\n00:14:02,870 --> 00:14:06,860\nThe vSphere Client, if you've never\nused it, it's really easy to install.\n\n272\n00:14:06,860 --> 00:14:10,610\nYou can just point a web\nbrowser at any of your hosts.\n\n273\n00:14:10,610 --> 00:14:15,830\nSo if I point to just one of my\nVMware hosts, one of my ESXI boxes,\n\n274\n00:14:15,830 --> 00:14:18,690\nyou'll have the ability to download\nthe vSphere Client right there.\n\n275\n00:14:18,690 --> 00:14:19,510\nAll right.\n\n276\n00:14:19,510 --> 00:14:21,910\nThe vSphere client, you download it,\nand you install it.\n\n277\n00:14:21,910 --> 00:14:25,960\nIt's mostly built in Java, so\nit does have that kind of requirement.\n\n278\n00:14:25,960 --> 00:14:30,600\nBut, when you run it, it's designed to\nconnect directly with a host or directly\n\n279\n00:14:30,600 --> 00:14:35,340\nconnect to vCenter and it can manage the\nenvironment through a dedicated client.\n\n280\n00:14:35,340 --> 00:14:39,470\nThe negative of a dedicated client is that\nit becomes operating system dependent.\n\n281\n00:14:39,470 --> 00:14:42,650\nThe vSphere Client runs on Windows and\nthat's it, right?\n\n282\n00:14:42,650 --> 00:14:45,750\nVersus the vSphere WebClient\nthat will run on MacOS and\n\n283\n00:14:45,750 --> 00:14:48,320\nother systems cuz it's all browser-based.\n\n284\n00:14:48,320 --> 00:14:52,220\nBut the advantage of having a dedicated\nclient like this is that it's fast.\n\n285\n00:14:52,220 --> 00:14:58,060\nAnd so if I connect directly to a server,\nlike I'll connect to VM,\n\n286\n00:14:58,060 --> 00:15:02,110\nactually I'm pointing at VM's server\none that is my vCenter box so\n\n287\n00:15:02,110 --> 00:15:04,890\nif I connect to that I'll actually\nsee the whole vCenter environment.\n\n288\n00:15:04,890 --> 00:15:08,970\nBut if I want to connect to\na specific host like ESX- Server 1.\n\n289\n00:15:10,920 --> 00:15:11,790\nAll right.\n\n290\n00:15:11,790 --> 00:15:14,500\nI'll go and log into it,\nI'm gonna get a warning\n\n291\n00:15:14,500 --> 00:15:17,750\nthat's gonna tell me that this\nhost is managed by vCenter and so,\n\n292\n00:15:17,750 --> 00:15:19,800\nI should probably be doing\nthis through vCenter.\n\n293\n00:15:19,800 --> 00:15:23,730\nBut for troubleshooting I might want to\nlook at this host specifically and so\n\n294\n00:15:23,730 --> 00:15:24,620\nthat's what I'm going to do here.\n\n295\n00:15:24,620 --> 00:15:28,560\nI'm gonna point right at it, and I'll just\nkind of clear the warning, well that's my\n\n296\n00:15:28,560 --> 00:15:32,080\nevaluation warning, but here;s the warning\nsaying that I'm being managed by vCenter.\n\n297\n00:15:32,080 --> 00:15:33,910\nSo, I'll just say OK to that.\n\n298\n00:15:33,910 --> 00:15:37,130\nNow there's not much that I\ncan do in here that I can't do\n\n299\n00:15:37,130 --> 00:15:38,270\nfrom the vSphere WebClient.\n\n300\n00:15:38,270 --> 00:15:40,470\nSo normally we're going to go\nto that vSphere WebClient.\n\n301\n00:15:40,470 --> 00:15:43,370\nBut you'll see simple things\nlike the performance reports,\n\n302\n00:15:43,370 --> 00:15:45,560\nsee how that came up almost instantly,\nright.\n\n303\n00:15:45,560 --> 00:15:50,580\nThese things are much, much faster to be\nviewed in the dedicated vSphere Client.\n\n304\n00:15:50,580 --> 00:15:54,160\nSo being able to jump in and start to look\nat this information edit these charts and\n\n305\n00:15:54,160 --> 00:15:58,210\ndo all sorts of stuff there, really it\nis just a lot more convenient here.\n\n306\n00:15:58,210 --> 00:15:59,130\nOn the event side.\n\n307\n00:15:59,130 --> 00:16:01,792\nSee how these screens are just\npopulating lightning fast.\n\n308\n00:16:01,792 --> 00:16:05,750\nThat's one of the advantages, vCenter\naggregates all the data into a database.\n\n309\n00:16:05,750 --> 00:16:07,381\nAnd so it's doing database queries and\n\n310\n00:16:07,381 --> 00:16:10,590\nfiltering out all the other hosts\nto give you your information.\n\n311\n00:16:10,590 --> 00:16:13,120\nBut with the vSphere client,\nit's just pulling the data directly.\n\n312\n00:16:13,120 --> 00:16:13,620\nIt's right there.\n\n313\n00:16:15,040 --> 00:16:15,990\nSo we can see it now.\n\n314\n00:16:15,990 --> 00:16:20,690\nIt is the same information, it's not\nlike I'm getting a crazy benefit there.\n\n315\n00:16:20,690 --> 00:16:24,430\nBut there are somethings that\nare unique to the vSphere client.\n\n316\n00:16:24,430 --> 00:16:28,390\nSo for example,\nif I go in to one of my VMs,\n\n317\n00:16:28,390 --> 00:16:32,710\nactually, I'm not gonna see it here,\nI have to connect to vCenter.\n\n318\n00:16:32,710 --> 00:16:36,860\nIf I connect to vCenter though, I'll start\nto see little map tabs that appear here,\n\n319\n00:16:36,860 --> 00:16:39,460\nand those maps are one of the things\nI mentioned that just aren't\n\n320\n00:16:39,460 --> 00:16:42,240\npresent in the vSphere web client but\nare here.\n\n321\n00:16:42,240 --> 00:16:45,470\nSo we'll take a look a those later\nwhen we're troubleshooting iSCSI\n\n322\n00:16:45,470 --> 00:16:46,040\nand some other stuff.\n\n323\n00:16:47,710 --> 00:16:50,530\nAll right, so\nthat's basically the vSphere client.\n\n324\n00:16:50,530 --> 00:16:54,800\nIt's really not too much different\nthan what we have in vCenter.\n\n325\n00:16:56,390 --> 00:16:58,090\nAll right,\nsome of the other things we've got.\n\n326\n00:16:59,110 --> 00:17:03,090\nWhat if connectivity to the actual\nhost is down, all right?\n\n327\n00:17:03,090 --> 00:17:07,410\nIf the connectivity to the host is down,\nI'm not gonna be able to use the vSphere\n\n328\n00:17:07,410 --> 00:17:11,960\nweb client, or vSphere dedicated client,\ncuz I can't connect to the host.\n\n329\n00:17:11,960 --> 00:17:16,750\nSo in those scenarios, I need to actually\ngo to the host to do my troubleshooting.\n\n330\n00:17:16,750 --> 00:17:17,350\nAll right?\n\n331\n00:17:17,350 --> 00:17:21,980\nWell, way back in episode number\ntwo when we installed ESXi, or\n\n332\n00:17:21,980 --> 00:17:26,820\nepisode number three, I mentioned how from\nthe host you really can't do much, right?\n\n333\n00:17:26,820 --> 00:17:32,010\nWhen you install VMware,\nVSXI, you see this screen.\n\n334\n00:17:32,010 --> 00:17:34,340\nThis is what comes up after\nyou do an install and\n\n335\n00:17:34,340 --> 00:17:38,950\nit's basically just telling us,\nhey you did the install, great!\n\n336\n00:17:38,950 --> 00:17:41,450\nIf you wanna manage the server,\nbrowse to this address, right?\n\n337\n00:17:41,450 --> 00:17:43,520\nAnd here's the address go to there,\nget to work.\n\n338\n00:17:44,620 --> 00:17:46,900\nUse the vSphere client or\nuse the vSphere web client.\n\n339\n00:17:46,900 --> 00:17:48,480\nConnect to a vCenter box.\n\n340\n00:17:48,480 --> 00:17:50,340\nBut there are some things\nwe can do from here.\n\n341\n00:17:50,340 --> 00:17:54,410\nNotice at the bottom of the screen\nwe've got F12 to shut down or restart.\n\n342\n00:17:54,410 --> 00:17:57,570\nSo if I just wanna reboot the host\nI can do it with the F12 key.\n\n343\n00:17:57,570 --> 00:18:01,740\nOr over here, customize system/view logs.\n\n344\n00:18:01,740 --> 00:18:05,480\nWe actually do have some troubleshooting\nutilities right from here.\n\n345\n00:18:05,480 --> 00:18:09,030\nNow on the exam this interface\nis called the DCUI or\n\n346\n00:18:09,030 --> 00:18:11,340\nthe Direct Console User Interface.\n\n347\n00:18:11,340 --> 00:18:15,880\nIf you are sitting directly at\nthe console at that physical host,\n\n348\n00:18:15,880 --> 00:18:20,750\nyou can get to this screen and\nyou start to work with it.\n\n349\n00:18:20,750 --> 00:18:24,280\nIf I hit F2,\nit's gonna ask me to authenticate.\n\n350\n00:18:24,280 --> 00:18:26,890\nSo I'll punch in my current credentials.\n\n351\n00:18:26,890 --> 00:18:31,108\nAnd now, I'll get a somewhat limited\nmenu but basic utilities for\n\n352\n00:18:31,108 --> 00:18:33,640\ntroubleshooting this system.\n\n353\n00:18:33,640 --> 00:18:36,200\nIf I can't even reach the host,\n\n354\n00:18:36,200 --> 00:18:38,560\nit's probably network\nconnectivity that's my problem.\n\n355\n00:18:38,560 --> 00:18:41,950\nAnd so you'll notice in here,\nConfigure Management Network.\n\n356\n00:18:41,950 --> 00:18:44,260\nI can go in here and\nI can modify the management network.\n\n357\n00:18:44,260 --> 00:18:48,170\nI can change what physical adapter\nis attached to it, I can change what\n\n358\n00:18:48,170 --> 00:18:52,310\nVLAN it's on, if that's necessary,\nI can change its IP configuration.\n\n359\n00:18:52,310 --> 00:18:55,620\nMaybe its IP address is wrong,\nits subnet mask is wrong.\n\n360\n00:18:55,620 --> 00:18:58,880\nThe most common problem that I see\nwhen you lose management access,\n\n361\n00:18:58,880 --> 00:19:02,090\nis when somebody's setting up like a DV,\na distributed virtual switch.\n\n362\n00:19:02,090 --> 00:19:05,170\nIf you're setting up a DV switch you\nmight wanna move your management\n\n363\n00:19:05,170 --> 00:19:05,960\ninterface over to it.\n\n364\n00:19:05,960 --> 00:19:09,660\nAnd when you move it, oftentimes you're\nmoving to a different physical interface\n\n365\n00:19:09,660 --> 00:19:11,420\nand you could lose\nmanagement connectivity.\n\n366\n00:19:11,420 --> 00:19:15,440\nSo when that happens,\nyou might want to move your\n\n367\n00:19:15,440 --> 00:19:18,350\nmanagement interface back to\none of your other adapters.\n\n368\n00:19:18,350 --> 00:19:21,640\nAnd so that's why you've got this option\nhere to choose network adapters and\n\n369\n00:19:21,640 --> 00:19:24,890\nswitch which one the management\ninterface is attached to.\n\n370\n00:19:27,400 --> 00:19:29,480\nAnd it'll show you information\nabout whether it is connected,\n\n371\n00:19:29,480 --> 00:19:31,500\nwhat vSwitch it's on, and so on.\n\n372\n00:19:33,820 --> 00:19:36,640\nAnd you'll also see other options in here,\nbased around that.\n\n373\n00:19:36,640 --> 00:19:38,750\nYou can do your DNS configurations and\nso on.\n\n374\n00:19:38,750 --> 00:19:40,560\nSo great way to quickly correct for that.\n\n375\n00:19:43,480 --> 00:19:46,350\nYou'll also see other things in here\nlike restart the management network.\n\n376\n00:19:46,350 --> 00:19:48,820\nThe management network is built\non several different services,\n\n377\n00:19:48,820 --> 00:19:51,900\neach one doing something different,\nlike vMotion and so on.\n\n378\n00:19:51,900 --> 00:19:53,470\nThey can crash.\n\n379\n00:19:53,470 --> 00:19:55,410\nIt doesn't normally happen, but it can.\n\n380\n00:19:55,410 --> 00:19:58,090\nAnd so if that's the case, you might\nnot even need to restart the host,\n\n381\n00:19:58,090 --> 00:20:00,270\nyou might just need to restart\nthe management network.\n\n382\n00:20:00,270 --> 00:20:03,550\nThat'll leave your virtual machines alone,\nbut restart just the management piece, and\n\n383\n00:20:03,550 --> 00:20:05,848\nthat may be enough to get you\nremotely connected into it again.\n\n384\n00:20:05,848 --> 00:20:09,085\nAnd then we've got test\nmanagement connection.\n\n385\n00:20:09,085 --> 00:20:09,765\nThis is a neat one.\n\n386\n00:20:11,005 --> 00:20:13,885\nCuz if you run it,\nit'll allow you to do pings.\n\n387\n00:20:13,885 --> 00:20:15,665\nAnd these are special pings.\n\n388\n00:20:15,665 --> 00:20:17,485\nIf you connect to the host and\nyou do a ping,\n\n389\n00:20:17,485 --> 00:20:21,585\nyou're just testing whether\nthe host operating system can ping,\n\n390\n00:20:21,585 --> 00:20:25,215\nthat really scaled down version of Linux,\nwhether it can do pings.\n\n391\n00:20:25,215 --> 00:20:26,350\nThat's not your management network.\n\n392\n00:20:26,350 --> 00:20:28,645\nThat's not that's necessarily\nusing your vSwitches,\n\n393\n00:20:28,645 --> 00:20:30,760\nthat's using the physical interface ping.\n\n394\n00:20:30,760 --> 00:20:35,640\nSo here this will actually use the VM\nkernel adapter to do the ping.\n\n395\n00:20:35,640 --> 00:20:36,870\nSo it's a special one.\n\n396\n00:20:36,870 --> 00:20:39,660\nYou can have it reach out and\nping some different machines.\n\n397\n00:20:39,660 --> 00:20:43,535\nHere I've got it set to ping.1\nwhich is my default gateway, and\n\n398\n00:20:43,535 --> 00:20:45,370\n.201 which is my DNS server.\n\n399\n00:20:45,370 --> 00:20:47,500\nAnd it filled that in for\nme, it already knew it.\n\n400\n00:20:47,500 --> 00:20:49,760\nAnd it's gonna test resolving a host name.\n\n401\n00:20:49,760 --> 00:20:51,940\nNow that host name is bad,\nlet me change that.\n\n402\n00:20:51,940 --> 00:20:54,250\nSo I'll have it try and\nresolve its own host name.\n\n403\n00:20:58,160 --> 00:20:59,140\nThere we go.\n\n404\n00:20:59,140 --> 00:21:01,240\nAnd so\nyou can punch that information in there.\n\n405\n00:21:01,240 --> 00:21:05,200\nAnd when you hit a OK or hit Enter,\nit's gonna reach out and test those pings.\n\n406\n00:21:05,200 --> 00:21:07,260\nCan it ping the default gateway?\n\n407\n00:21:07,260 --> 00:21:08,180\nI got a fail.\n\n408\n00:21:08,180 --> 00:21:11,450\nCan it ping the IP address\nof the DNS server?\n\n409\n00:21:11,450 --> 00:21:12,840\nIt succeeded on that one.\n\n410\n00:21:12,840 --> 00:21:16,000\nAnd can it ping that error\nresolve it's own host name.\n\n411\n00:21:16,000 --> 00:21:17,360\nI got a success there too.\n\n412\n00:21:17,360 --> 00:21:19,910\nNow it's kind of interesting that it\nfailed on the default gateway because I\n\n413\n00:21:19,910 --> 00:21:23,650\nknow that's up otherwise I\nwouldn't be connected myself.\n\n414\n00:21:23,650 --> 00:21:27,581\nSo I might wanna rerun that\njust to be on the safe side.\n\n415\n00:21:27,581 --> 00:21:32,640\nBut, let me try that again,\n10.1.230.1, got okay that time.\n\n416\n00:21:32,640 --> 00:21:37,250\nSo you might want to rerun it, if you get\na failed result, just to see what's up.\n\n417\n00:21:37,250 --> 00:21:41,510\nRemember if it's the very first time\nyou've pinged an IP, there's an ARP\n\n418\n00:21:41,510 --> 00:21:44,723\nlookup, an Address Resolution Protocol\nlookup that has to happen.\n\n419\n00:21:44,723 --> 00:21:48,110\nAnd the ARP lookup might take\nlong enough that the ping fails.\n\n420\n00:21:48,110 --> 00:21:50,760\nSo if you get a failure the first time,\njust try it again.\n\n421\n00:21:53,000 --> 00:21:56,730\nAll right,\nyou also have network restore options.\n\n422\n00:21:56,730 --> 00:21:59,720\nIf you've done a DV switch and\nyou've moved the VM current,\n\n423\n00:21:59,720 --> 00:22:03,080\nyou've done all sorts of changes now\nyou can't even get into the system,\n\n424\n00:22:03,080 --> 00:22:04,480\nyou can choose Network Restore.\n\n425\n00:22:04,480 --> 00:22:07,640\nAnd it's pretty cool because what it does\nis it basically wipes out your virtual\n\n426\n00:22:07,640 --> 00:22:12,820\nswitches, puts it back so you've got the\nstandard vSwitch zero with the management,\n\n427\n00:22:12,820 --> 00:22:15,310\nthe VMkernel network\nadapter is attached to it.\n\n428\n00:22:15,310 --> 00:22:18,430\nAttach to the first physical adapter and\nyou're in business.\n\n429\n00:22:18,430 --> 00:22:21,290\nIt puts it back to the way it would\nhave been after a default install,\n\n430\n00:22:21,290 --> 00:22:25,950\nit doesn't delete your VMs, your VMs stay,\nyour other configurations stay, your\n\n431\n00:22:25,950 --> 00:22:30,175\nresource pools all that other stuff it's\njust the networking piece that gets reset.\n\n432\n00:22:30,175 --> 00:22:32,505\nThat should be enough to\nget you into the system.\n\n433\n00:22:32,505 --> 00:22:35,025\nAnd from there you can reconfigure it to\nput it back to the way that you want.\n\n434\n00:22:36,785 --> 00:22:39,675\nAll right, the other useful\ntroubleshooting tool that we have here is\n\n435\n00:22:39,675 --> 00:22:41,262\nview system logs.\n\n436\n00:22:41,262 --> 00:22:43,522\nWe can look at the logs on this system.\n\n437\n00:22:43,522 --> 00:22:47,162\nNow, doing it from here\nis usually my last ditch.\n\n438\n00:22:47,162 --> 00:22:50,222\nIf I can't get in the system, I just\nneed to see the logs, I do it from here.\n\n439\n00:22:50,222 --> 00:22:52,752\nBut otherwise, I'm gonna do this\nfrom the vSphere web client,\n\n440\n00:22:52,752 --> 00:22:53,872\ncuz you can pull the logs there,\n\n441\n00:22:53,872 --> 00:22:58,312\nand it's really nice cuz you can view\nthem in an easier to scroll around way.\n\n442\n00:22:58,312 --> 00:23:00,740\nBut you can also export them.\n\n443\n00:23:00,740 --> 00:23:01,410\nTech support.\n\n444\n00:23:01,410 --> 00:23:04,190\nIf you're on the phone with them, a lot of\ntimes, it will ask you to export the logs.\n\n445\n00:23:04,190 --> 00:23:05,700\nI'll show you how to do that later.\n\n446\n00:23:05,700 --> 00:23:07,230\nBut you can see,\nyou can view the different logs.\n\n447\n00:23:07,230 --> 00:23:10,010\nLike, I'll pull up my sys log here,\nand here it is.\n\n448\n00:23:10,010 --> 00:23:13,640\nAnd you can scroll through it using\nyour up and down keys or the Spacebar.\n\n449\n00:23:13,640 --> 00:23:16,390\nIt's really showing it\nusing the less command.\n\n450\n00:23:16,390 --> 00:23:20,850\nSo you can use the Spacebar\nto page forward and so on.\n\n451\n00:23:20,850 --> 00:23:23,950\nUse Q to quit, and\nit supports regular expressions so\n\n452\n00:23:23,950 --> 00:23:25,600\nyou can search for something.\n\n453\n00:23:25,600 --> 00:23:28,520\nSo if I wanna search for iSCSI.\n\n454\n00:23:29,960 --> 00:23:34,040\nPattern not found,\nlet's just try straight up SCSI.\n\n455\n00:23:34,040 --> 00:23:37,720\nApparently, I don't have any\nalerts related to SCSI, wonderful.\n\n456\n00:23:37,720 --> 00:23:40,730\nSo anyhow, I can come through and I can\nsearch through various strings just to\n\n457\n00:23:40,730 --> 00:23:45,380\nsee, maybe I wanna find something\nlike Distributed Resource Scheduler.\n\n458\n00:23:45,380 --> 00:23:46,230\nThere we go.\n\n459\n00:23:46,230 --> 00:23:47,920\nAnd it'll show me entries\nthat are based on that.\n\n460\n00:23:47,920 --> 00:23:51,390\nSo see how it's highlighted those\nlines that include DRS up top?\n\n461\n00:23:51,390 --> 00:23:56,667\nAnd so we can search and quickly find\nanything having to do with SDRS.\n\n462\n00:24:01,875 --> 00:24:05,820\nAll right, and then lastly you can just\nget your general system information.\n\n463\n00:24:05,820 --> 00:24:08,500\nIt's got things like your serial number,\nif you've got it licensed.\n\n464\n00:24:08,500 --> 00:24:09,875\nI'm still in evaluation.\n\n465\n00:24:09,875 --> 00:24:15,792\nYou can see your finger print for\nyour SSH keys or your SSL.\n\n466\n00:24:15,792 --> 00:24:19,515\nIt's all that information is\nkind of tucked away right there.\n\n467\n00:24:19,515 --> 00:24:20,153\nAll right.\n\n468\n00:24:20,153 --> 00:24:23,450\nNow there are a few other things\nwe could do from the console.\n\n469\n00:24:23,450 --> 00:24:27,521\nThese are the ones that VMware\ngenerally recommends that you use.\n\n470\n00:24:27,521 --> 00:24:31,338\nRight here from these utilities, you can\nusually get the system accessible again\n\n471\n00:24:31,338 --> 00:24:34,930\nand then jump back over to the vSphere\nWeb client, or the vSphere client, and\n\n472\n00:24:34,930 --> 00:24:36,978\nfinish your troubleshooting from there but\n\n473\n00:24:36,978 --> 00:24:39,876\nthere are some advanced things\nin here that I want to show you.\n\n474\n00:24:39,876 --> 00:24:43,416\nBut I'm running a little low on time on\nthis segment, so why don't we stop and\n\n475\n00:24:43,416 --> 00:24:46,630\ntake a break, and when we get back I'm\ngoing to show you some of the more\n\n476\n00:24:46,630 --> 00:24:48,506\nadvanced things we can do from the DC UI.\n\n477\n00:24:48,506 --> 00:24:51,025\nSo stay tuned, we'll be back after this.\n\n478\n00:24:51,025 --> 00:24:58,488\n[MUSIC]\n\n479\n00:24:58,488 --> 00:24:59,930\nAll right, welcome back everybody.\n\n480\n00:24:59,930 --> 00:25:02,826\nOkay so\nwe left off taking a look at the DCUI and\n\n481\n00:25:02,826 --> 00:25:06,191\nwe were in the what I call\nthe DCUI safe zone, right?\n\n482\n00:25:06,191 --> 00:25:09,811\nWe were looking at the utilities that\nVMware wants us to use on a regular basis,\n\n483\n00:25:09,811 --> 00:25:14,190\nyou know, for troubleshooting and access\nbut there is some even more advanced stuff\n\n484\n00:25:14,190 --> 00:25:17,440\nthat's available if you find yourself\nin a situation that requires it.\n\n485\n00:25:17,440 --> 00:25:20,810\nSo let's go back to my little server here.\n\n486\n00:25:20,810 --> 00:25:26,860\nAnd so here I am, I'm in that DCUI,\nI'm here doing whatever, right?\n\n487\n00:25:26,860 --> 00:25:29,120\nWell, it's pretty limited but\n\n488\n00:25:29,120 --> 00:25:32,840\nI know, underneath the hood this\nthing is running Linux, and\n\n489\n00:25:32,840 --> 00:25:36,440\nif I can just drop down into the Linux\nOS I could really get some stuff done.\n\n490\n00:25:36,440 --> 00:25:39,540\nI could use my advanced technical\nknowledge whatever and try and\n\n491\n00:25:39,540 --> 00:25:40,890\nfind my problem and fix it.\n\n492\n00:25:40,890 --> 00:25:41,460\nAll right.\n\n493\n00:25:41,460 --> 00:25:43,830\nAnd there are times when\nyou might need to do that.\n\n494\n00:25:43,830 --> 00:25:45,810\nSo If that's the case,\n\n495\n00:25:45,810 --> 00:25:51,160\nyou can actually drop down into\nthe Linux OS under the hood, alright?\n\n496\n00:25:51,160 --> 00:25:54,120\nThere are, when you fire this\nup sure we see this screen,\n\n497\n00:25:54,120 --> 00:25:57,120\nbut there's actually two\nconsoles that are in use.\n\n498\n00:25:57,120 --> 00:26:00,940\nThis is the main console and it's kind\nof limited in what you can do but\n\n499\n00:26:00,940 --> 00:26:08,070\nif you hit Alt+F1 on your keyboard Alt+F1\nwill take you to this screen right here.\n\n500\n00:26:08,070 --> 00:26:13,200\nAnd this, is the login console for\nthe underlying Linux OS.\n\n501\n00:26:13,200 --> 00:26:17,130\nNow, for\nsecurity reasons VMware has disabled it.\n\n502\n00:26:17,130 --> 00:26:19,710\nSo when you're trying to\naccess it you just see this,\n\n503\n00:26:19,710 --> 00:26:23,120\na little note saying I'm running\nESXi 695.5 and that's it.\n\n504\n00:26:24,210 --> 00:26:28,660\nIf I hit Alt+F2,\nit will take me back to the other console,\n\n505\n00:26:28,660 --> 00:26:34,160\nto this screen which is what we'd\nnormally see our server sitting at.\n\n506\n00:26:34,160 --> 00:26:38,107\nIf I want to access the underlying OS,\nI need to turn it on,\n\n507\n00:26:38,107 --> 00:26:40,699\nI need to enable that console access.\n\n508\n00:26:40,699 --> 00:26:46,678\nIf I hit F2, which is also\nthe brightness adapter on my laptop.\n\n509\n00:26:46,678 --> 00:26:50,955\nSo if I hit F2 I can get in here and\nin the menu of options,\n\n510\n00:26:50,955 --> 00:26:56,882\nyou'll actually see an entry in here\nthat says, troubleshooting options.\n\n511\n00:26:56,882 --> 00:27:00,420\nAnd inside of troubleshooting\nthe very first two,\n\n512\n00:27:00,420 --> 00:27:03,060\nenable the ESXI shell and enable SSH.\n\n513\n00:27:03,060 --> 00:27:04,512\nAll right, let's do that first one.\n\n514\n00:27:04,512 --> 00:27:06,730\nEnable ESXi shell.\n\n515\n00:27:06,730 --> 00:27:12,970\nThat is the underlying Linux of our shell,\nthat Alt+F1, the other console.\n\n516\n00:27:12,970 --> 00:27:15,600\nSo if I turn that on,\nyou just press Enter, and now it's on.\n\n517\n00:27:16,710 --> 00:27:21,220\nAnd now when I hit Alt+F1,\nI get a log on screen, and\n\n518\n00:27:21,220 --> 00:27:25,240\nI can log in with the credentials we set\nfor this machine during the install.\n\n519\n00:27:25,240 --> 00:27:28,250\nAnd now I'm in the underlying OS.\n\n520\n00:27:28,250 --> 00:27:29,670\nRight?\nSo, here I am,\n\n521\n00:27:29,670 --> 00:27:33,340\nif you're familiar with Linux, this is it.\n\n522\n00:27:33,340 --> 00:27:35,670\nYou can get in here, and\nyou can start to work with the system.\n\n523\n00:27:35,670 --> 00:27:38,396\nThe nice thing is you can use\nutilities that you're familiar with.\n\n524\n00:27:38,396 --> 00:27:41,252\nWell, if they're included,\nIF config is apparently not.\n\n525\n00:27:41,252 --> 00:27:45,397\nBut you can use a lot of the commands,\ncopy, move, things like that,\n\n526\n00:27:45,397 --> 00:27:49,320\nto get in and start to look at\ninformation for your system.\n\n527\n00:27:49,320 --> 00:27:52,250\nSo if I wanna access my syslog.\n\n528\n00:27:52,250 --> 00:27:56,470\nI can jump right into /bar/log and there's\nall the log files and I can parse them and\n\n529\n00:27:56,470 --> 00:28:00,990\nsearch them and use the things\nthat I'm familiar with, all right?\n\n530\n00:28:00,990 --> 00:28:05,230\nThere are some special additions\nthat VMware has made in here.\n\n531\n00:28:05,230 --> 00:28:09,550\nKeep in mind that this is extremely scaled\ndown, basically they looked at Linux and\n\n532\n00:28:09,550 --> 00:28:10,480\nthey said all right.\n\n533\n00:28:10,480 --> 00:28:13,820\nIt's great, it'll work perfect for\nour underlying OS but\n\n534\n00:28:13,820 --> 00:28:16,580\nthere's a lot of junk in here we\ndon't need and so they removed it.\n\n535\n00:28:16,580 --> 00:28:21,350\nThey removed anything that does not\ndirectly contribute to running ESXi.\n\n536\n00:28:21,350 --> 00:28:24,570\nSo a lot of commands you might be\nfamiliar with, ifconfig for example.\n\n537\n00:28:24,570 --> 00:28:29,367\nThat one is a standard command that's\nin almost every Unix distribution that\n\n538\n00:28:29,367 --> 00:28:31,447\nyou can find but they removed it.\n\n539\n00:28:31,447 --> 00:28:32,063\nWhy?\n\n540\n00:28:32,063 --> 00:28:33,166\nCuz we don't need it.\n\n541\n00:28:33,166 --> 00:28:35,267\nInstead, we have other\ncommands we can run.\n\n542\n00:28:35,267 --> 00:28:40,300\nWe don't care if the underlying Linux OS\nsees the adapters and has an interface.\n\n543\n00:28:40,300 --> 00:28:43,540\nWhat we need is our vSwitches\nto be able to see the adapters,\n\n544\n00:28:43,540 --> 00:28:46,300\nand we need our VM kernel adapters\nto be connected to physical adapter.\n\n545\n00:28:46,300 --> 00:28:47,420\nWe need that stuff.\n\n546\n00:28:47,420 --> 00:28:50,070\nAnd an underlying Linux OS\nisn't gonna understand that.\n\n547\n00:28:50,070 --> 00:28:57,060\nSo, from the command line, we actually\nhave a utility called ESXCLI, right?\n\n548\n00:28:57,060 --> 00:29:02,350\nAnd the ESXCLI utility will let\nyou go in and parse things and\n\n549\n00:29:02,350 --> 00:29:07,950\ndo work with the system from\nthe perspective of VMware vSphere ESXI.\n\n550\n00:29:07,950 --> 00:29:11,650\nNow, the guys at VMware will tell you,\nyou shouldn't be using this.\n\n551\n00:29:11,650 --> 00:29:13,640\nYou shouldn't have to use this.\n\n552\n00:29:13,640 --> 00:29:18,020\nEverything that you can do with\nthe ESXCLI is usually done more easily\n\n553\n00:29:18,020 --> 00:29:20,872\nin the vSphere Web Client or\nin the vSphere Client itself.\n\n554\n00:29:20,872 --> 00:29:21,590\nAll right.\n\n555\n00:29:21,590 --> 00:29:25,860\nSo a lot of the stuff we can do from there\nbut, if you're troubleshooting and you\n\n556\n00:29:25,860 --> 00:29:29,420\ndon't have the vSphere Web Client or the\nvSphere Client available, and all you've\n\n557\n00:29:29,420 --> 00:29:33,100\ngot is access to the direct console of\nthe host then this may be all you've got.\n\n558\n00:29:33,100 --> 00:29:35,820\nAnd so you can jump in here and do things.\n\n559\n00:29:35,820 --> 00:29:38,270\nThings like that ping that we did earlier.\n\n560\n00:29:38,270 --> 00:29:41,490\nIf I just try to do a ping from here,\nlike pinging the default gateway,\n\n561\n00:29:41,490 --> 00:29:43,040\nall right, there it goes,\n\n562\n00:29:43,040 --> 00:29:46,970\nit's pinging, it's successful but\nI mentioned that that's not good enough.\n\n563\n00:29:46,970 --> 00:29:49,540\nThat's showing that the underlying\nLinux OS can get there but\n\n564\n00:29:49,540 --> 00:29:53,910\nwhat about my VM kernel adapters,\nmy actual management interface?\n\n565\n00:29:55,000 --> 00:29:56,960\nWe have utilities like vmkping.\n\n566\n00:29:58,210 --> 00:30:03,300\nVmkping is a special ping that uses\nthe VM kernel adapter to do the ping.\n\n567\n00:30:03,300 --> 00:30:05,910\nCan your management interface get out?\n\n568\n00:30:05,910 --> 00:30:08,721\nAnd I've got the documentation for\nit pulled up.\n\n569\n00:30:08,721 --> 00:30:10,059\nLet's see, where is it.\n\n570\n00:30:10,059 --> 00:30:11,755\nHere, vmkping.\n\n571\n00:30:11,755 --> 00:30:17,261\nIt's a neat utility because it's\npinging as the management interface so\n\n572\n00:30:17,261 --> 00:30:20,723\nyou can just do vmkping and\nthe destination but\n\n573\n00:30:20,723 --> 00:30:24,480\nyou can also do things\nlike testing jumbo frames.\n\n574\n00:30:24,480 --> 00:30:27,610\nThat's what they're doing\nhere with this -D-S8972.\n\n575\n00:30:27,610 --> 00:30:32,700\nThey're setting the size of\nthe ping to be almost 9000 bites so\n\n576\n00:30:32,700 --> 00:30:34,390\nthat it'll use jumbo frames and\n\n577\n00:30:34,390 --> 00:30:37,210\nif that fails that's a good way to see\nthat the jumbo frames aren't working.\n\n578\n00:30:37,210 --> 00:30:40,600\nAnd these are things that we have\nto test from the VM kernel adapter,\n\n579\n00:30:40,600 --> 00:30:42,450\ncuz that's what's gonna be using them.\n\n580\n00:30:42,450 --> 00:30:45,460\nAll right, so\nif I go back to my host here,\n\n581\n00:30:45,460 --> 00:30:49,640\nI can run vmkping, and\nI can try and ping the gateway.\n\n582\n00:30:49,640 --> 00:30:53,540\nAnd now I'll know that it's my\nmanagement interface that's doing it and\n\n583\n00:30:53,540 --> 00:30:56,440\nnot just the underlying Linux OS or\nwhatever.\n\n584\n00:30:57,652 --> 00:31:01,160\nSo these types of utilities\nare really handy, but again,\n\n585\n00:31:01,160 --> 00:31:04,060\nthey're really not showing much that\nwe couldn't have done otherwise.\n\n586\n00:31:04,060 --> 00:31:09,290\nWe did that same ping from the regular\nDCY without having to drop to the shell.\n\n587\n00:31:09,290 --> 00:31:14,445\nIf I wanted to do things like list my\nhard drives and stuff like that, I can\n\n588\n00:31:14,445 --> 00:31:19,795\ndo esxcli Let's see if\nI can remember these.\n\n589\n00:31:19,795 --> 00:31:21,700\n[LAUGH] The commands are pretty long.\n\n590\n00:31:21,700 --> 00:31:24,058\nActually, you can kind of stumble\nthrough them if you don't remember them.\n\n591\n00:31:24,058 --> 00:31:28,000\nIf you run ESXCLI they'll give you the\nlist of the next set of commands and so\n\n592\n00:31:28,000 --> 00:31:31,510\nI might wanna be looking\nat storage information.\n\n593\n00:31:31,510 --> 00:31:33,720\nAnd then it will show like some\nof the different things here and\n\n594\n00:31:33,720 --> 00:31:38,890\nI wanna look at Core and\nthen inside of Core, you'll see Adapter.\n\n595\n00:31:39,910 --> 00:31:41,890\nAnd under Adapter, I can do List.\n\n596\n00:31:41,890 --> 00:31:45,590\nAnd so\nnow I'm gonna list my Storage Adapters.\n\n597\n00:31:45,590 --> 00:31:47,720\nSo here's the Adapters that\nI've got on this system.\n\n598\n00:31:47,720 --> 00:31:49,780\nAnd I might want to initiate a re-scan.\n\n599\n00:31:49,780 --> 00:31:53,460\nMaybe I just added some new hard drives\nand I want it to re-scan and find those.\n\n600\n00:31:53,460 --> 00:31:57,675\nI can initiate the re-scan, or\nwell apparently needs my --all.\n\n601\n00:31:59,110 --> 00:32:00,833\nAnd now it's gonna re-scan all\nthose adapters and find it.\n\n602\n00:32:00,833 --> 00:32:04,319\nNow I can do that through the GUI also,\nso I'd probably do it from there but\n\n603\n00:32:04,319 --> 00:32:06,420\nwe can initiate it here.\n\n604\n00:32:06,420 --> 00:32:09,625\nLet me give you an example of something\nyou might need to do from here.\n\n605\n00:32:09,625 --> 00:32:13,826\nMaybe you just took some hard drives\nout of one SAN, and you move them and\n\n606\n00:32:13,826 --> 00:32:17,417\nadded them as local storage\nhere in this server, all right?\n\n607\n00:32:17,417 --> 00:32:20,756\nSo then, on this server,\non this host, you go and you look and\n\n608\n00:32:20,756 --> 00:32:22,125\nyou see the hard drives.\n\n609\n00:32:22,125 --> 00:32:24,020\nThe hard drives are up just fine.\n\n610\n00:32:24,020 --> 00:32:24,890\nBut when you try and\n\n611\n00:32:24,890 --> 00:32:28,530\ncreate a data store they don't\nshow up in your list, all right?\n\n612\n00:32:28,530 --> 00:32:32,930\nOne problem we have is that, when we bring\nhard drives over from an existing system,\n\n613\n00:32:32,930 --> 00:32:36,330\nhard drives that have data on there,\nit's a polluted hard drive.\n\n614\n00:32:36,330 --> 00:32:38,310\nIt's got information on it already.\n\n615\n00:32:38,310 --> 00:32:42,060\nAnd so VMware won't overwrite it,\nor ESXi won't overwrite it,\n\n616\n00:32:42,060 --> 00:32:44,870\ncuz it doesn't want you to lose data\nthat might be sensitive, all right.\n\n617\n00:32:44,870 --> 00:32:47,570\nSo we might need to erase that drive.\n\n618\n00:32:47,570 --> 00:32:50,880\nWell If we can take the drive out and\nstick it in another machine,\n\n619\n00:32:50,880 --> 00:32:52,400\nit's easy to erase, right?\n\n620\n00:32:52,400 --> 00:32:54,860\nBut here in the host, they don't\nreally give you a way to do that,\n\n621\n00:32:54,860 --> 00:33:00,080\nto just erase the drive, so we might want\nto use something like the partition editor\n\n622\n00:33:00,080 --> 00:33:03,130\nand we've got partedUtil,\nwhich is a petition editor.\n\n623\n00:33:03,130 --> 00:33:07,440\nRight here we can reach out to our\ndrives and erase them or whatever.\n\n624\n00:33:08,898 --> 00:33:12,050\nNow one thing that it does need is\nthat it needs to know your drive ID.\n\n625\n00:33:12,050 --> 00:33:15,820\nSo we might need to get storage to list\nall of our drives that are attached\n\n626\n00:33:15,820 --> 00:33:20,030\nto be able to find the disk that\nwe wanna modify and work with it.\n\n627\n00:33:20,030 --> 00:33:22,410\nThe easiest way to do it\nthough is using the GUI.\n\n628\n00:33:22,410 --> 00:33:25,820\nYou can get the drive ID\nright from there and pull it.\n\n629\n00:33:25,820 --> 00:33:30,820\nYou can pull it from here if I can\nremember which one of these it is.\n\n630\n00:33:30,820 --> 00:33:34,614\nI guess that would be file system and\nlist.\n\n631\n00:33:34,614 --> 00:33:35,227\nWhoops.\n\n632\n00:33:35,227 --> 00:33:37,490\nIf I spell it right\nthat'll make a difference.\n\n633\n00:33:38,570 --> 00:33:39,240\nThere we go.\n\n634\n00:33:39,240 --> 00:33:41,305\nSo here it's giving my different\nvolumes that are on the system, and\n\n635\n00:33:41,305 --> 00:33:42,059\nactually you know what?\n\n636\n00:33:42,059 --> 00:33:46,020\nI don't need the volumes,\nI need the disks themselves.\n\n637\n00:33:46,020 --> 00:33:47,940\nI'm gonna have to go\na slightly different way.\n\n638\n00:33:47,940 --> 00:33:51,350\nIf you wanna see the hardware,\nthat's when you go into storage core.\n\n639\n00:33:51,350 --> 00:33:54,020\nAnd you can see things like adapters and\ndevices.\n\n640\n00:33:54,020 --> 00:33:55,750\nThat's what I want.\n\n641\n00:33:55,750 --> 00:33:57,894\nAnd then, I'll do a device list.\n\n642\n00:33:59,126 --> 00:34:00,120\nHere we go.\n\n643\n00:34:00,120 --> 00:34:02,970\nAnd so it's listing out the different\ndevices that I have attached.\n\n644\n00:34:02,970 --> 00:34:05,140\nAnd the device path is\nwhat I'm concerned with.\n\n645\n00:34:05,140 --> 00:34:08,660\nSo I can go in and I can find this\nnew device that's been added and\n\n646\n00:34:08,660 --> 00:34:10,200\nI've got more than will fit on the screen.\n\n647\n00:34:10,200 --> 00:34:12,060\nSo let me do a little more prompt.\n\n648\n00:34:12,060 --> 00:34:17,860\nSo the one I'm looking for is like,\nI have a 60gb drive attached.\n\n649\n00:34:17,860 --> 00:34:20,080\nIt's that very first one right there.\n\n650\n00:34:20,080 --> 00:34:22,620\nAnd that drive already\nhas some data on there.\n\n651\n00:34:22,620 --> 00:34:26,770\nSo I might wanna go in and erase\nthe data that's on it and clear it out.\n\n652\n00:34:26,770 --> 00:34:28,950\nSo I would need that\ninformation right there and\n\n653\n00:34:28,950 --> 00:34:32,890\nthen I could use the partedUtil to go and\nclear that data and get it out of there.\n\n654\n00:34:32,890 --> 00:34:36,030\nSo these are things that I might need to\ndrop to the command line to do it if I\n\n655\n00:34:36,030 --> 00:34:39,220\ncan't take those drives out,\nif I'm remote, all right.\n\n656\n00:34:39,220 --> 00:34:42,480\nSpeaking of remote,\nwhen we drop to the shell,\n\n657\n00:34:42,480 --> 00:34:45,540\nwell I'm sitting right here at the unit,\nright?\n\n658\n00:34:45,540 --> 00:34:49,680\nSo I can hit alt+F2 and\nit'll take me right back to here.\n\n659\n00:34:49,680 --> 00:34:51,640\nI'm sitting at the unit.\n\n660\n00:34:51,640 --> 00:34:53,050\nBut what if I'm not sitting at the unit?\n\n661\n00:34:53,050 --> 00:34:57,160\nWhat if I'm here in Florida and\nthis host is in Hawaii?\n\n662\n00:34:57,160 --> 00:34:59,100\nWell I can't just hop in the car and\ndrive over there,\n\n663\n00:34:59,100 --> 00:35:00,770\nthere's a bit of an ocean in the way.\n\n664\n00:35:00,770 --> 00:35:04,330\nSo I need something to help me\nget into that system remotely.\n\n665\n00:35:04,330 --> 00:35:06,500\nYou can turn on SSH.\n\n666\n00:35:06,500 --> 00:35:10,260\nIf you enable SSH,\nnow we can remote into it.\n\n667\n00:35:10,260 --> 00:35:15,900\nNow I'm doing it right here from the DCUI,\nif you're sitting\n\n668\n00:35:15,900 --> 00:35:21,180\nat the DCUI you probably don't need to\nenable SSH but you can do it remotely too.\n\n669\n00:35:21,180 --> 00:35:23,230\nSo we can turn it on here or\n\n670\n00:35:23,230 --> 00:35:29,105\nwe can turn it on inside of the vSphere\nWeb Client or the vSphere Client.\n\n671\n00:35:29,105 --> 00:35:33,061\nWell, let me do it in the web client.\n\n672\n00:35:33,061 --> 00:35:34,245\nSince that's the normal way.\n\n673\n00:35:34,245 --> 00:35:40,140\nI could take server six and\nI can go in to manage and settings.\n\n674\n00:35:40,140 --> 00:35:42,890\nAnd I could go down to\nthe security profile.\n\n675\n00:35:42,890 --> 00:35:46,490\nSo this is the security profile for\nthat host.\n\n676\n00:35:46,490 --> 00:35:51,260\nAnd in the security profile, if you scroll\ndown, here's the firewall settings.\n\n677\n00:35:51,260 --> 00:35:53,130\nWe looked at that in an earlier show.\n\n678\n00:35:53,130 --> 00:35:54,310\nAnd then here's the services.\n\n679\n00:35:54,310 --> 00:35:55,890\nAnd notice these two services.\n\n680\n00:35:55,890 --> 00:35:58,429\nESXi shell, and SSH.\n\n681\n00:35:58,429 --> 00:36:02,530\nYou can turn them on and\noff right here even remotely.\n\n682\n00:36:02,530 --> 00:36:07,070\nSo, I already have SSH running, but if I\ndidn't, I could choose it and hit start.\n\n683\n00:36:07,070 --> 00:36:11,920\nSo, I can turn that functionality on,\nand once it's on,\n\n684\n00:36:11,920 --> 00:36:15,340\nnow I can fire up an SSH client and\nconnect in and work with that system.\n\n685\n00:36:15,340 --> 00:36:18,151\nSo, if I switch back\nover here to my laptop,\n\n686\n00:36:21,526 --> 00:36:25,227\nI can point right over to that host.\n\n687\n00:36:27,836 --> 00:36:30,209\nAll right, and I can log in.\n\n688\n00:36:30,209 --> 00:36:36,280\nAnd now I'm logged into that host and\nI'm ready to start work, right?\n\n689\n00:36:36,280 --> 00:36:40,936\nSo I can get in here, I can view my data,\nI can access the EXSCLI command and\n\n690\n00:36:40,936 --> 00:36:45,763\nI can work with it as if I was sitting\nthere at that local console, all right?\n\n691\n00:36:45,763 --> 00:36:49,153\nNow, obviously we don't wanna leave\nthis running on a regular basis.\n\n692\n00:36:49,153 --> 00:36:53,055\nAttackers can target your host, and\nif they can get into your host,\n\n693\n00:36:53,055 --> 00:36:55,938\nthey can then start to mess with your VMs,\nright?\n\n694\n00:36:55,938 --> 00:36:59,280\nIt's a great way to kind of do\nan end run around your VM security.\n\n695\n00:36:59,280 --> 00:37:02,400\nSo securing the host is really important.\n\n696\n00:37:02,400 --> 00:37:06,585\nIf you didn't watch it, we did a security\nepisode and I mentioned one thing you\n\n697\n00:37:06,585 --> 00:37:10,211\nmight wanna do is take your SSH\nconnections right in your firewall.\n\n698\n00:37:11,836 --> 00:37:12,960\nSo if I go back up here.\n\n699\n00:37:12,960 --> 00:37:13,500\nLet me cancel that.\n\n700\n00:37:13,500 --> 00:37:15,640\nIf I go back up here to my firewall,\n\n701\n00:37:15,640 --> 00:37:21,680\nby default you'll see where the SSH\nserver is accessible from all source IPs.\n\n702\n00:37:21,680 --> 00:37:24,665\nYou might wanna edit that and change it\nto only allow your management network.\n\n703\n00:37:24,665 --> 00:37:27,615\nAnd that way an outside attacker\ncan't even gain access to it.\n\n704\n00:37:27,615 --> 00:37:31,945\nBut the best way to ensure security\nis to turn on SSH when you need it,\n\n705\n00:37:31,945 --> 00:37:34,505\nand then turn it off when you're done.\n\n706\n00:37:34,505 --> 00:37:38,025\nSo when I'm done managing the system,\nI need to go and\n\n707\n00:37:38,025 --> 00:37:40,205\nturn that option back off again.\n\n708\n00:37:40,205 --> 00:37:44,415\nSo I can go down to my services,\nedit that, and I can turn off both.\n\n709\n00:37:44,415 --> 00:37:46,285\nI can turn off the ESXi Shell.\n\n710\n00:37:46,285 --> 00:37:46,935\nStop that one.\n\n711\n00:37:48,710 --> 00:37:51,737\nAnd I can take SSH and I can stop it too.\n\n712\n00:37:55,987 --> 00:37:59,140\nWell, eventually, there we go.\n\n713\n00:37:59,140 --> 00:38:00,060\nI can stop it.\n\n714\n00:38:00,060 --> 00:38:03,820\nNow be careful when you stop it because\nthere are options in here that state\n\n715\n00:38:03,820 --> 00:38:06,520\nwhether or not it's gonna start or\nnot later on.\n\n716\n00:38:06,520 --> 00:38:10,900\nAnd see how I stopped SSH but it says,\nstart and stop with the host.\n\n717\n00:38:10,900 --> 00:38:14,133\nSo if I ever reboot the host\nSSH is gonna wake back up so\n\n718\n00:38:14,133 --> 00:38:17,085\nI probably need to say start and\nstop manually.\n\n719\n00:38:17,085 --> 00:38:20,539\nAll right, I don't want it to start\nautomatically, I'm gonna control that, so\n\n720\n00:38:20,539 --> 00:38:24,190\nI'll change it and that's what the DCUI\nwould do if you did that option there.\n\n721\n00:38:24,190 --> 00:38:26,640\nHere I'm just mimicking that same setting,\nall right?\n\n722\n00:38:26,640 --> 00:38:30,720\nAnd I'll do the same thing for\nthe shell, start and stop manually.\n\n723\n00:38:33,350 --> 00:38:36,160\nAll right, now the biggest risk here\nis that you forget that you turned them\n\n724\n00:38:36,160 --> 00:38:37,120\non, right?\n\n725\n00:38:37,120 --> 00:38:42,690\nSo maybe one day I'm trouble shooting\nthat server, and I go in here and\n\n726\n00:38:42,690 --> 00:38:45,420\nI'm in my trouble shooting, and\nsee how those are disabled now.\n\n727\n00:38:45,420 --> 00:38:48,180\nAnd so maybe I come in and I turn them\non cuz I know I'm gonna do some work.\n\n728\n00:38:48,180 --> 00:38:50,650\nSo I turn them both on,\nand I start doing work.\n\n729\n00:38:50,650 --> 00:38:54,420\nYou don't really need both of them at\nthe same time, but maybe I do that, okay?\n\n730\n00:38:54,420 --> 00:38:57,722\nWell if I forget and I leave those on,\nthey're still running,\n\n731\n00:38:57,722 --> 00:39:00,738\nthey're gonna to stay running\nas long as that host is up.\n\n732\n00:39:00,738 --> 00:39:05,300\nWell the vSphere web client it may\ntake it a moment to detect it but\n\n733\n00:39:05,300 --> 00:39:08,890\neventually it's gonna see it and\nit'll put a warning note, all right.\n\n734\n00:39:08,890 --> 00:39:13,170\nSo, as long as you've got those two\nthings turned on, it's a warning,\n\n735\n00:39:13,170 --> 00:39:14,320\nit'll show up in here.\n\n736\n00:39:14,320 --> 00:39:16,814\nAnd it'll remind you, hey,\nyou should really think about going and\n\n737\n00:39:16,814 --> 00:39:17,975\nturning those off, all right?\n\n738\n00:39:17,975 --> 00:39:20,582\nBut it doesn't scan for\nthat inventory constantly, so\n\n739\n00:39:20,582 --> 00:39:24,100\nit'll be the next time it scans it,\nwhich could happen any time.\n\n740\n00:39:24,100 --> 00:39:27,140\nAnd when that happens it'll\npick that up and see it.\n\n741\n00:39:27,140 --> 00:39:29,760\nNow I know some people\nwill override that value.\n\n742\n00:39:29,760 --> 00:39:32,480\nYou could disable the warning,\nit's not a good idea.\n\n743\n00:39:32,480 --> 00:39:35,855\nSo that is something that some people do.\n\n744\n00:39:38,851 --> 00:39:40,580\nAll right, so let's see.\n\n745\n00:39:40,580 --> 00:39:44,110\nThat is the ESXCLI,\nwe kinda got a chance to see that.\n\n746\n00:39:44,110 --> 00:39:48,550\nThe SSH, DCUI, what else do we have?\n\n747\n00:39:48,550 --> 00:39:52,580\nVMKping, oh probably the most important\n\n748\n00:39:52,580 --> 00:39:56,260\ntroubleshooting utility that I\ncould cover is actually a website.\n\n749\n00:39:56,260 --> 00:39:57,660\nLet me jump over to it here.\n\n750\n00:39:58,690 --> 00:40:00,750\nWhich is this website right here.\n\n751\n00:40:00,750 --> 00:40:02,208\nThe VMware Compatibility Guide.\n\n752\n00:40:02,208 --> 00:40:04,667\nThe hardware compatibility list.\n\n753\n00:40:04,667 --> 00:40:05,958\nSometimes it's called the HCL, right?\n\n754\n00:40:05,958 --> 00:40:08,417\nHardware compatibility list.\n\n755\n00:40:08,417 --> 00:40:11,537\nNine times out of ten,\nwhen you have problems in VMware,\n\n756\n00:40:11,537 --> 00:40:14,667\nit's almost always the result\nof not following the HCL.\n\n757\n00:40:14,667 --> 00:40:17,981\nThere are a lot of companies out\nthere that try and do things\n\n758\n00:40:17,981 --> 00:40:22,460\non the cheap,right and they implement\nSAN hardware, or HBAs, or whatever.\n\n759\n00:40:22,460 --> 00:40:25,680\nIt's just equipment they had laying\naround or they got on discount and it's\n\n760\n00:40:25,680 --> 00:40:30,620\nnot directly supported by VMware, and it\nalmost always results in unusual behavior.\n\n761\n00:40:31,770 --> 00:40:34,400\nThings might set up fine,\nthey might run okay for a while.\n\n762\n00:40:34,400 --> 00:40:37,380\nBut then you try and use some advanced\nfeature, and all of a sudden it blows it,\n\n763\n00:40:37,380 --> 00:40:38,870\nand your VMs stop.\n\n764\n00:40:38,870 --> 00:40:40,780\nThat kind of thing is not uncommon.\n\n765\n00:40:40,780 --> 00:40:44,970\nSo, one of the first things you check when\nyou have an issue is whether your hardware\n\n766\n00:40:44,970 --> 00:40:48,080\nand your configuration in\ngeneral matches VHCL, right.\n\n767\n00:40:48,080 --> 00:40:51,510\nWhen I say configuration in general,\nI mean our software versions.\n\n768\n00:40:51,510 --> 00:40:56,050\nIf I have a hardware type\nTen Virtual Machine Guest, and\n\n769\n00:40:56,050 --> 00:41:00,750\nI'm trying to run that on an EXXI\n5.0 host, it's not gonna work.\n\n770\n00:41:00,750 --> 00:41:03,090\nI'm going to have problems,\nthe VM is not going to function.\n\n771\n00:41:03,090 --> 00:41:07,260\nSo, these are problems that can easily be\ncorrected if we take the proper measures,\n\n772\n00:41:07,260 --> 00:41:09,190\nif we keep our systems up to date, right.\n\n773\n00:41:09,190 --> 00:41:13,170\nSo, checking that HCL is really important,\nthat's another one of our top tools.\n\n774\n00:41:14,490 --> 00:41:15,540\nAll right.\n\n775\n00:41:15,540 --> 00:41:19,110\nAfter, the only other tool that we\nusually even have to go to are the logs.\n\n776\n00:41:19,110 --> 00:41:19,630\nRight?\n\n777\n00:41:19,630 --> 00:41:23,130\nThe logs, I showed how we could\naccess those from the DCUI but\n\n778\n00:41:23,130 --> 00:41:28,220\nyou can access the logs via the WebSphere\nV client and the vSphere client itself.\n\n779\n00:41:28,220 --> 00:41:30,870\nSo a couple of different\nways we can get into that.\n\n780\n00:41:30,870 --> 00:41:36,165\nEvery server is maintaining it's own logs\nbut vCenter is also maintaining logs.\n\n781\n00:41:36,165 --> 00:41:41,060\nSo, when we go into our\nvCenter servers and we choose\n\n782\n00:41:41,060 --> 00:41:46,430\nour vCenter sever right here, you'll see\nthat it has its own logging there, right.\n\n783\n00:41:46,430 --> 00:41:52,510\nSo on each host and on each VM,\neach guest, each vCenter server.\n\n784\n00:41:52,510 --> 00:41:55,650\nThey've all got logs all\naccessible right through here.\n\n785\n00:41:55,650 --> 00:41:57,890\nYou just click on whatever\nit is you're monitoring.\n\n786\n00:41:57,890 --> 00:42:01,610\nYou go to the Monitor tab and\nthen you go to System Logs.\n\n787\n00:42:01,610 --> 00:42:04,350\nNow, you'll see on this\none we've got System Logs.\n\n788\n00:42:04,350 --> 00:42:06,630\nOn a lot of the other ones you'll\njust have the log browser.\n\n789\n00:42:06,630 --> 00:42:07,280\nOkay.\n\n790\n00:42:07,280 --> 00:42:10,700\nWhen we go to System Logs here, that's\ngonna show me information about VCenter,\n\n791\n00:42:10,700 --> 00:42:12,890\nand I can browse through and\nread these logs.\n\n792\n00:42:12,890 --> 00:42:17,360\nIt's considerably easier than dropping to\nthe command line and doing it from there.\n\n793\n00:42:17,360 --> 00:42:17,900\nAll right?\n\n794\n00:42:17,900 --> 00:42:20,930\nIt's also got the quick and\neasy Export Systems Logs button.\n\n795\n00:42:20,930 --> 00:42:22,430\nIt's really handy.\n\n796\n00:42:22,430 --> 00:42:24,933\nIf tech support is telling you, hey,\nI need you to get this data for\n\n797\n00:42:24,933 --> 00:42:25,527\nme so I have it.\n\n798\n00:42:25,527 --> 00:42:28,691\nAnd you'll see the different\nlogs are all available so\n\n799\n00:42:28,691 --> 00:42:32,750\nhere is my vCenter stuff I can\nview each of those right here.\n\n800\n00:42:32,750 --> 00:42:36,387\nUnder log browser though here is where\nwe can go through and start to pick\n\n801\n00:42:36,387 --> 00:42:40,097\nadditional logs and these are logs\npertaining usually to the VM itself.\n\n802\n00:42:40,097 --> 00:42:43,930\nHere, these are not gathered by default.\n\n803\n00:42:43,930 --> 00:42:46,710\nSee how it says the logs have not\nbeen retrieved for this object?\n\n804\n00:42:46,710 --> 00:42:49,430\nAnd that's because we don't normally\ngo to these logs very often.\n\n805\n00:42:49,430 --> 00:42:52,180\nBut when you're troubleshooting that\nmay be something that you need.\n\n806\n00:42:52,180 --> 00:42:55,870\nAnd so what you do is you select the\ndevice it is that you're about to monitor\n\n807\n00:42:55,870 --> 00:42:57,920\nand you hit retrieve now, okay.\n\n808\n00:42:57,920 --> 00:43:01,350\nThat's going to make it reach out\nto the system and gather the logs.\n\n809\n00:43:01,350 --> 00:43:05,190\nAnd it's going to gather a bunch\nof pieces, right the Syslogs, and\n\n810\n00:43:05,190 --> 00:43:07,460\nseveral other different log\ntypes that are being maintained.\n\n811\n00:43:07,460 --> 00:43:09,790\nAnd it's gonna bring\nthem all right back here.\n\n812\n00:43:09,790 --> 00:43:12,749\nThe coolest part about this is\nonce they're gathered together,\n\n813\n00:43:12,749 --> 00:43:14,209\nyou can export them as a bundle.\n\n814\n00:43:14,209 --> 00:43:17,361\nIt zips them up for you and\nyou can send it to tech support so\n\n815\n00:43:17,361 --> 00:43:21,070\nthey can examine it and\nthey'll have all the logs they need.\n\n816\n00:43:21,070 --> 00:43:23,830\nIt's usually a wealth of information for\nthem.\n\n817\n00:43:23,830 --> 00:43:26,690\nAnd makes it very easy for\ntech support to troubleshoot.\n\n818\n00:43:28,090 --> 00:43:31,650\nNow, gathering logs does take a moment so\nthat's gonna run.\n\n819\n00:43:31,650 --> 00:43:34,890\nI can leave that running and\ngo take a look at something else.\n\n820\n00:43:34,890 --> 00:43:38,570\nSo like if I go into one of my hosts,\nI'll take one of my physical hosts here.\n\n821\n00:43:40,470 --> 00:43:42,620\nAnd you'll see if I go under monitor,\n\n822\n00:43:43,940 --> 00:43:48,960\nthat here I don't have a System Logs link,\nbut I do have my Log Browser.\n\n823\n00:43:48,960 --> 00:43:52,400\nAnd so just the same I can go here and\nretrieve the logs for that host.\n\n824\n00:43:52,400 --> 00:43:54,290\nIn fact,\ni see a warning here on this host.\n\n825\n00:43:54,290 --> 00:43:55,760\nThat's the warning I was talking about.\n\n826\n00:43:55,760 --> 00:44:01,380\nBecause I still have ESXI Shell and\nthe SSH functions are turned on so\n\n827\n00:44:01,380 --> 00:44:04,305\nit's generating a warning now\nto let me know about that.\n\n828\n00:44:04,305 --> 00:44:09,650\nAlright, if I go under tasks, or\nevents, let me go under events.\n\n829\n00:44:11,060 --> 00:44:12,570\nWell, it'll be buried in events.\n\n830\n00:44:12,570 --> 00:44:14,580\nIt'll be faster to just go to issues.\n\n831\n00:44:14,580 --> 00:44:16,190\nUnder issues you get a filter.\n\n832\n00:44:16,190 --> 00:44:18,120\nWhich shows you what\nthe actual problems are.\n\n833\n00:44:18,120 --> 00:44:20,420\nSo if I jump over there I can see,\nhere's my warnings.\n\n834\n00:44:20,420 --> 00:44:23,630\nESXI Shell is enabled and SSH are enabled.\n\n835\n00:44:23,630 --> 00:44:25,430\nSo I'm getting a warning about that.\n\n836\n00:44:25,430 --> 00:44:27,299\nSo if you forget,\nit's easy to spot it and fix it.\n\n837\n00:44:29,806 --> 00:44:32,610\nAll right,\nwe also have the Log Browser for our VMs.\n\n838\n00:44:32,610 --> 00:44:37,530\nAnd so if I go in and I take a look at\na guest, if I go into virtual machines\n\n839\n00:44:37,530 --> 00:44:41,110\nhere and pick one of them we're gonna\ntake somebody like my FILESERVER.\n\n840\n00:44:42,920 --> 00:44:44,180\nWe can view information for them and\n\n841\n00:44:44,180 --> 00:44:47,570\nif we go under monitor we'll\nfind it buried in there.\n\n842\n00:44:47,570 --> 00:44:52,390\nSo, you'll see your storage reports,\nissues, your performance, your events and\n\n843\n00:44:52,390 --> 00:44:52,990\ntasks, right?\n\n844\n00:44:52,990 --> 00:44:54,740\nThose are your logs for the system.\n\n845\n00:44:54,740 --> 00:44:57,780\nNow it doesn't give us\na Download Log option here and\n\n846\n00:44:57,780 --> 00:45:01,310\nthe reason is we don't actually have\nvisibility into the underlying guest OS.\n\n847\n00:45:01,310 --> 00:45:03,360\nFor that you need to go into the guest OS.\n\n848\n00:45:03,360 --> 00:45:06,860\nSo if this one's running Windows I\nshould log into that VM and\n\n849\n00:45:06,860 --> 00:45:08,500\ngo into the Windows Event Viewer.\n\n850\n00:45:08,500 --> 00:45:11,500\nIf it's running Linux I should\nlog into the Linux VM and\n\n851\n00:45:11,500 --> 00:45:16,100\ngo into its System Messages, Slash r,\nSlash log and pull things out of there.\n\n852\n00:45:16,100 --> 00:45:17,960\nSo it's gonna be up to\nthe guest to ask for that.\n\n853\n00:45:17,960 --> 00:45:20,030\nBut we can still pull our Issue Log.\n\n854\n00:45:20,030 --> 00:45:24,380\nIt's got it right here, our tasks and\nour events all being maintained for\n\n855\n00:45:24,380 --> 00:45:25,070\nthat Virtual machine.\n\n856\n00:45:26,680 --> 00:45:28,810\nAll right.\nSo, those are some of the tools\n\n857\n00:45:28,810 --> 00:45:31,470\nwe're gonna use when we troubleshoot.\n\n858\n00:45:31,470 --> 00:45:35,260\nFor the rest of the show, we're gonna\nbe taking a look at things like\n\n859\n00:45:35,260 --> 00:45:37,380\nHow we would specifically\ntroubleshoot certain problems,\n\n860\n00:45:37,380 --> 00:45:40,050\nhow we would troubleshoot networking\nproblems or storage problems.\n\n861\n00:45:40,050 --> 00:45:41,420\nThose are our two main ones.\n\n862\n00:45:41,420 --> 00:45:44,490\nAnd then talk about resource utilization,\nhow we troubleshoot that.\n\n863\n00:45:44,490 --> 00:45:47,650\nSo, it's slightly different techniques for\neach one, but\n\n864\n00:45:47,650 --> 00:45:49,180\nwe're gonna be using\nthese same sets of tools.\n\n865\n00:45:49,180 --> 00:45:51,520\nSo, a lot of neat stuff is available for\nus.\n\n866\n00:45:51,520 --> 00:45:54,120\nBut this is actually a pretty\ngood stopping point.\n\n867\n00:45:54,120 --> 00:45:55,490\nLet me see if I'm missing anything.\n\n868\n00:45:56,680 --> 00:45:58,920\nI never did actually export any logs.\n\n869\n00:45:58,920 --> 00:46:00,550\nLet me go back and show you that.\n\n870\n00:46:00,550 --> 00:46:02,520\nI'll pull up my vCenter server.\n\n871\n00:46:02,520 --> 00:46:04,418\nThat should be done.\nOh, it hasn't.\n\n872\n00:46:04,418 --> 00:46:06,840\nYeah it's still retrieving.\n\n873\n00:46:06,840 --> 00:46:08,030\nMaybe I'll do that after the break.\n\n874\n00:46:08,030 --> 00:46:11,560\nSo let me put a note on here so I can\nremember to do that in the next segment.\n\n875\n00:46:11,560 --> 00:46:14,460\nSo, we'll let that continue\nto gather during the break.\n\n876\n00:46:14,460 --> 00:46:17,125\nAnd when we get back, I'll show you\nguys how we can export those and\n\n877\n00:46:17,125 --> 00:46:20,044\nsend them off and then we'll start\ntroubleshooting specific systems.\n\n878\n00:46:20,044 --> 00:46:21,582\nSo, stay tuned.\n\n879\n00:46:21,582 --> 00:46:22,958\nWe'll be back after this.\n\n880\n00:46:22,958 --> 00:46:30,284\n[MUSIC]\n\n881\n00:46:30,284 --> 00:46:30,864\nAll right.\n\n882\n00:46:30,864 --> 00:46:32,640\nWelcome back, everybody.\n\n883\n00:46:32,640 --> 00:46:37,330\nSo before the break I took one of my\nservers, and I went to harvest the logs on\n\n884\n00:46:37,330 --> 00:46:39,280\nit so that we could get those to\nwhere we could look at them or\n\n885\n00:46:39,280 --> 00:46:40,510\nturn them over to tech support.\n\n886\n00:46:40,510 --> 00:46:42,090\nAnd that's really what I was getting at.\n\n887\n00:46:42,090 --> 00:46:45,870\nI wanted to be able to export those\nlogs to send them over to Tech Support.\n\n888\n00:46:45,870 --> 00:46:47,750\nSo it finished refreshing those.\n\n889\n00:46:47,750 --> 00:46:49,290\nLet me just jump over here.\n\n890\n00:46:49,290 --> 00:46:53,070\nAnd so now I can see it's downloaded\nthe various logs in my Log Browser so\n\n891\n00:46:53,070 --> 00:46:57,400\nI can take a look at things like my\nsingle sign on AdminServer and so on.\n\n892\n00:46:57,400 --> 00:46:59,450\nAnd I can look at what is going on.\n\n893\n00:46:59,450 --> 00:47:03,150\nSo you've got all that information and\ntucked away right here.\n\n894\n00:47:03,150 --> 00:47:06,640\nNow what's happened is that\nvCenter has taken that data and\n\n895\n00:47:06,640 --> 00:47:08,650\nstuck it in its Internal Database.\n\n896\n00:47:08,650 --> 00:47:11,650\nSo, even if this server,\nthis is my vCenter server, but\n\n897\n00:47:11,650 --> 00:47:14,240\nif these are Host logs and\nthe host goes offline I\n\n898\n00:47:14,240 --> 00:47:18,420\nwould still have access to those logs\ncuz they're stored in the Database.\n\n899\n00:47:18,420 --> 00:47:22,230\nAnd now what I can do is I can go\nup here to Action and Export, and\n\n900\n00:47:22,230 --> 00:47:24,680\nthat's where we will be able\nto export those into a file.\n\n901\n00:47:24,680 --> 00:47:26,660\nNow it gives us two choices.\n\n902\n00:47:26,660 --> 00:47:31,800\nChoice number one is just to export\nthe log that I am looking at right now,\n\n903\n00:47:31,800 --> 00:47:37,050\nbut choice two is the cool one,\nit'll export the VM support bundle.\n\n904\n00:47:37,050 --> 00:47:40,150\nThat is what the VMware tech\nsupport guys are gonna ask for.\n\n905\n00:47:41,260 --> 00:47:45,150\nWhen you're having an issue with a server\nand you call up VMware for tech support\n\n906\n00:47:45,150 --> 00:47:48,790\nand you're walking through it,\nthey'll often ask for that support bundle.\n\n907\n00:47:48,790 --> 00:47:52,266\nWhat happens is,\nthe server will take all the logs,\n\n908\n00:47:52,266 --> 00:47:55,750\nzip them up to compress them and\nput them in one file.\n\n909\n00:47:55,750 --> 00:47:59,375\nAnd you can then transmit it over to the\nVMware tech support guys to look at it.\n\n910\n00:47:59,375 --> 00:48:03,574\nNow, If it's just for you to look at, you\nprobably don't need them bundled because\n\n911\n00:48:03,574 --> 00:48:05,420\nyou can just see them all right here.\n\n912\n00:48:05,420 --> 00:48:07,292\nNot a whole lot of need to export them.\n\n913\n00:48:07,292 --> 00:48:10,754\nSo exporting really is one of those\nthings that we use- When we're talking to\n\n914\n00:48:10,754 --> 00:48:11,458\ntech support.\n\n915\n00:48:11,458 --> 00:48:15,533\nNow just be aware that when we're\nlooking at the log browser options,\n\n916\n00:48:15,533 --> 00:48:19,240\nthat's what's on the hosts,\nand on the vCenter server.\n\n917\n00:48:19,240 --> 00:48:22,980\nWe have the export option\nright here under Actions, but\n\n918\n00:48:22,980 --> 00:48:26,600\nunder System Logs,\nwhich we have on our vCenter server.\n\n919\n00:48:26,600 --> 00:48:30,030\nYou've got a nice big Export System Logs\nbutton right there and\n\n920\n00:48:30,030 --> 00:48:32,240\nwe can export that and dump it out.\n\n921\n00:48:32,240 --> 00:48:35,220\nNow, when you export\nfrom the vCenter Server\n\n922\n00:48:35,220 --> 00:48:40,520\nyou'll have the choice to export logs for\nall of the managed hosts inside of it.\n\n923\n00:48:40,520 --> 00:48:43,130\nSo you could actually do\na dump of the logs across\n\n924\n00:48:43,130 --> 00:48:44,840\nall of your systems if you want.\n\n925\n00:48:44,840 --> 00:48:46,890\nYou could really pull out a lot of data.\n\n926\n00:48:46,890 --> 00:48:51,780\nIt is a lot of data but if you're dealing\nwith tech support they might wanna\n\n927\n00:48:51,780 --> 00:48:54,080\ncorrelate information between systems.\n\n928\n00:48:54,080 --> 00:48:57,190\nAnd so that's why you might want\nto pull from more than one.\n\n929\n00:48:57,190 --> 00:48:58,400\nWhich speaking of correlation,\n\n930\n00:48:59,510 --> 00:49:03,500\nway back in one of the earlier episodes I\ntalked about network time protocol, NTP,\n\n931\n00:49:03,500 --> 00:49:08,290\nand how important it was to synchronize\nthe clocks across our hosts and our VMs.\n\n932\n00:49:08,290 --> 00:49:11,298\nAnd one of the main reasons for that is so\nthat we can correlate log events.\n\n933\n00:49:11,298 --> 00:49:13,446\nSo that if I see an event\nhappen on the host,\n\n934\n00:49:13,446 --> 00:49:17,269\nI should be able to find where that\ncorresponds to an event happening on a VM,\n\n935\n00:49:17,269 --> 00:49:21,120\non a guest but if the clocks are wrong\nthen it's not gonna match up.\n\n936\n00:49:21,120 --> 00:49:24,960\nAnd you'll notice, when I was here\nin my log browser under Actions,\n\n937\n00:49:24,960 --> 00:49:27,980\nwe actually have\nthe option to adjust time.\n\n938\n00:49:27,980 --> 00:49:30,800\nAnd that's so we can go through and\ncorrect problems like that.\n\n939\n00:49:30,800 --> 00:49:34,730\nIf the clock was off by a minute,\nI might want to add one minute to\n\n940\n00:49:34,730 --> 00:49:39,090\nall of the log time stamps to get this\none in line with the other system.\n\n941\n00:49:39,090 --> 00:49:42,300\nIf you're using NTP and your clocks\nare synced, you should never need that\n\n942\n00:49:42,300 --> 00:49:46,580\nfeature, but if your clocks are out of\nsync, you can fix it, and this is a way to\n\n943\n00:49:46,580 --> 00:49:49,730\ngo back and fix the past, to get those\nsystems put back the way they should be.\n\n944\n00:49:52,630 --> 00:49:53,690\nAll right.\n\n945\n00:49:53,690 --> 00:49:55,980\nSo that's really all I've got on logs.\n\n946\n00:49:55,980 --> 00:49:57,460\nThere's not a whole heck of a lot there.\n\n947\n00:49:57,460 --> 00:50:00,360\nJust remember the two\ndifferent places to export.\n\n948\n00:50:00,360 --> 00:50:02,920\nIf you don't see it under Actions\nthen it may be that you've got a nice\n\n949\n00:50:02,920 --> 00:50:04,040\nbig Export button right there.\n\n950\n00:50:04,040 --> 00:50:05,320\nJust be aware of that difference.\n\n951\n00:50:06,530 --> 00:50:09,480\nAll right, so what I wanna do for the\nremainder of the show is I wanna look at\n\n952\n00:50:09,480 --> 00:50:13,150\nparticular areas of our system that\nwe might be having a problem, and\n\n953\n00:50:13,150 --> 00:50:15,510\nlook at some of the ways\nto troubleshoot it.\n\n954\n00:50:15,510 --> 00:50:17,280\nLet's start with networking.\n\n955\n00:50:17,280 --> 00:50:21,130\nOn the networking side,\nthis is usually pretty easy.\n\n956\n00:50:21,130 --> 00:50:22,370\nI mentioned the HCL,\n\n957\n00:50:22,370 --> 00:50:25,600\nthe hardware compatibility list is one\nof the first things we should look at.\n\n958\n00:50:25,600 --> 00:50:30,430\nWell, VMWare support of network\nadapters is really impressive.\n\n959\n00:50:30,430 --> 00:50:36,190\nIt's a wide list of adapters but,\nnot every adapter is supported.\n\n960\n00:50:36,190 --> 00:50:37,840\nSo if this is a fresh install and\n\n961\n00:50:37,840 --> 00:50:40,480\nthe adapters aren't working,\nit may just not work.\n\n962\n00:50:40,480 --> 00:50:44,130\nYou might remember from the VDP\nepisode where I was setting up\n\n963\n00:50:44,130 --> 00:50:44,940\nVMWare data protection.\n\n964\n00:50:44,940 --> 00:50:46,900\nI had to build a whole new box for that,\n\n965\n00:50:46,900 --> 00:50:49,970\ncuz I didn't have enough\nresources in my main host.\n\n966\n00:50:49,970 --> 00:50:53,130\nSo I went and I grabbed another machine\nwe had here at the office to use for it.\n\n967\n00:50:53,130 --> 00:50:56,820\nI'm pointing over here, cuz it's actually\noff set but, I went and grabbed this other\n\n968\n00:50:56,820 --> 00:51:00,518\nbox and I installed ESXI on it and\nit didn't recognize any network adapters.\n\n969\n00:51:00,518 --> 00:51:03,730\nThe adapter that was in it it was\nan integrated broadcom adapter,\n\n970\n00:51:03,730 --> 00:51:06,190\nand the SSI didn't support it.\n\n971\n00:51:06,190 --> 00:51:09,080\nSo, I had to go and grab and\nIntel E1000 that we had,\n\n972\n00:51:09,080 --> 00:51:11,840\nwhich is supported by everybody,\nand throw that in the box.\n\n973\n00:51:11,840 --> 00:51:14,060\nIt recognized it, worked just fine.\n\n974\n00:51:14,060 --> 00:51:17,630\nSo checking the hardware compatibility\nlist, that's usually the first thing I go\n\n975\n00:51:17,630 --> 00:51:23,140\nto but HCL issues, those usually\nturn up at installation time, right?\n\n976\n00:51:23,140 --> 00:51:26,560\nSo what happens with issues like my\n\n977\n00:51:26,560 --> 00:51:28,260\nnetwork connection just disappeared,\nright?\n\n978\n00:51:28,260 --> 00:51:29,120\nWhat happened?\n\n979\n00:51:29,120 --> 00:51:31,410\nWell you go through your\nstandard network troubleshooting.\n\n980\n00:51:31,410 --> 00:51:33,460\nI usually start with\nthe simple things first.\n\n981\n00:51:33,460 --> 00:51:34,710\nDo I have a link light, right?\n\n982\n00:51:34,710 --> 00:51:35,490\nGo and look and see.\n\n983\n00:51:35,490 --> 00:51:38,100\nIs there a network cable\nrunning to the system?\n\n984\n00:51:38,100 --> 00:51:40,810\nAnd is there a link light\non the network cable?\n\n985\n00:51:40,810 --> 00:51:44,280\nBut after that, that's really all\nwe look for on the physical side,\n\n986\n00:51:44,280 --> 00:51:45,280\nif you've got a link light.\n\n987\n00:51:45,280 --> 00:51:47,170\nSo then we go to the software side and\n\n988\n00:51:47,170 --> 00:51:51,180\non the software side it's our\nvSwitches that we want to look at.\n\n989\n00:51:51,180 --> 00:51:55,200\nEven if our physical network adapter\nis detected and working properly,\n\n990\n00:51:55,200 --> 00:51:58,240\nwe're not gonna be able to use it\nunless it's properly configured and\n\n991\n00:51:58,240 --> 00:51:59,730\nattached to a vSwitch.\n\n992\n00:51:59,730 --> 00:52:03,900\nAnd our VMs, our guests, they won't see\nit unless they're properly configured and\n\n993\n00:52:03,900 --> 00:52:05,228\nattached to a vSwitch.\n\n994\n00:52:05,228 --> 00:52:07,190\nSo the vSwitch becomes\nthat common element and\n\n995\n00:52:07,190 --> 00:52:09,250\nthat's where we start our troubleshooting.\n\n996\n00:52:09,250 --> 00:52:12,620\nSo let's look at some of the components\nthat we've got available there.\n\n997\n00:52:12,620 --> 00:52:16,995\nKeep in mind, if it's a distributed\nvSwitch versus a regular vSwitch,\n\n998\n00:52:16,995 --> 00:52:20,920\nregular vSwitch, the configuration\nis entirely on one host but\n\n999\n00:52:20,920 --> 00:52:24,690\na distributed vSwitch,\nthat would be spread across many hosts.\n\n1000\n00:52:24,690 --> 00:52:29,240\nAnd so on a dvSwitch the most common\nproblem is we have differing hardware\n\n1001\n00:52:29,240 --> 00:52:32,920\nbetween your hosts and it doesn't pick\nup the physical adapter properly but\n\n1002\n00:52:32,920 --> 00:52:35,390\nthose are usually detected at setup time.\n\n1003\n00:52:35,390 --> 00:52:40,310\nAll right so I'm just gonna go to\na host here and I'll go to manage and\n\n1004\n00:52:40,310 --> 00:52:44,100\nnetworking and here I can see\nthe virtual switches that I've got.\n\n1005\n00:52:44,100 --> 00:52:47,600\nThe system creates on vSwitch by default,\nvSwitch zero and\n\n1006\n00:52:47,600 --> 00:52:52,300\nvSwitch zero we know is set up right\nbecause, well, it was created at install.\n\n1007\n00:52:52,300 --> 00:52:55,920\nIt's kind of hard for the default\nconfig to be messed up, all right, but\n\n1008\n00:52:55,920 --> 00:52:59,030\nwe might add additional Switches and\nwe'll see them linked up down here.\n\n1009\n00:52:59,030 --> 00:53:01,000\nNow I picked a host with\nno virtual machines.\n\n1010\n00:53:01,000 --> 00:53:03,440\nLet me pick a host that\nhas some VMs on it.\n\n1011\n00:53:05,540 --> 00:53:09,486\nWe'll find one in here so we can actually\nsee something a little bit better here,\n\n1012\n00:53:09,486 --> 00:53:13,041\nthis guy, it's got, AppWeb1 is on it,\nand plugged into a port group.\n\n1013\n00:53:13,041 --> 00:53:16,342\nNow right here just from\nlooking at this map.\n\n1014\n00:53:16,342 --> 00:53:20,405\nLet me take this full screen.\n\n1015\n00:53:20,405 --> 00:53:21,957\nGive me a little more room in here.\n\n1016\n00:53:21,957 --> 00:53:25,962\nSo, right here when we look at this we\ncan see app web one is plugged into this\n\n1017\n00:53:25,962 --> 00:53:27,871\nvSwitch through this port group and\n\n1018\n00:53:27,871 --> 00:53:32,025\nit's got a little orange line showing\nit's linked to the physical adapter.\n\n1019\n00:53:32,025 --> 00:53:37,270\nSo things look like they're set up pretty\nmuch the way that I want them to be.\n\n1020\n00:53:37,270 --> 00:53:41,100\nSo that's pretty good,\nbut notice the port color.\n\n1021\n00:53:41,100 --> 00:53:44,230\nPort coloring gives us a quick,\neasy way to determine whether or\n\n1022\n00:53:44,230 --> 00:53:46,370\nnot there's a problem\nwith our configuration.\n\n1023\n00:53:46,370 --> 00:53:50,354\nAnd I can notice right here that\nthe port color for AppWeb1 is white, and\n\n1024\n00:53:50,354 --> 00:53:54,560\nthat means while it is plugged in,\nit's not actually turned on.\n\n1025\n00:53:54,560 --> 00:53:55,910\nSo what could lead to that?\n\n1026\n00:53:55,910 --> 00:53:57,380\nWell usually it's one of two things.\n\n1027\n00:53:57,380 --> 00:54:01,540\nEither one, the adaptor's been\ndisabled somehow inside of the VM or\n\n1028\n00:54:01,540 --> 00:54:05,015\ntwo, the VM's just not powered on, and\nthat's actually what my problem is here.\n\n1029\n00:54:05,015 --> 00:54:07,250\nAppWeb1 is not running right now.\n\n1030\n00:54:07,250 --> 00:54:12,400\nSo I would need to power that one on\nto actually see what's going on there.\n\n1031\n00:54:12,400 --> 00:54:14,070\nSo let me do that,\nlet's power that back on.\n\n1032\n00:54:16,580 --> 00:54:18,210\nSo I'm going to power it on.\n\n1033\n00:54:18,210 --> 00:54:22,100\nNow if App Web 1 is not able\nto communicate on my network,\n\n1034\n00:54:22,100 --> 00:54:23,650\nit could be several different things.\n\n1035\n00:54:23,650 --> 00:54:25,680\nI just need to go through and verify this.\n\n1036\n00:54:25,680 --> 00:54:28,188\nOne, it could be that I don't\nhave a physical adapter attached.\n\n1037\n00:54:28,188 --> 00:54:30,320\nRight, so\nthat's one thing I want to double check.\n\n1038\n00:54:30,320 --> 00:54:33,560\nIt's pretty easy to see whether you've\ngot a physical adapter attached.\n\n1039\n00:54:33,560 --> 00:54:37,640\nTwo, it could be that AppWeb1 is\nplugged into the wrong port group.\n\n1040\n00:54:37,640 --> 00:54:40,580\nOn a default install you've\nonly got one port group but\n\n1041\n00:54:40,580 --> 00:54:43,200\nyou can create more based on your needs.\n\n1042\n00:54:43,200 --> 00:54:45,920\nSo when you look up here at\nthese different options for\n\n1043\n00:54:45,920 --> 00:54:50,130\nwhat you're adding in, you can go in and\nyou can create additional port groups for\n\n1044\n00:54:50,130 --> 00:54:52,440\nyour VMs and\nsome of them might even be isolated.\n\n1045\n00:54:52,440 --> 00:54:55,480\nYou might not have a port group attached\nto a physical adapter if you're trying to\n\n1046\n00:54:55,480 --> 00:54:57,060\ncreate an isolated network.\n\n1047\n00:54:57,060 --> 00:55:00,890\nSo you'll see that and you might need to\nmove the port group that that web server\n\n1048\n00:55:00,890 --> 00:55:03,280\nis in, that app web one is in.\n\n1049\n00:55:03,280 --> 00:55:05,540\nAnd, you know, that's not a big deal.\n\n1050\n00:55:05,540 --> 00:55:07,820\nIf I go into related objects and\npick app web one,\n\n1051\n00:55:07,820 --> 00:55:12,128\nall we have to do is edit\nthe settings of that virtual machine.\n\n1052\n00:55:12,128 --> 00:55:16,830\nSo, here's AppWeb1, and\nif I go into its settings I can\n\n1053\n00:55:16,830 --> 00:55:20,590\ntake a look at its network configuration,\nand plug it into a different port group.\n\n1054\n00:55:21,720 --> 00:55:23,230\nWell, eventually I can.\n\n1055\n00:55:23,230 --> 00:55:24,130\nThere we go.\n\n1056\n00:55:24,130 --> 00:55:26,430\nSo here's my network\nadapter one right here.\n\n1057\n00:55:26,430 --> 00:55:30,110\nIt's plugged into VM Network and,\nif there were other port groups,\n\n1058\n00:55:30,110 --> 00:55:31,870\nI could choose in between them.\n\n1059\n00:55:31,870 --> 00:55:35,220\nYou can do that while the virtual\nmachine is on or off, doesn't matter.\n\n1060\n00:55:35,220 --> 00:55:38,436\nI also mentioned the network\ncard being disabled in the VM.\n\n1061\n00:55:38,436 --> 00:55:40,670\nYou'll see that option right here,\nconnect it.\n\n1062\n00:55:40,670 --> 00:55:41,230\nAll right.\n\n1063\n00:55:41,230 --> 00:55:45,970\nIf I uncheck that, even though AppWeb1\nis plugged into the VM network,\n\n1064\n00:55:45,970 --> 00:55:49,330\nit's not connected so\nit's as if it doesn't have a link light.\n\n1065\n00:55:49,330 --> 00:55:53,149\nSo that's an example of where the problem\nmight be stemming from the virtual\n\n1066\n00:55:53,149 --> 00:55:55,189\nmachine and not from the vSwitch at all.\n\n1067\n00:55:58,529 --> 00:55:59,600\nAll right.\n\n1068\n00:55:59,600 --> 00:56:01,170\nFew other things that\nwe can do to look at.\n\n1069\n00:56:01,170 --> 00:56:03,958\nYou know, always check your\nvirtual machine configuration.\n\n1070\n00:56:03,958 --> 00:56:07,230\nThe vSwitch itself does have some\nconfiguration values you might\n\n1071\n00:56:07,230 --> 00:56:08,370\nwanna look at.\n\n1072\n00:56:08,370 --> 00:56:12,458\nA common one that I see, a common mistake,\nis the VLAN configuration.\n\n1073\n00:56:12,458 --> 00:56:15,129\nIf you're using\nVirtual Local Area Networks,\n\n1074\n00:56:15,129 --> 00:56:18,820\nthere are several pieces that come\ninto play for VLAN's to work.\n\n1075\n00:56:18,820 --> 00:56:23,600\nWhen we go into our network configuration,\nand into our vSwitch,\n\n1076\n00:56:23,600 --> 00:56:27,290\nI'll just take vSwitch zero here,\nand edit it.\n\n1077\n00:56:28,500 --> 00:56:33,170\nWhen you create a vSwitch, you'll see some\nof the different options that it's got.\n\n1078\n00:56:33,170 --> 00:56:36,340\nAnd its got things like security,\ntraffic shaping, teaming and\n\n1079\n00:56:36,340 --> 00:56:39,360\nfail over, each of these\ndifferent things that we define.\n\n1080\n00:56:39,360 --> 00:56:42,550\nEach of these can create\nsituations that cause,\n\n1081\n00:56:42,550 --> 00:56:44,480\nthe network not to work as expected.\n\n1082\n00:56:45,495 --> 00:56:50,470\nVLAN's is a great example where\nwhen we create a port group, so\n\n1083\n00:56:50,470 --> 00:56:53,169\nif I take like VM network here and\nedit that.\n\n1084\n00:56:54,230 --> 00:56:57,250\nI can assign a VLAN right here.\n\n1085\n00:56:57,250 --> 00:57:02,022\nIf I don't assign a VLAN, then\nthe traffic is what's called untagged.\n\n1086\n00:57:02,022 --> 00:57:05,290\nIt's gonna hit the virtual\nswitch untagged,\n\n1087\n00:57:05,290 --> 00:57:08,560\nthe virtual switch is gonna send it\nto the physical adapter untagged,\n\n1088\n00:57:08,560 --> 00:57:12,360\nand it's gonna go to your\nphysical switch untagged.\n\n1089\n00:57:12,360 --> 00:57:17,310\nNow if your physical switch has the port\nassigned to a particular VLAN, and\n\n1090\n00:57:17,310 --> 00:57:20,570\nit receives this untagged traffic.\n\n1091\n00:57:20,570 --> 00:57:23,830\nIt will do one of two things,\nit'll either throw the traffic away or\n\n1092\n00:57:23,830 --> 00:57:26,660\nit'll move that traffic to the wrong VLAN.\n\n1093\n00:57:26,660 --> 00:57:30,200\nAnd so it looks like your traffic's not\ngoing anywhere, it looks like your virtual\n\n1094\n00:57:30,200 --> 00:57:33,660\nmachine has no network connectivity,\nbut in reality it does,\n\n1095\n00:57:33,660 --> 00:57:37,200\nit's just once it gets to the switch the\nswitch is sending it to the wrong place.\n\n1096\n00:57:37,200 --> 00:57:40,628\nSo we need to make sure that\nthat VLAN assignment is correct.\n\n1097\n00:57:40,628 --> 00:57:45,530\nThe vSwitch, itself,\nwill recognize all of the VLAN's, but\n\n1098\n00:57:45,530 --> 00:57:48,640\nwe needed on the port group\nwhich VLAN it's attached to.\n\n1099\n00:57:48,640 --> 00:57:50,430\nAnd, if we want to support\nmore than one VLAN,\n\n1100\n00:57:50,430 --> 00:57:53,320\nwe need to create more\nthan one port group.\n\n1101\n00:57:53,320 --> 00:57:55,300\nYou can do it all on one vSwitch,\nif you want.\n\n1102\n00:57:55,300 --> 00:57:56,680\nYou'll have more than one port group for\n\n1103\n00:57:56,680 --> 00:58:00,710\neach VLAN that's being represented,\nall right.\n\n1104\n00:58:00,710 --> 00:58:03,750\nAnother problem that can arise,\nis with traffic shaping.\n\n1105\n00:58:03,750 --> 00:58:08,930\nIf you don't understand how traffic\nshaping works, you shouldn't implement it.\n\n1106\n00:58:08,930 --> 00:58:11,830\nBut if you do, you can implement it and\nit really helps out.\n\n1107\n00:58:11,830 --> 00:58:15,960\nYou have to control\nthe networks resources that\n\n1108\n00:58:15,960 --> 00:58:18,720\ncan be exploited by a virtual machine.\n\n1109\n00:58:18,720 --> 00:58:22,700\nNow in most environments we want our\nVM's to have as much access as possible.\n\n1110\n00:58:22,700 --> 00:58:27,900\nBut if you start putting limits in, and\nif you put the limits in to strict.\n\n1111\n00:58:27,900 --> 00:58:30,260\nThen it can it look like you've\nlost network connectivity,\n\n1112\n00:58:30,260 --> 00:58:33,960\nwhen in reality you are just\nexceeding your available resources.\n\n1113\n00:58:33,960 --> 00:58:36,100\nWe definitely have to keep\nan eye on this stuff.\n\n1114\n00:58:36,100 --> 00:58:38,050\nYou average bandwidth, peak bandwidth, and\n\n1115\n00:58:38,050 --> 00:58:43,270\nburst size, all of these things\ncan result in you getting capped.\n\n1116\n00:58:43,270 --> 00:58:44,880\nThen you start dropping packets.\n\n1117\n00:58:44,880 --> 00:58:46,950\nIt looks like your network\nconnection is faulty,\n\n1118\n00:58:46,950 --> 00:58:48,880\nwhen in reality you are just\nhitting these limits.\n\n1119\n00:58:48,880 --> 00:58:50,730\nDefinitely double check these.\n\n1120\n00:58:50,730 --> 00:58:52,000\nThe hardest part about checking for\n\n1121\n00:58:52,000 --> 00:58:55,900\ntraffic shaping, is it can be\ndefined in so many places, okay.\n\n1122\n00:58:55,900 --> 00:58:59,320\nIt can be defined,\nright here on the port group.\n\n1123\n00:58:59,320 --> 00:59:02,300\nIt can be defined on the VM.\n\n1124\n00:59:02,300 --> 00:59:06,990\nIt can also be defined\non the vSwitch up here.\n\n1125\n00:59:06,990 --> 00:59:10,110\nSeveral different places that\nwe can do traffic shaping, and\n\n1126\n00:59:10,110 --> 00:59:11,770\nthey all kind of build off of each other.\n\n1127\n00:59:11,770 --> 00:59:14,550\nTroubleshooting that one is really\ntough cuz we have to go to all.\n\n1128\n00:59:14,550 --> 00:59:15,890\nOf those different places.\n\n1129\n00:59:15,890 --> 00:59:18,130\nThe VM, the port group, the vSwitch.\n\n1130\n00:59:20,570 --> 00:59:24,780\nAnother good one is if you're doing iSCSI,\nand you choose to enable jumbo frames.\n\n1131\n00:59:24,780 --> 00:59:26,780\nRight.\nJumbo frames really improve our\n\n1132\n00:59:26,780 --> 00:59:30,900\nperformance, but they're another one that\nhas to be configured in multiple places.\n\n1133\n00:59:30,900 --> 00:59:34,160\nWith jumbo frames, you have to\nconfigure it on the vSwitch, so\n\n1134\n00:59:34,160 --> 00:59:37,052\nit's gotta be able to recognize\nthe larger frame size,\n\n1135\n00:59:37,052 --> 00:59:41,320\nyou have to configure it on your, well,\nyour physical adapter has to support it.\n\n1136\n00:59:41,320 --> 00:59:43,860\nYou can't normally turn that on, it's\nnormally a part of the physical adapter.\n\n1137\n00:59:43,860 --> 00:59:47,130\nYou have to configure it on your switch,\nyour physical switch.\n\n1138\n00:59:47,130 --> 00:59:49,590\nIt's got to be able to\nrecognize jumbo frames, and\n\n1139\n00:59:49,590 --> 00:59:53,230\nthen it's got to be enabled on\nwhoever's on the other side.\n\n1140\n00:59:53,230 --> 00:59:56,080\nIf your connecting to an iSCSI san in,\nor something like that,\n\n1141\n00:59:56,080 --> 00:59:57,960\nit has to support jumbo frames.\n\n1142\n00:59:57,960 --> 01:00:01,490\nIf any one of those components\ndoesn't support it.\n\n1143\n01:00:01,490 --> 01:00:02,670\nThe jumbo frame will fail.\n\n1144\n01:00:02,670 --> 01:00:04,070\nAll right.\n\n1145\n01:00:04,070 --> 01:00:07,940\nAnd so at that stage how do\nyou know where the problem is?\n\n1146\n01:00:07,940 --> 01:00:10,300\nAnd I kind of showed it\nearlier in the show.\n\n1147\n01:00:10,300 --> 01:00:14,620\nWe can use the VMK ping,\nutility to be able to figure that out.\n\n1148\n01:00:14,620 --> 01:00:18,660\nWe can adjust the size of the ping\nto be the size of a jumbo frame.\n\n1149\n01:00:18,660 --> 01:00:20,650\nAnd we can send it and see where it stops.\n\n1150\n01:00:20,650 --> 01:00:24,140\nSo you can start pinging from the inside\nout to figure out where your bottleneck\n\n1151\n01:00:24,140 --> 01:00:26,780\nis, where the jumbo frame stops support.\n\n1152\n01:00:26,780 --> 01:00:27,450\nAll right.\n\n1153\n01:00:27,450 --> 01:00:32,040\nLet's see, I wonder if I left\nSSH running on that server.\n\n1154\n01:00:32,040 --> 01:00:34,400\nLet me see if I can still\nconnect to that server.\n\n1155\n01:00:36,300 --> 01:00:37,590\nYeah, here we go, all right, so\n\n1156\n01:00:37,590 --> 01:00:43,220\nI just remoted into that server that I was\nworking with this morning, the ESXI Host,\n\n1157\n01:00:43,220 --> 01:00:47,380\nand this is the one where I showed\nVMK-ping earlier just for pinging.\n\n1158\n01:00:47,380 --> 01:00:52,780\nAnd you'll see there's several options\nin here including -D, which let's us\n\n1159\n01:00:52,780 --> 01:00:58,390\nset the DF-bit which is a forwarding bit\nthat we need to flag for jumbo frames.\n\n1160\n01:00:58,390 --> 01:01:01,310\nAnd -s that lets us specify the size.\n\n1161\n01:01:01,310 --> 01:01:05,510\nAnd we can use those two extensions to\nbe able to run a pretty simple test.\n\n1162\n01:01:05,510 --> 01:01:12,397\nYou can say vmkping -d -s 8972.\n\n1163\n01:01:12,397 --> 01:01:13,071\nAll right?\n\n1164\n01:01:13,071 --> 01:01:15,849\nNow I know a jumbo frame is 9000 bytes,\nbut\n\n1165\n01:01:15,849 --> 01:01:18,980\nyou never want to use\nall the bytes available.\n\n1166\n01:01:18,980 --> 01:01:21,180\nIf your switch is doing VLAN tagging,\n\n1167\n01:01:21,180 --> 01:01:25,110\nit needs a few bytes available\nto identify what VLAN it's on.\n\n1168\n01:01:25,110 --> 01:01:30,070\nAnd if you specify 9,000 here,\nthere's no more room for the VLAN tag.\n\n1169\n01:01:30,070 --> 01:01:33,790\nEven when you say your MTU is 9,000 bytes\nyou're not actually sending 9,000 bytes\n\n1170\n01:01:33,790 --> 01:01:37,330\nin every frame, you're sending less and\nleaving room for the header.\n\n1171\n01:01:37,330 --> 01:01:40,920\nSo that's why 8972 is\nthe recommended value, and\n\n1172\n01:01:40,920 --> 01:01:43,110\nI'll specify in my iSCSI stand here.\n\n1173\n01:01:43,110 --> 01:01:48,270\nNow, I already know that I have not\nenabled jumbo frames on my switch,\n\n1174\n01:01:48,270 --> 01:01:52,020\nor on my iSCSI san or\neven on this unit for that matter.\n\n1175\n01:01:52,020 --> 01:01:55,622\nSo when I try and\ndo a VMDK-ping see what I get?\n\n1176\n01:01:55,622 --> 01:02:01,100\nSend to failed, message too long,\nso it's not working.\n\n1177\n01:02:01,100 --> 01:02:02,530\nI'm not able to get out of there.\n\n1178\n01:02:02,530 --> 01:02:07,730\nBut if I remove that size value, if I\nget rid of that, and I just ping the IP,\n\n1179\n01:02:07,730 --> 01:02:12,190\nI can ping my san just fine, my iSCSI san.\n\n1180\n01:02:12,190 --> 01:02:15,120\nBut I'm only sending 64 bites, right?\n\n1181\n01:02:15,120 --> 01:02:19,480\nYour normal network has an MTU of 1500.\n\n1182\n01:02:19,480 --> 01:02:26,024\nSo if I start to send a ping, and I cap\nit at something lower right like 1492.\n\n1183\n01:02:26,024 --> 01:02:30,923\nOh, shoot, that's not enough room for\nthe header let me go with 1450.\n\n1184\n01:02:32,221 --> 01:02:37,510\nAll right there,\nat 1450 it's getting through just fine.\n\n1185\n01:02:37,510 --> 01:02:39,000\nSee how it did 1458?\n\n1186\n01:02:39,000 --> 01:02:40,770\nThat's that header sticking on there.\n\n1187\n01:02:40,770 --> 01:02:43,520\nSo there it goes,\nit went through just fine.\n\n1188\n01:02:43,520 --> 01:02:46,970\nBut when I went way higher,\nit didn't work.\n\n1189\n01:02:46,970 --> 01:02:51,260\nI know that the jumbo frame support\nis turned off somewhere here locally.\n\n1190\n01:02:51,260 --> 01:02:54,460\nI could actually start, well,\nI guess I don't know it's local.\n\n1191\n01:02:54,460 --> 01:02:56,590\nIt could be any stage along the way.\n\n1192\n01:02:56,590 --> 01:02:59,740\nI need to try and\nfigure out where that limit is.\n\n1193\n01:02:59,740 --> 01:03:03,054\nI could try and ping my own IP,\n\n1194\n01:03:03,054 --> 01:03:07,650\n127.0.0.1, the only problem with that,\n\n1195\n01:03:07,650 --> 01:03:13,750\nis when you ping the loopback,\nit stays entirely in software.\n\n1196\n01:03:13,750 --> 01:03:16,970\nSee how the large frame\nwork there in software?\n\n1197\n01:03:16,970 --> 01:03:21,130\nIf we start to ping things like the IP,\nagain,\n\n1198\n01:03:21,130 --> 01:03:24,700\nbecause this is all virtualized it stays\nin software, and so a lot of times this\n\n1199\n01:03:24,700 --> 01:03:30,320\nwill succeed even though it's\nnot configured on our hardware.\n\n1200\n01:03:30,320 --> 01:03:33,670\nWhat I really need to do is reach out\nto something a little bit more distant,\n\n1201\n01:03:33,670 --> 01:03:34,880\nlike my switch.\n\n1202\n01:03:34,880 --> 01:03:36,820\nThe switch that's on my network.\n\n1203\n01:03:36,820 --> 01:03:39,710\nAnd I'm gonna have to remember\nthe IP address for the switch.\n\n1204\n01:03:39,710 --> 01:03:40,975\nI wanna say it is.\n\n1205\n01:03:40,975 --> 01:03:43,555\n10.1.230.5.\n\n1206\n01:03:43,555 --> 01:03:47,840\nThere it is, okay, so\nI'm gonna try that particular IP.\n\n1207\n01:03:47,840 --> 01:03:51,790\nThis is the switch, and\nI'm getting message too long, okay?\n\n1208\n01:03:51,790 --> 01:03:56,535\nSo that tells me that either jumbo\nframes are not enabled on my server or\n\n1209\n01:03:56,535 --> 01:03:57,575\non the switch, or both.\n\n1210\n01:03:57,575 --> 01:03:59,625\nIt might not be enabled in either place.\n\n1211\n01:03:59,625 --> 01:04:01,635\nWe need to double check that.\n\n1212\n01:04:01,635 --> 01:04:04,458\nI can dive back into my config here.\n\n1213\n01:04:04,458 --> 01:04:06,667\nI can pull up my vSwitch.\n\n1214\n01:04:06,667 --> 01:04:08,667\nGet back on server six.\n\n1215\n01:04:08,667 --> 01:04:14,754\nHere on server six, I can go into my\nvSwitch, and see how my VM Kernel Adapter,\n\n1216\n01:04:14,754 --> 01:04:19,780\nthat's what I'm testing with,\nis plugged into this vSwitch.\n\n1217\n01:04:19,780 --> 01:04:22,962\nAnd if I edit the vSwitch,\nI'll see the MT right here and\n\n1218\n01:04:22,962 --> 01:04:25,625\nI'm just gonna crank that out to 9,000.\n\n1219\n01:04:25,625 --> 01:04:28,260\nAll right,\nthat's a key component of doing.\n\n1220\n01:04:29,820 --> 01:04:32,130\nOf doing jumbo frames, all right.\n\n1221\n01:04:32,130 --> 01:04:35,730\nThat's enabled now on my vSwitch,\nwhich in turn is gonna hit this adapter.\n\n1222\n01:04:35,730 --> 01:04:38,960\nNow this Intel e1000 adapter,\nit supports jumbo frames,\n\n1223\n01:04:38,960 --> 01:04:40,820\nI know it does so that's good.\n\n1224\n01:04:40,820 --> 01:04:43,240\nNow my machine, should be happy.\n\n1225\n01:04:44,800 --> 01:04:46,110\nI can go and repeat my test.\n\n1226\n01:04:46,110 --> 01:04:50,310\nNow my test here is more than likely gonna\nfail unless something magical happens.\n\n1227\n01:04:52,070 --> 01:04:54,120\nOh shoot, I lost my connection.\n\n1228\n01:04:54,120 --> 01:04:56,910\nWhen you change the MTU it\nresets your connection, so\n\n1229\n01:04:56,910 --> 01:04:59,940\nI've actually gotten\ndisconnected from the server.\n\n1230\n01:04:59,940 --> 01:05:01,130\nLet me get right back into it.\n\n1231\n01:05:03,450 --> 01:05:04,319\nApparently, it's gonna\nmake me wait a moment.\n\n1232\n01:05:12,594 --> 01:05:14,870\nWell this is where I\nstart to get impatient.\n\n1233\n01:05:14,870 --> 01:05:17,670\nThe network is resetting and re-synching.\n\n1234\n01:05:17,670 --> 01:05:22,520\nNow I've got its M2 cranked up to 9000 I\nneed to do the same thing on my switch.\n\n1235\n01:05:22,520 --> 01:05:25,300\nI need to get my switch configured for\n9000 also.\n\n1236\n01:05:25,300 --> 01:05:28,780\nAnd then I need to go to the i-scuzzy\nscan and get it configured for 9000.\n\n1237\n01:05:28,780 --> 01:05:33,270\nWhen they're all set, now we can start\ncommunicating with those higher MTUs.\n\n1238\n01:05:33,270 --> 01:05:36,570\nBut in the meantime, the system's\ntrying to communicate that way.\n\n1239\n01:05:36,570 --> 01:05:40,550\nIf it's trying to communicate with\n9000 bytes right now, it's gonna fail.\n\n1240\n01:05:40,550 --> 01:05:43,660\nif I've locked myself out of the system,\nlike if I wait here and\n\n1241\n01:05:43,660 --> 01:05:45,740\nthe system never comes back up.\n\n1242\n01:05:45,740 --> 01:05:50,304\nThen that's one of those situations were I\ncan go to the DCUI and reset things, all\n\n1243\n01:05:50,304 --> 01:05:53,940\nright, but I'm actually getting different\ninformation here, coming back so.\n\n1244\n01:05:55,080 --> 01:05:58,550\nIt is taking too long so\nI may have messed it up.\n\n1245\n01:05:58,550 --> 01:06:00,260\nActually, what host did I do that on.\n\n1246\n01:06:00,260 --> 01:06:01,140\n106, oh shoot.\n\n1247\n01:06:01,140 --> 01:06:06,110\nI think I did the wrong host is the\nproblem 106 is actually a virtual machine\n\n1248\n01:06:06,110 --> 01:06:10,650\nrunning right here on my own laptop,\nit's in VMware fusion, and so\n\n1249\n01:06:10,650 --> 01:06:12,420\nit doesn't support jumbo frames.\n\n1250\n01:06:12,420 --> 01:06:14,590\nShoot, I meant to do it on server five.\n\n1251\n01:06:14,590 --> 01:06:19,610\nHere's a bad network admin, that's\na good cause of a problem right there.\n\n1252\n01:06:19,610 --> 01:06:23,770\nSince I enabled jumbo frames on\na system that doesn't support it,\n\n1253\n01:06:23,770 --> 01:06:25,800\nthat's gonna be an issue for me.\n\n1254\n01:06:25,800 --> 01:06:27,660\nAnd now I probably won't\nbe able to get in here and\n\n1255\n01:06:27,660 --> 01:06:30,690\nfix it because that server's\ngonna be inaccessible.\n\n1256\n01:06:30,690 --> 01:06:32,120\nI guess I can give it a shot and\n\n1257\n01:06:32,120 --> 01:06:36,620\nsee if it'll fix it, but I think I'm gonna\nfind that the server can't be reached.\n\n1258\n01:06:36,620 --> 01:06:39,820\nYeah, see how my control\noptions here are grayed out?\n\n1259\n01:06:39,820 --> 01:06:43,820\nThat's because the server's\nunreachable right now so it's unhappy.\n\n1260\n01:06:43,820 --> 01:06:47,230\nThat's a situation where I might\nneed to drop over here and\n\n1261\n01:06:47,230 --> 01:06:49,680\ngo and fix it from the DCUI.\n\n1262\n01:06:49,680 --> 01:06:52,090\nAnd we can go in here and\n\n1263\n01:06:52,090 --> 01:06:56,370\neither reset the networking or\nmodify the options ourselves.\n\n1264\n01:06:56,370 --> 01:06:59,010\nI don't think MTU is one of\nthe things I can change in here.\n\n1265\n01:06:59,010 --> 01:06:59,990\nLet's see if it is.\n\n1266\n01:07:01,090 --> 01:07:06,680\nIf I go into my network adapters,\nit just shows it's connected.\n\n1267\n01:07:06,680 --> 01:07:08,820\nVLANs aren't specified.\n\n1268\n01:07:08,820 --> 01:07:09,630\nAnd yeah.\n\n1269\n01:07:09,630 --> 01:07:13,590\nIt doesn't look like you can\nconfigure MTU, from the main screen.\n\n1270\n01:07:13,590 --> 01:07:16,210\nBut what I can do is do a network restore.\n\n1271\n01:07:18,390 --> 01:07:20,430\nAnd I can restore my switch settings.\n\n1272\n01:07:20,430 --> 01:07:26,645\nAnd that's going to include\nThat's gonna include the MTU's.\n\n1273\n01:07:26,645 --> 01:07:28,868\nSo it'll put that back to\nthe way that I need it.\n\n1274\n01:07:28,868 --> 01:07:31,115\nWe can get that one back\nonline pretty quick.\n\n1275\n01:07:33,743 --> 01:07:35,363\nOh shoot, I'm suppose F11,\n\n1276\n01:07:35,363 --> 01:07:39,203\nF11 is something I can't send to\nthe virtual machine in VMware Fusion, so\n\n1277\n01:07:39,203 --> 01:07:42,800\nI'm just gonna send it with\na keystroke there, all right.\n\n1278\n01:07:42,800 --> 01:07:46,040\nSo there, so now it's gonna\nreconfigure the network and start it.\n\n1279\n01:07:46,040 --> 01:07:47,235\nAnd that system should come back online.\n\n1280\n01:07:52,041 --> 01:07:56,050\nI thought I already did that,\nI may have pressed my key too many times.\n\n1281\n01:07:56,050 --> 01:07:56,850\nGet a little click happy.\n\n1282\n01:07:58,360 --> 01:08:00,610\nThere we go,\nauto re-configuring the network and done.\n\n1283\n01:08:02,420 --> 01:08:03,440\nAll right.\n\n1284\n01:08:03,440 --> 01:08:06,230\nNow jump back over here to\nwhere I was testing that ping.\n\n1285\n01:08:07,630 --> 01:08:09,260\nAnd hopefully we see that come back up.\n\n1286\n01:08:10,630 --> 01:08:11,316\nIt's still dying out on me.\n\n1287\n01:08:14,601 --> 01:08:16,265\nLet's just double check.\n\n1288\n01:08:16,265 --> 01:08:17,905\nI might need to redo my configuration.\n\n1289\n01:08:22,325 --> 01:08:26,175\nOh yeah, it put me back to DHCP,\nso now my IP address is wrong, so\n\n1290\n01:08:26,175 --> 01:08:27,075\nlet me just fix that.\n\n1291\n01:08:27,075 --> 01:08:30,510\nThe rest of this information\nshould be right.\n\n1292\n01:08:39,566 --> 01:08:41,380\nThere we go.\n\n1293\n01:08:41,380 --> 01:08:43,456\nLet it re-fix that.\n\n1294\n01:08:43,456 --> 01:08:45,580\nAnd now, there I'm back up.\n\n1295\n01:08:45,580 --> 01:08:47,550\nAll right?\nSo that quick network reset,\n\n1296\n01:08:47,550 --> 01:08:50,500\ngreat way to undo a change when you make\nit on the wrong system like I just did.\n\n1297\n01:08:51,930 --> 01:08:53,210\nAll right.\n\n1298\n01:08:53,210 --> 01:08:56,370\nThose are some of the things that we need\nto think about with networks, like I said,\n\n1299\n01:08:56,370 --> 01:09:00,660\non the HCL side, almost every network\nadapter is supported by VMware.\n\n1300\n01:09:00,660 --> 01:09:03,860\nEvery server grade network adapter is,\nthe one that was in this system\n\n1301\n01:09:03,860 --> 01:09:06,450\nthat I was talking about was one that\nwas integrated into the motherboard and\n\n1302\n01:09:06,450 --> 01:09:10,270\nit just wasn't common enough or\nwasn't high enough grade to be supported,\n\n1303\n01:09:10,270 --> 01:09:16,310\nthe one I added in though, was an Intel\n81,000 network server, or a server grade.\n\n1304\n01:09:16,310 --> 01:09:18,230\nNetwork adapter worked just fine.\n\n1305\n01:09:18,230 --> 01:09:19,560\nDo it in.\n\n1306\n01:09:19,560 --> 01:09:21,400\nAll right, what else do we have?\n\n1307\n01:09:21,400 --> 01:09:23,500\nI think that's most of it.\n\n1308\n01:09:23,500 --> 01:09:26,360\nVerifying your IP address is\nalways a good thing to check,\n\n1309\n01:09:26,360 --> 01:09:30,780\nverifying that systems are plugged\ninto the proper port group.\n\n1310\n01:09:30,780 --> 01:09:33,560\nHaving it in the wrong port group\nis gonna create odd behavior.\n\n1311\n01:09:33,560 --> 01:09:34,870\nAnd something you can bump into.\n\n1312\n01:09:34,870 --> 01:09:38,440\nAnd then the last thing is if\nyou're dealing with a DV switch,\n\n1313\n01:09:38,440 --> 01:09:41,510\njust making sure you check each of\nthe hosts involved because you might have\n\n1314\n01:09:41,510 --> 01:09:43,010\na link failure on one of them.\n\n1315\n01:09:43,010 --> 01:09:46,825\nDV switches are great about detecting\nthat, but if you're not aware of it,\n\n1316\n01:09:46,825 --> 01:09:51,380\ncuz the DV switch will stay up, then you\ncan start to have multiple ones fail and\n\n1317\n01:09:51,380 --> 01:09:54,420\nend up in a situation where none of them\nare active anymore so you've got to go and\n\n1318\n01:09:54,420 --> 01:09:54,940\ndouble check that.\n\n1319\n01:09:56,630 --> 01:09:58,700\nAll right, so those are some of\nthe things that we need to think about on\n\n1320\n01:09:58,700 --> 01:10:00,330\nthe networking side.\n\n1321\n01:10:00,330 --> 01:10:04,340\nWhen we get back from break, we're gonna\ntake a look at things on the storage side,\n\n1322\n01:10:04,340 --> 01:10:06,200\ncuz storage is another area\nwhere we can have problems.\n\n1323\n01:10:06,200 --> 01:10:07,760\nSo we'll get a chance to see that.\n\n1324\n01:10:07,760 --> 01:10:12,692\nAnd then we'll wrap up the show talking\nabout, what else, performance, right?\n\n1325\n01:10:12,692 --> 01:10:15,980\nAnd finding all sorts of things as far as,\nlike,\n\n1326\n01:10:15,980 --> 01:10:19,200\nCPU and memory resource utilization,\nstuff like that.\n\n1327\n01:10:19,200 --> 01:10:20,624\nStay tuned, we'll be back after this.\n\n1328\n01:10:20,624 --> 01:10:27,649\n[MUSIC]\n\n1329\n01:10:27,649 --> 01:10:30,430\nAll right, welcome back everybody.\n\n1330\n01:10:30,430 --> 01:10:33,210\nWe're gonna take a look\nat storage this time.\n\n1331\n01:10:33,210 --> 01:10:35,990\nTroubleshooting storage\nis kind of interesting.\n\n1332\n01:10:35,990 --> 01:10:40,920\nOn the ESXI side, it's pretty easy,\neither the storage shows up or it doesn't.\n\n1333\n01:10:40,920 --> 01:10:45,080\nIf the storage doesn't show up then\nyou've likely got a controller,\n\n1334\n01:10:45,080 --> 01:10:48,250\nthat's not on the HCL, right,\nor a malfunctioning controller.\n\n1335\n01:10:48,250 --> 01:10:52,510\nWe definitely want to double check, make\nsure your controller is showing up, and\n\n1336\n01:10:52,510 --> 01:10:55,880\nmake sure your device is showing up,\nand those are pretty easy to detect.\n\n1337\n01:10:55,880 --> 01:11:00,790\nBack here in vCenter we\ngo into our our host.\n\n1338\n01:11:00,790 --> 01:11:02,130\nWe go into storage.\n\n1339\n01:11:02,130 --> 01:11:04,450\nAnd I usually start up here\nunder storage adaptors.\n\n1340\n01:11:04,450 --> 01:11:07,850\nYou should see your storage\nadapter showing up in here.\n\n1341\n01:11:07,850 --> 01:11:10,280\nYou can see like I've got VMHBA one.\n\n1342\n01:11:10,280 --> 01:11:11,970\nThat's my scuzzy controller.\n\n1343\n01:11:11,970 --> 01:11:15,310\nAnd I can see right here it's\na PCIX fusion blah, blah, blah.\n\n1344\n01:11:15,310 --> 01:11:17,560\nThat's the controller\nbuilt into my motherboard.\n\n1345\n01:11:17,560 --> 01:11:19,390\nAnd then I've got two additional ones.\n\n1346\n01:11:19,390 --> 01:11:23,170\nBecause, you'll see these are for\nIDE access.\n\n1347\n01:11:23,170 --> 01:11:27,540\nThese are my controllers and I can look\nand see what discs are attached to them,\n\n1348\n01:11:27,540 --> 01:11:29,480\nlike the CD drive is attached to this one.\n\n1349\n01:11:29,480 --> 01:11:33,610\nAnd if I click on this guy up here\nI see two hard drives attached.\n\n1350\n01:11:33,610 --> 01:11:35,830\nWe start by looking at the controller.\n\n1351\n01:11:35,830 --> 01:11:37,190\nAnd then we look at the devices.\n\n1352\n01:11:37,190 --> 01:11:40,230\nNow, the devices themselves you can\nsee under the storage devices tab they\n\n1353\n01:11:40,230 --> 01:11:41,090\nget aggregated.\n\n1354\n01:11:41,090 --> 01:11:42,870\nIt's the same data as the other screen.\n\n1355\n01:11:42,870 --> 01:11:44,900\nBut your devices should\nshow up from there.\n\n1356\n01:11:44,900 --> 01:11:48,210\nIf the controller shows up,\nbut the devices don't\n\n1357\n01:11:48,210 --> 01:11:51,130\nit's usually a malfunctioning device or\nan incorrectly wired device.\n\n1358\n01:11:52,460 --> 01:11:57,501\nBut I mentioned the scenario earlier where\nthe storage adapter shows up, the device\n\n1359\n01:11:57,501 --> 01:12:02,333\nshows up, but then when you go to create\na data store, it doesn't show up there.\n\n1360\n01:12:02,333 --> 01:12:03,270\nAll right.\n\n1361\n01:12:03,270 --> 01:12:06,519\nAnd the reason that happens is when\nyou have that previous data on there,\n\n1362\n01:12:06,519 --> 01:12:08,875\nthat polluted data, so\nthat was the example I used.\n\n1363\n01:12:08,875 --> 01:12:12,730\nLet me show you how to fix that cuz it's\nreally not that bad It's easiest to fix\n\n1364\n01:12:12,730 --> 01:12:16,228\nit from the command line of that server or\nyou can take the drives out and\n\n1365\n01:12:16,228 --> 01:12:17,620\nmove them some where else.\n\n1366\n01:12:17,620 --> 01:12:21,410\nBut from the command line of that server,\nif I just get back into it here.\n\n1367\n01:12:21,410 --> 01:12:23,940\nLet me remote in into that system again.\n\n1368\n01:12:25,300 --> 01:12:27,690\nWe can use a couple of\ncommand line utilities.\n\n1369\n01:12:27,690 --> 01:12:33,210\nEarlier I talked about the ESXCLI command\nand all the stuff that it can do.\n\n1370\n01:12:33,210 --> 01:12:36,520\nThere's actually another\none called ESXCFG,\n\n1371\n01:12:36,520 --> 01:12:40,020\nwhich is the configuration command and,\noh, of course it's not.\n\n1372\n01:12:40,020 --> 01:12:45,100\nIs it not in the path?\n\n1373\n01:12:45,100 --> 01:12:52,380\nOh, shoot, sorry, it's ESX CFG-SCSI devs,\nthat's the one that I'm thinking of.\n\n1374\n01:12:52,380 --> 01:12:53,600\nThere we go.\n\n1375\n01:12:53,600 --> 01:12:58,060\nWhich is the configuration for\nSCSI devices or your hard drives.\n\n1376\n01:12:58,060 --> 01:13:02,430\nAnd so, ESX CFG-SCSI devs.\n\n1377\n01:13:02,430 --> 01:13:06,500\nSo, the ESX configuration for\nSCSI devices is the command.\n\n1378\n01:13:06,500 --> 01:13:11,280\nYou can run a dash L and it will list\nout the SCSI devices on your system.\n\n1379\n01:13:11,280 --> 01:13:14,700\nNow, it can be quite a bit of information,\nbut these are the devices.\n\n1380\n01:13:14,700 --> 01:13:17,940\nThe reason I wanna do this is,\nwhen it lists them,\n\n1381\n01:13:17,940 --> 01:13:21,890\nit gives you the full path to that device.\n\n1382\n01:13:21,890 --> 01:13:26,150\nWhich means the device as far as the\nunderlying Linux OS is referencing it, and\n\n1383\n01:13:26,150 --> 01:13:28,590\nthen the name entry for that one.\n\n1384\n01:13:28,590 --> 01:13:31,560\nAnd here I've got MPX names\nwhich are pretty short.\n\n1385\n01:13:31,560 --> 01:13:36,140\nBut you might have the T10 names,\nwhich are really long.\n\n1386\n01:13:36,140 --> 01:13:38,530\nOr the NAA names,\nthey might be really long.\n\n1387\n01:13:38,530 --> 01:13:42,410\nSo you might see a console device name\nhere that wraps around the screen,\n\n1388\n01:13:42,410 --> 01:13:43,810\nis always possible.\n\n1389\n01:13:43,810 --> 01:13:47,380\nBut what I can do is take one of these and\nI'll take this 60 gig one,\n\n1390\n01:13:47,380 --> 01:13:49,860\nthis is one that has some bad data on it.\n\n1391\n01:13:49,860 --> 01:13:54,040\nAnd I'll just copy that device name, and\n\n1392\n01:13:54,040 --> 01:13:59,200\nthen what I can do is I can\nuse the part ed utility, and\n\n1393\n01:13:59,200 --> 01:14:03,630\nI can use part ed to get and\npaste in that device name, and\n\n1394\n01:14:03,630 --> 01:14:07,050\nit's gonna list for\nme the partitions that are on that device.\n\n1395\n01:14:07,050 --> 01:14:09,980\nI can see this device\nalready has a petition on it.\n\n1396\n01:14:09,980 --> 01:14:12,170\nPartition number one,\nI don't know what that is.\n\n1397\n01:14:12,170 --> 01:14:15,220\nThis is a new drive I just stuck in that\nsystem, so that's the one that's gonna\n\n1398\n01:14:15,220 --> 01:14:19,220\nhave junk on it, and it'll prevent it\nfrom showing up in the new datastore one.\n\n1399\n01:14:19,220 --> 01:14:23,930\nSo I can just rerun this last command,\nexcept instead of parted get, or\n\n1400\n01:14:23,930 --> 01:14:27,910\npartedUtil get,\nI'll change that to partedUtil delete, and\n\n1401\n01:14:27,910 --> 01:14:30,730\nat the end,\nI'll just add the partition numbers.\n\n1402\n01:14:30,730 --> 01:14:31,978\nSo I'm gonna add partition number one.\n\n1403\n01:14:31,978 --> 01:14:35,490\nAnd that's gonna wipe out that partition.\n\n1404\n01:14:35,490 --> 01:14:38,120\nWhen I look at it,\nnow the partition is gone.\n\n1405\n01:14:38,120 --> 01:14:40,060\nNow it's a nice blank drive.\n\n1406\n01:14:40,060 --> 01:14:41,460\nThe adapter is seen.\n\n1407\n01:14:41,460 --> 01:14:42,870\nThe drive is seen.\n\n1408\n01:14:42,870 --> 01:14:45,930\nNow when I go to create a data store,\nthis disk will be seen.\n\n1409\n01:14:45,930 --> 01:14:50,210\nI'll be able to create a data store.\n\n1410\n01:14:50,210 --> 01:14:54,070\nThat's one example of where you might need\nto drop down to the shell to do this.\n\n1411\n01:14:54,070 --> 01:14:57,720\nThere is no way that I'm\naware of at least to remove\n\n1412\n01:14:59,890 --> 01:15:03,540\nunknown partitions from a hard drive\nwhen you add a disk to VMware.\n\n1413\n01:15:03,540 --> 01:15:05,320\nIt expects the drives to be blank.\n\n1414\n01:15:05,320 --> 01:15:08,620\nSo if you just take the drive out,\nput it back in another system and wipe it,\n\n1415\n01:15:08,620 --> 01:15:10,290\nthat works or you can do it this way.\n\n1416\n01:15:10,290 --> 01:15:16,760\nAnd if I were to try and create a data\nstore on here now, so if I'm on that host\n\n1417\n01:15:16,760 --> 01:15:23,080\nand I go into data stores and\nI try and add in a new data store,\n\n1418\n01:15:23,080 --> 01:15:26,500\nwhen I run through the wizard,\nthat other device should show up now.\n\n1419\n01:15:26,500 --> 01:15:31,350\nSo as I start to move through I create\na VMFS device and then there it is.\n\n1420\n01:15:31,350 --> 01:15:33,420\nRight, so if you ever come in here and\nthat screen is blank,\n\n1421\n01:15:33,420 --> 01:15:35,800\nit probably just means you've got\nsome junk data on those drives.\n\n1422\n01:15:38,230 --> 01:15:41,340\nAll right, other things to check,\nperformance.\n\n1423\n01:15:41,340 --> 01:15:46,330\nDisc I/O and just disk access in general\ncan be a real problem with performance.\n\n1424\n01:15:46,330 --> 01:15:49,910\nYou are almost always better\noff monitoring performance\n\n1425\n01:15:49,910 --> 01:15:51,290\nfrom the device itself.\n\n1426\n01:15:51,290 --> 01:15:55,730\nSo if you've got an EMC San or an HP,\na left hand network san, whatever.\n\n1427\n01:15:55,730 --> 01:15:57,590\nIf you have an iSCSI scan.\n\n1428\n01:15:57,590 --> 01:15:58,150\nGo to that device.\n\n1429\n01:15:58,150 --> 01:16:00,980\nIt will give you some of\nthe best storage reporting.\n\n1430\n01:16:00,980 --> 01:16:03,180\nAnd it'll report based on\nwho's connected to it.\n\n1431\n01:16:03,180 --> 01:16:07,540\nSo you'll see either the HBA addresses,\nlike the worldwide names for your host.\n\n1432\n01:16:07,540 --> 01:16:10,510\nOr you'll see the IP\naddresses if it's iSCSI.\n\n1433\n01:16:10,510 --> 01:16:14,630\nAnd so you can tell who's generating\nthe most disk I/O from there, all right?\n\n1434\n01:16:14,630 --> 01:16:17,790\nNow that's helpful for\nfiguring out which host is the problem.\n\n1435\n01:16:17,790 --> 01:16:21,480\nBut once you know that, you need to\nfind out which guest is the problem.\n\n1436\n01:16:21,480 --> 01:16:25,170\nBecause it's usually a guest that's\nresponsible for the excessive disk I/O.\n\n1437\n01:16:25,170 --> 01:16:28,840\nFortunately, vSphere WebClient\nhas a lot of reporting in it.\n\n1438\n01:16:28,840 --> 01:16:31,230\nUnfortunately, it's slow and I hate it.\n\n1439\n01:16:31,230 --> 01:16:35,720\nSo what I typically use is the vSphere\nClient, the regular vSphere Client.\n\n1440\n01:16:35,720 --> 01:16:39,580\nSo let me fire that up, actually\ndo I still have that from earlier?\n\n1441\n01:16:39,580 --> 01:16:41,350\nI might still have it\nfired up from earlier.\n\n1442\n01:16:42,660 --> 01:16:47,720\nBut it's just connected to this one.\n\n1443\n01:16:47,720 --> 01:16:50,440\nWhen you connect to a single host,\nthere's only so much you can see.\n\n1444\n01:16:50,440 --> 01:16:53,810\nYou can go into performance, and\nyou can see information here as far as\n\n1445\n01:16:53,810 --> 01:16:58,760\nCPU real time and you can edit this and\nchange it to show other things.\n\n1446\n01:16:58,760 --> 01:17:01,930\nI can drop that down and\npull up a particular data store.\n\n1447\n01:17:01,930 --> 01:17:03,790\nThis one only has one data store.\n\n1448\n01:17:03,790 --> 01:17:07,730\nIn here I can start to see the read and\nwrite latency and things like that.\n\n1449\n01:17:07,730 --> 01:17:11,300\nBut if I connect to the vCenter\nserver I'll actually see more stuff.\n\n1450\n01:17:11,300 --> 01:17:13,450\nSo let me change the way\nI'm logged in here.\n\n1451\n01:17:15,600 --> 01:17:16,980\nI will log into that vCenter server.\n\n1452\n01:17:18,310 --> 01:17:24,930\nNow the exam is usually going to focus\nin on the vCenter method, because that's\n\n1453\n01:17:24,930 --> 01:17:30,580\ntheir heart and soul of the vSphere Suite,\nso it's what you normally want to use.\n\n1454\n01:17:30,580 --> 01:17:33,540\nBut in real life land, there is actually\nanother method that I use that's\n\n1455\n01:17:33,540 --> 01:17:36,190\npretty handy, again from the command line.\n\n1456\n01:17:36,190 --> 01:17:41,630\nThere's a utility called ESXTOP, and\nit lets you see on a particular host\n\n1457\n01:17:41,630 --> 01:17:46,080\nWhich guests or what systems\nare generating all the Disk I/O.\n\n1458\n01:17:46,080 --> 01:17:49,660\nAnd it let's you have some easy to\nuse measurements to tell which ones\n\n1459\n01:17:49,660 --> 01:17:50,570\nare causing the problems.\n\n1460\n01:17:50,570 --> 01:17:52,730\nSo I usually go that way\ncuz it's what I'm used to.\n\n1461\n01:17:52,730 --> 01:17:55,010\nBut let me show you how this works.\n\n1462\n01:17:55,010 --> 01:17:59,980\nWhen I take my vSphere Client and\nI connect it to the vCenter server, so\n\n1463\n01:17:59,980 --> 01:18:02,990\nnot a particular host, but\nthe vCenter server itself.\n\n1464\n01:18:02,990 --> 01:18:07,120\nYou'll see some really interesting\nthings and the coolest thing is,\n\n1465\n01:18:07,120 --> 01:18:10,910\nwell you'll get performance reports\nthat are actually kinda fast and\n\n1466\n01:18:10,910 --> 01:18:13,680\nyou'll get maps, the maps are really neat.\n\n1467\n01:18:13,680 --> 01:18:16,650\nIf I take something like ESX server three,\n\n1468\n01:18:16,650 --> 01:18:20,070\nthis guy right here,\nnotice this tab that says maps.\n\n1469\n01:18:20,070 --> 01:18:22,570\nThat doesn't show up in\nthe vSphere WebClient.\n\n1470\n01:18:22,570 --> 01:18:28,180\nWhen you click on Maps, what it does is it\nmaps out each of your virtual machines and\n\n1471\n01:18:28,180 --> 01:18:30,470\nshows which data stores are involved.\n\n1472\n01:18:30,470 --> 01:18:33,170\nSo here is like a host, ESX Server 3.\n\n1473\n01:18:33,170 --> 01:18:35,300\nApp Web1 is running on it.\n\n1474\n01:18:35,300 --> 01:18:37,680\nApp Web 1 is also\nconnected to VM Network and\n\n1475\n01:18:37,680 --> 01:18:40,250\nalso connected to the Shared Data Store 1.\n\n1476\n01:18:40,250 --> 01:18:44,160\nSo it kind of maps out what we've got and\nhow they're connected.\n\n1477\n01:18:44,160 --> 01:18:48,520\nAnd you can start to filter that\nhost of VM, host to Data Store.\n\n1478\n01:18:48,520 --> 01:18:52,770\nYou can come in and change the way\nthat things are being mapped.\n\n1479\n01:18:52,770 --> 01:18:55,290\nSo, now I've got all these different\n\n1480\n01:18:55,290 --> 01:18:58,290\ndata stores out here that\nthis host is connected to.\n\n1481\n01:18:58,290 --> 01:19:00,470\nThis host is connected to data store one.\n\n1482\n01:19:00,470 --> 01:19:04,110\nData store one is feeding App Web1,\nwhich is also connected to VM Network.\n\n1483\n01:19:04,110 --> 01:19:08,730\nSo you kinda map this stuff out, to figure\nout how everything's related together.\n\n1484\n01:19:08,730 --> 01:19:12,150\nThat's really useful when it\ncomes to troubleshooting storage.\n\n1485\n01:19:12,150 --> 01:19:14,040\nWhere it gets even better,\n\n1486\n01:19:15,410 --> 01:19:20,540\nis when we drill down to an individual\nvirtual machine, and we pull up its map.\n\n1487\n01:19:20,540 --> 01:19:24,570\nBecause it's gonna go a little bit\nfurther, and not just give us information\n\n1488\n01:19:24,570 --> 01:19:28,622\non how we're connected for storage, but\nalso information for things like vMotion.\n\n1489\n01:19:28,622 --> 01:19:32,180\nAll right, if there's a problem with\nvMotion you'll see what it is in here.\n\n1490\n01:19:32,180 --> 01:19:37,670\nSo I can see App Web 1 right now is\nexecuting on ESX server three and\n\n1491\n01:19:37,670 --> 01:19:40,330\nESX server four, it's a cluster, right.\n\n1492\n01:19:40,330 --> 01:19:45,250\nAnd then it's stored down here\non shared data store one.\n\n1493\n01:19:45,250 --> 01:19:46,850\nSo we've got a direct\nconnection to that but\n\n1494\n01:19:46,850 --> 01:19:50,560\nour hosts also have a connection to that.\n\n1495\n01:19:50,560 --> 01:19:54,030\nSo it's all just kinda mapped out here in\na way that helps me to recognizes those\n\n1496\n01:19:54,030 --> 01:19:55,040\nrelationships.\n\n1497\n01:19:55,040 --> 01:20:01,958\nLet me show you a system that doesn't\nhave vMotion, my vCenter server.\n\n1498\n01:20:01,958 --> 01:20:08,720\nSo here's one where I got my vCenter\nserver and it's attached to VM Network.\n\n1499\n01:20:08,720 --> 01:20:12,333\nIt's running off this host over here And\nI can see some little notes.\n\n1500\n01:20:12,333 --> 01:20:15,070\nLet me just zoom in and get this bigger.\n\n1501\n01:20:18,880 --> 01:20:20,490\nNotice what it's telling me right here.\n\n1502\n01:20:20,490 --> 01:20:23,080\nI'm running on this particular server.\n\n1503\n01:20:23,080 --> 01:20:24,840\nvMotion is disabled.\n\n1504\n01:20:24,840 --> 01:20:27,380\nI haven't even configured\nvMotion on this system.\n\n1505\n01:20:27,380 --> 01:20:31,780\nI haven't set up a VM kernel adapter\nthat has vMotion ticked off.\n\n1506\n01:20:31,780 --> 01:20:36,360\nSo I know that's a problem ESX server\nfour though it doesn't have that node.\n\n1507\n01:20:36,360 --> 01:20:39,630\nSo if I move this virtual\nmachine over to ESX server four\n\n1508\n01:20:39,630 --> 01:20:41,340\nI'll be able to utilize v motion.\n\n1509\n01:20:41,340 --> 01:20:45,490\nBut as long as it stays over here on ESX\nserver one I'm not going to be able to use\n\n1510\n01:20:45,490 --> 01:20:49,810\nv motion, so we can quickly\nidentify that kind of information.\n\n1511\n01:20:49,810 --> 01:20:50,750\nThese maps are really nice.\n\n1512\n01:20:50,750 --> 01:20:54,630\nIt's kind of nice to be able\nto get these high level views.\n\n1513\n01:20:54,630 --> 01:20:57,970\nAnd get an idea of how all the different\nthings in your system interrelate.\n\n1514\n01:21:01,210 --> 01:21:04,220\nAll right now I mentioned\nthe performance reports right, so\n\n1515\n01:21:04,220 --> 01:21:08,050\nif I dive into performance I\nget my various breakdowns and\n\n1516\n01:21:08,050 --> 01:21:12,090\nthis is what I get for\nsaying they actually run kind of fast.\n\n1517\n01:21:12,090 --> 01:21:14,960\nThey run super fast when you\ndirectly connect the host.\n\n1518\n01:21:14,960 --> 01:21:17,700\nBut here, yeah, you'll see that loaded\na lot faster than it did earlier.\n\n1519\n01:21:17,700 --> 01:21:24,570\nSo here I can see the CPU, memory and\ndisk, right, kilobytes per second.\n\n1520\n01:21:24,570 --> 01:21:27,330\nIt's kind of mapping out exactly\nhow much access this particular\n\n1521\n01:21:27,330 --> 01:21:28,490\nmachine is generating.\n\n1522\n01:21:28,490 --> 01:21:31,970\nSo I can identify who my bottleneck is or\nwhat my particular problem is there.\n\n1523\n01:21:31,970 --> 01:21:33,050\nAll right?\n\n1524\n01:21:33,050 --> 01:21:35,980\nBut like I said, one of the things\nI like to use instead is ESXTOP.\n\n1525\n01:21:35,980 --> 01:21:37,840\nSo let me show you that one.\n\n1526\n01:21:37,840 --> 01:21:40,800\nI'm connected into this server and,\nactually this server might be a bad\n\n1527\n01:21:40,800 --> 01:21:44,160\nexample, since it's got no\nvirtual machines on it.\n\n1528\n01:21:44,160 --> 01:21:46,490\nWell no, I think it does have one,\ndoesn't it?\n\n1529\n01:21:46,490 --> 01:21:47,100\nSo let's find out.\n\n1530\n01:21:47,100 --> 01:21:50,390\nSo I'm going to go ahead and\njust run ESXTOP.\n\n1531\n01:21:50,390 --> 01:21:54,989\nAnd when you run it,\nit's going to generate a mess, isn't it?\n\n1532\n01:21:57,267 --> 01:22:00,640\nLet me, my SSH client is not.\n\n1533\n01:22:00,640 --> 01:22:01,670\nSee all these codes here?\n\n1534\n01:22:01,670 --> 01:22:06,170\nThese are ANC animation codes and\nmy SSH client is not handling that.\n\n1535\n01:22:06,170 --> 01:22:08,880\nSo, let me switch over to\nthe local shell on that one.\n\n1536\n01:22:08,880 --> 01:22:14,330\nI'm going to use that one,\nand I'll say ESSX top.\n\n1537\n01:22:14,330 --> 01:22:15,280\nThere we go.\n\n1538\n01:22:15,280 --> 01:22:18,170\nSo this is ESSX top,\nand what it does is it\n\n1539\n01:22:18,170 --> 01:22:21,290\nbreaks down all the different things\nthat are happening on this host, and\n\n1540\n01:22:21,290 --> 01:22:25,222\nit's ranking them by who's\ngenerating the most activity.\n\n1541\n01:22:25,222 --> 01:22:31,140\nAnd so when I pull it up here is\nbasically showing me my vCPU utilization,\n\n1542\n01:22:31,140 --> 01:22:34,630\nso CPU information, and\nbreaking it down by processors and\n\n1543\n01:22:34,630 --> 01:22:38,560\nwho's doing what, and\nwhat's consuming the bulk of my system?\n\n1544\n01:22:38,560 --> 01:22:42,840\nAnd when I look under percent run,\nI hope to see the biggest one is idle, and\n\n1545\n01:22:42,840 --> 01:22:44,540\nthat's exactly what I'm seeing, right?\n\n1546\n01:22:44,540 --> 01:22:46,950\nSo my system is really just\nsitting there doing nothing.\n\n1547\n01:22:46,950 --> 01:22:49,930\nBut as we start to fire VMs\nthis stuff can get really busy.\n\n1548\n01:22:49,930 --> 01:22:53,660\nNow there's a couple of keyboard\nshortcuts that make this utility nice.\n\n1549\n01:22:53,660 --> 01:22:55,200\nMy favorite one is V.\n\n1550\n01:22:55,200 --> 01:23:00,040\nIf you press the letter V, it switches\nyou into the Virtual Machine View.\n\n1551\n01:23:00,040 --> 01:23:02,890\nSo, now I'm seeing the virtual\nmachines on this system and\n\n1552\n01:23:02,890 --> 01:23:06,000\ngetting an idea of what\nload is being generated.\n\n1553\n01:23:06,000 --> 01:23:09,340\nNow, I could have swore I had a VM\non this one, but I guess I don't.\n\n1554\n01:23:09,340 --> 01:23:14,300\nLet me switch to another system.\n\n1555\n01:23:15,970 --> 01:23:23,622\nLet's take server five and my SSH client\nis going to slaughter the screen.\n\n1556\n01:23:23,622 --> 01:23:26,060\nAll right,\nwell let me just go back to this one then.\n\n1557\n01:23:27,822 --> 01:23:30,710\nAll right, so you can press V though and\nit'll break down the virtual machines.\n\n1558\n01:23:30,710 --> 01:23:34,780\nWhen you're looking at the virtual machine\nview, it's giving you reads per second.\n\n1559\n01:23:34,780 --> 01:23:36,010\nWrites per second.\n\n1560\n01:23:36,010 --> 01:23:37,720\nMegabytes read per second.\n\n1561\n01:23:37,720 --> 01:23:39,290\nMegabytes written per second.\n\n1562\n01:23:39,290 --> 01:23:41,540\nYou can super easy, spot.\n\n1563\n01:23:41,540 --> 01:23:42,600\nWho is your top consumer?\n\n1564\n01:23:42,600 --> 01:23:43,700\nIt will actually sort it.\n\n1565\n01:23:43,700 --> 01:23:46,410\nAnd so, you can see who's\ngenerating the bulk of the disk IO.\n\n1566\n01:23:46,410 --> 01:23:49,170\nThat gives you a chance to look and\nsee and determine whether or\n\n1567\n01:23:49,170 --> 01:23:51,030\nnot there's really a problem.\n\n1568\n01:23:51,030 --> 01:23:56,000\nThere's also the D, which will switch\nyou into the disc adaptor view.\n\n1569\n01:23:56,000 --> 01:23:57,930\nAll right this one's really cool.\n\n1570\n01:23:57,930 --> 01:24:01,720\nBecause this one has some nice little\nmetrics, that are super easy to measure.\n\n1571\n01:24:01,720 --> 01:24:03,950\nYou'll see some of the similar\nones we had before.\n\n1572\n01:24:03,950 --> 01:24:07,520\nReads and writes per second, megabyte\nreads, megabyte writes per second.\n\n1573\n01:24:07,520 --> 01:24:10,280\nBut my favorite are these\nthree right after it.\n\n1574\n01:24:10,280 --> 01:24:13,890\nD average, K average,\nG average, all right?\n\n1575\n01:24:13,890 --> 01:24:17,020\nEach of these is something special, right?\n\n1576\n01:24:17,020 --> 01:24:18,250\nD average is the first one.\n\n1577\n01:24:18,250 --> 01:24:24,310\nDAVG slash CMD, and basically what\nit says is when I try and write or\n\n1578\n01:24:24,310 --> 01:24:29,920\nread from a disc, what's the average\ntime the disc takes to do that work.\n\n1579\n01:24:29,920 --> 01:24:33,230\nSo, I'm getting an average amount\nof time it takes the disc to go and\n\n1580\n01:24:33,230 --> 01:24:36,510\nretrieve data for a read or\nwrite data for a write.\n\n1581\n01:24:36,510 --> 01:24:37,700\nAll right?\n\n1582\n01:24:37,700 --> 01:24:40,240\nK average is the same thing,\nbut for your kernel.\n\n1583\n01:24:40,240 --> 01:24:45,790\nSo for the VM kernel, how much time does\nit spend handling a read or a write?\n\n1584\n01:24:45,790 --> 01:24:48,250\nAnd then lastly is G average.\n\n1585\n01:24:48,250 --> 01:24:49,730\nThat's these first two combined.\n\n1586\n01:24:49,730 --> 01:24:53,580\nThat'll be your disk and\nyour kernel averages\n\n1587\n01:24:53,580 --> 01:24:58,010\ncombined into a gross average,\na total average for that read or write.\n\n1588\n01:24:58,010 --> 01:24:58,630\nAll right?\n\n1589\n01:24:58,630 --> 01:25:01,320\nWhat you expect to see here,\nor what I expect to see,\n\n1590\n01:25:01,320 --> 01:25:04,610\nis that your disc average should always\nbe less than 20 milliseconds, right?\n\n1591\n01:25:04,610 --> 01:25:07,290\nThese are in milliseconds,\nso I expect to see reads and\n\n1592\n01:25:07,290 --> 01:25:09,500\nwrites happening in less\nthan 20 milliseconds.\n\n1593\n01:25:09,500 --> 01:25:12,445\nIf it's larger than other than that\nI'm going to see that as a performance\n\n1594\n01:25:12,445 --> 01:25:13,395\ndegradation on the system.\n\n1595\n01:25:14,445 --> 01:25:15,275\nKernel.\n\n1596\n01:25:15,275 --> 01:25:17,765\nThe kernel is really just\ngetting lightly involved,\n\n1597\n01:25:17,765 --> 01:25:19,925\nI expect that to be\nbeneath two milliseconds.\n\n1598\n01:25:19,925 --> 01:25:21,235\nRight, this should be short.\n\n1599\n01:25:21,235 --> 01:25:22,175\nQuick, short and sweet.\n\n1600\n01:25:22,175 --> 01:25:23,905\nGets in gets out all right?\n\n1601\n01:25:23,905 --> 01:25:25,715\nAnd so our G average should\njust be those combined,\n\n1602\n01:25:25,715 --> 01:25:28,382\nI expect to see less than like 22\nto 25 milliseconds, all right?\n\n1603\n01:25:29,660 --> 01:25:33,420\nSo because I know those numbers, because I\nhave those numbers memorized in my head,\n\n1604\n01:25:33,420 --> 01:25:39,080\nI can drop into the shell, run ESX Top and\njust switch right here into this view,\n\n1605\n01:25:39,080 --> 01:25:41,230\nright, I hit D to get to\nthe disk adapter view.\n\n1606\n01:25:41,230 --> 01:25:45,710\nAnd really quick spot,\nis one of my adapters over subscribed?\n\n1607\n01:25:45,710 --> 01:25:49,070\nAm I sending too much disk I/O\nout to one of my adapters?\n\n1608\n01:25:49,070 --> 01:25:51,790\nNow my systems are practically idle, but\n\n1609\n01:25:51,790 --> 01:25:53,750\ntry this in a production system and\nyou'll see.\n\n1610\n01:25:53,750 --> 01:25:56,330\nYou can get some really neat\ninformation out of this.\n\n1611\n01:25:56,330 --> 01:25:59,310\nEspecially when it comes to things like\niSCSI because your iSCSI adapters will\n\n1612\n01:25:59,310 --> 01:26:00,720\nshow up in here also.\n\n1613\n01:26:00,720 --> 01:26:03,830\niSCSI adapters are the first\nones to become saturated.\n\n1614\n01:26:03,830 --> 01:26:06,540\nSo you can recognize if you're\npushing your iSCSI adapter beyond\n\n1615\n01:26:06,540 --> 01:26:07,570\nwhere it should be.\n\n1616\n01:26:07,570 --> 01:26:08,580\nMost people are.\n\n1617\n01:26:08,580 --> 01:26:10,740\niSCSI is just not great for performance.\n\n1618\n01:26:10,740 --> 01:26:14,840\nBut even on a fiber channel SAN,\nyou can push it too far, and\n\n1619\n01:26:14,840 --> 01:26:16,390\nyou'll spot it right here.\n\n1620\n01:26:16,390 --> 01:26:18,890\nThis is such an easy interface to use, and\n\n1621\n01:26:18,890 --> 01:26:22,610\nthe information is right there,\nI typically jump to this one.\n\n1622\n01:26:22,610 --> 01:26:26,060\nAll through the official vm ware\ndocumentation, you'll see where they say,\n\n1623\n01:26:26,060 --> 01:26:30,050\nyeah, use the web client,\nuse those things to go get the data, but\n\n1624\n01:26:30,050 --> 01:26:31,869\nyou just can't beat how\nsimplified this is.\n\n1625\n01:26:33,560 --> 01:26:36,380\nThe other shortcut is Q to quit.\n\n1626\n01:26:36,380 --> 01:26:37,950\nSo, I use three shortcuts.\n\n1627\n01:26:37,950 --> 01:26:42,620\nV to go to virtual machine view,\nD to go to disk doctor view, and\n\n1628\n01:26:42,620 --> 01:26:43,520\nthen Q to quit out.\n\n1629\n01:26:43,520 --> 01:26:45,930\nSo those are my three shortcuts.\n\n1630\n01:26:45,930 --> 01:26:47,990\nAnd I have all this in my show notes.\n\n1631\n01:26:47,990 --> 01:26:49,660\nThey'll be posted with the episodes, so\n\n1632\n01:26:49,660 --> 01:26:52,100\nyou don't have to\nmemorize those shortcuts.\n\n1633\n01:26:52,100 --> 01:26:53,250\nI'll have them posted there.\n\n1634\n01:26:55,630 --> 01:26:56,780\nAll right.\n\n1635\n01:26:56,780 --> 01:27:00,090\nSo I talked a little bit\nabout the vSphere maps and\n\n1636\n01:27:00,090 --> 01:27:03,450\ntalked about disk IO and\ndisk performance in general.\n\n1637\n01:27:04,680 --> 01:27:08,250\nThe last section of this module is\ntalking about high availability,\n\n1638\n01:27:08,250 --> 01:27:13,320\nDRS, vSphere replication, those guys,\nand how we troubleshoot them, all right?\n\n1639\n01:27:13,320 --> 01:27:17,290\nWell vMotion, I showed you a moment ago\nhow it's real easy to go into those maps\n\n1640\n01:27:17,290 --> 01:27:19,810\nand you can see where\nvMotion is not enabled.\n\n1641\n01:27:19,810 --> 01:27:25,940\nThe number one problem that we have with\nthings like vMotion and HA and those guys.\n\n1642\n01:27:25,940 --> 01:27:28,750\nIt usually comes down to\nVM kernel configurations.\n\n1643\n01:27:28,750 --> 01:27:32,170\nRemember when we create\na VM kernel network adapter\n\n1644\n01:27:32,170 --> 01:27:36,050\nthat we have to specify the services\nthat it's able to perform.\n\n1645\n01:27:36,050 --> 01:27:41,260\nSo if I go to a host and I create a\ndedicated v motion network adapter, which\n\n1646\n01:27:41,260 --> 01:27:46,640\nis something a lot of us are going to do\nwhen you create that dedicated adapter,\n\n1647\n01:27:46,640 --> 01:27:51,110\nyou're adding a VM Kernel interface for\nit, and\n\n1648\n01:27:51,110 --> 01:27:55,180\nyou have to choose what features\nyou want that interface to have.\n\n1649\n01:27:55,180 --> 01:28:00,572\nSo if I go down here to networks,\noh no not networks,\n\n1650\n01:28:00,572 --> 01:28:04,875\nshoot, I'm jumping in the wrong place.\n\n1651\n01:28:04,875 --> 01:28:06,390\nManage Networking.\n\n1652\n01:28:06,390 --> 01:28:07,278\nThere we go and\n\n1653\n01:28:07,278 --> 01:28:11,275\nI go to my V Kernel adapters,\nI can add in a new V Kernel adapter and\n\n1654\n01:28:11,275 --> 01:28:15,583\nwhen I add that in I have to pick\nthe services that I want it to provide.\n\n1655\n01:28:15,583 --> 01:28:18,670\nSo, you know I'll stick it\non the same switch for now.\n\n1656\n01:28:18,670 --> 01:28:20,208\nBut this is what I'm looking for\nright here.\n\n1657\n01:28:20,208 --> 01:28:22,360\nVmotion fault tolerance.\n\n1658\n01:28:22,360 --> 01:28:24,123\nAll right, If I don't have Vmotion or\n\n1659\n01:28:24,123 --> 01:28:26,766\nFT turned on for that the adaptor\nis not going to work and so\n\n1660\n01:28:26,766 --> 01:28:30,440\nI need to have that functionality\nturned on in order for this to work.\n\n1661\n01:28:30,440 --> 01:28:33,790\nThe other thing is if I create\na vm kernel adaptor like this and\n\n1662\n01:28:33,790 --> 01:28:37,210\nI don't attach a physical\nadaptor to its v switch,\n\n1663\n01:28:37,210 --> 01:28:39,730\nthen this isn't going to help\nme at all there either, right?\n\n1664\n01:28:39,730 --> 01:28:41,670\nI've got to have a physical\nnetwork adaptor to be able\n\n1665\n01:28:41,670 --> 01:28:43,260\nto get out and function.\n\n1666\n01:28:43,260 --> 01:28:45,380\nNow I attach mine to v switch zero.\n\n1667\n01:28:45,380 --> 01:28:46,630\nI'm going to cancel that.\n\n1668\n01:28:46,630 --> 01:28:49,090\nSo if I attach it to the same v switch.\n\n1669\n01:28:49,090 --> 01:28:52,110\nThen I'm still going to be using the same\nphysical adapter as the other guy.\n\n1670\n01:28:52,110 --> 01:28:54,520\nSo now I have to worry\nabout network intention.\n\n1671\n01:28:54,520 --> 01:28:57,470\nMy vMotion traffic is going to\nbe contending with the regular\n\n1672\n01:28:57,470 --> 01:28:58,560\nvirtual machine traffic.\n\n1673\n01:28:58,560 --> 01:29:02,650\nSo if I'm seeing vMotion\ntransfers take a long time\n\n1674\n01:29:02,650 --> 01:29:05,630\nit usually isn't a problem\nwith the VM itself.\n\n1675\n01:29:05,630 --> 01:29:07,760\nIt's a problem with network bandwidth.\n\n1676\n01:29:07,760 --> 01:29:12,810\nYou got to synchronize RAM between\nthe hosts in order for vMotion to be fast.\n\n1677\n01:29:12,810 --> 01:29:14,250\nAnd if you don't have a dedicated NIC for\n\n1678\n01:29:14,250 --> 01:29:16,250\nthat, it's not going\nto work out very well.\n\n1679\n01:29:16,250 --> 01:29:18,400\nSo on the replication side,\n\n1680\n01:29:18,400 --> 01:29:22,740\non the high availability side,\nit's almost always network bandwidth.\n\n1681\n01:29:22,740 --> 01:29:25,650\nAnd you can monitor that\nin your performance screens\n\n1682\n01:29:25,650 --> 01:29:28,690\nwhen we go under performance it\ndefaults to things like CPU and\n\n1683\n01:29:28,690 --> 01:29:31,220\nmemory, but\nnetwork is buried away in there.\n\n1684\n01:29:31,220 --> 01:29:35,430\nYou'll find it,\nlet's see we've got memory, disks,\n\n1685\n01:29:35,430 --> 01:29:38,190\nCPU, somewhere in here,\nhere we go, network.\n\n1686\n01:29:38,190 --> 01:29:41,650\nSo I can take a look at my network\nbandwidth on this system and\n\n1687\n01:29:41,650 --> 01:29:44,549\ndetermine if I'm saturating it and\nyou'll find a lot of times, you are.\n\n1688\n01:29:46,610 --> 01:29:50,440\nThere are a few other ways to monitor\nthings, especially in a cluster.\n\n1689\n01:29:50,440 --> 01:29:52,250\nSo if I go back to my cluster screen.\n\n1690\n01:29:53,970 --> 01:29:56,600\nNow I've got my system tied\nup generating those reports.\n\n1691\n01:29:56,600 --> 01:30:00,680\nIf I go back to my cluster screen and\nI go to the monitor tab of a cluster,\n\n1692\n01:30:00,680 --> 01:30:04,280\nyou'll see where it's got\nspecific monitoring just for\n\n1693\n01:30:04,280 --> 01:30:08,100\nVSphere replication and\nsome of the others vSphere DRS and HA.\n\n1694\n01:30:08,100 --> 01:30:10,750\nWe'll see them right in here,\nso let me pull up my cluster.\n\n1695\n01:30:12,110 --> 01:30:15,380\nAnd this is another great way to\ntroubleshoot these things and try and find\n\n1696\n01:30:15,380 --> 01:30:20,620\nproblems, so when I go under monitoring\nI'll see vSphere DR.S and vSphere HA.\n\n1697\n01:30:20,620 --> 01:30:25,700\nSo for high availability I can see any\nconfiguration issues that I've got,\n\n1698\n01:30:25,700 --> 01:30:30,120\nso if a VM fails, and\nit doesn't restart somewhere else.\n\n1699\n01:30:30,120 --> 01:30:32,430\nIf it doesn't,\nit'll have an entry here explaining why.\n\n1700\n01:30:32,430 --> 01:30:36,220\nThis is where we would go for\nthat, monitor and then vSphere HA.\n\n1701\n01:30:36,220 --> 01:30:38,600\nYou can check the heartbeat\nhealth right here.\n\n1702\n01:30:38,600 --> 01:30:41,480\nMine's using two different data stores for\nthe heartbeat right now.\n\n1703\n01:30:41,480 --> 01:30:45,560\nAnd I can go into the summary just to\nget an idea of how HA is configured and\n\n1704\n01:30:45,560 --> 01:30:49,310\nhow it's functioning, and\nthe same thing goes for vSphere DRS.\n\n1705\n01:30:49,310 --> 01:30:52,280\nWhen troubleshooting it,\nI can look at the memory utilization,\n\n1706\n01:30:52,280 --> 01:30:55,000\nthat DRS's dealing with as\nit does load balancing.\n\n1707\n01:30:55,000 --> 01:30:59,550\nNotice, I've got Server 4, is carrying\nmore of a workload than Server 3.\n\n1708\n01:30:59,550 --> 01:31:00,610\nAll right.\n\n1709\n01:31:00,610 --> 01:31:03,120\nNow I might look at that and say,\nman that's a big difference.\n\n1710\n01:31:03,120 --> 01:31:06,950\nIt looks like Server 3 is carrying\none-third of the load of Server 4.\n\n1711\n01:31:06,950 --> 01:31:08,950\nAnd I could probably change\nthis to megabytes and\n\n1712\n01:31:08,950 --> 01:31:11,170\nget a better representation of that.\n\n1713\n01:31:11,170 --> 01:31:14,910\nBut, I can see that one server is\ndoing more work than the other.\n\n1714\n01:31:14,910 --> 01:31:16,720\nThat could indicate a problem.\n\n1715\n01:31:16,720 --> 01:31:21,294\nThat could indicate that DRS is not\nfunctioning properly on server 3.\n\n1716\n01:31:22,360 --> 01:31:25,370\nMore likely though, they're probably\neach running one server and\n\n1717\n01:31:25,370 --> 01:31:27,300\nI've just done spec differently,right?\n\n1718\n01:31:27,300 --> 01:31:31,810\nIf I take a look at my\nvirtual machines over here,\n\n1719\n01:31:31,810 --> 01:31:35,860\nI can see I've got three of them and\nonly two of them are on.\n\n1720\n01:31:35,860 --> 01:31:40,230\nOne is appweb1 and one is the Vsphere\napplication of mine all right?\n\n1721\n01:31:40,230 --> 01:31:43,520\nApp Web 1 I've only assigned\none gig of RAM to it.\n\n1722\n01:31:43,520 --> 01:31:45,280\nBut the V Center replication appliance?\n\n1723\n01:31:45,280 --> 01:31:47,230\nI think I gave it four gigs of RAM.\n\n1724\n01:31:47,230 --> 01:31:48,490\nIt's just two VMs.\n\n1725\n01:31:48,490 --> 01:31:50,300\nThat's the best it can balance.\n\n1726\n01:31:50,300 --> 01:31:51,620\nOne VM on one server.\n\n1727\n01:31:51,620 --> 01:31:52,590\nOne VM on the other.\n\n1728\n01:31:52,590 --> 01:31:54,430\nIt can't split a VM in half.\n\n1729\n01:31:54,430 --> 01:31:57,670\nAnd so I'm going to see\nan unbalanced load like this.\n\n1730\n01:31:57,670 --> 01:32:03,100\nSo sometimes that happens and\nthat's just normal, thatâ€™s to be expected.\n\n1731\n01:32:03,100 --> 01:32:07,840\nSo be careful when you read some of these\nreports, that it may look unbalanced,\n\n1732\n01:32:07,840 --> 01:32:09,630\nwhen it actually isn't, all right?\n\n1733\n01:32:09,630 --> 01:32:11,680\nSame thing goes for CPU utilization,\n\n1734\n01:32:11,680 --> 01:32:16,090\nhere you do expect things to be\na little more even, all right.\n\n1735\n01:32:16,090 --> 01:32:18,060\nAnother great page to go to, that I like.\n\n1736\n01:32:18,060 --> 01:32:20,240\nWell, let me finish off this one, right?\n\n1737\n01:32:20,240 --> 01:32:23,420\nWe also have our history so\nwe can see if there's a chain of events.\n\n1738\n01:32:23,420 --> 01:32:26,290\nSometimes you get repetitions\nthings that create a pattern,\n\n1739\n01:32:26,290 --> 01:32:27,940\nbut you've also got faults.\n\n1740\n01:32:27,940 --> 01:32:29,990\nAnd this is typically where I go for DRS.\n\n1741\n01:32:29,990 --> 01:32:35,080\nIf I'm dealing with a DRS problem I go\nto monitor, vSphere DRS, and faults.\n\n1742\n01:32:35,080 --> 01:32:37,560\nIt'll usually tell you exactly\nwhat the problem is right here.\n\n1743\n01:32:38,880 --> 01:32:40,680\nRecommendations though,\nthat's not really troubleshooting.\n\n1744\n01:32:40,680 --> 01:32:43,630\nThat's recommending VMs that you should\nmove around if you're in manual mode.\n\n1745\n01:32:44,850 --> 01:32:48,290\nBut the other one is, when I click on\na cluster, you can go to Monitor, and\n\n1746\n01:32:48,290 --> 01:32:49,490\nSummary.\n\n1747\n01:32:49,490 --> 01:32:53,220\nAnd the Summary screen,\nwhich is buried around here somewhere.\n\n1748\n01:32:56,056 --> 01:32:57,622\nWhere is my Summary screen?\n\n1749\n01:32:57,622 --> 01:33:01,150\nSorry, my summary tab right here.\n\n1750\n01:33:01,150 --> 01:33:01,860\nThere we go.\n\n1751\n01:33:01,860 --> 01:33:05,620\nIf you go to the summary tab,\nyou actually get a neat little\n\n1752\n01:33:05,620 --> 01:33:08,710\npicture about the balancing,\nthere it is, for vSphere DRS.\n\n1753\n01:33:08,710 --> 01:33:10,770\nAnd it's drawn like a liquid level.\n\n1754\n01:33:10,770 --> 01:33:13,300\nAnd so you can see whether\nit's viewed as balanced.\n\n1755\n01:33:13,300 --> 01:33:17,020\nWhen I looked at memory,\nit looked pretty unbalanced didn't it?\n\n1756\n01:33:17,020 --> 01:33:20,220\nOne server was only carrying a third\nof the memory load of the other\n\n1757\n01:33:20,220 --> 01:33:21,450\nserver, the other host.\n\n1758\n01:33:21,450 --> 01:33:22,610\nWell I can look right here and\n\n1759\n01:33:22,610 --> 01:33:26,970\nI can see that it is actually\nbalanced because it's just two VM's.\n\n1760\n01:33:26,970 --> 01:33:28,790\nSo one on one server, one on the other.\n\n1761\n01:33:28,790 --> 01:33:31,200\nSo even though it looks off\nI can see it right here.\n\n1762\n01:33:31,200 --> 01:33:34,060\nYou also get a little summary of DRS but\nI always thought that was a neat little\n\n1763\n01:33:34,060 --> 01:33:36,510\ndiagram because you can\nquickly see whether or\n\n1764\n01:33:36,510 --> 01:33:40,410\nnot you're level and it'll be off onto\nthe side or whatever if it's not balanced.\n\n1765\n01:33:40,410 --> 01:33:42,320\nAnd you can start to find out why.\n\n1766\n01:33:42,320 --> 01:33:44,490\nAll right, you all see it Vsphere HA.\n\n1767\n01:33:44,490 --> 01:33:47,720\nYou can count how many hosts\nare currently being managed by it.\n\n1768\n01:33:47,720 --> 01:33:49,663\nRemember HA is turned\non on a per VM basis so\n\n1769\n01:33:49,663 --> 01:33:52,170\nit doesn't necessarily have to be on for\nall of them.\n\n1770\n01:33:55,375 --> 01:33:56,314\nAll right, so\n\n1771\n01:33:56,314 --> 01:34:02,031\nthat's pretty much about it when it comes\nto disk performance,CPU memory, DRS, and\n\n1772\n01:34:02,031 --> 01:34:08,170\nHA we're usually just jumping right into\nour monitoring tabs to locate our issues.\n\n1773\n01:34:08,170 --> 01:34:13,910\nThe most common cause of unbalancing\nthat I've seen is where a host fails and\n\n1774\n01:34:13,910 --> 01:34:15,830\nwe don't see it yet, all right?\n\n1775\n01:34:15,830 --> 01:34:16,765\nOr sometimes,\n\n1776\n01:34:16,765 --> 01:34:21,005\na host is up, but we think it's down,\nwhich is often times a problem with DNS.\n\n1777\n01:34:21,005 --> 01:34:25,575\nIt's real important to have forward and\nreverse DNS entries for\n\n1778\n01:34:25,575 --> 01:34:29,330\nyour ESX host because that's where\nvCenter is using when it communicates.\n\n1779\n01:34:29,330 --> 01:34:33,990\nSo if you got that off vCenter might not\nbe able to properly resolve the host.\n\n1780\n01:34:33,990 --> 01:34:35,460\nAnd that can cause weird activities.\n\n1781\n01:34:35,460 --> 01:34:38,940\nIt can make it look like the host\nis offline when it's actually on.\n\n1782\n01:34:38,940 --> 01:34:42,140\nVMs might be running but\nvCenter thinks they're down.\n\n1783\n01:34:42,140 --> 01:34:44,250\nAnd it results in\nan unbalanced environment.\n\n1784\n01:34:44,250 --> 01:34:46,226\nSo you have to be careful\nwith things like that too.\n\n1785\n01:34:48,304 --> 01:34:48,896\nAll right.\n\n1786\n01:34:48,896 --> 01:34:52,754\nSo that's basically it for\ntroubleshooting, there's a ton of\n\n1787\n01:34:52,754 --> 01:34:57,112\ntools here and the more you work with\nit the more used to it you get, to know\n\n1788\n01:34:57,112 --> 01:35:01,770\nwhere to go to find the best information\nand I am just scratching the surface.\n\n1789\n01:35:01,770 --> 01:35:05,850\nThere is a ton more out there,\nif you really dig into it,\n\n1790\n01:35:05,850 --> 01:35:07,400\nyou can find all sorts of neat stuff.\n\n1791\n01:35:07,400 --> 01:35:12,330\nThere's the whole VCLI, which is a command\nline interface you can run on your\n\n1792\n01:35:12,330 --> 01:35:16,120\nown machine to fully interact with V\ncenter and do all sorts of stuff there.\n\n1793\n01:35:16,120 --> 01:35:20,330\nThere's RESX top, a remote ESX top\n\n1794\n01:35:20,330 --> 01:35:25,540\nutility you can run that doesn't even\nrequire turning on SSH or the local shell.\n\n1795\n01:35:25,540 --> 01:35:29,410\nThere's a lot of other tools like that,\nthat are really valuable to you, but\n\n1796\n01:35:29,410 --> 01:35:31,670\nwe only have so much time on this one.\n\n1797\n01:35:33,082 --> 01:35:35,580\nAll right, well,\nthat pretty much wraps up troubleshooting.\n\n1798\n01:35:35,580 --> 01:35:38,050\nI know it's a lot, and\na lot of it's common sense, but\n\n1799\n01:35:38,050 --> 01:35:40,620\nthose are the tools that you need\nto be aware of for the exam.\n\n1800\n01:35:41,982 --> 01:35:43,030\nAll right, let me remind you guys,\n\n1801\n01:35:43,030 --> 01:35:46,750\nif you have any questions on\nthis stuff feel free to ask.\n\n1802\n01:35:46,750 --> 01:35:47,270\nRight?\n\n1803\n01:35:47,270 --> 01:35:48,610\nYou can always check out our website.\n\n1804\n01:35:48,610 --> 01:35:50,810\nYou'll see a Q and\nA link at the top of the page.\n\n1805\n01:35:50,810 --> 01:35:52,810\nIt'll take you into the Q and A forums.\n\n1806\n01:35:52,810 --> 01:35:54,430\nPost your question there and\nwe'll get back to you.\n\n1807\n01:35:54,430 --> 01:35:55,320\nAll right.\n\n1808\n01:35:55,320 --> 01:35:57,810\nIf it's live during the show,\ndon't wait for the forums.\n\n1809\n01:35:57,810 --> 01:36:02,100\nGo to itpro.tv/live and you'll see\nthat chat box right beneath the video.\n\n1810\n01:36:02,100 --> 01:36:03,230\nPost your questions.\n\n1811\n01:36:03,230 --> 01:36:04,000\nWe monitor live.\n\n1812\n01:36:04,000 --> 01:36:07,390\nI've got the chatroom pulled up on\na giant monitor here in front of me I\n\n1813\n01:36:07,390 --> 01:36:08,380\ncan't miss it.\n\n1814\n01:36:08,380 --> 01:36:11,410\nWe watch and make sure you guys\nget the information you need.\n\n1815\n01:36:11,410 --> 01:36:13,470\nSo take advantage of that resource.\n\n1816\n01:36:13,470 --> 01:36:14,790\nIt is there for you.\n\n1817\n01:36:14,790 --> 01:36:17,620\nAll right well,\nI hope you guys enjoyed the episode.\n\n1818\n01:36:17,620 --> 01:36:21,537\nSigning out for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n1819\n01:36:21,537 --> 01:36:31,537\n[MUSIC]\n\n",
          "vimeoId": "104102904"
        }
      ],
      "title": "Perform Basic Troubleshooting"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don builds upon the troubleshooting techniques by demonstrating how to properly monitor a vSphere deployment to detect problems before they occur. He begins the show using tools found within the vSphere suite as ends the show demonstrating VMwareâ€™s vCenter Operations Manager.",
          "length": "5532",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/013-Monitoring.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/013-Monitoring-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware/013-Monitoring-sm.jpg",
          "title": "Monitoring",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,784 --> 00:00:37,360\nAll right, good morning, good afternoon,\nand good evening and welcome back.\n\n3\n00:00:37,360 --> 00:00:38,870\nTo another episode of IT Pro TV.\n\n4\n00:00:38,870 --> 00:00:44,404\nI'm your host, Don Pezet, back again with\nanother episode of VMware vSphere five.\n\n5\n00:00:44,404 --> 00:00:45,640\nI shouldn't say another episode.\n\n6\n00:00:45,640 --> 00:00:48,240\nThis is actually gonna\nbe our final episode.\n\n7\n00:00:48,240 --> 00:00:52,271\nWe're moving into our last objective,\nwhich is monitoring a vSphere deployment,\n\n8\n00:00:52,271 --> 00:00:55,446\nand we're gonna take a look at how\nwe can keep an eye on our system and\n\n9\n00:00:55,446 --> 00:00:58,480\nmake sure that it's running at\nthe levels that we expect it to.\n\n10\n00:00:58,480 --> 00:01:01,530\nThis is an interesting topic\ncuz it's really important.\n\n11\n00:01:01,530 --> 00:01:05,500\nGetting a vSphere environment built up,\nreally doesn't take that long.\n\n12\n00:01:05,500 --> 00:01:07,920\nA day, maybe two,\neven in a large environment.\n\n13\n00:01:07,920 --> 00:01:12,030\nOnce it's deployed though,\nyou may spend years running it.\n\n14\n00:01:12,030 --> 00:01:14,540\nMonitoring is what we spend\nmost of our time doing and\n\n15\n00:01:14,540 --> 00:01:18,940\nthis section, this objective set\nreally ties in with the last episode.\n\n16\n00:01:18,940 --> 00:01:22,000\nRemember, the last episode, we did\ntroubleshooting, and we talked about\n\n17\n00:01:22,000 --> 00:01:26,660\nsome of the different areas that can be\npain points inside of ESXI or vCenter,\n\n18\n00:01:26,660 --> 00:01:27,680\nor wherever.\n\n19\n00:01:27,680 --> 00:01:31,380\nWell, on the monitoring side is how we\nsee that those pain points are occurring,\n\n20\n00:01:31,380 --> 00:01:33,300\nthat those problems are out there.\n\n21\n00:01:33,300 --> 00:01:36,960\nWe've gotta be able to see that,\nrealize it, step in and fix the problem,\n\n22\n00:01:36,960 --> 00:01:39,000\nhopefully before our end users notice,\nright?\n\n23\n00:01:39,000 --> 00:01:43,212\nThat's our ultimate goal with all of this\nstuff, that's what we're gonna do today.\n\n24\n00:01:43,212 --> 00:01:46,280\nWe're gonna take a look at some of\nthe monitoring stuff available in vSphere.\n\n25\n00:01:46,280 --> 00:01:48,380\nNow we're gonna start out, the hard way.\n\n26\n00:01:48,380 --> 00:01:48,910\nAll right.\n\n27\n00:01:48,910 --> 00:01:50,630\nWe're gonna monitor things.\n\n28\n00:01:50,630 --> 00:01:51,620\nI call it by hand.\n\n29\n00:01:51,620 --> 00:01:53,600\nYou're not actually doing it by hand.\n\n30\n00:01:53,600 --> 00:01:57,330\nBut you're using the tools\nthat are built in to EXSI, and\n\n31\n00:01:57,330 --> 00:01:58,962\nbuilt in to vSphere and vCenter.\n\n32\n00:01:58,962 --> 00:02:02,550\nWe're gonna see those tools that are kind\nof provided to us as part of the package.\n\n33\n00:02:02,550 --> 00:02:05,130\nYou'll see that you require some\nmanipulation to get them to really work\n\n34\n00:02:05,130 --> 00:02:06,470\nthe way you want.\n\n35\n00:02:06,470 --> 00:02:10,810\nWe're gonna end the show taking a look\nat another product that VMware has,\n\n36\n00:02:10,810 --> 00:02:14,220\ncalled the vCenter Operations Manager,\nvCOP.\n\n37\n00:02:14,220 --> 00:02:17,370\nAnd what it is is a software\nsuite that's specifically built\n\n38\n00:02:17,370 --> 00:02:20,920\nto monitor your environment so\nyou don't have to do things by hand.\n\n39\n00:02:20,920 --> 00:02:23,780\nYou don't have to know all the performance\ncounters, that software can do it for\n\n40\n00:02:23,780 --> 00:02:24,500\nyou, right?\n\n41\n00:02:24,500 --> 00:02:25,700\nAssuming you've got the cash.\n\n42\n00:02:25,700 --> 00:02:28,550\n[LAUGH] We'll look at\nwhat's built in first and\n\n43\n00:02:28,550 --> 00:02:31,020\nthen we'll move into the fancy\nstuff at the end of the show.\n\n44\n00:02:31,020 --> 00:02:34,870\nAll right, so\nlet's talk about vCenter itself, right?\n\n45\n00:02:34,870 --> 00:02:36,710\nWhat is built in there and\nwhat can we work with?\n\n46\n00:02:36,710 --> 00:02:41,020\nWell, you guys have seen me using\nvCenter all throughout this show, right?\n\n47\n00:02:41,020 --> 00:02:43,810\nThat's been where I've been working, and\n\n48\n00:02:43,810 --> 00:02:47,299\nwhat we've been working with mostly are\njust individual actions that I performed,\n\n49\n00:02:48,310 --> 00:02:53,390\nand on the right side over here where I\nstart to see some things like my alarms.\n\n50\n00:02:53,390 --> 00:02:55,010\nLet me just collapse this here.\n\n51\n00:02:55,010 --> 00:02:56,410\nI can see my alarms over here.\n\n52\n00:02:56,410 --> 00:02:59,510\nI talked about those in\nthe troubleshooting show.\n\n53\n00:02:59,510 --> 00:03:02,940\nThe alarms are a great way to see that\nthere's an issue with your system.\n\n54\n00:03:02,940 --> 00:03:04,870\nThese alarms,\nthey're actually called events.\n\n55\n00:03:04,870 --> 00:03:08,240\nThese are events that are occurring\non the system now,there's different\n\n56\n00:03:08,240 --> 00:03:09,560\ntypes of events that happen.\n\n57\n00:03:09,560 --> 00:03:10,830\nThere's critical ones, right?\n\n58\n00:03:10,830 --> 00:03:13,450\nBy the time you get an alarm like this,\nthat's a critical event.\n\n59\n00:03:13,450 --> 00:03:15,300\nSomething bad has happened, right?\n\n60\n00:03:15,300 --> 00:03:16,930\nOr maybe you'll get a warning, but\n\n61\n00:03:16,930 --> 00:03:20,030\nthere's also just informational\nevents that are happening.\n\n62\n00:03:20,030 --> 00:03:21,910\nJust general status messages and\n\n63\n00:03:21,910 --> 00:03:25,960\nthings that are going on behind the scenes\nin the system, the events are simply\n\n64\n00:03:25,960 --> 00:03:29,560\nways to notify us and let us know that\ncertain events are happening, that certain\n\n65\n00:03:29,560 --> 00:03:33,510\nactions are happening on the system\nthat may or may not need our attention.\n\n66\n00:03:34,850 --> 00:03:36,100\nThat's just an ongoing thing.\n\n67\n00:03:37,130 --> 00:03:42,015\nBut, most events are gonna be in result\nof a task that you perform, right?\n\n68\n00:03:42,015 --> 00:03:45,585\nSee I've got my recent tasks up here and\nyou'll see anything that's running or\n\n69\n00:03:45,585 --> 00:03:49,195\nfailed or whatever and\nas we work inside of our system,\n\n70\n00:03:49,195 --> 00:03:53,905\nif I go into like a host and\nI tell it to re-scan it's storage, right?\n\n71\n00:03:53,905 --> 00:03:55,950\nI'll go in here and I'll just pick a host.\n\n72\n00:03:55,950 --> 00:03:59,600\nLike ESX server two, and\n\n73\n00:03:59,600 --> 00:04:03,850\nI'll go into this guy's storage,\nand I'll tell it to rescan, okay?\n\n74\n00:04:03,850 --> 00:04:06,030\nHere I am under storage devices, and\n\n75\n00:04:06,030 --> 00:04:08,430\nas soon as it catches up with\nme I'll hit the rescan button.\n\n76\n00:04:08,430 --> 00:04:11,660\nAnd what it's doing is basically I'm\ntelling the system hey you need to\n\n77\n00:04:11,660 --> 00:04:13,960\nrescan and\nlook if there's any new storage.\n\n78\n00:04:13,960 --> 00:04:16,460\nAnd you'll see that\ntask appear over there.\n\n79\n00:04:16,460 --> 00:04:18,360\nI just created a task.\n\n80\n00:04:18,360 --> 00:04:19,980\nNow, the task may succeed, it may fail.\n\n81\n00:04:19,980 --> 00:04:21,310\nHopefully it will succeed.\n\n82\n00:04:21,310 --> 00:04:23,030\nAnd if it does, it will just disappear.\n\n83\n00:04:23,030 --> 00:04:25,900\nBut, if it fails, it will jump right\nover here and I'll get a little note\n\n84\n00:04:25,900 --> 00:04:29,460\nletting me know that and\nI can then react upon it, if I want.\n\n85\n00:04:29,460 --> 00:04:32,970\nIf I stay under the all tab, I'll see\nit right here, while it's running and\n\n86\n00:04:32,970 --> 00:04:35,960\nwhile it failed, so\nI kind of get it in both places.\n\n87\n00:04:35,960 --> 00:04:38,740\nThose tasks,\nwe've been doing them the whole show.\n\n88\n00:04:38,740 --> 00:04:41,230\nRight?\nAll along, I've been creating these tasks.\n\n89\n00:04:41,230 --> 00:04:43,690\nThe thing that I haven't\nshown you about these though,\n\n90\n00:04:43,690 --> 00:04:46,210\nis that we can actually schedule.\n\n91\n00:04:46,210 --> 00:04:49,460\nI may not want to perform\na certain action right now.\n\n92\n00:04:49,460 --> 00:04:54,295\nI might want to perform that action\ntonight at midnight, or on Sunday at 3:00\n\n93\n00:04:54,295 --> 00:04:58,970\nA.M. well I don't want to be\nhere on Sunday at 3:00 A.M.\n\n94\n00:04:58,970 --> 00:05:01,040\nI wanna be at home asleep, right?\n\n95\n00:05:01,040 --> 00:05:04,510\nIt's nice to be able to schedule\nevents to happen at a certain time.\n\n96\n00:05:04,510 --> 00:05:09,070\nIt's especially nice if you're\ndealing with resource limitations.\n\n97\n00:05:09,070 --> 00:05:13,530\nIf your company is open for\nbusiness from 8 AM to 5 PM,\n\n98\n00:05:13,530 --> 00:05:16,840\nyour systems are gonna be really\nbusy in that window of time.\n\n99\n00:05:16,840 --> 00:05:19,570\nYou don't wanna burden your\nsystems during peak time,\n\n100\n00:05:19,570 --> 00:05:21,720\ntaking resources away from your end users.\n\n101\n00:05:21,720 --> 00:05:24,810\nInstead you might wanna schedule\nyour activities to run at night, or\n\n102\n00:05:24,810 --> 00:05:29,290\nat non peak time, so your end users have\nthe maximum performance available to them.\n\n103\n00:05:29,290 --> 00:05:33,330\nThese tasks, we can actually schedule\nthem to run whenever we want.\n\n104\n00:05:34,880 --> 00:05:38,740\nThe way we do that, is you pick what\nsystem it is that you want to modify, so\n\n105\n00:05:38,740 --> 00:05:41,890\nI'm going to here and do ESX server two.\n\n106\n00:05:41,890 --> 00:05:45,030\nAnd I'm going under manage.\n\n107\n00:05:45,030 --> 00:05:49,990\nAnd what you'll see in here is all the\nvarious things that I can kind of perform.\n\n108\n00:05:49,990 --> 00:05:52,500\nVarious activities, any of these things.\n\n109\n00:05:52,500 --> 00:05:53,080\nIf I go in and\n\n110\n00:05:53,080 --> 00:05:57,600\nstart to work with these, these are all\nthings that are gonna happen right now.\n\n111\n00:05:57,600 --> 00:05:59,872\nThese aren't things that\nare gonna happen later.\n\n112\n00:05:59,872 --> 00:06:02,970\nThey're gonna happen now and\nthat's a bit of a.\n\n113\n00:06:02,970 --> 00:06:07,990\nA problem if I don't want to effect\na system at this very moment.\n\n114\n00:06:09,180 --> 00:06:12,020\nWhat you'll see is that under some\nobjects when we go under manage\n\n115\n00:06:12,020 --> 00:06:15,900\nyou'll see an entry like this\nthat says scheduled tasks.\n\n116\n00:06:15,900 --> 00:06:16,540\nAll right.\n\n117\n00:06:16,540 --> 00:06:20,180\nAnd it's under scheduled tasks,\nthat we can set activities to happen and\n\n118\n00:06:20,180 --> 00:06:21,650\nmake them occur at a certain point.\n\n119\n00:06:21,650 --> 00:06:25,330\nAll right, now you'll notice that I\ndon't always have scheduled tasks.\n\n120\n00:06:25,330 --> 00:06:28,740\nWhen I go to this host looking\nat the host under Manage,\n\n121\n00:06:28,740 --> 00:06:34,370\nI don't have schedule task, but when I\nlook under a VM, like app web three, I do.\n\n122\n00:06:34,370 --> 00:06:38,350\nAnd that's because there's only a subset\nof commands that we're actually able to\n\n123\n00:06:38,350 --> 00:06:40,960\nschedule and\nthey don't really apply to the host.\n\n124\n00:06:40,960 --> 00:06:42,620\nSo that's why I don't see those there.\n\n125\n00:06:42,620 --> 00:06:44,740\nBut here on app web three I see a list.\n\n126\n00:06:44,740 --> 00:06:47,040\nAnd right now it's empty,\nbut I can come in and\n\n127\n00:06:47,040 --> 00:06:49,590\nI can create tasks that\ndo all sorts of things.\n\n128\n00:06:49,590 --> 00:06:51,980\nI can shut down the guest O/S or\nrestart it.\n\n129\n00:06:51,980 --> 00:06:54,590\nI can power off the guest O/S or\nsuspend it.\n\n130\n00:06:54,590 --> 00:06:55,470\nNow.\n\n131\n00:06:55,470 --> 00:06:57,700\nNow, power off versus shut down.\n\n132\n00:06:57,700 --> 00:07:00,240\nPower off means I'm yanking\nthe power out of it and\n\n133\n00:07:00,240 --> 00:07:03,690\njust turning it off, but\nshut down the guest O/S,\n\n134\n00:07:03,690 --> 00:07:08,155\nif we've got the VM tools installed,\nit will gracefully shut down that O/S.\n\n135\n00:07:08,155 --> 00:07:11,555\nIf you don't have the VM Tools installed\nthen that shutdown guest O/S won't work,\n\n136\n00:07:11,555 --> 00:07:13,665\nand so\nthat's why you've got power off also.\n\n137\n00:07:13,665 --> 00:07:14,905\nWe've got Reset.\n\n138\n00:07:14,905 --> 00:07:18,595\nWe also have things like Migrate,\nand that's one that I make use of.\n\n139\n00:07:18,595 --> 00:07:19,235\nAll right?\n\n140\n00:07:19,235 --> 00:07:24,175\nIf you have a failure in the middle of\nthe day then HA, High Availability, or\n\n141\n00:07:24,175 --> 00:07:25,825\nyou might do this by hand with vMotion.\n\n142\n00:07:25,825 --> 00:07:28,995\nYou may need to move a VM\nfrom one host to another.\n\n143\n00:07:28,995 --> 00:07:32,110\nSome failure happened during the day,\nso you need to move that host.\n\n144\n00:07:32,110 --> 00:07:33,880\nOr that guest, all right?\n\n145\n00:07:33,880 --> 00:07:35,860\nWell, then you fix the problem.\n\n146\n00:07:35,860 --> 00:07:39,780\nAnd so you'd like to move the guest\nback to the host that it was on before.\n\n147\n00:07:39,780 --> 00:07:42,390\nBut you don't want to do it in the middle\nof the day, people are in there, right?\n\n148\n00:07:42,390 --> 00:07:45,070\nPeople have already been inconvenienced\nbecause of the failure, so\n\n149\n00:07:45,070 --> 00:07:46,940\nyou wanna minimize that impact.\n\n150\n00:07:46,940 --> 00:07:48,960\nI might want to migrate it at night.\n\n151\n00:07:49,990 --> 00:07:54,345\nWait until tonight and\nthen move it from one host to another and\n\n152\n00:07:54,345 --> 00:07:56,538\nget it put where it needs to be.\n\n153\n00:07:56,538 --> 00:07:59,555\nOr I might have a guest\nthat's not in a cluster and\n\n154\n00:07:59,555 --> 00:08:02,300\nI might want to move it in to a cluster.\n\n155\n00:08:02,300 --> 00:08:04,124\nAnd again, I want that to happen at night,\n\n156\n00:08:04,124 --> 00:08:07,540\nI don't want it to happen while people\nare in the system under heavy load.\n\n157\n00:08:07,540 --> 00:08:10,140\nIt's all about balancing resources.\n\n158\n00:08:10,140 --> 00:08:14,780\nYou'll see we've also got Clone the\nVirtual Machine, Edit particular settings,\n\n159\n00:08:14,780 --> 00:08:18,830\nand Take a Snapshot, all different\nthings that pertain to this VM.\n\n160\n00:08:18,830 --> 00:08:20,770\nAll right.\n\n161\n00:08:20,770 --> 00:08:21,690\nSo maybe appweb3.\n\n162\n00:08:21,690 --> 00:08:26,950\nMaybe this is a special web server that\nis just available during peak time.\n\n163\n00:08:26,950 --> 00:08:30,160\nSo I need it to run from\n8:00 AM to 5:00 PM everyday.\n\n164\n00:08:30,160 --> 00:08:37,340\nSo I might create a scheduled activity\nhere that says something like, shut down\n\n165\n00:08:37,340 --> 00:08:42,651\nguest OS at 5:00 PM because I don't\nwant this machine running after 5:00 PM.\n\n166\n00:08:42,651 --> 00:08:45,690\nSo here's my general summary there and\nthen under Scheduling,\n\n167\n00:08:45,690 --> 00:08:48,130\nI can set the actual schedule.\n\n168\n00:08:48,130 --> 00:08:50,120\nSo I will come in and\njust tell it to schedule it to run.\n\n169\n00:08:50,120 --> 00:08:54,320\nI want it recurring, daily,\n\n170\n00:08:54,320 --> 00:09:00,210\nevery one day at 5:00 PM, all right?\n\n171\n00:09:00,210 --> 00:09:05,870\nSo now everyday at 5:00 PM,\nthis virtual machine will shutdown, okay?\n\n172\n00:09:05,870 --> 00:09:08,500\nSo it's gonna add that little\ntask entry right there and\n\n173\n00:09:08,500 --> 00:09:10,350\nnow it's in business, okay?\n\n174\n00:09:10,350 --> 00:09:13,720\nEvery day at 5:00 PM it'll shutdown and\nif I wanna run that right now,\n\n175\n00:09:13,720 --> 00:09:17,070\nI can come up here and click on it and\nhit Run, and it's gonna perform it.\n\n176\n00:09:17,070 --> 00:09:19,900\nIt's always a good idea to do this,\nto test it out.\n\n177\n00:09:19,900 --> 00:09:23,850\nBecause maybe I don't have the VM\ntools installed on that guest.\n\n178\n00:09:23,850 --> 00:09:26,410\nAnd if I don't, I'm gonna try and shut\nit down here and it's not going to work.\n\n179\n00:09:26,410 --> 00:09:29,900\nThe machine is going to stay up and\nthen I've got to address that.\n\n180\n00:09:29,900 --> 00:09:32,396\nSo a good way to test it if\nyou can before you deploy it.\n\n181\n00:09:32,396 --> 00:09:35,370\nI'm gonna open its console and\nsee if it is shutting down.\n\n182\n00:09:37,460 --> 00:09:39,540\nLet's give it just a moment here.\n\n183\n00:09:39,540 --> 00:09:42,890\nAnd so once it shut down,\nI know that worked,\n\n184\n00:09:42,890 --> 00:09:49,030\nthen I can create a scheduled task that\nsays start it up at a certain time.\n\n185\n00:09:49,030 --> 00:09:52,595\nPower it on at 8:00 AM and\nthen we'll make sure that that runs too.\n\n186\n00:09:52,595 --> 00:09:54,680\n[LAUGH] I always have\na hard time saying task.\n\n187\n00:09:54,680 --> 00:09:59,290\nI also do a show on project management,\nPMP.\n\n188\n00:09:59,290 --> 00:10:04,030\nAnd on the PMP exam, they absolutely\ndon't want you to use the word task.\n\n189\n00:10:04,030 --> 00:10:05,920\nThey always want you to\nuse the word activity.\n\n190\n00:10:05,920 --> 00:10:07,790\nAnd, so\nI've kind of burned that into my mind.\n\n191\n00:10:07,790 --> 00:10:11,810\nAnd then you come over here to VMWare,\nand in VMWare, you have scheduled tasks.\n\n192\n00:10:11,810 --> 00:10:15,492\nAnd I always have to remember\nto say tasks and not activity.\n\n193\n00:10:15,492 --> 00:10:18,510\nAll right so, anyhow it looks\nlike it's shutting down cuz\n\n194\n00:10:18,510 --> 00:10:21,250\nI can't view the console, so\nwe'll give it a moment there.\n\n195\n00:10:21,250 --> 00:10:24,060\nNow you'll notice it's\nkind of a little quirk.\n\n196\n00:10:24,060 --> 00:10:27,280\nIf I go to schedule a new task for\nthis virtual machine,\n\n197\n00:10:27,280 --> 00:10:29,700\nsee how powered on is grayed out?\n\n198\n00:10:29,700 --> 00:10:32,600\nThat's because the machine is already on.\n\n199\n00:10:32,600 --> 00:10:33,530\nSo I actually have to wait for\n\n200\n00:10:33,530 --> 00:10:37,590\nthe virtual machine to shut down before\nit will let me create the power on task.\n\n201\n00:10:37,590 --> 00:10:39,520\nAnd I guess I don't need to do it,\nyou guys have seen it.\n\n202\n00:10:39,520 --> 00:10:42,408\nBut you can create one that says\npower it on everyday at 8:00 AM, and\n\n203\n00:10:42,408 --> 00:10:44,440\npower it off everyday at 5:00 PM.\n\n204\n00:10:44,440 --> 00:10:48,120\nSo now here is this extra server that\nis being brought up when I need it and\n\n205\n00:10:48,120 --> 00:10:50,710\ntaken down after peak time so\nit's not there.\n\n206\n00:10:50,710 --> 00:10:55,410\nAnd you can do any of these various tasks.\n\n207\n00:10:55,410 --> 00:10:59,720\nScheduling tasks like these is a nice way\nto maintain our system cuz we can kind of\n\n208\n00:10:59,720 --> 00:11:03,100\nremove the burden of performing\ntasks during a peak time.\n\n209\n00:11:05,460 --> 00:11:07,900\nBut how do we know when peak time is?\n\n210\n00:11:07,900 --> 00:11:10,820\nThat's really what monitoring\nboils down to, is knowing when\n\n211\n00:11:10,820 --> 00:11:14,500\nyour systems are being over burdened and\nwhen they're just sitting there idle.\n\n212\n00:11:14,500 --> 00:11:17,150\nAnd for that we've got a ton of\n\n213\n00:11:17,150 --> 00:11:21,520\nperformance metrics spread all throughout\nvCenter and the vSphere Web Client.\n\n214\n00:11:21,520 --> 00:11:22,050\nAll right?\n\n215\n00:11:22,050 --> 00:11:25,540\nAlso through the vSphere client\nitself if you want to use that.\n\n216\n00:11:25,540 --> 00:11:28,800\nI know I mentioned in the last episode\nthat when it comes to performance,\n\n217\n00:11:28,800 --> 00:11:30,830\nthe vSphere client will pull up charts and\n\n218\n00:11:30,830 --> 00:11:33,060\nthings a lot faster than\nthe vSphere Web Client.\n\n219\n00:11:33,060 --> 00:11:35,050\nThe vSphere Web Client's pretty slow.\n\n220\n00:11:35,050 --> 00:11:37,760\nI'm gonna use it anyway because\nthat is what's on the exam so\n\n221\n00:11:37,760 --> 00:11:39,280\nwe need to be aware of it.\n\n222\n00:11:39,280 --> 00:11:41,990\nYou'll notice when you go to\npretty much any object in here,\n\n223\n00:11:41,990 --> 00:11:46,720\nwhether it's a host or\na guest BM that you've got a Monitor Tab.\n\n224\n00:11:46,720 --> 00:11:50,820\nAnd under the Monitor Tab you'll see\nthings like your tasks and events.\n\n225\n00:11:50,820 --> 00:11:51,360\nRight?\n\n226\n00:11:51,360 --> 00:11:54,560\nHere's my events, here's things\nthat have happened on this system.\n\n227\n00:11:54,560 --> 00:11:57,720\nAnd a lot of these might not be very\ncritical, like here I've got a guest\n\n228\n00:11:57,720 --> 00:12:01,160\nshutdown happening, that's the guest\nshutdown I sent just a moment ago.\n\n229\n00:12:01,160 --> 00:12:02,690\nAnd then we've got a few other things.\n\n230\n00:12:02,690 --> 00:12:06,500\nActually it's showing here that the guest\nis already shut down, although I still\n\n231\n00:12:06,500 --> 00:12:10,970\nhave my little play button over here,\nso it hasn't quite recognized it yet.\n\n232\n00:12:10,970 --> 00:12:12,370\nSo, you'll see that information.\n\n233\n00:12:12,370 --> 00:12:16,040\nSome of these don't require\nany action whatsoever.\n\n234\n00:12:16,040 --> 00:12:18,200\nEvery now and then you'll see\na critical event in here though,\n\n235\n00:12:18,200 --> 00:12:20,710\nwhich is one that you'll\nneed to take action on.\n\n236\n00:12:20,710 --> 00:12:24,540\nAnd under tasks we can see the tasks\nthat have happened, right?\n\n237\n00:12:24,540 --> 00:12:26,450\nThese will be the ones\nthat we've scheduled and\n\n238\n00:12:26,450 --> 00:12:28,110\nthe ones that we've run in real time.\n\n239\n00:12:28,110 --> 00:12:30,800\nSo you'll see each of those\nkind of listed in here.\n\n240\n00:12:32,190 --> 00:12:34,420\nBut the one that I'm after is\nthis tab right here, Performance.\n\n241\n00:12:35,490 --> 00:12:40,130\nUnder performance,\nI get what are called the overview charts.\n\n242\n00:12:40,130 --> 00:12:43,600\nThe overview performance charts\nare showing me my big four metrics.\n\n243\n00:12:43,600 --> 00:12:48,050\nWhen you monitor any server, it doesn't\nmatter if it's Linux, Windows, Mac OS,\n\n244\n00:12:48,050 --> 00:12:51,960\nthey all use the same big four metrics.\n\n245\n00:12:51,960 --> 00:12:56,390\nProcessor, memory, disc, network.\n\n246\n00:12:56,390 --> 00:12:58,200\nThose are the four main components.\n\n247\n00:12:58,200 --> 00:13:00,210\nProcessor, that's your CPU.\n\n248\n00:13:00,210 --> 00:13:02,910\nYou might have one or more than one.\n\n249\n00:13:02,910 --> 00:13:05,800\nEach CPU may have one core or\nmultiple cores.\n\n250\n00:13:05,800 --> 00:13:08,200\nBut it doesn't matter as\nyou run your applications,\n\n251\n00:13:08,200 --> 00:13:12,470\nas you run guest OSs,\nthey're consuming processor resources.\n\n252\n00:13:12,470 --> 00:13:14,390\nSo, how much of it is available?\n\n253\n00:13:14,390 --> 00:13:17,920\nIs my processor being overtaxed or\nit sitting there idle, right?\n\n254\n00:13:17,920 --> 00:13:19,220\nI need to know about my CPU.\n\n255\n00:13:20,310 --> 00:13:22,660\nMemory, that's my RAM, right?\n\n256\n00:13:22,660 --> 00:13:25,440\nHow much RAM are my\nvirtual machines using.\n\n257\n00:13:25,440 --> 00:13:29,020\nAnd if they've consumed all the RAM,\nam I starting to use a page file,\n\n258\n00:13:29,020 --> 00:13:30,700\nam I using a hard drive as memory, right?\n\n259\n00:13:30,700 --> 00:13:32,450\nThat really slows things down.\n\n260\n00:13:32,450 --> 00:13:35,240\nSo I need to know how much memory\nI've got available at any given time.\n\n261\n00:13:36,330 --> 00:13:38,540\nNetwork, I need to know\nmy network bandwidth.\n\n262\n00:13:38,540 --> 00:13:42,710\nIf I've got a bunch of virtual machines\nsharing the same physical network adapter,\n\n263\n00:13:42,710 --> 00:13:47,090\nif one of them sucks up all the bandwidth,\nthe other guys are gonna lose out right?\n\n264\n00:13:47,090 --> 00:13:49,340\nSo it's gonna start\ndegrading performance there.\n\n265\n00:13:49,340 --> 00:13:50,970\nAnd then lastly disk.\n\n266\n00:13:50,970 --> 00:13:52,621\nDisk or really disk I/O,\n\n267\n00:13:52,621 --> 00:13:57,442\ninput/output, that is the number\none bottleneck on most servers.\n\n268\n00:13:57,442 --> 00:14:00,310\nNot all, some servers don't\nuse their disks all that much.\n\n269\n00:14:00,310 --> 00:14:04,370\nBut database servers,\nemail servers, file servers,\n\n270\n00:14:04,370 --> 00:14:08,450\nthey all make use of disk\naccess like crazy, and\n\n271\n00:14:08,450 --> 00:14:13,120\nhard drives are typically the slowest\npiece of equipment inside of your server.\n\n272\n00:14:13,120 --> 00:14:15,900\nIt's also one of the only\nmoving parts left behind.\n\n273\n00:14:15,900 --> 00:14:21,210\nYour processor and your RAM they're\nall solid state, electronical motion,\n\n274\n00:14:21,210 --> 00:14:23,210\nyou've got transistors that\nare mounted inside of there.\n\n275\n00:14:23,210 --> 00:14:25,470\nSo it's electrical impulses,\nthat's how they work.\n\n276\n00:14:26,530 --> 00:14:27,900\nYour network card, same thing,\n\n277\n00:14:27,900 --> 00:14:31,950\nelectrical impulses sent over\ncopper wire or whatever.\n\n278\n00:14:31,950 --> 00:14:33,350\nBut your hard drive?\n\n279\n00:14:33,350 --> 00:14:36,060\nIt's platters,\nphysical disks that are spinning around,\n\n280\n00:14:36,060 --> 00:14:39,770\nand there's a magnetic arm that's\ngotta move around to read that data.\n\n281\n00:14:39,770 --> 00:14:42,690\nAnd that means the seek times take longer.\n\n282\n00:14:42,690 --> 00:14:44,760\nWe measure RAM speeds in nanoseconds.\n\n283\n00:14:44,760 --> 00:14:46,840\nWe measure hard drive speeds\nin milliseconds, right.\n\n284\n00:14:46,840 --> 00:14:48,640\nIt's an order of magnitude different.\n\n285\n00:14:48,640 --> 00:14:51,400\nSo hard drives are typically\nour biggest bottleneck.\n\n286\n00:14:51,400 --> 00:14:55,780\nThere's also only one arm on a hard drive\nwhen it's going to read the platters.\n\n287\n00:14:55,780 --> 00:14:59,270\nSo it can only be reading\nfrom one place at a time.\n\n288\n00:14:59,270 --> 00:15:01,870\nRAM can actually read from more\nthan one place at the same time,\n\n289\n00:15:01,870 --> 00:15:03,490\nyour hard drive can't, all right?\n\n290\n00:15:03,490 --> 00:15:04,870\nThat's why people have been pushing so\n\n291\n00:15:04,870 --> 00:15:07,680\nhard to go to SSD to\nsolid-state digital storage.\n\n292\n00:15:07,680 --> 00:15:10,720\nWith SSD you get the benefits\nof RAM in your regular storage.\n\n293\n00:15:10,720 --> 00:15:13,140\nAnd it makes a huge difference.\n\n294\n00:15:13,140 --> 00:15:16,900\nBut most servers today still have\ntraditional spinning hard drives.\n\n295\n00:15:16,900 --> 00:15:18,730\nSo that's our big bottleneck there.\n\n296\n00:15:18,730 --> 00:15:22,020\nIf you have two virtual machines writing\nto the same hard drive at the same time,\n\n297\n00:15:22,020 --> 00:15:25,610\nthe same physical hard drive, well,\nthey're fighting for access to that\n\n298\n00:15:25,610 --> 00:15:29,570\nmagnetic arm to be able to write or\nread data from a sector on the drive.\n\n299\n00:15:29,570 --> 00:15:32,325\nSo we need to keep an eye on disc I/O.\n\n300\n00:15:32,325 --> 00:15:34,590\nAnd the performance\noverview shows us that.\n\n301\n00:15:35,720 --> 00:15:37,020\nWe got our CPU right here.\n\n302\n00:15:37,020 --> 00:15:39,100\nI can see this server is practically dead.\n\n303\n00:15:39,100 --> 00:15:44,460\nIt's been cruising along at just\nabove 0%percent for several days now.\n\n304\n00:15:46,200 --> 00:15:48,502\nIf I keep scrolling down I'll see memory.\n\n305\n00:15:48,502 --> 00:15:49,779\nHere's my RAM utilization.\n\n306\n00:15:49,779 --> 00:15:53,610\nI can see that in this server I've got\na certain amount of memory and right now.\n\n307\n00:15:53,610 --> 00:15:55,427\nI am almost flat-lining on it, right.\n\n308\n00:15:55,427 --> 00:16:00,270\nAPP-Web three, I think I only\nassigned a gig of memory to it.\n\n309\n00:16:00,270 --> 00:16:02,280\nBut it's showing basically reads and\n\n310\n00:16:02,280 --> 00:16:05,890\nusage against that memory, and\nit's measuring it in megabytes per second.\n\n311\n00:16:05,890 --> 00:16:08,760\nHow much memory am I reading and\nwriting per second?\n\n312\n00:16:08,760 --> 00:16:12,535\nThat server is turned off and\nso it's just kind of idle.\n\n313\n00:16:12,535 --> 00:16:19,499\nWell, it was supposed to be off but\nit says here that it is still powered on.\n\n314\n00:16:19,499 --> 00:16:20,382\nI may have killed it.\n\n315\n00:16:20,382 --> 00:16:21,910\nLet me see if its console ever came up.\n\n316\n00:16:27,640 --> 00:16:30,800\nNope, yeah it looks like its kind of\ncaught in some kind of weird state.\n\n317\n00:16:30,800 --> 00:16:32,390\nLet me take another\nserver that is powered.\n\n318\n00:16:32,390 --> 00:16:35,410\nActually I'll take my vCenter\nserver cuz I know it's doing work.\n\n319\n00:16:35,410 --> 00:16:36,750\nWhere did I put that thing?\n\n320\n00:16:36,750 --> 00:16:37,250\nThat is here.\n\n321\n00:16:38,710 --> 00:16:41,100\nHere we go, this is the server\nI'm running vCenter on so\n\n322\n00:16:41,100 --> 00:16:44,210\nI know it's generating RAM and\nprocessor and so on.\n\n323\n00:16:44,210 --> 00:16:45,200\nI'll let that load.\n\n324\n00:16:45,200 --> 00:16:49,760\nBut, so we have CPU, we have memory and\nif we keep scrolling down we'll see even\n\n325\n00:16:49,760 --> 00:16:53,840\nmore as it shows disk and network too,\ngiving us the units of measure.\n\n326\n00:16:53,840 --> 00:16:55,580\nSome of them have more than one chart.\n\n327\n00:16:55,580 --> 00:16:58,180\nYou'll actually see I've got some\nother charts over here on the side.\n\n328\n00:16:58,180 --> 00:17:01,680\nSome of them just have on chart, based\non whatever it is that we're monitoring.\n\n329\n00:17:02,740 --> 00:17:07,070\nHere's its megabytes per second, which it\nlooks pretty flat-lined on that one too.\n\n330\n00:17:07,070 --> 00:17:09,370\nCPU utilization is a little higher.\n\n331\n00:17:09,370 --> 00:17:11,310\nAnd if I keep going down, here we go.\n\n332\n00:17:11,310 --> 00:17:13,050\nOf memory percent utilized.\n\n333\n00:17:13,050 --> 00:17:17,901\nI can see that at some points I have\nused almost 50% of my memory, right,\n\n334\n00:17:17,901 --> 00:17:19,920\n42.5% is my record peak.\n\n335\n00:17:19,920 --> 00:17:23,170\nBut on average, I am averaging\nsomething much, much lower, right?.\n\n336\n00:17:23,170 --> 00:17:27,590\nIt looks like I'm averaging around\n15 megabytes of actual memory.\n\n337\n00:17:27,590 --> 00:17:28,860\nI mean 15.\n\n338\n00:17:28,860 --> 00:17:32,650\nYeah, 15 megabytes, or\n15% of the memory assigned.\n\n339\n00:17:32,650 --> 00:17:34,700\nSorry, let me get my\nunits of measure right.\n\n340\n00:17:36,010 --> 00:17:37,700\nAnd then down here I've\ngot my network bandwidth.\n\n341\n00:17:37,700 --> 00:17:41,960\nYou can see I've got a big spike, that\nwas probably me copying an isoimage or\n\n342\n00:17:41,960 --> 00:17:44,000\nan OVF template onto the server.\n\n343\n00:17:44,000 --> 00:17:47,245\nBut otherwise my network connectivity\nhas been near flat-lined.\n\n344\n00:17:48,840 --> 00:17:49,770\nAll right.\n\n345\n00:17:49,770 --> 00:17:52,690\nNow these counters right here\nas we start to look at them.\n\n346\n00:17:52,690 --> 00:17:57,600\nThe default is to show a one day summary,\nso I'm seeing what things look like today.\n\n347\n00:17:57,600 --> 00:18:00,380\nBut if I am trying to track down\na problem, if I look at a server and\n\n348\n00:18:00,380 --> 00:18:03,760\nI say boy that memory\nutilization looks a little high.\n\n349\n00:18:03,760 --> 00:18:06,205\nI probably need to compare it\nto some historical data and\n\n350\n00:18:06,205 --> 00:18:07,900\nvCenter lets us do that, up at the top.\n\n351\n00:18:09,410 --> 00:18:12,590\nI've got what I'm viewing and\nmy time range.\n\n352\n00:18:12,590 --> 00:18:15,920\nAnd I can view the last week, the last\nmonth, the last year, or even a custom\n\n353\n00:18:15,920 --> 00:18:19,750\nview if I specify range so I can compare\nhistorical data to current data.\n\n354\n00:18:23,480 --> 00:18:26,840\nThose are some of the things that we can\nmonitor right here inside of vCenter\n\n355\n00:18:26,840 --> 00:18:31,270\njust with built in charts to look and\nsee how things are doing, all right.\n\n356\n00:18:31,270 --> 00:18:33,920\nYou can also create\nyour own custom charts,\n\n357\n00:18:33,920 --> 00:18:36,090\nthese are called the overview charts.\n\n358\n00:18:36,090 --> 00:18:39,790\nBut then you've got the advanced\nperformance charts.\n\n359\n00:18:39,790 --> 00:18:42,550\nAnd these are where you build your own.\n\n360\n00:18:42,550 --> 00:18:46,390\nYou tell vCenter what it is that you\nwant to see and you get in there and\n\n361\n00:18:46,390 --> 00:18:47,348\ncustomize it.\n\n362\n00:18:47,348 --> 00:18:50,430\nHere I'm viewing CPU, and\nyou'll see this drop-down box and\n\n363\n00:18:50,430 --> 00:18:51,810\nI can pick from some of the others.\n\n364\n00:18:51,810 --> 00:18:54,003\nWait let me make this full-screen so\nI can fit a little more on here.\n\n365\n00:18:59,955 --> 00:19:03,822\nI'll just hide that.\n\n366\n00:19:03,822 --> 00:19:06,086\nI will try and hide that.\n\n367\n00:19:06,086 --> 00:19:08,090\nThere we go.\n\n368\n00:19:08,090 --> 00:19:11,200\nHere I'm seeing my CPU utilization,\nit's kind of laying it out and\n\n369\n00:19:11,200 --> 00:19:17,100\nI've got my drop-down and I can switch\nfrom CPU to disc to memory to network.\n\n370\n00:19:17,100 --> 00:19:18,920\nAnd there's a few others like data-store.\n\n371\n00:19:18,920 --> 00:19:22,550\nIf I wanted to look at a particular\ndata-store, that power and\n\n372\n00:19:23,960 --> 00:19:27,570\nsystem virtual disk,\nfew different options there.\n\n373\n00:19:27,570 --> 00:19:32,040\nBut if I want to take a look at disk,\nI can choose that middle update.\n\n374\n00:19:32,040 --> 00:19:36,240\nLet me put that sidebar back where\nit wasn't covered by my head.\n\n375\n00:19:36,240 --> 00:19:36,910\nHere we go.\n\n376\n00:19:36,910 --> 00:19:39,880\nNow I can start to see my disk real time,\n\n377\n00:19:39,880 --> 00:19:42,640\nthe amount of time it's\ntaking me to access a disk.\n\n378\n00:19:42,640 --> 00:19:46,140\nAnd it's measuring it in milliseconds,\nand I can see that kind of laid out here.\n\n379\n00:19:46,140 --> 00:19:49,070\nAnd as I float my cursor over things,\nit actually pops up and\n\n380\n00:19:49,070 --> 00:19:50,760\ntells me a little information.\n\n381\n00:19:50,760 --> 00:19:55,230\nLike my write rate, my reads,\nmy usage, my high latency,\n\n382\n00:19:55,230 --> 00:19:58,240\nI get to see that information in\nsomething that's very measurable.\n\n383\n00:19:58,240 --> 00:20:02,570\nAnd I can compare it against some of\nthese peak numbers here like this, or\n\n384\n00:20:02,570 --> 00:20:06,960\nsome of the valleys, and get an idea\nof what was going on at that time.\n\n385\n00:20:06,960 --> 00:20:10,700\nNow, you can also edit it so\nif we go into chart options right here.\n\n386\n00:20:12,690 --> 00:20:15,620\nWhen we go into chart options,\nyou'll see what it's measuring right now.\n\n387\n00:20:15,620 --> 00:20:19,240\nAnd you'll see a ton,\nof counters that you can choose from.\n\n388\n00:20:19,240 --> 00:20:22,220\nAnd you'll even see where I can pick\nfrom the other completely different\n\n389\n00:20:22,220 --> 00:20:23,220\ntypes of counters.\n\n390\n00:20:23,220 --> 00:20:26,480\nI might want to build one\nchart that's showing CPU and\n\n391\n00:20:26,480 --> 00:20:30,080\nRAM utilization at the same time, both\nlaid out right there in the same entry.\n\n392\n00:20:32,190 --> 00:20:34,570\nWe can measure that,\nwe can pick from the counters.\n\n393\n00:20:34,570 --> 00:20:39,120\nThe biggest challenge on this is\nunderstanding what the counters do, right?\n\n394\n00:20:39,120 --> 00:20:41,130\nThere's a lot of counters in here.\n\n395\n00:20:41,130 --> 00:20:44,180\nAnd then,\neven once you've added the counter,\n\n396\n00:20:44,180 --> 00:20:46,290\nhow do you interpret\nthe data that's in there?\n\n397\n00:20:46,290 --> 00:20:48,170\nThere's a lot of information\nthat comes out of it.\n\n398\n00:20:49,270 --> 00:20:54,390\nWhat I did is I put together a list before\nthe show, let me bring up my show notes.\n\n399\n00:20:54,390 --> 00:20:56,580\nAnd I'll post this as part\nof the show notes, right?\n\n400\n00:20:56,580 --> 00:20:58,700\nI always throw this up\nthere with the episodes.\n\n401\n00:20:58,700 --> 00:21:03,680\nAnd what I did,\nis I created this little list and\n\n402\n00:21:03,680 --> 00:21:05,490\nI just called it performance counters.\n\n403\n00:21:05,490 --> 00:21:08,860\nAnd these are basically my\nfavorite performance counters.\n\n404\n00:21:08,860 --> 00:21:12,310\nWhen I'm monitoring an environment,\nthese are the things that I look for.\n\n405\n00:21:12,310 --> 00:21:17,040\nAnd what I do is I put what they were\ncalled, what they do and the threshold\n\n406\n00:21:17,040 --> 00:21:20,610\nthat I usually use to determine\nwhether they're good or bad, right.\n\n407\n00:21:20,610 --> 00:21:23,805\nBe aware, that variations in hardware and\n\n408\n00:21:23,805 --> 00:21:27,165\nvariations in your environment may\nmake these numbers not right for you.\n\n409\n00:21:28,205 --> 00:21:31,085\nBut in general,\nthese numbers are good for most people.\n\n410\n00:21:31,085 --> 00:21:33,245\nI go and\nlook at a lot of different networks.\n\n411\n00:21:33,245 --> 00:21:36,507\nI help a lot of people out, I I've seen\na ton of different environments and\n\n412\n00:21:36,507 --> 00:21:40,572\na lot of these numbers here are what I\nfind on average is what we expect to see.\n\n413\n00:21:40,572 --> 00:21:45,547\nLike on the disk side, I like to monitor\nthree or four different values here.\n\n414\n00:21:45,547 --> 00:21:48,690\nI've got physical device command latency.\n\n415\n00:21:48,690 --> 00:21:50,710\nAnd Kernel command latency.\n\n416\n00:21:50,710 --> 00:21:53,930\nThese two guys right here\nare probably the most important ones.\n\n417\n00:21:53,930 --> 00:21:58,610\nPhysical device command latency, that\nsays when I do a write to a hard drive.\n\n418\n00:21:58,610 --> 00:22:01,120\nOr when I do a read to a hard drive.\n\n419\n00:22:01,120 --> 00:22:07,180\nWhat's the amount of time that the device\ntakes to perform that IO operation.\n\n420\n00:22:07,180 --> 00:22:09,250\nHow long does it take to do the read?\n\n421\n00:22:09,250 --> 00:22:13,290\nTo seek the data, retrieve the data,\nand give it back to me.\n\n422\n00:22:13,290 --> 00:22:14,950\nHow long does it take to do the write?\n\n423\n00:22:14,950 --> 00:22:17,950\nTo find the blank space on the drive,\nwrite the ones and\n\n424\n00:22:17,950 --> 00:22:21,970\nzeroes with the magnetic charge and\nthen tell me that it's done.\n\n425\n00:22:21,970 --> 00:22:24,420\nHow long does that device take?\n\n426\n00:22:24,420 --> 00:22:28,480\nAnd then the kernel how long does\nthe kernel, the actual ESXI kernel or\n\n427\n00:22:28,480 --> 00:22:30,080\nyou know the VM ware piece under the hood.\n\n428\n00:22:30,080 --> 00:22:32,730\nHow long does it take to deal\nwith that same hand-off?\n\n429\n00:22:32,730 --> 00:22:35,770\nCuz it's the software that\ninitiates the rights.\n\n430\n00:22:35,770 --> 00:22:39,280\nOn average what you should see,\nis that your device should be taking\n\n431\n00:22:39,280 --> 00:22:43,580\nless that 20 milliseconds to be\nable to perform a read or write.\n\n432\n00:22:43,580 --> 00:22:47,010\nIf you're seeing times that\nare consistently above 20 milliseconds,\n\n433\n00:22:47,010 --> 00:22:48,680\nit usually indicates contention.\n\n434\n00:22:48,680 --> 00:22:51,410\nYou've got multiple VM's\nwriting to the same drive and\n\n435\n00:22:51,410 --> 00:22:53,510\nthey're queuing up one behind the other.\n\n436\n00:22:53,510 --> 00:22:56,040\nAnd the drive is just doing too much or\nthe drive is fragmented.\n\n437\n00:22:56,040 --> 00:23:00,540\nIt's having to seek too much to find that\ninformation, so it's getting over-burdened\n\n438\n00:23:00,540 --> 00:23:05,460\nand you may need to upgrade, and\nrate of raids, normally how we fix this.\n\n439\n00:23:05,460 --> 00:23:08,170\nWhen you start doing raid zero stripes,\nthe more drives you add,\n\n440\n00:23:08,170 --> 00:23:11,400\nthe better performance you get, the more\noperations you can perform at once,\n\n441\n00:23:11,400 --> 00:23:12,940\nand that starts to bring\nthese numbers down.\n\n442\n00:23:14,000 --> 00:23:15,780\nThe kernel, that's software.\n\n443\n00:23:15,780 --> 00:23:18,530\nThat's the ESXI kernel\nitself getting involved.\n\n444\n00:23:18,530 --> 00:23:20,260\nIt should always be\nbelow two milliseconds.\n\n445\n00:23:20,260 --> 00:23:22,750\nYou really shouldn't see anything\nhigher than two milliseconds.\n\n446\n00:23:22,750 --> 00:23:26,780\nIf you do, it's an indicator that either\nthe kernel is getting overwhelmed.\n\n447\n00:23:26,780 --> 00:23:30,720\nJust too many VM's running on that\nhost is the most common cause.\n\n448\n00:23:30,720 --> 00:23:34,940\nOr the disk subsystem, is taking too long\nand the kernel is having to wait on it.\n\n449\n00:23:37,120 --> 00:23:41,084\nThere's two other counters,\nI don't always monitor these, but\n\n450\n00:23:41,084 --> 00:23:44,335\nif you wanna be on the safe\nside you can add these two in,\n\n451\n00:23:44,335 --> 00:23:47,336\nyou've got Commands Terminated and\nBus Resets.\n\n452\n00:23:47,336 --> 00:23:48,637\nThese indicate problems.\n\n453\n00:23:48,637 --> 00:23:53,252\nIf your system goes to issue a command to\na device and it has to wait too long, or\n\n454\n00:23:53,252 --> 00:23:57,740\nit's not getting information back,\nthen it will terminate the command.\n\n455\n00:23:57,740 --> 00:23:59,210\nIt will cancel it.\n\n456\n00:23:59,210 --> 00:24:02,140\nAnd so\nthat will set off this counter right here.\n\n457\n00:24:02,140 --> 00:24:03,960\nAnd if we're just trying\nto access the bus,\n\n458\n00:24:03,960 --> 00:24:08,920\nif we're trying to access the HBA or\nfiber channel mesh or\n\n459\n00:24:08,920 --> 00:24:12,190\nwhatever it is we're trying to access and\nwe haven't even made it to the disk yet.\n\n460\n00:24:12,190 --> 00:24:14,980\nAnd that command is not running,\nwe may do a reset.\n\n461\n00:24:14,980 --> 00:24:16,850\nAnd so that's a bus reset.\n\n462\n00:24:16,850 --> 00:24:19,120\nThose should pretty much always be zero.\n\n463\n00:24:19,120 --> 00:24:20,460\nUnless you're just booting the system up.\n\n464\n00:24:20,460 --> 00:24:23,420\nSometimes you'll see some\nresets right at boot time.\n\n465\n00:24:23,420 --> 00:24:27,010\nBut during normal operation,\nthese should both be at zero.\n\n466\n00:24:27,010 --> 00:24:28,720\nSo if you're monitoring for errors.\n\n467\n00:24:28,720 --> 00:24:33,080\nProblems with your switch fabric,\na fiber switch that's getting overwhelmed.\n\n468\n00:24:33,080 --> 00:24:37,020\nAn HBA that's starting to fail,\nan iSCSI network that's inconsistent,\n\n469\n00:24:37,020 --> 00:24:38,180\nthat's really common.\n\n470\n00:24:38,180 --> 00:24:41,220\nThose are times where we'll start to\nsee these numbers start to increase so\n\n471\n00:24:41,220 --> 00:24:43,090\nthey can indicate problems.\n\n472\n00:24:43,090 --> 00:24:45,160\nThese can lead to performance.\n\n473\n00:24:45,160 --> 00:24:47,760\nBecause any time you do a command reset or\na bus reset.\n\n474\n00:24:47,760 --> 00:24:49,700\nYou're having to redo that command.\n\n475\n00:24:49,700 --> 00:24:51,980\nYou're having to reissue it,\nwhich results in a slowdown.\n\n476\n00:24:53,190 --> 00:24:55,790\nNow that's on the disk side, and\n\n477\n00:24:55,790 --> 00:25:00,990\nif I go back to my vcenter, and\ngo into this disk chart, when I edit it,\n\n478\n00:25:00,990 --> 00:25:06,550\nyou'll see over here,\nthere's bus resets, right?\n\n479\n00:25:06,550 --> 00:25:12,000\nThere's commands aborted, we've got some\nof the other ones all buried in here.\n\n480\n00:25:12,000 --> 00:25:15,020\nYou'll see like highest latency so\n\n481\n00:25:15,020 --> 00:25:19,015\neach of these commands that I've talked\nabout you'll find them in here, and\n\n482\n00:25:19,015 --> 00:25:21,355\nthey're ones that I like to use\nto be able to monitor things.\n\n483\n00:25:21,355 --> 00:25:24,315\nSo they're easy to interpret,\nthat's another nice part about it.\n\n484\n00:25:24,315 --> 00:25:26,207\nIf you start to look at virtual disk or\n\n485\n00:25:26,207 --> 00:25:29,695\ndata store, you'll see a lot\nof the same entries in here.\n\n486\n00:25:29,695 --> 00:25:32,365\nRead latency and\nwrite latency are good ones.\n\n487\n00:25:32,365 --> 00:25:35,645\nAnd VMware's already ticked off a lot\nof them because those are the ones that\n\n488\n00:25:35,645 --> 00:25:36,395\nare common too.\n\n489\n00:25:38,250 --> 00:25:38,790\nAll right.\n\n490\n00:25:38,790 --> 00:25:41,610\nAnd it explains the unit of measure\nright here, what it does, and\n\n491\n00:25:41,610 --> 00:25:43,060\nit even gives a description.\n\n492\n00:25:43,060 --> 00:25:45,290\nIt's kind of hard to read\nthe description over here, but\n\n493\n00:25:45,290 --> 00:25:48,360\nif you float your mouse over it,\nit'll do a little pop up window and\n\n494\n00:25:48,360 --> 00:25:50,690\nyou can read it and\nit'll describe what that counter is.\n\n495\n00:25:53,110 --> 00:25:53,700\nAll right.\n\n496\n00:25:53,700 --> 00:25:54,610\nNow I talked about disk.\n\n497\n00:25:54,610 --> 00:25:56,300\nLet me show you guys\nsome of the other ones.\n\n498\n00:25:56,300 --> 00:25:59,690\nOn the network side these\nare the two that I usually go for,\n\n499\n00:25:59,690 --> 00:26:03,600\nbasically transmit packets dropped and\nreceive packets dropped.\n\n500\n00:26:03,600 --> 00:26:07,150\nIf I'm trying to send or\nreceive data and it gets dropped for\n\n501\n00:26:07,150 --> 00:26:12,180\nsome reason, that some reason, it could be\ncorruption out there on the network, but\n\n502\n00:26:12,180 --> 00:26:16,360\nmost likely it's that your\nnetwork adapter is overwhelmed.\n\n503\n00:26:16,360 --> 00:26:18,860\nEither its buffer is full, and\nits having to drop packets,\n\n504\n00:26:18,860 --> 00:26:20,650\nwhile it deals with its own buffer.\n\n505\n00:26:20,650 --> 00:26:24,920\nOr the network cable itself is\ncarrying too much bandwidth, for\n\n506\n00:26:24,920 --> 00:26:25,750\nwhat that card can handle.\n\n507\n00:26:25,750 --> 00:26:27,600\nMaybe it's 100 mega-bit card, and\n\n508\n00:26:27,600 --> 00:26:29,750\nit's got a 100 mega-bits\nof traffic flowing over it.\n\n509\n00:26:29,750 --> 00:26:31,670\nNot be able to push much more than that.\n\n510\n00:26:31,670 --> 00:26:33,560\nSo you can start to see drops as a result.\n\n511\n00:26:36,230 --> 00:26:39,500\nOn the CPU side,\nthere's two that I like there.\n\n512\n00:26:39,500 --> 00:26:42,270\nCPU ready and CPU swap wait.\n\n513\n00:26:42,270 --> 00:26:45,820\nWith CPU Ready, that's the amount\nof time a virtual machine has to\n\n514\n00:26:45,820 --> 00:26:47,740\nwait to gain access to the CPU.\n\n515\n00:26:47,740 --> 00:26:50,700\nBasically it means the VM is\nready to access that CPU,\n\n516\n00:26:50,700 --> 00:26:53,110\nit wants access to processor cycles.\n\n517\n00:26:53,110 --> 00:26:54,450\nBut the process is busy.\n\n518\n00:26:54,450 --> 00:26:57,310\nIt's busy helping other people,\nso we have to wait in line.\n\n519\n00:26:57,310 --> 00:26:59,040\nAll right, it's like a queue.\n\n520\n00:26:59,040 --> 00:27:00,560\nNow, that's going to happen.\n\n521\n00:27:00,560 --> 00:27:02,860\nYour processor can only do so\nmuch at once.\n\n522\n00:27:02,860 --> 00:27:04,990\nBut it shouldn't happen that much.\n\n523\n00:27:04,990 --> 00:27:08,180\nSo we expect the average wait\ntime to be less than ten,\n\n524\n00:27:08,180 --> 00:27:09,580\nis the number that I usually look for.\n\n525\n00:27:11,360 --> 00:27:15,080\nAnd then on Swap Wait,\nthat's just getting in and out, and\n\n526\n00:27:15,080 --> 00:27:17,120\nthat one should be lower or below five.\n\n527\n00:27:17,120 --> 00:27:18,460\nYou know, it should be pretty low also.\n\n528\n00:27:20,530 --> 00:27:23,760\nAll right, and then on the memory side,\nI really just monitor one counter.\n\n529\n00:27:23,760 --> 00:27:26,010\nThere's a ton of memory counters, right?\n\n530\n00:27:26,010 --> 00:27:29,730\nYour available memory and\nyour page file size and all this stuff,\n\n531\n00:27:29,730 --> 00:27:30,880\na lot of great ones.\n\n532\n00:27:30,880 --> 00:27:33,030\nBut when I'm monitoring for\nperformance issues,\n\n533\n00:27:33,030 --> 00:27:35,900\nthis is the one I normally keep track of,\nwhich is memory compressed.\n\n534\n00:27:35,900 --> 00:27:36,610\nAll right?\n\n535\n00:27:36,610 --> 00:27:38,010\nMemory compressed is a weird name.\n\n536\n00:27:38,010 --> 00:27:39,940\nWhat it's actually talking\nabout is your cache.\n\n537\n00:27:39,940 --> 00:27:40,790\nAll right?\n\n538\n00:27:40,790 --> 00:27:41,930\nThe memory cache.\n\n539\n00:27:41,930 --> 00:27:45,870\nWhen you write data to memory,\nit's trying to cache as much as it can.\n\n540\n00:27:45,870 --> 00:27:48,140\nAnd if it runs out of room in memory,\n\n541\n00:27:48,140 --> 00:27:52,220\nthen it has to start doing extra stuff to\ncreate more memory that it doesn't have.\n\n542\n00:27:52,220 --> 00:27:53,820\nAnd it can do that by compressing or\n\n543\n00:27:53,820 --> 00:27:56,640\ncaching some of the stuff that's\nin memory to your hard drive.\n\n544\n00:27:56,640 --> 00:27:58,940\nYou see that with paging and swap files.\n\n545\n00:27:58,940 --> 00:28:03,560\nAnd so if you watch this and it starts to\ngo up, if you see that number growing,\n\n546\n00:28:03,560 --> 00:28:06,350\nit usually means you don't\nhave enough physical memory.\n\n547\n00:28:06,350 --> 00:28:08,390\nAnd that's the solution,\nis you add more memory or\n\n548\n00:28:08,390 --> 00:28:10,770\nyou move some VMs off to another host.\n\n549\n00:28:10,770 --> 00:28:12,760\nSo I usually look for\nthis number to be zero.\n\n550\n00:28:12,760 --> 00:28:15,200\nZero means that you've got plenty of RAM,\n\n551\n00:28:15,200 --> 00:28:17,090\neverything you are doing\nfits into ram just fine.\n\n552\n00:28:17,090 --> 00:28:18,680\nYou are in good shape.\n\n553\n00:28:18,680 --> 00:28:23,510\nIf you see this as 1 or 50 or 100,\nwell those are all indicating that\n\n554\n00:28:23,510 --> 00:28:27,000\nit is getting worse and\nyou need to add more RAM.\n\n555\n00:28:27,000 --> 00:28:29,380\nOr move some resources\noff to another server.\n\n556\n00:28:31,010 --> 00:28:32,330\nSometimes, that is the best solution.\n\n557\n00:28:32,330 --> 00:28:34,350\nYou add another host and\nmove some other VMs over to it.\n\n558\n00:28:35,952 --> 00:28:39,610\nBy all means,\nbrowse around in the charts there.\n\n559\n00:28:39,610 --> 00:28:40,500\nIn the performance charts.\n\n560\n00:28:40,500 --> 00:28:41,590\nLook at what's available.\n\n561\n00:28:41,590 --> 00:28:43,300\nSee, there's a ton of counters.\n\n562\n00:28:43,300 --> 00:28:46,310\nBut, I just wanted to post\nthese because they are kind of\n\n563\n00:28:46,310 --> 00:28:50,690\na little more simple to understand, easy\nto look at and they work out pretty well.\n\n564\n00:28:52,180 --> 00:28:56,480\nI also put a link here into\nwhat is my absolute favorite\n\n565\n00:28:56,480 --> 00:28:58,180\nknowledge based article with VMware.\n\n566\n00:28:58,180 --> 00:29:00,660\nVMware has a ton of\nknowledge based articles and\n\n567\n00:29:00,660 --> 00:29:03,420\nI've included links to a ton\nof them throughout the show.\n\n568\n00:29:03,420 --> 00:29:06,760\nBut this particular one is really good.\n\n569\n00:29:06,760 --> 00:29:08,990\nLet me show it to you.\n\n570\n00:29:08,990 --> 00:29:11,330\nAnd what they do is they\nbasically say all right,\n\n571\n00:29:11,330 --> 00:29:14,830\nyou've got a problem on your server and\nyou're trying to trouble shoot it.\n\n572\n00:29:14,830 --> 00:29:17,200\nWhat performance counters\nare going to help you?\n\n573\n00:29:17,200 --> 00:29:22,360\nSo this one goes through and breaks that\ndown, so it starts out with CPU, right?\n\n574\n00:29:22,360 --> 00:29:28,439\nYou're watching for CPU constraints, so\nif you're running ESXI 5.5, right here.\n\n575\n00:29:30,140 --> 00:29:33,410\nWe can jump in here and it'll start\nto talk about resource management and\n\n576\n00:29:33,410 --> 00:29:35,930\nthings that we can do to\ncontrol the resources.\n\n577\n00:29:35,930 --> 00:29:39,990\nBut right beneath it, it starts to explain\nsome of the counters that we should use\n\n578\n00:29:39,990 --> 00:29:44,830\nand the steps we should take to reduce\nthe load on our CPUS and VCPUS.\n\n579\n00:29:44,830 --> 00:29:45,440\nAll right.\n\n580\n00:29:45,440 --> 00:29:46,490\nThen you'll see memory.\n\n581\n00:29:46,490 --> 00:29:47,620\nWhat do you do for memory?\n\n582\n00:29:47,620 --> 00:29:50,810\nAnd it'll explain some of the things you\ncan do there as far as increasing or\n\n583\n00:29:50,810 --> 00:29:53,020\ndecreasing RAM or resources, and\n\n584\n00:29:53,020 --> 00:29:57,130\nsee how it's going into ESXTOP\nwhich we saw in yesterdays episode.\n\n585\n00:29:57,130 --> 00:29:58,750\nSo, it explains how to do some of that.\n\n586\n00:29:58,750 --> 00:30:01,700\nIt does the same thing for\nstorage and for network.\n\n587\n00:30:01,700 --> 00:30:03,470\nRight?\nThere's our big four.\n\n588\n00:30:03,470 --> 00:30:05,160\nSo it gives you some\ntroubleshooting tips but\n\n589\n00:30:05,160 --> 00:30:08,490\nalso how we monitor that for\nperformance so we can see how things go.\n\n590\n00:30:08,490 --> 00:30:11,935\nThis is one of my favorite\nKnowledge Base articles.\n\n591\n00:30:14,560 --> 00:30:15,582\nAll right.\n\n592\n00:30:15,582 --> 00:30:19,416\nSo that pretty much wraps up those\ncharts as far a using them to look at\n\n593\n00:30:19,416 --> 00:30:21,690\nwhat's going on, on our system.\n\n594\n00:30:21,690 --> 00:30:24,450\nThere are a handful of other things\navailable on the system we need to\n\n595\n00:30:24,450 --> 00:30:25,670\ntake a look at.\n\n596\n00:30:25,670 --> 00:30:28,809\nSo I'm going to show you some of those\nadvanced settings we need to do.\n\n597\n00:30:28,809 --> 00:30:30,180\nOh alarms, yeah still got that.\n\n598\n00:30:30,180 --> 00:30:34,100\nSo we've got a lot more good stuff coming\nup but I'm out of time for this segment.\n\n599\n00:30:34,100 --> 00:30:36,050\nSo let's top here and take a break and\n\n600\n00:30:36,050 --> 00:30:40,630\nwhen we get back, we'll look at some more\nadvanced settings inside of VCenter.\n\n601\n00:30:40,630 --> 00:30:41,434\nSo stay tuned.\n\n602\n00:30:41,434 --> 00:30:42,391\nWe'll be back after this.\n\n603\n00:30:42,391 --> 00:30:49,496\n[MUSIC].\n\n604\n00:30:49,496 --> 00:30:50,936\nAll right, welcome back everybody.\n\n605\n00:30:50,936 --> 00:30:55,426\nWhile we are on the topic of monitoring,\nthere's a lot of advance features inside\n\n606\n00:30:55,426 --> 00:30:58,280\nof V center we can use\nto better monitor that.\n\n607\n00:30:58,280 --> 00:31:01,890\nYou know when I'm logged in to\nvCenter with the vSphere web client,\n\n608\n00:31:01,890 --> 00:31:05,090\nI get a lot of information\nhere I get my recent tasks and\n\n609\n00:31:05,090 --> 00:31:09,230\nmy alarms all this information is being\ndisplayed right here on the screen for\n\n610\n00:31:09,230 --> 00:31:12,640\nme and that's cool but\nwhat if I'm not logged into vCenter?\n\n611\n00:31:12,640 --> 00:31:14,360\nWhat if I'm not sitting at this machine?\n\n612\n00:31:14,360 --> 00:31:18,330\nOr what if I have a third party monitoring\nsystem that I want to integrate with this?\n\n613\n00:31:18,330 --> 00:31:21,240\nAnd we can do that, right,\nit does have that functionality.\n\n614\n00:31:21,240 --> 00:31:24,110\nSo if we take a look like,\nour vCenter server.\n\n615\n00:31:24,110 --> 00:31:25,559\nLet me jump up to that real quick.\n\n616\n00:31:27,180 --> 00:31:31,500\nSo I'm going to go over to my vCenter\nservers, and I'll pick that guy.\n\n617\n00:31:31,500 --> 00:31:36,030\nAnd if you go into Manage and Settings,\nthere's actually a lot of stuff tucked\n\n618\n00:31:36,030 --> 00:31:37,840\naway in here that we\ndon't normally look at.\n\n619\n00:31:37,840 --> 00:31:41,550\nAnd I'm thinking of these two guys\nin particular, Mail, and SNMP.\n\n620\n00:31:41,550 --> 00:31:42,220\nAll right?\n\n621\n00:31:42,220 --> 00:31:43,160\nNow, what are these?\n\n622\n00:31:43,160 --> 00:31:45,735\nWell, normally when there's an alert,\n\n623\n00:31:45,735 --> 00:31:50,305\nit's displayed right here on my screen\ninside of the vSphere web client.\n\n624\n00:31:50,305 --> 00:31:52,003\nBut if you configure a mail server,\n\n625\n00:31:52,003 --> 00:31:54,219\nyou can actually set it\nup to shoot you emails.\n\n626\n00:31:54,219 --> 00:31:57,678\nAnd that's nice, unless it's your\nemail server that's failed but\n\n627\n00:31:57,678 --> 00:32:01,373\nif it's any other server, then it can\nshoot you an email and let you know,\n\n628\n00:32:01,373 --> 00:32:05,630\nhey this server is over utilized, or\nthis guest has just shut down or whatever.\n\n629\n00:32:05,630 --> 00:32:07,710\nIt can communicate that\ninformation to you.\n\n630\n00:32:07,710 --> 00:32:10,040\nAll right, we just have to set it up.\n\n631\n00:32:10,040 --> 00:32:11,010\nSame thing with SNMP,\n\n632\n00:32:11,010 --> 00:32:15,390\nif you are not familiar with SNMP it's\nthe simple network management protocol and\n\n633\n00:32:15,390 --> 00:32:19,530\nthere's a lot of third party software\nthat uses SNMP for monitoring.\n\n634\n00:32:19,530 --> 00:32:21,940\nThere's things like Nagios, Zabbix,\n\n635\n00:32:21,940 --> 00:32:25,210\nsolar winds network performance monitor\nall these different products that are out\n\n636\n00:32:25,210 --> 00:32:29,930\nthere that will take SNMP data and\nturn it into pretty little charts and\n\n637\n00:32:29,930 --> 00:32:33,460\nother information in reporting and\nit's fairly vendor neutral.\n\n638\n00:32:33,460 --> 00:32:37,580\nAlmost everybody supports SNMP, so\nit's a great way to monitor systems.\n\n639\n00:32:38,620 --> 00:32:42,140\nIf we want to configure these,\nwe just need to hit Edit, and\n\n640\n00:32:42,140 --> 00:32:43,450\nwe can jump down here, we can go to Mail.\n\n641\n00:32:43,450 --> 00:32:48,285\nAnd you're basically specifying a mail\nserver to use and a mail sender.\n\n642\n00:32:48,285 --> 00:32:54,695\nSo I might want to run it through my lab\nserver, so I'll say mail.lab.itpro.tv and\n\n643\n00:32:54,695 --> 00:32:59,621\nmy mail sender I might want to\ncall it vcenter@lab.itpro.tv.\n\n644\n00:32:59,621 --> 00:33:00,710\nAll right.\n\n645\n00:33:00,710 --> 00:33:04,712\nSo now I can configure email reports and\nthey'll get sent that way and\n\n646\n00:33:04,712 --> 00:33:07,127\nmy alerts will already\nget sent that way so\n\n647\n00:33:07,127 --> 00:33:10,370\nI get that notification that\nwill be able to be sent out.\n\n648\n00:33:10,370 --> 00:33:14,070\nWe'll see those email alerts as\nan action we can take later on when we\n\n649\n00:33:14,070 --> 00:33:15,460\nconfigure our own alerts.\n\n650\n00:33:17,230 --> 00:33:20,600\nAll right, SNMP Receivers,\npretty easy to set up also.\n\n651\n00:33:20,600 --> 00:33:24,760\nHere, you'll see it has already\ngot one and it's Local Host.\n\n652\n00:33:24,760 --> 00:33:29,200\nVCenter is using SNMP itself to collect\ninformation and report it back in to\n\n653\n00:33:29,200 --> 00:33:34,820\nthe system but we can configure up to\nthree more SNMP servers if we want.\n\n654\n00:33:34,820 --> 00:33:36,770\nYou just punch in their data right here.\n\n655\n00:33:36,770 --> 00:33:40,760\nYou punch in their community string and\ntheir IP address to reach out to.\n\n656\n00:33:40,760 --> 00:33:43,880\nAnd then you make sure you check\nthat Enable receiver check box\n\n657\n00:33:43,880 --> 00:33:45,050\notherwise it won't work.\n\n658\n00:33:45,050 --> 00:33:46,960\nAnd then you'll start\nsending your logs there.\n\n659\n00:33:46,960 --> 00:33:50,363\nSo, like we have another SMP\nserver here in the office, and\n\n660\n00:33:50,363 --> 00:33:54,923\nI might want to interact with this and\nso I can punch in 10.1.10.4, and\n\n661\n00:33:54,923 --> 00:33:59,143\nwe can get there or more commonly you'll\npunch in other V Center servers so\n\n662\n00:33:59,143 --> 00:34:01,960\nnow you're sharing\ninformation between them.\n\n663\n00:34:01,960 --> 00:34:04,710\nAnd you do that if you have\nlinked vCenter servers.\n\n664\n00:34:04,710 --> 00:34:07,140\nSo maybe two different\ngeographic locations,\n\n665\n00:34:07,140 --> 00:34:10,840\neach with their own vCenter server,\nand you link them together.\n\n666\n00:34:10,840 --> 00:34:14,410\nYou might not remember that from way\nback in the very first episode when we\n\n667\n00:34:14,410 --> 00:34:18,430\ninstalled vCenter during the install it\nasked me if I was gonna link this and\n\n668\n00:34:18,430 --> 00:34:20,030\nI said, no cuz I wasn't.\n\n669\n00:34:20,030 --> 00:34:23,710\nIf I had, then those two would\nbe connected together in a way,\n\n670\n00:34:23,710 --> 00:34:25,110\nthrough a symbolic way, and\n\n671\n00:34:25,110 --> 00:34:28,340\ndoing this here starts to exchange\nthat performance information too.\n\n672\n00:34:29,970 --> 00:34:31,770\nAll right, so\nwe can punch that information in here and\n\n673\n00:34:31,770 --> 00:34:33,430\nget that configured.\n\n674\n00:34:33,430 --> 00:34:36,580\nNow, while I'm on this screen, there are\na few other things that we might want to\n\n675\n00:34:36,580 --> 00:34:40,160\nlook at that may or may not count for\nperformance stuff but,\n\n676\n00:34:40,160 --> 00:34:42,560\nsince we're on this screen,\nit's a good time to cover it.\n\n677\n00:34:42,560 --> 00:34:46,335\nWe did SNMP and we did mail.\n\n678\n00:34:46,335 --> 00:34:49,415\nAnd mail is really SMTP,\nSimple Mail Transport Protocol,\n\n679\n00:34:49,415 --> 00:34:51,693\nthat's what I almost said a second ago,\nbut\n\n680\n00:34:51,693 --> 00:34:56,140\nif you look at some of the other things in\nhere there's things like timeout settings.\n\n681\n00:34:57,470 --> 00:35:01,810\nWhen vCenter goes to perform an operation,\nwhen it goes to do something,\n\n682\n00:35:01,810 --> 00:35:06,820\nit has timeouts that it uses to determine\nif the operation is taking too long or\n\n683\n00:35:06,820 --> 00:35:08,450\nif it's got an issue.\n\n684\n00:35:08,450 --> 00:35:13,460\nSo for normal stuff like just\nrefreshing a VM guest status,\n\n685\n00:35:13,460 --> 00:35:16,190\nit will wait thirty seconds\nbefore it flags it as failing.\n\n686\n00:35:17,400 --> 00:35:20,600\nThere's other things that\nare considered long operations,\n\n687\n00:35:20,600 --> 00:35:24,320\nlike doing a V motion activity and\nwaiting for the other server to report.\n\n688\n00:35:24,320 --> 00:35:26,170\nIt may give that up to two minutes.\n\n689\n00:35:26,170 --> 00:35:29,120\n120 seconds by default before\nit determines there is\n\n690\n00:35:29,120 --> 00:35:30,740\na connection problem there too.\n\n691\n00:35:30,740 --> 00:35:31,410\nAll right.\n\n692\n00:35:31,410 --> 00:35:36,420\nYou might want to tweak these values if\nyou're dealing with something like maybe\n\n693\n00:35:36,420 --> 00:35:39,170\nyour vCenter is in one\ngeographic location and\n\n694\n00:35:39,170 --> 00:35:42,730\nyou're managing a host that's\nin another geographic location.\n\n695\n00:35:42,730 --> 00:35:46,090\nThese timers might not be long enough for\nthat type of environment.\n\n696\n00:35:46,090 --> 00:35:48,740\nIf everybody's on the same network,\nthese numbers are great.\n\n697\n00:35:48,740 --> 00:35:51,860\nThese cover everything you need, and\nyou rarely have to tweak these but\n\n698\n00:35:51,860 --> 00:35:56,450\nif you are covering a large area and\nyou find that things are timing out, even\n\n699\n00:35:56,450 --> 00:35:59,250\nthough they actually worked, then this\nmight be something you need to adjust.\n\n700\n00:36:01,340 --> 00:36:04,340\nAll right,\nwhat else might we tweak in here?\n\n701\n00:36:04,340 --> 00:36:07,530\nLet's see, that was the timeout logging\nsettings, that's the very next one here,\n\n702\n00:36:07,530 --> 00:36:09,130\nlogging settings.\n\n703\n00:36:09,130 --> 00:36:12,670\nIn here, we specify what information\nV Center is going to be logging, and\n\n704\n00:36:12,670 --> 00:36:18,030\nthis is what we'll log in our own\nsystem logs, and the default is info.\n\n705\n00:36:18,030 --> 00:36:21,570\nAnd, if you drop that down you'll\nsee the list, none, error, warning,\n\n706\n00:36:21,570 --> 00:36:22,850\ninfo, verbose, trivia.\n\n707\n00:36:23,930 --> 00:36:26,280\nWhen you choose a value, that value,\n\n708\n00:36:26,280 --> 00:36:30,120\nit includes that particular value and\neverything above it.\n\n709\n00:36:30,120 --> 00:36:35,280\nSo when you choose info, that includes\ninfo as well as warning and error.\n\n710\n00:36:35,280 --> 00:36:40,020\nIf you choose trivia, it includes trivia\nas well as verbose, as well as info,\n\n711\n00:36:40,020 --> 00:36:41,160\nas well as warning, as well as error.\n\n712\n00:36:41,160 --> 00:36:42,890\nRight?\nIt gets them all.\n\n713\n00:36:42,890 --> 00:36:46,150\nSo the lower you pick the more of\nthem your actually going to get.\n\n714\n00:36:46,150 --> 00:36:46,790\nRight?\n\n715\n00:36:46,790 --> 00:36:48,140\nInfo is the default.\n\n716\n00:36:48,140 --> 00:36:51,990\nThat means that if anything\nreally bad happens, an error or\n\n717\n00:36:51,990 --> 00:36:54,980\nif something bad is about to happen,\na warning.\n\n718\n00:36:54,980 --> 00:36:56,380\nWe're gonna get those logged.\n\n719\n00:36:56,380 --> 00:36:59,210\nAnd if something informational happens,\nI shut down a VM,\n\n720\n00:36:59,210 --> 00:37:02,620\nI created a new VM, things like that,\nthat's gonna get logged.\n\n721\n00:37:02,620 --> 00:37:04,080\nThat's just information.\n\n722\n00:37:04,080 --> 00:37:08,030\nInformation you don't normally have an\naction to take but we can bump that down\n\n723\n00:37:08,030 --> 00:37:13,130\nto verbose, which gives me much more\ndetailed information or trivia,\n\n724\n00:37:13,130 --> 00:37:18,930\nwhich gives me everything, every single\nbit of info that v-center can give me.\n\n725\n00:37:19,960 --> 00:37:24,770\nIf I choose that one, my log files are\ngonna be huge but if I'm troubleshooting\n\n726\n00:37:24,770 --> 00:37:28,500\na problem, and something's going wrong and\nit's not showing up in the logs,\n\n727\n00:37:28,500 --> 00:37:32,112\nI might need to step up to Verose or\nTrivia to get that data.\n\n728\n00:37:32,112 --> 00:37:35,040\nAll right, but you don't normally\nwant to stay in there very long.\n\n729\n00:37:35,040 --> 00:37:39,280\nSo you might move into verbose mode while\nyou're troubleshooting your issue and\n\n730\n00:37:39,280 --> 00:37:43,190\nthen once your done you come back and\nyou move it back to info or\n\n731\n00:37:43,190 --> 00:37:46,110\nmaybe you're tired of sifting through your\nlogs and sifting through all sorts of\n\n732\n00:37:46,110 --> 00:37:49,740\nmundane things about VM startups and\nshutdowns and all that.\n\n733\n00:37:49,740 --> 00:37:51,060\nAnd so you come in and\nchange this and say,\n\n734\n00:37:51,060 --> 00:37:54,300\nyou know what I just want warning and\nhire, don't bother getting the info stuff.\n\n735\n00:37:54,300 --> 00:37:55,050\nOkay.\n\n736\n00:37:55,050 --> 00:37:59,650\nThat's not the greatest idea but, you\nknow cuz when you have a problem the more\n\n737\n00:37:59,650 --> 00:38:02,080\ninformation you have the better\nyou'll be able to handle it.\n\n738\n00:38:02,080 --> 00:38:06,310\nSo you want that informational stuff but\nbe realistic about it.\n\n739\n00:38:06,310 --> 00:38:09,246\nIf you know you're never gonna look at\nthat data, if you're only gonna look at\n\n740\n00:38:09,246 --> 00:38:11,751\nwarnings and alerts then you can\ncome in here and filter that data.\n\n741\n00:38:13,835 --> 00:38:14,530\nAll right.\n\n742\n00:38:14,530 --> 00:38:18,180\nSo, those are some of the other things\nthat we might chose to customize on\n\n743\n00:38:18,180 --> 00:38:22,900\nour host in order to just make it handle\nthings a little bit more differently and\n\n744\n00:38:22,900 --> 00:38:25,140\nthis is being set on vCenter, right?\n\n745\n00:38:25,140 --> 00:38:28,542\nSo I'm not setting this on\nan individual host or an individual VM,\n\n746\n00:38:28,542 --> 00:38:30,751\nthis is on the vCenter deployment itself.\n\n747\n00:38:33,585 --> 00:38:34,620\nAll right, speaking of vCenter.\n\n748\n00:38:35,630 --> 00:38:41,250\nWhen we bring up a new ESXi host,\nwe have to register it in vCenter, right?\n\n749\n00:38:41,250 --> 00:38:43,840\nAnd I've been doing that all through\nthe week as I've added each one.\n\n750\n00:38:43,840 --> 00:38:44,930\nMy network has grown.\n\n751\n00:38:44,930 --> 00:38:48,860\nI think I started the week with like\nfour hosts and now I have six or\n\n752\n00:38:48,860 --> 00:38:53,240\nsomething like that but\nwith each one, I've gone under hosts,\n\n753\n00:38:53,240 --> 00:38:58,010\nI've hit the add new host button and\nI punched in the IP address, and\n\n754\n00:38:58,010 --> 00:39:02,340\nuser name and password for that new host,\nand registered it with vCenter.\n\n755\n00:39:03,450 --> 00:39:07,790\nWell, when we do that registration,\nbehind the scenes,\n\n756\n00:39:07,790 --> 00:39:12,200\nthe vCenter server's reaching out to that\nhost, logging in with the username and\n\n757\n00:39:12,200 --> 00:39:17,140\npassword we gave it, and turning on\nwhat's called the vCenter Agent.\n\n758\n00:39:17,140 --> 00:39:22,100\nThe vCenter Agent, it's a little software\npackage that runs on your ESXi host and\n\n759\n00:39:22,100 --> 00:39:23,880\nit's disabled by default.\n\n760\n00:39:23,880 --> 00:39:28,490\nIt's not running normally because ESXi is\ndesigned to be standalone with a default\n\n761\n00:39:28,490 --> 00:39:33,210\ninstall and when we register with\nVCenter that's when it turns it on.\n\n762\n00:39:33,210 --> 00:39:37,890\nAnd once it's turned on now the ESXi host\nis reporting all sorts of information back\n\n763\n00:39:37,890 --> 00:39:42,060\nto VCenter so that it will show up\nhere nice and happy, all right?\n\n764\n00:39:42,060 --> 00:39:45,040\nTake a look at my server 6,\nsee how I got that warning right there.\n\n765\n00:39:45,040 --> 00:39:49,094\nAnd the warning in this case\nis gonna be because I've got,\n\n766\n00:39:49,094 --> 00:39:52,166\nI think I left the shell turned on on it,\nso.\n\n767\n00:39:52,166 --> 00:39:54,554\nIf I go here into my,\nI'll get into my issues screen.\n\n768\n00:39:56,471 --> 00:39:59,832\nIf I go to the right tab I'll\nget to my issues screen and\n\n769\n00:39:59,832 --> 00:40:03,590\nI can see it'll probably be that\nI left the shell turned on.\n\n770\n00:40:03,590 --> 00:40:04,190\nYeah, there it is.\n\n771\n00:40:04,190 --> 00:40:06,030\nESXi shell, oh and I left a The SSH on.\n\n772\n00:40:06,030 --> 00:40:08,238\nThat's good practice there.\n\n773\n00:40:08,238 --> 00:40:10,710\n[LAUGH] So I left these guys turned on.\n\n774\n00:40:10,710 --> 00:40:11,420\nSo I get my warning.\n\n775\n00:40:11,420 --> 00:40:12,880\nNow how did I know that?\n\n776\n00:40:12,880 --> 00:40:17,963\nWell because I've got the ESX agent\nreporting back to vCenter and\n\n777\n00:40:17,963 --> 00:40:20,373\ntelling it this information.\n\n778\n00:40:20,373 --> 00:40:25,145\nIt's pretty rare but\nit can happen that that agent will crash.\n\n779\n00:40:25,145 --> 00:40:27,700\nThat agent will stop working.\n\n780\n00:40:27,700 --> 00:40:32,080\nIf it stops working,\nthese a few different solutions for it.\n\n781\n00:40:32,080 --> 00:40:34,620\nSolution 1,\nyou could reboot the host, right?\n\n782\n00:40:34,620 --> 00:40:38,040\nIf there's a bunch of virtual machines\non there and you've got vMotion,\n\n783\n00:40:38,040 --> 00:40:42,210\nyou can just migrate the guests, the VMs\noff of there, and then reboot the host.\n\n784\n00:40:42,210 --> 00:40:45,200\nAnd a lot of times that'll take care of\nit but what if you don't have vMotion?\n\n785\n00:40:45,200 --> 00:40:47,120\nWhat if you don't have a cluster or\nhigh availability?\n\n786\n00:40:47,120 --> 00:40:50,620\nWhat if it is just one of a handful of\nservers and it's somewhat standalone,\n\n787\n00:40:50,620 --> 00:40:52,900\neven though it's registered in vCenter?\n\n788\n00:40:52,900 --> 00:40:55,000\nWell, you can actually restart that agent.\n\n789\n00:40:55,000 --> 00:41:00,180\nYou can do things to manipulate it\nwithout actually taking the host offline.\n\n790\n00:41:00,180 --> 00:41:02,330\nAnd they mention it briefly\nin the objectives so\n\n791\n00:41:02,330 --> 00:41:04,530\nI do want to talk about it here.\n\n792\n00:41:04,530 --> 00:41:06,520\nAnother thing I wanna do is\nif it stops communicating,\n\n793\n00:41:07,810 --> 00:41:10,519\nyou can actually remove\nthe host from v center.\n\n794\n00:41:11,680 --> 00:41:14,020\nYou can just right click on it and\ngo to all V Center actions and\n\n795\n00:41:14,020 --> 00:41:18,160\nchoose disassociate host or\nremove from inventory.\n\n796\n00:41:18,160 --> 00:41:21,050\nIt depends on how\nthe communications are with it.\n\n797\n00:41:21,050 --> 00:41:25,020\nIf we choose to remove it,\nthat will disconnect it from V Center and\n\n798\n00:41:25,020 --> 00:41:28,840\nturn the agent on and\nthen you can add it back into V Center and\n\n799\n00:41:28,840 --> 00:41:31,170\nthat will turn the agent back on.\n\n800\n00:41:31,170 --> 00:41:33,860\nIt's a bit heavy handed to\ndo it that way though so\n\n801\n00:41:33,860 --> 00:41:38,570\na better way Is to remotely\nconnect to that host, or\n\n802\n00:41:38,570 --> 00:41:42,590\nwalk up to the DCUI, and\ngo in there and restart the agent.\n\n803\n00:41:42,590 --> 00:41:43,230\nOkay.\n\n804\n00:41:43,230 --> 00:41:44,960\nRestarting the agent, it's not so bad.\n\n805\n00:41:44,960 --> 00:41:47,290\nYou do have to remember some commands.\n\n806\n00:41:47,290 --> 00:41:49,090\nLet me take this host right here.\n\n807\n00:41:50,530 --> 00:41:55,770\nHere's my host, and it's giving me the IP\ninformation right here on the main screen.\n\n808\n00:41:55,770 --> 00:42:00,070\nAnd if I get logged into it,\nyou can connect in and\n\n809\n00:42:00,070 --> 00:42:03,040\nyou can do the network troubleshooting,\nthe things we did in the last show, right?\n\n810\n00:42:03,040 --> 00:42:06,424\nWe've got those various things that\nare available to us but, you know,\n\n811\n00:42:06,424 --> 00:42:08,876\nthere's not a whole heck of\na lot of options in here.\n\n812\n00:42:08,876 --> 00:42:12,509\nYou'll notice there's Restart\nthe Management Network but\n\n813\n00:42:12,509 --> 00:42:16,364\nthat's talking about the V switch,\nthe VM kernel attached to.\n\n814\n00:42:16,364 --> 00:42:19,320\nIt's not actually talking about the agent.\n\n815\n00:42:19,320 --> 00:42:21,780\nSo, if I want to fix that up,\n\n816\n00:42:21,780 --> 00:42:26,890\nthe ESXI host agent, I need to drop to\nthe shell and get it there and fix it.\n\n817\n00:42:26,890 --> 00:42:28,625\nThat's why I left the shell\nturned on on this one.\n\n818\n00:42:28,625 --> 00:42:32,410\nIf I go into troubleshooting,\nI can turn on that shell, or\n\n819\n00:42:32,410 --> 00:42:34,320\nSSH if I want to do it remotely.\n\n820\n00:42:34,320 --> 00:42:37,590\nAnd You'll remember I mentioned\nyesterday in the show,\n\n821\n00:42:37,590 --> 00:42:41,280\nyou can actually turn these things on\nremotely, I can go in to vCenter and\n\n822\n00:42:41,280 --> 00:42:44,680\nturn on the shell by modifying\nthe security policy for that host.\n\n823\n00:42:44,680 --> 00:42:49,920\nThe problem is, the only time you'd\nwant to restart the ESXI Host agent\n\n824\n00:42:49,920 --> 00:42:52,200\nis if it's not reporting to VCenter.\n\n825\n00:42:52,200 --> 00:42:55,710\nSo if I go into VCenter and\nI try to change that security policy,\n\n826\n00:42:55,710 --> 00:42:59,160\nit'll change it there but it'll never make\ndown to the host which means these things\n\n827\n00:42:59,160 --> 00:43:00,380\naren't gonna get turned on.\n\n828\n00:43:00,380 --> 00:43:03,633\nSo if the host station is broken\nyou typically do have to go to\n\n829\n00:43:03,633 --> 00:43:04,684\nthe DCUI to fix it.\n\n830\n00:43:04,684 --> 00:43:09,642\nSo, I'll go here and remember we\njust hit Alt+F1 on our keyboard,\n\n831\n00:43:09,642 --> 00:43:14,001\nAlt+F1 will take us over to that shell And\nwe can log in, and\n\n832\n00:43:14,001 --> 00:43:18,640\nthere's just a few simple commands\nthat allow us to restart it.\n\n833\n00:43:18,640 --> 00:43:21,512\nNow the text is really,\nreally small on this so\n\n834\n00:43:21,512 --> 00:43:24,246\nlet me switch over to\nan SSH window instead.\n\n835\n00:43:28,450 --> 00:43:32,070\nIf I can remember the IP address for\nthat host, I'm pretty sure that's it.\n\n836\n00:43:33,110 --> 00:43:33,910\nThere we go.\n\n837\n00:43:33,910 --> 00:43:38,460\nSo here I am, logged into that same ESXI\nhost except my text is a little larger and\n\n838\n00:43:38,460 --> 00:43:39,970\neasier to read.\n\n839\n00:43:39,970 --> 00:43:41,360\nIf I want to restart that agent,\n\n840\n00:43:41,360 --> 00:43:45,970\nit's just a Linux daemon that's running\nin the background, and we can stop and\n\n841\n00:43:45,970 --> 00:43:49,670\nstart it and restart it, and\nthat's normally enough to fix our problem.\n\n842\n00:43:49,670 --> 00:43:53,931\nIf I want to restart it I just\nneed to run a little script.\n\n843\n00:43:53,931 --> 00:44:00,862\nSo I'm gonna run ./etc/init.d.\n\n844\n00:44:00,862 --> 00:44:04,520\nThat's the initialization daemon and\nwhen the system boots up,\n\n845\n00:44:04,520 --> 00:44:07,846\nthis is where it determines what\nto start and what to stop and\n\n846\n00:44:07,846 --> 00:44:11,120\nin there is the demon itself,\nwhich is just called host D.\n\n847\n00:44:12,125 --> 00:44:16,270\nNow the host D demon takes\na couple of commands.\n\n848\n00:44:16,270 --> 00:44:22,901\nWe can say slash ETC slash init\ndot D slash host D start or\n\n849\n00:44:22,901 --> 00:44:27,260\nstop or\nrestart if we just want to restart it.\n\n850\n00:44:27,260 --> 00:44:30,630\nThat's what we normally want or\nstatus, and\n\n851\n00:44:30,630 --> 00:44:34,100\nstatus is a good place to start because\nit'll tell you if it's running or not.\n\n852\n00:44:34,100 --> 00:44:34,740\nOkay?\n\n853\n00:44:34,740 --> 00:44:37,070\nAnd if it's not running then\nmaybe that's our problem.\n\n854\n00:44:37,070 --> 00:44:38,360\nWe just need to start it up.\n\n855\n00:44:38,360 --> 00:44:39,310\nIf it is running and\n\n856\n00:44:39,310 --> 00:44:43,940\nit's not talking to vCenter, then it\ntypically just needs to be restarted.\n\n857\n00:44:43,940 --> 00:44:46,700\nSo, we can come in here and say restart.\n\n858\n00:44:46,700 --> 00:44:47,310\nOkay.\n\n859\n00:44:47,310 --> 00:44:51,300\nSo it's gonna stop the host demon and\nthen it's gonna start it back up again.\n\n860\n00:44:51,300 --> 00:44:54,670\nAll right, so here it's just letting me\nknow that it found its own RAM disk and\n\n861\n00:44:54,670 --> 00:44:57,140\nit fired back up and\nnow it appears to be happy.\n\n862\n00:44:58,180 --> 00:45:01,770\nOnce it's happy again, now we should\nbe talking back to vCenter and\n\n863\n00:45:01,770 --> 00:45:03,790\nthings should be in business there.\n\n864\n00:45:03,790 --> 00:45:07,740\nIf not, what I'll see is I'll start\nto have a warning here that I've lost\n\n865\n00:45:07,740 --> 00:45:09,490\nconnectivity with that server.\n\n866\n00:45:09,490 --> 00:45:10,190\nAll right.\n\n867\n00:45:10,190 --> 00:45:14,430\nIf the The ESXi host agent,\nthat vCenter agent,\n\n868\n00:45:14,430 --> 00:45:18,730\nif it stops, it almost looks\nlike the server is powered off,\n\n869\n00:45:18,730 --> 00:45:20,720\nbecause we're not getting\nany reporting information.\n\n870\n00:45:20,720 --> 00:45:23,580\nIt does still see pings like\nit knows the host is there,\n\n871\n00:45:23,580 --> 00:45:26,770\nit's just not getting any reporting data,\nso a lot of your performance reports and\n\n872\n00:45:26,770 --> 00:45:27,580\nstuff will be incorrect.\n\n873\n00:45:28,780 --> 00:45:33,120\nNow, your virtual machines, if there's VMs\nrunning on it stopping the host agent does\n\n874\n00:45:33,120 --> 00:45:36,920\nnot stop the VM, so it doesn't interfere\nwith your end user connectivity.\n\n875\n00:45:36,920 --> 00:45:39,630\nSo pretty safe to restart\nthat agent whenever you want.\n\n876\n00:45:39,630 --> 00:45:41,460\nObviously you don't want\nto go crazy with it and\n\n877\n00:45:41,460 --> 00:45:44,460\ndo it all the time because it\ndoes mess with your reporting.\n\n878\n00:45:46,102 --> 00:45:46,770\nAll right,\n\n879\n00:45:46,770 --> 00:45:50,270\nso those are some of the general things\nthat we can kind of tweak around with.\n\n880\n00:45:50,270 --> 00:45:51,830\nLet's see, did I miss anything?\n\n881\n00:45:51,830 --> 00:45:53,240\nOh, one last thing.\n\n882\n00:45:53,240 --> 00:45:56,130\nThis is something that\nhappens to me a lot.\n\n883\n00:45:56,130 --> 00:46:00,650\nThe larger organization you have,\nthe larger your company,\n\n884\n00:46:00,650 --> 00:46:04,300\nthe more VMware admins you're gonna have,\nor at least people who have\n\n885\n00:46:04,300 --> 00:46:08,290\nprivileges to work on the virtual\nmachines or on the servers, all right?\n\n886\n00:46:08,290 --> 00:46:10,780\nSo if you've got a lot of\npeople working in vCenter or\n\n887\n00:46:10,780 --> 00:46:13,730\nat once, it's very possible you\ncould be butting heads with them and\n\n888\n00:46:13,730 --> 00:46:16,480\nworking on the same resources\nat the same time, so\n\n889\n00:46:16,480 --> 00:46:21,140\nit's kind of nice to be able to see\nWho is logged into vCenter right now?\n\n890\n00:46:21,140 --> 00:46:22,620\nYou want to see who's working in it.\n\n891\n00:46:22,620 --> 00:46:25,730\nAnd there's a neat little way\nwe can do that right inside\n\n892\n00:46:25,730 --> 00:46:27,682\nof the vSphere web client.\n\n893\n00:46:27,682 --> 00:46:30,550\nAll right,\nif we go back to our homepage here, and\n\n894\n00:46:30,550 --> 00:46:36,030\nwe go into our vCenter servers,\nwe can find our particular server.\n\n895\n00:46:37,260 --> 00:46:42,110\nAnd if we go to the manage tab,\nunder Manage you'll see Sessions.\n\n896\n00:46:42,110 --> 00:46:46,890\nAnd Sessions will show you everyone who\nis logged into this system right now.\n\n897\n00:46:47,980 --> 00:46:53,780\nNotice that I've got four active sessions\nright now with five idle sessions.\n\n898\n00:46:53,780 --> 00:46:54,820\nWhat the heck's going on here?\n\n899\n00:46:54,820 --> 00:46:58,650\nWell, if you look, I've got several\nof these sessions that are idle for\n\n900\n00:46:58,650 --> 00:47:00,540\n17 hours, idle for 17 hours.\n\n901\n00:47:00,540 --> 00:47:03,800\nThose would be ones that I opened\nyesterday that, for some reason,\n\n902\n00:47:03,800 --> 00:47:05,950\nare still being held open.\n\n903\n00:47:05,950 --> 00:47:09,210\nI must have left a window open\nsomewhere or whatever and so\n\n904\n00:47:09,210 --> 00:47:11,920\nit's holding that open for\nwhatever reason.\n\n905\n00:47:11,920 --> 00:47:13,220\nI've got other ones that are active.\n\n906\n00:47:13,220 --> 00:47:15,180\nThese are sessions that I'm in right now.\n\n907\n00:47:15,180 --> 00:47:17,870\nAnd it may be the vCenter window\nthat I've got launched or\n\n908\n00:47:17,870 --> 00:47:19,990\nI actually do have another\nwindow in the background.\n\n909\n00:47:19,990 --> 00:47:23,260\nAnd I think I left that console\nwindow open for that one VM So\n\n910\n00:47:23,260 --> 00:47:23,910\nit's running back there.\n\n911\n00:47:23,910 --> 00:47:27,180\nSo that's probably my three\nmain actives right here.\n\n912\n00:47:27,180 --> 00:47:28,580\nOkay.\nAnd actually, this session,\n\n913\n00:47:28,580 --> 00:47:31,990\nthe one that says, this session,\nthat's my window right now.\n\n914\n00:47:31,990 --> 00:47:34,520\nNow I just keep logging in as\nadministrator since I'm the only person\n\n915\n00:47:34,520 --> 00:47:37,470\nworking here but if we've integrated\nthis with our active directory or\n\n916\n00:47:37,470 --> 00:47:40,820\nwe have local accounts,\nyou'll actually see everybody's name.\n\n917\n00:47:40,820 --> 00:47:43,620\nSo you'll see who it is\nexactly that's in here.\n\n918\n00:47:43,620 --> 00:47:47,910\nAnd if you see idle session like these\nthat have been sitting around a long time,\n\n919\n00:47:47,910 --> 00:47:51,831\nyou can always come in and terminate\nthem And kick them out of the system.\n\n920\n00:47:51,831 --> 00:47:53,661\nBut normally you don't worry about that.\n\n921\n00:47:53,661 --> 00:47:56,075\nIt's just that if you're gonna\nmake a significant change,\n\n922\n00:47:56,075 --> 00:47:57,890\nmaybe you're about to upgrade vCenter.\n\n923\n00:47:57,890 --> 00:48:01,040\nYou might go in here and\ngo to manage and sessions, and\n\n924\n00:48:01,040 --> 00:48:03,260\ntake a look who's in right now.\n\n925\n00:48:03,260 --> 00:48:05,410\nBecause if you start\nto upgrade vCenter and\n\n926\n00:48:05,410 --> 00:48:08,920\nsomeone's in here doing work,\nthat's gonna cause a problem.\n\n927\n00:48:08,920 --> 00:48:10,520\nSo we want to make sure\nthat doesn't happen.\n\n928\n00:48:10,520 --> 00:48:16,140\nSo we go in here, we see whose there,\nand we notify them.\n\n929\n00:48:17,230 --> 00:48:19,905\nThat's another thing that we do\njust as we work within vCenter.\n\n930\n00:48:21,622 --> 00:48:23,900\nAll right I think that's about it for\ngeneral stuff.\n\n931\n00:48:23,900 --> 00:48:26,350\nThe next thing I want to\ntalk about are alarms.\n\n932\n00:48:26,350 --> 00:48:29,390\nWe've got alarms like mine\nthat are showing up over here.\n\n933\n00:48:29,390 --> 00:48:31,410\nThese are ones that\nare built into the system.\n\n934\n00:48:31,410 --> 00:48:34,810\nI want to show you guys,\nall the alarms that already defined.\n\n935\n00:48:34,810 --> 00:48:35,420\nThere's a ton of them.\n\n936\n00:48:35,420 --> 00:48:38,000\nThen I want to show you\nhow to make your own.\n\n937\n00:48:38,000 --> 00:48:40,510\nThere's not really a ton of\ntime left in this segment.\n\n938\n00:48:40,510 --> 00:48:41,800\nWhy don't we stop and take a break?\n\n939\n00:48:41,800 --> 00:48:45,611\nWhen we get back, we will tackle\nthe alarms and get a chance to see that.\n\n940\n00:48:45,611 --> 00:48:47,736\nStay tuned, we'll be back in a few.\n\n941\n00:48:47,736 --> 00:48:55,403\n[MUSIC].\n\n942\n00:48:55,403 --> 00:48:57,620\nAll right, welcome back everybody.\n\n943\n00:48:57,620 --> 00:49:00,050\nBefore the break I mentioned alarms.\n\n944\n00:49:00,050 --> 00:49:03,455\nThere are a lot of alarms\nbuilt into vCenter, and\n\n945\n00:49:03,455 --> 00:49:05,910\nI know that cuz I've got two\nof them triggered right now.\n\n946\n00:49:05,910 --> 00:49:08,910\nI can see over here I've got some\nalarms that are set on my system, and\n\n947\n00:49:08,910 --> 00:49:12,550\nif I float over it I can see I've got\na health status monitoring alarm, and\n\n948\n00:49:12,550 --> 00:49:14,760\nI've got a data store usage on disk alarm.\n\n949\n00:49:14,760 --> 00:49:17,030\nWhere the heck are these coming from?\n\n950\n00:49:17,030 --> 00:49:21,140\nWell, at the factory, when VMware\nbuilt the initial configuration for\n\n951\n00:49:21,140 --> 00:49:23,330\nvCenter to send out for us to install,\n\n952\n00:49:23,330 --> 00:49:29,140\nthey built in a whole collection of\nalarms for all sorts of status ailments.\n\n953\n00:49:29,140 --> 00:49:31,950\nIt's monitoring the system and\nany time one of them goes wrong,\n\n954\n00:49:31,950 --> 00:49:36,100\none of them get's triggered, we see\nthese little warning messages over here.\n\n955\n00:49:36,100 --> 00:49:39,620\nThese are really nice to be able to\ngive us an idea when problems occur.\n\n956\n00:49:40,860 --> 00:49:44,590\nIf you want to see the list,\nyou go to your vCenter server.\n\n957\n00:49:44,590 --> 00:49:49,560\nAnd you go to the manage tab, and under\nmanage you'll see alarm definitions, and\n\n958\n00:49:49,560 --> 00:49:53,270\nwhen you go to alarm definitions,\nyou'll see all of the definitions that\n\n959\n00:49:53,270 --> 00:49:57,590\nthe VMware guys built in at the factory,\nand there's a ton of them.\n\n960\n00:49:57,590 --> 00:49:59,060\nI've actually never counted.\n\n961\n00:49:59,060 --> 00:50:01,140\nIt tells me right there, 80 of them.\n\n962\n00:50:01,140 --> 00:50:02,680\nThere's 80 different alarms,\n\n963\n00:50:02,680 --> 00:50:05,850\nthat are right there in the system each\none monitoring for different things.\n\n964\n00:50:05,850 --> 00:50:11,010\nThe first one here, for example,\nhost connection and power state so\n\n965\n00:50:11,010 --> 00:50:14,650\nis the host able to communicated with and\nis it powered on?\n\n966\n00:50:14,650 --> 00:50:17,950\nIf it isn't if there's a problem\nsomething happens, and\n\n967\n00:50:17,950 --> 00:50:19,820\nthe way it detects that is with a trigger.\n\n968\n00:50:19,820 --> 00:50:24,720\nSee here I've got a trigger every\nalarm has a trigger, and an action.\n\n969\n00:50:24,720 --> 00:50:28,420\nThe trigger is what has to happen for\nthis alarm to fire, and\n\n970\n00:50:28,420 --> 00:50:32,430\nthe action is what do we do\nwhen the alarm does fire.\n\n971\n00:50:32,430 --> 00:50:36,010\nSo the trigger is the most important part,\nhow do we know the alarm is there?\n\n972\n00:50:36,010 --> 00:50:40,910\nAnd we can see here, host connection\nstate is equal to not responding.\n\n973\n00:50:40,910 --> 00:50:44,450\nIf the host is not responding,\nthat's a trigger event for this alarm.\n\n974\n00:50:44,450 --> 00:50:49,180\nOr if the power state is\nnot equal to standby.\n\n975\n00:50:49,180 --> 00:50:54,040\nIf we, if we have the system is not\nresponding and it's not in standby,\n\n976\n00:50:54,040 --> 00:50:55,120\nif it's in standby mode,\n\n977\n00:50:55,120 --> 00:50:59,020\nobviously we don't need us to tell us it's\na failure, cuz we know it's in standby.\n\n978\n00:50:59,020 --> 00:51:03,390\nBut if it's not in standby and\nif it's not responding\n\n979\n00:51:03,390 --> 00:51:06,510\nthen that means we've got\na connectivity issue for open alarm.\n\n980\n00:51:06,510 --> 00:51:07,500\nAll right.\n\n981\n00:51:07,500 --> 00:51:08,740\nNow what we do?\n\n982\n00:51:08,740 --> 00:51:09,880\nWhat's our action?\n\n983\n00:51:09,880 --> 00:51:10,520\nNothing.\n\n984\n00:51:10,520 --> 00:51:11,300\nNo action is defined.\n\n985\n00:51:11,300 --> 00:51:12,930\nNow that doesn't mean\nI don't hear about it.\n\n986\n00:51:12,930 --> 00:51:15,470\nThere's always one action\nwhich is over here, an alarm.\n\n987\n00:51:15,470 --> 00:51:17,690\nWe'll actually see\nthe alarm screen light up.\n\n988\n00:51:17,690 --> 00:51:20,500\nBut it's not gonna do anything about it,\nit's just gonna tell us.\n\n989\n00:51:20,500 --> 00:51:21,910\nAnd that's how a lot of these are.\n\n990\n00:51:21,910 --> 00:51:25,200\nAs you go down the list here,\nyou'll find all these different alarms for\n\n991\n00:51:25,200 --> 00:51:26,230\ndifferent things.\n\n992\n00:51:26,230 --> 00:51:30,580\nMany of which have no action,\nyou can edit any one of these.\n\n993\n00:51:30,580 --> 00:51:32,160\nI've got my edit button up here.\n\n994\n00:51:32,160 --> 00:51:33,790\nAnd when we edit it.\n\n995\n00:51:33,790 --> 00:51:36,660\nYou can adjust things like the trigger,\nand\n\n996\n00:51:36,660 --> 00:51:42,050\nwhat's gonna happen here as well as the\naction and dictate what it's going to do.\n\n997\n00:51:42,050 --> 00:51:44,240\nAnd notice there's different actions.\n\n998\n00:51:44,240 --> 00:51:48,550\nWhen you go from normal to warning,\nwhen you go from warning to critical,\n\n999\n00:51:48,550 --> 00:51:52,650\nwhen you go critical back to warning,\nand when you go warning back to normal.\n\n1000\n00:51:52,650 --> 00:51:55,250\nAs the alarm corrects\nitself what do we do?\n\n1001\n00:51:56,540 --> 00:52:01,730\nNow the guys at VMware they recommend\nyou don't edit the default alarms,\n\n1002\n00:52:01,730 --> 00:52:05,840\nthese are alarms defined by them\nthat serve a particular purpose.\n\n1003\n00:52:05,840 --> 00:52:09,690\nIf you want to change them, all right,\nif you want to change one of these,\n\n1004\n00:52:09,690 --> 00:52:13,830\nif you don't like this host connection\none for example, you can edit it.\n\n1005\n00:52:13,830 --> 00:52:16,690\nAnd you'll see this enable alarm option.\n\n1006\n00:52:16,690 --> 00:52:20,810\nWhat they recommend is that you disable\nthe alarm that's already there, and\n\n1007\n00:52:20,810 --> 00:52:22,440\nthen create your own.\n\n1008\n00:52:22,440 --> 00:52:24,810\nCreate your own custom alarm\nthat meets your needs.\n\n1009\n00:52:24,810 --> 00:52:28,230\nThat way the original alarms are left\nin their original state, and\n\n1010\n00:52:28,230 --> 00:52:30,820\nin the future if you do upgrades and\nupdates that you don't\n\n1011\n00:52:30,820 --> 00:52:33,170\nrun the risk of accidentally\noverwriting your customization.\n\n1012\n00:52:33,170 --> 00:52:36,870\nThat doesn't normally happen, but\nthat's like the worst case scenario.\n\n1013\n00:52:36,870 --> 00:52:39,260\nIf you create your own alarms\nthat kind of solves that problem.\n\n1014\n00:52:39,260 --> 00:52:43,100\nAll right, let me show you creating\nan alarm, cuz it is pretty easy.\n\n1015\n00:52:43,100 --> 00:52:45,340\nWe just go up here,\nwe hit the plus button, and\n\n1016\n00:52:45,340 --> 00:52:47,160\nnow we start to define an alarm.\n\n1017\n00:52:47,160 --> 00:52:50,860\nAnd so I figure out whatever it is\nthat I want to monitor, it's up\n\n1018\n00:52:50,860 --> 00:52:53,970\nto me what I want to call it so I'll\njust call this one Don's custom alarm.\n\n1019\n00:52:57,240 --> 00:52:58,500\nYou can give it a description.\n\n1020\n00:52:58,500 --> 00:53:00,360\nYou can specify what you want to monitor.\n\n1021\n00:53:00,360 --> 00:53:03,420\nNow this is important because\nwhat you choose here is gonna\n\n1022\n00:53:03,420 --> 00:53:06,880\ninfluence what triggers and actions\nyou get because different triggers and\n\n1023\n00:53:06,880 --> 00:53:09,770\nactions apply to different\nmonitored targets.\n\n1024\n00:53:10,790 --> 00:53:13,010\nNormally we're monitoring\nvirtual machines or hosts.\n\n1025\n00:53:13,010 --> 00:53:14,930\nThose are the two things\nthat we normally monitor.\n\n1026\n00:53:14,930 --> 00:53:19,430\nBut you'll see clusters, data centers,\ndata stores, distributed switches,\n\n1027\n00:53:19,430 --> 00:53:20,340\nand so on.\n\n1028\n00:53:20,340 --> 00:53:23,470\nAll the various things in our environment\nthat we might want to monitor, right?\n\n1029\n00:53:23,470 --> 00:53:25,680\nMaybe I'm worried about my iSCSI san.\n\n1030\n00:53:25,680 --> 00:53:30,140\nWell, it's a data-store, or,\none of the data-stores is residing on it.\n\n1031\n00:53:30,140 --> 00:53:32,660\nI might want to monitor that datastore for\nparticular things.\n\n1032\n00:53:32,660 --> 00:53:36,530\nAnd you'll see down here,\nam I monitoring for specific conditions?\n\n1033\n00:53:36,530 --> 00:53:40,590\nLike a state, or CPU usage,\nthis example they give there.\n\n1034\n00:53:40,590 --> 00:53:43,470\nOr do I want to monitor for\na specific event.\n\n1035\n00:53:43,470 --> 00:53:45,030\nLike power on, power off.\n\n1036\n00:53:45,030 --> 00:53:46,410\nWhat is it that I'm looking for there.\n\n1037\n00:53:47,550 --> 00:53:50,480\nI choose kinda that general\nthing that I'm monitoring.\n\n1038\n00:53:50,480 --> 00:53:52,410\nThen I'm able to go to triggers, and\n\n1039\n00:53:52,410 --> 00:53:55,310\ndefine the appropriate trigger\nthat I wanna work with.\n\n1040\n00:53:55,310 --> 00:53:58,930\nAnd so I can just go in here and\nadd what it is.\n\n1041\n00:53:58,930 --> 00:54:02,667\nNow notice I've got data-stored disk\nprovision, data-store disk usage,\n\n1042\n00:54:02,667 --> 00:54:04,620\ndata-store state to all hosts.\n\n1043\n00:54:04,620 --> 00:54:07,360\nThese are kinda like\nperformance conditions.\n\n1044\n00:54:09,270 --> 00:54:10,470\nLet me just remove that.\n\n1045\n00:54:10,470 --> 00:54:14,760\nIf I go back to general and I change it to\nsay I wanna monitor for an event and I go\n\n1046\n00:54:14,760 --> 00:54:19,670\ndown here, when I go down to may triggers\nthings are a little bit different.\n\n1047\n00:54:19,670 --> 00:54:24,570\nNow I've got data store capacity increase,\nfails to resolve store policy.\n\n1048\n00:54:24,570 --> 00:54:28,370\nI'll see different entries based\non what it is I asked to monitor.\n\n1049\n00:54:28,370 --> 00:54:32,120\nAnd in the first one, the performance one,\nthose were really where I'm specifying\n\n1050\n00:54:32,120 --> 00:54:36,540\nlike ranges, and so, but\nthese are normally particular states.\n\n1051\n00:54:36,540 --> 00:54:40,690\nA lot of these are true, false counters,\neither it's true or it's false.\n\n1052\n00:54:40,690 --> 00:54:44,327\nYou can go through and measure whatever\nit is you want to measure, all right?\n\n1053\n00:54:47,440 --> 00:54:50,180\nLet's go with something\na little more simple.\n\n1054\n00:54:50,180 --> 00:54:52,278\nWe'll take a virtual machine.\n\n1055\n00:54:55,815 --> 00:54:56,645\nAll right.\n\n1056\n00:54:56,645 --> 00:55:00,847\nAnd maybe I want to monitor something like\na power state for a virtual machine, okay.\n\n1057\n00:55:00,847 --> 00:55:03,275\nI'm gonna go down here to triggers, and\n\n1058\n00:55:03,275 --> 00:55:05,845\nI'll add in the triggers\nI want to monitor for.\n\n1059\n00:55:05,845 --> 00:55:07,495\nIn my trigger I can come in here and\n\n1060\n00:55:07,495 --> 00:55:10,135\nI can find things like the power state,\nit'll be in here somewhere.\n\n1061\n00:55:15,070 --> 00:55:16,160\nAnd it should be, let's see.\n\n1062\n00:55:16,160 --> 00:55:17,300\nVirtual machine.\n\n1063\n00:55:17,300 --> 00:55:21,860\nThe hardest part is finding the counter,\nright?\n\n1064\n00:55:21,860 --> 00:55:24,840\nBecause they're all kind\nof named differently.\n\n1065\n00:55:24,840 --> 00:55:25,730\nThere we go.\n\n1066\n00:55:25,730 --> 00:55:27,050\nVirtual machine powered off.\n\n1067\n00:55:27,050 --> 00:55:27,890\nAll right?\n\n1068\n00:55:27,890 --> 00:55:30,880\nIf the virtual machine's powered\noff I wanna an alert about it.\n\n1069\n00:55:30,880 --> 00:55:33,970\nIf I know that all my VM's\nshould be powered on,\n\n1070\n00:55:33,970 --> 00:55:37,140\nI wanna get an alert\nif one is powered off.\n\n1071\n00:55:37,140 --> 00:55:40,290\nNow, you can set more than one trigger,\nif you want.\n\n1072\n00:55:41,290 --> 00:55:45,825\nNotice how it's saying here trigger if\nany of the following events occur, so\n\n1073\n00:55:45,825 --> 00:55:48,686\nI can specify all sorts\nof different triggers and\n\n1074\n00:55:48,686 --> 00:55:51,634\nif any one of them occurs\nit'll send a red flag up.\n\n1075\n00:55:51,634 --> 00:55:54,826\nNow, on the other example when I\nfirst started to set this up I had\n\n1076\n00:55:54,826 --> 00:55:56,480\na drop down box up here.\n\n1077\n00:55:56,480 --> 00:55:59,110\nDepending on the type of alert you're\ndoing, you may have a drop down box that\n\n1078\n00:55:59,110 --> 00:56:03,710\nsays whether all of the events\nhave to occur or if any of them.\n\n1079\n00:56:03,710 --> 00:56:07,430\nAny means any one of these\nevents would trigger this alarm.\n\n1080\n00:56:07,430 --> 00:56:10,960\nAll means all of these events would\nhave to happen at the same time for\n\n1081\n00:56:10,960 --> 00:56:12,019\nthis alarm to be triggered.\n\n1082\n00:56:13,270 --> 00:56:17,090\nThen down at the bottom I can set\nadditional conditions, all right?\n\n1083\n00:56:17,090 --> 00:56:21,700\nAnd these are conditions where,\nmaybe I want to monitor particular things.\n\n1084\n00:56:21,700 --> 00:56:26,250\nSo right now I'm monitoring all\nof my virtual machines, right?\n\n1085\n00:56:26,250 --> 00:56:28,900\nBut I might wanna do just\na particular virtual machine,\n\n1086\n00:56:28,900 --> 00:56:33,320\nso VM name Equal too, or\nmaybe I'll do starts with.\n\n1087\n00:56:33,320 --> 00:56:35,980\nAnd I'm going to say starts with app,\n\n1088\n00:56:35,980 --> 00:56:37,540\nbecause I've got a lot\nof virtual machines.\n\n1089\n00:56:37,540 --> 00:56:39,446\nI've got VM-server1.\n\n1090\n00:56:39,446 --> 00:56:42,464\nI've got VM-linux1.\n\n1091\n00:56:42,464 --> 00:56:46,411\nAnd then I've got app-web1,\napp-web2, app-web3.\n\n1092\n00:56:46,411 --> 00:56:51,168\nIf I wanna monitor all of those web\nservers I could say the VM name starts\n\n1093\n00:56:51,168 --> 00:56:52,309\nwith app-web.\n\n1094\n00:56:52,309 --> 00:56:53,098\nOkay?\n\n1095\n00:56:53,098 --> 00:56:55,972\nIt starts with that, so\nit can end with one, two, three,\n\n1096\n00:56:55,972 --> 00:56:57,450\nwhatever number after that.\n\n1097\n00:56:57,450 --> 00:57:00,660\nSo this is just when one of\nthose guys gets powered off,\n\n1098\n00:57:00,660 --> 00:57:03,300\nI'm going to get an alarm.\n\n1099\n00:57:03,300 --> 00:57:07,330\nIf I stop right here, there's no action,\nand if there's no action,\n\n1100\n00:57:07,330 --> 00:57:12,000\nwhen the alarm triggers I'll just see\nit back here in vCenter and that's it.\n\n1101\n00:57:12,000 --> 00:57:14,930\nBut if I really wanna go hardcore,\nI go into actions and\n\n1102\n00:57:14,930 --> 00:57:18,190\nI define what to do when\na failure like this happens.\n\n1103\n00:57:18,190 --> 00:57:20,820\nAnd so I can add in and\nI can say what to do.\n\n1104\n00:57:20,820 --> 00:57:21,870\nAll right.\n\n1105\n00:57:21,870 --> 00:57:25,520\nMaybe I want it to kick in and\npower on the VM.\n\n1106\n00:57:25,520 --> 00:57:29,130\nSo if the VM powers off,\njust power the sucker back on again.\n\n1107\n00:57:29,130 --> 00:57:30,710\nRight?\nThat's one approach.\n\n1108\n00:57:30,710 --> 00:57:32,880\nOr you can try and\nreboot it if you wanted.\n\n1109\n00:57:32,880 --> 00:57:34,300\nYou can give that kind of option.\n\n1110\n00:57:34,300 --> 00:57:35,470\nWe can migrate it.\n\n1111\n00:57:35,470 --> 00:57:37,370\nHey somebody powered it off,\nthere must be a problem,\n\n1112\n00:57:37,370 --> 00:57:39,350\nlet's try and migrate it to another host.\n\n1113\n00:57:39,350 --> 00:57:42,100\nIn this scenario it's not the greatest\nidea, but we could do that.\n\n1114\n00:57:42,100 --> 00:57:43,780\nWe could choose to run a command,\n\n1115\n00:57:43,780 --> 00:57:46,810\nthat can fire up a script\nthat does whatever we want.\n\n1116\n00:57:46,810 --> 00:57:48,760\nIt can do all sorts of crazy things.\n\n1117\n00:57:48,760 --> 00:57:50,950\nBut more commonly we're gonna\ndo these two guys right here.\n\n1118\n00:57:50,950 --> 00:57:56,560\nSend a notification email or\nsend a notification trap.\n\n1119\n00:57:56,560 --> 00:57:58,310\nAn email, well that's an email.\n\n1120\n00:57:58,310 --> 00:58:03,307\nIt's gonna email somebody and let them\nknow what it is that's going on, right?\n\n1121\n00:58:03,307 --> 00:58:05,395\nSending out that email status.\n\n1122\n00:58:05,395 --> 00:58:08,545\nA notification trap, that's SNMP.\n\n1123\n00:58:08,545 --> 00:58:12,233\nSNMP, Simple Network Management Protocol,\nworks with these notifications called\n\n1124\n00:58:12,233 --> 00:58:14,137\ntraps, and so\nwe can tell it generate that.\n\n1125\n00:58:14,137 --> 00:58:15,925\nIt's mad,\nbecause I didn't give it an email address.\n\n1126\n00:58:15,925 --> 00:58:20,499\nI'll have this one send me an email,\ndon@itpro.tv.\n\n1127\n00:58:20,499 --> 00:58:21,219\nAll right?\n\n1128\n00:58:21,219 --> 00:58:24,725\nSo now it's going to send out a message\nletting me know that alert kicked off.\n\n1129\n00:58:24,725 --> 00:58:26,976\nAnd then send a notification trap,\nI can come in, or\n\n1130\n00:58:26,976 --> 00:58:28,932\nactually I don't have to figure that one.\n\n1131\n00:58:28,932 --> 00:58:33,660\nIt's gonna send it to whoever I set as\nan SMP receiver on the server earlier.\n\n1132\n00:58:33,660 --> 00:58:35,760\nSo I don't have a lot of options there.\n\n1133\n00:58:35,760 --> 00:58:38,840\nThen we can come in and\nspecify when we've got our problem.\n\n1134\n00:58:38,840 --> 00:58:41,020\nNow I picked something like Power Off.\n\n1135\n00:58:41,020 --> 00:58:43,430\nPower off really,\ndoesn't have a warning state.\n\n1136\n00:58:43,430 --> 00:58:46,620\nYou get normal if it's powered on.\n\n1137\n00:58:46,620 --> 00:58:47,920\nCritical if it's powered off.\n\n1138\n00:58:47,920 --> 00:58:50,190\nThere's no warning state in-between.\n\n1139\n00:58:50,190 --> 00:58:52,410\nSo notice that it went\nwarning to critical.\n\n1140\n00:58:52,410 --> 00:58:54,230\nNotify once.\n\n1141\n00:58:54,230 --> 00:58:57,853\nSo when this alarm triggers,\nit will send me one email and then, and\n\n1142\n00:58:57,853 --> 00:59:00,070\nthen it will send one SNNP trap.\n\n1143\n00:59:00,070 --> 00:59:01,940\nBut you can customize that to say repeat,\nso\n\n1144\n00:59:01,940 --> 00:59:05,690\nit will continually repeat\nuntil it gets addressed.\n\n1145\n00:59:05,690 --> 00:59:09,525\nIt's super annoying, so\nyou probably don't want to do that.\n\n1146\n00:59:09,525 --> 00:59:11,160\nBut, maybe that is what you want.\n\n1147\n00:59:11,160 --> 00:59:12,249\nI'll leave it at once.\n\n1148\n00:59:12,249 --> 00:59:16,614\nAnd then, what if the problem happens and\nit corrects itself, right?\n\n1149\n00:59:16,614 --> 00:59:19,006\nWhat if I'm just powering off and\npowering it back on?\n\n1150\n00:59:19,006 --> 00:59:21,467\nWell, somebody might've\nalready fixed the problem,\n\n1151\n00:59:21,467 --> 00:59:23,520\nbefore I can get to my\ncomputer to deal with it.\n\n1152\n00:59:23,520 --> 00:59:26,090\nI get the email, and I'm like oh, shoot\nlet me get to my computer and fix this.\n\n1153\n00:59:26,090 --> 00:59:28,070\nOh, somebody else got it.\n\n1154\n00:59:28,070 --> 00:59:30,820\nSo it's a good idea to send\na recovery message too.\n\n1155\n00:59:30,820 --> 00:59:34,990\nSomething like once we get back to normal,\nsend out in an email and\n\n1156\n00:59:34,990 --> 00:59:38,700\nthat will let us know that the alert\nhas been corrected, right?\n\n1157\n00:59:38,700 --> 00:59:42,040\nSo with the email,\nI can see that it went down and\n\n1158\n00:59:42,040 --> 00:59:46,960\nthen came back up with the SNMP trap,\nI can see it and store it in my logs and\n\n1159\n00:59:46,960 --> 00:59:49,250\nhave a record of the duration\nthat it was down, right?\n\n1160\n00:59:49,250 --> 00:59:51,100\nThe duration in between\nthose to SNMP traps.\n\n1161\n00:59:52,550 --> 00:59:54,930\nNow, if I had chosen repeat, right?\n\n1162\n00:59:54,930 --> 00:59:57,170\nWhich I might not wanna repeat the email,\nthat would be annoying, but\n\n1163\n00:59:57,170 --> 01:00:00,440\nmaybe I do want to repeat the SNMP trap,\nall right.\n\n1164\n01:00:00,440 --> 01:00:05,040\nIf I set it to repeat, down here I've got\nhow often to repeat those actions, and\n\n1165\n01:00:05,040 --> 01:00:06,970\nit's every five minutes by default.\n\n1166\n01:00:06,970 --> 01:00:09,100\nSo I might wanna leave that,\nand off it'll go.\n\n1167\n01:00:10,710 --> 01:00:11,330\nAll right.\n\n1168\n01:00:11,330 --> 01:00:14,350\nI must not have hit OK on that screen\nwhen I defined an email server earlier.\n\n1169\n01:00:14,350 --> 01:00:17,890\nSo here it's just warning me that\nI haven't set up an email server.\n\n1170\n01:00:17,890 --> 01:00:20,940\nThat was on the vCenter\nsettings that I was on earlier.\n\n1171\n01:00:20,940 --> 01:00:24,270\nI know I typed in a server but\nI guess I didn't hit OK to save and\n\n1172\n01:00:24,270 --> 01:00:24,910\nI must have hit cancel.\n\n1173\n01:00:26,900 --> 01:00:30,902\nAll right, so when I hit finish now I've\ngot Don's Custom Alarm which is actually\n\n1174\n01:00:30,902 --> 01:00:33,512\na stupid name for it now so\nmaybe I should change that.\n\n1175\n01:00:33,512 --> 01:00:38,892\nSo I'll call it custom,\n\n1176\n01:00:38,892 --> 01:00:46,074\nand then powerstate@-web#.\n\n1177\n01:00:46,074 --> 01:00:46,770\nThere we go.\n\n1178\n01:00:46,770 --> 01:00:48,070\nSo now it kind of recognized that.\n\n1179\n01:00:48,070 --> 01:00:50,230\nNotice I stuck the word\ncustom at the beginning?\n\n1180\n01:00:50,230 --> 01:00:54,480\nI like to do that, just add some kind\nof designator right to the beginning.\n\n1181\n01:00:54,480 --> 01:00:58,340\nSo that I can tell what are alarms\nthat VMware created and\n\n1182\n01:00:58,340 --> 01:01:00,150\nwhat are alarms that I created.\n\n1183\n01:01:00,150 --> 01:01:04,330\nSo if you go in here and sort it by name,\nall my custom ones will be right here\n\n1184\n01:01:04,330 --> 01:01:08,070\nfirst starting with C and\nthen all the VMware ones are afterward.\n\n1185\n01:01:08,070 --> 01:01:09,750\nSo that's something that\nI've gotten in the habit of.\n\n1186\n01:01:11,390 --> 01:01:14,130\nOnce those alarms are defined,\nnow they're running.\n\n1187\n01:01:14,130 --> 01:01:15,478\nThey're monitoring on my system and\n\n1188\n01:01:15,478 --> 01:01:17,745\nit's gonna track the power state\nof those virtual machines.\n\n1189\n01:01:17,745 --> 01:01:22,556\nSo if I start to shut some things down, if\nI start going into my virtual machines and\n\n1190\n01:01:22,556 --> 01:01:27,162\nshutting some of these app-web1,\nweb2, start shutting these guys down,\n\n1191\n01:01:27,162 --> 01:01:29,006\nit should trigger that alarm.\n\n1192\n01:01:29,006 --> 01:01:33,036\nSo here maybe I'll take\na couple of these guys and\n\n1193\n01:01:33,036 --> 01:01:36,390\nsee if we can get them to shut down for\nus.\n\n1194\n01:01:39,966 --> 01:01:41,661\nOh, it's going to make\nme do them one by one.\n\n1195\n01:01:41,661 --> 01:01:42,427\nThat's pleasant.\n\n1196\n01:01:42,427 --> 01:01:47,837\n[LAUGH] So, I'll just take app-web1, if I\ncan say it, and I'll shut this one down.\n\n1197\n01:01:51,204 --> 01:01:54,200\nAll right, so when it does shut down,\nit will trigger that alarm and\n\n1198\n01:01:54,200 --> 01:01:56,637\nI'll get a warning, and\nnow I can monitor that state.\n\n1199\n01:01:56,637 --> 01:02:00,160\nNormally vCenter won't give you\nan alarm if something powers off.\n\n1200\n01:02:00,160 --> 01:02:02,740\nBecause people power\noff VM's all the time,\n\n1201\n01:02:02,740 --> 01:02:04,510\nit doesn't know if that is good or bad.\n\n1202\n01:02:04,510 --> 01:02:08,148\nAnd so we won't get a message, but\nnow that I've got a custom alarm, I will.\n\n1203\n01:02:08,148 --> 01:02:09,703\nThat is, assuming that it ever shuts down.\n\n1204\n01:02:09,703 --> 01:02:13,604\n[LAUGH] I forgot that's what\nmy problem was earlier.\n\n1205\n01:02:13,604 --> 01:02:16,274\nI tried to connect to a console\nmachine and it wasn't viewing it.\n\n1206\n01:02:16,274 --> 01:02:18,387\nWe'll have to see if that happens here or\nnot.\n\n1207\n01:02:29,997 --> 01:02:30,554\nAll right.\n\n1208\n01:02:30,554 --> 01:02:31,994\nWell, I won't sit around and wait.\n\n1209\n01:02:31,994 --> 01:02:35,858\nBut the custom alarms are just a great\ntool available to be able to do that, and\n\n1210\n01:02:35,858 --> 01:02:37,860\nyou can build as many as you want.\n\n1211\n01:02:37,860 --> 01:02:39,770\nThe performance counters\nthat I talked about earlier,\n\n1212\n01:02:39,770 --> 01:02:43,170\nthe ones that I like to monitor, you can\nactually create alarms for those and\n\n1213\n01:02:43,170 --> 01:02:46,020\nhave it where it's monitoring for\nthat information and letting you know,\n\n1214\n01:02:46,020 --> 01:02:50,410\nhey this data store is taking too long to\nhandle reads and writes or whatever and\n\n1215\n01:02:50,410 --> 01:02:52,040\ngenerate those alarms ahead of time.\n\n1216\n01:02:52,040 --> 01:02:54,880\nIt's cool because you see them\nimmediately when they happen.\n\n1217\n01:02:54,880 --> 01:02:58,460\nIf you set start and\nstop actions like I did a moment ago,\n\n1218\n01:02:58,460 --> 01:03:02,450\nyou can actually start to track\nwhen you've got your peak time.\n\n1219\n01:03:02,450 --> 01:03:06,410\nMaybe, yeah, get that alarm between 2 and\n3 pm every single day.\n\n1220\n01:03:06,410 --> 01:03:08,010\nIt's fine the rest of the day.\n\n1221\n01:03:08,010 --> 01:03:10,100\nThe twenty three hours it's fine, but\n\n1222\n01:03:10,100 --> 01:03:12,640\nfor that one hour period\neveryday it gets busy.\n\n1223\n01:03:12,640 --> 01:03:16,450\nMaybe that's a point in time during the\nday that we need to either find some way\n\n1224\n01:03:16,450 --> 01:03:20,290\nto redistribute our load to correct for,\nor we need to upgrade our resources.\n\n1225\n01:03:20,290 --> 01:03:22,280\nBut you might not notice\nit on a normal report,\n\n1226\n01:03:22,280 --> 01:03:24,860\nbecause you might be looking\nat the 24 hour average.\n\n1227\n01:03:24,860 --> 01:03:28,155\nAnd the average might be good, but\nthat one particular hour is bad.\n\n1228\n01:03:28,155 --> 01:03:30,430\nSo those are some the things\nthat we can monitor.\n\n1229\n01:03:30,430 --> 01:03:31,568\nAll right, oh, there goes my alarm.\n\n1230\n01:03:31,568 --> 01:03:36,200\nI see my alarm just triggered right over\nhere, I see app-web 1 has powered off.\n\n1231\n01:03:36,200 --> 01:03:39,699\nOkay, so the power state of\napp-web1 has been triggered,\n\n1232\n01:03:39,699 --> 01:03:43,212\nI know that there's a problem\nthere I need to go and start it.\n\n1233\n01:03:43,212 --> 01:03:47,530\nSo I can click on that machine, and\nI see here that it's powered off.\n\n1234\n01:03:47,530 --> 01:03:48,211\nI can acknowledge it.\n\n1235\n01:03:48,211 --> 01:03:51,438\nI'm gonna go ahead and just reset it\nto green to get rid of the alarm.\n\n1236\n01:03:51,438 --> 01:03:52,830\nAnd now I can go and start it.\n\n1237\n01:03:52,830 --> 01:03:54,790\nNow, I reset it to green,\n\n1238\n01:03:54,790 --> 01:03:58,290\nbut it's checking every few minutes\nto see if that alarm is true.\n\n1239\n01:03:58,290 --> 01:03:59,440\nSo, if I reset it to green and\n\n1240\n01:03:59,440 --> 01:04:02,980\nit's not on,\nwell it's gonna retrigger the alarm again.\n\n1241\n01:04:02,980 --> 01:04:04,900\nAnd so it will just set off again later.\n\n1242\n01:04:04,900 --> 01:04:06,550\nBut there it goes starting up.\n\n1243\n01:04:06,550 --> 01:04:07,910\nAnd now the alarm will be happy.\n\n1244\n01:04:09,420 --> 01:04:13,250\nAll right, so, those RV center alarms,\njust remember,\n\n1245\n01:04:13,250 --> 01:04:15,100\nsky's the limit with\nwhat you do with these.\n\n1246\n01:04:15,100 --> 01:04:18,730\nOn the action side you can run a script,\nyou can run a command if you want, and\n\n1247\n01:04:18,730 --> 01:04:21,640\nonce you do that you can\ncall all sorts of stuff.\n\n1248\n01:04:21,640 --> 01:04:24,452\nSo, really, really powerful tool.\n\n1249\n01:04:24,452 --> 01:04:25,034\nAll right.\nLet's see.\n\n1250\n01:04:25,034 --> 01:04:27,428\nDid I leave anything out?\n\n1251\n01:04:27,428 --> 01:04:28,635\nYeah.\nThat's really it.\n\n1252\n01:04:28,635 --> 01:04:32,454\nAnd then, just remember,\nword to the wise, Disable alarms,\n\n1253\n01:04:32,454 --> 01:04:35,420\ndon't delete them\nespecially the VMware ones.\n\n1254\n01:04:35,420 --> 01:04:39,290\nThe default ones, you never want to delete\nthose, you just want to disable them.\n\n1255\n01:04:39,290 --> 01:04:42,960\nThat way, if you ever need them again,\nthey're there, you can pull them back up.\n\n1256\n01:04:42,960 --> 01:04:46,015\nBut all so if you delete an alarm and\nthen you do an upgrade later,\n\n1257\n01:04:46,015 --> 01:04:49,175\nit's possible that it could recreate\nthe alarm since you know it's gone,\n\n1258\n01:04:49,175 --> 01:04:50,795\nit just recreates it and puts it back.\n\n1259\n01:04:50,795 --> 01:04:51,675\nSo you may not want that.\n\n1260\n01:04:51,675 --> 01:04:56,385\nSo it's always a better idea to disable\nan unused alarm instead of deleting it.\n\n1261\n01:04:56,385 --> 01:04:59,505\nAnd then,\nI generally create my own custom alarm and\n\n1262\n01:04:59,505 --> 01:05:02,165\ndisable the built in one if I\nwanna modify a build in one.\n\n1263\n01:05:02,165 --> 01:05:04,475\nI don't like to modify the built\nin ones if I can avoid it.\n\n1264\n01:05:05,805 --> 01:05:08,120\nAll right, so\nthat pretty much wraps up those.\n\n1265\n01:05:08,120 --> 01:05:10,190\nNow, all the things that\nI've talked about so\n\n1266\n01:05:10,190 --> 01:05:13,730\nfar are just standard\nfunctions inside of vCenter.\n\n1267\n01:05:13,730 --> 01:05:16,295\nWe can use all of these for\nmonitoring the health of our system and\n\n1268\n01:05:16,295 --> 01:05:18,380\nkinda keeping tabs on\nhow things are doing.\n\n1269\n01:05:19,710 --> 01:05:22,080\nBut it required a lot of knowledge,\ndidn't it?\n\n1270\n01:05:22,080 --> 01:05:24,820\nWe had to know things like what\nperformance counters to look for.\n\n1271\n01:05:24,820 --> 01:05:28,100\nWe have to go through and\ncreate our own alarms that do things.\n\n1272\n01:05:28,100 --> 01:05:31,700\nWouldn't it be nice if somebody\nalready did all the work for us?\n\n1273\n01:05:31,700 --> 01:05:33,110\nAnd yes absolutely.\n\n1274\n01:05:33,110 --> 01:05:34,876\nAnd VMware recognizes that.\n\n1275\n01:05:34,876 --> 01:05:36,750\nSo VMware has another product.\n\n1276\n01:05:36,750 --> 01:05:40,730\nIt's called the vCenter\nOperations Manager.\n\n1277\n01:05:40,730 --> 01:05:43,427\nAnd they usually write it as V-COP,\nso V-C-O-P.\n\n1278\n01:05:43,427 --> 01:05:47,320\nAnd what V-COP is is\nanother software package\n\n1279\n01:05:47,320 --> 01:05:52,210\nwhere VMware has already programmed it\nfrom monitoring your average workload and\n\n1280\n01:05:52,210 --> 01:05:54,948\nperformance counters and\nother information about your system.\n\n1281\n01:05:54,948 --> 01:05:59,030\nAnd they can monitor your entire\nvCenter environment for you, and\n\n1282\n01:05:59,030 --> 01:06:03,500\ngive you nice little status dashboards so\nyou don't have to be a Performance Wizard.\n\n1283\n01:06:03,500 --> 01:06:09,090\nSo, if you've got a staff packed\nfull of really sharp VMWare admins,\n\n1284\n01:06:09,090 --> 01:06:10,620\nthen use the built in tools.\n\n1285\n01:06:10,620 --> 01:06:13,646\nYou certainly don't need to buy a third\nparty product, or a separate product.\n\n1286\n01:06:13,646 --> 01:06:17,376\nBut, If you're on a skeleton crew,\nif you're the only VM admin and\n\n1287\n01:06:17,376 --> 01:06:20,059\nyou're supporting 100 hosts, it's a lot,\n\n1288\n01:06:20,059 --> 01:06:23,790\nit's a lot of data and\none person just can't keep up with it.\n\n1289\n01:06:23,790 --> 01:06:28,510\nSo that's where V-COP comes in,\nthe vCenter Operations Manager.\n\n1290\n01:06:28,510 --> 01:06:31,610\nSo let's do this, I've got about\nfive minutes left in this segment,\n\n1291\n01:06:31,610 --> 01:06:32,580\nthat's not really enough time.\n\n1292\n01:06:32,580 --> 01:06:36,280\nSo, let's stop and take a break and\nwhen we get back I wanna show you guys\n\n1293\n01:06:36,280 --> 01:06:39,272\nthe Operations Manager and\nhow it works, it's really neat.\n\n1294\n01:06:39,272 --> 01:06:42,560\nAnd kinda give you an idea of what\nthat's like and you can see whether or\n\n1295\n01:06:42,560 --> 01:06:44,160\nnot it's right for your environment.\n\n1296\n01:06:44,160 --> 01:06:49,066\nSo stay tuned,\nOperations Manager after this.\n\n1297\n01:06:49,066 --> 01:06:55,506\n>> [SOUND]\n>> All right welcome back everybody!\n\n1298\n01:06:55,506 --> 01:06:59,897\nSo before the break I started talking\nabout the vCenter Operations Manager and\n\n1299\n01:06:59,897 --> 01:07:02,670\nwhat we want to do now is\ntake a look at the thing.\n\n1300\n01:07:02,670 --> 01:07:04,345\nRight, it's pretty neat.\n\n1301\n01:07:04,345 --> 01:07:05,553\nSo I've got it pulled up right here.\n\n1302\n01:07:05,553 --> 01:07:09,345\nWhen you first log into the vCenter\nOperations Manager, you'll see this.\n\n1303\n01:07:09,345 --> 01:07:12,595\nAnd I'll show you guys how\nto set it up afterwards.\n\n1304\n01:07:12,595 --> 01:07:14,765\nNormally I show you how to\ninstall something first and\n\n1305\n01:07:14,765 --> 01:07:16,557\nthen I show you the product, but\n\n1306\n01:07:16,557 --> 01:07:21,267\nin this case, the operation manager is\npretty useless right out of the box.\n\n1307\n01:07:21,267 --> 01:07:23,207\nYou've got to let it run for\na little while to gather data.\n\n1308\n01:07:23,207 --> 01:07:27,567\nI actually started this one up the other\nand I've had it running, gathering data so\n\n1309\n01:07:27,567 --> 01:07:29,297\nwe could see some information.\n\n1310\n01:07:29,297 --> 01:07:31,607\nSo, afterward, we'll kind of\nblow it away and see this setup.\n\n1311\n01:07:31,607 --> 01:07:33,110\nThe setup is not a big deal.\n\n1312\n01:07:33,110 --> 01:07:34,370\nBut basically,\n\n1313\n01:07:34,370 --> 01:07:38,010\nthe way it works is you start with this\nentry called The World, all right?\n\n1314\n01:07:38,010 --> 01:07:40,450\nAnd you start to get\nperformance information and\n\n1315\n01:07:40,450 --> 01:07:43,620\nmetrics based on your\nentire [LAUGH] environment.\n\n1316\n01:07:43,620 --> 01:07:47,040\nAnd it times out perfectly in time for\nthe segment.\n\n1317\n01:07:47,040 --> 01:07:48,320\nI've been logged into it all afternoon.\n\n1318\n01:07:48,320 --> 01:07:49,110\nAll right.\n\n1319\n01:07:49,110 --> 01:07:51,620\nSo here we go, I get my status back up.\n\n1320\n01:07:51,620 --> 01:07:52,580\nAnd off we go.\n\n1321\n01:07:52,580 --> 01:07:56,580\nNow, you're gonna see various blocks in\nhere, and it's using the standard green,\n\n1322\n01:07:56,580 --> 01:08:01,750\nyellow, red kind of notation to let you\nknow whether things are good or bad.\n\n1323\n01:08:01,750 --> 01:08:04,690\nAnd then inside of them\nyou'll see various numbers.\n\n1324\n01:08:04,690 --> 01:08:05,280\nAll right?\n\n1325\n01:08:05,280 --> 01:08:07,180\nAnd the numbers are representing\ncertain things.\n\n1326\n01:08:07,180 --> 01:08:10,050\nYou'll see Metrics that\nare used all throughout.\n\n1327\n01:08:10,050 --> 01:08:11,410\nThey call them Badges.\n\n1328\n01:08:11,410 --> 01:08:11,980\nAll right?\n\n1329\n01:08:11,980 --> 01:08:15,920\nSo inside of the Operation Manager, we'll\nsee badges that mean different things.\n\n1330\n01:08:15,920 --> 01:08:19,560\nThis particular badge, if I float my\nmouse over it, see how it says health?\n\n1331\n01:08:19,560 --> 01:08:20,540\nHealth is 80.\n\n1332\n01:08:20,540 --> 01:08:21,600\nWork load is 3.\n\n1333\n01:08:21,600 --> 01:08:22,720\nAll right.\n\n1334\n01:08:22,720 --> 01:08:24,260\nSo this is a health badge right here,\n\n1335\n01:08:24,260 --> 01:08:26,460\nletting me know the health\nbadge of the system is 80.\n\n1336\n01:08:26,460 --> 01:08:29,180\nThat it's green, so\nit's healthy, it's good.\n\n1337\n01:08:29,180 --> 01:08:31,970\nBut that 80 means that I'm\n\n1338\n01:08:31,970 --> 01:08:35,820\ncreeping up there to the point where\nmaybe that won't be so good, right?\n\n1339\n01:08:35,820 --> 01:08:36,373\nRight now it's okay.\n\n1340\n01:08:36,373 --> 01:08:41,008\nI also see under vCenter Server Systems,\nI've got a red badge right here,\n\n1341\n01:08:41,008 --> 01:08:46,570\na health of 0 on my VM-SERVER01, so\nit's upset about something on VM-SERVER01.\n\n1342\n01:08:46,570 --> 01:08:48,980\nI've got some kind of\nproblem on my environment.\n\n1343\n01:08:48,980 --> 01:08:51,350\nOccasionally you may see grey ones.\n\n1344\n01:08:51,350 --> 01:08:53,460\nGrey entries are ones where we\njust don't have information.\n\n1345\n01:08:53,460 --> 01:08:57,798\nYou normally don't have information\nwhen a system is either offline or\n\n1346\n01:08:57,798 --> 01:09:01,920\nnot configured, so you may see grey\nentries from time to time too.\n\n1347\n01:09:01,920 --> 01:09:02,570\nAll right.\n\n1348\n01:09:02,570 --> 01:09:04,270\nNow this is a health patch, and\n\n1349\n01:09:04,270 --> 01:09:08,260\nhealth patches are talking about\nfrom all of the health of my system.\n\n1350\n01:09:08,260 --> 01:09:10,140\nWhether it's actually\nfunctioning properly.\n\n1351\n01:09:10,140 --> 01:09:16,370\nYou'll also see risk badges,\nwhich are indicating upcoming problems.\n\n1352\n01:09:16,370 --> 01:09:19,940\nThis is not a problem now but\na problem may be happening soon.\n\n1353\n01:09:19,940 --> 01:09:22,920\nThese are ones that it calculates\nbased on things like trends.\n\n1354\n01:09:22,920 --> 01:09:26,950\nIt says you've been growing your data\nstore by a certain amount of data every\n\n1355\n01:09:26,950 --> 01:09:28,470\nday for the last six months.\n\n1356\n01:09:28,470 --> 01:09:30,930\nIf you continue to follow that pattern,\n\n1357\n01:09:30,930 --> 01:09:32,770\ntwo months from now you're\ngoing to run out of space.\n\n1358\n01:09:32,770 --> 01:09:35,880\nYour not running out of space now,\nbut you will two months from now.\n\n1359\n01:09:35,880 --> 01:09:39,000\nSo the risk number starts to go up and\nup and up.\n\n1360\n01:09:39,000 --> 01:09:40,530\nAnd the closer you get\nto running out of data,\n\n1361\n01:09:40,530 --> 01:09:44,340\nthe higher that risk number gets until\nyou actually run out of data and\n\n1362\n01:09:44,340 --> 01:09:46,860\nthat's when your health\nnumber starts date go to bad.\n\n1363\n01:09:46,860 --> 01:09:47,410\nRight?\n\n1364\n01:09:47,410 --> 01:09:51,410\nSo there are kind of the counters there\nthat give us that little bit of a warning.\n\n1365\n01:09:51,410 --> 01:09:53,260\nAnd then the last one is Efficiency.\n\n1366\n01:09:53,260 --> 01:09:56,420\nSo Health, Risk, Efficiency.\n\n1367\n01:09:56,420 --> 01:10:00,190\nEfficiency is saying how well\nwe're using our resources.\n\n1368\n01:10:00,190 --> 01:10:05,020\nIf I have five hosts, am I getting a good\nbalanced load across all five hosts and\n\n1369\n01:10:05,020 --> 01:10:07,520\nam I able to support all\nof the VMs I've got?\n\n1370\n01:10:07,520 --> 01:10:11,150\nOr, are some hosts overburdened and\nI'm running out of resources.\n\n1371\n01:10:11,150 --> 01:10:13,180\nOr do I have some hosts\nthat are completely empty?\n\n1372\n01:10:13,180 --> 01:10:15,020\nAm I not running at full efficiency?\n\n1373\n01:10:15,020 --> 01:10:15,560\nRight?\n\n1374\n01:10:15,560 --> 01:10:18,010\nSo these are the types of\ninformation that we get.\n\n1375\n01:10:18,010 --> 01:10:20,525\nThe cool part here,\nis we don't have to define it.\n\n1376\n01:10:20,525 --> 01:10:22,940\nVMware, the people that wrote\nall this operator, they know,\n\n1377\n01:10:22,940 --> 01:10:24,530\nthey know what's good.\n\n1378\n01:10:24,530 --> 01:10:28,130\nAnd so they're able to measure that,\nand it's one less thing for us.\n\n1379\n01:10:28,130 --> 01:10:28,820\nFor us to worry about.\n\n1380\n01:10:28,820 --> 01:10:31,450\nWe just have to come here and\nlook at the dashboards.\n\n1381\n01:10:31,450 --> 01:10:33,590\nThis is my overview dashboard here.\n\n1382\n01:10:33,590 --> 01:10:35,850\nI get a nice little\noverview of all my hosts.\n\n1383\n01:10:35,850 --> 01:10:37,610\nI'll see I've gotta\nproblem on a host here.\n\n1384\n01:10:37,610 --> 01:10:41,470\nIf I float it over,\nESX server 6 has an issue.\n\n1385\n01:10:41,470 --> 01:10:41,990\nAlright.\n\n1386\n01:10:41,990 --> 01:10:45,580\nIts health is a 70 right now,\nand its workload is a 30.\n\n1387\n01:10:45,580 --> 01:10:48,620\nESX server 6,\nI shut it off during the break.\n\n1388\n01:10:48,620 --> 01:10:50,870\nI shut it off just before\nwe went on the air.\n\n1389\n01:10:50,870 --> 01:10:54,530\nSo it's a yellow right now,\nit'll turn red before too long.\n\n1390\n01:10:54,530 --> 01:10:56,280\nI can look at my virtual machines.\n\n1391\n01:10:56,280 --> 01:10:57,305\nSome of my VM's have a yellow.\n\n1392\n01:10:57,305 --> 01:10:58,509\nRight?\nVM server 1,\n\n1393\n01:10:58,509 --> 01:11:02,560\nit's health rating creeped\nup kind of high earlier.\n\n1394\n01:11:02,560 --> 01:11:05,170\nIt's at a 63 right now\nwhich is a good number, but\n\n1395\n01:11:05,170 --> 01:11:08,096\nit's going stay yellow because\nof that peak that it had.\n\n1396\n01:11:08,096 --> 01:11:13,040\nFor most of these counters, the higher\nthe number, the worse off you are.\n\n1397\n01:11:13,040 --> 01:11:15,950\nMost of what you see is ranked 0 to 100.\n\n1398\n01:11:15,950 --> 01:11:18,860\nAnd it's when you get over\n100 that it turns red, but\n\n1399\n01:11:18,860 --> 01:11:21,120\nwhen you get into the upper limits,\nit'll normally turn yellow.\n\n1400\n01:11:21,120 --> 01:11:22,520\nSo, I'm saying most.\n\n1401\n01:11:22,520 --> 01:11:25,820\nNot all the counters, but\nmost of the counters are zero to 100,\n\n1402\n01:11:25,820 --> 01:11:29,070\nwhere lower numbers are good,\nand higher numbers are bad.\n\n1403\n01:11:29,070 --> 01:11:33,120\nAll right, and then on my\ndatastores down here at the bottom,\n\n1404\n01:11:33,120 --> 01:11:35,410\nI see I've got one down\nhere that's got a problem.\n\n1405\n01:11:35,410 --> 01:11:38,880\nOne of my VDP datastores is unhealthy.\n\n1406\n01:11:38,880 --> 01:11:42,300\nAnd if you look at it,\nthe work load is a 96.\n\n1407\n01:11:42,300 --> 01:11:46,484\nThat means that that data store\nis doing a ton of work right now.\n\n1408\n01:11:46,484 --> 01:11:49,258\nWell, that's the data store\nthat I installed the vCenter\n\n1409\n01:11:49,258 --> 01:11:50,455\nOperations Manager on.\n\n1410\n01:11:50,455 --> 01:11:54,851\nVCom generates a ton of disk I/O,\nand so it's very intensive, so\n\n1411\n01:11:54,851 --> 01:11:58,950\nyou've gotta make sure you have\nhardware that can handle it.\n\n1412\n01:11:58,950 --> 01:12:03,150\nIn my case,\nmy hardware is just barely up to snuff.\n\n1413\n01:12:03,150 --> 01:12:07,950\nI can look at, in Data Store One,\nis burdened also, and that's\n\n1414\n01:12:07,950 --> 01:12:11,680\nthis particular data, so I think that's\nwhere I've got the vCenter running from,\n\n1415\n01:12:11,680 --> 01:12:13,130\nso I've got information on it.\n\n1416\n01:12:13,130 --> 01:12:16,030\nSo, you can kind of look at that and\nstart to get your summaries.\n\n1417\n01:12:16,030 --> 01:12:20,650\nYou can also do relationship views, we\ncan see how all this stuff ties together.\n\n1418\n01:12:20,650 --> 01:12:25,670\nThese are maps kinda what we saw\non the troubleshooting episode.\n\n1419\n01:12:25,670 --> 01:12:29,760\nSo we can browse in and take a look\nat our VM Server 1 or whatever and\n\n1420\n01:12:29,760 --> 01:12:32,300\nkinda see how all this\nstuff relates together.\n\n1421\n01:12:33,920 --> 01:12:34,710\nAll right?\n\n1422\n01:12:34,710 --> 01:12:36,040\nSo there's quite a bit of stuff in here.\n\n1423\n01:12:36,040 --> 01:12:39,040\nAnd we can even just expand out\nour world on the left side.\n\n1424\n01:12:39,040 --> 01:12:42,984\nAnd break things down based on\nparticular host or our cluster.\n\n1425\n01:12:42,984 --> 01:12:44,728\nRight?\nSo I might wanna look at the ITProTV\n\n1426\n01:12:44,728 --> 01:12:46,880\ncluster and see what's going on.\n\n1427\n01:12:46,880 --> 01:12:50,740\nAnd I see in my picture here that I've got\nthe cluster and I've got two hosts in it,\n\n1428\n01:12:50,740 --> 01:12:52,870\nESX server 3 and 4.\n\n1429\n01:12:52,870 --> 01:12:55,070\nThey could make that a little bit smaller,\ncouldn't they?\n\n1430\n01:12:56,590 --> 01:13:01,310\nSo there it is, and you can just look\nin there and see what all is going on.\n\n1431\n01:13:01,310 --> 01:13:06,070\nIt's all designed to be very visual,\nvery easy to interact with, all right.\n\n1432\n01:13:06,070 --> 01:13:08,990\nNow, as we start to break\ndata down inside of here, so\n\n1433\n01:13:08,990 --> 01:13:14,160\nwhen I go in to a particular host and\nI start looking at its information.\n\n1434\n01:13:14,160 --> 01:13:16,150\nI'll go back to my Overview screen.\n\n1435\n01:13:16,150 --> 01:13:20,670\nSo we can start to look at an individual\nVM as we dive down even further.\n\n1436\n01:13:22,800 --> 01:13:25,864\nAnd why is my right screen not updating?\n\n1437\n01:13:33,540 --> 01:13:34,445\nThere we go, all right.\n\n1438\n01:13:34,445 --> 01:13:37,525\nSo what I'm doing is I'm clicking\non My Virtual Machine and\n\n1439\n01:13:37,525 --> 01:13:41,282\nmy name is changing there, but\nmy overview is staying at the world view,\n\n1440\n01:13:41,282 --> 01:13:43,622\nit's not actually\nbreaking down to my host,\n\n1441\n01:13:43,622 --> 01:13:47,700\nit's just kind of highlighting\nthe host over here so I can find it.\n\n1442\n01:13:47,700 --> 01:13:50,740\nThere is actually a detail screen for\neach one of these guys.\n\n1443\n01:13:50,740 --> 01:13:51,590\nThere we go.\n\n1444\n01:13:51,590 --> 01:13:53,250\nSo here's my file server for example.\n\n1445\n01:13:53,250 --> 01:13:55,360\nAnd I can look at its health,\na health of 88.\n\n1446\n01:13:55,360 --> 01:13:57,690\nAnd you'll see more badges.\n\n1447\n01:13:57,690 --> 01:14:00,970\nIf I float over it, I can see that\nthis is the health badge right here.\n\n1448\n01:14:02,400 --> 01:14:05,280\nIf my little pop-up ever appears.\n\n1449\n01:14:05,280 --> 01:14:08,710\nAnd here's my workload,\nand here's my fault.\n\n1450\n01:14:08,710 --> 01:14:11,360\nSo each one of these representing\nsomething a little bit differently.\n\n1451\n01:14:11,360 --> 01:14:14,750\nNow my work load, I can see my CPU,\nMemory, Disk IO, Network.\n\n1452\n01:14:14,750 --> 01:14:17,560\nThere's the big four,\nthe things that I need to monitor.\n\n1453\n01:14:17,560 --> 01:14:19,050\nAnd so we can pull that up and\n\n1454\n01:14:19,050 --> 01:14:22,230\nstart to look at the information on\nthe system from that perspective.\n\n1455\n01:14:22,230 --> 01:14:24,700\nSee how the badge just\nchanged when I clicked on it?\n\n1456\n01:14:24,700 --> 01:14:28,870\nSo now I'm seeing that data, and again,\nthe guys at VMware they know what to look\n\n1457\n01:14:28,870 --> 01:14:32,090\nfor, so it's already got the information\nplugged in here to monitor for\n\n1458\n01:14:32,090 --> 01:14:35,480\nthe main things that we're\nconcerned about on this system.\n\n1459\n01:14:35,480 --> 01:14:39,540\nAnd if it's starting to underperform it\nwill generate warnings, I'll see that as\n\n1460\n01:14:39,540 --> 01:14:43,920\nthe general health of that system going\ndown, that's what VC OLAM is all about.\n\n1461\n01:14:45,720 --> 01:14:46,280\nAll right.\n\n1462\n01:14:46,280 --> 01:14:48,560\nAnd you'll also see where\nit's got alerts over here,\n\n1463\n01:14:48,560 --> 01:14:52,320\nwhere we can define custom alerts\njust like we saw over in vCenter.\n\n1464\n01:14:52,320 --> 01:14:55,670\nNow if I'm gonna define alerts in vCenter,\nwhy would I define alerts here?\n\n1465\n01:14:55,670 --> 01:15:00,410\nAnd the reason is,\ninside of the vCenter Operations Manager,\n\n1466\n01:15:00,410 --> 01:15:03,370\nwe can monitor more than one vCenter.\n\n1467\n01:15:03,370 --> 01:15:05,110\nSo I am just monitoring this one.\n\n1468\n01:15:05,110 --> 01:15:09,060\nVM Server 1, okay, but\nI could monitor as many as I wanted.\n\n1469\n01:15:09,060 --> 01:15:13,790\nAdd in five or six more vCenter\nServers and start monitoring those.\n\n1470\n01:15:13,790 --> 01:15:14,840\nWither they are linked or not.\n\n1471\n01:15:14,840 --> 01:15:16,720\nIf they are linked it will actually\nbring them in automatically.\n\n1472\n01:15:16,720 --> 01:15:18,720\nIf they are not linked\nI can just add them in.\n\n1473\n01:15:18,720 --> 01:15:24,450\nSo I can have one alert defined that's\napplying to all of my environments.\n\n1474\n01:15:24,450 --> 01:15:28,690\nNow I do have a few alerts outstanding\nright now, if I click on my VM server,\n\n1475\n01:15:28,690 --> 01:15:31,480\nI can see on the alerts tab I've\ngot two that are triggered.\n\n1476\n01:15:31,480 --> 01:15:34,210\nOne is vCenter here,\nmy overall health is affected.\n\n1477\n01:15:34,210 --> 01:15:37,480\nAnd then one is that host system,\nserver six had finally turned red.\n\n1478\n01:15:38,530 --> 01:15:41,860\nESX Server 6 is offline,\nit's upset about that.\n\n1479\n01:15:41,860 --> 01:15:45,240\nIf I turn it back on again,\nit'll go healthy and that will go away.\n\n1480\n01:15:45,240 --> 01:15:47,610\nBut let's see why my server is upset.\n\n1481\n01:15:47,610 --> 01:15:51,830\nSo if I take my server,\nI can go in here, I see its health.\n\n1482\n01:15:51,830 --> 01:15:54,590\nSee that red, and it's 100, right?\n\n1483\n01:15:54,590 --> 01:15:56,440\nThe higher number is bad, right?\n\n1484\n01:15:56,440 --> 01:15:57,820\nWe want it to be a low number.\n\n1485\n01:15:57,820 --> 01:16:00,470\nSo I gotta big red here letting\nme know it's got a problem.\n\n1486\n01:16:00,470 --> 01:16:03,620\nAnd over here I can see the alert\ninformation and down here,\n\n1487\n01:16:03,620 --> 01:16:07,400\nsource event,\nvCenter service overall health changed.\n\n1488\n01:16:07,400 --> 01:16:09,522\nOn that server, and then right here.\n\n1489\n01:16:09,522 --> 01:16:12,490\nVR Management, unable to receive\nhealth from this particular IP.\n\n1490\n01:16:13,690 --> 01:16:16,560\nVR Management, that's vsphere replication.\n\n1491\n01:16:16,560 --> 01:16:19,210\nRemember I configured vSphere\nreplication a few episodes\n\n1492\n01:16:19,210 --> 01:16:21,960\nago in the high availability and\nclustering shows?\n\n1493\n01:16:21,960 --> 01:16:24,770\nWell, I shut down my\nvSphere replication server.\n\n1494\n01:16:24,770 --> 01:16:26,950\nI didn't need it anymore,\nthat part of the show was over.\n\n1495\n01:16:26,950 --> 01:16:28,950\nSo now it's generating a health warning.\n\n1496\n01:16:28,950 --> 01:16:32,430\nvSphere replication doesn't\nwork if the vSphere replication\n\n1497\n01:16:32,430 --> 01:16:33,670\nappliance isn't running.\n\n1498\n01:16:33,670 --> 01:16:36,550\nSo I'm getting a warning there,\nletting me know to go and sort that out.\n\n1499\n01:16:36,550 --> 01:16:38,624\nRight?\nGet that system back up and online or\n\n1500\n01:16:38,624 --> 01:16:40,381\nmy replications are gonna fail.\n\n1501\n01:16:40,381 --> 01:16:40,962\nAll right?\n\n1502\n01:16:40,962 --> 01:16:43,970\nSomewhere in here I'm sure I've\ngot a warning for VDP too.\n\n1503\n01:16:43,970 --> 01:16:48,560\nI shut down\nthe VMWare Data Protection Software,\n\n1504\n01:16:48,560 --> 01:16:50,480\nso that'll setup a warning somewhere too.\n\n1505\n01:16:52,400 --> 01:16:56,120\nBut with each of these, you can jump in\nand see, what the problem is, get an idea.\n\n1506\n01:16:56,120 --> 01:16:57,710\nIt's all centrally managed, and\n\n1507\n01:16:57,710 --> 01:17:00,310\nit's designed to be done without\nhaving to mess with it too much.\n\n1508\n01:17:00,310 --> 01:17:03,540\nYou shouldn't have to tinker with\nthe Operations Manager very much\n\n1509\n01:17:03,540 --> 01:17:05,480\nto get it working, all right?\n\n1510\n01:17:05,480 --> 01:17:07,420\nCouple notes about it.\n\n1511\n01:17:07,420 --> 01:17:11,590\nWhen we've installed other applications\nlike the vSphere replication appliance,\n\n1512\n01:17:11,590 --> 01:17:15,300\nand the VMware Data Protection or\nthe VDP appliance,\n\n1513\n01:17:15,300 --> 01:17:18,640\nthose were simple OVF templates\nthat we imported and that was it.\n\n1514\n01:17:20,120 --> 01:17:21,910\nThis guy is a little more involved.\n\n1515\n01:17:21,910 --> 01:17:22,940\nWhen you import it,\n\n1516\n01:17:22,940 --> 01:17:27,690\nit actually creates a V app, because\nthere's two virtual machines that make up.\n\n1517\n01:17:27,690 --> 01:17:29,370\nThe Operation's Manager.\n\n1518\n01:17:29,370 --> 01:17:30,550\nIf I go to that host.\n\n1519\n01:17:30,550 --> 01:17:32,110\nI've got it running on Server five.\n\n1520\n01:17:32,110 --> 01:17:36,280\nAnd I take a look at\nwhat I've got in there.\n\n1521\n01:17:38,210 --> 01:17:42,310\nI've got a V app created, that's called\nthe v-center operation's manager.\n\n1522\n01:17:42,310 --> 01:17:43,310\nSo there it is.\n\n1523\n01:17:43,310 --> 01:17:44,830\nThere's my Operations Manager.\n\n1524\n01:17:44,830 --> 01:17:48,790\nAnd if I go into that V app, I'll see\nthat it's got two virtual machines.\n\n1525\n01:17:48,790 --> 01:17:51,817\nOne called analytics VM,\nand one called UI VM, okay.\n\n1526\n01:17:53,040 --> 01:17:56,080\nThe analytics VM is\nbasically a Database Server.\n\n1527\n01:17:56,080 --> 01:17:59,200\nIt's The one that's collecting all\nthe information from the host and\n\n1528\n01:17:59,200 --> 01:18:01,260\nstoring the data in a Database.\n\n1529\n01:18:01,260 --> 01:18:04,180\nAnd that Database,\nit's got a lot of data in it.\n\n1530\n01:18:04,180 --> 01:18:07,970\nAnd so it's very intensive,\nit generates a lot of resources.\n\n1531\n01:18:07,970 --> 01:18:12,060\nThe other one, the UI VM, that's\nthe user interface, that's a Web Server,\n\n1532\n01:18:12,060 --> 01:18:14,650\nthat's what I'm browsing\nto to manage this box.\n\n1533\n01:18:14,650 --> 01:18:17,340\nSo when we import this template,\nunlike the other guys,\n\n1534\n01:18:17,340 --> 01:18:19,890\nwe're actually setting up two machines.\n\n1535\n01:18:19,890 --> 01:18:22,600\nNow the reason I highlight that here,\ncuz it's not that big of a deal,\n\n1536\n01:18:22,600 --> 01:18:25,450\nis that you have to make sure that\nwhen you turn this thing on and\n\n1537\n01:18:25,450 --> 01:18:29,940\noff, you don't turn on and\noff the individual VMs.\n\n1538\n01:18:29,940 --> 01:18:31,670\nThey have a start order.\n\n1539\n01:18:31,670 --> 01:18:36,700\nThe analytics VM needs to be started\nfirst and the UI VM starts second.\n\n1540\n01:18:36,700 --> 01:18:39,830\nSo if you turn on and off the individual\nVMs, you've got to remember to do that.\n\n1541\n01:18:41,190 --> 01:18:44,380\nIf you use the V app to do it,\nturning on and\n\n1542\n01:18:44,380 --> 01:18:46,350\noff the V app,\nyou don't have to worry about it.\n\n1543\n01:18:46,350 --> 01:18:48,855\nThe V app will make sure they\nstart in the right order.\n\n1544\n01:18:48,855 --> 01:18:53,709\nSo when you do shutdowns and power ons,\nmake sure you do it from the V app,\n\n1545\n01:18:53,709 --> 01:18:55,710\nnot from the individual VMs.\n\n1546\n01:18:55,710 --> 01:18:57,262\nRight?\n\n1547\n01:18:57,262 --> 01:18:59,360\nA few other things about that.\n\n1548\n01:18:59,360 --> 01:19:03,170\nLet me bring up my show notes because I\nwrote out some extended notes that you\n\n1549\n01:19:03,170 --> 01:19:05,780\nmight run into, in real life land.\n\n1550\n01:19:05,780 --> 01:19:06,853\nAll right?\n\n1551\n01:19:06,853 --> 01:19:12,010\nSo I mentioned Health,\nand Risk, and Efficiency.\n\n1552\n01:19:12,010 --> 01:19:12,600\nAll right.\n\n1553\n01:19:12,600 --> 01:19:17,380\nThose get broken down into other\ncomponents like, Work load, Anomalies,\n\n1554\n01:19:17,380 --> 01:19:18,490\nand Faults.\n\n1555\n01:19:18,490 --> 01:19:19,210\nAll right.\n\n1556\n01:19:19,210 --> 01:19:21,300\nSo Health is broken down\ninto those three pieces.\n\n1557\n01:19:21,300 --> 01:19:24,610\nSo I just kind of wrote out descriptions\nof what each of those were and how their\n\n1558\n01:19:24,610 --> 01:19:29,480\nmetrics work because I always forget, and\nif I forget then I imagine most people do.\n\n1559\n01:19:29,480 --> 01:19:32,280\nSo workload for\nexample is scored zero to 100.\n\n1560\n01:19:32,280 --> 01:19:36,950\nThat's basically measuring whether your\nvirtual machines have enough resources,\n\n1561\n01:19:36,950 --> 01:19:38,860\nif they have access to\nthe stuff they need.\n\n1562\n01:19:38,860 --> 01:19:40,770\nDo they have the amount of\nRAM they're requesting?\n\n1563\n01:19:40,770 --> 01:19:43,770\nDo they have the amount of network\nbandwidth they're requesting?\n\n1564\n01:19:43,770 --> 01:19:46,419\nIf not, they may be asking for\nmore than what's available.\n\n1565\n01:19:46,419 --> 01:19:50,321\nAnd you'll get a score over\n100 when that happens.\n\n1566\n01:19:50,321 --> 01:19:52,062\nAnomalies, right?\n\n1567\n01:19:52,062 --> 01:19:53,462\nWe're trying to get something.\n\n1568\n01:19:53,462 --> 01:19:56,560\nThere's activity that should be happening,\nor shouldn't be happening, but it is.\n\n1569\n01:19:56,560 --> 01:19:57,570\nUnusual activity.\n\n1570\n01:19:57,570 --> 01:19:59,450\nThings that aren't normally there.\n\n1571\n01:19:59,450 --> 01:20:01,750\nThis will be ranked on\na score of zero to 100.\n\n1572\n01:20:01,750 --> 01:20:03,130\nAgain, lower is better.\n\n1573\n01:20:03,130 --> 01:20:04,910\nAnd then, falter an actual problem.\n\n1574\n01:20:04,910 --> 01:20:07,420\nLike my ESX server six\nis turned off right now.\n\n1575\n01:20:07,420 --> 01:20:08,230\nThat's a fault.\n\n1576\n01:20:08,230 --> 01:20:10,630\nAnd so, it turns up zero to 100.\n\n1577\n01:20:10,630 --> 01:20:11,850\nA 100 is a total failure.\n\n1578\n01:20:13,750 --> 01:20:16,940\nRisk, these are usually\nresource utilization.\n\n1579\n01:20:16,940 --> 01:20:20,560\nThey call them time remaining for example.\n\n1580\n01:20:20,560 --> 01:20:23,890\nTime remaining, how much more time do you\nhave before you run out of this resource.\n\n1581\n01:20:23,890 --> 01:20:25,285\nYou have a steady level of growth, and\n\n1582\n01:20:25,285 --> 01:20:27,386\nat a certain point you are gonna\nrun out of that resource.\n\n1583\n01:20:27,386 --> 01:20:28,453\nMaybe it's RAM.\n\n1584\n01:20:28,453 --> 01:20:29,232\nMaybe it's CPU.\n\n1585\n01:20:29,232 --> 01:20:32,140\nIt tries to make how long it's gonna take.\n\n1586\n01:20:32,140 --> 01:20:35,360\nThe less time you have,\nthe worst this rating will be.\n\n1587\n01:20:35,360 --> 01:20:36,810\nCapacity remaining.\n\n1588\n01:20:36,810 --> 01:20:41,110\nThat's talking about,\nnot storage capacity, but host capacity.\n\n1589\n01:20:41,110 --> 01:20:43,850\nHow many virtual machines\ncan your host store?\n\n1590\n01:20:43,850 --> 01:20:48,410\nAs you start adding VM's, you're taking\naway resources, and there's less room.\n\n1591\n01:20:48,410 --> 01:20:50,970\nSo capacity is representing\nhow much room is left.\n\n1592\n01:20:51,970 --> 01:20:53,530\nAnd then stress.\n\n1593\n01:20:53,530 --> 01:20:54,590\nHow much stress?\n\n1594\n01:20:54,590 --> 01:20:58,930\nHow much CPU and RAM is that host actually\nusing with the VM's that are on it?\n\n1595\n01:20:58,930 --> 01:21:01,840\nIf you are using DRS,\nthe Distributed Resource Scheduler,\n\n1596\n01:21:01,840 --> 01:21:05,880\nit's gonna be moving things around\nto try and alleviate stress.\n\n1597\n01:21:05,880 --> 01:21:09,990\nBut if you're not using DRS, we can get\na reflection of that value right here.\n\n1598\n01:21:09,990 --> 01:21:12,310\nAnd we can manually move things to try and\nbalance it.\n\n1599\n01:21:14,240 --> 01:21:16,510\nEfficiency is only broken\ninto two categories.\n\n1600\n01:21:16,510 --> 01:21:18,310\nYou've got reclaim-able waste.\n\n1601\n01:21:18,310 --> 01:21:22,080\nThere are basically things that\nhave been left behind by old VM's.\n\n1602\n01:21:22,080 --> 01:21:26,730\nMaybe you deleted a VM, but the VMDK\nfile is still there for some reason, or\n\n1603\n01:21:26,730 --> 01:21:29,410\nyou deleted a couple of interfaces and\n\n1604\n01:21:29,410 --> 01:21:32,220\nnow you've got a vSwitch\nthat has no interface.\n\n1605\n01:21:32,220 --> 01:21:33,440\nThese are orphaned items.\n\n1606\n01:21:33,440 --> 01:21:35,010\nThings that just get left behind.\n\n1607\n01:21:35,010 --> 01:21:37,640\nIt'll find those and\nrecommend them for deletion.\n\n1608\n01:21:37,640 --> 01:21:41,660\nBe careful because it can recognize\na shut down VM, as being orphaned also.\n\n1609\n01:21:41,660 --> 01:21:44,140\nYou don't wanna just blinding go and\ndelete things.\n\n1610\n01:21:44,140 --> 01:21:45,750\nBut take a look at the resource,\n\n1611\n01:21:45,750 --> 01:21:48,620\nit'll help you find spots where\nyou might be wasting resources.\n\n1612\n01:21:49,660 --> 01:21:53,560\nThen density, that's how well\nyou're using your equipment.\n\n1613\n01:21:53,560 --> 01:21:55,350\nI don't like this value.\n\n1614\n01:21:55,350 --> 01:21:58,900\nDensity can be measured many different\nways, and this is basically just VMware's\n\n1615\n01:21:58,900 --> 01:22:02,490\nmost general idea of how well\nyou're using your equipment.\n\n1616\n01:22:02,490 --> 01:22:05,315\nAre you getting your money's\nworth out of your hardware.\n\n1617\n01:22:05,315 --> 01:22:10,545\nThe numbers that it gives are really\nsubjective, so be careful about that.\n\n1618\n01:22:10,545 --> 01:22:13,445\nBut it does give you kind of\na general idea of how well things\n\n1619\n01:22:13,445 --> 01:22:17,215\nare being utilized.\n\n1620\n01:22:17,215 --> 01:22:18,435\nAnd when it measures things,\n\n1621\n01:22:18,435 --> 01:22:20,845\nyou'll see other little notes\nin there like these guys.\n\n1622\n01:22:20,845 --> 01:22:22,935\nI went ahead and\njust kind of laid out the vocabulary.\n\n1623\n01:22:22,935 --> 01:22:25,670\nI don't know that these will be on\nthe exam, but just so you know.\n\n1624\n01:22:25,670 --> 01:22:29,440\nYou'll see things like provisioned,\nusable, usage.\n\n1625\n01:22:29,440 --> 01:22:30,890\nA lot of these are very similar, right?\n\n1626\n01:22:30,890 --> 01:22:34,710\nProvision, that's the amount\nof resources we have assigned.\n\n1627\n01:22:34,710 --> 01:22:36,380\nHow much RAM have we assigned to a VM?\n\n1628\n01:22:36,380 --> 01:22:38,890\nHow much CPU have we assigned to the VM?\n\n1629\n01:22:38,890 --> 01:22:39,940\nHow many cores?\n\n1630\n01:22:39,940 --> 01:22:40,850\nThat kind of thing.\n\n1631\n01:22:40,850 --> 01:22:41,520\nWhat did we assign it?\n\n1632\n01:22:41,520 --> 01:22:44,140\nThat's the provisioned resource.\n\n1633\n01:22:44,140 --> 01:22:49,360\nUsable, is when it actually fires up,\nhow much is it actually using?\n\n1634\n01:22:49,360 --> 01:22:54,250\nHow much is actually available for\nit to use if I'm actually using its usage?\n\n1635\n01:22:54,250 --> 01:22:55,480\nThese two are really similar.\n\n1636\n01:22:56,940 --> 01:23:00,810\nIf it wants to use all the RAM we\nassigned it, is it actually available?\n\n1637\n01:23:00,810 --> 01:23:04,390\nIf it wants to use the storage,\nwith storage maybe we thin provisioned.\n\n1638\n01:23:04,390 --> 01:23:04,980\nWe said, yeah.\n\n1639\n01:23:04,980 --> 01:23:06,890\nYou have a 64 gig hard drive.\n\n1640\n01:23:06,890 --> 01:23:09,800\nBut when it actually wants to use it,\nwhat's truly available?\n\n1641\n01:23:09,800 --> 01:23:12,760\nMaybe there's only 36 gigs of\nspace available on that drive.\n\n1642\n01:23:12,760 --> 01:23:15,610\nThe usable number might be much\nlower than what's provisioned.\n\n1643\n01:23:15,610 --> 01:23:16,300\nRight?\n\n1644\n01:23:16,300 --> 01:23:17,520\nUsage.\n\n1645\n01:23:17,520 --> 01:23:20,520\nHow much of what we've provisioned\nare we actually using.\n\n1646\n01:23:20,520 --> 01:23:22,300\nAnd then demand.\n\n1647\n01:23:22,300 --> 01:23:26,160\nIf it were to ramp up to full utilization,\nwhat's the maximum it could ask for?\n\n1648\n01:23:26,160 --> 01:23:28,290\nRight, that difference.\n\n1649\n01:23:28,290 --> 01:23:30,590\nA lot of these are very\nrelated to each other and\n\n1650\n01:23:30,590 --> 01:23:33,970\nyou'll see these numbers throughout\nthe VCLM as it's measuring this stuff.\n\n1651\n01:23:33,970 --> 01:23:37,640\nIt Needs to know all this data,\nbecause that's how it makes its decisions.\n\n1652\n01:23:37,640 --> 01:23:39,470\nHow does it know how well\nyou're using a server?\n\n1653\n01:23:39,470 --> 01:23:41,490\nWell, it needs a look at\nwhat you've provisioned.\n\n1654\n01:23:41,490 --> 01:23:44,030\nAnd it needs to look at\nwhether systems are actually\n\n1655\n01:23:44,030 --> 01:23:45,830\nusing what they've been provisioned.\n\n1656\n01:23:45,830 --> 01:23:47,050\nIs stuff available?\n\n1657\n01:23:47,050 --> 01:23:52,450\nOr could we put more guests on that host\nand get better usage out of our hardware?\n\n1658\n01:23:52,450 --> 01:23:53,800\nThese are the things\nthat it's looking for.\n\n1659\n01:23:55,130 --> 01:23:56,640\nI just laid out each of those terms.\n\n1660\n01:23:56,640 --> 01:23:58,870\nAgain, I don't know if that\noption'll be on your exam, but\n\n1661\n01:23:58,870 --> 01:24:03,660\nit's good to know just to kind of\nhave that understood, all right?\n\n1662\n01:24:03,660 --> 01:24:05,550\nBut that in a nutshell is the VCLM.\n\n1663\n01:24:05,550 --> 01:24:07,150\nIt's really really simple.\n\n1664\n01:24:07,150 --> 01:24:10,230\nIt's extremely resource hungry.\n\n1665\n01:24:10,230 --> 01:24:13,430\nYou need to have a good chunk\nof memory assigned to it.\n\n1666\n01:24:13,430 --> 01:24:17,760\nYou need to have a good chunk of\ndisk IO available for its database.\n\n1667\n01:24:17,760 --> 01:24:21,590\nBut once you fire it up you just\npoint it at your vCenter installation\n\n1668\n01:24:21,590 --> 01:24:22,610\nand that's it.\n\n1669\n01:24:22,610 --> 01:24:26,180\nAll right, so\nhow do we actually deploy this thing?\n\n1670\n01:24:26,180 --> 01:24:28,290\nWell, it's just like the other templates.\n\n1671\n01:24:28,290 --> 01:24:31,830\nWhen you go to deploy you're\njust importing an OVF template.\n\n1672\n01:24:31,830 --> 01:24:34,700\nAnd it will contain the various VM's and\n\n1673\n01:24:34,700 --> 01:24:37,190\nstuff and\nit walks you through a very simple Wizard.\n\n1674\n01:24:37,190 --> 01:24:38,820\nThe only difference from\nthe other ones we did,\n\n1675\n01:24:38,820 --> 01:24:41,790\nis that in this Wizard we\nhave to specify two things.\n\n1676\n01:24:41,790 --> 01:24:46,280\nWe have to specify information for\ntwo different VM's, so IP addresses or\n\n1677\n01:24:46,280 --> 01:24:48,930\nwhatever for these two different systems.\n\n1678\n01:24:48,930 --> 01:24:49,430\nAll right?\n\n1679\n01:24:51,040 --> 01:24:52,240\nLet me shut mine down.\n\n1680\n01:24:53,620 --> 01:24:56,690\nI'll shut that one down and\nwhile it's shutting down,\n\n1681\n01:24:58,120 --> 01:25:03,160\nlet me go out to this host and we'll\nsee about importing it in here again.\n\n1682\n01:25:03,160 --> 01:25:06,555\nWe'll have that shut down,\nit shouldn't take too terribly\n\n1683\n01:25:06,555 --> 01:25:11,971\nlong Guess that's still running.\n\n1684\n01:25:16,454 --> 01:25:17,510\nYeah, I'm gonna wait for that to start.\n\n1685\n01:25:17,510 --> 01:25:19,830\nActually what might even be better,\nwell no.\n\n1686\n01:25:19,830 --> 01:25:23,010\nI was gonna say we could stop and take\na break but this is really the last thing\n\n1687\n01:25:23,010 --> 01:25:26,200\nthat I've gotta do to wrap this one up,\nso we'll just let it run.\n\n1688\n01:25:26,200 --> 01:25:28,310\nBasically if we wanna import it again,\n\n1689\n01:25:28,310 --> 01:25:31,830\nwe just come in like we're\ngonna be creating a new vApp.\n\n1690\n01:25:31,830 --> 01:25:32,330\nRight?\n\n1691\n01:25:32,330 --> 01:25:33,800\nSo we can go into vApps.\n\n1692\n01:25:33,800 --> 01:25:37,200\nAnd when you bring in a vApp,\nyou can choose to deploy an OVF template.\n\n1693\n01:25:37,200 --> 01:25:38,700\nNow if you make a mistake.\n\n1694\n01:25:38,700 --> 01:25:41,810\nIf you don't realize there's two VM's, and\nyou just go to the virtual machine and\n\n1695\n01:25:41,810 --> 01:25:43,390\nimport it there, it's fine.\n\n1696\n01:25:43,390 --> 01:25:45,850\nIt'll recognize that it's a vApp and\nstill bring it in that way.\n\n1697\n01:25:45,850 --> 01:25:47,540\nSo you really can't screw it up.\n\n1698\n01:25:47,540 --> 01:25:51,090\nBut we just choose to deploy the OVF and\nthen we browse and find it.\n\n1699\n01:25:51,090 --> 01:25:56,580\nI've got mine saved right here, all right?\n\n1700\n01:25:56,580 --> 01:25:59,880\nIt's gonna pass through it and\ndetermine whether or not it's compatible.\n\n1701\n01:25:59,880 --> 01:26:02,570\nActually, I had to download this one\ntwice, the first time I downloaded it,\n\n1702\n01:26:02,570 --> 01:26:05,590\nit got corrupted, so\nthis validating phase is kind of nice.\n\n1703\n01:26:05,590 --> 01:26:08,490\nAfter that, it's just a straightforward\nwizard we walk through.\n\n1704\n01:26:08,490 --> 01:26:12,230\nIts got some basic information here,\njust letting me know that its from VMware.\n\n1705\n01:26:12,230 --> 01:26:14,800\nI have to accept their\nlicense agreement as always.\n\n1706\n01:26:16,680 --> 01:26:19,670\nAll right, then we pick a destination\nwhere we're gonna park this thing.\n\n1707\n01:26:19,670 --> 01:26:22,460\nI'll put it in my IT Pro TV lab.\n\n1708\n01:26:22,460 --> 01:26:24,157\nI'm just going to give it\na slightly different name so\n\n1709\n01:26:24,157 --> 01:26:25,148\nI don't get a conflict there.\n\n1710\n01:26:27,531 --> 01:26:29,342\nAnd then we pick our configuration.\n\n1711\n01:26:29,342 --> 01:26:35,318\nNow, I've picked a small when I set it up,\nwhich can manage up to 1,500 VM's but\n\n1712\n01:26:35,318 --> 01:26:40,060\nyou can go medium or large and\na large will go up to 3,000 VM's.\n\n1713\n01:26:40,060 --> 01:26:44,996\nBut notice the recommendation,\n16 vCPUs and 34 gigs of RAM.\n\n1714\n01:26:44,996 --> 01:26:46,970\nYou've got to have\nresources to handle that.\n\n1715\n01:26:46,970 --> 01:26:52,710\nEven in a small, it's recommending\nfour CPUs and sixteen gigs of RAM.\n\n1716\n01:26:52,710 --> 01:26:55,650\nThat's why I had to bring up this server\nfive, I had to bring up another system\n\n1717\n01:26:55,650 --> 01:26:58,750\nthat had more CPU cores in it\njust to be able to power this.\n\n1718\n01:27:00,260 --> 01:27:01,550\nThen it's gonna ask where to store it.\n\n1719\n01:27:01,550 --> 01:27:04,220\nIt needs a good bit of hard drive space.\n\n1720\n01:27:04,220 --> 01:27:08,249\nWhen we go to pick storage, we need to\nfind one that has that room available, so\n\n1721\n01:27:08,249 --> 01:27:09,730\nmaybe I'll pick VDP three.\n\n1722\n01:27:09,730 --> 01:27:13,220\nActually it seems to be happy with two so\nI'll stick with that.\n\n1723\n01:27:16,470 --> 01:27:17,680\nAnd then we pick our networks.\n\n1724\n01:27:17,680 --> 01:27:20,510\nNow, on the network side, it's not just\none VM here that it's talking about,\n\n1725\n01:27:20,510 --> 01:27:22,220\nit's talking about two of them.\n\n1726\n01:27:22,220 --> 01:27:25,860\nThese settings here are just pertaining\nto the generic settings between the two,\n\n1727\n01:27:25,860 --> 01:27:28,740\nand it's the next screen where\nI then get to pick two of them.\n\n1728\n01:27:29,740 --> 01:27:31,180\nI gotta pick my time zone, I guess.\n\n1729\n01:27:31,180 --> 01:27:33,710\nWhatever time zone it is\nI want to be in today.\n\n1730\n01:27:34,780 --> 01:27:36,480\nAnd then here are my\nnetworking properties.\n\n1731\n01:27:36,480 --> 01:27:40,120\nAnd so I've gotta set an IP address for\nthe UIVM, and\n\n1732\n01:27:40,120 --> 01:27:42,830\nanother IP address for the analytics VM.\n\n1733\n01:27:42,830 --> 01:27:44,350\nI'll just punch those in.\n\n1734\n01:27:44,350 --> 01:27:46,620\nWhatever it is that I want them to be.\n\n1735\n01:27:46,620 --> 01:27:47,800\nYou just punch those in here.\n\n1736\n01:27:49,640 --> 01:27:51,337\nAnd it'll deploy.\n\n1737\n01:27:51,337 --> 01:27:53,673\nNow I'm not gonna deploy this one since\nI've already got the environment in\n\n1738\n01:27:53,673 --> 01:27:54,890\nthe background.\n\n1739\n01:27:54,890 --> 01:27:58,208\nOnce it deploys, you browse to the UI VM.\n\n1740\n01:27:58,208 --> 01:28:00,461\nYou need to start it up,\ncuz it'll deploy and it won't be started.\n\n1741\n01:28:00,461 --> 01:28:04,671\nSo you need to start the vApp, so\nyou just browse and you find your vApp.\n\n1742\n01:28:04,671 --> 01:28:08,229\nAnd once you've found it, you just\nright-click on it and choose to start it.\n\n1743\n01:28:08,229 --> 01:28:10,406\nMine's still running from before.\n\n1744\n01:28:10,406 --> 01:28:11,752\nOh no, it's done.\n\n1745\n01:28:11,752 --> 01:28:13,163\nSo you power on the vApp.\n\n1746\n01:28:13,163 --> 01:28:17,331\nAnd by powering on the vApp, it made sure\nto power on the VMs on in the right order.\n\n1747\n01:28:17,331 --> 01:28:21,121\nSo it'll power up the UI, I mean,\nthe analytics VM first and then the UI.\n\n1748\n01:28:21,121 --> 01:28:22,746\nOnce it's up, you login.\n\n1749\n01:28:22,746 --> 01:28:26,026\nAnd the login credentials,\nI always forget these.\n\n1750\n01:28:26,026 --> 01:28:30,031\nSo I went ahead and put them in my\nnotes also, cuz they're a little weird.\n\n1751\n01:28:30,031 --> 01:28:35,375\nThere's a default account, which is admin,\nadmin, username, admin, password, admin.\n\n1752\n01:28:35,375 --> 01:28:37,541\nI thought I put them in\nthe notes somewhere.\n\n1753\n01:28:37,541 --> 01:28:42,985\nLet's see, maybe, oh,\nhere it is default login.\n\n1754\n01:28:42,985 --> 01:28:48,273\nThe default admin log, default log in for\nthe UI is admin/admin.\n\n1755\n01:28:48,273 --> 01:28:51,606\nDuring the initial configuration,\nit will ask you to change that.\n\n1756\n01:28:51,606 --> 01:28:54,583\nSo you login as admin/admin and\nthey you change the password.\n\n1757\n01:28:54,583 --> 01:28:58,040\nIt's also gonna ask you for\nthe root password to VM's and\n\n1758\n01:28:58,040 --> 01:29:00,285\nthis one is a little harder to guess.\n\n1759\n01:29:00,285 --> 01:29:03,573\nThe username is root, but\nthe password is vmware and it'll offer for\n\n1760\n01:29:03,573 --> 01:29:04,933\nyou to change that one also,\n\n1761\n01:29:04,933 --> 01:29:08,468\nbut you've got to put in the old password\nbefore it can change the new one.\n\n1762\n01:29:08,468 --> 01:29:12,061\nSo you'll need to know those two,\nadmin and vmware.\n\n1763\n01:29:12,061 --> 01:29:16,937\nThe only thing it asks after that\nis where your vCenter Server is?\n\n1764\n01:29:16,937 --> 01:29:20,967\nSo you put in the fully qualified name for\nyour vCenter Server and a user name and\n\n1765\n01:29:20,967 --> 01:29:22,018\npassword for that.\n\n1766\n01:29:22,018 --> 01:29:25,426\nOnce that's done, that's it for\nvCenter Operation's Managers.\n\n1767\n01:29:25,426 --> 01:29:26,320\nSuper simple.\n\n1768\n01:29:26,320 --> 01:29:31,025\nIt reaches out to vCenter and it starts\nharvesting data and it does it hardcore.\n\n1769\n01:29:31,025 --> 01:29:34,680\nIt is gathering tons of data storing it in\nhis database and parsing it to create all\n\n1770\n01:29:34,680 --> 01:29:38,578\nthat information I was just showing you,\nthose nice little web-based dashboards.\n\n1771\n01:29:38,578 --> 01:29:42,371\nAnd from then on, instead of having to\ngo mess with performance counters and\n\n1772\n01:29:42,371 --> 01:29:46,221\nsetup your own alerts instead of having\nto go and measure as your host by host,\n\n1773\n01:29:46,221 --> 01:29:48,616\nyou just go to the vCenter\nOperations Manager.\n\n1774\n01:29:48,616 --> 01:29:50,741\nAll in one place, very concise.\n\n1775\n01:29:50,741 --> 01:29:52,540\nSo, it's a good product.\n\n1776\n01:29:52,540 --> 01:29:54,881\nIt can be a little pricey,\nespecially for small,\n\n1777\n01:29:54,881 --> 01:29:57,633\nmedium businesses that's not\nreally who it's made for.\n\n1778\n01:29:57,633 --> 01:30:02,451\nThey really expect it to be\npeople who have 500 or more VMs,\n\n1779\n01:30:02,451 --> 01:30:06,079\nso that's a pretty good\nsized organization.\n\n1780\n01:30:06,079 --> 01:30:08,261\nSo that's who that's\nreally tailored towards.\n\n1781\n01:30:08,261 --> 01:30:12,715\nWell, that's really the last thing\nwe've got under monitoring and\n\n1782\n01:30:12,715 --> 01:30:15,798\nthat's the last of our objectives for\nVMware.\n\n1783\n01:30:15,798 --> 01:30:19,347\nSo over the last several,\nI guess over the last two weeks,\n\n1784\n01:30:19,347 --> 01:30:23,560\nwe've moved through each of\nthe objectives on the VCP5-DCV Exam.\n\n1785\n01:30:23,560 --> 01:30:28,175\nWe got a chance to see all the different\nfunctionality, there is a lot more.\n\n1786\n01:30:28,175 --> 01:30:31,061\nVMware is a big company,\nthey make a ton of other products and\n\n1787\n01:30:31,061 --> 01:30:33,338\nthere are other\ncertifications out there too.\n\n1788\n01:30:33,338 --> 01:30:38,265\nSo it's a big world, but what we've\ncovered in this show are really the things\n\n1789\n01:30:38,265 --> 01:30:41,416\nyou're gonna see used in\na lot of organizations.\n\n1790\n01:30:41,416 --> 01:30:43,934\nSo these are things you'll want to\ntake advantage of you'll use these,\n\n1791\n01:30:43,934 --> 01:30:46,013\nyou'll see them,\nyou'll run into them in the real world.\n\n1792\n01:30:46,013 --> 01:30:47,133\nThey're good to know.\n\n1793\n01:30:47,133 --> 01:30:50,808\nBut keep in mind,\nif you have any questions on this stuff,\n\n1794\n01:30:50,808 --> 01:30:52,390\ndon't hesitate to ask.\n\n1795\n01:30:52,390 --> 01:30:56,840\nJump over to our Q and A, you'll see the\nlink on every single page on the ITProTV\n\n1796\n01:30:56,840 --> 01:30:59,145\nsite that takes you to the Q and A forums.\n\n1797\n01:30:59,145 --> 01:31:01,531\nPost your questions there,\nwe monitor and answer.\n\n1798\n01:31:01,531 --> 01:31:03,168\nWe wanna make sure you get your help.\n\n1799\n01:31:03,168 --> 01:31:05,594\nSo just because we're not shooting\na VMware episode that day,\n\n1800\n01:31:05,594 --> 01:31:07,488\ndoesn't mean you can't\nask a VMware question.\n\n1801\n01:31:07,488 --> 01:31:11,097\nUse the forums for that, it's a great\nplace to get that information.\n\n1802\n01:31:11,097 --> 01:31:14,209\nWell, we've covered a lot of stuff.\n\n1803\n01:31:14,209 --> 01:31:16,601\nI do wish you guys the best on the exam.\n\n1804\n01:31:16,601 --> 01:31:17,762\nMake sure you hit the books.\n\n1805\n01:31:17,762 --> 01:31:19,979\nMake sure you watch the episodes and\npractice.\n\n1806\n01:31:19,979 --> 01:31:22,969\nIf you haven't done it already,\ndownload the eval copies from VMware.\n\n1807\n01:31:22,969 --> 01:31:24,774\nThey even have some simulated labs.\n\n1808\n01:31:24,774 --> 01:31:27,805\nif you don't have a machine with\nenough resources to run the vCenter\n\n1809\n01:31:27,805 --> 01:31:29,466\nOperations Manager, for example.\n\n1810\n01:31:29,466 --> 01:31:33,862\nThey've got an online lab right on\nVMware's site, if you go and try and\n\n1811\n01:31:33,862 --> 01:31:38,478\ndo the trial for vCenter Operations\nManager, you can log into their VMs and\n\n1812\n01:31:38,478 --> 01:31:39,595\nrun it from them.\n\n1813\n01:31:39,595 --> 01:31:42,416\nSo you can take advantage\nof those resources,\n\n1814\n01:31:42,416 --> 01:31:46,625\ndefinitely easier than setting up\nyour own environment sometimes.\n\n1815\n01:31:46,625 --> 01:31:48,373\nWell, I hope you guys enjoyed the show.\n\n1816\n01:31:48,373 --> 01:31:50,015\nBest of luck on your exams.\n\n1817\n01:31:50,015 --> 01:31:54,055\nSigning off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n1818\n01:31:54,055 --> 01:32:04,055\n[MUSIC]\n\n1819\n01:32:06,842 --> 01:32:12,480\n[SOUND]\n\n",
          "vimeoId": "104102905"
        }
      ],
      "title": "Monitor a vSphere Implementation"
    }
  ],
  "url": "vmware-certified-professional-5-vcp5dcv",
  "vLab": false
}
