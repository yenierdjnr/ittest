{
  "description": "The VMware Certified Professional certification is the most highly recognized certification dealing specifically with virtualization technologies. VMware vSphere is the leading virtualization technology available today and is in use at most large organizations. The VMware Certified Professional 6 – Data Center Virtualization (VCP6-DCV) certification is tailored towards IT System Administrators who are looking to deploy and maintain VMware vSphere and its associated products (ESXi, vCenter, VDP, VMware Converter, etc) in their environment.",
  "descriptionMD": "",
  "length": "91954",
  "name": "VMware Certified Professional 6  VCP6-DCV",
  "practiceExam": true,
  "subtitle": "Data Center Virtualization",
  "tagUrl": "systems-admin",
  "topics": [
    {
      "episodes": [
        {
          "description": "The VMware Certified Professional certification is the most highly recognized certification dealing specifically with virtualization technologies. VMware vSphere is the leading virtualization technology available today and is in use at most large organizations. The VMware Certified Professional 6 – Data Center Virtualization (VCP6-DCV) certification is tailored towards IT System Administrators who are looking to deploy and maintain VMware vSphere and its associated products (ESXi, vCenter, VDP, VMware Converter, etc) in their environment.",
          "length": "500",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-0-0-overview-070616-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-0-0-overview-070616-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-0-0-overview-070616-1-sm.jpg",
          "title": "Overview",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:03.900\n[SOUND]\n\n2\n00:00:03.900 --> 00:00:08.927\n[MUSIC]\n\n3\n00:00:08.927 --> 00:00:13.820\nIn this video we're going to take a look\nat the PCP6-DCV show on ITPRO TV.\n\n4\n00:00:13.820 --> 00:00:18.900\nNow, in addition to having one of\nthe longest acronym names available,\n\n5\n00:00:18.900 --> 00:00:20.350\nit's also one of the most popular ones.\n\n6\n00:00:20.350 --> 00:00:21.370\nIt's from VM ware and\n\n7\n00:00:21.370 --> 00:00:26.750\nit focuses on Virtualization technologies\nusing the vSphere version six suite.\n\n8\n00:00:26.750 --> 00:00:30.285\nSo, let's take a look\nat what this exam is.\n\n9\n00:00:30.285 --> 00:00:32.330\nWho's going to work towards this and\nthe certification and\n\n10\n00:00:32.330 --> 00:00:34.230\nthe other things that\nare involved with this series.\n\n11\n00:00:34.230 --> 00:00:38.190\nNow it is a lot of fun and I really want\nto stress a couple of things first off.\n\n12\n00:00:38.190 --> 00:00:42.900\nThis is designed to be the starting\npoint for getting certified with VMware.\n\n13\n00:00:42.900 --> 00:00:47.300\nThey have a VCA which is kind of\nan introduction to VMware and vSphere.\n\n14\n00:00:47.300 --> 00:00:50.270\nAnd then there's the VCP which\nis what this show is based on.\n\n15\n00:00:50.270 --> 00:00:53.760\nAnd this is for people who are going\nto be implementing and deploying,\n\n16\n00:00:53.760 --> 00:00:57.600\nmaintaining VMware vSphere\nout there in the real world.\n\n17\n00:00:57.600 --> 00:00:59.390\nNow the products have\na number of different names.\n\n18\n00:00:59.390 --> 00:01:01.940\nAnd so when I say vSphere that\nmight not mean anything to you.\n\n19\n00:01:01.940 --> 00:01:04.720\nYou might know it better\nas VMware's ESX or\n\n20\n00:01:04.720 --> 00:01:09.960\nESXi, vCenter,\nvSphere Suite itself, vCenter.\n\n21\n00:01:09.960 --> 00:01:11.880\nLet's see, what else do we have?\n\n22\n00:01:11.880 --> 00:01:13.920\nHorizon View, vRealize.\n\n23\n00:01:13.920 --> 00:01:18.450\nAll these different products from\nVMware are a part of the vSphere Suite.\n\n24\n00:01:18.450 --> 00:01:23.360\nAnd the VCP6-DCV It actually covers\na lot of those different technologies\n\n25\n00:01:23.360 --> 00:01:25.480\nfrom a real world application standpoint.\n\n26\n00:01:25.480 --> 00:01:27.290\nThese are the things you're\ngoing to be using out there.\n\n27\n00:01:27.290 --> 00:01:29.470\nAll right so\nlet's take a look at the certification.\n\n28\n00:01:29.470 --> 00:01:31.640\nI've got the Mware's webpage pull up here.\n\n29\n00:01:31.640 --> 00:01:34.450\nAnd they're basically detailing\ninformation about the certification.\n\n30\n00:01:34.450 --> 00:01:38.100\nAnd the full name is\nthe VMware Certified Professional 6-\n\n31\n00:01:38.100 --> 00:01:40.100\nData Center Virtualization.\n\n32\n00:01:40.100 --> 00:01:44.380\nPreviously we had version five,\nV sphere suite five and 5.5.\n\n33\n00:01:44.380 --> 00:01:46.220\nAnd now we're up to version 6.\n\n34\n00:01:46.220 --> 00:01:49.060\nBut not much has changed as far\nas the certification itself.\n\n35\n00:01:49.060 --> 00:01:51.575\nThey do have that VCA.\n\n36\n00:01:51.575 --> 00:01:54.300\nVCA6-DCV, it's kind of\nan introductory certification.\n\n37\n00:01:54.300 --> 00:01:56.820\nWe had that content on IT ProTV also.\n\n38\n00:01:56.820 --> 00:02:01.340\nBut a lot of people chose to skip\nover that because it is very basic,\n\n39\n00:02:01.340 --> 00:02:02.200\nvery introductory.\n\n40\n00:02:02.200 --> 00:02:06.039\nJust kind of helping you recognize\nthe products, not actually do anything.\n\n41\n00:02:06.039 --> 00:02:06.737\n[LAUGH].\n\n42\n00:02:06.737 --> 00:02:11.340\nSo, once you get to the VCP6, that's where\nyou're actually learning how to do stuff.\n\n43\n00:02:11.340 --> 00:02:13.920\nHow to implement Vsphere\nin your environment and\n\n44\n00:02:13.920 --> 00:02:15.810\nbe able to maintain and support it.\n\n45\n00:02:15.810 --> 00:02:18.200\nNow some of you may move on to some\nof the more advanced certifications.\n\n46\n00:02:18.200 --> 00:02:23.420\nLike the VCAP and the VCIX,\nthose are more advanced.\n\n47\n00:02:23.420 --> 00:02:26.130\nBut we're limiting ourselves right\nhere to this professional level, and\n\n48\n00:02:26.130 --> 00:02:27.040\nthere's a main reason for that.\n\n49\n00:02:27.040 --> 00:02:30.550\nOne of the big reasons is that a lot of\npeople watch our shows because they want\n\n50\n00:02:30.550 --> 00:02:32.260\nto get certified.\n\n51\n00:02:32.260 --> 00:02:34.890\nUnfortunately, VMware\nhas a very strict rule.\n\n52\n00:02:34.890 --> 00:02:40.490\nIf you want to take the exam, you have to\ntake an authorized course from VMware.\n\n53\n00:02:40.490 --> 00:02:44.460\nAnd I can't stress this enough,\nthe ITProTV course is a great course.\n\n54\n00:02:44.460 --> 00:02:46.440\nWe cover everything that's on the exam.\n\n55\n00:02:46.440 --> 00:02:48.930\nBut it is not an authorized\ncourse from VMware.\n\n56\n00:02:48.930 --> 00:02:51.880\nWhat that means is that if you watch\nour show from start to finish, and\n\n57\n00:02:51.880 --> 00:02:54.520\nyou learn everything and\nyou're ready to go.\n\n58\n00:02:54.520 --> 00:02:56.760\nYou're still not qualified\nto take the exam.\n\n59\n00:02:56.760 --> 00:03:00.220\nAnd you can see that right up here\nin the new candidate requirements.\n\n60\n00:03:00.220 --> 00:03:03.350\nIf you come down here, and you say I'm\nnew to VMware data center virtualization,\n\n61\n00:03:03.350 --> 00:03:04.460\nthey'll tell you the steps.\n\n62\n00:03:04.460 --> 00:03:04.990\nRight.\n\n63\n00:03:04.990 --> 00:03:08.070\nFirst off, they want you to work\nwith vSphere for at least 6 months.\n\n64\n00:03:08.070 --> 00:03:09.240\nHave a little exposure to it.\n\n65\n00:03:09.240 --> 00:03:11.040\nDon't just come in with no knowledge.\n\n66\n00:03:11.040 --> 00:03:14.440\nThen, attend one of\nthe required training courses.\n\n67\n00:03:14.440 --> 00:03:16.650\nYou've got to attend their\nauthorized training course.\n\n68\n00:03:16.650 --> 00:03:17.830\nAnd at the end of the course,\n\n69\n00:03:17.830 --> 00:03:21.040\nthey'll give you a voucher\nthat'll let you take the exam.\n\n70\n00:03:21.040 --> 00:03:23.580\nWe can't give you the voucher,\nbecause it's not an authorized course.\n\n71\n00:03:23.580 --> 00:03:26.759\nSo if you're just looking\nto learn about VMware,\n\n72\n00:03:26.759 --> 00:03:29.180\ndeploy it in your environment,\nour show is great.\n\n73\n00:03:29.180 --> 00:03:31.830\nIf you've already taken\nan authorized course, and\n\n74\n00:03:31.830 --> 00:03:33.680\nyou're looking to reaffirm that knowledge.\n\n75\n00:03:33.680 --> 00:03:36.030\nAnd get ready for the exam,\nagain, our course is great.\n\n76\n00:03:36.030 --> 00:03:37.600\nBut if you're just starting out.\n\n77\n00:03:37.600 --> 00:03:39.490\nAnd you're dead set on getting that exam,\n\n78\n00:03:39.490 --> 00:03:41.490\nthen the ITProTV show might\nnot be the right one for you.\n\n79\n00:03:41.490 --> 00:03:44.660\nDefinitely keep that in mind\nwhen you go to look at this.\n\n80\n00:03:44.660 --> 00:03:47.450\nAfter that, though,\nyou can complete the foundations exam or\n\n81\n00:03:47.450 --> 00:03:51.380\nyou can skip over it and\ngo right to the VCP6-DCV exam.\n\n82\n00:03:51.380 --> 00:03:55.450\nTake it, pass it and\nget your VCP certification.\n\n83\n00:03:55.450 --> 00:03:59.230\nNow the exam itself,\nlet me show you the details on it.\n\n84\n00:03:59.230 --> 00:04:04.080\nIt's 100 minutes, so it's little more than\nan hour and a half and it's 85 questions.\n\n85\n00:04:04.080 --> 00:04:07.850\nThe majority of the questions are multiple\nchoice, so it's not too challenging.\n\n86\n00:04:07.850 --> 00:04:12.040\nYou do have a couple of drag and drop, and\na couple of simulation type of questions.\n\n87\n00:04:12.040 --> 00:04:13.800\nBut most of it's multiple choice.\n\n88\n00:04:13.800 --> 00:04:17.600\nAnd you churn through, it's not terribly\nexpensive compared to some vendors.\n\n89\n00:04:17.600 --> 00:04:20.000\nIn each country,\nit's priced a little different.\n\n90\n00:04:20.000 --> 00:04:21.490\nHere in the US, it's $225.\n\n91\n00:04:21.490 --> 00:04:25.390\nAnd you can jump in and take that exam,\npass it, and get certified.\n\n92\n00:04:25.390 --> 00:04:28.300\nNow, you do need to renew it every\ncouple of years to stay up to date.\n\n93\n00:04:28.300 --> 00:04:31.190\nBut new versions of vSphere come out,\nand that's what a lot of people will do.\n\n94\n00:04:31.190 --> 00:04:34.380\nIs just take the newer versions, and\nthat renews you and keeps you current.\n\n95\n00:04:35.410 --> 00:04:37.810\nNow, the exam, itself,\ncovers a range of topics.\n\n96\n00:04:37.810 --> 00:04:39.740\nAnd this is what we based our show on.\n\n97\n00:04:39.740 --> 00:04:43.520\nWhen you watch the ITProTV show for\nVCP6-DCV,\n\n98\n00:04:43.520 --> 00:04:45.700\nwe run through each of these areas.\n\n99\n00:04:45.700 --> 00:04:48.290\nNow, we have rearranged\nthe topics a little bit.\n\n100\n00:04:48.290 --> 00:04:52.400\nSee, for example, how it starts right off\nwith administering vSphere 6 security.\n\n101\n00:04:52.400 --> 00:04:53.190\nWell we didn't do that.\n\n102\n00:04:53.190 --> 00:04:55.960\nWe started with getting\nthe vSphere Suite installed.\n\n103\n00:04:55.960 --> 00:04:58.650\nIt's kind of important to get\nthe installed before you can secure it.\n\n104\n00:04:58.650 --> 00:05:01.685\nSo, we arranged ours to be in\na little bit more logical order.\n\n105\n00:05:01.685 --> 00:05:04.920\nBut we do cover every single one of\nthe objectives that are listed here\n\n106\n00:05:04.920 --> 00:05:05.860\non the screen.\n\n107\n00:05:05.860 --> 00:05:07.960\nWe cover securing vSphere.\n\n108\n00:05:07.960 --> 00:05:11.780\nAnd that's the vCenter Server as well\nas the ESXi virtualization host,\n\n109\n00:05:11.780 --> 00:05:13.470\nwe cover securing all of that.\n\n110\n00:05:13.470 --> 00:05:15.440\nWe cover networking and\nstorage configuration.\n\n111\n00:05:15.440 --> 00:05:18.190\nThat's part of your infrastructure and\nthat's got to be done right.\n\n112\n00:05:18.190 --> 00:05:20.360\nOtherwise you're going to\nhave poor performance.\n\n113\n00:05:20.360 --> 00:05:23.125\nWe talk about doing deployments and\nupgrades.\n\n114\n00:05:23.125 --> 00:05:26.725\nYou might have an existing 5 or\n5.5 environment.\n\n115\n00:05:26.725 --> 00:05:29.515\nWe cover how to upgrade that to 6 and\nget that in place.\n\n116\n00:05:29.515 --> 00:05:32.005\nWe're talking about administering and\nmanaging our resources.\n\n117\n00:05:32.005 --> 00:05:35.367\nThis is kind of like the monitoring and\nmaintaining of vSphere.\n\n118\n00:05:35.367 --> 00:05:37.807\nWe need to keep track of all of\nour hardware and software, and\n\n119\n00:05:37.807 --> 00:05:40.417\nmake sure that it's\nperforming at its peak.\n\n120\n00:05:40.417 --> 00:05:42.677\nWe talk about backing up and\nrecovering the deployment,\n\n121\n00:05:42.677 --> 00:05:45.042\nall the different pieces\nthat go into our solution.\n\n122\n00:05:45.042 --> 00:05:46.927\nBecause there's a lot of\ndifferent components.\n\n123\n00:05:46.927 --> 00:05:48.837\nAnd we need to make sure that\nwe know how to back that up.\n\n124\n00:05:48.837 --> 00:05:50.697\nAnd to restore it in the event\nthat we have a failure.\n\n125\n00:05:51.807 --> 00:05:53.277\nWe cover troubleshooting tools.\n\n126\n00:05:53.277 --> 00:05:56.507\nThere's a ton of different tools and\ntechniques available for finding and\n\n127\n00:05:56.507 --> 00:05:58.570\nfixing problems inside of vSphere.\n\n128\n00:05:58.570 --> 00:05:59.870\nSo we run through a lot of those.\n\n129\n00:05:59.870 --> 00:06:00.810\nSome are obvious.\n\n130\n00:06:00.810 --> 00:06:04.872\nOnes that you see in the GUI, others\nare a lot more cryptic and command liney.\n\n131\n00:06:04.872 --> 00:06:08.020\nKind of buried behind the scenes but\nare incredibly useful for\n\n132\n00:06:08.020 --> 00:06:09.040\nwhen you're having problems.\n\n133\n00:06:10.110 --> 00:06:12.370\nWe also talk about\nconsolidating your data center.\n\n134\n00:06:12.370 --> 00:06:16.330\nSo what I'm really talking about here is\nconverting physical machines into virtual\n\n135\n00:06:16.330 --> 00:06:16.870\nmachines.\n\n136\n00:06:16.870 --> 00:06:20.370\nSo we kind of run through that process\nof using the The VMware converter\n\n137\n00:06:20.370 --> 00:06:21.920\nto convert our physical machines.\n\n138\n00:06:21.920 --> 00:06:24.590\nOr even to convert virtual\nmachines in other platforms,\n\n139\n00:06:24.590 --> 00:06:26.806\nmaybe of Hyper-V or XenServer.\n\n140\n00:06:26.806 --> 00:06:30.070\nAnd you want to bring those\nvirtual machines into a ESX so\n\n141\n00:06:30.070 --> 00:06:30.880\nwe cover how to do that.\n\n142\n00:06:31.890 --> 00:06:36.000\nWe talk about availability solutions\nlike clustering inside of vSphere.\n\n143\n00:06:36.000 --> 00:06:37.180\nAs well as replication.\n\n144\n00:06:37.180 --> 00:06:40.580\nAnd a few other techniques that we can\nuse to make sure that even if our entire\n\n145\n00:06:40.580 --> 00:06:41.710\nbuilding fails.\n\n146\n00:06:41.710 --> 00:06:45.180\nThat our virtual machines are still up and\nrunning somewhere else.\n\n147\n00:06:45.180 --> 00:06:48.550\nAnd then lastly, we talk about managing\nthe virtual machines themselves.\n\n148\n00:06:48.550 --> 00:06:49.630\nWhen you start speeding up VMs.\n\n149\n00:06:49.630 --> 00:06:54.060\nThere's a lot of performance concerns in\nother areas that we need to be aware of\n\n150\n00:06:54.060 --> 00:06:57.200\nto make sure that our virtual\nmachines perform as well\n\n151\n00:06:57.200 --> 00:06:58.680\nAs their physical counterparts.\n\n152\n00:06:58.680 --> 00:07:00.430\nSince that's the whole\nadvantage of virtualization.\n\n153\n00:07:00.430 --> 00:07:04.390\nIs that we can get the same level of\nperformance from non dedicated hardware.\n\n154\n00:07:04.390 --> 00:07:06.060\nAnd that frees us up for redundancy and\n\n155\n00:07:06.060 --> 00:07:09.300\nperformance improvements that you\ndefinitely want to take advantage of.\n\n156\n00:07:09.300 --> 00:07:11.980\nSo those are all the things that\nwe're going to be tackling as we\n\n157\n00:07:11.980 --> 00:07:17.040\nrun through V M ware through\nthe VCP6-DCV certification.\n\n158\n00:07:17.040 --> 00:07:18.640\nWe cover it all, it's a good time.\n\n159\n00:07:18.640 --> 00:07:22.040\nIf you're starting out with\nabsolutely no exposure,\n\n160\n00:07:22.040 --> 00:07:24.460\nthen I do recommend you\ncatch our VCA show.\n\n161\n00:07:24.460 --> 00:07:27.330\nIt's in the courseware library\nright beside the VCP show.\n\n162\n00:07:27.330 --> 00:07:29.780\nYou can watch the VCA and\nit's very high level.\n\n163\n00:07:29.780 --> 00:07:32.250\nAnd it just introduces you to\nall the different products.\n\n164\n00:07:32.250 --> 00:07:34.840\nBecause when you deploy these fier,\n\n165\n00:07:34.840 --> 00:07:38.100\nI mean there's a good ten different\nproducts in there that all work together.\n\n166\n00:07:38.100 --> 00:07:39.350\nAnd it gets really confusing.\n\n167\n00:07:39.350 --> 00:07:41.870\nSo the VCA can shed\na lot of light on that.\n\n168\n00:07:41.870 --> 00:07:44.680\nBut when you're ready to actually\nlearn how to implement and\n\n169\n00:07:44.680 --> 00:07:47.498\nuse the technologies, VCP,\nthat's the place you want to be.\n\n170\n00:07:47.498 --> 00:07:50.540\nYou're going to go right in there and\nstart deploying the technologies getting\n\n171\n00:07:50.540 --> 00:07:53.240\nand put in place and\nactually seeing it operating.\n\n172\n00:07:53.240 --> 00:07:55.150\nAnd you'll see there's\na lot of power to this.\n\n173\n00:07:55.150 --> 00:07:58.170\nIt's something everybody's using\nout there in the enterprise and\n\n174\n00:07:58.170 --> 00:07:59.310\nbusiness environments.\n\n175\n00:07:59.310 --> 00:08:04.107\nSo definitely something that\nyou want to take advantage of.\n\n176\n00:08:04.107 --> 00:08:04.945\nWell, if that sounds exciting to you,\nthen you are in the right place.\n\n177\n00:08:04.945 --> 00:08:10.565\nStay tuned because we've got\nepisodes of VCP6-DCV coming up next.\n\n178\n00:08:10.565 --> 00:08:19.999\n[MUSIC]\n\n",
          "vimeoId": "173757276"
        },
        {
          "description": "In this episode Wes and Don introduces the viewers to the VMware vSphere suite. They explain difference between Type 1, Type 2 hypervisors and the pros and cons of each. They discusses the multiple editions of vSphere.",
          "length": "2336",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv1-introduction_to_vsphere-052316-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv1-introduction_to_vsphere-052316-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv1-introduction_to_vsphere-052316-1-sm.jpg",
          "title": "Introduction to vSphere",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.660 --> 00:00:14.365\nWelcome to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.365 --> 00:00:18.553\nI'm your host Wes Bryan and in today's\nseries we're moving into VM Ware,\n\n4\n00:00:18.553 --> 00:00:23.271\nthat's right, we're coming at you with\nsome VM Ware Certified Professional 6 and\n\n5\n00:00:23.271 --> 00:00:26.871\nin the the studio with me today\nis none other than Mr. Don Bizet.\n\n6\n00:00:26.871 --> 00:00:28.080\nDon, how you doing sir?\n\n7\n00:00:28.080 --> 00:00:30.210\n>> I'm doing great Wes,\nready to dive right in and\n\n8\n00:00:30.210 --> 00:00:32.310\nstart tackling our VCB6 content.\n\n9\n00:00:32.310 --> 00:00:36.120\nIn this episode, we're gonna do a quick\nintroduction, and I know for, for\n\n10\n00:00:36.120 --> 00:00:39.040\nthose of you who have worked with vSphere,\nit's not gonna be exciting,\n\n11\n00:00:39.040 --> 00:00:41.120\nyou're not gonna hurt my\nfeelings if you skip the episode.\n\n12\n00:00:41.120 --> 00:00:42.850\nBut for those of you that are new to it,\n\n13\n00:00:42.850 --> 00:00:46.827\nI think it is really important to\nunderstand exactly what VM vSphere is.\n\n14\n00:00:46.827 --> 00:00:51.300\nWhat the for your suite is, what\nthe components are and just have a all\n\n15\n00:00:51.300 --> 00:00:54.580\naround general knowledge of what the heck\nis the product that we're about to spent\n\n16\n00:00:54.580 --> 00:00:59.300\nthe whole next set of 20 some odd episodes\ntalking about and learning about.\n\n17\n00:00:59.300 --> 00:01:02.660\nSo, in this episode that's going to be my\nfocus is to introduce you to the product\n\n18\n00:01:02.660 --> 00:01:07.490\nline, talk a little bit about licensing, a\nlittle bit about the various versions and\n\n19\n00:01:07.490 --> 00:01:08.890\neditions that are out there.\n\n20\n00:01:08.890 --> 00:01:10.440\nAnd how each one functions.\n\n21\n00:01:10.440 --> 00:01:14.000\nNow, this is testable material so\nif you're gonna skip it,\n\n22\n00:01:14.000 --> 00:01:16.280\nmake sure you actually do know it.\n\n23\n00:01:16.280 --> 00:01:18.540\nLike the difference between a type one and\ntype two hypervisors,\n\n24\n00:01:18.540 --> 00:01:19.900\nreally important on the exam.\n\n25\n00:01:19.900 --> 00:01:21.530\nSo those are topics that'll turn up and\n\n26\n00:01:21.530 --> 00:01:23.540\nwe're gonna see them all\nright here in this episode.\n\n27\n00:01:23.540 --> 00:01:25.650\n>> So Don, before we started the episode,\n\n28\n00:01:25.650 --> 00:01:27.410\nwe were talking a little\nbit about vSphere.\n\n29\n00:01:27.410 --> 00:01:31.820\nAnd you said that some people aren't\nreally familiar with what it is.\n\n30\n00:01:31.820 --> 00:01:33.050\nYou gonna help us out with that?\n\n31\n00:01:33.050 --> 00:01:34.130\nAll right.\nSo, like I said,\n\n32\n00:01:34.130 --> 00:01:36.010\nVSphere is a suite of software.\n\n33\n00:01:36.010 --> 00:01:38.500\nIt's not one particular piece of software.\n\n34\n00:01:38.500 --> 00:01:42.160\nIt's several things combined together\nto create the VSphere Solution.\n\n35\n00:01:42.160 --> 00:01:44.320\nAnd VMWare's used this terminology for\na while.\n\n36\n00:01:44.320 --> 00:01:48.820\nThere used to be other names for\nit, the Virtual Infrastructure, VI,\n\n37\n00:01:48.820 --> 00:01:50.460\nis what they used to call it.\n\n38\n00:01:50.460 --> 00:01:52.510\nNow it's all just called VSphere.\n\n39\n00:01:52.510 --> 00:01:54.200\nAnd vSphere 6 to the latest version of it.\n\n40\n00:01:54.200 --> 00:01:57.500\nNow, inside of vSphere 6,\nthere's a number of products.\n\n41\n00:01:57.500 --> 00:02:01.870\nAnd the most commonly\nthought of product is,\n\n42\n00:02:01.870 --> 00:02:05.645\nwell, like when somebody says the name of\nthe company, when somebody says Microsoft.\n\n43\n00:02:05.645 --> 00:02:07.055\nAnd you think Windows.\n\n44\n00:02:07.055 --> 00:02:11.415\nWhen somebody says Apple,\nyou think of Mac OS.\n\n45\n00:02:11.415 --> 00:02:16.355\nWhen you think VMware, people think of\nthe virtualization hypervisor, which is\n\n46\n00:02:16.355 --> 00:02:21.565\ncalled ESX, Now, ESX, it has a couple\nof different names that are out there.\n\n47\n00:02:21.565 --> 00:02:26.690\nThe official name for\nit is the VMware, V sphere hypervisor.\n\n48\n00:02:26.690 --> 00:02:29.700\nSo when you go on VMware's website and\nyou read their documentation,\n\n49\n00:02:29.700 --> 00:02:33.940\nit will usually say the VMware\nvSphere hypervisor.\n\n50\n00:02:33.940 --> 00:02:37.890\nBut it's had several names over the years\nand even on the exam you'll see where they\n\n51\n00:02:37.890 --> 00:02:42.640\nstill use ESX as often as they\nuse the vSphere hypervisor name.\n\n52\n00:02:42.640 --> 00:02:44.610\nSo you see it very commonly.\n\n53\n00:02:44.610 --> 00:02:49.750\nBut what ESX is,\nis the actual virtualization hyperviser.\n\n54\n00:02:49.750 --> 00:02:51.880\nIt's the actual engine\nof this whole thing.\n\n55\n00:02:51.880 --> 00:02:56.780\nSo when you have a bear metal server,\nyou've got to install something on it so\n\n56\n00:02:56.780 --> 00:02:59.930\nthat it can run virtual machines,\nand ESX is what does that.\n\n57\n00:02:59.930 --> 00:03:01.520\nSo that's kind of the key product.\n\n58\n00:03:01.520 --> 00:03:05.250\nAnd when I hear a lot of people come to me\nand say, Don, I have a VMware question, or\n\n59\n00:03:05.250 --> 00:03:07.770\nDon, I'm trying to install VMware.\n\n60\n00:03:07.770 --> 00:03:11.080\nWell, VMware is a company, it's not\na software package, you can't install it.\n\n61\n00:03:11.080 --> 00:03:12.880\nWhat they're referring to is ESX.\n\n62\n00:03:12.880 --> 00:03:17.770\nNow, that name, it actually stands for\nsomething, it's an acronym, it stands for\n\n63\n00:03:17.770 --> 00:03:21.430\nElastic Sky X, which is a very,\nvery old name.\n\n64\n00:03:21.430 --> 00:03:26.200\nThey used that back in the 90s, it was a\nlong, long time ago, so nobody uses that.\n\n65\n00:03:26.200 --> 00:03:28.100\nIn fact, most people,\neven people at the company,\n\n66\n00:03:28.100 --> 00:03:30.590\ndon't necessarily remember that's\nwhat it stands for anymore.\n\n67\n00:03:30.590 --> 00:03:35.080\nBut ESX originally was created as this\nhyperviser that's evolved quite a bit\n\n68\n00:03:35.080 --> 00:03:36.410\nover the years.\n\n69\n00:03:36.410 --> 00:03:40.550\nAnd for a little while it was branded\nunder a slightly different name of ESXi\n\n70\n00:03:40.550 --> 00:03:42.730\nwhich was ESX integrated.\n\n71\n00:03:42.730 --> 00:03:46.960\nAnd what you could do is, you could\nactually buy servers back in the day where\n\n72\n00:03:46.960 --> 00:03:51.110\nthey would have the emery ESX integrated\ninto a chip on the motherboard so\n\n73\n00:03:51.110 --> 00:03:53.480\nthat the hardware actually supported it.\n\n74\n00:03:53.480 --> 00:03:54.550\nWe don't need that anymore,\n\n75\n00:03:54.550 --> 00:03:58.090\nbecause now we have virtualization\nof sys hardware built into our CPU.\n\n76\n00:03:58.090 --> 00:04:00.820\nSo when you get an Intel CPU or AMD CPU.\n\n77\n00:04:00.820 --> 00:04:04.200\nIt's got acceleration for\nvirtualization built into it.\n\n78\n00:04:04.200 --> 00:04:07.100\nAnd so now, it doesn't matter\nif we run ESX on a hard drive or\n\n79\n00:04:07.100 --> 00:04:08.810\na USB key or whatever.\n\n80\n00:04:08.810 --> 00:04:10.910\nIt doesn't have to be integrated\ninto the motherboard.\n\n81\n00:04:10.910 --> 00:04:14.285\nSo you really get a huge amount\nof performance gain out of that.\n\n82\n00:04:14.285 --> 00:04:17.985\nAnd so ESXI was the name for\nthe innovated version.\n\n83\n00:04:17.985 --> 00:04:21.665\nTechnically, we are still running ESXI,\nbut it's not truly integrated.\n\n84\n00:04:21.665 --> 00:04:25.735\nSo if your people use ESX and\nESXI interchangeably, and\n\n85\n00:04:25.735 --> 00:04:28.980\ntechnically, they're all the same thing.\n\n86\n00:04:28.980 --> 00:04:30.630\nNow that's kinda the flagship product.\n\n87\n00:04:30.630 --> 00:04:35.230\nThat's the main heart and\nsoul of VMware's virtualization, is ESX,\n\n88\n00:04:35.230 --> 00:04:38.570\nor the VMware vSphere Hypervisor.\n\n89\n00:04:38.570 --> 00:04:41.420\nBut it's not the one you're\ngonna be working in everyday.\n\n90\n00:04:41.420 --> 00:04:43.380\nIt's not the interface you're\ngonna use every single day.\n\n91\n00:04:43.380 --> 00:04:45.650\nIt's not what you're going to be touching.\n\n92\n00:04:45.650 --> 00:04:50.050\nYou install it, and then you kinda forget\nabout it, and everything else you do\n\n93\n00:04:50.050 --> 00:04:53.380\nis gonna be in the rest of the suite\nof products that are in VMware.\n\n94\n00:04:53.380 --> 00:04:55.850\nSo for example, vCenter.\n\n95\n00:04:55.850 --> 00:05:02.087\nvCenter is the centralized management\nportal that we can use to control 1,\n\n96\n00:05:02.087 --> 00:05:07.080\n100, 1000, 10,000 Virtualization hosts and\nhundreds of thousands of guests.\n\n97\n00:05:07.080 --> 00:05:09.220\nI mean you can control huge environments.\n\n98\n00:05:09.220 --> 00:05:13.320\nAnd so we will work in V center\nevery single day, it's what you see.\n\n99\n00:05:13.320 --> 00:05:17.450\nThat's really the face of VM wear,\nthe face of V sphere is V center, but\n\n100\n00:05:17.450 --> 00:05:19.220\nthat's not the engine behind it.\n\n101\n00:05:19.220 --> 00:05:23.110\nThat's not what people think of, so those\nterms get a little bit blended together.\n\n102\n00:05:23.110 --> 00:05:25.480\nAnd then there's other pieces\nthat are in the mix of it too.\n\n103\n00:05:25.480 --> 00:05:31.170\nWe'll learn about V realize there's\nV horizon there's all sorts of other\n\n104\n00:05:31.170 --> 00:05:36.480\ndifferent products that are a part of\nthe V sphere suite to serve a purpose and\n\n105\n00:05:36.480 --> 00:05:38.280\nwe'll see them all throughout the series.\n\n106\n00:05:38.280 --> 00:05:42.350\nBut the two main products that we're\ngoing to be interacting with are the ESX\n\n107\n00:05:42.350 --> 00:05:47.130\nhypervisor and the vCenter server\nthat we use for management.\n\n108\n00:05:47.130 --> 00:05:48.810\nSo those are the two key things.\n\n109\n00:05:48.810 --> 00:05:51.640\nNow, let's talk a little bit more about\nthat hypervisor, because I'm throwing that\n\n110\n00:05:51.640 --> 00:05:55.245\nword like it means nothing, or\nwell like everybody knows what it means.\n\n111\n00:05:55.245 --> 00:05:57.395\nAnd honestly, the odds are,\nif you're watching this show,\n\n112\n00:05:57.395 --> 00:05:58.905\nyou probably do know what a hypervisor is.\n\n113\n00:05:58.905 --> 00:06:02.245\nBut let's just real quick touch\non hypervisors so that you know\n\n114\n00:06:02.245 --> 00:06:04.605\nthe difference between some of\nthe different ones that are out there and\n\n115\n00:06:04.605 --> 00:06:07.492\nyou'll be able to handle those test\nquestions a little bit better.\n\n116\n00:06:07.492 --> 00:06:12.002\nAll right, now ESX is a Type 1 hypervisor.\n\n117\n00:06:12.002 --> 00:06:14.912\nThere's two types of hypervisors that\nare prominent right now, there's\n\n118\n00:06:14.912 --> 00:06:17.672\nactually more but there's only two that\nwe really care about, Type 1 and Type 2.\n\n119\n00:06:17.672 --> 00:06:23.430\nAnd it's kinda funny because the type 2\nhypervisors are what came out first, and\n\n120\n00:06:23.430 --> 00:06:27.050\nthe type 1 hypervisors came out later, but\nthey're reversed because they didn't have\n\n121\n00:06:27.050 --> 00:06:31.100\nthat name back then, and really the type\n1 hypervisors are the ones that are good,\n\n122\n00:06:31.100 --> 00:06:34.161\nand the type 2 hypervisors\nare the ones that are okay.\n\n123\n00:06:34.161 --> 00:06:35.856\n[LAUGH] So we've got good and okay.\n\n124\n00:06:35.856 --> 00:06:37.290\nThey're not bad, but not great.\n\n125\n00:06:37.290 --> 00:06:41.410\nSo the way the work is\nfundamentally different.\n\n126\n00:06:41.410 --> 00:06:42.890\nLet me start with\nthe type two hypervisors,\n\n127\n00:06:42.890 --> 00:06:44.850\nthese are the ones that\nwere invented first.\n\n128\n00:06:44.850 --> 00:06:47.470\nBack in the day,\nif I wanted to do virtualization,\n\n129\n00:06:47.470 --> 00:06:53.350\nthe core idea behind virtualization was\nthat I could have one piece of hardware\n\n130\n00:06:53.350 --> 00:06:56.890\nthat behaved as multiple\npieces of hardware.\n\n131\n00:06:56.890 --> 00:07:00.160\nSo instead of having four separate\nservers maybe I could have one server.\n\n132\n00:07:00.160 --> 00:07:01.720\nAnd this used to happen all the time,\n\n133\n00:07:01.720 --> 00:07:04.900\nwhere you'd have a service like DHCP and\nDNS, and\n\n134\n00:07:04.900 --> 00:07:09.450\nlet's say it's a Windows environment,\nyou have the active directory.\n\n135\n00:07:09.450 --> 00:07:14.020\nRight, so, I might have an active\ndirectory domain controller, a DNS server,\n\n136\n00:07:14.020 --> 00:07:16.400\nand a DHCP server, very common.\n\n137\n00:07:16.400 --> 00:07:20.810\nWell, all three of those are pretty\nlow resource intensive right?\n\n138\n00:07:20.810 --> 00:07:23.100\nThey don't need a ton of access.\n\n139\n00:07:23.100 --> 00:07:27.050\nThe domain controller,\nit can see a little bit of CPU activity,\n\n140\n00:07:27.050 --> 00:07:28.900\nbecause of it's authentication stuff.\n\n141\n00:07:28.900 --> 00:07:32.190\nDACP it practically flat lines\neven on massive networks.\n\n142\n00:07:32.190 --> 00:07:33.180\nDNS, same way.\n\n143\n00:07:33.180 --> 00:07:35.360\nReally not doing a whole heck of a lot.\n\n144\n00:07:35.360 --> 00:07:39.570\nSo in the olden days when we\nhad dedicated hardware for\n\n145\n00:07:39.570 --> 00:07:41.700\neverything, you'd be tempted\nto put them all together.\n\n146\n00:07:41.700 --> 00:07:47.280\nI can have one server that ran my domain\nservices, that ran DNS, that ran DHCP.\n\n147\n00:07:47.280 --> 00:07:49.160\nBut here's the problem.\n\n148\n00:07:49.160 --> 00:07:53.056\nLets say that my DNS server crashed,\nlocked up, something went nuts with it,\n\n149\n00:07:53.056 --> 00:07:54.602\nand I had to reboot the server.\n\n150\n00:07:54.602 --> 00:07:58.072\nWell that meant that I had to\nreboot my domain services and\n\n151\n00:07:58.072 --> 00:08:01.266\nI had to reboot DHCP also\nbecause one server failed.\n\n152\n00:08:01.266 --> 00:08:04.330\nWe don't have that boundary, we don't have\nthat separation so they're mixed together.\n\n153\n00:08:04.330 --> 00:08:05.831\nAnd that leads to problems.\n\n154\n00:08:05.831 --> 00:08:10.316\nIf somebody hacks their way into my DHCP\nserver, now they've got access to DNS and\n\n155\n00:08:10.316 --> 00:08:12.140\nActive Directory also, right?\n\n156\n00:08:12.140 --> 00:08:16.480\nSo, I have all sorts of blurry lines\nin between these software applications,\n\n157\n00:08:16.480 --> 00:08:17.850\nthat's a problem.\n\n158\n00:08:17.850 --> 00:08:19.870\nSo the solution was to buy three servers.\n\n159\n00:08:19.870 --> 00:08:24.800\nTo buy three physical servers that we knew\nActive Directory wasn't that resource\n\n160\n00:08:24.800 --> 00:08:28.520\nintensive, and we knew that DNS wasn't,\nand we knew that DHCP absolutely wasn't.\n\n161\n00:08:28.520 --> 00:08:31.930\nBut we separated them anyway, for\nabout three pieces of hardware.\n\n162\n00:08:31.930 --> 00:08:36.650\nAnd that hardware for\nthe most part went way underutilized.\n\n163\n00:08:36.650 --> 00:08:40.900\nIf you look at servers today,\nif you go to HP, or Dell,\n\n164\n00:08:40.900 --> 00:08:43.250\nLenovo wherever does\nyou go to buy a server.\n\n165\n00:08:43.250 --> 00:08:46.310\nAnd you buy the cheapest\nserver they've got.\n\n166\n00:08:46.310 --> 00:08:49.090\nI mean you go super budget, right?\n\n167\n00:08:49.090 --> 00:08:51.150\nOne power supply.\n\n168\n00:08:51.150 --> 00:08:52.950\nWhat's the minimum cores\nyou can get these days?\n\n169\n00:08:52.950 --> 00:08:55.120\nI don't even think you can get a single\ncore processor anymore can you?\n\n170\n00:08:55.120 --> 00:08:56.660\n>> I think it's four in the servers.\n\n171\n00:08:56.660 --> 00:08:58.590\nI'm gone eight and beyond now.\n\n172\n00:08:58.590 --> 00:09:02.700\n>> Yeah, so let's say you can\nfind a two core CPU, right.\n\n173\n00:09:02.700 --> 00:09:05.290\nAnd what's the minimum amount of\nmemory we can even buy these days?\n\n174\n00:09:05.290 --> 00:09:06.250\nMaybe two gigs of RAM.\n\n175\n00:09:06.250 --> 00:09:10.130\nSo, if you get something\nat the very rock bottom and\n\n176\n00:09:10.130 --> 00:09:12.562\nyou throw it up as a DHCP server, right.\n\n177\n00:09:12.562 --> 00:09:16.765\nMaybe it's a Linux DHCP server, it's\nnot gonna use even half of that, right.\n\n178\n00:09:16.765 --> 00:09:20.130\nIt's gonna be wasting those resources and\nthere's nothing you can do about it\n\n179\n00:09:20.130 --> 00:09:23.690\nbecause that server's\ndedicated to do DHCP.\n\n180\n00:09:23.690 --> 00:09:27.380\nSo the idea behind virtualization was,\nwhat if, instead of that being\n\n181\n00:09:27.380 --> 00:09:31.350\na physical server, it was virtual,\nit was fake, it was a fake server.\n\n182\n00:09:31.350 --> 00:09:35.650\nAnd DNS could have a fake server and\nDHCP could have a fake server and\n\n183\n00:09:35.650 --> 00:09:37.850\nActive Directory could have a fake server.\n\n184\n00:09:37.850 --> 00:09:40.990\nBut all three of them would\nrun on the same hardware.\n\n185\n00:09:40.990 --> 00:09:43.620\nAnd if I need to reboot one I could.\n\n186\n00:09:43.620 --> 00:09:46.970\nIf I had to do a patch update on one,\nif one got hacked into that was fine.\n\n187\n00:09:46.970 --> 00:09:50.320\nIt just affected that, it wasn't fine,\nbut it just affected that one,\n\n188\n00:09:50.320 --> 00:09:52.580\nit didn't affect the other ones, right?\n\n189\n00:09:52.580 --> 00:09:55.210\nThat is kind of the goal\nof virtualization.\n\n190\n00:09:55.210 --> 00:09:57.040\nIt's like car pooling, right.\n\n191\n00:09:57.040 --> 00:10:01.400\nI drove to work today in a car that has,\nhow many seats do I have?\n\n192\n00:10:01.400 --> 00:10:02.690\nFive seats, six seats, right.\n\n193\n00:10:02.690 --> 00:10:05.910\nSix seats if you're really friendly,\nfive seats if you're not.\n\n194\n00:10:05.910 --> 00:10:09.070\nI was the only person in the car\non the way to work today, right?\n\n195\n00:10:09.070 --> 00:10:10.350\nSo all those other seats were empty.\n\n196\n00:10:10.350 --> 00:10:12.430\nI completely wasted it, right?\n\n197\n00:10:12.430 --> 00:10:13.970\nWell, nothing I can do about that.\n\n198\n00:10:13.970 --> 00:10:15.540\nI didn't have extra\npeople to stick in there.\n\n199\n00:10:15.540 --> 00:10:16.660\nBut what if I did, right?\n\n200\n00:10:16.660 --> 00:10:17.670\nWhat if I carpooled?\n\n201\n00:10:17.670 --> 00:10:18.730\nWhat if I had a few friends and\n\n202\n00:10:18.730 --> 00:10:21.680\nI chucked them in the car too, we all just\nhappened to be going to the same place.\n\n203\n00:10:21.680 --> 00:10:25.780\nNow, I've increased what my\ncar was able to do, right?\n\n204\n00:10:25.780 --> 00:10:28.110\nAnd that's what virtualization can do for\nus.\n\n205\n00:10:28.110 --> 00:10:29.910\nThe trick is making it happen.\n\n206\n00:10:29.910 --> 00:10:32.130\nAnd so in the early days,\nthey had an idea, and\n\n207\n00:10:32.130 --> 00:10:33.440\nit wasn't the most graceful idea.\n\n208\n00:10:33.440 --> 00:10:36.580\nIt is what is ultimately\nnow a type two hypervisor.\n\n209\n00:10:36.580 --> 00:10:39.210\nAnd they said,\nwell If we need three fake servers, or\n\n210\n00:10:39.210 --> 00:10:42.000\nhowever many fake servers,\nthen we're gonna need fake hardware.\n\n211\n00:10:42.000 --> 00:10:47.360\nWe're gonna need fake RAM, and fake,\nI keep saying fake, I should say virtual.\n\n212\n00:10:47.360 --> 00:10:50.380\nThat would be a little more\ntechnically accurate I guess.\n\n213\n00:10:50.380 --> 00:10:54.940\nWe need virtual memory, virtual hard\ndrive, virtual network adapters.\n\n214\n00:10:54.940 --> 00:10:56.430\nWe need all this fake stuff.\n\n215\n00:10:57.440 --> 00:10:59.050\nAnd so they built an emulator.\n\n216\n00:10:59.050 --> 00:11:01.460\nAn emulator is a software application that\n\n217\n00:11:01.460 --> 00:11:05.630\ncreates the image that something\nexists that doesn't really exist.\n\n218\n00:11:05.630 --> 00:11:11.530\nSo, for example, there might be two\ngigs of RAM that doesn't really exist.\n\n219\n00:11:11.530 --> 00:11:16.720\nI've got sixteen gigs in my laptop,\nbut I slice out two of it, and\n\n220\n00:11:16.720 --> 00:11:20.210\nmake it a pretend two gig set of memory,\nright?\n\n221\n00:11:20.210 --> 00:11:25.800\nAnd I might have a CPU of one type and\nI create a fake CPU of another type.\n\n222\n00:11:25.800 --> 00:11:27.420\nAnd we create all this fake hardware.\n\n223\n00:11:27.420 --> 00:11:30.890\nAnd then we present it\nto the virtual machine.\n\n224\n00:11:30.890 --> 00:11:33.890\nAnd the virtual machine sees that\nhardware and thinks it's real.\n\n225\n00:11:33.890 --> 00:11:35.700\nIt says, look,\nthere's a hard drive for me.\n\n226\n00:11:35.700 --> 00:11:39.280\nThere's some memory from me,\nthere's some CPU resources available.\n\n227\n00:11:39.280 --> 00:11:41.180\nThis stuff is available for\nme and I'm gonna use it.\n\n228\n00:11:42.280 --> 00:11:45.780\nBut every time it goes to use it,\nit's fake.\n\n229\n00:11:45.780 --> 00:11:50.640\nAnd so what we have to do is intercept\nthat call and turn it into a real call.\n\n230\n00:11:50.640 --> 00:11:52.720\nLet me show you on a diagram and\nit'll make a little more sense.\n\n231\n00:11:52.720 --> 00:11:56.590\nSo I've kind of diagrammed\nout here a type 2 hypervisor.\n\n232\n00:11:56.590 --> 00:11:59.070\nAnd what you're seeing is\na few different components.\n\n233\n00:11:59.070 --> 00:12:03.660\nWay down here at the bottom, right, so way\ndown here we've got the server hardware.\n\n234\n00:12:03.660 --> 00:12:08.190\nSo I go out and I buy a physical server\nand it's got CPU, RAM, network, disk, and\n\n235\n00:12:08.190 --> 00:12:12.710\nall the different components that we\nbuy and put into a server, right?\n\n236\n00:12:12.710 --> 00:12:16.150\nAnd in order to get that\nserver to do anything,\n\n237\n00:12:16.150 --> 00:12:18.010\nI have to install\nan operating system on it.\n\n238\n00:12:18.010 --> 00:12:19.830\nSo I install an operating system.\n\n239\n00:12:19.830 --> 00:12:25.150\nAnd maybe that's Mac OS, maybe it's Linux,\nmaybe it is Microsoft Windows.\n\n240\n00:12:25.150 --> 00:12:27.690\nIt's whatever operating system\nI choose to stick on there.\n\n241\n00:12:27.690 --> 00:12:32.710\nBut that operating system has direct\naccess to all of this hardware, right?\n\n242\n00:12:32.710 --> 00:12:35.200\nSo let's just assume it's Windows.\n\n243\n00:12:35.200 --> 00:12:37.840\nAnd so if Windows wants to\naccess the CPU it does.\n\n244\n00:12:37.840 --> 00:12:39.850\nIf it wants to access the RAM, it does.\n\n245\n00:12:39.850 --> 00:12:40.990\nIt just reaches out and grabs it.\n\n246\n00:12:40.990 --> 00:12:44.050\nIt's got exclusive\naccess to this hardware.\n\n247\n00:12:44.050 --> 00:12:47.520\nAnd what the operating systems do\nis they use what's called a HAL,\n\n248\n00:12:47.520 --> 00:12:49.350\na hardware abstraction layer.\n\n249\n00:12:49.350 --> 00:12:52.540\nThat is what's actually\ntalking to all this hardware.\n\n250\n00:12:52.540 --> 00:12:55.634\nAnd the Host OS has\nexclusive access to the HAL.\n\n251\n00:12:55.634 --> 00:12:58.748\nThe HAL has exclusive access to\nall the hardware underneath it,\n\n252\n00:12:58.748 --> 00:13:01.861\nexclusivity is the key word there,\nright, it's all tied up and\n\n253\n00:13:01.861 --> 00:13:03.719\nonly this one machine has the access.\n\n254\n00:13:04.830 --> 00:13:11.600\nNow if I have a type 2 Hypervisor,\nI install that on the host OS.\n\n255\n00:13:11.600 --> 00:13:15.050\nSo here's the type 2 hypervisor that\nwe're installing right on top of that OS.\n\n256\n00:13:15.050 --> 00:13:16.420\nAnd it's got management software.\n\n257\n00:13:16.420 --> 00:13:19.270\nManagement software is installed\nright on top of the host OS also.\n\n258\n00:13:19.270 --> 00:13:24.410\nSo this is a program that's running\nright on top of the host OS, right.\n\n259\n00:13:24.410 --> 00:13:29.560\nExamples of the program, VMWare\nWorkstation which you can still buy today.\n\n260\n00:13:29.560 --> 00:13:32.090\nVMWare Fusion which is very\npopular in the Mac world.\n\n261\n00:13:32.090 --> 00:13:34.380\nParallel is also in the Mac world.\n\n262\n00:13:34.380 --> 00:13:37.660\nOracle Virtual Box,\nwhich will run on darn near every OS.\n\n263\n00:13:37.660 --> 00:13:39.280\nWhat are some of the other ones?\n\n264\n00:13:39.280 --> 00:13:43.250\nVMWare used to have a server product\ncalled VMWare GSX which now they call\n\n265\n00:13:43.250 --> 00:13:44.010\nVMWare Server.\n\n266\n00:13:44.010 --> 00:13:47.030\nI'm not sure if they still sell that or\nnot; they might.\n\n267\n00:13:47.030 --> 00:13:49.480\nBut all of the products\nthat I just rattled off,\n\n268\n00:13:49.480 --> 00:13:51.280\nthose are all type 2 Hypervisor.\n\n269\n00:13:51.280 --> 00:13:52.660\nThey work exactly like you see here.\n\n270\n00:13:52.660 --> 00:13:56.300\nSo you install a host OS and\nthen on top of that host OS\n\n271\n00:13:56.300 --> 00:14:01.051\nyou install whatever that type\n2 hypervisor product is, right.\n\n272\n00:14:01.051 --> 00:14:03.880\nLet's say it's VMware Fusion,\nI'm running it on my laptop right now.\n\n273\n00:14:03.880 --> 00:14:06.570\nSo I install VMware Fusion.\n\n274\n00:14:06.570 --> 00:14:11.270\nWell then what VMware Fusion does,\nis every time you create\n\n275\n00:14:11.270 --> 00:14:15.782\na virtual machine on it,\nit creates a fake set hardware,\n\n276\n00:14:15.782 --> 00:14:19.542\na CPU, RAM, network,\ndisk for this guest OS.\n\n277\n00:14:19.542 --> 00:14:22.820\nAnd then CPU, RAM, network disk for\nthis other guest OS.\n\n278\n00:14:22.820 --> 00:14:26.690\nAnd I might have\nan Intel Network Adapter in my computer.\n\n279\n00:14:26.690 --> 00:14:31.010\nBut when that Virtual Machine fires up,\nit might see some kind of super generic\n\n280\n00:14:31.010 --> 00:14:33.980\nreal tech network adapter or\nsomething like that, right.\n\n281\n00:14:33.980 --> 00:14:37.150\nIt sees whatever the virtualization\nsoftware makes it see.\n\n282\n00:14:37.150 --> 00:14:39.080\nThat's what it picks and it puts in place.\n\n283\n00:14:39.080 --> 00:14:41.710\nI might have a wireless\nadapter on my laptop, but\n\n284\n00:14:41.710 --> 00:14:44.930\nthis Virtual Machine sees it as\na wired adapter, because it's fake.\n\n285\n00:14:44.930 --> 00:14:46.450\nIt's not even a real adapter, right?\n\n286\n00:14:46.450 --> 00:14:48.890\nIt's a virtual adapter that it creates.\n\n287\n00:14:48.890 --> 00:14:52.000\nAnd so, when we bring up that guest OS,\nwe've gotta load drivers and all that so\n\n288\n00:14:52.000 --> 00:14:54.000\nit recognizes this hardware.\n\n289\n00:14:54.000 --> 00:14:55.190\nThat's not such a big deal, right.\n\n290\n00:14:55.190 --> 00:14:56.720\nThat actually works pretty well.\n\n291\n00:14:56.720 --> 00:14:58.770\nWe install our applications on top of it.\n\n292\n00:14:58.770 --> 00:15:02.890\nEach of these guest OSes thinks they got\ntheir own hardware and they run just fine.\n\n293\n00:15:02.890 --> 00:15:05.210\nBut the challenge comes in\nwith performance, right.\n\n294\n00:15:05.210 --> 00:15:09.670\nAny time one of those application\ngoes to access something, right.\n\n295\n00:15:09.670 --> 00:15:17.096\nSo, if i got an application, and it needs\nto access, let's say the disk, right.\n\n296\n00:15:17.096 --> 00:15:19.800\nSo it's,\n[LAUGH] that is exactly not what I wanted.\n\n297\n00:15:19.800 --> 00:15:22.130\nIt's gonna go in and\nit's gonna access that disk.\n\n298\n00:15:22.130 --> 00:15:28.310\nNow, when it goes to do it, it thinks\nthat it's writing to a real disk, okay?\n\n299\n00:15:28.310 --> 00:15:29.120\nBut it's not.\n\n300\n00:15:29.120 --> 00:15:30.785\nIt's writing to a fake disk.\n\n301\n00:15:30.785 --> 00:15:35.245\nAnd that fake disk, well, it's fake.\n\n302\n00:15:35.245 --> 00:15:40.095\nSo that call gets sent down to the fake\ndisk are Type 2 if a Hypervisor has to\n\n303\n00:15:40.095 --> 00:15:46.687\nintercept it, and take that disk call and\nturn it into a real call.\n\n304\n00:15:46.687 --> 00:15:52.617\nNow, our virtual machine might be seeing\nthis disk as a SCSI drive or a SATA drive.\n\n305\n00:15:52.617 --> 00:15:56.207\nBut under the hood,\nwe might have the opposite, right.\n\n306\n00:15:56.207 --> 00:15:59.502\nThis might showing as a SATA drive here\nbut we have SCSI drives on the back end or\n\n307\n00:15:59.502 --> 00:16:01.288\nvice versa, this is very, very common.\n\n308\n00:16:01.288 --> 00:16:06.718\nAnd so what happens is the type 2\nhypervisor has to take that and\n\n309\n00:16:06.718 --> 00:16:09.288\nthen It's got to convert it.\n\n310\n00:16:09.288 --> 00:16:13.452\nIt's got to convert it from\nwhatever type of call that was,\n\n311\n00:16:13.452 --> 00:16:17.050\nto whatever type of call\nour real Disk needs.\n\n312\n00:16:17.050 --> 00:16:21.700\nAnd so that little communication is coming\nfrom the guest and getting converted.\n\n313\n00:16:21.700 --> 00:16:24.740\nAnd you probably see where\nthe problem is here, already.\n\n314\n00:16:24.740 --> 00:16:27.386\nWe have to do a conversion for\nevery single thing,\n\n315\n00:16:27.386 --> 00:16:31.229\nevery time we talk to the CPU,\nevery time we talk to the network adaptor,\n\n316\n00:16:31.229 --> 00:16:35.590\nevery time we write to the disk, every\ntime we touch RAM, there's a conversion.\n\n317\n00:16:35.590 --> 00:16:38.455\nAnd as a result,\nyou take a performance hit.\n\n318\n00:16:38.455 --> 00:16:44.225\nType 2 hypervisors are not as\nfast as true hardware, right?\n\n319\n00:16:44.225 --> 00:16:46.405\nWhen we say true hardware,\nwe normally call it bare metal.\n\n320\n00:16:46.405 --> 00:16:49.405\nLike the actual metal servers,\nnot virtual stuff,\n\n321\n00:16:49.405 --> 00:16:52.890\nbut real metal that's sitting there\nin a rack costing a lot of money.\n\n322\n00:16:52.890 --> 00:16:54.860\nSo that's the problem\nwith Type 2 hypervisors.\n\n323\n00:16:54.860 --> 00:16:58.390\nAnd I say it's a problem, it's only\na problem if you don't plan for it.\n\n324\n00:16:58.390 --> 00:17:01.800\nIf you went into this thinking\nit was gonna be great, then yes,\n\n325\n00:17:01.800 --> 00:17:03.200\nthis is a problem.\n\n326\n00:17:03.200 --> 00:17:08.180\nBut if If you use it where it's intended,\nmaybe you have labs that you wanna set up,\n\n327\n00:17:08.180 --> 00:17:09.690\nlike I do here on the show all the time.\n\n328\n00:17:09.690 --> 00:17:12.830\nI bring up virtual machines to show\nI can use a type two hypervisor.\n\n329\n00:17:12.830 --> 00:17:14.580\nIt works fine on my laptop.\n\n330\n00:17:14.580 --> 00:17:16.680\nI wouldn't wanna push it into production.\n\n331\n00:17:16.680 --> 00:17:20.555\nBut for lab and RND,\ntype two hypervisors are super convenient.\n\n332\n00:17:20.555 --> 00:17:23.330\nBecause you can just fire them\nright up on top of your own OS, and\n\n333\n00:17:23.330 --> 00:17:24.050\nnow you're in business.\n\n334\n00:17:25.090 --> 00:17:28.620\nSo I paint a bad picture\nabout type two app revisers,\n\n335\n00:17:28.620 --> 00:17:31.370\nthey're not bad, they just have a purpose.\n\n336\n00:17:31.370 --> 00:17:33.650\nAnd their purpose is not\nto be used in production,\n\n337\n00:17:33.650 --> 00:17:36.060\ntheir purpose is to be used for\nlab, research and\n\n338\n00:17:36.060 --> 00:17:40.450\ndevelopment, testing, simple applications,\nsupport on your own work station.\n\n339\n00:17:40.450 --> 00:17:42.200\nThat kinda stuff right?\n\n340\n00:17:42.200 --> 00:17:44.880\nIt's not designed for you to run your\nweb farm out of it, that would be bad.\n\n341\n00:17:44.880 --> 00:17:46.950\nThere's companies that have tried it,\nMicrosoft.\n\n342\n00:17:46.950 --> 00:17:49.654\nWhat was Microsoft's\nvirtual server called?\n\n343\n00:17:49.654 --> 00:17:54.000\n>> Yeah Don, I think that server was\nVirtual Server 2005 r2, I believe.\n\n344\n00:17:54.000 --> 00:17:56.417\n>> That's it, Virtual Server 2005.\n\n345\n00:17:56.417 --> 00:17:58.378\nThat tells you how long ago this was,\nright?\n\n346\n00:17:58.378 --> 00:18:01.410\nIt was 11 years ago,\nso not a great product.\n\n347\n00:18:01.410 --> 00:18:05.820\nAnd Microsoft, they had bough,t I think\nit was Connectix was the company, and\n\n348\n00:18:05.820 --> 00:18:09.810\nwhat the mistake was is that they had this\ntype two hypervisor that they pushed for\n\n349\n00:18:09.810 --> 00:18:12.820\nproduction use, and\nit just really wasn't suitable for that.\n\n350\n00:18:12.820 --> 00:18:16.790\nSo they ended up scrapping that and\ncreating Hyper-V to replace it,\n\n351\n00:18:16.790 --> 00:18:19.330\nwhich is their type one hypervisor now.\n\n352\n00:18:19.330 --> 00:18:24.530\nEven back then in 2005,\nVMWare had a type two hypervisor and\n\n353\n00:18:24.530 --> 00:18:27.120\na type one hypervisor,\nthat's really their claim to fame.\n\n354\n00:18:27.120 --> 00:18:29.140\nVMWare is really the company\nthat's responsible for\n\n355\n00:18:29.140 --> 00:18:31.145\npromoting type one hypervisor's and\ngetting them to be.\n\n356\n00:18:31.145 --> 00:18:32.535\nBe what they are.\n\n357\n00:18:32.535 --> 00:18:35.205\nSo let's talk about type\none hypervisors real quick.\n\n358\n00:18:35.205 --> 00:18:37.775\nNow in my diagram I showed\nyou guys a type two.\n\n359\n00:18:37.775 --> 00:18:39.375\nSo if we just kinda look at that,\n\n360\n00:18:39.375 --> 00:18:43.945\nthe big problem was an app sends\na call to virtual hardware.\n\n361\n00:18:43.945 --> 00:18:46.905\nThe virtual hardware then\nhas to get translated, and\n\n362\n00:18:46.905 --> 00:18:48.615\nthen sent to the real hardware.\n\n363\n00:18:48.615 --> 00:18:51.310\nSo we're emulating fake hardware.\n\n364\n00:18:51.310 --> 00:18:54.610\nAnd that's where our performance\nbottleneck happens is right here in\n\n365\n00:18:54.610 --> 00:18:56.030\nthe type 2 hypervisor.\n\n366\n00:18:56.030 --> 00:19:00.280\nAll right, well let me show you\na diagram I made of a type 1 hypervisor.\n\n367\n00:19:00.280 --> 00:19:03.490\nFirst thing you're gonna notice is,\nit's a lot more simple, right?\n\n368\n00:19:03.490 --> 00:19:06.570\nType 1 hypervisor's a lot more\nclean in the way that they work.\n\n369\n00:19:06.570 --> 00:19:09.760\nYou still have your server\nhardware down here at the bottom.\n\n370\n00:19:09.760 --> 00:19:14.050\nSo there's a physical machine that you\nbuy, CPU, RAM, Network, Disk, right,\n\n371\n00:19:14.050 --> 00:19:15.450\nthat's all the same.\n\n372\n00:19:15.450 --> 00:19:20.250\nBut then, look what's installed right\non the hardware, not the Host OS, but\n\n373\n00:19:20.250 --> 00:19:22.090\nthe type 1 Hypervisor.\n\n374\n00:19:22.090 --> 00:19:25.240\nThe type 1 Hypervisor is also sometimes\ncalled a bare metal Hypervisor,\n\n375\n00:19:25.240 --> 00:19:29.040\nbecause it's installed right on\nthe bare metal of the server.\n\n376\n00:19:29.040 --> 00:19:31.010\nI don't any other operating system.\n\n377\n00:19:31.010 --> 00:19:35.000\nI can install the Hypervisor\nright here on the hardware.\n\n378\n00:19:35.000 --> 00:19:40.210\nAnd then, the Host OS is actually\ninstalled on top of that Hypervisor.\n\n379\n00:19:40.210 --> 00:19:43.030\nThe Host OS is technically a guest.\n\n380\n00:19:43.030 --> 00:19:45.490\nIt's technically a virtual machine,\n\n381\n00:19:45.490 --> 00:19:47.550\nbecause it's running on\ntop of the Hypervisor.\n\n382\n00:19:47.550 --> 00:19:51.710\nThat means that,\nit doesn't have to get in the way,\n\n383\n00:19:51.710 --> 00:19:54.570\nanytime a Guest OS wants\nto access hardware.\n\n384\n00:19:54.570 --> 00:19:58.210\nBecause the Host OS is not\nin between the guests and\n\n385\n00:19:58.210 --> 00:20:01.410\nthe hardware It's just\nthe type 1 hypervisor, and\n\n386\n00:20:01.410 --> 00:20:07.050\nthe way the type 1 hypervisor works is\nit doesn't have to emulate hardware.\n\n387\n00:20:07.050 --> 00:20:09.640\nIt can directly expose\nhardware if it wants.\n\n388\n00:20:09.640 --> 00:20:14.680\nSo it can take the CPUs and just let the\nvirtual machines see the CPUs directly.\n\n389\n00:20:14.680 --> 00:20:20.110\nNot an emulated CPU, not a fake one,\nbut the real actual CPU.\n\n390\n00:20:20.110 --> 00:20:23.700\nAnd then the Type 1 Hypervisor can\njust act like a traffic cop and\n\n391\n00:20:23.700 --> 00:20:27.500\nsay, all right, this guest,\nit's your turn, now it's this guy's turn,\n\n392\n00:20:27.500 --> 00:20:30.160\nnow it's that guy's turn,\nlet me go back to this guy and oop,\n\n393\n00:20:30.160 --> 00:20:33.480\nyou're taking too much time so I'm cutting\nyou off and works like that, right.\n\n394\n00:20:33.480 --> 00:20:36.440\nIt It controls people's access\nto make sure everybody gets\n\n395\n00:20:36.440 --> 00:20:37.990\nfair access to the hardware.\n\n396\n00:20:37.990 --> 00:20:41.020\nOtherwise, everybody is able to\ndirectly access the hardware.\n\n397\n00:20:41.020 --> 00:20:42.690\nNow that doesn't always happen.\n\n398\n00:20:42.690 --> 00:20:45.070\nYou'll notice, for example,\nlater on in the show,\n\n399\n00:20:45.070 --> 00:20:46.880\nwhen we start creating virtual machines.\n\n400\n00:20:46.880 --> 00:20:50.240\nthat we do have to load drivers for\nVMware, and\n\n401\n00:20:50.240 --> 00:20:51.730\nthat things like the network adaptor.\n\n402\n00:20:51.730 --> 00:20:55.890\nI might have an Intel Pro1000,\nor something like that, right?\n\n403\n00:20:55.890 --> 00:20:57.370\nThe virtual machine might not see that.\n\n404\n00:20:57.370 --> 00:21:01.960\nThe virtual machine might see\na VMware network adaptor, a VMmic.\n\n405\n00:21:01.960 --> 00:21:06.390\nAnd that's because VMware actually has\nthese little accelerations, and so\n\n406\n00:21:06.390 --> 00:21:10.010\nthey can create an accelerated\nvirtual network adaptor.\n\n407\n00:21:10.010 --> 00:21:13.120\nThat runs faster than if we were\nto allow the machines to directly\n\n408\n00:21:13.120 --> 00:21:14.940\naccess the adaptor themselves.\n\n409\n00:21:14.940 --> 00:21:18.300\nIf they were allowed direct access,\nevery virtual machine would see\n\n410\n00:21:18.300 --> 00:21:20.890\nthe packets that were coming in,\nand they would then have to\n\n411\n00:21:20.890 --> 00:21:23.880\nfigure out which packets were theirs and\nwhich packets were somebody else's.\n\n412\n00:21:23.880 --> 00:21:27.160\nWell, what happens when a server\ngets packets for somebody else.\n\n413\n00:21:27.160 --> 00:21:30.630\nIt throws them away, we don't want that,\nwe want the other machines to get it.\n\n414\n00:21:30.630 --> 00:21:31.820\nAnd so they are virtualizing,\n\n415\n00:21:31.820 --> 00:21:35.630\ntheir act actually works better than\nthe direct access to the hardware.\n\n416\n00:21:35.630 --> 00:21:38.120\nSo even though we can have\ndirect access to the hardware,\n\n417\n00:21:38.120 --> 00:21:40.080\nit's not always a great idea.\n\n418\n00:21:40.080 --> 00:21:43.270\nYou'll find that RAM and CPU, they do it.\n\n419\n00:21:43.270 --> 00:21:45.910\nAnd disk even,\nif you've got the hardware support for it,\n\n420\n00:21:45.910 --> 00:21:49.690\nthese virtual machines can be allowed\nto directly access the disk, and\n\n421\n00:21:49.690 --> 00:21:53.330\nnow you get actual wire\nspeed communications.\n\n422\n00:21:53.330 --> 00:21:56.960\nNo translation, no emulation,\nthis is much faster,\n\n423\n00:21:56.960 --> 00:22:02.010\nmuch more stable and now it's something\nthat can be used in production.\n\n424\n00:22:02.010 --> 00:22:04.260\n>> Don, is the type two Hypervisor,\n\n425\n00:22:04.260 --> 00:22:08.530\nit seems like there's a couple of layers\nof translation, or abstraction going on.\n\n426\n00:22:08.530 --> 00:22:13.050\nNot only does the guest operating\nsystem have to make a request to\n\n427\n00:22:13.050 --> 00:22:14.250\nthe Hypervisor itself, but\n\n428\n00:22:14.250 --> 00:22:17.300\nthen the Hypervisor has to make\na request to the base operating system.\n\n429\n00:22:17.300 --> 00:22:21.660\nIs that one of the reasons that it does\nslow down the performance versus the type\n\n430\n00:22:21.660 --> 00:22:23.600\none, where there's not a second layer?\n\n431\n00:22:23.600 --> 00:22:24.330\n>> Yeah.\n\n432\n00:22:24.330 --> 00:22:26.498\nJust even if it was\nidentical hardware right,\n\n433\n00:22:26.498 --> 00:22:30.223\nif the virtual network adapter was\nidentical to the physical network adapter,\n\n434\n00:22:30.223 --> 00:22:34.018\nit is still two calls right, and so\nthere is gonna be a slow down there.\n\n435\n00:22:34.018 --> 00:22:36.370\nBut it's rare those two match, and so\n\n436\n00:22:36.370 --> 00:22:41.440\nit's almost always a call to one fake type\nof adapter that then has to be changed\n\n437\n00:22:41.440 --> 00:22:44.440\nto match the other adapter and\nthat make it even worse, right.\n\n438\n00:22:44.440 --> 00:22:47.490\nAnd so we deal with that type 1\nhypervisor, that gets cut down.\n\n439\n00:22:47.490 --> 00:22:50.230\nThat now we can see the real hardware.\n\n440\n00:22:50.230 --> 00:22:52.080\nOur call is already in the right format.\n\n441\n00:22:52.080 --> 00:22:54.010\nIt gets sent along,\nthere's no translation at all.\n\n442\n00:22:54.010 --> 00:22:55.150\nAnd it's one step.\n\n443\n00:22:55.150 --> 00:22:58.420\nIt real is wire speed or near wire speed.\n\n444\n00:22:58.420 --> 00:22:59.840\nIt's very, very fast.\n\n445\n00:22:59.840 --> 00:23:01.780\nAnd that makes Type 1\nhypervisors really attractive.\n\n446\n00:23:01.780 --> 00:23:06.410\nAnd that is what the VMware\nvSphere Hypervisor is.\n\n447\n00:23:06.410 --> 00:23:11.490\nThe VM Visor as they call it sometimes,\nis a type 1 hypervisor and\n\n448\n00:23:11.490 --> 00:23:13.270\nit runs really really well.\n\n449\n00:23:13.270 --> 00:23:14.410\nNow here's the problem.\n\n450\n00:23:14.410 --> 00:23:18.280\nYou might be saying to yourself, well Don,\nI'm having a hard time seeing when I'd\n\n451\n00:23:18.280 --> 00:23:21.560\never want to use a type 2 hypervisor,\nyour type 1 sounds so awesome.\n\n452\n00:23:21.560 --> 00:23:22.940\nDepending on how you think I guess.\n\n453\n00:23:22.940 --> 00:23:26.060\nBut the problem with type 1 hypervisors is\n\n454\n00:23:26.060 --> 00:23:30.880\nthey expect that hardware to be\ndedicated for these virtual machines.\n\n455\n00:23:30.880 --> 00:23:34.560\nRemember how the host OS is\nrunning as a virtual machine?\n\n456\n00:23:34.560 --> 00:23:39.360\nAnd so the challenge here is\nthat most type 1 hypervisors\n\n457\n00:23:39.360 --> 00:23:42.140\ndon't have a user interface.\n\n458\n00:23:42.140 --> 00:23:47.930\nSo if I were to install ESX on my laptop,\nI would boot it up.\n\n459\n00:23:47.930 --> 00:23:52.375\nAnd a screen will pop up saying browse\nto this address to manage the server and\n\n460\n00:23:52.375 --> 00:23:53.146\nthat's it.\n\n461\n00:23:53.146 --> 00:23:54.932\nI wouldn't be able to\nuse my laptop anymore.\n\n462\n00:23:54.932 --> 00:23:58.719\nI have to go to another computer to\nremotely connect to my laptop to be able\n\n463\n00:23:58.719 --> 00:24:00.033\nto use it again, right.\n\n464\n00:24:00.033 --> 00:24:03.452\nSo if this is some kind of\nmultipurpose device like my laptop,\n\n465\n00:24:03.452 --> 00:24:07.986\nI don't want a type one hypervisor, I want\na type two because I can still run host OS\n\n466\n00:24:07.986 --> 00:24:10.979\nand then turn the hypervisor on and\noff when I need it.\n\n467\n00:24:10.979 --> 00:24:13.841\nNow, some vendors have tried\nto blur the lines on that.\n\n468\n00:24:13.841 --> 00:24:18.225\nMicrosoft is a great example where their\nHyper-V product, you turn it on and it is\n\n469\n00:24:18.225 --> 00:24:22.434\na type one hypervisor but you run the host\nwest right there on the local screen.\n\n470\n00:24:22.434 --> 00:24:25.524\nBut they eat up a ton of\nresources by doing that,\n\n471\n00:24:25.524 --> 00:24:28.880\nit is not an efficient\nway of doing things.\n\n472\n00:24:28.880 --> 00:24:32.950\nWith VMware, they want you to\nget the most bang for your buck,\n\n473\n00:24:32.950 --> 00:24:38.990\nthe most hardware resources available, so\nwith ESX it's actually running SUSE Linux,\n\n474\n00:24:38.990 --> 00:24:41.640\nor it's a variation of SUSE Linux,\nit's not true SUSE.\n\n475\n00:24:41.640 --> 00:24:44.770\nSo it's running Linux under the hood and\n\n476\n00:24:44.770 --> 00:24:50.160\nthe base OS fits in a footprint that's\nlike 600 MB in size, very, very small.\n\n477\n00:24:50.160 --> 00:24:53.100\nThey basically took Linux and\nstripped all the GUI stuff out,\n\n478\n00:24:53.100 --> 00:24:57.550\nthey stripped out any feature you didn't\nneed and left it with the bare minimum\n\n479\n00:24:57.550 --> 00:25:00.780\nto have that system up and\nrunning and be network manageable.\n\n480\n00:25:00.780 --> 00:25:05.210\nSo you get the most full use of\nyour resources on the system.\n\n481\n00:25:05.210 --> 00:25:07.330\nAnd we'll see that as we start\ncreating virtual machines so\n\n482\n00:25:07.330 --> 00:25:10.670\nwe can really get a lot of\nutilization out of our systems.\n\n483\n00:25:10.670 --> 00:25:12.880\nWith other products that are out there,\nyou don't necessarily have that.\n\n484\n00:25:12.880 --> 00:25:13.660\nSo just be aware.\n\n485\n00:25:13.660 --> 00:25:15.960\nSome of them do work a little\nbit differently, but\n\n486\n00:25:15.960 --> 00:25:18.750\nwhat I've shown you here is\nbasically how a Type I and\n\n487\n00:25:18.750 --> 00:25:23.660\nType II hypervisor function, and that\nESX piece, that's our Type I hypervisor.\n\n488\n00:25:24.670 --> 00:25:27.870\nAll right, now those are just some\nof the components inside of vSphere.\n\n489\n00:25:27.870 --> 00:25:29.610\nSo we talked about ESX.\n\n490\n00:25:29.610 --> 00:25:31.720\nWe talked about vCenter a little bit.\n\n491\n00:25:31.720 --> 00:25:34.570\nYou'll see that,\nif you go to VMware's webpage, and\n\n492\n00:25:34.570 --> 00:25:38.020\nstart shopping around, that things\ncan get really confusing really fast.\n\n493\n00:25:38.020 --> 00:25:41.440\nRight, I mean, just look at these menus,\nand how many items we have up here.\n\n494\n00:25:41.440 --> 00:25:44.190\nVMware makes a lot of stuff,\nand some of it is really,\n\n495\n00:25:44.190 --> 00:25:48.550\nreally great stuff that a lot of companies\nuse, some of it is really, really cutting\n\n496\n00:25:48.550 --> 00:25:52.090\nedge fringe stuff that not many people\nare using, but it's the future.\n\n497\n00:25:52.090 --> 00:25:55.820\nSome of it is extremely specialized stuff\nthat unless you're in one particular\n\n498\n00:25:55.820 --> 00:25:58.170\nmarket, you'll never ever use, right?\n\n499\n00:25:58.170 --> 00:26:01.110\nBut the main product suite is vSphere.\n\n500\n00:26:01.110 --> 00:26:05.300\nAnd when you purchase vSphere it\ncomes in several different editions.\n\n501\n00:26:05.300 --> 00:26:08.180\nAnd so I just wanna run over those really\nquick, what the different editions are.\n\n502\n00:26:08.180 --> 00:26:11.670\nNow on the website and\non the exam they really only highlight\n\n503\n00:26:11.670 --> 00:26:14.880\nthree primary versions,\nthese three guys right here.\n\n504\n00:26:14.880 --> 00:26:16.910\nBut in real life there's probably six or\n\n505\n00:26:16.910 --> 00:26:21.120\nseven different editions of\nvSphere that can run into.\n\n506\n00:26:21.120 --> 00:26:23.220\nOn the exam,\nthey want you to know these three.\n\n507\n00:26:23.220 --> 00:26:27.000\nYou've got these vSphere Standard,\nvSphere Enterprise Plus, and\n\n508\n00:26:27.000 --> 00:26:29.900\nvSphere with\nOperations Management Enterprise Plus.\n\n509\n00:26:29.900 --> 00:26:34.030\nAll right, now, what these basically\ndo is have an increasing feature set,\n\n510\n00:26:34.030 --> 00:26:36.710\nand you get more and\nmore features with each one.\n\n511\n00:26:36.710 --> 00:26:40.630\nvSphere Standard, that's the basic,\nstandard implementation of vSphere.\n\n512\n00:26:40.630 --> 00:26:42.430\nIt gives you a Type I hypervisor,\n\n513\n00:26:42.430 --> 00:26:45.310\nit gives you vCenter to be able\nto centrally manage it, and\n\n514\n00:26:45.310 --> 00:26:50.090\nyou're able to control those systems and\nwork with it up to a certain amount.\n\n515\n00:26:50.090 --> 00:26:55.210\nAnd so basically, a standard vSphere\nlicense gets you a license based on CPU,\n\n516\n00:26:55.210 --> 00:26:56.500\nnow that's important I guess.\n\n517\n00:26:56.500 --> 00:27:01.270\nIt used to be that you were licensed based\non how many physical servers you had.\n\n518\n00:27:01.270 --> 00:27:04.710\nBut as more and more core started getting\nintroduced, people needed less and less\n\n519\n00:27:04.710 --> 00:27:08.400\nservers, so it wasn't a good licensing\nmodel for VMware, so they changed it.\n\n520\n00:27:08.400 --> 00:27:10.380\nAnd now you're licensed per physical CPU.\n\n521\n00:27:10.380 --> 00:27:14.290\nSo if you have one physical CPU,\nor two physical CPUs,\n\n522\n00:27:14.290 --> 00:27:18.730\nthat's what you have to pay for\nas far as your licensing is concerned.\n\n523\n00:27:18.730 --> 00:27:22.880\nAnd so, the standard edition gets\nyou centralized management and\n\n524\n00:27:22.880 --> 00:27:25.620\nthe Type I hypervisor to able\nto run your virtual machines.\n\n525\n00:27:25.620 --> 00:27:27.370\nAnd that's what a lot of people need.\n\n526\n00:27:27.370 --> 00:27:30.170\nBut if you step up to the Enterprise Plus,\n\n527\n00:27:30.170 --> 00:27:33.680\nEnterprise Plus is where you start\nto get a lot of extra features.\n\n528\n00:27:33.680 --> 00:27:36.630\nSome really impressive\nstuff gets baked into it.\n\n529\n00:27:36.630 --> 00:27:39.070\nIn the episode notes I'll put a big list.\n\n530\n00:27:39.070 --> 00:27:42.020\nActually I'll put the link to this page,\ntoo, cuz they really lay it out here.\n\n531\n00:27:42.020 --> 00:27:43.400\nThere's a ton of stuff.\n\n532\n00:27:43.400 --> 00:27:48.420\nBut the key difference is, there's\na lot of features here like vMotion\n\n533\n00:27:48.420 --> 00:27:50.540\nthat are present in all three editions,\nright.\n\n534\n00:27:50.540 --> 00:27:54.980\nvMotion says I can take a virtual machine\nrunning on one physical piece of hardware\n\n535\n00:27:54.980 --> 00:27:58.780\nand move it to another piece of hardware\nwithout rebooting the virtual machine.\n\n536\n00:27:58.780 --> 00:28:00.810\nIt can stay on and\noperational the whole time.\n\n537\n00:28:00.810 --> 00:28:04.710\nIt's really cool, we'll see it later\nin the show, but that's vMotion, and\n\n538\n00:28:04.710 --> 00:28:06.640\nit's present in all three editions.\n\n539\n00:28:06.640 --> 00:28:09.500\nSo it doesn't matter if I have Standard or\nEnterprise Plus or whatever,\n\n540\n00:28:09.500 --> 00:28:10.690\nI'm gonna have that.\n\n541\n00:28:10.690 --> 00:28:12.810\nBut when it comes to differentiation,\n\n542\n00:28:12.810 --> 00:28:16.990\nEnterprise Plus starts to bring in\nall of these extra guys right here.\n\n543\n00:28:16.990 --> 00:28:21.590\nHere, Reliable Memory, where it can\nhave multiple copies of memory and\n\n544\n00:28:21.590 --> 00:28:23.160\nidentify when a fault occurs.\n\n545\n00:28:23.160 --> 00:28:26.100\nAnd if a fault occurs more than once it\ncan blacklist an address or memory and\n\n546\n00:28:26.100 --> 00:28:26.900\nstop using it.\n\n547\n00:28:26.900 --> 00:28:27.730\nIt's pretty neat stuff.\n\n548\n00:28:27.730 --> 00:28:32.760\nSo it'll be I don't wanna say redundant,\nbut more like resilient,\n\n549\n00:28:32.760 --> 00:28:36.010\nin the event that some kind of memory\nfailure occurs, it'll keep running.\n\n550\n00:28:36.010 --> 00:28:37.420\nBig data extensions.\n\n551\n00:28:37.420 --> 00:28:39.210\nIf you're doing Hadoop clusters or\n\n552\n00:28:39.210 --> 00:28:40.730\nanything like that,\nit's got support for it.\n\n553\n00:28:40.730 --> 00:28:42.560\nSome of the other ones,\n\n554\n00:28:42.560 --> 00:28:45.700\nthe Distributive Resource Scheduler,\nthis one's pretty awesome.\n\n555\n00:28:45.700 --> 00:28:48.620\nWe're gonna see it in\nan episode later on where\n\n556\n00:28:48.620 --> 00:28:51.620\nwe can schedule to balance\nout our Virtual Machine.\n\n557\n00:28:51.620 --> 00:28:55.190\nSo if I have one physical piece of\nhardware that's starting to get a little\n\n558\n00:28:55.190 --> 00:28:57.590\nover subscribed,\nI've got too many VMs running on it.\n\n559\n00:28:57.590 --> 00:29:00.830\nAnd I've got another piece of hardware\nthat's sitting there idle, I can move\n\n560\n00:29:00.830 --> 00:29:04.520\nsome Virtual Machines over and balance\nit out, and we can have it automatic.\n\n561\n00:29:04.520 --> 00:29:06.620\nThe DRS lets you make it all automated and\nstuff.\n\n562\n00:29:06.620 --> 00:29:08.835\nIt's pretty cool, neat stuff to have.\n\n563\n00:29:08.835 --> 00:29:14.160\nStorage I/O and Network I/O Control,\nso you can throttle virtual machines.\n\n564\n00:29:14.160 --> 00:29:17.246\nYou don't want one VM eating\nup all of your network,\n\n565\n00:29:17.246 --> 00:29:19.574\nor one VM eating up all of your storage.\n\n566\n00:29:19.574 --> 00:29:22.850\nWith storage we're talking about disk I/O,\nthe input and the output.\n\n567\n00:29:22.850 --> 00:29:26.740\nOr maybe you do, maybe you have a database\nserver that you want to run as fast as\n\n568\n00:29:26.740 --> 00:29:30.270\npossible so it needs priority for memory\nand disk access over everybody else.\n\n569\n00:29:30.270 --> 00:29:34.394\nSo you can come in and\nyou can figure the I/O throttles for that.\n\n570\n00:29:34.394 --> 00:29:38.490\nThe I/O Virtualization, that's for\nthe wire speed disk access.\n\n571\n00:29:38.490 --> 00:29:40.660\nYou have to have hardware to support that,\nand\n\n572\n00:29:40.660 --> 00:29:43.200\nthe Enterprise edition is\nwhat lets you enable that.\n\n573\n00:29:43.200 --> 00:29:46.740\nSo you'll see a bunch of features like\nthat, Distributed Switch and so on.\n\n574\n00:29:46.740 --> 00:29:49.340\nA lot of ones we're gonna\ntalk about in the show that\n\n575\n00:29:49.340 --> 00:29:53.200\naren't present in Standard Edition that\nyou have to have Enterprise Edition for.\n\n576\n00:29:53.200 --> 00:29:57.190\nSo when you go to buy vSphere, you gotta\nmake sure you pick the right edition.\n\n577\n00:29:57.190 --> 00:30:00.570\nBecause if you know for\na fact I need a Distributed Switch,\n\n578\n00:30:00.570 --> 00:30:03.190\nI want to make sure that I've\ngot full network redundancy and\n\n579\n00:30:03.190 --> 00:30:06.500\nthat I can have VMs on any of these hosts\nand they'll all be on the same network.\n\n580\n00:30:06.500 --> 00:30:09.670\nYou need Distributed Switch,\nit's not in Standard edition.\n\n581\n00:30:09.670 --> 00:30:11.490\nSo then if you go and\nbuy a standard edition and\n\n582\n00:30:11.490 --> 00:30:13.810\nyou go to setup a distributed\nswitch it's not gonna work.\n\n583\n00:30:13.810 --> 00:30:16.744\nAnd then you gotta go buy more [LAUGH]\nlicenses and you blow your budget.\n\n584\n00:30:16.744 --> 00:30:21.553\nSo just be aware that as you go to pick\nit, ESX under the hood is identical,\n\n585\n00:30:21.553 --> 00:30:24.400\nvCenter under the hood is identical.\n\n586\n00:30:24.400 --> 00:30:27.720\nIt's just certain features\nwon't be able to be turned on.\n\n587\n00:30:27.720 --> 00:30:29.860\nSo the actual operating system and\nstuff is the same,\n\n588\n00:30:29.860 --> 00:30:31.630\nthe performance level is the same.\n\n589\n00:30:31.630 --> 00:30:36.920\nIt's the bells and whistles that make the\nbig difference, and it can be expensive.\n\n590\n00:30:36.920 --> 00:30:41.160\nNow the big difference though,\nis this last one right here.\n\n591\n00:30:41.160 --> 00:30:44.300\nSo this one was vSphere Enterprise Plus.\n\n592\n00:30:44.300 --> 00:30:50.550\nHere it's vSphere Enterprise Plus with\nOperations Management, okay, what is that?\n\n593\n00:30:50.550 --> 00:30:53.950\nWell Operations Management is\na centralized management suite.\n\n594\n00:30:53.950 --> 00:30:56.798\nIt's part of vSphere,\nit's part of the vCenter server.\n\n595\n00:30:56.798 --> 00:30:59.970\nAnd it lets you control not just\none vCenter implementation,\n\n596\n00:30:59.970 --> 00:31:02.320\nbut more than one vCenter implementation.\n\n597\n00:31:02.320 --> 00:31:05.850\nYou can have multiple data centers around\nthe world and manage them all together and\n\n598\n00:31:05.850 --> 00:31:09.630\nmonitor performance and\nyou can do things live in real time.\n\n599\n00:31:09.630 --> 00:31:14.620\nIf you see CPU utilization starting\nto go up on your servers in France,\n\n600\n00:31:14.620 --> 00:31:16.730\nthen you might take some of those VMs and\n\n601\n00:31:16.730 --> 00:31:20.050\nmove them over to your data center over in\nGermany where you've got extra resources.\n\n602\n00:31:20.050 --> 00:31:22.720\nSo you can start doing balancing\nacross those environments.\n\n603\n00:31:22.720 --> 00:31:25.280\nYou can have disaster recovery\nthat happens automatically.\n\n604\n00:31:25.280 --> 00:31:27.952\nOne location fails,\nthe VMs spin up in another location and\n\n605\n00:31:27.952 --> 00:31:29.260\nyou're back in business.\n\n606\n00:31:29.260 --> 00:31:31.760\nThe Operations Manager suite is amazing.\n\n607\n00:31:31.760 --> 00:31:34.610\nIt's really packed full of\njust an amazing feature set.\n\n608\n00:31:34.610 --> 00:31:38.965\nIt takes a lot of planning,\na lot of implementation effort but\n\n609\n00:31:38.965 --> 00:31:40.573\nit really is amazing.\n\n610\n00:31:40.573 --> 00:31:43.635\nAnd it certainly costs a bit more,\nyou've got to pay for these things, but\n\n611\n00:31:43.635 --> 00:31:45.740\nwhat you get in return\nis pretty impressive.\n\n612\n00:31:45.740 --> 00:31:48.160\nSo if you're a small or medium business\nthat's probably not for you, right?\n\n613\n00:31:48.160 --> 00:31:49.870\nProbably gonna blow the budget.\n\n614\n00:31:49.870 --> 00:31:54.590\nBut for an enterprise, every moment that\nyou're down, your company is losing money.\n\n615\n00:31:54.590 --> 00:31:58.300\nSo investing in extra software like\nthis really does make sense, and\n\n616\n00:31:58.300 --> 00:32:00.120\nit's impressive stuff.\n\n617\n00:32:00.120 --> 00:32:04.160\nBut like I said I'll link to this page in\nthe show notes so you guys can see it.\n\n618\n00:32:04.160 --> 00:32:07.085\nFor the exam, they do want you to know\nthese three main versions, right?\n\n619\n00:32:07.085 --> 00:32:09.020\nThe Standard, Enterprise Plus, and\n\n620\n00:32:09.020 --> 00:32:11.865\nthen the Enterprise Plus\nwith Operations Management.\n\n621\n00:32:11.865 --> 00:32:14.860\nBut, if you look on the website,\nyou'll find where there's other versions.\n\n622\n00:32:14.860 --> 00:32:18.034\nLike vSphere\nRemote Office Branch Office Standard, or\n\n623\n00:32:18.034 --> 00:32:20.532\nRemote Office Branch Office Advanced, and\n\n624\n00:32:20.532 --> 00:32:25.540\nyou'll see that these support up to 25\nvirtual machines and come with vCenter.\n\n625\n00:32:25.540 --> 00:32:27.550\nThese are designed for small environments.\n\n626\n00:32:27.550 --> 00:32:30.380\nIf you're a small or medium sized company,\nyou might wanna go with these, and\n\n627\n00:32:30.380 --> 00:32:32.280\nthey've got restricted features, right.\n\n628\n00:32:32.280 --> 00:32:35.470\nThis is designed to support just one\noffice, not more than one location.\n\n629\n00:32:35.470 --> 00:32:37.420\nSo now you just have one data center.\n\n630\n00:32:37.420 --> 00:32:40.010\nIf you start looking down,\nyou'll see some of the other ones.\n\n631\n00:32:41.210 --> 00:32:42.140\nLet's see, where are they?\n\n632\n00:32:42.140 --> 00:32:43.870\nHere, the essentials, right.\n\n633\n00:32:43.870 --> 00:32:47.740\nSo vCenter Essentials,\nthese are really small.\n\n634\n00:32:47.740 --> 00:32:51.140\nSo if you're a company that just\nhas three virtualization hosts,\n\n635\n00:32:51.140 --> 00:32:54.550\nthen you can get the essentials kit,\nand it's the lowest price,\n\n636\n00:32:54.550 --> 00:32:57.860\nit's like a low point of entry for\ngetting your feet wet with VM ware.\n\n637\n00:32:57.860 --> 00:33:01.100\nAnd so, you can get in there with vCenter,\nand it's vCenter Essentials,\n\n638\n00:33:01.100 --> 00:33:03.800\nso it's kind of a limited\nversion of vCenter.\n\n639\n00:33:03.800 --> 00:33:04.920\nBut, you get the Hypervisor,\n\n640\n00:33:04.920 --> 00:33:08.370\nyou can have up to six processors,\nthree servers with two processors each.\n\n641\n00:33:08.370 --> 00:33:12.620\nOr, you could actually do six servers with\none CPU each, but good luck finding that.\n\n642\n00:33:12.620 --> 00:33:15.590\nSo, you've got that one in\nthe Essentials Plus kit,\n\n643\n00:33:15.590 --> 00:33:17.220\nwhich bumps it up a little bit more.\n\n644\n00:33:17.220 --> 00:33:20.630\nSo you get some extra stuff,\nyou get vMotion, High Availability,\n\n645\n00:33:20.630 --> 00:33:21.700\nData Protection, and so on.\n\n646\n00:33:21.700 --> 00:33:25.580\nSo, while these won't show up on the exam,\nthey will show up in real life.\n\n647\n00:33:25.580 --> 00:33:28.710\nIf your company is just starting\nto dabble in VM ware, vSphere you\n\n648\n00:33:28.710 --> 00:33:31.940\ncan get one of these essentials kits and\nit reduces your risk, right.\n\n649\n00:33:31.940 --> 00:33:34.530\nAnd unless you get it,\nkind of get the software deployed,\n\n650\n00:33:34.530 --> 00:33:37.165\nsee if you like, and\nthen you can expand and grow from there.\n\n651\n00:33:38.785 --> 00:33:41.975\nNow, on the pricing side, I don't normally\nlike to talk about pricing on these shows,\n\n652\n00:33:41.975 --> 00:33:44.515\nbut VMware is really transparent\nabout their pricing.\n\n653\n00:33:44.515 --> 00:33:46.415\nAnd I'll post the link to this page.\n\n654\n00:33:46.415 --> 00:33:53.160\nYou can jump over to,\nit's vmware.com/products/vsphere/pricing.\n\n655\n00:33:53.160 --> 00:33:56.990\nAnd when you jump over to it most of the\nprices is in US dollars, so you might have\n\n656\n00:33:56.990 --> 00:34:00.700\nto convert it for your currency, but\nthese are our full retail prices.\n\n657\n00:34:00.700 --> 00:34:02.630\nYou can usually get it a lot cheaper,\n\n658\n00:34:02.630 --> 00:34:05.840\nlike if you buy it through Dell\nyou get significant discounts.\n\n659\n00:34:05.840 --> 00:34:08.410\nBut you get an idea of\nhow the pricing works.\n\n660\n00:34:08.410 --> 00:34:12.300\nSo when you look at vSphere Standard,\nit's about $1,000.\n\n661\n00:34:12.300 --> 00:34:13.585\nVSphere Enterprise Plus?\n\n662\n00:34:13.585 --> 00:34:14.460\n$3,500.\nRight?\n\n663\n00:34:15.740 --> 00:34:20.080\nSignificantly more expensive because\nof the extra features that you get.\n\n664\n00:34:20.080 --> 00:34:24.290\nBut the jump from there to Operations\nManagement is actually not that high.\n\n665\n00:34:24.290 --> 00:34:27.180\nAnd so you can make that jump\nto get a little bit higher.\n\n666\n00:34:27.180 --> 00:34:29.880\nThey do have subscriptions for support.\n\n667\n00:34:29.880 --> 00:34:32.010\nIf you have a problem and\nyou want to call VM Ware for\n\n668\n00:34:32.010 --> 00:34:35.610\nhelp, you need to have a support\nsubscription, and that's an annual fee.\n\n669\n00:34:35.610 --> 00:34:37.010\nThose are priced pretty reasonably.\n\n670\n00:34:38.200 --> 00:34:40.730\nThen you'll see those branch\noffice editions down here,\n\n671\n00:34:40.730 --> 00:34:42.250\nwhich are less expensive.\n\n672\n00:34:42.250 --> 00:34:44.130\nDo they have the essentials kits?\n\n673\n00:34:44.130 --> 00:34:45.140\nWhere are the essentials?\n\n674\n00:34:47.040 --> 00:34:48.570\nThey don't have it, do they?\n\n675\n00:34:48.570 --> 00:34:50.920\nYeah, well here's vCenter\nstandard edition.\n\n676\n00:34:50.920 --> 00:34:52.510\nSo you can get all the pricing,\nthough, right here.\n\n677\n00:34:52.510 --> 00:34:54.090\nIt's all pretty well laid out.\n\n678\n00:34:54.090 --> 00:34:56.360\nThey do have these acceleration kits,\n\n679\n00:34:56.360 --> 00:34:58.060\nwhich are designed to really\nget a company started.\n\n680\n00:34:58.060 --> 00:35:00.780\nIt's supposed to have everything you\nneed based on what it is you want.\n\n681\n00:35:00.780 --> 00:35:01.360\nRight.\n\n682\n00:35:01.360 --> 00:35:04.410\nDo you want server consideration and\nno downtime?\n\n683\n00:35:04.410 --> 00:35:06.630\nDo you want policy-based automation?\n\n684\n00:35:06.630 --> 00:35:10.980\nDo you want policy-based automation\nwith proactive operations management?\n\n685\n00:35:10.980 --> 00:35:13.660\nYou pick and then you have the price.\n\n686\n00:35:13.660 --> 00:35:15.170\nAnd these are basically\nstarting points for you.\n\n687\n00:35:15.170 --> 00:35:17.970\nSo VMware's not cheap, right?\n\n688\n00:35:17.970 --> 00:35:19.350\nBut it's because they're the best.\n\n689\n00:35:19.350 --> 00:35:20.220\nThat's how it works.\n\n690\n00:35:20.220 --> 00:35:24.590\nYes, I know I can go out and I can do a\nbunch of Linux boxes running Zen for free.\n\n691\n00:35:25.860 --> 00:35:30.170\nBut I'm not gonna have the support on the\nback end, and I'm not gonna have a lot of\n\n692\n00:35:30.170 --> 00:35:32.260\nthe bells and whistles that we have here,\nthe automation.\n\n693\n00:35:32.260 --> 00:35:34.590\nAutomation is very difficult\nwith the open source products.\n\n694\n00:35:34.590 --> 00:35:37.990\nThey work really well, but it takes\na lot of work to get that in place.\n\n695\n00:35:37.990 --> 00:35:41.550\nWith VMware, it's all there, and\nwe've got the support infrastructures.\n\n696\n00:35:41.550 --> 00:35:45.130\nThat's kind of how we're able to\njustify it for our IT budget for\n\n697\n00:35:45.130 --> 00:35:46.570\nour line items, and get that going.\n\n698\n00:35:46.570 --> 00:35:48.860\nBut those are some of\nthe products that are out there.\n\n699\n00:35:48.860 --> 00:35:52.220\nAgain, for the exam, just remember\nStandard Enterprise Plus, and\n\n700\n00:35:52.220 --> 00:35:55.210\nthen the with Operations Management Suite,\nthose are kind of the three big\n\n701\n00:35:55.210 --> 00:35:59.290\ndifferentiators that you have\nwhen you go to purchase vSphere.\n\n702\n00:35:59.290 --> 00:36:00.010\nAll right.\n\n703\n00:36:00.010 --> 00:36:05.270\nWes, I think that is a pretty good\nrun down of everything that we need.\n\n704\n00:36:05.270 --> 00:36:09.280\nThere are other products in addition to\nwhat we've seen here in this episode.\n\n705\n00:36:09.280 --> 00:36:11.190\nI focused on the ones\nthat are on the exam.\n\n706\n00:36:11.190 --> 00:36:14.120\nBut just know in real life,\nmy goodness, there are so\n\n707\n00:36:14.120 --> 00:36:18.340\nmany one out there, like vRealize,\nVMware Horizon, just it's so\n\n708\n00:36:18.340 --> 00:36:21.340\nmany different ones that\nprovide different functions.\n\n709\n00:36:21.340 --> 00:36:23.130\nHere, let me just go\nback to VMware's webpage.\n\n710\n00:36:23.130 --> 00:36:24.780\nIf I just float over products, right,\n\n711\n00:36:24.780 --> 00:36:28.200\nwe'll see the big blow out of all\nthe different items that they've got.\n\n712\n00:36:28.200 --> 00:36:31.499\nAnd some of them are pretty neat,\nsome of them you may never need.\n\n713\n00:36:32.952 --> 00:36:37.130\nLike vRealize has some really\nuseful stuff for cloud management.\n\n714\n00:36:37.130 --> 00:36:39.880\nIf have those multiple data centers and\nthey're kind of separate we can actually\n\n715\n00:36:39.880 --> 00:36:43.680\ntie them all together with vRealize,\nthe Cloud Suite, that's part of that also.\n\n716\n00:36:43.680 --> 00:36:47.340\nYou got Horizon which is for\ndesktop virtualization.\n\n717\n00:36:47.340 --> 00:36:50.300\nSo you might have where all of your\nemployees have thin clients instead of\n\n718\n00:36:50.300 --> 00:36:51.630\nfull blown computers.\n\n719\n00:36:51.630 --> 00:36:55.880\nAnd they're able to access their desktop\nhosted on a VMware deployment somewhere,\n\n720\n00:36:55.880 --> 00:36:57.220\nor even from their iPad.\n\n721\n00:36:57.220 --> 00:36:58.830\nThey can pull up their\nWindows machine right there.\n\n722\n00:36:58.830 --> 00:37:00.930\nThey don't actually need a full desktop.\n\n723\n00:37:00.930 --> 00:37:03.050\nOther ones,\nlike their Identity Manager, for\n\n724\n00:37:03.050 --> 00:37:07.560\nmaking it easier to authenticate one user\nname and password everywhere you go to.\n\n725\n00:37:07.560 --> 00:37:12.580\nNSX is their software defined networking\nsuite which is really impressive\n\n726\n00:37:12.580 --> 00:37:13.730\nalso really expensive.\n\n727\n00:37:13.730 --> 00:37:17.850\nSome of the other things\nyou see they've got a whole\n\n728\n00:37:17.850 --> 00:37:21.400\nsoftware defined data center that's a big\ninitiative that's going on right now.\n\n729\n00:37:21.400 --> 00:37:25.035\nThese are all different products\nthat all hook into vSphere.\n\n730\n00:37:25.035 --> 00:37:28.670\nvSphere is that umbrella product\nthat when you do a deployment and\n\n731\n00:37:28.670 --> 00:37:33.050\nyou go all in with VMware,\nyou're becoming a vSphere datacenter, and\n\n732\n00:37:33.050 --> 00:37:36.480\nall of these components hook together, and\nyou manage them all right from vCenter.\n\n733\n00:37:36.480 --> 00:37:38.070\nIt's impressive stuff.\n\n734\n00:37:38.070 --> 00:37:40.220\n>> Don, we appreciate that\nintroduction of vSphere.\n\n735\n00:37:40.220 --> 00:37:41.460\nHopefully, it's eliminated.\n\n736\n00:37:41.460 --> 00:37:45.960\nIf you have any confusion on it, it's good\nthat you were here to help us on that.\n\n737\n00:37:45.960 --> 00:37:46.960\nDo you have anything else?\n\n738\n00:37:46.960 --> 00:37:49.510\nCuz it does look like we're coming to\nthe end of another episode Episode.\n\n739\n00:37:49.510 --> 00:37:51.510\n>> Yeah, and\nI'll post a links to this in the show.\n\n740\n00:37:51.510 --> 00:37:52.980\nDefinitely check out VMWare's website,\n\n741\n00:37:52.980 --> 00:37:55.450\nread through the stuff,\nunderstand the different products.\n\n742\n00:37:55.450 --> 00:37:59.090\nBecause in real life,\nit's all the time where I'll ask somebody,\n\n743\n00:37:59.090 --> 00:38:00.300\nhey what do you use for your hypervisor?\n\n744\n00:38:00.300 --> 00:38:02.420\nAnd they'll say, I use VMWare.\n\n745\n00:38:02.420 --> 00:38:04.960\nAnd I'm like, well, okay,\nall right, I know what you mean.\n\n746\n00:38:04.960 --> 00:38:08.080\nI know that you mean that\nyou use vSphere and ESX.\n\n747\n00:38:08.080 --> 00:38:09.360\nI know that's what you mean.\n\n748\n00:38:09.360 --> 00:38:12.944\nBut VMWare has more than one product,\nso maybe they mean VMWare Fusion,\n\n749\n00:38:12.944 --> 00:38:14.843\nmaybe they mean VMWare Workstation.\n\n750\n00:38:14.843 --> 00:38:17.570\nI don't know,\nbecause they just said VMWare.\n\n751\n00:38:17.570 --> 00:38:19.070\nOn the exam they will be very specific.\n\n752\n00:38:19.070 --> 00:38:22.420\nThey'll mention those products and\nso you need to know what role each\n\n753\n00:38:22.420 --> 00:38:25.030\none performs and if you watch this whole\nseries you're going to see it anyway,\n\n754\n00:38:25.030 --> 00:38:26.710\nso you'll get a good grasp of that.\n\n755\n00:38:26.710 --> 00:38:29.820\nBut don't be one of those people,\nthat says I run VMWare.\n\n756\n00:38:29.820 --> 00:38:31.670\nBecause that means that you're\nthe CEO of the company.\n\n757\n00:38:31.670 --> 00:38:33.940\nRight.\nYou don't run their company.\n\n758\n00:38:33.940 --> 00:38:36.740\nYou use some of the software products,\nand the software products have a name.\n\n759\n00:38:36.740 --> 00:38:38.410\nSo we just need to make\nsure that we know those.\n\n760\n00:38:38.410 --> 00:38:40.860\n>> Well, Don, we thank you for\nhaving that information for us.\n\n761\n00:38:40.860 --> 00:38:42.520\nAnd we appreciate you,\nthe viewer for watching.\n\n762\n00:38:42.520 --> 00:38:43.750\nSo signing out for IT Pro TV.\n\n763\n00:38:43.750 --> 00:38:45.950\n>> I've been your host Wes Bryan.\n\n764\n00:38:45.950 --> 00:38:47.350\n>> And I'm Don Pezet.\n\n765\n00:38:47.350 --> 00:38:53.535\n>> And we'll see you next time.\n\n766\n00:38:53.535 --> 00:38:56.530\n[SOUND]\n\n",
          "vimeoId": "168056695"
        },
        {
          "description": "In this episode Wes and Don demonstrate installing and configuring the VMware ESXi hypervisor. They discusses some of the hardware requirements, installation methods. They walk the viewer through the installation procedures.",
          "length": "2049",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-2-1-installing_the_vsphere_hypervisor-052316-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-2-1-installing_the_vsphere_hypervisor-052316-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-2-1-installing_the_vsphere_hypervisor-052316-1-sm.jpg",
          "title": "Installing the vSphere Hypervisor",
          "transcript": "WEBVTT\n\n1\n00:00:00.016 --> 00:00:10.016\n[MUSIC]\n\n2\n00:00:11.814 --> 00:00:12.940\n>> Welcome back to another\nexciting episode here at ITPRO TV.\n\n3\n00:00:14.990 --> 00:00:17.520\nI'm your host Wes Bryan and\nin today's episode,\n\n4\n00:00:17.520 --> 00:00:20.060\nwe're continuing through\nour series on VMware.\n\n5\n00:00:20.060 --> 00:00:25.040\nMore specifically, we're looking at the\nVMware Certified Professional version 6.\n\n6\n00:00:25.040 --> 00:00:27.480\nAnd joining me in the studios is\nnone other than Mr. Don Pezet.\n\n7\n00:00:27.480 --> 00:00:28.690\nDon, how you doing today, sir?\n\n8\n00:00:28.690 --> 00:00:29.530\n>> I'm doing great, Wes.\n\n9\n00:00:29.530 --> 00:00:32.030\nI'm really excited about this episode\nbecause we're actually gonna get to\n\n10\n00:00:32.030 --> 00:00:34.210\nuse some of the VMware Products.\n\n11\n00:00:34.210 --> 00:00:36.250\nIn our first episode we\ndid a little introduction,\n\n12\n00:00:36.250 --> 00:00:38.480\nwe explained all the different\nproducts that were out there.\n\n13\n00:00:38.480 --> 00:00:41.350\nSo we didn't actually get to use\nany of them, which is kinda lame.\n\n14\n00:00:41.350 --> 00:00:43.900\nSo we're here to fix that right\nhere in this episode, and\n\n15\n00:00:43.900 --> 00:00:47.390\nwe're gonna tackle one of the first steps\nthat you're gonna go through when you\n\n16\n00:00:47.390 --> 00:00:49.720\nimplement a vSphere solution\nin your environment.\n\n17\n00:00:49.720 --> 00:00:52.710\nAnd that is to get your first\nhypervisor up and going.\n\n18\n00:00:52.710 --> 00:00:55.640\nNow a lot of people when think about\nVMware, they think about that hypervisor,\n\n19\n00:00:55.640 --> 00:00:57.870\nthat's that main product that\nwe wanna get it installed and\n\n20\n00:00:57.870 --> 00:01:00.460\nthere's a few things we need to know\nbefore we jump into those hoops.\n\n21\n00:01:00.460 --> 00:01:02.821\nAnd there's a heck of a lot more\nto do once we get past it, but\n\n22\n00:01:02.821 --> 00:01:05.679\ngetting that first hypervisor up is\nprobably the most important step.\n\n23\n00:01:05.679 --> 00:01:08.268\n>> You know, Don, I was gonna call you\nout, you're like we're gonna go ahead and\n\n24\n00:01:08.268 --> 00:01:10.820\ninstall this, we're gonna get this ready,\nbut before we get it installed and\n\n25\n00:01:10.820 --> 00:01:12.521\nget it ready,\n>> [LAUGH]\n\n26\n00:01:12.521 --> 00:01:14.014\n>> We do have to know a little bit about\n\n27\n00:01:14.014 --> 00:01:15.205\nthe system requirements.\n\n28\n00:01:15.205 --> 00:01:16.355\nAre you going to help us out with that?\n\n29\n00:01:16.355 --> 00:01:21.960\n>> Absolutely, and VMware,\nunlike a lot of other vendors out there.\n\n30\n00:01:21.960 --> 00:01:24.600\nWe don't have the name names cuz\nit's pretty much all of them.\n\n31\n00:01:24.600 --> 00:01:27.150\nVMware has some really great\nknowledge based articles.\n\n32\n00:01:27.150 --> 00:01:30.370\nIf you ever go to their website, their\nknowledge base covers all sorts of topics.\n\n33\n00:01:30.370 --> 00:01:34.010\nAnd one of my favorite articles with\nthem is they have a best practice for\n\n34\n00:01:34.010 --> 00:01:38.150\ninstalling vSphere and all of\nthe different components inside of it.\n\n35\n00:01:38.150 --> 00:01:40.910\n>> And so you're not left guessing as to\nwhat you need to do to get this stuff\n\n36\n00:01:40.910 --> 00:01:41.460\nimplemented.\n\n37\n00:01:41.460 --> 00:01:44.570\nAnd I've got their main knowledge\nbase article pulled up right here and\n\n38\n00:01:44.570 --> 00:01:47.300\nI'll post the links in the show notes for\nthis one.\n\n39\n00:01:47.300 --> 00:01:51.470\nBut basically, they walk you through\nall the different things that you need.\n\n40\n00:01:51.470 --> 00:01:55.640\nAnd when you look at the very top of it,\nit's some of the best practices and\n\n41\n00:01:55.640 --> 00:01:58.600\nlinks to all these other ones and\nyou start to get a bit overwhelmed.\n\n42\n00:01:58.600 --> 00:02:00.450\nIt's just a lot of stuff.\n\n43\n00:02:00.450 --> 00:02:02.960\nBut as you continue to read down,\n\n44\n00:02:04.140 --> 00:02:08.180\nyou get right here to some stuff\nthat is just plain English, right.\n\n45\n00:02:08.180 --> 00:02:11.630\nWhat are my ESXI 6.0 system requirements?\n\n46\n00:02:11.630 --> 00:02:15.270\nIf I want to install the hypervisor on a\npiece of hardware, what do I have to have?\n\n47\n00:02:15.270 --> 00:02:18.790\nAll right, well, you've got compatible\nhardware and they talk about system\n\n48\n00:02:18.790 --> 00:02:23.820\ncompatibility, I/O compatibility, storage\ncompatibility and those are just words.\n\n49\n00:02:23.820 --> 00:02:26.080\nOkay, well, what storage is compatible?\n\n50\n00:02:26.080 --> 00:02:26.790\nI don't know.\n\n51\n00:02:26.790 --> 00:02:29.770\nWell they do go through and\nactually lay it out for us and we have\n\n52\n00:02:29.770 --> 00:02:33.940\na true compatibility guide where they\nactually list specific models of hardware.\n\n53\n00:02:33.940 --> 00:02:38.150\nNow if your hardware is not on that list\ndoes that mean you can't run VMware?\n\n54\n00:02:38.150 --> 00:02:39.800\nNo.\nYou can still run\n\n55\n00:02:39.800 --> 00:02:40.680\nit in a lot of scenarios.\n\n56\n00:02:40.680 --> 00:02:43.390\nYou just might not be able to\nget support from VMware on it.\n\n57\n00:02:43.390 --> 00:02:47.970\nSo if I'm trying to install ESX\non some unsupported processor and\n\n58\n00:02:47.970 --> 00:02:51.590\nI have a problem, when I call up VMware\nsupport that's one of the things they're\n\n59\n00:02:51.590 --> 00:02:54.020\ngonna highlight, is well you're\non an unsupported processor.\n\n60\n00:02:54.020 --> 00:02:56.730\nBut they are great about\nsupporting a ton of hardware.\n\n61\n00:02:56.730 --> 00:02:59.240\nSo let's hit the high points\nof what we need, all right.\n\n62\n00:02:59.240 --> 00:03:03.915\nFirst off, you need to have two or\nmore CPU cores.\n\n63\n00:03:03.915 --> 00:03:07.186\nJust right off the bat,\nthey're identifying that hey,\n\n64\n00:03:07.186 --> 00:03:11.220\nif you have a single core, this system\nis not going to be able to cut it.\n\n65\n00:03:11.220 --> 00:03:14.230\nYou need at least two cores and\nin reality you want to have more.\n\n66\n00:03:14.230 --> 00:03:17.930\nYou want to have it as much as possible if\nyou can, to be able to support the load.\n\n67\n00:03:17.930 --> 00:03:18.980\nBut you don't want to overdo it.\n\n68\n00:03:18.980 --> 00:03:20.968\nYou don't want to waste your\nmoney on a ton of CPU cores.\n\n69\n00:03:20.968 --> 00:03:23.210\nBut in today's world,\n\n70\n00:03:23.210 --> 00:03:27.820\nwhen you buy a server two physical CPUs,\nwith four cores each, is common place.\n\n71\n00:03:27.820 --> 00:03:30.360\nThat's usually like the lowest\noption when you buy.\n\n72\n00:03:30.360 --> 00:03:33.080\nAnd then after that,\nyou get into the eight core and\n\n73\n00:03:33.080 --> 00:03:36.230\neven twelve core processors so\nyou can get quite a bit more.\n\n74\n00:03:36.230 --> 00:03:38.620\nDepending on what it is that you purchase.\n\n75\n00:03:38.620 --> 00:03:41.880\nIt does have to be a 64-bit processor.\n\n76\n00:03:41.880 --> 00:03:44.720\nBe careful in this cuz in some of the\ndocumentation they identify it as AMD 64.\n\n77\n00:03:44.720 --> 00:03:48.670\nThat doesn't mean you have to\nrun AMD processors, right.\n\n78\n00:03:48.670 --> 00:03:53.020\nIntel actually licenses the AMD technology\nfor there so when you get a 64-bit\n\n79\n00:03:53.020 --> 00:03:56.300\nIntel or AMD processor it's actually\nusing that same technology.\n\n80\n00:03:56.300 --> 00:04:00.270\nSo you'll normally see Intel processors a\nlot more commonly because of the way they\n\n81\n00:04:00.270 --> 00:04:01.020\nhandle their cache.\n\n82\n00:04:01.020 --> 00:04:03.890\nIt makes it a lot more efficient and\nyou get better performance than AMD.\n\n83\n00:04:03.890 --> 00:04:08.000\nIt is a rare data center that\nhas AMD processors in it.\n\n84\n00:04:08.000 --> 00:04:11.780\nBut all those Intel processors\nare running AMD 64 bit technology so\n\n85\n00:04:11.780 --> 00:04:13.980\nit gets a little confusing.\n\n86\n00:04:13.980 --> 00:04:16.690\nBut we do need to have a 64-bit processor.\n\n87\n00:04:16.690 --> 00:04:19.420\nAnd notice how it says,\nreleased after September of 2006.\n\n88\n00:04:19.420 --> 00:04:24.200\nWhy is that,\nwhat miraculous thing happened in 2006?\n\n89\n00:04:24.200 --> 00:04:28.180\nWell, there's actually several\nthings that occurred back then.\n\n90\n00:04:28.180 --> 00:04:32.010\nAnd in reality there's even some processes\nthat are older that will work just fine.\n\n91\n00:04:32.010 --> 00:04:35.970\nBut basically, some of the big things that\nchanged, are what's listed right after it.\n\n92\n00:04:35.970 --> 00:04:39.240\nThat's when we started getting\nthe No Execute bit, so the NX bit.\n\n93\n00:04:39.240 --> 00:04:41.440\nWhere I described in the first episode,\n\n94\n00:04:41.440 --> 00:04:44.690\nhow a type one hypervisor\nacts as a traffic cop.\n\n95\n00:04:44.690 --> 00:04:48.180\nThat says I'm going to let this guy access\nthe hardware, now I'll let this other guy,\n\n96\n00:04:48.180 --> 00:04:50.860\nwhoop this guy's doing too much,\nlet me throttle him down, well,\n\n97\n00:04:50.860 --> 00:04:53.640\nthey can actually leverage the no\nexecute bit to make that happen.\n\n98\n00:04:53.640 --> 00:04:56.650\nTo say nope, it's not your turn\nto execute, let me stop you.\n\n99\n00:04:56.650 --> 00:04:58.360\nThat's not what that technology\nwas originally designed for.\n\n100\n00:04:58.360 --> 00:05:00.590\nIt was originally designed\nto stop viruses, to say,\n\n101\n00:05:00.590 --> 00:05:03.830\nyou're about to access something you\nshouldn't access, I'm gonna stop you.\n\n102\n00:05:03.830 --> 00:05:07.110\nBut it's leveraged by virtualization\nsoftware and it does a great job.\n\n103\n00:05:07.110 --> 00:05:09.210\nSo we gotta have that support and\n\n104\n00:05:09.210 --> 00:05:14.130\nthat is present in pretty much\nevery processor made since 2006.\n\n105\n00:05:14.130 --> 00:05:16.190\nAnd so, that's why they're kinda\nthrowing that date on there and\n\n106\n00:05:16.190 --> 00:05:18.380\nthey've got the full\ncompatibility guide for it.\n\n107\n00:05:18.380 --> 00:05:19.390\nSo we do need to have that, and\n\n108\n00:05:19.390 --> 00:05:22.620\nnot only do we need to have it,\nit needs to be enabled, right?\n\n109\n00:05:22.620 --> 00:05:26.230\nNot every system has it on by default.\n\n110\n00:05:26.230 --> 00:05:28.400\nI see it with Dell servers all the time.\n\n111\n00:05:28.400 --> 00:05:30.470\nIf you buy a Dell server and\nyou go into their buy house,\n\n112\n00:05:30.470 --> 00:05:35.130\na lot of times the NX bit and\nthe virtualization assistance\n\n113\n00:05:35.130 --> 00:05:37.160\nwill be turned off, and\nyou just need to turn it on.\n\n114\n00:05:37.160 --> 00:05:41.890\nIt's a little button, it's not a big deal\nIt's hardware that's built into the CPU.\n\n115\n00:05:41.890 --> 00:05:45.170\nAnd that's kind of the tricky part,\nis if I buy this server and\n\n116\n00:05:45.170 --> 00:05:48.800\nit doesn't have support for NX,\nI can't add that after the fact.\n\n117\n00:05:48.800 --> 00:05:52.120\nIt's not like a software update,\nit's built into the hardware of the CPU.\n\n118\n00:05:52.120 --> 00:05:54.400\nSo I've gotta make sure my\nprocessor can handle it.\n\n119\n00:05:54.400 --> 00:05:59.350\nAlmost every CPU made today does, but\nit wasn't like that even five years ago.\n\n120\n00:05:59.350 --> 00:06:00.850\nAnd so, you might have hardware,\n\n121\n00:06:00.850 --> 00:06:03.500\nthat you're planning on re-purposing\nin your organization that won't do it.\n\n122\n00:06:03.500 --> 00:06:04.840\nWe bumped into that, right Wes?\n\n123\n00:06:04.840 --> 00:06:06.520\nWith the.\nWhat were the Dells,\n\n124\n00:06:06.520 --> 00:06:07.730\nwe had some old 2850s.\n\n125\n00:06:07.730 --> 00:06:11.675\n>> Yeah that's what it was 2850s and\nyeah, the old Blade server.\n\n126\n00:06:11.675 --> 00:06:12.950\nNo, not Blades, but yeah.\n\n127\n00:06:12.950 --> 00:06:18.240\n>> There were perfectly good servers, but\nthe CPU's didn't have the hardware system\n\n128\n00:06:18.240 --> 00:06:21.880\nand since they didn't have it,\nwe couldn't use it for virtualization.\n\n129\n00:06:21.880 --> 00:06:24.560\nI mean we could use it for Type-2\nhypervisor but who wants tot do theat?\n\n130\n00:06:24.560 --> 00:06:26.190\nSo those were just not suitable servers.\n\n131\n00:06:26.190 --> 00:06:27.140\nWe couldn't reuse them.\n\n132\n00:06:27.140 --> 00:06:30.210\nI think we ended up recycling or\nselling or something.\n\n133\n00:06:30.210 --> 00:06:32.120\nProbably just tossed them, I don't know.\n\n134\n00:06:32.120 --> 00:06:34.265\nI'm sure we recycled them properly.\n\n135\n00:06:34.265 --> 00:06:37.310\n[LAUGH] So they were just gone,\nthat's how it is.\n\n136\n00:06:37.310 --> 00:06:40.160\nYou gotta have the hardware that\ndoes support what you need.\n\n137\n00:06:40.160 --> 00:06:42.300\nBut pretty much everything made\nin the last few years will, so\n\n138\n00:06:42.300 --> 00:06:44.270\nyou're usually covered, but look it up.\n\n139\n00:06:44.270 --> 00:06:45.470\nIt's easy enough to do.\n\n140\n00:06:45.470 --> 00:06:47.750\nSo for example,\nif I don't about my processor I can go and\n\n141\n00:06:47.750 --> 00:06:50.460\nlook it up on Intel's website and\nfind out.\n\n142\n00:06:50.460 --> 00:06:53.740\nIn addition to no execute\nis this next one.\n\n143\n00:06:53.740 --> 00:07:00.320\nWe need 64-bit but\nwe also need Intel VT-x or AMD RVI, right?\n\n144\n00:07:00.320 --> 00:07:03.060\nThose two guys right there,\nif I have an Intel processor,\n\n145\n00:07:03.060 --> 00:07:08.500\nthey have the virtualization technology or\nVT, that gets built into the CPU and\n\n146\n00:07:08.500 --> 00:07:11.220\nhelps it provide that wire\nspeed that we expect to see,\n\n147\n00:07:11.220 --> 00:07:13.510\nthat bare metal speed\nout of our hypervisor.\n\n148\n00:07:13.510 --> 00:07:14.640\nAMD has the same thing.\n\n149\n00:07:14.640 --> 00:07:16.100\nIt used to just be called AMDV.\n\n150\n00:07:16.100 --> 00:07:17.700\nNow it's AMD RVI.\n\n151\n00:07:17.700 --> 00:07:19.660\nAnd so it's gotta have that feature.\n\n152\n00:07:19.660 --> 00:07:24.770\nNow, it's been my experience that\nwith AMD processors, it's always on.\n\n153\n00:07:24.770 --> 00:07:28.650\nBut with Intel processors,\nit can be turned on and off in the BIOS.\n\n154\n00:07:28.650 --> 00:07:32.810\nAnd so If your system doesn't have it, you\nmight just need to go into the BIOS and\n\n155\n00:07:32.810 --> 00:07:33.760\nturn it on.\n\n156\n00:07:33.760 --> 00:07:36.270\nYou might actually have it,\nit's just disabled.\n\n157\n00:07:36.270 --> 00:07:38.000\nOr you might not have it at all.\n\n158\n00:07:38.000 --> 00:07:39.640\nWe definitely need to figure that out.\n\n159\n00:07:39.640 --> 00:07:42.640\nBefore you go and\nbuy that nice shiny new server,\n\n160\n00:07:42.640 --> 00:07:45.560\nrun the CPU through the vendor's website\nto find out whether it's got that support.\n\n161\n00:07:45.560 --> 00:07:46.920\nIt's really important.\n\n162\n00:07:46.920 --> 00:07:51.209\nSo, for example, let's say I wanted\nto install ESX on my laptop, right?\n\n163\n00:07:51.209 --> 00:07:52.239\nI don't want to, that would be bad.\n\n164\n00:07:52.239 --> 00:07:54.407\nBut let's just say I went crazy and\nwanted to do it.\n\n165\n00:07:54.407 --> 00:07:57.565\nWell, I can look at my processor and so\n\n166\n00:07:57.565 --> 00:08:01.830\nI can see that I've got\na 2.8 GHz Intel Core i7.\n\n167\n00:08:01.830 --> 00:08:05.820\nIt's not actually telling me\nthe model of my processor and\n\n168\n00:08:05.820 --> 00:08:06.670\nI kinda need to know that.\n\n169\n00:08:06.670 --> 00:08:08.020\nLet me go into my system report.\n\n170\n00:08:08.020 --> 00:08:11.990\nWe need the model of the processor\nto be able to look it up, and yeah,\n\n171\n00:08:11.990 --> 00:08:13.300\nyou know it doesn't, Apple.\n\n172\n00:08:13.300 --> 00:08:15.240\nApple doesn't like to show you anything,\ndo they?\n\n173\n00:08:15.240 --> 00:08:20.350\nSo I don't see my actual model of my CPU,\nso that'll be a little bit of problem.\n\n174\n00:08:20.350 --> 00:08:25.338\nBut if you know the model of your CPU,\nyou can go to Intel's website, and they've\n\n175\n00:08:25.338 --> 00:08:30.129\ngot this architecture page, where you can\ngo in and look up all sorts of stuff.\n\n176\n00:08:30.129 --> 00:08:34.289\nSo if I punch in that I've got like and\nIntel E8550, I'm making this up,\n\n177\n00:08:34.289 --> 00:08:36.850\nI'm pretty sure that's a processor though.\n\n178\n00:08:36.850 --> 00:08:40.460\nThere it is, so I just made up a number,\nmanaged to hit one.\n\n179\n00:08:40.460 --> 00:08:41.250\nIt's an old one though.\n\n180\n00:08:41.250 --> 00:08:44.160\nI know it's an old one cuz it\nsays it's an Intel Core 2 Duo.\n\n181\n00:08:44.160 --> 00:08:47.280\nSo let's say I've got a server that's\na little older, with Core 2 Duo in it.\n\n182\n00:08:47.280 --> 00:08:49.490\nDoes this support virtualization?\n\n183\n00:08:49.490 --> 00:08:53.010\nWell when you do a search, look for\nlinks that start with arc.intel.com,\n\n184\n00:08:53.010 --> 00:08:56.850\nthat's where they've got all their\nprocessor specifications, and\n\n185\n00:08:56.850 --> 00:08:57.930\nyou can jump in here and find it.\n\n186\n00:08:57.930 --> 00:09:00.600\nThis one, gosh it's old,\nquarter one of 2008,\n\n187\n00:09:00.600 --> 00:09:02.790\nI picked an eight year old processor.\n\n188\n00:09:02.790 --> 00:09:05.790\nSorry guys, but anyhow,\nit'll have what I need.\n\n189\n00:09:05.790 --> 00:09:10.740\nIf I scroll down, we can look, and\nIntel is really good about telling you\n\n190\n00:09:10.740 --> 00:09:14.640\nif it has\nIntel Virtualization Technology VT-x, and\n\n191\n00:09:14.640 --> 00:09:18.140\neven though this is an 8-year\nold processor, it's got it, yes.\n\n192\n00:09:18.140 --> 00:09:19.980\nI could run ESX in this box.\n\n193\n00:09:19.980 --> 00:09:24.220\nAnd as we look for other things there's\nother technologies that are nice to have\n\n194\n00:09:24.220 --> 00:09:26.200\nthat I don't necessarily have to have.\n\n195\n00:09:26.200 --> 00:09:32.670\nSo, this very next one, VTIO or VTD,\nthat's the virtualization for disk IO.\n\n196\n00:09:32.670 --> 00:09:36.320\nIf you want accelerated disk performance,\nyou really want this.\n\n197\n00:09:36.320 --> 00:09:37.940\nBut you don't have to have it.\n\n198\n00:09:37.940 --> 00:09:39.600\nIf you don't have it, it'll still work,\n\n199\n00:09:39.600 --> 00:09:42.590\nit's just your disk performance\nwon't be as great as if you did.\n\n200\n00:09:42.590 --> 00:09:44.460\nWell this processor just\nhappened to have both.\n\n201\n00:09:44.460 --> 00:09:46.000\nSo I'm in pretty good shape there.\n\n202\n00:09:46.000 --> 00:09:48.400\nSo those are some of the things\nthat we need to look at.\n\n203\n00:09:48.400 --> 00:09:50.310\nAnd it's not something you\ncan fix after the fact.\n\n204\n00:09:50.310 --> 00:09:52.520\nIf the CPU doesn't have it,\nit doesn't have it.\n\n205\n00:09:52.520 --> 00:09:54.280\nAnd that's the end of that decision.\n\n206\n00:09:54.280 --> 00:09:56.333\nSo, the next time you shop for\na server and\n\n207\n00:09:56.333 --> 00:10:00.031\nthey give you the five different CPU\noptions, make sure to run them through\n\n208\n00:10:00.031 --> 00:10:03.683\nthe vendor's website to find out which\none gives you that VT-x support.\n\n209\n00:10:03.683 --> 00:10:07.540\nOr if it's AMD you're looking for\nthat AMD-RVI support, right?\n\n210\n00:10:07.540 --> 00:10:08.249\nSo it's gotta have one of those.\n\n211\n00:10:09.390 --> 00:10:12.930\nAll right, after that,\nRAM and disk and network.\n\n212\n00:10:12.930 --> 00:10:14.990\nThose are a little bit harder, right?\n\n213\n00:10:14.990 --> 00:10:18.460\nThe minimum requirements from\nthe VMware are that you need to have\n\n214\n00:10:18.460 --> 00:10:22.230\none network connection, you need to\nhave at least four gigs of RAM, and\n\n215\n00:10:22.230 --> 00:10:26.390\nyou need to have,\nthey say one gig of storage.\n\n216\n00:10:26.390 --> 00:10:29.260\nAll of these are really understated,\nright?\n\n217\n00:10:29.260 --> 00:10:30.370\nYou really need more.\n\n218\n00:10:30.370 --> 00:10:31.900\nSo if we kinda run down the list.\n\n219\n00:10:31.900 --> 00:10:33.270\nI need four gigs of RAM.\n\n220\n00:10:33.270 --> 00:10:37.620\nWell the SX itself will\nconsume about 600 megs of RAM.\n\n221\n00:10:37.620 --> 00:10:40.430\nSo I'm only left with three gigs\nof RAMfor virtual machines,\n\n222\n00:10:40.430 --> 00:10:42.070\nhow many VMs can I fire up?\n\n223\n00:10:42.070 --> 00:10:43.020\nNot a ton.\n\n224\n00:10:43.020 --> 00:10:45.440\nThe more VMs I need,\nthe more memory I need.\n\n225\n00:10:45.440 --> 00:10:46.870\nSame thing goes for disk space.\n\n226\n00:10:46.870 --> 00:10:48.520\nSame thing goes for network adapters.\n\n227\n00:10:48.520 --> 00:10:50.260\nIf I only have one network adapter,\n\n228\n00:10:50.260 --> 00:10:52.950\nhow many VMs can I run off\nthat one network adapter?\n\n229\n00:10:52.950 --> 00:10:55.120\nWell, if they're just DHCP servers or\nsomething,\n\n230\n00:10:55.120 --> 00:10:56.810\nI can probably run a ton of them, right?\n\n231\n00:10:56.810 --> 00:11:00.560\nBut if I've got web application servers\nand file servers and things like that,\n\n232\n00:11:00.560 --> 00:11:01.700\nI'm gonna consume all my bandwidth.\n\n233\n00:11:01.700 --> 00:11:04.040\nSo I want more than one network adapter.\n\n234\n00:11:04.040 --> 00:11:08.280\nOn the disc side, we need to think about\nstorage for the virtual machines, right?\n\n235\n00:11:08.280 --> 00:11:11.670\nAnd if this ESX server\nis connected to a SAN,\n\n236\n00:11:11.670 --> 00:11:14.430\nI need all of that storage on a SAN,\nnot on the server itself.\n\n237\n00:11:14.430 --> 00:11:17.350\nSo yeah,\nI can get by with one gig of storage.\n\n238\n00:11:17.350 --> 00:11:21.600\nBut in reality, if I have any virtual\nmachine stored on that server itself,\n\n239\n00:11:21.600 --> 00:11:23.620\nI'm gonna need more hard drive space for\nthat.\n\n240\n00:11:23.620 --> 00:11:26.160\nThe other thing is the way\nthat VMR upgrades happen.\n\n241\n00:11:26.160 --> 00:11:29.160\nWhen a VMR upgrade happens it tries\nto sort two copies of the VMware,\n\n242\n00:11:29.160 --> 00:11:30.450\nthe old version and the new version.\n\n243\n00:11:30.450 --> 00:11:31.810\nThat way, if something goes wrong,\nit can roll back.\n\n244\n00:11:31.810 --> 00:11:33.750\nYou gotta have space for that.\n\n245\n00:11:33.750 --> 00:11:35.740\nAnd they consume about 600 megs.\n\n246\n00:11:35.740 --> 00:11:40.070\nIt's not a ton, so if you had two gigs,\nor even four gigs, you'd be better off.\n\n247\n00:11:40.070 --> 00:11:42.950\nNow, if you go to by a server today,\n\n248\n00:11:42.950 --> 00:11:46.530\nwhat's the smallest hard drive you\ncan even get is probably 80 gigs.\n\n249\n00:11:46.530 --> 00:11:49.710\nSo, you're going to meet these\nrequirements no problem.\n\n250\n00:11:49.710 --> 00:11:53.090\nWhere you need to recognize is if you\nneed to go beyond those limits and\n\n251\n00:11:53.090 --> 00:11:54.740\na lot of times you will.\n\n252\n00:11:54.740 --> 00:11:57.800\nSo, on the hardware side,\nthe main the main things to watch out for\n\n253\n00:11:57.800 --> 00:11:59.350\nthough are the CPU features.\n\n254\n00:11:59.350 --> 00:12:04.940\nYou need to have virtualization assistance\nin there and ideally the disk I/O too.\n\n255\n00:12:04.940 --> 00:12:08.510\n>> So you would say, maybe Don,\nthe minimum recommended requirements\n\n256\n00:12:08.510 --> 00:12:14.090\nare the painfully slow requirements\nversus what is recommended.\n\n257\n00:12:14.090 --> 00:12:17.720\nIt might be something that's gonna be\nbetter for the production environment.\n\n258\n00:12:17.720 --> 00:12:20.890\n>> Absolutely, on their website,\nwhen they list the minimum requirements,\n\n259\n00:12:20.890 --> 00:12:23.580\nit's the minimum to get ESX up and\nrunning.\n\n260\n00:12:23.580 --> 00:12:27.260\nNot necessarily to use it,\njust to get it up and running.\n\n261\n00:12:27.260 --> 00:12:30.330\nThen everything else is something\nthat you tack on top of it, and\n\n262\n00:12:30.330 --> 00:12:31.950\nthey can't guess how much that is,\nand that's why they leave it.\n\n263\n00:12:31.950 --> 00:12:33.580\nSo just be careful with that.\n\n264\n00:12:33.580 --> 00:12:36.440\nOn the exam they want you to know\nthe minimums, but in real life land,\n\n265\n00:12:36.440 --> 00:12:37.640\nyou're gonna need to go well beyond that.\n\n266\n00:12:37.640 --> 00:12:40.460\nI think we're probably all use to\nthat from pretty much every other\n\n267\n00:12:40.460 --> 00:12:41.330\nsoftware product ever.\n\n268\n00:12:41.330 --> 00:12:43.280\nSo [LAUGH] it's not uncommon.\n\n269\n00:12:44.450 --> 00:12:48.120\nAll right, now, assuming that our hardware\nmeets the requirements, what happens next?\n\n270\n00:12:48.120 --> 00:12:51.030\nWell, we go and we buy VMware,\nright, or vSphere.\n\n271\n00:12:51.030 --> 00:12:53.080\nWe gotta go and buy the vSphere suite or\n\n272\n00:12:53.080 --> 00:12:56.500\nat least buy ESX Foundation to\nbe able to get the ESX products.\n\n273\n00:12:56.500 --> 00:12:58.330\nAnd one way or another, you gotta buy it.\n\n274\n00:12:58.330 --> 00:13:01.730\nAnd when you buy it,\nthey're gonna give you an ISO image.\n\n275\n00:13:01.730 --> 00:13:05.140\nSo it's just an image and it's rare these\ndays that they actually send you a disk.\n\n276\n00:13:05.140 --> 00:13:09.020\nAnd you'd need to take that iso image and\nburn it to a CD.\n\n277\n00:13:09.020 --> 00:13:09.960\nIt does fit on a CD.\n\n278\n00:13:09.960 --> 00:13:13.450\nYou could burn it to a DVD too,\nit's fine or even move it to a USB stick.\n\n279\n00:13:13.450 --> 00:13:15.660\nYou can make a bootable USB key for it.\n\n280\n00:13:15.660 --> 00:13:17.910\nAnd you're gonna plug that\ninto your new system and\n\n281\n00:13:17.910 --> 00:13:19.430\nyou're gonna hit the old\npower button on it.\n\n282\n00:13:19.430 --> 00:13:20.840\nAnd when you hit the power button,\n\n283\n00:13:20.840 --> 00:13:23.860\nit's gonna boot from that media and\nit's gonna walk you through the installer.\n\n284\n00:13:23.860 --> 00:13:26.106\nAnd the installer is\nreally straightforward,\n\n285\n00:13:26.106 --> 00:13:29.247\nthere's not a whole heck of a lot to\nit because at the end of the day,\n\n286\n00:13:29.247 --> 00:13:32.356\nwhat it's doing is putting a hyper\nvisor right on the bare metal.\n\n287\n00:13:32.356 --> 00:13:35.669\nAnd the hyper visor is running\non a customized version of Linux\n\n288\n00:13:35.669 --> 00:13:40.770\nthat is stripped down to the bare minimum\nfeatures needed to power the hyper visor.\n\n289\n00:13:40.770 --> 00:13:43.710\nThere's no GOI,\nthere's no fancy bells and whistles.\n\n290\n00:13:43.710 --> 00:13:47.470\nIt is just the engine being\nloaded right onto that hardware.\n\n291\n00:13:47.470 --> 00:13:50.170\nAnd from there,\nwe'll have to remotely manage everything.\n\n292\n00:13:50.170 --> 00:13:53.310\nAnd since it's just the bare\nminimum going on the hardware,\n\n293\n00:13:53.310 --> 00:13:56.180\nthere's not a lot to install so\nthe installation is super simple.\n\n294\n00:13:56.180 --> 00:14:01.680\nIf you install Windows or Ubuntu or even\nMac OS, it's gonna take you half an hour,\n\n295\n00:14:01.680 --> 00:14:04.150\nright, cuz you gotta copy all\nthat junk and get it ready.\n\n296\n00:14:04.150 --> 00:14:07.270\nVMware, we can install in a matter of\nminutes cuz it's very, very small.\n\n297\n00:14:07.270 --> 00:14:09.930\nAnd so you can have it up and\ngoing in no time.\n\n298\n00:14:09.930 --> 00:14:14.920\nSo If we deploy it,\nwe can do an interactive installation\n\n299\n00:14:14.920 --> 00:14:18.850\nwhere I put that disc in, I push\nthe power and I start walking through it.\n\n300\n00:14:18.850 --> 00:14:19.920\nYou can also do an automated one.\n\n301\n00:14:19.920 --> 00:14:24.410\nWe're gonna see it later on in the series\nthough, and auto deploy, what if you work\n\n302\n00:14:24.410 --> 00:14:26.765\nfor company company and you just\nstarted your virtualization initiative.\n\n303\n00:14:26.765 --> 00:14:30.626\nAnd they say all right, Don,\nwe need 100 hosts fired up so\n\n304\n00:14:30.626 --> 00:14:33.748\nthat we can move 1000\nVMs over to them right.\n\n305\n00:14:33.748 --> 00:14:35.385\n10 VMs per host.\n\n306\n00:14:35.385 --> 00:14:38.305\nSo I need to bring up 100 hosts.\n\n307\n00:14:38.305 --> 00:14:40.275\nI got to go to 100 servers and\nput a disk in.\n\n308\n00:14:40.275 --> 00:14:42.835\nAnd push the power button and\nhit next a few times.\n\n309\n00:14:42.835 --> 00:14:45.520\nIt's not that bad but it still takes time.\n\n310\n00:14:45.520 --> 00:14:48.250\nIf I'm an hourly employee I love it, but\nif I'm a salary employee, I hate it.\n\n311\n00:14:48.250 --> 00:14:49.980\nI want it to go as fast as possible.\n\n312\n00:14:49.980 --> 00:14:51.800\nAuto deploy can solve that.\n\n313\n00:14:51.800 --> 00:14:56.140\nWith auto deploy, you can preprovision all\nof your systems and then you can go and\n\n314\n00:14:56.140 --> 00:14:59.160\nboot them off the network and\ninstall ESX on them.\n\n315\n00:14:59.160 --> 00:15:02.400\nYou can get them fired up and connected\nand centrally managed in no time.\n\n316\n00:15:02.400 --> 00:15:04.470\nSo if you're doing a bulk deployment,\n\n317\n00:15:04.470 --> 00:15:07.420\nthe auto deploy solution\ncomes in really really handy.\n\n318\n00:15:07.420 --> 00:15:08.410\nBut if it's a small solution,\n\n319\n00:15:08.410 --> 00:15:12.040\nif you're just doing one of two servers,\nit's a lot faster just to do it hand.\n\n320\n00:15:12.040 --> 00:15:14.280\nBecause you not having to set up all\nthat centralized infrastructure for\n\n321\n00:15:14.280 --> 00:15:15.210\nAuto Deploy.\n\n322\n00:15:15.210 --> 00:15:17.090\nAuto Deploy is not that hard,\nbut it does take time.\n\n323\n00:15:17.090 --> 00:15:19.339\nAnd it only makes sense if\nyou're doing a large deployment.\n\n324\n00:15:20.860 --> 00:15:22.360\nAll right, so after that,\n\n325\n00:15:23.520 --> 00:15:27.350\nnow we're kind of to that point where\nwe know our hardware supports ESX.\n\n326\n00:15:27.350 --> 00:15:28.570\nI'm ready to install it.\n\n327\n00:15:28.570 --> 00:15:31.200\nI might need to add some additional\nhardware to support my VMs.\n\n328\n00:15:31.200 --> 00:15:34.970\nI might need some additional RAM,\nadditional disk storage, whatever But\n\n329\n00:15:34.970 --> 00:15:38.280\nI kind of make sure that\nI have that in check.\n\n330\n00:15:38.280 --> 00:15:43.210\nI need to boot into my BIOS to check and\nmake sure if I have Intel.\n\n331\n00:15:43.210 --> 00:15:46.832\nIntel VTX is turned on and\nVTD and all those other things.\n\n332\n00:15:46.832 --> 00:15:48.907\nIf I want to use those they\nneed to be turned on in BIOS.\n\n333\n00:15:48.907 --> 00:15:52.640\nVSX can't change your BIOS for\nyou so you got to do it yourself.\n\n334\n00:15:52.640 --> 00:15:55.273\nSo make sure you go in and\nenable those settings.\n\n335\n00:15:55.273 --> 00:15:59.593\nWhile you're in there,\nI'm gonna stir up the pot here.\n\n336\n00:15:59.593 --> 00:16:05.665\nI have this comment I make every time I do\na show like this about hyper-threading and\n\n337\n00:16:05.665 --> 00:16:10.280\nhow I always turn off\nhyper-threading on ESX servers.\n\n338\n00:16:10.280 --> 00:16:13.270\nAnd I've had a number of viewers over\nthe years shoot me emails and say, Don,\n\n339\n00:16:13.270 --> 00:16:14.200\nwhat the heck are you talking about?\n\n340\n00:16:14.200 --> 00:16:15.600\nWhy would you turn off hyper-threading?\n\n341\n00:16:15.600 --> 00:16:17.100\nHyper-threading's awesome.\n\n342\n00:16:17.100 --> 00:16:22.460\nAnd my answer is hyper-threading\nis awesome when it works.\n\n343\n00:16:22.460 --> 00:16:26.230\nAnd in a virtualized environment,\nhyper-threading rarely works.\n\n344\n00:16:26.230 --> 00:16:29.100\nSo, let's talk about hyper-threading\nreally quick for a minute.\n\n345\n00:16:29.100 --> 00:16:31.490\nIn the Intel world,\nwe have hyper-threading.\n\n346\n00:16:31.490 --> 00:16:36.810\nWhere you might have four cores,\nbut Intel says you have eight.\n\n347\n00:16:36.810 --> 00:16:40.570\nFour real ones and four virtual ones,\nfour hyper threaded cores, all right?\n\n348\n00:16:40.570 --> 00:16:43.390\nAnd what they're doing, is they're saying,\ninside of a core, you've got transistors.\n\n349\n00:16:43.390 --> 00:16:45.110\nLots of them, millions of transistors.\n\n350\n00:16:45.110 --> 00:16:47.345\nI think some of them have billions\nof transistors now, right Wes?\n\n351\n00:16:47.345 --> 00:16:48.080\n>> Mm-hm.\n\n352\n00:16:48.080 --> 00:16:50.340\n>> So, some of them have huge\namounts of transistors in there.\n\n353\n00:16:50.340 --> 00:16:53.578\nAnd when you're doing\na mathematical operation,\n\n354\n00:16:53.578 --> 00:16:56.297\nit doesn't use every single transistor.\n\n355\n00:16:56.297 --> 00:17:00.870\nIn fact, sometimes it uses as few as half,\neven less.\n\n356\n00:17:00.870 --> 00:17:03.710\nSo all the other transistors\nare sitting there doing nothing.\n\n357\n00:17:03.710 --> 00:17:07.870\nWell if I have one task hit the CPU and\n\n358\n00:17:07.870 --> 00:17:13.620\nthen another task right behind it,\nsometimes the two tasks are so\n\n359\n00:17:13.620 --> 00:17:16.770\ndifferent that they don't\noverlap transistors at all.\n\n360\n00:17:16.770 --> 00:17:19.860\nAnd I can push both of them through at\nthe same time cuz they're using separate\n\n361\n00:17:19.860 --> 00:17:21.190\ntransistors.\n\n362\n00:17:21.190 --> 00:17:22.800\nOther times they overlap a little bit.\n\n363\n00:17:22.800 --> 00:17:24.620\nAnd then one's got to wait for\nthe other, right?\n\n364\n00:17:24.620 --> 00:17:25.550\nSo now we have queuing.\n\n365\n00:17:25.550 --> 00:17:28.400\nOne happens, it finishes and\nthe second one happens.\n\n366\n00:17:28.400 --> 00:17:34.080\nBut if they're different enough then they\nmight be able to run at the same time.\n\n367\n00:17:34.080 --> 00:17:37.320\nSo the thing is sometimes\n\n368\n00:17:37.320 --> 00:17:40.440\nyou get as if you had eight cores\neven though you've only got four.\n\n369\n00:17:40.440 --> 00:17:41.740\nAnd that's really cool, that's awesome.\n\n370\n00:17:41.740 --> 00:17:43.470\nAnd that's the cool thing\nabout hyper-threading.\n\n371\n00:17:43.470 --> 00:17:45.050\nSometimes you don't.\n\n372\n00:17:45.050 --> 00:17:49.590\nAnd in a virtualized environment,\nso many of your calls are the same.\n\n373\n00:17:49.590 --> 00:17:54.040\nWhen I have ten VMs that\nare all running Red Hat Linux.\n\n374\n00:17:54.040 --> 00:17:57.460\nA lot of their core calls that they're\ndoing talking to OS are identical.\n\n375\n00:17:57.460 --> 00:17:59.010\nIt's a lot of the same operations.\n\n376\n00:17:59.010 --> 00:18:01.530\nIf I have ten web servers that\nI'm load balancing across.\n\n377\n00:18:01.530 --> 00:18:03.420\nA lot of what they're doing is identical.\n\n378\n00:18:03.420 --> 00:18:06.350\nI don't get a great benefit out\nof hyper-threading on that.\n\n379\n00:18:06.350 --> 00:18:10.360\nAnd worse, it makes it really hard for\nme to measure performance.\n\n380\n00:18:10.360 --> 00:18:14.420\nBecause I might be looking at it and\nsaying, hey I got 80 CPUs and\n\n381\n00:18:14.420 --> 00:18:16.270\nI'm only at 50% utilization.\n\n382\n00:18:16.270 --> 00:18:18.350\nI've got plenty of extra room.\n\n383\n00:18:18.350 --> 00:18:23.750\nWhen in reality, I've only got four CPUs,\nthey're completely pegged out 100% and\n\n384\n00:18:23.750 --> 00:18:28.630\nall the calls are identical enough that it\ncan't use the hyper threaded processors.\n\n385\n00:18:28.630 --> 00:18:34.880\nSo I thought I had 50% space available,\nwhich is not a red flag, hey, I got 50%.\n\n386\n00:18:34.880 --> 00:18:37.870\nRunning at 50% utilization\nis a great place to be.\n\n387\n00:18:37.870 --> 00:18:39.770\nBut in reality I'm running at 100%.\n\n388\n00:18:39.770 --> 00:18:42.074\nAnd I'm in a bad place and things\nare running slower than they should be.\n\n389\n00:18:42.074 --> 00:18:44.293\nSo hyper-threading makes\nit hard to monitor and\n\n390\n00:18:44.293 --> 00:18:46.140\nyou don't get a ton of benefit out of it.\n\n391\n00:18:46.140 --> 00:18:49.660\nSo in my world hyper-threading\nequals risk, and\n\n392\n00:18:49.660 --> 00:18:52.470\nso I turn off hyper-threading and\nI tell other people to do it too.\n\n393\n00:18:52.470 --> 00:18:54.540\nOn your workstation, fine do it.\n\n394\n00:18:54.540 --> 00:18:57.310\nOn dedicated servers,\nfine do it, whatever.\n\n395\n00:18:57.310 --> 00:19:00.720\nOn your virtualization hosts,\nit's a mess, right.\n\n396\n00:19:02.350 --> 00:19:05.120\nFinally, I got it where\n\n397\n00:19:05.120 --> 00:19:07.880\nI was able to find documentation from\nVMWare where they backed me up on this.\n\n398\n00:19:07.880 --> 00:19:11.433\nSo I'll post a link to this on the show\nbecause some people don't believe me.\n\n399\n00:19:11.433 --> 00:19:14.219\nBut where is it, here.\n\n400\n00:19:14.219 --> 00:19:19.430\nSo this is on VMWare's website where\nthey've got hyper-threading and ESX iHost.\n\n401\n00:19:19.430 --> 00:19:22.675\nAnd basically what they do is detail\nexactly what I was just talking about,\n\n402\n00:19:22.675 --> 00:19:26.073\nso they talk about CPU 0 and 1 and how\nsometimes you get some great resources,\n\n403\n00:19:26.073 --> 00:19:27.119\nsometimes you don't.\n\n404\n00:19:27.119 --> 00:19:31.936\nSo consider your resource management\nneeds before you enable CPU and\n\n405\n00:19:31.936 --> 00:19:34.710\ninfinity in using hyper-threading.\n\n406\n00:19:34.710 --> 00:19:38.620\nBe careful because you don't always\nget the best out of it, right.\n\n407\n00:19:38.620 --> 00:19:40.760\nSo Even VMWare acknowledges this,\n\n408\n00:19:40.760 --> 00:19:43.460\nit's usually a good idea to turn that off,\nright?\n\n409\n00:19:43.460 --> 00:19:47.720\nIf you leave it on, make sure you adjust\nany of your monitoring to reflect that.\n\n410\n00:19:47.720 --> 00:19:50.080\nSo make sure that if\nhyper-threading is on and\n\n411\n00:19:50.080 --> 00:19:54.570\nyou're running at 50% CPU, you recognize\nthat that might actually be 100%.\n\n412\n00:19:54.570 --> 00:19:57.600\nYou've gotta be careful, so you've gotta\nset your metrics a little bit different.\n\n413\n00:19:57.600 --> 00:20:02.090\nSo, while you're in the BIOS,\nwhile you're turning on VTX and VTD, and\n\n414\n00:20:02.090 --> 00:20:06.390\nthe no execute bit and all the those guys,\nwhile you're turning that stuff on, which\n\n415\n00:20:06.390 --> 00:20:09.730\nare probably already on, consider turning\noff hyper-threading while you're in there.\n\n416\n00:20:09.730 --> 00:20:10.300\nAll right.\n\n417\n00:20:10.300 --> 00:20:10.950\nYou don't have to.\n\n418\n00:20:10.950 --> 00:20:12.710\nI'm not twisting your arm, but I do.\n\n419\n00:20:13.980 --> 00:20:17.760\nAll right, after that, now you boot\noff that CD and you do the install and\n\n420\n00:20:17.760 --> 00:20:20.600\nit looks like this.\n\n421\n00:20:20.600 --> 00:20:23.121\nSo when you boot off of that CD you're\ngonna see this screen right here.\n\n422\n00:20:23.121 --> 00:20:27.071\nIt is not flashy and pretty and crazy,\nit's a text based installer because\n\n423\n00:20:27.071 --> 00:20:30.495\nremember this is the bare minimal\nto get the system up and going.\n\n424\n00:20:30.495 --> 00:20:33.720\nAnd so when I look at it,\nI see I am booting off of my ESXI disc.\n\n425\n00:20:33.720 --> 00:20:36.680\nI can do the standard installer or\nI can boot from my local disk.\n\n426\n00:20:36.680 --> 00:20:38.790\nI'm gonna do the standard installer.\n\n427\n00:20:38.790 --> 00:20:39.900\nAnd then I'm gonna get this screen.\n\n428\n00:20:39.900 --> 00:20:43.180\nNow it's text based,\neverything here is gonna be text based.\n\n429\n00:20:43.180 --> 00:20:44.177\nAnd so I'm gonna see it start to boot.\n\n430\n00:20:44.177 --> 00:20:47.437\nAnd it's booting that modified version of\n\n431\n00:20:47.437 --> 00:20:52.180\nLinux if I can get my little\nstatus bar to stop coming up.\n\n432\n00:20:52.180 --> 00:20:54.990\nThen we can see that little modified\nversion of Linux is copying those files\n\n433\n00:20:54.990 --> 00:20:56.430\nover and kind of getting this running it.\n\n434\n00:20:56.430 --> 00:20:59.440\nWhen I say copying it over, it's creating\na RAM drive and copying it to RAM.\n\n435\n00:20:59.440 --> 00:21:02.130\nIt's not actually writing\nit to the disk just yet.\n\n436\n00:21:02.130 --> 00:21:08.062\nAnd so when it boots, we get a standard\nscreen and it's recognizing my CPU.\n\n437\n00:21:08.062 --> 00:21:11.115\nNow I can actually see my CPU,\nan i7-4558U.\n\n438\n00:21:11.115 --> 00:21:13.750\nThat's what I'm actually running,\nso I should've looked that up.\n\n439\n00:21:13.750 --> 00:21:16.540\nBut it's got 4 gigs of RAM, so\nI meet the minimum requirements.\n\n440\n00:21:16.540 --> 00:21:19.500\nI'm not gonna be able to have a ton\nof VMs, but I've at least got that.\n\n441\n00:21:19.500 --> 00:21:21.170\nAnd it's booting up, right?\n\n442\n00:21:21.170 --> 00:21:22.590\nNow it's booting up the installer but\n\n443\n00:21:22.590 --> 00:21:25.890\nthis is much like what it would look\nlike when it's actually boots TSX.\n\n444\n00:21:25.890 --> 00:21:27.970\nAnd then it's gonna ask me\na handful of questions.\n\n445\n00:21:27.970 --> 00:21:30.100\nWhat hard drive to install and so on.\n\n446\n00:21:30.100 --> 00:21:33.680\nBecause when I install it, I might be\ninstalling it to a hard drive on this\n\n447\n00:21:33.680 --> 00:21:37.830\nmachine or I might be installing\nit to a hard drive on a.\n\n448\n00:21:37.830 --> 00:21:40.460\nAnd then that way,\nit's booting off the from this machine.\n\n449\n00:21:40.460 --> 00:21:42.644\nAnd that way, if I've ever had a failure,\nI could swap out this entire server.\n\n450\n00:21:42.644 --> 00:21:45.593\nAnd connect to the same drives\non the SAN and off it goes.\n\n451\n00:21:45.593 --> 00:21:47.115\nWe don't lose any data.\n\n452\n00:21:47.115 --> 00:21:49.961\nSo easy enough to kind of\nrecover from things like that.\n\n453\n00:21:49.961 --> 00:21:53.850\nBut this is booting up, and you'll see\nit's got a few different things up here.\n\n454\n00:21:53.850 --> 00:21:56.370\nWe see VMware ESXi, right.\n\n455\n00:21:56.370 --> 00:21:58.040\nBecause that's the name of the engine.\n\n456\n00:21:58.040 --> 00:22:01.920\nI said on the exam it would probably be\ncalled the VMWare vSphere Hypervisor or\n\n457\n00:22:01.920 --> 00:22:03.760\nthe VMVisor, but\n\n458\n00:22:03.760 --> 00:22:08.670\nhere they still call it ESXi and it's part\nof the VMWare virtual platform, right.\n\n459\n00:22:08.670 --> 00:22:11.840\nSo, some of that different\nterminology that we see.\n\n460\n00:22:11.840 --> 00:22:14.550\nBut it's gonna boot up and\nthen we'll start that installer.\n\n461\n00:22:14.550 --> 00:22:16.690\nOnce the install is finished,\n\n462\n00:22:16.690 --> 00:22:21.490\nit's gonna drop me at a screen that has\nvery basic functionality, all right.\n\n463\n00:22:21.490 --> 00:22:24.470\nIt's gonna have a URL for\nme to browse to manage the system.\n\n464\n00:22:24.470 --> 00:22:25.670\nThat's where the real functionality is.\n\n465\n00:22:25.670 --> 00:22:29.440\nAnd it's gonna have the ability for\nme to drop to a shell.\n\n466\n00:22:29.440 --> 00:22:32.950\nSo I can do some basic shell management of\nthe system, if I needed to update things.\n\n467\n00:22:32.950 --> 00:22:34.920\nBut that's really about it.\n\n468\n00:22:34.920 --> 00:22:36.800\nThere's not a heck of a lot more to do.\n\n469\n00:22:36.800 --> 00:22:39.440\nWhen we get to the security episode,\nwe're gonna learn about how to put it in\n\n470\n00:22:39.440 --> 00:22:42.290\nlockdown mode where you can't do\nanything from here at the console.\n\n471\n00:22:42.290 --> 00:22:44.580\nWhere everything has to\nbe done from vCenter.\n\n472\n00:22:44.580 --> 00:22:47.460\nAnd that's really useful if you don't\nhave physical control of the server.\n\n473\n00:22:47.460 --> 00:22:48.840\nIf it's out at a remote location and\n\n474\n00:22:48.840 --> 00:22:50.039\nyou're worried about\nsomebody getting to it.\n\n475\n00:22:51.100 --> 00:22:52.810\nAll right, so here's the actual installer.\n\n476\n00:22:52.810 --> 00:22:55.170\nAnd so\nit's just prompting me if I wanna install.\n\n477\n00:22:55.170 --> 00:22:57.850\nI'll just hit Enter, and\na good old license agreement.\n\n478\n00:22:57.850 --> 00:22:58.600\nWe've got to do that.\n\n479\n00:23:00.130 --> 00:23:01.385\nSend in my, whoops.\n\n480\n00:23:01.385 --> 00:23:05.715\nI'm actually in a VMWare\nvirtualization machine, so\n\n481\n00:23:05.715 --> 00:23:08.641\nI've got to send F11 the hard way.\n\n482\n00:23:08.641 --> 00:23:09.670\nThere we go.\n\n483\n00:23:10.780 --> 00:23:12.850\nAnd so now it's scanning for\navailable devices.\n\n484\n00:23:12.850 --> 00:23:14.570\nThis is where it's gonna check.\n\n485\n00:23:14.570 --> 00:23:16.870\nIt's gonna say, do you have VTX?\n\n486\n00:23:16.870 --> 00:23:18.160\nDo you have hard drives?\n\n487\n00:23:18.160 --> 00:23:19.150\nDo you have memory?\n\n488\n00:23:19.150 --> 00:23:20.930\nIt's gonna look for those things.\n\n489\n00:23:20.930 --> 00:23:25.120\nBecause if you don't have VTX turned on,\nin a moment it would throw up an error.\n\n490\n00:23:25.120 --> 00:23:28.640\nRight there, if I was on a 32-bit system\nI would have gotten an error right away,\n\n491\n00:23:28.640 --> 00:23:29.730\nit stops right away.\n\n492\n00:23:29.730 --> 00:23:34.646\nThe VTX one, it'll actually get pretty far\nthrough the install before it finally dies\n\n493\n00:23:34.646 --> 00:23:38.369\nout and says, hey you're on but\nyou can't run anything else.\n\n494\n00:23:38.369 --> 00:23:41.945\nIf I didn't have VTD,\nthen it would let me install and\n\n495\n00:23:41.945 --> 00:23:45.770\nI can have 32 bit VMs when\nI couldn't have 64 bit VMs.\n\n496\n00:23:45.770 --> 00:23:50.108\nSo there's different features that we have\nor don't have based on the hardware, so\n\n497\n00:23:50.108 --> 00:23:53.180\nyou really need to have all the hardware.\n\n498\n00:23:53.180 --> 00:23:56.520\nAll right, so it's recognizing that\nI've got two hard drives in this system.\n\n499\n00:23:56.520 --> 00:23:58.915\nNow, notice how it's showing, oops.\n\n500\n00:23:58.915 --> 00:24:00.960\n>> [LAUGH]\n>> Notice how I can't control my mouse?\n\n501\n00:24:00.960 --> 00:24:03.300\nNotice how it's showing my\ntwo hard drives, right, so\n\n502\n00:24:03.300 --> 00:24:05.860\nI've got a 40 gig hard drive and\na 500 gig hard drive.\n\n503\n00:24:05.860 --> 00:24:09.860\nThis is where it's gonna install\nthe operating system for ESX.\n\n504\n00:24:09.860 --> 00:24:13.680\nI have a second hard drive where I might\nput VMs, or I might even have a SAN.\n\n505\n00:24:13.680 --> 00:24:16.900\nSee how it says remote,\nthat's where my SAN drives would show up.\n\n506\n00:24:16.900 --> 00:24:21.160\nAnd you might have VMware virtual SANs or\nVSANs that turn up in there.\n\n507\n00:24:21.160 --> 00:24:23.300\nI don't have any connected, and\nso it doesn't show that, but\n\n508\n00:24:23.300 --> 00:24:24.250\nthey would show up here.\n\n509\n00:24:24.250 --> 00:24:27.210\nYou can install to a SAN drive,\nthat's fine.\n\n510\n00:24:27.210 --> 00:24:30.660\nAnd it gives you some great\nflexibility in swapping out servers.\n\n511\n00:24:30.660 --> 00:24:33.770\nAll right, but I'm going to go ahead and\npick my 40 gig hard drive to install.\n\n512\n00:24:33.770 --> 00:24:37.870\nI'll stick with English because that's the\nlanguage that I'm closest to mastering.\n\n513\n00:24:37.870 --> 00:24:39.000\nAnd now I need to pick a password.\n\n514\n00:24:39.000 --> 00:24:42.540\nYou going to have a root user account\nby default and it needs a password set.\n\n515\n00:24:42.540 --> 00:24:45.350\nWe can always change it later, but\nfor right now we need this one\n\n516\n00:24:45.350 --> 00:24:48.270\nbecause we'll need it when we\ngo to attach this to vCenter.\n\n517\n00:24:48.270 --> 00:24:54.220\nSo I'll punch in a password and\nthere we go.\n\n518\n00:24:54.220 --> 00:24:57.980\nAnd passwords do match, which is handy and\nthen we'll move forward.\n\n519\n00:24:57.980 --> 00:25:01.010\nNow it's just doing another scan of\nthe system, making sure the partitions\n\n520\n00:25:01.010 --> 00:25:04.695\nare ready to able to the right, cuz I told\nit the drive that I wanted to use, and\n\n521\n00:25:04.695 --> 00:25:08.535\nnow it's kind of giving me that\nlast chance to back out, right?\n\n522\n00:25:08.535 --> 00:25:11.675\nAt this point it hasn't actually\nmessed with the drives.\n\n523\n00:25:11.675 --> 00:25:14.566\nAs soon as I hit install,\nit's gonna format that drive, and\n\n524\n00:25:14.566 --> 00:25:20.257\nnow Now we're gonna have\na little bit of data loss, right.\n\n525\n00:25:20.257 --> 00:25:23.837\nSo now it's wiping that drive and\nit's starting to write to it.\n\n526\n00:25:23.837 --> 00:25:26.217\nAnd it'll be done pretty quick.\n\n527\n00:25:26.217 --> 00:25:29.850\nSee how we're already 28% done And that's\ncuz the operating system is so small.\n\n528\n00:25:29.850 --> 00:25:33.500\nWhen you download the ISO image,\nthe ISO image is only 350 megs, so\n\n529\n00:25:33.500 --> 00:25:37.270\nit's really small but once it's extracted\nit ends up being like 600 megs on the hard\n\n530\n00:25:37.270 --> 00:25:40.320\ndrive and\nthat's all it needs to get the job done.\n\n531\n00:25:40.320 --> 00:25:43.700\nThat's kind of the amazing part\nabout this, but it's so small.\n\n532\n00:25:43.700 --> 00:25:46.460\nBut it doesn't have any UI for\nme to use on the machine so\n\n533\n00:25:46.460 --> 00:25:48.900\nthat's why I wouldn't normally\nwant to install this on my laptop.\n\n534\n00:25:48.900 --> 00:25:52.330\nNotice how I was installing this\nis in a virtual machine itself.\n\n535\n00:25:52.330 --> 00:25:53.920\nLet's talk about that while we wait.\n\n536\n00:25:53.920 --> 00:25:58.450\nSo what I'm doing is called virtualization\nnesting, right, or nested VMs.\n\n537\n00:25:58.450 --> 00:26:01.640\nIs that I've got a virtual\nmachine running ESX.\n\n538\n00:26:01.640 --> 00:26:03.980\nAnd in theory I could run\nvirtual machines in that.\n\n539\n00:26:03.980 --> 00:26:08.930\nSo now I've got virtual machines\nrunning on top of a virtual machine.\n\n540\n00:26:08.930 --> 00:26:11.490\nSo I've got two layers of\nvirtualization.It's like that movie,\n\n541\n00:26:11.490 --> 00:26:12.080\nInception.\n\n542\n00:26:12.080 --> 00:26:14.780\nYou go into a dream, of a dream,\nof a dream, or something.\n\n543\n00:26:14.780 --> 00:26:15.640\nThat's kind of what this.\n\n544\n00:26:17.090 --> 00:26:19.060\nRule number one about\ndoing what I'm doing,\n\n545\n00:26:19.060 --> 00:26:21.000\nnot a good idea in production, right?\n\n546\n00:26:21.000 --> 00:26:23.400\nWhen you're doing nested VMs,\nthings get slow.\n\n547\n00:26:23.400 --> 00:26:26.970\nYou won't notice here on mine cuz it's\njust a lab, a test environment, right?\n\n548\n00:26:26.970 --> 00:26:29.570\nBut in real life,\nyou'll notice, it gets slow.\n\n549\n00:26:29.570 --> 00:26:31.800\nRule number two is,\nnot everybody can do it.\n\n550\n00:26:31.800 --> 00:26:34.390\nYour hardware has to support it.\n\n551\n00:26:34.390 --> 00:26:37.830\nWhen I looked up that Intel\nprocessor earlier there was VTIO.\n\n552\n00:26:37.830 --> 00:26:40.150\nThat VTIO support is what enables this.\n\n553\n00:26:40.150 --> 00:26:44.010\nSometimes it's called SLAT or\nsecond level address translation.\n\n554\n00:26:44.010 --> 00:26:47.650\nYou have to have that support\nin order to do nested VMs.\n\n555\n00:26:47.650 --> 00:26:48.790\nShe just finished.\n\n556\n00:26:48.790 --> 00:26:51.890\nSo just a quick note there if\nyou ever want to try this,\n\n557\n00:26:51.890 --> 00:26:53.130\nlike installing in a virtual machine.\n\n558\n00:26:53.130 --> 00:26:56.450\nYou certainly can do it, you just have\nto have the hardware to support it.\n\n559\n00:26:56.450 --> 00:26:58.540\nAll right, so my installation's completed.\n\n560\n00:26:58.540 --> 00:26:59.690\nI didn't time it, I should have.\n\n561\n00:26:59.690 --> 00:27:03.700\nThat was only a minute and a half or two\nminutes, however long I rambled on there,\n\n562\n00:27:03.700 --> 00:27:05.030\nthat's how long it took.\n\n563\n00:27:05.030 --> 00:27:09.050\nBut now that it's done, I can give it\nthe old reboot and it's gonna reboot.\n\n564\n00:27:09.050 --> 00:27:12.280\nSo when it reboots, it's gonna boot up and\nwe're gonna see that same boot screen,\n\n565\n00:27:12.280 --> 00:27:15.690\nthat yellow screen with the little\nbar that moves across and\n\n566\n00:27:15.690 --> 00:27:19.210\nonce it's done,\nI'll be presented with the main terminal.\n\n567\n00:27:19.210 --> 00:27:21.480\nSo, It’s thinking about rebooting.\n\n568\n00:27:21.480 --> 00:27:25.070\nI think the reboot it’s gonna take\nlonger than the actual install did.\n\n569\n00:27:25.070 --> 00:27:26.550\nThere it goes.\nAll right, so\n\n570\n00:27:26.550 --> 00:27:29.480\nhere comes my system booting up and\nso I got that same status bar.\n\n571\n00:27:29.480 --> 00:27:31.990\nThe difference is I’m not\nbooting off the disc this time.\n\n572\n00:27:31.990 --> 00:27:34.450\nThis time I’m booting off\nof my own hard drive so\n\n573\n00:27:34.450 --> 00:27:36.400\nI can take the disc out and toss it.\n\n574\n00:27:36.400 --> 00:27:41.260\nAnd now off we go, so it should boot\na little bit faster but not by much.\n\n575\n00:27:41.260 --> 00:27:43.050\nIn real life, it does go faster.\n\n576\n00:27:43.050 --> 00:27:44.760\nHere in a virtual machine it's\ngoing to boot about the same.\n\n577\n00:27:44.760 --> 00:27:47.970\nSo it's going to fire up things aren't\ngoing to look very different to me.\n\n578\n00:27:47.970 --> 00:27:49.080\nAll right.\n\n579\n00:27:49.080 --> 00:27:54.650\nNow, if I was missing Intel VT-x, this is\nthe spot where we'd complain about it.\n\n580\n00:27:54.650 --> 00:27:58.050\nNot during the install, but now after the\ninstall, it goes to boot and it would say,\n\n581\n00:27:58.050 --> 00:28:00.310\nthose Virtual Machine Extensions\nare missing,\n\n582\n00:28:00.310 --> 00:28:02.380\nyou're not gonna be able to run VMs.\n\n583\n00:28:02.380 --> 00:28:05.180\nESX will come up,\nyou can add it to Vcenter, but\n\n584\n00:28:05.180 --> 00:28:07.025\nyou won't be able to put VMs on it,\ncuz the support is not there.\n\n585\n00:28:07.025 --> 00:28:08.415\nThere, right.\n\n586\n00:28:08.415 --> 00:28:13.385\nBut once this is done,\nI have a root account and a password.\n\n587\n00:28:13.385 --> 00:28:15.945\nThe only other thing I\nneed is an IP address.\n\n588\n00:28:15.945 --> 00:28:20.275\nAnd its gonna use DHCP on its primary\nnetwork interface to get an address.\n\n589\n00:28:20.275 --> 00:28:22.925\nAnd once I have that last\npiece of information.\n\n590\n00:28:22.925 --> 00:28:25.455\nSo the root account and password, and\n\n591\n00:28:25.455 --> 00:28:29.170\nthe IP address Now I'm ready to\ngo manage this somewhere else.\n\n592\n00:28:29.170 --> 00:28:33.710\nAnd for the whole rest of this show, that\nsomewhere else is going to be vCenter.\n\n593\n00:28:33.710 --> 00:28:35.600\nThat's what we're gonna use.\n\n594\n00:28:35.600 --> 00:28:38.670\nBut for this episode,\nlet's say this a standalone ESX box.\n\n595\n00:28:38.670 --> 00:28:42.290\nSo this is just going to be ESX and\nthat's it and I don't want a vCenter,\n\n596\n00:28:42.290 --> 00:28:44.230\nI just want to manage\nthis box individually.\n\n597\n00:28:44.230 --> 00:28:47.040\nThere is actually a stand alone client,\nwe can use to manage it, so\n\n598\n00:28:47.040 --> 00:28:49.100\nit's the V-Sphere client.\n\n599\n00:28:49.100 --> 00:28:50.910\nAnd you can run it manage\nthis service specifically.\n\n600\n00:28:50.910 --> 00:28:57.180\nSo, here, now that it's up, so, it's\nonline, and it's telling me right here\n\n601\n00:28:57.180 --> 00:29:02.410\ndownload tools to manage this from,\nand here's the IP address that I got.\n\n602\n00:29:02.410 --> 00:29:05.230\nSo I got,\n192.160.0.156 I need to remember that IP.\n\n603\n00:29:05.230 --> 00:29:06.920\nAnd there's the ipv6 address also.\n\n604\n00:29:06.920 --> 00:29:11.380\nSo I got that address,\nI know my route user name and password.\n\n605\n00:29:11.380 --> 00:29:14.410\nI now have the information\nI need to manage this host.\n\n606\n00:29:14.410 --> 00:29:15.610\nBut if you look down at the bottom,\n\n607\n00:29:15.610 --> 00:29:20.440\nthere are a few options like F2\nto customize system or view logs.\n\n608\n00:29:20.440 --> 00:29:24.910\nCustomize system, it'll actually let you\ngo in and set a static IP if you need.\n\n609\n00:29:24.910 --> 00:29:28.150\nIf this ended up on the wrong IP,\nI can customize it.\n\n610\n00:29:28.150 --> 00:29:29.490\nSee how my screen just went black.\n\n611\n00:29:29.490 --> 00:29:32.020\nIt's actually got a little\nscreen saver that kicks in,\n\n612\n00:29:32.020 --> 00:29:34.180\nand there,\nI had my mouse out of the screen.\n\n613\n00:29:34.180 --> 00:29:37.820\nSo it'll go to sleep, because it doesn't\nexpect you to be looking at a screen.\n\n614\n00:29:37.820 --> 00:29:39.760\nIt doesn't even expect\na monitor to be attached.\n\n615\n00:29:39.760 --> 00:29:43.180\nYou don't have to have one because\nthis is all it's going to show, and\n\n616\n00:29:43.180 --> 00:29:46.360\nonce you have that information,\nyou can go and manage it somewhere else.\n\n617\n00:29:46.360 --> 00:29:50.470\nNow let's say that I wanted to go\nin there and customize the system.\n\n618\n00:29:50.470 --> 00:29:54.662\nSo I could send an F2 to\nthe virtual machine and\n\n619\n00:29:54.662 --> 00:29:58.870\nit's going to ask me for\n\n620\n00:29:58.870 --> 00:30:03.170\nthe root username and password so\nI'll punch that in, and\n\n621\n00:30:03.170 --> 00:30:08.160\nnow what I'm going to get Is a limited\nability to configure the server.\n\n622\n00:30:08.160 --> 00:30:10.360\nOkay, can I create a virtual machine?\n\n623\n00:30:10.360 --> 00:30:11.050\nNo.\n\n624\n00:30:11.050 --> 00:30:13.010\nCan I reboot virtual machines?\n\n625\n00:30:13.010 --> 00:30:13.670\nNo.\n\n626\n00:30:13.670 --> 00:30:16.690\nIt's really just the network and\na few other basic things.\n\n627\n00:30:16.690 --> 00:30:19.600\nSo as you look you'll You'll see\nwhere I can change my password.\n\n628\n00:30:19.600 --> 00:30:24.230\nI can configure lockdown mode, but we're\ngonna do that from the center later on.\n\n629\n00:30:24.230 --> 00:30:26.010\nI can configure my management network.\n\n630\n00:30:26.010 --> 00:30:28.970\nAnd that's kinda the important one\nbecause what if this IP is wrong or\n\n631\n00:30:28.970 --> 00:30:31.010\nwhat if I don't have an DHCP server?\n\n632\n00:30:31.010 --> 00:30:32.100\nI need to give it an IP.\n\n633\n00:30:32.100 --> 00:30:33.310\nSo I can configure that right here.\n\n634\n00:30:33.310 --> 00:30:34.430\nI can test it,\n\n635\n00:30:34.430 --> 00:30:37.270\nI can restore the options if I messed\nup the management network adapter.\n\n636\n00:30:37.270 --> 00:30:38.800\nAnd that way I can manage\nit via the network.\n\n637\n00:30:38.800 --> 00:30:41.140\nThey really expect you to be\nmanaging from somewhere else.\n\n638\n00:30:41.140 --> 00:30:41.910\nAll right.\n\n639\n00:30:41.910 --> 00:30:45.290\nAfter that, the rest of these\nare just simple resets or log views.\n\n640\n00:30:45.290 --> 00:30:45.800\nAnd that's it.\n\n641\n00:30:45.800 --> 00:30:47.390\nI can't create and\nmanage virtual machines.\n\n642\n00:30:47.390 --> 00:30:49.030\nI can't do anything crazy like that.\n\n643\n00:30:49.030 --> 00:30:50.330\nI can just set up the network.\n\n644\n00:30:51.620 --> 00:30:53.020\nAll right.\nSo basically what I'm trying to say is,\n\n645\n00:30:53.020 --> 00:30:54.110\nwe're kind of done here.\n\n646\n00:30:54.110 --> 00:30:56.880\nWe now have our first ESX server,\nbut it's not spectacular.\n\n647\n00:30:56.880 --> 00:30:59.040\nBecause It just sits here like this.\n\n648\n00:30:59.040 --> 00:31:03.050\nIf this was my laptop, this is all I\nwould have on the screen, and that's it.\n\n649\n00:31:03.050 --> 00:31:05.220\nI wouldn't be able to use\nmy laptop anymore, so\n\n650\n00:31:05.220 --> 00:31:08.780\nnow I'd have to go to another\nmachine to be able to manage this.\n\n651\n00:31:08.780 --> 00:31:10.780\nAnd so we do that,\nwe just go to another machine,\n\n652\n00:31:10.780 --> 00:31:13.530\nlike I've got this Windows\n10 box sitting here, and\n\n653\n00:31:13.530 --> 00:31:17.280\nI can fire up old Internet Explorer and\nI can browse to that IP.\n\n654\n00:31:17.280 --> 00:31:22.070\nSo I'm gonna browse to 192.168.0.156,\nand it's got a self signed\n\n655\n00:31:23.260 --> 00:31:26.380\ncertificate so I have to clear that.\n\n656\n00:31:26.380 --> 00:31:30.660\nBut now, I get the webpage for\nESX and it's offering for\n\n657\n00:31:30.660 --> 00:31:33.220\nme to download the vSphere client for\nWindows.\n\n658\n00:31:33.220 --> 00:31:34.550\nThat's that standalone client.\n\n659\n00:31:34.550 --> 00:31:36.790\nIf I'm a vSphere server,\nI don't need this.\n\n660\n00:31:36.790 --> 00:31:41.120\nBut if I wanna manage this thing directly\nI need the vSphere client for Windows.\n\n661\n00:31:41.120 --> 00:31:43.920\nI'm gonna go and\ndownload that and get it set up.\n\n662\n00:31:43.920 --> 00:31:44.770\nThere's other things on here.\n\n663\n00:31:44.770 --> 00:31:46.530\nYou'll see download VMware vCenter.\n\n664\n00:31:46.530 --> 00:31:49.590\nIf I want to install vCenter and get that\nset up, I would do that on a server,\n\n665\n00:31:49.590 --> 00:31:50.910\nnot on a workstation.\n\n666\n00:31:50.910 --> 00:31:55.570\nI've got my documentation We even\nhave the vSphere remote command line.\n\n667\n00:31:55.570 --> 00:31:58.060\nIf I want to manage things from the CLI,\nthey've got that too.\n\n668\n00:31:58.060 --> 00:32:00.900\nSo a few different options available for\nme.\n\n669\n00:32:00.900 --> 00:32:03.540\nBut I'm going to download this client and\nget it installed.\n\n670\n00:32:03.540 --> 00:32:07.030\nAnd once that's done,\nI'll be able to remotely manage it and\n\n671\n00:32:07.030 --> 00:32:08.789\nhave a GUI to be able to control that.\n\n672\n00:32:09.990 --> 00:32:12.000\nAll right, well that's going to\ntake a few minutes to download.\n\n673\n00:32:12.000 --> 00:32:13.830\nYou guys can't see it, but\nWes is over here giving me the evil\n\n674\n00:32:13.830 --> 00:32:15.780\neye because I know I've run us\nout of time on this episode.\n\n675\n00:32:15.780 --> 00:32:17.980\nWhy don't we do this,\nwhy don't we do a part two?\n\n676\n00:32:17.980 --> 00:32:21.260\nI want to show you guys\ninstalling that client, and\n\n677\n00:32:21.260 --> 00:32:23.900\nthen Connecting to the ESX server for\nthe first time just to get\n\n678\n00:32:23.900 --> 00:32:27.170\nthe basic settings in place before we\njump into the vCenter world cuz we\n\n679\n00:32:27.170 --> 00:32:31.030\nliterally will spend the whole rest of the\nseries in v center but it's nice to see\n\n680\n00:32:31.030 --> 00:32:33.670\nthat little Windows client get connected\nto manage it in the beginning.\n\n681\n00:32:33.670 --> 00:32:37.985\nSo there's also Also a few little things\nthat we wanna configure on that ESX box to\n\n682\n00:32:37.985 --> 00:32:40.195\nmake sure that it's ready\nto come into vCenter,\n\n683\n00:32:40.195 --> 00:32:44.065\nbecause sometimes there's things like\nthe system clock that are messed up\n\n684\n00:32:44.065 --> 00:32:48.100\nthat make it where it's really hard\nto bring an ESX server into vCenter.\n\n685\n00:32:48.100 --> 00:32:50.600\nAnd it can kind of derail things so\nI've got this little\n\n686\n00:32:50.600 --> 00:32:54.460\nset of steps that I go through every\ntime that I bring up a new ESX box and\n\n687\n00:32:54.460 --> 00:32:56.300\nwe could tackle that if I\nhad a little more time.\n\n688\n00:32:56.300 --> 00:32:58.180\nSo let's a part two on this,\nWes, is that okay?\n\n689\n00:32:58.180 --> 00:32:59.610\n>> Yeah, that does sound good, in fact.\n\n690\n00:32:59.610 --> 00:33:02.220\nThank you for all the information\non getting the server installed.\n\n691\n00:33:02.220 --> 00:33:03.790\nLook forward to you\ncoming back in part two,\n\n692\n00:33:03.790 --> 00:33:05.970\nshowing us a little bit\nof the post-configuation.\n\n693\n00:33:05.970 --> 00:33:07.950\nYou're right,\nwe are pushing the time on the clock.\n\n694\n00:33:07.950 --> 00:33:12.090\nSo, before we sign out though\ndo you got any additional words?\n\n695\n00:33:12.090 --> 00:33:14.250\n>> That's probably about it so\nfar, because we're not done.\n\n696\n00:33:14.250 --> 00:33:16.130\nBut I did install a local hard drive,\n\n697\n00:33:16.130 --> 00:33:18.650\nyou'll remember that we could install\na sand drive, its kind of a cool feature.\n\n698\n00:33:18.650 --> 00:33:19.620\nFeature to have.\n\n699\n00:33:19.620 --> 00:33:22.100\nYou could also install in a USB key.\n\n700\n00:33:22.100 --> 00:33:24.200\nAlthough, VMware doesn't\nsupport that anymore.\n\n701\n00:33:24.200 --> 00:33:25.770\nThey used to support it.\n\n702\n00:33:25.770 --> 00:33:27.690\nNow SSDs have become so cheap,\n\n703\n00:33:27.690 --> 00:33:30.240\nthat they'd rather you just\nstuck an SSD in the server.\n\n704\n00:33:30.240 --> 00:33:31.930\nAnd use that instead of a thumb drive.\n\n705\n00:33:31.930 --> 00:33:35.870\nThumb drives usually don't have great\nperformance on them cuz they're on the USB\n\n706\n00:33:35.870 --> 00:33:38.380\nbus, but that's kind of redundant,\nbut, but anyhow.\n\n707\n00:33:38.380 --> 00:33:42.780\nThe USB verses a SSD that you can plug\nright into a seta jack and you'll get\n\n708\n00:33:42.780 --> 00:33:46.250\nbetter performance out of it so, you don't\nneed a ton of storage to get ESX up and\n\n709\n00:33:46.250 --> 00:33:50.020\ngoing, but you do need a ton of\nstorage for your virtual machine, so\n\n710\n00:33:50.020 --> 00:33:51.370\njust keep that in mind.\n\n711\n00:33:51.370 --> 00:33:54.340\nWell, we thank you for that information,\nand we thank you, the viewer out there,\n\n712\n00:33:54.340 --> 00:33:54.870\nfor watching.\n\n713\n00:33:54.870 --> 00:33:57.970\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n714\n00:33:57.970 --> 00:33:58.800\n>> And I'm Don Pezet.\n\n715\n00:33:58.800 --> 00:34:01.186\n>> And we'll see you next time.\n\n716\n00:34:01.186 --> 00:34:06.546\n[MUSIC]\n\n",
          "vimeoId": "168055017"
        },
        {
          "description": "In this episode Wes and Don continue their discussion on installing and configuring the VMware ESXi hypervisor. They take a look at the post-installation considerations for the vSphere hypervisor like configuring DNS and configuring NTP.",
          "length": "2073",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-2-2-installing_the_vsphere_hypervisor_pt2-052416-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-2-2-installing_the_vsphere_hypervisor_pt2-052416-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-2-2-installing_the_vsphere_hypervisor_pt2-052416-1-sm.jpg",
          "title": "Installing the vSphere Hypervisor Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.497 --> 00:00:14.552\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.552 --> 00:00:15.655\nI'm your host Wes Bryan.\n\n4\n00:00:15.655 --> 00:00:19.518\nIn today's episode,\nwe're continuing through our VM series and\n\n5\n00:00:19.518 --> 00:00:23.370\nthis is the VMware,\ncertified professional version six.\n\n6\n00:00:23.370 --> 00:00:26.090\nJoining me back in the studios again\nis none other than Mr. Don Pezet.\n\n7\n00:00:26.090 --> 00:00:27.160\nDon, how you doing, sir?\n\n8\n00:00:27.160 --> 00:00:27.990\n>> I'm doing great, Wes.\n\n9\n00:00:27.990 --> 00:00:31.480\nReady to jump in and wrap up the topic\nthat we started last episode.\n\n10\n00:00:31.480 --> 00:00:33.360\nWe jumped into installing ESXI.\n\n11\n00:00:33.360 --> 00:00:36.550\nSo you got a chance to see getting\nthe hypervisor installed which,\n\n12\n00:00:36.550 --> 00:00:39.240\nin all honesty, probably wasn't the most\nexciting thing in the world cuz when it\n\n13\n00:00:39.240 --> 00:00:42.510\nwas done we just saw that yellow\nscreen sitting there doing nothing.\n\n14\n00:00:42.510 --> 00:00:44.610\nSo that was time for\n\n15\n00:00:44.610 --> 00:00:47.880\nus to get our client installed on our\ndesktop to be able to reach out and\n\n16\n00:00:47.880 --> 00:00:51.610\nmanage it and actually see that the thing\nis working and verify functionality.\n\n17\n00:00:51.610 --> 00:00:53.342\nWe stopped when we were\ndownloading that client but\n\n18\n00:00:53.342 --> 00:00:54.560\nwe hadn't actually installed it.\n\n19\n00:00:54.560 --> 00:00:57.637\nSo we're gonna pick right back\nup from there and continue on so\n\n20\n00:00:57.637 --> 00:01:00.040\nwe can actually see this thing in action.\n\n21\n00:01:00.040 --> 00:01:04.830\nBecause while installing ESXI is really\nsimple, there are a few little steps\n\n22\n00:01:04.830 --> 00:01:07.970\nthat we probably need to go through before\nwe turn it loose onto the world and\n\n23\n00:01:07.970 --> 00:01:08.990\nthrow it into production, right.\n\n24\n00:01:08.990 --> 00:01:11.770\nSo that's what we're gonna\ntake a look at right here and\n\n25\n00:01:11.770 --> 00:01:13.760\nwe'll just pick back up with that install.\n\n26\n00:01:13.760 --> 00:01:16.760\nNow I was downloading it before\nthe last show and I've finished that.\n\n27\n00:01:16.760 --> 00:01:21.770\nBut just to kind of recap how I even got\nto that is that once the ESXI host was\n\n28\n00:01:21.770 --> 00:01:25.770\ncreated, this guy right here, once it was\ninstalled, it gave us a little message.\n\n29\n00:01:25.770 --> 00:01:30.240\nAnd it said, Download tools to manage this\nhost from, and it gave me the IPv4 and\n\n30\n00:01:30.240 --> 00:01:32.040\nIPv6 addresses of this machine.\n\n31\n00:01:32.040 --> 00:01:36.050\nSo I could see it, I could take\na web browser and browse to it and\n\n32\n00:01:36.050 --> 00:01:37.890\ndownload the utility.\n\n33\n00:01:37.890 --> 00:01:40.584\nAnd on the actual client,\nwhen you browse to it,\n\n34\n00:01:40.584 --> 00:01:44.423\nyou see this webpage right here,\nwhich is pretty straight forward.\n\n35\n00:01:44.423 --> 00:01:47.399\nIt's got download the vSphere client for\nWindows which is what I started\n\n36\n00:01:47.399 --> 00:01:49.720\ndownloading at the end of\nthe last episode, all right.\n\n37\n00:01:49.720 --> 00:01:53.900\nNow there are other things on here\nlike the Virtual Appliance for\n\n38\n00:01:53.900 --> 00:01:57.850\nvSphere Remote Command Line and VMware\nvCenter and other ways to manage it.\n\n39\n00:01:57.850 --> 00:01:59.520\nWe're gonna see those in other episodes,\nbut for\n\n40\n00:01:59.520 --> 00:02:02.670\nright now I want to focus on\nthe vSphere client for Windows.\n\n41\n00:02:02.670 --> 00:02:06.990\nNow, quick little note,\nthis is the vSphere client for Windows.\n\n42\n00:02:06.990 --> 00:02:09.300\nNot for Mac, not for Linux.\n\n43\n00:02:09.300 --> 00:02:11.950\nThey just have it for Windows.\n\n44\n00:02:11.950 --> 00:02:15.990\nThere is a web based client that we'll see\nthat can work on some other platforms but\n\n45\n00:02:15.990 --> 00:02:20.190\nfor the most part VMware does expect us\nto manage vSphere from a Windows client.\n\n46\n00:02:20.190 --> 00:02:22.280\nSo you'll wanna have a Windows\nclient tucked away somewhere.\n\n47\n00:02:22.280 --> 00:02:26.150\nI'm on a Windows 10 machine here,\nso I downloaded that file,\n\n48\n00:02:26.150 --> 00:02:27.950\nright at the end of the last episode.\n\n49\n00:02:27.950 --> 00:02:29.720\nSo that was downloading and here it is.\n\n50\n00:02:29.720 --> 00:02:31.950\nNow, we're just gonna run through and\ndo the install.\n\n51\n00:02:31.950 --> 00:02:35.240\nNow the install itself,\nis pretty straightforward,\n\n52\n00:02:35.240 --> 00:02:36.580\nwe're just gonna run through.\n\n53\n00:02:36.580 --> 00:02:38.850\nThere's not really any\ncrazy prerequisites for\n\n54\n00:02:38.850 --> 00:02:43.210\nthe client, it does require some dot.net\nframework stuff and a few other things.\n\n55\n00:02:43.210 --> 00:02:45.540\nBut it's built in a way that it will\nactually reach out and download it,\n\n56\n00:02:45.540 --> 00:02:46.210\nif it's missing.\n\n57\n00:02:46.210 --> 00:02:48.320\nSo, we don't have to jump\nthrough a bunch of hoops.\n\n58\n00:02:48.320 --> 00:02:52.010\nIt used to be super annoying that\nin order to use the web portal,\n\n59\n00:02:52.010 --> 00:02:55.290\nyou had to have Adobe Flash installed,\nor you had to go and get Java,\n\n60\n00:02:55.290 --> 00:02:56.860\nyou had to have prerequisites.\n\n61\n00:02:56.860 --> 00:03:01.140\nNow, it's really just click and run,\nwhich makes our lives a lot easier.\n\n62\n00:03:01.140 --> 00:03:04.690\nNow, once it actually runs and\ngets installed, then we'll just need to\n\n63\n00:03:04.690 --> 00:03:08.160\npoint it at our ESX box, and\nwe'll be able to manage it and control it.\n\n64\n00:03:08.160 --> 00:03:09.270\nSo I need to pick my language.\n\n65\n00:03:09.270 --> 00:03:11.470\nLet me just get rid of all that\nstuff in the background here.\n\n66\n00:03:11.470 --> 00:03:12.760\nSo I need to pick my language.\n\n67\n00:03:12.760 --> 00:03:16.450\nI'll stick with English since that's\nthe one that I have minor mastery of.\n\n68\n00:03:16.450 --> 00:03:18.300\nAnd it'll kick into the install, and\n\n69\n00:03:18.300 --> 00:03:21.380\nyou'll see there's not a whole\nlot of amazement going on here.\n\n70\n00:03:21.380 --> 00:03:22.290\nSimple wizard.\n\n71\n00:03:22.290 --> 00:03:24.220\nWe're gonna click Next a handful of times.\n\n72\n00:03:24.220 --> 00:03:26.810\nWe'll agree to our license\nagreement like we're used to.\n\n73\n00:03:26.810 --> 00:03:29.560\nAnd we'll pick a folder to install it in.\n\n74\n00:03:29.560 --> 00:03:33.008\nNow, if you look at that path,\n\n75\n00:03:33.008 --> 00:03:37.250\nC:\\Program Files\n(x86)\\VMware\\infrastructure\\.\n\n76\n00:03:37.250 --> 00:03:40.710\nFirst off, it is a 32-bit client, so\nwe don't have to have a 64-bit desktop,\n\n77\n00:03:40.710 --> 00:03:42.140\nwe can have a 32-bit, that'll be fine.\n\n78\n00:03:42.140 --> 00:03:45.290\nAnd then they call it VMware,\ninfrastructure.\n\n79\n00:03:45.290 --> 00:03:49.600\nCuz this used to all be called the VI\nsuite, before they renamed it to vSphere,\n\n80\n00:03:49.600 --> 00:03:51.340\nand they just haven't changed\nthe path name for that.\n\n81\n00:03:51.340 --> 00:03:53.090\nBut we don't necessarily care about that.\n\n82\n00:03:53.090 --> 00:03:55.720\nSo, we can go ahead and hit Next,\nand perform our installation.\n\n83\n00:03:55.720 --> 00:03:58.290\nAnd you'll see right off the bat\nthat I'm missing the Visual C++\n\n84\n00:03:58.290 --> 00:04:02.460\n2008 Redistributable Runtime, so\nit's reaching out and downloading it.\n\n85\n00:04:02.460 --> 00:04:04.080\nAnd so,\nit'll get anything that we're missing.\n\n86\n00:04:04.080 --> 00:04:08.640\nThere's the Visual J# Runtime,\nor whatever it is that it needs,\n\n87\n00:04:08.640 --> 00:04:11.360\nit'll grab and then,\nit'll finish the install.\n\n88\n00:04:11.360 --> 00:04:14.910\nWhen it's done, I'll have a nice\nlittle icon right here on my desk for\n\n89\n00:04:14.910 --> 00:04:16.080\nthe vSphere client.\n\n90\n00:04:16.080 --> 00:04:19.760\nNow, be aware that this\nclient is designed to be\n\n91\n00:04:19.760 --> 00:04:23.830\na stand-alone application that can run\nright here from this workstation and\n\n92\n00:04:23.830 --> 00:04:27.750\nthen connect to any ESXi\nbox that I need to manage.\n\n93\n00:04:27.750 --> 00:04:30.220\nWhen we deploy vCenter\nin the vCenter episode,\n\n94\n00:04:30.220 --> 00:04:32.730\nit actually has two different clients.\n\n95\n00:04:32.730 --> 00:04:37.030\nIt has an application based client that\nyou run right from your desktop and\n\n96\n00:04:37.030 --> 00:04:42.740\nits got the web client that actually\nruns from the V center server.\n\n97\n00:04:42.740 --> 00:04:47.230\nNow, in V center,\nthe web client is fully featured.\n\n98\n00:04:47.230 --> 00:04:49.560\nIt's got every option that you need.\n\n99\n00:04:49.560 --> 00:04:52.630\nThe native client that runs on your\ndesktop is actually missing a ton\n\n100\n00:04:52.630 --> 00:04:55.170\nof options, it's very light weight.\n\n101\n00:04:55.170 --> 00:04:57.130\nSo, when it comes to working with vCenter,\n\n102\n00:04:57.130 --> 00:04:59.900\nyou almost always wanna\nuse the web client.\n\n103\n00:04:59.900 --> 00:05:04.980\nBut if you're not using vCenter, if you're\njust directly connecting to the ESXi Box,\n\n104\n00:05:04.980 --> 00:05:07.560\nthen you'll wanna use this\nnative client right here.\n\n105\n00:05:07.560 --> 00:05:09.160\nAnd it just finished installing.\n\n106\n00:05:09.160 --> 00:05:10.230\nSo now it's done.\n\n107\n00:05:10.230 --> 00:05:11.400\nThat didn't take very long.\n\n108\n00:05:11.400 --> 00:05:13.250\nAnd once it's done, we finish up.\n\n109\n00:05:13.250 --> 00:05:15.430\nAnd there's the icon on my\ndesktop that I mentioned,\n\n110\n00:05:15.430 --> 00:05:19.350\nthe VMWare vSphere Client that's\njust sitting right there.\n\n111\n00:05:19.350 --> 00:05:22.800\nThe web client that we'll see with\nvCenter, it'll actually say VMWare vSphere\n\n112\n00:05:22.800 --> 00:05:26.040\nWeb Client as the file name so\nyou'll know which one it is.\n\n113\n00:05:26.040 --> 00:05:29.280\nSo I'm gonna go ahead and fire that up and\nwe'll get launched into it.\n\n114\n00:05:29.280 --> 00:05:34.900\nNow, you can connect to as many\ndifferent ESXI boxes as you want,\n\n115\n00:05:34.900 --> 00:05:36.920\none at a time, all right?\n\n116\n00:05:36.920 --> 00:05:40.470\nThis client,\nit's not tied to a particular machine.\n\n117\n00:05:40.470 --> 00:05:45.439\nAnd you'll notice that even\nthough my ESX box was ESXI 6.0,\n\n118\n00:05:45.439 --> 00:05:50.500\nthat it's got the V-Sphere 5.5 and\nbeyond support.\n\n119\n00:05:50.500 --> 00:05:54.005\nSo I can actually manage 5.5\nboxes as well as 6 boxes.\n\n120\n00:05:54.005 --> 00:05:55.724\nSo you can punch that in right here.\n\n121\n00:05:55.724 --> 00:05:58.090\nIt doesn't have to be the client\nyou downloaded it from.\n\n122\n00:05:58.090 --> 00:05:59.760\nIn other words,\nI don't have to download this over and\n\n123\n00:05:59.760 --> 00:06:03.370\nover again from each\nESXI box that I've got.\n\n124\n00:06:03.370 --> 00:06:06.860\nI can punch in the IP address or\nDNS name of the ESXI box.\n\n125\n00:06:06.860 --> 00:06:10.323\nAnd if you don't remember it you can\njust jump back to the screen, and\n\n126\n00:06:10.323 --> 00:06:11.887\nit's printed right on there.\n\n127\n00:06:11.887 --> 00:06:18.800\nSo I'm 192.168.0.156 And so that's\nwhat I'm punching in here in the box.\n\n128\n00:06:18.800 --> 00:06:19.890\nNow during the install,\n\n129\n00:06:19.890 --> 00:06:23.230\nit had me pick a password,\nit didn't have me pick a username.\n\n130\n00:06:23.230 --> 00:06:26.730\nAnd that's because\nthe default username is root.\n\n131\n00:06:26.730 --> 00:06:28.970\nAnd so I'm gonna punch in root for\nthat username and\n\n132\n00:06:28.970 --> 00:06:30.820\nthen I'll punch in the password.\n\n133\n00:06:30.820 --> 00:06:34.310\nSo I picked the word password all\nlowercase, not very secure, but\n\n134\n00:06:34.310 --> 00:06:35.410\nthat's what I picked.\n\n135\n00:06:35.410 --> 00:06:37.850\nNow you do have the option to\nuse Windows session credentials,\n\n136\n00:06:37.850 --> 00:06:39.400\nthat's not gonna work, here.\n\n137\n00:06:39.400 --> 00:06:41.960\nBecause its a brand new box,\nwe just bought it online.\n\n138\n00:06:41.960 --> 00:06:45.760\nBut we're gonna talk in a later\nepisode about single sign-on or SSO.\n\n139\n00:06:45.760 --> 00:06:47.560\nAnd when you have V-center deployed, and\n\n140\n00:06:47.560 --> 00:06:51.230\nyou've got the platform services\ncontroller, the PSC in place,\n\n141\n00:06:51.230 --> 00:06:55.140\nyou can integrate with things like\nthe Microsoft Active Directory.\n\n142\n00:06:55.140 --> 00:06:56.440\nAnd if you do that,\n\n143\n00:06:56.440 --> 00:07:02.450\nyou can give Windows users permission to\ncontrol ESX boxes or V Center itself.\n\n144\n00:07:02.450 --> 00:07:03.650\nAnd that way, when they log in,\n\n145\n00:07:03.650 --> 00:07:05.550\nthey can just log in with\ntheir Windows credentials.\n\n146\n00:07:05.550 --> 00:07:06.970\nNow they don't have to\nprovide a username and\n\n147\n00:07:06.970 --> 00:07:09.870\npassword every time they connect because\nthey already have logged in just by\n\n148\n00:07:09.870 --> 00:07:11.800\nlogging in to their work station.\n\n149\n00:07:11.800 --> 00:07:12.680\nReally makes life easy,\n\n150\n00:07:12.680 --> 00:07:15.640\nyou don't want your network admins\nto all have two different accounts.\n\n151\n00:07:15.640 --> 00:07:17.740\nOne account for VM Ware,\none account for Windows.\n\n152\n00:07:17.740 --> 00:07:19.520\nIt'd be nice if it was shared.\n\n153\n00:07:19.520 --> 00:07:22.400\nThere's a few reason for that,\nthe main reason being if you have people\n\n154\n00:07:22.400 --> 00:07:25.170\nwith multiple accounts\nthey end up sharing them.\n\n155\n00:07:25.170 --> 00:07:27.210\nIf I say,\nI need Wes to do something in VMware.\n\n156\n00:07:27.210 --> 00:07:29.600\nHere Wes, here's my VMware login.\n\n157\n00:07:29.600 --> 00:07:32.390\nI'll give it to him because I\nknow he can't get into my email,\n\n158\n00:07:32.390 --> 00:07:33.810\nit's a different account.\n\n159\n00:07:33.810 --> 00:07:35.960\nBut if it's all one account I'm\nnot gonna give that to Wes,\n\n160\n00:07:35.960 --> 00:07:37.450\nI'm gonna keep it to myself.\n\n161\n00:07:37.450 --> 00:07:41.267\nSo we need to just be aware of that,\nthat single sign-on really helps but\n\n162\n00:07:41.267 --> 00:07:42.905\nit does take a bit of a setup on.\n\n163\n00:07:42.905 --> 00:07:45.077\nAnd we'll have a whole episode\non single sign-on later on.\n\n164\n00:07:45.077 --> 00:07:48.421\nBut because this is a new install,\neven if I wanted single sign-on,\n\n165\n00:07:48.421 --> 00:07:49.584\nit's not configured.\n\n166\n00:07:49.584 --> 00:07:52.961\nAnd so I've gotta log on with that account\nthat we've created during the setup.\n\n167\n00:07:52.961 --> 00:07:57.973\nSo I'll choose that and\nI'll hit Login, there we go.\n\n168\n00:07:57.973 --> 00:08:01.507\nAll right, now when the server was\ninstalled, it created a self-signed\n\n169\n00:08:01.507 --> 00:08:04.528\ncertificate so I'm gonna get\na warning about that saying hey,\n\n170\n00:08:04.528 --> 00:08:06.980\nthere is an SSL certificate on this thing.\n\n171\n00:08:06.980 --> 00:08:08.020\nWe can encrypt,\n\n172\n00:08:08.020 --> 00:08:13.520\nit is a valid certificate except it\nwas issued by localhost.localdomain.\n\n173\n00:08:13.520 --> 00:08:14.730\nWe don't know who that is.\n\n174\n00:08:14.730 --> 00:08:17.050\nSo are you sure you wanna trust it?\n\n175\n00:08:17.050 --> 00:08:20.860\nWell because this is a new box,\nwe don't really have a choice here.\n\n176\n00:08:20.860 --> 00:08:22.430\nIt generated its own certificate.\n\n177\n00:08:22.430 --> 00:08:24.810\nWe can replace it later on.\n\n178\n00:08:24.810 --> 00:08:28.610\nThe PSC or platform services controller\nhas a whole certificate management service\n\n179\n00:08:28.610 --> 00:08:30.600\nin it, and so\nonce we're connected to V center,\n\n180\n00:08:30.600 --> 00:08:33.840\nwe can repopulate all of our certificates\nand know that they are trustworthy.\n\n181\n00:08:33.840 --> 00:08:38.550\nBut because this is a new box, all I can\ndo is view the certificate and take a look\n\n182\n00:08:38.550 --> 00:08:42.700\nat what's in there, to see whether or not\nit matches what I think it should match.\n\n183\n00:08:42.700 --> 00:08:43.860\nSo for example,\n\n184\n00:08:43.860 --> 00:08:47.860\nthe valid from date should match\nthe date that I installed the server.\n\n185\n00:08:47.860 --> 00:08:48.460\nRight?\n\n186\n00:08:48.460 --> 00:08:51.330\nI installed that server yesterday,\nMay 23rd, 2016.\n\n187\n00:08:51.330 --> 00:08:54.210\nAnd so\nthat's the date that I expect to see here.\n\n188\n00:08:54.210 --> 00:08:58.330\nIf I see different date, then I might have\nconnected to somebody else's ESX box.\n\n189\n00:08:58.330 --> 00:09:03.890\nYou can also look in the details and\nfind the fingerprint for the certificate.\n\n190\n00:09:03.890 --> 00:09:05.350\nIt's buried in here somewhere.\n\n191\n00:09:05.350 --> 00:09:06.980\nThumbprint, I said fingerprint.\n\n192\n00:09:06.980 --> 00:09:08.768\nYou can find the thumbprint.\n\n193\n00:09:08.768 --> 00:09:12.500\nAnd the thumbprint was actually displayed\nbriefly during the install if we had\n\n194\n00:09:12.500 --> 00:09:13.080\nwritten it down.\n\n195\n00:09:13.080 --> 00:09:16.180\nI didn't bother to write it down,\nso now I can't even compare that.\n\n196\n00:09:16.180 --> 00:09:20.620\nI could drop to a shell on the box, but we\nhaven't enabled the shell function yet so\n\n197\n00:09:20.620 --> 00:09:24.140\nwe're kinda limited there, so we really\ndo just have to accept the certificate.\n\n198\n00:09:24.140 --> 00:09:29.980\nAll right, so I'm gonna go ahead and\nchoose to install the certificate so\n\n199\n00:09:29.980 --> 00:09:32.690\nit won't display any warnings\nabout it anymore, just for now.\n\n200\n00:09:32.690 --> 00:09:34.960\nWe can always replace it later.\n\n201\n00:09:34.960 --> 00:09:37.840\nAll right,\nthen I'm gonna get a connection error.\n\n202\n00:09:37.840 --> 00:09:40.540\nSo the request failed because\nthe remote server took too long,\n\n203\n00:09:40.540 --> 00:09:44.130\nwhich was probably because I was rambling\non about that certificate the whole time.\n\n204\n00:09:44.130 --> 00:09:47.479\nSo I'm just gonna try and reconnect and\nwe'll give it another shot.\n\n205\n00:09:47.479 --> 00:09:48.960\n[LAUGH] There we go.\n\n206\n00:09:48.960 --> 00:09:52.550\nSo it's reaching out to connect\nto that server, and there we go.\n\n207\n00:09:52.550 --> 00:09:53.460\nI just talked too long.\n\n208\n00:09:54.470 --> 00:09:55.910\nNow when we install the server,\n\n209\n00:09:55.910 --> 00:09:58.630\nyou might have noticed that it\nnever asked about a license.\n\n210\n00:09:58.630 --> 00:10:01.530\nIt never had me put in a serial number or\nanything like that.\n\n211\n00:10:01.530 --> 00:10:04.750\nAnd so when it comes up,\nit's gonna come up in evaluation mode.\n\n212\n00:10:04.750 --> 00:10:06.000\nAnd so it's warning me about that.\n\n213\n00:10:06.000 --> 00:10:08.600\nMy evaluation license will\nexpire within 60 days.\n\n214\n00:10:08.600 --> 00:10:11.000\nFor those of you that are learning ESX,\n\n215\n00:10:11.000 --> 00:10:13.580\nthis is great cuz you can install\nas many ESX boxes as you want.\n\n216\n00:10:13.580 --> 00:10:16.040\nYou can run them for two months\nwhile you practice and learn, and\n\n217\n00:10:16.040 --> 00:10:19.010\nyou don't have to pay a dime,\nit's just an evaluation period.\n\n218\n00:10:19.010 --> 00:10:20.610\nYou don't even have to\ngo to VMware site and\n\n219\n00:10:20.610 --> 00:10:22.820\nregister as long as you\nhave the install files.\n\n220\n00:10:22.820 --> 00:10:25.100\nAnd so you can install it and go.\n\n221\n00:10:25.100 --> 00:10:29.130\nNow it tells me that as soon as\nthe evaluation license expires,\n\n222\n00:10:29.130 --> 00:10:31.200\nall my virtual machines are gonna stop.\n\n223\n00:10:31.200 --> 00:10:35.140\nBut I've got two months and if I'm just\ntraining or learning this works fine.\n\n224\n00:10:35.140 --> 00:10:37.280\nIf, however,\nI'm gonna be moving this into production,\n\n225\n00:10:37.280 --> 00:10:40.750\none of the first things I'm gonna need\nto do is put a license key in here.\n\n226\n00:10:40.750 --> 00:10:44.060\nOtherwise all my VMs will just stop\ntwo months after we deploy it.\n\n227\n00:10:44.060 --> 00:10:46.540\nSo you put in production,\nthings are running great.\n\n228\n00:10:46.540 --> 00:10:49.660\nYou're like yeah wonderful,\nI can kick back and relax, and\n\n229\n00:10:49.660 --> 00:10:52.870\nthen one day all your VMs halt,\nand it's not a lot of fun.\n\n230\n00:10:52.870 --> 00:10:54.480\n>> All of a sudden, lights out.\n\n231\n00:10:54.480 --> 00:10:55.032\n>> Yeah. [LAUGH] >> Yeah.\n\n232\n00:10:55.032 --> 00:10:56.580\n[LAUGH] And I've seen that.\n\n233\n00:10:56.580 --> 00:11:00.200\nI've seen that with a number of different\nsoftware products not just VMWare where\n\n234\n00:11:00.200 --> 00:11:03.180\npeople forget the license and\nthat's how it runs.\n\n235\n00:11:03.180 --> 00:11:05.740\nSo, I'm just gonna say OK to that and\n\n236\n00:11:05.740 --> 00:11:10.020\nnow, we get the actual V sphere client\nright here that we can start to work with.\n\n237\n00:11:10.020 --> 00:11:12.820\nAnd it's not all that spectacular.\n\n238\n00:11:12.820 --> 00:11:17.170\nYou'll see most of my screen is empty\nspace and that's because I'm managing\n\n239\n00:11:17.170 --> 00:11:23.230\na single host and I'm using the native\nESX client which is not fully featured,\n\n240\n00:11:23.230 --> 00:11:25.440\nnot like the web client we'll\nsee when we connect to vCenter.\n\n241\n00:11:25.440 --> 00:11:30.450\nSo there's not a whole lot that we see\nhere, but it's enough to get us set up for\n\n242\n00:11:30.450 --> 00:11:32.440\nthe server with what we want, and\n\n243\n00:11:32.440 --> 00:11:37.110\nI've got a couple of different things that\nI do on a new ESX box to get it set up.\n\n244\n00:11:37.110 --> 00:11:39.530\nJust a few things that\nwe might wanna adjust\n\n245\n00:11:39.530 --> 00:11:42.860\neven before we bring it into vCenter,\ncuz once we bring it into vCenter,\n\n246\n00:11:42.860 --> 00:11:45.800\nyou'll manage everything from there,\nall the work will be done from vCenter.\n\n247\n00:11:45.800 --> 00:11:48.600\nYou'll probably never connect this\nway ever again after you get it\n\n248\n00:11:48.600 --> 00:11:49.650\nconnected to vCenter.\n\n249\n00:11:49.650 --> 00:11:52.290\nAnd, in fact, I didn't even have to\nconnect the first time this way.\n\n250\n00:11:52.290 --> 00:11:55.680\nI could've just gone straight into\nvCenter, but this is on the exam so\n\n251\n00:11:55.680 --> 00:11:58.130\nI wanted to make sure I\nshowed it to you also.\n\n252\n00:11:58.130 --> 00:12:01.920\nAll right, so one of the first things we\nmight wanna do is attach that license key.\n\n253\n00:12:01.920 --> 00:12:07.150\nWell had I not cleared the screen,\nwhen that license pop-up occurred,\n\n254\n00:12:07.150 --> 00:12:09.652\nit actually had a little link at the\nbottom where I can assign a license and\n\n255\n00:12:09.652 --> 00:12:10.690\ngo on put it in there.\n\n256\n00:12:10.690 --> 00:12:12.960\nBut if you cleared it like me,\nwe can still get to it.\n\n257\n00:12:12.960 --> 00:12:15.270\nWe're gonna go into inventory up here.\n\n258\n00:12:15.270 --> 00:12:18.460\nWhen you look at this screen,\nlet me explain what we're seeing.\n\n259\n00:12:18.460 --> 00:12:20.370\nFirst off,\nit's kind of like a web browser.\n\n260\n00:12:20.370 --> 00:12:22.970\nYou get a little bar up here that\ntells you where you are right now.\n\n261\n00:12:22.970 --> 00:12:24.620\nSo I'm at home.\n\n262\n00:12:24.620 --> 00:12:26.870\nI'm at the main page of this.\n\n263\n00:12:26.870 --> 00:12:29.770\nAnd as I browse, we'll see this,\nlike a bread crumb trail,\n\n264\n00:12:29.770 --> 00:12:32.100\nshow me what I've navigated into.\n\n265\n00:12:32.100 --> 00:12:35.630\nThen I can see I've got\nthe inventory screen, and\n\n266\n00:12:35.630 --> 00:12:39.770\ninventory is really important on vCenter,\nhere inventory is just this one host.\n\n267\n00:12:39.770 --> 00:12:41.740\nThat's all I'm connected to,\nso that's all I'm gonna see.\n\n268\n00:12:42.790 --> 00:12:44.790\nBeneath it though I've got administration.\n\n269\n00:12:44.790 --> 00:12:46.680\nAnd here's where I can set up roles and\nsystem logs.\n\n270\n00:12:46.680 --> 00:12:49.650\nThis is kind of like setting\npermissions on the server.\n\n271\n00:12:49.650 --> 00:12:53.410\nAnd then lastly at the bottom,\nI've got the task status.\n\n272\n00:12:53.410 --> 00:12:56.180\nWhenever you send a command,\nit actually sends the command and\n\n273\n00:12:56.180 --> 00:12:57.740\nexecutes it on the server.\n\n274\n00:12:57.740 --> 00:12:58.710\nAnd so you wait for\n\n275\n00:12:58.710 --> 00:13:01.220\na status report back from the server\nwhere it tells you if it finished or not.\n\n276\n00:13:01.220 --> 00:13:03.300\nSo you can see things that\nare currently running.\n\n277\n00:13:03.300 --> 00:13:06.600\nWhen you hit OK on a box up\nhere in the native client,\n\n278\n00:13:06.600 --> 00:13:08.350\nthat setting doesn't\ntake effect right away.\n\n279\n00:13:08.350 --> 00:13:10.510\nYou've got to watch down here to see for\n\n280\n00:13:10.510 --> 00:13:13.900\nwhen that status changes to completed and\nthen it's taken effect on the server.\n\n281\n00:13:13.900 --> 00:13:16.520\nSo those are kind of three elements\nthat I'm seeing on the screen.\n\n282\n00:13:16.520 --> 00:13:19.560\nAnd I'm going to go into inventory and\n\n283\n00:13:19.560 --> 00:13:22.840\nwhen I go into inventory now I'm\nseeing the really important stuff.\n\n284\n00:13:22.840 --> 00:13:24.845\nI see my server right here 192.\n\n285\n00:13:24.845 --> 00:13:28.680\n2.168.0.156.\nNow, I could add more servers to connect\n\n286\n00:13:28.680 --> 00:13:29.850\nto, and so on.\n\n287\n00:13:29.850 --> 00:13:33.860\nBut, you really will only be\nconnected to one at a time.\n\n288\n00:13:33.860 --> 00:13:38.790\nAnd then when I look at that server, I can\nsee the Summary, the Virtual Machines,\n\n289\n00:13:38.790 --> 00:13:41.990\nResource Allocation,\nPerformance data, and so on.\n\n290\n00:13:41.990 --> 00:13:43.150\nAll listed out here.\n\n291\n00:13:43.150 --> 00:13:46.960\nNow, some of it doesn't work\nwithout the proper license.\n\n292\n00:13:46.960 --> 00:13:51.080\nA lot of it does work, so you can actually\nuse the majority of the servers features\n\n293\n00:13:51.080 --> 00:13:53.740\neven without a license right\nup untill that 2 month mark.\n\n294\n00:13:53.740 --> 00:13:57.500\nAll right, but what I want is\nunder configurations, and so\n\n295\n00:13:57.500 --> 00:14:01.170\nas I look across these tabs I'm gonna\nfind that Configuration tab, right there.\n\n296\n00:14:01.170 --> 00:14:04.260\nAnd that's the configuration\nof the ESX box.\n\n297\n00:14:04.260 --> 00:14:07.450\nAnd so you're gonna see a bunch of\nsettings here that pertain to the hardware\n\n298\n00:14:07.450 --> 00:14:08.310\nof the box.\n\n299\n00:14:08.310 --> 00:14:12.070\nAnd right beneath it,\nthe software of the box.\n\n300\n00:14:12.070 --> 00:14:15.310\nNow for hardware, there's not a whole\nlot we need to configure, at least for\n\n301\n00:14:15.310 --> 00:14:16.430\nmy system.\n\n302\n00:14:16.430 --> 00:14:21.320\nIf you had a SAN attached, you would\nneed to go and configure the HBA,\n\n303\n00:14:21.320 --> 00:14:23.540\nthe host bus adapter to\nconnect to that SAN.\n\n304\n00:14:23.540 --> 00:14:26.080\nIf you had multiple network adapters\nyou might have to go in and\n\n305\n00:14:26.080 --> 00:14:27.140\nconfigure the network adapters.\n\n306\n00:14:27.140 --> 00:14:30.470\nYou might bond some together or\ncreate a virtual switch and\n\n307\n00:14:30.470 --> 00:14:32.850\nwe'll see those in later shows.\n\n308\n00:14:32.850 --> 00:14:36.070\nBut for me, I'm really just trying to do\nthe bare minimum to get this thing drawn\n\n309\n00:14:36.070 --> 00:14:37.840\ninto vCenter to manage it.\n\n310\n00:14:37.840 --> 00:14:40.540\nTechnically, I've really got\nthe bare minimum already, but\n\n311\n00:14:40.540 --> 00:14:43.140\nsome of the things i like to tweak are,\nthe licenses.\n\n312\n00:14:43.140 --> 00:14:45.590\nSo i want to look into configure tab,\nright under software,\n\n313\n00:14:45.590 --> 00:14:47.450\nyou'll see licensed features.\n\n314\n00:14:47.450 --> 00:14:49.580\nAnd you can check on that.\n\n315\n00:14:49.580 --> 00:14:52.720\nAnd this screen's gonna update\nhere in just a second to show me\n\n316\n00:14:52.720 --> 00:14:54.350\nmy licensed features.\n\n317\n00:14:54.350 --> 00:14:58.270\nAnd I say it's gonna do that anytime\nnow or it's just gonna sit here.\n\n318\n00:14:58.270 --> 00:14:59.310\nThere we go.\n\n319\n00:14:59.310 --> 00:15:00.970\nSo now it's updated.\n\n320\n00:15:00.970 --> 00:15:02.210\nAnd it's showing me the license I've got.\n\n321\n00:15:02.210 --> 00:15:04.180\nAnd you'll see I've got\nan evaluation license.\n\n322\n00:15:04.180 --> 00:15:07.230\nI installed it on May 23rd, so\nit's set to expire July 23rd.\n\n323\n00:15:07.230 --> 00:15:09.560\nI've got two months that I can run.\n\n324\n00:15:09.560 --> 00:15:14.610\nAnd during that time I've got unlimited\nvirtual SMP, I've got all these features,\n\n325\n00:15:14.610 --> 00:15:19.890\nvMotion, X-Switch, vSphere HA,\na lot of these are enterprise features.\n\n326\n00:15:19.890 --> 00:15:23.080\nBut I have every feature available to me\n\n327\n00:15:23.080 --> 00:15:24.720\non this evaluation license,\nat least for now.\n\n328\n00:15:25.910 --> 00:15:30.300\nIf I leave it this way, well,\nI have it for two months.\n\n329\n00:15:30.300 --> 00:15:32.610\nBut if I stretch this\nwindow just a little bit,\n\n330\n00:15:32.610 --> 00:15:34.930\nthere we go, we'll see the edit button.\n\n331\n00:15:34.930 --> 00:15:37.680\nAnd that's where we can edit\nthat license and we can fix it.\n\n332\n00:15:37.680 --> 00:15:42.385\nSo right now, it shows no license, down\nhere, I can say assign a new license key\n\n333\n00:15:42.385 --> 00:15:45.209\nand I can enter a key and\npunch in my license key.\n\n334\n00:15:45.209 --> 00:15:50.502\nWhen you buy V Sphere, or when you buy ESX\nby itself, one of the foundation packs.\n\n335\n00:15:50.502 --> 00:15:53.172\nThen, you actually get a license key.\n\n336\n00:15:53.172 --> 00:15:56.230\nEven when you get a free copy\nfrom VMware which happens,\n\n337\n00:15:56.230 --> 00:15:57.999\nmore often than what you think.\n\n338\n00:15:57.999 --> 00:16:01.500\nThey'll give you a key, and\nthat's what is your actual item,\n\n339\n00:16:01.500 --> 00:16:03.893\nthat's really the thing you're buying.\n\n340\n00:16:03.893 --> 00:16:08.210\nSo you punch that key in right here,\nand it'll update to reflect your key.\n\n341\n00:16:08.210 --> 00:16:12.655\nNow, if you get a free one, or\nif you buy one of the cheaper ones from\n\n342\n00:16:12.655 --> 00:16:15.750\nVMware It'll usually have\nan expiration date on it.\n\n343\n00:16:15.750 --> 00:16:19.090\nSo, your key might only be good for\na year, or two years, or whatever and\n\n344\n00:16:19.090 --> 00:16:20.510\nthen you have to renew.\n\n345\n00:16:20.510 --> 00:16:23.930\nBut if you buy the full ones,\nthe expensive ones, they'll be unlimited.\n\n346\n00:16:23.930 --> 00:16:26.600\nAnd so when you add that license\nin it would show it right here and\n\n347\n00:16:26.600 --> 00:16:28.830\nsay it was unlimited or whatever.\n\n348\n00:16:28.830 --> 00:16:31.930\nAnd I would love to show that\nto you guys on the show but\n\n349\n00:16:31.930 --> 00:16:35.200\nit actually puts the key right there\non the screen no matter what you do.\n\n350\n00:16:35.200 --> 00:16:36.240\nEven after you enter it,\n\n351\n00:16:36.240 --> 00:16:38.780\nthe key is I can't do it without\nshowing you one of the keys.\n\n352\n00:16:38.780 --> 00:16:42.510\nBut once you punch it in, it'll show that\nkey, it'll show what you're licensed for,\n\n353\n00:16:42.510 --> 00:16:45.810\nso what feature set, and\nit'll show when it expires.\n\n354\n00:16:45.810 --> 00:16:49.047\nIf it says no license key you're in the\neval mode, and it's just a matter of time.\n\n355\n00:16:49.047 --> 00:16:52.459\nBut if you look down here, you'll see\nall the things that it'll display,\n\n356\n00:16:52.459 --> 00:16:55.330\nthe product, capacity,\nhow many of them you have available,\n\n357\n00:16:55.330 --> 00:16:58.550\ncause you might have purchased a pack\nof keys so you have more than one.\n\n358\n00:16:58.550 --> 00:17:00.182\nAnd one that expires.\n\n359\n00:17:00.182 --> 00:17:03.260\nAll right, so that's one of the things\nthat will definitely wanna punch in is our\n\n360\n00:17:03.260 --> 00:17:06.140\nlicense key is that we make sure that our\nsystem doesn't shut down on us in a few\n\n361\n00:17:06.140 --> 00:17:07.900\nmonths from now, that would not be fun.\n\n362\n00:17:07.900 --> 00:17:12.250\nAll right, after that, there's a few other\nlike loose ends that we need to get kind\n\n363\n00:17:12.250 --> 00:17:14.770\nof tweaked on this stuff\nthat are somewhat optional.\n\n364\n00:17:16.260 --> 00:17:21.890\nDNS, when we did the set up on this,\nwe ran through the set up and\n\n365\n00:17:21.890 --> 00:17:24.930\nthe network adapter for it, at least\nthe management adapter was set for DHCP.\n\n366\n00:17:24.930 --> 00:17:27.120\nSo I'm getting a dynamic address.\n\n367\n00:17:27.120 --> 00:17:29.720\nWell, I might wanna change that address.\n\n368\n00:17:29.720 --> 00:17:34.580\nEven with dynamic addresses though,\nit might not have gotten DNS servers.\n\n369\n00:17:34.580 --> 00:17:36.280\nSo it might not be doing\nname lookup properly.\n\n370\n00:17:36.280 --> 00:17:38.360\nSo configuring the network adapter and\n\n371\n00:17:38.360 --> 00:17:42.130\nconfiguring name lookup are two\nthings that are kinda important.\n\n372\n00:17:42.130 --> 00:17:45.970\nAnd so what you'll see is when you look\nover here it's actually in two different\n\n373\n00:17:45.970 --> 00:17:46.900\nplaces.\n\n374\n00:17:46.900 --> 00:17:52.080\nSo, when I look at the configuration,\nwe got hardware up at the top section,\n\n375\n00:17:52.080 --> 00:17:56.760\nand you'll see, processors, memory,\nstorage, and networking, all right.\n\n376\n00:17:56.760 --> 00:18:01.430\nAnd when you go to networking over here\nyou'll see, not your physical adapters,\n\n377\n00:18:01.430 --> 00:18:02.760\nbut your virtual switches.\n\n378\n00:18:02.760 --> 00:18:04.850\nAnd we'll talk about\nvirtual switches later on.\n\n379\n00:18:04.850 --> 00:18:08.540\nBut right now what you have is\na management network bound to\n\n380\n00:18:08.540 --> 00:18:09.985\nthe one network adapter that I had.\n\n381\n00:18:09.985 --> 00:18:12.655\nIf I had more than one network adapter,\nthey would show up here.\n\n382\n00:18:12.655 --> 00:18:17.805\nIf we go down to network adapters,\nnow we see the physical adapters.\n\n383\n00:18:17.805 --> 00:18:22.185\nSo I can see vmnic1, vmnic0,\nthe two network adapters that I've got.\n\n384\n00:18:22.185 --> 00:18:25.365\nOne is attached to a vSwitch already so\nit's ready to go.\n\n385\n00:18:25.365 --> 00:18:26.645\nThe other one is not attached to anything.\n\n386\n00:18:26.645 --> 00:18:27.980\nIt's just sitting there doing nothing.\n\n387\n00:18:27.980 --> 00:18:30.200\nBut I can see those adapters and\n\n388\n00:18:31.490 --> 00:18:33.990\nnot all that much I can do\nwith them right here, right.\n\n389\n00:18:33.990 --> 00:18:35.900\nBut I can see if they have an IP address.\n\n390\n00:18:35.900 --> 00:18:39.420\nWe'll see IP ranges that have been\nspotted on the adapter and so\n\n391\n00:18:39.420 --> 00:18:41.800\non, it's all gonna kinda\nshow up right in here.\n\n392\n00:18:42.880 --> 00:18:47.210\nBut then if we scroll down to\nthe software side, under software,\n\n393\n00:18:47.210 --> 00:18:50.310\nthis is where we're gonna see DNS and\nrouting.\n\n394\n00:18:50.310 --> 00:18:51.540\nAnd that what I'm really after.\n\n395\n00:18:51.540 --> 00:18:55.170\nIf I wanna check my DNS servers, if I\nwanna check my default gateway, DNS and\n\n396\n00:18:55.170 --> 00:18:56.680\nrouting is where I wanna be.\n\n397\n00:18:56.680 --> 00:18:59.120\nAnd so when you go under DNS and\nrouting you will see for\n\n398\n00:18:59.120 --> 00:19:02.010\nexample I've got a preferred DNS server,\nright?\n\n399\n00:19:02.010 --> 00:19:03.040\nI don't have any alternatives.\n\n400\n00:19:03.040 --> 00:19:07.350\nThis is probably something I learned from\nDHCP, since it says DHCP right there.\n\n401\n00:19:07.350 --> 00:19:08.930\nBut I can override that if I want.\n\n402\n00:19:08.930 --> 00:19:11.910\nYou may need to put in your particular\nDNS servers to make sure this thing keeps\n\n403\n00:19:11.910 --> 00:19:12.420\nresolution.\n\n404\n00:19:12.420 --> 00:19:14.780\nIt's also got the host identification.\n\n405\n00:19:14.780 --> 00:19:15.880\nRight now, I'm just called localhost.\n\n406\n00:19:15.880 --> 00:19:17.470\nSo I might want to change that, right?\n\n407\n00:19:17.470 --> 00:19:20.880\nSomething that's a little more\nmeaningful and so we can set that\n\n408\n00:19:20.880 --> 00:19:24.810\nby going into our properties and\nadjusting those settings, okay.\n\n409\n00:19:24.810 --> 00:19:27.670\nNow, it's actually not gonna let me\nchange the host name right here.\n\n410\n00:19:27.670 --> 00:19:29.730\nWe have another place\nwhere we can change it and\n\n411\n00:19:29.730 --> 00:19:31.510\nit's usually better to\nbring it into V Center and\n\n412\n00:19:31.510 --> 00:19:34.500\nchange it in V Center, that way\nit's updated in that database too.\n\n413\n00:19:34.500 --> 00:19:36.140\nSo I'm not too worried about that.\n\n414\n00:19:36.140 --> 00:19:40.310\nBut after it, we've got obtain\nDNS server address automatically.\n\n415\n00:19:40.310 --> 00:19:44.120\nAnd we can change that to different\nadapters that we've got created.\n\n416\n00:19:44.120 --> 00:19:46.390\nOr we can manually specify it.\n\n417\n00:19:46.390 --> 00:19:47.710\nAnd so I might wanna override that.\n\n418\n00:19:47.710 --> 00:19:50.260\nAnd let's say I just want to use Google's,\nright.\n\n419\n00:19:50.260 --> 00:19:53.110\nSo I can come in a punch\nin Google's DNS servers.\n\n420\n00:19:53.110 --> 00:19:59.880\nI can override my host domain lookup\nsuffix, which I'll make it lab.ITProTV.,\n\n421\n00:19:59.880 --> 00:20:04.350\nso we can get that set, and\nkind of tweak those settings.\n\n422\n00:20:04.350 --> 00:20:06.270\nYou'll also see where you can\njump over to routing, and\n\n423\n00:20:06.270 --> 00:20:09.610\nhere's where I can set my default gateway,\nand I'll leave the default gateway alone,\n\n424\n00:20:09.610 --> 00:20:11.830\nbut if you needed to override that value,\nyou've got it right there too.\n\n425\n00:20:11.830 --> 00:20:17.520\nSo now that I've got those set,\nIt's warning me about IPv6.\n\n426\n00:20:17.520 --> 00:20:21.010\nRight now I've got a static IPv6 address,\nbut it's a link local,\n\n427\n00:20:21.010 --> 00:20:24.690\nwhich is not an address that I can use for\nanything beyond local communication.\n\n428\n00:20:24.690 --> 00:20:26.270\nSo it's just warning me about that.\n\n429\n00:20:26.270 --> 00:20:28.830\nI'm gonna go ahead and just ignore it.\n\n430\n00:20:28.830 --> 00:20:29.730\nWe also have to be careful,\n\n431\n00:20:29.730 --> 00:20:33.240\nif you change the settings here and maybe\nyou're connecting from another network,\n\n432\n00:20:33.240 --> 00:20:36.010\nyou could put a bad gateway in there and\nlock yourself out of the machine.\n\n433\n00:20:36.010 --> 00:20:38.780\nSee, you always wanna be careful of that\nwhen you configure network settings.\n\n434\n00:20:38.780 --> 00:20:41.730\nBut since this is a brand new server,\nI'm not too terribly worried about it.\n\n435\n00:20:41.730 --> 00:20:44.480\nIf this was an existing server,\nI'd be a little more concerned.\n\n436\n00:20:46.090 --> 00:20:51.570\nAll right, so let's see, that's DNS,\nwe talked about the license, time.\n\n437\n00:20:51.570 --> 00:20:54.620\nTime is one that we overlook a lot.\n\n438\n00:20:54.620 --> 00:20:57.590\nWhen you install ESX on a server,\n\n439\n00:20:57.590 --> 00:21:02.190\nit's very possible that the clock on\nthe motherboard of your server is wrong.\n\n440\n00:21:02.190 --> 00:21:04.370\nAnd, we might not care about that,\nwho cares, right?\n\n441\n00:21:04.370 --> 00:21:07.080\nI'm trying to bring up the VMs,\nthe VMs will have their own times in them,\n\n442\n00:21:07.080 --> 00:21:09.590\nwhat do I care what time\nthe host thinks it is.\n\n443\n00:21:09.590 --> 00:21:13.040\nBut there's two main reasons we need\nthat time to be right on the hosts.\n\n444\n00:21:13.040 --> 00:21:16.020\nThe first reason is log files.\n\n445\n00:21:16.020 --> 00:21:20.022\nAny time an error occurs or some other\nthing happens, there's a time stamp.\n\n446\n00:21:20.022 --> 00:21:23.058\nAnd if the clock is wrong the time stamp\nis wrong and now we don't actually know\n\n447\n00:21:23.058 --> 00:21:26.640\nwhen the error occurred especially if\nwe're comparing with other servers.\n\n448\n00:21:26.640 --> 00:21:31.360\nI might have a failure happen in a VM and\nI can't correlate that with\n\n449\n00:21:31.360 --> 00:21:34.180\na failure in the host,\nto see if it was related to the host.\n\n450\n00:21:34.180 --> 00:21:38.060\nSo I need the time to be right, if for\nnothing else than the log files.\n\n451\n00:21:38.060 --> 00:21:41.850\nThe second thing is, if we're doing\nsingle sign on and you've got things like\n\n452\n00:21:41.850 --> 00:21:45.430\nKerberos authentication,\nthey are tied to a time stamp.\n\n453\n00:21:45.430 --> 00:21:49.930\nNow if a time is incorrect enough,\nthen you're gonna have a problem.\n\n454\n00:21:49.930 --> 00:21:51.880\nYou're gonna have a problem where\nyou won't be able to authenticate.\n\n455\n00:21:51.880 --> 00:21:55.270\nAnd the most common one that I\nsee is you bring up a server and\n\n456\n00:21:55.270 --> 00:21:56.958\nwe're in the Eastern time zone here.\n\n457\n00:21:56.958 --> 00:21:58.360\nSo let's say you bring up a server and\n\n458\n00:21:58.360 --> 00:22:01.640\nit's in the Pacific time zone,\nthat's a three hour difference.\n\n459\n00:22:01.640 --> 00:22:07.080\nSo, it might be 10 o'clock here but the\nserver boots up and it shows us 7 o'clock.\n\n460\n00:22:08.120 --> 00:22:09.220\nSo, what do you do?\n\n461\n00:22:09.220 --> 00:22:13.100\nWell, if you fix the time zone,\nthe server will show us 10 o'clock.\n\n462\n00:22:13.100 --> 00:22:17.250\nBut, you could just take the clock and\nmove it to 10:00 AM, right.\n\n463\n00:22:17.250 --> 00:22:20.330\nNow, it's three hours ahead\nof where it should be.\n\n464\n00:22:20.330 --> 00:22:24.940\nAnd because it's three hours ahead, every\nKerberos authentication package you send\n\n465\n00:22:24.940 --> 00:22:27.290\nhas a time stamp that\nexceeds five minutes, and\n\n466\n00:22:27.290 --> 00:22:28.900\nthat's gonna show us a replay attack.\n\n467\n00:22:28.900 --> 00:22:30.760\nAnd it's gonna block and\nyou won't be able to authenticate.\n\n468\n00:22:30.760 --> 00:22:33.460\nSo having the correct time on\nyour servers is really important.\n\n469\n00:22:33.460 --> 00:22:35.510\nAnd not just having the correct\ntime on one server, but\n\n470\n00:22:35.510 --> 00:22:36.940\nhaving it correct everywhere.\n\n471\n00:22:36.940 --> 00:22:39.080\nHaving all of your servers synchronized,\nso\n\n472\n00:22:39.080 --> 00:22:41.270\nsetting a time server is pretty important.\n\n473\n00:22:41.270 --> 00:22:43.500\nAnd that's right above DNS and\nrouting in my settings.\n\n474\n00:22:43.500 --> 00:22:45.680\nI've got time configuration right there.\n\n475\n00:22:45.680 --> 00:22:48.640\nAnd we can come in and\nwe can set what we want that time to be.\n\n476\n00:22:48.640 --> 00:22:50.200\nNow, mine's got the right date.\n\n477\n00:22:50.200 --> 00:22:55.100\nIt is May 24th, but it's showing that\nit's 1:08 AM and if I look at my watch,\n\n478\n00:22:55.100 --> 00:22:57.890\nit is 10:24 AM, so\nmy clock is wrong, okay.\n\n479\n00:22:57.890 --> 00:23:00.030\nWhy is it wrong?\n\n480\n00:23:00.030 --> 00:23:02.534\nWell, I might be in the wrong time zone,\nbut here,\n\n481\n00:23:02.534 --> 00:23:06.113\nit's even worse cuz I'm showing 10:24,\nthis shows as 1:08.\n\n482\n00:23:06.113 --> 00:23:07.795\nThat's off by like 16 minutes.\n\n483\n00:23:07.795 --> 00:23:09.220\nThat was some good math right there.\n\n484\n00:23:09.220 --> 00:23:11.060\nSo, that's off by 16 minutes.\n\n485\n00:23:11.060 --> 00:23:12.370\nThat's not a time zone.\n\n486\n00:23:12.370 --> 00:23:15.360\nI'm not aware of any time zones\nthat are at a 16 minute offset.\n\n487\n00:23:15.360 --> 00:23:17.220\nSo, I need to fix my clock.\n\n488\n00:23:17.220 --> 00:23:19.650\nIt used to be you had\nto SSH into the box and\n\n489\n00:23:19.650 --> 00:23:22.100\ndo all this command line stuff to do it.\n\n490\n00:23:22.100 --> 00:23:25.470\nI put the command line stuff in\nthe show notes if you wanna see it.\n\n491\n00:23:25.470 --> 00:23:28.660\nBut in ESXI6 we can just\ndo it all from right here.\n\n492\n00:23:28.660 --> 00:23:31.850\nI can pull up the properties and\nI can fix that time, okay?\n\n493\n00:23:31.850 --> 00:23:38.757\nSo in my case, I need this to be 10\no'clock and it's 10:24, like that.\n\n494\n00:23:38.757 --> 00:23:42.687\nNow I can set it by hand, but\nhow accurate am I going to be?\n\n495\n00:23:42.687 --> 00:23:47.040\nWhen I look at my watch it says, well\n10:25 now, I don't know how many seconds.\n\n496\n00:23:47.040 --> 00:23:51.058\nWell, Kerberos allows for a couple of\nminutes to be off, and that's okay.\n\n497\n00:23:51.058 --> 00:23:52.890\nSo I just have to be close.\n\n498\n00:23:52.890 --> 00:23:56.270\nBut it's even better to use an NTP server.\n\n499\n00:23:56.270 --> 00:23:59.480\nIf you use an NTP server now, you can\nsynchronize time with an external hosting\n\n500\n00:23:59.480 --> 00:24:04.365\nof all of your servers synchronize\ntime and now you're in better shape.\n\n501\n00:24:04.365 --> 00:24:05.705\nAnd now it'll take care of things.\n\n502\n00:24:05.705 --> 00:24:08.975\nIf you ever have your time zone wrong,\nyou'll still have to deal with that, but\n\n503\n00:24:08.975 --> 00:24:10.585\nat least your clock will be right.\n\n504\n00:24:10.585 --> 00:24:12.675\nAnd your clock will by synchronized\namongst all your machines.\n\n505\n00:24:12.675 --> 00:24:14.815\nSo you can go into your options and\n\n506\n00:24:14.815 --> 00:24:17.795\nyou can specify who you\nwant your NTP server to be.\n\n507\n00:24:17.795 --> 00:24:23.680\nSo I could add one in, like pool.ntp.org\nor whoever it is that I want to use.\n\n508\n00:24:23.680 --> 00:24:25.360\nMaybe you want to use\nthe Naval Observatory or\n\n509\n00:24:25.360 --> 00:24:26.640\nsomebody, you can punch them in.\n\n510\n00:24:28.300 --> 00:24:32.130\nAnd then, whoops,\nthen we have to turn it on.\n\n511\n00:24:32.130 --> 00:24:35.610\nSo this is something that a lot of people\nmiss including myself right there,\n\n512\n00:24:35.610 --> 00:24:38.230\nis that I added pool.ntp.org.\n\n513\n00:24:38.230 --> 00:24:41.150\nAnd see how it's got this Restart NTP\nservice to apply changes?\n\n514\n00:24:41.150 --> 00:24:42.780\nIf it was all ready running\nI would need to do that,\n\n515\n00:24:42.780 --> 00:24:44.420\nbut the reality is it's not running.\n\n516\n00:24:44.420 --> 00:24:47.610\nIf I go under General,\nsee how it's got start and stop manually?\n\n517\n00:24:47.610 --> 00:24:49.940\nAnd the Start button is lit,\nso it's not even running.\n\n518\n00:24:49.940 --> 00:24:53.000\nI'm gonna choose start and stop with host.\n\n519\n00:24:53.000 --> 00:24:55.730\nSo every time the host boots up,\nit starts the NTP client.\n\n520\n00:24:55.730 --> 00:24:57.560\nAnd when you shut it down,\nyou go ahead and stop the NTP client.\n\n521\n00:24:57.560 --> 00:24:58.620\nSo it's tied to the host.\n\n522\n00:24:58.620 --> 00:25:00.170\nThat's normally what we want, right?\n\n523\n00:25:00.170 --> 00:25:03.040\nSo I'm gonna choose that,\nand I'll start it.\n\n524\n00:25:03.040 --> 00:25:06.910\nSo now that it's up,\nI'm gonna start synchronizing my clock\n\n525\n00:25:06.910 --> 00:25:10.680\nwith Pool.atp.org or\nwhoever it is you choose.\n\n526\n00:25:10.680 --> 00:25:13.480\nSo now I don't have to worry about\ngetting the seconds right on this.\n\n527\n00:25:13.480 --> 00:25:17.540\nIt's going to synchronize and\nwe'll have a correct time on our host.\n\n528\n00:25:17.540 --> 00:25:19.310\nSo that'll take care of that.\n\n529\n00:25:19.310 --> 00:25:20.780\nAnd so\nnow I can see that update right there,\n\n530\n00:25:20.780 --> 00:25:23.600\nI'm gonna set it to synchronize with\nthe time server and I'm in business.\n\n531\n00:25:23.600 --> 00:25:25.950\nYou're probably doing this all\nready with a lot of your gear,\n\n532\n00:25:25.950 --> 00:25:28.450\nyour routers, your switches,\nyou probably have them synchronizing.\n\n533\n00:25:28.450 --> 00:25:29.620\nThis is just one more.\n\n534\n00:25:29.620 --> 00:25:31.550\nIf you have a Windows Active Directory,\n\n535\n00:25:31.550 --> 00:25:33.660\nyou can synchronize against any\nof your domain controllers and\n\n536\n00:25:33.660 --> 00:25:37.040\nthat's a great thing to do in my opinion\nis set up a domain controller to be your\n\n537\n00:25:37.040 --> 00:25:39.920\nlocal time source and\nhave all of your devices sync off it.\n\n538\n00:25:39.920 --> 00:25:41.710\nThat way, you control your own time.\n\n539\n00:25:41.710 --> 00:25:44.090\nIf you use external time servers,\n\n540\n00:25:44.090 --> 00:25:47.850\nthere's always a risk that somebody\ncould come in with a NTP attack and\n\n541\n00:25:47.850 --> 00:25:51.370\ntry and overwrite that and start to kind\nof wreck some havoc on your network.\n\n542\n00:25:51.370 --> 00:25:54.620\nSo setting up your own internal time\nsources is a pretty useful thing.\n\n543\n00:25:56.280 --> 00:25:57.020\nAll right.\nWhat else?\n\n544\n00:25:57.020 --> 00:26:01.940\nI think the only other\nthing I have is SSH.\n\n545\n00:26:01.940 --> 00:26:03.000\nSSH.\n\n546\n00:26:03.000 --> 00:26:06.510\nSo I've been using\nthe GUI up to this point.\n\n547\n00:26:06.510 --> 00:26:08.580\nThat's because I'm just\ndoing the bare minimum and\n\n548\n00:26:08.580 --> 00:26:09.800\nwe're gonna add it to v center anyway.\n\n549\n00:26:09.800 --> 00:26:10.730\nWe'll do everything from v center.\n\n550\n00:26:10.730 --> 00:26:15.950\nBut, from time to time, you might\nneed shell access to your server, and\n\n551\n00:26:15.950 --> 00:26:17.950\nshell access to the server\nis disabled by default,\n\n552\n00:26:17.950 --> 00:26:19.810\nI can't get to the terminal by default.\n\n553\n00:26:19.810 --> 00:26:22.990\nSo, if I want that,\nI need to turn it on, and\n\n554\n00:26:22.990 --> 00:26:25.900\nwe can turn it on pretty easily in our\nsecurity settings, so let me get to that.\n\n555\n00:26:27.190 --> 00:26:31.260\nSo to get to it, I'm under configuration\nright so I chose my host over here and\n\n556\n00:26:31.260 --> 00:26:35.190\nI went to the configuration tab and\nthen under configuration,\n\n557\n00:26:35.190 --> 00:26:38.920\nif you look in here under software,\nyou'll see security profile.\n\n558\n00:26:38.920 --> 00:26:42.780\nNow in the future we'll manage,\nwhoops, sorry, going crazy here.\n\n559\n00:26:42.780 --> 00:26:45.210\nWe'll manage our security\nprofiles from vCenter.\n\n560\n00:26:45.210 --> 00:26:49.130\nThat's where you wanna, you want to\nhave a centralized security profile.\n\n561\n00:26:49.130 --> 00:26:50.540\nBut I don't have vcenter right now.\n\n562\n00:26:50.540 --> 00:26:52.980\nSo for right now I'm going\nto manage it myself, and\n\n563\n00:26:52.980 --> 00:26:56.840\nif you look at the security profile,\nyou'll see things like the firewall, and\n\n564\n00:26:56.840 --> 00:27:00.120\nif you just take a quick glance at this,\nI've heard this from a lot of people,\n\n565\n00:27:00.120 --> 00:27:04.810\nif you look in here, you can find SSH,\nit's in here somewhere, I will find it,\n\n566\n00:27:04.810 --> 00:27:09.670\nthere it is SSH server and so\non the firewall it's saying allow incoming\n\n567\n00:27:09.670 --> 00:27:15.700\nconnections and it's allowing\nSSH server TCP port 22 from all.\n\n568\n00:27:15.700 --> 00:27:16.410\nIt's allowing SSH.\n\n569\n00:27:16.410 --> 00:27:19.020\nSo I should be able to SSH in this box,\nright?\n\n570\n00:27:20.100 --> 00:27:21.150\nNot right.\n\n571\n00:27:21.150 --> 00:27:26.970\nWhat it's doing, is it's allowing all of\nthe possible services that ESX can run.\n\n572\n00:27:26.970 --> 00:27:30.290\nSo it's vSphere stuff, right,\nso I can vSphere web access.\n\n573\n00:27:30.290 --> 00:27:32.320\nIt's how I downloaded their\nclient in the first place.\n\n574\n00:27:32.320 --> 00:27:36.280\nBut there's other things like SSH\nthat it's open on the firewall, but\n\n575\n00:27:36.280 --> 00:27:37.750\nthe service isn't running.\n\n576\n00:27:37.750 --> 00:27:41.650\nIt's not actually running to connect with,\nVMware turns all this stuff off and\n\n577\n00:27:41.650 --> 00:27:45.800\nthen you have to turn it\non if you want it on.\n\n578\n00:27:45.800 --> 00:27:48.560\nThings like SNMP Server,\nit's got it open on the firewall but\n\n579\n00:27:48.560 --> 00:27:49.760\nthe service is not running.\n\n580\n00:27:49.760 --> 00:27:51.830\nWe've gotta configure it,\ngive it a community name and\n\n581\n00:27:51.830 --> 00:27:53.720\nall that stuff before it actually runs.\n\n582\n00:27:53.720 --> 00:27:55.060\nThat's up to us to set it up.\n\n583\n00:27:55.060 --> 00:27:57.220\nThey don't wanna turn that on,\non our behalf.\n\n584\n00:27:57.220 --> 00:27:59.610\nBut it's also nice that we don't have\nto mess around with the firewall.\n\n585\n00:27:59.610 --> 00:28:01.690\nThey've all ready opened those ports.\n\n586\n00:28:01.690 --> 00:28:04.280\nSo what I need to do,\nis I need to scroll up here to the top,\n\n587\n00:28:04.280 --> 00:28:05.870\nwhere I've got services.\n\n588\n00:28:05.870 --> 00:28:08.760\nAnd here, I can look at all of\nthe services that are on the system,\n\n589\n00:28:08.760 --> 00:28:11.050\nincluding SSH right there.\n\n590\n00:28:11.050 --> 00:28:13.350\nBut this screen doesn't tell\nme if they're running or not.\n\n591\n00:28:13.350 --> 00:28:14.680\nI just see them.\n\n592\n00:28:14.680 --> 00:28:16.110\nI need to go in to Properties.\n\n593\n00:28:17.450 --> 00:28:19.510\nAnd now I'm looking at the profile.\n\n594\n00:28:19.510 --> 00:28:23.280\nAnd now I can see,\nthere is SNMP Server, stopped.\n\n595\n00:28:23.280 --> 00:28:25.410\nIt's installed, it's just not running.\n\n596\n00:28:25.410 --> 00:28:26.695\nAnd you can see what is running.\n\n597\n00:28:26.695 --> 00:28:28.600\nLoad-based teaming daemon.\n\n598\n00:28:28.600 --> 00:28:31.630\nThat's so that I can bond network\nadaptors, do teaming across them.\n\n599\n00:28:31.630 --> 00:28:34.510\nSo it's running even though I\nhaven't bonded anything yet.\n\n600\n00:28:34.510 --> 00:28:36.130\nOr the NTP daemon.\n\n601\n00:28:36.130 --> 00:28:37.120\nI had to start that.\n\n602\n00:28:37.120 --> 00:28:38.620\nThat wasn't running earlier.\n\n603\n00:28:38.620 --> 00:28:42.580\nI started it when we set up the time\nserver, so I can see that it is running.\n\n604\n00:28:42.580 --> 00:28:43.570\nSyslog is running.\n\n605\n00:28:43.570 --> 00:28:44.850\nThat's kind of important.\n\n606\n00:28:44.850 --> 00:28:46.200\nWe need our logs.\n\n607\n00:28:46.200 --> 00:28:47.740\nSSH is stopped.\n\n608\n00:28:47.740 --> 00:28:48.750\nIt's not running.\n\n609\n00:28:48.750 --> 00:28:53.630\nSo I need to start that thing up,\nand if you just highlight SSH and\n\n610\n00:28:53.630 --> 00:28:57.460\nhit options, so\nthe options button way down there.\n\n611\n00:28:57.460 --> 00:28:59.280\nIn the options it's just\nlike the time server.\n\n612\n00:28:59.280 --> 00:29:02.630\nI can say start and stop with host,\nor I can just start it manually.\n\n613\n00:29:02.630 --> 00:29:04.860\nMaybe I just need to use SSH for\na little while.\n\n614\n00:29:04.860 --> 00:29:07.810\nSo I can start it now, connect, do my\nthing, and then come and stop it again.\n\n615\n00:29:08.990 --> 00:29:11.730\nMaybe I don't want that attack surface,\nright?\n\n616\n00:29:11.730 --> 00:29:13.410\nWe'll see the firewall in another episode,\nand\n\n617\n00:29:13.410 --> 00:29:16.730\nwhat's better is, you can turn on SSH and\nleave it running, and\n\n618\n00:29:16.730 --> 00:29:20.650\nthen go in the firewall and list IP\naddresses that are allowed to connect.\n\n619\n00:29:20.650 --> 00:29:24.020\nDon't just allow everybody to connect,\nsay I need my workstation, and\n\n620\n00:29:24.020 --> 00:29:25.420\nmaybe some of the other network admins.\n\n621\n00:29:25.420 --> 00:29:26.450\nI want them to be able to SSH.\n\n622\n00:29:26.450 --> 00:29:26.960\nAnd that's it.\n\n623\n00:29:26.960 --> 00:29:29.050\nSo that gives us that\nextra level of security.\n\n624\n00:29:29.050 --> 00:29:30.320\nYou can leave SSH on all the time.\n\n625\n00:29:30.320 --> 00:29:32.670\nI'm gonna go ahead and\nstart it up, though.\n\n626\n00:29:32.670 --> 00:29:34.460\nAnd now I'm running SSH.\n\n627\n00:29:34.460 --> 00:29:36.520\nIt's still set to start and\nstop manually, though.\n\n628\n00:29:36.520 --> 00:29:38.940\nI'm gonna set it to start and\nstop at the host.\n\n629\n00:29:38.940 --> 00:29:40.390\nAnd I'll say OK.\n\n630\n00:29:40.390 --> 00:29:44.220\nAnd I can verify it's running by looking\nhere, I see it is now running and\n\n631\n00:29:44.220 --> 00:29:45.620\nI should be able to use it.\n\n632\n00:29:45.620 --> 00:29:46.620\nAll right, so let's test that out.\n\n633\n00:29:46.620 --> 00:29:48.280\nI'm going to fire up Putty.\n\n634\n00:29:48.280 --> 00:29:52.440\nYou can use any SSH client, if you are on\na Mac or Linux box, they've got SSH built\n\n635\n00:29:52.440 --> 00:29:56.650\nin, in the Windows world we have to go\nout and get one eventually Microsoft will\n\n636\n00:29:56.650 --> 00:29:59.530\nwake up and package one in,\nI don't know whats going on there.\n\n637\n00:29:59.530 --> 00:30:05.580\nI can punch in the server's IP Address,\nand SSH uses TCP port 22 so\n\n638\n00:30:05.580 --> 00:30:09.570\nI'll leave that as default, and\nI'll go ahead and open it up.\n\n639\n00:30:09.570 --> 00:30:10.880\nAnd I get that certificate again.\n\n640\n00:30:10.880 --> 00:30:12.820\nRight now I haven't been able\nto validate that certificate, so\n\n641\n00:30:12.820 --> 00:30:14.580\nI'll go ahead and say yes.\n\n642\n00:30:14.580 --> 00:30:16.440\nAnd now, it's gonna prompt me to login.\n\n643\n00:30:16.440 --> 00:30:18.900\nAnd I'll login with\nthat root user name and\n\n644\n00:30:18.900 --> 00:30:21.520\npassword that we set during the install.\n\n645\n00:30:21.520 --> 00:30:24.280\nAnd now, here I am, okay?\n\n646\n00:30:24.280 --> 00:30:25.860\nAnd it's telling me, the time and\n\n647\n00:30:25.860 --> 00:30:27.900\ndate of this login have been\nsent to the system log.\n\n648\n00:30:27.900 --> 00:30:29.930\nSo it's recording that I've been here, and\n\n649\n00:30:29.930 --> 00:30:35.500\nI can get VMware support if I need help\nwith whatever damage I can do to a server.\n\n650\n00:30:35.500 --> 00:30:38.370\nAnd then after that, it's just\ntelling me that I'm the ESXI shell and\n\n651\n00:30:38.370 --> 00:30:41.140\nit can be disabled by\nan administrative user.\n\n652\n00:30:41.140 --> 00:30:42.860\nWe don't have to have a safe running,\nright?\n\n653\n00:30:42.860 --> 00:30:45.730\nIt wasn't running a minute ago,\nbut now it is.\n\n654\n00:30:45.730 --> 00:30:48.970\nSo now that I'm in here, it's Linux.\n\n655\n00:30:48.970 --> 00:30:50.500\nRight.\nIt's actually a modified version of\n\n656\n00:30:50.500 --> 00:30:54.890\nSusi Linux, and back in the day, it\nused to be Red Hat, now it's Susi Linux.\n\n657\n00:30:54.890 --> 00:30:57.750\nAnd so, you can dive around in here and\nlook at stuff.\n\n658\n00:30:57.750 --> 00:31:01.550\nIt's not ideal to mess with stuff but\nyou can look at things.\n\n659\n00:31:01.550 --> 00:31:04.770\nThere are some settings they don't have\na GUI element for so you can drop to\n\n660\n00:31:04.770 --> 00:31:08.240\nthe shell and you can go in and find the\nconfig files and start to work with them.\n\n661\n00:31:08.240 --> 00:31:10.340\nBut you can do things like monitor,\n\n662\n00:31:10.340 --> 00:31:15.780\nyou can do, we can do like top up,\ntop's not there either.\n\n663\n00:31:15.780 --> 00:31:19.620\nWhat are some of the examples and\nstuff that we can do?\n\n664\n00:31:19.620 --> 00:31:20.250\nThere we go.\n\n665\n00:31:20.250 --> 00:31:21.880\ndf -h.\nThat will show us our so\n\n666\n00:31:21.880 --> 00:31:25.230\nI can look at my drives and\nwhat's being eaten up, you know,\n\n667\n00:31:25.230 --> 00:31:28.880\nhow much space I have available or\nso on, so I can start to see that.\n\n668\n00:31:28.880 --> 00:31:32.420\nSo when I installed my operating system,\nhow much space did it actually use?\n\n669\n00:31:32.420 --> 00:31:36.324\nWell it looks like I'm using\nabout 972 megs on datastore1,\n\n670\n00:31:36.324 --> 00:31:38.936\nwhich is technically an empty data store.\n\n671\n00:31:38.936 --> 00:31:40.205\nI don't have an VMs created, so\n\n672\n00:31:40.205 --> 00:31:42.467\nit's got placeholders in place\nthat are eating that up.\n\n673\n00:31:42.467 --> 00:31:47.004\nAnd we've got some other stores being used\ndifferent places, We can navigate around\n\n674\n00:31:47.004 --> 00:31:50.960\nand start to look at some of our\nconfig files and other information.\n\n675\n00:31:50.960 --> 00:31:54.940\nAnd you'll see a lot of VMware proprietary\nstuff kinda tucked away in here.\n\n676\n00:31:54.940 --> 00:31:57.420\nThis is all part of the system.\n\n677\n00:31:57.420 --> 00:32:01.820\nAnd typically, you're not going to\nwant to jump in here and mess around.\n\n678\n00:32:01.820 --> 00:32:06.120\nBut there are times,\nthere's actually a whole set of utilities.\n\n679\n00:32:06.120 --> 00:32:13.010\nIf I go into /usr/sbin and take a look\naround, you'll see that there's a lot\n\n680\n00:32:13.010 --> 00:32:18.670\nof commands in here that are ESX,\nthere we go, right here.\n\n681\n00:32:18.670 --> 00:32:24.820\nThis whole set, let me just try and\nget these on the screen, there we go.\n\n682\n00:32:24.820 --> 00:32:26.680\nSo this whole little\nblock on the left side,\n\n683\n00:32:26.680 --> 00:32:30.960\nesxcfg, that's the ESX configuration tool.\n\n684\n00:32:30.960 --> 00:32:34.320\nAnd so you'll see all sorts of different\nones down here for doing configuration.\n\n685\n00:32:34.320 --> 00:32:37.370\nYou can configure your network cards,\nyou can do scans.\n\n686\n00:32:37.370 --> 00:32:40.630\nYou can do SCSI device lists and so on.\n\n687\n00:32:40.630 --> 00:32:44.760\nAll of this is for working with the ESX\nserver, and that's what I wanted.\n\n688\n00:32:44.760 --> 00:32:48.630\nI tried to run top earlier, and there's\nesxtop which is specifically for it.\n\n689\n00:32:48.630 --> 00:32:51.070\nI should have used that instead.\n\n690\n00:32:51.070 --> 00:32:54.870\nSo we can jump in and\nstart to use these utilities.\n\n691\n00:32:54.870 --> 00:32:57.920\nAnd now I can see performance\nutilization on my system.\n\n692\n00:32:57.920 --> 00:33:01.160\nI'm only doing SSH, so\nthat's why I was up there at the top.\n\n693\n00:33:01.160 --> 00:33:04.331\nBut we can start to see what our system is\nup to and how the performance is running,\n\n694\n00:33:04.331 --> 00:33:07.050\nand all the different things that\nyou might need to do from the shell.\n\n695\n00:33:07.050 --> 00:33:08.400\nNot something we're gonna do everyday.\n\n696\n00:33:08.400 --> 00:33:11.420\nBut something that we can turn on and\nyou may want to do as one of the first\n\n697\n00:33:11.420 --> 00:33:13.970\nconfiguration steps of\ngetting your box turned on.\n\n698\n00:33:13.970 --> 00:33:14.510\n>> All right, Don.\n\n699\n00:33:14.510 --> 00:33:16.737\nThank you for showing us how\nto get the hypervisor going.\n\n700\n00:33:16.737 --> 00:33:20.910\nLooking forward to seeing some vCenter\nmanagement in some upcoming episodes.\n\n701\n00:33:20.910 --> 00:33:23.030\nIt does look like we're coming\nto the end of another episode.\n\n702\n00:33:23.030 --> 00:33:25.238\nWould you like to say any final words?\n\n703\n00:33:25.238 --> 00:33:26.701\n>> Final, did my server die?\n\n704\n00:33:26.701 --> 00:33:29.209\n>> [LAUGH]\n>> Final words.\n\n705\n00:33:29.209 --> 00:33:32.873\nSo just a couple things that, you probably\nwanna make some kind of a document for\n\n706\n00:33:32.873 --> 00:33:35.170\nyour work that says every\ntime I set up an ESXI box,\n\n707\n00:33:35.170 --> 00:33:38.420\nthese are the steps that I follow,\nlike a template, right?\n\n708\n00:33:38.420 --> 00:33:41.799\nAnd here,\nit's up to me as a human being to do this.\n\n709\n00:33:41.799 --> 00:33:44.028\nThere's ways to make it\nwhere it's not up to me.\n\n710\n00:33:44.028 --> 00:33:47.482\nSo if you do host profiles in vCenter,\nsomebody can connect the ESX box,\n\n711\n00:33:47.482 --> 00:33:50.610\nconfigure it however they want,\ncompletely wrong if they want.\n\n712\n00:33:50.610 --> 00:33:54.081\nAnd when it connects, the host profile\npushed down to get it all set right again.\n\n713\n00:33:54.081 --> 00:33:56.330\nAll right, so\nwe'll learn about host profiles later.\n\n714\n00:33:56.330 --> 00:34:00.921\nThe other thing is you can use autodeploy,\nwhich we'll see in another episode also,\n\n715\n00:34:00.921 --> 00:34:03.919\nto take hardware and\nautomatically deploy ESX onto it,\n\n716\n00:34:03.919 --> 00:34:06.620\npre-configured with\neverything that we need.\n\n717\n00:34:06.620 --> 00:34:08.385\nSo we don't have to do\nit by hand like this,\n\n718\n00:34:08.385 --> 00:34:11.572\nbut I wanted to make sure that we saw\nthat, so if you get questions on the exam,\n\n719\n00:34:11.572 --> 00:34:14.342\nyou'll know about it,\nbecause they expect you to know both ways.\n\n720\n00:34:14.342 --> 00:34:16.110\nIn real life we have a lot of options.\n\n721\n00:34:16.110 --> 00:34:19.079\n>> Well we appreciate all that great\ninformation and we appreciate you,\n\n722\n00:34:19.079 --> 00:34:20.701\nthe viewer, signing up for ITProTV.\n\n723\n00:34:20.701 --> 00:34:22.117\nI've been your host, Wes Bryan.\n\n724\n00:34:22.117 --> 00:34:23.116\n>> And I'm Don Pezet.\n\n725\n00:34:23.116 --> 00:34:25.252\n>> And we'll see you next time.\n\n726\n00:34:25.252 --> 00:34:30.244\n[MUSIC]\n\n",
          "vimeoId": "168054788"
        },
        {
          "description": "In this episode, Wes and Don demonstrate installing and configuring vCenter to manage ESXi host machines. They talk about the system requirements to run vCenter as well as the vCenter Server Appliance (vCSA) and using the Platform Services Controller.",
          "length": "1845",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-3-1-installing_vmware_vcenter-052416-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-3-1-installing_vmware_vcenter-052416-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-3-1-installing_vmware_vcenter-052416-1-sm.jpg",
          "title": "Installing VMware vCenter",
          "transcript": "WEBVTT\n\n1\n00:00:00.021 --> 00:00:10.021\n[MUSIC]\n\n2\n00:00:11.909 --> 00:00:14.590\nWelcome back to another exciting\nepisode here at IT Pro TV.\n\n3\n00:00:14.590 --> 00:00:16.240\nI'm your host Wes Bryan.\n\n4\n00:00:16.240 --> 00:00:19.850\nAnd today's upside we're continuing\nthrough our series in VM wear.\n\n5\n00:00:19.850 --> 00:00:24.430\nMore specifically we're looking at the VM\nwear certified professional version 6.\n\n6\n00:00:24.430 --> 00:00:26.580\nJoining me back in the studios\ntoday is none other than Mr.\n\n7\n00:00:26.580 --> 00:00:27.670\nDon Pezet to help us out.\n\n8\n00:00:27.670 --> 00:00:28.470\nDon, how are you doing sir?\n\n9\n00:00:28.470 --> 00:00:30.930\n>> I am doing swell Wes,\ndive right back in.\n\n10\n00:00:30.930 --> 00:00:34.170\nAnd in this episode we\nare tackling vCenter which I'm\n\n11\n00:00:34.170 --> 00:00:35.360\nkinda glad that we're doing.\n\n12\n00:00:35.360 --> 00:00:39.550\nI had to keep saying the last two episodes\nthat we're using the native client but\n\n13\n00:00:39.550 --> 00:00:41.810\nwe're not gonna do that for very long.\n\n14\n00:00:41.810 --> 00:00:45.170\nUltimately, if you have\nmore than one ESX box,\n\n15\n00:00:45.170 --> 00:00:49.770\nwhich you most likely will Then you're\ngoing to want to essentially manage them.\n\n16\n00:00:49.770 --> 00:00:52.730\nAnd the way that you essentially\nmanage them is with vCenter.\n\n17\n00:00:52.730 --> 00:00:56.090\nSo vCenter is kind of a critical piece and\nwhen you go on VMware's website and\n\n18\n00:00:56.090 --> 00:00:59.190\nyou go to buy,\nlet's say you just wanna buy ESX.\n\n19\n00:00:59.190 --> 00:01:02.340\nThat you'll almost always see it\npackaged as the vSphere Suite.\n\n20\n00:01:02.340 --> 00:01:05.920\nESX combined with vCenter because\nthat's how everybody uses it.\n\n21\n00:01:05.920 --> 00:01:08.160\nSo it is a rare day that\nthey're deployed separate.\n\n22\n00:01:08.160 --> 00:01:10.800\nAnd the only time I really see it\ndeployed separate is when people are on\n\n23\n00:01:10.800 --> 00:01:14.590\na shoestring budget where you just\nwanna get it as cheap as possible,\n\n24\n00:01:14.590 --> 00:01:16.120\nget a few ESX boxes up.\n\n25\n00:01:16.120 --> 00:01:21.410\nAnd my advice to people like that is maybe\nVMWare's not a great solution for you.\n\n26\n00:01:21.410 --> 00:01:24.940\nThat you should probably look into some of\nthe free and open sourced ones instead.\n\n27\n00:01:24.940 --> 00:01:27.410\nBecause you can get some\ncentralized management with them.\n\n28\n00:01:27.410 --> 00:01:31.630\nIf you deploy ESX by itself,\nyou don't get any centralized management.\n\n29\n00:01:31.630 --> 00:01:35.150\nIt becomes difficult to manage that\nway if you have more than a few boxes.\n\n30\n00:01:35.150 --> 00:01:37.280\nSo if you have say three or\n\n31\n00:01:37.280 --> 00:01:40.686\nmore, it's really a good idea\nto have vCenter in place.\n\n32\n00:01:40.686 --> 00:01:43.875\nvCenter used to be pretty challenging\nto get up and running and\n\n33\n00:01:43.875 --> 00:01:45.355\nit was a bit of a behemoth.\n\n34\n00:01:45.355 --> 00:01:48.235\nThey've really made it a lot easier for\nus in recent years, so,\n\n35\n00:01:48.235 --> 00:01:50.490\nit's pretty easy to get vCenter up and\ngoing.\n\n36\n00:01:50.490 --> 00:01:54.205\nNow,you can control all of your systems\nall from one place and have some really\n\n37\n00:01:54.205 --> 00:01:57.450\npowerful management capabilities that\njust make it absolutely worthwhile.\n\n38\n00:01:57.450 --> 00:01:59.990\n>> So Don, when we go to use or\ninstall vCenter,\n\n39\n00:01:59.990 --> 00:02:04.240\nit seems like there's gonna be some\nrequirements that we need to know.\n\n40\n00:02:04.240 --> 00:02:06.330\n>> Absolutely, yeah,\nso vCenter is a server.\n\n41\n00:02:06.330 --> 00:02:09.890\nSo we've gotta have a server, but the nice\nthing here is it doesn't have to be a real\n\n42\n00:02:09.890 --> 00:02:11.950\nserver, it can be a virtual server.\n\n43\n00:02:11.950 --> 00:02:15.780\nSo V center can actually run\nas a VM if you want it to.\n\n44\n00:02:15.780 --> 00:02:20.280\nBe careful because if\nvCenter is running a a VM and\n\n45\n00:02:20.280 --> 00:02:23.850\nthe host that it's on\nbreaks down what happens?\n\n46\n00:02:23.850 --> 00:02:25.950\nNow you lose access to vCenter.\n\n47\n00:02:25.950 --> 00:02:27.890\nHow do you manage the rest of your hosts?\n\n48\n00:02:27.890 --> 00:02:33.680\nIf you deploy vCenter as a VM,\nbe aware of that risk.\n\n49\n00:02:33.680 --> 00:02:37.000\nThat risk that you could have where\nyou get locked out of vCenter and\n\n50\n00:02:37.000 --> 00:02:38.550\nnow you've got to manage\nthings from the command line.\n\n51\n00:02:38.550 --> 00:02:39.590\nIt's not a fun time.\n\n52\n00:02:41.050 --> 00:02:43.370\nWith VMware there's two\nways we can deploy it.\n\n53\n00:02:43.370 --> 00:02:47.910\nWe can deploy it as a VM or\nwe can deploy it as a physical server.\n\n54\n00:02:47.910 --> 00:02:50.180\nEither way,\nit's actually got the same requirements.\n\n55\n00:02:50.180 --> 00:02:53.410\nThere's a certain amount of memory that\nit needs, and disk space, and so on.\n\n56\n00:02:53.410 --> 00:02:55.720\nAnd, let me see,\ndo I have their page pulled up?\n\n57\n00:02:55.720 --> 00:02:56.780\nYeah, let me pull this up.\n\n58\n00:02:56.780 --> 00:03:01.145\nSo I'll put the link for this in the show\nnotes, but this is the vCenter Server\n\n59\n00:03:01.145 --> 00:03:05.940\n6.0 Installation Best Practices\nas Set by VM ware.\n\n60\n00:03:05.940 --> 00:03:09.490\nAnd what you'll see is they lay out\nsome basic hardware requirements\n\n61\n00:03:09.490 --> 00:03:10.670\nin here somewhere.\n\n62\n00:03:10.670 --> 00:03:13.630\nAnd shoot, I have to click on\nthe links and all that stuff.\n\n63\n00:03:13.630 --> 00:03:15.620\nBut it is buried away in here.\n\n64\n00:03:15.620 --> 00:03:18.510\nBut there's two different sets of\nrequirements that are almost the same.\n\n65\n00:03:18.510 --> 00:03:21.270\nBecause it basically depends\non how we deploy it.\n\n66\n00:03:21.270 --> 00:03:25.360\nSo you've got vCenter server for\nwindows, right?\n\n67\n00:03:25.360 --> 00:03:29.900\nIf I want to have a stand alone vCenter\nserver which is what I recommend.\n\n68\n00:03:29.900 --> 00:03:33.950\nYou are going to need a hardware box,\nthat's running Microsoft windows and\n\n69\n00:03:33.950 --> 00:03:36.930\nit's got to be a windows server 2008 r2 or\nWindows Sever 2012.\n\n70\n00:03:36.930 --> 00:03:38.570\nIt's got to be one of those two.\n\n71\n00:03:38.570 --> 00:03:40.940\nThey don't support Windows Sever\n2008 without R2 and\n\n72\n00:03:40.940 --> 00:03:43.000\nthey definitely don't\nsupport anything earlier.\n\n73\n00:03:43.000 --> 00:03:45.180\nGot to be one of those two.\n\n74\n00:03:45.180 --> 00:03:48.710\nWindows Sever 2016 is not on\ntheir official support list yet\n\n75\n00:03:48.710 --> 00:03:52.750\nbecause as of the filming of this episode,\nWindows Sever 2016 is not officially out.\n\n76\n00:03:52.750 --> 00:03:54.500\nIt's not actually RTM'd yet.\n\n77\n00:03:54.500 --> 00:03:57.970\nSo it is not supported, but\nyou have to got have one of those too.\n\n78\n00:03:57.970 --> 00:04:02.330\nThen, if you look down,\nyou'll see vCenter Server Appliance.\n\n79\n00:04:03.490 --> 00:04:08.470\nThat is a pre-built virtual machine\nthat already has the vCenter on it.\n\n80\n00:04:08.470 --> 00:04:12.080\nSo if you want to deploy it as a vM,\nyou don't have to install vCenter,\n\n81\n00:04:12.080 --> 00:04:14.850\nit's already installed,\nyou just download this vM and\n\n82\n00:04:14.850 --> 00:04:18.680\nyou import it into one of the esx boxes\nand now it's up and running as a vM.\n\n83\n00:04:18.680 --> 00:04:20.300\nSo, if you wanna run it as an appliance,\nthat's great.\n\n84\n00:04:20.300 --> 00:04:23.510\nNow, there's a huge difference\nbetween the two, because this one,\n\n85\n00:04:23.510 --> 00:04:26.540\nwhen we install it ourselves,\nwe have to install it on Windows.\n\n86\n00:04:26.540 --> 00:04:29.060\nIt's gotta be Windows Server 2008 R2 or\n2012.\n\n87\n00:04:29.060 --> 00:04:34.020\nBut when you do the appliance,\nthe appliance actually runs SUSE Linux.\n\n88\n00:04:34.020 --> 00:04:36.800\nSo, it's vCenter running on top of Linux.\n\n89\n00:04:36.800 --> 00:04:39.880\nLet's say that you're\nan all SUSE Linux shop.\n\n90\n00:04:39.880 --> 00:04:42.130\nWell, VMware does not allow\nyou to download vCenter and\n\n91\n00:04:42.130 --> 00:04:43.650\ninstall it on Linux yourself.\n\n92\n00:04:43.650 --> 00:04:46.720\nThe only way to run it on Linux\nis using their appliance.\n\n93\n00:04:46.720 --> 00:04:49.620\nSo, it's kind of a weird thing\nthat It'll run on Linux.\n\n94\n00:04:49.620 --> 00:04:50.840\nBut, they set it up and manage it.\n\n95\n00:04:50.840 --> 00:04:52.410\nThey want it to be set up their way.\n\n96\n00:04:52.410 --> 00:04:55.620\nOn Windows, you can install it yourself,\nand get it up and going.\n\n97\n00:04:55.620 --> 00:04:59.390\nSo, that's that big difference,\nis the operating system under the hood.\n\n98\n00:04:59.390 --> 00:05:01.720\nThe hardware requirements\nare about the same.\n\n99\n00:05:01.720 --> 00:05:04.479\nSo, if I jump in here to the hardware\nrequirements, they've got those listed.\n\n100\n00:05:05.880 --> 00:05:07.770\nAnd we can pull them up and take a look.\n\n101\n00:05:07.770 --> 00:05:08.330\nAnd you'll see,\n\n102\n00:05:08.330 --> 00:05:15.120\nbasically how they list it is based on how\nmany systems we intend to be managing.\n\n103\n00:05:15.120 --> 00:05:18.070\nSo for example,\nif you have a tiny environment, and\n\n104\n00:05:18.070 --> 00:05:21.980\nwhat VMware calls tiny is\nten hosts a hundred VM's.\n\n105\n00:05:21.980 --> 00:05:23.940\nSo really that's a lot of small and\n\n106\n00:05:23.940 --> 00:05:26.800\neven medium businesses right\nthere fall in that tiny range.\n\n107\n00:05:26.800 --> 00:05:29.300\nYou need two CPU's and\neight gigs of RAM, but\n\n108\n00:05:29.300 --> 00:05:32.535\nif you start getting into some of\nthe larger environments like a small.\n\n109\n00:05:32.535 --> 00:05:37.384\n[LAUGH] Small to me is larger, a hundred\nhosts, a thousand virtual machines.\n\n110\n00:05:37.384 --> 00:05:42.040\nYou're gonna need 4 CPUs and\n16GB of ram and this is just for\n\n111\n00:05:42.040 --> 00:05:44.390\nthe vCenter server to be\nable to manage all this.\n\n112\n00:05:44.390 --> 00:05:48.150\nNow why does vCenter\nneed to many resources?\n\n113\n00:05:48.150 --> 00:05:51.440\nThe main reason is in the background\nthere's a database and\n\n114\n00:05:51.440 --> 00:05:55.470\nthe database is storing all\nthe details about every host and\n\n115\n00:05:55.470 --> 00:05:58.160\nevery virtual machine you have and\nreaching out and getting updated.\n\n116\n00:05:58.160 --> 00:05:59.670\nAnd the database is busy.\n\n117\n00:06:00.730 --> 00:06:03.780\nThe busier that database,\nthe more hardware you're going to need and\n\n118\n00:06:03.780 --> 00:06:06.420\nthat's why these numbers go up and\nup and up.\n\n119\n00:06:06.420 --> 00:06:10.590\nWhen you start managing a thousand hosts\nwith ten thousand virtual machines,\n\n120\n00:06:10.590 --> 00:06:13.860\nyou need 16 CPU's and\n32 GB of RAM to power that.\n\n121\n00:06:13.860 --> 00:06:15.760\nIt starts to become pretty beefy.\n\n122\n00:06:15.760 --> 00:06:19.140\nIf this were the virtual appliance,\nthese numbers are basically the same.\n\n123\n00:06:19.140 --> 00:06:23.590\nIf I go back, now let's see if\nI can find that real quick.\n\n124\n00:06:23.590 --> 00:06:28.090\nIf I go back to the server appliance and\nI pull up the hardware requirements on it,\n\n125\n00:06:28.090 --> 00:06:30.820\nyou'll see that the numbers\nare basically the same.\n\n126\n00:06:30.820 --> 00:06:33.700\nSo, 2 and 8, 4 and 16,\n8 and 24, 16 and 32.\n\n127\n00:06:33.700 --> 00:06:38.390\nThose are basically identical to\nwhat we saw just a second ago, so,\n\n128\n00:06:38.390 --> 00:06:41.700\nit doesn't really matter if it's\na virtual appliance or physical.\n\n129\n00:06:41.700 --> 00:06:43.710\nIt's the same hardware requirements.\n\n130\n00:06:43.710 --> 00:06:48.430\nBut I can't stress this enough, even if\nyou're an all Linux shop and you hate\n\n131\n00:06:48.430 --> 00:06:52.080\nWindows and you think it's the devil and\nyou don't wanna install Windows Machine.\n\n132\n00:06:52.080 --> 00:06:55.330\nIt's still better to deploy this,\n\n133\n00:06:55.330 --> 00:07:00.360\nto deploy vCenter as\na stand alone machine.\n\n134\n00:07:00.360 --> 00:07:01.220\nNot as an appliance.\n\n135\n00:07:01.220 --> 00:07:04.830\nIf you want to do it that way,\nif you want to do it as an appliance,\n\n136\n00:07:04.830 --> 00:07:08.780\nI recommend that you have\nESX box that is stand alone.\n\n137\n00:07:08.780 --> 00:07:09.750\nThat's by itself.\n\n138\n00:07:09.750 --> 00:07:11.510\nThat just runs the appliance on it.\n\n139\n00:07:11.510 --> 00:07:14.730\nAnd that way,\nif your whole vCenter environment dies,\n\n140\n00:07:14.730 --> 00:07:16.430\nyou got this machine that's\nunmanaged anyway and\n\n141\n00:07:16.430 --> 00:07:18.160\nit's just running that one appliance and\nit survives.\n\n142\n00:07:18.160 --> 00:07:20.500\nIt stays up, it's not a part of\nthe single sign on infrastructure,\n\n143\n00:07:20.500 --> 00:07:21.810\nwhatever it's separated out.\n\n144\n00:07:21.810 --> 00:07:23.350\nAnd then you got vCenter\nrunning on top of it.\n\n145\n00:07:23.350 --> 00:07:27.720\nSo there's ways to get around it but it's\nbetter to run it as a standalone system.\n\n146\n00:07:27.720 --> 00:07:30.650\n>> Don, are these numbers,\nwhen we talk about resource allocation,\n\n147\n00:07:30.650 --> 00:07:31.690\nare these just for the host?\n\n148\n00:07:31.690 --> 00:07:33.470\nWe're not even talking\nabout guests at this point,\n\n149\n00:07:33.470 --> 00:07:36.280\nwe're just talking about the host\nmachine that's gonna run the guests?\n\n150\n00:07:36.280 --> 00:07:41.106\n>> Yeah, absolutely, what we're\nreally talking about here is vCenter,\n\n151\n00:07:41.106 --> 00:07:44.280\nwhich is not really gonna\nhave any guests on it.\n\n152\n00:07:44.280 --> 00:07:47.483\nIf it were vCenter running\non top of a host, the host\n\n153\n00:07:47.483 --> 00:07:52.410\nhas its own hardware requirements, and\nthose take up extra space, and so on.\n\n154\n00:07:52.410 --> 00:07:55.150\nSo we're doing the appliance, yeah,\nwe need to have extra room for that.\n\n155\n00:07:55.150 --> 00:08:00.190\nBut in vCenter, we talk about, they did\nnot show us the storage requirements.\n\n156\n00:08:00.190 --> 00:08:02.070\nLet me pull the storage requirements up.\n\n157\n00:08:02.070 --> 00:08:03.600\nSo if I jump into\nthe storage requirements for\n\n158\n00:08:03.600 --> 00:08:07.290\nthe host, they're going to list right\nhere what you absolutely have to have.\n\n159\n00:08:07.290 --> 00:08:11.453\nAnd if you look, vCenter server with\nan embedded services controller,\n\n160\n00:08:11.453 --> 00:08:13.440\nthey have how much space you need.\n\n161\n00:08:13.440 --> 00:08:17.490\nAnd see how they're saying Program Files,\nProgramdata, system folder?\n\n162\n00:08:17.490 --> 00:08:19.140\nThis is the software.\n\n163\n00:08:19.140 --> 00:08:21.590\nThey're not really counting\nthe database there.\n\n164\n00:08:21.590 --> 00:08:24.800\nThe database is left off, and\nthe more guests you have,\n\n165\n00:08:24.800 --> 00:08:28.100\nand the more hosts you have,\nthe bigger that database is going to be.\n\n166\n00:08:28.100 --> 00:08:32.040\nSo, a lot of the minimum requirements\nthat they list are kind of understated.\n\n167\n00:08:32.040 --> 00:08:36.041\nThey're not really in line with what we\ntruly are going to need to have and so\n\n168\n00:08:36.041 --> 00:08:39.726\nthese are kind of rule of thumb but\nunfortunately these numbers are so\n\n169\n00:08:39.726 --> 00:08:43.880\nlow that it would be impossible to hit\nthese numbers if you set your mind to it.\n\n170\n00:08:43.880 --> 00:08:48.846\nLike if I said, all right well, if I add\nup my program files, my program data,\n\n171\n00:08:48.846 --> 00:08:52.706\nmy system 6, 8, and 3,\nthat adds up to 17 or whatever.\n\n172\n00:08:52.706 --> 00:08:53.690\nI think I'm doing bad math.\n\n173\n00:08:53.690 --> 00:08:57.980\nBut that adds up to 17 gigs, so\nI'm gonna go and get an 18 gig hard drive.\n\n174\n00:08:57.980 --> 00:08:59.742\nFortunately, you can get\nan 18 gig hard drive.\n\n175\n00:08:59.742 --> 00:09:03.260\nYour minimum is gonna be maybe if you want\nSSDs you could probably get a 64 gig and\n\n176\n00:09:03.260 --> 00:09:04.101\nstick it in there.\n\n177\n00:09:04.101 --> 00:09:06.630\nSo, you're gonna have extra space anyway.\n\n178\n00:09:06.630 --> 00:09:10.760\nBut, the other reality is\nthe bigger your system grows,\n\n179\n00:09:10.760 --> 00:09:14.920\nthe more likely you are to move\nthe database off to a separate system.\n\n180\n00:09:14.920 --> 00:09:19.435\nWhen we install vCenter, if you install\nthe vCenter appliance or if you\n\n181\n00:09:19.435 --> 00:09:24.418\ninstall the Windows one, the default\nis that it creates a Postgres database.\n\n182\n00:09:24.418 --> 00:09:29.010\nSo there's a product called PostgreSQL,\nand Postgres is an open source database\n\n183\n00:09:29.010 --> 00:09:33.334\nserver that's designed for databases\nI don't wanna just say light weight,\n\n184\n00:09:33.334 --> 00:09:36.080\ncuz Postgres can do some\npretty amazing things.\n\n185\n00:09:36.080 --> 00:09:38.990\nBut it's typically designed for\nquick and easy simple databases.\n\n186\n00:09:38.990 --> 00:09:41.340\nSo if I have a small or\nmedium environment,\n\n187\n00:09:41.340 --> 00:09:46.840\nI can usually just use Postgres right\nhere on the same server as my database.\n\n188\n00:09:46.840 --> 00:09:51.280\nBut if things start getting really big, I\nmight need to go to an external database.\n\n189\n00:09:51.280 --> 00:09:54.500\nHave a dedicated database server for\nvCenter.\n\n190\n00:09:54.500 --> 00:09:57.930\nAnd vCenter supports a few\ndifferent solutions there,\n\n191\n00:09:57.930 --> 00:10:00.830\nand I've got,\nlet me see if I can find it here.\n\n192\n00:10:00.830 --> 00:10:04.520\nSo this is VMware's product\ninteroperability matrix.\n\n193\n00:10:04.520 --> 00:10:08.240\nAnd what it does is it lets you see which\nVMware products are compatible with which\n\n194\n00:10:08.240 --> 00:10:10.360\nother things that are out there.\n\n195\n00:10:10.360 --> 00:10:12.750\nIt's kinda a neat little\nservice they provide and\n\n196\n00:10:12.750 --> 00:10:14.510\nI'll put that link in the show notes.\n\n197\n00:10:14.510 --> 00:10:18.790\nBut, you can come in here and\nsay I want to take vCenter Server.\n\n198\n00:10:20.830 --> 00:10:24.340\nSo I'm looking for solutions for\nvCenter Server and\n\n199\n00:10:24.340 --> 00:10:27.490\nI want to, well for\nthe versions I don't want every version.\n\n200\n00:10:27.490 --> 00:10:31.110\nI really just want like version 6.0 which,\nthere's version 6.0 by itself and\n\n201\n00:10:31.110 --> 00:10:33.740\nthere's update one and\nupdate two that have come out so\n\n202\n00:10:33.740 --> 00:10:35.000\nI'm just gonna add each\nof those versions in.\n\n203\n00:10:35.000 --> 00:10:39.734\nAnd then as far as the solution down here,\nI can pick vCenter Server again and so\n\n204\n00:10:39.734 --> 00:10:43.323\nI'm looking for shoot,\nI forgot something important,\n\n205\n00:10:43.323 --> 00:10:47.728\nI was wondering why I had it twice i\nmeant to pick the database tab up here.\n\n206\n00:10:47.728 --> 00:10:50.130\nSo I need pick the database\nin upper abilities and\n\n207\n00:10:50.130 --> 00:10:53.645\nthat's what I'm actually looking for\nand I can pick vCenter server and\n\n208\n00:10:53.645 --> 00:10:58.020\nthat will do it right, and I can put\nin 6.0, the update one and update two.\n\n209\n00:10:58.020 --> 00:11:00.570\nOr if I'm running update two,\nI can just pick that one and that's it.\n\n210\n00:11:00.570 --> 00:11:03.850\nAnd what it's gonna do is give me\na list of databases that are out there.\n\n211\n00:11:03.850 --> 00:11:07.300\nAnd which ones are supported, okay?\n\n212\n00:11:07.300 --> 00:11:10.580\nAnd what you'll find is that they\ndon't support all that many databases.\n\n213\n00:11:10.580 --> 00:11:15.652\nThere's Oracle 11G, there's Oracle 12C,\nso the two Oracle databases that\n\n214\n00:11:15.652 --> 00:11:20.650\nare still supported today, and\nthen there's Microsoft SQL Server 2008 and\n\n215\n00:11:20.650 --> 00:11:24.124\nMicrosoft SQL Server 2012 and\nI believe 2014.\n\n216\n00:11:24.124 --> 00:11:25.632\nThere it is, yep, 2014.\n\n217\n00:11:25.632 --> 00:11:31.630\nSo, if we go the Microsoft route,\nyou've got 2008, 2012 and 2014.\n\n218\n00:11:31.630 --> 00:11:34.882\nIf you go the Oracle route,\nyou've got 11g and 12c.\n\n219\n00:11:34.882 --> 00:11:38.810\nThose are the five databases that vCenter\nsupports, not counting post dress.\n\n220\n00:11:38.810 --> 00:11:41.430\nRight so I guess there's\nsix databases all together.\n\n221\n00:11:41.430 --> 00:11:45.030\nSo, Postgres is built in,\nthe others are external, and\n\n222\n00:11:45.030 --> 00:11:46.940\nyou can setup your own database\nserver to manage those and\n\n223\n00:11:46.940 --> 00:11:50.630\nthen you can go really big because that\nextra database carries all the extra load,\n\n224\n00:11:50.630 --> 00:11:54.960\nso a lot of different options\nthere as far as that's concerned.\n\n225\n00:11:54.960 --> 00:11:57.950\nAnd during the install,\nwhen you go and do the install,\n\n226\n00:11:57.950 --> 00:12:01.540\nit's gonna ask you about which database\nyou want to use, so for example,\n\n227\n00:12:01.540 --> 00:12:05.050\nI've got the installation best practices\nthat we were talking about a moment ago.\n\n228\n00:12:05.050 --> 00:12:09.620\nAnd they actually go into\nthe step-by-step for installing it.\n\n229\n00:12:09.620 --> 00:12:13.590\nWhen you install it, we'll will see\nit in person here in a minute, but\n\n230\n00:12:13.590 --> 00:12:16.170\nwhen you install it,\nyou will get to a point on the install\n\n231\n00:12:16.170 --> 00:12:18.600\nwhere it asks you what\ndatabase you want to use.\n\n232\n00:12:18.600 --> 00:12:21.130\nWhich is right here and see how it says,\n\n233\n00:12:21.130 --> 00:12:26.000\nuse an embedded database post rescue\nwell or use an external database.\n\n234\n00:12:26.000 --> 00:12:29.852\nAnd here's where you can set up a DSN and\nconnect to that external database and\n\n235\n00:12:29.852 --> 00:12:31.103\nget it going from there.\n\n236\n00:12:31.103 --> 00:12:35.323\nSo, you've got that option during\nthe install if you want to run through it.\n\n237\n00:12:35.323 --> 00:12:38.376\nWe're gonna see it in reality\nhere in just a moment.\n\n238\n00:12:38.376 --> 00:12:41.445\nAll right, so, those are some of the\ndifferent things that we need to be aware\n\n239\n00:12:41.445 --> 00:12:42.620\nof as we do the setup.\n\n240\n00:12:42.620 --> 00:12:44.790\nThe only other thing I want to mention is,\n\n241\n00:12:44.790 --> 00:12:49.760\nwhen you do the appliance,\nthe appliance has the web server and\n\n242\n00:12:49.760 --> 00:12:54.620\nthe database right there in the same box,\nand it has\n\n243\n00:12:54.620 --> 00:12:59.670\na little bit extra attached to, what's\ncalled the Platform Services Controller.\n\n244\n00:12:59.670 --> 00:13:03.150\nLet me get it, there was a diagram,\nand it's not an amazing diagram but\n\n245\n00:13:03.150 --> 00:13:06.978\n[LAUGH] this thing here where it shows\nthe Virtual Machine or Physical Server and\n\n246\n00:13:06.978 --> 00:13:10.780\nthen it shows the vCenter Server and\nthe Platform Services Controller.\n\n247\n00:13:10.780 --> 00:13:12.930\nAll right, what the heck is that?\n\n248\n00:13:12.930 --> 00:13:17.630\nWell, in previous versions of vCenter, so\nfor those of you that maybe did VCP 5 or\n\n249\n00:13:17.630 --> 00:13:22.700\nVCP 5.5 you might remember that vCenter\nwas made up of four different components.\n\n250\n00:13:22.700 --> 00:13:24.380\nNow vCenter's only made\nup of two components.\n\n251\n00:13:24.380 --> 00:13:28.139\nThey consolidated a lot of stuff down,\nso you have vCenter server itself,\n\n252\n00:13:28.139 --> 00:13:31.957\nwhich is the web UI and the management and\nthe database is considered a part of\n\n253\n00:13:31.957 --> 00:13:34.785\nthat and all of that stuff is\npart of the vCenter server.\n\n254\n00:13:34.785 --> 00:13:38.714\nAnd now you've got the Platform Services\nController that's separate and it performs\n\n255\n00:13:38.714 --> 00:13:42.400\na few different roles, but the main\nrole that it performs is single sign on.\n\n256\n00:13:42.400 --> 00:13:45.940\nIt's what's managing single sign on and\nauthentication for the environment.\n\n257\n00:13:45.940 --> 00:13:52.410\nSo when we deploy vCenter, we could choose\nto deploy these together or separate.\n\n258\n00:13:52.410 --> 00:13:55.370\nYou could have it separate where one\nmachine is the vCenter server and\n\n259\n00:13:55.370 --> 00:13:57.520\nanother machine is the platform\nservice it's controlling.\n\n260\n00:13:58.700 --> 00:13:59.610\nNow why would I want that?\n\n261\n00:13:59.610 --> 00:14:03.470\nWell, I might have more\nthan one vCenter server.\n\n262\n00:14:03.470 --> 00:14:06.490\nBut I don't necessarily need more than\none Platform Services Controller.\n\n263\n00:14:06.490 --> 00:14:10.660\nSo I can have one PSC that's then shared\nacross three different vCenter servers.\n\n264\n00:14:10.660 --> 00:14:13.620\nIf I had a vCenter server for\neach physical location at my company or\n\n265\n00:14:13.620 --> 00:14:17.550\nsomething like that, then I might just\nhave one PSC that they all share.\n\n266\n00:14:17.550 --> 00:14:20.110\nOr I might wanna have multiple PSCs,\nand so\n\n267\n00:14:20.110 --> 00:14:23.520\nby breaking it apart I can now\ncontrol that individually.\n\n268\n00:14:23.520 --> 00:14:25.636\nBut most people deploy them\ntogether cuz it's just simpler.\n\n269\n00:14:25.636 --> 00:14:27.092\n[LAUGH] So when you do the install,\n\n270\n00:14:27.092 --> 00:14:30.004\nyou have a simple install mode\nwhere they're deployed together or\n\n271\n00:14:30.004 --> 00:14:32.820\nyou can do an advanced install\nwhere you split them apart.\n\n272\n00:14:32.820 --> 00:14:37.560\n>> Is there a benefit, Don, of separating\nthose, separating those rules if you're in\n\n273\n00:14:37.560 --> 00:14:41.740\na larger environment you get a performance\ngain or anything or is it just simplicity?\n\n274\n00:14:41.740 --> 00:14:42.610\n>> You can scale bigger.\n\n275\n00:14:42.610 --> 00:14:43.830\nThat's really what it boils down to.\n\n276\n00:14:43.830 --> 00:14:44.780\nIt's definitely not simplicity.\n\n277\n00:14:44.780 --> 00:14:47.672\nSo splitting apart makes things\nmore complex, it gets harder.\n\n278\n00:14:47.672 --> 00:14:51.020\nSo, if you want it simple,\nyou keep them together.\n\n279\n00:14:51.020 --> 00:14:51.920\n>> Gotcha.\n>> But then you got limits\n\n280\n00:14:51.920 --> 00:14:52.662\nto scale, right?\n\n281\n00:14:52.662 --> 00:14:55.010\nCuz one server can only scale up so far.\n\n282\n00:14:55.010 --> 00:14:58.460\nYou can only add so much memory and so\nmany CPUs to a server before you hit\n\n283\n00:14:58.460 --> 00:15:01.430\nthe limit of what you can buy and\nAnd then you've gotta scale out.\n\n284\n00:15:01.430 --> 00:15:02.770\nWell you can't scale out with one server,\n\n285\n00:15:02.770 --> 00:15:04.310\nyou've gotta scale out\nwith multiple servers.\n\n286\n00:15:04.310 --> 00:15:07.995\nAnd so, splitting up the PSC and\nvCenter is that first step, and\n\n287\n00:15:07.995 --> 00:15:10.940\nthen we start adding more\nservers to go from there.\n\n288\n00:15:10.940 --> 00:15:13.521\nSo it is more complex, but\nthat is a benefit that you'll see.\n\n289\n00:15:13.521 --> 00:15:15.705\nBe aware that if you run\nit all from one server,\n\n290\n00:15:15.705 --> 00:15:18.059\nyour hardware requirements\nare a little higher,\n\n291\n00:15:18.059 --> 00:15:21.323\nbecause that one server is doing both\nroles versus if we split it out.\n\n292\n00:15:21.323 --> 00:15:23.852\nAll right, a couple other things,\n\n293\n00:15:23.852 --> 00:15:28.680\nI don't want to bore us too much\non this one but prerequisites.\n\n294\n00:15:28.680 --> 00:15:31.680\nIf we're gonna build our own vCenter\nserver, we do need installed Windows.\n\n295\n00:15:31.680 --> 00:15:35.891\nIt needs to be Windows Server 2008 R2 or\nWindows Server 2012.\n\n296\n00:15:35.891 --> 00:15:37.829\nWe need to do all the Windows\nupdates that are available.\n\n297\n00:15:37.829 --> 00:15:40.870\nSo any update, that is available,\nget it, put it on that thing.\n\n298\n00:15:40.870 --> 00:15:44.255\nAnd then, we need to install vCenter but\nit has got some prerequisites.\n\n299\n00:15:44.255 --> 00:15:47.447\nWe do need the .NET framework 3.5\nwhich is built into Windows but\n\n300\n00:15:47.447 --> 00:15:50.807\nit's not installed by default so\nyou need to go into the add features and\n\n301\n00:15:50.807 --> 00:15:52.950\nadd that one in if you\ndon't already have it.\n\n302\n00:15:52.950 --> 00:15:55.409\nSo we need to have that If\nthe firewall is turned on,\n\n303\n00:15:55.409 --> 00:15:58.569\nthere's some firewall ports that\nwe need to open up for vCenter.\n\n304\n00:15:58.569 --> 00:16:02.542\nFor example, the vCenter server,\nit's got a web server built into it, so\n\n305\n00:16:02.542 --> 00:16:05.960\nwe need port 80 and port 443,\nor we can change those ports.\n\n306\n00:16:05.960 --> 00:16:08.700\nDuring the install,\nit will list every port that it uses.\n\n307\n00:16:08.700 --> 00:16:10.080\nI'll show you on the screen.\n\n308\n00:16:10.080 --> 00:16:11.630\nAnd you could open the ones you want.\n\n309\n00:16:11.630 --> 00:16:12.960\nLeave the ones closed that you don't want.\n\n310\n00:16:12.960 --> 00:16:14.880\nAnd you can change the port numbers, too.\n\n311\n00:16:14.880 --> 00:16:16.780\nMaybe port 80s already\nin use on the server.\n\n312\n00:16:16.780 --> 00:16:19.330\nWhich in fact, I think for\nthe server I'm gonna deploy, it is in use.\n\n313\n00:16:19.330 --> 00:16:22.600\nAnd so if it's in use, I can change\nV Center to use a different port or\n\n314\n00:16:22.600 --> 00:16:24.420\nI can change that other system\nto use a different port.\n\n315\n00:16:24.420 --> 00:16:25.000\nIt's up to me, right?\n\n316\n00:16:25.000 --> 00:16:27.220\nSo those are some of the things\nthat we need to be aware.\n\n317\n00:16:27.220 --> 00:16:29.870\nAnd I put it all in the show notes,\nbut you can get it all from VM Ware.\n\n318\n00:16:29.870 --> 00:16:33.740\nIt's all right here in the best\npractices of how we install vCenter.\n\n319\n00:16:34.780 --> 00:16:39.000\nAll right, so I think that's enough\nrambling on about it, did I miss anything?\n\n320\n00:16:39.000 --> 00:16:40.990\nI think that's pretty good.\n\n321\n00:16:40.990 --> 00:16:42.740\nLet's go ahead and\nactually see this in action.\n\n322\n00:16:42.740 --> 00:16:45.340\nLet's get a vCenter server in place.\n\n323\n00:16:45.340 --> 00:16:47.350\nI've got a Windows server right here.\n\n324\n00:16:47.350 --> 00:16:51.360\nIt's called WIN-SERVER01 because\nI am creative with names.\n\n325\n00:16:51.360 --> 00:16:55.690\nIt's a workgroup server, it's fired up,\njust in case you ever bump into this,\n\n326\n00:16:55.690 --> 00:16:58.270\nyou can't install vCenter\non a domain controller, so\n\n327\n00:16:58.270 --> 00:16:59.900\nif you have that idea, don't.\n\n328\n00:16:59.900 --> 00:17:02.000\nIt really does need to\nbe a stand alone server.\n\n329\n00:17:02.000 --> 00:17:05.380\nYou can join it to the domain if you want,\nbut it can't be a domain controller.\n\n330\n00:17:05.380 --> 00:17:08.380\nMine's just a workgroup server so\nit's in a domain or anything.\n\n331\n00:17:08.380 --> 00:17:10.110\nSo it's up and it's running.\n\n332\n00:17:10.110 --> 00:17:11.810\nI did give it a static IP.\n\n333\n00:17:11.810 --> 00:17:14.730\nTechnically, you don't have to give\nit a static IP but it's a good idea.\n\n334\n00:17:14.730 --> 00:17:16.870\nRight any server you usually\nwanna have a static IP.\n\n335\n00:17:16.870 --> 00:17:18.670\nI've got one, all right.\n\n336\n00:17:18.670 --> 00:17:20.520\nI'm running Windows Server 2012 R2 and\n\n337\n00:17:20.520 --> 00:17:23.060\nthat's fine,\ncuz that's in the supported OS.\n\n338\n00:17:23.060 --> 00:17:24.900\nAnd I'm actually deploying\nthis on a virtual machine,\n\n339\n00:17:24.900 --> 00:17:27.225\nso you'll see that I'm\nrunning VMware from.\n\n340\n00:17:27.225 --> 00:17:28.265\nFor my hardware.\n\n341\n00:17:28.265 --> 00:17:31.025\nI didn't use the appliance\nbecause that's too easy.\n\n342\n00:17:31.025 --> 00:17:32.915\nThe appliance,\nyou just import it and you're done.\n\n343\n00:17:32.915 --> 00:17:34.335\nThat makes for a short show.\n\n344\n00:17:34.335 --> 00:17:35.845\nBut I want to show building\nup a windows machine.\n\n345\n00:17:35.845 --> 00:17:40.440\nSo the steps that I'm gonna follow\nare the same if I'm deploying in a VM, or\n\n346\n00:17:40.440 --> 00:17:42.500\nif I'm deploying on a physical server.\n\n347\n00:17:43.630 --> 00:17:45.770\nIf I'm gonna deploy it on\na virtual machine though,\n\n348\n00:17:45.770 --> 00:17:47.510\nI'll typically use the appliance.\n\n349\n00:17:47.510 --> 00:17:51.140\nAnd the main reason is Linux has\na much smaller footprint than Windows.\n\n350\n00:17:51.140 --> 00:17:55.390\nSo with Windows you're gonna eat up at\nleast a gig of your RAM just for the OS.\n\n351\n00:17:55.390 --> 00:17:58.450\nVersus Linux,\nwhere it's usually about 230 megs.\n\n352\n00:17:58.450 --> 00:18:01.990\nSo you have extra RAM available on\nthe Linux appliance than Windows.\n\n353\n00:18:01.990 --> 00:18:02.990\nIf you're used to Linux and\n\n354\n00:18:02.990 --> 00:18:07.730\nyou like it, then the Linux appliance is\na better choice if you're doing it as an.\n\n355\n00:18:07.730 --> 00:18:12.040\nIf you hate Linus though, you can still\ndo Windows as a VM and run decent or\n\n356\n00:18:12.040 --> 00:18:14.120\nit will work just fine,\nyou just have a little more overhead, but\n\n357\n00:18:14.120 --> 00:18:16.650\na physical server's really\nthe best option for this one.\n\n358\n00:18:17.780 --> 00:18:19.730\nOkay, so my server's good.\n\n359\n00:18:19.730 --> 00:18:21.540\nI'm gonna go ahead and start my install.\n\n360\n00:18:21.540 --> 00:18:24.080\nNow, when you purchase V-sphere,\n\n361\n00:18:24.080 --> 00:18:27.890\nyou'll get the iso-images from\nthe V center along with ESX.\n\n362\n00:18:27.890 --> 00:18:30.930\nAnd so I've got that ISO image\nmounted into my CD drive.\n\n363\n00:18:30.930 --> 00:18:32.670\nAnd I'm just gonna launch\nthat image installer.\n\n364\n00:18:32.670 --> 00:18:34.770\nIt's not terribly exciting.\n\n365\n00:18:34.770 --> 00:18:36.020\nSo I'm gonna launch the autorun.\n\n366\n00:18:36.020 --> 00:18:37.440\nAnd you'll get this screen right here.\n\n367\n00:18:37.440 --> 00:18:40.480\nAnd it's gonna offer to\ninstall vCenter server but\n\n368\n00:18:40.480 --> 00:18:43.420\nit will also offer to install\nthe veese for your client.\n\n369\n00:18:43.420 --> 00:18:44.550\nWhat is that?\n\n370\n00:18:44.550 --> 00:18:47.330\nWell, in our last episode we loaded\nthe native veese for your client for\n\n371\n00:18:47.330 --> 00:18:51.850\nconnecting to a es box engine.\n\n372\n00:18:51.850 --> 00:18:53.190\nThis is the veese for your client.\n\n373\n00:18:53.190 --> 00:18:55.820\nThat we could use to connect\nto ESX as well as vCenter.\n\n374\n00:18:55.820 --> 00:18:57.170\nIt's the same client.\n\n375\n00:18:57.170 --> 00:18:59.680\nBut the native client is not as\nfull featured as the web client.\n\n376\n00:18:59.680 --> 00:19:01.800\nSo that's the one that I prefer to use.\n\n377\n00:19:01.800 --> 00:19:03.500\nWhich is installed as part\nof the vCenter server.\n\n378\n00:19:03.500 --> 00:19:06.770\nSo we don't actually need this\nclient if we don't want it.\n\n379\n00:19:06.770 --> 00:19:08.840\nThen you'll see the vSphere\nupdate manager.\n\n380\n00:19:08.840 --> 00:19:10.920\nThat's really useful if you\nwanna do automated updates.\n\n381\n00:19:10.920 --> 00:19:14.390\nIf you have multiple vSphere systems in\nplace, you can do the updates for them.\n\n382\n00:19:14.390 --> 00:19:17.130\nAnd then some other support tools\nlike the authentication proxy.\n\n383\n00:19:17.130 --> 00:19:19.640\nMost people dont use it but\nif you need it its there.\n\n384\n00:19:19.640 --> 00:19:21.360\nI want vCenter server.\n\n385\n00:19:21.360 --> 00:19:25.680\nNotice how it says prerequisites\nnone not entirely true but it can\n\n386\n00:19:25.680 --> 00:19:29.630\nauto install a lot of the prerequisites it\nneeds it cant open up firewall ports for\n\n387\n00:19:29.630 --> 00:19:32.540\nyou though so theres some things that\nare prerequisite you need to do.\n\n388\n00:19:32.540 --> 00:19:34.620\nAnd you can get those from\nthe best practices guide.\n\n389\n00:19:36.250 --> 00:19:39.480\nAll right, when I go to install it's not\ngonna ask me a heck of a lot of questions.\n\n390\n00:19:39.480 --> 00:19:43.590\nThere are a handful, especially when\nit comes to the PSC and the database.\n\n391\n00:19:43.590 --> 00:19:46.700\nSo as I move forward,\nI have to agree to my license agreement.\n\n392\n00:19:46.700 --> 00:19:49.820\nAnd then here's the choice about the PSC.\n\n393\n00:19:49.820 --> 00:19:51.400\nTo I want to play them together?\n\n394\n00:19:51.400 --> 00:19:56.780\nWhere this is one host running the PSC and\nvCenter, or do I want to split it up?\n\n395\n00:19:56.780 --> 00:20:00.930\nWhere I have one PSC and\nmultiple vCenter servers.\n\n396\n00:20:00.930 --> 00:20:01.910\nIt's up to me.\n\n397\n00:20:01.910 --> 00:20:05.675\nSo, if I'm I'm doing that, it's called an\nembedded deployment when they're together.\n\n398\n00:20:05.675 --> 00:20:08.135\nIt's called an external deployment\nwhen their separate and so\n\n399\n00:20:08.135 --> 00:20:11.425\nit's asking me am I installing\na platform service controller or\n\n400\n00:20:11.425 --> 00:20:15.787\nam I installing a vCenter, which one\nof this puzzle am I installing, right?\n\n401\n00:20:15.787 --> 00:20:16.907\nWell I'm gonna do embedded.\n\n402\n00:20:16.907 --> 00:20:19.537\nI'll just do both right here in this\nsystem because don't I have either and\n\n403\n00:20:19.537 --> 00:20:20.147\nI kinda need them.\n\n404\n00:20:21.407 --> 00:20:23.347\nSo I'll just do that and hit Next.\n\n405\n00:20:23.347 --> 00:20:26.467\nNow it's gonna ask me for my system name,\njust the host name of this server.\n\n406\n00:20:26.467 --> 00:20:28.547\nYou generally don't wanna change that.\n\n407\n00:20:28.547 --> 00:20:32.767\nBut, pay attention to what the name is,\nbecause when somebody browses to\n\n408\n00:20:32.767 --> 00:20:36.570\nthe webpage to connect this if they type\nin an IP it's gonna flip to this name So\n\n409\n00:20:36.570 --> 00:20:38.140\nthe name needs to be resolvable.\n\n410\n00:20:38.140 --> 00:20:40.520\nWe need to have it in DNS and\nbe able to resolve that.\n\n411\n00:20:40.520 --> 00:20:42.700\nI actually don't know if that's\nin my DNS server or not.\n\n412\n00:20:42.700 --> 00:20:44.710\nSo let me just double-check\nthat real quick.\n\n413\n00:20:44.710 --> 00:20:49.540\nI'm gonna jump into my DNS tool and\ndouble-check and see if I've got a forward\n\n414\n00:20:49.540 --> 00:20:52.800\nlookup zone and And I don't, so\nthat name actually wouldn't resolve for\n\n415\n00:20:52.800 --> 00:20:56.730\nme, so the first time that I browse to it,\nif I browse by IP, I'll get to the server,\n\n416\n00:20:56.730 --> 00:21:00.710\nI'll go to login and it'll flip to the\nname and I'll lose my connection, right?\n\n417\n00:21:00.710 --> 00:21:04.800\nSo I'm just gonna whip up a quick DNS zone\nhere so that I'll be able to resolve this.\n\n418\n00:21:04.800 --> 00:21:09.700\nAnd for you, you use whatever DNS server\nit is you've got in place, I'm using\n\n419\n00:21:09.700 --> 00:21:13.930\nthe windows one, so I'll just get that in\nthere, and it should auto-create a record.\n\n420\n00:21:13.930 --> 00:21:14.800\nYep it did.\n\n421\n00:21:14.800 --> 00:21:17.730\nSo winserver01, it's in there,\nit's got a record and so\n\n422\n00:21:17.730 --> 00:21:20.020\non and Easy enough to whip\nup a DNS server for that.\n\n423\n00:21:20.020 --> 00:21:22.890\nI guess I need to see if I'm\nactually using myself for DNS,\n\n424\n00:21:22.890 --> 00:21:24.690\nthat would be a nice one but,\nI'm sure I am.\n\n425\n00:21:24.690 --> 00:21:28.190\nAll right, I say that I'll be wrong later,\nwe'll see.\n\n426\n00:21:28.190 --> 00:21:30.880\nOkay, so I'm gonna go ahead and\nget this thing installed and so\n\n427\n00:21:30.880 --> 00:21:33.400\nI'll hit the Install button and.\n\n428\n00:21:33.400 --> 00:21:36.000\nIt, shoot, that's not my wizard,\nlet me get back to the wizard.\n\n429\n00:21:36.000 --> 00:21:37.340\nThere, and now I'll hit Next.\n\n430\n00:21:37.340 --> 00:21:39.230\nI'm about to launch a second\ninsist the install,\n\n431\n00:21:39.230 --> 00:21:41.870\nthat would end about as well as it sounds.\n\n432\n00:21:41.870 --> 00:21:44.230\nAll right, and\nI am getting a warning about IPv6.\n\n433\n00:21:44.230 --> 00:21:48.710\nIt's telling me that it can't\nresolve the iPv6 address to a name.\n\n434\n00:21:48.710 --> 00:21:51.310\nAnd that because I just creat\nthe DNS record for iPV4.\n\n435\n00:21:51.310 --> 00:21:55.360\nWell now I'm using iPV6 I'm not\nworried about it but I was using iPV6,\n\n436\n00:21:55.360 --> 00:21:58.660\nI need to go and register that\nas a DNS name also all right but\n\n437\n00:21:58.660 --> 00:22:01.020\nsince i'm not using an old seal, okay?\n\n438\n00:22:01.020 --> 00:22:05.650\nAnd now i get some slightly\nmore important information.\n\n439\n00:22:05.650 --> 00:22:08.450\nWhen I log in to vCenter I need a user and\na password.\n\n440\n00:22:08.450 --> 00:22:10.256\nWhere does username and\npassword come from?\n\n441\n00:22:10.256 --> 00:22:12.653\nWell vCenter has\nan authentication database.\n\n442\n00:22:12.653 --> 00:22:17.245\nAnd the authentication database can be\nlocal to vSphere, or it can be a single\n\n443\n00:22:17.245 --> 00:22:22.910\nsign-on against an external directory,\nusually the Microsoft Active Directory.\n\n444\n00:22:22.910 --> 00:22:25.880\nSo if I've got that kind of environment\nin place, I can tie into it.\n\n445\n00:22:25.880 --> 00:22:28.040\nSince this is my first server,\nI don't have it.\n\n446\n00:22:28.040 --> 00:22:32.600\nSo what I need to do is create a new\nvCenter Single Sign-On Domain.\n\n447\n00:22:32.600 --> 00:22:35.870\nAnd at least in the beginning it's\njust gonna be a local data base.\n\n448\n00:22:35.870 --> 00:22:37.850\nIn the future I can attach it\nto the active directory and\n\n449\n00:22:37.850 --> 00:22:40.200\nthen I get some real power but for\nright now it'll be a local data base.\n\n450\n00:22:40.200 --> 00:22:43.390\nIf I've already got a vCenter server\nup and this is like a second one or\n\n451\n00:22:43.390 --> 00:22:46.810\na third one I can join an existing domain.\n\n452\n00:22:46.810 --> 00:22:48.830\nAnd it will connect me to\nthe other vCenter servers.\n\n453\n00:22:48.830 --> 00:22:50.840\nThat's not an active directory domain.\n\n454\n00:22:50.840 --> 00:22:52.440\nThis is a vSphere domain.\n\n455\n00:22:52.440 --> 00:22:55.330\nvsphere servers or vCenter servers\nare being connected together.\n\n456\n00:22:55.330 --> 00:22:57.340\nSo, you don't even have to be\nrunning Windows to use this.\n\n457\n00:22:57.340 --> 00:23:00.570\nThat domain terminology is a lot\nmore generic than most people think.\n\n458\n00:23:00.570 --> 00:23:02.830\nBut this is my first one so\nI'm gonna create a new one.\n\n459\n00:23:02.830 --> 00:23:06.830\nThe default name is vsphere.local and\nhonestly that works for a lot of people.\n\n460\n00:23:06.830 --> 00:23:09.900\nIf you're gonna have more than one domain\nthough so that doesn't necessarily work\n\n461\n00:23:09.900 --> 00:23:13.090\nout, so you might need to give it a name,\nof whatever you should choose to call it.\n\n462\n00:23:13.090 --> 00:23:16.460\nI'm gonna leave it vsphere.local 'cause\nthat's what you gonna see on the exam, but\n\n463\n00:23:16.460 --> 00:23:20.820\nin real life I might change this to\nlab.itpro.tv or something like that so\n\n464\n00:23:20.820 --> 00:23:22.000\nthat I can recognize what it is.\n\n465\n00:23:23.740 --> 00:23:27.470\nThe default username is administrator and\nI need to give it a password so I'll punch\n\n466\n00:23:27.470 --> 00:23:32.980\nin one of my ultra secure passwords\nlike the word password all lowercase.\n\n467\n00:23:32.980 --> 00:23:35.680\nIt might complain on the complexity\non that one, we'll see.\n\n468\n00:23:35.680 --> 00:23:37.260\nAnd then a site name.\n\n469\n00:23:37.260 --> 00:23:40.400\nIf you have multiple geographic sites,\nyou can specify a site name.\n\n470\n00:23:40.400 --> 00:23:41.550\nI'll leave this one a default for\n\n471\n00:23:41.550 --> 00:23:43.780\na site name because that's what\nyou'll see in the textbooks.\n\n472\n00:23:43.780 --> 00:23:47.860\nBut in real life, I might call\nthis Gainesville or Home Office.\n\n473\n00:23:47.860 --> 00:23:51.980\nOr whatever it is you want to call it\na main data center, where you're at.\n\n474\n00:23:51.980 --> 00:23:52.840\nAll right.\n\n475\n00:23:52.840 --> 00:23:54.520\nThat's all it needs there.\n\n476\n00:23:54.520 --> 00:23:55.560\nAnd so I can hit Next.\n\n477\n00:23:55.560 --> 00:23:56.789\nAnd so now it'll know it.\n\n478\n00:23:56.789 --> 00:23:58.689\nYeah, it's complaining about\nthe complexity of my password.\n\n479\n00:23:58.689 --> 00:24:03.155\nLemme make something a little more\ncomplex so that it'll be happy.\n\n480\n00:24:03.155 --> 00:24:04.880\nAll right.\n\n481\n00:24:04.880 --> 00:24:07.900\nThen, the service.\n\n482\n00:24:07.900 --> 00:24:10.000\nIn Windows, when you have\na program run in the background,\n\n483\n00:24:10.000 --> 00:24:11.340\nit has to run with a user account.\n\n484\n00:24:11.340 --> 00:24:15.220\nAnd its asking me do I want to\nuse the local system account or\n\n485\n00:24:15.220 --> 00:24:17.720\ndo I want to specify a service account,\nall right.\n\n486\n00:24:17.720 --> 00:24:21.550\nIf this machine is part of a domain I\nprobably want to use a service account.\n\n487\n00:24:21.550 --> 00:24:25.100\nBecause then I can give that service\naccount access to other network resources.\n\n488\n00:24:25.100 --> 00:24:29.050\nBut if it's a standalone server like mine,\nI can just use the local system account.\n\n489\n00:24:29.050 --> 00:24:31.060\nI don't need to share it\namongst other machines, and so\n\n490\n00:24:31.060 --> 00:24:32.720\nthat's the easiest option.\n\n491\n00:24:32.720 --> 00:24:34.740\nIf I wanna use a service account,\nI need to go and\n\n492\n00:24:34.740 --> 00:24:37.120\ncreate a Windows user\naccount in my domain.\n\n493\n00:24:37.120 --> 00:24:40.840\nAnd I need to grant it run as\na service permissions on this server.\n\n494\n00:24:40.840 --> 00:24:42.610\nAnd then it'll be able to run that way.\n\n495\n00:24:42.610 --> 00:24:45.224\nBut if I'm just doing a standalone,\nI can use a Windows local account, and\n\n496\n00:24:45.224 --> 00:24:45.901\nthat'll be fine.\n\n497\n00:24:48.063 --> 00:24:51.260\nAll right,\nnow it's gonna ask about the database.\n\n498\n00:24:51.260 --> 00:24:53.890\nBy default, it wants to use Postgres.\n\n499\n00:24:53.890 --> 00:24:55.210\nAnd they call it vPostgres.\n\n500\n00:24:55.210 --> 00:24:57.090\nIt's VMware's implementation of it.\n\n501\n00:24:57.090 --> 00:25:00.660\nSo I can use postgres,\nwhich is the same as postgreSQL, or\n\n502\n00:25:00.660 --> 00:25:02.060\nI can use an external database.\n\n503\n00:25:02.060 --> 00:25:07.070\nAnd when I do an external database, i\nneed to have a DSN, and DSNs are defined.\n\n504\n00:25:07.070 --> 00:25:09.770\nIf you need to set one up,\nyou can just bring up your Start menu and\n\n505\n00:25:09.770 --> 00:25:14.180\ntype in ODBC And\nyou'll see ODBC data sources.\n\n506\n00:25:14.180 --> 00:25:17.740\nAnd these are data sources that\npoint to database servers.\n\n507\n00:25:17.740 --> 00:25:23.790\nAnd so when you go into the ODBC control\npanel here, you can define system DSNs.\n\n508\n00:25:23.790 --> 00:25:26.970\nAnd a DSN is a pointer to\na database server somewhere.\n\n509\n00:25:26.970 --> 00:25:30.310\nSo I could add in,\nI've got the single server native client.\n\n510\n00:25:30.310 --> 00:25:34.230\nIf I had to Oracle client installed I\ncould use Oracle here but I just have SQL.\n\n511\n00:25:34.230 --> 00:25:38.330\nAnd so I could choose that and\nspecify a server name and a username and\n\n512\n00:25:38.330 --> 00:25:40.330\na password and\nall that stuff to connect with it.\n\n513\n00:25:40.330 --> 00:25:42.450\nAnd so then when I jump back over here.\n\n514\n00:25:42.450 --> 00:25:45.160\nI just need to specify the DSN\nthat I'm gonna connect with.\n\n515\n00:25:45.160 --> 00:25:48.070\nAnd then if I need to override the user\nname and password, I can provide those and\n\n516\n00:25:48.070 --> 00:25:49.590\nI can connect that database server.\n\n517\n00:25:49.590 --> 00:25:52.580\nSo I've gotta set that up kind\nof outside before I get to here.\n\n518\n00:25:52.580 --> 00:25:56.230\nBut in my case, I'm just gonna use\nPostgres, it's a heck of a lot easier.\n\n519\n00:25:56.230 --> 00:25:58.890\nI can change it after the fact,\nbut it's not exactly easy.\n\n520\n00:25:58.890 --> 00:26:01.705\nCuz I gotta move all my data out\nof Postgress and into SQL and\n\n521\n00:26:01.705 --> 00:26:04.982\nout of Postgres into Oracle, so\nit's better to have the set that you\n\n522\n00:26:04.982 --> 00:26:08.025\nneed it from the beginning than\nit is to try to move it later on.\n\n523\n00:26:08.025 --> 00:26:12.645\nAll right, on the next screen,\nhere's where I get all the ports and so\n\n524\n00:26:12.645 --> 00:26:16.498\nfrom firewall settings I want\nto pay to attention to this.\n\n525\n00:26:16.498 --> 00:26:19.402\nI've got the HTTP ports,\nprobably the most important For\n\n526\n00:26:19.402 --> 00:26:21.960\nme to be able to connect to it and\nconfigure it.\n\n527\n00:26:21.960 --> 00:26:24.400\nEverything else I can change\nafter the fact if I want but\n\n528\n00:26:24.400 --> 00:26:27.760\nsome of these are pretty important\nlike the ESXi Heartbeat Port.\n\n529\n00:26:27.760 --> 00:26:30.690\nI need to get heartbeat messages from\nthe server so I know that they're on.\n\n530\n00:26:30.690 --> 00:26:33.670\nIf this isn't set then things\nare gonna break down, right?\n\n531\n00:26:33.670 --> 00:26:35.900\nSo I need to get that put in place and\nset.\n\n532\n00:26:37.440 --> 00:26:38.330\nNormally, you leave these alone.\n\n533\n00:26:38.330 --> 00:26:39.920\nRight, we don't want to mess with it.\n\n534\n00:26:39.920 --> 00:26:42.180\nIn my case, I'm pretty sure I already\nhave a web server running, so\n\n535\n00:26:42.180 --> 00:26:43.720\nI'm going to get a complaint\non that port 80.\n\n536\n00:26:43.720 --> 00:26:47.320\nSo like if I just hit Next,\nthen I get an error.\n\n537\n00:26:47.320 --> 00:26:48.860\nYeah, there it is.\nThe following external ports\n\n538\n00:26:48.860 --> 00:26:50.090\nare already in use.\n\n539\n00:26:50.090 --> 00:26:52.370\nWhen you deploy Windows,\nWindows loves to add IIS.\n\n540\n00:26:52.370 --> 00:26:55.770\nPractically anything you do to it,\nif you just like, click on an icon,\n\n541\n00:26:55.770 --> 00:26:56.770\nit'll install IIS.\n\n542\n00:26:56.770 --> 00:26:58.650\nI don't know why they get so\ncrazy about that.\n\n543\n00:26:58.650 --> 00:27:00.910\nAnd so\nyour system may already be using port 80.\n\n544\n00:27:00.910 --> 00:27:06.200\nI could change VMware to a different\nport but vCenter is the primary product\n\n545\n00:27:06.200 --> 00:27:09.380\nthat I care about here, I want it to have\nthe ports that it wants, so I'm gonna go.\n\n546\n00:27:09.380 --> 00:27:12.550\nI guess I could remove IIS but\na lot of the times it gets put back again,\n\n547\n00:27:12.550 --> 00:27:13.270\nit kind of makes you angry.\n\n548\n00:27:13.270 --> 00:27:16.654\nSo what I'm gonna do is I'm\ngonna change IIS' port, and\n\n549\n00:27:16.654 --> 00:27:19.771\nI'm gonna go back to my server manager and\ninto IIS.\n\n550\n00:27:19.771 --> 00:27:24.765\nAnd ISS I am gonna browse in here and\nfind the default site.\n\n551\n00:27:24.765 --> 00:27:27.548\nI do not want the platform manager.\n\n552\n00:27:27.548 --> 00:27:30.500\nSo I'm gonna browse into my default site.\n\n553\n00:27:31.770 --> 00:27:34.878\nSure enough, if I look at it,\nsee how it shows up Binding on port 80,\n\n554\n00:27:34.878 --> 00:27:36.000\nI'm gonna change that.\n\n555\n00:27:36.000 --> 00:27:40.348\nSo I'll find the default site,\nI'll go into its bindings, and\n\n556\n00:27:40.348 --> 00:27:45.194\nI'm gonna change it from port 80\nto like port, I don't know, 81.\n\n557\n00:27:45.194 --> 00:27:48.793\nSomething different, just something not\n80 [LAUGH] and so I'll get that set.\n\n558\n00:27:48.793 --> 00:27:49.804\nThere we go.\n\n559\n00:27:49.804 --> 00:27:52.720\nAnd so that's in place,\nthat will get it off of port 80.\n\n560\n00:27:52.720 --> 00:27:55.820\nAnd now when I go back\nto my vCenter install,\n\n561\n00:27:55.820 --> 00:27:59.380\nif I hit Next, it's a lot happier, okay.\n\n562\n00:27:59.380 --> 00:28:01.780\nAnd then from there,\nI just pick my file pads.\n\n563\n00:28:01.780 --> 00:28:02.750\nI'll leave it at the default.\n\n564\n00:28:02.750 --> 00:28:05.080\nIf you got more than one hard drive, you\nmight wanna pick a different hard drive,\n\n565\n00:28:05.080 --> 00:28:07.590\nI don't really care and I'll move forward.\n\n566\n00:28:07.590 --> 00:28:12.020\nI can participate in the VMware customer\nexperience improvement program.\n\n567\n00:28:12.020 --> 00:28:14.460\nWhich means anytime it crash,it\nsends a message to VMware.\n\n568\n00:28:14.460 --> 00:28:15.700\nIt's entirely up to you.\n\n569\n00:28:15.700 --> 00:28:17.680\nSo since this is a lab,\nI'm gonna turn it off.\n\n570\n00:28:17.680 --> 00:28:21.200\nIn real life I do normally leave it on,\ntry and help find problems.\n\n571\n00:28:22.410 --> 00:28:24.260\nAnd that should be about about\nall the information it needs.\n\n572\n00:28:24.260 --> 00:28:28.600\nIt gives me a nice, little summary here,\nand then, go ahead and install.\n\n573\n00:28:28.600 --> 00:28:32.865\nSo once that's done,\nvCenter installation's gonna kickoff and\n\n574\n00:28:32.865 --> 00:28:34.195\noff it goes.\n\n575\n00:28:34.195 --> 00:28:37.095\nAll right, now, this process,\nit takes a while.\n\n576\n00:28:37.095 --> 00:28:41.645\nIt takes, for me, it seems to be at\nleast 30 minutes for it to just go.\n\n577\n00:28:41.645 --> 00:28:43.455\nBecause it does a lot of stuff.\n\n578\n00:28:43.455 --> 00:28:44.795\nIt's setting up the database.\n\n579\n00:28:44.795 --> 00:28:46.470\nIt's pre-populating the database.\n\n580\n00:28:46.470 --> 00:28:48.580\nIt's setting up it's own\nproprietary web server,\n\n581\n00:28:48.580 --> 00:28:50.050\nit's got to get the pages loaded for that.\n\n582\n00:28:50.050 --> 00:28:52.470\nIt's got to get the system and\nservices started, and\n\n583\n00:28:52.470 --> 00:28:55.040\nall this other stuff is\nhappening in the background.\n\n584\n00:28:55.040 --> 00:28:58.575\n>> So Don, we're gonna have an episode,\n30 minute episode of a progress bar.\n\n585\n00:28:58.575 --> 00:29:03.630\n>> [LAUGH] That could be the case So,\nfortunately, I think I've got an out here.\n\n586\n00:29:03.630 --> 00:29:04.250\nWe don't have to wait for\n\n587\n00:29:04.250 --> 00:29:06.370\nit, cuz I think we're almost out\nof time in the episode anyway.\n\n588\n00:29:06.370 --> 00:29:07.440\nSo why don't we do this?\n\n589\n00:29:07.440 --> 00:29:10.310\nI'm gonna let that thing churn along,\nand it literally, if we look at it,\n\n590\n00:29:10.310 --> 00:29:14.350\nit's a little green bar, not a blue bar,\nbut a little green bar that's gonna slowly\n\n591\n00:29:14.350 --> 00:29:18.030\nmove from this edge of my screen all\nthe way to this edge of my screen.\n\n592\n00:29:18.030 --> 00:29:21.780\nAnd when that's done,\nvCenter will be up and running.\n\n593\n00:29:21.780 --> 00:29:26.540\nAnd just like we saw with ESXi,\nI can get connected and start to do some\n\n594\n00:29:26.540 --> 00:29:30.270\nbasic configurations in it to get\nit ready to go and input and use.\n\n595\n00:29:30.270 --> 00:29:33.800\nBut that might be better suited for\na part two episode.\n\n596\n00:29:33.800 --> 00:29:34.590\nWhat do you think, Wes?\n\n597\n00:29:34.590 --> 00:29:35.300\n>> That sound good.\n\n598\n00:29:35.300 --> 00:29:37.750\nSo we are gonna go ahead and\nend this episode.\n\n599\n00:29:37.750 --> 00:29:40.250\nDon, anything you want to\nthrow into this episode or\n\n600\n00:29:40.250 --> 00:29:42.000\nare we gonna save that for part two?\n\n601\n00:29:42.000 --> 00:29:45.310\n>> Just remember that there are a lot of\ndecisions that I made and on all of those\n\n602\n00:29:45.310 --> 00:29:48.720\ndecisions, they can be changed after\nthe fact, but it's not exactly easy.\n\n603\n00:29:48.720 --> 00:29:50.570\nSo, plan for the future.\n\n604\n00:29:50.570 --> 00:29:53.156\nPlan for\nscoping that out the way that you want.\n\n605\n00:29:53.156 --> 00:29:56.513\nYou might know your environment is small\ntoday, but if you know it's gonna grow\n\n606\n00:29:56.513 --> 00:29:59.483\nbigger and bigger and bigger,\ngo to an external database right away.\n\n607\n00:29:59.483 --> 00:30:02.461\nAnd that way you can have an external\ndatabase on a small system and\n\n608\n00:30:02.461 --> 00:30:05.610\nyou can just upgrade it and\nincrease its resources over time.\n\n609\n00:30:05.610 --> 00:30:09.280\nVersus trying to migrate from one database\nto another, that's not exactly easy.\n\n610\n00:30:09.280 --> 00:30:12.470\nThe other thing is, remember with vCenter,\nwe can do it as a VM,\n\n611\n00:30:12.470 --> 00:30:16.200\nI'm doing it right here, but it's kinda\nbetter to have it on physical hardware.\n\n612\n00:30:16.200 --> 00:30:19.270\nThat way if your environment is damaged,\nyou can still get into vCenter.\n\n613\n00:30:19.270 --> 00:30:21.560\nIf you get locked out of vCenter,\ntroubleshooting and\n\n614\n00:30:21.560 --> 00:30:23.590\nsupport your environment becomes very,\nvery difficult, so\n\n615\n00:30:23.590 --> 00:30:26.670\nyou want to have that tool\navailable even during failure.\n\n616\n00:30:26.670 --> 00:30:29.340\n>> Well, Don we thank you for\ntaking us through the installation here.\n\n617\n00:30:29.340 --> 00:30:32.110\nWe appreciate you the viewer watching,\nsigning up for ITProTV,\n\n618\n00:30:32.110 --> 00:30:33.750\nI've been your host Wes Bryan.\n\n619\n00:30:33.750 --> 00:30:34.430\n>> And I'm Don Pizet.\n\n620\n00:30:34.430 --> 00:30:35.820\n>> And we'll see you next time.\n\n621\n00:30:35.820 --> 00:30:44.760\n[SOUND]\n\n",
          "vimeoId": "168052858"
        },
        {
          "description": "In this episode, Wes and Don continue their demonstration on installing and configuring vCenter to manage ESXi hosts. They look at using the Native client or the more feature rich Web Client to configure the ESXi hosts. They explore the various settings that can be configure in Web Client.",
          "length": "1813",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-3-2-installing_vmware_vcenter_pt2-052416-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-3-2-installing_vmware_vcenter_pt2-052416-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-3-2-installing_vmware_vcenter_pt2-052416-1-sm.jpg",
          "title": "Installing VMware vCenter Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.171 --> 00:00:15.952\nWelcome back to another exciting episode\nhere at IT Pro TV I'm your host Wes Bryan,\n\n3\n00:00:15.952 --> 00:00:19.480\nand in today's episode we're continuing\nthrough our series in VMware.\n\n4\n00:00:19.480 --> 00:00:23.190\nMore specifically, we're looking at the\nVMware Certified Professional Version 6.\n\n5\n00:00:23.190 --> 00:00:25.280\nJoining me back in the studio is\nnone other than Mr. Don Pezet.\n\n6\n00:00:25.280 --> 00:00:26.720\nDon, how are you doing sir?\n\n7\n00:00:26.720 --> 00:00:27.670\n>> I'm doing great, Wes.\n\n8\n00:00:27.670 --> 00:00:29.305\nReady to Jump in and make up for\n\n9\n00:00:29.305 --> 00:00:32.235\nnot getting through all of my content\non the last thirty minute episode.\n\n10\n00:00:32.235 --> 00:00:34.415\nYou know were talking about\nvCenter in the last episode.\n\n11\n00:00:34.415 --> 00:00:36.285\nWe talked about what it is,\nthe requirements and\n\n12\n00:00:36.285 --> 00:00:37.705\nwe started the install process.\n\n13\n00:00:37.705 --> 00:00:41.640\nI was describing all the different\nways we could choose to deploy it and\n\n14\n00:00:41.640 --> 00:00:43.580\nsomehow managed to not get\nthrough it in that episode.\n\n15\n00:00:43.580 --> 00:00:44.950\nBut it actually kind of worked out well,\n\n16\n00:00:44.950 --> 00:00:48.330\nbecause we ended the episode\nwith the installer running and\n\n17\n00:00:48.330 --> 00:00:50.540\nthe little green bar was starting\nto move across the screen.\n\n18\n00:00:50.540 --> 00:00:52.410\nAnd that can take a solid 30 minutes,\n\n19\n00:00:52.410 --> 00:00:55.800\neven longer on a slow machine if you don't\nhave a lot of resources attached to it.\n\n20\n00:00:55.800 --> 00:00:57.780\nSo, I just let that run, and\n\n21\n00:00:57.780 --> 00:01:00.730\nnow here we are kicking off this episode\nwhere that green bar has finally made\n\n22\n00:01:00.730 --> 00:01:04.080\nit to the other side and we're ready\nto continue on working with vCenter.\n\n23\n00:01:04.080 --> 00:01:05.510\nActually getting in there and using it.\n\n24\n00:01:05.510 --> 00:01:07.960\nSo let's just dive right in and\ntake a look at it.\n\n25\n00:01:07.960 --> 00:01:10.820\nSo here I've got our server,\nthis is exactly as it was left.\n\n26\n00:01:10.820 --> 00:01:15.210\nWhen that green bar reaches the end of\nthe screen, you get this little pop up.\n\n27\n00:01:15.210 --> 00:01:17.850\nAnd this basically is just telling\nme that set up is completed.\n\n28\n00:01:17.850 --> 00:01:20.770\nAnd it's telling me about\nsome post installation steps,\n\n29\n00:01:20.770 --> 00:01:22.260\nthings that I should do next.\n\n30\n00:01:22.260 --> 00:01:25.020\nLike it's warning me to\ngo into Evaluation Mode.\n\n31\n00:01:25.020 --> 00:01:27.730\nThis vCenter server will run for\ntwo months and\n\n32\n00:01:27.730 --> 00:01:32.160\nafter it hits that 60 day mark it's\ngonna stop letting you log in, it's\n\n33\n00:01:32.160 --> 00:01:35.210\ngonna stop letting you manage you servers\nand everything's gonna kind of freeze.\n\n34\n00:01:35.210 --> 00:01:36.510\nSo, that's not so good.\n\n35\n00:01:36.510 --> 00:01:40.210\nSee it says all host will be\ndisconnected from vCenter Server.\n\n36\n00:01:40.210 --> 00:01:44.310\nSo, it actually tells the host\nto stop reporting back to us.\n\n37\n00:01:44.310 --> 00:01:48.220\nSo if I then go and buy a license, I've\ngotta go and rejoin all of those hosts.\n\n38\n00:01:48.220 --> 00:01:49.460\nAnd that's not exactly a lot of fun.\n\n39\n00:01:49.460 --> 00:01:52.730\nSo we definitely wanna make sure\nwe update that license key.\n\n40\n00:01:52.730 --> 00:01:55.500\nAnd then it's telling us that we\ncan use the vSphere web client to\n\n41\n00:01:55.500 --> 00:01:57.140\nmanage the vCenter server.\n\n42\n00:01:57.140 --> 00:02:00.920\nAnd they give us a link right\ndown here to launch it.\n\n43\n00:02:00.920 --> 00:02:01.430\nRight?\n\n44\n00:02:01.430 --> 00:02:03.270\nNow, don't be misled.\n\n45\n00:02:03.270 --> 00:02:04.600\nThat button is really big and\n\n46\n00:02:04.600 --> 00:02:08.270\nit looks awfully tempting and I just want\nto click on it and get into that server.\n\n47\n00:02:08.270 --> 00:02:10.960\nThey're telling me my username right here:\nadministrator at v-spehere dot local.\n\n48\n00:02:10.960 --> 00:02:12.490\nI want to click that link.\n\n49\n00:02:12.490 --> 00:02:15.260\nThe problem is, I'm on a server.\n\n50\n00:02:15.260 --> 00:02:17.490\nI'm on Windows Server 2012 R2.\n\n51\n00:02:17.490 --> 00:02:21.460\nAnd the default web browser is\nInternet Explorer, that's not a problem.\n\n52\n00:02:21.460 --> 00:02:24.360\nBut, Internet Explorer running on a server\n\n53\n00:02:24.360 --> 00:02:27.010\nis running on what's called\nEnhanced Security Mode.\n\n54\n00:02:27.010 --> 00:02:30.840\nAnd so IE, what is it,\nIE SC, something like that.\n\n55\n00:02:30.840 --> 00:02:33.990\nInternet Explorer Enhanced Security,\nsomething or another.\n\n56\n00:02:33.990 --> 00:02:36.760\nAnyhow, some security mumbo jumbo that\nMicrosoft puts in place which makes\n\n57\n00:02:36.760 --> 00:02:39.410\nbasically nothing work in the web browser.\n\n58\n00:02:39.410 --> 00:02:41.510\nAnd that's a good thing,\nfrom a security perspective.\n\n59\n00:02:41.510 --> 00:02:44.300\nI don't need to be going and browsing\nwebsites and running applications, but\n\n60\n00:02:44.300 --> 00:02:46.970\nwhat it does mean is if I try and\nlaunch this, well, here, let's do it,\n\n61\n00:02:46.970 --> 00:02:48.450\nwe'll throw caution to the wind.\n\n62\n00:02:48.450 --> 00:02:49.970\nSo I'm gonna go ahead and launch it.\n\n63\n00:02:49.970 --> 00:02:53.810\nNow, when you browse to connect to it,\nI'll just go ahead and let it connect.\n\n64\n00:02:53.810 --> 00:02:57.156\nI'm gonna get a certificate warning,\nright, cuz that self-sign certificate,\n\n65\n00:02:57.156 --> 00:02:59.520\nI'll go ahead and continue on it.\n\n66\n00:02:59.520 --> 00:03:00.540\nYou can stop warning me.\n\n67\n00:03:01.560 --> 00:03:02.920\nCome on.\nYou can do it.\n\n68\n00:03:02.920 --> 00:03:06.060\nAnd I'll add it to my trusted sites\nbecause I'm very trusting and\n\n69\n00:03:06.060 --> 00:03:08.360\nwe'll see that's not actually\ngonna matter here in a second.\n\n70\n00:03:08.360 --> 00:03:10.640\nBecause as soon as I get there\nwhat's it gonna tell me?\n\n71\n00:03:10.640 --> 00:03:14.440\nI really need Adobe Flash Player Version\n11.5 or greater.\n\n72\n00:03:14.440 --> 00:03:20.230\nNow, we don't actually have to have Adobe\nFlash, because they can use HTML5, too.\n\n73\n00:03:20.230 --> 00:03:24.670\nBut it tries Flash first, and, if it\nfails, then it flips over to HTML5, and,\n\n74\n00:03:24.670 --> 00:03:27.640\nin this case,\nit never even gets the chance\n\n75\n00:03:27.640 --> 00:03:31.420\nto do that flip-over because\nit tries Flash and fails.\n\n76\n00:03:31.420 --> 00:03:33.170\nSo then what does it try to do?\n\n77\n00:03:33.170 --> 00:03:37.670\nIt tries to launch a local app on our\nsystem to be able to fire up the app store\n\n78\n00:03:37.670 --> 00:03:39.590\nto load the missing component\nwhich doesn't work.\n\n79\n00:03:39.590 --> 00:03:42.040\nif I allow it,\nit's just going to pop this thing up.\n\n80\n00:03:42.040 --> 00:03:45.420\nNo apps are installed to launch this type\nof link and things aren't going to work,\n\n81\n00:03:45.420 --> 00:03:48.250\nso in general, this is pretty broken.\n\n82\n00:03:48.250 --> 00:03:49.360\nRight?\nEven if I try and\n\n83\n00:03:49.360 --> 00:03:51.920\nlog in,\nwe'll see if it will even let me log in.\n\n84\n00:03:51.920 --> 00:03:55.600\nSo I'm gonna punch in\nadministrator@csphere.local and\n\n85\n00:03:55.600 --> 00:03:57.140\nI'll punch in my password.\n\n86\n00:03:58.370 --> 00:04:01.310\nAnd let's see if it'll\neven let us do that.\n\n87\n00:04:01.310 --> 00:04:03.320\nSo I'm gonna try and log in and yeah.\n\n88\n00:04:03.320 --> 00:04:05.610\nSo now I'm logged in Wonderful.\n\n89\n00:04:05.610 --> 00:04:08.310\nSo, it didn't quite work out well for\nme, right.\n\n90\n00:04:08.310 --> 00:04:13.260\nSo, don't try and get connected to vSphere\nor vCenter from the server itself.\n\n91\n00:04:13.260 --> 00:04:16.990\nAnd if you're running the appliance\nit's a Linux box with no GUI anyway, so\n\n92\n00:04:16.990 --> 00:04:18.150\nthat's not gonna happen.\n\n93\n00:04:18.150 --> 00:04:21.030\nbut if you bring up your own Windows box,\nthat temptation is there.\n\n94\n00:04:21.030 --> 00:04:24.200\nSo just don't even bother and just\nignore that nice, big, tempting button.\n\n95\n00:04:24.200 --> 00:04:25.980\nI'm going to just hit Finish and\n\n96\n00:04:25.980 --> 00:04:30.030\nknow that I have now got a vCenter\nserver fired up and running right here.\n\n97\n00:04:30.030 --> 00:04:33.460\nI am just gonna put it in the back\nof my mind and forget about it and\n\n98\n00:04:33.460 --> 00:04:34.490\ngo to my desktop.\n\n99\n00:04:34.490 --> 00:04:37.430\nOn my desktop, I can run Internet Explorer\nand things are gonna work out great.\n\n100\n00:04:37.430 --> 00:04:41.690\nNow If I connect to vCenter there's\ntwo ways that I can connect.\n\n101\n00:04:41.690 --> 00:04:45.130\nThere's the native client and\nthere's the web client, and\n\n102\n00:04:45.130 --> 00:04:46.730\nI said it in the last episode.\n\n103\n00:04:46.730 --> 00:04:48.920\nThe web client is fully featured.\n\n104\n00:04:48.920 --> 00:04:52.120\nYou're gonna have access to everything\nyou need via the web client.\n\n105\n00:04:52.120 --> 00:04:55.780\nIf you do the native client you\nget like a subset of features.\n\n106\n00:04:55.780 --> 00:04:58.890\nSo, I very rarely use the native client,\nbut it is there,\n\n107\n00:04:58.890 --> 00:05:01.150\nyou can use it if you want to.\n\n108\n00:05:01.150 --> 00:05:04.330\nThere's times you might need it in\nthe pinch if something breaks in the web\n\n109\n00:05:04.330 --> 00:05:05.150\nclient, you can try it.\n\n110\n00:05:05.150 --> 00:05:08.500\nBut because there's so much stuff missing,\nI almost always go to the web client.\n\n111\n00:05:08.500 --> 00:05:11.690\nSo on my client here,\nthis little Windows 10 machine.\n\n112\n00:05:11.690 --> 00:05:15.910\nAnd, I installed the native client\non it in the ESXI episode because\n\n113\n00:05:15.910 --> 00:05:20.270\nwe used it to connect directly\nto the ESX box without vCenter.\n\n114\n00:05:20.270 --> 00:05:23.610\nWell, I can use this client\nto connect to vCenter too.\n\n115\n00:05:23.610 --> 00:05:26.800\nIt doesn't have to connect\ndirectly to an ESX box.\n\n116\n00:05:26.800 --> 00:05:30.930\nSo, when I run that native client,\nI get the little pop-up that asks me for\n\n117\n00:05:30.930 --> 00:05:33.420\nthe IP address of the server\nI'm connecting to, and\n\n118\n00:05:33.420 --> 00:05:39.230\nlast time I put the IP address of an ESX\nbox, but I could put the hostname or\n\n119\n00:05:39.230 --> 00:05:42.590\nIP address of my vCenter server,\nassuming it ever comes up.\n\n120\n00:05:42.590 --> 00:05:43.560\nThere we go.\n\n121\n00:05:43.560 --> 00:05:46.730\nSo we can see from the last episode\nwhere I put in that IP address.\n\n122\n00:05:46.730 --> 00:05:50.660\nAnd see how it says up here,\nif I wanna manager multiple hosts,\n\n123\n00:05:50.660 --> 00:05:53.670\nenter the IP address or\nname of a vCenter server.\n\n124\n00:05:53.670 --> 00:05:56.570\nSo instead of connecting to a host,\nI can connect to a vCenter.\n\n125\n00:05:56.570 --> 00:05:59.260\nSo I can punch in that server now,\n\n126\n00:05:59.260 --> 00:06:05.040\nif I punch it in by IP It's gonna flip it\nto a name before it's all said and done.\n\n127\n00:06:05.040 --> 00:06:07.190\nIf I put it in as a name\nit stays that way,\n\n128\n00:06:07.190 --> 00:06:09.520\nso we usually use\nthe fully qualified name.\n\n129\n00:06:09.520 --> 00:06:12.530\nBut I can punch in an IP if I want here,\nand\n\n130\n00:06:12.530 --> 00:06:16.480\nput in that administrator@vsphere.local.\n\n131\n00:06:16.480 --> 00:06:19.020\nAnd the password that I set.\n\n132\n00:06:19.020 --> 00:06:19.580\nAll right.\n\n133\n00:06:19.580 --> 00:06:22.900\nSo, this is the native client\nthis is not the web interface.\n\n134\n00:06:22.900 --> 00:06:25.670\nAnd I'm gonna log in and\nit's gonna reach out to that server and\n\n135\n00:06:25.670 --> 00:06:27.180\nI'll probably get a certificate warning.\n\n136\n00:06:27.180 --> 00:06:27.910\nThere it is.\n\n137\n00:06:27.910 --> 00:06:29.750\nI'm gonna ahead and\nchoose to install the certificate so\n\n138\n00:06:29.750 --> 00:06:31.720\nI don't get this over and over again.\n\n139\n00:06:31.720 --> 00:06:33.810\nAnd I'll ignore the warning.\n\n140\n00:06:33.810 --> 00:06:35.430\nThrow caution to the wind.\n\n141\n00:06:35.430 --> 00:06:39.550\nAnd then once we're connected,\nwe'll see our vCenter deployment.\n\n142\n00:06:39.550 --> 00:06:41.510\nNow the vCenter deployment\nis not gonna be spectacular.\n\n143\n00:06:41.510 --> 00:06:43.030\nDon't expect to get blown away.\n\n144\n00:06:43.030 --> 00:06:45.302\nBecause we're not even\nmanaging one single host.\n\n145\n00:06:45.302 --> 00:06:48.420\nSo vCenter that's not managing anything,\nit's pretty boring.\n\n146\n00:06:48.420 --> 00:06:51.790\nWe gonna need to add some stuff too but I\njust want to show you the native interface\n\n147\n00:06:51.790 --> 00:06:55.040\ncuz then I'm gonna flip right\nover to the web client.\n\n148\n00:06:55.040 --> 00:06:56.250\nNow, it is taking a moment.\n\n149\n00:06:56.250 --> 00:06:58.860\nIf you look down here it is actually\nworking, loading the main form,\n\n150\n00:06:58.860 --> 00:07:01.750\ndisplaying the main form and\nthen there it is.\n\n151\n00:07:01.750 --> 00:07:02.500\nOkay.\n\n152\n00:07:02.500 --> 00:07:06.360\nSo now I'm in the native client and\nit, it's warning me of my evaluation,\n\n153\n00:07:06.360 --> 00:07:07.980\nlet me clear that.\n\n154\n00:07:07.980 --> 00:07:10.700\nIt doesn't look that much different\nthan the native client did when\n\n155\n00:07:10.700 --> 00:07:11.930\nI connected to ESX.\n\n156\n00:07:11.930 --> 00:07:15.860\nThe difference is I see my\nvCenter server here, and\n\n157\n00:07:15.860 --> 00:07:18.470\nif I was managing hosts,\nI'd see them underneath it.\n\n158\n00:07:18.470 --> 00:07:22.880\nI could see more than one\nESX server at the same time.\n\n159\n00:07:22.880 --> 00:07:25.200\nWhen I use the native client and\nI point it right to one server,\n\n160\n00:07:25.200 --> 00:07:26.480\nI can only manage that one server.\n\n161\n00:07:26.480 --> 00:07:29.040\nvCenter is what allows\nme to make manage more.\n\n162\n00:07:29.040 --> 00:07:30.070\nAnd so now I've got it.\n\n163\n00:07:30.070 --> 00:07:32.420\nAnd if I go to my home screen,\n\n164\n00:07:32.420 --> 00:07:35.660\nI see a lot more than when I\njust connected to an ESX box.\n\n165\n00:07:36.720 --> 00:07:39.280\nWhen I connected to an ESX box,\nwhat did I have here?\n\n166\n00:07:39.280 --> 00:07:43.320\nWhen I came into the main screen\nI had inventory but just for\n\n167\n00:07:43.320 --> 00:07:47.877\nthat one host and I had Administration\njust Roles and Licensing.\n\n168\n00:07:47.877 --> 00:07:51.661\nBut now that I'm connected to vCenter,\nI have a ton more.\n\n169\n00:07:51.661 --> 00:07:55.639\nI've got my vCenter Servers Settings,\nvCenter Solutions Managers.\n\n170\n00:07:55.639 --> 00:07:56.409\nStorage providers.\n\n171\n00:07:56.409 --> 00:08:01.330\nNetworking, data stores, VMs, and\ntemplates, all sorts of craziness.\n\n172\n00:08:01.330 --> 00:08:03.270\nAnd now I can start to\nadminister that system.\n\n173\n00:08:03.270 --> 00:08:06.340\nSo I can do it right here from\nthe native client if I want.\n\n174\n00:08:06.340 --> 00:08:07.320\nOr I can use the web client.\n\n175\n00:08:07.320 --> 00:08:11.480\nNow I'll be honest with you guys,\nthe native client is a little faster, and\n\n176\n00:08:11.480 --> 00:08:12.710\nit looks a little nicer.\n\n177\n00:08:12.710 --> 00:08:15.700\nIt's a little more modern so\na lot of people like it.\n\n178\n00:08:15.700 --> 00:08:17.160\nBut it's not as full features.\n\n179\n00:08:17.160 --> 00:08:19.330\nAnd so a lot of times I'll jump\nto that web client instead.\n\n180\n00:08:19.330 --> 00:08:23.120\nAnd if I wanna do that I can\njust fire up a web browser and\n\n181\n00:08:23.120 --> 00:08:24.960\nI can browse that server\nthat I wanna connect to.\n\n182\n00:08:24.960 --> 00:08:28.460\nNow in the background, let me just point\nout this while my browser's launching.\n\n183\n00:08:28.460 --> 00:08:31.400\nI typed in an IP to\nconnect to the server and\n\n184\n00:08:31.400 --> 00:08:34.020\nlook up here,\nsee how it changed it to the name?\n\n185\n00:08:34.020 --> 00:08:34.640\nRight?\n\n186\n00:08:34.640 --> 00:08:36.200\nIt flips over to a name so\n\n187\n00:08:36.200 --> 00:08:38.580\nyou need to have that fully\nqualified domain name in there.\n\n188\n00:08:38.580 --> 00:08:40.380\nThat was one of the last things\nI did in that last episode.\n\n189\n00:08:40.380 --> 00:08:43.786\nI created a DNS record for\nmy server so I could find it.\n\n190\n00:08:43.786 --> 00:08:44.796\nThat's important.\n\n191\n00:08:44.796 --> 00:08:48.954\nIt's doubly important in a web browser\nbecause when I browse that server,\n\n192\n00:08:48.954 --> 00:08:52.830\nwhen I browse to\n192.68.0.200 is my server.\n\n193\n00:08:52.830 --> 00:08:55.950\nWhen I browse to that server,\nwell it flipped secure.\n\n194\n00:08:55.950 --> 00:08:58.170\nSo let me authorize that certificate.\n\n195\n00:08:58.170 --> 00:09:02.120\nAnd then I get this page right\nhere asking me do I want to log in\n\n196\n00:09:02.120 --> 00:09:04.970\nto the vSphere web client\nwhich is exactly what I want.\n\n197\n00:09:04.970 --> 00:09:08.750\nAnd so now when I go to connect to\nthat it's got an IP address up here.\n\n198\n00:09:08.750 --> 00:09:10.880\nSee that IP address?\n\n199\n00:09:10.880 --> 00:09:15.410\nBut as soon as I go to log in it's\ngonna flip and I'm gonna see a domain\n\n200\n00:09:15.410 --> 00:09:18.770\nname instead, and so if I don't\nhave that it will fail to connect.\n\n201\n00:09:18.770 --> 00:09:23.010\nThis is the very first time that I've\nlaunched the web client from here and so\n\n202\n00:09:23.010 --> 00:09:24.180\nit's taking a moment.\n\n203\n00:09:24.180 --> 00:09:27.170\nEvery time I launch in the future\nit will cache a lot of this data.\n\n204\n00:09:27.170 --> 00:09:29.230\nBut remember when I launched\non the server, what did I get?\n\n205\n00:09:29.230 --> 00:09:31.620\nI got that I was missing Adobe Flash and\n\n206\n00:09:31.620 --> 00:09:34.280\nI got that one of the launching\nexternal application.\n\n207\n00:09:34.280 --> 00:09:36.910\nThis one wants to launch\nan external application too.\n\n208\n00:09:36.910 --> 00:09:39.120\nI can allow it but\nit's not gonna actually do anything.\n\n209\n00:09:39.120 --> 00:09:41.670\nIt's trying to link to the native client,\nif you've got it.\n\n210\n00:09:41.670 --> 00:09:42.810\nAnd so it's just gonna fail.\n\n211\n00:09:42.810 --> 00:09:44.740\nI'm gonna ignore that.\n\n212\n00:09:44.740 --> 00:09:47.150\nBut back here it's not\ncomplaining about flash anymore.\n\n213\n00:09:47.150 --> 00:09:48.210\nWhy is that?\n\n214\n00:09:48.210 --> 00:09:50.640\nWell, it say that I didn't have flash.\n\n215\n00:09:50.640 --> 00:09:52.700\nAnd now it's flipping and\nit's using HTML5 and\n\n216\n00:09:52.700 --> 00:09:54.370\nthe other native functions\nof the browsers.\n\n217\n00:09:54.370 --> 00:09:57.570\nIt's able to do that because we've\ngot the security level correct.\n\n218\n00:09:57.570 --> 00:10:04.090\nSo now I can log in as\nadministrator at vsphere.local and\n\n219\n00:10:04.090 --> 00:10:08.415\nI'll punch in my password and\nwe'll [INAUDIBLE] Log in,\n\n220\n00:10:08.415 --> 00:10:11.135\nnow I'm logging in as\nadministrator at .local.\n\n221\n00:10:11.135 --> 00:10:13.525\nThat's because I accepted\nthe default during the install.\n\n222\n00:10:13.525 --> 00:10:16.165\nYou might have changed that, so if you\nhad a different signal sign on domain,\n\n223\n00:10:16.165 --> 00:10:17.515\nyou'd need to provide that.\n\n224\n00:10:17.515 --> 00:10:19.475\nIf you gave a different user name,\n\n225\n00:10:19.475 --> 00:10:22.085\nwell actually it doesn't let you give\na different user name at that point,\n\n226\n00:10:22.085 --> 00:10:25.685\nwe'll see where we can create\nusers here in a little bit.\n\n227\n00:10:25.685 --> 00:10:28.530\nAll right, let's try and open it up again,\nlet me just cancel that.\n\n228\n00:10:28.530 --> 00:10:31.620\nSo it's trying to link up with a native\nclient and we don't necessarily need that.\n\n229\n00:10:31.620 --> 00:10:33.770\nWe can do it all from the web.\n\n230\n00:10:33.770 --> 00:10:37.270\nSo now it's going to pull up a web client\nand what you'll see is is looks very\n\n231\n00:10:37.270 --> 00:10:40.810\nsimilar to the native client but\nit's structured a little bit different but\n\n232\n00:10:40.810 --> 00:10:43.300\nwhat's important is that it has\nall the various features in it.\n\n233\n00:10:43.300 --> 00:10:45.350\nSo we'll be able to manage that server.\n\n234\n00:10:45.350 --> 00:10:49.950\nSo when I come into it, over here on\nthe left side, I have my navigator.\n\n235\n00:10:49.950 --> 00:10:53.710\nAnd, you'll see that I've got home,\ninventory,\n\n236\n00:10:53.710 --> 00:10:57.160\nhosting clusters, policies and profiles.\n\n237\n00:10:57.160 --> 00:10:58.800\nvRealize Orchestrator.\n\n238\n00:10:58.800 --> 00:11:00.000\nThat's one of the big differences.\n\n239\n00:11:00.000 --> 00:11:04.450\nIf I go to the native client,\nthe native client doesn't support plugins.\n\n240\n00:11:04.450 --> 00:11:09.450\nSo it's got just the vCenter tools in it,\nand that's it.\n\n241\n00:11:09.450 --> 00:11:11.980\nBut the web client supports plugins.\n\n242\n00:11:11.980 --> 00:11:16.680\nAnd so it can manage not just vCenter,\nbut all of VMware's other products.\n\n243\n00:11:16.680 --> 00:11:20.930\nAnd so I've got the hybrid cloud\nmanager for if I have V cloud.\n\n244\n00:11:20.930 --> 00:11:22.800\nI've got the V realize orchestrator.\n\n245\n00:11:22.800 --> 00:11:26.850\nIf I've got that in place, if you deploy\nVM horizon, you can get the horizon\n\n246\n00:11:26.850 --> 00:11:29.600\nmanagement tools added on here, and\nso now, you have one place to go.\n\n247\n00:11:29.600 --> 00:11:32.840\nThat's another reason why I prefer\nthe web client over the desktop client\n\n248\n00:11:32.840 --> 00:11:34.350\nis the plug-in extensibility.\n\n249\n00:11:34.350 --> 00:11:35.930\nYou can add a ton of stuff to it.\n\n250\n00:11:35.930 --> 00:11:37.860\nIn fact a lot of it adds it by itself.\n\n251\n00:11:37.860 --> 00:11:40.470\nI didn't add vRealize Orchestrator.\n\n252\n00:11:40.470 --> 00:11:41.750\nI didn't even install it.\n\n253\n00:11:41.750 --> 00:11:43.090\nBut its already got the plugin in there.\n\n254\n00:11:43.090 --> 00:11:45.540\nSo if I ever do deploy it,\nit'll be ready and available.\n\n255\n00:11:46.950 --> 00:11:48.600\nSo this is the web client.\n\n256\n00:11:48.600 --> 00:11:51.850\nAnd it's probably where you're going\nto spend the most of your time as\n\n257\n00:11:51.850 --> 00:11:53.230\na VMware admin.\n\n258\n00:11:53.230 --> 00:11:57.060\nIn fact, for the whole rest of this\nseries get used to this screen.\n\n259\n00:11:57.060 --> 00:11:59.110\nThis is where we're gonna spend\npretty much all of our time.\n\n260\n00:11:59.110 --> 00:12:03.780\nThere is a lot to do in here and it's\nall done right here via our web browser.\n\n261\n00:12:03.780 --> 00:12:05.240\nKinda convenient.\n\n262\n00:12:05.240 --> 00:12:08.960\nNow as far as Initial setup, there's\na few things that I need to worry about.\n\n263\n00:12:08.960 --> 00:12:10.470\nAnd one of the big things is my license.\n\n264\n00:12:10.470 --> 00:12:14.870\nSo I've got this nice big yellow bar up\ntop telling me, there are vCenter Server\n\n265\n00:12:14.870 --> 00:12:18.770\nsystems with expired or\nexpiring licenses in your inventory.\n\n266\n00:12:18.770 --> 00:12:20.620\nI'm in an eval, so I've got 60 days.\n\n267\n00:12:20.620 --> 00:12:21.510\nThat means I'm set to expire.\n\n268\n00:12:21.510 --> 00:12:23.830\nI'm going to expire in only two months.\n\n269\n00:12:23.830 --> 00:12:26.040\nSo, that's not good.\n\n270\n00:12:26.040 --> 00:12:27.700\nI need to get in there and\nput a license in for it.\n\n271\n00:12:27.700 --> 00:12:30.230\nAnd you can manage your license\nright here if you click that link,\n\n272\n00:12:30.230 --> 00:12:33.430\nit'll take you to the licensing screen,\nand in the licensing screen,\n\n273\n00:12:33.430 --> 00:12:35.560\nyou can view what licenses you have.\n\n274\n00:12:35.560 --> 00:12:37.260\nI don't have any.\n\n275\n00:12:37.260 --> 00:12:42.590\nNow you can add licenses in here,\nnot just vCenter, but ESX licenses also.\n\n276\n00:12:42.590 --> 00:12:46.430\nAnd that way, if I ever deploy an ESX\nhost and it boots up in eval mode,\n\n277\n00:12:46.430 --> 00:12:50.160\nI don't have to type in a license,\nI can just assign it from right here.\n\n278\n00:12:50.160 --> 00:12:53.680\nThat's really useful because you might\nhave one license that has five or\n\n279\n00:12:53.680 --> 00:12:55.250\nten activations in it.\n\n280\n00:12:55.250 --> 00:12:57.150\nYou can use that one license over and\nover again and\n\n281\n00:12:57.150 --> 00:12:59.380\nyou can keep track of how\nit's been used right here.\n\n282\n00:12:59.380 --> 00:13:04.039\n>> And VSphere will push out that\nactivation to your ESX hosts, and\n\n283\n00:13:04.039 --> 00:13:06.280\nbasically, kinda automate the process.\n\n284\n00:13:06.280 --> 00:13:07.970\nI guess it's not completely automated.\n\n285\n00:13:07.970 --> 00:13:09.890\n>> Yeah, it's pretty darn close, right?\n\n286\n00:13:09.890 --> 00:13:13.230\nIt's, with your host, all you have\nto really do is add your host in.\n\n287\n00:13:13.230 --> 00:13:16.390\nAnd then everything else you do from here,\nand so it's basically automated.\n\n288\n00:13:16.390 --> 00:13:19.710\nBut, we'd go in here and add it, and again\nI, just like in the last episode, I'd love\n\n289\n00:13:19.710 --> 00:13:22.780\nto show it to you guys, but it always\ndisplays the license key on the screen.\n\n290\n00:13:22.780 --> 00:13:24.880\nSo I've got valid keys,\nbut if I put them in here,\n\n291\n00:13:24.880 --> 00:13:27.004\nthey're not gonna be valid for long.\n\n292\n00:13:27.004 --> 00:13:29.560\n[LAUGH] So but you just hit\nthe little plus sign there and\n\n293\n00:13:29.560 --> 00:13:34.840\nyou type in your keys and the keys\nare if I remember like 25 digits and\n\n294\n00:13:34.840 --> 00:13:40.685\nso it will have a bunch of letters and\nnumbers that are.\n\n295\n00:13:40.685 --> 00:13:42.475\nLaid out like that.\n\n296\n00:13:42.475 --> 00:13:44.795\nYou just pace it in, and\nyou can do more than one.\n\n297\n00:13:44.795 --> 00:13:48.345\nJust punch them all in here,\nover and over again, each one.\n\n298\n00:13:48.345 --> 00:13:53.700\nYou can copy and paste them right out of\nyour email or, if you go to my.vmware.com\n\n299\n00:13:53.700 --> 00:13:56.310\nyou'll have all your licences right there,\nyou can copy and paste them.\n\n300\n00:13:56.310 --> 00:13:59.510\nAnd when you throw them in there,\nit's gonna load them in, and\n\n301\n00:13:59.510 --> 00:14:03.540\nnow you can deploy them out to your\nclients and attach them as you need it.\n\n302\n00:14:03.540 --> 00:14:07.070\nSo, like if I hit next, well those are all\ninvalid so it's not too happy about it.\n\n303\n00:14:07.070 --> 00:14:07.710\nI'll just cancel that.\n\n304\n00:14:07.710 --> 00:14:09.560\nBut they'll all show up\nright here on the list and\n\n305\n00:14:09.560 --> 00:14:12.600\nyou can start attaching them to host It's\nkind of cool cause you can actually yank\n\n306\n00:14:12.600 --> 00:14:14.980\nback a license, and\nattach it to another host.\n\n307\n00:14:14.980 --> 00:14:17.550\nSo if you're about to\ndecommission an ESX box\n\n308\n00:14:17.550 --> 00:14:22.370\nmaybe it's running the latest version of\nESX, but it's older hardware so you buy\n\n309\n00:14:22.370 --> 00:14:25.250\nnew hardware you can yank your license\noff of one and reattach it to another.\n\n310\n00:14:25.250 --> 00:14:28.440\nIt's nice to be able to move that as\nlong as the license isn't expired.\n\n311\n00:14:28.440 --> 00:14:29.870\nRight, that would be a problem.\n\n312\n00:14:30.970 --> 00:14:32.010\nSo I definitely want to do that,\n\n313\n00:14:32.010 --> 00:14:36.150\nget my licenses squared away before I put\na ton of effort and work into my server.\n\n314\n00:14:36.150 --> 00:14:38.710\nOtherwise I'm gonna regret it but\n\n315\n00:14:38.710 --> 00:14:41.350\nassuming that we're good then\nwe can jump back to our home.\n\n316\n00:14:41.350 --> 00:14:45.880\nNow, navigating inside of the vCenter\nscreen is a little bit quirky\n\n317\n00:14:45.880 --> 00:14:48.620\nbecause there's several\ndifferent ways to navigate.\n\n318\n00:14:48.620 --> 00:14:51.350\nThe navigation bar over here is\nwhat we're normally gonna use.\n\n319\n00:14:51.350 --> 00:14:54.390\nYou've got this button that's\nreally like a bread crumb trail.\n\n320\n00:14:54.390 --> 00:14:57.790\nBecause when you navigate in you might\ngo several layers deep in some of these\n\n321\n00:14:57.790 --> 00:14:59.940\nthings as you navigate and so\nthat'll start to change and\n\n322\n00:14:59.940 --> 00:15:03.650\nyou can go backwards and forwards based\non on where you're at in the hierarchy.\n\n323\n00:15:03.650 --> 00:15:07.540\nYou can also view a little history to\npull up your most recent location, so\n\n324\n00:15:07.540 --> 00:15:10.360\nit's very similar to what you\ndo in a web browser anyway, but\n\n325\n00:15:10.360 --> 00:15:12.580\nbeing done natively through the interface.\n\n326\n00:15:12.580 --> 00:15:14.380\nThat's one way to navigate.\n\n327\n00:15:14.380 --> 00:15:18.760\nAlso, you've always got a home button\nright here, and when you float over\n\n328\n00:15:18.760 --> 00:15:24.800\nthe home button you get all of the primary\ncategories that you can jump around into.\n\n329\n00:15:24.800 --> 00:15:27.200\nFor example,\nI'm actually in administration, and\n\n330\n00:15:27.200 --> 00:15:31.460\nunder administration I'm in licensing,\nis what I'm looking at right now.\n\n331\n00:15:31.460 --> 00:15:33.404\nActually I've managed to jump into users.\n\n332\n00:15:33.404 --> 00:15:37.528\nSo if I go up here to Home, I could go to\nAdministration, and it'll take me right\n\n333\n00:15:37.528 --> 00:15:41.345\nhere to the first tool on the screen,\nand then I can jump down to Licenses,\n\n334\n00:15:41.345 --> 00:15:44.979\nso it makes it pretty easy to navigate and\njump around on these things,\n\n335\n00:15:44.979 --> 00:15:48.984\nbut it does get a little bit confusing cuz\nyou have a lot of duplicate Places and\n\n336\n00:15:48.984 --> 00:15:52.836\nthe reason you have the duplicate\nplaces is you can customize this stuff.\n\n337\n00:15:52.836 --> 00:15:57.250\nSee how this has like a little pin on\nit right there, like a thumb tack?\n\n338\n00:15:57.250 --> 00:16:01.260\nIf you click that thumb tack, see how it\njust compressed the navigator to take\n\n339\n00:16:01.260 --> 00:16:05.430\nless space on the screen You can do the\nsame thing over here with like alarms and\n\n340\n00:16:05.430 --> 00:16:06.590\nwork in progress.\n\n341\n00:16:06.590 --> 00:16:09.950\nNow I encourage you not to do that\nwith these two because they each serve\n\n342\n00:16:09.950 --> 00:16:11.620\na particular purpose.\n\n343\n00:16:11.620 --> 00:16:14.320\nWhen you're dealing with the native\nclient, you're connected,\n\n344\n00:16:14.320 --> 00:16:16.800\nyou're managing the system,\nyou're the only person.\n\n345\n00:16:16.800 --> 00:16:21.030\nBut vCenter, vCenter allows centralized\nmanagement of your entire environment.\n\n346\n00:16:21.030 --> 00:16:24.770\nAnd if you've got ten network admins,\nall ten of them might be logged in and\n\n347\n00:16:24.770 --> 00:16:27.920\nworking at one time and\nyou don't wanna step on each other's toes.\n\n348\n00:16:27.920 --> 00:16:32.590\nSo you get alarms, which are errors on\nthe system and all of you will see it.\n\n349\n00:16:32.590 --> 00:16:35.260\nSo you see it, you know something is going\non, you can jump in and deal with it.\n\n350\n00:16:35.260 --> 00:16:36.490\nI've got a health alarm.\n\n351\n00:16:36.490 --> 00:16:38.890\nBecause of my license,\nwe've already seen the alarm.\n\n352\n00:16:38.890 --> 00:16:42.350\nSo everybody sees it and any one of\nus can go in there and correct it.\n\n353\n00:16:42.350 --> 00:16:45.940\nDown at the bottom I see work progress\nthough, these are tasks that are running.\n\n354\n00:16:45.940 --> 00:16:48.920\nRemember in the native client,\nlet me see if I still have that.\n\n355\n00:16:48.920 --> 00:16:52.540\nThere, down in the native client we have\nrecent tasks and we can see what's going\n\n356\n00:16:52.540 --> 00:16:56.630\non in the system, in the web one it's\nall over here, work in progress.\n\n357\n00:16:56.630 --> 00:16:59.050\nAnd so I can see tasks that\nare running right now.\n\n358\n00:16:59.050 --> 00:17:02.190\nSo if ten people are logged in,\nI can see what it is that they're doing,\n\n359\n00:17:02.190 --> 00:17:03.200\nif they're actually doing anything.\n\n360\n00:17:03.200 --> 00:17:05.530\nIf they're just looking,\nit doesn't show up.\n\n361\n00:17:05.530 --> 00:17:08.870\nAnd then when it's complete, it'll\nshow up down here under Recent Tasks,\n\n362\n00:17:08.870 --> 00:17:10.020\nthose ones that are done.\n\n363\n00:17:10.020 --> 00:17:13.300\nThey'll either show us Completed or\nFailed, and we'll be able to find out why.\n\n364\n00:17:13.300 --> 00:17:14.670\nBut we all see it.\n\n365\n00:17:14.670 --> 00:17:15.890\nIt's a combined environment.\n\n366\n00:17:15.890 --> 00:17:19.430\nSo it makes it where you can have\nmultiple people working, but\n\n367\n00:17:19.430 --> 00:17:21.090\nnot stepping on each other's toes.\n\n368\n00:17:21.090 --> 00:17:23.650\n>> So, basically, Don,\nconfigure your workspace the way you want.\n\n369\n00:17:23.650 --> 00:17:26.590\nAs much real estate as you want,\nor as little real estate.\n\n370\n00:17:26.590 --> 00:17:28.350\nBut leave those two pains where they are.\n\n371\n00:17:28.350 --> 00:17:29.760\nAs a best practice.\n\n372\n00:17:29.760 --> 00:17:34.740\n>> For me, the navigator I almost always\nshrink, I actually don't use the navigator\n\n373\n00:17:34.740 --> 00:17:38.190\nall that much because I'm typically using\nthat home button up top that lets me\n\n374\n00:17:38.190 --> 00:17:41.470\nnavigate, but the navigator's nice\nto have it when you're navigating.\n\n375\n00:17:41.470 --> 00:17:43.370\nHaving it minimized,\nI didn't show you guys,\n\n376\n00:17:43.370 --> 00:17:46.240\nhaving it minimized like this,\nwhen you mouse over it and\n\n377\n00:17:46.240 --> 00:17:51.290\nclick, it just pops out, and so\nyou've got navigation when you need it.\n\n378\n00:17:51.290 --> 00:17:53.400\nAnd then when you don't need it you\njust click it and it goes away again.\n\n379\n00:17:53.400 --> 00:17:55.900\nOr any time you click a link it\nwill automatically go away so\n\n380\n00:17:55.900 --> 00:17:58.450\nit's out of the way\nwhen you don't need it.\n\n381\n00:17:58.450 --> 00:18:02.580\nIf you've got a 4K screen with an insane\nresolution set, you don't care,\n\n382\n00:18:02.580 --> 00:18:04.030\nyou've got tons of real estate.\n\n383\n00:18:04.030 --> 00:18:08.280\nBut, as I get older I just can't read\nthe screens as well as I used to.\n\n384\n00:18:08.280 --> 00:18:11.910\nI need to have a bigger font, I wanna have\nthis stuff with more room on the screen,\n\n385\n00:18:11.910 --> 00:18:14.500\nand your web browser's\nzoom function works, but\n\n386\n00:18:14.500 --> 00:18:16.360\nyou start running out\nof space really quick.\n\n387\n00:18:16.360 --> 00:18:22.470\nSo, I almost always collapse the Navigator\nand the recent tasks down at the bottom.\n\n388\n00:18:22.470 --> 00:18:24.090\nRecent tasks are stuff that are done and\n\n389\n00:18:24.090 --> 00:18:27.820\nI don't normally care about stuff that's\nalready done unless it errored out, right?\n\n390\n00:18:27.820 --> 00:18:32.150\nAnd so I'll hit the little tack\non that one to collapse it down.\n\n391\n00:18:32.150 --> 00:18:34.160\nAnd now I got a ton of room.\n\n392\n00:18:34.160 --> 00:18:36.690\nAnd so each of these are laid out and\n\n393\n00:18:36.690 --> 00:18:40.850\nyou've got it in a way that\ntakes up a little less space.\n\n394\n00:18:40.850 --> 00:18:42.380\nYou get a little more room.\n\n395\n00:18:42.380 --> 00:18:46.640\nAnd then alarms may be more important\nto me than work in progress.\n\n396\n00:18:46.640 --> 00:18:51.510\nAnd so you can always float over the\nmiddle bar and re-adjust the sizes there\n\n397\n00:18:51.510 --> 00:18:54.630\nto give a little more room to one or\nthe other and I can make it so\n\n398\n00:18:54.630 --> 00:18:58.170\nthat my heads covers it perfectly and\nthen I don't know how anyone is working.\n\n399\n00:18:58.170 --> 00:19:02.450\nWhen you get that in place it's up to\nyou to customize it to your needs.\n\n400\n00:19:02.450 --> 00:19:06.740\nIt is a pretty flexible environment\nthat works up pretty well.\n\n401\n00:19:06.740 --> 00:19:08.650\nIf you get rid of a screen, so for\n\n402\n00:19:08.650 --> 00:19:13.420\nexample let's just say by accident,\nwell let me do the navigator.\n\n403\n00:19:13.420 --> 00:19:17.940\nAll right, alarms,\nsee how alarms has an X?\n\n404\n00:19:17.940 --> 00:19:20.820\nI can actually get rid of alarms,\nand now it's gone.\n\n405\n00:19:20.820 --> 00:19:23.360\nAnd I'm like no, those are alarms,\nthose are kind of important,\n\n406\n00:19:23.360 --> 00:19:24.600\nI want to add alarms back.\n\n407\n00:19:24.600 --> 00:19:26.060\nHow do I add it back?\n\n408\n00:19:26.060 --> 00:19:29.530\nWell, There's not like a quick, easy way\nto do it, right here from this screen.\n\n409\n00:19:29.530 --> 00:19:31.020\nBut if you go up top to your username and\n\n410\n00:19:31.020 --> 00:19:33.980\nclick on your username,\nyou'll see layout settings right there.\n\n411\n00:19:33.980 --> 00:19:38.280\nAnd you can go into layout settings and\nnow you can turn alarms back on.\n\n412\n00:19:38.280 --> 00:19:39.640\nThere's not a whole lot to do here.\n\n413\n00:19:39.640 --> 00:19:42.690\nI can turn alarms on,\nI can turn recent tasks on or off, and\n\n414\n00:19:42.690 --> 00:19:44.220\nI can reset to the default layout.\n\n415\n00:19:44.220 --> 00:19:47.340\nSo if I messed with it,\nI can just hit reset to default layout and\n\n416\n00:19:47.340 --> 00:19:48.960\nit'll put it back to the way\nthat it's supposed to be.\n\n417\n00:19:48.960 --> 00:19:52.160\nAnd so it's gonna reload and\nnow it's backed up.\n\n418\n00:19:52.160 --> 00:19:56.020\nEven the navigator is no longer unpinned,\nit's pinned back to where it should be.\n\n419\n00:19:56.020 --> 00:19:57.820\nSo you really can't screw it up,\n\n420\n00:19:57.820 --> 00:19:59.340\nyou can put it back to the way\nthat you want it to be.\n\n421\n00:19:59.340 --> 00:20:01.550\nAnd this is tracked individually per user.\n\n422\n00:20:01.550 --> 00:20:05.190\nSo if you have your own user account,\nthen you set it the way you want and\n\n423\n00:20:05.190 --> 00:20:06.120\nit's ready to rock.\n\n424\n00:20:06.120 --> 00:20:07.920\nSo the UI is pretty convenient.\n\n425\n00:20:07.920 --> 00:20:10.450\nAnd, for me, this is where I go.\n\n426\n00:20:10.450 --> 00:20:13.300\nI very rarely launch the native client,\nI almost entirely work here.\n\n427\n00:20:13.300 --> 00:20:15.520\nEven though the native client is\na little bit more responsive and\n\n428\n00:20:15.520 --> 00:20:17.530\na little faster,\nI still like the web client.\n\n429\n00:20:17.530 --> 00:20:21.530\nIt's got all the features I need and\nit's just right in the web browser.\n\n430\n00:20:21.530 --> 00:20:25.970\n>> Well Don thank you for showing us\nthe how to get vCenter up and running.\n\n431\n00:20:25.970 --> 00:20:28.830\nDoes look like we are getting\na little bit close to the end, but\n\n432\n00:20:28.830 --> 00:20:30.800\ndo you got some additional information\nyou want to throw in there?\n\n433\n00:20:30.800 --> 00:20:32.870\n>> I'm going to push this one Wes cuz\n>> Well technically we have\n\n434\n00:20:32.870 --> 00:20:33.430\na V center set up.\n\n435\n00:20:33.430 --> 00:20:35.190\nIt's not doing anything and\n\n436\n00:20:35.190 --> 00:20:38.790\nso to really see how it works we\nneed to get at least one host in.\n\n437\n00:20:38.790 --> 00:20:42.280\nSo let me I'm going to import a host into\nthis thing so that we can get it managed.\n\n438\n00:20:42.280 --> 00:20:45.230\nAnd this is kind of an initial\nstep to use V center.\n\n439\n00:20:45.230 --> 00:20:48.650\nV center is useless if you\nhave no host attached to it.\n\n440\n00:20:48.650 --> 00:20:52.340\nI've got a host sitting right over here\nthat we connected to directly earlier but\n\n441\n00:20:52.340 --> 00:20:54.200\nlet's add it into V center and\nget a chance to see it.\n\n442\n00:20:54.200 --> 00:20:56.660\nI'm gonna throw the showtime\nlimit to the winds.\n\n443\n00:20:56.660 --> 00:21:00.650\nSo, what we're gonna do is the very\nfirst thing that I need to do\n\n444\n00:21:00.650 --> 00:21:02.230\nis create a data center.\n\n445\n00:21:02.230 --> 00:21:04.520\nInside of V center, you can have\nmore than one data center, but\n\n446\n00:21:04.520 --> 00:21:07.180\nyou have to have at least one data\ncenter to put a single host in.\n\n447\n00:21:07.180 --> 00:21:10.250\nSo for each server that we\nhave out there in the wild,\n\n448\n00:21:10.250 --> 00:21:12.880\nyou might have a disaster recovery or\nthe main or whatever.\n\n449\n00:21:12.880 --> 00:21:13.880\nYou need to create a data center.\n\n450\n00:21:13.880 --> 00:21:18.560\nSo, I'm going to create my first one,\nand we do that by going under hosts and\n\n451\n00:21:18.560 --> 00:21:19.420\nclusters.\n\n452\n00:21:19.420 --> 00:21:23.526\nSo I just went, I hit my home button and\nthen under home I'm going to hosts and\n\n453\n00:21:23.526 --> 00:21:24.177\nclusters.\n\n454\n00:21:24.177 --> 00:21:26.600\nIt's actually in the inventories category.\n\n455\n00:21:26.600 --> 00:21:30.120\nWhen you read textbooks and the help\ndocuments from VMware it gets a little\n\n456\n00:21:30.120 --> 00:21:35.190\nconfusing cuz it'll say like, navigate to\nHome, Inventories, Hosts and Clusters.\n\n457\n00:21:35.190 --> 00:21:37.660\nAnd you look at it and you're like,\nwell I go to Home, and there's Hosts and\n\n458\n00:21:37.660 --> 00:21:38.960\nClusters, where the heck is Inventories?\n\n459\n00:21:38.960 --> 00:21:42.170\nAnd it's just a category name, it's not\nactually something you click on, but\n\n460\n00:21:42.170 --> 00:21:43.630\nyou have these different categories.\n\n461\n00:21:43.630 --> 00:21:46.460\nSee, there's Administration, and so on.\n\n462\n00:21:46.460 --> 00:21:47.900\nI want hosting clusters.\n\n463\n00:21:47.900 --> 00:21:52.425\nAnd when I go to hosting clusters,\nI'm gonna see an internal error.\n\n464\n00:21:52.425 --> 00:21:57.190\n[LAUGH] So, and\nmy little flash player is not too happy.\n\n465\n00:21:57.190 --> 00:22:00.100\nSo let me reload that real quick.\n\n466\n00:22:00.100 --> 00:22:01.350\nAnd I guess I actually did load Flash.\n\n467\n00:22:01.350 --> 00:22:03.560\nI thought it was using HTML5 there, so\n\n468\n00:22:03.560 --> 00:22:05.360\nI guess it flipped over to Flash for\nsome reason.\n\n469\n00:22:05.360 --> 00:22:06.910\nBut let me let that reload.\n\n470\n00:22:06.910 --> 00:22:10.310\nAnd once I get back in there,\nI can jump in and\n\n471\n00:22:10.310 --> 00:22:12.420\nI'm gonna create that first data center.\n\n472\n00:22:12.420 --> 00:22:17.740\nIt actually will not let you import a host\nwhile you don't have a data center.\n\n473\n00:22:17.740 --> 00:22:23.010\nSo, I see my vCenter Server right\nhere Win-Server01.lab.itpro.tv.\n\n474\n00:22:23.010 --> 00:22:26.080\nAnd there is no button here for\nadding a host or\n\n475\n00:22:26.080 --> 00:22:30.410\nanything, so I need to add a data center.\n\n476\n00:22:30.410 --> 00:22:33.950\nWhen you come in here you can just\nright-click on the server and\n\n477\n00:22:33.950 --> 00:22:35.440\nthis pulls up the action screen.\n\n478\n00:22:35.440 --> 00:22:37.670\nAnd so\nyou will see all these different actions.\n\n479\n00:22:37.670 --> 00:22:41.634\nAnd if you work with VCP, not VCP but\nif you did your VCP 5-5, or\n\n480\n00:22:41.634 --> 00:22:45.119\nyou've been working with Veosphere 5-5 or\nearlier.\n\n481\n00:22:45.119 --> 00:22:48.175\nThere used to be your actions, and\nthen there was an all actions,\n\n482\n00:22:48.175 --> 00:22:51.677\nlike where other stuff was hidden,\nin the vSphere six, they've done a lot\n\n483\n00:22:51.677 --> 00:22:54.678\nbetter of a job of putting all\nthe actions you need right here, so\n\n484\n00:22:54.678 --> 00:22:57.513\nwe don't have that double tier,\nwhich was super annoying,\n\n485\n00:22:57.513 --> 00:23:00.710\nbut I've got a new data center right here,\nand that's what I want.\n\n486\n00:23:00.710 --> 00:23:04.210\nThere's no new host, just new data center.\n\n487\n00:23:04.210 --> 00:23:05.840\nSo, I'm gonna add a data center.\n\n488\n00:23:05.840 --> 00:23:08.020\nAnd I'll leave it at the default\nname of data center.\n\n489\n00:23:08.020 --> 00:23:11.290\nBut you might call this home office,\ndisaster recovery,\n\n490\n00:23:11.290 --> 00:23:15.030\nGainesville, Orlando, whatever it is\nbased on where that data center is.\n\n491\n00:23:15.030 --> 00:23:17.960\nWhatever name it is that you use\nto identify your data center.\n\n492\n00:23:17.960 --> 00:23:19.870\nSo I'm just gonna create\none called data center.\n\n493\n00:23:19.870 --> 00:23:22.090\nAnd now that's gonna update and\nthere it is.\n\n494\n00:23:22.090 --> 00:23:24.930\nAnd under recent tasks I can see\nwhere I've got a create data center.\n\n495\n00:23:24.930 --> 00:23:29.370\nIt actually appeared under my\nwork in progress for a moment.\n\n496\n00:23:29.370 --> 00:23:32.100\nAnd then jump down here when I was done.\n\n497\n00:23:32.100 --> 00:23:33.650\nNow I go to data center.\n\n498\n00:23:33.650 --> 00:23:36.270\nAnd under data center, there's Add a Host.\n\n499\n00:23:36.270 --> 00:23:39.220\nRight and it's telling me I\nneed to come in and add a host.\n\n500\n00:23:39.220 --> 00:23:41.014\nAnd if I scroll down,\nI got Add a Host right there.\n\n501\n00:23:41.014 --> 00:23:43.915\nOr you can just right click and\nyou got Add Host, right?\n\n502\n00:23:43.915 --> 00:23:46.237\nYou can also add clusters,\nwe'll talk about that later but\n\n503\n00:23:46.237 --> 00:23:47.499\nI'm gonna add a host right now.\n\n504\n00:23:47.499 --> 00:23:52.210\nSo when I go to add a host, it's going\nto ask for a host name or IP address.\n\n505\n00:23:52.210 --> 00:23:56.300\nSo I'll punch in the IP address of that\nhost that we brought up in the other show.\n\n506\n00:23:56.300 --> 00:23:59.280\nAll right,\nit's going to ask where to put it.\n\n507\n00:23:59.280 --> 00:24:02.380\nNow I only got one data center, so\nthere's no where else for me to put it.\n\n508\n00:24:02.380 --> 00:24:03.720\nIt's just gonna show up there.\n\n509\n00:24:03.720 --> 00:24:06.560\nBut if I had more than one data center I\ncould pick and say where that one actually\n\n510\n00:24:06.560 --> 00:24:10.260\nresides, and then the type will\nbe automatically detected.\n\n511\n00:24:10.260 --> 00:24:12.808\nESXI is pretty much what we're\ngonna manage these days but\n\n512\n00:24:12.808 --> 00:24:16.240\nif you click on the information bubble\nyou'll see where it'll actually still\n\n513\n00:24:16.240 --> 00:24:20.038\nmanage things like GSX servers even though\nyou really shouldn't have those anymore.\n\n514\n00:24:20.038 --> 00:24:24.076\nAs well as the V center in Gateway you\nmight have to connect to if you have\n\n515\n00:24:24.076 --> 00:24:26.895\nproxied connections to\nyour other data center.\n\n516\n00:24:26.895 --> 00:24:31.385\nAll right, next, it does need a username\nand password to manage that system so\n\n517\n00:24:31.385 --> 00:24:35.140\nI'll punch in the root account\nthat we set up during the install.\n\n518\n00:24:36.310 --> 00:24:37.390\nAnd now it's going to reach out.\n\n519\n00:24:37.390 --> 00:24:38.740\nHere's that certificate again.\n\n520\n00:24:38.740 --> 00:24:40.990\nI need to verify I am\nconnected to the right host.\n\n521\n00:24:41.990 --> 00:24:45.660\nAnd now it's identified it, and\nit's going to be ready to attach it.\n\n522\n00:24:45.660 --> 00:24:47.310\nNow, my system doesn't have a license.\n\n523\n00:24:47.310 --> 00:24:51.900\nAnd so, on the next screen, it's going\nto offer for me to attach a license.\n\n524\n00:24:51.900 --> 00:24:54.390\nSo if I had pre loaded\nlicenses like we saw earlier,\n\n525\n00:24:54.390 --> 00:24:57.850\nI could pick the license to give this host\nand it'll automatically license it for me.\n\n526\n00:24:57.850 --> 00:24:59.230\nAll taken care of.\n\n527\n00:24:59.230 --> 00:25:02.140\nOr I can stick with the eval license,\nwhich is exactly what I'm gonna do.\n\n528\n00:25:02.140 --> 00:25:03.090\nSo I've got 60 days.\n\n529\n00:25:04.340 --> 00:25:06.300\nThen, lock down mode.\n\n530\n00:25:06.300 --> 00:25:07.750\nWhat is lock down mode?\n\n531\n00:25:07.750 --> 00:25:11.760\nWell, when we set up that host,\nwhere is that thing?\n\n532\n00:25:11.760 --> 00:25:13.250\nHere.\nIf somebody goes to the console of\n\n533\n00:25:13.250 --> 00:25:16.930\nthe host and they sit down at the machine,\nthey get this screen.\n\n534\n00:25:16.930 --> 00:25:20.450\nThere's not much they can do,\nbut there are some things.\n\n535\n00:25:20.450 --> 00:25:23.190\nThey can reset the network configurations.\n\n536\n00:25:23.190 --> 00:25:26.780\nSo right down here, they've got press\nF2 to Customize System/View Logs.\n\n537\n00:25:26.780 --> 00:25:31.660\nThey've also got press\nF12 to Shut Down/Restart.\n\n538\n00:25:31.660 --> 00:25:34.950\nYou could actually do stuff to\nthe system right from here.\n\n539\n00:25:34.950 --> 00:25:39.510\nAnd I can't remember, there is\na secret keystroke sequence that you\n\n540\n00:25:39.510 --> 00:25:44.190\ncan punch in to actually get to the shell\nfrom here and it's a weird series of keys.\n\n541\n00:25:44.190 --> 00:25:47.695\nSo, there's stuff that you can\ndo right here from the console.\n\n542\n00:25:47.695 --> 00:25:51.725\nWell, if we're connected to vCenter,\nwe might not want that.\n\n543\n00:25:51.725 --> 00:25:56.615\nAnd so in vCenter we can choose to\nput it into strict lockdown mode.\n\n544\n00:25:56.615 --> 00:25:59.975\nThis host is accessible only\nthrough vCenter server,\n\n545\n00:25:59.975 --> 00:26:04.350\nyou cannot do anything thorough\nthe Direct Console UI.\n\n546\n00:26:04.350 --> 00:26:07.960\nOn the exam sometimes they'll write\nit as DCUI, so be familiar with that.\n\n547\n00:26:07.960 --> 00:26:12.975\nSo, Direct Console UI and it even says,\nthe Direct Console UI service is stopped.\n\n548\n00:26:12.975 --> 00:26:17.850\nIt stops that service and now you\njust get a blank screen on the host.\n\n549\n00:26:17.850 --> 00:26:20.220\nThe only way to manage\nit is through vCenter.\n\n550\n00:26:20.220 --> 00:26:22.579\nNow, what happens if vCenter fails?\n\n551\n00:26:23.650 --> 00:26:24.880\nWell, then you're screwed.\n\n552\n00:26:24.880 --> 00:26:28.010\nYou got to get your vCenter server back\nup otherwise you can no longer administer\n\n553\n00:26:28.010 --> 00:26:29.160\nthat host, right?\n\n554\n00:26:29.160 --> 00:26:31.160\nSo you might not be\nready to go that crazy.\n\n555\n00:26:31.160 --> 00:26:32.430\nYou might want to go Normal.\n\n556\n00:26:32.430 --> 00:26:37.040\nThe host is accessible only through\nthe local console or vCenter server.\n\n557\n00:26:37.040 --> 00:26:38.140\nWhat does that mean?\n\n558\n00:26:38.140 --> 00:26:41.480\nWell, it means the console still works,\nbut SSH doesn't.\n\n559\n00:26:41.480 --> 00:26:43.500\nIt turns off, I turn on SSH earlier.\n\n560\n00:26:43.500 --> 00:26:44.430\nIt'll turn that off.\n\n561\n00:26:44.430 --> 00:26:46.580\nThe only way to get to it\nwould be through that console.\n\n562\n00:26:46.580 --> 00:26:48.510\nSo if I want to go crazy,\nI'm gonna go strict.\n\n563\n00:26:48.510 --> 00:26:49.280\nLet's go all out.\n\n564\n00:26:49.280 --> 00:26:51.470\nIt's warning me, be careful.\n\n565\n00:26:51.470 --> 00:26:55.260\nThe only way to do it is gonna be\nthrough the vCenter server and\n\n566\n00:26:55.260 --> 00:26:56.710\nI'm okay with that, I'll do it.\n\n567\n00:26:56.710 --> 00:27:00.220\nSo we're gonna go crazy, we can always\nturn this off later if I do need to manage\n\n568\n00:27:00.220 --> 00:27:03.120\nit, but that means I need vCenter\nrunning to be able to do it.\n\n569\n00:27:03.120 --> 00:27:05.137\nIf I lose vCenter,\nI can't manage that host anymore.\n\n570\n00:27:05.137 --> 00:27:07.649\nAll right, so\nwe're gonna hit Next on that, and\n\n571\n00:27:07.649 --> 00:27:11.040\nnow it's asking me to double-check\nthat data center location.\n\n572\n00:27:11.040 --> 00:27:14.080\nI have a chance to change my mind if I\nwanna pick a different data center, and\n\n573\n00:27:14.080 --> 00:27:15.310\nthat's all it needs.\n\n574\n00:27:15.310 --> 00:27:17.560\nWe can finish that up, and\nit's gonna import that host.\n\n575\n00:27:17.560 --> 00:27:20.882\nNow, when it imports the host,\nit's gonna add it to my UI, and\n\n576\n00:27:20.882 --> 00:27:23.140\nit's gonna put it in lockdown mode.\n\n577\n00:27:23.140 --> 00:27:25.250\nSo it's doing that right now.\n\n578\n00:27:25.250 --> 00:27:30.132\nAnd I can see down here, add a standalone\nhost is coming into Datacenter.\n\n579\n00:27:30.132 --> 00:27:35.680\nIt's 80% complete and it's churning along,\nso I see that action that's going on and\n\n580\n00:27:35.680 --> 00:27:40.090\nnow it's completed, and once it's\ncompleted, my screen will refresh and now,\n\n581\n00:27:40.090 --> 00:27:43.810\nwhen I expand out Datacenter,\nthere's my host.\n\n582\n00:27:43.810 --> 00:27:45.170\nOkay, now my host has a warning on it.\n\n583\n00:27:45.170 --> 00:27:49.260\nI don't know what that warning is and,\nlicensing,\n\n584\n00:27:49.260 --> 00:27:53.100\ngood old licensing warning has popped\nback up again, so we do have that, and\n\n585\n00:27:53.100 --> 00:27:54.650\nI can look under my alerts here to see it.\n\n586\n00:27:54.650 --> 00:27:58.060\nBut basically, we can pull our\nsummary on it, it's reaching out and\n\n587\n00:27:58.060 --> 00:28:02.230\nconnecting to that machine,\nand here, it's not licensing.\n\n588\n00:28:02.230 --> 00:28:06.830\nThis one, quick stats are not up to date,\nit'll update those for me, and SSH for\n\n589\n00:28:06.830 --> 00:28:09.230\nthe host has been enabled, so\nit's warning me about that.\n\n590\n00:28:09.230 --> 00:28:11.762\nI guess lockdown mode hasn't applied yet,\nso I've got that warning,\n\n591\n00:28:11.762 --> 00:28:12.827\nI'll suppress the warning.\n\n592\n00:28:12.827 --> 00:28:16.130\nIt's gonna fix it for\nme automatically thanks to lockdown mode.\n\n593\n00:28:16.130 --> 00:28:17.290\nSo we just give it time.\n\n594\n00:28:17.290 --> 00:28:22.294\nBut basically I'm now managing it, if I\njump over to that host, here's the host.\n\n595\n00:28:22.294 --> 00:28:26.340\nIt actually hasn't updated yet, has it?\n\n596\n00:28:27.720 --> 00:28:29.910\nBecause it hasn't applied\nthe disabling SSH.\n\n597\n00:28:29.910 --> 00:28:33.370\nSo eventually it will apply, it's pushing\nout what's called a host profile.\n\n598\n00:28:33.370 --> 00:28:36.080\nAnd when that applies it's gonna\nput it in lockdown mode and\n\n599\n00:28:36.080 --> 00:28:37.695\nstop me from being able\nto administer things.\n\n600\n00:28:37.695 --> 00:28:39.620\nI'll still see some information here, but\n\n601\n00:28:39.620 --> 00:28:42.140\nI won't actually be able to\ndo anything from the host.\n\n602\n00:28:42.140 --> 00:28:43.950\nNow I've got it created.\n\n603\n00:28:43.950 --> 00:28:45.810\nNow is when the real fun happens.\n\n604\n00:28:45.810 --> 00:28:48.270\nNow vCenter is actually doing something,\nit's got a host to manage.\n\n605\n00:28:48.270 --> 00:28:50.840\nI can set up profiles and\nsecurity settings and push it.\n\n606\n00:28:50.840 --> 00:28:53.040\nI can create virtual machines and\nstart to deploy them.\n\n607\n00:28:53.040 --> 00:28:57.160\nI can create templates,\nnow vCenter is actually useful.\n\n608\n00:28:57.160 --> 00:29:01.610\nIf I go back to the homepage, I can go to\nHosted Clusters or I can go to VMs and\n\n609\n00:29:01.610 --> 00:29:06.480\ntemplates now and I'll start to see my\nvirtual machines listed by Datacenter.\n\n610\n00:29:06.480 --> 00:29:07.340\nAnd I can come in and\n\n611\n00:29:07.340 --> 00:29:12.590\nI can say here's my Datacenter,\nI want to create a new virtual machine.\n\n612\n00:29:12.590 --> 00:29:14.700\nAnd I can create the virtual\nmachine in that Datacenter and\n\n613\n00:29:14.700 --> 00:29:17.210\npick which host it's gonna reside on and\nso on.\n\n614\n00:29:17.210 --> 00:29:20.980\nSo as you go through you'll see\nwhere you pick who that host is,\n\n615\n00:29:20.980 --> 00:29:22.490\nwhere it's actually gonna reside.\n\n616\n00:29:22.490 --> 00:29:24.190\nI can start to define network settings,\n\n617\n00:29:24.190 --> 00:29:29.015\nI can do all the management stuff we need\nto do, all right here from one place.\n\n618\n00:29:29.015 --> 00:29:33.510\nVCenter becomes the one place you go\nto manage your entire environment.\n\n619\n00:29:33.510 --> 00:29:36.430\n>> And I can tell you, I'm glad I didn't\ncut you off because it's nice when you can\n\n620\n00:29:36.430 --> 00:29:38.110\nactually see what it's doing there.\n\n621\n00:29:38.110 --> 00:29:41.800\nAnd since we're throwing out all the rules\non this one as far as the time clock goes,\n\n622\n00:29:41.800 --> 00:29:45.670\nI wouldn't be doing you or our viewers any\njustice without saying before we sign out,\n\n623\n00:29:45.670 --> 00:29:47.640\ndo you have any additional words?\n\n624\n00:29:47.640 --> 00:29:50.340\n>> That's about it, and only because\nI know we're going to be spending\n\n625\n00:29:50.340 --> 00:29:53.130\na whole heck of a lot of time in vCenter\nthrough the whole rest of this series.\n\n626\n00:29:53.130 --> 00:29:55.404\nSo we are gonna see a lot more of it,\nbelieve you me.\n\n627\n00:29:55.404 --> 00:29:58.850\n>> All right, well we thank you Don, and\nwe thank you the viewer for watching.\n\n628\n00:29:58.850 --> 00:30:01.520\nSigning out for ITPRO.TV,\nI've been your host Wes Bryan.\n\n629\n00:30:01.520 --> 00:30:02.190\n>> And I'm Don Pezet.\n\n630\n00:30:02.190 --> 00:30:03.416\n>> And we'll see you next time.\n\n631\n00:30:03.416 --> 00:30:09.997\n[SOUND]\n\n",
          "vimeoId": "168052674"
        },
        {
          "description": "In this episode, Wes and Don explore automating host configuration deployment through Auto Deploy. They explain the prerequisites  for the host as well as the vCenter prerequisites.",
          "length": "1943",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-4-1-deploying_hosts_with_auto_deploy-060716-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-4-1-deploying_hosts_with_auto_deploy-060716-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-4-1-deploying_hosts_with_auto_deploy-060716-1-sm.jpg",
          "title": "Deploying Hosts with Auto Deploy",
          "transcript": "WEBVTT\n\n1\n00:00:00.099 --> 00:00:10.099\n[MUSIC]\n\n2\n00:00:12.010 --> 00:00:14.670\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.670 --> 00:00:17.108\nI'm your host, Wes Bryan,\nand in today's episode,\n\n4\n00:00:17.108 --> 00:00:19.680\nwe're continuing through\nour series in VMware.\n\n5\n00:00:19.680 --> 00:00:21.190\nThat's right,\nwe're coming back at you with more\n\n6\n00:00:21.190 --> 00:00:24.410\nof the VMware Certified\nProfessional Version 6.\n\n7\n00:00:24.410 --> 00:00:26.890\nAnd we've got a lot of exciting\ntopics to come at you.\n\n8\n00:00:26.890 --> 00:00:28.520\nBut I'm not gonna ruin his stutter.\n\n9\n00:00:28.520 --> 00:00:30.950\nJoining us back in the studios is\nnone other than Mr. Don Pezet.\n\n10\n00:00:30.950 --> 00:00:32.070\nDon, how are you doing, sir?\n\n11\n00:00:32.070 --> 00:00:34.850\n>> I'm doing great, Wes,\nready to dive right back into vSphere 6.\n\n12\n00:00:34.850 --> 00:00:38.780\nAnd in this episode, we're gonna\nbe taking a look at auto deploy,\n\n13\n00:00:38.780 --> 00:00:43.220\nwhich is one of the really just super cool\nfeatures inside of the vSphere suite.\n\n14\n00:00:43.220 --> 00:00:48.290\nAuto deploy allows us to quickly and\neasily deploy ESXi on host.\n\n15\n00:00:48.290 --> 00:00:52.260\nNow if you've been watching our series,\nwe've already covered how to install ESXi,\n\n16\n00:00:52.260 --> 00:00:53.810\nand what did it involve, right?\n\n17\n00:00:53.810 --> 00:00:57.630\nI popped in a disk,\nan ISO or an actual disk.\n\n18\n00:00:57.630 --> 00:00:59.120\nWe boot up the disk image.\n\n19\n00:00:59.120 --> 00:01:01.540\nWe hit Next a handful of times.\n\n20\n00:01:01.540 --> 00:01:02.722\nWe pick a password, right?\n\n21\n00:01:02.722 --> 00:01:04.800\nAnd then it installs.\n\n22\n00:01:04.800 --> 00:01:07.220\nSo how much time can we\nreally save from that?\n\n23\n00:01:07.220 --> 00:01:10.469\nWell, before that ESXi host was\nready to be moved into production,\n\n24\n00:01:10.469 --> 00:01:13.430\nthere were a few other things\nthat had to happen, right?\n\n25\n00:01:13.430 --> 00:01:15.010\nWe did have to assign a username and\npassword.\n\n26\n00:01:15.010 --> 00:01:17.160\nWe had to assign some\nnetwork configurations.\n\n27\n00:01:17.160 --> 00:01:20.270\nWe had to join it to vCenter, right?\n\n28\n00:01:20.270 --> 00:01:24.100\nI had to add that host to vCenter and\ngive it the root password for\n\n29\n00:01:24.100 --> 00:01:27.070\nthat machine to connect and\ngive it part of my vCenter environment.\n\n30\n00:01:27.070 --> 00:01:30.410\nAnd then from there, if we had a host\nprofile, we could save some time and\n\n31\n00:01:30.410 --> 00:01:33.100\napply the host profile and\nget it all configured and ready to go.\n\n32\n00:01:33.100 --> 00:01:35.020\nBut it was a fairly manual process.\n\n33\n00:01:36.180 --> 00:01:40.310\nWhat if I told you that there was\na way that you could take a server,\n\n34\n00:01:40.310 --> 00:01:45.120\nbrand new server out of the box,\nyou just got it from HP, Dell, Lenovo,\n\n35\n00:01:45.120 --> 00:01:46.630\nwhoever it is that you bought it from.\n\n36\n00:01:46.630 --> 00:01:50.490\nYou plug it into your network and you\npush the power button, and you walk away.\n\n37\n00:01:50.490 --> 00:01:54.950\nAnd it boots up, it installs the ESXi,\nit gets connected to vCenter,\n\n38\n00:01:54.950 --> 00:01:58.770\nit joins a cluster and is ready to\nhave virtual machines moved to it.\n\n39\n00:01:58.770 --> 00:02:02.470\nAnd all you had to do was\npush a power button, right.\n\n40\n00:02:02.470 --> 00:02:06.430\nNow for a lot of us,\nif you're just deploying five hosts, or\n\n41\n00:02:06.430 --> 00:02:10.090\neven ten hosts,\nthat kind of functionality is nice, but\n\n42\n00:02:10.090 --> 00:02:12.400\nit's not usually worth\nthe setup time to get it going.\n\n43\n00:02:12.400 --> 00:02:15.160\nIt's usually easier just\nto do a manual install.\n\n44\n00:02:15.160 --> 00:02:19.320\nBut think if you were\nsomebody like Amazon,\n\n45\n00:02:19.320 --> 00:02:24.010\nwith Amazon web services, where you\nmight have thousands of hosts, or\n\n46\n00:02:24.010 --> 00:02:26.920\njust any old enterprise,\nwhere you might have hundreds of hosts.\n\n47\n00:02:26.920 --> 00:02:30.719\nThere might be times when you\nbring in ten new hosts at a time.\n\n48\n00:02:30.719 --> 00:02:33.405\nAnd wouldn't it be nice to just hook\nthose up and push the power button and\n\n49\n00:02:33.405 --> 00:02:35.560\nwalk away and not worry about it, right?\n\n50\n00:02:35.560 --> 00:02:38.535\nAuto deploy lets us do exactly that.\n\n51\n00:02:38.535 --> 00:02:42.650\nYou just turn on the host, and\neverything else gets set up for you.\n\n52\n00:02:42.650 --> 00:02:44.390\nAnd I know I've said\nthis in other episodes,\n\n53\n00:02:44.390 --> 00:02:49.110\nthe big benefit of something like that is\nthat it gives us consistent deployment.\n\n54\n00:02:49.110 --> 00:02:50.470\nIf I have to set up ten machines and\n\n55\n00:02:50.470 --> 00:02:54.232\nI'm doing it by hand, there's a chance\nthat I could miss a step on one of them.\n\n56\n00:02:54.232 --> 00:03:00.050\nOr maybe I signed duplicate IPs to two\nof them or the same host name or maybe,\n\n57\n00:03:00.050 --> 00:03:04.790\nthe one that always gets me is maybe I\ncapitalized the server name on one server,\n\n58\n00:03:04.790 --> 00:03:06.110\nand I do it in lowercase on another.\n\n59\n00:03:06.110 --> 00:03:08.110\nAnd then it comes into vCenter,\nand then it's permanent.\n\n60\n00:03:08.110 --> 00:03:09.240\n[LAUGH] I can't change it.\n\n61\n00:03:09.240 --> 00:03:10.870\nAnd then it just annoys\nthe heck out of me.\n\n62\n00:03:10.870 --> 00:03:14.500\nSo that kind of stuff,\nwe don't have with auto deploy.\n\n63\n00:03:14.500 --> 00:03:18.090\nAuto deploy gives us a consistent\ndeployment, where things are set up\n\n64\n00:03:18.090 --> 00:03:23.420\nthe way that we want, but\neven beyond that, auto deploy, in addition\n\n65\n00:03:23.420 --> 00:03:28.700\nto being hard to say, can also let us\ndo what's called a diskless deployment.\n\n66\n00:03:28.700 --> 00:03:31.640\nImagine, if you will,\nthis is like the Twilight Zone, right,\n\n67\n00:03:31.640 --> 00:03:34.510\nthat you have a server,\nbut no hard drives.\n\n68\n00:03:34.510 --> 00:03:36.040\nNo hard drives whatsoever.\n\n69\n00:03:36.040 --> 00:03:40.220\nThat when you power it on, it boots up,\n\n70\n00:03:40.220 --> 00:03:44.170\nconnects to vSphere or\nvCenter via the network, and\n\n71\n00:03:44.170 --> 00:03:49.620\nloads ESXi directly into RAM,\nloads into RAM and runs from it.\n\n72\n00:03:49.620 --> 00:03:51.500\nAnd then it knows to connect to a SAN or\n\n73\n00:03:51.500 --> 00:03:53.950\nstorage area network to\nget access to all the VMs.\n\n74\n00:03:53.950 --> 00:03:56.380\nAnd off it goes, no hard drives.\n\n75\n00:03:56.380 --> 00:03:58.330\nAnd if you ever shut it down and\npower it back on again,\n\n76\n00:03:58.330 --> 00:04:02.090\nit just reloads the ESXi right from the\nnetwork again, and it's up and running.\n\n77\n00:04:02.090 --> 00:04:04.160\nIt’s a diskless deployment.\n\n78\n00:04:04.160 --> 00:04:07.135\nDiskless deployments are kinda nice\nbecause they save you money, right.\n\n79\n00:04:07.135 --> 00:04:10.305\nYou don't have to buy hard drives in your\nservers, one less component to fail.\n\n80\n00:04:10.305 --> 00:04:13.921\nIn a server, the two common\ncomponents that fail, hard drives,\n\n81\n00:04:13.921 --> 00:04:17.163\npower supplies,\nthose are the two that fail all the time.\n\n82\n00:04:17.163 --> 00:04:19.843\nThat's why every server comes with two\npower supplies these days cuz they know\n\n83\n00:04:19.843 --> 00:04:21.385\nthey're gonna fail.\n\n84\n00:04:21.385 --> 00:04:23.161\nYour server might only come\nwith one hard drive though.\n\n85\n00:04:23.161 --> 00:04:26.800\nYou could do two, you could do three,\nyou could set up an array.\n\n86\n00:04:26.800 --> 00:04:28.220\nOr you just run it all from RAM.\n\n87\n00:04:28.220 --> 00:04:30.670\nEXSi doesn't take a lot of memory in and\nof itself, right.\n\n88\n00:04:30.670 --> 00:04:35.320\nAn EXSi installation is usually\nbetween like 350 and 600 megs.\n\n89\n00:04:35.320 --> 00:04:36.640\nIt's not very big.\n\n90\n00:04:36.640 --> 00:04:40.320\nSo running the whole thing from RAM\nusually takes less than a gig of RAM,\n\n91\n00:04:40.320 --> 00:04:43.660\nand if you've got a server with 32 or\n64 gigs of RAM,\n\n92\n00:04:43.660 --> 00:04:47.170\nthat's just a small portion of it, and you\ncan be up and running very, very quickly.\n\n93\n00:04:47.170 --> 00:04:50.160\nSo diskless deployments are pretty slick.\n\n94\n00:04:50.160 --> 00:04:52.640\nNow you don't have to go diskless.\n\n95\n00:04:52.640 --> 00:04:55.560\nYou can go where you have hard drives\nin the system, and they all install.\n\n96\n00:04:55.560 --> 00:04:58.470\nAnd that's what I'm gonna do here in\nthe show is I'll have hard drives in mine.\n\n97\n00:04:58.470 --> 00:05:01.360\nIf you don't have hard drives,\nthough, every time you boot up,\n\n98\n00:05:01.360 --> 00:05:02.450\nit's reloading that OS.\n\n99\n00:05:02.450 --> 00:05:04.070\nYou're kinda starting from scratch.\n\n100\n00:05:04.070 --> 00:05:06.710\nWell, with auto deploy,\nit's got a preconfigured environment.\n\n101\n00:05:06.710 --> 00:05:09.140\nSo you boot up, and you are ready to go.\n\n102\n00:05:09.140 --> 00:05:12.322\nBut if you want it to basically\nmaintain its changes,\n\n103\n00:05:12.322 --> 00:05:14.900\nright, so you make changes to the system,\nand you don't want it to get erased every\n\n104\n00:05:14.900 --> 00:05:17.590\ntime it reboots,\nyou can track what's called state.\n\n105\n00:05:17.590 --> 00:05:22.480\nState is where any change you make to\nthe server is actually saved in vCenter.\n\n106\n00:05:22.480 --> 00:05:26.400\nAnd that way, the next time this\ndiskless client boots up, it goes and\n\n107\n00:05:26.400 --> 00:05:30.810\nit connects and it downloads ESXi to run\nit from RAM, and it gets its changes too.\n\n108\n00:05:30.810 --> 00:05:32.360\nAnd it brings us, and it maintains us.\n\n109\n00:05:32.360 --> 00:05:35.015\nNow it acts like it has hard drives, but\n\n110\n00:05:35.015 --> 00:05:37.940\nit's actually booting\nentirely off of the network.\n\n111\n00:05:37.940 --> 00:05:40.650\nNow, a neat part about this,\n\n112\n00:05:40.650 --> 00:05:44.360\nis that if I ever have a hard drive\nfailure, a processor, memory, anything.\n\n113\n00:05:44.360 --> 00:05:50.100\nIf I even lightly suspect a hardware\nfailure, I can turn that server off,\n\n114\n00:05:50.100 --> 00:05:53.610\nthrow in a new server, hit the power\nbutton, and I just replaced it.\n\n115\n00:05:53.610 --> 00:05:54.690\nThat easy.\n\n116\n00:05:54.690 --> 00:05:58.580\nWhen you're dealing with thousands\nof hosts, that's essential.\n\n117\n00:05:58.580 --> 00:06:01.120\nI mean, you don't,\nthe time it takes to get in there and\n\n118\n00:06:01.120 --> 00:06:02.710\nfigure out whether\na processor is a problem or\n\n119\n00:06:02.710 --> 00:06:04.840\nwhatever, you can do all that\ndiagnostics on your own time.\n\n120\n00:06:04.840 --> 00:06:08.070\nYou just throw another host in and\nyou power it up, and you're done, right?\n\n121\n00:06:08.070 --> 00:06:10.170\nSo very easy to just swap\nout an entire server.\n\n122\n00:06:10.170 --> 00:06:12.040\nThat's what auto deploy allows us to do.\n\n123\n00:06:13.070 --> 00:06:15.390\nNow if we wanna get auto deploy running,\n\n124\n00:06:15.390 --> 00:06:16.940\nthere are a lot of pieces\nthat have to be done.\n\n125\n00:06:16.940 --> 00:06:18.390\nWe're gonna do it all here\nin this episode though.\n\n126\n00:06:18.390 --> 00:06:21.168\nAnd this is gonna be a 30 minute episode,\nso in your environment,\n\n127\n00:06:21.168 --> 00:06:24.170\nyou should be able to get auto deploy\nup and going in 30 minutes or less.\n\n128\n00:06:24.170 --> 00:06:25.520\nIt's like pizza delivery.\n\n129\n00:06:25.520 --> 00:06:27.065\nI don't think you get your money\nback if you're late though.\n\n130\n00:06:27.065 --> 00:06:28.752\n>> Yeah, well,\nwe might not get any of that tasty food.\n\n131\n00:06:28.752 --> 00:06:32.183\nNow when it comes to the host itself, are\nthere some things that have to be present\n\n132\n00:06:32.183 --> 00:06:34.500\non the host before we can\nstart to use auto deploy?\n\n133\n00:06:34.500 --> 00:06:35.240\n>> Yes, absolutely.\n\n134\n00:06:35.240 --> 00:06:36.960\nSo that there's work that has\nto be done on the host, and\n\n135\n00:06:36.960 --> 00:06:40.350\nthere's work that has to be done\non the vCenter environment, right?\n\n136\n00:06:40.350 --> 00:06:43.320\nOn the host, I know what you're thinking,\nwhat work do I have to do?\n\n137\n00:06:43.320 --> 00:06:45.880\nYou just said I could swap in\nany server in a moment's notice.\n\n138\n00:06:45.880 --> 00:06:48.698\nWell, there's a couple of\nprerequisites on the server, right?\n\n139\n00:06:48.698 --> 00:06:50.901\nFirst off,\n\n140\n00:06:50.901 --> 00:06:55.500\nthe hosts that you're bringing in, they\nhave to be able to boot off the network.\n\n141\n00:06:55.500 --> 00:06:56.900\nNot every host can.\n\n142\n00:06:56.900 --> 00:07:00.787\nAlmost every server can, right, but\nif you're using workstations as servers,\n\n143\n00:07:00.787 --> 00:07:03.619\nwhich I know a lot of people do,\nnot every workstation can.\n\n144\n00:07:03.619 --> 00:07:06.221\nSo you're gonna have to go into your BIOS\nsettings, in your hardware settings and\n\n145\n00:07:06.221 --> 00:07:08.910\nmake sure that your system\nsupports booting from a network.\n\n146\n00:07:08.910 --> 00:07:13.470\nIf your BIOS doesn't support it,\nthen it's not gonna work,\n\n147\n00:07:13.470 --> 00:07:14.730\nthat server is just not gonna work.\n\n148\n00:07:14.730 --> 00:07:16.860\nYou can buy a network adaptor that\ncan boot off the network, but\n\n149\n00:07:16.860 --> 00:07:17.840\nit won't be able to do it.\n\n150\n00:07:17.840 --> 00:07:19.270\nYou can kind of cheat\nthe system a little bit.\n\n151\n00:07:19.270 --> 00:07:22.010\nSometimes you can get bootable ISOs,\nyou put the CD in and\n\n152\n00:07:22.010 --> 00:07:23.620\nthat makes it boot from the network.\n\n153\n00:07:23.620 --> 00:07:26.955\nBut at that point, you might as\nwell stick hard drives in there and\n\n154\n00:07:26.955 --> 00:07:27.830\ninstall it that way, right?\n\n155\n00:07:27.830 --> 00:07:31.000\nSo you need to be able\nto boot off the network.\n\n156\n00:07:31.000 --> 00:07:32.960\nThe other thing is, I said BIOS?\n\n157\n00:07:32.960 --> 00:07:36.340\nAnd some of you were probably thinking,\nwell, Don, BIOS is old,\n\n158\n00:07:36.340 --> 00:07:38.460\neverybody uses UEFI now, right?\n\n159\n00:07:38.460 --> 00:07:40.520\nWell, UEFI is the new thing.\n\n160\n00:07:40.520 --> 00:07:44.080\nWe see EFI BIOS in most laptops and\ndesktops these days.\n\n161\n00:07:44.080 --> 00:07:47.070\nIn the server world,\nwe don't see EFI as much, right?\n\n162\n00:07:47.070 --> 00:07:51.990\nWe mostly still see BIOS, and\nthe reason is there's certain things, like\n\n163\n00:07:51.990 --> 00:07:56.610\nESX's auto deploy that require traditional\nBIOS that don't support EFI, right?\n\n164\n00:07:56.610 --> 00:08:00.150\nEFI requires digitally signed\noperating systems and all of that, and\n\n165\n00:08:00.150 --> 00:08:03.570\nwe just don't have that with ESX,\nand we can't get in to change it,\n\n166\n00:08:03.570 --> 00:08:06.391\nbecause it's all closed source and\nhandled by VMware.\n\n167\n00:08:06.391 --> 00:08:09.982\nSo we got to make sure that\nour server support biased.\n\n168\n00:08:09.982 --> 00:08:13.706\nNow, even if your service supports EFI\nit doesn't mean you're out of luck,\n\n169\n00:08:13.706 --> 00:08:16.530\nusually you can boot in to\nthe EFI configuration utility.\n\n170\n00:08:16.530 --> 00:08:19.640\nThere will be an option there to enable\nlegacy bias and you can flip it back.\n\n171\n00:08:19.640 --> 00:08:23.150\nI have yet to encounter a server where\nI couldn't set it to legacy bias.\n\n172\n00:08:23.150 --> 00:08:26.650\nNow, if you're watching this episode two\nyears from now that might be different but\n\n173\n00:08:26.650 --> 00:08:28.630\nI'm sure VMware have the solution by then.\n\n174\n00:08:28.630 --> 00:08:30.960\nBut in the mean time we do need to\nmake sure we have latency bios.\n\n175\n00:08:32.000 --> 00:08:34.820\nThe last thing is, and\nthis is not so much on the host,\n\n176\n00:08:34.820 --> 00:08:39.090\nbut on our network that auto\ndeploy uses IP version 4.\n\n177\n00:08:39.090 --> 00:08:41.690\nVMware has not updated to\nsupport IP version 6 yet\n\n178\n00:08:41.690 --> 00:08:45.600\nso if we wanna auto deploy we\nhave to have a IPV 4 network.\n\n179\n00:08:45.600 --> 00:08:49.170\nThe IPV 4 network might just be solely be\nfor auto deploy but you've got to have it.\n\n180\n00:08:49.170 --> 00:08:52.140\nNow, for most of us that's not a big deal\nbut it is something we need to have.\n\n181\n00:08:52.140 --> 00:08:53.750\n>> Now, that's got our host prerequisite.\n\n182\n00:08:53.750 --> 00:08:58.230\nYou've also mentioned vCenter, Don,\nwhat do we need in the way of vCenter?\n\n183\n00:08:58.230 --> 00:09:02.640\n>> It's very similar, we need network\nconnectivity that vCenter needs to be\n\n184\n00:09:02.640 --> 00:09:04.490\navailable to the hosts\nthat are booting up.\n\n185\n00:09:04.490 --> 00:09:07.252\nThey've gotta be able to see vCenter cuz\nthat's where they're gonna get their OS.\n\n186\n00:09:07.252 --> 00:09:11.100\nIt needs to be an IPv4 network,\nso that same thing is there.\n\n187\n00:09:11.100 --> 00:09:13.570\nThe only other thing we have\nto worry about, though,\n\n188\n00:09:13.570 --> 00:09:19.690\nis storage that we're gonna\nbuild ESXi install images.\n\n189\n00:09:19.690 --> 00:09:21.350\nAnd those install images,\nat a bare minimum,\n\n190\n00:09:21.350 --> 00:09:25.570\nif you just take the base image,\nit's about 350 megs in size.\n\n191\n00:09:25.570 --> 00:09:28.440\nBut when you start modifying it, putting\nchanges in it and things like that,\n\n192\n00:09:28.440 --> 00:09:29.930\nit starts to grow bigger.\n\n193\n00:09:29.930 --> 00:09:32.810\nAnd so, VMware actually has a minimum\nrequirement of 2 gigs of storage.\n\n194\n00:09:32.810 --> 00:09:36.740\nSo you need at least 2 gigs of storage\navailable on your vCenter server.\n\n195\n00:09:36.740 --> 00:09:39.650\nYour vCenter server, odds are are gonna\nhave that kind of storage hanging around,\n\n196\n00:09:39.650 --> 00:09:40.830\n2 gigs is not a lot.\n\n197\n00:09:40.830 --> 00:09:43.840\nBut the more images you create,\nthe more storage you'll need.\n\n198\n00:09:43.840 --> 00:09:45.510\nSo you may need more than 2 gigs.\n\n199\n00:09:45.510 --> 00:09:49.520\nAnd if you're tracking state,\nif we're tracking the changes of our hosts\n\n200\n00:09:49.520 --> 00:09:52.470\non the vCenter server,\nyou're gonna need a lot more than 2 gigs\n\n201\n00:09:52.470 --> 00:09:55.210\nto be able to store the state for each of\nthe different hosts that are out there.\n\n202\n00:09:55.210 --> 00:09:56.960\nThe more hosts you have,\nthe more storage you'll need.\n\n203\n00:09:56.960 --> 00:10:00.600\nOdds are that you've got hard drives in\nyour servers, you could just use those and\n\n204\n00:10:00.600 --> 00:10:04.364\nthen you don't track state, in which case,\n2 gigs of storage would be all we need.\n\n205\n00:10:04.364 --> 00:10:06.340\n>> Now, you've mentioned the images, Don.\n\n206\n00:10:06.340 --> 00:10:07.770\nWhen it comes to the images themselves,\n\n207\n00:10:07.770 --> 00:10:10.680\nwhat do we use to create\nthe images inside of vCenter?\n\n208\n00:10:10.680 --> 00:10:12.110\n>> All right, so\n\n209\n00:10:12.110 --> 00:10:17.430\nwith the images, VMware actually\nmakes images available for us to use.\n\n210\n00:10:17.430 --> 00:10:21.029\nWhen you go to download ESXi,\nwe normally download the ISO file, right?\n\n211\n00:10:21.029 --> 00:10:23.280\nSo we look for that virtual ISO image.\n\n212\n00:10:23.280 --> 00:10:24.590\nBut when you download it on the website,\n\n213\n00:10:24.590 --> 00:10:27.960\nyou might notice another download link\nwhere it says the offline bundle.\n\n214\n00:10:27.960 --> 00:10:28.910\nAnd if you’ve ever downloaded it,\n\n215\n00:10:28.910 --> 00:10:32.710\nit’s just a zip-file, and\nin the zip-file is EXX.\n\n216\n00:10:32.710 --> 00:10:33.460\nBut it’s in a zip-file,\n\n217\n00:10:33.460 --> 00:10:36.490\nit’s not bootable, well what\nthe heck do you use that thing for?\n\n218\n00:10:36.490 --> 00:10:39.610\nWell, a lot of people never know and they\nnever worry about it, they just download\n\n219\n00:10:39.610 --> 00:10:45.840\nthe ISO and that’s it, but that offline\nbundle, that's designed for auto-deploy.\n\n220\n00:10:45.840 --> 00:10:50.054\nYou can copy that down and it's a copy of\nEXSi that's ready to deploy that doesn't\n\n221\n00:10:50.054 --> 00:10:53.311\nneed to be bootable because\nyou're booting from the network.\n\n222\n00:10:53.311 --> 00:10:55.256\nYou're gonna boot from a different system,\nand\n\n223\n00:10:55.256 --> 00:10:57.920\nthen you get the operating system\nfiles from this offline bundle.\n\n224\n00:10:59.030 --> 00:11:00.630\nNow, that's one way to deploy it.\n\n225\n00:11:00.630 --> 00:11:04.260\nBut I'll tell you in real life land,\nI don't like to use the offline bundles.\n\n226\n00:11:04.260 --> 00:11:09.460\nAnd the reason is the offline\nbundles get out of date really fast.\n\n227\n00:11:09.460 --> 00:11:13.050\nSo if I download an offline bundle today\nand put it in my software repository and\n\n228\n00:11:13.050 --> 00:11:17.478\nI start using that to push out\nto my hosts, it's great today.\n\n229\n00:11:17.478 --> 00:11:20.150\nBut in three months it's\ngonna be out to date, so\n\n230\n00:11:20.150 --> 00:11:21.530\nI've got to constantly go and update it.\n\n231\n00:11:21.530 --> 00:11:26.180\nSo what I'd like to do, is I'd like to\npull the bundles right from VMware.\n\n232\n00:11:26.180 --> 00:11:28.270\nInstead of doing an offline\nI'd like to do it online,\n\n233\n00:11:28.270 --> 00:11:31.000\nwhere we're pulling those down from\nVMware and loading it on my system.\n\n234\n00:11:31.000 --> 00:11:33.210\nSo I'll show you how to\ndo that here in the show.\n\n235\n00:11:33.210 --> 00:11:36.390\nBut you can eliminate some of the steps\nthat I'm gonna go through if you\n\n236\n00:11:36.390 --> 00:11:38.150\njust go and download that offline bundle.\n\n237\n00:11:38.150 --> 00:11:40.880\nAnd you can put that in your repository,\nand you can hand it out like crazy.\n\n238\n00:11:40.880 --> 00:11:43.290\nSo that's where we get that image.\n\n239\n00:11:43.290 --> 00:11:47.135\nAnd then, once we have the image,\nyou can just roll it out at the base.\n\n240\n00:11:47.135 --> 00:11:48.275\nThe base image.\n\n241\n00:11:48.275 --> 00:11:51.015\nBut if you do that,\nit's not really configured is it?\n\n242\n00:11:51.015 --> 00:11:54.325\nIt's not, it's not joined\nto your vCenter deployment.\n\n243\n00:11:54.325 --> 00:11:57.642\nIt doesn't have hardware drivers or\nwhatever you might need to load.\n\n244\n00:11:57.642 --> 00:11:59.222\nIt's just a base image.\n\n245\n00:11:59.222 --> 00:12:01.722\nSo we're probably gonna\nwanna customize that.\n\n246\n00:12:01.722 --> 00:12:04.972\nAnd when it comes to customizing\nthere's two routes we can follow.\n\n247\n00:12:04.972 --> 00:12:09.212\nOne route is we can rely on our vendors,\nso what we're gonna see, the VMware\n\n248\n00:12:09.212 --> 00:12:13.112\nsoftware repositories in the minute or\nthe software depot is what they call it.\n\n249\n00:12:13.112 --> 00:12:16.840\nWhere we can get the ESX\nimages right from VMware.\n\n250\n00:12:16.840 --> 00:12:20.130\nBut most hardware vendors actually\nhave their own depots also.\n\n251\n00:12:20.130 --> 00:12:23.670\nSo like HP, HP has a VMware depot.\n\n252\n00:12:23.670 --> 00:12:26.458\nAnd so,\nI can get the ESXi image right from HP.\n\n253\n00:12:26.458 --> 00:12:28.070\nWhy would I wanna do that?\n\n254\n00:12:28.070 --> 00:12:32.550\nWell, they've baked in all the drivers for\nHewlett Packard servers in there.\n\n255\n00:12:32.550 --> 00:12:36.930\nAnd they've baked in the management\nsoftware for their ILO solutions and\n\n256\n00:12:36.930 --> 00:12:40.420\ntheir remote insight so\nyou get the insight server and\n\n257\n00:12:40.420 --> 00:12:43.010\nthen all the HP management\nis all built right in.\n\n258\n00:12:43.010 --> 00:12:46.712\nDell does the same thing, and I don't\nknow about Lenovo, but I'm sure they do.\n\n259\n00:12:46.712 --> 00:12:50.744\nDell and HP are kind of the two big\nplayers in the server world right now, so\n\n260\n00:12:50.744 --> 00:12:54.470\nthey have their own depots that you\ncan go and get those images from.\n\n261\n00:12:55.500 --> 00:12:57.620\nOr you can build your own.\n\n262\n00:12:57.620 --> 00:13:01.537\nBuilding your own is actually\nnot a difficult thing to do.\n\n263\n00:13:01.537 --> 00:13:05.520\nLet me clarify this,\nyou know, slippery slope.\n\n264\n00:13:05.520 --> 00:13:07.500\nIt's not hard to build your own image,\n\n265\n00:13:07.500 --> 00:13:09.820\nit's just the tools they give\nus are not terribly reliable.\n\n266\n00:13:09.820 --> 00:13:12.150\n[LAUGH] You'll see it hear in the show.\n\n267\n00:13:12.150 --> 00:13:15.155\nWe're gonna use what's\ncalled the PowerCLI.\n\n268\n00:13:15.155 --> 00:13:22.360\nPowerCLI is a command line interface that\nis designer run on Windows PowerShell.\n\n269\n00:13:22.360 --> 00:13:26.180\nSo in Windows we have the PowerShell,\na special command prompt that we can use.\n\n270\n00:13:26.180 --> 00:13:28.890\nAnd VMware has written a whole\nsuite of commandlets that\n\n271\n00:13:28.890 --> 00:13:32.280\nrun inside of it that let us do image\nbuilding, as well as other things.\n\n272\n00:13:32.280 --> 00:13:35.397\nYou can completely manage vCenter and\nstuff from inside of PowerCLI.\n\n273\n00:13:35.397 --> 00:13:36.571\nYou can do a ton of stuff.\n\n274\n00:13:36.571 --> 00:13:38.400\nBut you can also do image building.\n\n275\n00:13:38.400 --> 00:13:42.770\nSo if I wanna take an image, and\nI wanna add my own drivers to it, or\n\n276\n00:13:42.770 --> 00:13:45.609\nadd something proprietary, or\nadd features, I can do it that way.\n\n277\n00:13:46.700 --> 00:13:50.670\nBut normally we don't do too much in\nthe way of craziness to these packages.\n\n278\n00:13:50.670 --> 00:13:52.280\nWe wanted to point them out.\n\n279\n00:13:52.280 --> 00:13:56.855\nAnd any other customizations, I generally\ntry to keep them in a host profile.\n\n280\n00:13:56.855 --> 00:14:00.380\nCuz once the host is up, I can apply\na host profile to it, and all of the other\n\n281\n00:14:00.380 --> 00:14:03.260\nsettings will apply, and now it's\nconfigured the way that I want it.\n\n282\n00:14:03.260 --> 00:14:05.600\nSo we're not normally gonna\nuse auto deploy by itself,\n\n283\n00:14:05.600 --> 00:14:08.620\nit's normally gonna be auto\ndeploy plus host profiles.\n\n284\n00:14:08.620 --> 00:14:11.960\nAnd when you combine the two,\nnow a new host comes up.\n\n285\n00:14:11.960 --> 00:14:16.270\nIt installs ESX, it joins vCenter,\nit gets the host profile,\n\n286\n00:14:16.270 --> 00:14:19.890\nit gets fully configured and\nnow it's ready for use.\n\n287\n00:14:19.890 --> 00:14:22.280\nAnd if you have the distributed\nresource scheduler turned on,\n\n288\n00:14:22.280 --> 00:14:23.680\nwhich we haven't talked about yet, but\n\n289\n00:14:23.680 --> 00:14:27.600\nif you have DRS turned on, it'll start\nmoving VMs over to it immediately.\n\n290\n00:14:27.600 --> 00:14:31.190\nSo you can hit the power button and\nwalk away and\n\n291\n00:14:31.190 --> 00:14:36.430\nwithin ten minutes that system will be up,\nrunning ESXi, and hosting VMs.\n\n292\n00:14:36.430 --> 00:14:39.570\nYou can expand your environment\njust by throwing a server in and\n\n293\n00:14:39.570 --> 00:14:40.440\npushing the power button.\n\n294\n00:14:40.440 --> 00:14:44.455\nThat's the really cool and awesome stuff\nif we go through in and get it working.\n\n295\n00:14:44.455 --> 00:14:46.880\nSo I've talked it up a bit.\n\n296\n00:14:46.880 --> 00:14:50.270\nWe've talked about how it works, we've\ntalked a little bit about the components,\n\n297\n00:14:50.270 --> 00:14:52.980\nbut let's actually see\nthis trick be in action.\n\n298\n00:14:52.980 --> 00:14:57.755\nOn the exam, they actually only expect you\nto know a little bit about auto deploy.\n\n299\n00:14:57.755 --> 00:15:00.965\nReally, some of the requirements\nthat I've already talked about and\n\n300\n00:15:00.965 --> 00:15:03.815\nsome of the basic steps\ngetting set up on the server.\n\n301\n00:15:03.815 --> 00:15:06.535\nOn the exam, they don't actually expect\nyou to know how to deploy with it but\n\n302\n00:15:06.535 --> 00:15:07.505\nI hate that kind of thing.\n\n303\n00:15:07.505 --> 00:15:08.965\nI hate just showing you half the solution.\n\n304\n00:15:08.965 --> 00:15:09.847\nSo we're gonna do the whole thing.\n\n305\n00:15:09.847 --> 00:15:13.402\nI'm gonna show you how to get it set up\nand actually roll this out to a host and\n\n306\n00:15:13.402 --> 00:15:14.992\nget it booted and get it fired up.\n\n307\n00:15:14.992 --> 00:15:18.205\nWe're gonna start right\non my vCenter deployment.\n\n308\n00:15:18.205 --> 00:15:20.390\nSo I got my vCenter\ndeployment pulled up here,\n\n309\n00:15:20.390 --> 00:15:24.620\nand auto deploy's actually installed\nby default, it's just not turned on.\n\n310\n00:15:24.620 --> 00:15:27.120\nYou gotta get it turned on and\nthere's two piece to that.\n\n311\n00:15:27.120 --> 00:15:31.320\nThere's the auto deploy service here\ninside of VMware that I've gotta turn on.\n\n312\n00:15:31.320 --> 00:15:34.780\nAnd then, there's a Windows service on\nthe backend that I've gotta start to.\n\n313\n00:15:34.780 --> 00:15:39.080\nSo if we wanna get this set up we need\nto go to our Home and Administration.\n\n314\n00:15:39.080 --> 00:15:42.000\nAnd under Administration, we need to\ngo into our System Configuration.\n\n315\n00:15:43.290 --> 00:15:47.570\nAnd inside of our System Configuration,\nyou'll see Services.\n\n316\n00:15:47.570 --> 00:15:49.960\nAnd there's 19 services\ninstalled by default,\n\n317\n00:15:49.960 --> 00:15:51.880\nwhich are all sorts of different things.\n\n318\n00:15:51.880 --> 00:15:55.500\nAnd the one that I'm looking for\nis the very first one, Auto Deploy.\n\n319\n00:15:55.500 --> 00:15:58.265\nSo here's the Auto Deploy service, and\n\n320\n00:15:58.265 --> 00:16:02.181\nif you look over here it's\ngonna tell me cachesize 2GB.\n\n321\n00:16:02.181 --> 00:16:02.940\nThere's that minimum.\n\n322\n00:16:02.940 --> 00:16:06.972\nI gotta have 2GB of storage or I won't\nbe able to handle the cache size for For\n\n323\n00:16:06.972 --> 00:16:07.675\nthis thing.\n\n324\n00:16:07.675 --> 00:16:10.644\nAnd so I can see some basic\ninformation on it, well,\n\n325\n00:16:10.644 --> 00:16:13.084\nthat's really about all you can see here.\n\n326\n00:16:13.084 --> 00:16:15.140\nI need to hit that Edit button though,\nthat's where I wanna go.\n\n327\n00:16:15.140 --> 00:16:20.033\nAnd when I go to edit it, now I can\ncome in and I can change that log level,\n\n328\n00:16:20.033 --> 00:16:22.740\nthe cache size, the management port.\n\n329\n00:16:22.740 --> 00:16:24.830\nWe can customize that stuff if we want.\n\n330\n00:16:24.830 --> 00:16:26.440\nI can bump up that cache size.\n\n331\n00:16:26.440 --> 00:16:29.770\nIf I'm gonna be tracking state,\nI'll need larger amounts of storage and\n\n332\n00:16:29.770 --> 00:16:30.540\nget that set up.\n\n333\n00:16:30.540 --> 00:16:33.290\nSo it's all right in there, all right?\n\n334\n00:16:33.290 --> 00:16:35.470\nNow, that's if I wanna customize it.\n\n335\n00:16:35.470 --> 00:16:37.070\nI just need to get the thing started.\n\n336\n00:16:37.070 --> 00:16:43.070\nSo if I right-click on that service,\nit's gonna show Restart, Start, and Stop.\n\n337\n00:16:43.070 --> 00:16:44.660\nAnd see how they're all grayed out.\n\n338\n00:16:44.660 --> 00:16:47.250\nThey're grayed out because the service\nis actually disabled right now.\n\n339\n00:16:47.250 --> 00:16:48.010\nI can't start it.\n\n340\n00:16:48.010 --> 00:16:48.910\nI can't restart it.\n\n341\n00:16:48.910 --> 00:16:51.230\nSo I need to edit the startup type.\n\n342\n00:16:51.230 --> 00:16:55.460\nAnd now I can set it to automatic startup,\nit'll just always run.\n\n343\n00:16:55.460 --> 00:16:57.638\nManual startup,\nit'll run when I want it to.\n\n344\n00:16:57.638 --> 00:16:59.760\nDisabled is the default, right?\n\n345\n00:16:59.760 --> 00:17:02.820\nI'm gonna make it automatic,\nthat way if my vCenter server restarts,\n\n346\n00:17:02.820 --> 00:17:04.630\nI won't have to go and restart this.\n\n347\n00:17:04.630 --> 00:17:08.250\nSo I'm gonna set that to automatic,\nand now it's set to start.\n\n348\n00:17:08.250 --> 00:17:10.870\nBut it didn't actually start.\n\n349\n00:17:10.870 --> 00:17:13.081\nIf I want to start it,\nI can just right click on it,\n\n350\n00:17:13.081 --> 00:17:16.417\nand now I've got that Start button,\nand I can start it up there too, okay?\n\n351\n00:17:16.417 --> 00:17:18.370\nAnd that's the easiest\nway to get it started.\n\n352\n00:17:18.370 --> 00:17:22.490\nNow there is a service on the back\nend which is part of Windows,\n\n353\n00:17:22.490 --> 00:17:25.710\nand we can certainly\nmanage it from there too.\n\n354\n00:17:25.710 --> 00:17:30.450\nSo you don't have to start it from here,\nbut I normally do cuz I'm already here.\n\n355\n00:17:30.450 --> 00:17:33.240\nIf we refresh the screen, sometimes\nyou'll get a warning on that service.\n\n356\n00:17:33.240 --> 00:17:34.090\nLet's see if I do.\n\n357\n00:17:34.090 --> 00:17:35.560\nNo, of course not.\n\n358\n00:17:35.560 --> 00:17:37.921\nIn real life land,\nsometimes when you start Auto Deploy,\n\n359\n00:17:37.921 --> 00:17:41.370\nyou'll get a little warning there because\nit does take it a moment to start.\n\n360\n00:17:41.370 --> 00:17:43.930\nAnd so, while it's doing that,\nyou might get a warning.\n\n361\n00:17:43.930 --> 00:17:46.820\nIf you're ever in doubt,\nthe way I always check it,\n\n362\n00:17:46.820 --> 00:17:49.590\nis if you go into the services\nadministrative tool on your server.\n\n363\n00:17:49.590 --> 00:17:55.170\nSo if I switch over to my actual vCenter\nserver, I can fire up services.msc,\n\n364\n00:17:55.170 --> 00:17:59.780\nand I can go under\nthe Windows service list, and\n\n365\n00:17:59.780 --> 00:18:03.980\nin here we can find the VMware Auto Deploy\nservice which is actually called\n\n366\n00:18:03.980 --> 00:18:06.900\nthe VMware vSphere Auto Deploy Waiter.\n\n367\n00:18:08.380 --> 00:18:09.340\nIt's like at a restaurant.\n\n368\n00:18:09.340 --> 00:18:14.640\nSo I'm gonna find, right here,\nVMware vSphere Auto Deploy Waiter.\n\n369\n00:18:14.640 --> 00:18:16.510\nAnd see how mine shows\nas running over here.\n\n370\n00:18:16.510 --> 00:18:17.750\nThat's what you want to see, okay?\n\n371\n00:18:17.750 --> 00:18:19.030\nIt should be running.\n\n372\n00:18:19.030 --> 00:18:22.270\nIf it starts and stops for some reason,\nyou'll get an error and you can go and\n\n373\n00:18:22.270 --> 00:18:23.730\nfind out why you got that error.\n\n374\n00:18:23.730 --> 00:18:25.340\nBut it usually just starts right up and\nit's running,\n\n375\n00:18:25.340 --> 00:18:27.240\nthat's what I'm seeing with mine,\nmine's up and it's good.\n\n376\n00:18:28.330 --> 00:18:30.900\nYou might find old documentation out there\non the Internet when they tell you to\n\n377\n00:18:30.900 --> 00:18:31.680\nstart at this way.\n\n378\n00:18:31.680 --> 00:18:33.800\nIn earlier versions of vCenter,\n\n379\n00:18:33.800 --> 00:18:35.460\nyou didn't have a way to\nstart the service from there.\n\n380\n00:18:35.460 --> 00:18:38.190\nI don't know why they did that but\nyou don't have to do that now.\n\n381\n00:18:39.290 --> 00:18:45.230\nAll right, so Auto Deploy is now running\non the server, I'm good to go, right?\n\n382\n00:18:45.230 --> 00:18:49.290\nWell, there is little bit more that I need\nto do to actually get this stuff working.\n\n383\n00:18:49.290 --> 00:18:51.340\nTechnically, yes, it is enabled.\n\n384\n00:18:51.340 --> 00:18:54.700\nIn order to get clients to boot up and\n\n385\n00:18:54.700 --> 00:18:59.675\nload ESXI from the network,\nI've gotta use a technology called BOOTP.\n\n386\n00:18:59.675 --> 00:19:01.810\nBOOTP is the boot protocol, and\n\n387\n00:19:01.810 --> 00:19:04.560\nit's what machines use when\nthey boot up off the network.\n\n388\n00:19:04.560 --> 00:19:08.910\nIt's closely related to Pixie, or\nPXE, the Pre-Execution Environment.\n\n389\n00:19:08.910 --> 00:19:12.890\nYou can have network adapters, and\nthey can be any vendor these days, Intel,\n\n390\n00:19:12.890 --> 00:19:14.850\nBroadcom, doesn't matter.\n\n391\n00:19:14.850 --> 00:19:19.220\nWhen they boot up, they have a specific\nprotocol they use on the network\n\n392\n00:19:19.220 --> 00:19:23.600\nto go out and find a server and then ask\nthat server for an operating system.\n\n393\n00:19:23.600 --> 00:19:27.140\nThe server will give them an operating\nsystem to boot off of, all right?\n\n394\n00:19:27.140 --> 00:19:30.088\nWe find the server using DHCP.\n\n395\n00:19:30.088 --> 00:19:33.310\nThe dynamic host configuration protocol\nwill have entries in there that tell us\n\n396\n00:19:33.310 --> 00:19:35.000\nwhere to find the server.\n\n397\n00:19:35.000 --> 00:19:36.270\nAnd once we find the server,\n\n398\n00:19:36.270 --> 00:19:41.550\nwe download the operating system using\nTFTP, the trivial file transfer protocol.\n\n399\n00:19:41.550 --> 00:19:43.960\nIt's called trivial cuz it doesn't\nsupport usernames and passwords.\n\n400\n00:19:43.960 --> 00:19:45.727\nYou just get a file and that's it, right?\n\n401\n00:19:45.727 --> 00:19:47.490\nSo it's trivial functionality.\n\n402\n00:19:47.490 --> 00:19:53.370\nSo I need DHCP and I need TFTP to be\nconfigured and running for me, okay?\n\n403\n00:19:53.370 --> 00:19:56.127\nSo to get that set up,\nfirst I'm gonna need a TFTP sever,\n\n404\n00:19:56.127 --> 00:19:57.511\nwell I've already got one.\n\n405\n00:19:57.511 --> 00:20:02.074\nIf you're running a Linux or\nUnix box anywhere in your environment,\n\n406\n00:20:02.074 --> 00:20:03.970\nthey all have TFTP built in.\n\n407\n00:20:03.970 --> 00:20:09.122\nI have Windows and so I installed a third\nparty TFTP server called Tftpd32.\n\n408\n00:20:09.122 --> 00:20:12.981\nIt's not very feature rich but\nit certainly does the job,\n\n409\n00:20:12.981 --> 00:20:17.612\nthere's plenty of other TFTP\nservers that are out there.\n\n410\n00:20:17.612 --> 00:20:19.730\nThis one's free and\neasy, so simple to get.\n\n411\n00:20:19.730 --> 00:20:21.560\nSo I've got this one installed.\n\n412\n00:20:21.560 --> 00:20:23.770\nI think I've already got it\nrunning somewhere around here.\n\n413\n00:20:25.270 --> 00:20:27.640\nAnd yeah, so I've got this one there.\n\n414\n00:20:27.640 --> 00:20:29.649\nSo I've already got it up and running and\n\n415\n00:20:29.649 --> 00:20:33.611\nall it's doing is taking the files in a\nparticular directory on my hard drive and\n\n416\n00:20:33.611 --> 00:20:36.052\nmaking them available via the network,\nright?\n\n417\n00:20:36.052 --> 00:20:37.542\nSo there's not much to\nconfigure with TFTP.\n\n418\n00:20:37.542 --> 00:20:41.900\nBut you need to get a TFTP server going,\nVMware doesn't provide one, all right?\n\n419\n00:20:41.900 --> 00:20:43.560\nOnce you've got that,\n\n420\n00:20:43.560 --> 00:20:48.340\nnow I need a DHCP server to tell\npeople how to find this, all right?\n\n421\n00:20:48.340 --> 00:20:50.360\nAnd I'm running DHCP here on Windows.\n\n422\n00:20:50.360 --> 00:20:53.210\nBut again, if you're running Linux,\nor you've got a firewall that's\n\n423\n00:20:53.210 --> 00:20:57.510\nproviding DHCP, it can easily go in\nthere and customize the DHCP options.\n\n424\n00:20:57.510 --> 00:21:01.728\nSo I'm going to get into my\nDHCP tool here in Windows.\n\n425\n00:21:01.728 --> 00:21:08.600\nAnd normally with DHCP,\nyour computer boots up.\n\n426\n00:21:08.600 --> 00:21:12.780\nIt sends out a broadcast and\nit says hey, I need an IP address, and\n\n427\n00:21:12.780 --> 00:21:16.340\na DHCP server somewhere hears it and\nresponds back.\n\n428\n00:21:16.340 --> 00:21:18.110\nSo with DHCP, you have a scope.\n\n429\n00:21:18.110 --> 00:21:21.150\nA scope is a collection of\nIP's that you're handing out.\n\n430\n00:21:21.150 --> 00:21:24.650\nBut you can get more than just\nIPs from a DHCP server, right?\n\n431\n00:21:24.650 --> 00:21:28.740\nA lot times we get not just IP address but\nwe get subnet mask.\n\n432\n00:21:28.740 --> 00:21:30.580\nWe get a router to use.\n\n433\n00:21:30.580 --> 00:21:38.910\nWe get DNS servers to use and\nwe get a DNS suffix, a domain name.\n\n434\n00:21:38.910 --> 00:21:43.130\nSo we get all of those things from DHCP,\nand once we have them,\n\n435\n00:21:43.130 --> 00:21:44.260\nnow we can start using them.\n\n436\n00:21:44.260 --> 00:21:47.350\nWell, you can hand out a lot more\nthan just those basic things, so\n\n437\n00:21:47.350 --> 00:21:49.490\nif I go to my Scope Options,\nsee what I'm handing out?\n\n438\n00:21:49.490 --> 00:21:54.110\nRouter, DNS, Domain Name, and\nso I'm giving out those IPs or\n\n439\n00:21:54.110 --> 00:21:55.680\nnames or whatever to my clients.\n\n440\n00:21:55.680 --> 00:21:57.710\nI need to add two more entries.\n\n441\n00:21:57.710 --> 00:22:02.780\nOne entry that tells BOOTP clients\nwhere to find the BOOTP server.\n\n442\n00:22:02.780 --> 00:22:05.730\nAnd then a second entry that says\nwhen you connect to that server,\n\n443\n00:22:05.730 --> 00:22:08.800\nwhat's the name of the file\nthat you're going to download?\n\n444\n00:22:08.800 --> 00:22:10.290\nAll right, so I need that file name,\n\n445\n00:22:10.290 --> 00:22:12.950\nand I'll be honest with you guys, I don't\nactually know what the file name is.\n\n446\n00:22:12.950 --> 00:22:15.910\nAnd the reason is I normally just\ndownload it right out of vCenter and\n\n447\n00:22:15.910 --> 00:22:17.870\nthen copy the file name,\nit saves me a little bit of time.\n\n448\n00:22:17.870 --> 00:22:18.610\nSo let's do that.\n\n449\n00:22:18.610 --> 00:22:22.710\nI'm gonna Jump back over to vCenter and\non this screen,\n\n450\n00:22:22.710 --> 00:22:24.530\nthis is where I was looking at\nthe Auto Deploy service and\n\n451\n00:22:24.530 --> 00:22:26.590\nyou don't have a whole heck of\na lot of stuff you can configure.\n\n452\n00:22:26.590 --> 00:22:28.380\nThis is actually not where I need to be.\n\n453\n00:22:28.380 --> 00:22:33.700\nLet me go back to my Administration screen\nand I need to get to my vCenter server.\n\n454\n00:22:33.700 --> 00:22:36.470\nSo I'm gonna browse in and\nfind my vCenter server.\n\n455\n00:22:36.470 --> 00:22:39.783\nSo here I've got my WIN-SERVER01 that\nI've been working with all show,\n\n456\n00:22:39.783 --> 00:22:41.410\nthat's my vCenter server.\n\n457\n00:22:41.410 --> 00:22:45.920\nNot a host, I'm picking vCenter and\nthen I'm going up here to Manage.\n\n458\n00:22:45.920 --> 00:22:47.820\nAnd then under Manage,\nI'm going to Settings and\n\n459\n00:22:47.820 --> 00:22:50.380\nunder Settings, you've got Auto Deploy.\n\n460\n00:22:50.380 --> 00:22:52.260\nAnd in the Auto Deploy settings,\n\n461\n00:22:52.260 --> 00:22:55.890\nit tells us right here what\nthat file name needs to be.\n\n462\n00:22:55.890 --> 00:22:58.978\nThis is why I can never remember it\ncuz I just copy it right from here.\n\n463\n00:22:58.978 --> 00:23:04.850\nSo it's undionly.kpxe.vmw-hardwired.\n\n464\n00:23:04.850 --> 00:23:06.410\nThat's the file that I want, and\n\n465\n00:23:06.410 --> 00:23:11.590\nI'm just gonna copy that file name so\nthat I can paste it on the other side.\n\n466\n00:23:11.590 --> 00:23:14.450\nAll right, so\nnow when I jump back over to DHCP,\n\n467\n00:23:14.450 --> 00:23:17.180\nI need to create two scope options here.\n\n468\n00:23:17.180 --> 00:23:20.400\nSo I'm gonna just right-click it,\nand then choose Configure Options.\n\n469\n00:23:20.400 --> 00:23:24.600\nAnd the options I want are numbers 66 and\n67.\n\n470\n00:23:24.600 --> 00:23:27.445\nSo if I scroll down and find those, 66 and\n\n471\n00:23:27.445 --> 00:23:31.250\n67 are the Boot Server Host Name and\nthe Bootfile Name.\n\n472\n00:23:31.250 --> 00:23:33.610\nNow, I'm using Windows DHCP Server.\n\n473\n00:23:33.610 --> 00:23:36.530\nYou might be using Linux or\nMac OS or whatever.\n\n474\n00:23:36.530 --> 00:23:38.240\nThey all support options like this.\n\n475\n00:23:38.240 --> 00:23:41.410\nIt's just you might have to configure\nfrom a text file or some different UI.\n\n476\n00:23:41.410 --> 00:23:43.140\nBut the options are the same.\n\n477\n00:23:43.140 --> 00:23:46.180\nSo I'm gonna check these two off cuz\nthose are what I wanna configure.\n\n478\n00:23:46.180 --> 00:23:52.240\nFor the boot server, I'm gonna put\nthe IP address of the TFTP server.\n\n479\n00:23:52.240 --> 00:23:56.107\nSo wherever I put those files, I put mine\nright here on my vCenter server, but\n\n480\n00:23:56.107 --> 00:23:58.010\nif you put them on a different server,\n\n481\n00:23:58.010 --> 00:24:00.705\nyou're gonna put the IP\naddress of your TFTP server.\n\n482\n00:24:00.705 --> 00:24:03.899\nThen We've got the boot file name.\n\n483\n00:24:03.899 --> 00:24:07.088\nAnd the boot file name is the file\nthat people are gonna download.\n\n484\n00:24:07.088 --> 00:24:08.930\nThis is the operating system.\n\n485\n00:24:08.930 --> 00:24:10.320\nWell, it's not the full OS.\n\n486\n00:24:10.320 --> 00:24:12.680\nIt's the network boot\nloader is what it is.\n\n487\n00:24:12.680 --> 00:24:15.610\nAnd so\nI'm gonna paste that value right in there.\n\n488\n00:24:15.610 --> 00:24:16.210\nOkay.\n\n489\n00:24:16.210 --> 00:24:17.360\nAnd that's what I do in real life.\n\n490\n00:24:17.360 --> 00:24:18.460\nAnd then I never mess with it again,\n\n491\n00:24:18.460 --> 00:24:21.120\nwhich is why I can never\nremember that stinking file name.\n\n492\n00:24:21.120 --> 00:24:22.090\nSo I'll say OK to it now.\n\n493\n00:24:22.090 --> 00:24:23.730\nI've got those two extra entries.\n\n494\n00:24:23.730 --> 00:24:25.800\nSo now, when a client boots up and says.\n\n495\n00:24:25.800 --> 00:24:27.390\nHey, I need an IP address.\n\n496\n00:24:27.390 --> 00:24:29.080\nThe DACP server's gonna\ngive them an IP address.\n\n497\n00:24:29.080 --> 00:24:32.910\nAnd it's gonna give them a router,\nDNS, and domain name.\n\n498\n00:24:32.910 --> 00:24:35.130\nAnd for a workstation,\nthey're gonna love it.\n\n499\n00:24:35.130 --> 00:24:39.060\nBut for an ESXI box, they'll also get\na boot server name and a boot file name.\n\n500\n00:24:39.060 --> 00:24:41.880\nAnd they'll know to reach out and\nget that data.\n\n501\n00:24:41.880 --> 00:24:42.860\nAll right.\n\n502\n00:24:42.860 --> 00:24:44.560\nA workstation will ignore those.\n\n503\n00:24:44.560 --> 00:24:48.700\nWell, I mean you could install EXSI\non your workstation if you wanted.\n\n504\n00:24:48.700 --> 00:24:51.480\nBut those won't mean anything to\na system that's just booting into\n\n505\n00:24:51.480 --> 00:24:53.030\nWindows or whatever.\n\n506\n00:24:53.030 --> 00:24:54.330\nAll right.\nSo now that's set up.\n\n507\n00:24:55.510 --> 00:24:58.360\nSo DHCP is taken care of, but\nI do have a slight problem.\n\n508\n00:24:58.360 --> 00:25:01.180\nI told it that I have a blue file\nthat's a got particular name.\n\n509\n00:25:01.180 --> 00:25:07.120\nAnd my TFTP server,\nif I browse into its folder is empty.\n\n510\n00:25:07.120 --> 00:25:11.090\nSo I told it that this file's gonna\nexist but it doesn't exist, right?\n\n511\n00:25:11.090 --> 00:25:12.075\nSo I need to get a file in there.\n\n512\n00:25:12.075 --> 00:25:14.100\nAnd you might have noticed\nback here in vCenter.\n\n513\n00:25:14.100 --> 00:25:17.030\nWhen I went to copy that name right there.\n\n514\n00:25:17.030 --> 00:25:20.750\nRight beneath it Download TFTP Boot.Zip.\n\n515\n00:25:20.750 --> 00:25:23.200\nThese are all the files that\nI need to put to TFTP server.\n\n516\n00:25:23.200 --> 00:25:25.580\nAnd it's more than just this one.\n\n517\n00:25:25.580 --> 00:25:27.523\nThat one file is what\nstarts the connection.\n\n518\n00:25:27.523 --> 00:25:30.444\nAnd then after that, there's other\nfiles that get kind of tied into it.\n\n519\n00:25:30.444 --> 00:25:33.580\nSo I'm gonna download that and\nI'll just save it.\n\n520\n00:25:34.810 --> 00:25:36.260\nSave that on my desktop here.\n\n521\n00:25:38.690 --> 00:25:39.544\nAll right.\n\n522\n00:25:39.544 --> 00:25:42.006\nAnd like a good person.\n\n523\n00:25:42.006 --> 00:25:46.174\nI'm actually browsing using\na workstation instead of my server.\n\n524\n00:25:46.174 --> 00:25:49.559\nAnd so\nI need to copy that over to my server.\n\n525\n00:25:49.559 --> 00:25:51.790\nAnd so on my server,\nI'll do that real quick.\n\n526\n00:25:53.370 --> 00:25:57.630\nAnd let me get into my desktop.\n\n527\n00:25:57.630 --> 00:26:01.040\nAnd I'm gonna take that deploy FTP and\ncopy that right over onto my server.\n\n528\n00:26:01.040 --> 00:26:03.130\nAnd then I just need to extract it.\n\n529\n00:26:03.130 --> 00:26:06.210\nIt's deployed dash TFTP.zip.\n\n530\n00:26:06.210 --> 00:26:09.390\nAnd I'm gonna extract that and\nget all the files out of it.\n\n531\n00:26:09.390 --> 00:26:13.830\nI'm just gonna extract it\nright into my TFTP folder.\n\n532\n00:26:15.230 --> 00:26:16.580\nShoot I picked the wrong folder.\n\n533\n00:26:16.580 --> 00:26:20.090\nI'm getting my folders all mixed up.\n\n534\n00:26:20.090 --> 00:26:23.110\nSo I'm gonna extract that right\nhere into my TFTP folder.\n\n535\n00:26:23.110 --> 00:26:25.120\nSo I'm just gonna put\nthat right in the root.\n\n536\n00:26:25.120 --> 00:26:27.510\nAnd again, Linux, Mac OS, doesn't matter.\n\n537\n00:26:27.510 --> 00:26:30.750\nJust extract all these files\nright into your TFTP server.\n\n538\n00:26:30.750 --> 00:26:33.730\nAnd what you'll end up with are all these.\n\n539\n00:26:33.730 --> 00:26:35.670\nOkay.\nAnd kinda looking down the line.\n\n540\n00:26:35.670 --> 00:26:38.930\nWe'll find the one that I set for\nthe boot file right there.\n\n541\n00:26:38.930 --> 00:26:39.810\nBut there's other ones.\n\n542\n00:26:39.810 --> 00:26:42.977\nLike this other version\nof hardwired-nomcast.\n\n543\n00:26:42.977 --> 00:26:44.910\nSo if your network doesn't\nsupport multicast.\n\n544\n00:26:44.910 --> 00:26:46.337\nYou can use that one instead.\n\n545\n00:26:46.337 --> 00:26:48.530\nAnd then it'll function using unicast for\nthe server.\n\n546\n00:26:48.530 --> 00:26:50.839\nYou've got debug ones.\n\n547\n00:26:50.839 --> 00:26:52.260\nYou've got the base ones.\n\n548\n00:26:52.260 --> 00:26:54.038\nSo you've got several\ndifferent variations.\n\n549\n00:26:54.038 --> 00:26:59.380\nEven an .efi one, which is what we're\nsupposed to use when we have .efi systems.\n\n550\n00:26:59.380 --> 00:27:02.860\nThat would still kind of be worked out.\n\n551\n00:27:02.860 --> 00:27:04.268\nSo these are all the files I need.\n\n552\n00:27:04.268 --> 00:27:06.328\nI can delete deploy-tftp now.\n\n553\n00:27:06.328 --> 00:27:07.190\nI don't need it anymore.\n\n554\n00:27:07.190 --> 00:27:09.490\nBut I'll leave it cuz it's\nactually very small, 750K.\n\n555\n00:27:11.070 --> 00:27:14.290\nAll right so now, a client boots up.\n\n556\n00:27:14.290 --> 00:27:16.754\nIt sends out a broadcast that says,\nI need an IP address.\n\n557\n00:27:16.754 --> 00:27:18.783\nThe DHCP server responds.\n\n558\n00:27:18.783 --> 00:27:19.983\nIt says here's your IP address.\n\n559\n00:27:19.983 --> 00:27:23.140\nAnd by the way, there's a boot server\nover here, if you care about that.\n\n560\n00:27:23.140 --> 00:27:26.070\nAnd if you do care about that,\nhere's the file you can boot on.\n\n561\n00:27:26.070 --> 00:27:30.570\nSo now our host can reach\nout to the TFPTV server.\n\n562\n00:27:30.570 --> 00:27:34.110\nAnd it can request this\nfile to boot off of.\n\n563\n00:27:34.110 --> 00:27:36.090\nAnd once that's done,\nit starts to boot off of it.\n\n564\n00:27:36.090 --> 00:27:37.080\nAnd what does it do?\n\n565\n00:27:37.080 --> 00:27:39.560\nNow it knows where to find vCenter.\n\n566\n00:27:39.560 --> 00:27:40.528\nAnd so it talks to vCenter.\n\n567\n00:27:40.528 --> 00:27:43.190\nIt says hey do you have any\nESXi image I can boot off of?\n\n568\n00:27:43.190 --> 00:27:45.860\nAnd the server is going\nto give it that image.\n\n569\n00:27:45.860 --> 00:27:48.230\nWell, it'll give it that\nimage if we have one.\n\n570\n00:27:48.230 --> 00:27:50.010\nRight now, we don't have that image.\n\n571\n00:27:50.010 --> 00:27:51.272\nThis is the boot loader, right.\n\n572\n00:27:51.272 --> 00:27:53.628\nSo what we just set up is the boot loader.\n\n573\n00:27:53.628 --> 00:28:00.410\nAnd now we need an actual\nESXi image to go beyond that.\n\n574\n00:28:00.410 --> 00:28:01.820\nSo this will get us booted up.\n\n575\n00:28:01.820 --> 00:28:04.830\nThis will get us talking\nto the vCenter server, and\n\n576\n00:28:04.830 --> 00:28:06.220\nnow we're ready to download that image.\n\n577\n00:28:06.220 --> 00:28:09.090\nOkay.\nSo that's gonna be our next step.\n\n578\n00:28:09.090 --> 00:28:13.210\nAnd before we can get that next step\ndone is where we need the power CLI.\n\n579\n00:28:13.210 --> 00:28:14.400\nAll right.\n\n580\n00:28:14.400 --> 00:28:18.090\nNow the power CLI is not included\nwith V sphere by default.\n\n581\n00:28:18.090 --> 00:28:18.590\nSo.\n\n582\n00:28:18.590 --> 00:28:23.370\nIf you buy these here, even the enterprise\nplus with operations management, the full.\n\n583\n00:28:23.370 --> 00:28:26.170\nYou spend as much money as you can.\n\n584\n00:28:26.170 --> 00:28:27.670\nIt's not included by default.\n\n585\n00:28:27.670 --> 00:28:28.530\nAll right?\n\n586\n00:28:28.530 --> 00:28:29.890\nBut it's free,\nyou don't have to pay for it.\n\n587\n00:28:29.890 --> 00:28:32.540\nBut you do have to go to\nVMware's website and download it.\n\n588\n00:28:32.540 --> 00:28:35.250\nIf you just do a Google search for\nPowerCLI download.\n\n589\n00:28:35.250 --> 00:28:36.490\nIt'll be the first link.\n\n590\n00:28:36.490 --> 00:28:38.680\nBut you go to VMware and you download it.\n\n591\n00:28:38.680 --> 00:28:41.670\nAnd the file itself is not gigantic.\n\n592\n00:28:41.670 --> 00:28:46.123\nBecause all it is is a bunch of\nextensions to the PowerShell.\n\n593\n00:28:46.123 --> 00:28:49.320\nSo here's where I've downloaded that file,\nVMware-PowerCLI.\n\n594\n00:28:49.320 --> 00:28:50.770\nI've got version 6.3.\n\n595\n00:28:50.770 --> 00:28:56.340\nYou know they update it a lot of times\nmore frequently than they do ESX.\n\n596\n00:28:56.340 --> 00:28:58.010\nAnd you'll see it's 81 megs.\n\n597\n00:28:58.010 --> 00:28:59.090\nSo it's not big.\n\n598\n00:28:59.090 --> 00:29:00.160\nAnd when you install it.\n\n599\n00:29:00.160 --> 00:29:01.940\nYou just run it and\nyou click next three times.\n\n600\n00:29:01.940 --> 00:29:03.750\nIt's not anything spectacular there.\n\n601\n00:29:03.750 --> 00:29:07.840\nAnd it's adding a bunch of extra\nPowerShell commands for us.\n\n602\n00:29:07.840 --> 00:29:11.550\nSo normally when you go in PowerShell\nit's got a bunch of stuff in there\n\n603\n00:29:11.550 --> 00:29:13.900\nthat's designed to support Windows.\n\n604\n00:29:13.900 --> 00:29:17.450\nBut the power CLI adds a bunch of\nextensions that are designed to support\n\n605\n00:29:17.450 --> 00:29:20.030\nESX and VMWare as a whole.\n\n606\n00:29:20.030 --> 00:29:24.320\nSo for example if I If I fire that up.\n\n607\n00:29:24.320 --> 00:29:28.210\nIt creates an icon right on your desktop\ncalled VMWare VSphere Power CLI.\n\n608\n00:29:28.210 --> 00:29:29.710\nAnd when you launch it.\n\n609\n00:29:29.710 --> 00:29:31.270\nIt's gonna launch the Windows PowerShell.\n\n610\n00:29:31.270 --> 00:29:33.950\nBut you'll notice, Power CLI, right?\n\n611\n00:29:33.950 --> 00:29:38.520\nIt's letting me know that we are in\nthe VMWare version of PowerShell.\n\n612\n00:29:38.520 --> 00:29:40.574\nPowerShell extended\nwith VMWare's commands.\n\n613\n00:29:40.574 --> 00:29:43.516\nAnd if you run get/vi command.\n\n614\n00:29:43.516 --> 00:29:46.580\nYou'll get a list of all\nof the stuff that it added.\n\n615\n00:29:46.580 --> 00:29:50.572\nSo I am gonna go and Get-VICommand.\n\n616\n00:29:50.572 --> 00:29:52.325\nAnd there's a few commands there right?\n\n617\n00:29:52.325 --> 00:29:53.637\nI know it's hard to see on camera.\n\n618\n00:29:53.637 --> 00:29:57.360\nBut that scrolled by,\nthere's a lot of commands here.\n\n619\n00:29:57.360 --> 00:30:01.950\nYou can completely work with your VSphere\nenvironment not just Auto Deploy.\n\n620\n00:30:01.950 --> 00:30:03.740\nBut the VSphere environment as a whole,\n\n621\n00:30:03.740 --> 00:30:07.790\nyou can completely work with it\nright from here in the power CLI.\n\n622\n00:30:07.790 --> 00:30:08.845\nSo it's extremely powerful.\n\n623\n00:30:08.845 --> 00:30:12.360\nIt can do a lot of things, and\nit's great for automating and scripting.\n\n624\n00:30:12.360 --> 00:30:14.780\nIf you're trying to automate something for\nhappening.\n\n625\n00:30:14.780 --> 00:30:17.540\nYou can do it right from here,\nand it works really well.\n\n626\n00:30:17.540 --> 00:30:20.700\nWhen it comes to building images for\nauto-deploy.\n\n627\n00:30:20.700 --> 00:30:23.330\nWe've got to use these\ncommand modes to do that.\n\n628\n00:30:23.330 --> 00:30:26.050\nWe have to use it to build\nup our software depot.\n\n629\n00:30:26.050 --> 00:30:27.880\nTo put our base images in there.\n\n630\n00:30:27.880 --> 00:30:28.560\nOur VIBs.\n\n631\n00:30:28.560 --> 00:30:31.880\nWe got all sorts of different\nthings that have to go in there\n\n632\n00:30:31.880 --> 00:30:34.190\nto create the deployment.\n\n633\n00:30:34.190 --> 00:30:37.280\nSo that's what we're gonna\nbe working with next.\n\n634\n00:30:37.280 --> 00:30:37.998\nAs we see a lot of that.\n\n635\n00:30:37.998 --> 00:30:39.290\nBut I know we're kinda short on time.\n\n636\n00:30:39.290 --> 00:30:41.157\nSo Wes I think we're gonna\nbreak this one into a part two.\n\n637\n00:30:41.157 --> 00:30:46.062\nBecause our next steps,\nthey're gonna be creating a base image.\n\n638\n00:30:46.062 --> 00:30:47.628\nModifying that image as needed.\n\n639\n00:30:47.628 --> 00:30:51.826\nAnd then creating rules to say\nwho that image gets deployed to.\n\n640\n00:30:51.826 --> 00:30:53.600\nBecause we don't want it just\ndeploying to everybody in our network.\n\n641\n00:30:53.600 --> 00:30:54.550\nWe've got to filter that somehow.\n\n642\n00:30:54.550 --> 00:30:57.180\nSo those are all different\nthings that we still need to\n\n643\n00:30:57.180 --> 00:30:59.234\ndo before this is actually up and active.\n\n644\n00:30:59.234 --> 00:31:01.177\nIf I were to boot a host right now.\n\n645\n00:31:01.177 --> 00:31:04.068\nIt would see the boot loader and\nit wouldn't find an image.\n\n646\n00:31:04.068 --> 00:31:06.383\nAnd it would just sit there on a black\nscreen with a little flashing cursor.\n\n647\n00:31:06.383 --> 00:31:09.199\nAnd we wouldn't really get anywhere.\n\n648\n00:31:09.199 --> 00:31:11.688\nSo we definitely have more to do,\nwhich we'll pick up in part two.\n\n649\n00:31:11.688 --> 00:31:12.750\n>> All right Don.\n\n650\n00:31:12.750 --> 00:31:14.014\nWell you've stated the obvious.\n\n651\n00:31:14.014 --> 00:31:16.590\nI should say that we have come\nto the end of another episode.\n\n652\n00:31:16.590 --> 00:31:17.510\nDid you have anything else?\n\n653\n00:31:17.510 --> 00:31:19.380\nOr do you wanna just wait for part two?\n\n654\n00:31:19.380 --> 00:31:22.048\n>> Let's just wait for part two.\nI mean, just to highlight a few things.\n\n655\n00:31:22.048 --> 00:31:23.365\nRemember the TFTP server I used?\n\n656\n00:31:23.365 --> 00:31:24.769\nVMware doesn't provide one.\n\n657\n00:31:24.769 --> 00:31:26.252\nYou can use whatever TFTP server you want.\n\n658\n00:31:26.252 --> 00:31:28.280\nIt doesn't matter.\n\n659\n00:31:28.280 --> 00:31:29.880\nDHCP, same thing, I used Windows.\n\n660\n00:31:29.880 --> 00:31:31.450\nBut you can use Linux, Mac OS.\n\n661\n00:31:31.450 --> 00:31:32.960\nI've used them all, they all work.\n\n662\n00:31:32.960 --> 00:31:34.560\nYou just need those options put in.\n\n663\n00:31:34.560 --> 00:31:36.150\nSo those two components.\n\n664\n00:31:36.150 --> 00:31:38.880\nThe exam isn't gonna hit you\non how to configure those.\n\n665\n00:31:38.880 --> 00:31:41.700\nBut they are gonna ask you to\nremember option 66, option 67,\n\n666\n00:31:41.700 --> 00:31:44.310\nand what those should be set at.\n\n667\n00:31:44.310 --> 00:31:47.110\nThey're gonna ask you to\nremember to have a TFTP server,\n\n668\n00:31:47.110 --> 00:31:50.230\nto have those files put\nin the TFTP server.\n\n669\n00:31:50.230 --> 00:31:52.450\nThose are the things we need\nto remember for the exam.\n\n670\n00:31:52.450 --> 00:31:54.384\nEverything I show you in PowerCLI?\n\n671\n00:31:54.384 --> 00:31:55.456\nThey'll expect you to remember those.\n\n672\n00:31:55.456 --> 00:31:57.196\nBut as far as TFTP and DACP,\n\n673\n00:31:57.196 --> 00:32:00.693\nthey just want you to remember\nthe options that we set.\n\n674\n00:32:00.693 --> 00:32:02.410\nAnd not necessarily how to configure them.\n\n675\n00:32:02.410 --> 00:32:03.370\nCuz it is difficult.\n\n676\n00:32:03.370 --> 00:32:05.620\n>> Well,\nwe appreciate having you in the studio and\n\n677\n00:32:05.620 --> 00:32:06.840\nlook forward to seeing part two.\n\n678\n00:32:06.840 --> 00:32:08.340\nAnd we appreciate you the viewers.\n\n679\n00:32:08.340 --> 00:32:09.820\nAnd hopefully see you in part two as well.\n\n680\n00:32:09.820 --> 00:32:10.970\nSigning out for IT Pro TV.\n\n681\n00:32:10.970 --> 00:32:12.192\nI've been your host, Wes Brian.\n\n682\n00:32:12.192 --> 00:32:13.183\n>> And I'm Don Pezet.\n\n683\n00:32:13.183 --> 00:32:15.693\n>> And we'll see you next time.\n\n684\n00:32:15.693 --> 00:32:23.370\n[MUSIC]\n\n",
          "vimeoId": "169849848"
        },
        {
          "description": "In this episode, Wes and Don continue their exploration on automating host configuration deployment through Auto Deploy. They look at setting up the vSphere Installation Bundle (VIB) Depot. They will demonstrate how to deploy, configure and export the image.",
          "length": "1893",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-4-2-deploying_hosts_with_auto_deploy_pt2-060716-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-4-2-deploying_hosts_with_auto_deploy_pt2-060716-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-4-2-deploying_hosts_with_auto_deploy_pt2-060716-1-sm.jpg",
          "title": "Deploying Hosts with Auto Deploy Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.031 --> 00:00:14.610\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.610 --> 00:00:15.864\nI'm your host Wes Bryan.\n\n4\n00:00:15.864 --> 00:00:19.351\nAnd in today's episode we're continuing\nthrough our series within VMware.\n\n5\n00:00:19.351 --> 00:00:22.460\nThat's right, we're coming back at\nyou with more of the VMware certified\n\n6\n00:00:22.460 --> 00:00:23.940\nprofessional version six.\n\n7\n00:00:23.940 --> 00:00:26.570\nActually coming at you with\nPart Two in auto deploy.\n\n8\n00:00:26.570 --> 00:00:29.150\nJoining me in the studios again,\nis none other than Mr. Don Pezet.\n\n9\n00:00:29.150 --> 00:00:30.230\nDon, how are you doing, sir?\n\n10\n00:00:30.230 --> 00:00:32.950\n>> I'm doing great, Wes, and\nyeah, in typical fashion,\n\n11\n00:00:32.950 --> 00:00:34.940\nI thought I could get through\nauto deploy in one episode.\n\n12\n00:00:34.940 --> 00:00:37.010\nI even said, hey,\nwe're gonna configure it in 30 minutes.\n\n13\n00:00:37.010 --> 00:00:39.250\nAnd then I rambled on a little too much so\nit didn't happen.\n\n14\n00:00:39.250 --> 00:00:42.910\nBut, in the last episode\nif you didn't watch it,\n\n15\n00:00:42.910 --> 00:00:46.410\nwe set up the basic infrastructure\nto support auto deploy.\n\n16\n00:00:46.410 --> 00:00:50.510\nWe set up a TFTP server,\nwe set up a DACP server, so\n\n17\n00:00:50.510 --> 00:00:54.340\nwe got those things kind of configured and\nready to support auto deploy.\n\n18\n00:00:54.340 --> 00:00:58.880\nOur next step is to actually create\nthe ESXi image to get installed.\n\n19\n00:00:58.880 --> 00:01:02.670\nAnd so without further ado we're\ngonna just dive right in and\n\n20\n00:01:02.670 --> 00:01:03.950\nstart to get that set up.\n\n21\n00:01:03.950 --> 00:01:07.970\nSo the last thing we talked about in\nPart One was getting PowerCLI set up,\n\n22\n00:01:07.970 --> 00:01:10.085\ngetting that command\nline interface in place.\n\n23\n00:01:10.085 --> 00:01:14.100\nAnd I've got my PowerCLI launch,\nI'm on my vCenter server.\n\n24\n00:01:14.100 --> 00:01:18.780\nBut with PowerCLI you could actually\nbe on your own workstation and connect.\n\n25\n00:01:18.780 --> 00:01:24.630\nSo, the thing with this is you actually\nbuild connections to various places.\n\n26\n00:01:24.630 --> 00:01:27.400\nYou can connect to your VI servers or\nwherever.\n\n27\n00:01:28.970 --> 00:01:30.630\nIt depends on how you wanna go about it.\n\n28\n00:01:30.630 --> 00:01:34.120\nSo for example if I wanna get\nconnected to my vCenter server,\n\n29\n00:01:34.120 --> 00:01:36.690\nsince I'm already on it, I can actually\nget away with skipping this step.\n\n30\n00:01:36.690 --> 00:01:38.400\nBut let's say you were\non your work station,\n\n31\n00:01:38.400 --> 00:01:43.140\nthe first command you'd wanna\nissue is connect-viserver.\n\n32\n00:01:43.140 --> 00:01:45.150\nAnd in the name of your VI server, right.\n\n33\n00:01:45.150 --> 00:01:47.720\nSo in my case it's Win-Server 01, but\n\n34\n00:01:47.720 --> 00:01:49.820\nyours probably has a name that's\na little bit better than that.\n\n35\n00:01:49.820 --> 00:01:52.440\nSo I'm gonna punch that\nin to get connected.\n\n36\n00:01:52.440 --> 00:01:55.560\nAnd so basically it's gonna generate\nan authentication token and\n\n37\n00:01:55.560 --> 00:01:59.020\nthrow it at that server, and\nthen prompt me to log in.\n\n38\n00:01:59.020 --> 00:02:02.900\nSo I'm gonna log in with\nadministrator@V-sphere.local.\n\n39\n00:02:02.900 --> 00:02:06.530\nYou, again, might have configured single\nsign-ons, you'll have different accounts.\n\n40\n00:02:06.530 --> 00:02:08.950\nBut that's the one that I've got.\n\n41\n00:02:08.950 --> 00:02:09.990\nSo I'm gonna authenticate.\n\n42\n00:02:09.990 --> 00:02:12.430\nAnd now I'm connected\nto the vCenter server.\n\n43\n00:02:12.430 --> 00:02:14.810\nNow, technically I already was,\nI could have skipped that and\n\n44\n00:02:14.810 --> 00:02:16.720\njust gone through and\nrambled through the commands.\n\n45\n00:02:16.720 --> 00:02:19.440\nBut this is what I would do if I\nwas at my work station, right?\n\n46\n00:02:19.440 --> 00:02:21.250\nSo I'm connected to vCenter now.\n\n47\n00:02:21.250 --> 00:02:24.980\nAnd now when I start issuing commands,\nit's tying it to.\n\n48\n00:02:24.980 --> 00:02:29.725\nSo the first thing I need to do is,\nI need to get a base image of ESXi.\n\n49\n00:02:29.725 --> 00:02:35.031\nAnd I mentioned in the last episode that\nI could go to my VMware download page.\n\n50\n00:02:35.031 --> 00:02:38.937\nAnd wherever you find the ESXi ISO image,\nthe VM visor ISO image,\n\n51\n00:02:38.937 --> 00:02:43.810\nusually right beneath it is a link for\nwhat's called the offline bundle.\n\n52\n00:02:43.810 --> 00:02:46.820\nAnd the offline bundle is\nthe base image that we need for\n\n53\n00:02:46.820 --> 00:02:47.690\ndoing a deployment like this.\n\n54\n00:02:47.690 --> 00:02:50.550\nSo you can go and download it, and\nbring it in here, and have it offline.\n\n55\n00:02:50.550 --> 00:02:53.510\nPersonally, I like to\nget it live from VMware.\n\n56\n00:02:53.510 --> 00:02:56.340\nThat way I can get the latest version,\nand it's pulled right from them, and\n\n57\n00:02:56.340 --> 00:02:58.620\nI don't have to worry about\nstoring it on my end.\n\n58\n00:02:58.620 --> 00:03:00.860\nAnd so it's just kind of\na little cleaner in my opinion.\n\n59\n00:03:00.860 --> 00:03:03.410\nSo I'm gonna set myself up\nto pull right from VMware.\n\n60\n00:03:03.410 --> 00:03:07.460\nAnd we can do that, because VMware\nas part of their VM update service,\n\n61\n00:03:07.460 --> 00:03:10.560\nthey have VM update servers that have\nall of the base images right there.\n\n62\n00:03:10.560 --> 00:03:13.707\nAnd we can reach out and\npull the images right from them.\n\n63\n00:03:13.707 --> 00:03:20.650\nSo, I'm going to start by\nadding an ESX software depot.\n\n64\n00:03:20.650 --> 00:03:25.874\nAn ESX software depot, that's where\nour images are going to be stored.\n\n65\n00:03:25.874 --> 00:03:29.798\nAnd if I have it downloaded,\nif I download the offline bundle.\n\n66\n00:03:29.798 --> 00:03:35.069\nI would just say DepotUrl and\npoint it to wherever my image is.\n\n67\n00:03:35.069 --> 00:03:39.873\nSo c:/ blah blah blah and point it to,\nDEF or whatever drive it is, and\n\n68\n00:03:39.873 --> 00:03:41.408\npoint it to that file.\n\n69\n00:03:41.408 --> 00:03:43.930\nBut if I want to pull up from online.\n\n70\n00:03:43.930 --> 00:03:48.820\nThen all I have to do is come in here and\nsay the DepotURL\n\n71\n00:03:48.820 --> 00:03:53.720\nis https://hostupdate.vmware.com, right?\n\n72\n00:03:53.720 --> 00:03:58.085\nSo I'm pointing to VMware's website.\n\n73\n00:03:58.085 --> 00:04:06.210\n/software/VUM, which is the VMware\nupdate manager slash production.\n\n74\n00:04:06.210 --> 00:04:08.850\nI don't want beta or test or\nearly release right now.\n\n75\n00:04:08.850 --> 00:04:12.990\nI want production deployment, and\nthen I'm gonna wrap here in a second.\n\n76\n00:04:12.990 --> 00:04:14.760\nNot actual wrapping, but word wrapping.\n\n77\n00:04:14.760 --> 00:04:17.460\nSo main, is what I'm trying to type here.\n\n78\n00:04:17.460 --> 00:04:18.900\nSo main.\n\n79\n00:04:18.900 --> 00:04:25.814\nAfter main, we need vmw-depot-index.xml.\n\n80\n00:04:26.890 --> 00:04:30.990\nWe're pointing to an XML file\nthat has a list of all the images\n\n81\n00:04:30.990 --> 00:04:33.600\nthat are hosted in\nthe VMware update server.\n\n82\n00:04:33.600 --> 00:04:36.220\nAnd that's because we don't\nnecessarily wanna get the latest.\n\n83\n00:04:36.220 --> 00:04:39.840\nLike we probably do, but\nwe might wanna get older versions too.\n\n84\n00:04:39.840 --> 00:04:43.559\nIf I had a consistent deployment plan\nthat relies on an older version maybe I\n\n85\n00:04:43.559 --> 00:04:47.113\nstill have ESXi 5.5 deployed heavily and\nI haven't gone to six yet.\n\n86\n00:04:47.113 --> 00:04:50.411\nI don't want to get the six base images,\nI still need 5.5.\n\n87\n00:04:50.411 --> 00:04:53.777\nSo this XML file with let\nme see all of the images.\n\n88\n00:04:53.777 --> 00:04:57.240\nAnd there's a lot more than\njust based images up there.\n\n89\n00:04:57.240 --> 00:05:00.560\nThere's a lot of hardware drivers\nthat I can pull down too.\n\n90\n00:05:00.560 --> 00:05:04.100\nCuz I might wanna build a custom image\nthat has certain drivers that are built\n\n91\n00:05:04.100 --> 00:05:04.796\ninto it.\n\n92\n00:05:04.796 --> 00:05:05.500\nSo there we go.\n\n93\n00:05:05.500 --> 00:05:08.650\nSo now I'm connected and if your not\nsure someone's already set this up.\n\n94\n00:05:08.650 --> 00:05:12.210\nYou could always run Get-EsxSoftwareDepot.\n\n95\n00:05:12.210 --> 00:05:15.270\nAnd that'll give you a list of the depots,\nand you can see if you're configured for\n\n96\n00:05:15.270 --> 00:05:15.770\none or not.\n\n97\n00:05:15.770 --> 00:05:18.460\nI'm now configured for\nthe online one, okay?\n\n98\n00:05:19.740 --> 00:05:25.620\nThe next thing I need to do is I need to\nfigure out which base image I'm gonna use.\n\n99\n00:05:25.620 --> 00:05:28.090\nAnd there's a couple of\ncommands that we can run here.\n\n100\n00:05:28.090 --> 00:05:32.519\nSo, I mentioned all the software packages,\nthere are all the drivers.\n\n101\n00:05:32.519 --> 00:05:38.672\nWell, you can run Get-EsxSoftwarePackage,\nthere we go.\n\n102\n00:05:38.672 --> 00:05:41.530\nAnd when you run that,\nit's gonna query the server and\n\n103\n00:05:41.530 --> 00:05:45.150\nreturn a list of all the software\nthat's available from the system.\n\n104\n00:05:45.150 --> 00:05:49.840\nAnd you'll see things like\nESX-base software packages, right.\n\n105\n00:05:49.840 --> 00:05:51.031\nThis one's for 5.0.\n\n106\n00:05:51.031 --> 00:05:55.716\nAnd if I keep looking I'll see here's\nESX-base again for 5.0, ESX-base again for\n\n107\n00:05:55.716 --> 00:05:56.232\n5.1.\n\n108\n00:05:56.232 --> 00:06:00.226\nAnd if I sift through here long enough\nI'll find the ESX-base for six and so on.\n\n109\n00:06:00.226 --> 00:06:04.850\nI'll see the VMware tools,\nATA-PATA drivers.\n\n110\n00:06:04.850 --> 00:06:08.560\nWe've got CCIS drivers.\n\n111\n00:06:08.560 --> 00:06:10.580\nYou'll find all sorts\nof crazy stuff in here.\n\n112\n00:06:10.580 --> 00:06:12.700\nWe'll find san and iSCSI drivers.\n\n113\n00:06:12.700 --> 00:06:14.040\nNetwork card drivers.\n\n114\n00:06:14.040 --> 00:06:16.980\nAll of these are different software\npackages that we can pull in and\n\n115\n00:06:16.980 --> 00:06:20.150\nadd to our base package,\nor our base image.\n\n116\n00:06:20.150 --> 00:06:22.425\nSo we can go, whoops.\n\n117\n00:06:22.425 --> 00:06:26.070\n[LAUGH] We can go well beyond it if\nwe can master typing on the keyboard.\n\n118\n00:06:26.070 --> 00:06:28.940\nSo that was Get-EsxSoftwarePackage.\n\n119\n00:06:28.940 --> 00:06:35.830\nBut where I really want to\nstart is Get-EsxImageProfile,\n\n120\n00:06:35.830 --> 00:06:38.140\nwhat is an image profile?\n\n121\n00:06:38.140 --> 00:06:43.820\nAn image profile is a list of\nsoftware packages that I combine,\n\n122\n00:06:43.820 --> 00:06:46.150\nto create the image I want to roll out.\n\n123\n00:06:46.150 --> 00:06:48.960\nI never want to roll out ESX\nbase by itself because it\n\n124\n00:06:48.960 --> 00:06:50.730\ndoes not have any hardware drivers.\n\n125\n00:06:50.730 --> 00:06:52.990\nSo if I throw that out,\nit's not gonna see my network adapter,\n\n126\n00:06:52.990 --> 00:06:56.900\nit's not gonna see my hard drives,\nit's gonna be terrible, right?\n\n127\n00:06:56.900 --> 00:07:00.990\nSo I want Esx base combined\nwith several other drivers.\n\n128\n00:07:00.990 --> 00:07:05.630\nWell, the image profiles\nare the collections that identify that.\n\n129\n00:07:05.630 --> 00:07:08.250\nAnd if I go to HP,\nthey'll have an image profile for\n\n130\n00:07:08.250 --> 00:07:10.750\neach of their different hardware servers.\n\n131\n00:07:10.750 --> 00:07:13.050\nSo if I've got a ProLiant 360,\n\n132\n00:07:13.050 --> 00:07:17.130\nI can make sure that I just get\nthe drivers that relate to that hardware.\n\n133\n00:07:17.130 --> 00:07:19.330\nAnd not drivers for\nall the other hardware that's out there.\n\n134\n00:07:19.330 --> 00:07:22.250\nCuz I don't have that hardware,\nwhat do I need that for, right?\n\n135\n00:07:22.250 --> 00:07:24.650\nWell, here's where things\nget a little tricky.\n\n136\n00:07:24.650 --> 00:07:26.710\nYou saw how many software\npackages there were.\n\n137\n00:07:26.710 --> 00:07:30.290\nSo, how many combinations of software\npackages do you think that can make?\n\n138\n00:07:31.400 --> 00:07:32.520\nTons.\n\n139\n00:07:32.520 --> 00:07:36.170\nIn the old days I could run\nGet-EsxImageProfile and\n\n140\n00:07:36.170 --> 00:07:39.790\nI would get a list of the profiles from\nVMware and there weren't that many.\n\n141\n00:07:39.790 --> 00:07:41.950\nAnd over time they grew and\nthey grew and they grew.\n\n142\n00:07:41.950 --> 00:07:43.730\nWell, they finally grew so large,\n\n143\n00:07:43.730 --> 00:07:46.820\nthat if I were to run this command right\nnow, it'll lock up the PowerShell.\n\n144\n00:07:46.820 --> 00:07:49.130\nAnd I'll have to close the PowerShell and\nopen again, start all over again.\n\n145\n00:07:49.130 --> 00:07:51.345\nSo you never want to run this\ncommand by itself any more,\n\n146\n00:07:51.345 --> 00:07:53.479\nit's just more than what\nthe PowerShell can handle.\n\n147\n00:07:53.479 --> 00:07:54.990\nSo we always want to filter it.\n\n148\n00:07:54.990 --> 00:07:59.224\nSo I'm going to filter it, and\nlook for image profiles with a name.\n\n149\n00:07:59.224 --> 00:08:05.080\nAnd I'm gonna look for\nany one that starts with ESXi-6.*.\n\n150\n00:08:05.080 --> 00:08:09.420\nOkay, I'm looking for\nany ESXi-6 image profiles.\n\n151\n00:08:09.420 --> 00:08:12.870\nThis will filter out the 55s,\n51, 50, 41 and so on,\n\n152\n00:08:12.870 --> 00:08:15.440\nthis will just give me the 6s\nit will still be a lot.\n\n153\n00:08:15.440 --> 00:08:19.120\nThere will still be a lot of them but\nit's not gonna overwhelm my PowerShell.\n\n154\n00:08:19.120 --> 00:08:22.250\nSo let us get reach out and\nget those and now, I can look.\n\n155\n00:08:22.250 --> 00:08:26.310\nAnd what you'll see is there's a number\nof these profiles built up and\n\n156\n00:08:26.310 --> 00:08:30.480\nyou'll see some of them are no tools or\ndo they have the tools.\n\n157\n00:08:30.480 --> 00:08:33.080\nThey're talking about the V center\nagents and those things, whether or\n\n158\n00:08:33.080 --> 00:08:34.320\nnot they got it installed.\n\n159\n00:08:34.320 --> 00:08:38.720\nThese are all variations and\nthey're released on a I\n\n160\n00:08:38.720 --> 00:08:43.460\nthink it's like every four weeks or\nsomething they put out a new release.\n\n161\n00:08:43.460 --> 00:08:45.410\nI know they're all showing\nlast modified April 29th, but\n\n162\n00:08:45.410 --> 00:08:49.010\nthey do actually update\nthem fairly frequently.\n\n163\n00:08:49.010 --> 00:08:51.900\nAnd so, you can come through and\npick and you can see the dates.\n\n164\n00:08:51.900 --> 00:08:54.147\nSee where it says this one\nwas modified April 29th.\n\n165\n00:08:54.147 --> 00:08:59.072\nBut if I look over here this one's\nactually dated July 4, 2015.\n\n166\n00:08:59.072 --> 00:09:06.151\nSo this file name, what it's made up of is\nyou have the year, followed by the month,\n\n167\n00:09:06.151 --> 00:09:11.570\nfollowed by the day, and\nthen what image that it is for that day.\n\n168\n00:09:11.570 --> 00:09:13.398\nSo this was the first\nimage generated this day.\n\n169\n00:09:13.398 --> 00:09:16.255\nAnd it's a rare day they generate\nmore than one image but if they did,\n\n170\n00:09:16.255 --> 00:09:19.028\nyou might have an 02 if there was\na bug they immediately spotted.\n\n171\n00:09:19.028 --> 00:09:21.745\nSo this one was made back in 2015.\n\n172\n00:09:21.745 --> 00:09:25.205\nI see right here I've got 2016 March 1st,\nright?\n\n173\n00:09:25.205 --> 00:09:28.154\nAnd so go through and\nfind the most recent one.\n\n174\n00:09:28.154 --> 00:09:31.650\nHere I've got 2016 May 4th.\n\n175\n00:09:31.650 --> 00:09:32.820\nThat's not too long ago.\n\n176\n00:09:32.820 --> 00:09:35.580\nRight, we can probably find a June 1,\n\n177\n00:09:35.580 --> 00:09:37.860\nthere is probably a June\n1 in here somewhere.\n\n178\n00:09:37.860 --> 00:09:41.250\nBut basically you're going to find\nthe base image that you want to use that\n\n179\n00:09:41.250 --> 00:09:43.220\nto serve as your image profile.\n\n180\n00:09:43.220 --> 00:09:46.983\nIt's always better to just copy one of\nVMware's profiles cuz it's already got all\n\n181\n00:09:46.983 --> 00:09:50.637\nthe drivers and stuff in it, and then you\ncan just modify that profile as needed,\n\n182\n00:09:50.637 --> 00:09:51.192\nall right?\n\n183\n00:09:51.192 --> 00:09:56.558\nSo I'm going to copy one of theres and\nthe way we do that\n\n184\n00:09:56.558 --> 00:10:01.580\nis with New-Esx ImageProfile\n-CloneProfile.\n\n185\n00:10:01.580 --> 00:10:05.850\nI'm gonna clone one of their profiles and\n\n186\n00:10:05.850 --> 00:10:10.852\nI need to tell it the profile\nthat I wanna clone and\n\n187\n00:10:10.852 --> 00:10:18.913\nI'm gonna clone\nESxi-6.0.0-20160302001-standard.\n\n188\n00:10:18.913 --> 00:10:21.086\nThat's the one that I\nwanna clone from them.\n\n189\n00:10:21.086 --> 00:10:23.505\nOkay, so I'm gonna clone that image, and\n\n190\n00:10:23.505 --> 00:10:27.430\nwhen I clone it on my system I'm\ngonna give it a different name.\n\n191\n00:10:27.430 --> 00:10:31.780\nSo I'm gonna call it dash name,and\nthan im gonna give it a name\n\n192\n00:10:31.780 --> 00:10:36.480\nof lab-esx that's gonna be\na lot easier for me to type,\n\n193\n00:10:36.480 --> 00:10:39.700\njust calling it lab-esx, so\nI'm gonna put that in there, alright.\n\n194\n00:10:39.700 --> 00:10:41.640\nNow I'm gonna clone any of\nthese that I wanted, so\n\n195\n00:10:41.640 --> 00:10:44.530\nI can go and\nfind the one that is relevant to me and\n\n196\n00:10:44.530 --> 00:10:48.630\nuse that one to clone but in this case I'm\ngonna pick this one, I left that vendor.\n\n197\n00:10:48.630 --> 00:10:51.810\nI should have done dash vendor and\nprovided a name.\n\n198\n00:10:51.810 --> 00:10:53.980\nWe don't the vender to be a VMware\nbecause we want to identify\n\n199\n00:10:53.980 --> 00:10:54.980\nthe stuff that we created.\n\n200\n00:10:54.980 --> 00:10:59.280\nA lot of people just put custom in here,\nbut I'll put ITProTV as the vendor.\n\n201\n00:10:59.280 --> 00:11:03.420\nAnd that way, whenever I query the images,\nwhen I queried the images a minute ago,\n\n202\n00:11:03.420 --> 00:11:04.880\nI filtered by version number.\n\n203\n00:11:04.880 --> 00:11:08.900\nBut now I can filter by vendor, and say\njust show me the images that are ITProTV.\n\n204\n00:11:08.900 --> 00:11:09.410\nRight?\n\n205\n00:11:09.410 --> 00:11:11.710\nAnd I know I'm connected\nto VM Ware online.\n\n206\n00:11:11.710 --> 00:11:13.380\nI didn't just publish\nthis to VM ware online.\n\n207\n00:11:13.380 --> 00:11:14.430\nLike you guys won't be able to see this.\n\n208\n00:11:14.430 --> 00:11:16.550\nIt's published here in my V center server.\n\n209\n00:11:16.550 --> 00:11:17.300\nBut now it's created.\n\n210\n00:11:17.300 --> 00:11:18.620\nI got my Lab ESX.\n\n211\n00:11:18.620 --> 00:11:21.193\nNow I did need the full name\nof that image up here and\n\n212\n00:11:21.193 --> 00:11:24.646\nyou'll notice it's truncated on my screen,\nthese dot dot dots.\n\n213\n00:11:24.646 --> 00:11:29.577\nSo if you ever need to see the full name\non these things when you run the get esx\n\n214\n00:11:29.577 --> 00:11:30.684\nimage profile.\n\n215\n00:11:30.684 --> 00:11:36.078\nIf you pipe that into the format.list\ncommand, which can actually be abbreviated\n\n216\n00:11:36.078 --> 00:11:41.162\nto just f.l if you want, but format-list,\nit'll display in a list format,\n\n217\n00:11:41.162 --> 00:11:45.730\nthus the name but it makes it where\nyou can read the whole name, right.\n\n218\n00:11:45.730 --> 00:11:51.250\nSo now I can find Esxi,\nthis one's dash no tools, or standard or\n\n219\n00:11:51.250 --> 00:11:54.910\nwhatever and it'll help you kind of find\na little more information about those and\n\n220\n00:11:54.910 --> 00:11:55.480\nsee the full name.\n\n221\n00:11:55.480 --> 00:11:59.330\nAll right, so\nat this point I've got an image profile.\n\n222\n00:11:59.330 --> 00:12:03.330\nNow, I'm actually fine with the base\nprofile that I just got from VMWare so\n\n223\n00:12:03.330 --> 00:12:04.630\nI don't need to modify it.\n\n224\n00:12:04.630 --> 00:12:08.830\nBut if I want to demodify, if I wanted to\nadd drivers in or take drivers out you've\n\n225\n00:12:08.830 --> 00:12:16.040\ngot two commands you can use for\nthat which are add-EsxSoftwarePackage.\n\n226\n00:12:16.040 --> 00:12:18.610\nAll right, so that one we can\nadd the software packages in and\n\n227\n00:12:18.610 --> 00:12:23.690\nget those in place or\nyou can do remove-EsxSoftwarePackage.\n\n228\n00:12:23.690 --> 00:12:28.320\nAnd so we can use those commands and\npoint them at the image\n\n229\n00:12:28.320 --> 00:12:32.560\nprofile to modify them and\ncustomize them to our needs.\n\n230\n00:12:32.560 --> 00:12:36.875\nIf you do a Get-Help for\neither of those commands and\n\n231\n00:12:36.875 --> 00:12:40.610\ndo a -Example [LAUGH] examples,\nthere we go.\n\n232\n00:12:40.610 --> 00:12:45.115\nI don't need to update,\nlet's just [INAUDIBLE] that, there we go.\n\n233\n00:12:45.115 --> 00:12:47.462\nThen you'll get a couple of\nexamples as to how that works, so\n\n234\n00:12:47.462 --> 00:12:50.039\nsee how we're adding a software\npackage for an image profile, and\n\n235\n00:12:50.039 --> 00:12:52.705\nthey're pointing to my custom profile,\nmine was called.\n\n236\n00:12:52.705 --> 00:12:55.309\nAnd then they're telling\nthe software package to add, and\n\n237\n00:12:55.309 --> 00:12:57.450\nthey're adding some kind\nof network adapters.\n\n238\n00:12:57.450 --> 00:13:03.722\nAnd that- bnx2 1.6.7-0.1OEM1.\n\n239\n00:13:03.722 --> 00:13:05.337\nRight, so they're adding that driver in.\n\n240\n00:13:05.337 --> 00:13:08.770\nOr you can take drivers out, you can\ndo all sorts of stuff right from there.\n\n241\n00:13:08.770 --> 00:13:12.150\nSo easy enough to modify those\nimages once they're created.\n\n242\n00:13:12.150 --> 00:13:16.400\nBut at this point I've got an image now,\nand that image is called lab-esx.\n\n243\n00:13:16.400 --> 00:13:18.200\nSo, I'm good to go.\n\n244\n00:13:18.200 --> 00:13:20.170\nWe've set up the TFTP server last episode.\n\n245\n00:13:20.170 --> 00:13:24.430\nWe set up DHCP, now I've got an image,\nwe're ready to rock right?\n\n246\n00:13:24.430 --> 00:13:25.550\nWell not quite.\n\n247\n00:13:25.550 --> 00:13:30.150\nWe've got an image but we haven't really\ntold the system to use it, right.\n\n248\n00:13:30.150 --> 00:13:32.380\nAnd we haven't even really\ndownloaded it truly.\n\n249\n00:13:32.380 --> 00:13:36.460\nSo we've got it but\nit's not quite ready for use.\n\n250\n00:13:36.460 --> 00:13:38.960\nSo to get it ready for\nuse I've got two choices.\n\n251\n00:13:38.960 --> 00:13:43.070\nOne, I can download it to V center and\nget ready to serve it over the network.\n\n252\n00:13:43.070 --> 00:13:46.440\nOr two,\nI could create an isolate image on that.\n\n253\n00:13:46.440 --> 00:13:48.750\nI could actually make my own bootable CD.\n\n254\n00:13:48.750 --> 00:13:52.230\nSo after I customize the ad drivers,\ntake drivers out,\n\n255\n00:13:52.230 --> 00:13:55.050\nwhatever is need to do to customize it,\nI can now build my own ISO.\n\n256\n00:13:55.050 --> 00:13:59.760\nAnd now I've got an ISO I can deploy as\nready to update, ready to rock, right?\n\n257\n00:13:59.760 --> 00:14:03.330\nBecause there have been numerous\nupdates to ESX since it came out and\n\n258\n00:14:03.330 --> 00:14:06.730\nif I install the VM visor disc that they\ndistribute I'm going to have to do updates\n\n259\n00:14:06.730 --> 00:14:10.320\nright away now I can build my own,\nit's got the updates already in it, right?\n\n260\n00:14:10.320 --> 00:14:12.690\nAnd to do that we have an export command.\n\n261\n00:14:12.690 --> 00:14:16.743\nSo you can say Export-EsxImageProfile and\n\n262\n00:14:16.743 --> 00:14:24.095\nyou give it the ImageProfile name which\nmine was called \"lab-esx\", right.\n\n263\n00:14:24.095 --> 00:14:29.568\nAnd then you can say -ExportToISO and\n\n264\n00:14:29.568 --> 00:14:37.269\nthen you can give it a file\npath to get to that, right.\n\n265\n00:14:37.269 --> 00:14:39.220\nSo C:\\ whatever, right.\n\n266\n00:14:39.220 --> 00:14:41.720\nSo you can point at that and\nthat will export an ISO and\n\n267\n00:14:41.720 --> 00:14:45.710\nnow you can burn that to disk and\ntake it wherever and have it going there.\n\n268\n00:14:45.710 --> 00:14:48.370\nThat's certainly an option if you\nwant to go the physical media route.\n\n269\n00:14:48.370 --> 00:14:50.680\n>> And\nonce that command line was runned on.\n\n270\n00:14:50.680 --> 00:14:55.310\nCould you turn around and put that\nin the NFS iso's or the iso store,\n\n271\n00:14:55.310 --> 00:14:58.700\nthe data store that you showed us\ncreating in an earlier episode?\n\n272\n00:14:58.700 --> 00:15:00.790\n>> You could, but\nit really wouldn't help you at that point.\n\n273\n00:15:00.790 --> 00:15:04.690\nLike when you're trying to\ninstall ESX on a server.\n\n274\n00:15:04.690 --> 00:15:07.180\nIt can't access data\nstorage at that point.\n\n275\n00:15:07.180 --> 00:15:08.690\nIt doesn't have those drivers.\n\n276\n00:15:08.690 --> 00:15:11.030\nSo you can put it there for safe keeping,\nbut that's all it would be.\n\n277\n00:15:11.030 --> 00:15:12.220\nYou wouldn't be able to use it from there.\n\n278\n00:15:12.220 --> 00:15:16.310\nSo, you'd really need to take it and\nburn it to a disk, or use a u net boot in\n\n279\n00:15:16.310 --> 00:15:19.790\nto make a USB key or something like that,\nand then you'd actually be able to use it.\n\n280\n00:15:19.790 --> 00:15:21.350\nIn the first part of these episode,\n\n281\n00:15:21.350 --> 00:15:24.210\nyou said that there are some basics\nthat you need to know about auto-deploy.\n\n282\n00:15:24.210 --> 00:15:26.810\nNow with the power CLI command,\nlet's take your show and\n\n283\n00:15:26.810 --> 00:15:30.230\nyou do believe that's gonna be testable\nmaterial and should one of our viewers\n\n284\n00:15:30.230 --> 00:15:33.410\nthat's gonna approach the certification\nbe aware of those commandments.\n\n285\n00:15:33.410 --> 00:15:35.140\n>> Absolutely yeah, absolutely.\n\n286\n00:15:35.140 --> 00:15:37.410\nYou might not need to\nmemorize the full syntax but\n\n287\n00:15:37.410 --> 00:15:39.460\nexpect to see some of these\ncommands on the exam.\n\n288\n00:15:39.460 --> 00:15:41.610\nSo at least be able to recognize\nwhat's right and what's wrong.\n\n289\n00:15:41.610 --> 00:15:43.770\nSo if you have multiple choice,\nanswers and\n\n290\n00:15:43.770 --> 00:15:45.440\neach one has a different policy or\ncommand.\n\n291\n00:15:45.440 --> 00:15:46.790\nYou wanna be familiar with them.\n\n292\n00:15:46.790 --> 00:15:48.911\nI'm showing you guys the ones\nthat might show up on the exam.\n\n293\n00:15:48.911 --> 00:15:50.748\nThere's thousands of commands.\n\n294\n00:15:50.748 --> 00:15:52.638\nI'm not showing you all of those\ncuz they're not on the exam, so\n\n295\n00:15:52.638 --> 00:15:54.179\nthese are the ones that\nyou'll need to your memory.\n\n296\n00:15:54.179 --> 00:15:55.153\nAnd we're almost done, too.\n\n297\n00:15:55.153 --> 00:15:57.699\nWe only have a little bit more to do.\n\n298\n00:15:57.699 --> 00:15:59.778\nI'm not gonna export to an ISO.\n\n299\n00:15:59.778 --> 00:16:00.404\nI don't need that.\n\n300\n00:16:00.404 --> 00:16:01.990\nI've got my image profile created.\n\n301\n00:16:01.990 --> 00:16:03.960\nI wanna serve it up online.\n\n302\n00:16:03.960 --> 00:16:07.960\nSo to do that, the next thing I need\nto do is to create a deployment rule.\n\n303\n00:16:07.960 --> 00:16:11.150\nAnd the deployment rule is just gonna say\nif somebody boots up and connects to me\n\n304\n00:16:11.150 --> 00:16:15.800\nvia the network, connects via auto deploy\nhere's the image that I wanna give them.\n\n305\n00:16:15.800 --> 00:16:21.570\nAnd so the command to do that\nis to say New-DeployRule -Name.\n\n306\n00:16:21.570 --> 00:16:23.280\nAnd we'll give it a name, okay.\n\n307\n00:16:23.280 --> 00:16:26.320\nSo I'm gonna call this one\nthe \"itprotv-lab\", right, so\n\n308\n00:16:26.320 --> 00:16:28.958\nthis is gonna be everything\nI'm doing here in my lab.\n\n309\n00:16:28.958 --> 00:16:31.995\nAnd then -item,\nwhat I'm gonna be handing out, and\n\n310\n00:16:31.995 --> 00:16:35.700\nI'm gonna be handing out\nthe \"lab-esx\" image profile.\n\n311\n00:16:35.700 --> 00:16:37.130\nThat's the image profile\nthat I've created.\n\n312\n00:16:37.130 --> 00:16:42.150\nSo, anybody that is in my lab,\nI wanna give them this profile.\n\n313\n00:16:42.150 --> 00:16:47.950\nOkay, now if I stop right here,\nanybody who boots up and\n\n314\n00:16:47.950 --> 00:16:51.560\nconnects via auto deploy is gonna get\nthis image and it's gonna roll it out.\n\n315\n00:16:51.560 --> 00:16:54.290\nSo let's say that somebody's on a laptop\none day and they're screwing around,\n\n316\n00:16:54.290 --> 00:16:56.390\nand they booted up, and\nthey press power, and they decide hey,\n\n317\n00:16:56.390 --> 00:16:59.450\nwhat happens if you boot from network,\nand they boot from the network.\n\n318\n00:16:59.450 --> 00:17:02.220\nWell, that laptop's gonna get formated and\nit's gonna get ESX put on it.\n\n319\n00:17:02.220 --> 00:17:07.011\nSo we probably don't want to stop here, we\nprobably wanna go a little bit beyond that\n\n320\n00:17:07.011 --> 00:17:10.210\nto say, don't just deploy it everywhere.\n\n321\n00:17:10.210 --> 00:17:13.642\nNow, Wes, I know you brought it up in\nthe last episode that we could have solved\n\n322\n00:17:13.642 --> 00:17:15.103\nthis problem with DHCP, right?\n\n323\n00:17:15.103 --> 00:17:18.174\n>> My thought was, if you're gonna\ndeploy this out to host, why\n\n324\n00:17:18.174 --> 00:17:21.908\ndon't you just create maybe a dedicated\nscope inside of your DHCP server.\n\n325\n00:17:21.908 --> 00:17:23.050\n>> And you certainly could.\n\n326\n00:17:23.050 --> 00:17:25.630\nThe problem with DHCP is it\nuses broadcast though, right?\n\n327\n00:17:25.630 --> 00:17:27.600\nSo, what you have to have\nare separate subnets.\n\n328\n00:17:27.600 --> 00:17:31.810\nSo, if all your laptops and desktops are\non one subnet, and all your ESX boxes were\n\n329\n00:17:31.810 --> 00:17:35.580\non another subnet, then I could stop right\nhere, and just have it blanket because\n\n330\n00:17:35.580 --> 00:17:39.270\nonly ESX boxes would boot up on that\nnetwork and connect to that DHCP server,\n\n331\n00:17:39.270 --> 00:17:42.620\nso only they'd get the setting,\nand I'd be okay with that, right?\n\n332\n00:17:42.620 --> 00:17:47.280\nBut if I have ESX boxes that are on\nthe same network as my clients,\n\n333\n00:17:47.280 --> 00:17:50.090\nnow I get a little overlap.\n\n334\n00:17:50.090 --> 00:17:54.990\nAnd so we can apply a filter to this rule\nto limit who would it applies to, and\n\n335\n00:17:54.990 --> 00:17:58.420\nthere's a ton of different filters that\nyou can do, you can filter by Mac address.\n\n336\n00:17:58.420 --> 00:17:59.735\nYou can filter by hardware ID.\n\n337\n00:17:59.735 --> 00:18:02.783\nYou can filter by all sorts of things.\n\n338\n00:18:02.783 --> 00:18:04.505\nI usually filter by IP range and\n\n339\n00:18:04.505 --> 00:18:08.090\nthat's because you can set up\nDHCP reservations for your host.\n\n340\n00:18:08.090 --> 00:18:12.100\nSo you kinda know what IP they're gonna\nget and they're easy to change later on.\n\n341\n00:18:12.100 --> 00:18:14.276\nSo if we wanna filter by IP,\n\n342\n00:18:14.276 --> 00:18:19.495\nwhat we would do is we would just\ncome in here and say, -Pattern.\n\n343\n00:18:19.495 --> 00:18:22.620\nAnd then under Pattern there's,\nI mean, a number of different options.\n\n344\n00:18:22.620 --> 00:18:25.890\nSo I could say MAC= and\nthen put in a MAC address.\n\n345\n00:18:25.890 --> 00:18:31.848\nI'm gonna say \"ipv4=192.168.0.0,\n\n346\n00:18:31.848 --> 00:18:37.273\nI'll just do the whole range,\n0.0 all the way\n\n347\n00:18:37.273 --> 00:18:42.186\nthrough 192.168.0.254\".\n\n348\n00:18:42.186 --> 00:18:45.857\nThere, so I'm just gonna say if\nyou're in this particular subnet,\n\n349\n00:18:45.857 --> 00:18:49.488\nin this range of IPs, then this rule\nis going to apply to you, okay?\n\n350\n00:18:49.488 --> 00:18:52.069\nAnd I don't remember if I put my\nquote marks on that other side,\n\n351\n00:18:52.069 --> 00:18:52.860\nlet me see if I did.\n\n352\n00:18:52.860 --> 00:18:54.560\nI did, good, all right.\n\n353\n00:18:54.560 --> 00:18:58.670\nSo when I run that,\nthat's gonna create the deploy rule.\n\n354\n00:18:58.670 --> 00:19:03.100\nAnd as soon as I create the deploy rule,\nmy vCenter server's gonna say shoot,\n\n355\n00:19:03.100 --> 00:19:06.780\nnow I've got people who need to\nreceive this image, so let me go and\n\n356\n00:19:06.780 --> 00:19:08.230\ndownload it, right?\n\n357\n00:19:08.230 --> 00:19:12.952\nNow when I created my image, I just cloned\nthe ESX base profile and that was it.\n\n358\n00:19:12.952 --> 00:19:15.410\nSo it should just download one thing,\nright?\n\n359\n00:19:15.410 --> 00:19:16.050\nWell, no,\n\n360\n00:19:16.050 --> 00:19:20.148\nthe base image profile was made up of\na number of software packages, right?\n\n361\n00:19:20.148 --> 00:19:22.850\nThese are all the software\npackages included on your CD.\n\n362\n00:19:22.850 --> 00:19:25.230\nAnd so it's gonna download\nall those software packages.\n\n363\n00:19:25.230 --> 00:19:27.390\nAnd if you look,\nyou'll see them coming through.\n\n364\n00:19:27.390 --> 00:19:30.510\nWe've got like, here's\na Hewlett Packard card of some sort.\n\n365\n00:19:30.510 --> 00:19:33.760\nWe gotta a RAID controller\ndriver being loaded.\n\n366\n00:19:33.760 --> 00:19:36.130\nWe've got, I don't even know\nwhat some of these things are.\n\n367\n00:19:36.130 --> 00:19:39.510\nThere's a network adapter driver there,\na net e1000e,\n\n368\n00:19:39.510 --> 00:19:43.110\nthat's the Intel Pro1000 adapters.\n\n369\n00:19:43.110 --> 00:19:44.730\nSo, it is pulling those in.\n\n370\n00:19:44.730 --> 00:19:48.306\nSo each of these are different drivers\nthat are having to be loaded into\n\n371\n00:19:48.306 --> 00:19:48.982\nthe system.\n\n372\n00:19:48.982 --> 00:19:51.310\nAnd it's downloading them\nright to my vCenter server.\n\n373\n00:19:51.310 --> 00:19:53.847\n>> And now that you've got your rule\ncreated, right, we're ready to go.\n\n374\n00:19:53.847 --> 00:19:56.330\nHost should boot up and\nthey should find the server?\n\n375\n00:19:56.330 --> 00:19:57.260\n>> Pretty much.\n\n376\n00:19:57.260 --> 00:19:58.450\nWe do have one more step.\n\n377\n00:19:58.450 --> 00:20:00.680\nSo I gotta wait for\nit to finish downloading, right?\n\n378\n00:20:00.680 --> 00:20:02.370\nSo that's kind of a given.\n\n379\n00:20:02.370 --> 00:20:07.020\nBut then, technically, I made the rule,\nbut I haven't actually turned it on yet.\n\n380\n00:20:07.020 --> 00:20:07.990\nSo I've gotta turn it on.\n\n381\n00:20:07.990 --> 00:20:10.950\nI know it's kind of counterintuitive\nbecause I did the new dash deploy rule,\n\n382\n00:20:10.950 --> 00:20:14.070\nwe created it right, but it actually\ncreates it in a disabled state.\n\n383\n00:20:14.070 --> 00:20:19.630\nSo I need to do a add deploy rule command,\nand I know new versus add.\n\n384\n00:20:19.630 --> 00:20:22.540\nNew creates a brand new one,\nadd turns it on,\n\n385\n00:20:22.540 --> 00:20:26.010\nit adds it to the active\nlist of deploy rules.\n\n386\n00:20:26.010 --> 00:20:29.510\nSo that's gonna be the next thing I do\nas soon as this is done downloading.\n\n387\n00:20:29.510 --> 00:20:33.040\nNow, when it's downloading, there's two\npackages that are gonna be the largest.\n\n388\n00:20:33.040 --> 00:20:35.110\nThere's the esx-base.\n\n389\n00:20:35.110 --> 00:20:37.846\nSo when we get to that one it's\ngonna take it a moment, and\n\n390\n00:20:37.846 --> 00:20:40.040\nthen the other one is the esx-ui.\n\n391\n00:20:40.040 --> 00:20:41.353\nSo when you deploy ESX,\n\n392\n00:20:41.353 --> 00:20:45.173\nit actually has the vSphere native\nclient as part of the deployment.\n\n393\n00:20:45.173 --> 00:20:48.568\nRemember, you could go to\nthe webpage of your ESXI host and\n\n394\n00:20:48.568 --> 00:20:50.799\ndownload the native vSphere client.\n\n395\n00:20:50.799 --> 00:20:54.120\nSo those two are the one's that\nare gonna take the longest to download.\n\n396\n00:20:54.120 --> 00:20:56.530\nBut I say the longest, all said and done,\n\n397\n00:20:56.530 --> 00:21:00.720\nthis is gonna add up to about 350 megs,\nso it's not a huge amount of data.\n\n398\n00:21:00.720 --> 00:21:04.210\nBut VMware servers are servicing\na lot of people and\n\n399\n00:21:04.210 --> 00:21:06.480\nso you're not the only\nperson accessing them.\n\n400\n00:21:06.480 --> 00:21:10.070\nWhen you do it online like this,\nit can take a little while sometimes.\n\n401\n00:21:10.070 --> 00:21:11.184\nThat's an advantage of going offline.\n\n402\n00:21:11.184 --> 00:21:14.130\nIf you get the offline bundle,\nyou download it as one big file, and\n\n403\n00:21:14.130 --> 00:21:17.745\nit's got everything you need right in that\none big file and it downloads faster.\n\n404\n00:21:17.745 --> 00:21:22.840\nBut this one is moving pretty quick, there\nis that esx-base that just downloaded.\n\n405\n00:21:22.840 --> 00:21:27.050\nAnd with each of these notice how it's\ndoing three things, it's downloading it,\n\n406\n00:21:27.050 --> 00:21:29.880\nit's extracting it, and\nthen it's uploading it.\n\n407\n00:21:29.880 --> 00:21:31.500\nWhere's it uploading it to?\n\n408\n00:21:31.500 --> 00:21:33.570\nWell, it's uploading it to vCenter.\n\n409\n00:21:33.570 --> 00:21:37.800\nI'm downloading it to wherever I'm running\nthe power CLIs, this might be my laptop or\n\n410\n00:21:37.800 --> 00:21:40.950\na desktop somewhere, and\nthen it's having to upload it to vCenter.\n\n411\n00:21:40.950 --> 00:21:44.770\nNow I'm actually on my vCenter server,\nbut that doesn't make a difference here,\n\n412\n00:21:44.770 --> 00:21:47.880\nit's still gotta run that process,\nso it downloads it and uploads it.\n\n413\n00:21:47.880 --> 00:21:51.990\nSo It should almost be done,\nI haven't seen the esx-ui pass by yet.\n\n414\n00:21:51.990 --> 00:21:54.570\nBut that's another one that'll make\nup a pretty decent chunk of it.\n\n415\n00:21:54.570 --> 00:21:58.520\nThe tools actually add up to a pretty\ndecent bit cuz those are all the ISO\n\n416\n00:21:58.520 --> 00:22:00.880\nimages that have the VMware tools for\n\n417\n00:22:00.880 --> 00:22:02.880\neach of the different\ndistros that are out there.\n\n418\n00:22:02.880 --> 00:22:04.810\nI might not have any Linux distros,\n\n419\n00:22:04.810 --> 00:22:07.650\nI might not have any of those\nother operating systems.\n\n420\n00:22:07.650 --> 00:22:10.343\nAnd so it's downloading images\nthat I don't necessarily need.\n\n421\n00:22:10.343 --> 00:22:14.483\nThese are things that I could have removed\nif I customized the profile a bit,\n\n422\n00:22:14.483 --> 00:22:15.710\nall right.\n\n423\n00:22:15.710 --> 00:22:18.440\nSo there we go, it is almost done.\n\n424\n00:22:18.440 --> 00:22:21.158\n>> And, Don, on that note, would this\nbe something that you could go and\n\n425\n00:22:21.158 --> 00:22:23.970\nturn around and let's say you wanted\nto save space for whatever reason,\n\n426\n00:22:23.970 --> 00:22:25.792\ncould you strip that\nstuff off after the fact?\n\n427\n00:22:25.792 --> 00:22:27.978\nOr would it be something that you\nneed to make up your mind prior to\n\n428\n00:22:27.978 --> 00:22:28.714\ndownloaded the ISO?\n\n429\n00:22:28.714 --> 00:22:31.061\n>> So we could certainly strip it out, but\n\n430\n00:22:31.061 --> 00:22:34.490\nonce you do you need to recreate\nthe deploy rule, right?\n\n431\n00:22:34.490 --> 00:22:37.760\nSo we would just remove the deploy rule\nthat's there and put it back in, and\n\n432\n00:22:37.760 --> 00:22:40.330\nthen we would redownload it and\nkinda get it pared down.\n\n433\n00:22:40.330 --> 00:22:43.710\nAnd it is all about speed,\neven though it's only 350 megs.\n\n434\n00:22:43.710 --> 00:22:45.780\nYou kinda see how long it's\ntaking me to download.\n\n435\n00:22:45.780 --> 00:22:48.939\nWhen I start deploying that to my\nmachines, the less stuff in there,\n\n436\n00:22:48.939 --> 00:22:50.810\nthe faster it'll deploy.\n\n437\n00:22:50.810 --> 00:22:54.520\nSo if I get an emergency\ncall that says hey,\n\n438\n00:22:54.520 --> 00:22:58.155\nthis datacenter is getting overwhelmed, we\nneed more resources, I might have servers\n\n439\n00:22:58.155 --> 00:23:01.660\npre-staged where I just go in there and\nhit the power button, and fire them up,\n\n440\n00:23:01.660 --> 00:23:06.190\nand I want them to get up as fast as I\ncan, so the smaller the image the better.\n\n441\n00:23:06.190 --> 00:23:08.493\nBut the more customized\nhardware you've gotta support,\n\n442\n00:23:08.493 --> 00:23:11.129\nthe more drivers you gotta load,\nso it's just gonna take longer.\n\n443\n00:23:11.129 --> 00:23:12.770\nAll right, and mine finally finished.\n\n444\n00:23:12.770 --> 00:23:14.841\nAll right, so\nnow that it's done, here we go.\n\n445\n00:23:14.841 --> 00:23:18.880\nNow I've got that deploy rule created,\nyou can see my pattern list in place.\n\n446\n00:23:18.880 --> 00:23:22.383\nWe should be good to go as\nlong as I turn the rule on.\n\n447\n00:23:22.383 --> 00:23:26.100\nSo I need to,\nwhat did I call my rule, itprotv-lab?\n\n448\n00:23:26.100 --> 00:23:27.760\nThat's important,\nyou gotta remember what stuff's called.\n\n449\n00:23:27.760 --> 00:23:33.360\nSo I'm gonna say Add-DeployRule, and\nthen I need to give it that name.\n\n450\n00:23:33.360 --> 00:23:37.880\nAnd the name for mine was IT,\nit's actually right there on the screen\n\n451\n00:23:37.880 --> 00:23:39.500\nif I would bother to look\nright there on the screen.\n\n452\n00:23:39.500 --> 00:23:42.330\nSo I'm just gonna type in that name,\nand I am gonna add it.\n\n453\n00:23:42.330 --> 00:23:45.200\nSo now it's added, and it's active.\n\n454\n00:23:45.200 --> 00:23:48.641\nSo now the best way for us to test this\nis to fire up another host, right?\n\n455\n00:23:48.641 --> 00:23:52.810\nSo I've got another host, ESXHost03, which\nis just a bare metal machine, right, so\n\n456\n00:23:52.810 --> 00:23:54.492\nI don't have an OS installed on it.\n\n457\n00:23:54.492 --> 00:23:56.553\nIt's got a I think a 40\nGB hard drive in it.\n\n458\n00:23:56.553 --> 00:23:57.276\nIt's completely blank.\n\n459\n00:23:57.276 --> 00:23:58.512\nSo nothing on the hard drive.\n\n460\n00:23:58.512 --> 00:24:01.460\nAnd it is set to boot from the network.\n\n461\n00:24:01.460 --> 00:24:03.800\nNow, in your environment,\nyou'll have to go to your hardware and\n\n462\n00:24:03.800 --> 00:24:05.110\nfigure out the best way to do that.\n\n463\n00:24:05.110 --> 00:24:09.390\nYou can just go into BIOS and you can\nset network as up higher in the order.\n\n464\n00:24:09.390 --> 00:24:11.370\nAnd then it'll boot from network.\n\n465\n00:24:11.370 --> 00:24:13.220\nOr, you might have to\nhit a key combination.\n\n466\n00:24:13.220 --> 00:24:16.100\nIt might be one of those where it's like,\npress F12 to get a boot menu,\n\n467\n00:24:16.100 --> 00:24:19.900\nor press F2 or whatever other\ncrazy key combinations you've got.\n\n468\n00:24:19.900 --> 00:24:21.470\nSo read your vendor documentation.\n\n469\n00:24:21.470 --> 00:24:23.760\nFind out what it takes to boot\nyour machine off the network.\n\n470\n00:24:23.760 --> 00:24:26.930\nThen when you start to boot off the\nnetwork, things should happen pretty fast.\n\n471\n00:24:26.930 --> 00:24:29.500\nYou should see a little message\nabout booting from the network.\n\n472\n00:24:29.500 --> 00:24:34.260\nYou should see it get a DHCP address,\nand if everything's working right,\n\n473\n00:24:34.260 --> 00:24:37.202\nit should then reach out to the TFTP\nserver and kick off auto deploy.\n\n474\n00:24:37.202 --> 00:24:39.060\nAll right, so\nlet's see if that's working for me.\n\n475\n00:24:39.060 --> 00:24:41.590\nI'm going to fire my machine up,\nand here it goes.\n\n476\n00:24:41.590 --> 00:24:44.240\nAnd sure enough I see it's booting off\nwith a network boot from Intel E1000.\n\n477\n00:24:44.240 --> 00:24:45.720\nThat's my adaptor.\n\n478\n00:24:45.720 --> 00:24:51.360\nThey got an IP address from DACP, so\nI see that address, and now it's kicking\n\n479\n00:24:51.360 --> 00:24:55.420\noff a connection to the TFTP server,\nso it's reaching out to get a file.\n\n480\n00:24:55.420 --> 00:24:56.540\nAnd I see that right here.\n\n481\n00:24:56.540 --> 00:24:59.370\nThere's that kpxe.vmuw-hardwired only.\n\n482\n00:24:59.370 --> 00:25:01.800\nAnd then after that,\nyou saw the bootloader.\n\n483\n00:25:01.800 --> 00:25:03.380\nThe bootloader kicked in.\n\n484\n00:25:03.380 --> 00:25:08.760\nThen, the bootloader talked to vCenter and\nsaid hey, can you give me a copy of ESXi?\n\n485\n00:25:08.760 --> 00:25:11.380\nAnd that's where the server said,\nyeah, let me look.\n\n486\n00:25:11.380 --> 00:25:15.070\nI've got a deploy rule,\nthat says your IP is in this range, and\n\n487\n00:25:15.070 --> 00:25:17.820\nthat means you get the lab\nESX image profile.\n\n488\n00:25:17.820 --> 00:25:19.290\nSo here it is.\n\n489\n00:25:19.290 --> 00:25:22.510\nAnd now I'm getting\nthe LabESX image profile.\n\n490\n00:25:22.510 --> 00:25:23.150\nOkay.\n\n491\n00:25:23.150 --> 00:25:25.440\nBy default,\nit's gonna install it on my hard drive.\n\n492\n00:25:25.440 --> 00:25:27.940\nSo I didn't configure state or\nany of that other crazy stuff, so\n\n493\n00:25:27.940 --> 00:25:28.890\nit would run from RAM.\n\n494\n00:25:28.890 --> 00:25:31.210\nIt's gonna install it on my hard drive and\nso that's what it's doing.\n\n495\n00:25:31.210 --> 00:25:34.700\nIt's loading that and\ngetting it put on my system.\n\n496\n00:25:34.700 --> 00:25:37.750\nNow, if I jump back over to my server,\n\n497\n00:25:37.750 --> 00:25:42.020\nhere's my TFTP server running in the\nbackground, and if I look at the logs for\n\n498\n00:25:42.020 --> 00:25:44.970\nmy TFTP server I can\nsee where it connected.\n\n499\n00:25:44.970 --> 00:25:48.590\nAnd what you're gonna see in the logs for\nTFTP is kind of interesting because\n\n500\n00:25:48.590 --> 00:25:50.360\nit will actually look\nlike a bunch of failures.\n\n501\n00:25:50.360 --> 00:25:51.940\nIt's kind of funny.\n\n502\n00:25:51.940 --> 00:25:53.730\nWell, if you find this stuff funny.\n\n503\n00:25:53.730 --> 00:25:56.460\nSo what you'll see is where\nit does a test connection.\n\n504\n00:25:56.460 --> 00:25:58.810\nIt just tries to touch it to\nmake sure the file exists.\n\n505\n00:25:58.810 --> 00:26:05.200\nSo see, I've got this call right here for\nthat UNDIonly.kpxc.dwm hardwire.\n\n506\n00:26:05.200 --> 00:26:07.140\nAnd I would actually send 82 blocks.\n\n507\n00:26:08.390 --> 00:26:10.260\nHere we go.\n\n508\n00:26:10.260 --> 00:26:11.260\nTFTP aborted.\n\n509\n00:26:11.260 --> 00:26:12.570\nRight?\nSee this error?\n\n510\n00:26:12.570 --> 00:26:15.760\nYou'll see those because it's just\ntesting to see if the file exists.\n\n511\n00:26:15.760 --> 00:26:17.650\nAnd TFTP doesn't have a way to do that.\n\n512\n00:26:17.650 --> 00:26:20.960\nSo the way to test it is you try and\ndownload it and then you stop immediately.\n\n513\n00:26:20.960 --> 00:26:24.080\nAnd if you fail on that first byte,\nthen you know it didn't work and\n\n514\n00:26:24.080 --> 00:26:25.500\nyou don't have to wait for more.\n\n515\n00:26:25.500 --> 00:26:28.880\nBut if you continue to try and download\nthan you have these repeating failures and\n\n516\n00:26:28.880 --> 00:26:30.290\nyou have to wait on the server,\nit causes a delay.\n\n517\n00:26:30.290 --> 00:26:32.810\nSo it's faster for\nthem to abort than it is for\n\n518\n00:26:32.810 --> 00:26:34.980\nthem to actually try to do\nthe download immediately.\n\n519\n00:26:34.980 --> 00:26:37.650\nSo that's what it does just to test and\nsee if it works, and\n\n520\n00:26:37.650 --> 00:26:40.590\nif it does, then it actually goes and\ndownloads it.\n\n521\n00:26:40.590 --> 00:26:42.420\nAnd so\nthat's what it downloaded from here.\n\n522\n00:26:42.420 --> 00:26:46.780\nBut as I look at the logs, notice that\nit's only that hardware wired file.\n\n523\n00:26:46.780 --> 00:26:48.510\nI don't see anything else.\n\n524\n00:26:48.510 --> 00:26:51.540\nThat's the only file we get from TFTP.\n\n525\n00:26:51.540 --> 00:26:55.840\nAfter we've connected and hit the boot\nloader, now it's able to talk to vCenter\n\n526\n00:26:55.840 --> 00:26:58.970\ndirectly and\ntransfer the files through auto deploy.\n\n527\n00:26:58.970 --> 00:27:00.770\nSo it's not using the TFTP server anymore.\n\n528\n00:27:00.770 --> 00:27:02.610\nThat was just to kick things off.\n\n529\n00:27:02.610 --> 00:27:06.250\nNow we're talking to vCenter and\nthe deployment is happening.\n\n530\n00:27:06.250 --> 00:27:09.100\nNow, I'll actually be\nable to see some of that.\n\n531\n00:27:09.100 --> 00:27:11.080\nWell, we can sit here and wait for this.\n\n532\n00:27:11.080 --> 00:27:13.770\nThere's actually two stages, which I don't\nknow which stage were now cuz I wasn't\n\n533\n00:27:13.770 --> 00:27:16.900\npaying attention, but it'll do one set\nof files where the yellow bar will go\n\n534\n00:27:16.900 --> 00:27:20.430\nall the way across, and\nthat's like getting the base OS in place.\n\n535\n00:27:20.430 --> 00:27:22.890\nAnd then it kind of does a soft\nboot in the background, and\n\n536\n00:27:22.890 --> 00:27:25.470\nyou'll see this bar go across a second\ntime as it loads the rest of VSX.\n\n537\n00:27:25.470 --> 00:27:26.727\nSo there's two stages.\n\n538\n00:27:26.727 --> 00:27:30.125\nIn the first stage we really\ndon't see anything in vCenter.\n\n539\n00:27:30.125 --> 00:27:34.125\nIn the second stage, it actually shows\nup in vCenter and we can see it.\n\n540\n00:27:34.125 --> 00:27:38.025\nAnd I'm definitely in the second\nstage now cuz ESXi is booting.\n\n541\n00:27:38.025 --> 00:27:41.345\nNow it's actually booting ESXi\n\n542\n00:27:41.345 --> 00:27:43.885\nfrom the image that it just\ndownloaded from the server.\n\n543\n00:27:43.885 --> 00:27:46.005\nAnd even better,\nif I go back to vCenter and\n\n544\n00:27:46.005 --> 00:27:49.075\nrefresh my screen here,\nnot sure if it'll show up just yet.\n\n545\n00:27:49.075 --> 00:27:50.840\nYeah, we'll give it a minute.\n\n546\n00:27:50.840 --> 00:27:54.190\nIn just a minute,\nI'll see a new entry show up in here.\n\n547\n00:27:54.190 --> 00:27:57.180\nAnd it will be that host\nidentified by its IP address.\n\n548\n00:27:57.180 --> 00:28:00.880\nSo it will show up here as an IP address,\nbut the important part there\n\n549\n00:28:00.880 --> 00:28:04.710\nis not only does the server show up,\nit's already added to vCenter.\n\n550\n00:28:04.710 --> 00:28:08.530\nIf I had a default host profile attached,\nit can go ahead and get attached and\n\n551\n00:28:08.530 --> 00:28:12.710\nget configured and be ready to go\nwithout me touching a single thing.\n\n552\n00:28:12.710 --> 00:28:14.370\nBut I didn't spend a lot\nof time customizing it.\n\n553\n00:28:14.370 --> 00:28:15.770\nSo there's gonna be some problems.\n\n554\n00:28:15.770 --> 00:28:20.110\nCommon problems that we'll see,\nthe memory dump area.\n\n555\n00:28:20.110 --> 00:28:21.900\nBecause I didn't know what hard\ndrives the machine would have,\n\n556\n00:28:21.900 --> 00:28:23.160\nI didn't define a memory dump area.\n\n557\n00:28:23.160 --> 00:28:25.780\nSo it's gonna complain and\nsay memory dumps don't work.\n\n558\n00:28:25.780 --> 00:28:28.140\nIt's also gonna complain and\nsay no data stores.\n\n559\n00:28:28.140 --> 00:28:30.940\nIf I deployed it into a cluster,\nit would get data storage from there, but\n\n560\n00:28:30.940 --> 00:28:32.910\notherwise it just doesn't have any so\nI'll get a warning for that.\n\n561\n00:28:32.910 --> 00:28:34.650\nThere will be a few other\nlittle warnings like that,\n\n562\n00:28:34.650 --> 00:28:38.000\nmostly that we can ignore, but it just\nmeans we need to customize it more.\n\n563\n00:28:38.000 --> 00:28:41.530\nIf I customize that image profile more,\nwe can get it completely seamless,\n\n564\n00:28:41.530 --> 00:28:42.990\nwhere it deploys with no errors,\n\n565\n00:28:42.990 --> 00:28:45.080\neverything is ready to go,\nit's ready to tie it into production.\n\n566\n00:28:45.080 --> 00:28:46.980\nIt's all about how much\ntime you spend with it.\n\n567\n00:28:46.980 --> 00:28:49.200\nAnd that's why if you're\ndoing five deployments or\n\n568\n00:28:49.200 --> 00:28:51.660\nten deployments,\nyou probably just do them by hand.\n\n569\n00:28:51.660 --> 00:28:52.580\nIt's easier.\n\n570\n00:28:52.580 --> 00:28:54.200\nBut if you're doing\na thousand deployments,\n\n571\n00:28:54.200 --> 00:28:56.850\nyeah we gotta spend a little more time\ncustomizing that image, but once you do,\n\n572\n00:28:56.850 --> 00:29:01.110\nyou'll get more stable images that are\nstreamlined down to just what you need,\n\n573\n00:29:01.110 --> 00:29:03.140\nthat are fast, easy deployment, and\n\n574\n00:29:03.140 --> 00:29:05.990\nyou can knock out a thousand\nservers in under an hour.\n\n575\n00:29:05.990 --> 00:29:07.440\nI mean,\nyou can really knock those out quick,\n\n576\n00:29:07.440 --> 00:29:08.810\ncuz you're just hitting power button.\n\n577\n00:29:08.810 --> 00:29:12.380\nWell, somebody's gonna take the time\nto unbox them to put them on the rack,\n\n578\n00:29:12.380 --> 00:29:13.415\nright but that's not us.\n\n579\n00:29:13.415 --> 00:29:15.660\n[LAUGH] As long as we don't\nhave to do that, that's fine.\n\n580\n00:29:15.660 --> 00:29:18.180\nSo, all right looks like that\nbox is fully booted now.\n\n581\n00:29:18.180 --> 00:29:22.070\nSo I'm gonna go back over here and\nrefresh my vCenter and hopefully,\n\n582\n00:29:22.070 --> 00:29:25.080\nthere we go, I had me doubting for\na moment there.\n\n583\n00:29:25.080 --> 00:29:29.670\nI can see that extra host has appeared,\nand I didn't tell it that it was gonna\n\n584\n00:29:29.670 --> 00:29:33.250\nbe called esx03, so it didn't know to\nchange the name that's why it's the IP.\n\n585\n00:29:33.250 --> 00:29:39.130\nBut it's got it added in and if I go to\nmy summary I do have some warnings and\n\n586\n00:29:39.130 --> 00:29:43.390\nhere you see core dump is complaining\nabout that, no data stores.\n\n587\n00:29:43.390 --> 00:29:46.350\nThe default password for\nthe root users not been changed, right.\n\n588\n00:29:46.350 --> 00:29:47.610\nCuz I never told any password.\n\n589\n00:29:47.610 --> 00:29:49.270\nI should have done that\nin the configuration.\n\n590\n00:29:49.270 --> 00:29:51.680\nAnd the system logs are just\nstored in non-persistent storage.\n\n591\n00:29:51.680 --> 00:29:52.780\nIt's stored in RAM.\n\n592\n00:29:52.780 --> 00:29:54.970\nBecause it didn't know it\nhas any hard drives, right.\n\n593\n00:29:54.970 --> 00:29:57.300\nIf you don't have any hard drive, you\ncan't store it in persistent storage, so\n\n594\n00:29:57.300 --> 00:29:58.070\nit's warning me about that.\n\n595\n00:29:58.070 --> 00:29:59.630\nThose are couple of warnings we get.\n\n596\n00:29:59.630 --> 00:30:01.520\nWe could certainly configure around that.\n\n597\n00:30:01.520 --> 00:30:04.250\nBut the key thing is if I have\na host profile, I can come in and\n\n598\n00:30:04.250 --> 00:30:07.310\nattach a host profile to this guy, right?\n\n599\n00:30:07.310 --> 00:30:11.930\nAnd if I attach a host profile, now it\ncan be fully configured, and we're done.\n\n600\n00:30:11.930 --> 00:30:13.390\nThis machine's ready to go.\n\n601\n00:30:13.390 --> 00:30:15.950\nYou can rapidly deploy\nmachines very quickly, and\n\n602\n00:30:15.950 --> 00:30:17.770\nthat's the awesome part about auto deploy.\n\n603\n00:30:17.770 --> 00:30:19.630\nIt's a really neat system and\nit does work really well.\n\n604\n00:30:19.630 --> 00:30:22.190\n>> I'll tell you what it\nsaves the salaried employees.\n\n605\n00:30:22.190 --> 00:30:25.740\nNot to good for the hourly employees, you\njust knocked some of their paycheck down,\n\n606\n00:30:25.740 --> 00:30:28.690\nbut, Don, it does look like we're coming\nto the end of another great episode here.\n\n607\n00:30:28.690 --> 00:30:32.690\nBut before we do, when it comes to the\ncontent, do you have any additional words?\n\n608\n00:30:32.690 --> 00:30:35.700\n>> For the exam, make sure you familiarize\nyourself with the power CLI commands.\n\n609\n00:30:35.700 --> 00:30:37.740\nI showed you the important ones,\nthere's not that many of them,\n\n610\n00:30:37.740 --> 00:30:40.820\njust make sure you understand the format\nand what data is being provided.\n\n611\n00:30:40.820 --> 00:30:43.950\nIn real life land, don't hesitate\nto use the online repository.\n\n612\n00:30:43.950 --> 00:30:48.120\nAlmost every website out there will tell\nyou to use an offline repository just cuz\n\n613\n00:30:48.120 --> 00:30:52.610\nit's easier, but you can get the latest\nfiles right from VMware very easily.\n\n614\n00:30:52.610 --> 00:30:53.680\nI prefer to go that route.\n\n615\n00:30:53.680 --> 00:30:54.760\nIt is a little bit harder.\n\n616\n00:30:54.760 --> 00:30:56.960\nI think it's a better solution.\n\n617\n00:30:56.960 --> 00:30:58.930\nWay it works for you.\n\n618\n00:30:58.930 --> 00:31:02.180\nAnd then the other thing is, just because\nauto deploy is neat and works really well,\n\n619\n00:31:02.180 --> 00:31:03.320\ndoesn't mean you have to use it.\n\n620\n00:31:03.320 --> 00:31:05.500\nUnderstand that sometimes it's\nokay to do things manually.\n\n621\n00:31:05.500 --> 00:31:08.740\nI can install an ESX server\nby hand pretty quickly\n\n622\n00:31:08.740 --> 00:31:10.310\nwithout having to set up\nall this infrastructure.\n\n623\n00:31:10.310 --> 00:31:13.815\nSo, don't feel like you have to use\nthe technology just because it's there.\n\n624\n00:31:13.815 --> 00:31:14.505\n>> Well done.\n\n625\n00:31:14.505 --> 00:31:16.905\nAs always, we appreciate having\nyou here in the studios with us.\n\n626\n00:31:16.905 --> 00:31:18.865\nAnd we appreciate you,\nthe viewers, for watching.\n\n627\n00:31:18.865 --> 00:31:21.495\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n628\n00:31:21.495 --> 00:31:22.385\n>> And I'm Don Pisset.\n\n629\n00:31:22.385 --> 00:31:26.220\n>> And we'll see you next time.\n\n630\n00:31:26.220 --> 00:31:32.840\n[SOUND]\n\n",
          "vimeoId": "169849895"
        },
        {
          "description": "In this episode, Wes and Don demonstrate configurations and settings control through host profiles in vCenter. They discuss some of the various settings that can be configured and the benefits of using host profiles. They explain the creation and application of a host profile to an ESXi host.",
          "length": "2224",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-5-host_profiles-060616-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-5-host_profiles-060616-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-5-host_profiles-060616-1-sm.jpg",
          "title": "Host Profiles",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.770 --> 00:00:14.341\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.341 --> 00:00:15.730\nI'm your host, Wes Bryan.\n\n4\n00:00:15.730 --> 00:00:19.350\nAnd in today's episode, we're continuing\nthrough our series in VMWare.\n\n5\n00:00:19.350 --> 00:00:23.080\nMore specifically, we're looking at the\nVMWare certified professional version six,\n\n6\n00:00:23.080 --> 00:00:25.360\nand we're looking at installing vSphere.\n\n7\n00:00:25.360 --> 00:00:27.890\nJoining me in the studios today is\nnone other than Mr. Don Pizzet.\n\n8\n00:00:27.890 --> 00:00:28.990\nDon, how are you doing sir?\n\n9\n00:00:28.990 --> 00:00:29.710\n>> I'm doing great, Wes.\n\n10\n00:00:29.710 --> 00:00:32.980\nReady to dive right back in to getting\nvSphere set up in our environments.\n\n11\n00:00:32.980 --> 00:00:36.470\nAnd in this episode we're gonna\nbe tackling host profiles.\n\n12\n00:00:36.470 --> 00:00:39.170\nAnd I know what you might be thinking is\nwait a minute Don, didn't we talk about\n\n13\n00:00:39.170 --> 00:00:43.120\nhost profiles just an episode or two ago\nand the short answer is yes, yes we did.\n\n14\n00:00:43.120 --> 00:00:44.900\nBut want to do it really briefly.\n\n15\n00:00:44.900 --> 00:00:47.920\nWe've got a quick chance to see\nwhat host profiles were and\n\n16\n00:00:47.920 --> 00:00:49.930\nto apply them really briefly.\n\n17\n00:00:49.930 --> 00:00:52.570\nWhat I want to do in this episode is\nto spend a little more time on them\n\n18\n00:00:52.570 --> 00:00:54.320\nbecause they are actually\nvery powerful things.\n\n19\n00:00:54.320 --> 00:00:57.250\nThanks to their compliance and\nremediation functionality.\n\n20\n00:00:57.250 --> 00:00:58.990\nSo I want to demonstrate that and show it.\n\n21\n00:00:58.990 --> 00:01:00.720\nI didn't have time in the other episode so\n\n22\n00:01:00.720 --> 00:01:04.460\nthis time now I've got whole 30 minutes\nfor me so lets jump in and do it right.\n\n23\n00:01:04.460 --> 00:01:07.160\nSo lets recap what we already\nknow about host profiles.\n\n24\n00:01:07.160 --> 00:01:10.930\nOr what we don't know if this is the first\nepisode that you're tuning into.\n\n25\n00:01:10.930 --> 00:01:16.970\nA host profile is a basically a collection\nof settings for an ESXi host.\n\n26\n00:01:16.970 --> 00:01:20.480\nWhen you install ESXi it's got\na bunch of default settings right.\n\n27\n00:01:20.480 --> 00:01:25.140\nIf you just pop in the CD and click next\na bunch of times it's gonna install it and\n\n28\n00:01:25.140 --> 00:01:27.570\nyou're gonna have a host\nname of local host.\n\n29\n00:01:27.570 --> 00:01:30.680\nYou're going to have a default\ndata store called, data store.\n\n30\n00:01:30.680 --> 00:01:33.630\nYou're going to have SSH disabled.\n\n31\n00:01:33.630 --> 00:01:35.470\nYou're going to have NTP not configured.\n\n32\n00:01:35.470 --> 00:01:38.840\nYou're going to have all these different\nthings that are the default as they're set\n\n33\n00:01:38.840 --> 00:01:41.940\nby the folks at VMWare that\nmade the install disk.\n\n34\n00:01:41.940 --> 00:01:43.550\nAnd that might be fine for you.\n\n35\n00:01:43.550 --> 00:01:47.230\nBut if you're about to roll out hundreds,\nor even thousands,\n\n36\n00:01:47.230 --> 00:01:50.460\nor maybe even tens of ESXi hosts.\n\n37\n00:01:50.460 --> 00:01:55.970\nWouldn't it be nice if we could come\nup with a consistent set of options and\n\n38\n00:01:55.970 --> 00:01:58.760\nrole that out easily to\nthe virtual machines?\n\n39\n00:01:58.760 --> 00:02:00.650\nWell there's actually two ways to do it.\n\n40\n00:02:00.650 --> 00:02:03.890\nOne way is to use a technology called\nauto deploy that we're gonna see\n\n41\n00:02:03.890 --> 00:02:04.890\nin another episode.\n\n42\n00:02:04.890 --> 00:02:08.090\nWith auto deploy you can\nactually make a custom ISO image.\n\n43\n00:02:08.090 --> 00:02:12.090\nYou can make an ISO of ESSI, let's see how\nmany acronyms I can throw into this thing.\n\n44\n00:02:12.090 --> 00:02:14.640\nSo that when we do the install,\n\n45\n00:02:14.640 --> 00:02:16.260\nit's already got everything\nset the way we want it.\n\n46\n00:02:16.260 --> 00:02:18.020\nIt's baked into that disk.\n\n47\n00:02:18.020 --> 00:02:21.390\nBut that kinda takes a little bit of\neffort and we have to build it up.\n\n48\n00:02:21.390 --> 00:02:24.140\nBut an easier method, one that works for\n\n49\n00:02:24.140 --> 00:02:27.370\nnew installs as well as existing installs,\nis a host profile.\n\n50\n00:02:27.370 --> 00:02:29.800\nThat installation image that\nyou make with auto deploy,\n\n51\n00:02:29.800 --> 00:02:32.080\nthat works when you deploy the host.\n\n52\n00:02:32.080 --> 00:02:34.290\nWhat do you do once it's already deployed,\nright?\n\n53\n00:02:34.290 --> 00:02:40.020\nLet's say that I decide I wanna enable\nSSH on all of my VMWare ESXi boxes.\n\n54\n00:02:40.020 --> 00:02:43.880\nSo I set that up and I build an ISO\nimage that has it enabled by default and\n\n55\n00:02:43.880 --> 00:02:45.195\nI distribute it.\n\n56\n00:02:45.195 --> 00:02:47.855\nThen one day Wes comes along and\nhe logs into a machine and\n\n57\n00:02:47.855 --> 00:02:50.625\nhe's like why is SSH enabled and\nhe turns it off.\n\n58\n00:02:50.625 --> 00:02:53.940\nWell, that's it auto deploy takes\neffect when you deploy the host.\n\n59\n00:02:53.940 --> 00:02:57.025\nI'd have to re deploy the host\nwhich you certainly could do but\n\n60\n00:02:57.025 --> 00:03:00.615\nthat would mean reinstalling on\nthat host and bringing it back up.\n\n61\n00:03:00.615 --> 00:03:02.305\nIt's not necessarily what we want to do.\n\n62\n00:03:02.305 --> 00:03:05.010\nSo with a host profile\nthat's our other option.\n\n63\n00:03:05.010 --> 00:03:06.760\nWith a host profile,\nI create a collection of settings.\n\n64\n00:03:06.760 --> 00:03:09.870\nAnd one of those settings\nmight be SSH enabled.\n\n65\n00:03:09.870 --> 00:03:15.281\nAnd now, I can apply that host profile\nto brand-new machines that just came up.\n\n66\n00:03:15.281 --> 00:03:18.750\nOr hosts that have been on for years, that\nhave just been sitting there and running.\n\n67\n00:03:18.750 --> 00:03:20.320\nAnd I have no idea what state they're at.\n\n68\n00:03:20.320 --> 00:03:22.290\nI can apply the host profile.\n\n69\n00:03:22.290 --> 00:03:26.260\nAnd now, if I want SSH enabled, and\nit's disabled, it'll turn it on.\n\n70\n00:03:26.260 --> 00:03:29.620\nAnd then if somebody comes along\nlike Wes comes along and says,\n\n71\n00:03:29.620 --> 00:03:31.080\nwhy is SSH enabled I'm\ngonna turn that off.\n\n72\n00:03:31.080 --> 00:03:32.230\nAnd he turns it off.\n\n73\n00:03:32.230 --> 00:03:37.360\nWell, in V center, I'll be able to\nrun through all my host profiles and\n\n74\n00:03:37.360 --> 00:03:39.460\ncheck for what's called compliance.\n\n75\n00:03:39.460 --> 00:03:42.680\nAnd with compliance,\nit looks at all the hosts and\n\n76\n00:03:42.680 --> 00:03:46.890\nit makes sure that they don't deviate from\nthe host profile we've attached to them.\n\n77\n00:03:46.890 --> 00:03:48.519\nIf they do deviate, we'll see it,\nwe'll get a warning message.\n\n78\n00:03:48.519 --> 00:03:51.673\nIt'll say,\nwait a minute this is not right.\n\n79\n00:03:51.673 --> 00:03:53.160\nAnd now we can remediate it.\n\n80\n00:03:53.160 --> 00:03:56.160\nAnd, by remediate it, I don't mean\nI've gotta go to that machine and\n\n81\n00:03:56.160 --> 00:03:57.070\napply the setting.\n\n82\n00:03:57.070 --> 00:03:59.930\nI mean I click a little button\nthat says remediate, and\n\n83\n00:03:59.930 --> 00:04:01.580\nit tells the machine to correct itself.\n\n84\n00:04:01.580 --> 00:04:02.930\nNow the machine corrects itself.\n\n85\n00:04:02.930 --> 00:04:04.780\nAnd it's configured back\nthe way we want it.\n\n86\n00:04:04.780 --> 00:04:08.490\nSo host profiles give us\nthree big advantages right.\n\n87\n00:04:08.490 --> 00:04:13.340\nAdvantage number one is that we can\nconsistently deploy ESXi hosts.\n\n88\n00:04:13.340 --> 00:04:17.716\nThat every time we role these hosts out\nthere we know they're set up the same way\n\n89\n00:04:17.716 --> 00:04:19.870\ncuz we reuse this host profile.\n\n90\n00:04:19.870 --> 00:04:22.610\nIt's not like I had 20 settings and\nmaybe I forgot one or two or\n\n91\n00:04:22.610 --> 00:04:24.370\nI did a typo here or there.\n\n92\n00:04:24.370 --> 00:04:25.600\nIt's going to be set the right way.\n\n93\n00:04:25.600 --> 00:04:26.440\nSo that's number one.\n\n94\n00:04:26.440 --> 00:04:29.590\nConsistency of deployment.\n\n95\n00:04:29.590 --> 00:04:31.440\nNumber two, monitoring.\n\n96\n00:04:31.440 --> 00:04:34.850\nWe can monitor our host to see when\nthey deviate from that setting.\n\n97\n00:04:34.850 --> 00:04:35.720\nRight?\nSo we have compliance.\n\n98\n00:04:35.720 --> 00:04:39.930\nSo we get that way to see when something\nchanges versus maybe not knowing it.\n\n99\n00:04:39.930 --> 00:04:43.610\nWes might turn off my SSH on the SSI\nhost and I might not notice it for\n\n100\n00:04:43.610 --> 00:04:45.870\nmonths until the next time\nI actually need to use it.\n\n101\n00:04:45.870 --> 00:04:46.940\nAnd like, why isn't this working.\n\n102\n00:04:46.940 --> 00:04:49.950\nAnd of course that'll be the critical\nmoment when I really need it.\n\n103\n00:04:49.950 --> 00:04:50.890\nAnd it's not gonna work.\n\n104\n00:04:50.890 --> 00:04:52.270\nRight?\n\n105\n00:04:52.270 --> 00:04:54.220\nWe certainly don't want that.\n\n106\n00:04:54.220 --> 00:04:57.880\nAnd then three, it gives us\nthe ability to quickly remediate.\n\n107\n00:04:57.880 --> 00:05:02.440\nSo if it has been changed I'm just\na button away from putting it back and\n\n108\n00:05:02.440 --> 00:05:04.460\ngetting it put back in place and\ngetting it running again.\n\n109\n00:05:04.460 --> 00:05:06.570\nSo it's a really\nconvenient set of systems.\n\n110\n00:05:06.570 --> 00:05:09.330\n>> Now Don you've been mentioning\nthat host profiles contain settings.\n\n111\n00:05:09.330 --> 00:05:11.980\nWhen it comes to settings or\nconfigurations what kind of settings can\n\n112\n00:05:11.980 --> 00:05:14.970\nwe expect to see inside of the host\nprofile that you can configure?\n\n113\n00:05:14.970 --> 00:05:16.960\n>> There's actually quite a bit.\n\n114\n00:05:16.960 --> 00:05:20.020\nNow really,\nI don't want to be smug I guess,\n\n115\n00:05:20.020 --> 00:05:23.290\nbut anything you can configure in ESXi\nyou can put in a host profile right?\n\n116\n00:05:23.290 --> 00:05:24.630\nSo it's pretty much everything.\n\n117\n00:05:24.630 --> 00:05:27.400\nBut realistically that's not\nnormally gonna happen, right?\n\n118\n00:05:27.400 --> 00:05:30.700\nBecause on a ESXi box is all\nthat unique information.\n\n119\n00:05:30.700 --> 00:05:32.130\nFor example, hosting.\n\n120\n00:05:32.130 --> 00:05:36.410\nI don't want all of my ESXi boxes to\nhave the exact same host name, do I?\n\n121\n00:05:36.410 --> 00:05:37.470\nSo, if I did,\n\n122\n00:05:37.470 --> 00:05:42.360\nif they all had the same host name, how\nwould I tell one box apart from another?\n\n123\n00:05:42.360 --> 00:05:45.280\nSo if I put that in the host profile,\n\n124\n00:05:45.280 --> 00:05:50.650\nI would have to have a separate host\nprofile for every single ESXi host.\n\n125\n00:05:50.650 --> 00:05:52.050\nNow, you can do that, right?\n\n126\n00:05:52.050 --> 00:05:53.370\nThere's no reason you can't.\n\n127\n00:05:53.370 --> 00:05:54.480\nYou can do that.\n\n128\n00:05:54.480 --> 00:05:57.970\nThe only challenge there becomes\nif you wanna update it, right?\n\n129\n00:05:57.970 --> 00:06:01.990\nSo maybe I decide, hey, I'm gonna\nstart using a different update server.\n\n130\n00:06:01.990 --> 00:06:03.856\nAnd I've got that defining\nmy host profiles.\n\n131\n00:06:03.856 --> 00:06:05.870\nI've got 100 host and 100 host profiles.\n\n132\n00:06:05.870 --> 00:06:11.880\nIf I want to push out a new update\nURL I've got to go and modify it.\n\n133\n00:06:11.880 --> 00:06:15.550\nEveryone of those host profiles to reflect\nit and it takes a lot of work, right.\n\n134\n00:06:15.550 --> 00:06:19.630\nAnd we do have some command line\nutility from VMWare like the power CLI.\n\n135\n00:06:19.630 --> 00:06:23.160\nYou can go and download the power CLI\nfrom VMWare as part of the STK and\n\n136\n00:06:23.160 --> 00:06:24.890\nyou can modify host profiles in bulk.\n\n137\n00:06:24.890 --> 00:06:26.571\nThat makes a little bit less painful.\n\n138\n00:06:26.571 --> 00:06:29.800\nBut, with the GUI tools, it's a nightmare.\n\n139\n00:06:29.800 --> 00:06:31.450\nYou'd have to go through and\nedit every one.\n\n140\n00:06:31.450 --> 00:06:34.179\nSo, if we can have a single\nshared host profile,\n\n141\n00:06:34.179 --> 00:06:39.470\nacross our ESXi host set, that becomes\nreally convenient, really easy, right.\n\n142\n00:06:39.470 --> 00:06:40.630\nBut, it doesn't give us the flexibility.\n\n143\n00:06:40.630 --> 00:06:41.960\nSo, you gotta find a balance.\n\n144\n00:06:41.960 --> 00:06:43.510\nSo normally,\nwhat you'll do is you'll say all right,\n\n145\n00:06:43.510 --> 00:06:45.920\nI've got a cluster of ESXi boxes.\n\n146\n00:06:45.920 --> 00:06:47.140\nThey're going to have one configuration.\n\n147\n00:06:47.140 --> 00:06:50.070\nAnd I have another cluster over here and\nthey have their own configuration.\n\n148\n00:06:50.070 --> 00:06:53.720\nSo you have multiple configuration,\nmultiple host profiles.\n\n149\n00:06:53.720 --> 00:06:56.940\nBut you don't have a one to one\nratio between host and profiles.\n\n150\n00:06:56.940 --> 00:06:59.700\nSo then we can go inside\nof the host profile,\n\n151\n00:06:59.700 --> 00:07:01.860\nthen we can start to adjust settings,\nright?\n\n152\n00:07:01.860 --> 00:07:03.900\nUsually things that are not\ngoing to be unique.\n\n153\n00:07:03.900 --> 00:07:06.520\nWe don't wanna configure an IP address\nbecause every machine needs their\n\n154\n00:07:06.520 --> 00:07:07.110\nown IP address.\n\n155\n00:07:07.110 --> 00:07:09.380\nWe don't wanna configure a host name,\nright?\n\n156\n00:07:09.380 --> 00:07:11.895\nBut things that we can configure.\n\n157\n00:07:11.895 --> 00:07:13.655\nThings like the data source.\n\n158\n00:07:13.655 --> 00:07:14.795\nI mentioned SSH, right?\n\n159\n00:07:14.795 --> 00:07:17.885\nSo all of the services, whether\nthe services are enabled or disabled.\n\n160\n00:07:17.885 --> 00:07:20.805\nThe Firewall inside of ESXi,\nwe can turn that on and off.\n\n161\n00:07:20.805 --> 00:07:23.105\nWe can open ports and\nclose ports inside of the Firewall.\n\n162\n00:07:23.105 --> 00:07:25.025\nSo that's easy enough to do.\n\n163\n00:07:25.025 --> 00:07:26.810\nI mentioned update URL.\n\n164\n00:07:26.810 --> 00:07:29.860\nPretty much everything inside of\nthe networking and security and\n\n165\n00:07:29.860 --> 00:07:30.940\nconfiguration settings.\n\n166\n00:07:30.940 --> 00:07:33.240\nInside of ESXi you can adjust and\nconfigure and\n\n167\n00:07:33.240 --> 00:07:35.340\nmake them part of that host profile.\n\n168\n00:07:35.340 --> 00:07:39.070\nAnd that's gonna give us that\nconsistent stabled deployment.\n\n169\n00:07:39.070 --> 00:07:42.480\nJust be on the look out for those unique\nsettings because they are there and\n\n170\n00:07:42.480 --> 00:07:43.369\nyou will see them.\n\n171\n00:07:43.369 --> 00:07:45.580\nAnd you might wanna remove\nthem to get them out of there.\n\n172\n00:07:45.580 --> 00:07:46.110\nAll right.\n\n173\n00:07:46.110 --> 00:07:47.980\nSo, it's kinda up to you.\n\n174\n00:07:47.980 --> 00:07:52.550\nNow once we create a host profile\nyou create it inside of vCenter.\n\n175\n00:07:52.550 --> 00:07:55.281\nSo we're gonna go into vCenter\nwe're gonna build a host profile.\n\n176\n00:07:55.281 --> 00:07:57.699\nUsually you don't build it from\nscratch you normally start with like\n\n177\n00:07:57.699 --> 00:07:58.499\na reference machine.\n\n178\n00:07:58.499 --> 00:08:02.305\nYou take one ESXi box You get it\nconfigured exactly the way you want, and\n\n179\n00:08:02.305 --> 00:08:03.967\nyou use that as the reference.\n\n180\n00:08:03.967 --> 00:08:07.190\nYou create the host profile\nbased on that first machine.\n\n181\n00:08:07.190 --> 00:08:09.150\nThen you can edit the profile\nat your hearts content.\n\n182\n00:08:09.150 --> 00:08:11.530\nYou don't have to go back\nto one machine again.\n\n183\n00:08:11.530 --> 00:08:12.570\nYou can edit the profile,\n\n184\n00:08:12.570 --> 00:08:14.695\nyou get it created the way you want and\nthen you can roll it out.\n\n185\n00:08:14.695 --> 00:08:16.615\nIt works really well.\n\n186\n00:08:16.615 --> 00:08:19.265\nBut, what if you have more\nthan one vCenter server?\n\n187\n00:08:19.265 --> 00:08:24.285\nWell, if you've got more than one vCenter\nserver, the profiles exist in vCenter and\n\n188\n00:08:24.285 --> 00:08:26.225\nthey're not shared by default.\n\n189\n00:08:26.225 --> 00:08:28.775\nSo we may need to export them,\nand you can export them.\n\n190\n00:08:28.775 --> 00:08:30.565\nWe can dump them out to a text file.\n\n191\n00:08:30.565 --> 00:08:34.075\nIt's not true XML but\nit's something kind of close.\n\n192\n00:08:34.075 --> 00:08:36.125\nSo it's a big jumbo mess,\nreally, but you can read it.\n\n193\n00:08:36.125 --> 00:08:37.300\nIt's human readable.\n\n194\n00:08:37.300 --> 00:08:39.500\nYou can generate this little text files,\nand\n\n195\n00:08:39.500 --> 00:08:43.290\nthe text files contain all the settings or\npart of that host profiles.\n\n196\n00:08:43.290 --> 00:08:47.280\nSo we can export from one vCenter and\nimport it to another.\n\n197\n00:08:47.280 --> 00:08:49.710\nSo if you have a production\nvCenter deployment and\n\n198\n00:08:49.710 --> 00:08:51.390\na disaster recovery vCenter deployment.\n\n199\n00:08:51.390 --> 00:08:54.230\nIt's really easy to move these\nthings back and forth between them.\n\n200\n00:08:54.230 --> 00:08:57.000\nAgain, it's all about convenience and\nconsistency.\n\n201\n00:08:57.000 --> 00:08:58.990\nAll right, and\nwe'll see exporting a little bit later.\n\n202\n00:08:58.990 --> 00:09:04.170\nSo those are some of the big things\nthat we've got with Host Profiles and\n\n203\n00:09:04.170 --> 00:09:05.530\nI know I covered them briefly.\n\n204\n00:09:05.530 --> 00:09:08.540\nWe kind of got them out there.\n\n205\n00:09:08.540 --> 00:09:10.700\nThe way I used it in the other episode.\n\n206\n00:09:10.700 --> 00:09:13.690\nWhat I was doing it there for\nwas rapid deployment.\n\n207\n00:09:13.690 --> 00:09:16.800\nIf I knew I was gonna be\ndeploying a hundred ESXI boxes,\n\n208\n00:09:16.800 --> 00:09:19.200\nand I wanted them all configured quickly.\n\n209\n00:09:19.200 --> 00:09:22.050\nI would just deploy them\nwith a default install.\n\n210\n00:09:22.050 --> 00:09:24.780\nSet them with a root password that I knew,\nand then that way,\n\n211\n00:09:24.780 --> 00:09:25.550\nI could go into vCenter.\n\n212\n00:09:25.550 --> 00:09:27.470\nI could import them all into vCenter, and\n\n213\n00:09:27.470 --> 00:09:30.050\nthen apply a host profile just to\nget them quickly configured, right?\n\n214\n00:09:30.050 --> 00:09:33.090\nSo, that's how I used it in\nthe context in the other episode.\n\n215\n00:09:33.090 --> 00:09:36.670\nBut in this episode, I wanted to focus\na little more on remediation and\n\n216\n00:09:36.670 --> 00:09:37.460\ncompliance, right?\n\n217\n00:09:37.460 --> 00:09:39.430\nMaking sure that these settings stay,\nand so\n\n218\n00:09:39.430 --> 00:09:41.169\nthat's the other way that\nwe use the host profiles.\n\n219\n00:09:42.600 --> 00:09:44.430\nAll right well, enough talking about them.\n\n220\n00:09:44.430 --> 00:09:46.700\nLet's these things in action.\n\n221\n00:09:46.700 --> 00:09:50.130\nWhen you log in to vCenter, so\nI'm logged in to vCenter right now.\n\n222\n00:09:50.130 --> 00:09:53.290\nRight here on your home screen you'll\nsee your Inventories, Monitoring,\n\n223\n00:09:53.290 --> 00:09:57.240\nAdministration, and what I'm looking for\nis this guy right here, Host Profiles.\n\n224\n00:09:57.240 --> 00:10:00.890\nSo you've actually got the Host Profiles\nicon right there on the main page VMware\n\n225\n00:10:00.890 --> 00:10:03.260\nknows you're going to use these things.\n\n226\n00:10:03.260 --> 00:10:07.020\nAnd when I jump into\nthe host profiles [LAUGH]\n\n227\n00:10:07.020 --> 00:10:09.790\nyou might get an interface crash like\nI just did so we'll let that reload.\n\n228\n00:10:09.790 --> 00:10:11.720\nIf you don't get an interface crash,\n\n229\n00:10:11.720 --> 00:10:13.740\nthen what you'll get is\na list of host profiles.\n\n230\n00:10:13.740 --> 00:10:16.880\nAnd when you get your list of host\nprofiles, it's going to be empty.\n\n231\n00:10:16.880 --> 00:10:18.970\nAnd that's because VMware doesn't ship or\n\n232\n00:10:18.970 --> 00:10:22.140\nvSphere vCenter doesn't ship with\nany host profiles by default.\n\n233\n00:10:22.140 --> 00:10:24.020\nWe've got to create them, right?\n\n234\n00:10:24.020 --> 00:10:24.660\nSo there we go.\n\n235\n00:10:24.660 --> 00:10:27.170\nSo now, I'm in my host profiles and\n\n236\n00:10:27.170 --> 00:10:31.120\nit's the joy of web based\nadministration tools right there.\n\n237\n00:10:31.120 --> 00:10:34.470\nSo I can see that I've got zero\nhost profiles by default and\n\n238\n00:10:34.470 --> 00:10:36.140\nthere's nothing in here all right.\n\n239\n00:10:36.140 --> 00:10:37.370\nAnd there's only two buttons for\n\n240\n00:10:37.370 --> 00:10:41.770\nme and the first button is just to add\nright extract a profile from a host and\n\n241\n00:10:41.770 --> 00:10:44.630\nthe other one Is to import a host profile,\nall right.\n\n242\n00:10:44.630 --> 00:10:48.920\nI've gotta get a host profile from\nsomewhere, and the two places I can do it.\n\n243\n00:10:48.920 --> 00:10:51.520\nOne, I can extract it\nfrom a reference machine.\n\n244\n00:10:51.520 --> 00:10:54.150\nSo I've got an ESXi box somewhere.\n\n245\n00:10:54.150 --> 00:10:57.070\nThat I've configured exactly\nthe way that I want it.\n\n246\n00:10:57.070 --> 00:11:00.090\nI'm gonna extract the settings from them.\n\n247\n00:11:00.090 --> 00:11:02.920\nOr I can import and if import,\n\n248\n00:11:02.920 --> 00:11:05.910\nif I click on that, it's gonna\nask me to browse to find a file.\n\n249\n00:11:05.910 --> 00:11:06.860\nAll right.\n\n250\n00:11:06.860 --> 00:11:12.160\nAnd the file that's created is a VPF file,\na VMware profile format,\n\n251\n00:11:12.160 --> 00:11:15.140\nVPF, and I would just browse and\npick it and import it right in.\n\n252\n00:11:15.140 --> 00:11:17.520\nAnd it's gonna import it right\nhere into this vCenter server.\n\n253\n00:11:17.520 --> 00:11:19.460\nIf I had more than one vCenter server,\nI could drop it down and\n\n254\n00:11:19.460 --> 00:11:21.520\npick the other ones and\nimport it into them too.\n\n255\n00:11:21.520 --> 00:11:25.390\nSo I could do only one at a time,\nbut I could sit here and\n\n256\n00:11:25.390 --> 00:11:26.790\ndo it from this screen over and\nover again.\n\n257\n00:11:27.840 --> 00:11:30.990\nAll right now unfortunately\nI don't have one to import.\n\n258\n00:11:30.990 --> 00:11:32.630\nSo I'm going to extract it from the host.\n\n259\n00:11:32.630 --> 00:11:34.970\nNotice it won't let me\njust make a blank profile.\n\n260\n00:11:34.970 --> 00:11:36.420\nI can't just make a blank one.\n\n261\n00:11:36.420 --> 00:11:40.260\nI have to at least start from something,\nan imported file, or an existing host.\n\n262\n00:11:41.360 --> 00:11:42.580\nNow, I've got an existing host.\n\n263\n00:11:42.580 --> 00:11:50.290\nLet me go back to my home page here and\nI'm going to take my ESX Host 01.\n\n264\n00:11:50.290 --> 00:11:51.530\nRight, so I've got two hosts.\n\n265\n00:11:51.530 --> 00:11:52.570\nHost 01 and Host 02.\n\n266\n00:11:52.570 --> 00:11:58.170\nI'm gonna Host 01, and\nI'm gonna go into Manage and\n\n267\n00:11:58.170 --> 00:12:02.520\nSettings, and let's go down to.\n\n268\n00:12:02.520 --> 00:12:03.900\nWhat do I wanna mess with here.\n\n269\n00:12:03.900 --> 00:12:04.970\nSecurity?\n\n270\n00:12:06.110 --> 00:12:08.620\nLet's take a look at the security\nprofile on this system.\n\n271\n00:12:08.620 --> 00:12:09.550\nOkay.\n\n272\n00:12:09.550 --> 00:12:12.590\nI'm looking at the security profile,\nand I can see the various ports and\n\n273\n00:12:12.590 --> 00:12:13.760\nthings that are open.\n\n274\n00:12:13.760 --> 00:12:16.770\nAnd what I wanna do is I wanna find good,\nold SSH.\n\n275\n00:12:16.770 --> 00:12:21.270\nI'm gonna come down here to services,\nand here is SSH.\n\n276\n00:12:21.270 --> 00:12:24.360\nOkay, so when I look at SSH I\nsee that it is stopped.\n\n277\n00:12:24.360 --> 00:12:25.480\nIt's not turned on.\n\n278\n00:12:25.480 --> 00:12:27.580\nIt's not running on this host okay.\n\n279\n00:12:27.580 --> 00:12:30.720\nWell I wanna change that so\nI'm gonna go ahead and edit this thing.\n\n280\n00:12:31.900 --> 00:12:35.040\nAnd I'm gonna take SSH and\nI'm gonna start it.\n\n281\n00:12:36.090 --> 00:12:38.900\nOkay, so now SSH is running on the host.\n\n282\n00:12:38.900 --> 00:12:43.220\nAnd under the Service Details,\nit said to start and stop manually.\n\n283\n00:12:43.220 --> 00:12:45.970\nSo what's gonna happen\nif I reboot this host?\n\n284\n00:12:45.970 --> 00:12:47.520\nIt's gonna stop it again, right.\n\n285\n00:12:47.520 --> 00:12:50.780\nSo I'm gonna change that to make\nit start and stop with the host.\n\n286\n00:12:50.780 --> 00:12:54.110\nSo, everytime the host\nboots up SSH is gonna run.\n\n287\n00:12:54.110 --> 00:12:55.800\nEverytime the host shuts down and\nthen turn it off, and\n\n288\n00:12:55.800 --> 00:12:57.110\nthen turn back on again well it boots up.\n\n289\n00:12:57.110 --> 00:13:00.990\nSo SSH should always be running\nas long as I choose that host.\n\n290\n00:13:00.990 --> 00:13:03.250\nIt's running right now and it started.\n\n291\n00:13:03.250 --> 00:13:04.080\nAll right.\n\n292\n00:13:04.080 --> 00:13:05.130\nI'm gonna say okay to that.\n\n293\n00:13:06.170 --> 00:13:08.990\nAnd then,\nI'm gonna go up to the firewall settings.\n\n294\n00:13:08.990 --> 00:13:12.170\nAnd up here my firewall settings,\nI'm gonna find SSH.\n\n295\n00:13:12.170 --> 00:13:13.530\nSo here's my SSH server.\n\n296\n00:13:14.580 --> 00:13:21.040\nIt's port 22, TCP 22 And if I look\nover here, it's allowed for everyone.\n\n297\n00:13:21.040 --> 00:13:24.560\nEveryone can attempt to SSH, and that\nmight be a little too big for me, right?\n\n298\n00:13:24.560 --> 00:13:28.750\nSo I'm gonna add my network\nthat my network admins work on.\n\n299\n00:13:28.750 --> 00:13:33.130\nSo I'm gonna come in here and find the SSH\nserver, I'm gonna edit that setting.\n\n300\n00:13:33.130 --> 00:13:35.540\nAnd I'm not gonna allow\nconnections from any IP,\n\n301\n00:13:35.540 --> 00:13:40.440\nI'm gonna limit it to\nmy management network.\n\n302\n00:13:40.440 --> 00:13:41.410\nHere in the lab it's 192.168.0.0/24.\n\n303\n00:13:41.410 --> 00:13:45.170\nIn real life that's probably\nnot what you're using right?\n\n304\n00:13:45.170 --> 00:13:47.590\nAnd so you can add individual\nIPs here if you wanted or\n\n305\n00:13:47.590 --> 00:13:48.620\nwhatever to your heart's content.\n\n306\n00:13:48.620 --> 00:13:51.250\nI just want to get some security\nsettings on this system, all right?\n\n307\n00:13:51.250 --> 00:13:53.110\nSo I'm gonna go ahead and so okay to that.\n\n308\n00:13:53.110 --> 00:13:56.790\nAll right, so\nnow as soon as this refreshes\n\n309\n00:13:58.260 --> 00:14:03.230\nI can see that SSH is open, but\nit's limited to that network, okay.\n\n310\n00:14:03.230 --> 00:14:08.140\nSo I'm gonna use this as my\nreference to build my host profile.\n\n311\n00:14:08.140 --> 00:14:12.450\nNow, when I go and take a look at Host 02,\nthis is my other host.\n\n312\n00:14:12.450 --> 00:14:16.690\nAnd I go to manage settings and\nsecurity profile I can look and\n\n313\n00:14:16.690 --> 00:14:20.750\nSSH is still open to everyone okay.\n\n314\n00:14:20.750 --> 00:14:23.580\nAnd not only is it open to everyone if I\nkeep scrolling down here I should be able\n\n315\n00:14:23.580 --> 00:14:28.660\nto find SSH, and\nit's stopped okay that's the default.\n\n316\n00:14:28.660 --> 00:14:33.420\nIf I had just installed ESXI the port for\nSSH is open to everybody but\n\n317\n00:14:33.420 --> 00:14:37.530\nthe service to SSH is stopped right so\nHost 02 is a default.\n\n318\n00:14:37.530 --> 00:14:39.410\nHost 01 has now been customized.\n\n319\n00:14:39.410 --> 00:14:40.930\nAll right.\n\n320\n00:14:40.930 --> 00:14:43.760\nSo I'm gonna go back to my homepage and\ngo back to host profiles and\n\n321\n00:14:43.760 --> 00:14:45.150\nsee if it crashes for me this time.\n\n322\n00:14:45.150 --> 00:14:46.200\nNope, there we go.\n\n323\n00:14:46.200 --> 00:14:49.750\nSo now, I'm gonna extract the host profile\nfrom host 01 so I'm just gonna go here and\n\n324\n00:14:49.750 --> 00:14:53.660\nhit that little green plus, and when I\ngo to extract it I've gotta pick a host.\n\n325\n00:14:53.660 --> 00:14:56.950\nI gotta little warning on host 101, it\nmight not be done with one of it's tasks.\n\n326\n00:14:56.950 --> 00:14:58.510\nI'm gonna ignore that.\n\n327\n00:14:58.510 --> 00:15:00.520\nAnd you can do more than\none host if you want.\n\n328\n00:15:00.520 --> 00:15:01.970\nSee, I'm on the filter tab.\n\n329\n00:15:01.970 --> 00:15:04.470\nIf I'd switched over to the selected\nobjects here you could like\n\n330\n00:15:04.470 --> 00:15:08.430\ncheck off the different ones that you\nwanted, but we'll start with that one.\n\n331\n00:15:08.430 --> 00:15:10.750\nWe'll hit Next, and\nnow I need to give it a host profile.\n\n332\n00:15:10.750 --> 00:15:15.730\nSo what I'm gonna call this is my,\nI'll just call it my ESXI Baseline, right?\n\n333\n00:15:15.730 --> 00:15:20.690\nSo this is gonna be a generic host\nprofile that I'm gonna use on\n\n334\n00:15:20.690 --> 00:15:23.350\nany ESXI box in my entire company.\n\n335\n00:15:23.350 --> 00:15:27.410\nBut if I have a box that needs\nspecial configurations or whatever,\n\n336\n00:15:27.410 --> 00:15:28.880\nI might have a separate host profile for\nthem.\n\n337\n00:15:28.880 --> 00:15:32.930\nBut this one's just gonna be my baseline,\nso If somebody's deploying ESXI Host, and\n\n338\n00:15:32.930 --> 00:15:36.840\nwe don't necessarily have a specific\npurpose for it yet, go with the baseline.\n\n339\n00:15:36.840 --> 00:15:39.720\nBut then, if you want something\nspecialized, we'll create more.\n\n340\n00:15:39.720 --> 00:15:43.790\nSo I'll stick with the baseline,\nand then that's it.\n\n341\n00:15:43.790 --> 00:15:44.695\nRight?\nWe just give it a name.\n\n342\n00:15:44.695 --> 00:15:48.246\nAnd that's because it's gonna extract\nall the settings from that host, and\n\n343\n00:15:48.246 --> 00:15:50.879\nif I watch down here in my Recent Tasks,\nI'll see it run.\n\n344\n00:15:50.879 --> 00:15:55.707\nIt's not the fastest thing in the planet,\nbecause what it's gotta do is connect And\n\n345\n00:15:55.707 --> 00:15:58.440\nit's gonna pull a lot of\nsettings out of there.\n\n346\n00:15:58.440 --> 00:16:00.883\nYour network settings,\nyour security settings,\n\n347\n00:16:00.883 --> 00:16:03.920\nhere let me read off the list\ncuz we certainly have the time.\n\n348\n00:16:03.920 --> 00:16:05.690\nYou've got your regular\nconfiguration settings and\n\n349\n00:16:05.690 --> 00:16:07.700\nyour advanced configuration settings.\n\n350\n00:16:07.700 --> 00:16:10.230\nThere's like advanced section\nwhen you go into the Manage tab.\n\n351\n00:16:10.230 --> 00:16:13.290\nIt's gonna pull\nthe CIM Indication Subscriptions,\n\n352\n00:16:13.290 --> 00:16:15.400\nwhich is part of the network\nmanagement functions.\n\n353\n00:16:15.400 --> 00:16:17.260\nWe've got general system settings.\n\n354\n00:16:17.260 --> 00:16:18.820\nI think I already said that one.\n\n355\n00:16:18.820 --> 00:16:20.090\nNetworking configuration.\n\n356\n00:16:20.090 --> 00:16:21.950\nSecurity services.\n\n357\n00:16:21.950 --> 00:16:23.170\nThat's what I want, right?\n\n358\n00:16:23.170 --> 00:16:24.870\nThat's where I do my SSH and stuff.\n\n359\n00:16:24.870 --> 00:16:27.710\nAnd then the storage configuration\nis pulling that, too.\n\n360\n00:16:27.710 --> 00:16:29.750\nNow, storage configuration.\n\n361\n00:16:29.750 --> 00:16:32.450\nIs that something I'm gonna wanna\nroll out to all of my hosts?\n\n362\n00:16:32.450 --> 00:16:33.770\nMaybe not, right?\n\n363\n00:16:33.770 --> 00:16:37.290\nSo, some of these things\nmight go a little too far.\n\n364\n00:16:37.290 --> 00:16:41.900\nSo, it's not necessarily suitable to take\nthe host profile that's being made right\n\n365\n00:16:41.900 --> 00:16:44.070\nnow and just run right out and deploy it.\n\n366\n00:16:44.070 --> 00:16:46.720\nI am gonna need to edit it a little bit,\nand then I can certainly do that.\n\n367\n00:16:46.720 --> 00:16:48.240\nAll right.\nIt actually finished.\n\n368\n00:16:48.240 --> 00:16:52.710\nSo, now that that's done I'm\ngonna take my ESXI baseline.\n\n369\n00:16:52.710 --> 00:16:55.810\nAnd notice that I've got a lot\nmore buttons, first off.\n\n370\n00:16:55.810 --> 00:16:57.150\nYou know, I don't just have the plus and\n\n371\n00:16:57.150 --> 00:16:59.100\nthe scroll,\nnow I've got a bunch of buttons.\n\n372\n00:16:59.100 --> 00:17:03.930\nI can see compliant hosts, non-compliant\nhosts, and unknown state hosts.\n\n373\n00:17:03.930 --> 00:17:05.850\nAll right, so what's this all about?\n\n374\n00:17:05.850 --> 00:17:09.960\nCompliant hosts shouldn't\nESX Host 01 be compliant?\n\n375\n00:17:09.960 --> 00:17:12.010\nI just made this profile from Host 01.\n\n376\n00:17:12.010 --> 00:17:14.460\nIt should be compliant, shouldn't it?\n\n377\n00:17:14.460 --> 00:17:16.560\nWell, I made the profile from Host 01.\n\n378\n00:17:16.560 --> 00:17:20.000\nI haven't applied the profile to Host 01.\n\n379\n00:17:20.000 --> 00:17:22.590\nI haven't applied the profile to anybody.\n\n380\n00:17:22.590 --> 00:17:25.620\nSo as it stands right now,\nit's just a text file.\n\n381\n00:17:25.620 --> 00:17:26.640\nIt's just sitting there.\n\n382\n00:17:26.640 --> 00:17:27.860\nIt's not doing anything.\n\n383\n00:17:27.860 --> 00:17:30.410\nNow, I'll probably want to\nattach it to Host 01, so\n\n384\n00:17:30.410 --> 00:17:32.030\nthat I can make sure that I track and\nmonitor it.\n\n385\n00:17:32.030 --> 00:17:34.950\nI know host1's already set up right but\nthat's right now,\n\n386\n00:17:34.950 --> 00:17:36.910\nmight not be set up right tomorrow or\na week from now.\n\n387\n00:17:36.910 --> 00:17:38.320\nI'll need to track that.\n\n388\n00:17:38.320 --> 00:17:41.330\nSo when you attach this\nhost profile to a host,\n\n389\n00:17:41.330 --> 00:17:43.800\nit's gonna show up as one of these\nthree states hopefully compliant.\n\n390\n00:17:43.800 --> 00:17:46.980\nCompliant means all the settings\non the host match the settings in\n\n391\n00:17:46.980 --> 00:17:48.360\nthe host profile.\n\n392\n00:17:48.360 --> 00:17:49.680\nNot compliant.\n\n393\n00:17:49.680 --> 00:17:53.400\nThat means that either some, or\nall of the settings are wrong on the host.\n\n394\n00:17:53.400 --> 00:17:55.850\nThey don't match what's in the profile.\n\n395\n00:17:55.850 --> 00:18:01.110\nAnd then, unknown state, typically\nthat means that the host is offline,\n\n396\n00:18:01.110 --> 00:18:02.660\nthat we don't have network\nconnectivity to the host, so\n\n397\n00:18:02.660 --> 00:18:05.070\nwe can't verify whether it's good or not.\n\n398\n00:18:05.070 --> 00:18:09.930\nBut, it can also mean that it's new,\nthat we just attached the profile and\n\n399\n00:18:09.930 --> 00:18:12.790\nit hasn't had a chance to check all the\nsettings, that's another reason, right?\n\n400\n00:18:12.790 --> 00:18:15.620\nSo, those are the different reasons why\nyou might end up in one of these states\n\n401\n00:18:15.620 --> 00:18:16.670\nversus another.\n\n402\n00:18:16.670 --> 00:18:18.100\nBut as it stands, I'm not gonna see much.\n\n403\n00:18:18.100 --> 00:18:20.410\nNow, I could attach this to a Host.\n\n404\n00:18:20.410 --> 00:18:22.370\nNow, as I look at my new buttons up here,\n\n405\n00:18:22.370 --> 00:18:24.340\nyou've got duplicate a Host profile,\nright?\n\n406\n00:18:24.340 --> 00:18:26.890\nSo, if I wanted to create\na customization off of it, I could.\n\n407\n00:18:26.890 --> 00:18:29.650\nWe've got copy settings from host.\n\n408\n00:18:29.650 --> 00:18:32.750\nSo if I want to refresh it by gathering\nsettings from an existing host I can,\n\n409\n00:18:32.750 --> 00:18:35.210\nas opposed to extracting a whole new one.\n\n410\n00:18:35.210 --> 00:18:38.980\nWe've got our check for compliance,\nwhich we're going to see in a minute.\n\n411\n00:18:38.980 --> 00:18:40.700\nAs well as our remediate, right?\n\n412\n00:18:40.700 --> 00:18:41.700\nWait, here's remediate.\n\n413\n00:18:41.700 --> 00:18:44.360\nRemediate means put things\nback the way they are.\n\n414\n00:18:44.360 --> 00:18:45.860\nBut, this is the one that\nI'm after right here,\n\n415\n00:18:45.860 --> 00:18:50.580\nthe little server that says attach/detach\na host profile to hosts and clusters.\n\n416\n00:18:50.580 --> 00:18:52.540\nI have to attach the profile.\n\n417\n00:18:52.540 --> 00:18:54.700\nTo a host before it actually works.\n\n418\n00:18:54.700 --> 00:18:57.550\nNow, if I attach this\nto host 01 right now,\n\n419\n00:18:57.550 --> 00:19:01.600\nI'd be okay because the unique data inside\nof it is gonna match what's on host 0.\n\n420\n00:19:01.600 --> 00:19:03.720\nAnd so it's gonna be fine, but\n\n421\n00:19:03.720 --> 00:19:06.980\nif I were to attach this to host 02,\nI'm gonna have some problems\n\n422\n00:19:06.980 --> 00:19:10.130\ncuz the unique data from host 01 is now\ngonna try to be applied to host 02.\n\n423\n00:19:10.130 --> 00:19:14.590\nAnd I'm gonna get some weird stuff,\nso I need to edit this a little bit.\n\n424\n00:19:14.590 --> 00:19:17.800\nAnd I'm just gonna right click on\nthat profile and go to Edit Settings.\n\n425\n00:19:19.670 --> 00:19:22.140\nAnd when we go into the settings,\nthe first screen is not too spectacular,\n\n426\n00:19:22.140 --> 00:19:23.290\nit's just a name.\n\n427\n00:19:23.290 --> 00:19:26.180\nThe second screen though is\nwhere the real action is.\n\n428\n00:19:26.180 --> 00:19:29.060\nAnd I'm gonna see all the divisions, these\nare the things that I read out just a few\n\n429\n00:19:29.060 --> 00:19:30.950\nmoments ago that we can store in here.\n\n430\n00:19:30.950 --> 00:19:33.960\nAnd I said how Security and Services,\nthat's the one that I cared about, right?\n\n431\n00:19:33.960 --> 00:19:35.670\nThose are the settings that I was pushing.\n\n432\n00:19:35.670 --> 00:19:38.860\nBut you'll see where we've got\nour general system settings and\n\n433\n00:19:38.860 --> 00:19:43.400\nif you look it's console core dump\ndate and time configuration and so on.\n\n434\n00:19:43.400 --> 00:19:47.880\nSo if I look at like date and\ntime over here we can configure NTP.\n\n435\n00:19:47.880 --> 00:19:51.870\nMaybe I want every server\nto use NTP server, right?\n\n436\n00:19:51.870 --> 00:19:53.830\nSo I can configure one, and I can put in,\n\n437\n00:19:53.830 --> 00:19:56.680\nI want them all to use pool.ntp.org,\nright?\n\n438\n00:19:56.680 --> 00:19:58.130\nThat's what I want them to use.\n\n439\n00:19:58.130 --> 00:19:59.100\nAnd for a time zone,\n\n440\n00:19:59.100 --> 00:20:03.210\nI might want a specific time zone\nlike US Eastern, or whatever.\n\n441\n00:20:03.210 --> 00:20:05.130\nSo you could specify it in here.\n\n442\n00:20:05.130 --> 00:20:07.990\nI'll just leave that blank for now though\nbut I'm gonna set the time server.\n\n443\n00:20:07.990 --> 00:20:11.610\nSo, that's a date and time\nconfiguration that I wanna push along.\n\n444\n00:20:11.610 --> 00:20:15.860\nNow, there was a lot of other things\nin here that I might not want.\n\n445\n00:20:15.860 --> 00:20:17.205\nSo, I would like cancel config.\n\n446\n00:20:17.205 --> 00:20:19.775\nConfiguration cord of, these are things\nthat I might not want to include.\n\n447\n00:20:19.775 --> 00:20:23.515\nAnd so I can just come down the line and\nuncheck those.\n\n448\n00:20:23.515 --> 00:20:27.755\nI'm just turning them off and so that's\nwhat you basically have to do is identify\n\n449\n00:20:27.755 --> 00:20:31.905\nthings that might not be consistent,\nvFlash.\n\n450\n00:20:31.905 --> 00:20:35.015\nI might not have vFlash\nin all of my servers.\n\n451\n00:20:35.015 --> 00:20:36.855\nSo I don't want to push that setting out.\n\n452\n00:20:36.855 --> 00:20:44.620\nSo I'm basically emptying out The general\nsettings here except for date and time.\n\n453\n00:20:44.620 --> 00:20:48.630\nAnd by doing that, I'm creating\na subset of that one setting, but\n\n454\n00:20:48.630 --> 00:20:50.630\nthere's still stuff in\nthere that is enabled.\n\n455\n00:20:50.630 --> 00:20:53.350\nI'm not using CIM so\nI'm just gonna turn it off.\n\n456\n00:20:53.350 --> 00:20:56.040\nAdvanced configuration,\nI'm gonna turn these off now.\n\n457\n00:20:56.040 --> 00:20:59.520\nWhen I do this, it's not saying\nlike blank out these settings.\n\n458\n00:20:59.520 --> 00:21:03.190\nIt's just saying if they already have\na setting, leave it at the default.\n\n459\n00:21:03.190 --> 00:21:05.650\nOr if the end of end user wants\nto customize their machine, fine,\n\n460\n00:21:05.650 --> 00:21:07.300\nthey can customize these, right.\n\n461\n00:21:07.300 --> 00:21:10.200\nWe're not gonna to enforce these settings.\n\n462\n00:21:10.200 --> 00:21:11.240\nSo, I'm just removing those out.\n\n463\n00:21:11.240 --> 00:21:14.600\nWhen we get to Networking configuration,\nhere you'll see vSwitches,\n\n464\n00:21:14.600 --> 00:21:15.700\nphysical NICs, and so on.\n\n465\n00:21:15.700 --> 00:21:17.200\nI'm just gonna turn all these off.\n\n466\n00:21:17.200 --> 00:21:19.890\nI'm not actually gonna use any of these.\n\n467\n00:21:19.890 --> 00:21:21.530\nMost of this should be empty anyway.\n\n468\n00:21:23.210 --> 00:21:23.740\nThere we go.\n\n469\n00:21:25.060 --> 00:21:27.370\nAnd notice the icon in\nnetwork configuration.\n\n470\n00:21:27.370 --> 00:21:28.690\nSee it didn't turn into a square.\n\n471\n00:21:28.690 --> 00:21:30.510\nIt stayed a black box with a slash.\n\n472\n00:21:30.510 --> 00:21:32.790\nThat means I miss some settings, so\nI'm just gonna turn off this way.\n\n473\n00:21:32.790 --> 00:21:35.370\nActually done that anyway, that's faster.\n\n474\n00:21:35.370 --> 00:21:37.550\nStorage, I'm just gonna\nturn that one off too.\n\n475\n00:21:37.550 --> 00:21:38.830\nAnd then under security and\n\n476\n00:21:38.830 --> 00:21:42.900\nservices, here's where I customize\nthe firewall configuration, and\n\n477\n00:21:42.900 --> 00:21:46.760\nI customize the security settings and\nthe service configuration, right?\n\n478\n00:21:46.760 --> 00:21:49.310\nSo you can go through and\ntweak these, and measure them,\n\n479\n00:21:49.310 --> 00:21:50.410\nwhatever it is that you want to do.\n\n480\n00:21:50.410 --> 00:21:52.890\nActually, I didn't set these, so\nI'm going to turn some of these off too.\n\n481\n00:21:52.890 --> 00:21:56.480\nLet me just turn everything off.\n\n482\n00:21:56.480 --> 00:21:59.630\nAnd I'm going to leave\nservice configuration and\n\n483\n00:21:59.630 --> 00:22:01.190\nFirewall configuration on.\n\n484\n00:22:01.190 --> 00:22:03.810\nBut, if you drill down into\nthat you can see where\n\n485\n00:22:03.810 --> 00:22:06.020\nI can limit it just to SSH if I wanted.\n\n486\n00:22:06.020 --> 00:22:11.040\nI don't have to do them all,\nI could just do individual services or\n\n487\n00:22:11.040 --> 00:22:12.500\nindividual firewall ports, and\n\n488\n00:22:12.500 --> 00:22:15.060\nthat means that the rest of the firewall\nconfiguration can be left alone.\n\n489\n00:22:15.060 --> 00:22:16.050\nHere I'm kind of locking it down.\n\n490\n00:22:17.300 --> 00:22:20.610\nOkay, so now that I've customized that,\nwhat does my profile contain?\n\n491\n00:22:20.610 --> 00:22:24.760\nWell a time server and some services,\nand that's about it, right?\n\n492\n00:22:24.760 --> 00:22:26.590\nThat's all that's in my host profile now.\n\n493\n00:22:26.590 --> 00:22:31.150\nSo I kind of alleviate the risk\nof pushing out unique settings.\n\n494\n00:22:31.150 --> 00:22:33.670\nSo you'll customized this to\nmeet whatever your needs are.\n\n495\n00:22:33.670 --> 00:22:37.720\nThis is gonna create my baseline that\nI can help push out to the host and\n\n496\n00:22:37.720 --> 00:22:40.200\nmake sure that they're correct.\n\n497\n00:22:40.200 --> 00:22:44.710\nSo if I finish that up, now it's ready And\nI just need to attach it to a host,\n\n498\n00:22:44.710 --> 00:22:49.270\nwhich I can do by clicking on\nthe profile and using the attach button.\n\n499\n00:22:50.280 --> 00:22:51.840\nWhich is actually this guy right here,\n\n500\n00:22:51.840 --> 00:22:54.270\nnope not that one,\nwhich one is it, here this one.\n\n501\n00:22:54.270 --> 00:22:56.370\nThe server with a little\ngreen arrow on it.\n\n502\n00:22:56.370 --> 00:22:57.260\nI can attach it or\n\n503\n00:22:57.260 --> 00:22:59.180\nyou can just right-click on it here\nwhich is what I normally do and\n\n504\n00:22:59.180 --> 00:23:02.270\ngo to attach because I can never\nremember what the icon looks like.\n\n505\n00:23:02.270 --> 00:23:03.570\nSo I'm gonna attach that.\n\n506\n00:23:03.570 --> 00:23:06.210\nNow, when I go to attach it,\nI'm gonna attach it to host01.\n\n507\n00:23:06.210 --> 00:23:06.710\nNow host01,\n\n508\n00:23:06.710 --> 00:23:12.420\nI already know SSH is set up right,\nbecause I did it myself before I imported.\n\n509\n00:23:12.420 --> 00:23:14.230\nBut the time server, that's new, right?\n\n510\n00:23:14.230 --> 00:23:17.185\nI didn't configure the time server,\nset up that's gonna be a new setting.\n\n511\n00:23:17.185 --> 00:23:22.685\nHost o 2, I expect it to be wrong for\nSSH and wrong for the time server.\n\n512\n00:23:22.685 --> 00:23:25.335\nSo you go in here and\nadd as many hosts as you want,\n\n513\n00:23:25.335 --> 00:23:26.625\nyou can add 1, you can add 1,000.\n\n514\n00:23:26.625 --> 00:23:28.485\nYou can punch them all in here.\n\n515\n00:23:29.855 --> 00:23:34.915\nWhen I finish, it's gonna bring\nup this screen customize hosts.\n\n516\n00:23:34.915 --> 00:23:38.435\nIf there were any unique values I'd have\nprompts right here to punch in the unique\n\n517\n00:23:38.435 --> 00:23:40.110\nsettings, but I filtered those out.\n\n518\n00:23:40.110 --> 00:23:42.030\nWhich is always the best way\nto handle that in my opinion,\n\n519\n00:23:42.030 --> 00:23:44.190\nand we'll finish it up.\n\n520\n00:23:44.190 --> 00:23:48.607\nOkay so\nnow we're good to go sort of, right?\n\n521\n00:23:48.607 --> 00:23:51.411\nIf I look at the screen I\nstill have a 0s here, right.\n\n522\n00:23:51.411 --> 00:23:52.641\nAnd it might still be applying.\n\n523\n00:23:52.641 --> 00:23:54.060\nLet me look at my recent tasks.\n\n524\n00:23:54.060 --> 00:23:55.389\nNo, it shows as completed.\n\n525\n00:23:55.389 --> 00:23:58.390\nSee how it has Update host customizations.\n\n526\n00:23:58.390 --> 00:24:01.130\nSo, they should be rolling out,\nbut this screen hasn't updated.\n\n527\n00:24:01.130 --> 00:24:03.180\nSo I'm gonna hit my little refresh button.\n\n528\n00:24:03.180 --> 00:24:06.725\nAnd now I see that I've\ngot no compliant host,\n\n529\n00:24:06.725 --> 00:24:10.340\nno not compliant host, and two unknown.\n\n530\n00:24:10.340 --> 00:24:13.822\nRemember I mentioned if they're new,\nsometimes it can take a while for\n\n531\n00:24:13.822 --> 00:24:15.790\nthem to certainly show us unknown.\n\n532\n00:24:15.790 --> 00:24:18.824\nIt's not that I can't get to them,\nit's just that they're new.\n\n533\n00:24:18.824 --> 00:24:22.604\nSo, I'm gonna usher this along by hitting\nthe Check Host Profile Compliance and\n\n534\n00:24:22.604 --> 00:24:24.550\nAssociated Entities button.\n\n535\n00:24:24.550 --> 00:24:26.780\nIf I wait,\neventually it'll do it on its own.\n\n536\n00:24:26.780 --> 00:24:29.290\nBut we only have so much time left\nin this show and I'm in a hurry.\n\n537\n00:24:29.290 --> 00:24:30.210\nSo I'm gonna hit the button.\n\n538\n00:24:31.210 --> 00:24:33.250\nI am impatient, that is one of my faults.\n\n539\n00:24:33.250 --> 00:24:36.530\nAnd so it's gonna run and\nit's gonna do a check, okay.\n\n540\n00:24:36.530 --> 00:24:39.060\nNow the check can take a minute, because\nit's got to reach out to those hosts.\n\n541\n00:24:39.060 --> 00:24:42.110\nAnd so I see it running here and\nI've got that check compliance.\n\n542\n00:24:42.110 --> 00:24:44.010\nNow it shows as completed.\n\n543\n00:24:44.010 --> 00:24:47.800\nAnd up here,\noops I'm just gonna refresh my screen.\n\n544\n00:24:49.170 --> 00:24:50.270\nThere we go.\n\n545\n00:24:50.270 --> 00:24:54.410\nAnd now what I'm seeing is I\nhave two not compliant hosts.\n\n546\n00:24:54.410 --> 00:24:57.850\nHost 1 is not compliant because I\ndidn't set a time server ahead of time.\n\n547\n00:24:57.850 --> 00:25:01.780\nThere's a time server on the host\nprofile that's not set on the host.\n\n548\n00:25:01.780 --> 00:25:04.660\nHost 2 is not compliant because\nthey're missing everything, right?\n\n549\n00:25:04.660 --> 00:25:06.620\nNow, how do I know that?\n\n550\n00:25:06.620 --> 00:25:08.770\nRight?\nBecause I'm gonna have a 100 servers and\n\n551\n00:25:08.770 --> 00:25:09.830\nI don't know the history of these servers.\n\n552\n00:25:09.830 --> 00:25:12.490\nSo how do I know what's not compliant,\nand what is compliant?\n\n553\n00:25:12.490 --> 00:25:16.100\nWell, when you right click on these things\nyou'll see a few different settings on\n\n554\n00:25:16.100 --> 00:25:16.860\nhere that you can do.\n\n555\n00:25:16.860 --> 00:25:18.690\nWell, actually I probably\nshould have pointed this out.\n\n556\n00:25:18.690 --> 00:25:20.970\nHere's where there's export host profile.\n\n557\n00:25:20.970 --> 00:25:25.220\nSo I can dump it out to a file and\nactually use that, that's the VPF file\n\n558\n00:25:25.220 --> 00:25:30.680\nthat I can import somewhere else right,\nso you certainly have that option.\n\n559\n00:25:30.680 --> 00:25:36.850\nBut what I wanna do is I wanna go\nover here and click my EXCi baseline.\n\n560\n00:25:36.850 --> 00:25:37.870\nThis is kind of an optional step.\n\n561\n00:25:37.870 --> 00:25:42.050\nI wanna go to my EXCi baseline and\ngoto the monitor tab,\n\n562\n00:25:42.050 --> 00:25:45.750\nbecause in the monitor tab I can figure\nout exactly what is not compliant.\n\n563\n00:25:45.750 --> 00:25:46.600\nWhy do I care?\n\n564\n00:25:46.600 --> 00:25:48.390\nI could ignore this.\n\n565\n00:25:48.390 --> 00:25:49.920\nI could just say hey,\nsomebody's not compliant?\n\n566\n00:25:49.920 --> 00:25:50.990\nLet me reapply the profile and\n\n567\n00:25:50.990 --> 00:25:53.500\nbring them into compliance,\nthat's remediating the server.\n\n568\n00:25:53.500 --> 00:25:55.630\nI can do that right now\nwithout even looking.\n\n569\n00:25:55.630 --> 00:25:58.890\nBut some settings require a reboot.\n\n570\n00:26:00.010 --> 00:26:04.110\nSome settings could potentially lock me\nout if they adjust the network adaptors.\n\n571\n00:26:04.110 --> 00:26:04.640\nRight?\n\n572\n00:26:04.640 --> 00:26:07.570\nSome settings could cause a service\ninterruption to my end users.\n\n573\n00:26:07.570 --> 00:26:10.570\nSo I probably want to know\nwhat I'm going to remediate.\n\n574\n00:26:10.570 --> 00:26:13.390\nIn a lab, in a test environment,\nI don't care.\n\n575\n00:26:13.390 --> 00:26:16.710\nI hit the remediate button and\npush the settings out and we're done.\n\n576\n00:26:16.710 --> 00:26:19.950\nBut in production, it's always a good\nidea to look at what's not compliant.\n\n577\n00:26:19.950 --> 00:26:21.680\nAnd that way you can figure\nout what impact you're\n\n578\n00:26:21.680 --> 00:26:23.360\ngonna have when you remediate the system.\n\n579\n00:26:23.360 --> 00:26:27.370\nAll right, if it's starting or stopping\nSSH, if it's setting a time server,\n\n580\n00:26:27.370 --> 00:26:29.490\nthose are noninvasive, right?\n\n581\n00:26:29.490 --> 00:26:30.630\nThe server will stay up just fine.\n\n582\n00:26:30.630 --> 00:26:31.630\nYour clients will stay in just fine.\n\n583\n00:26:31.630 --> 00:26:33.340\nEverything is gonna work, right?\n\n584\n00:26:33.340 --> 00:26:35.830\nBut if it's something like\nadjusting a data store or\n\n585\n00:26:35.830 --> 00:26:39.230\nadjusting a network configuration,\nthat can create an outage.\n\n586\n00:26:39.230 --> 00:26:41.950\nIt might be a micro outage, a very\nshort one, but it's still an outage.\n\n587\n00:26:41.950 --> 00:26:42.800\nAnd so you've got to plan it.\n\n588\n00:26:42.800 --> 00:26:44.890\nYou might not wanna bring it\ninto compliance right now.\n\n589\n00:26:44.890 --> 00:26:46.690\nYou might wanna do it after hours, right.\n\n590\n00:26:46.690 --> 00:26:48.990\nSo, to find that out,\nwe go here into our baseline.\n\n591\n00:26:48.990 --> 00:26:53.200\nAnd so, just on the left side, I click\nmy actual baseline, my host profile.\n\n592\n00:26:53.200 --> 00:26:54.710\nI wen to the Monitor tab.\n\n593\n00:26:54.710 --> 00:26:55.960\nAnd right off, I see my issues.\n\n594\n00:26:55.960 --> 00:26:57.630\nMy issues are empty.\n\n595\n00:26:57.630 --> 00:27:01.070\nAnd that's because being\nnon-compliant is not an issue.\n\n596\n00:27:01.070 --> 00:27:03.100\nIt's just not compliant.\n\n597\n00:27:03.100 --> 00:27:04.160\nIt's kind of it's own thing.\n\n598\n00:27:04.160 --> 00:27:05.670\nBut an issue would be\nwhen there's a failure.\n\n599\n00:27:05.670 --> 00:27:09.000\nWe tried to apply a profile and\nsomething didn't work, right?\n\n600\n00:27:09.000 --> 00:27:10.110\nSo that's when we'd see an issue.\n\n601\n00:27:10.110 --> 00:27:13.630\nBut if I switch over to compliance,\nnow I'm gonna see my host.\n\n602\n00:27:13.630 --> 00:27:15.110\nAnd I see they're not compliant.\n\n603\n00:27:15.110 --> 00:27:19.000\nAnd if I click on them,\nI'll be able to see why.\n\n604\n00:27:19.000 --> 00:27:21.880\nWhen I click Host01,\nit's not compliant, because date and\n\n605\n00:27:21.880 --> 00:27:23.670\ntime configuration is missing one setting.\n\n606\n00:27:23.670 --> 00:27:27.860\nAnd if I expand that,\nlist of NTP servers doesn't match, right.\n\n607\n00:27:27.860 --> 00:27:30.230\nSo, I know it's just NTP.\n\n608\n00:27:30.230 --> 00:27:33.910\nAnd if I click on Host02,\nit's not compliant, and why?\n\n609\n00:27:33.910 --> 00:27:36.730\nIt's missing date and time configuration.\n\n610\n00:27:36.730 --> 00:27:38.890\nLet me adjust this a little bit,\nso we can actually see.\n\n611\n00:27:38.890 --> 00:27:40.380\nIt's missing date and time.\n\n612\n00:27:40.380 --> 00:27:42.090\nIt's missing service configuration.\n\n613\n00:27:42.090 --> 00:27:46.540\nThe service TSM-SSH doesn't\nmeet the policy, all right.\n\n614\n00:27:46.540 --> 00:27:47.800\nSo the services isn't set right.\n\n615\n00:27:47.800 --> 00:27:51.570\nAnd the firewall, ruleset SSH server\ndoesn't match the specifications.\n\n616\n00:27:51.570 --> 00:27:55.260\nSo I can figure out exactly\nwhy it's not complying.\n\n617\n00:27:55.260 --> 00:27:57.810\nI knew it wasn't complying\nalready cuz we saw that,\n\n618\n00:27:57.810 --> 00:27:59.980\nback on the main summary screen here.\n\n619\n00:27:59.980 --> 00:28:03.950\nBut now I know exactly why and I know\nthese are safe to go ahead and remediate.\n\n620\n00:28:03.950 --> 00:28:07.830\nSo I can take that host\nthat's not compliant, so\n\n621\n00:28:07.830 --> 00:28:10.020\nI can take Host 02 or Host 01.\n\n622\n00:28:10.020 --> 00:28:15.440\nI can highlight them and you've got\nthe button up here to remediate them,\n\n623\n00:28:15.440 --> 00:28:18.720\nwhich is this little hammer and wrench.\n\n624\n00:28:18.720 --> 00:28:19.290\nRight?\n\n625\n00:28:19.290 --> 00:28:21.450\nSo I'm gonna take host02,\nactually I'll do both.\n\n626\n00:28:21.450 --> 00:28:23.610\nHost02 and host01,\nI'm gonna highlight them both and\n\n627\n00:28:23.610 --> 00:28:25.480\nI'll just hit the wrench to\nbring them into compliance.\n\n628\n00:28:25.480 --> 00:28:30.630\nSo it's gonna perform that action and it's\ngoing to bring up a quick little wizard.\n\n629\n00:28:30.630 --> 00:28:32.120\nThere's not much to do here.\n\n630\n00:28:32.120 --> 00:28:33.240\nIf I had unique settings,\n\n631\n00:28:33.240 --> 00:28:35.020\nhere's where I would have to\nprovide those unique settings.\n\n632\n00:28:35.020 --> 00:28:39.040\nBut since I took those out, for me it's\nreally just a matter of hitting next.\n\n633\n00:28:39.040 --> 00:28:39.680\nRight?\n\n634\n00:28:39.680 --> 00:28:42.320\nSo I can hit next and\nit's going to remediate them.\n\n635\n00:28:42.320 --> 00:28:46.000\nIt's reaching out to the servers, it's\ntelling those settings they are supposed\n\n636\n00:28:46.000 --> 00:28:48.390\nto have, and\nthey're going to put the settings in.\n\n637\n00:28:48.390 --> 00:28:51.510\nAnd then we'll refresh our check and\nthey should both be compliant.\n\n638\n00:28:51.510 --> 00:28:55.830\nSo this is really cool,\nbecause once a week, or however often,\n\n639\n00:28:55.830 --> 00:29:00.130\nI can come in here and run a compliance\ncheck, and I can scan 1,000 hosts.\n\n640\n00:29:00.130 --> 00:29:01.590\nIt takes just a few minutes.\n\n641\n00:29:01.590 --> 00:29:05.220\nWe scan 1,000 hosts, and now I can\nfind anybody who's not compliant.\n\n642\n00:29:05.220 --> 00:29:08.140\nAnd with a click of a button,\nwe can remediate them.\n\n643\n00:29:08.140 --> 00:29:12.060\nSo I can ensure that my ESXi host\nconfiguration is consistent across my\n\n644\n00:29:12.060 --> 00:29:13.530\nentire environment.\n\n645\n00:29:13.530 --> 00:29:14.430\nAll right.\n\n646\n00:29:14.430 --> 00:29:17.650\nHere it goes running and notice what\nit's showing me, here's my review.\n\n647\n00:29:17.650 --> 00:29:20.900\nIt's showing me that right now\nI am able to talk to the hos.\n\n648\n00:29:20.900 --> 00:29:22.580\nThat's what the screen check mark is.\n\n649\n00:29:22.580 --> 00:29:24.380\nAnd, they're not compliant, right?\n\n650\n00:29:24.380 --> 00:29:27.070\nWe've got the red x, so it's identified\nthat it knows on our compliant.\n\n651\n00:29:27.070 --> 00:29:31.430\nI an even get the summary of what's\nnot right, and so there's my summary.\n\n652\n00:29:31.430 --> 00:29:33.620\nAnd when I hit Finish,\nthis is what it's gonna do.\n\n653\n00:29:33.620 --> 00:29:36.160\nIt's gonna configure a time server,\nit's gonna update the firewall,\n\n654\n00:29:36.160 --> 00:29:40.160\nit's gonna set the startup policy, and\nit's gonna get it put in place, okay.\n\n655\n00:29:40.160 --> 00:29:43.220\nSo now, in the background,\nit's doing that.\n\n656\n00:29:43.220 --> 00:29:44.220\nHere's the auto configuration.\n\n657\n00:29:44.220 --> 00:29:46.350\nIt's reaching out to those hosts,\nand it's doing it.\n\n658\n00:29:46.350 --> 00:29:48.910\nIt doesn't actually do\nit until you hit Finish.\n\n659\n00:29:48.910 --> 00:29:50.510\nI could have hit Cancel right there, and\n\n660\n00:29:50.510 --> 00:29:52.800\njust used that to see the summary,\nall right.\n\n661\n00:29:52.800 --> 00:29:54.350\nNow it says that it's done.\n\n662\n00:29:54.350 --> 00:29:56.500\nBut if I look at my host,\nthis still shows as not compliant.\n\n663\n00:29:56.500 --> 00:29:58.130\nOops, I closed it too soon.\n\n664\n00:29:58.130 --> 00:30:00.460\nAnd that's because it's\ngot a recheck compliance.\n\n665\n00:30:00.460 --> 00:30:01.670\nIt's two separate steps.\n\n666\n00:30:01.670 --> 00:30:03.660\nIt remediates, then it checks compliance.\n\n667\n00:30:03.660 --> 00:30:07.710\nSo it's running and doing that right now\nand as soon as that's done, there we go,\n\n668\n00:30:07.710 --> 00:30:09.170\nnice big green check marks.\n\n669\n00:30:09.170 --> 00:30:11.180\nThat's what I like to see,\nCompliant, Compliant.\n\n670\n00:30:11.180 --> 00:30:15.990\nRight now if I go to my host\nsummary screen I can look and\n\n671\n00:30:15.990 --> 00:30:18.530\nI've got two compliant hosts right.\n\n672\n00:30:18.530 --> 00:30:21.230\nMore importantly, I can verify\nthis with my own eye balls, right.\n\n673\n00:30:21.230 --> 00:30:25.880\nI can jump into my home page cuz\nsometimes I don't trust reports.\n\n674\n00:30:25.880 --> 00:30:29.950\nI can go into my host in\nclusters I can find ESX host02.\n\n675\n00:30:29.950 --> 00:30:36.290\nAnd under ESX host02 I can go to Manage\nSettings, go down to the security profile,\n\n676\n00:30:36.290 --> 00:30:40.890\nand I can find SSH and I've got a problem.\n\n677\n00:30:40.890 --> 00:30:45.720\nHere's SSH server, and if I look\nacross here, it's still set to all.\n\n678\n00:30:45.720 --> 00:30:46.440\nWhat the heck?\n\n679\n00:30:46.440 --> 00:30:49.945\nWell, I think this is gonna be old\nvCenter not refreshing my screen.\n\n680\n00:30:49.945 --> 00:30:51.238\nSo let me just hit refresh.\n\n681\n00:30:51.238 --> 00:30:54.170\nAnd I'm gonna take a look and sure enough,\n\n682\n00:30:54.170 --> 00:30:58.720\nSSH It's still set to all, so\nthat apparently didn't update right.\n\n683\n00:30:58.720 --> 00:31:00.570\nSo we're gonna have to find\nout what happened there.\n\n684\n00:31:00.570 --> 00:31:04.830\nAnd as I continue to look down,\nI should see the SSH service.\n\n685\n00:31:04.830 --> 00:31:06.290\nWell, it is running.\n\n686\n00:31:06.290 --> 00:31:09.330\nSSH is running, so\nit looks like I've got a little problem.\n\n687\n00:31:09.330 --> 00:31:11.180\nIt said I'm compliant, though.\n\n688\n00:31:11.180 --> 00:31:13.810\nWhich is odd, so I'm gonna have to go and\nfind out what happened there.\n\n689\n00:31:13.810 --> 00:31:17.010\nBut it did start SSH, and\nthat's why I got my warning sign.\n\n690\n00:31:17.010 --> 00:31:18.690\nYou're not supposed to leave SSH running,\nso\n\n691\n00:31:18.690 --> 00:31:21.170\nthat's why I've got that\nwarning sign popping up there.\n\n692\n00:31:21.170 --> 00:31:22.890\nWhich is why host01 had it,\ntoo, I imagine.\n\n693\n00:31:24.245 --> 00:31:25.495\nNow let's see, where is time server?\n\n694\n00:31:25.495 --> 00:31:27.005\nTime server is buried right here.\n\n695\n00:31:27.005 --> 00:31:28.825\nSo if I look at my time server.\n\n696\n00:31:28.825 --> 00:31:32.995\nI can see that I probably\nshould've started the NTP client,\n\n697\n00:31:32.995 --> 00:31:33.905\nI didn't think about that.\n\n698\n00:31:33.905 --> 00:31:36.775\nBut it get pool.ntp.org,\nso it got that setting.\n\n699\n00:31:36.775 --> 00:31:37.555\nThat came through right.\n\n700\n00:31:37.555 --> 00:31:41.520\nSo I must've messed up my firewall rule,\nwe'll have to verify that one.\n\n701\n00:31:41.520 --> 00:31:44.718\nAnd when I look at host01 it probably\nbroke the firewall rule here.\n\n702\n00:31:44.718 --> 00:31:48.981\nSo we'll come and take a look at it and\nsee what its SSH firewall rule is set to.\n\n703\n00:31:48.981 --> 00:31:54.121\nI can see that SSH is indeed\nrunning on host01, so that's good.\n\n704\n00:31:54.121 --> 00:31:58.861\nAnd if I look at the SSH firewall rule,\n\n705\n00:31:58.861 --> 00:32:02.426\nwhich is in here somewhere.\n\n706\n00:32:02.426 --> 00:32:05.763\nOoh now we've got some real\ninconsistencies there because it's showing\n\n707\n00:32:05.763 --> 00:32:07.501\nthat it's open just to that network.\n\n708\n00:32:07.501 --> 00:32:09.980\nSo what happened to host02?\n\n709\n00:32:09.980 --> 00:32:14.445\nWell either I accidentally deleted\nthat firewall rule from the profile so\n\n710\n00:32:14.445 --> 00:32:16.173\nit's not being checked, or\n\n711\n00:32:16.173 --> 00:32:21.153\nit's not actually in compliance which this\nis why we always wanna verify things.\n\n712\n00:32:21.153 --> 00:32:23.809\nWhat I imagine is I accidentally\nremoved the firewall rules so\n\n713\n00:32:23.809 --> 00:32:25.092\nI'll bet that's what it is.\n\n714\n00:32:25.092 --> 00:32:28.394\nAnd so if I jump back to my homepage,\nwe can find out.\n\n715\n00:32:28.394 --> 00:32:32.116\nI can just jump right back into the host\nprofiles, and in my opinion, this is one\n\n716\n00:32:32.116 --> 00:32:35.507\nof the nice things is that let's say one\nday I get a call from the admins and\n\n717\n00:32:35.507 --> 00:32:38.475\nthey say hey Don, we're changing\nout all of our time servers.\n\n718\n00:32:38.475 --> 00:32:40.270\nWe're moving to this new time server.\n\n719\n00:32:40.270 --> 00:32:42.111\nWell in the past if I had\na thousand ESX boxes,\n\n720\n00:32:42.111 --> 00:32:44.458\nI would have had to go to all\nof them to set the time server.\n\n721\n00:32:44.458 --> 00:32:47.608\nBut with a host profile,\nI can just come in and edit it here,\n\n722\n00:32:47.608 --> 00:32:49.129\nand remediates my servers.\n\n723\n00:32:49.129 --> 00:32:52.650\nSo I make a change it in one place and\nnow I can figure my entire environment.\n\n724\n00:32:52.650 --> 00:32:53.610\nThat's where these things come in handy.\n\n725\n00:32:53.610 --> 00:32:58.110\nSo if i did botch the firewall rule, which\nI fully suspect I did, I can just come and\n\n726\n00:32:58.110 --> 00:33:00.738\nadd it back in here and then it'll\nroll out and it'll be just fine.\n\n727\n00:33:00.738 --> 00:33:05.100\nSo I'm gonna edit that baseline and\nwe'll just check and see what's going on,\n\n728\n00:33:05.100 --> 00:33:08.800\nI know I'm out of time, but we can at\nleast see where I made the mistake.\n\n729\n00:33:08.800 --> 00:33:13.230\nSo I can go and edit that host profile and\nI'm going to go into my security services,\n\n730\n00:33:13.230 --> 00:33:18.790\ninto my firewall configuration,\nand my rule set configuration.\n\n731\n00:33:18.790 --> 00:33:24.090\nAnd what I'm gonna do is I'm gonna\nfind the SSH server right here,\n\n732\n00:33:24.090 --> 00:33:28.920\nand I'm gonna take a look at it,\nand here it's defined specify\n\n733\n00:33:28.920 --> 00:33:32.560\nthe configuration of a fixed rule set,\nSSH server, it is enabled.\n\n734\n00:33:32.560 --> 00:33:37.105\nAnd then, it's not allowing all and\nit's got the network, actually,\n\n735\n00:33:37.105 --> 00:33:38.383\nmy rule is correct.\n\n736\n00:33:38.383 --> 00:33:41.076\nSo in this case one of\ntwo things has happened.\n\n737\n00:33:41.076 --> 00:33:45.624\nEither one,\nmy screen just hasn't refreshed, or two,\n\n738\n00:33:45.624 --> 00:33:52.020\nthere's some kind of issue going on\nwith applying the profile to ESX host02.\n\n739\n00:33:52.020 --> 00:33:56.157\nNow if I had an issue, that's where\nI'd be able to choose the baseline,\n\n740\n00:33:56.157 --> 00:33:59.720\nclick on the issues tab and\nit would show up here.\n\n741\n00:33:59.720 --> 00:34:00.650\nOkay.\n\n742\n00:34:00.650 --> 00:34:02.380\nI don't have any issues.\n\n743\n00:34:02.380 --> 00:34:05.802\nSo I think this is just an instance\nof vCenter not refreshing the screen\n\n744\n00:34:05.802 --> 00:34:06.387\nproperly.\n\n745\n00:34:06.387 --> 00:34:09.516\nI could go and I guess I could\nuse the shell on ESX host02 but\n\n746\n00:34:09.516 --> 00:34:11.030\nyou know what I'm gonna do?\n\n747\n00:34:11.030 --> 00:34:16.505\nI'm gonna recheck compliance and\njust make sure when I drill into here,\n\n748\n00:34:16.505 --> 00:34:19.132\nyeah see it just doesn't show it.\n\n749\n00:34:19.132 --> 00:34:23.866\nIt is very strange that it would do that\nbut we can go back to our host profiles\n\n750\n00:34:23.866 --> 00:34:28.316\nand we can always recheck compliance\non this one and see what happens.\n\n751\n00:34:28.316 --> 00:34:31.831\nWhat I may find is that if I go and check\nthat profile compliance that it shows up\n\n752\n00:34:31.831 --> 00:34:33.794\nthis time as not being compliant, right?\n\n753\n00:34:33.794 --> 00:34:36.664\nMaybe it tried to apply the settings,\nit thought it took, and then for\n\n754\n00:34:36.664 --> 00:34:38.377\nsome reason it got undone again, right?\n\n755\n00:34:38.377 --> 00:34:42.601\nIt could be but that the host is actually\nbeing managed some other way, right?\n\n756\n00:34:42.601 --> 00:34:45.377\nThere's something else got connected and\nset that in there.\n\n757\n00:34:45.377 --> 00:34:47.300\nSo I am just going to double check that.\n\n758\n00:34:47.300 --> 00:34:50.357\nAnd all right,\ncompliance is done checking.\n\n759\n00:34:50.357 --> 00:34:52.690\nI'm going to refresh this screen.\n\n760\n00:34:52.690 --> 00:34:54.470\nIt is still showing me as compliance so\n\n761\n00:34:54.470 --> 00:34:57.750\nthat means the host inventory is\nmessed up, so that can happen.\n\n762\n00:34:57.750 --> 00:35:01.160\nvCenter does a good job of\nharvesting data but every now and\n\n763\n00:35:01.160 --> 00:35:02.630\nthen it can get off on something.\n\n764\n00:35:02.630 --> 00:35:05.650\nWe saw where it got the NTP pool server.\n\n765\n00:35:05.650 --> 00:35:11.110\nIt did get the service start for SSH,\nso it started the service, it just\n\n766\n00:35:11.110 --> 00:35:15.390\ndidn't configure that fire wall rule right\nso I imagine that it's just my screen.\n\n767\n00:35:15.390 --> 00:35:18.380\nSo let's just check one more time and\nsee if it's already fixed for\n\n768\n00:35:18.380 --> 00:35:23.130\nus, otherwise I'm not gonna\nget obsessive over it.\n\n769\n00:35:23.130 --> 00:35:27.810\nSo I'm gonna go into my settings,\nmy security profile and I'm gonna refresh\n\n770\n00:35:27.810 --> 00:35:32.610\nthat screen, and yeah boy that just does\nnot, let's see if it shows up under my\n\n771\n00:35:32.610 --> 00:35:36.010\nedit screen, cuz edit's supposed to\nalways show you the latest and greatest.\n\n772\n00:35:36.010 --> 00:35:38.210\nAnd it sure isn't, that is strange.\n\n773\n00:35:38.210 --> 00:35:40.990\nIt is not bringing that setting along,\nso all right,\n\n774\n00:35:40.990 --> 00:35:43.730\nit looks like we have an issue there, but\nwe did see the other settings come along.\n\n775\n00:35:43.730 --> 00:35:46.730\nThis does reinforce the fact that you\nalways wanna double check your settings,\n\n776\n00:35:46.730 --> 00:35:48.660\nrun it on a test bed,\nmake sure they work out, and\n\n777\n00:35:48.660 --> 00:35:50.960\nif you've got an issue you can go and\ntrack that down.\n\n778\n00:35:50.960 --> 00:35:53.940\nYeah, in my case it's just didn't\nwant to process any of it.\n\n779\n00:35:53.940 --> 00:35:57.500\n>> Yeah, I could see Don where just\na wrong host profile setting you can lock\n\n780\n00:35:57.500 --> 00:36:00.300\nyourself completely out of a box,\nmisconfiguring the firewall there.\n\n781\n00:36:00.300 --> 00:36:02.780\nNow it does look like we're coming\nto the end of another episode, but\n\n782\n00:36:02.780 --> 00:36:04.920\nbefore we sign out do you\nhave any additional words?\n\n783\n00:36:04.920 --> 00:36:07.167\n>> I think we've kinda seen it.\n\n784\n00:36:07.167 --> 00:36:08.641\nThe host profiles are incredibly useful,\nso\n\n785\n00:36:08.641 --> 00:36:10.247\nthey're definitely\nsomething you want to use.\n\n786\n00:36:10.247 --> 00:36:12.837\nEven if you're environment is\nalready completely set up,\n\n787\n00:36:12.837 --> 00:36:14.907\nyou can create a host\nprofile of each machine and\n\n788\n00:36:14.907 --> 00:36:18.760\njust use it to track compliance, so\nyou can recognize when something changes.\n\n789\n00:36:18.760 --> 00:36:21.026\nMaybe you got a junior admin that\nenables us at sage to use it for\n\n790\n00:36:21.026 --> 00:36:22.867\ntroubleshooting and\nthen forgets to turn it off.\n\n791\n00:36:22.867 --> 00:36:25.396\nNow you can spot it and you get it put\nback the way that you wanted it, right?\n\n792\n00:36:25.396 --> 00:36:27.254\nYou can easily get that set.\n\n793\n00:36:27.254 --> 00:36:31.098\nJust always remember to double check for\nsettings that require a reboot,\n\n794\n00:36:31.098 --> 00:36:33.020\nbecause that can cause issues here.\n\n795\n00:36:33.020 --> 00:36:34.720\nAnd actually that might even\nbe what I'm bumping into,\n\n796\n00:36:34.720 --> 00:36:37.320\nthe firewall service\nmight need to restart.\n\n797\n00:36:37.320 --> 00:36:41.640\nBut just be aware of that and\nmake sure that you only do the compliance,\n\n798\n00:36:41.640 --> 00:36:44.940\nthe remediation,\nif you can afford that down time for\n\n799\n00:36:44.940 --> 00:36:46.610\nsettings that that applies to.\n\n800\n00:36:46.610 --> 00:36:49.060\n>> Well Don, as always we appreciate\nhaving you here in the studios and\n\n801\n00:36:49.060 --> 00:36:50.710\nwe appreciate you the viewer watching.\n\n802\n00:36:50.710 --> 00:36:53.245\nSigning out for IT Pro TV,\nI've been your host Wes Bryan.\n\n803\n00:36:53.245 --> 00:36:54.181\n>> And I'm Don Pezete.\n\n804\n00:36:54.181 --> 00:36:56.336\n>> And we'll see you next time.\n\n805\n00:36:56.336 --> 00:37:01.689\n[MUSIC]\n\n",
          "vimeoId": "169850787"
        },
        {
          "description": "In this episode, Wes and Don start the process of upgrading older versions of vSphere to vSphere version 6. They discuss the VMware's 4 phases process to perform a complete upgrade. They demonstrate Phase 1 upgrading the vCenter server.",
          "length": "2077",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-1-upgrading_to_vsphere6-062016-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-1-upgrading_to_vsphere6-062016-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-1-upgrading_to_vsphere6-062016-1-sm.jpg",
          "title": "Upgrading to vSphere 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.768 --> 00:00:15.369\nWelcome back to another great episode on\nthe making here at IT Pro TV, thanks for\n\n3\n00:00:15.369 --> 00:00:16.040\njoining us.\n\n4\n00:00:16.040 --> 00:00:19.724\nI'm your host Wes Bryan and coming back\nat you with more VMWare, that's right.\n\n5\n00:00:19.724 --> 00:00:23.113\nWe're coming back at you with\nVMWare Certified Professional Version 6.\n\n6\n00:00:23.113 --> 00:00:26.170\nJoining me back in the studios today\nis none other than Mr Don Pezet.\n\n7\n00:00:26.170 --> 00:00:27.300\nDon, how are you doing sir?\n\n8\n00:00:27.300 --> 00:00:28.230\n>> I'm doing great Wes,\n\n9\n00:00:28.230 --> 00:00:32.170\nready to dive right back into the world\nof vSphere 6 and well, wait a minute,\n\n10\n00:00:32.170 --> 00:00:34.915\nwe're not actually jumping into\nthe world of vSphere 6, are we?\n\n11\n00:00:34.915 --> 00:00:39.875\nWe're gonna jump into the world of vSphere\n5 or vSphere 5.5 because, believe it or\n\n12\n00:00:39.875 --> 00:00:42.555\nnot, everybody goes\nstraight in to vSphere 6.\n\n13\n00:00:42.555 --> 00:00:44.025\nIn fact, it's pretty common for\n\n14\n00:00:44.025 --> 00:00:46.880\nyou to go to work somewhere or you're\nalready working in an environment, and\n\n15\n00:00:46.880 --> 00:00:49.820\nyou have a previous version of vSphere\nin place, and that's where we're\n\n16\n00:00:49.820 --> 00:00:53.120\ngonna start this episode is with\nan older version of vSphere.\n\n17\n00:00:53.120 --> 00:00:55.130\nAnd what do we do with an older version?\n\n18\n00:00:55.130 --> 00:00:58.980\nWe upgrade it, right, we need to get to\nvSphere 6 so we can take advantage of all\n\n19\n00:00:58.980 --> 00:01:00.960\nthe features that we've been\ntalking about in this series or\n\n20\n00:01:00.960 --> 00:01:03.140\nthat we're going to talk\nabout in upcoming episodes.\n\n21\n00:01:03.140 --> 00:01:04.484\nSo, that's what we're\ngonna focus on right here.\n\n22\n00:01:04.484 --> 00:01:09.750\nAnd I know I've mentioned upgrades,\nat least briefly, in a few other episodes.\n\n23\n00:01:09.750 --> 00:01:12.012\nThis time, we're actually going to do it.\n\n24\n00:01:12.012 --> 00:01:14.459\nUpgrading vSphere is not that hard.\n\n25\n00:01:14.459 --> 00:01:17.790\nThere's just a lot of steps to it and\nit takes a lot of time.\n\n26\n00:01:17.790 --> 00:01:20.430\nAnd there are a lot of spots\nwhere you can make a mistake.\n\n27\n00:01:20.430 --> 00:01:23.930\nSo it’s important that we understand\nthe steps, we understand the process and\n\n28\n00:01:23.930 --> 00:01:26.110\nwe go through it effectively and\nefficiently.\n\n29\n00:01:26.110 --> 00:01:29.870\nSo what we're gonna do is we're\ngonna highlight the official\n\n30\n00:01:29.870 --> 00:01:33.070\nVMWare four step upgrade process.\n\n31\n00:01:33.070 --> 00:01:35.092\nAnd see how that goes in the play.\n\n32\n00:01:35.092 --> 00:01:37.359\nAnd on the exam,\nthat's what we need to remember.\n\n33\n00:01:37.359 --> 00:01:40.440\nThere's these four phases that we\nneed to step through as we upgrade.\n\n34\n00:01:40.440 --> 00:01:42.920\nIn real-life,\nyou'll find that there's probably seven or\n\n35\n00:01:42.920 --> 00:01:45.110\neight phases that you\nreally wanna go through.\n\n36\n00:01:45.110 --> 00:01:46.210\nBut for the exam we've got four.\n\n37\n00:01:46.210 --> 00:01:49.580\nSo it's not so bad that you kinda\nmemorize it and have a handle on that.\n\n38\n00:01:49.580 --> 00:01:54.070\nAll right, so let's do a quick\noverview here of what the phases are.\n\n39\n00:01:54.070 --> 00:01:58.680\nSo in the official VMWare world,\nwe've got four phases.\n\n40\n00:01:58.680 --> 00:02:00.400\nThe first phase is very important.\n\n41\n00:02:00.400 --> 00:02:03.190\nPhase one is upgrade vCenter.\n\n42\n00:02:03.190 --> 00:02:05.840\nYou always upgrade vCenter first.\n\n43\n00:02:05.840 --> 00:02:08.700\nRemember in the vSphere suite,\nyou got a lot of products.\n\n44\n00:02:08.700 --> 00:02:14.573\nYou've got ESXi, we've got the vCenter\nserver, you've got your SSO servers,\n\n45\n00:02:14.573 --> 00:02:20.125\nmaybe you have Horizon View or whatever\nother products you've got in place.\n\n46\n00:02:20.125 --> 00:02:24.580\nAll these different components, so\nwhich one do you upgrade first?\n\n47\n00:02:24.580 --> 00:02:25.940\nWhere do you even start?\n\n48\n00:02:25.940 --> 00:02:28.370\nYou should always start with vCenter.\n\n49\n00:02:28.370 --> 00:02:31.759\nAnd the reason for\nthat is a version of VCenter,\n\n50\n00:02:31.759 --> 00:02:35.339\na new version of vCenter\ncan manage old products.\n\n51\n00:02:35.339 --> 00:02:37.281\nBut not the other way around,\n\n52\n00:02:37.281 --> 00:02:42.040\nyou can't have an old version of\nvCenter managing newer products.\n\n53\n00:02:42.040 --> 00:02:48.980\nSo for example, if I have vCenter 6.0,\nit can manage ESXI 3.0 machines.\n\n54\n00:02:48.980 --> 00:02:53.530\n4.1, 5.5, whatever, it can manage\nall those, right, it doesn't care.\n\n55\n00:02:53.530 --> 00:02:57.690\nIt's the newest version, it understands\nhow to deal with those older hosts.\n\n56\n00:02:57.690 --> 00:02:59.560\nBut let's say I was the other way around.\n\n57\n00:02:59.560 --> 00:03:06.930\nLet's say that I had a vCenter 5 system\nand I bring up an ESXI 6 machine.\n\n58\n00:03:06.930 --> 00:03:11.980\nWell, vCenter hasn't been updated to\nreflect that new host version and\n\n59\n00:03:11.980 --> 00:03:13.370\nit's not gonna be able to manage it.\n\n60\n00:03:13.370 --> 00:03:16.320\nIt won't recognize that host,\nwon't bring it in.\n\n61\n00:03:16.320 --> 00:03:17.710\nAnd so now it's gonna fail.\n\n62\n00:03:17.710 --> 00:03:21.250\nSo if we upgrade our host first,\nwe're gonna end up in bad shape.\n\n63\n00:03:21.250 --> 00:03:24.460\nYou're gonna break vMotion, and you'll\nbreak the distributor resource schedule.\n\n64\n00:03:24.460 --> 00:03:26.360\nYou're gonna break a lot of stuff, right?\n\n65\n00:03:26.360 --> 00:03:28.900\nSo we need to upgrade vCenter first.\n\n66\n00:03:28.900 --> 00:03:31.450\nAnd then after that, we can start\nupgrading our other components and\n\n67\n00:03:31.450 --> 00:03:34.180\nwe're safe, but\nvCenter is where we start, right?\n\n68\n00:03:34.180 --> 00:03:38.320\nAnd it may be that you choose to do an\nin-place upgrade, where you just upgrade\n\n69\n00:03:38.320 --> 00:03:42.120\nyour existing system, or maybe you just\ndecide to start from scratch, start over.\n\n70\n00:03:42.120 --> 00:03:45.400\nSo bring up an all new vCenter 6 box and\n\n71\n00:03:45.400 --> 00:03:50.130\nthen have that vCenter 5 or whatever box\njust go away, and that's the end of it.\n\n72\n00:03:50.130 --> 00:03:51.670\nYou had a couple of choices there.\n\n73\n00:03:51.670 --> 00:03:55.410\nBut phase one, upgrade vCenter.\n\n74\n00:03:55.410 --> 00:03:57.044\nOnce that's done then\nwe move into phase two.\n\n75\n00:03:57.044 --> 00:03:59.861\nAnd phase two is where\nwe upgrade our hosts,\n\n76\n00:03:59.861 --> 00:04:03.770\nthe EXXI host that you've got deployed,\nupgrade them.\n\n77\n00:04:03.770 --> 00:04:05.440\nWe're not in a big hurry on this, right.\n\n78\n00:04:05.440 --> 00:04:08.510\nWe can do it weeks or\nmonths later if we wanted, years later.\n\n79\n00:04:08.510 --> 00:04:10.710\nOr we could do it right away,\nit's up to you but\n\n80\n00:04:10.710 --> 00:04:13.075\nwe need to upgrade those hosts next,\nall right?\n\n81\n00:04:13.075 --> 00:04:17.621\nOnce that's done then we tackle our\nvirtual machines, that's phase three.\n\n82\n00:04:17.621 --> 00:04:20.250\nOur virtual machines,\nthere's two things we upgrade on them.\n\n83\n00:04:20.250 --> 00:04:25.905\nThere's VMware tools and there is the\nhardware version of the virtual machine.\n\n84\n00:04:25.905 --> 00:04:27.770\nWe've talked about that is\nin some other episode too.\n\n85\n00:04:27.770 --> 00:04:30.150\nWhen you create a virtual machine,\nyou pick a hardware version.\n\n86\n00:04:30.150 --> 00:04:33.790\nVersion 10, version 11 and\nit's all about compatibility.\n\n87\n00:04:33.790 --> 00:04:36.980\nYou might not wanna update your\nhardware version right away.\n\n88\n00:04:36.980 --> 00:04:41.450\nIf you're doing vMotion and you still\nhave hosts that are different versions,\n\n89\n00:04:41.450 --> 00:04:45.220\nyou might not wanna move a virtual\nmachine to a higher hardware version and\n\n90\n00:04:45.220 --> 00:04:47.220\nlimit the hosts that it can reside on.\n\n91\n00:04:47.220 --> 00:04:48.810\nSo you might wanna wait.\n\n92\n00:04:48.810 --> 00:04:52.310\nBut if you've upgraded all of your\nhost then you can upgrade your virtual\n\n93\n00:04:52.310 --> 00:04:56.070\nmachine's hardware version and\nnow you can take advantage of that.\n\n94\n00:04:56.070 --> 00:04:57.080\nUsually we don't worry about it.\n\n95\n00:04:57.080 --> 00:04:59.520\nThe hardware version of the VM,\nwhat does it gives us?\n\n96\n00:04:59.520 --> 00:05:02.960\nIt gives us usually access to more RAM,\naccess to more storage.\n\n97\n00:05:02.960 --> 00:05:06.058\nBut if you already got enough RAM,\nyou already got enough storage in that VM,\n\n98\n00:05:06.058 --> 00:05:08.930\nthen you really don't benefit from\nbumping up that hardware version.\n\n99\n00:05:08.930 --> 00:05:10.150\nYou might not worry about that.\n\n100\n00:05:10.150 --> 00:05:14.346\nAll right, but updating the VMware tools,\nthat's really important.\n\n101\n00:05:14.346 --> 00:05:16.132\nAnd so,\nwe'll see that later in this episode too.\n\n102\n00:05:16.132 --> 00:05:18.050\nWe've gotta get those tools updated, so\n\n103\n00:05:18.050 --> 00:05:21.120\nthat virtual machine knows\nhow to talk to vCenter.\n\n104\n00:05:21.120 --> 00:05:23.430\nvCenter will know how to\nmanage those virtual machines.\n\n105\n00:05:23.430 --> 00:05:26.310\nEven with the older VMware tools,\nbut it will throw up a warning.\n\n106\n00:05:26.310 --> 00:05:30.160\nAnd to get the best compatibility, we need\nto update to the new versions, all right.\n\n107\n00:05:30.160 --> 00:05:31.300\nAnd then phase four,\n\n108\n00:05:31.300 --> 00:05:35.190\nthe final phase, is we kind of\nwrap up our last couple of things.\n\n109\n00:05:35.190 --> 00:05:37.416\nWe need to tackle our data stores.\n\n110\n00:05:37.416 --> 00:05:39.759\nAnd I usually just, in real life land,\n\n111\n00:05:39.759 --> 00:05:44.092\nin a slightly different order but\nthis is the official VMWare four step.\n\n112\n00:05:44.092 --> 00:05:49.550\nThe data stores, if you've got VMFS 3 data\nstores, then we can update them to VMFS 5.\n\n113\n00:05:49.550 --> 00:05:56.320\nNow remember that with vSphere, they don't\nupdate VMFS with every single release.\n\n114\n00:05:56.320 --> 00:05:59.160\nSo there was version 3,\nand now there's version 5.\n\n115\n00:05:59.160 --> 00:06:02.410\nThere was no version 4,\nand there is no version 6.\n\n116\n00:06:02.410 --> 00:06:06.970\nSo if all of my data stores\nare already VMFS version 5,\n\n117\n00:06:06.970 --> 00:06:10.370\nwhen I do the upgrade to vSphere 6,\nthere's nothing to do.\n\n118\n00:06:10.370 --> 00:06:11.861\nData stores are already upgraded.\n\n119\n00:06:11.861 --> 00:06:16.272\nOkay, so the four,\nlet me recap the four official steps.\n\n120\n00:06:16.272 --> 00:06:20.070\nUpgrade vCenter, upgrade your hosts,\n\n121\n00:06:20.070 --> 00:06:24.250\nupgrade your virtual machines, and\nthen upgrade your data stores.\n\n122\n00:06:24.250 --> 00:06:28.170\nIn that order, that's the order\nthat VMWare recommends, all right.\n\n123\n00:06:28.170 --> 00:06:30.240\nNow, let me put a real world spin on this.\n\n124\n00:06:30.240 --> 00:06:32.520\nCuz I normally change\nthings around a little bit.\n\n125\n00:06:32.520 --> 00:06:34.860\nI like to add in a different phase one.\n\n126\n00:06:34.860 --> 00:06:38.620\nFor me, phase one is back\nup the current environment.\n\n127\n00:06:38.620 --> 00:06:42.680\nBack everything up because\nupgrades go wrong all the time.\n\n128\n00:06:42.680 --> 00:06:46.250\nThere is all sorts of little things\nthat can cause an upgrade to fail.\n\n129\n00:06:46.250 --> 00:06:49.230\nYou might be upgrading your database and\nthe database crashes or\n\n130\n00:06:49.230 --> 00:06:53.350\nthe server doesn't update, your host\nOS that you're running vCenter on\n\n131\n00:06:53.350 --> 00:06:57.650\nmight have a problem, the vCenter upgrade\nitself might fail halfway through.\n\n132\n00:06:57.650 --> 00:06:58.440\nIf you have a backup,\n\n133\n00:06:58.440 --> 00:07:02.010\nyou can quickly restore, no sweat,\nyou are back in business really quick.\n\n134\n00:07:02.010 --> 00:07:03.760\nIf you don't have a backup though,\n\n135\n00:07:03.760 --> 00:07:06.860\nyou are really gonna be hurting to\nget that environment fixed again.\n\n136\n00:07:06.860 --> 00:07:10.450\nSo for me,\nphase one is take a backup, right?\n\n137\n00:07:10.450 --> 00:07:15.320\nThen I upgrade vCenter, and\nthen I upgrade my hosts.\n\n138\n00:07:15.320 --> 00:07:17.720\nAnd then, for me personally,\n\n139\n00:07:17.720 --> 00:07:22.450\nI usually update my data storage before\nI start updating my virtual machines.\n\n140\n00:07:22.450 --> 00:07:24.680\nAnd the reason I do that is because,\n\n141\n00:07:24.680 --> 00:07:27.620\nthere's a few spots where you can run\ninto errors when you go to upgrade.\n\n142\n00:07:27.620 --> 00:07:30.150\nYou can actually run into errors\nwhen you're upgrading hosts, too.\n\n143\n00:07:30.150 --> 00:07:33.300\nSo, you could even upgrade your data\nstores prior to upgrading the host.\n\n144\n00:07:33.300 --> 00:07:35.400\nThat works for shared data stores,\ndoesn't work so well for\n\n145\n00:07:35.400 --> 00:07:36.600\nlocal data stores, though.\n\n146\n00:07:36.600 --> 00:07:39.600\nSo, you kind of have to work out\nwhat's best for your environment, and\n\n147\n00:07:39.600 --> 00:07:41.120\nyou can do that update, right?\n\n148\n00:07:41.120 --> 00:07:43.780\nThe reality is that data stores\naren't updated all that often and\n\n149\n00:07:43.780 --> 00:07:46.160\ngoing from 5 to 6, there is no update.\n\n150\n00:07:46.160 --> 00:07:50.310\nSo you really only bump into this if\nyou're going from vSphere 4 up to 6.\n\n151\n00:07:50.310 --> 00:07:53.861\nIf you're skipping a version,\nyou'd run into that problem, right?\n\n152\n00:07:53.861 --> 00:07:56.267\nThen we get to that upgrade\nthe virtual machine,\n\n153\n00:07:56.267 --> 00:07:58.975\nwhich is their phase three\nwould be like my phase four.\n\n154\n00:07:58.975 --> 00:08:01.166\nAnd then you have update the data stores.\n\n155\n00:08:01.166 --> 00:08:03.073\nThere's one more phase they leave off.\n\n156\n00:08:03.073 --> 00:08:05.487\nWhich is updating your network, right?\n\n157\n00:08:05.487 --> 00:08:09.730\nWith this virtual switches, our vSwitches\nand our Distributed Virtual Switches.\n\n158\n00:08:09.730 --> 00:08:11.861\nThose have updates also and so\n\n159\n00:08:11.861 --> 00:08:16.390\nwe might want to update that to\nthe latest dvSwitch version 6.\n\n160\n00:08:16.390 --> 00:08:18.840\nAnd so I usually do those last, right.\n\n161\n00:08:18.840 --> 00:08:22.900\nUpgrading the virtual switches is\nthe last thing I do because, typically,\n\n162\n00:08:22.900 --> 00:08:26.820\nupgrading a virtual switch doesn't\nimprove stability, it adds features.\n\n163\n00:08:26.820 --> 00:08:27.870\nAnd we can wait on features.\n\n164\n00:08:27.870 --> 00:08:30.450\nI don't necessarily need\nthose features on day one.\n\n165\n00:08:30.450 --> 00:08:34.613\nAnd the latest version of vCenter,\nif I'm running vCenter 6,\n\n166\n00:08:34.613 --> 00:08:39.110\nit supports all the virtual switches\nway back to, I think to 3.0.\n\n167\n00:08:39.110 --> 00:08:42.490\nSo it goes back past VM,\nwhere it's currently supported OSs.\n\n168\n00:08:42.490 --> 00:08:45.020\nSo you can bring up those old\nvSwitches and they run just fine.\n\n169\n00:08:45.020 --> 00:08:46.652\nSo that's usually kinda low priority for\nme.\n\n170\n00:08:46.652 --> 00:08:51.310\nSo VMware's official,\nlet me just recap this for the exam.\n\n171\n00:08:51.310 --> 00:08:53.670\nUpgrade vCenter is phase one.\n\n172\n00:08:53.670 --> 00:08:56.750\nPhase two is upgrade your EXSi hosts.\n\n173\n00:08:56.750 --> 00:08:59.290\nPhase three,\nupgrade your virtual machines.\n\n174\n00:08:59.290 --> 00:09:01.840\nPhase four,\nupgrade your data stores, right.\n\n175\n00:09:01.840 --> 00:09:03.950\nThat's the official VMWare way.\n\n176\n00:09:03.950 --> 00:09:07.830\nThe Don way, phase one, take a backup.\n\n177\n00:09:07.830 --> 00:09:09.900\nPhase two, upgrade vCenter.\n\n178\n00:09:09.900 --> 00:09:12.120\nPhase three, upgrade your hosts.\n\n179\n00:09:12.120 --> 00:09:14.600\nPhase four, upgrade your data stores.\n\n180\n00:09:14.600 --> 00:09:17.180\nPhase five, upgrade your virtual machines.\n\n181\n00:09:17.180 --> 00:09:19.980\nPhase six, upgrade your vSwitches, right?\n\n182\n00:09:19.980 --> 00:09:21.310\nSo my way's a little more complex, but\n\n183\n00:09:21.310 --> 00:09:24.450\nI take into account a couple of extra\nthings that are kinda nice to do.\n\n184\n00:09:24.450 --> 00:09:26.770\nFor the exam,\njust remember there are four step,\n\n185\n00:09:26.770 --> 00:09:28.470\nthat's the one that they\nwant you to remember, right.\n\n186\n00:09:28.470 --> 00:09:29.990\nAnd I'll put a link in the show notes for\n\n187\n00:09:29.990 --> 00:09:32.280\nyou guys that goes to the official\nupgrade page for VMware.\n\n188\n00:09:32.280 --> 00:09:34.537\nAnd you'll see their four phases there,\nthey're detailed.\n\n189\n00:09:34.537 --> 00:09:37.880\nReally, I mean,\nthat is the way they recommend it.\n\n190\n00:09:37.880 --> 00:09:40.550\nAll right,\nanother thing to remember is that\n\n191\n00:09:40.550 --> 00:09:43.510\na lot of these upgrades are one-way,\nright.\n\n192\n00:09:43.510 --> 00:09:46.120\nIf I upgrade the hardware version\nof a virtual machine, and\n\n193\n00:09:46.120 --> 00:09:49.095\nthen I decide that there's something\nwrong and I wanna downgrade,\n\n194\n00:09:49.095 --> 00:09:50.830\nthere is no downgrade functionality.\n\n195\n00:09:50.830 --> 00:09:53.550\nThe only way to downgrade\nis to roll back a snapshot.\n\n196\n00:09:53.550 --> 00:09:55.960\nSo if I have a snapshot of the virtual\nmachine, I can roll it back.\n\n197\n00:09:55.960 --> 00:09:59.830\nIf I don't have a snapshot,\nI gotta go to backup tapes, right.\n\n198\n00:09:59.830 --> 00:10:04.150\nAnd either way, snapshot or backup tape,\nI'm gonna lose data, aren't I?\n\n199\n00:10:04.150 --> 00:10:06.985\nIf I upgrade that hardware version and\nit's in production for\n\n200\n00:10:06.985 --> 00:10:10.595\na day, and then I decide it's not\nright and I wanna roll it back,\n\n201\n00:10:10.595 --> 00:10:12.865\nI'm gonna lose everything\nthat was done that day.\n\n202\n00:10:12.865 --> 00:10:16.555\nSo you want to avoid doing\ndowngrades wherever possible.\n\n203\n00:10:16.555 --> 00:10:20.235\nAnd the best way to avoid\ndoing a downgrade is testing.\n\n204\n00:10:20.235 --> 00:10:22.155\nAlways test it out.\n\n205\n00:10:22.155 --> 00:10:23.992\nTest out the new version of vCenter.\n\n206\n00:10:23.992 --> 00:10:26.285\nTest out the new version of ESXi.\n\n207\n00:10:26.285 --> 00:10:27.815\nMake sure it works in your environment.\n\n208\n00:10:27.815 --> 00:10:30.570\nDo good testing, research and development.\n\n209\n00:10:30.570 --> 00:10:35.420\nAnd once you know it's nice and stable,\nthen roll it in production, right.\n\n210\n00:10:35.420 --> 00:10:40.680\nAlso, consider upgrading just one host,\nand not all of your hosts, right?\n\n211\n00:10:40.680 --> 00:10:42.170\nAnd that way if you have\nproblems with that one host,\n\n212\n00:10:42.170 --> 00:10:44.910\nyou can just move the virtual\nmachines off it and you'll be okay.\n\n213\n00:10:44.910 --> 00:10:47.993\nVersus if you upgrade all your hosts, now\nit doesn't matter where you move your VMs,\n\n214\n00:10:47.993 --> 00:10:50.280\nthey're all on the new\nversion of the host, right.\n\n215\n00:10:50.280 --> 00:10:52.170\nThese are all things that\nwe need to think about\n\n216\n00:10:52.170 --> 00:10:53.041\nwhen we're doing an upgrade, all right.\n\n217\n00:10:54.680 --> 00:10:57.524\nSo those are important,\nwe need to understand those.\n\n218\n00:10:57.524 --> 00:11:01.150\nBut once you get past that,\nthen it's time to actually do the upgrade.\n\n219\n00:11:01.150 --> 00:11:04.430\nAnd the upgrade's not so bad, right,\nso let's start with phase one.\n\n220\n00:11:04.430 --> 00:11:07.180\nI'm gonna skip my phase of doing a backup.\n\n221\n00:11:07.180 --> 00:11:10.300\nI know,\nin real life I would never do that.\n\n222\n00:11:10.300 --> 00:11:13.994\nBackups have saved my bacon more than\nonce, right, they're definitely important.\n\n223\n00:11:13.994 --> 00:11:15.880\nBut we're gonna do a separate\nshow on backups, so\n\n224\n00:11:15.880 --> 00:11:19.570\nyou'll get a chance to see backing\nup vSphere in another episode.\n\n225\n00:11:19.570 --> 00:11:22.320\nBut when we're ready to do the upgrade,\n\n226\n00:11:22.320 --> 00:11:24.920\nthere's a couple of things that we\nneed to think about for phase one.\n\n227\n00:11:24.920 --> 00:11:26.960\nPhase one is upgrading vCenter.\n\n228\n00:11:26.960 --> 00:11:31.170\nWell, vCenter has more than one component,\ndoesn't it?\n\n229\n00:11:31.170 --> 00:11:37.660\nWe talked about how, in vSphere 6,\nwe have our two main components.\n\n230\n00:11:37.660 --> 00:11:39.290\nWhich is the vCenter Server and\n\n231\n00:11:39.290 --> 00:11:42.870\nthen, all the other services get stuck\ninto the Platform Controller, right.\n\n232\n00:11:42.870 --> 00:11:48.600\nSo we have the SSO and those features\nthat are stored as a separate service.\n\n233\n00:11:48.600 --> 00:11:51.459\nSo if they're together,\nif we did an embedded install,\n\n234\n00:11:51.459 --> 00:11:54.087\nwe can just do what's\ncalled an in-place upgrade.\n\n235\n00:11:54.087 --> 00:11:59.480\nAnd it'll upgrade both of those\nsystems for us, no big deal, right?\n\n236\n00:11:59.480 --> 00:12:01.860\nBut if I split those apart.\n\n237\n00:12:01.860 --> 00:12:06.600\nIf I have my vCenter Server\nrunning on one system and\n\n238\n00:12:06.600 --> 00:12:09.910\nI have my Single Sign-On and\nall that running on a separate system.\n\n239\n00:12:09.910 --> 00:12:12.640\nNow I need to upgrade\nthe individual components, okay.\n\n240\n00:12:12.640 --> 00:12:16.770\nAnd you still upgrade vCenter first and\n\n241\n00:12:16.770 --> 00:12:19.610\nthen do the Single Sign-On and\nother components second, right.\n\n242\n00:12:19.610 --> 00:12:23.270\nSo vCenter Server is always first\nwhether it's an embedded install or\n\n243\n00:12:23.270 --> 00:12:24.220\nwhether they're separate.\n\n244\n00:12:24.220 --> 00:12:25.980\nYou still do the vCenter Server first and\n\n245\n00:12:25.980 --> 00:12:26.999\nthen the other components come next,\nall right.\n\n246\n00:12:28.030 --> 00:12:32.140\nNow in vSphere 6,\nwe just have two components, right,\n\n247\n00:12:32.140 --> 00:12:34.666\nthe vCenter Server and\nthe Platform Controller, right.\n\n248\n00:12:34.666 --> 00:12:37.890\nSo the two different pieces and that's it.\n\n249\n00:12:37.890 --> 00:12:42.641\nBut in earlier versions of VMware,\nin vSphere 5.5 and\n\n250\n00:12:42.641 --> 00:12:46.380\nearlier, you actually had all these\ndifferent individual components, right?\n\n251\n00:12:46.380 --> 00:12:48.618\nSo you had,\nI think it was five different components.\n\n252\n00:12:48.618 --> 00:12:50.600\nBecause Single Sign-On\nwas its own thing and\n\n253\n00:12:50.600 --> 00:12:52.510\nthe certificate services\nwas its own thing.\n\n254\n00:12:52.510 --> 00:12:56.810\nSo in theory, you could have it spread\nacross many different machines.\n\n255\n00:12:56.810 --> 00:13:00.770\nWell, you upgrade vCenter first and\nthen the other components,\n\n256\n00:13:00.770 --> 00:13:02.300\nit doesn't necessarily matter the order,\n\n257\n00:13:02.300 --> 00:13:04.140\nbut you typically want to do\nthem around the same time.\n\n258\n00:13:04.140 --> 00:13:08.550\nSo you wanna upgrade them all about the\nsame time after vCenter is done, right.\n\n259\n00:13:08.550 --> 00:13:11.780\nSo when we do that upgrade,\nfor the most part,\n\n260\n00:13:11.780 --> 00:13:15.700\nit is literally popping in the disk and\nrunning the installer.\n\n261\n00:13:15.700 --> 00:13:18.140\nIt'll sense the installed components and\nit'll upgrade them, right.\n\n262\n00:13:18.140 --> 00:13:20.590\nSo it's not a hard thing to do.\n\n263\n00:13:20.590 --> 00:13:23.780\nBut one area that can be a little\ndifficult is the database, right.\n\n264\n00:13:24.780 --> 00:13:28.123\nIf I was installing vSphere 5 right now,\n\n265\n00:13:28.123 --> 00:13:34.153\nvSphere 5 supported Microsoft SQL 2005 and\nMicrosoft SQL 2012.\n\n266\n00:13:34.153 --> 00:13:36.924\nAll right, I'm sorry,\nMicrosoft SQL 2008, sorry.\n\n267\n00:13:36.924 --> 00:13:40.745\nLet me get my database versions\nright here, 2005 and 2008.\n\n268\n00:13:40.745 --> 00:13:45.159\nWell, vSphere 5.5 added support for\nSQL 2012.\n\n269\n00:13:45.159 --> 00:13:51.660\nAnd now we're in vSphere 6 where we\nhave support for SQL 2008 and SQL 2012.\n\n270\n00:13:51.660 --> 00:13:55.400\nNotice how vSphere 6 doesn't\nhave support for SQL 2005.\n\n271\n00:13:55.400 --> 00:14:01.348\nSo I might have vSphere\n5 running with SQL 2005.\n\n272\n00:14:01.348 --> 00:14:08.550\nAnd if I upgrade to vSphere 6, vSphere\n6 doesn't support SQL 2005 anymore.\n\n273\n00:14:08.550 --> 00:14:13.960\nSo my upgrade journey would actually\nstart with upgrading my database, right.\n\n274\n00:14:13.960 --> 00:14:18.150\nUpgrading the SQL database to\na version that's supported by my new\n\n275\n00:14:18.150 --> 00:14:19.700\nvSphere install, right.\n\n276\n00:14:19.700 --> 00:14:22.330\nSame thing goes for Oracle,\nI might need to upgrade that.\n\n277\n00:14:22.330 --> 00:14:24.770\nSo those are kind of some\nkey components there.\n\n278\n00:14:24.770 --> 00:14:29.260\nThe other thing is, if I was running\nvSphere 5 and I just did the embedded\n\n279\n00:14:29.260 --> 00:14:33.270\ninstall where everything was\ninstalled on one vCenter server.\n\n280\n00:14:33.270 --> 00:14:37.260\nThen it sets up a database using\nMicrosoft SQL Server Express,\n\n281\n00:14:37.260 --> 00:14:40.230\nthe little free version of SQL\nyou can get from Microsoft.\n\n282\n00:14:40.230 --> 00:14:42.160\nThey don't support that in vSphere 6.\n\n283\n00:14:42.160 --> 00:14:47.742\nIn vSphere 6, you have the little\nPostgreSQL database Postgres, right.\n\n284\n00:14:47.742 --> 00:14:50.550\nSo it's got a Postgres\ndatabase it uses instead.\n\n285\n00:14:50.550 --> 00:14:55.450\nNow on a positive side, when you do\nthe upgrade on a standalone install, so\n\n286\n00:14:55.450 --> 00:14:58.500\nif you're upgrading that\nall-in-one vCenter Server.\n\n287\n00:14:58.500 --> 00:15:01.790\nIt'll actually convert the SQL Express\ndatabase to Postgres for you.\n\n288\n00:15:01.790 --> 00:15:04.360\nSo it'll convert that over,\nwhether you want it or not.\n\n289\n00:15:04.360 --> 00:15:08.036\nRight, they don't support Express anymore,\nso that database will be killed off and\n\n290\n00:15:08.036 --> 00:15:09.680\nPostgres will be brought up, right?\n\n291\n00:15:09.680 --> 00:15:12.020\nSo embedded installs\nare super easy to upgrade.\n\n292\n00:15:12.020 --> 00:15:13.670\nThe appliance install, same way, right?\n\n293\n00:15:13.670 --> 00:15:16.348\nAn appliance install is basically\nan embedded install and\n\n294\n00:15:16.348 --> 00:15:18.200\nit all gets upgraded at once.\n\n295\n00:15:18.200 --> 00:15:21.070\nBut if you split them out\ninto separate components,\n\n296\n00:15:21.070 --> 00:15:24.480\nyou may need to upgrade your\ndatabase server first, right?\n\n297\n00:15:24.480 --> 00:15:25.246\nOnce that's done,\n\n298\n00:15:25.246 --> 00:15:28.507\nthen we can jump into the nitty-gritty of\nupgrading the vCenter Server, all right.\n\n299\n00:15:28.507 --> 00:15:32.570\nSo let me just mention appliances\none more time real quick.\n\n300\n00:15:32.570 --> 00:15:35.442\nI'm not gonna do appliances here in\nthis show because they're super easy\n\n301\n00:15:35.442 --> 00:15:36.730\nto upgrade.\n\n302\n00:15:36.730 --> 00:15:39.530\nWhen a new version of\nvSphere comes out and\n\n303\n00:15:39.530 --> 00:15:41.159\na new version of vCenter server comes out.\n\n304\n00:15:42.240 --> 00:15:45.330\nWhen you have an appliance, you're not\nallowed to login to the appliance and\n\n305\n00:15:45.330 --> 00:15:46.400\nupgrade the underlying infrastructure.\n\n306\n00:15:46.400 --> 00:15:47.880\nIt doesn't let you do that.\n\n307\n00:15:47.880 --> 00:15:52.630\nWhat you do is, you go into your VMware\naccount, right, you go to my.vmware.com.\n\n308\n00:15:52.630 --> 00:15:56.364\nAnd you'll see the downloads for\nthe new vCenter Server and\n\n309\n00:15:56.364 --> 00:15:59.804\nyou'll see the client plugin\nas one of the downloads.\n\n310\n00:15:59.804 --> 00:16:01.344\nAnd when you download that client plugin,\n\n311\n00:16:01.344 --> 00:16:03.835\nthat's what you run on your own\nmachine to connect to the appliance.\n\n312\n00:16:03.835 --> 00:16:08.431\nAnd when you run that client, If you're\nrunning the version six client, and\n\n313\n00:16:08.431 --> 00:16:13.239\nit connects to a vCenter five server,\nit's gonna see that it's out of date, and\n\n314\n00:16:13.239 --> 00:16:16.373\nit's gonna offer upgrade,\nand you click upgrade.\n\n315\n00:16:16.373 --> 00:16:18.194\n[LAUGH] It's really hard right?\n\n316\n00:16:18.194 --> 00:16:20.940\nYou just click that button and\nthen it upgrades itself.\n\n317\n00:16:20.940 --> 00:16:22.760\nIt just take care of everything for\nyou on the backend.\n\n318\n00:16:22.760 --> 00:16:26.670\nIt's an appliance, so VMware knows\neverything about that install,\n\n319\n00:16:26.670 --> 00:16:28.610\nthey can upgrade it\nwithout your influence.\n\n320\n00:16:28.610 --> 00:16:30.935\nAll right, so that one's easy so that's\nwhy I'm not gonna do that one on the show.\n\n321\n00:16:30.935 --> 00:16:34.880\nBut where it gets hard is if you\nbuilt your own vCenter Server.\n\n322\n00:16:34.880 --> 00:16:37.209\nBecause now VMWare doesn't\nknow your install and\n\n323\n00:16:37.209 --> 00:16:38.823\nnow it's up to you to do it, okay?\n\n324\n00:16:38.823 --> 00:16:41.390\nSo let me show you what that's like.\n\n325\n00:16:41.390 --> 00:16:43.960\nI've got a Vcenter 5 system up.\n\n326\n00:16:43.960 --> 00:16:46.214\nActually, I think it's Vcenter 5.5.\n\n327\n00:16:46.214 --> 00:16:50.982\nSo I've got a vCenter 5.5 box up here,\nand I'm logged in,\n\n328\n00:16:50.982 --> 00:16:54.926\njust kind of tooling around\nhere in the system, and\n\n329\n00:16:54.926 --> 00:16:58.613\nI wanna upgrade this\nVcenter box to Vcenter 6.\n\n330\n00:16:58.613 --> 00:17:02.890\nI'm gonna start right here, phase one,\nupgrade the vCenter server first.\n\n331\n00:17:02.890 --> 00:17:06.858\nAn so if I dive here into my vCenter\nserver and I'm just gonna verify here,\n\n332\n00:17:06.858 --> 00:17:11.230\nmine's called winserver01 cuz\nI'm not good at creative names.\n\n333\n00:17:11.230 --> 00:17:13.820\nAnd if I dive in and look, there it is.\n\n334\n00:17:13.820 --> 00:17:17.870\nSo my vCenter Server is\nactually a version 5.5, okay?\n\n335\n00:17:17.870 --> 00:17:22.896\nAnd as I look at the other components\ninside of it I'll see that this is 5.5,\n\n336\n00:17:22.896 --> 00:17:26.951\nbut I've actually got a host in here,\nso this esx-host01.\n\n337\n00:17:26.951 --> 00:17:30.625\nAnd if I look at its\ninformation esx-host01,\n\n338\n00:17:30.625 --> 00:17:35.410\nI couldn't find my 5.5 ISO for\nsome reason so I did a 5.0.\n\n339\n00:17:35.410 --> 00:17:38.440\nSo I'm actually going even\nfurther back in time on that.\n\n340\n00:17:38.440 --> 00:17:43.610\nSee how I'm using a 5.5 vCenter\nserver to manage a 5.0 host, right?\n\n341\n00:17:43.610 --> 00:17:47.300\nYou always upgrade vCenter first, because\na newer version of vCenter can manage\n\n342\n00:17:47.300 --> 00:17:50.675\nolder versions of host, and\nthat's exactly what I'm doing right here.\n\n343\n00:17:50.675 --> 00:17:54.657\nBut I want to upgrade my vCenter servers,\nI want to get this guy upgraded to\n\n344\n00:17:54.657 --> 00:17:59.088\nvCenter 6.0, so I need to go to the server\nitself, which I've got right here,\n\n345\n00:17:59.088 --> 00:18:03.040\nit's a Windows server 2012 machine and\nI wanna upgrade it.\n\n346\n00:18:03.040 --> 00:18:05.960\nSo, assuming that my\ndatabase is supported,\n\n347\n00:18:05.960 --> 00:18:10.100\nand assuming that my host OS is supported,\nthen I'll be able to upgrade to this.\n\n348\n00:18:10.100 --> 00:18:12.680\nIf they aren't, I might need to\nupgrade those components first.\n\n349\n00:18:12.680 --> 00:18:15.820\nI didn't embed an install, so\nI'm actually running the SQL Express\n\n350\n00:18:15.820 --> 00:18:19.450\ndatabase on the backend,\nit's gonna upgrade that for me, right?\n\n351\n00:18:19.450 --> 00:18:23.250\nAnd then my host, well, I'm running\nServer 2008, at least I think I am.\n\n352\n00:18:23.250 --> 00:18:24.239\nLet me verify that.\n\n353\n00:18:25.300 --> 00:18:28.140\nAnd I'm running server 2008 R2 standard,\nokay?\n\n354\n00:18:29.190 --> 00:18:30.940\nvCenter 6 supports this.\n\n355\n00:18:32.060 --> 00:18:36.960\nIf I was running Windows server 2003,\nvCenter 6 does not support that.\n\n356\n00:18:36.960 --> 00:18:39.950\nAnd so I would need to upgrade\nmy host OS first, right?\n\n357\n00:18:39.950 --> 00:18:43.219\nAlthough, as I think about it, I don't\nknow that vCenter 5 supported server 2003.\n\n358\n00:18:43.219 --> 00:18:44.042\nI can't remember.\n\n359\n00:18:44.042 --> 00:18:44.939\nIt might've.\n\n360\n00:18:44.939 --> 00:18:47.530\nSo if it did,\nI'd need to upgrade my host OS.\n\n361\n00:18:47.530 --> 00:18:49.110\nBut my host OS here is fine.\n\n362\n00:18:49.110 --> 00:18:50.540\nSo I'm ready to do the install.\n\n363\n00:18:50.540 --> 00:18:54.160\nAnd the upgrade really is a matter of\njust popping the DVD in the drive.\n\n364\n00:18:54.160 --> 00:18:56.080\nSo I've got the DVD right here.\n\n365\n00:18:56.080 --> 00:19:00.190\nAnd when you launch the DVD,\nyou'll see VMWare vCenter Server.\n\n366\n00:19:00.190 --> 00:19:03.980\nHere's my vCenter for Windows and\nI can just start the install.\n\n367\n00:19:03.980 --> 00:19:05.180\nWhen I start the install.\n\n368\n00:19:06.270 --> 00:19:07.640\nIt's gonna fire up.\n\n369\n00:19:07.640 --> 00:19:10.380\nAnd see how it's extracting\nupgrade scripts.\n\n370\n00:19:10.380 --> 00:19:11.010\nRight?\n\n371\n00:19:11.010 --> 00:19:13.654\nIt sees that I'm running\na previous version of vCenter,\n\n372\n00:19:13.654 --> 00:19:15.314\nthat I'm running vCenter 5.5.\n\n373\n00:19:15.314 --> 00:19:18.342\nAnd so it knows that we're gonna\nbe upgrading to vCenter 6 and\n\n374\n00:19:18.342 --> 00:19:20.450\nit's gonna walk me through that process.\n\n375\n00:19:20.450 --> 00:19:22.550\nNow, what are those upgrade scripts?\n\n376\n00:19:22.550 --> 00:19:27.460\nWell a lot of them are just scripts that\ncopy files and puts services into place.\n\n377\n00:19:27.460 --> 00:19:29.470\nBut the important ones\nare the database scripts.\n\n378\n00:19:29.470 --> 00:19:31.820\nIt's gonna automate\nthe installation of Postgres and\n\n379\n00:19:31.820 --> 00:19:35.830\nit's gonna automate exporting\nthe SQL data from SQL Express and\n\n380\n00:19:35.830 --> 00:19:39.350\nimporting it into PostgreSQL and\nthat process is gonna happen.\n\n381\n00:19:39.350 --> 00:19:43.960\nNow notice here, it's telling me\nvCenter Single Sign-On 5.5 and\n\n382\n00:19:43.960 --> 00:19:47.050\nvCenter 5.5 are detected,\nit knows that I did an embedded install.\n\n383\n00:19:47.050 --> 00:19:49.080\nThey're both here on the same machine.\n\n384\n00:19:49.080 --> 00:19:53.860\nAnd so they're both going to get\nupgraded to vCenter server, 6.\n\n385\n00:19:53.860 --> 00:19:56.780\nIf I only had one component on here,\nit would detect that I had the two and\n\n386\n00:19:56.780 --> 00:20:00.552\nI need to upgrade vCenter first, and\nthen go upgrade the single sign on server.\n\n387\n00:20:00.552 --> 00:20:04.370\nAll right, so it's just giving me a kind\nof summary here, of what it's gonna do and\n\n388\n00:20:04.370 --> 00:20:07.550\nhow it's gonna bring everything up,\nand it's warning me about the platform\n\n389\n00:20:07.550 --> 00:20:11.550\nservices controller that I mentioned\nearlier, because it combines a bunch of\n\n390\n00:20:11.550 --> 00:20:15.860\nservices that were separate under\nearlier versions of vCenter.\n\n391\n00:20:15.860 --> 00:20:17.180\nAll right, as we move forward,\n\n392\n00:20:17.180 --> 00:20:20.380\nwe get to accept our license\nagreement which is always a blast.\n\n393\n00:20:20.380 --> 00:20:23.780\nAnd then I've gotta authenticate\nagainst single sign on.\n\n394\n00:20:23.780 --> 00:20:27.900\nOkay, now technically it hasn't\nasked me for a password yet.\n\n395\n00:20:27.900 --> 00:20:31.150\nSo I can be just any Joe Shmoe that\npopped the disc into this server.\n\n396\n00:20:31.150 --> 00:20:33.830\nNow obviously if somebody has access\nto your server on that level you've got\n\n397\n00:20:33.830 --> 00:20:34.720\nbigger problems.\n\n398\n00:20:34.720 --> 00:20:38.280\nBut we just need to authenticate with\nwhatever our administrator account is, and\n\n399\n00:20:38.280 --> 00:20:39.680\nso I'll punch that in.\n\n400\n00:20:40.740 --> 00:20:43.410\nI will try and punch that in, there we go.\n\n401\n00:20:43.410 --> 00:20:46.590\nAnd if I have different credentials for\nthe vCenter server and\n\n402\n00:20:46.590 --> 00:20:49.770\nfor the SSO, I can go ahead and punch\nthose in, but I'm using the same one, so\n\n403\n00:20:49.770 --> 00:20:50.620\nwe can just stick with that.\n\n404\n00:20:53.370 --> 00:20:54.320\nAnd now it's gonna reach out.\n\n405\n00:20:54.320 --> 00:20:56.870\nIt's doing what are called\npre-upgrade checks.\n\n406\n00:20:56.870 --> 00:21:00.480\nHere's where it's looking to see,\nis my host OS supported?\n\n407\n00:21:00.480 --> 00:21:02.370\nIs my database version supported?\n\n408\n00:21:02.370 --> 00:21:04.350\nIs SSO functioning without errors?\n\n409\n00:21:04.350 --> 00:21:06.990\nRight, because if there's errors, it's not\ngonna be able to do the upgrade, right?\n\n410\n00:21:06.990 --> 00:21:10.650\nSo it's gonna check all of that and\nmake sure that my system is healthy and\n\n411\n00:21:10.650 --> 00:21:13.180\nthat I don't have anything\nthat's incompatible.\n\n412\n00:21:13.180 --> 00:21:17.490\nIf I have something in my environment\nthat is not supported in vCenter 6,\n\n413\n00:21:17.490 --> 00:21:18.510\nit's gonna tell me.\n\n414\n00:21:18.510 --> 00:21:20.010\nThat way, I can stop right now.\n\n415\n00:21:20.010 --> 00:21:22.270\nWe haven't changed anything.\n\n416\n00:21:22.270 --> 00:21:25.400\nSo if this errors out,\nthen we can stop and we can go and\n\n417\n00:21:25.400 --> 00:21:27.690\nresolve the problem at our own pace.\n\n418\n00:21:27.690 --> 00:21:30.050\nYou know, cuz nothing is changed,\nnothing's stopped,\n\n419\n00:21:30.050 --> 00:21:33.650\nnothing's moved,\nit's all just kind of running routinely.\n\n420\n00:21:33.650 --> 00:21:36.230\nSo hopefully everything checks,\nand here we go.\n\n421\n00:21:36.230 --> 00:21:37.780\nI did get one little warning,\n\n422\n00:21:37.780 --> 00:21:41.564\nit's telling me my vCenter\nServer name needs to be changed.\n\n423\n00:21:41.564 --> 00:21:42.498\nOkay.\n\n424\n00:21:42.498 --> 00:21:48.335\nSo what it's warning about here is that\nmy server has a fully qualified name.\n\n425\n00:21:48.335 --> 00:21:50.237\nWinserver01.lab.it.protv.\n\n426\n00:21:50.237 --> 00:21:54.342\nIt wants to change it to just\nwin-server01 a single name,\n\n427\n00:21:54.342 --> 00:21:56.763\ninstead of a fully qualified name.\n\n428\n00:21:56.763 --> 00:22:00.057\nAll right and It's telling me it\nwants to do that in order to align\n\n429\n00:22:00.057 --> 00:22:03.950\nwith the detected certificates and\nupgrade vCenter servers.\n\n430\n00:22:03.950 --> 00:22:07.310\nSo there's a certificates that\nwere issued by vCenter, and\n\n431\n00:22:07.310 --> 00:22:09.980\nthey were issued to\na single name instead of\n\n432\n00:22:09.980 --> 00:22:13.010\nthe fully qualified name cuz that's what\nthey did in earlier versions of vCenter.\n\n433\n00:22:13.010 --> 00:22:15.024\nIf I were doing a clean\ninstall of vCenter 6,\n\n434\n00:22:15.024 --> 00:22:18.787\nyou would be okay with a fully qualified\nname but since I'm upgrading, the previous\n\n435\n00:22:18.787 --> 00:22:22.500\nversion's handle name is different and so\nit's going to have to change that name.\n\n436\n00:22:22.500 --> 00:22:27.390\nI'm okay with that, we can always,\nyou know, work to retool that later on.\n\n437\n00:22:27.390 --> 00:22:31.250\nSo I'll go ahead and say OK to it,\nand now it says I'm using\n\n438\n00:22:31.250 --> 00:22:34.500\nMicrosoft SQL Express database\nwhich is no longer supported right?\n\n439\n00:22:34.500 --> 00:22:39.550\nSo its gonna migrate that to VMware\nvPostgres, so it's gonna do that for me.\n\n440\n00:22:39.550 --> 00:22:41.280\nFortunately, we don't have to do it.\n\n441\n00:22:41.280 --> 00:22:44.206\nYou don't have to be a SQL expert or\nPostgres expert,\n\n442\n00:22:44.206 --> 00:22:45.710\nit's gonna do that for us.\n\n443\n00:22:45.710 --> 00:22:46.534\nAll right.\n\n444\n00:22:46.534 --> 00:22:48.900\nNow we get the port numbers.\n\n445\n00:22:48.900 --> 00:22:51.810\nNow, when we did the install\noriginally you were asked\n\n446\n00:22:51.810 --> 00:22:53.640\nall these different port\nnumbers to pick from.\n\n447\n00:22:53.640 --> 00:22:56.800\nAnd you'll see some of these are locked\nin that we can't change, right?\n\n448\n00:22:56.800 --> 00:22:59.450\nThese are ones that it's gonna have to use\nas part of the upgrade, and we use for\n\n449\n00:22:59.450 --> 00:23:00.850\nmanaging the system.\n\n450\n00:23:00.850 --> 00:23:05.170\nBut there's some new things, like our\nDump Collector Ports, our Syslog Port, and\n\n451\n00:23:05.170 --> 00:23:08.645\nAuto Deploy where we can modify those\nports at this time if we want, right.\n\n452\n00:23:08.645 --> 00:23:12.003\nI'm gonna leave mine as the default but\nthis is a chance to modify those.\n\n453\n00:23:12.003 --> 00:23:15.975\nAll right, lastly we get our\ninstallation directories.\n\n454\n00:23:15.975 --> 00:23:17.875\nYou typically don't wanna change this,\nright.\n\n455\n00:23:17.875 --> 00:23:22.830\nIt's gonna be installing pretty much\nin the same place that vCenter 5.5,\n\n456\n00:23:22.830 --> 00:23:24.640\nor five, or whatever it was.\n\n457\n00:23:24.640 --> 00:23:28.330\nBut notice this, export your 5.X data to.\n\n458\n00:23:28.330 --> 00:23:32.880\nWhen it does the upgrade, it can export\nour previous data and store it, so\n\n459\n00:23:32.880 --> 00:23:34.370\nthat, if you don't have a backup and\n\n460\n00:23:34.370 --> 00:23:38.180\nthings really go wrong you do it when you,\nyou might be able to recover some data.\n\n461\n00:23:38.180 --> 00:23:42.900\nLet me tell you, I've only done that\nonce in my life it is not easy.\n\n462\n00:23:42.900 --> 00:23:46.510\nThe data is stored in a way that's not\ndesigned to be directly imported again.\n\n463\n00:23:46.510 --> 00:23:49.710\nIt's really designed so that if you have\nto call support they can look in there and\n\n464\n00:23:49.710 --> 00:23:50.560\nsee how things were.\n\n465\n00:23:50.560 --> 00:23:52.220\nNot so much restore from it.\n\n466\n00:23:52.220 --> 00:23:54.350\nSo it's not a substitute for a backup.\n\n467\n00:23:54.350 --> 00:23:58.038\nDefinitely take a backup of your\nsystem before doing the upgrade.\n\n468\n00:23:58.038 --> 00:24:00.373\nAll right, we'll go and hit Next.\n\n469\n00:24:00.373 --> 00:24:04.516\nI get my chance to join the VMware\ncustomer experience improvement program.\n\n470\n00:24:04.516 --> 00:24:08.642\nI'm gonna pass on that, cuz it's a lab\nenvironment, and so not gonna help them.\n\n471\n00:24:08.642 --> 00:24:10.800\nAnd that should be\neverything that we need.\n\n472\n00:24:10.800 --> 00:24:13.513\nSo, it just gives me a quick summary\nof what it's gonna do, right,\n\n473\n00:24:13.513 --> 00:24:14.767\nit's gonna upgrade vCenter.\n\n474\n00:24:14.767 --> 00:24:17.834\nAnd then right down here I\ncan just verify, it says,\n\n475\n00:24:17.834 --> 00:24:21.392\nI verify that I have backed up\nthis vCenter Server machine and\n\n476\n00:24:21.392 --> 00:24:24.640\nthe embedded\nMicrosoft SQL Server Express database.\n\n477\n00:24:24.640 --> 00:24:28.950\nRight, you want that back up,\nand then we can hit Upgrade.\n\n478\n00:24:28.950 --> 00:24:32.510\nNow in the background what it's doing,\nis it's taking vCenter down.\n\n479\n00:24:32.510 --> 00:24:34.670\nIt's gonna stop the services,\nit's gonna shut that off.\n\n480\n00:24:34.670 --> 00:24:36.620\nSo now we can't get into vCenter.\n\n481\n00:24:36.620 --> 00:24:37.920\nOur virtual machines are still up and\n\n482\n00:24:37.920 --> 00:24:40.740\nrunning, Our hosts are still up and\nrunning.\n\n483\n00:24:40.740 --> 00:24:41.960\nit's just vCenter going down.\n\n484\n00:24:41.960 --> 00:24:46.980\nWhich means if the Distributed\nResource Scheduler is running,\n\n485\n00:24:46.980 --> 00:24:48.420\nwell it's not running anymore, right.\n\n486\n00:24:48.420 --> 00:24:50.920\nSo we're not balancing our\nvirtual machines anymore.\n\n487\n00:24:50.920 --> 00:24:52.510\nOur clusters are still running so\n\n488\n00:24:52.510 --> 00:24:55.190\nif one host goes down another\nhost could recover for it.\n\n489\n00:24:55.190 --> 00:24:56.930\nBut, for the most part,\n\n490\n00:24:56.930 --> 00:25:00.320\nall of our automated activities kind\nof stop while this is happening.\n\n491\n00:25:00.320 --> 00:25:05.090\nOur hosts are up, our virtual machines are\nup, your end users can be in the system.\n\n492\n00:25:05.090 --> 00:25:07.670\nIt's just vCenter that's down, right.\n\n493\n00:25:07.670 --> 00:25:10.470\nAnd it's gonna perform that upgrade and\nget in in place.\n\n494\n00:25:10.470 --> 00:25:15.050\nAnd once the upgrade is done, vCenter\nwill come back up and reach out and\n\n495\n00:25:15.050 --> 00:25:16.186\nconnect to all of our hosts.\n\n496\n00:25:16.186 --> 00:25:18.940\nAnd then the Distributed Resource\nScheduler will start working again and\n\n497\n00:25:18.940 --> 00:25:22.130\nall of the other little components in\nbetween our systems start working again.\n\n498\n00:25:22.130 --> 00:25:25.090\nYour end users probably won't\neven notice it's happening.\n\n499\n00:25:25.090 --> 00:25:27.860\nSo theoretically you could do\nthis in the middle of the day.\n\n500\n00:25:27.860 --> 00:25:30.290\nI'm not a big fan of that,\nI usually do it after hours.\n\n501\n00:25:30.290 --> 00:25:33.639\nBut in theory you could do this\nin the middle of the day and\n\n502\n00:25:33.639 --> 00:25:36.570\nonce the upgrade is complete,\nnobody notices.\n\n503\n00:25:36.570 --> 00:25:39.900\nNow when we upgrade our hosts, yeah,\npeople might notice that, right?\n\n504\n00:25:39.900 --> 00:25:42.950\nBut when you're upgrading\nvCenter it's just the admins.\n\n505\n00:25:42.950 --> 00:25:44.860\nWe are the ones who go\ninto the vCenter Server.\n\n506\n00:25:44.860 --> 00:25:48.130\nYour end users typically don't,\nso they don't notice, all right.\n\n507\n00:25:48.130 --> 00:25:50.510\nIn the background,\nit's upgrading the database.\n\n508\n00:25:50.510 --> 00:25:53.790\nExporting SQL, putting it into Postgres,\nturning that on.\n\n509\n00:25:53.790 --> 00:25:56.540\nThen it's replacing all the websites\nthat are a part of vCenter, and\n\n510\n00:25:56.540 --> 00:25:57.530\ngetting those put in place.\n\n511\n00:25:57.530 --> 00:26:01.280\nUpgrading my client, upgrading\nthe other services, Single Sign-On, and\n\n512\n00:26:01.280 --> 00:26:03.920\nthe other components, and\nthen starting them up.\n\n513\n00:26:03.920 --> 00:26:07.360\nAnd when it's all done and\nstarted up, it'll finish and\n\n514\n00:26:07.360 --> 00:26:12.150\nwe'll be able to go back into our vSphere\nweb client or fire up our other client.\n\n515\n00:26:12.150 --> 00:26:16.150\nAnd we should be in vSphere 6,\nor vCenter 6 at least.\n\n516\n00:26:16.150 --> 00:26:19.423\nWe're not fully in vSphere 6 yet, because\nwe haven't upgraded all of the other\n\n517\n00:26:19.423 --> 00:26:21.745\ncomponents, right, so\nreally just vCenter 6.\n\n518\n00:26:21.745 --> 00:26:26.450\nNow usually with these episodes,\nI kinda just\n\n519\n00:26:26.450 --> 00:26:29.460\ntalk about some of the technical\ndetails while the upgrade is running.\n\n520\n00:26:29.460 --> 00:26:32.860\nBut, let me tell you guys,\nthis upgrade takes a long time.\n\n521\n00:26:32.860 --> 00:26:35.640\nIf we look at my screen right now I\njust have a little blue bar that's\n\n522\n00:26:35.640 --> 00:26:36.400\ncrawling across the screen.\n\n523\n00:26:36.400 --> 00:26:39.580\nSee how it says Exporting data\nfrom the 5.x product, right.\n\n524\n00:26:39.580 --> 00:26:42.750\nIt's exporting the SQL data and\nexporting configurations and\n\n525\n00:26:42.750 --> 00:26:44.650\nother data, It's gonna take awhile.\n\n526\n00:26:44.650 --> 00:26:46.440\nRight, here it's doing\nmy license data now.\n\n527\n00:26:46.440 --> 00:26:48.190\nSo it's gonna take awhile to export.\n\n528\n00:26:48.190 --> 00:26:49.454\nIt hasn't even started the upgrade yet.\n\n529\n00:26:49.454 --> 00:26:51.797\nEven though the blue bar is\nmore than halfway across,\n\n530\n00:26:51.797 --> 00:26:53.950\nit hasn't actually started the upgrade.\n\n531\n00:26:53.950 --> 00:26:58.600\nIt's just exporting data, getting it\nready to import into the new environment.\n\n532\n00:26:58.600 --> 00:27:03.180\nAnd this process can take anywhere\nfrom 30 minutes to two hours.\n\n533\n00:27:03.180 --> 00:27:05.190\nI've seen it take as\nlong as two hours before.\n\n534\n00:27:05.190 --> 00:27:07.920\nAnd our episodes are certainly\nnot long enough to handle that.\n\n535\n00:27:07.920 --> 00:27:11.770\nSo I think we're gonna do a little\nTV magic to jump ahead on this one.\n\n536\n00:27:11.770 --> 00:27:15.010\nSo instead of sitting here just\nwatching this blue bar crawl across.\n\n537\n00:27:15.010 --> 00:27:18.011\nWhen it's done, though,\nit is somewhat anticlimactic,\n\n538\n00:27:18.011 --> 00:27:21.800\ncuz what we're gonna see is just a screen\nthat tells us the upgrade is done.\n\n539\n00:27:21.800 --> 00:27:25.744\nAnd now we're able to log into the new\nvCenter and start to manage it.\n\n540\n00:27:25.744 --> 00:27:27.833\nAll right, so\nhere we are about 25 minutes later and\n\n541\n00:27:27.833 --> 00:27:29.233\nthe upgrade is actually finished.\n\n542\n00:27:29.233 --> 00:27:32.220\nAnd when it's done it just comes\nup with a setup completed screen.\n\n543\n00:27:32.220 --> 00:27:33.640\nI've got it pulled up right here.\n\n544\n00:27:33.640 --> 00:27:39.564\nSo I can see that my vCenter Server\n5.5 is upgraded to version 6.0.0 and\n\n545\n00:27:39.564 --> 00:27:40.970\nwe're ready to rock.\n\n546\n00:27:40.970 --> 00:27:43.880\nNow it gives us a few post upgrade steps.\n\n547\n00:27:43.880 --> 00:27:46.990\nFirst off it's telling me, hey,\nyou upgraded, that's great.\n\n548\n00:27:46.990 --> 00:27:49.390\nRegardless of whether you\nhave a valid license or\n\n549\n00:27:49.390 --> 00:27:51.770\nnot, you're now in evaluation mode, right?\n\n550\n00:27:51.770 --> 00:27:55.790\nBecause it migrates over your 5.5 license,\nthat doesn't help you with 6.\n\n551\n00:27:55.790 --> 00:28:00.028\nSo we've got 60 days to put\nin a valid license here.\n\n552\n00:28:00.028 --> 00:28:02.150\nAt the end of the 60 days\nvCenter's gonna stop working so\n\n553\n00:28:02.150 --> 00:28:04.000\nwe definitely wanna upgrade that.\n\n554\n00:28:04.000 --> 00:28:06.800\nThen you got your exported data.\n\n555\n00:28:06.800 --> 00:28:09.690\nThe exported data there is to help you,\nif something goes wrong you've\n\n556\n00:28:09.690 --> 00:28:12.930\ngot this data from the 5 or\n5.5 environment you can go and recover.\n\n557\n00:28:12.930 --> 00:28:15.744\nBut if you don't need it, you can go and\ndelete that data out of there,\n\n558\n00:28:15.744 --> 00:28:17.148\nit's taking up hard drive space.\n\n559\n00:28:17.148 --> 00:28:20.140\nNot usually a lot, but\nit is taking up some space, all right.\n\n560\n00:28:20.140 --> 00:28:24.360\nThen it's letting me know here that\nas long as the upgrade went smoothly,\n\n561\n00:28:24.360 --> 00:28:27.960\nwe're now running Postgres,\nwe don't need SQL Express anymore.\n\n562\n00:28:27.960 --> 00:28:29.610\nSo you can uninstall SQL Express,\n\n563\n00:28:29.610 --> 00:28:31.980\nif you don't need that one\nthen you can get rid of it.\n\n564\n00:28:31.980 --> 00:28:35.250\nAnd then lastly, it's just telling us\nthat a Single Sign-On has been migrated.\n\n565\n00:28:35.250 --> 00:28:37.850\nAnd so now we can login with\nthe account we just used.\n\n566\n00:28:37.850 --> 00:28:41.160\nIn my case administrator@vsphere.local,\nall right.\n\n567\n00:28:41.160 --> 00:28:43.720\nSo technically we're done and\nwe can finish that up.\n\n568\n00:28:43.720 --> 00:28:46.600\nAll right now, technically it is done.\n\n569\n00:28:46.600 --> 00:28:49.340\nPersonally, I usually like\nto reboot the server.\n\n570\n00:28:49.340 --> 00:28:51.890\nThe reboot's not required though,\nit's upgraded and it's done.\n\n571\n00:28:51.890 --> 00:28:54.160\nEverything's kind of restarted\nthat needs to be restarted.\n\n572\n00:28:54.160 --> 00:28:56.610\nBut normally I follow this\nup with uninstalling SQL,\n\n573\n00:28:56.610 --> 00:28:58.500\nwhich does make me reboot the server.\n\n574\n00:28:58.500 --> 00:29:01.170\nBut I'm gonna skip the reboot here,\njust to save a little bit of time.\n\n575\n00:29:01.170 --> 00:29:03.980\nBut, typically you'd reboot right here,\nall right?\n\n576\n00:29:03.980 --> 00:29:08.490\nNow that it's done, I can jump\nover to a web browser and try and\n\n577\n00:29:08.490 --> 00:29:10.220\nlog into my client.\n\n578\n00:29:10.220 --> 00:29:15.360\nNow, I was logging in with\nwin-server01.lab.itpro.tv and\n\n579\n00:29:15.360 --> 00:29:16.860\nremember how it changed the name?\n\n580\n00:29:16.860 --> 00:29:20.240\nThis will actually still work, but the\ncertificate name's not gonna match now.\n\n581\n00:29:20.240 --> 00:29:23.800\nI'm using self-signed certificates anyway,\nso the name doesn't really matter.\n\n582\n00:29:23.800 --> 00:29:27.190\nBut I\"m gonna go ahead and\njust try and follow the rules here and\n\n583\n00:29:27.190 --> 00:29:33.080\ngo to win-server01 and\nbrowse to login, okay.\n\n584\n00:29:33.080 --> 00:29:35.410\nNow when I log in it doesn't look\ntoo terribly different here so\n\n585\n00:29:35.410 --> 00:29:41.530\nI don't actually know, am I still on 5.5\nor 6 or whatever, we don't quite know.\n\n586\n00:29:41.530 --> 00:29:45.360\nAnd the first time that you log in it\nis gonna be slow because the new system\n\n587\n00:29:45.360 --> 00:29:47.030\nis getting loaded, all right.\n\n588\n00:29:47.030 --> 00:29:50.439\nNow once you're in,\nnow we can figure out whether or\n\n589\n00:29:50.439 --> 00:29:53.250\nnot the upgrade actually finished.\n\n590\n00:29:53.250 --> 00:29:57.770\nAnd so when I come in here I can see there\nare vCenter Server systems with expired or\n\n591\n00:29:57.770 --> 00:29:59.480\nexpiring licenses in your inventory.\n\n592\n00:29:59.480 --> 00:30:01.640\nThat's my first hint\nthat everything worked.\n\n593\n00:30:01.640 --> 00:30:06.619\nThat I was running 5.5 which was licensed,\nbut that license doesn't work for 6.\n\n594\n00:30:06.619 --> 00:30:09.160\nAnd so now I've got a license complaint,\nright?\n\n595\n00:30:09.160 --> 00:30:11.598\nI'll just get rid of that for now.\n\n596\n00:30:11.598 --> 00:30:14.950\nLet me kinda shuffle this screen around to\nget a little more screen real estate and\n\n597\n00:30:14.950 --> 00:30:16.340\nthen we'll do the real check.\n\n598\n00:30:16.340 --> 00:30:18.590\nThe real check,\nactually I don't even have to go too far.\n\n599\n00:30:18.590 --> 00:30:21.480\nNotice all this extra\nstuff on the left side?\n\n600\n00:30:21.480 --> 00:30:23.380\nOne of the things I hated\nabout vCenter 5.5 and\n\n601\n00:30:23.380 --> 00:30:28.270\nearlier was that the Home screen had a\nnext to useless navigation bar over here.\n\n602\n00:30:28.270 --> 00:30:30.472\nWe almost always just went straight\nto Administration and that was it,\n\n603\n00:30:30.472 --> 00:30:31.670\neverything was under there.\n\n604\n00:30:31.670 --> 00:30:34.980\nBut now I can see where I've\ngot my VMs and templates,\n\n605\n00:30:34.980 --> 00:30:36.480\nmy hosting clusters and so on.\n\n606\n00:30:36.480 --> 00:30:40.690\nSo I can jump right into these and\nget to where I need to be, right.\n\n607\n00:30:40.690 --> 00:30:42.500\nSo, whoops, so\nthen I can click on the wrong thing.\n\n608\n00:30:42.500 --> 00:30:43.850\nWell, this will work.\n\n609\n00:30:43.850 --> 00:30:47.252\nI'm gonna go to my server, so WinServer01.\n\n610\n00:30:47.252 --> 00:30:51.676\nAnd I'm gonna go to Summary and\njust verify that it shows up as 6.0.\n\n611\n00:30:51.676 --> 00:30:54.840\nAnd sure enough,\nI can see that it's now version 6, right.\n\n612\n00:30:54.840 --> 00:30:59.395\nSo the upgrade is completed, and\nI'm now running vCenter 6.0.\n\n613\n00:30:59.395 --> 00:31:03.910\nNow, I've upgraded vCenter and\nSingle Sign-On came along for\n\n614\n00:31:03.910 --> 00:31:07.380\nthe ride, cuz it was an embedded install,\nso all that's upgraded.\n\n615\n00:31:07.380 --> 00:31:09.710\nBut that's the only thing\nthat's been upgraded.\n\n616\n00:31:09.710 --> 00:31:14.540\nIf I have vRealize or Horizon,\nVMware View, those things.\n\n617\n00:31:14.540 --> 00:31:18.910\nIf I have my ESXi hosts, my data stores,\n\n618\n00:31:18.910 --> 00:31:22.060\nmy virtual switches,\nnone of those are upgraded.\n\n619\n00:31:22.060 --> 00:31:24.120\nvCenter 6 supports all the old versions so\n\n620\n00:31:24.120 --> 00:31:28.370\nit leaves them at the old versions and\nthat's where they're sitting.\n\n621\n00:31:28.370 --> 00:31:29.668\nAnd we can verify that real quick, right.\n\n622\n00:31:29.668 --> 00:31:32.921\nSo if I take a look at my,\nlet me switch over to my hosts.\n\n623\n00:31:32.921 --> 00:31:37.372\nI've got this ESXHost01 and\nif I look at its data,\n\n624\n00:31:37.372 --> 00:31:40.620\nas I browse in here slowly but surely.\n\n625\n00:31:42.410 --> 00:31:46.800\nWe can jump in here and\nsee that it's running ESXi 5.0, okay?\n\n626\n00:31:47.880 --> 00:31:50.940\nSo it's still running\nthe previous version of ESXi.\n\n627\n00:31:50.940 --> 00:31:56.931\nIf I go to my data stores, my data stores\nmight be VMFS5 because I came from ESX 5.\n\n628\n00:31:56.931 --> 00:31:59.930\nOr my data stores might still be VMFS3.\n\n629\n00:31:59.930 --> 00:32:02.160\nBut again, VCenter 6 supports those.\n\n630\n00:32:02.160 --> 00:32:08.050\nSo if I dive into my data stores,\nlet's just take a look at the data stores.\n\n631\n00:32:08.050 --> 00:32:11.342\nI got a couple of data stores,\nI've got one that's VMSF5 and\n\n632\n00:32:11.342 --> 00:32:12.938\none that's VMSF3, right.\n\n633\n00:32:12.938 --> 00:32:16.452\nIt didn't upgrade that one for\nme, it leaves it there.\n\n634\n00:32:16.452 --> 00:32:22.219\nAnd if I take a look at my switches,\nI've got this Server-LAN-dvSwitch and,\n\n635\n00:32:22.219 --> 00:32:27.226\nyou know, that little crash,\nthat's always a fun one, isn't it?\n\n636\n00:32:27.226 --> 00:32:29.692\n[LAUGH] So a little bug in vSphere 6.\n\n637\n00:32:29.692 --> 00:32:33.211\nI guess that's another way I can verify\nthat I have upgraded is that the vSphere 6\n\n638\n00:32:33.211 --> 00:32:34.250\nbug is there.\n\n639\n00:32:34.250 --> 00:32:38.412\nWhenever you go to a dvSwitch you got\nlike a 50/50 chance of the UI crashing.\n\n640\n00:32:38.412 --> 00:32:41.540\nSo [LAUGH] as soon as it\nreloads I'll be in there.\n\n641\n00:32:41.540 --> 00:32:43.290\nBut I can go into my dvSwitch and\n\n642\n00:32:43.290 --> 00:32:47.910\nI can verify that it is actually\nstill running the previous version.\n\n643\n00:32:47.910 --> 00:32:52.238\nSo I'm just gonna try and\nnavigate in here and get to its summary so\n\n644\n00:32:52.238 --> 00:32:57.447\nthat I can see right there, that my\ndvSwitch is still running version 5.0.\n\n645\n00:32:57.447 --> 00:32:59.460\nIt's telling me upgrades are available,\nright?\n\n646\n00:32:59.460 --> 00:33:00.810\nBut I'm still running version 5.\n\n647\n00:33:00.810 --> 00:33:04.879\nSo vServer's upgraded,\nall my other components are the same.\n\n648\n00:33:04.879 --> 00:33:08.620\nThat's nice because it means\nI didn't interrupt service.\n\n649\n00:33:08.620 --> 00:33:11.550\nI never took a virtual machine offline,\nI never took a host offline,\n\n650\n00:33:11.550 --> 00:33:15.050\nmy switches, my data stores, everything\nstayed online during this upgrade.\n\n651\n00:33:15.050 --> 00:33:17.040\nI just upgraded vCenter.\n\n652\n00:33:17.040 --> 00:33:19.530\nAnd now I can proceed with\nthe rest of the upgrade, and\n\n653\n00:33:19.530 --> 00:33:21.490\nupgrade all the other components.\n\n654\n00:33:21.490 --> 00:33:24.440\n>> Don, we appreciate you taking\nthe time to show us phase one here,\n\n655\n00:33:24.440 --> 00:33:25.630\nin upgrading your vCenter.\n\n656\n00:33:25.630 --> 00:33:28.420\nBut speaking of phase, looks like we're\ncoming to the end of another episode, so\n\n657\n00:33:28.420 --> 00:33:31.400\nit's probably time to\nphase this episode out.\n\n658\n00:33:31.400 --> 00:33:33.140\nI know we've got additional\nparts coming but\n\n659\n00:33:33.140 --> 00:33:35.880\nbefore we sign out,\nyou got any additional information?\n\n660\n00:33:35.880 --> 00:33:38.232\n>> Well, there's the whole backup thing\nthat I keep mentioned, right though?\n\n661\n00:33:38.232 --> 00:33:41.193\nI can't understate that, it's so\nimportant to take a backup of vCenter.\n\n662\n00:33:41.193 --> 00:33:44.189\nBecause if you screw something up it can\nbe really difficult to rebuild that.\n\n663\n00:33:45.390 --> 00:33:48.190\nAlso, know that upgrades aren't required.\n\n664\n00:33:48.190 --> 00:33:51.477\nYou could do a clean install instead.\n\n665\n00:33:51.477 --> 00:33:54.931\nIf you're really worried about things\nmoving smoothly, sometimes it's easier to\n\n666\n00:33:54.931 --> 00:33:57.570\njust do a clean install and\nthen move all your systems over to it.\n\n667\n00:33:57.570 --> 00:33:59.085\nYou could certainly go that route.\n\n668\n00:33:59.085 --> 00:34:02.295\nBut for the exam they want you\nto know both kind of methods.\n\n669\n00:34:02.295 --> 00:34:04.610\nWe've seen clean installs,\nthat's not exciting.\n\n670\n00:34:04.610 --> 00:34:07.038\nIn-place upgrades like these though,\nare really nice.\n\n671\n00:34:07.038 --> 00:34:09.531\nCuz all of your settings and\nconfigurations come right along and\n\n672\n00:34:09.531 --> 00:34:10.415\nyou're in business.\n\n673\n00:34:10.415 --> 00:34:12.305\nSo for backups,\n\n674\n00:34:12.305 --> 00:34:14.955\ndefinitely check out our backup episode\ncuz we'll cover how to do that.\n\n675\n00:34:14.955 --> 00:34:16.455\nHow to get everything backed up and\n\n676\n00:34:16.455 --> 00:34:19.770\nmake sure you can restore it and know that\nyou're safe when you're doing an upgrade.\n\n677\n00:34:19.770 --> 00:34:22.530\n>> Well Don, pleasure having you in the\nstudios with us, and pleasure having you,\n\n678\n00:34:22.530 --> 00:34:23.550\nthe audience, watching.\n\n679\n00:34:23.550 --> 00:34:25.830\nSigning out for ITProTV,\nI've been your host Wes Bryan.\n\n680\n00:34:25.830 --> 00:34:26.820\n>> And I'm Don Pezet.\n\n681\n00:34:26.820 --> 00:34:29.097\n>> And we'll see you next time.\n\n682\n00:34:29.097 --> 00:34:37.350\n[SOUND]\n\n",
          "vimeoId": "171757367"
        },
        {
          "description": "In this episode, Wes and Don continue the process of upgrading older versions of vSphere to vSphere version 6. They demonstrate Phase 2 upgrading the ESXi hosts inside of vSphere.",
          "length": "2435",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-2-upgrading_to_vsphere6_pt2-062016-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-2-upgrading_to_vsphere6_pt2-062016-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-2-upgrading_to_vsphere6_pt2-062016-1-sm.jpg",
          "title": "Upgrading to vSphere 6 Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.778 --> 00:00:15.160\nWelcome back to another great episode\nin the making here at ITProTV.\n\n3\n00:00:15.160 --> 00:00:16.150\nThanks for tuning in.\n\n4\n00:00:16.150 --> 00:00:18.080\nI'm your host Wes Bryan,\nand in today's episode,\n\n5\n00:00:18.080 --> 00:00:20.120\nwe're coming back at you with more VMware.\n\n6\n00:00:20.120 --> 00:00:23.070\nThat's right,\nVMware certified professional version six.\n\n7\n00:00:23.070 --> 00:00:25.380\nAnd this is actually\na part two on upgrading,\n\n8\n00:00:25.380 --> 00:00:28.230\njoining me back in the studios is\nnone other than Mr. Don Pezet.\n\n9\n00:00:28.230 --> 00:00:29.400\nDon, how you doing sir?\n\n10\n00:00:29.400 --> 00:00:30.100\n>> I'm doing great,\n\n11\n00:00:30.100 --> 00:00:33.900\nWes, ready to get in and\nfinish what I started in the last episode.\n\n12\n00:00:33.900 --> 00:00:36.490\nIf you didn't watch it,\nwe went through and we upgraded vCenter.\n\n13\n00:00:36.490 --> 00:00:39.460\nI had a vCenter deployment that\nwas running vCenter 5.5, and\n\n14\n00:00:39.460 --> 00:00:41.300\nwe upgraded it to vCenter 6.\n\n15\n00:00:41.300 --> 00:00:43.270\nNow, that's an important step.\n\n16\n00:00:43.270 --> 00:00:45.520\nYou know, don't get me wrong,\nit is important.\n\n17\n00:00:45.520 --> 00:00:48.280\nBut, it didn't really have\nany effect on our end-users.\n\n18\n00:00:48.280 --> 00:00:50.760\nOur end-users aren't going to notice\nany changes, any new features or\n\n19\n00:00:50.760 --> 00:00:52.870\nanything, it's just the management piece.\n\n20\n00:00:52.870 --> 00:00:55.631\nNow it's up to us to really get in\nthere and make a difference and\n\n21\n00:00:55.631 --> 00:00:58.407\nupgrade the components\nthe end-users actually experience.\n\n22\n00:00:58.407 --> 00:01:01.713\nAnd as the second phase\nof our upgrade process,\n\n23\n00:01:01.713 --> 00:01:05.570\nit's upgrading the ESXI host themselves.\n\n24\n00:01:05.570 --> 00:01:09.770\nNow remember if we're following\nVMwares official upgrade path,\n\n25\n00:01:09.770 --> 00:01:11.940\nphase one is upgrade vCenter.\n\n26\n00:01:11.940 --> 00:01:16.070\nPhase two is upgrade the ESXi host, that's\nwhat we're gonna do here in this episode.\n\n27\n00:01:16.070 --> 00:01:18.240\nPhase three is update\nour virtual machines.\n\n28\n00:01:18.240 --> 00:01:20.550\nAnd phase four is update our data stores.\n\n29\n00:01:20.550 --> 00:01:23.870\nSo that's the four phase\napproach that VMware recommends.\n\n30\n00:01:23.870 --> 00:01:25.550\nOr in phase two.\n\n31\n00:01:25.550 --> 00:01:27.700\nAll right so,\nI've already upgraded vcenter.\n\n32\n00:01:27.700 --> 00:01:31.490\nIf we take a look at my deployment,\nI can see that if I jump into my,\n\n33\n00:01:31.490 --> 00:01:33.460\nhere I'll just go into host in clusters.\n\n34\n00:01:33.460 --> 00:01:36.150\nAnd I'll take my server,\nand pull up its summary.\n\n35\n00:01:36.150 --> 00:01:39.970\nAnd so I can see that my vCenter\nserver is running version 6.0.\n\n36\n00:01:39.970 --> 00:01:43.890\nAnd if I take a look at my\nhost right here, ESX host 01,\n\n37\n00:01:43.890 --> 00:01:46.710\nand I go into its summary.\n\n38\n00:01:46.710 --> 00:01:51.967\nThat I can see that it is\nrunning classic ESXi, 5.0.\n\n39\n00:01:51.967 --> 00:01:54.444\nNow 5.5 came out in between.\n\n40\n00:01:54.444 --> 00:01:59.604\nI've got 5.0 here, ESXi 5.5 came out,\nnow I want to go ESXi 6.\n\n41\n00:01:59.604 --> 00:02:03.370\nDo I have to go each step along\nthe way to do more than one upgrade?\n\n42\n00:02:03.370 --> 00:02:07.570\nNo, I can jump straight from\nESX 5 all the way up to ESXi 6.\n\n43\n00:02:07.570 --> 00:02:09.300\nNow, that's not always the case.\n\n44\n00:02:09.300 --> 00:02:11.180\nIf I had an ESXi or\n\n45\n00:02:11.180 --> 00:02:16.510\nan ESX 3.0 machine out there, I can't\nmake the jump straight to 6, right?\n\n46\n00:02:16.510 --> 00:02:19.500\nSo they are certain\nlimits of support there.\n\n47\n00:02:19.500 --> 00:02:23.380\nBut in this case I'm going from 5 to 6,\nthat is a supported upgrade path.\n\n48\n00:02:23.380 --> 00:02:25.520\nIf you're not sure you can always\ngo to VMware's website and\n\n49\n00:02:25.520 --> 00:02:27.080\npull up the requirements for ESXI and\n\n50\n00:02:27.080 --> 00:02:30.460\nit'll tell you what is supported and\nwhat isn't.\n\n51\n00:02:30.460 --> 00:02:37.020\nSo at this stage I know that I can upgrade\nfrom 5 to 6, I just need to do it, right?\n\n52\n00:02:37.020 --> 00:02:40.340\nNow doing it,\nactually not really that hard.\n\n53\n00:02:40.340 --> 00:02:43.640\nIn fact, the easiest method\nto upgrade an ESXI host,\n\n54\n00:02:43.640 --> 00:02:48.740\nis to go to the host, and\nput in the ESXI install disk.\n\n55\n00:02:48.740 --> 00:02:52.030\nSo if I get an ESXI 6.0 disc,\n\n56\n00:02:52.030 --> 00:02:56.950\na CD, I can pop it in that server,\nand I can reboot the server.\n\n57\n00:02:56.950 --> 00:03:00.300\nAnd when I reboot the server,\nit's gonna boot up off of that disk, and\n\n58\n00:03:00.300 --> 00:03:03.310\nit'll see that I've already got\na version of ESXi on there.\n\n59\n00:03:03.310 --> 00:03:07.020\nAnd it'll upgrade it from\nwhatever it's running now to six.\n\n60\n00:03:07.020 --> 00:03:09.710\n>> Now Don, in our lab environment\nthat you're showing us here,\n\n61\n00:03:09.710 --> 00:03:10.610\nI notice that you've got two or\n\n62\n00:03:10.610 --> 00:03:14.430\nthree of those ESXi hosts and\nthat's great with the disc installation.\n\n63\n00:03:14.430 --> 00:03:20.260\nNow what if I have a 1000 I'm gonna\nhave to get a 1000 of those disks?\n\n64\n00:03:20.260 --> 00:03:27.060\n>> Yes, [LAUGH] so I mean really\nif you have a 1000 hosts right.\n\n65\n00:03:27.060 --> 00:03:30.410\nSo I got one here, one host you\njust go pop a disk and that is it.\n\n66\n00:03:30.410 --> 00:03:32.220\nIf you had two or three like Wes said.\n\n67\n00:03:32.220 --> 00:03:34.110\nYeah, you just pop a disk in and\nit works out great.\n\n68\n00:03:34.110 --> 00:03:37.063\nBut you have a thousand,\nthat's gonna take a long, long time and\n\n69\n00:03:37.063 --> 00:03:38.845\nmaybe you don't do all of them at once.\n\n70\n00:03:38.845 --> 00:03:41.949\nSo you don't need 1000 disks but\nyou take that one disk and\n\n71\n00:03:41.949 --> 00:03:45.810\nyou go host, to host, to host,\nit's gonna take a while, right?\n\n72\n00:03:45.810 --> 00:03:49.345\nSo, instead we can use other things,\nright?\n\n73\n00:03:49.345 --> 00:03:50.480\nAuto deploy.\n\n74\n00:03:50.480 --> 00:03:52.650\nWe covered auto deploy in another episode.\n\n75\n00:03:52.650 --> 00:03:57.160\nIf your remember I showed how we can use\nauto deploy to deploy ESX to new hardware.\n\n76\n00:03:57.160 --> 00:03:59.607\nSo you get a new server in,\nit could deploy ESXI right on it.\n\n77\n00:03:59.607 --> 00:04:01.320\nIt could do upgrades too.\n\n78\n00:04:01.320 --> 00:04:05.385\nIf I've got an ESXI 5 box and\nI set up auto deploy to deploy 6.0,\n\n79\n00:04:05.385 --> 00:04:10.627\nthen the next time that 5 box boots up,\nit'll go and download 6.0 and upgrade it.\n\n80\n00:04:10.627 --> 00:04:13.754\nSo I can use auto deploy and now I just\ngo around and reboot my hosts, and\n\n81\n00:04:13.754 --> 00:04:14.710\nthat's easy right?\n\n82\n00:04:15.810 --> 00:04:21.950\nOr, what is usually the better method\nis to use the VMware Update Manager.\n\n83\n00:04:21.950 --> 00:04:25.132\nNow we haven't covered the VMware\nUpdate Manager in any episodes yet but\n\n84\n00:04:25.132 --> 00:04:28.290\nit's a really sweet tool that's\npacked in just part Vsphere 6.\n\n85\n00:04:28.290 --> 00:04:31.313\nSo, when you install vCenter,\non that same install disk,\n\n86\n00:04:31.313 --> 00:04:33.050\nis the VMware update manager.\n\n87\n00:04:33.050 --> 00:04:35.440\nIt's not installed by default,\nyou'll just have to install it.\n\n88\n00:04:35.440 --> 00:04:38.890\nBut once it's installed, it can\nconnect out to all of your hosts, and\n\n89\n00:04:38.890 --> 00:04:40.820\nit can push patches and updates.\n\n90\n00:04:40.820 --> 00:04:44.040\nYou could update your systems using it,\nnot just the host but\n\n91\n00:04:44.040 --> 00:04:45.390\nyou can update virtual machines.\n\n92\n00:04:45.390 --> 00:04:46.640\nYou can update all sorts of stuff with it.\n\n93\n00:04:46.640 --> 00:04:50.110\nSo it's a really cool tool and that's\nwhat I'm gonna use here in this episode.\n\n94\n00:04:50.110 --> 00:04:51.930\nBecause Auto Deploy?\n\n95\n00:04:51.930 --> 00:04:53.970\nWell, just go watch our\nAuto Deploy episode.\n\n96\n00:04:53.970 --> 00:04:55.320\nWe've already seen how to do that.\n\n97\n00:04:55.320 --> 00:04:56.460\nAnd the manual disk method?\n\n98\n00:04:56.460 --> 00:04:58.020\nYou just pop the disk in and boot up.\n\n99\n00:04:58.020 --> 00:05:01.670\nPress enter like five times I think and\nthen it does the upgrade,\n\n100\n00:05:01.670 --> 00:05:05.640\nit's pretty straight forward but those\naren't necessarily suitable if you're\n\n101\n00:05:05.640 --> 00:05:08.950\ngonna be upgrading a large\namount of machines right.\n\n102\n00:05:08.950 --> 00:05:11.050\nThe VMWare update manager\nthat's the way to go.\n\n103\n00:05:12.050 --> 00:05:14.310\nAll right, so\nlet's say that I wanna make use of that.\n\n104\n00:05:14.310 --> 00:05:16.300\nWell my first problem is\ngonna be that I don't\n\n105\n00:05:16.300 --> 00:05:18.510\nhave the VMWare Update Manager, right?\n\n106\n00:05:18.510 --> 00:05:21.910\nWhen I installed vCenter\nI just installed vCenter,\n\n107\n00:05:21.910 --> 00:05:23.320\nI didn't install\nthe VMWare Update Manager.\n\n108\n00:05:23.320 --> 00:05:26.895\nSo that's where we're gonna have to kick\nup things, getting that installed and\n\n109\n00:05:26.895 --> 00:05:27.395\nin place.\n\n110\n00:05:27.395 --> 00:05:29.885\nSo let me jump over to\nthe vCenter server and\n\n111\n00:05:29.885 --> 00:05:31.805\nall we have to do is pop in that DVD,\nright.\n\n112\n00:05:31.805 --> 00:05:33.565\nSo I've got my DVD fired up here and\n\n113\n00:05:33.565 --> 00:05:36.551\nactually I think I've already\ngot my auto-run running.\n\n114\n00:05:36.551 --> 00:05:37.507\nThere we go.\n\n115\n00:05:37.507 --> 00:05:40.357\nAnd so, this is the autorun that we\nsaw in the first episode, right?\n\n116\n00:05:40.357 --> 00:05:43.787\nWhen I wanted to upgrade vCenter,\nI just popped in the DVD, and\n\n117\n00:05:43.787 --> 00:05:47.717\nI chose vCenter Server for\nWindows right here, and did the install.\n\n118\n00:05:47.717 --> 00:05:49.980\nRight?\nSo, that's how we upgraded in part one.\n\n119\n00:05:49.980 --> 00:05:52.480\nBut what I need is the update manager.\n\n120\n00:05:52.480 --> 00:05:56.740\nAnd so if you look right down here, we've\ngot vSphere Update Manager, and there's\n\n121\n00:05:56.740 --> 00:06:00.010\ntwo different components, the server and\nthe download service, all right?\n\n122\n00:06:00.010 --> 00:06:01.680\nWell if we set up the server,\n\n123\n00:06:01.680 --> 00:06:03.900\nit can do the downloading\nall right here in one place.\n\n124\n00:06:03.900 --> 00:06:07.560\nIf I want more than one update server,\nI can have a single download server that\n\n125\n00:06:07.560 --> 00:06:10.740\ndownloads and then distributes across\nthem, it's up to me how I wanna go.\n\n126\n00:06:10.740 --> 00:06:12.986\nI just want to bring up a server,\n\n127\n00:06:12.986 --> 00:06:17.960\nnow the server does not have\nto be on the vCenter Server.\n\n128\n00:06:17.960 --> 00:06:21.800\nI can install the vSphere\nUpdate Manager anywhere, right, so\n\n129\n00:06:21.800 --> 00:06:24.900\nI could have a dedicated vSphere\nUpdate Manager or I could even install\n\n130\n00:06:24.900 --> 00:06:29.130\nit on a virtual machine somewhere\nif I wanted it to run separately.\n\n131\n00:06:29.130 --> 00:06:30.570\nI'm gonna install it\nright here on my vCenter\n\n132\n00:06:30.570 --> 00:06:32.530\nserver because I have the resources.\n\n133\n00:06:32.530 --> 00:06:37.050\nBut, be careful with that, because the\nvSphere update manager needs a database.\n\n134\n00:06:37.050 --> 00:06:39.330\nAnd databases tend to\neat a little bit of RAM.\n\n135\n00:06:39.330 --> 00:06:42.340\nSo if you notice over here,\nit's got the embedded database option,\n\n136\n00:06:42.340 --> 00:06:46.890\nit's gonna do a Microsoft SQL Server\n2012 Express Embedded database.\n\n137\n00:06:46.890 --> 00:06:50.150\nSo if I'm installing this on my vCenter\nserver, now I've got two different\n\n138\n00:06:50.150 --> 00:06:53.440\ndatabases on the same server, and\nthat's gonna eat up some resources.\n\n139\n00:06:53.440 --> 00:06:55.470\nI might wanna put this somewhere separate.\n\n140\n00:06:55.470 --> 00:06:59.677\n>> Don, in the first phase of this, you\ndid show us that the database server that\n\n141\n00:06:59.677 --> 00:07:02.092\nyou are using was gonna\nbe the postgres SQL.\n\n142\n00:07:02.092 --> 00:07:04.303\nAnd here now we're seeing\nthe Microsoft one, and\n\n143\n00:07:04.303 --> 00:07:05.991\nyou said that that isn't supported.\n\n144\n00:07:05.991 --> 00:07:07.118\nSo what gives on that one?\n\n145\n00:07:07.118 --> 00:07:07.678\n>> [LAUGH] So\n\n146\n00:07:07.678 --> 00:07:12.910\nconsistency is not necessarily a strong\npoint of this process with vCenter.\n\n147\n00:07:12.910 --> 00:07:18.900\nIn vCenter 5.5 and earlier, you could do\nthe Microsoft SQL server express edition,\n\n148\n00:07:18.900 --> 00:07:22.240\nthe free SQL database from Microsoft and\nstarting with vCenter 6,\n\n149\n00:07:22.240 --> 00:07:28.500\nthey don't support SQL Express anymore,\nnow they do the Postgres database, right?\n\n150\n00:07:28.500 --> 00:07:32.110\nSo they changed vCenter to use Postgres\nunless you use an external database,\n\n151\n00:07:32.110 --> 00:07:35.610\nthen you can use Microsoft SQL,\nor Oracle or whatever you want.\n\n152\n00:07:35.610 --> 00:07:38.860\nThe vSphere update manager\nis kind of the same way\n\n153\n00:07:38.860 --> 00:07:43.070\nexcept they still package\nit with SQL 2012 Express.\n\n154\n00:07:43.070 --> 00:07:46.440\nSo it does still support the Express\nedition even though vCenter doesn't,\n\n155\n00:07:46.440 --> 00:07:48.840\nthis is just the vSphere update manager.\n\n156\n00:07:48.840 --> 00:07:51.613\nAnd the vSphere update manager can\nrun completely separate from your\n\n157\n00:07:51.613 --> 00:07:52.390\nvCenter servers.\n\n158\n00:07:52.390 --> 00:07:54.080\nSo you can deploy it somewhere else.\n\n159\n00:07:54.080 --> 00:07:58.010\nIt doesn't have a pre packaged postgres\ndata base so we can't use that.\n\n160\n00:07:58.010 --> 00:08:00.234\nI imagine they're going to change\nthat in the next few years.\n\n161\n00:08:00.234 --> 00:08:02.085\nBut as of right now it\nis just still separate.\n\n162\n00:08:02.085 --> 00:08:04.657\nAll right, so I have that option.\n\n163\n00:08:04.657 --> 00:08:06.390\nI don't have another database\nserver laying around right now.\n\n164\n00:08:06.390 --> 00:08:07.925\nSo I'm gonna go ahead and\nChoose to do that.\n\n165\n00:08:07.925 --> 00:08:12.530\nIf I don't check that it's gonna ask me to\npoint to a sequel server somewhere to be\n\n166\n00:08:12.530 --> 00:08:14.370\nable to connect to it and use it.\n\n167\n00:08:14.370 --> 00:08:15.070\nAll right.\n\n168\n00:08:15.070 --> 00:08:18.510\nBut now I can hit install and\nit's gonna launch the installer for this.\n\n169\n00:08:18.510 --> 00:08:19.760\nAnd so here it gets going.\n\n170\n00:08:19.760 --> 00:08:23.450\nAnd what it's gonna do is, it's gonna\ninstall that SQL database first.\n\n171\n00:08:23.450 --> 00:08:25.000\nAnd it doesn't take too terribly long,\n\n172\n00:08:25.000 --> 00:08:28.760\neverything that it needs is right there\non the CD, so it's gonna get deployed.\n\n173\n00:08:28.760 --> 00:08:29.770\nIt'll run some little scripts,\n\n174\n00:08:29.770 --> 00:08:33.450\nyou'll see some automated things\nkind of flit by as it does this.\n\n175\n00:08:33.450 --> 00:08:35.280\nOnce the database is done and\n\n176\n00:08:35.280 --> 00:08:39.420\ninstalled, then we're ready to actually\ninstall the vSphere Update Manager.\n\n177\n00:08:39.420 --> 00:08:45.260\nSo this first stage here, this is all just\npart of getting SQL Express up and going.\n\n178\n00:08:45.260 --> 00:08:48.230\nIf I already had\nSQL Express on this system,\n\n179\n00:08:48.230 --> 00:08:50.520\nthen it would just be adding\none more database to it.\n\n180\n00:08:50.520 --> 00:08:52.060\nAnd this process would go super fast.\n\n181\n00:08:52.060 --> 00:08:54.010\nIt would already be done by now.\n\n182\n00:08:54.010 --> 00:08:57.820\nBut, I uninstalled SQL Express\nwhen I did my upgrade.\n\n183\n00:08:57.820 --> 00:08:59.831\nRight?\nSo now we had Postgres we don't need this\n\n184\n00:08:59.831 --> 00:09:02.970\nanymore, and so mine's gotta churn\nalong and do a little bit more.\n\n185\n00:09:02.970 --> 00:09:07.527\nSo it is able to skip the download, but\nit's going to have to do the install, and\n\n186\n00:09:07.527 --> 00:09:09.510\nthat process just takes a moment.\n\n187\n00:09:09.510 --> 00:09:14.380\nNow when it's done then we'll actually\ninstall the vSphere update manager.\n\n188\n00:09:14.380 --> 00:09:16.770\nAnd when the vSphere\nupdate manager's in place,\n\n189\n00:09:16.770 --> 00:09:20.370\nwe'll be able to connect it out to\nmanage our vSphere environment.\n\n190\n00:09:20.370 --> 00:09:22.210\nIt'll see all of our hosts.\n\n191\n00:09:22.210 --> 00:09:27.087\nIt'll recognize that the hosts are running\nESXI 5.0, or 5.5 or whatever, and\n\n192\n00:09:27.087 --> 00:09:30.100\nthen we can push the updates to it,\nall right.\n\n193\n00:09:30.100 --> 00:09:33.502\nNow unfortunately the installation here\nfor SQL does take a little bit of time so\n\n194\n00:09:33.502 --> 00:09:36.800\nI think we're gonna leverage a little TV\nmagic on this one to jump forward cuz I\n\n195\n00:09:36.800 --> 00:09:38.220\ndon't want us to just sit here and\n\n196\n00:09:38.220 --> 00:09:40.452\nwatch the blue bar slowly\ncrawl across the screen.\n\n197\n00:09:40.452 --> 00:09:41.790\nSo let's do that.\n\n198\n00:09:41.790 --> 00:09:43.330\nI'm gonna warp us forward and\n\n199\n00:09:43.330 --> 00:09:45.950\nthen we'll continue on with\nthe vSphere Update Manager install.\n\n200\n00:09:46.960 --> 00:09:48.850\nSo here we are, just a handful\nof minutes in the future and\n\n201\n00:09:48.850 --> 00:09:50.700\nthe SQL updated database\ninstall has finished.\n\n202\n00:09:50.700 --> 00:09:52.290\nAnd once it's done.\n\n203\n00:09:52.290 --> 00:09:55.450\nIt'll disappear and then up pops our\nvSphere Update Manager Installer.\n\n204\n00:09:55.450 --> 00:09:58.790\nSo now we're actually going to be\ninstalling the vSphere Update Manager.\n\n205\n00:09:58.790 --> 00:10:01.960\nSo you'll see a simple dialogue box\nlike what I've got pulled up right here,\n\n206\n00:10:01.960 --> 00:10:05.680\nit's just the Install Shield for\nthe vSphere update manager.\n\n207\n00:10:05.680 --> 00:10:07.980\nAs we move forward it's not\nreally a complex thing.\n\n208\n00:10:07.980 --> 00:10:10.210\nWe're just gonna click\nNext a couple of times.\n\n209\n00:10:10.210 --> 00:10:14.030\nAnd it's gonna offer to download updates\nfrom default sources immediately\n\n210\n00:10:14.030 --> 00:10:15.530\nafter installation.\n\n211\n00:10:15.530 --> 00:10:16.840\nYou may or may not want that.\n\n212\n00:10:16.840 --> 00:10:20.200\nIf you wanna manually control which\nupdates are available in the update\n\n213\n00:10:20.200 --> 00:10:23.060\nmanager, then you can uncheck that and\njust add them in yourself.\n\n214\n00:10:23.060 --> 00:10:24.650\nThat gives you complete control.\n\n215\n00:10:24.650 --> 00:10:26.800\nBut even if it automatically\ndownload's them it doesn't mean it's\n\n216\n00:10:26.800 --> 00:10:27.430\nrolling them out.\n\n217\n00:10:27.430 --> 00:10:29.710\nYou control the deployment so\n\n218\n00:10:29.710 --> 00:10:32.680\nit's typically fine to just\nleave that checked off.\n\n219\n00:10:32.680 --> 00:10:36.450\nThe time that I would leave that turned\noff is if I actually had a separate\n\n220\n00:10:36.450 --> 00:10:37.010\ndownload server.\n\n221\n00:10:37.010 --> 00:10:38.950\nRemember we saw that in\nthe install options I could do,\n\n222\n00:10:38.950 --> 00:10:41.020\nwell it's actually back here\nin the download service.\n\n223\n00:10:41.020 --> 00:10:43.890\nIf I had a separate download server\nsomewhere else I wouldn't want this\n\n224\n00:10:43.890 --> 00:10:45.960\nmachine to download the updates\nright away, I'd go and\n\n225\n00:10:45.960 --> 00:10:47.550\nset that up after the fact.\n\n226\n00:10:47.550 --> 00:10:49.212\nAll right, so I'll go and\nhit Next on that.\n\n227\n00:10:49.212 --> 00:10:53.572\nNow the vSphere update manager\nuses an IP address, username,\n\n228\n00:10:53.572 --> 00:10:57.125\npassword and\nport to be able to connect to vCenter.\n\n229\n00:10:57.125 --> 00:10:59.964\nThe vSphere update manager could\nrun on a separate system so\n\n230\n00:10:59.964 --> 00:11:02.540\nit needs to know how to\nconnect up to vCenter.\n\n231\n00:11:02.540 --> 00:11:05.695\nIt's already got the IP Address in my\nvCenter server and the port number.\n\n232\n00:11:05.695 --> 00:11:08.969\nSo I just need to give it a username and\npassword so I've\n\n233\n00:11:08.969 --> 00:11:13.910\nbeen using administrator @ vsphere.local\nand I'll punch in my password.\n\n234\n00:11:13.910 --> 00:11:19.850\nYou'd punch in whatever single sign on\naccount you were using right there.\n\n235\n00:11:19.850 --> 00:11:22.140\nThen if we've modified any of our ports,\nor\n\n236\n00:11:22.140 --> 00:11:24.790\nif we need to modify the ports\nwe can do it right here.\n\n237\n00:11:24.790 --> 00:11:29.705\nYou'll see the soap, web port, SSL port,\nthese are the ports that VOM uses,\n\n238\n00:11:29.705 --> 00:11:31.880\ntypically I don't modify these.\n\n239\n00:11:31.880 --> 00:11:33.570\nBecause they're already\nweird enough numbers,\n\n240\n00:11:33.570 --> 00:11:36.530\nI like it to be consistent across\nthe VOMs that I work with.\n\n241\n00:11:36.530 --> 00:11:39.540\nSo you can change those if you need to,\nbut I'm gonna leave mine at the default.\n\n242\n00:11:40.900 --> 00:11:43.450\nDo note, that if you have more than\none IP address on your server,\n\n243\n00:11:43.450 --> 00:11:45.020\nyou'll be able to drop this down and pick.\n\n244\n00:11:45.020 --> 00:11:46.410\nAnd also, a host name.\n\n245\n00:11:46.410 --> 00:11:48.540\nSo I can pick my IP or host name.\n\n246\n00:11:48.540 --> 00:11:51.230\nHost name is important because if\nyou're using SSL certificates,\n\n247\n00:11:51.230 --> 00:11:52.310\nyou want that name to match.\n\n248\n00:11:52.310 --> 00:11:54.110\nIf you're browsing with an IP,\nit's not gonna match.\n\n249\n00:11:54.110 --> 00:11:55.380\nYou'll get an invalid certificate.\n\n250\n00:11:55.380 --> 00:11:57.750\nNow for me,\nI'm using self-signed certificate, so\n\n251\n00:11:57.750 --> 00:11:59.520\nit doesn't really matter which one I use.\n\n252\n00:11:59.520 --> 00:12:01.140\nThey're both gonna throw up a warning.\n\n253\n00:12:01.140 --> 00:12:02.280\nSo I'll just leave it at the IP.\n\n254\n00:12:04.610 --> 00:12:06.440\nAnd then the folders is gonna install to.\n\n255\n00:12:06.440 --> 00:12:09.680\nNow the first one here is where it's\ngonna install the update manager.\n\n256\n00:12:09.680 --> 00:12:11.820\nThis second one is where\nthe downloads are going to go.\n\n257\n00:12:11.820 --> 00:12:14.050\nThe downloads can be pretty\nlarge sometimes right.\n\n258\n00:12:14.050 --> 00:12:16.535\nSo you might want to put that one\noff to a separate hardrive and\n\n259\n00:12:16.535 --> 00:12:17.670\nit makes it easy to do that.\n\n260\n00:12:19.310 --> 00:12:21.100\nAnd then we can finish that up.\n\n261\n00:12:21.100 --> 00:12:23.320\nAll right so\nit's gonna install the update manager.\n\n262\n00:12:23.320 --> 00:12:28.620\nAs soon as it's done then we'll be\nable to fire this system up and\n\n263\n00:12:28.620 --> 00:12:33.330\nstart to deploy ESXI 6.0 out to our hosts.\n\n264\n00:12:33.330 --> 00:12:35.740\nThe first thing we're gonna need\nto do is to identify our host and\n\n265\n00:12:35.740 --> 00:12:36.930\nfigure out how we're gonna upgrade it.\n\n266\n00:12:36.930 --> 00:12:37.850\nSo while we're waiting on that,\n\n267\n00:12:37.850 --> 00:12:40.640\nlet me talk a little bit\nabout how the upgrades work.\n\n268\n00:12:40.640 --> 00:12:45.330\nWhen we wanna do an upgrade, what we do\nis we create what's called a baseline.\n\n269\n00:12:45.330 --> 00:12:50.060\nA baseline is basically a set of\nupdates we expect a host to have.\n\n270\n00:12:50.060 --> 00:12:55.020\nAnd when you create that baseline, so\nI'm gonna create a baseline for ESXI 6.0.\n\n271\n00:12:55.020 --> 00:12:59.750\nAnd then I can scan my hosts and\ncompare them to the base line.\n\n272\n00:12:59.750 --> 00:13:01.890\nAnd if they match, great, they're done.\n\n273\n00:13:01.890 --> 00:13:02.770\nThat's it.\n\n274\n00:13:02.770 --> 00:13:09.190\nBut if it finds somebody that's running\nESXI 5.5 or 5.0 or 4.1 or whatever.\n\n275\n00:13:09.190 --> 00:13:11.370\nIt's gonna say that it doesn't\nmatch the baseline and\n\n276\n00:13:11.370 --> 00:13:15.310\nit's gonna give me a chance to update them\nand bring them inline with the baseline.\n\n277\n00:13:15.310 --> 00:13:19.080\nSo remember how I said if it downloads the\nupdates it doesn't actually roll them out?\n\n278\n00:13:19.080 --> 00:13:22.260\nThat's true, it doesn't roll them\nout until we create a baseline\n\n279\n00:13:22.260 --> 00:13:24.080\nthat includes the updates.\n\n280\n00:13:24.080 --> 00:13:27.470\nSo we dictate when they roll out and so\ncreating a baseline's gonna be one of\n\n281\n00:13:27.470 --> 00:13:30.010\nthe first things that we do when\nwe get into the update manager.\n\n282\n00:13:31.160 --> 00:13:33.890\nAll right now it just finished the install\nso I'll go ahead and finish that.\n\n283\n00:13:35.060 --> 00:13:38.450\nAnd now that it's done,\nI can just close out of this stuff and\n\n284\n00:13:38.450 --> 00:13:39.510\nwe're ready to use it.\n\n285\n00:13:39.510 --> 00:13:42.280\nOne of the nice parts about it is\nit's just integrated right into\n\n286\n00:13:42.280 --> 00:13:43.140\nthe vSphere web client.\n\n287\n00:13:43.140 --> 00:13:45.560\nRemember when we did the install and\nit asked for the vCenter data, and\n\n288\n00:13:45.560 --> 00:13:48.010\nwe gave it a username and\npassword to link them together?\n\n289\n00:13:48.010 --> 00:13:48.580\nThey're linked.\n\n290\n00:13:48.580 --> 00:13:50.592\nSo now I can just go right\ninto my vSphere Web Client and\n\n291\n00:13:50.592 --> 00:13:52.707\nI'll be able to see the update manager and\nwork with it.\n\n292\n00:13:52.707 --> 00:13:56.147\nSo I'm gonna jump over to my client\nhere where I'm logged into the vSphere\n\n293\n00:13:56.147 --> 00:13:57.810\nWeb Client and what you should see,\n\n294\n00:13:57.810 --> 00:14:01.470\nassuming the installation worked out\nthe way it's supposed to, is you should\n\n295\n00:14:01.470 --> 00:14:05.470\nsee a new entry over here on the left\nside, and that's the Update Manager.\n\n296\n00:14:05.470 --> 00:14:09.390\nAnd when you go into the Update Manager,\nwell, that's going to load up.\n\n297\n00:14:09.390 --> 00:14:12.340\nAnd there is my Update Manager Service,\nand see how it's showing with\n\n298\n00:14:12.340 --> 00:14:15.400\nIP because I picked IP instead\nof name during the install.\n\n299\n00:14:15.400 --> 00:14:16.470\nAnd so I see that server,\n\n300\n00:14:16.470 --> 00:14:20.380\nI might have more than one update server,\nI just have one.\n\n301\n00:14:20.380 --> 00:14:23.570\nAnd when you go in here,\nyou can monitor to see its performance,\n\n302\n00:14:23.570 --> 00:14:28.390\nthat's not terribly exciting and we can\nmanage it and that's what we need to do.\n\n303\n00:14:28.390 --> 00:14:30.935\nWhen you manage it you're gonna see\nan number of different things that you can\n\n304\n00:14:30.935 --> 00:14:35.210\ntweak, the important ones\nare these two guys right here,\n\n305\n00:14:35.210 --> 00:14:39.360\nthe Patch Repository and\nthe EXI Images okay.\n\n306\n00:14:39.360 --> 00:14:42.980\nThe Patch Repository is restoring any\nof the updates patches that come of for\n\n307\n00:14:42.980 --> 00:14:48.020\nEXI and the other VSphere products but\nEXI Images that's where\n\n308\n00:14:48.020 --> 00:14:53.040\nwe store installation images to be able to\nload up ESXI and get our systems upgraded.\n\n309\n00:14:53.040 --> 00:14:56.870\n>> And Don would there be a reason maybe\nto have more than one ESXI image or\n\n310\n00:14:56.870 --> 00:14:59.080\njust a single image?\n\n311\n00:14:59.080 --> 00:15:02.240\n>> You probably find it naturally just\nbuild up multiple images as time goes\n\n312\n00:15:02.240 --> 00:15:03.230\non, right?\n\n313\n00:15:03.230 --> 00:15:04.650\nAnd so you certainly can.\n\n314\n00:15:04.650 --> 00:15:06.600\nYou can have more than one image in there.\n\n315\n00:15:06.600 --> 00:15:09.680\nAnd there's nothing wrong with that, but\nthere may be a reason for keeping it,\n\n316\n00:15:09.680 --> 00:15:12.520\nyou may have some particular\nneed like you've got an ESXi\n\n317\n00:15:12.520 --> 00:15:15.110\nmixed environment where you've got 6 and\n5.5.\n\n318\n00:15:15.110 --> 00:15:17.910\nAnd you need to roll out another\n5.5 host for some reason and\n\n319\n00:15:17.910 --> 00:15:21.590\nso you deploy that, if you still have\nthe image, you can certainly do it.\n\n320\n00:15:21.590 --> 00:15:25.588\nIf you don't have the image, now,\nyou've got a problem, it just depends, so\n\n321\n00:15:25.588 --> 00:15:28.156\nyou may only need the latest and\ngreatest In there or\n\n322\n00:15:28.156 --> 00:15:30.269\nyou may want to accumulate more than one.\n\n323\n00:15:30.269 --> 00:15:34.182\nAll right, now because I haven't\ndownloaded the updates from VMWare I'm\n\n324\n00:15:34.182 --> 00:15:36.120\ngonna need to manually put these in.\n\n325\n00:15:36.120 --> 00:15:37.936\nSo under imported ESXI images here,\n\n326\n00:15:37.936 --> 00:15:40.524\nI'm just gonna hit that\nlittle button to import it.\n\n327\n00:15:40.524 --> 00:15:43.880\nAnd then that'll let me browse my\nhard drive and find the image,\n\n328\n00:15:43.880 --> 00:15:46.567\nwhich I've got one laying\naround here somewhere.\n\n329\n00:15:46.567 --> 00:15:49.263\nGot an ISO folder.\n\n330\n00:15:49.263 --> 00:15:52.640\nAnd so I'm just gonna come in and\nfind that VM adviser install image.\n\n331\n00:15:52.640 --> 00:15:56.197\nWhen you license ESXI they give you\naccess to download that ISO file and\n\n332\n00:15:56.197 --> 00:16:00.295\nthat's all that we need to provide and we\ncan import that right into the system and\n\n333\n00:16:00.295 --> 00:16:01.094\nthere it goes.\n\n334\n00:16:01.094 --> 00:16:04.929\nIt's gonna upload it in there and\nit will become a part of that repository.\n\n335\n00:16:04.929 --> 00:16:09.852\nOnce it's in the repository, now I can\ndeploy it out to machines as needed and\n\n336\n00:16:09.852 --> 00:16:12.447\nthey'll Have access and there we go.\n\n337\n00:16:12.447 --> 00:16:15.370\nIt had me worried for a second there,\nit was just sitting there at zero.\n\n338\n00:16:15.370 --> 00:16:18.470\nBut so it's gonna deploy up,\nand now it'll be ready to rock.\n\n339\n00:16:18.470 --> 00:16:21.610\nNow it's still not gonna roll this out.\n\n340\n00:16:21.610 --> 00:16:25.460\nSo when this gets uploaded it's gonna\nshow as being in the repository but\n\n341\n00:16:25.460 --> 00:16:27.699\nnobody's gonna get it,\nnobody's gonna get that installation.\n\n342\n00:16:29.240 --> 00:16:34.000\nAbsolutely nothing happens in\nthe VUM until you create a baseline.\n\n343\n00:16:34.000 --> 00:16:39.002\nSo I just uploaded that one, so now it\nshows that it's got an ESXI 6.0 update 2,\n\n344\n00:16:39.002 --> 00:16:42.735\nI think, for the really astute,\nI think update 3 is out now.\n\n345\n00:16:42.735 --> 00:16:46.145\nBut my disk was update 2, so\nI've gotta throw in there and\n\n346\n00:16:46.145 --> 00:16:48.890\nI'll just say OK to that and there it is.\n\n347\n00:16:48.890 --> 00:16:52.940\nNow just having that disk is not enough,\nall right?\n\n348\n00:16:52.940 --> 00:16:56.020\nI now need to create a baseline to get\nthat rolled out and when I look at my tabs\n\n349\n00:16:56.020 --> 00:17:01.800\nacross the top here I can find\nHost Baselines as well as VM Baselines.\n\n350\n00:17:01.800 --> 00:17:04.253\nI want Host Baselines.\n\n351\n00:17:04.253 --> 00:17:07.930\nIn my host right now,\nactually I've only got one.\n\n352\n00:17:07.930 --> 00:17:11.859\nI got one host and it's running ESXI 5.0.\n\n353\n00:17:11.859 --> 00:17:15.040\nI've got ESXI 6.0 and\nI wanna roll that out.\n\n354\n00:17:15.040 --> 00:17:18.260\nSo I'm gonna need to create a baseline and\nget that put in place.\n\n355\n00:17:18.260 --> 00:17:21.440\n>> And Don would you really have a\nnecessity to use more than one baseline or\n\n356\n00:17:21.440 --> 00:17:23.960\nwould you just be using\na single base line?\n\n357\n00:17:23.960 --> 00:17:30.365\n>> Maybe, if we had, let's say we had a\nthousand hosts, and they were all running\n\n358\n00:17:30.365 --> 00:17:34.834\n5.5, and I want to deploy 6.0 on all\nof them, I could just use one baseline.\n\n359\n00:17:36.110 --> 00:17:39.210\nBut I might be packaging\nother updates with this.\n\n360\n00:17:39.210 --> 00:17:43.520\nI might have, maybe I have a,\nlet's say we have a hundred hosts.\n\n361\n00:17:43.520 --> 00:17:46.669\nI might have ten hosts\nthat's my test environment.\n\n362\n00:17:46.669 --> 00:17:49.550\nAnd then my 90 other hosts\nare considered production.\n\n363\n00:17:49.550 --> 00:17:54.930\nSo I might create one baseline for test\nand a separate baseline for production.\n\n364\n00:17:54.930 --> 00:17:59.198\nAnd so, I go to the test baseline and\nI add the ESXI 6.0 installer.\n\n365\n00:17:59.198 --> 00:18:03.641\nAnd now, they're going to upgrade to 6.0,\nbut my production stays at 5.5.\n\n366\n00:18:03.641 --> 00:18:07.683\nAnd, only when I'm ready do I then go and\nedit the production baseline, and\n\n367\n00:18:07.683 --> 00:18:09.210\nchange that to 6.0 also.\n\n368\n00:18:09.210 --> 00:18:10.220\nAnd now, they upgrade too.\n\n369\n00:18:10.220 --> 00:18:12.500\nSo, if you want to divide your servers up,\n\n370\n00:18:12.500 --> 00:18:16.780\nfor any reason, maybe it's different\ncustomers on different servers.\n\n371\n00:18:16.780 --> 00:18:19.650\nOr software packages or just licenses.\n\n372\n00:18:19.650 --> 00:18:21.560\nMaybe I don't have.\n\n373\n00:18:21.560 --> 00:18:25.630\nMaybe I have 100 hosts but\nI've only bought 20 6.0 licenses.\n\n374\n00:18:25.630 --> 00:18:27.451\nI only wanna roll out 6.0 to 20 hosts.\n\n375\n00:18:27.451 --> 00:18:31.466\nSo I'll need to create a separate baseline\nfor them, and you can attach the baselines\n\n376\n00:18:31.466 --> 00:18:34.830\nto specific hosts and then they'll\nget the update other hosts won't.\n\n377\n00:18:34.830 --> 00:18:37.338\nSo yeah, there's a couple of\ndifferent scenarios where you might\n\n378\n00:18:37.338 --> 00:18:38.472\nwant more than one baseline.\n\n379\n00:18:38.472 --> 00:18:40.910\nBut there's also a scenario where\nyou just want one baseline.\n\n380\n00:18:40.910 --> 00:18:44.980\nIf you want all of your servers to\nhave the identical software versions,\n\n381\n00:18:44.980 --> 00:18:46.430\nyou'll just have one baseline.\n\n382\n00:18:46.430 --> 00:18:46.970\nAll right.\n\n383\n00:18:46.970 --> 00:18:49.828\nNow you'll see that actually,\nI have two baselines already created,\n\n384\n00:18:49.828 --> 00:18:50.740\nI didn't make these.\n\n385\n00:18:50.740 --> 00:18:52.740\nRight?\nThese are part of the default install.\n\n386\n00:18:52.740 --> 00:18:56.770\nSo you've got critical host patches,\nand non critical host patches, right?\n\n387\n00:18:56.770 --> 00:19:02.910\nSo, I might wanna roll out the critical\nhost patch baseline to all of my hosts.\n\n388\n00:19:02.910 --> 00:19:06.009\nSo when VMware releases a critical update,\nwe roll it out immediately.\n\n389\n00:19:07.180 --> 00:19:09.620\nBut my non criticals,\nI might wanna wait on those.\n\n390\n00:19:09.620 --> 00:19:10.304\nRight?\n\n391\n00:19:10.304 --> 00:19:11.530\nTest them out, see.\n\n392\n00:19:11.530 --> 00:19:14.130\nThere's not really any benefit to\nme getting them unless there's some\n\n393\n00:19:14.130 --> 00:19:16.130\nfeature in there I specifically need.\n\n394\n00:19:16.130 --> 00:19:17.860\nOr we can come through and\nwe can create our own.\n\n395\n00:19:17.860 --> 00:19:20.165\nRight?\nSo, I might have a research and\n\n396\n00:19:20.165 --> 00:19:21.395\ndevelopment or test group.\n\n397\n00:19:21.395 --> 00:19:23.185\nI might have a production group or\nwhatever.\n\n398\n00:19:23.185 --> 00:19:25.515\nYou create them based on\nthe needs of your company.\n\n399\n00:19:25.515 --> 00:19:26.395\nAll right.\nSo\n\n400\n00:19:26.395 --> 00:19:30.255\nI'm gonna create a new base line\njust by hitting the little plus.\n\n401\n00:19:30.255 --> 00:19:30.925\nAnd I'll give it a name.\n\n402\n00:19:30.925 --> 00:19:33.010\nSo maybe I'll call this my test group.\n\n403\n00:19:33.010 --> 00:19:34.000\nRight?\nSo\n\n404\n00:19:34.000 --> 00:19:38.520\nthese are gonna be ESXI servers that I\nspecifically got for testing new versions.\n\n405\n00:19:38.520 --> 00:19:40.730\nAnd then down here you can\npick what you're pushing.\n\n406\n00:19:40.730 --> 00:19:43.720\nIs it a patch, an extension or an upgrade?\n\n407\n00:19:43.720 --> 00:19:47.140\nA patch modifies something in ESX, right,\n\n408\n00:19:47.140 --> 00:19:49.850\nchanges some functionality\nto fix a problem.\n\n409\n00:19:49.850 --> 00:19:53.476\nAn extension adds functionality,\nright, it's like a new feature,\n\n410\n00:19:53.476 --> 00:19:55.205\nit could be drivers or whatever.\n\n411\n00:19:55.205 --> 00:19:57.320\nAnd then the host upgrade\nthat's what I want.\n\n412\n00:19:57.320 --> 00:20:02.029\nI'm upgrading from ESXI 5.0 to 6.0, right?\n\n413\n00:20:02.029 --> 00:20:03.376\nI wanna upgrade to a new version so\n\n414\n00:20:03.376 --> 00:20:05.693\nI'm gonna choose that is\na little more than just a patch.\n\n415\n00:20:07.645 --> 00:20:10.690\nThen, it's gonna show me my ESXI images.\n\n416\n00:20:10.690 --> 00:20:14.310\nIf I'm gonna be doing a host upgrade, I\nneed an image, and I've only got the one.\n\n417\n00:20:14.310 --> 00:20:17.600\nIf I had more than one, here's where,\nwhen I answer Wes' question,\n\n418\n00:20:17.600 --> 00:20:22.980\nif I have more than one image,\nI could be rolling 5.5 out to production,\n\n419\n00:20:22.980 --> 00:20:25.570\nwhile I'm rolling 6.0 into test, right?\n\n420\n00:20:25.570 --> 00:20:29.500\nOr maybe I have 6.0 update\n1 in production, and\n\n421\n00:20:29.500 --> 00:20:33.880\nthis is 6.0 update 2 that I'm rolling\nout into test, or whatever, right?\n\n422\n00:20:33.880 --> 00:20:36.670\nSo you can kind of base that on\nthe needs of your organization.\n\n423\n00:20:38.800 --> 00:20:41.790\nAll right, then I get my little\nsummary here, not too much to see, and\n\n424\n00:20:41.790 --> 00:20:43.100\nI can finish, right?\n\n425\n00:20:43.100 --> 00:20:45.478\nSo that baseline that I\njust made is super simple.\n\n426\n00:20:45.478 --> 00:20:49.860\nIt's just, hey this is the installation\nimage I expect you to have and\n\n427\n00:20:49.860 --> 00:20:50.630\nthere it is created.\n\n428\n00:20:50.630 --> 00:20:54.560\nSo there's my test group and it's content\nis not a collection of patches which\n\n429\n00:20:54.560 --> 00:20:56.823\nare automatically downloaded from VMware,\n\n430\n00:20:56.823 --> 00:20:59.430\nbut an installation image\nthat I put in there.\n\n431\n00:20:59.430 --> 00:21:01.660\nNotice that the top two are dynamic,\nright?\n\n432\n00:21:01.660 --> 00:21:04.130\nThey're updating along with VMware.\n\n433\n00:21:04.130 --> 00:21:05.810\nBut the one I just made is fixed.\n\n434\n00:21:05.810 --> 00:21:10.351\nI picked what's in it and\nI picked just that ESXI 6 image.\n\n435\n00:21:10.351 --> 00:21:12.377\nAll right so I've got it and\n\n436\n00:21:12.377 --> 00:21:17.150\nnow that I've got the baseline I\ncan start to put people in to it.\n\n437\n00:21:17.150 --> 00:21:20.962\nI can actually assign host to it,\nto get them upgraded.\n\n438\n00:21:20.962 --> 00:21:22.840\nAll right,\nnow normally I jump right in and do it.\n\n439\n00:21:22.840 --> 00:21:26.090\nBut, I wanna show you guys something and\nthis is not on the exam.\n\n440\n00:21:26.090 --> 00:21:28.230\nBut in real life land,\nthere's a little bug,\n\n441\n00:21:28.230 --> 00:21:31.420\na little bug in the VShpere 6 and\nit's in the current version.\n\n442\n00:21:31.420 --> 00:21:33.210\nI'm not aware that they fixed it.\n\n443\n00:21:33.210 --> 00:21:39.800\nThat when you roll out the ESXI 6.0\nhost update to your hosts, it'll work,\n\n444\n00:21:39.800 --> 00:21:43.310\nit'll deploy, it'll upgrade them, and\neverything will look fine on the host.\n\n445\n00:21:43.310 --> 00:21:47.620\nBut for whatever reason,\nthey disappear from vCenter,\n\n446\n00:21:47.620 --> 00:21:49.200\nthey just disappear, they don't show up.\n\n447\n00:21:49.200 --> 00:21:49.840\nOkay.\n\n448\n00:21:49.840 --> 00:21:54.230\nWell, what happens is the way that\nthe VMware handles their certificate\n\n449\n00:21:54.230 --> 00:21:57.730\ntime outs, changed a little bit\nin some of the newer updates.\n\n450\n00:21:57.730 --> 00:21:59.030\nAnd it makes these hosts disappear and\n\n451\n00:21:59.030 --> 00:22:01.730\nit will freak you out\nthe first time it happens.\n\n452\n00:22:01.730 --> 00:22:04.480\nI rolled it out to a test environment and\nthe test environment disappeared.\n\n453\n00:22:04.480 --> 00:22:05.700\nJust the whole thing, gone.\n\n454\n00:22:05.700 --> 00:22:07.270\nI thought I destroyed\nthe test environment.\n\n455\n00:22:07.270 --> 00:22:10.920\nSo there's actually a little change we can\nmake here in our user interface that'll\n\n456\n00:22:10.920 --> 00:22:13.170\nstop that from happening,\nso I want to make that, and\n\n457\n00:22:13.170 --> 00:22:16.630\nnormally I do the stuff off camera,\nbut it's a real life thing.\n\n458\n00:22:16.630 --> 00:22:19.070\nI'm sure the VMware guys\nwill fix this shortly, but\n\n459\n00:22:19.070 --> 00:22:21.850\nif you're doing this right now,\nit's a problem that's out there.\n\n460\n00:22:21.850 --> 00:22:24.290\nSo I need to change one of\nmy certificate time outs, so\n\n461\n00:22:24.290 --> 00:22:25.650\nI'm gonna do that real quick.\n\n462\n00:22:25.650 --> 00:22:28.580\nI'm gonna jump back up to my homepage and\n\n463\n00:22:28.580 --> 00:22:33.080\nI'm gonna go into Host and Clusters,\nand I'm gonna pick my vCenter servers.\n\n464\n00:22:33.080 --> 00:22:36.960\nSo my vCenter server is this WIN-SERVER01,\nso I'm just gonna pick that.\n\n465\n00:22:36.960 --> 00:22:40.330\nI'm gonna go to Manage, Settings,\nand Advanced Settings, and\n\n466\n00:22:40.330 --> 00:22:44.511\nthe Advanced Settings, we haven't really\nmessed with in this series, right?\n\n467\n00:22:44.511 --> 00:22:48.519\nThere's a ton of stuff in here that you\ncan tweak that typically we don't wanna\n\n468\n00:22:48.519 --> 00:22:49.380\ntweak, right?\n\n469\n00:22:49.380 --> 00:22:52.550\nWe usually wanna leave this stuff alone\ncuz you can really do some damage but\n\n470\n00:22:52.550 --> 00:22:54.610\nthe one that I'm looking for is in here.\n\n471\n00:22:54.610 --> 00:22:59.170\nI'm looking for VPXD.\n\n472\n00:22:59.170 --> 00:23:00.930\nLet me get down to the VPXD.\n\n473\n00:23:00.930 --> 00:23:04.910\nVPXD is a really big section cuz it\ngot a lot of the configuration in it.\n\n474\n00:23:04.910 --> 00:23:07.750\nAnd I'm looking for VPXD.certmanagement.\n\n475\n00:23:07.750 --> 00:23:09.540\nIt's the certificate management.\n\n476\n00:23:09.540 --> 00:23:14.950\nAnd what it does, is it has a little value\nin here that's called the Minutes Before,\n\n477\n00:23:14.950 --> 00:23:17.050\nthis guy right here, okay.\n\n478\n00:23:17.050 --> 00:23:19.400\nAnd what this is, is like a time-out.\n\n479\n00:23:19.400 --> 00:23:23.765\nWhen it goes to access a certificate and\nit's set to 1440 minutes,\n\n480\n00:23:23.765 --> 00:23:27.402\nwhich is basically an entire day and\none of the new updates,\n\n481\n00:23:27.402 --> 00:23:29.971\ndoesn't like that time, it's too big.\n\n482\n00:23:29.971 --> 00:23:33.236\nOkay, so all you have to do is to make\nthat time smaller and there is a VMWARE\n\n483\n00:23:33.236 --> 00:23:37.208\nhot fix article that's for this, you can\nfind it in the base if you search for it.\n\n484\n00:23:37.208 --> 00:23:39.013\nBut basically all it does is it\ntells you to change that and\n\n485\n00:23:39.013 --> 00:23:40.530\njust make it something\nsmall like ten minutes.\n\n486\n00:23:40.530 --> 00:23:41.570\nAnd so that's what I'm gonna do.\n\n487\n00:23:41.570 --> 00:23:44.280\nI'm gonna drop that down\nto ten minutes and, shoot.\n\n488\n00:23:44.280 --> 00:23:45.810\nNow I gotta scroll down and\nfind it anyway.\n\n489\n00:23:47.260 --> 00:23:49.070\nNo job worth doing is worth doing twice.\n\n490\n00:23:49.070 --> 00:23:52.380\nSo let me find that Minutes Before,\nand I'm gonna change\n\n491\n00:23:52.380 --> 00:23:56.670\nit from 1440 down to a blazing ten\nminutes, and I will say, okay to that.\n\n492\n00:23:56.670 --> 00:23:57.294\nAll right.\nNow,\n\n493\n00:23:57.294 --> 00:24:01.176\nyou're not gonna notice any functional\ndifference here in your system, but\n\n494\n00:24:01.176 --> 00:24:05.296\nwhat's gonna happen is when we roll out\nESXI 6 to that host It's gonna upgrade and\n\n495\n00:24:05.296 --> 00:24:09.300\nwe'll still see it in vCenter, and\nlet me tell you it's kind of a nice thing.\n\n496\n00:24:09.300 --> 00:24:11.440\nYou need to see that host.\n\n497\n00:24:11.440 --> 00:24:14.010\nIf you forget to do this\nyou can do the upgrade.\n\n498\n00:24:14.010 --> 00:24:17.515\nThe machines will all disappear, and\nthen if you come and change this value you\n\n499\n00:24:17.515 --> 00:24:20.085\ncan refresh your screen and\nit will all magically reappear again.\n\n500\n00:24:20.085 --> 00:24:23.855\nSo it's kind of tied to that setting,\nkind of an important one.\n\n501\n00:24:23.855 --> 00:24:26.665\nAll right,\nnow that we've got that done let's\n\n502\n00:24:26.665 --> 00:24:29.525\nactually do the upgrade that we set out\nto do in the beginning of this episode.\n\n503\n00:24:29.525 --> 00:24:32.181\nSo I need to get this thing upgraded.\n\n504\n00:24:32.181 --> 00:24:36.555\nSo what I'm gonna do is, well I guess I\nneed to get back to my update manager.\n\n505\n00:24:36.555 --> 00:24:40.440\nWhat I need to do is I need to get\nthat baseline attached to my host.\n\n506\n00:24:40.440 --> 00:24:45.334\nI've got ESX host 01 which\nis running ESXI 5.0.\n\n507\n00:24:45.334 --> 00:24:48.380\nIt doesn't know to upgrade\nit cuz it has no baseline.\n\n508\n00:24:48.380 --> 00:24:51.880\nSo I need to attach the baseline and\nget that put in place.\n\n509\n00:24:51.880 --> 00:24:55.498\nSo I'm gonna come down here and\nfind my test group baseline.\n\n510\n00:24:55.498 --> 00:25:01.620\nAnd from here,\nI just need to get this one attached.\n\n511\n00:25:01.620 --> 00:25:07.563\nNow the way we attach it, you can do\nit from here if you have group setup or\n\n512\n00:25:07.563 --> 00:25:10.449\nyou can do it from the host itself.\n\n513\n00:25:10.449 --> 00:25:12.774\nAnd doing it from the host\nitself can be a little bit easy,\n\n514\n00:25:12.774 --> 00:25:15.060\neasier at least because you\nkinda categorize things.\n\n515\n00:25:15.060 --> 00:25:18.200\nSo I'm gonna go back out\nto my hosting clusters and\n\n516\n00:25:18.200 --> 00:25:22.960\nI'm gonna take ESX host 01,\nI'll go over here to manage.\n\n517\n00:25:22.960 --> 00:25:27.270\nAnd when we link to the update manager,\nnot only did it add it to the vSphere web\n\n518\n00:25:27.270 --> 00:25:29.290\nclamp but\nit also added it to our settings in here.\n\n519\n00:25:29.290 --> 00:25:33.550\nSo when I come in and look at the ESX\nhost 01 settings, I can browse down\n\n520\n00:25:33.550 --> 00:25:37.534\nthe update manager is tucked away in here\nsomewhere, let me see if I can find it.\n\n521\n00:25:37.534 --> 00:25:43.322\n[SOUND] [LAUGH] I forgot.\n\n522\n00:25:43.322 --> 00:25:46.133\nIt's not under the left menu, it's\nactually this nice big button right here\n\n523\n00:25:46.133 --> 00:25:47.700\nstaring at me if I would\njust click on that.\n\n524\n00:25:47.700 --> 00:25:50.036\nSo this Update Manager button\nthat didn't show up before.\n\n525\n00:25:50.036 --> 00:25:52.630\nIt's an extension that's been added on so\nwe can see it.\n\n526\n00:25:52.630 --> 00:25:55.650\nAnd from here you can attach a baseline.\n\n527\n00:25:55.650 --> 00:25:56.195\nOkay.\nSo\n\n528\n00:25:56.195 --> 00:25:59.370\nright now we don't necessarily\nhave any baselines attached.\n\n529\n00:25:59.370 --> 00:26:01.760\nI'm going to go ahead and\nchose that and I'll see the baselines.\n\n530\n00:26:01.760 --> 00:26:05.390\nNow, cool thing about this, you can be\nattached to more than one baseline.\n\n531\n00:26:05.390 --> 00:26:08.940\nI know I want to attach to this test group\nbecause that's where I'm gonna get my ESXI\n\n532\n00:26:08.940 --> 00:26:13.810\nsix install but I could also attach\nto critical hosts and patches.\n\n533\n00:26:13.810 --> 00:26:17.441\nAnd now I'm getting upgraded and\nI'm getting patched, and\n\n534\n00:26:17.441 --> 00:26:20.726\nif I had an extension baseline\nI could attach that too.\n\n535\n00:26:20.726 --> 00:26:23.819\nSo you can come in and check off all\nthat you want to be a part of, and\n\n536\n00:26:23.819 --> 00:26:25.140\nyou can mix and match.\n\n537\n00:26:25.140 --> 00:26:27.640\nAll right.\nBut for now I'm just gonna upgrade ESX,\n\n538\n00:26:27.640 --> 00:26:28.960\nand so\nthat's the one that I'm gonna choose.\n\n539\n00:26:30.580 --> 00:26:35.632\nAll right, so once I've got that in place,\nthen we're pretty much ready to go and\n\n540\n00:26:35.632 --> 00:26:40.317\ndo the rest of our upgrade, as soon as I\ncan get that little OK button to be on my\n\n541\n00:26:40.317 --> 00:26:44.480\nscreen, my resolution is just right,\nthere we go.\n\n542\n00:26:44.480 --> 00:26:46.960\nSo I'm gonna hit that and\nit's gonna attach the baseline.\n\n543\n00:26:46.960 --> 00:26:52.030\nNow I can see right here test group,\nright, is attached, it's a host upgrade.\n\n544\n00:26:52.030 --> 00:26:55.960\nAnd if I look over here my compliance\nstatus is currently unknown.\n\n545\n00:26:55.960 --> 00:26:59.100\nOkay, I've attached the baseline, but\n\n546\n00:26:59.100 --> 00:27:02.420\neven still the baseline\ndoesn't actually do anything.\n\n547\n00:27:02.420 --> 00:27:07.300\nI have to tell it to check compliance and\nit'll scan every host, that has\n\n548\n00:27:07.300 --> 00:27:11.720\nthat baseline attached and show me whether\nanybody needs an update, all right.\n\n549\n00:27:11.720 --> 00:27:14.000\nSo that's gonna be my next step here.\n\n550\n00:27:14.000 --> 00:27:20.370\nI'm attached and once you're attached,\nwe can go in and we can scan for updates.\n\n551\n00:27:20.370 --> 00:27:22.680\nSince you got a nice little button\nright here to scan for updates.\n\n552\n00:27:22.680 --> 00:27:26.190\nI'm gonna hit that and it's gonna scan for\nupdates and I can limit or\n\n553\n00:27:26.190 --> 00:27:27.490\nrestrict this if I want.\n\n554\n00:27:27.490 --> 00:27:29.050\nI'll just leave it be.\n\n555\n00:27:29.050 --> 00:27:30.200\nAnd now it's gonna check.\n\n556\n00:27:30.200 --> 00:27:30.830\nOkay.\n\n557\n00:27:30.830 --> 00:27:35.780\nNow, what it should do is it should find\nthat yes there's this 6.0 update and\n\n558\n00:27:35.780 --> 00:27:38.600\nwe're still running 5.0 so\nwe need an update.\n\n559\n00:27:38.600 --> 00:27:41.150\nAnd it take just a moment,\nit's kinda working in the background but\n\n560\n00:27:41.150 --> 00:27:45.420\nwhen it's done, we'll see this\ncompliance status change from unknown\n\n561\n00:27:45.420 --> 00:27:48.470\nto let us know we're not in compliance,\nthat it's failed.\n\n562\n00:27:48.470 --> 00:27:53.480\nAnd once it shows that we'll be able to\nhit this nice little remediate button and\n\n563\n00:27:53.480 --> 00:27:54.500\nthat's gonna remediate us.\n\n564\n00:27:54.500 --> 00:27:57.770\nAnd by remediate us I mean\nit sees you're running five.\n\n565\n00:27:57.770 --> 00:28:01.380\nWe should be running six and\nso it upgrades us to six.\n\n566\n00:28:01.380 --> 00:28:04.320\nNow the best part of that,\nis it'll be automatic.\n\n567\n00:28:04.320 --> 00:28:05.250\nIt just does it.\n\n568\n00:28:05.250 --> 00:28:09.140\nIf I have 100 hosts and when I go to\nremediate them, it will just remediate\n\n569\n00:28:09.140 --> 00:28:12.300\nthem, it will do the upgrade, it will\ndo it all, without me messing with it.\n\n570\n00:28:12.300 --> 00:28:16.817\nAnd if I have to distribute a resource\nscheduler, it will even take the VMs,\n\n571\n00:28:16.817 --> 00:28:18.453\nmove them to another host.\n\n572\n00:28:18.453 --> 00:28:22.236\nDo the upgrade and then move the VMs back,\nthat way there's no downtime for\n\n573\n00:28:22.236 --> 00:28:23.175\nthe end-users.\n\n574\n00:28:23.175 --> 00:28:25.325\nYou could actually be upgrading your\nhosts right in the middle of the day.\n\n575\n00:28:25.325 --> 00:28:26.815\nIt's pretty cool.\n\n576\n00:28:26.815 --> 00:28:27.865\nNow, mine failed.\n\n577\n00:28:27.865 --> 00:28:30.015\nAnd mine failed in a bad way.\n\n578\n00:28:30.015 --> 00:28:31.445\nIt failed in that it said, Incompatible.\n\n579\n00:28:32.608 --> 00:28:36.320\nI have ESIX six and it won't let\nme roll it out to this machine.\n\n580\n00:28:36.320 --> 00:28:38.920\nIt says that my hardware\nis incompatible with it.\n\n581\n00:28:38.920 --> 00:28:40.850\nAll right well why is that?\n\n582\n00:28:40.850 --> 00:28:41.990\nWell we can find out.\n\n583\n00:28:41.990 --> 00:28:45.561\nIf you click on it you can come down\nhere to your status details and\n\n584\n00:28:45.561 --> 00:28:48.337\nit'll tell you why and\nI can see right here, one or\n\n585\n00:28:48.337 --> 00:28:52.458\nmore VMF S3 volumes have been detected and\nit’s not supportive, okay.\n\n586\n00:28:52.458 --> 00:28:55.738\nWants me to upgrade my datastore\nfrom VMSF 3 to VMFS 5.\n\n587\n00:28:55.738 --> 00:29:00.460\n>> Now Don,\nI've seen some of this ESXI host and they\n\n588\n00:29:00.460 --> 00:29:04.890\nare running the six and I know that they\nare compatible with the three versions.\n\n589\n00:29:04.890 --> 00:29:06.380\nWhat's the compatibility problem here?\n\n590\n00:29:06.380 --> 00:29:09.450\n>> Yeah I think I mentioned\nthat in the storage episode how\n\n591\n00:29:09.450 --> 00:29:11.800\nthe ESXI 6 does support VMFS 3.\n\n592\n00:29:11.800 --> 00:29:13.360\nYou can do it, right?\n\n593\n00:29:13.360 --> 00:29:18.312\nBut why isn't compatible here well\nunfortunately it's a little bit strict on\n\n594\n00:29:18.312 --> 00:29:20.189\nVMWare's best practices and\n\n595\n00:29:20.189 --> 00:29:25.070\nVMWare's best practice is you should\nbe running VMS five not VMS three.\n\n596\n00:29:25.070 --> 00:29:27.700\nNow, this goes contradictory to\nthere upgrade phases, right?\n\n597\n00:29:27.700 --> 00:29:28.400\nRemember the phases.\n\n598\n00:29:28.400 --> 00:29:30.020\nPhase one, upgrade vCenter.\n\n599\n00:29:30.020 --> 00:29:32.170\nPhase two, upgrade your host.\n\n600\n00:29:32.170 --> 00:29:34.590\nPhase three,\nupgrade your virtual machines.\n\n601\n00:29:34.590 --> 00:29:36.300\nPhase four, upgrade your data stores.\n\n602\n00:29:36.300 --> 00:29:37.770\nData stores are last.\n\n603\n00:29:37.770 --> 00:29:42.200\nBut here, I can't upgrade my host\nunless I upgrade my data store first.\n\n604\n00:29:42.200 --> 00:29:42.710\nRight?\n\n605\n00:29:42.710 --> 00:29:48.180\nSo this is,\nit's contradictory to VMware's actual\n\n606\n00:29:48.180 --> 00:29:52.110\nphases but in this case I'm gonna have to\nupdate my data store before I can do that.\n\n607\n00:29:52.110 --> 00:29:55.210\nFortunately, updating a data store\nis not a hard thing to do so\n\n608\n00:29:55.210 --> 00:29:58.110\nI just need to go into my data stores and\nget that bumped up.\n\n609\n00:29:58.110 --> 00:30:02.360\nNow, unfortunately it doesn't tell me\nexactly which data store is my problem but\n\n610\n00:30:02.360 --> 00:30:03.710\nthat's not the end of the world.\n\n611\n00:30:03.710 --> 00:30:06.290\nI'm gonna go over here to my\nrelated objects and data stores and\n\n612\n00:30:06.290 --> 00:30:07.830\nwe'll find out real fast.\n\n613\n00:30:07.830 --> 00:30:08.430\nThere it is.\n\n614\n00:30:08.430 --> 00:30:09.420\nOkay.\nSo,\n\n615\n00:30:09.420 --> 00:30:11.460\nI've got two data stores in this server.\n\n616\n00:30:11.460 --> 00:30:14.239\nOne is VMFS5, one is VMFS3.\n\n617\n00:30:14.239 --> 00:30:17.959\nSo, this guy needs to upgrade right here,\nthat's my problem child and\n\n618\n00:30:17.959 --> 00:30:19.323\nif we right-click on it,\n\n619\n00:30:19.323 --> 00:30:23.110\nyou'll see we've got that menu option\nright here to upgrade to VMFS 5.\n\n620\n00:30:23.110 --> 00:30:25.270\nNot a big deal and\nwe can go in and do that.\n\n621\n00:30:25.270 --> 00:30:27.585\nIt's gonna validate that\nit will actually work.\n\n622\n00:30:27.585 --> 00:30:30.510\nSo I'll just check that one off and\nhit OK.\n\n623\n00:30:30.510 --> 00:30:31.840\nAnd it's gonna upgrade that one.\n\n624\n00:30:31.840 --> 00:30:34.275\nIt only takes a few moments so\nwe'll give it a minute while it does that.\n\n625\n00:30:34.275 --> 00:30:37.940\nNow I just upgraded that out of hand,\n\n626\n00:30:37.940 --> 00:30:40.280\nthat's kind of a nice thing you can do\nwhen you're in a lab environment right?\n\n627\n00:30:40.280 --> 00:30:44.534\nBut if I was in a production environment\nI'd need to find out why is that running\n\n628\n00:30:44.534 --> 00:30:45.510\nVMFS version 3?\n\n629\n00:30:45.510 --> 00:30:46.980\nThat's pretty old.\n\n630\n00:30:46.980 --> 00:30:48.650\nIs there a reason we still have it there?\n\n631\n00:30:48.650 --> 00:30:51.330\nWe may need to go and\ncheck our documentation, find out why.\n\n632\n00:30:51.330 --> 00:30:53.630\nBut if there's no other reason,\nthen we should be able to update it.\n\n633\n00:30:53.630 --> 00:30:54.770\nAnd I can see, there we go.\n\n634\n00:30:54.770 --> 00:30:58.660\nSo now I'm updated and\nthey're VMSF 5, okay.\n\n635\n00:30:58.660 --> 00:31:00.230\nSo with that in place,\n\n636\n00:31:00.230 --> 00:31:04.760\nnow I can jump back to the update manager\nwhere I still show as incompatible.\n\n637\n00:31:04.760 --> 00:31:08.300\nBut now if I scan for updates,\nit's gonna refresh and\n\n638\n00:31:08.300 --> 00:31:12.980\nthis time, it should show that\nI'm ready to update, okay?\n\n639\n00:31:12.980 --> 00:31:14.010\nAnd i'll be able to remediate.\n\n640\n00:31:14.010 --> 00:31:16.617\nSo I'm gonna give that just a moment.\n\n641\n00:31:16.617 --> 00:31:18.489\nIt does take a second while it scans and\n\n642\n00:31:18.489 --> 00:31:21.575\nas soon as it does then\nwe'll be able to remediate.\n\n643\n00:31:21.575 --> 00:31:22.695\nPretty sure we have to wait for\n\n644\n00:31:22.695 --> 00:31:25.205\nit to get happy again before\nit'll let me do anything.\n\n645\n00:31:25.205 --> 00:31:27.109\nBut once it's happy then we'll be\nable to hit the remediate button.\n\n646\n00:31:27.109 --> 00:31:29.050\nLet me see if we can just skip ahead and\ndo it anyway.\n\n647\n00:31:29.050 --> 00:31:32.213\n[LAUGH] Sometimes it'll let you\ndo it if you get impatient.\n\n648\n00:31:32.213 --> 00:31:33.068\nHere we go.\n\n649\n00:31:33.068 --> 00:31:35.558\nAll right, so\nI'm gonna hit the remediate button and\n\n650\n00:31:35.558 --> 00:31:39.070\nit's showing that I have an upgrade\nbaseline out there called Test Group.\n\n651\n00:31:39.070 --> 00:31:41.480\nAnd that's what it's about to apply\nif I had more than one baseline.\n\n652\n00:31:41.480 --> 00:31:43.720\nI can pick which one I\nwas wanting to remediate.\n\n653\n00:31:43.720 --> 00:31:46.580\nYou don't have to remediate\nthem all at once and\n\n654\n00:31:46.580 --> 00:31:49.440\nthen as you advance forward,\nit's gonna show you the host.\n\n655\n00:31:49.440 --> 00:31:53.427\nAnd I can see that right now,\nwhoops, if I can expand this.\n\n656\n00:31:53.427 --> 00:31:57.929\nRight now I'm running 5.0 and\nit's about to upgrade me to 6.0.\n\n657\n00:31:57.929 --> 00:31:59.242\nAnd so I can hit Next.\n\n658\n00:31:59.242 --> 00:32:03.809\nAgree to the licensing agreement,\nthe standard part of the install and\n\n659\n00:32:03.809 --> 00:32:08.900\nhit next and now it's just giving me\nwhat to do incase of a failure, right?\n\n660\n00:32:08.900 --> 00:32:15.630\nIf we fail to upgrade to 6, you cannot\nroll back to previous version, right?\n\n661\n00:32:15.630 --> 00:32:18.130\nIn other words if it fails to upgrade,\nit's broken.\n\n662\n00:32:18.130 --> 00:32:19.990\nSo you need to have a plan in place.\n\n663\n00:32:19.990 --> 00:32:23.600\nDon't upgrade all your servers at once,\ncuz in theory they can all break at once.\n\n664\n00:32:23.600 --> 00:32:26.180\nSo you wanna take them in groups and\nupgrade one group.\n\n665\n00:32:26.180 --> 00:32:29.320\nYou move your VMs off to a different host,\nupdate that group, and\n\n666\n00:32:29.320 --> 00:32:30.310\nthen move your VMs back.\n\n667\n00:32:30.310 --> 00:32:32.320\nSo it's just warning me about that.\n\n668\n00:32:32.320 --> 00:32:35.830\nI can even Ignore warnings if\nI have unsupported hardware or\n\n669\n00:32:35.830 --> 00:32:38.720\nno longer supported VMFS data stores.\n\n670\n00:32:38.720 --> 00:32:42.400\nSo if I wanted to stay at VMFS version 3,\nhere's my chance.\n\n671\n00:32:42.400 --> 00:32:46.510\nI could override it,\nthat incompatible warning from earlier.\n\n672\n00:32:46.510 --> 00:32:49.470\nI wanna check to ignore it, normally I\nwouldn't do that, but am just doing it\n\n673\n00:32:49.470 --> 00:32:53.860\nhere because i know it is still showing me\nit is incompatible and will not let me go.\n\n674\n00:32:53.860 --> 00:32:57.510\nAll right, then I can schedule it,\nI can do the upgrade right now, or\n\n675\n00:32:57.510 --> 00:32:59.400\nI can schedule it to\nrun right after hours,\n\n676\n00:32:59.400 --> 00:33:03.490\nto run in the weekend, i usually like to\nbe around just incase prompt happens,\n\n677\n00:33:03.490 --> 00:33:07.516\nyou can certainly schedule it to\nhappen after hours, all right.\n\n678\n00:33:07.516 --> 00:33:10.430\nThen host remediation options, right.\n\n679\n00:33:10.430 --> 00:33:12.830\nWe've got the option to\nchange the VM's power state.\n\n680\n00:33:12.830 --> 00:33:15.540\nIf I have a virtual machine that's\nrunning, after the upgrade,\n\n681\n00:33:15.540 --> 00:33:16.510\nwhat do I want?\n\n682\n00:33:16.510 --> 00:33:18.050\nDefault is to keep it running.\n\n683\n00:33:18.050 --> 00:33:21.440\nBut I could tell it to power off\nthe virtual machines or suspend them, and\n\n684\n00:33:21.440 --> 00:33:23.050\nleave them that way, right.\n\n685\n00:33:23.050 --> 00:33:26.670\nYou can disable removable media, that's\nnice because sometimes you have a virtual\n\n686\n00:33:26.670 --> 00:33:29.200\nmachine that can get trapped, cuz it's\ngot some removable media attached,\n\n687\n00:33:29.200 --> 00:33:33.430\nattached to it, and if we have some kind\nof a failure going into maintenance mode,\n\n688\n00:33:33.430 --> 00:33:34.210\nyou can tell it to retry.\n\n689\n00:33:34.210 --> 00:33:39.380\nSo you get a few different options there,\nbut we'll just go with the defaults and\n\n690\n00:33:39.380 --> 00:33:40.080\nfinish that one up.\n\n691\n00:33:40.080 --> 00:33:44.705\nAll right, so when that's done,\nnow it's gonna reach out and, you know,\n\n692\n00:33:44.705 --> 00:33:46.085\nit actually did change.\n\n693\n00:33:46.085 --> 00:33:47.505\nIt showed Incompatible earlier.\n\n694\n00:33:47.505 --> 00:33:49.885\nNow it just shows Non-Compliant,\nand that's what I wanted.\n\n695\n00:33:49.885 --> 00:33:52.385\nNow that we fixed that data stored,\nit shows Non-Compliant.\n\n696\n00:33:52.385 --> 00:33:56.215\nSo, in the background it's\nreaching out to a host.\n\n697\n00:33:56.215 --> 00:33:59.455\nIt's deploying ESXi 6,\nit's copying it over the network,\n\n698\n00:33:59.455 --> 00:34:01.280\nit's getting it loaded on that host.\n\n699\n00:34:01.280 --> 00:34:02.050\nWhen it's done,\n\n700\n00:34:02.050 --> 00:34:06.610\nthe host will reboot, and when it reboots,\nit's gonna boot up with ESXI 6.0.\n\n701\n00:34:06.610 --> 00:34:10.890\nThen it's gonna check back\nin with v center, and\n\n702\n00:34:10.890 --> 00:34:12.770\nv center will update to reflect that.\n\n703\n00:34:12.770 --> 00:34:16.410\nIf I look at the icon over here,\nsee the little yellow stripes?\n\n704\n00:34:16.410 --> 00:34:17.690\nIt's now in maintenance mode.\n\n705\n00:34:17.690 --> 00:34:19.210\nRight?\nSo move that system to maintenance this\n\n706\n00:34:19.210 --> 00:34:20.340\ndoes the upgrade.\n\n707\n00:34:20.340 --> 00:34:24.440\nOtherwise my error logs will all fill\nup cuz that host would show us offline.\n\n708\n00:34:24.440 --> 00:34:27.200\nNow it's doing the upgrade and\nwe just have to wait, right.\n\n709\n00:34:27.200 --> 00:34:30.510\nIt's something that does take\na little while if I look here,\n\n710\n00:34:30.510 --> 00:34:35.370\nI can see that I'm remediating the entity,\nand it's 20% of the way through, and\n\n711\n00:34:35.370 --> 00:34:38.220\nit's just gonna churn along and\ndo that, okay.\n\n712\n00:34:38.220 --> 00:34:42.370\nNow if I go and watch on the host itself,\nwhat do I see here?\n\n713\n00:34:42.370 --> 00:34:44.000\nAbsolutely nothing, okay.\n\n714\n00:34:44.000 --> 00:34:46.280\nAnd the reason is it's\ncopying all those files over.\n\n715\n00:34:46.280 --> 00:34:48.440\nIt's stopping VM's or moving VM's, or\n\n716\n00:34:48.440 --> 00:34:51.270\nwhatever it needs to do,\nall that's happening in the background.\n\n717\n00:34:51.270 --> 00:34:53.920\nYou won't actually see anything\nhere untill reboots, and\n\n718\n00:34:53.920 --> 00:34:56.880\nit really it just reboot,\nand it boots ESXi 6.\n\n719\n00:34:56.880 --> 00:35:01.660\nSo from the console You really don't\nsee much, well, that right there.\n\n720\n00:35:01.660 --> 00:35:02.890\nYou see it reboot, and\n\n721\n00:35:02.890 --> 00:35:07.100\nnow that it's rebooting it's\nactually gonna boot into ESXi6.\n\n722\n00:35:07.100 --> 00:35:10.250\nSo once that comes up then\nit's gonna check back in and\n\n723\n00:35:10.250 --> 00:35:13.170\nwe'll see that on our system.\n\n724\n00:35:13.170 --> 00:35:14.610\nNow, it does take moment.\n\n725\n00:35:14.610 --> 00:35:18.880\nHere it's moving modules around, booting\nthings up as part of the normal process\n\n726\n00:35:18.880 --> 00:35:24.040\nand right there you can see it,\nVMware ESXI 6.0 right?\n\n727\n00:35:24.040 --> 00:35:27.890\nSo just that fast it's already upgraded\nand now it's just doing a normal boot.\n\n728\n00:35:27.890 --> 00:35:30.700\nAssuming we don't have any\ncrazy driver failures or\n\n729\n00:35:30.700 --> 00:35:32.280\nanything like that this should come up and\nbe happy.\n\n730\n00:35:32.280 --> 00:35:35.060\nI'm gonna use my it operative\nword there of should,\n\n731\n00:35:35.060 --> 00:35:37.350\nas much as I can cuz things can go wrong.\n\n732\n00:35:37.350 --> 00:35:39.240\nWhat can go wrong?\n\n733\n00:35:39.240 --> 00:35:43.590\nI might have fiber channel adapters that\nhave custom drivers, and those drivers\n\n734\n00:35:43.590 --> 00:35:47.420\nmight not work under esxi six, or I might\nhave hardware that's no longer supported.\n\n735\n00:35:47.420 --> 00:35:49.920\nWell, compatibility should\nhave shown that, but,\n\n736\n00:35:49.920 --> 00:35:52.090\nthose are things that could go wrong here.\n\n737\n00:35:53.680 --> 00:35:56.640\nHeck, when you reboot a server,\nhaving a hard drive failure,\n\n738\n00:35:56.640 --> 00:35:57.780\nis a pretty common thing.\n\n739\n00:35:57.780 --> 00:35:59.700\nSo something like that could\njust derail us altogether, but\n\n740\n00:35:59.700 --> 00:36:01.220\nthat's not really any SXSI problem.\n\n741\n00:36:02.250 --> 00:36:08.520\nAssuming this boots, then back here in our\nweb client, it should refresh and be fine.\n\n742\n00:36:08.520 --> 00:36:10.990\nNow, it's got us out of maintenance\nmode while it's rebooting, so\n\n743\n00:36:10.990 --> 00:36:13.870\nI've got my little red circle here\nletting me know the server's down,\n\n744\n00:36:13.870 --> 00:36:16.880\nbecause at this point, it should be\nbooting back up, and it'll be happy.\n\n745\n00:36:16.880 --> 00:36:19.270\nNow, once it comes back up,\nit's gotta re-inventory.\n\n746\n00:36:19.270 --> 00:36:22.600\nSo it's not done, that's why it\nstill says twenty two percent.\n\n747\n00:36:22.600 --> 00:36:25.970\nTechnically the host is upgraded but\nwe've got to re-inventory and\n\n748\n00:36:25.970 --> 00:36:27.280\nverify that everything works.\n\n749\n00:36:27.280 --> 00:36:29.680\nAnd that's what it's gonna do\nautomatically here in just a moment\n\n750\n00:36:29.680 --> 00:36:32.170\nas soon as that system is done.\n\n751\n00:36:32.170 --> 00:36:35.850\nSo at this point we're kind of in\na waiting game while that one boots and\n\n752\n00:36:35.850 --> 00:36:36.690\nwe'll just let it run.\n\n753\n00:36:36.690 --> 00:36:41.300\nSo I think we'll use a little bit of the\nmagic of TV here to jump ahead on this one\n\n754\n00:36:41.300 --> 00:36:42.360\nso we don't have to wait.\n\n755\n00:36:42.360 --> 00:36:45.990\nBut basically it's gonna boot, the system\nwill re-inventory and then everything will\n\n756\n00:36:45.990 --> 00:36:49.650\nshow up, assuming we edited that advanced\nsetting about the [INAUDIBLE] timeout.\n\n757\n00:36:49.650 --> 00:36:53.380\nIf we don't, it's gonna reboot and\nthe [INAUDIBLE] will never happen in fact\n\n758\n00:36:53.380 --> 00:36:56.820\nthe host will just disappear and that's\nthe end of it, right, until you go and\n\n759\n00:36:56.820 --> 00:36:59.440\nedit at advanced setting we did\nat the beginning of the episode.\n\n760\n00:36:59.440 --> 00:37:02.230\nAll right, so we're gonna jump forward\nin time, and as soon as this is done\n\n761\n00:37:02.230 --> 00:37:04.890\nwe'll verify the upgrade and\nget ready to move to our next steps.\n\n762\n00:37:06.250 --> 00:37:08.490\nAll right, so here we are about\neight minutes in the future and\n\n763\n00:37:08.490 --> 00:37:10.430\nthe ESXI host is done upgrading.\n\n764\n00:37:10.430 --> 00:37:14.055\nI've got its console pulled up right here\nso it is showing that it's running ESXI\n\n765\n00:37:14.055 --> 00:37:20.000\n6.0, and it's just up here,\naccess this page via this URL type thing.\n\n766\n00:37:20.000 --> 00:37:21.620\nJust a normal console and\n\n767\n00:37:21.620 --> 00:37:25.910\nit's sitting there,\nlet's take a look at good old vSphere.\n\n768\n00:37:25.910 --> 00:37:28.840\nIn my vSphere web client\nI'm here at my host and\n\n769\n00:37:28.840 --> 00:37:31.880\nnow it's showing 6.0 As compliant, right?\n\n770\n00:37:31.880 --> 00:37:32.400\nIt upgraded.\n\n771\n00:37:32.400 --> 00:37:33.540\nIt finished the upgrade.\n\n772\n00:37:33.540 --> 00:37:36.550\nIt redid its inventory, and\nnow it shows as being compliant.\n\n773\n00:37:36.550 --> 00:37:37.857\nThat host is running 6.0.\n\n774\n00:37:37.857 --> 00:37:39.630\nIt could've been one host.\n\n775\n00:37:39.630 --> 00:37:40.520\nIt could've been 100 hosts.\n\n776\n00:37:40.520 --> 00:37:42.080\nRight?\nHowever I wanted to roll this out, but\n\n777\n00:37:42.080 --> 00:37:45.750\nnow it's showing as compliant,\nand remediate it, all right?\n\n778\n00:37:45.750 --> 00:37:48.090\nNow notice, and\nthis is something we always wanna verify.\n\n779\n00:37:48.090 --> 00:37:50.770\nWhen you do an upgrade,\nalways verify it finished completely.\n\n780\n00:37:50.770 --> 00:37:53.840\nIn my case, it actually didn't\nfinish completely because\n\n781\n00:37:53.840 --> 00:37:56.660\nmy host is still in maintenance mode,\nright?\n\n782\n00:37:56.660 --> 00:37:57.730\nIf it's still in maintenance mode,\n\n783\n00:37:57.730 --> 00:37:59.710\nI'm not gonna be able to start\nup virtual machines on it.\n\n784\n00:37:59.710 --> 00:38:01.580\nI'm not gonna be able to\nmanage the VMs that are on it.\n\n785\n00:38:01.580 --> 00:38:04.000\nSo I need to get it out\nof maintenance mode.\n\n786\n00:38:04.000 --> 00:38:05.540\nNormally it'll come out on its own.\n\n787\n00:38:05.540 --> 00:38:07.200\nSo I'm probably just being impatient here.\n\n788\n00:38:07.200 --> 00:38:09.060\nIf I waited a little bit,\nit would come out.\n\n789\n00:38:09.060 --> 00:38:13.040\nBut, since it's just sitting there, I'm\ngonna go ahead and just right click on it,\n\n790\n00:38:13.040 --> 00:38:16.130\nand go to maintenance mode,\nand exit maintenance mode.\n\n791\n00:38:16.130 --> 00:38:19.620\nAnd that's gonna bring it back into\nproduction, unless I get an error.\n\n792\n00:38:19.620 --> 00:38:21.710\nRight?\n[LAUGH] Which is always possible.\n\n793\n00:38:21.710 --> 00:38:24.220\nIf something happens with, no it exited.\n\n794\n00:38:24.220 --> 00:38:27.050\nYou'll see the little yellow bars\ndisappear from the icon, and so,\n\n795\n00:38:27.050 --> 00:38:28.390\nnow it's back into production.\n\n796\n00:38:28.390 --> 00:38:28.910\nRight?\n\n797\n00:38:28.910 --> 00:38:33.030\nSo now I've successfully\nupgraded this one to ESXi 6.0,\n\n798\n00:38:33.030 --> 00:38:37.600\nand if ESXi 6.5 comes out I\njust do the same process.\n\n799\n00:38:37.600 --> 00:38:41.170\nI load the ISO image into\nthe vSphere Update Manager and\n\n800\n00:38:41.170 --> 00:38:43.760\nthen I change the baseline.\n\n801\n00:38:43.760 --> 00:38:45.820\nYou just go and\nedit your baselines that you made.\n\n802\n00:38:45.820 --> 00:38:50.800\nSo, if I go back to my homepage and\nI go down here to buy Update Manager, and\n\n803\n00:38:50.800 --> 00:38:53.120\nI come in and I hunt down that\nbaseline that we made here.\n\n804\n00:38:53.120 --> 00:38:58.540\nHere's the baseline, and\nyou can edit the baseline and\n\n805\n00:38:58.540 --> 00:39:02.680\non that next page,\nyou would just pick your new image.\n\n806\n00:39:02.680 --> 00:39:05.680\nSo as new versions come out,\nyou just change it right here and\n\n807\n00:39:05.680 --> 00:39:07.670\nnow my test servers\nwill get a new version.\n\n808\n00:39:07.670 --> 00:39:10.500\nSo I don't have to go and\nreattach these to the host.\n\n809\n00:39:10.500 --> 00:39:12.030\nI don't have to recreate\nnew baselines everytime.\n\n810\n00:39:12.030 --> 00:39:15.840\nI just modify the existing baselines,\nbut do you remember what I said,\n\n811\n00:39:15.840 --> 00:39:18.560\ncreate a test group first,\nroll out the test servers first.\n\n812\n00:39:18.560 --> 00:39:21.740\nMake sure it works first and then roll\nit out to the rest of production.\n\n813\n00:39:21.740 --> 00:39:27.070\nDon't just go cowboy style and roll it out\nto everybody, it doesn't usually end well.\n\n814\n00:39:27.070 --> 00:39:29.580\nDon, we appreciate you taking\nthe time to show us and\n\n815\n00:39:29.580 --> 00:39:32.620\nmake it a little bit easier\nupgrading your ESXi host.\n\n816\n00:39:32.620 --> 00:39:34.970\nPhase two complete, and\nspeaking of complete,\n\n817\n00:39:34.970 --> 00:39:37.710\nit does look like we're coming\nto the end of another episode.\n\n818\n00:39:37.710 --> 00:39:40.880\nBut before we do, you got any parting\nwords that you'd like to let them know\n\n819\n00:39:40.880 --> 00:39:42.130\nabout upgrading their hosts?\n\n820\n00:39:42.130 --> 00:39:44.540\nAll right, well just like Wes said,\nthis is phase two.\n\n821\n00:39:44.540 --> 00:39:47.410\nWe have four phases, we still haven't\nupgraded our virtual machines,\n\n822\n00:39:47.410 --> 00:39:50.620\nand we still haven't upgraded\nour VSwitches, right?\n\n823\n00:39:50.620 --> 00:39:55.130\nSo, we still have more to do, but,\non the host side, remember that warning.\n\n824\n00:39:55.130 --> 00:39:58.180\nThis is an upgrade path,\nthere is no downgrade path.\n\n825\n00:39:58.180 --> 00:40:00.640\nVMWare doesn't give us a way to\ndowngrade the hosts that are attached to\n\n826\n00:40:00.640 --> 00:40:01.430\nthe e-center.\n\n827\n00:40:01.430 --> 00:40:05.190\nSo make sure you have other\nhosts standing by if necessary,\n\n828\n00:40:05.190 --> 00:40:07.200\nor that you're ready to blow away, and\n\n829\n00:40:07.200 --> 00:40:12.510\nreinstall if need be to get back down\nto 5.5 if that's where you got to be.\n\n830\n00:40:12.510 --> 00:40:14.850\nJust be aware that there\nis no downgrade path.\n\n831\n00:40:14.850 --> 00:40:17.120\n>> Well, Don as always thank you for\njoining us in the studios.\n\n832\n00:40:17.120 --> 00:40:18.770\nAnd look forward to seeing Part 3.\n\n833\n00:40:18.770 --> 00:40:20.420\nAnd we look forward to seeing you there.\n\n834\n00:40:20.420 --> 00:40:21.710\nBut signing out for ITPRO.TV.\n\n835\n00:40:21.710 --> 00:40:23.430\nI've been your host Wes Brian.\n\n836\n00:40:23.430 --> 00:40:24.130\n>> And I'm Don Pezet.\n\n837\n00:40:24.130 --> 00:40:26.345\n>> And we'll see you next time.\n\n838\n00:40:26.345 --> 00:40:34.640\n[MUSIC]\n\n",
          "vimeoId": "171757366"
        },
        {
          "description": "In this episode, Wes and Don continue the process of upgrading older versions of vSphere to vSphere version 6.  They demonstrate Phase 3 upgrading VMware Tools and the virtual machines hardware versions. They also look at the last phase, Phase 4 upgrading the datastores to VMFS version 5 and upgrading the vSwitches.",
          "length": "1987",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-3-upgrading_to_vsphere6_pt3-062116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-3-upgrading_to_vsphere6_pt3-062116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-1-6-3-upgrading_to_vsphere6_pt3-062116-1-sm.jpg",
          "title": "Upgrading to vSphere 6 Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.643 --> 00:00:14.414\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.414 --> 00:00:16.731\nI'm your host Wes Bryan and\nin today's episode,\n\n4\n00:00:16.731 --> 00:00:18.448\ncoming back at you with more VMWare.\n\n5\n00:00:18.448 --> 00:00:21.471\nThat's right,\nVMWare Certified Professional version 6.\n\n6\n00:00:21.471 --> 00:00:23.891\nJoining me in the studios today\nis none other than Mr. Don Pezet.\n\n7\n00:00:23.891 --> 00:00:24.990\nDon, how are you doing, sir?\n\n8\n00:00:24.990 --> 00:00:26.000\n>> I am doing great, Wes.\n\n9\n00:00:26.000 --> 00:00:29.500\nReady to jump right back into\nfinishing our upgrade of vSphere 6.\n\n10\n00:00:29.500 --> 00:00:34.020\nThis is part three of our series here,\nand we're basically going through\n\n11\n00:00:34.020 --> 00:00:38.270\nthe four phase upgrade process from\nVMWare with a little embellishment by me,\n\n12\n00:00:38.270 --> 00:00:40.278\na couple extra things I\nlike to throw in there.\n\n13\n00:00:40.278 --> 00:00:43.430\nIn part one we saw phase one,\nright, we upgraded vCenter,\n\n14\n00:00:43.430 --> 00:00:45.740\nthat's the first step to\nupgrading to vSphere 6.\n\n15\n00:00:45.740 --> 00:00:50.290\nIn our episode two, we saw upgrading\nour hosts, and that's phase two.\n\n16\n00:00:50.290 --> 00:00:53.930\nBut in this episode we're gonna tackle\nphases three and four together, right,\n\n17\n00:00:53.930 --> 00:00:57.660\nbecause with phase three, that's when\nwe're upgrading our virtual machines.\n\n18\n00:00:57.660 --> 00:01:00.203\nAnd in phase four we're upgrading our\ndistributive virtual switches and\n\n19\n00:01:00.203 --> 00:01:01.113\ngetting those up to date.\n\n20\n00:01:01.113 --> 00:01:03.950\nSo, that will complete\nthe upgrade process.\n\n21\n00:01:03.950 --> 00:01:06.350\nAll four phases were done and\nwe're in business.\n\n22\n00:01:06.350 --> 00:01:11.030\nSo at this point, vCenter's upgraded,\nour ESXi hosts are upgraded.\n\n23\n00:01:11.030 --> 00:01:15.401\nThey're all running vCenter 6.0, ESXi 6.0.\n\n24\n00:01:15.401 --> 00:01:17.701\nOur virtual machines though, we left\nthem alone, we haven't messed with them.\n\n25\n00:01:17.701 --> 00:01:18.623\n>> Right.\n\n26\n00:01:18.623 --> 00:01:22.025\n>> And we don't really talk about the data\nstores but in the last episode we saw\n\n27\n00:01:22.025 --> 00:01:24.420\nwhere we upgraded some of\nour data stores to VMFS 5.\n\n28\n00:01:24.420 --> 00:01:25.950\nThere is no VMFS 6 yet,\n\n29\n00:01:25.950 --> 00:01:29.340\nso there's no upgrade really that needs\nto happen there on the data store side.\n\n30\n00:01:29.340 --> 00:01:35.150\nBut, in the future, right, so when ESXi\n7 or vSphere 7 comes out, there might be\n\n31\n00:01:35.150 --> 00:01:38.700\na VMFS 7 and then you'll have to upgrade\nyour data stores too, kinda in that mix.\n\n32\n00:01:38.700 --> 00:01:39.460\nAll right, but\n\n33\n00:01:39.460 --> 00:01:43.010\nlet's take a look at the virtual machines\ncuz that's what we need to focus on first.\n\n34\n00:01:44.108 --> 00:01:49.160\nTechnically, once vCenter's upgraded and\nonce ESXi's upgraded, we can just stop and\n\n35\n00:01:49.160 --> 00:01:53.050\nkick our feet up on the desk and\nsay we're done, we're running vSphere 6.\n\n36\n00:01:53.050 --> 00:01:56.590\nBut you're gonna continue to get errors\nin the user interface until you go and\n\n37\n00:01:56.590 --> 00:01:57.710\nupgrade your virtual machines.\n\n38\n00:01:57.710 --> 00:01:58.680\nLet me show you what I mean.\n\n39\n00:01:58.680 --> 00:02:03.170\nSo, here I am in my vCenter 6 web client,\nand\n\n40\n00:02:03.170 --> 00:02:07.900\nif I jump here into my host in\nclusters and I find my host,\n\n41\n00:02:07.900 --> 00:02:10.950\nI've got this ESX Host\n01 which is running,\n\n42\n00:02:10.950 --> 00:02:16.090\nwell at least I assume it's running ESXi 6\nsince we upgraded it in the last episode.\n\n43\n00:02:16.090 --> 00:02:19.381\nAnd sure enough it's got ESXi 6,\nso it's up and it's happy.\n\n44\n00:02:19.381 --> 00:02:21.780\nIf I take a look at Windows Client 01, so\n\n45\n00:02:21.780 --> 00:02:26.928\nI've got a virtual machine spun up that's\nrunning Windows 07, and it's powered on,\n\n46\n00:02:26.928 --> 00:02:31.799\nit's working, users might be accessing\nthat system, so I know it's running, but\n\n47\n00:02:31.799 --> 00:02:35.674\nI get a nice little warning right here,\nVMware Tools is outdated.\n\n48\n00:02:35.674 --> 00:02:37.662\nIs that even proper grammar right there?\n\n49\n00:02:37.662 --> 00:02:40.440\n[LAUGH] VMware Tools are outdated\non this virtual machine, right?\n\n50\n00:02:40.440 --> 00:02:43.120\nSo the virtual machine has a problem.\n\n51\n00:02:43.120 --> 00:02:45.510\nWell, not a true problem.\n\n52\n00:02:45.510 --> 00:02:46.170\nIt's working.\n\n53\n00:02:46.170 --> 00:02:46.840\nIt's booted up.\n\n54\n00:02:46.840 --> 00:02:49.450\nIt's fired up, users could connect in and\nstart working with it.\n\n55\n00:02:49.450 --> 00:02:53.440\nAnd they might not notice any\nproblem whatsoever, right?\n\n56\n00:02:53.440 --> 00:02:59.360\nBut with each new version of ESXi, they\nrelease a new version of the VMware Tools.\n\n57\n00:02:59.360 --> 00:03:03.960\nAnd the VMware Tools help the virtual\nmachine play nicely with the hypervisor\n\n58\n00:03:03.960 --> 00:03:05.220\nrunning underneath it.\n\n59\n00:03:05.220 --> 00:03:10.310\nAnd if we don't upgrade these tools, then\nour virtual machine might not play nice.\n\n60\n00:03:10.310 --> 00:03:14.160\nWe might see things like improper\nshutdowns when it goes to do\n\n61\n00:03:14.160 --> 00:03:14.940\na reboot, right?\n\n62\n00:03:14.940 --> 00:03:17.840\nMaybe it's not gracefully\nshutting down that VM properly.\n\n63\n00:03:17.840 --> 00:03:21.670\nMaybe an update happens to the guest\nOS that breaks the heartbeating\n\n64\n00:03:21.670 --> 00:03:23.660\nto the underlying hypervisor.\n\n65\n00:03:23.660 --> 00:03:26.980\nVarious problems like\nthat can cause issues\n\n66\n00:03:26.980 --> 00:03:30.470\nif we don't upgrade the VMWare Tools\nwhen we upgrade the VM.\n\n67\n00:03:30.470 --> 00:03:32.780\nNow, we do have to be\na little bit careful.\n\n68\n00:03:32.780 --> 00:03:36.534\nRight now, my virtual machine\nis running on a ESXi 6 host.\n\n69\n00:03:36.534 --> 00:03:40.460\nAnd so\nI've got the ESXi 6 virtual machine tools.\n\n70\n00:03:40.460 --> 00:03:43.810\nIf I upgrade to the newest\nvirtual machine tools, and\n\n71\n00:03:43.810 --> 00:03:46.810\nthen I do something like V motion,\nor I export that VM, and\n\n72\n00:03:46.810 --> 00:03:50.900\nthen I import it onto an ESXi 5.5 box,\nwhat's gonna happen?\n\n73\n00:03:50.900 --> 00:03:55.758\nWell, I'll have the 6.0 tools\nrunning on top of a 5.5 hypervisor.\n\n74\n00:03:55.758 --> 00:03:57.780\nAnd it doest work, right?\n\n75\n00:03:57.780 --> 00:03:59.170\nA lot of it is the same.\n\n76\n00:03:59.170 --> 00:04:01.820\nBut there may be certain drivers\nthat have been put in use\n\n77\n00:04:01.820 --> 00:04:04.950\nthat are not gonna work anymore in 5.5,\nso it kinda breaks things.\n\n78\n00:04:04.950 --> 00:04:09.560\nSo, we don't necessarily need to jump\non the VMware Tools update right away,\n\n79\n00:04:09.560 --> 00:04:11.380\nthe moment we finish an upgrade.\n\n80\n00:04:11.380 --> 00:04:12.040\nBut at the same time,\n\n81\n00:04:12.040 --> 00:04:14.590\nwe do need to get done eventually as\nsoon as we get our hosts upgraded.\n\n82\n00:04:14.590 --> 00:04:17.832\nAs soon as we finish phase two,\nthen we go into phase three and\n\n83\n00:04:17.832 --> 00:04:20.155\nwe upgrade the VMware Tools.\n\n84\n00:04:20.155 --> 00:04:22.650\nNow, the easiest way to\nupgrade the VMware Tools\n\n85\n00:04:22.650 --> 00:04:25.050\nis to use the little link\nthat's a part of this error.\n\n86\n00:04:25.050 --> 00:04:25.840\nWhen you look at the error,\n\n87\n00:04:25.840 --> 00:04:28.780\nit's telling me VMware Tools is\noutdated on this virtual machine.\n\n88\n00:04:28.780 --> 00:04:32.392\nAnd if I scroll over here,\nInstall VMware Tools.\n\n89\n00:04:32.392 --> 00:04:33.627\nThey're giving me a link, right?\n\n90\n00:04:33.627 --> 00:04:35.632\nAnd I can just click on that link, and\n\n91\n00:04:35.632 --> 00:04:38.492\nwhat it's gonna do is it's\ngonna mount a ISO image.\n\n92\n00:04:38.492 --> 00:04:42.862\nIt's gonna mount a virtual\nCD into the virtual machine\n\n93\n00:04:42.862 --> 00:04:45.860\nthat has the tools on the disk.\n\n94\n00:04:45.860 --> 00:04:49.590\nNow unfortunately,\nit doesn't actually install the tools.\n\n95\n00:04:49.590 --> 00:04:50.950\nIt just mounts the disk.\n\n96\n00:04:50.950 --> 00:04:53.090\nAnd it's up to me to go and\ndo the install, so\n\n97\n00:04:53.090 --> 00:04:54.160\nthat's what it's telling me right here.\n\n98\n00:04:54.160 --> 00:04:55.190\nIt's going to mount that image.\n\n99\n00:04:55.190 --> 00:04:56.410\nIt's going to put it in.\n\n100\n00:04:56.410 --> 00:05:00.230\nThen, go to the console to run\nVMware tools install wizard\n\n101\n00:05:00.230 --> 00:05:02.180\nfrom the virtual install DVD.\n\n102\n00:05:02.180 --> 00:05:04.800\nThat's Windows, Linux, whatever\n\n103\n00:05:04.800 --> 00:05:07.440\ndistribution it is that we're running\nbehind the scenes, they're all the same.\n\n104\n00:05:07.440 --> 00:05:11.170\nYou pop in the disk and then you've\ngotta go into that virtual machine and\n\n105\n00:05:11.170 --> 00:05:12.670\ninstall those tools.\n\n106\n00:05:12.670 --> 00:05:17.330\nSo if we wanna take a look at that, right,\nI can click the link, which I just did.\n\n107\n00:05:17.330 --> 00:05:19.040\nShoot, did I click Cancel?\n\n108\n00:05:19.040 --> 00:05:21.030\nSometimes I get a little click happy,\nright?\n\n109\n00:05:21.030 --> 00:05:23.930\nSo if you just click Cancel it doesn't\nquite work, you need to click Mount.\n\n110\n00:05:23.930 --> 00:05:27.576\nAnd so now it's gonna mount that\nISO image into the CD drive.\n\n111\n00:05:27.576 --> 00:05:31.961\nSo I'm gonna pull up the console of that\nmachine, and I'll just fire up the web\n\n112\n00:05:31.961 --> 00:05:36.030\nconsole here, and hope to remember\nwhat my password is on that machine.\n\n113\n00:05:36.030 --> 00:05:41.140\nAnd when I get logged in, what I'll be\nable to do is install the VMware Tools,\n\n114\n00:05:41.140 --> 00:05:45.560\nbecause it's mounted that disk\ninto the drive on this machine.\n\n115\n00:05:45.560 --> 00:05:52.480\nSo, if I fire up my Explorer window here,\nand browse to my CD drive, there we go.\n\n116\n00:05:52.480 --> 00:05:56.030\nI can see the VMware Tools\nare already in that drive, and if\n\n117\n00:05:56.030 --> 00:06:01.200\nwe just launch the Autorun, it'll run the\nupgrade process to upgrade those tools.\n\n118\n00:06:01.200 --> 00:06:04.490\nSo we can just run right through it\nright here through a simple wizard,\n\n119\n00:06:04.490 --> 00:06:07.280\ninstall that software,\nand get them updated.\n\n120\n00:06:07.280 --> 00:06:09.837\n>> Now, Don, this doesn't\ntechnically classify as sneakernet\n\n121\n00:06:09.837 --> 00:06:12.396\nbecause you are doing everything\nthrough a web interface, but\n\n122\n00:06:12.396 --> 00:06:13.856\nit is definitely a manual process.\n\n123\n00:06:13.856 --> 00:06:15.983\nAnd if I'm an hourly employee,\nI certainly don't mind.\n\n124\n00:06:15.983 --> 00:06:19.567\nBut if I'm salary, I wanna do this,\nlet's say, against 1,000 machines.\n\n125\n00:06:19.567 --> 00:06:21.489\n>> Yeah well, [LAUGH],\nthat's a good point, right?\n\n126\n00:06:21.489 --> 00:06:22.839\nSo this is the manual way, and\n\n127\n00:06:22.839 --> 00:06:26.029\nthere's a lot of people out there\nwhere this is the only way they do it.\n\n128\n00:06:26.029 --> 00:06:28.826\nBecause you're making a change to\nthe underlying operating system and\n\n129\n00:06:28.826 --> 00:06:30.098\nthings could go wrong, right.\n\n130\n00:06:30.098 --> 00:06:34.080\nSo you wanna install the tools,\nverify they worked out just fine,\n\n131\n00:06:34.080 --> 00:06:35.150\nand then move on.\n\n132\n00:06:35.150 --> 00:06:38.340\nAn example, I used to support\na virtualization environment for\n\n133\n00:06:38.340 --> 00:06:42.770\na bank where we had a few\nhundred hosts and a lot of VMs,\n\n134\n00:06:42.770 --> 00:06:44.490\nI can't remember how many VMs exactly.\n\n135\n00:06:44.490 --> 00:06:50.290\nBut with that one,\nwe would deploy the VMware updates and\n\n136\n00:06:50.290 --> 00:06:53.820\nthen we would turn it over to the sys\nadmins, to the Windows administrators.\n\n137\n00:06:53.820 --> 00:06:56.730\nAnd we would tell the Windows guys, hey,\nwhen you get a chance you need to update\n\n138\n00:06:56.730 --> 00:06:59.680\nthe VMWare tools, and we left that up to\nthem and that way they could run through\n\n139\n00:06:59.680 --> 00:07:02.600\nthe process of doing the updates and\nif anything went wrong with the server\n\n140\n00:07:02.600 --> 00:07:05.730\nsoftware they could figure it out and\ntroubleshoot it and go on from there.\n\n141\n00:07:05.730 --> 00:07:08.000\nIf you have separation of duties\nthat's great, a lot of people don't.\n\n142\n00:07:08.000 --> 00:07:12.380\nA lot of people, it's all one role so\nI have to support VMware, and\n\n143\n00:07:12.380 --> 00:07:14.420\nI've gotta support Windows,\nand I've gotta support Linux.\n\n144\n00:07:14.420 --> 00:07:17.827\nAnd so when I roll out the VMware updates,\nI've gotta turn around and\n\n145\n00:07:17.827 --> 00:07:21.110\nupdate the underlying guest\nOS's in all of those VMs too.\n\n146\n00:07:21.110 --> 00:07:24.814\nAnd like Wes said,\nif you've got a 1,000 VM's, well,\n\n147\n00:07:24.814 --> 00:07:27.390\nyou don't wanna do this a thousand times.\n\n148\n00:07:27.390 --> 00:07:28.760\nIt would take a long time.\n\n149\n00:07:28.760 --> 00:07:31.710\nIt is probably the best way\nbecause if there was a problem,\n\n150\n00:07:31.710 --> 00:07:33.500\nyou'd know it happened, right?\n\n151\n00:07:33.500 --> 00:07:35.460\nBut it's a little bit involved.\n\n152\n00:07:35.460 --> 00:07:37.170\nSo we do have a way to automate it.\n\n153\n00:07:37.170 --> 00:07:40.730\nRemember in part two where we\nrolled out the update to the host.\n\n154\n00:07:40.730 --> 00:07:42.440\nI said how we could\nupdate the host manually.\n\n155\n00:07:42.440 --> 00:07:44.970\nWe could pop the DVD right in the drive,\nboot the host up,\n\n156\n00:07:44.970 --> 00:07:46.630\nit'll upgrade, there's no big deal.\n\n157\n00:07:46.630 --> 00:07:48.612\nBut instead,\nI used the VMware Update Manager.\n\n158\n00:07:48.612 --> 00:07:53.200\nAnd the VMware Update Manager is great for\npushing updates out to all those hosts.\n\n159\n00:07:53.200 --> 00:07:55.090\nIt's an all automated system.\n\n160\n00:07:55.090 --> 00:07:58.824\nYou can also use it to push\nupdates out to the guests too.\n\n161\n00:07:58.824 --> 00:08:02.660\nSo let me show you, I'm gonna just\ncancel this installation wizard here, so\n\n162\n00:08:02.660 --> 00:08:03.853\nwe'll get out of that.\n\n163\n00:08:03.853 --> 00:08:08.426\nAnd I'll get out of this crazy low\nresolution console, and go away.\n\n164\n00:08:08.426 --> 00:08:12.566\nAll right, so when I go back to my\nmain screen here, what I'm gonna do,\n\n165\n00:08:12.566 --> 00:08:15.329\nis I'm gonna take a look\nat the Update Manager.\n\n166\n00:08:15.329 --> 00:08:19.833\nSo I'm gonna head to my home page here,\nand go to the Update Manager.\n\n167\n00:08:19.833 --> 00:08:22.349\nAnd what we were looking at in part two,\n\n168\n00:08:22.349 --> 00:08:26.483\nwas under the Update Manager we\nwere looking at host base lines.\n\n169\n00:08:26.483 --> 00:08:29.414\nAnd so, we created this ESXI 6.0 upgrade.\n\n170\n00:08:29.414 --> 00:08:32.244\nAnd that's how we put pushed\nout the upgrade of those hosts.\n\n171\n00:08:32.244 --> 00:08:34.448\nWell you'll see,\nI've got another tab up here.\n\n172\n00:08:34.448 --> 00:08:36.553\nVMs/VAs Baselines, right?\n\n173\n00:08:36.553 --> 00:08:40.420\nSo this is virtual machines,\nand virtual apps, baselines.\n\n174\n00:08:40.420 --> 00:08:42.584\nWell, these are baselines\nwe can create for\n\n175\n00:08:42.584 --> 00:08:45.287\nour virtual machines to push\nout VM ware tool updates.\n\n176\n00:08:45.287 --> 00:08:49.473\nWe can't push things like Windows updates,\nor Linux patches, you can't do that.\n\n177\n00:08:49.473 --> 00:08:51.778\nBut you can push VM ware tools.\n\n178\n00:08:51.778 --> 00:08:54.553\nAnd you'll see,\nthey've already created three baselines.\n\n179\n00:08:54.553 --> 00:08:56.834\nAnd I'll be honest with you guys,\nin real life land,\n\n180\n00:08:56.834 --> 00:08:58.516\nI've never had to create a custom one.\n\n181\n00:08:58.516 --> 00:09:00.511\nThese three have always worked for me.\n\n182\n00:09:00.511 --> 00:09:03.968\nYou can create custom baselines if you\nwant, and you can define exactly what\n\n183\n00:09:03.968 --> 00:09:06.736\nversion of VMware tools you want\nto push out, if you need to.\n\n184\n00:09:06.736 --> 00:09:09.724\nBut the three that are defined\nactually work out really well.\n\n185\n00:09:09.724 --> 00:09:16.362\nYou'll see VMware Tools Upgrade to Match\nHost VM Hardware Upgrade to Match Host.\n\n186\n00:09:16.362 --> 00:09:22.544\nSo what those mean, is if I upgrade\nthe host ESXI box to ESXI 6,\n\n187\n00:09:22.544 --> 00:09:27.213\nthen any virtual machine\nthat has this baseline\n\n188\n00:09:27.213 --> 00:09:31.660\napplied will upgrade\nits tools to VMware 6.\n\n189\n00:09:31.660 --> 00:09:35.373\nSo, it'll automatically do that\nupgrade as the remediation process.\n\n190\n00:09:35.373 --> 00:09:38.966\nThen same thing with the hardware version,\nwe can upgrade that too.\n\n191\n00:09:38.966 --> 00:09:42.478\nAnd you got this other one,\nVA Upgrade to Latest.\n\n192\n00:09:42.478 --> 00:09:44.426\nNow, I don't usually use this one.\n\n193\n00:09:44.426 --> 00:09:48.782\nAnd the reason here is, I could have VMs\nthat are running on a five, five host,\n\n194\n00:09:48.782 --> 00:09:51.687\nand if I upgrade another\nhost somewhere else to six,\n\n195\n00:09:51.687 --> 00:09:55.534\nnow it's gonna upgrade VMware tools\nacross my entire environment.\n\n196\n00:09:55.534 --> 00:09:56.200\nI may not want that.\n\n197\n00:09:56.200 --> 00:09:57.075\nI may.\n\n198\n00:09:57.075 --> 00:10:00.330\nI may wanna just go ahead and get them\nall upgraded to the latest and greatest.\n\n199\n00:10:00.330 --> 00:10:03.775\nOr I may wanna wait and so, that's where\nthis one kind of becomes optional and\n\n200\n00:10:03.775 --> 00:10:07.069\nthat's where matching the host can\nbe a little more convenient, right?\n\n201\n00:10:07.069 --> 00:10:11.449\nSo, I can use this baseline to attach\nto a virtual machine and update it and\n\n202\n00:10:11.449 --> 00:10:13.372\nremediate it that way, right?\n\n203\n00:10:13.372 --> 00:10:17.866\nSo if I go back to that virtual machine,\nso let me just go find that\n\n204\n00:10:17.866 --> 00:10:22.970\nVM WinClient 01, and I'm gonna manage it,\nand go into its settings.\n\n205\n00:10:22.970 --> 00:10:24.316\nAs soon as it lets me.\n\n206\n00:10:24.316 --> 00:10:29.107\n[LAUGH] And so inside of its settings,\nwe've got that Update Manager tab,\n\n207\n00:10:29.107 --> 00:10:30.971\njust like we did on the host.\n\n208\n00:10:30.971 --> 00:10:34.289\nExcept here, we're talking about\nthose virtual machine baselines, and\n\n209\n00:10:34.289 --> 00:10:37.240\nyou see we just have one baseline\nby default that's that all groups\n\n210\n00:10:37.240 --> 00:10:39.045\none which doesn't really do anything.\n\n211\n00:10:39.045 --> 00:10:41.658\nI'm gonna attach a new baseline and\n\n212\n00:10:41.658 --> 00:10:46.111\nI'm gonna pick to update the VMware\ntools to match the host.\n\n213\n00:10:46.111 --> 00:10:49.893\nIf I'm an ESXI 6 host, then I should\nbe running the ESXI6 VMware tools,\n\n214\n00:10:49.893 --> 00:10:52.954\nif I'm on five,\nfive then I should be running those tools.\n\n215\n00:10:52.954 --> 00:10:55.990\nSo, I'm gonna attach that baseline.\n\n216\n00:10:55.990 --> 00:11:00.790\nAnd now once we've got that,\njust like we saw with the host, we've got\n\n217\n00:11:00.790 --> 00:11:05.754\nour compliance status as unknown,\nand so we've gotta scan for updates.\n\n218\n00:11:05.754 --> 00:11:08.306\nIt's gonna scan and check, and\nthen it should come back, and\n\n219\n00:11:08.306 --> 00:11:10.036\nlet us know that we're non-compliant.\n\n220\n00:11:10.036 --> 00:11:12.871\nThere, really fast on this one,\nnon compliant, took forever on host,\n\n221\n00:11:12.871 --> 00:11:14.180\non the client it's really fast.\n\n222\n00:11:14.180 --> 00:11:19.193\nSo we know we're non-compliant, and now we\ncan just choose it, and we can remediate.\n\n223\n00:11:19.193 --> 00:11:22.597\nAnd when we go to remediate,\nit's got that upgrade baseline,\n\n224\n00:11:22.597 --> 00:11:25.563\nit's got the VMware Tools Upgrade\nthat it wants to do.\n\n225\n00:11:25.563 --> 00:11:29.446\nAnd we can have it remediate that,\nand put it back in place.\n\n226\n00:11:29.446 --> 00:11:31.674\nIf I've got it attached to\n1,000 virtual machines,\n\n227\n00:11:31.674 --> 00:11:33.816\nI'll see all 1,000 virtual\nmachines right here.\n\n228\n00:11:33.816 --> 00:11:36.787\nAnd I can hit my little check mark,\nand check them all off at once,\n\n229\n00:11:36.787 --> 00:11:38.312\nand have it push that update out.\n\n230\n00:11:38.312 --> 00:11:41.395\nNow be aware that when you\nupdate the VMware tools,\n\n231\n00:11:41.395 --> 00:11:43.338\nyou'll usually need a reboot.\n\n232\n00:11:43.338 --> 00:11:45.524\nSo you don't wanna just do this\nin the middle of the day, right?\n\n233\n00:11:45.524 --> 00:11:47.138\nIf we just push it out\nthat could be a problem.\n\n234\n00:11:47.138 --> 00:11:49.848\nSo on the next screen,\nyou'll see where we can schedule it.\n\n235\n00:11:49.848 --> 00:11:51.925\nAnd you can have it set\nto run after hours.\n\n236\n00:11:51.925 --> 00:11:54.784\nSo right here, we can schedule\nto run at a specific time or\n\n237\n00:11:54.784 --> 00:11:56.582\nyou can say upgrade on power cycle.\n\n238\n00:11:56.582 --> 00:11:58.166\nAnd that's kind of a nice one.\n\n239\n00:11:58.166 --> 00:12:00.271\nThe next time you reboot\nthat virtual machine,\n\n240\n00:12:00.271 --> 00:12:03.438\nit'll do the upgrade then because\nyou're already taking it offline.\n\n241\n00:12:03.438 --> 00:12:05.238\nSo, you've got a few\ndifferent options there.\n\n242\n00:12:05.238 --> 00:12:09.376\nThen we've got our rollback options,\nit can take a snapshot.\n\n243\n00:12:09.376 --> 00:12:12.660\nAnd that's really handy cuz if something\ngoes wrong with the tool deployment,\n\n244\n00:12:12.660 --> 00:12:15.268\nit can just roll right back, and\nnow you're back in business.\n\n245\n00:12:15.268 --> 00:12:16.366\nSo we can set that up,\n\n246\n00:12:16.366 --> 00:12:20.094\nI'm not gonna take a snapshot on mine\nbecause I'm a risk taker, right?\n\n247\n00:12:20.094 --> 00:12:20.976\nCuz it's a lap.\n\n248\n00:12:20.976 --> 00:12:24.865\n[LAUGH] So I'll go ahead and finish\nthat up, and now it's gonna reach out or\n\n249\n00:12:24.865 --> 00:12:25.573\nremediate.\n\n250\n00:12:25.573 --> 00:12:28.606\nAnd what it's doing in the background\nis installing those tools.\n\n251\n00:12:28.606 --> 00:12:31.334\nNot just mounting the DVD and\ncalling it a day, right?\n\n252\n00:12:31.334 --> 00:12:34.359\nIt's actually going to install\nthe tools and update it.\n\n253\n00:12:34.359 --> 00:12:39.486\nAnd it can do this across hundreds or even\nthousands of VMs all from one place, okay?\n\n254\n00:12:39.486 --> 00:12:42.175\nSo that remediation is running\nin the background, actually,\n\n255\n00:12:42.175 --> 00:12:43.758\nit looks like I have an error on mine.\n\n256\n00:12:43.758 --> 00:12:46.218\nSo, I'll have to find out\nwhat went wrong there.\n\n257\n00:12:46.218 --> 00:12:50.118\nProbably, I'm missing some Windows updates\nand it's causing the tools not to install.\n\n258\n00:12:50.118 --> 00:12:53.515\nBut these are the things we\nneed to watch out for, so\n\n259\n00:12:53.515 --> 00:12:57.546\nthis is the least detailed error\ncode I could get right here.\n\n260\n00:12:57.546 --> 00:13:01.547\nVix error code 21011 so,\nI need to go and look that up.\n\n261\n00:13:01.547 --> 00:13:04.921\nBut this is part of that process where\nwe test that with all the deployment out\n\n262\n00:13:04.921 --> 00:13:06.779\nif there's an issue we go and resolve it.\n\n263\n00:13:06.779 --> 00:13:10.984\nYou'll find a lot of times, this will\nbe tied to missing Windows updates or\n\n264\n00:13:10.984 --> 00:13:14.280\nnot having the VMware tools\ninstalled in the first place.\n\n265\n00:13:14.280 --> 00:13:17.432\nCuz the update mechanism actually\nuses the VMware tools to reach into\n\n266\n00:13:17.432 --> 00:13:18.473\nthe virtual machine.\n\n267\n00:13:18.473 --> 00:13:21.176\nI should all ready have mine installed but\nmaybe I don't.\n\n268\n00:13:21.176 --> 00:13:22.754\nThe resolution was weird on that screen.\n\n269\n00:13:22.754 --> 00:13:25.172\nSo, I may have a problem there.\n\n270\n00:13:25.172 --> 00:13:28.962\nIf it won't deploy automatically, then\nyou kind of have to go to a manual side,\n\n271\n00:13:28.962 --> 00:13:29.536\nall right.\n\n272\n00:13:29.536 --> 00:13:32.530\nNow the virtual machine tools,\nthat's one part of this upgrade.\n\n273\n00:13:32.530 --> 00:13:34.832\nI need to get those\nupgraded on the machine.\n\n274\n00:13:34.832 --> 00:13:38.484\nThe other side though,\nwas the hardware level upgrade, right?\n\n275\n00:13:38.484 --> 00:13:39.688\nSo the virtual machine,\n\n276\n00:13:39.688 --> 00:13:43.601\nthe virtual machine tools, that's just\nsoftware that we load inside of the VM.\n\n277\n00:13:43.601 --> 00:13:48.548\nAnd then the hardware level,\nthat's the hardware kind of features and\n\n278\n00:13:48.548 --> 00:13:50.204\npieces of that system.\n\n279\n00:13:50.204 --> 00:13:54.399\nAnd I'm coming from ESXI\n5.0 jumping past 5.5, and\n\n280\n00:13:54.399 --> 00:13:58.264\ngoing to 6.0, so\nI'm on an older hardware level.\n\n281\n00:13:58.264 --> 00:14:00.616\nIf I go back to my virtual machines and\ntemplates,\n\n282\n00:14:00.616 --> 00:14:02.132\nlet me just get back to this one.\n\n283\n00:14:02.132 --> 00:14:04.124\nAnd we'll go to the summary.\n\n284\n00:14:04.124 --> 00:14:08.245\nThen I can pull up the hardware\nlevel of this virtual machine and\n\n285\n00:14:08.245 --> 00:14:10.965\nwhen I take a look at that hardware level,\n\n286\n00:14:10.965 --> 00:14:15.354\nwe'll see the compatibility is\nwhat I'm looking for right here.\n\n287\n00:14:15.354 --> 00:14:19.428\nNotice the compatibility of my virtual\nmachine right now is ESXI 5.0, and\n\n288\n00:14:19.428 --> 00:14:22.512\nlater I'm running virtual\nmachine hardware version 8.\n\n289\n00:14:22.512 --> 00:14:28.345\nWell, in ESXI 6,\nwe have hardware version 11.\n\n290\n00:14:28.345 --> 00:14:31.579\nAnd hardware version 12 is actually\nin the desktop applications, but\n\n291\n00:14:31.579 --> 00:14:34.347\nin server VMware,\nhardware version 11 is the current one.\n\n292\n00:14:34.347 --> 00:14:36.761\nSo, I'm a couple of versions behind.\n\n293\n00:14:36.761 --> 00:14:38.283\nThat's the other part of my upgrade.\n\n294\n00:14:38.283 --> 00:14:42.139\nI upgrade the VMware tools, and\nI upgrade the hardware version right here.\n\n295\n00:14:42.139 --> 00:14:44.509\n>> And Don, is there a benefit to,\ntell you what,\n\n296\n00:14:44.509 --> 00:14:46.838\nlet me restate that\na little bit differently.\n\n297\n00:14:46.838 --> 00:14:50.013\nDo we have to upgrade, and\nif we do, is there a benefit?\n\n298\n00:14:50.013 --> 00:14:53.339\n>> All right, on VMware tools,\nalmost always yes.\n\n299\n00:14:53.339 --> 00:14:59.222\nYou want to do the VMware tools update,\non the hardware version, not always.\n\n300\n00:14:59.222 --> 00:15:00.832\nThere's not always a benefit.\n\n301\n00:15:00.832 --> 00:15:04.458\nIn fact, I might find it running at\nhardware version 8 is perfectly fine for\n\n302\n00:15:04.458 --> 00:15:05.486\nmy virtual machine.\n\n303\n00:15:05.486 --> 00:15:08.772\nAnd there's zero benefit to\nupgrade to something newer.\n\n304\n00:15:08.772 --> 00:15:11.985\nBack in the virtual machine creation\nepisode, I covered all the different\n\n305\n00:15:11.985 --> 00:15:14.434\nhardware versions and\nkind of what you get with each one.\n\n306\n00:15:14.434 --> 00:15:17.543\nSo as an example,\ngoing from version ten to version 11,\n\n307\n00:15:17.543 --> 00:15:21.806\nthe amount of memory that I could have\nassigned to a virtual machine increased.\n\n308\n00:15:21.806 --> 00:15:25.460\nIt went from something like one\nterabyte to four terabytes of memory.\n\n309\n00:15:25.460 --> 00:15:28.246\nNow, I don't even have one terabyte\nof memory assigned to this machine.\n\n310\n00:15:28.246 --> 00:15:30.017\nI just have, what do I have?\n\n311\n00:15:30.017 --> 00:15:32.126\nTwo gigs of RAM assigned to it.\n\n312\n00:15:32.126 --> 00:15:34.603\nSo if I go from hardware version 10 to 11,\n\n313\n00:15:34.603 --> 00:15:37.483\nam I gonna benefit from\nthat increase memory level?\n\n314\n00:15:37.483 --> 00:15:38.210\nNo, not at all.\n\n315\n00:15:38.210 --> 00:15:40.933\nBecause I wasn't even hitting the old\nlimit, better yet the new limit.\n\n316\n00:15:40.933 --> 00:15:44.956\nSo in this scenario,\nI may not benefit at all.\n\n317\n00:15:44.956 --> 00:15:48.407\nBut sometimes, there's features\nthat really do benefit us, right?\n\n318\n00:15:48.407 --> 00:15:52.656\nSome kind of update to disk scheduling or\nsome other feature.\n\n319\n00:15:52.656 --> 00:15:54.575\nAnd so we may wanna upgrade higher.\n\n320\n00:15:54.575 --> 00:15:55.309\nTo upgrade,\n\n321\n00:15:55.309 --> 00:16:00.240\nall you do is right-click on that\nvirtual machine and go to Compatibility.\n\n322\n00:16:00.240 --> 00:16:01.580\nAnd right, in here is where you'll be able\n\n323\n00:16:01.580 --> 00:16:03.650\nto Upgrade that\nVirtual Machine's Compatibility.\n\n324\n00:16:03.650 --> 00:16:05.340\nNow I can't upgrade it right now.\n\n325\n00:16:05.340 --> 00:16:06.155\nSee how it's grayed out?\n\n326\n00:16:06.155 --> 00:16:07.980\nAnd it's because\nthe machine is powered on.\n\n327\n00:16:07.980 --> 00:16:10.655\nYou gotta power it off in\norder to do the upgrade.\n\n328\n00:16:10.655 --> 00:16:14.608\nI could do it and schedule it, but\nI'm just gonna shut the machine down.\n\n329\n00:16:14.608 --> 00:16:15.911\nSo let me just power that off,\n\n330\n00:16:15.911 --> 00:16:19.262\nand when it's powered off then I'll be\nable to push out the the update to it.\n\n331\n00:16:19.262 --> 00:16:23.042\nAnd when you go to do the update it\nactually gives you a little summary.\n\n332\n00:16:23.042 --> 00:16:26.322\nSo I'm gonna go back here\nto Compatibility, and\n\n333\n00:16:26.322 --> 00:16:29.122\nUpgrade VM Compatibility, all right.\n\n334\n00:16:29.122 --> 00:16:30.502\nAnd it's warning me that this is, kind of,\n\n335\n00:16:30.502 --> 00:16:33.811\na one-way thing,\nwhen I upgrade it I can't go back.\n\n336\n00:16:33.811 --> 00:16:36.251\nWell there is actually one way,\nwe can roll back to a snapshot.\n\n337\n00:16:36.251 --> 00:16:41.551\nSo if I take a snapshot first, and then I\nupgrade, I can roll back to a snapshot but\n\n338\n00:16:41.551 --> 00:16:45.991\nthere's no downgrade option, so\nit is a one-way communication.\n\n339\n00:16:45.991 --> 00:16:49.641\nNow it's telling me here, this virtual\nmachine uses Hardware version 11 and\n\n340\n00:16:49.641 --> 00:16:51.171\nprovides the best performance and\n\n341\n00:16:51.171 --> 00:16:56.110\nlatest features available in EXSi 6,\nif I choose that compatibility level.\n\n342\n00:16:56.110 --> 00:16:58.885\nBut if you drop it down\nyou'll see I've got 5.1 and\n\n343\n00:16:58.885 --> 00:17:01.855\n5.5 cuz this machines coming\nall the way from 5.0.\n\n344\n00:17:01.855 --> 00:17:06.563\nAnd when I start to choose these\nother options it'll tell me, hey,\n\n345\n00:17:06.563 --> 00:17:11.710\nif I use version 9 I'll still be\ncompatible with ESXi 5.5 and 6.\n\n346\n00:17:11.710 --> 00:17:14.810\nAnd if I go to 5.5, same thing, right?\n\n347\n00:17:14.810 --> 00:17:19.760\nSo if I go to 6,\nI lose compatibility with ESXi 5.5, and\n\n348\n00:17:19.760 --> 00:17:22.010\nthat may not be a problem for me.\n\n349\n00:17:22.010 --> 00:17:25.970\nAnd if you click the little eye,\nit'll give a link to a page, and\n\n350\n00:17:25.970 --> 00:17:30.320\non that web page they list what\neach hardware version gives you.\n\n351\n00:17:30.320 --> 00:17:34.280\nSo right now I'm running version 8,\nright here.\n\n352\n00:17:34.280 --> 00:17:37.480\nSee how my maximum memory is one terabyte?\n\n353\n00:17:37.480 --> 00:17:41.860\nIf I go all the way up to version 11\nI can get four terabytes of memory.\n\n354\n00:17:41.860 --> 00:17:44.550\nBut I don't even have one terabyte\nof memory in my host, better yet\n\n355\n00:17:44.550 --> 00:17:46.940\nin the virtual machine,\nthat's not a benefit to me.\n\n356\n00:17:46.940 --> 00:17:51.090\nSame thing with logical processors,\nI could have 128 logical processors.\n\n357\n00:17:51.090 --> 00:17:53.110\nRight now I'm held to just 32.\n\n358\n00:17:53.110 --> 00:17:56.680\nWell I don't even have 32 physical\nprocessors in this host so\n\n359\n00:17:56.680 --> 00:17:57.740\nI'm not gonna take advantage of that.\n\n360\n00:17:57.740 --> 00:17:59.870\nSo as I look down this list,\n\n361\n00:17:59.870 --> 00:18:05.820\nif I don't see any benefit then I\nmay not want to do the upgrade.\n\n362\n00:18:05.820 --> 00:18:09.560\nBut here's a big one,\nSATA controllers, okay.\n\n363\n00:18:09.560 --> 00:18:13.010\nRight now in the hardware version I'm\nrunning it doesn't have support for\n\n364\n00:18:13.010 --> 00:18:16.680\nSATA controllers,\nin the newer versions it does.\n\n365\n00:18:16.680 --> 00:18:17.620\nWhy does that matter to me?\n\n366\n00:18:17.620 --> 00:18:20.490\nWell if my host has SATA drives,\n\n367\n00:18:20.490 --> 00:18:23.005\nmy virtual machine is probably\ndoing SCSI calls, and\n\n368\n00:18:23.005 --> 00:18:26.550\nthe SCSI calls have to be translated\nto SATA, and that creates latency.\n\n369\n00:18:26.550 --> 00:18:29.330\nSo I'm getting poor disk performance.\n\n370\n00:18:29.330 --> 00:18:32.600\nBut if I upgrade to newer hardware\nversion, I can do SATA controllers.\n\n371\n00:18:32.600 --> 00:18:36.490\nNow I can do SATA calls that get\nsent to the SATA controller, and\n\n372\n00:18:36.490 --> 00:18:37.810\nit improves performance.\n\n373\n00:18:37.810 --> 00:18:39.500\nSo I get better performance out of it.\n\n374\n00:18:39.500 --> 00:18:43.420\nBut if I have SCSI drives, then I want\nSCSI calls and I don't really care about\n\n375\n00:18:43.420 --> 00:18:45.470\nthe SATA controller stuff,\nand so it doesn't benefit me.\n\n376\n00:18:45.470 --> 00:18:48.960\nSo you just have to evaluate whether or\nnot you actually benefit.\n\n377\n00:18:48.960 --> 00:18:51.720\nDon't feel that you have to\nupgrade the hardware level.\n\n378\n00:18:51.720 --> 00:18:53.740\nWe do have a baseline for it, right?\n\n379\n00:18:53.740 --> 00:18:57.800\nSo we can use the vSpere Update Manager to\npush that update out and upgrade that way,\n\n380\n00:18:57.800 --> 00:19:00.480\nbut I usually do this on\na one-by-one basis, right?\n\n381\n00:19:00.480 --> 00:19:03.560\nDo it on the machines and\njust keep it at the lowest level possible.\n\n382\n00:19:03.560 --> 00:19:06.960\nThat way I can still move them to other\nhosts in the future if, I need to,\n\n383\n00:19:06.960 --> 00:19:09.880\nand not have to worry about\nthe host version so much.\n\n384\n00:19:09.880 --> 00:19:13.180\nBut if I want to bump this up to 6.0 I\ncan just choose that option, hit OK, and\n\n385\n00:19:13.180 --> 00:19:16.610\nnow it's gonna upgrade that hardware\nlevel in the background and get it done.\n\n386\n00:19:16.610 --> 00:19:20.420\nAll right, the machine's powered off so\nthe change is almost instantaneous.\n\n387\n00:19:20.420 --> 00:19:24.410\nAnd then when I start that back up, I'll\njust power that one on, and now it's gonna\n\n388\n00:19:24.410 --> 00:19:28.800\nboot up, and it'll be the new hardware\nversion, and my screen hasn't updated.\n\n389\n00:19:28.800 --> 00:19:29.630\nThere it goes.\n\n390\n00:19:29.630 --> 00:19:32.560\nNow I show ESXi 6.0 VM version 11.\n\n391\n00:19:32.560 --> 00:19:34.850\nAll right, so\neasy enough to do that upgrade.\n\n392\n00:19:36.540 --> 00:19:40.460\nAll right, so now what we've\nseen is upgrading VMware Tools,\n\n393\n00:19:40.460 --> 00:19:43.560\nwhich actually I kind of failed to do\nthat didn't I, right, because I tried\n\n394\n00:19:43.560 --> 00:19:47.250\nto do the automated one and hit some\nerror, which we'd need to track down.\n\n395\n00:19:47.250 --> 00:19:49.100\nI guess I could go ahead and\ndo it manually real quick.\n\n396\n00:19:49.100 --> 00:19:50.420\nLet's just do that.\n\n397\n00:19:50.420 --> 00:19:54.020\nSo this machine's booting up right now,\nbut as soon as it's up, there we go.\n\n398\n00:19:54.020 --> 00:19:57.820\nYou can see I didn't shut\nWindows down properly so\n\n399\n00:19:57.820 --> 00:20:00.660\nit's mad at me, but I'm okay with that.\n\n400\n00:20:00.660 --> 00:20:03.800\nSo once it comes up I'll just install the\nVMware Tools on it real quick to get us to\n\n401\n00:20:03.800 --> 00:20:05.220\nthe latest version.\n\n402\n00:20:05.220 --> 00:20:08.020\nAfter that, our virtual machines are done.\n\n403\n00:20:08.020 --> 00:20:12.049\nPhase one was vCenter,\nphase two was our host, GSXi hosts,\n\n404\n00:20:12.049 --> 00:20:14.498\nphase three were virtual machines.\n\n405\n00:20:14.498 --> 00:20:17.050\nSo that brings us to phase four.\n\n406\n00:20:17.050 --> 00:20:21.080\nPhase four, well,\nwas our Virtual Switches, right?\n\n407\n00:20:21.080 --> 00:20:24.900\nOur Virtual Switches have versions also,\nand they can get upgraded,\n\n408\n00:20:24.900 --> 00:20:28.280\njust like all the other\ncomponents that we've seen here.\n\n409\n00:20:28.280 --> 00:20:29.890\nWhen you spin up a Virtual Switch,\n\n410\n00:20:29.890 --> 00:20:33.480\ndepending on what version of\nvCenter you're coming from,\n\n411\n00:20:33.480 --> 00:20:37.400\nyou can be running any number of different\nversions of the Virtual Switches.\n\n412\n00:20:37.400 --> 00:20:39.080\nAnd we may want to upgrade them, right?\n\n413\n00:20:39.080 --> 00:20:42.540\nSo when we go to upgrade them it's\na pretty straight forward process.\n\n414\n00:20:42.540 --> 00:20:47.570\nJust be aware that you may cause\na network outage while you do it, right,\n\n415\n00:20:47.570 --> 00:20:50.700\nthat as we upgrade the Virtual Switches\nthe machines can go off for a moment.\n\n416\n00:20:50.700 --> 00:20:54.240\nSo we want to make sure that\nwe do this after hours.\n\n417\n00:20:54.240 --> 00:20:56.440\nAll right,\nbefore I get too far into that, though,\n\n418\n00:20:56.440 --> 00:20:59.854\nI'm just gonna install these tools\nmanually and, shoot, the tools are out.\n\n419\n00:20:59.854 --> 00:21:01.600\nLet me jump back and mount that disc.\n\n420\n00:21:01.600 --> 00:21:03.650\nSo notice what it did there.\n\n421\n00:21:03.650 --> 00:21:08.390\nI had mounted the Virtual Machine Tools\nand I had an error, and so\n\n422\n00:21:08.390 --> 00:21:09.580\nit's aware of that.\n\n423\n00:21:09.580 --> 00:21:13.170\nSo when I go to update the VMware Tools\nthis time, I went to the web page and\n\n424\n00:21:13.170 --> 00:21:14.890\nI clicked the link and now it's saying,\n\n425\n00:21:14.890 --> 00:21:18.030\ndo we want to do an Automated Upgrade,\nwhich is what I tried a moment ago and\n\n426\n00:21:18.030 --> 00:21:20.320\nit failed, or\ndo I want to do an Interactive Upgrade.\n\n427\n00:21:20.320 --> 00:21:22.860\nSo now I've got that choice\nwhich I didn't have before.\n\n428\n00:21:22.860 --> 00:21:25.750\nNow I did the Automatic Upgrade before and\nit failed.\n\n429\n00:21:25.750 --> 00:21:26.570\nSo I don't know why so\n\n430\n00:21:26.570 --> 00:21:29.740\nI'm going to have to choose to do\nan Interactive Upgrade this time.\n\n431\n00:21:29.740 --> 00:21:31.890\nSo I'll go ahead and\ndo Interactive Upgrade and find out.\n\n432\n00:21:31.890 --> 00:21:35.790\nThe neat part about this is, hopefully,\nI can find out what went wrong and\n\n433\n00:21:35.790 --> 00:21:39.460\nonce I know what went wrong\nthen I can fix that problem for\n\n434\n00:21:39.460 --> 00:21:42.040\nany other VMs that I roll out to, right?\n\n435\n00:21:42.040 --> 00:21:45.824\nSo if I'm missing a Windows Update or\nsomething, it's going to tell me here, or\n\n436\n00:21:45.824 --> 00:21:49.332\nthis is kind of what I hate, or this will\nwork just fine without any error and\n\n437\n00:21:49.332 --> 00:21:51.860\nthen I'm left scratching my\nhead as to why it failed.\n\n438\n00:21:51.860 --> 00:21:55.100\nSo we'll see what happens, but\nthat's going to go ahead and upgrade.\n\n439\n00:21:55.100 --> 00:21:57.920\nBut notice how it did eject\nthe VMWare Tools disk.\n\n440\n00:21:57.920 --> 00:22:00.800\nIt wasn't in there anymore and\nit put my previous disk in there.\n\n441\n00:22:00.800 --> 00:22:03.630\nSo it remembers what disk\nyou had to put it back\n\n442\n00:22:03.630 --> 00:22:05.630\nto the way it was before you got started.\n\n443\n00:22:05.630 --> 00:22:08.430\nAll right, let's see, it's giving me\na little warning here about some of\n\n444\n00:22:08.430 --> 00:22:11.020\nthe files being in use,\nbut I'm okay with that.\n\n445\n00:22:11.020 --> 00:22:15.920\nAnd it's gonna close those tools to do the\ninstall, or it can say wait for a reboot.\n\n446\n00:22:15.920 --> 00:22:18.600\nI'm in a hurry so I'm not gonna wait for\na reboot and we'll just do it right now.\n\n447\n00:22:18.600 --> 00:22:22.780\nAll right, so\nthere it goes doing the upgrade, and\n\n448\n00:22:22.780 --> 00:22:26.630\nI kind of expected to see an error before\nnow and find out what that problem was.\n\n449\n00:22:26.630 --> 00:22:28.540\nBut all right, so\nwe'll leave that tool alone.\n\n450\n00:22:28.540 --> 00:22:33.080\nSo once that's done now our virtual\nmachine's up to date, our VMware Tools,\n\n451\n00:22:33.080 --> 00:22:36.030\nand the hardware revision of this\nvirtual machine are up to date.\n\n452\n00:22:36.030 --> 00:22:38.840\nAnd my resolutions starting\nto clean up a bit.\n\n453\n00:22:38.840 --> 00:22:41.139\nVideo resolution is always a great\nway to spot whether, or not,\n\n454\n00:22:41.139 --> 00:22:43.050\nyou've the right tools loaded.\n\n455\n00:22:43.050 --> 00:22:46.305\nSo now that's done let's take a look\nat the Distributed Virtual Switch.\n\n456\n00:22:46.305 --> 00:22:48.900\nSo I'm gonna go back here\nto my vCenter screen and\n\n457\n00:22:48.900 --> 00:22:51.040\nI'm just gonna flip over to networking.\n\n458\n00:22:51.040 --> 00:22:54.800\nAnd on the networking side, I've got\na Distributed Virtual Switch right here.\n\n459\n00:22:54.800 --> 00:22:57.900\nAnd I'm gonna go to my summary for\nthat Distributed Virtual Switch,\n\n460\n00:22:57.900 --> 00:23:02.860\nand in the summary, right at the top\nyou'll see manufacturer VMware\n\n461\n00:23:02.860 --> 00:23:07.470\nbecause remember you can run\nCisco's Nexus Virtual Switch in here.\n\n462\n00:23:07.470 --> 00:23:10.039\nSo you could throw in one of those\nguys and it would be a Cisco one.\n\n463\n00:23:10.039 --> 00:23:14.565\nBut here we've got VMware and my version\nis 5.0, all right, because I came from\n\n464\n00:23:14.565 --> 00:23:18.655\nvCenter 5, and so now I still have\nthat Virtual Switch, this version 5.\n\n465\n00:23:18.655 --> 00:23:22.842\nI could leave it be but I wanna upgrade\nit to get the latest and greatest, and so\n\n466\n00:23:22.842 --> 00:23:26.657\nit's got a little note right here,\nUpgrades Available, all right.\n\n467\n00:23:26.657 --> 00:23:29.644\nAnd you can click that link, or you can\njust right-click on the Switch, and\n\n468\n00:23:29.644 --> 00:23:31.290\nyou've got the Upgrade menu right here.\n\n469\n00:23:31.290 --> 00:23:33.781\nSo we could Upgrade that\nDistributed Switch and\n\n470\n00:23:33.781 --> 00:23:36.155\ntake advantage of the new feutures, right?\n\n471\n00:23:36.155 --> 00:23:37.271\nSo when I go to upgrade that,\n\n472\n00:23:37.271 --> 00:23:39.373\nit's just gonna ask me which\nversion do I wanna go to?\n\n473\n00:23:39.373 --> 00:23:44.698\nI'm running 5.0, you can't go backward, so\nit's just gonna show me the new version.\n\n474\n00:23:44.698 --> 00:23:50.470\nSo I wanna go to 5.1, 5.5, or\n6.0 and I'm gonna go to 6.0.\n\n475\n00:23:50.470 --> 00:23:55.328\nNow, we could ask ourselves the same\nquestion from the VMware Tools, right,\n\n476\n00:23:55.328 --> 00:23:56.442\nwith the Switch.\n\n477\n00:23:56.442 --> 00:23:57.905\nDo I need to go to 6.0?\n\n478\n00:23:57.905 --> 00:23:59.512\nI don't know.\n\n479\n00:23:59.512 --> 00:24:01.460\nIt's up to you.\n\n480\n00:24:01.460 --> 00:24:03.210\nThese are not like security fixes.\n\n481\n00:24:03.210 --> 00:24:06.470\nWith security fixes, you wanna get\nthem out there as soon as possible.\n\n482\n00:24:06.470 --> 00:24:07.750\nThese are feature updates, right?\n\n483\n00:24:07.750 --> 00:24:08.850\nNew features.\n\n484\n00:24:08.850 --> 00:24:10.915\nSo, am I gonna use these new features?\n\n485\n00:24:10.915 --> 00:24:14.655\nIf so, then yes, upgrade that\nvirtual switch, as soon as you can.\n\n486\n00:24:14.655 --> 00:24:18.725\nBut if you're not gonna use the new\nfeatures there's literally no\n\n487\n00:24:18.725 --> 00:24:19.675\nurgency to this.\n\n488\n00:24:19.675 --> 00:24:21.075\nYou can wait or just never do it,\n\n489\n00:24:21.075 --> 00:24:24.760\nI can stay distributed virtual switch\nversion five, and I'll be fine.\n\n490\n00:24:24.760 --> 00:24:28.770\nBut, if I go to 5.1,\nI get a better Health Check.\n\n491\n00:24:28.770 --> 00:24:30.910\nAnd let me tell you guys,\nthat Health Check is worth it.\n\n492\n00:24:30.910 --> 00:24:32.190\nYou want that feature.\n\n493\n00:24:32.190 --> 00:24:35.290\nBecause with the older\ndistributed virtual switches,\n\n494\n00:24:35.290 --> 00:24:39.540\nyou can have instances where a host can't\ncommunicate, but the link lights are up.\n\n495\n00:24:39.540 --> 00:24:43.020\nOr the virtual machines can't communicate,\nbut it's virtual link show is up and\n\n496\n00:24:43.020 --> 00:24:45.270\nso it doesn't fail you\nover when it should.\n\n497\n00:24:45.270 --> 00:24:48.067\nYou get better fail over if you go to 5.1.\n\n498\n00:24:48.067 --> 00:24:52.118\nWith 5.5,\nyou've got traffic filtering and marking,\n\n499\n00:24:52.118 --> 00:24:56.970\nwhich very few people use and\nyou got enhanced LACP support.\n\n500\n00:24:56.970 --> 00:24:58.540\nIf you use the link aggregation and\n\n501\n00:24:58.540 --> 00:25:02.910\ncontrol protocol,\nit worked okay in previous switches.\n\n502\n00:25:02.910 --> 00:25:08.340\nIt works really well in 5.5 and so that's\na reason why you want to upgrade to that.\n\n503\n00:25:08.340 --> 00:25:09.220\nIf you use LACP.\n\n504\n00:25:09.220 --> 00:25:13.300\nIf you don't use LACP, then the 5.5\nupgrade really wasn't that significant.\n\n505\n00:25:13.300 --> 00:25:18.160\nWhen you get to version six, version six\nintroduced network I/O Control version 3.\n\n506\n00:25:18.160 --> 00:25:22.090\nThe previous versions were okay,\nversion three added some really neat\n\n507\n00:25:22.090 --> 00:25:25.040\nfeatures in there, and we covered\nnetwork I/O control in another episode.\n\n508\n00:25:25.040 --> 00:25:27.850\nBut you also got support for\nIGMP and MLD snooping,\n\n509\n00:25:27.850 --> 00:25:30.320\nwhich is really handy on\nIP version six networks.\n\n510\n00:25:30.320 --> 00:25:32.290\nThe MLD side is not IGMP.\n\n511\n00:25:32.290 --> 00:25:36.790\nSo if you have IPv6,\nthis distributed virtual switch has\n\n512\n00:25:36.790 --> 00:25:38.660\nsome features you'll be\nable to take advantage of.\n\n513\n00:25:38.660 --> 00:25:42.170\nBut if you're an all IPv4 network and\nyou don't use LACP, and\n\n514\n00:25:42.170 --> 00:25:47.200\nyou're using something else to monitor\nvirtual machines for their health,\n\n515\n00:25:47.200 --> 00:25:50.540\nthen none of these are necessarily\nmotivating to me at that point.\n\n516\n00:25:50.540 --> 00:25:52.409\nAnd I can stay with the older virtual\nswitch and I'll be just fine.\n\n517\n00:25:53.510 --> 00:25:57.040\nBut, if any one of these features are\nexciting to you, or you just like to be on\n\n518\n00:25:57.040 --> 00:25:59.700\nthe latest and greatest,\nthen you go ahead and jump up versions.\n\n519\n00:25:59.700 --> 00:26:01.710\nNow, what's the risk?\n\n520\n00:26:01.710 --> 00:26:06.830\nThe risk is, if I upgrade to version 6,\nfrom now on I can only\n\n521\n00:26:06.830 --> 00:26:12.320\nadd ESXI version 6 hosts, if I want this\ndistributed virtual switch to run on.\n\n522\n00:26:12.320 --> 00:26:15.360\nIf I bring up a 5.5 host,\nI can still do that, but\n\n523\n00:26:15.360 --> 00:26:19.910\nthis virtual switch will not be able to\nhave physical ports on that 5.5 host.\n\n524\n00:26:19.910 --> 00:26:23.030\nIt'll be limited to the 6.0 host.\n\n525\n00:26:23.030 --> 00:26:25.740\nSo that's the restriction we have.\n\n526\n00:26:25.740 --> 00:26:27.150\nAnd you can't downgrade.\n\n527\n00:26:27.150 --> 00:26:31.440\nSo that's where we say,\nhey, just take it easy.\n\n528\n00:26:31.440 --> 00:26:34.360\nDon't necessarily rush right out and\nupgrade that virtual switch until you're\n\n529\n00:26:34.360 --> 00:26:37.250\ncertain that 6.0 is gonna work\njust fine in your environment.\n\n530\n00:26:37.250 --> 00:26:38.160\nWhen everything's tested and\n\n531\n00:26:38.160 --> 00:26:42.020\nfine, then go ahead and roll up to it,\nthat's what I'm gonna do.\n\n532\n00:26:42.020 --> 00:26:45.540\nWhen we choose to upgrade you just\nclick the radio button, you hit Next.\n\n533\n00:26:45.540 --> 00:26:47.790\nIf there's anything that's not\ncompatible it'll warn you,\n\n534\n00:26:47.790 --> 00:26:52.600\nso if you have any 5.5 hosts it'll warn\nyou, and then we can finish that up and\n\n535\n00:26:52.600 --> 00:26:54.270\nit's gonna upgrade, okay?\n\n536\n00:26:54.270 --> 00:26:56.880\nNow, notice I do have one\nlittle checkmark down here,\n\n537\n00:26:56.880 --> 00:27:00.110\nwhether I want to enable\nthe enhanced LACP support.\n\n538\n00:27:00.110 --> 00:27:04.340\nIt'll actually stay in the older\nmode of LACP by default,\n\n539\n00:27:04.340 --> 00:27:06.850\nunless we choose to turn that on, okay?\n\n540\n00:27:06.850 --> 00:27:08.650\nSo it's got two different modes for it.\n\n541\n00:27:08.650 --> 00:27:11.040\nI'm gonna go ahead and\ncheck that and we'll finish up.\n\n542\n00:27:11.040 --> 00:27:13.740\nAnd it's gonna upgrade that and\nthe upgrade happens very quickly\n\n543\n00:27:13.740 --> 00:27:17.070\nbecause it's not like installing a new\noperating system or anything like that.\n\n544\n00:27:17.070 --> 00:27:18.936\nIt's just turning on a few extra features.\n\n545\n00:27:18.936 --> 00:27:24.110\nIt does offer to export the configuration\nand that's because if this\n\n546\n00:27:24.110 --> 00:27:28.210\ndoesn't work out for us, you can\nalways recreate the virtual switch,\n\n547\n00:27:28.210 --> 00:27:32.190\nif you import its configuration back in,\nso you can get things back in place.\n\n548\n00:27:32.190 --> 00:27:34.110\nBut, I'm not gonna worry about that so\nmuch.\n\n549\n00:27:34.110 --> 00:27:38.200\nIt's just gonna do one more compatibility\ncheck for the LACP upgrade, and\n\n550\n00:27:38.200 --> 00:27:40.390\nthen it'll finish up, all right?\n\n551\n00:27:40.390 --> 00:27:44.000\nThose last couple of screens wouldn't have\nshown up, if I didn't do the LACP upgrade.\n\n552\n00:27:44.000 --> 00:27:45.070\nBut it's already done.\n\n553\n00:27:45.070 --> 00:27:46.050\nWe're on version six.\n\n554\n00:27:46.050 --> 00:27:48.960\nThere was a micro-outtage in there,\nso for a brief moment,\n\n555\n00:27:48.960 --> 00:27:52.420\nmy virtual machine's lost network\nconnectivity, but it's very brief.\n\n556\n00:27:52.420 --> 00:27:54.490\nIf you do this after hours,\nnobody would notice.\n\n557\n00:27:54.490 --> 00:27:55.940\nAnd now we're up and going.\n\n558\n00:27:55.940 --> 00:27:58.010\nI can see that I'm running version six.\n\n559\n00:27:58.010 --> 00:28:03.250\nI can see that I've got my\nIGMP MLD snooping is supported.\n\n560\n00:28:03.250 --> 00:28:05.320\nThat wasn't supported\nin previous versions.\n\n561\n00:28:05.320 --> 00:28:06.590\nNow I've got it.\n\n562\n00:28:06.590 --> 00:28:08.320\nAnd we're upgraded.\n\n563\n00:28:08.320 --> 00:28:11.420\nLet's check on my virtual machine\nhere that's upgrading tools.\n\n564\n00:28:11.420 --> 00:28:14.810\nAnd you know I really expected\nto see an error there.\n\n565\n00:28:14.810 --> 00:28:17.646\nAnd no error, interesting.\n\n566\n00:28:17.646 --> 00:28:22.140\nSo, with the vSphere Update Manager, if I\nwas a more patient man, I probably should\n\n567\n00:28:22.140 --> 00:28:25.490\nhave just tried to push the update again\nand it probably would have gone through.\n\n568\n00:28:25.490 --> 00:28:28.190\nThere may have been application locked\nin the background or something but\n\n569\n00:28:28.190 --> 00:28:31.150\nwe can always look up the error and\nfind out what happened there, too.\n\n570\n00:28:31.150 --> 00:28:32.820\nBut otherwise,\nthis one should roll through.\n\n571\n00:28:32.820 --> 00:28:34.080\nSo it's gonna reboot, and\n\n572\n00:28:34.080 --> 00:28:38.560\nwhen it's rebooted, we should see that\nit's running the latest VMWare tools.\n\n573\n00:28:38.560 --> 00:28:42.550\nWhen I go back to my virtual machines and\nI pull up the summary for\n\n574\n00:28:42.550 --> 00:28:46.000\nthat screen, the warning is gone, okay?\n\n575\n00:28:46.000 --> 00:28:47.640\nWell, it's still not updated.\n\n576\n00:28:47.640 --> 00:28:51.490\nI've got VMWare Tools not running, right,\ncuz the machine's still booting up.\n\n577\n00:28:51.490 --> 00:28:55.390\nSo let me get logged into that and\njust make sure it's all done.\n\n578\n00:28:55.390 --> 00:28:58.010\nAnd we'll make sure the latest\ntools show up there.\n\n579\n00:28:58.010 --> 00:29:02.970\nAnd so if I go back here and I'll just\nrefresh my screen, and what we should see,\n\n580\n00:29:02.970 --> 00:29:04.310\nthere we go.\n\n581\n00:29:04.310 --> 00:29:08.730\nVMWare Tools, Running,\nversion 10246 (Current), okay?\n\n582\n00:29:08.730 --> 00:29:09.960\nNow I did that manually,\n\n583\n00:29:09.960 --> 00:29:13.700\nunfortunately, but if I were to go\nback here to my Update Manager,\n\n584\n00:29:13.700 --> 00:29:17.520\nwhere I show as Non-Compliant from\nearlier, I can scan for updates.\n\n585\n00:29:17.520 --> 00:29:20.880\nIt's gonna look at that virtual\nmachine and what it should find is\n\n586\n00:29:20.880 --> 00:29:24.350\nthat the virtual machines are now\ncurrent and so I show as compliant.\n\n587\n00:29:24.350 --> 00:29:24.880\nRight?\n\n588\n00:29:24.880 --> 00:29:27.880\nAnd so now I can start to track that and\npush updates out in the future.\n\n589\n00:29:29.150 --> 00:29:35.340\nAll right, so with that we've upgraded\nour hosts, well, let's go in order.\n\n590\n00:29:35.340 --> 00:29:39.070\nWe've upgraded VCenter in part one,\nwe upgraded our host in part two,\n\n591\n00:29:39.070 --> 00:29:43.830\nwe just upgraded our virtual machines here\nin part three, so technically phase three,\n\n592\n00:29:43.830 --> 00:29:47.740\nand then we upgraded our virtual switches,\nwhich is phase four.\n\n593\n00:29:47.740 --> 00:29:50.890\nUpgrading the data stores is another\nthing that we kinda throw in there,\n\n594\n00:29:50.890 --> 00:29:52.650\nI did that in the last episode.\n\n595\n00:29:52.650 --> 00:29:56.880\nBut once that's done,\nI'm now fully updated to vSphere six,\n\n596\n00:29:56.880 --> 00:29:58.760\nrunning the latest and\ngreatest of the software.\n\n597\n00:29:58.760 --> 00:30:03.360\nWe came from version five all the way\nup to version six and now we're done.\n\n598\n00:30:03.360 --> 00:30:04.720\nWe kick back and relax.\n\n599\n00:30:04.720 --> 00:30:06.160\nWell, not completely.\n\n600\n00:30:06.160 --> 00:30:07.950\nNow is when we go into monitoring.\n\n601\n00:30:07.950 --> 00:30:10.430\nWe start watching, cuz issues could arise.\n\n602\n00:30:10.430 --> 00:30:12.730\nWe could have problems that pop up.\n\n603\n00:30:12.730 --> 00:30:17.110\nSo, you typically don't wanna take\nadvantage of new features right away.\n\n604\n00:30:17.110 --> 00:30:20.300\nSo, now you got this enhanced\nLACP support, that's awesome.\n\n605\n00:30:20.300 --> 00:30:22.220\nI've got this higher memory\nlimits that are available.\n\n606\n00:30:22.220 --> 00:30:22.890\nGreat.\n\n607\n00:30:22.890 --> 00:30:26.260\nI've got all the cool features\nintroduced in vSphere six,\n\n608\n00:30:26.260 --> 00:30:27.820\nyou probably wanna hold off.\n\n609\n00:30:27.820 --> 00:30:31.150\nRun like you've been running for\na week, right?\n\n610\n00:30:31.150 --> 00:30:32.700\nAnd see if any errors pop up.\n\n611\n00:30:32.700 --> 00:30:36.340\nBecause, if an error pops up, and\nyou've deployed ten new features,\n\n612\n00:30:36.340 --> 00:30:38.610\nnow troubleshooting it\nbecomes really difficult.\n\n613\n00:30:38.610 --> 00:30:40.850\nBut if an error pops up, and you haven't\ntouched any of the new features,\n\n614\n00:30:40.850 --> 00:30:43.940\nyou can rule those out right away, and\njust focus on your infrastructure and\n\n615\n00:30:43.940 --> 00:30:46.160\nfind out what that problem is, all right?\n\n616\n00:30:46.160 --> 00:30:48.460\nThen, once everything's nice and\nstable, and\n\n617\n00:30:48.460 --> 00:30:51.080\nyou've shown that these vSphere six is\nrunning just as fine as your previous\n\n618\n00:30:51.080 --> 00:30:53.930\nversion, then you start looking\nat all those new features.\n\n619\n00:30:53.930 --> 00:30:56.140\nAnd you say, okay, time to update LACP.\n\n620\n00:30:56.140 --> 00:30:59.580\nLet's take advantage of some of\nthat new performance there or let's\n\n621\n00:30:59.580 --> 00:31:03.400\nget that MLD snooping running and get IPv6\nrunning better on our virtual machines.\n\n622\n00:31:03.400 --> 00:31:04.830\nYou start getting those\nfeatures configured and\n\n623\n00:31:04.830 --> 00:31:06.486\ntake advantage of them to their fullest.\n\n624\n00:31:06.486 --> 00:31:08.615\nBut it's a little easier on\nthe troubleshooting side,\n\n625\n00:31:08.615 --> 00:31:11.785\nif you hold off just a little bit to\ntest and certify your environment.\n\n626\n00:31:11.785 --> 00:31:14.845\n>> Don, we appreciate you taking the time\nto take us through this journey of\n\n627\n00:31:14.845 --> 00:31:16.575\nupgrading to the latest and greatest.\n\n628\n00:31:16.575 --> 00:31:18.675\nDoes look like it's coming to\nthe end of another episode, but\n\n629\n00:31:18.675 --> 00:31:21.497\nbefore we do would you like to,\nanything else?\n\n630\n00:31:21.497 --> 00:31:24.027\n>> Well, the main thing is\nthink about the timing, right?\n\n631\n00:31:24.027 --> 00:31:27.167\nSo we just did this in three episodes,\nthree 30 minute episodes,\n\n632\n00:31:27.167 --> 00:31:30.687\nabout an hour and a half to update\nour VSphere six environment, or\n\n633\n00:31:30.687 --> 00:31:34.010\nI guess it was VSphere five\nall the way up to VSphere six.\n\n634\n00:31:34.010 --> 00:31:35.620\nAn hour and\na half might seem like a long time for\n\n635\n00:31:35.620 --> 00:31:38.090\nthose of you that are used to\nupdating software on one machine.\n\n636\n00:31:38.090 --> 00:31:41.460\nBut out there in real life land,\nwhen you've got tons of hosts and\n\n637\n00:31:41.460 --> 00:31:45.440\ntons of VMs and you're going through\nthis process, expect it to take weeks.\n\n638\n00:31:45.440 --> 00:31:49.440\nThis is not a, it's Friday afternoon,\nlet's do it before the weekend kicks in.\n\n639\n00:31:49.440 --> 00:31:50.540\nIt's not that kind of a project.\n\n640\n00:31:50.540 --> 00:31:53.510\nRight.\nSo your timeline is gonna be much greater.\n\n641\n00:31:53.510 --> 00:31:56.270\nOn the exam obviously, it's gonna\nbe short like what we just saw, but\n\n642\n00:31:56.270 --> 00:31:58.360\nin real life land, just be patient.\n\n643\n00:31:58.360 --> 00:32:00.342\nDon't rush through the whole thing.\n\n644\n00:32:00.342 --> 00:32:05.210\nUpdate vCenter and then wait a few days\nbefore you go in and update your host, and\n\n645\n00:32:05.210 --> 00:32:08.300\nthen when you update your host,\nupdate just a couple of hosts.\n\n646\n00:32:08.300 --> 00:32:11.840\nAnd test them over a week or two and\nthen update the rest of them.\n\n647\n00:32:11.840 --> 00:32:14.300\nAnd with your virtual machine,\nstart rolling those tools out, but\n\n648\n00:32:14.300 --> 00:32:16.420\ndo it in phases, little batches.\n\n649\n00:32:16.420 --> 00:32:19.890\nAnd that way if something goes wrong, you\nhaven't damaged your whole environment.\n\n650\n00:32:19.890 --> 00:32:22.280\nYou've limited it to just\na handful of machines.\n\n651\n00:32:22.280 --> 00:32:24.880\nTroubleshoot, isolate the problems,\nand resolve the problems, and\n\n652\n00:32:24.880 --> 00:32:26.180\ncontinue moving on.\n\n653\n00:32:26.180 --> 00:32:27.800\nTake your time.\n\n654\n00:32:27.800 --> 00:32:31.800\nAnd I can't stress it enough,\nalways take backups.\n\n655\n00:32:31.800 --> 00:32:33.400\nBack up everything.\n\n656\n00:32:33.400 --> 00:32:34.520\nBack up vCenter.\n\n657\n00:32:34.520 --> 00:32:35.700\nBack up your host.\n\n658\n00:32:35.700 --> 00:32:39.160\nIf you can,\nbe ready to redeploy your host if need be.\n\n659\n00:32:39.160 --> 00:32:41.810\nOn the virtual machines, at least take\na snapshot before you start updating\n\n660\n00:32:41.810 --> 00:32:44.650\nthe tools, and that way you always have\nsomething to roll back to if things go\n\n661\n00:32:44.650 --> 00:32:47.020\nwrong, cuz things certainly can go wrong.\n\n662\n00:32:47.020 --> 00:32:50.151\n>> I tell you, probably just saved\na lot of people weekend work there.\n\n663\n00:32:50.151 --> 00:32:51.870\n>> [LAUGH]\n>> Thanks, Don, for being here and\n\n664\n00:32:51.870 --> 00:32:53.310\nthank you to the viewer for watching.\n\n665\n00:32:53.310 --> 00:32:56.260\nSigning out at ITProTV,\nI've been your host, Wes Bryan.\n\n666\n00:32:56.260 --> 00:32:57.806\n>> And I'm Don Pezet.\n>> And we'll see you next time.\n\n667\n00:32:57.806 --> 00:33:04.329\n[MUSIC]\n\n",
          "vimeoId": "171757365"
        }
      ],
      "title": "Installing vSphere 6"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don demonstrate how to setup and configuration role-based access control. They discuss the roles that can be delegated inside of vCenter. They explain permission propagation to help the viewer understand what the results would be when permissions are set at different levels.",
          "length": "1963",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-2-1-1-role_based_access_control-052516-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-2-1-1-role_based_access_control-052516-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-2-1-1-role_based_access_control-052516-1-sm.jpg",
          "title": "Role-Based Access Control",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.510 --> 00:00:14.601\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.601 --> 00:00:16.370\nI'm your host, Wes Bryan.\n\n4\n00:00:16.370 --> 00:00:19.760\nAnd in today's episode, we're\ncontinuing along in our VMware series,\n\n5\n00:00:19.760 --> 00:00:24.160\nmore specifically, we're looking at the\nVMware certified professional version six.\n\n6\n00:00:24.160 --> 00:00:27.110\nBack in the studio today to help us out\nwith this topic, none other than Mr.\n\n7\n00:00:27.110 --> 00:00:28.760\nDon Pezet, Don how you doing sir?\n\n8\n00:00:28.760 --> 00:00:31.240\n>> I'm doing great Wes,\nready to dive right back into VCP.\n\n9\n00:00:31.240 --> 00:00:34.990\nIn our previous episodes, we've really\nbeen focus in getting things set up,\n\n10\n00:00:34.990 --> 00:00:39.260\ninstalling ESX, installing vCenter,\njust kind of turning things on.\n\n11\n00:00:39.260 --> 00:00:42.000\nWell once everything is turned on now\n\n12\n00:00:42.000 --> 00:00:44.600\nwe've got to shift our\nfocus over to security.\n\n13\n00:00:44.600 --> 00:00:45.728\nSo for the next couple of episodes,\n\n14\n00:00:45.728 --> 00:00:49.636\nwe'll be focusing on securing\nthe whole VCR Suite.\n\n15\n00:00:49.636 --> 00:00:53.780\nSo ESXi host, vCenter server,\nall these different pieces.\n\n16\n00:00:53.780 --> 00:00:56.270\nThere are certain security\nsteps we need to take.\n\n17\n00:00:56.270 --> 00:01:00.510\nAnd so where I want to start\ntoday is with permissions.\n\n18\n00:01:00.510 --> 00:01:06.210\nWhen you install ESX,\nyou create one user account, Root.\n\n19\n00:01:06.210 --> 00:01:08.540\nIt's created for you, you have no choice.\n\n20\n00:01:08.540 --> 00:01:13.240\nWhen you install vCenter, it creates\none user account called administrator.\n\n21\n00:01:13.240 --> 00:01:16.250\nBoth those accounts rooted in\nthe administrator have full and\n\n22\n00:01:16.250 --> 00:01:17.230\ncomplete access.\n\n23\n00:01:17.230 --> 00:01:21.250\nRoot has full and\ncomplete access to an ESXi host.\n\n24\n00:01:21.250 --> 00:01:25.210\nAdministrator has full and\ncomplete access to vSphere as a whole.\n\n25\n00:01:25.210 --> 00:01:30.820\nSo vCenter as well as ESXi host and\nthat's just a lot of access.\n\n26\n00:01:30.820 --> 00:01:34.720\nNow if you're a small environment, you\nonly have one IT guy, that might work out.\n\n27\n00:01:34.720 --> 00:01:38.975\nBut if you have a thousand ESX hosts and\nyou've got\n\n28\n00:01:38.975 --> 00:01:43.400\n10,000 virtual machines and you're\ngot tons of network admins in place.\n\n29\n00:01:43.400 --> 00:01:47.400\nYou don't want everybody sharing\none account because if one person\n\n30\n00:01:47.400 --> 00:01:51.710\ngets terminated now you have to change\nthe password and everybody gets affected.\n\n31\n00:01:51.710 --> 00:01:54.140\nOr you hire somebody new and\nyou've got to share that password.\n\n32\n00:01:54.140 --> 00:01:57.220\nNow you go looking in the logs to\nfind our who did something wrong but\n\n33\n00:01:57.220 --> 00:01:59.900\neverybody's logged in with the same\naccount so you don't know who did what.\n\n34\n00:01:59.900 --> 00:02:02.660\nSo it's really important\nto create user accounts for\n\n35\n00:02:02.660 --> 00:02:05.390\neach person that's going to\nbe administering our system.\n\n36\n00:02:05.390 --> 00:02:08.180\nNow in this episode I'm\ngonna focus specifically on\n\n37\n00:02:08.180 --> 00:02:12.480\ncreating those user accounts and assigning\npermissions and using groups and roles.\n\n38\n00:02:12.480 --> 00:02:14.030\nI wanna focus on that side.\n\n39\n00:02:14.030 --> 00:02:16.990\nIn the next episode we're gonna get\na chance to see integrating this with\n\n40\n00:02:16.990 --> 00:02:18.570\nsomething like\nthe Microsoft Active Directory,\n\n41\n00:02:18.570 --> 00:02:21.640\nthe single sign-on piece that's\ngonna make a lot of this work.\n\n42\n00:02:21.640 --> 00:02:23.930\nBut I wanna focus on\nthe permission side first and\n\n43\n00:02:23.930 --> 00:02:26.150\nthen we'll get into the whole\nsingle sign-on mess next.\n\n44\n00:02:26.150 --> 00:02:26.970\nI shouldn't say mess.\n\n45\n00:02:26.970 --> 00:02:31.361\nIt's actually really easy to implement and\nit does a great job,\n\n46\n00:02:31.361 --> 00:02:33.486\nso I shouldn't call it a mess.\n\n47\n00:02:33.486 --> 00:02:36.054\nBut yeah, so that's what we're\ngonna tackle today is permissions,\n\n48\n00:02:36.054 --> 00:02:37.410\ngetting things set up the right way.\n\n49\n00:02:37.410 --> 00:02:41.370\nAnd we always want to do that early\non instead of regretting it later and\n\n50\n00:02:41.370 --> 00:02:42.930\nnot being able to go back in time.\n\n51\n00:02:42.930 --> 00:02:45.740\n>> You know Don when we talked\nbefore the episode started,\n\n52\n00:02:45.740 --> 00:02:48.690\nI asked you a question about roles and\npermissions,\n\n53\n00:02:48.690 --> 00:02:52.070\nand coming from a different environment\nI always think of end users and stuff.\n\n54\n00:02:52.070 --> 00:02:54.220\nAgain a real great explanation here.\n\n55\n00:02:54.220 --> 00:02:55.300\nNow when we talk about roles,\n\n56\n00:02:55.300 --> 00:02:58.240\nwe're talking about things like\ndelegation of administration right?\n\n57\n00:02:58.240 --> 00:03:01.190\n>> Yeah, and that's a key thing,\nbecause you're going to have different\n\n58\n00:03:01.190 --> 00:03:04.270\npeople who perform a different\nrole in your organization.\n\n59\n00:03:04.270 --> 00:03:06.710\nSo for example,\nlet's say you're a massive company.\n\n60\n00:03:06.710 --> 00:03:11.250\nYou've got 10,000 employees, you've got\na ton of virtual machines, a ton of hosts.\n\n61\n00:03:11.250 --> 00:03:15.250\nYou're a big company,\nwell you may have employees\n\n62\n00:03:15.250 --> 00:03:18.860\nthat are dedicated just to\nbe vSphere administrators.\n\n63\n00:03:18.860 --> 00:03:22.540\nSo I am just a vSphere administrator and\nthat's it.\n\n64\n00:03:22.540 --> 00:03:25.600\nI don't work on Active Directory,\nI don't work on other software products,\n\n65\n00:03:25.600 --> 00:03:27.040\nI just work on vSphere and that's it.\n\n66\n00:03:28.570 --> 00:03:32.520\nI then have other employees that do the\nactive directory side of other employees\n\n67\n00:03:32.520 --> 00:03:33.250\nthat are developers.\n\n68\n00:03:33.250 --> 00:03:34.820\nThey have other employees\nthat are help desk.\n\n69\n00:03:34.820 --> 00:03:38.580\nAnd they each have their own different\nrole within the organization.\n\n70\n00:03:38.580 --> 00:03:40.480\nThe smaller your company is,\n\n71\n00:03:40.480 --> 00:03:42.990\nthe more likely that is that\nyou wear more hats, right?\n\n72\n00:03:42.990 --> 00:03:45.810\nSo if you're the company that\nonly has 300 employees and\n\n73\n00:03:45.810 --> 00:03:50.230\nyou have two IT guys, that's very very\ncommon then you wear all the hats.\n\n74\n00:03:50.230 --> 00:03:53.460\nSo you might be the administrator for\nActive Directory and the administrator for\n\n75\n00:03:53.460 --> 00:03:55.780\nvSphere and the administrator for\nall this other stuff.\n\n76\n00:03:55.780 --> 00:04:00.810\nSo just having a big fat administrator\naccount, that works, that is okay.\n\n77\n00:04:00.810 --> 00:04:03.980\nBut the bigger your company is,\nthe more risk that creates.\n\n78\n00:04:03.980 --> 00:04:05.690\nAnd so\nwe've got to have a separation of duties.\n\n79\n00:04:05.690 --> 00:04:09.220\nWe don't want to give people more\naccess than they absolutely need.\n\n80\n00:04:09.220 --> 00:04:11.640\nAnd VMware,\nthey kind of set a lot of this up for\n\n81\n00:04:11.640 --> 00:04:15.930\nus, when you do a default\ninstall of vSphere and vCenter.\n\n82\n00:04:15.930 --> 00:04:19.160\nVCenter has a series of groups that,\n\n83\n00:04:19.160 --> 00:04:21.710\nI have to be careful here\nbecause the terminology changes.\n\n84\n00:04:21.710 --> 00:04:23.580\nDifferent vendors use\ndifferent terminologies.\n\n85\n00:04:23.580 --> 00:04:27.420\nAnd in vCenter,\nwe have groups and we have roles.\n\n86\n00:04:27.420 --> 00:04:31.230\nThose sound very similar but they\nare different, so let's talk about that.\n\n87\n00:04:31.230 --> 00:04:34.360\nThere's really three objects I'm\ngonna work with in this episode.\n\n88\n00:04:34.360 --> 00:04:37.480\nUsers, groups and roles.\n\n89\n00:04:37.480 --> 00:04:42.140\nA user, that's a person, so Wes, me,\nit's an employee typically but it could be\n\n90\n00:04:42.140 --> 00:04:45.880\na contractor or guest or whatever,\nbut it's a person, that's a user.\n\n91\n00:04:45.880 --> 00:04:50.800\nAnd then a group is simply a collection\nof those users, and that's it.\n\n92\n00:04:50.800 --> 00:04:53.160\nIn other system like in Linux,\n\n93\n00:04:53.160 --> 00:04:55.310\nwe might have those groups\nthat we assign permissions to.\n\n94\n00:04:55.310 --> 00:04:58.610\nOr we might have it in Windows, where you\nhave groups you assign permissions to.\n\n95\n00:04:58.610 --> 00:05:03.150\nBut in VMware, when we're dealing with\nvCenter, we don't use the groups that way.\n\n96\n00:05:03.150 --> 00:05:06.090\nGroups really just collect users together.\n\n97\n00:05:06.090 --> 00:05:08.930\nAnd then we have roles, and\n\n98\n00:05:08.930 --> 00:05:11.870\nroles, that's what we're really\nassigning permissions to.\n\n99\n00:05:11.870 --> 00:05:14.328\nAnd we attach users and\ngroups to the roles.\n\n100\n00:05:14.328 --> 00:05:17.760\nSo they pre-built some roles in for\n\n101\n00:05:17.760 --> 00:05:21.580\nus to be able to use, and you can\nuse them or you can create your own.\n\n102\n00:05:21.580 --> 00:05:23.630\nLet's kind of walk through that.\n\n103\n00:05:23.630 --> 00:05:29.920\nSo I'm logged into vSphere right here,\nand so I'm in my vCenter web client.\n\n104\n00:05:29.920 --> 00:05:32.810\nAnd inside of the web client we've\ngot all the various different things\n\n105\n00:05:32.810 --> 00:05:35.389\nthat we kinda messed around with, and\nwhat I'm looking for is administration.\n\n106\n00:05:36.450 --> 00:05:39.810\nAnd when you go into administration,\nyou'll start to see users and\n\n107\n00:05:39.810 --> 00:05:40.640\ngroups, right?\n\n108\n00:05:40.640 --> 00:05:42.680\nWhere we can jump in and\nstart to control that.\n\n109\n00:05:42.680 --> 00:05:47.650\nBut even above that, you've got roles,\nand so they are separated out.\n\n110\n00:05:47.650 --> 00:05:52.740\nUsers and groups, those are the actual\npeople and collections of people.\n\n111\n00:05:52.740 --> 00:05:58.140\nBut roles, those are where we're assigning\npeople permissions to do things and\n\n112\n00:05:58.140 --> 00:06:00.010\nyou can see right here the default roles.\n\n113\n00:06:00.010 --> 00:06:02.270\nI did not make a single\nrole before the show.\n\n114\n00:06:02.270 --> 00:06:04.890\nSo every role you see here on my screen is\n\n115\n00:06:04.890 --> 00:06:08.480\none that was created as\na default under system.\n\n116\n00:06:09.500 --> 00:06:13.420\nAnd the administrator role, that's kind\nof the key one, that one's important.\n\n117\n00:06:13.420 --> 00:06:16.410\nWhen I click on it,\nsee how it's got a bunch of people in it?\n\n118\n00:06:16.410 --> 00:06:20.250\nIt says that it's defined in\nthe global policies and so\n\n119\n00:06:20.250 --> 00:06:21.520\nI've got global permissions there.\n\n120\n00:06:21.520 --> 00:06:23.000\nAnd if I look at the user in group,\n\n121\n00:06:23.000 --> 00:06:27.400\nI'll see that it's got a bunch of\nVSPHERE.LOCAL accounts tied to it right?\n\n122\n00:06:27.400 --> 00:06:32.240\nThat's the default,\nthat VSPHERE the admin at VSPHERE local\n\n123\n00:06:32.240 --> 00:06:35.090\naccount that I keep logging in with,\nthat's the default account.\n\n124\n00:06:35.090 --> 00:06:36.990\nAnd it's getting its\npermissions right here so\n\n125\n00:06:36.990 --> 00:06:40.110\nI can find the administrator\nin here all right.\n\n126\n00:06:40.110 --> 00:06:44.270\nNow the administrator role has\npermissions assigned to it, and\n\n127\n00:06:44.270 --> 00:06:46.990\nthat's what we have right here\nunder the privileges tab.\n\n128\n00:06:46.990 --> 00:06:50.640\nWhen I go under privileges I see\neverything that an administrator can do.\n\n129\n00:06:50.640 --> 00:06:53.290\nIf it has a check mark by it, I can do it.\n\n130\n00:06:53.290 --> 00:06:55.390\nIf it has nothing by it, I can't do it.\n\n131\n00:06:55.390 --> 00:06:57.420\nRight, so this is basically going\nthrough and saying what we can do.\n\n132\n00:06:57.420 --> 00:07:00.300\nWell an administrator can do anything,\nright?\n\n133\n00:07:00.300 --> 00:07:02.210\nThey're the all powerful account.\n\n134\n00:07:02.210 --> 00:07:06.360\nSo I'm gonna see check marks on everything\nand see what it says down here.\n\n135\n00:07:06.360 --> 00:07:09.860\nDescription All Privileges,\nthat's what an administrator has.\n\n136\n00:07:09.860 --> 00:07:12.320\nAn administrator has everything.\n\n137\n00:07:12.320 --> 00:07:15.750\nAnd they give you the nice,\nbig general permissions right here.\n\n138\n00:07:15.750 --> 00:07:19.570\nBut if you expand it out, you can see\na little bit more, so when we go under,\n\n139\n00:07:19.570 --> 00:07:22.850\nlet's find virtual machines.\n\n140\n00:07:22.850 --> 00:07:25.120\nSo if I find virtual machines,\nright here, and\n\n141\n00:07:25.120 --> 00:07:29.290\nI expand that out I can see\npermissions inside of it.\n\n142\n00:07:29.290 --> 00:07:32.110\nSo I can see configuring\na virtual machine,\n\n143\n00:07:32.110 --> 00:07:34.330\nor interacting with the virtual machine.\n\n144\n00:07:34.330 --> 00:07:38.370\nIf I look at interaction we can see,\nanswering a question.\n\n145\n00:07:38.370 --> 00:07:39.000\nWhat's that about?\n\n146\n00:07:39.000 --> 00:07:41.760\nWell, when I get one of those\nlittle support warnings and\n\n147\n00:07:41.760 --> 00:07:44.750\nI can acknowledge it or decline it,\nthose are the questions.\n\n148\n00:07:44.750 --> 00:07:49.400\nWe've got backup operations, configure\nCD media, configure floppy media.\n\n149\n00:07:49.400 --> 00:07:52.087\nIf I have a check mark\nup here on interaction,\n\n150\n00:07:52.087 --> 00:07:54.650\nI get all of the interaction permissions.\n\n151\n00:07:54.650 --> 00:07:57.784\nBut that might not be checked\nin just some sub items are and\n\n152\n00:07:57.784 --> 00:08:00.863\nnow I'm just getting those\nlimited permissions on it.\n\n153\n00:08:00.863 --> 00:08:05.348\nI might have an employee while I want to\nbe able to change the CD out in a virtual\n\n154\n00:08:05.348 --> 00:08:09.289\nmachine But, I don't want them to\nbe able to shut it down, right.\n\n155\n00:08:09.289 --> 00:08:11.778\nAnd we'll see that's kinda tucked\naway in here somewhere there,\n\n156\n00:08:11.778 --> 00:08:14.189\nI just don't wanna passed it,\nthere it is, power on power off.\n\n157\n00:08:14.189 --> 00:08:17.383\nI don't want them to powered on and\npowered off or maybe I'm okay with power\n\n158\n00:08:17.383 --> 00:08:19.930\non hey, a machine that turn on,\nyou could go and turn it on.\n\n159\n00:08:19.930 --> 00:08:23.570\nBut, I want you turning it off then,\nyou can change the CD but,\n\n160\n00:08:23.570 --> 00:08:25.500\nI don;t want you to do these other things,\nwe can pick and\n\n161\n00:08:25.500 --> 00:08:27.980\nchoose that's what these\nroles are all about.\n\n162\n00:08:27.980 --> 00:08:30.990\nThe administrator's actually\nthe only one that's used by default.\n\n163\n00:08:30.990 --> 00:08:34.630\nSo when I choose the administrator I see\nall these things that are inside of it.\n\n164\n00:08:34.630 --> 00:08:40.034\nIf I start looking at the next couple of\nones, like Read-only, the list is empty.\n\n165\n00:08:40.034 --> 00:08:42.568\nNo access, the list is empty, right?\n\n166\n00:08:42.568 --> 00:08:44.450\nSo these other ones aren't actually used.\n\n167\n00:08:44.450 --> 00:08:47.020\nThey're there for us to use we can choose.\n\n168\n00:08:47.020 --> 00:08:49.800\nDo I want somebody to\nhave Read-only access?\n\n169\n00:08:49.800 --> 00:08:50.390\nRight?\n\n170\n00:08:50.390 --> 00:08:53.650\nRead only access is really helpful for\nhelpdesk employees, right?\n\n171\n00:08:53.650 --> 00:08:55.950\nI might have a helpdesk\nemployee that's entry level,\n\n172\n00:08:55.950 --> 00:08:58.780\nsomebody right out of college or\nhigh school or whatever.\n\n173\n00:08:58.780 --> 00:09:01.480\nAnd they're getting into IT and\nI want them so that when\n\n174\n00:09:01.480 --> 00:09:04.410\nsomebody calls the ticket it says,\nhey I can't connect to to the server.\n\n175\n00:09:05.500 --> 00:09:08.880\nI might want them to be able to\nconnect to v center, log in,\n\n176\n00:09:08.880 --> 00:09:11.170\nfind that virtual machine and\nsee if it's powered on.\n\n177\n00:09:11.170 --> 00:09:14.420\nI don't want them to change\nanything I just want them to look.\n\n178\n00:09:14.420 --> 00:09:17.120\nAnd so\nI can use that Read-only role to do that.\n\n179\n00:09:17.120 --> 00:09:21.910\nI can give them that role and\nnow they'll be able to read\n\n180\n00:09:21.910 --> 00:09:25.720\njust everything inside of vCenter,\nbut they can't change a single thing.\n\n181\n00:09:25.720 --> 00:09:30.150\nOr No access,\nI might explicitly want to block somebody.\n\n182\n00:09:30.150 --> 00:09:31.740\nWhy would I want to do that?\n\n183\n00:09:31.740 --> 00:09:36.360\nWell, when we assign permissions,\npermissions trickle down,\n\n184\n00:09:36.360 --> 00:09:38.620\nthere's inheritance that happens.\n\n185\n00:09:38.620 --> 00:09:41.760\nAnd so I can assign\npermissions on a Datacenter and\n\n186\n00:09:41.760 --> 00:09:44.950\nthere might be 50 hosts\ninside of that Datacenter.\n\n187\n00:09:44.950 --> 00:09:49.330\nWell, if I give somebody permissions\nat the Datacenter level,\n\n188\n00:09:49.330 --> 00:09:52.390\nit trickles down to all\nthe hosts inside of it.\n\n189\n00:09:52.390 --> 00:09:56.099\nSo if I get helpdesk read-only at\nthe Datacenter level, then the read-only\n\n190\n00:09:56.099 --> 00:10:00.220\npermission trickles down to every\nsingle host inside of that Datacenter.\n\n191\n00:10:00.220 --> 00:10:04.250\nWhat if I have a host in there that is for\nhuman resources?\n\n192\n00:10:04.250 --> 00:10:07.340\nAnd I don't want just\nthe regular old helpdesk\n\n193\n00:10:07.340 --> 00:10:10.150\nbeing able to get into the human\nresources server, right?\n\n194\n00:10:10.150 --> 00:10:12.490\nEven just read-only,\nI don't want them to be able to see that.\n\n195\n00:10:12.490 --> 00:10:16.790\nSo I might need to go to that\nspecific server and over ride it and\n\n196\n00:10:16.790 --> 00:10:21.330\nsay helpdesk gets no access\non that particular server.\n\n197\n00:10:21.330 --> 00:10:22.750\nSo that's why we've got this one.\n\n198\n00:10:22.750 --> 00:10:25.170\nYou can kind of take away\npeople's access if you need it.\n\n199\n00:10:26.330 --> 00:10:27.870\nNow the other one's that you'll see,\n\n200\n00:10:27.870 --> 00:10:31.290\nyou'll notice that they have a little\nparenthesis and they say sample, right?\n\n201\n00:10:31.290 --> 00:10:34.230\nThe are just examples that\nthe VMware is giving you.\n\n202\n00:10:34.230 --> 00:10:36.710\nTake them or leave them,\nyou don't have to use them.\n\n203\n00:10:36.710 --> 00:10:38.810\nI might wanna virtual machine user.\n\n204\n00:10:38.810 --> 00:10:41.710\nThat's somebody who can't\nadminister vCenter,.\n\n205\n00:10:41.710 --> 00:10:45.350\nThey can't add hosts or\ndo maintenance on a host, but\n\n206\n00:10:45.350 --> 00:10:47.100\nthey can use a virtual machine.\n\n207\n00:10:47.100 --> 00:10:50.035\nAnd if you take a look at\nthe privileges that are assigned\n\n208\n00:10:50.035 --> 00:10:53.315\nsee how a lot of this\nstuff is not checked.\n\n209\n00:10:53.315 --> 00:10:56.035\nSo under Alarms, they've got nothing.\n\n210\n00:10:56.035 --> 00:10:58.715\nUnder AutoDeploy, Certificated,\nContent Library, Datacenter,\n\n211\n00:10:58.715 --> 00:11:01.905\nDatastore, all this stuff is nothing,\nno check mark.\n\n212\n00:11:01.905 --> 00:11:05.350\nBut if I get down to Global for example.\n\n213\n00:11:05.350 --> 00:11:08.840\nSee how I've got that little half square?\n\n214\n00:11:08.840 --> 00:11:13.129\nThat's letting me know that I have\nsome permissions inside of Global.\n\n215\n00:11:13.129 --> 00:11:16.490\nNot all, if it was all I'd have\na check mark but I have some.\n\n216\n00:11:16.490 --> 00:11:18.950\nAnd if I keep scrolling down and\nget to the virtual machine section,\n\n217\n00:11:18.950 --> 00:11:20.440\nthat's where we'll see the best stuff.\n\n218\n00:11:20.440 --> 00:11:23.670\nSo if I get down to Virtual machine,\nright?\n\n219\n00:11:23.670 --> 00:11:24.740\nI don't have configure.\n\n220\n00:11:24.740 --> 00:11:27.870\nI can't configure a Virtual machine and\nchange its settings, but\n\n221\n00:11:27.870 --> 00:11:29.470\nI can interact with it.\n\n222\n00:11:29.470 --> 00:11:31.730\nI can interact and answer a question.\n\n223\n00:11:31.730 --> 00:11:35.830\nI can't do a backup, but you'll see\nconfigure CD media, console interaction,\n\n224\n00:11:35.830 --> 00:11:37.590\nso I can view the screen of the VM.\n\n225\n00:11:37.590 --> 00:11:38.810\nI can work with the VM.\n\n226\n00:11:38.810 --> 00:11:40.540\nWe're picking and\nchoosing those privileges.\n\n227\n00:11:41.710 --> 00:11:45.080\nNow, one thing you might have\nnoticed as I've been in here is\n\n228\n00:11:45.080 --> 00:11:48.440\nit doesn't always give me\nthe ability to edit these.\n\n229\n00:11:48.440 --> 00:11:52.140\nIf I choose Administrator, for example,\nsee how the pencil grayed out?\n\n230\n00:11:52.140 --> 00:11:53.477\nI can't edit it.\n\n231\n00:11:53.477 --> 00:11:58.220\nVMware does not want you\nto edit the default roles.\n\n232\n00:11:58.220 --> 00:12:00.200\nAnd by they don't want you to,\n\n233\n00:12:00.200 --> 00:12:04.630\nI mean they make it where you can't, so\nI can't edit the administrative roles.\n\n234\n00:12:04.630 --> 00:12:08.140\nI can't edit Read-only,\nI can't edit No access.\n\n235\n00:12:08.140 --> 00:12:10.400\nThose are system built in ones.\n\n236\n00:12:10.400 --> 00:12:14.395\nBut when I get to the The sample,\nthe little edit button lights up and\n\n237\n00:12:14.395 --> 00:12:16.375\nI can edit the sample, right?\n\n238\n00:12:16.375 --> 00:12:19.451\nNow in real life land you're welcome\nto edit the sample if you want, but\n\n239\n00:12:19.451 --> 00:12:20.855\nVMware recommends you don't.\n\n240\n00:12:20.855 --> 00:12:24.525\nAnd so on the exam, remember that,\nwe don't want to edit the existing roles.\n\n241\n00:12:24.525 --> 00:12:26.655\nUse the roles as they are.\n\n242\n00:12:26.655 --> 00:12:32.147\nIf you need something different, it's\nbetter to clone a role and edit your own.\n\n243\n00:12:32.147 --> 00:12:34.422\nSo you can create custom roles.\n\n244\n00:12:34.422 --> 00:12:37.228\nAnd all you have to do is pick\nthe role you wanna base things on.\n\n245\n00:12:37.228 --> 00:12:40.153\nSo, for example, I might have help desk,\n\n246\n00:12:40.153 --> 00:12:44.530\nand I want to help desk role to\nbe a modification of read-only.\n\n247\n00:12:44.530 --> 00:12:48.980\nI want them to have read-only to\neverything, but I also want them to be\n\n248\n00:12:48.980 --> 00:12:53.200\nable to interact with certain virtual\nmachines, certain capabilities on a VM.\n\n249\n00:12:53.200 --> 00:12:58.410\nSo I could take Read-only, and\nI can hit the Duplicate button up here.\n\n250\n00:12:58.410 --> 00:13:02.290\nAnd when I hit the clone role action,\nit's gonna clone it, and\n\n251\n00:13:02.290 --> 00:13:07.220\nI'm creating a clone of Read-only,\nand I'm gonna call this Help Desk.\n\n252\n00:13:07.220 --> 00:13:10.900\nBecause these are gonna be customized\nprivileges just for helpdesk.\n\n253\n00:13:10.900 --> 00:13:13.980\nAnd as you look down here\nat what you end up with.\n\n254\n00:13:13.980 --> 00:13:17.040\nNotice how nothing is checked.\n\n255\n00:13:17.040 --> 00:13:19.510\nRead only is actually the default.\n\n256\n00:13:19.510 --> 00:13:20.140\nOkay?\n\n257\n00:13:20.140 --> 00:13:23.300\nSo everything is unchecked.\n\n258\n00:13:23.300 --> 00:13:27.070\nAnd now I can go doing grant\nexactly what I want them to have.\n\n259\n00:13:27.070 --> 00:13:30.170\nThis isn't like no access where\neverything is being taken away.\n\n260\n00:13:30.170 --> 00:13:33.100\nThis one, we get read only and now we go\nthrough and specify what they wanted.\n\n261\n00:13:33.100 --> 00:13:35.989\nSo, under Alarms, there's a help desk,\n\n262\n00:13:35.989 --> 00:13:39.856\nso, I might want them to be\nable to acknowledge an alarm.\n\n263\n00:13:39.856 --> 00:13:42.890\nThat an alarm was created and they can\nacknowledge it or maybe I don't want that.\n\n264\n00:13:42.890 --> 00:13:45.080\nMaybe the help desk is\njust handling calls in, so\n\n265\n00:13:45.080 --> 00:13:47.390\nI want them to be able to create an alarm.\n\n266\n00:13:47.390 --> 00:13:47.920\nRight?\n\n267\n00:13:47.920 --> 00:13:49.906\nThey gotta call, this server is down.\n\n268\n00:13:49.906 --> 00:13:52.904\nThey create an alarm and\nnow the VMware Admin see it and\n\n269\n00:13:52.904 --> 00:13:55.370\nconstruct to work with it, all right?\n\n270\n00:13:55.370 --> 00:13:56.870\nBut they can't acknowledge an alarm,\n\n271\n00:13:56.870 --> 00:13:58.850\ncuz they're not suppose to be\nable to fix it on their own.\n\n272\n00:13:58.850 --> 00:14:03.018\nSo we can start to kinda tweak and change\nthat maybe I want to set an alarm status,\n\n273\n00:14:03.018 --> 00:14:04.090\nI probably don't.\n\n274\n00:14:04.090 --> 00:14:07.998\nBut you start picking and choosing based\non what it is you want them to have.\n\n275\n00:14:07.998 --> 00:14:10.224\nI probably don't want\nthem to do Autodeploy.\n\n276\n00:14:10.224 --> 00:14:12.858\nA little scroll happy on this one.\n\n277\n00:14:12.858 --> 00:14:14.290\nOn the Datacenter, in Data storage,\n\n278\n00:14:14.290 --> 00:14:15.970\nI probably don't want them\nto do anything there.\n\n279\n00:14:15.970 --> 00:14:17.520\nOn the virtual machine side though.\n\n280\n00:14:17.520 --> 00:14:20.880\nAnd even on the host side there might\nbe permissions that I wanna give there.\n\n281\n00:14:20.880 --> 00:14:23.820\nEspecially when it comes\nto things like reporting.\n\n282\n00:14:23.820 --> 00:14:24.350\nRight?\n\n283\n00:14:24.350 --> 00:14:29.321\nSo as I go down here to Inventory,\nyou'll see where we've got Add, Modify,\n\n284\n00:14:29.321 --> 00:14:32.699\nRemove, I more than likely\ndon't want that stuff.\n\n285\n00:14:32.699 --> 00:14:36.551\nActually, there's not anything in there\nI'd want to give to a helpdesk employee.\n\n286\n00:14:36.551 --> 00:14:38.781\nI guess it depends on how\nmuch you trust the employee.\n\n287\n00:14:38.781 --> 00:14:41.678\nBut if you browse through here you'll\nsee there's a ton of settings.\n\n288\n00:14:41.678 --> 00:14:44.873\nAnd there's a ton of different things that\nyou can dole out and give to people and\n\n289\n00:14:44.873 --> 00:14:46.220\nit's all based on what you want.\n\n290\n00:14:46.220 --> 00:14:49.287\nSo you can create your\nown custom privileges.\n\n291\n00:14:49.287 --> 00:14:52.637\nYou might wanna take certain things away,\ngrant certain things, and\n\n292\n00:14:52.637 --> 00:14:54.129\nyou build up that custom role.\n\n293\n00:14:54.129 --> 00:14:57.930\nSo, remember, this is the way\nthat I always keep it straight,\n\n294\n00:14:57.930 --> 00:15:01.150\nis that roles are all about permissions,\nokay?\n\n295\n00:15:01.150 --> 00:15:02.550\nIt's all about permissions so\n\n296\n00:15:02.550 --> 00:15:05.420\nI'm defining a role based on\nthe permissions that I wanna give.\n\n297\n00:15:05.420 --> 00:15:08.610\nSo I now have a role called helpdesk and\n\n298\n00:15:08.610 --> 00:15:11.290\nits got all the permissions I want\nmy help desk employees to have.\n\n299\n00:15:11.290 --> 00:15:16.150\nSo they've got Read-only for the whole\nenvironment, and they can create an alarm.\n\n300\n00:15:16.150 --> 00:15:18.700\nSo now they're set the way\nthat I want them, and\n\n301\n00:15:18.700 --> 00:15:21.720\nI just need to make sure that my helpdesk\nemployees will have that permission.\n\n302\n00:15:21.720 --> 00:15:24.850\n>> Don, you mentioned in an earlier\nexplanation here, how if you set\n\n303\n00:15:24.850 --> 00:15:28.330\na privilege or a permission at a certain\nlevel, it'll inherit, It'll trickle down.\n\n304\n00:15:28.330 --> 00:15:32.690\nWell when you have permission set at\nmultiple places can it be a little tricky\n\n305\n00:15:32.690 --> 00:15:35.780\nas to determining what permission\nthe end result will be?\n\n306\n00:15:35.780 --> 00:15:36.410\n>> Absolutely.\n\n307\n00:15:36.410 --> 00:15:38.230\nYou know,\nit's the propagation of permissions.\n\n308\n00:15:38.230 --> 00:15:40.280\nSo what you can have is where,\n\n309\n00:15:40.280 --> 00:15:44.090\nyou know maybe I give Wes read\nonly at the Datacenter level.\n\n310\n00:15:44.090 --> 00:15:46.680\nAnd then Wes calls me up,\nDon I'm logged in,\n\n311\n00:15:47.740 --> 00:15:51.170\nI can read from some servers I can't\nread from others, what's going on?\n\n312\n00:15:51.170 --> 00:15:54.581\nWell you go and you look and\nit turns out it's overridden somewhere.\n\n313\n00:15:54.581 --> 00:15:58.551\nThat yes, he had read at the domain level,\nat the Datacenter level but\n\n314\n00:15:58.551 --> 00:16:01.128\nit's been overridden on a virtual machine.\n\n315\n00:16:01.128 --> 00:16:03.516\nSo now you're like, well, shoot.\n\n316\n00:16:03.516 --> 00:16:06.780\nNow I gotta go find which virtual machine\nit's overwritten at and overdo that.\n\n317\n00:16:06.780 --> 00:16:08.920\nSo it gets to be challenging.\n\n318\n00:16:08.920 --> 00:16:11.870\nAnd the recommendation is that when\nyou talk about your hierarchy,\n\n319\n00:16:11.870 --> 00:16:13.460\nright, your hierarchy works like this.\n\n320\n00:16:13.460 --> 00:16:14.841\nYou have your global permissions,\n\n321\n00:16:14.841 --> 00:16:18.110\nand then underneath that you have your\nvVenter permissions, and underneath that,\n\n322\n00:16:18.110 --> 00:16:21.080\nyou have your data centers, and\nunderneath that, you have your hosts.\n\n323\n00:16:21.080 --> 00:16:25.330\nAnd so at each step along that journey,\nwe can override permissions.\n\n324\n00:16:25.330 --> 00:16:28.780\nSo the recommendation is to set\npermissions as high up in that hierarchy\n\n325\n00:16:28.780 --> 00:16:30.090\nas possible.\n\n326\n00:16:30.090 --> 00:16:34.230\nFor somebody like my help desk,\nI might want them to read from the entire\n\n327\n00:16:34.230 --> 00:16:37.450\nenvironment, not just one\nparticular vCenter server,\n\n328\n00:16:37.450 --> 00:16:40.350\nnot just one particular data center,\nbut the whole shebang.\n\n329\n00:16:40.350 --> 00:16:42.880\nAnd for that, we have global permissions.\n\n330\n00:16:42.880 --> 00:16:44.963\nAnd so I'll jump into the global\npermissions here in a moment.\n\n331\n00:16:44.963 --> 00:16:47.148\nWell actually, am I still on that screen?\n\n332\n00:16:47.148 --> 00:16:49.112\n[LAUGH] No, I'm not at the screen anymore.\n\n333\n00:16:49.112 --> 00:16:51.400\nI'll get to global\npermissions in a little bit.\n\n334\n00:16:51.400 --> 00:16:54.180\nGlobal permissions are the ones that\nwe set all the way up at the top.\n\n335\n00:16:54.180 --> 00:16:56.590\nBut actually I am on that screen, shoot.\n\n336\n00:16:56.590 --> 00:16:58.330\nI would pay a little more attention here.\n\n337\n00:16:58.330 --> 00:17:01.750\nSo I basically went to Home\n> Administration and Roles,\n\n338\n00:17:01.750 --> 00:17:03.050\nthat's where I was.\n\n339\n00:17:03.050 --> 00:17:07.350\nIf I went to Home > Administration and\nGlobal Permissions right here,\n\n340\n00:17:07.350 --> 00:17:11.270\nthis is where I can set global permissions\nthat apply to my entire environment.\n\n341\n00:17:11.270 --> 00:17:13.430\nSee how it's kinda showing\nthat in the picture,\n\n342\n00:17:13.430 --> 00:17:17.110\nis that we've got vCenter which is what\nit's representing with that server, and\n\n343\n00:17:17.110 --> 00:17:21.940\nthe host and the virtual machines that\nare inside of it, all trickling down.\n\n344\n00:17:21.940 --> 00:17:23.720\nIf I give people\npermissions at this level,\n\n345\n00:17:23.720 --> 00:17:26.040\nit applies to my entire environment.\n\n346\n00:17:26.040 --> 00:17:29.170\nIf you have a small company,\nthat's probably all you need,\n\n347\n00:17:29.170 --> 00:17:30.730\nall your permissions get set right here.\n\n348\n00:17:30.730 --> 00:17:34.150\nBut the bigger your company is,\nthe less likely this is to be true, that\n\n349\n00:17:34.150 --> 00:17:36.800\nyou're more than likely to be assigning\npermissions all over the place and\n\n350\n00:17:36.800 --> 00:17:38.230\nyou can certainly do that.\n\n351\n00:17:38.230 --> 00:17:39.910\nIn fact, what we've done so\n\n352\n00:17:39.910 --> 00:17:44.828\nfar, I've created a role but\nI don't really have anybody in that role.\n\n353\n00:17:44.828 --> 00:17:48.630\nSo I kinda need to get some users set\nup and put them in the role and so on.\n\n354\n00:17:48.630 --> 00:17:51.510\nSo let's do that and then I'll show\nyou assigning the permissions and\n\n355\n00:17:51.510 --> 00:17:53.190\nwe'll kinda get to it all from there.\n\n356\n00:17:53.190 --> 00:17:54.760\nSo in order for\n\n357\n00:17:54.760 --> 00:17:59.410\nthis to really be useful, I need to\nput some users in the role, okay?\n\n358\n00:17:59.410 --> 00:18:02.520\nAnd the way we do users,\nthere's actually two different,\n\n359\n00:18:02.520 --> 00:18:04.090\nwell I guess,\nthis is three different ways.\n\n360\n00:18:04.090 --> 00:18:07.870\nOne way is to create\nthe users on the ESXi hosts.\n\n361\n00:18:07.870 --> 00:18:08.570\nI don't recommend that.\n\n362\n00:18:08.570 --> 00:18:11.610\nIf you're doing stand alone\nESXi hosts you can do that, but\n\n363\n00:18:11.610 --> 00:18:14.520\nif you got it all managed by vCenter\nthen it's better to do it the second\n\n364\n00:18:14.520 --> 00:18:16.740\nway which is to create them in vCenter.\n\n365\n00:18:16.740 --> 00:18:19.360\nCreating a user in vCenter will\napply to all of your hosts.\n\n366\n00:18:19.360 --> 00:18:21.064\nAnd that's usually the better\nway to go about things.\n\n367\n00:18:21.064 --> 00:18:23.260\nThe third way is to connect\nto a directory service, and\n\n368\n00:18:23.260 --> 00:18:25.143\nwe'll see that in\na single sign-on episode.\n\n369\n00:18:25.143 --> 00:18:28.465\nAnd we could connect to active directory,\nand now you've got all the users and\n\n370\n00:18:28.465 --> 00:18:30.540\ngroups from active\ndirectory already in place.\n\n371\n00:18:30.540 --> 00:18:32.490\nSo you don't need to\ncreate any here at all.\n\n372\n00:18:32.490 --> 00:18:36.400\nWe can just ignore the local ones and\njust use the active directory ones.\n\n373\n00:18:36.400 --> 00:18:38.420\nBut in my case, I'm not connected\nto an active directory, but\n\n374\n00:18:38.420 --> 00:18:41.800\nI do have a vCenter, so I'm gonna\ngo ahead and create it right here.\n\n375\n00:18:41.800 --> 00:18:45.525\nAnd so, when we look at this,\nbasically going from home,\n\n376\n00:18:45.525 --> 00:18:50.023\nto administration, to single sign-on,\nI can go to users, groups.\n\n377\n00:18:50.023 --> 00:18:52.333\nNow, I haven't configured single sign-on,\nright?\n\n378\n00:18:52.333 --> 00:18:54.413\nI haven't configured single\nsign-on with an active directory.\n\n379\n00:18:54.413 --> 00:18:58.120\nWell, that's true,\nthat's an external database.\n\n380\n00:18:58.120 --> 00:19:02.070\nBut you do have single sign-on\nwith the vCenter database.\n\n381\n00:19:02.070 --> 00:19:06.652\nAnd if I have 20 hosts attached,\nall 20 share the users of vCenter.\n\n382\n00:19:06.652 --> 00:19:09.451\nSo even though it's just one product,\nit's still considered single sign-on.\n\n383\n00:19:09.451 --> 00:19:13.391\nI have a single user account that I\ncan use on all 20 of my hosts and\n\n384\n00:19:13.391 --> 00:19:15.145\nthen work across the board.\n\n385\n00:19:15.145 --> 00:19:18.789\nAnd this is where I'll see that\ndefault administrator account that was\n\n386\n00:19:18.789 --> 00:19:20.315\ncreated during the install.\n\n387\n00:19:20.315 --> 00:19:23.123\nYou'll also see some other things like\n\n388\n00:19:23.123 --> 00:19:28.960\nthe Kerberos Ticket Granting Ticket\naccount that's there, the KRBTGT.\n\n389\n00:19:28.960 --> 00:19:33.780\nAnd you'll see K/M, the waiter service,\nwhich is part of the scheduling.\n\n390\n00:19:33.780 --> 00:19:36.300\nSo you'll see other accounts\nthat are system accounts.\n\n391\n00:19:36.300 --> 00:19:37.830\nYou shouldn't really mess with those.\n\n392\n00:19:37.830 --> 00:19:40.820\nThe administrator account is\nthe only user account that we have,\n\n393\n00:19:40.820 --> 00:19:43.240\nthe only one we can really log in as and\nuse.\n\n394\n00:19:43.240 --> 00:19:45.280\nI can start to create more accounts.\n\n395\n00:19:45.280 --> 00:19:46.980\nSo, I might create an account for myself.\n\n396\n00:19:47.990 --> 00:19:54.160\nSo, I'll make dpezet, and\nI'll give myself a super secret password.\n\n397\n00:19:55.590 --> 00:19:59.320\nI'd say I would give myself\na super secret password.\n\n398\n00:19:59.320 --> 00:20:00.810\nApparently, I wasn't clicked on the field.\n\n399\n00:20:00.810 --> 00:20:03.545\nLet's try that again, there we go.\n\n400\n00:20:03.545 --> 00:20:05.775\nAnd so I'm gonna type in my password.\n\n401\n00:20:05.775 --> 00:20:07.640\nI'll give it my first name and last name.\n\n402\n00:20:07.640 --> 00:20:10.950\nYou don't have to give it too awful\nmuch information, like email address and\n\n403\n00:20:10.950 --> 00:20:13.250\ndescription, that's optional,\nI can leave those out.\n\n404\n00:20:13.250 --> 00:20:17.350\nSo basically, I just wanna punch this\nin here, and then I'll say OK and\n\n405\n00:20:17.350 --> 00:20:18.800\nthat's gonna create a user account.\n\n406\n00:20:18.800 --> 00:20:22.110\nIt's gonna create the account right\nhere in the vCenter directory.\n\n407\n00:20:22.110 --> 00:20:23.690\nSo there I've got a user account.\n\n408\n00:20:23.690 --> 00:20:25.900\nAnd I can create one for\nWes or whoever else I need.\n\n409\n00:20:25.900 --> 00:20:29.380\nI can just sit here and\ncontinue to add these accounts.\n\n410\n00:20:29.380 --> 00:20:30.999\nSo I'll create a Wes Bryan account.\n\n411\n00:20:32.000 --> 00:20:38.882\nAnd I'd give him a password, and\nwe'll be in business, so here's Wes Bryan.\n\n412\n00:20:38.882 --> 00:20:42.879\nAll right, so now that I've got two\naccounts created, they're here.\n\n413\n00:20:42.879 --> 00:20:45.978\nThey're present, and\nI can start to use them, sort of.\n\n414\n00:20:45.978 --> 00:20:47.511\nThey don't actually have permissions.\n\n415\n00:20:47.511 --> 00:20:50.866\nSo these two accounts are created,\nthey'll be able to log into vCenter.\n\n416\n00:20:50.866 --> 00:20:53.365\nBut they won't be able to do anything,\nright,\n\n417\n00:20:53.365 --> 00:20:56.260\ncuz they just don't have\nany access by default.\n\n418\n00:20:56.260 --> 00:20:58.630\nI've gotta put them in a role\nbefore they have that access.\n\n419\n00:20:58.630 --> 00:21:02.360\nNow, you can put a user\nstraight into a role,\n\n420\n00:21:02.360 --> 00:21:06.580\nyou can do that, but\nit's not always the best thing to do.\n\n421\n00:21:06.580 --> 00:21:09.572\nSometimes it's easier to put\nthe users into groups first.\n\n422\n00:21:09.572 --> 00:21:13.470\nI'm gonna have an entire group of\nusers that I wanna add to a role.\n\n423\n00:21:13.470 --> 00:21:17.528\nSo for example, if Wes is gonna be my help\ndesk team, every time I add a new help\n\n424\n00:21:17.528 --> 00:21:21.714\ndesk employee, I might want that help desk\nemployee to be in the help desk role so\n\n425\n00:21:21.714 --> 00:21:23.720\nthey get those permissions.\n\n426\n00:21:23.720 --> 00:21:26.170\nWell, if I'm tied in the active\ndirectory that might already be done so\n\n427\n00:21:26.170 --> 00:21:29.610\nI could take the active directory\ngroup and stick that in the roll, or\n\n428\n00:21:29.610 --> 00:21:33.210\nI can create groups right here,\nI could just manage Wes individually and\n\n429\n00:21:33.210 --> 00:21:37.300\nstick him wherever, but then I'm gonna\ncreate a group to be able to support that.\n\n430\n00:21:37.300 --> 00:21:39.780\nNow, notice up here this\nlittle dropdown box?\n\n431\n00:21:39.780 --> 00:21:41.530\nI should have pointed this out and\nI didn't.\n\n432\n00:21:41.530 --> 00:21:45.980\nIf you drop that down, you've got\ntwo choices of what you're creating.\n\n433\n00:21:45.980 --> 00:21:47.920\nAnd see how it's got VSPHERE.LOCAL?\n\n434\n00:21:47.920 --> 00:21:49.469\nThat's the vCenter user database.\n\n435\n00:21:49.469 --> 00:21:51.967\nYou've also got PLABVC01.\n\n436\n00:21:51.967 --> 00:21:53.013\nWhat is that?\n\n437\n00:21:53.013 --> 00:21:54.750\nThat's the name of my server.\n\n438\n00:21:54.750 --> 00:21:57.880\nAnd so that would be creating\na local Windows account.\n\n439\n00:21:57.880 --> 00:22:00.730\nThere's actually three different places\nwe can get our user accounts from.\n\n440\n00:22:00.730 --> 00:22:04.300\nThere's the vCenter database or\nthe ESXi database.\n\n441\n00:22:04.300 --> 00:22:08.690\nThere's the Windows database\non the vCenter server, and\n\n442\n00:22:08.690 --> 00:22:12.650\nthen there's a remote directory, like\nactive directory or open LDAP, those guys.\n\n443\n00:22:12.650 --> 00:22:14.750\nSo three different places\nthe user accounts can come from.\n\n444\n00:22:14.750 --> 00:22:17.720\nI'm not connected to an active directory,\nso I don't see the third one here, but\n\n445\n00:22:17.720 --> 00:22:18.740\nI do see the first two.\n\n446\n00:22:18.740 --> 00:22:22.320\nIf I had chosen this,\nthese would be local Windows accounts.\n\n447\n00:22:22.320 --> 00:22:23.630\nAnd there's Administrator and Guest, and\n\n448\n00:22:23.630 --> 00:22:25.870\nthose are the Windows\naccounts that are created.\n\n449\n00:22:25.870 --> 00:22:26.850\nI don't wanna use those.\n\n450\n00:22:28.100 --> 00:22:29.450\nAll right, same thing goes for\ngroups, though.\n\n451\n00:22:29.450 --> 00:22:32.320\nSo when I jump over to the Groups tab,\n\n452\n00:22:32.320 --> 00:22:35.010\nI'm gonna see groups that\nare right here in vCenter.\n\n453\n00:22:35.010 --> 00:22:38.260\nAnd you'll see Administrators and\na few other ones, Users and so on,\n\n454\n00:22:38.260 --> 00:22:39.730\nthese are groups that they have made.\n\n455\n00:22:39.730 --> 00:22:43.790\nI can create my own group if I want, and\nI can create a group called Help Desk or\n\n456\n00:22:43.790 --> 00:22:47.040\nwhatever it is that I need\nto provide my functionality.\n\n457\n00:22:47.040 --> 00:22:49.650\nNow I know what you're thinking,\nI've got a role called Help Desk.\n\n458\n00:22:49.650 --> 00:22:50.650\nWhy would I have a group also?\n\n459\n00:22:50.650 --> 00:22:52.090\nIsn't this a little redundant?\n\n460\n00:22:52.090 --> 00:22:53.772\nIt can be, it can be redundant like this.\n\n461\n00:22:53.772 --> 00:22:56.170\nWe'll see once we have\nthe active directory in place,\n\n462\n00:22:56.170 --> 00:22:57.550\nit makes a lot more sense.\n\n463\n00:22:57.550 --> 00:23:00.360\nBut here,\nI can group these users together so\n\n464\n00:23:00.360 --> 00:23:04.970\nwhen it comes time to assign people to a\nrole, I just stick that group in the role.\n\n465\n00:23:04.970 --> 00:23:07.570\nAnd anytime I hire a new help desk\nemployee, I just put them in this group\n\n466\n00:23:07.570 --> 00:23:10.500\nand they'll automatically be in\nthe various roles that they need.\n\n467\n00:23:10.500 --> 00:23:13.640\n>> Don, that definitely seems like it\nwould be important as you scale up and\n\n468\n00:23:13.640 --> 00:23:14.880\nyou've got a larger and\n\n469\n00:23:14.880 --> 00:23:17.570\nlarger environment, maintaining\nthe consistencies between the groups and\n\n470\n00:23:17.570 --> 00:23:20.230\nthe roles that you're assigning\nthose privileges or permissions.\n\n471\n00:23:20.230 --> 00:23:21.220\n>> It's easy to make that mistake.\n\n472\n00:23:21.220 --> 00:23:25.690\nSo, if I hire a new help desk employee,\nand I'm like they need these five roles.\n\n473\n00:23:25.690 --> 00:23:27.720\nI gotta remember to do that,\nthe five roles.\n\n474\n00:23:27.720 --> 00:23:30.110\nIf I hire the next help desk employee,\nwhat if I forget one?\n\n475\n00:23:30.110 --> 00:23:31.710\nI put him in four of the roles, right?\n\n476\n00:23:31.710 --> 00:23:34.150\nOr I put them in a sixth role by accident.\n\n477\n00:23:34.150 --> 00:23:37.340\nHere, I hire a new help desk employee,\nI put them in the Help Desk group.\n\n478\n00:23:37.340 --> 00:23:39.240\nAnd now they get whatever roles\nare assigned to that group,\n\n479\n00:23:39.240 --> 00:23:40.280\nthere's no room for error, right?\n\n480\n00:23:40.280 --> 00:23:43.080\nIt saves us from making that mistake\nin giving out more permissions\n\n481\n00:23:43.080 --> 00:23:43.580\nthan we should.\n\n482\n00:23:44.600 --> 00:23:48.510\nSo, now that I've got a group made, So\nI've got that Help Desk group showing up\n\n483\n00:23:48.510 --> 00:23:51.450\nright there,\nI can see the group members down here.\n\n484\n00:23:51.450 --> 00:23:52.482\nAnd it's empty, so\n\n485\n00:23:52.482 --> 00:23:56.436\nI'm just gonna hit the little plus sign\nthere to add some group members to it.\n\n486\n00:23:56.436 --> 00:23:58.174\nAnd I can browse and find it.\n\n487\n00:23:58.174 --> 00:24:00.206\nNow notice how it says show users first?\n\n488\n00:24:00.206 --> 00:24:03.359\nYou typically put users into a group.\n\n489\n00:24:03.359 --> 00:24:05.147\nBut you can put groups into a group also.\n\n490\n00:24:05.147 --> 00:24:06.432\nWe can nest things.\n\n491\n00:24:06.432 --> 00:24:12.360\nSo, I might have IT Admins as a group.\n\n492\n00:24:12.360 --> 00:24:15.985\nAnd inside of it,\nI might have IT Admins North America,\n\n493\n00:24:15.985 --> 00:24:19.680\nIT Admins South America,\nIT Admins Europe, right?\n\n494\n00:24:19.680 --> 00:24:22.890\nCuz I might have different IT\nadmin teams for each continent, or\n\n495\n00:24:22.890 --> 00:24:24.430\nwherever my data centers are.\n\n496\n00:24:24.430 --> 00:24:27.220\nAnd I might wanna use those permissions\nwhen it applies to one particular\n\n497\n00:24:27.220 --> 00:24:29.630\ndata center, but\nthen I want global permissions too, so\n\n498\n00:24:29.630 --> 00:24:32.240\nyou can nest the groups to create\nwhatever hierarchy it is that you want.\n\n499\n00:24:32.240 --> 00:24:35.580\nAnd so, I can come in here and\nI can find me, or Wes, or\n\n500\n00:24:35.580 --> 00:24:39.470\nwhoever it is that I want to make in\nthat help desk group of find Wes.\n\n501\n00:24:39.470 --> 00:24:42.320\nSo I'm gonna find Wes, I'm gonna add him.\n\n502\n00:24:42.320 --> 00:24:45.070\nSo now, Wes is going to be in that group.\n\n503\n00:24:45.070 --> 00:24:47.830\nAnd when I hit add,\nit just makes his name appear down here.\n\n504\n00:24:48.940 --> 00:24:52.480\nAnd if I just hit say OK,\nthat's gonna add him.\n\n505\n00:24:52.480 --> 00:24:53.300\nThere we go.\n\n506\n00:24:53.300 --> 00:24:57.270\nAnd so now,\nWes shows as a group member of help desk.\n\n507\n00:24:57.270 --> 00:24:59.190\nI made an account for me.\n\n508\n00:24:59.190 --> 00:25:03.140\nI might wanna put myself an administrator,\nso I'll come down here to administrators\n\n509\n00:25:03.140 --> 00:25:07.550\nand I'll hit add, and I'm just going\nto add myself this time, and so\n\n510\n00:25:07.550 --> 00:25:11.330\nI'll add that in and get that created.\n\n511\n00:25:11.330 --> 00:25:13.953\nSo now, I'm gonna be in\nthe administrators group and\n\n512\n00:25:13.953 --> 00:25:16.119\nI'll have full access to the environment.\n\n513\n00:25:16.119 --> 00:25:19.500\nOkay.\nSo at this point, I've got my users.\n\n514\n00:25:19.500 --> 00:25:21.330\nThe users are placed into groups.\n\n515\n00:25:21.330 --> 00:25:24.530\nI've got a role created that has\nthe permissions that I want.\n\n516\n00:25:24.530 --> 00:25:25.850\nNow, I just need to tie them together and\n\n517\n00:25:25.850 --> 00:25:30.540\nthis is I find that most people have a\nhard time with this, is actually using it,\n\n518\n00:25:30.540 --> 00:25:35.870\nbecause what we're used to is in\nthe Linux world or in the Windows world,\n\n519\n00:25:35.870 --> 00:25:39.718\nis that you go and you assign\npermissions to an object to the group.\n\n520\n00:25:39.718 --> 00:25:43.970\nBut here, we got the rolls that sit in\nbetween, and so what happens is we can go\n\n521\n00:25:43.970 --> 00:25:48.730\nto any object in our entire hierarchy, and\nwe can pull up permissions on that object.\n\n522\n00:25:49.800 --> 00:25:54.280\nAnd when we look at the permissions,\nwe assigned a user or group\n\n523\n00:25:54.280 --> 00:25:58.650\nto a role at that time that were assigned\noriginally, it actually put them together.\n\n524\n00:25:58.650 --> 00:26:02.240\nSo, we don't actually put\nthe group in the role.\n\n525\n00:26:02.240 --> 00:26:04.730\nWe don't actually apply\nthe role to the group.\n\n526\n00:26:04.730 --> 00:26:06.890\nWe apply them at the same\ntime as the permissions.\n\n527\n00:26:06.890 --> 00:26:09.560\nThat's what ties it all together and\ncreates that permission set.\n\n528\n00:26:09.560 --> 00:26:13.952\nIt gives us some real flexibility but\nit's a bit of a mind twist.\n\n529\n00:26:13.952 --> 00:26:15.880\nFor those you that are used to\nthe Linux or Windows world,\n\n530\n00:26:15.880 --> 00:26:17.520\nit's kind of a different\nway of doing things.\n\n531\n00:26:18.950 --> 00:26:20.330\nI know I'm running short on time here so\n\n532\n00:26:20.330 --> 00:26:23.380\nlet's just do an example\nof global settings first.\n\n533\n00:26:23.380 --> 00:26:26.400\nAnd then, we'll do a part two and\nwe'll tackle individual settings and\n\n534\n00:26:26.400 --> 00:26:27.720\ngo a little more advanced there.\n\n535\n00:26:27.720 --> 00:26:31.490\nBut let's just say, globally,\nI put west in the help desk group, right?\n\n536\n00:26:31.490 --> 00:26:33.670\nAnd I created a roll called Help Desk.\n\n537\n00:26:33.670 --> 00:26:38.890\nAnd so, I wanna make sure that Help Desk,\ncuz that literally access for the entire\n\n538\n00:26:38.890 --> 00:26:43.310\nenvironment and they can create alarms for\nany piece inside of that environment.\n\n539\n00:26:43.310 --> 00:26:45.770\nSo, I'm gonna go to my\nGlobal Permissions option here.\n\n540\n00:26:45.770 --> 00:26:49.710\nIf I was coming from the Home screen, it\nwill be Home, and then Administration, and\n\n541\n00:26:49.710 --> 00:26:51.360\nthen Global Permissions.\n\n542\n00:26:51.360 --> 00:26:54.380\nAnd here I can see permissions that\nare assigned that entire environment,\n\n543\n00:26:54.380 --> 00:26:57.780\nwe saw these earlier, and\nyou'll see where administrator and\n\n544\n00:26:57.780 --> 00:27:00.900\na few other people already have\nsome permissions that are assigned,\n\n545\n00:27:00.900 --> 00:27:03.730\nI'm gonna add in some new permissions.\n\n546\n00:27:03.730 --> 00:27:06.600\nAnd this is the permission screen\nthat we'll see on a lot of different\n\n547\n00:27:06.600 --> 00:27:08.310\nobjects throughout the show.\n\n548\n00:27:08.310 --> 00:27:11.390\nAnd the way it works,\nit's divided in two halves.\n\n549\n00:27:11.390 --> 00:27:14.950\nThe part on the left,\nthe left side are the users or\n\n550\n00:27:14.950 --> 00:27:17.570\ngroups that I wanna assign permissions to.\n\n551\n00:27:17.570 --> 00:27:21.050\nAnd then on the right side\nare the role that I want to give them\n\n552\n00:27:21.050 --> 00:27:22.890\non whatever object this is.\n\n553\n00:27:22.890 --> 00:27:26.390\nNow, I'm in the global permission,\nso this is really every object.\n\n554\n00:27:26.390 --> 00:27:27.190\nBut later on, we'll see.\n\n555\n00:27:27.190 --> 00:27:31.670\nIt might be a specific virtual machine,\nor a specific ESXI host.\n\n556\n00:27:31.670 --> 00:27:33.430\nThis one's bigger, okay.\n\n557\n00:27:33.430 --> 00:27:35.220\nSo, on the left side,\nI need to pick the user or group.\n\n558\n00:27:35.220 --> 00:27:37.350\nAnd I can have more than one if I want.\n\n559\n00:27:37.350 --> 00:27:38.000\nAll right.\n\n560\n00:27:38.000 --> 00:27:42.900\nAnd so, I'm gonna come in here and choose,\nyou might wanna add Wes specifically or\n\n561\n00:27:42.900 --> 00:27:44.490\nme specifically.\n\n562\n00:27:44.490 --> 00:27:47.830\nBut if I do it that way,\nevery time I add a new helpdesk employee,\n\n563\n00:27:47.830 --> 00:27:51.510\nI would have to come here and\nadd them in too, right?\n\n564\n00:27:51.510 --> 00:27:55.060\nAnd if I'm doing this in 20 different\nplaces, I could 20 different places and\n\n565\n00:27:55.060 --> 00:27:56.480\nadd that employee.\n\n566\n00:27:56.480 --> 00:27:59.670\nAdding a group makes that\na little less painful.\n\n567\n00:27:59.670 --> 00:28:02.160\nAnd so that's usually the way we wanna go.\n\n568\n00:28:02.160 --> 00:28:04.500\nNow, I just hired a new employee and\nI put him in the group.\n\n569\n00:28:04.500 --> 00:28:08.790\nSo, when I come in here, I can tell\nit to show me the groups first, and\n\n570\n00:28:08.790 --> 00:28:13.720\nthen I can find that Help Desk group that\nI made, and it's all take Help Desk and\n\n571\n00:28:13.720 --> 00:28:15.740\nI'm gonna add that one to the list.\n\n572\n00:28:15.740 --> 00:28:16.360\nAll right?\n\n573\n00:28:16.360 --> 00:28:17.330\nAnd so I'm adding that.\n\n574\n00:28:17.330 --> 00:28:21.460\nAnd you can see I can do, you can do\nmultiple ones at the same time too.\n\n575\n00:28:21.460 --> 00:28:23.520\nIt might not just be Help Desk.\n\n576\n00:28:23.520 --> 00:28:28.590\nI might also want to do things like\nmy DC Admins or license servers.\n\n577\n00:28:28.590 --> 00:28:32.310\nSomebody's other ones that I make,\nbut that were here before.\n\n578\n00:28:32.310 --> 00:28:34.240\nI might wanna add me specifically, right?\n\n579\n00:28:34.240 --> 00:28:36.450\nSo I can choose deep as that and\nI'll add myself.\n\n580\n00:28:36.450 --> 00:28:40.570\nSo now, I'm actually adding a mixture\nof users and groups at the same time.\n\n581\n00:28:40.570 --> 00:28:45.270\nAnd I'll go ahead and hit OK on that, and\nnow we show up over here on the left.\n\n582\n00:28:45.270 --> 00:28:47.800\nNow we have to be careful because\nlook what role it assigned.\n\n583\n00:28:47.800 --> 00:28:51.117\nSo I've got, who's first here?\n\n584\n00:28:51.117 --> 00:28:51.658\nSo I'm first.\n\n585\n00:28:51.658 --> 00:28:54.560\nAnd then, the Help Desk group is next.\n\n586\n00:28:54.560 --> 00:28:57.450\nIf I choose myself,\nit's made me administrator.\n\n587\n00:28:57.450 --> 00:28:58.480\nWell, I'm okay with that.\n\n588\n00:28:58.480 --> 00:28:59.740\nI'm actually in the administrative group.\n\n589\n00:28:59.740 --> 00:29:00.850\nSo I could have achieved the same thing.\n\n590\n00:29:00.850 --> 00:29:02.120\nI'm an administrator anyway.\n\n591\n00:29:02.120 --> 00:29:03.800\nBut I can assign the administrator role.\n\n592\n00:29:03.800 --> 00:29:05.529\nAnd I'll get all of these privileges.\n\n593\n00:29:06.570 --> 00:29:11.080\nIf I click on Help Desk though\nit's an administrator also and\n\n594\n00:29:11.080 --> 00:29:14.040\nthat might not necessarily be what I want.\n\n595\n00:29:14.040 --> 00:29:17.200\nI want them to have the role\nthat I custom built, right?\n\n596\n00:29:17.200 --> 00:29:20.420\nThe one that makes them read only but\nthey can also create alarms.\n\n597\n00:29:20.420 --> 00:29:25.300\nAnd so, I can drop down the role list and\nI can pick what role I want them to have.\n\n598\n00:29:25.300 --> 00:29:26.740\nAnd so, if I scroll down and\n\n599\n00:29:26.740 --> 00:29:31.590\nfind my Help Desk roll,\nI'll see the permissions displayed here.\n\n600\n00:29:31.590 --> 00:29:33.540\nI can't edit the permissions on\nthe screen, I just see them.\n\n601\n00:29:33.540 --> 00:29:35.840\nIt's like a preview so\nI know what I'm about to give.\n\n602\n00:29:35.840 --> 00:29:39.700\nAnd I'll see where\ncreate alarm is checked.\n\n603\n00:29:39.700 --> 00:29:42.860\nAnd so now, Help Desk is gonna\nbe in that Help Desk role and\n\n604\n00:29:42.860 --> 00:29:44.690\nthey'll be able to sign those permissions.\n\n605\n00:29:44.690 --> 00:29:48.000\nNow, it's a little bit hard to see\nhere cuz the way the columns collapse.\n\n606\n00:29:48.000 --> 00:29:49.980\nBut Help Desk is this bottom row.\n\n607\n00:29:49.980 --> 00:29:53.840\nIf I resize this in the roll column,\n\n608\n00:29:53.840 --> 00:29:58.170\nI can see where I'm an administrator and\nthey're Help Desk.\n\n609\n00:29:58.170 --> 00:30:00.830\nI'm giving that role out to\nthe appropriate settings.\n\n610\n00:30:00.830 --> 00:30:04.535\nSo I don't want to give them more\npermissions than what they absolutely\n\n611\n00:30:04.535 --> 00:30:05.860\nneed, all right.\n\n612\n00:30:05.860 --> 00:30:08.320\nAnd so,\nyou can continue to add more groups here.\n\n613\n00:30:08.320 --> 00:30:10.350\nAnd each group can be assigned\na different a roles or\n\n614\n00:30:10.350 --> 00:30:12.290\nthey might even be assigned\nin the same role, who knows.\n\n615\n00:30:12.290 --> 00:30:16.170\nI might have another group here that's\nlike IT auditors, and so I give them\n\n616\n00:30:16.170 --> 00:30:20.370\nthe Help Desk role because I know that'll\ngive them read only with create alarms.\n\n617\n00:30:20.370 --> 00:30:24.540\nNow, I named my role based on\nthe job function, Help Desk.\n\n618\n00:30:24.540 --> 00:30:25.870\nI just chose to do that.\n\n619\n00:30:25.870 --> 00:30:29.030\nA lot of people choose to name\nthe roles based on the permissions.\n\n620\n00:30:29.030 --> 00:30:33.820\nSo I might have created a role\ncalled read only and create alarms.\n\n621\n00:30:33.820 --> 00:30:36.660\nAnd now, it makes a little more sense like\nI want the IT auditors to be able to read\n\n622\n00:30:36.660 --> 00:30:37.610\nonly and create alarms.\n\n623\n00:30:37.610 --> 00:30:39.460\nI want the Help Desk to be able\nto read only and create alarms.\n\n624\n00:30:39.460 --> 00:30:40.990\nIt makes a little more sense than saying,\n\n625\n00:30:40.990 --> 00:30:44.010\nI want the IT auditors to be\nin the Help Desk world, right?\n\n626\n00:30:44.010 --> 00:30:46.840\nSo you need to think about how you're\ngonna use the permissions to figure out\n\n627\n00:30:46.840 --> 00:30:50.820\nhow you want to name it, but just note,\nyou can reuse these over and over again so\n\n628\n00:30:50.820 --> 00:30:54.810\ntry and keep the names at least generic\nenough to allow for that to make sense.\n\n629\n00:30:54.810 --> 00:30:58.050\nNow once that's done,\nI can come down here and just hit OK,\n\n630\n00:30:58.050 --> 00:31:01.240\nand when I hit OK,\nit's going to assign those permissions,\n\n631\n00:31:01.240 --> 00:31:04.860\nthey show up right here and\nthese are now Global Permissions.\n\n632\n00:31:04.860 --> 00:31:09.100\nSo, if I were to log in as Wes, he would\nhave read only access to the entire\n\n633\n00:31:09.100 --> 00:31:12.950\nenvironment and he'd be able to create\nalarms if he ever spotted a problem, and\n\n634\n00:31:12.950 --> 00:31:15.840\nnow the VM were admins could go in and\nfix it, right?\n\n635\n00:31:15.840 --> 00:31:17.200\nThat's the permission he's given.\n\n636\n00:31:17.200 --> 00:31:18.610\nAnd if I log in,\n\n637\n00:31:18.610 --> 00:31:22.930\nI would be an administrator\nover every object in V Center.\n\n638\n00:31:22.930 --> 00:31:28.710\nWe applied this up here, the global level,\nso this applies everywhere.\n\n639\n00:31:28.710 --> 00:31:30.540\nAnd that's not always what we want.\n\n640\n00:31:30.540 --> 00:31:32.400\nThat's what leads in the next\nthing I wanna talk about.\n\n641\n00:31:32.400 --> 00:31:33.540\nWe'll have to do it in the next episode.\n\n642\n00:31:33.540 --> 00:31:36.180\nWhich is assigning permissions\nmore specifically.\n\n643\n00:31:36.180 --> 00:31:37.880\nMore like granular permissions.\n\n644\n00:31:37.880 --> 00:31:39.500\nSo we'll get a chance to see that next.\n\n645\n00:31:39.500 --> 00:31:42.270\n>> Well Don, we appreciate the information\non roll based access control.\n\n646\n00:31:42.270 --> 00:31:46.498\nAnd we know we got more, but Wes the time\nclock watcher other than Wes the user.\n\n647\n00:31:46.498 --> 00:31:48.460\n>> [LAUGH]\n>> Definitely says that we gotta wrap\n\n648\n00:31:48.460 --> 00:31:48.982\nthis one up.\n\n649\n00:31:48.982 --> 00:31:51.320\nBut before we do,\nyou got any parting words?\n\n650\n00:31:51.320 --> 00:31:53.170\n>> Main thing here is know\nthat it's really easy to\n\n651\n00:31:53.170 --> 00:31:54.270\nchange this stuff after the facts.\n\n652\n00:31:54.270 --> 00:31:57.000\nSo if you make a mistake, it's easy\nenough to go in there and clean it up.\n\n653\n00:31:57.000 --> 00:31:59.970\nBut it is just different\nthan what we're used to.\n\n654\n00:31:59.970 --> 00:32:03.360\nSo remember that the groups don't\nactually go in to the role,\n\n655\n00:32:03.360 --> 00:32:06.460\nthe groups get assigned a role\nat the time of permissions.\n\n656\n00:32:06.460 --> 00:32:08.610\nJust a slightly different\nway of doing things, and\n\n657\n00:32:08.610 --> 00:32:09.880\nit can kind of throw you for a loop.\n\n658\n00:32:09.880 --> 00:32:13.020\nOn the exam, its not uncommon to\nget a practical question where they\n\n659\n00:32:13.020 --> 00:32:15.450\ngive you the UI and\nyou actually have to set this up.\n\n660\n00:32:15.450 --> 00:32:18.328\nSo don't go editing the group,\ntry to add role to it, or\n\n661\n00:32:18.328 --> 00:32:20.552\nediting the role try to\nadd the group to it.\n\n662\n00:32:20.552 --> 00:32:22.795\nYou go to the object you\nwanna get permissions and\n\n663\n00:32:22.795 --> 00:32:24.790\nthat's were your time together.\n\n664\n00:32:24.790 --> 00:32:27.550\n>> Well Don, as always, we appreciate\nhaving you in the studio's with us and\n\n665\n00:32:27.550 --> 00:32:29.200\nwe appreciate you the viewers for\nwatching.\n\n666\n00:32:29.200 --> 00:32:30.490\nSigning out here at IT Pro-TV.\n\n667\n00:32:30.490 --> 00:32:32.360\nI've been your host, West Brian.\n\n668\n00:32:32.360 --> 00:32:33.718\n>> And I'm Don Pezet\n>> And we'll see you next time.\n\n669\n00:32:33.718 --> 00:32:42.970\n[MUSIC]\n\n",
          "vimeoId": "168556182"
        },
        {
          "description": "In this episode, Wes and Don continue their demonstration on how to setup and configuration role-based access control. They discuss the roles that can be delegated inside of vCenter. They explain permission propagation to help the viewer understand what the results would be when permissions are set at different levels.",
          "length": "1586",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-2-1-2-role_based_access_control_pt2-052516-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-2-1-2-role_based_access_control_pt2-052516-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-2-1-2-role_based_access_control_pt2-052516-1-sm.jpg",
          "title": "Role-Based Access Control Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.674 --> 00:00:12.841\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.780 --> 00:00:16.050\nI'm your host, Wes Bryan, and\n\n4\n00:00:16.050 --> 00:00:19.770\nin today's episode, we're continuing\nthrough our series within VMware.\n\n5\n00:00:19.770 --> 00:00:23.840\nThat's right, we're coming back with some\nmore VMware Certified Professional Version\n\n6\n00:00:23.840 --> 00:00:26.940\n6, and it's a Part 2 on\nrole-based access control.\n\n7\n00:00:26.940 --> 00:00:30.190\nThat's right, we couldn't get Don to\nstop talking in the first part, so\n\n8\n00:00:30.190 --> 00:00:31.650\nif you missed it go check that out.\n\n9\n00:00:31.650 --> 00:00:32.900\nDon, how are you doing today, sir?\n\n10\n00:00:32.900 --> 00:00:35.730\n>> I'm doing great Wes, ready to dive\nback in and finish up permissions.\n\n11\n00:00:35.730 --> 00:00:38.530\nIn the last episode we\nkind of wrapped things up\n\n12\n00:00:38.530 --> 00:00:41.530\nwith me assigning some\npermissions at the global level.\n\n13\n00:00:41.530 --> 00:00:45.470\nWhich meant throughout my entire vSphere\nenvironment, and that may be what you\n\n14\n00:00:45.470 --> 00:00:49.140\nwant, but you may want to be\na little more granular than that.\n\n15\n00:00:49.140 --> 00:00:50.869\nAnd so\nthat's where we're going to pick up today,\n\n16\n00:00:50.869 --> 00:00:52.128\nis being a little bit more specific.\n\n17\n00:00:52.128 --> 00:00:55.270\nSo let's recap where we were at\nthe end of that last episode.\n\n18\n00:00:55.270 --> 00:01:00.760\nI had created a user for Wes and\nI had created a group called Help Desk.\n\n19\n00:01:00.760 --> 00:01:02.230\nAnd I put Wes in that group.\n\n20\n00:01:02.230 --> 00:01:04.380\nAnd so now we have this Help Desk group.\n\n21\n00:01:04.380 --> 00:01:08.320\nAnd I created a custom role,\nwhich I called Help Desk.\n\n22\n00:01:08.320 --> 00:01:13.970\nAnd that role basically gave people\nread-only access to the entire environment\n\n23\n00:01:13.970 --> 00:01:16.100\nand allowed them to create alarms.\n\n24\n00:01:16.100 --> 00:01:17.691\nSo you could spot a problem and\ncreate an alarm, but\n\n25\n00:01:17.691 --> 00:01:18.844\nyou couldn't do anything about it.\n\n26\n00:01:18.844 --> 00:01:22.395\nYou couldn't clear alarms, you couldn't\nshut down servers or power them on,\n\n27\n00:01:22.395 --> 00:01:24.995\nthat's all that you could do\nwas create an alarm, right?\n\n28\n00:01:24.995 --> 00:01:28.019\nThis is kinda the thing you might\nwant a help desk employee to have.\n\n29\n00:01:28.019 --> 00:01:31.242\nThen we assigned some permissions,\nand when I did it,\n\n30\n00:01:31.242 --> 00:01:34.908\nI did it at the global level, so\nwe kinda created it globally.\n\n31\n00:01:34.908 --> 00:01:37.640\nAnd I kinda wrapped up\nthe episode mentioning how I had\n\n32\n00:01:37.640 --> 00:01:40.720\nnamed the role based on a job function.\n\n33\n00:01:40.720 --> 00:01:45.270\nBut it may make more sense to name\nit based on what it does as opposed\n\n34\n00:01:45.270 --> 00:01:46.110\nto a job function.\n\n35\n00:01:46.110 --> 00:01:49.020\nSo I might wanna go back and\nrename that or whatever.\n\n36\n00:01:49.020 --> 00:01:52.160\nAnd renaming a group is really easy.\n\n37\n00:01:52.160 --> 00:01:54.730\nVMware doesn't actually care\nwhat the name of the group is,\n\n38\n00:01:54.730 --> 00:01:56.910\nthey use an identifier\non the back end anyway.\n\n39\n00:01:56.910 --> 00:01:59.140\nSo let's say that I wanted to\nchange that a little bit and\n\n40\n00:01:59.140 --> 00:02:01.610\nmake it where the Help Desk\ncould read anything.\n\n41\n00:02:01.610 --> 00:02:04.870\nBut I might have another group like\nIT Auditors that I also wanna have that\n\n42\n00:02:04.870 --> 00:02:05.560\nsame permission.\n\n43\n00:02:05.560 --> 00:02:07.560\nSo I'm trying to make it\nmake a little more sense.\n\n44\n00:02:07.560 --> 00:02:10.420\nSo let's go and\nrename that role that I made.\n\n45\n00:02:10.420 --> 00:02:14.070\nNow when I go in here,\nI've got my Users and Groups.\n\n46\n00:02:14.070 --> 00:02:16.660\nAnd the group that we were\nworking with was Help Desk.\n\n47\n00:02:16.660 --> 00:02:19.140\nBut maybe I got another one\ncalled IT Auditors, right?\n\n48\n00:02:19.140 --> 00:02:22.870\nSo I'm just gonna come in here and\ncreate a group, IT Auditors.\n\n49\n00:02:22.870 --> 00:02:25.835\nAnd the IT Auditors come in once a year\nand they audit all my systems, or\n\n50\n00:02:25.835 --> 00:02:26.953\ntwice a year or whatever.\n\n51\n00:02:26.953 --> 00:02:30.150\nAnd I want them to have that\nsame type of permission.\n\n52\n00:02:30.150 --> 00:02:32.650\nThey should be able to read everything and\ncreate alarms.\n\n53\n00:02:32.650 --> 00:02:35.690\nThey're just auditing so they don't\nneed to change things, so that's it.\n\n54\n00:02:35.690 --> 00:02:39.410\nWell, when I created that role,\nif I go back up to Roles.\n\n55\n00:02:39.410 --> 00:02:42.410\nAnd if you're coming from the home screen,\nyou go to the home screen >\n\n56\n00:02:42.410 --> 00:02:46.990\nAdministration, and then it's right here\nunder Access Control, we've got Roles.\n\n57\n00:02:46.990 --> 00:02:50.250\nAnd so under Roles, I can find that\nHelp Desk role that I made right here,\n\n58\n00:02:50.250 --> 00:02:51.710\nand I'm gonna edit that.\n\n59\n00:02:51.710 --> 00:02:53.620\nAnd I'm just gonna change its name.\n\n60\n00:02:53.620 --> 00:03:00.720\nSo I'm gonna call it Read only and\nCreate Alarms.\n\n61\n00:03:02.030 --> 00:03:05.310\nRight, so this is just\na modification of the read-only\n\n62\n00:03:05.310 --> 00:03:06.550\npermission that we've already got.\n\n63\n00:03:06.550 --> 00:03:08.110\nThis is the one that we made, and\n\n64\n00:03:08.110 --> 00:03:11.100\nif I click on it,\nI'll see that summary of privileges.\n\n65\n00:03:11.100 --> 00:03:13.830\nAnd we can see where it's got that\ncreate alarm privilege right there,\n\n66\n00:03:13.830 --> 00:03:14.940\nthat's what I want.\n\n67\n00:03:14.940 --> 00:03:20.150\nAnd I want Help Desk and IT Auditors\nto have that for the whole environment.\n\n68\n00:03:20.150 --> 00:03:22.827\nWell, we did that at the global level.\n\n69\n00:03:22.827 --> 00:03:25.767\nSo what I did is over\nhere on the left side,\n\n70\n00:03:25.767 --> 00:03:29.139\nI went to Global Permissions,\nand we added it.\n\n71\n00:03:29.139 --> 00:03:32.970\nSo I can see Help Desk right here and now\nnotice it's still showing the old name.\n\n72\n00:03:32.970 --> 00:03:35.470\nIt hasn't refreshed yet, it takes\nit a little bit of time to refresh.\n\n73\n00:03:35.470 --> 00:03:37.280\nActually, it might not\neven be done creating it.\n\n74\n00:03:37.280 --> 00:03:43.618\nIf I look down at my recent tasks,\nit's actually not showing up in there yet.\n\n75\n00:03:43.618 --> 00:03:47.125\nSo it's probably, well,\nactually, it should be done.\n\n76\n00:03:47.125 --> 00:03:50.670\nLet me just go make sure I actually hit\nOK, I might have hit Cancel by accident.\n\n77\n00:03:50.670 --> 00:03:52.860\nIt wouldn't be the first time\nthat I've done that one, right?\n\n78\n00:03:52.860 --> 00:03:55.070\nIt's always a good idea\nof verify your work.\n\n79\n00:03:55.070 --> 00:03:58.850\nSo I'm just gonna make sure that\nI actually do have a group called\n\n80\n00:03:58.850 --> 00:04:01.870\nIT Auditors, which I do, it's right there.\n\n81\n00:04:01.870 --> 00:04:05.693\nAnd I'm gonna make sure that I've got\nthat role that's now called Read only\n\n82\n00:04:05.693 --> 00:04:07.432\nCreate Alarms, and it is, okay.\n\n83\n00:04:07.432 --> 00:04:11.332\nI'm gonna hit my Refresh button up top,\njust to make sure that it refreshes my\n\n84\n00:04:11.332 --> 00:04:14.940\nscreen so that I've got the latest\ndata and so that I can verify things.\n\n85\n00:04:14.940 --> 00:04:19.297\nAll right, now when I go back to my global\npermissions, I can come in here and,\n\n86\n00:04:19.297 --> 00:04:20.823\nit still hasn't updated.\n\n87\n00:04:20.823 --> 00:04:22.450\nWell, we'll manually update it.\n\n88\n00:04:22.450 --> 00:04:23.870\nI'm gonna go ahead and edit this one.\n\n89\n00:04:23.870 --> 00:04:28.180\nI don't want Help Desk to be in a role\ncalled Help Desk, I've renamed that role.\n\n90\n00:04:28.180 --> 00:04:31.340\nOn the back end it's using a numerical\nidentifier, and so it knows,\n\n91\n00:04:31.340 --> 00:04:34.640\nit is actually working, I'm just impatient\nand don't want to wait for it to refresh.\n\n92\n00:04:34.640 --> 00:04:37.976\nI guess I can do a manual refresh,\nand there we go, all right,\n\n93\n00:04:37.976 --> 00:04:39.360\nwell that saved some time.\n\n94\n00:04:39.360 --> 00:04:42.100\nSo I hit that Refresh button again,\nand now we've got it,\n\n95\n00:04:42.100 --> 00:04:47.810\nHelp Desk is in the Read only and\nCreate Alarms role, all right?\n\n96\n00:04:47.810 --> 00:04:50.143\nI wanna add IT Auditors\nto be the same thing.\n\n97\n00:04:50.143 --> 00:04:53.190\nI want IT Auditors to have a read-only for\nmy whole environment and\n\n98\n00:04:53.190 --> 00:04:54.380\nbe able to create alarms.\n\n99\n00:04:54.380 --> 00:04:55.650\nAnd so\nI'm gonna hit the little Add button.\n\n100\n00:04:55.650 --> 00:04:57.360\nAnd when I go to Add,\n\n101\n00:04:57.360 --> 00:05:01.830\nnow I can punch in the IT Auditors group\nso I'll come in here and find them.\n\n102\n00:05:03.170 --> 00:05:06.880\nAnd they are buried away in\nhere somewhere, there they are.\n\n103\n00:05:06.880 --> 00:05:08.353\nAnd so I'm gonna add IT Auditors.\n\n104\n00:05:08.353 --> 00:05:12.899\nAnd then over here, I'm gonna just make\nsure that I choose that Read only and\n\n105\n00:05:12.899 --> 00:05:16.650\nCreate Alarms, right there,\nso they have the access.\n\n106\n00:05:16.650 --> 00:05:20.620\nNow last time I just went ahead and\nhit OK, but I wanna point something out.\n\n107\n00:05:20.620 --> 00:05:23.640\nI mentioned how permissions propagate.\n\n108\n00:05:23.640 --> 00:05:27.150\nI'm applying this at the global level,\nand so I know\n\n109\n00:05:27.150 --> 00:05:31.150\nthat this is going to apply to everything\nthroughout my entire environment.\n\n110\n00:05:31.150 --> 00:05:34.820\nBut what if I was applying this\nat the data center level or\n\n111\n00:05:34.820 --> 00:05:37.810\non a folder level of hosts?\n\n112\n00:05:37.810 --> 00:05:39.160\nHow do I know what's inside of there?\n\n113\n00:05:39.160 --> 00:05:40.450\nWhat's actually being affected?\n\n114\n00:05:40.450 --> 00:05:43.340\nWell if I know my topology,\nthen I just know it, right?\n\n115\n00:05:43.340 --> 00:05:46.356\nBut if this is a brand new environment,\nif this is your first day on the job and\n\n116\n00:05:46.356 --> 00:05:49.775\nyou're about to modify permissions, you\ndon't know what you're about to affect.\n\n117\n00:05:49.775 --> 00:05:51.537\nAnd so VMware does this nice thing,\n\n118\n00:05:51.537 --> 00:05:55.740\nthey give you a couple of options\nright here to help with that decision.\n\n119\n00:05:55.740 --> 00:06:00.330\nThe first one is, they tell you whether or\nnot you want it to propagate.\n\n120\n00:06:00.330 --> 00:06:01.710\nYou could turn it off.\n\n121\n00:06:01.710 --> 00:06:03.410\nIf I turn off propagation,\n\n122\n00:06:03.410 --> 00:06:07.540\nit will only occur to the object\nthat I'm currently working on.\n\n123\n00:06:07.540 --> 00:06:12.780\nWell, for me I'm working on the global\nlevel, so I'm somewhat limited there.\n\n124\n00:06:12.780 --> 00:06:16.265\nBut if I turn this off,\nit will only apply right there.\n\n125\n00:06:16.265 --> 00:06:18.450\nAnd see how my Propagate\ncolumn just changed to No?\n\n126\n00:06:19.480 --> 00:06:23.090\nAnd if I turn that back on, Propagate's\nback to Yes, so I can see whether or\n\n127\n00:06:23.090 --> 00:06:25.700\nnot I'm propagating out to\neverything underneath it.\n\n128\n00:06:25.700 --> 00:06:28.470\nAnd then right beneath that,\nyou've got View Children, and\n\n129\n00:06:28.470 --> 00:06:30.130\nView Children is really useful.\n\n130\n00:06:30.130 --> 00:06:32.070\nI want to do it here cuz\nI'm at the global level,\n\n131\n00:06:32.070 --> 00:06:34.530\nView Children's gonna show everything,\nright?\n\n132\n00:06:34.530 --> 00:06:37.210\nBut later on when we're\nworking with a data center or\n\n133\n00:06:37.210 --> 00:06:40.740\nwith a particular host, what are these\npermissions gonna trickle down to?\n\n134\n00:06:40.740 --> 00:06:41.950\nWe'll get a chance to see.\n\n135\n00:06:41.950 --> 00:06:44.810\nRight, because you've got\nyour vCenter server and\n\n136\n00:06:44.810 --> 00:06:46.360\nunder that you've got your data center.\n\n137\n00:06:46.360 --> 00:06:48.270\nUnder your data center\nyou've got your hosts.\n\n138\n00:06:48.270 --> 00:06:52.390\nUnder your host,\nyou have your virtual network interfaces,\n\n139\n00:06:52.390 --> 00:06:56.650\nyou have your virtual machines, you've\ngot your storage and your data stores.\n\n140\n00:06:56.650 --> 00:06:58.630\nAll the different things that\nare underneath the host.\n\n141\n00:06:58.630 --> 00:06:59.930\nAnd so when these trickle down,\n\n142\n00:06:59.930 --> 00:07:02.370\nit's trickling down to\na lot of different stuff.\n\n143\n00:07:02.370 --> 00:07:05.970\nAnd when I view children, there's gonna\nbe a lot when I'm at the global level.\n\n144\n00:07:05.970 --> 00:07:08.700\nBut when I take it down a notch and\nstart working at a smaller level,\n\n145\n00:07:08.700 --> 00:07:09.910\nthings become different, right?\n\n146\n00:07:09.910 --> 00:07:12.910\nSo I'm gonna leave that be here and\njust hit OK, so\n\n147\n00:07:12.910 --> 00:07:15.720\nthat these permissions apply\nall the way up at the top.\n\n148\n00:07:15.720 --> 00:07:18.300\nOkay, so there it is,\npermissions are up at the top and\n\n149\n00:07:18.300 --> 00:07:19.827\nnow we're in business, okay?\n\n150\n00:07:19.827 --> 00:07:27.900\nNow, let's say that I've got\nmore than one help desk.\n\n151\n00:07:27.900 --> 00:07:30.569\nAnd let's not say help desk,\nlet's say IT admins,\n\n152\n00:07:30.569 --> 00:07:33.520\nlet's build an infrastructure\nhere based on IT admins.\n\n153\n00:07:33.520 --> 00:07:38.550\nSo maybe my organization has\nmore than one data center.\n\n154\n00:07:38.550 --> 00:07:43.270\nI've got a North America and\na European data center.\n\n155\n00:07:43.270 --> 00:07:46.280\nAnd so I wanna create separate IT groups.\n\n156\n00:07:46.280 --> 00:07:50.403\nThere's a North American IT group,\nand there's a European IT group.\n\n157\n00:07:50.403 --> 00:07:54.577\nAnd I want the European IT admins\nto support their servers, and\n\n158\n00:07:54.577 --> 00:07:58.459\nI want the North American\nadmins to modify their servers.\n\n159\n00:07:58.459 --> 00:08:01.732\nBut I don't want the North American\nadmins going and messing with Europe.\n\n160\n00:08:01.732 --> 00:08:04.105\nAnd I don't want the European ones coming\nin and messing with North America,\n\n161\n00:08:04.105 --> 00:08:04.773\nthey're separate.\n\n162\n00:08:04.773 --> 00:08:08.052\nThere are certain permissions I\nmight want to give everywhere but\n\n163\n00:08:08.052 --> 00:08:11.950\nthere's other permissions that I want\nto be specific to the data centers.\n\n164\n00:08:11.950 --> 00:08:13.650\nAlright, so\nnow we're getting a little more granular.\n\n165\n00:08:13.650 --> 00:08:15.465\nIt's not Global anymore.\n\n166\n00:08:15.465 --> 00:08:16.525\nAll right?\nSo\n\n167\n00:08:16.525 --> 00:08:19.145\nfirst off I'm going to need to\ncreate the groups to do this.\n\n168\n00:08:19.145 --> 00:08:20.945\nAnd then we can start to\napply those permissions.\n\n169\n00:08:20.945 --> 00:08:25.355\nSo I'm going to go back to my groups,\nand I'm gonna create three groups.\n\n170\n00:08:25.355 --> 00:08:30.455\nThe first group I'm going to\nmake is going to be IT admins.\n\n171\n00:08:30.455 --> 00:08:32.315\nAll right?\nSo this is going to be IT admins, and\n\n172\n00:08:32.315 --> 00:08:34.550\nit's going to basically account for\n\n173\n00:08:34.550 --> 00:08:37.580\nall of the IT administrators\nin my entire company.\n\n174\n00:08:37.580 --> 00:08:38.580\nRight?\nSo IT Admins.\n\n175\n00:08:39.590 --> 00:08:47.360\nThen I'm gonna create another group\nwhich will be called NA-IT Admins.\n\n176\n00:08:47.360 --> 00:08:51.260\nSo these are gonna be my\nNorth America IT-Admins.\n\n177\n00:08:51.260 --> 00:08:54.780\nThen I'll create another one\nwhich will be EU-IT Admins.\n\n178\n00:08:56.860 --> 00:09:00.790\nThese will be the IT Admins just for\nmy European systems.\n\n179\n00:09:00.790 --> 00:09:01.950\nOkay?\n\n180\n00:09:01.950 --> 00:09:05.000\nI'm gonna go back and modify IT Admins.\n\n181\n00:09:05.000 --> 00:09:09.510\nIT Admins was supposed to have\nall of my administrators in it.\n\n182\n00:09:09.510 --> 00:09:14.090\nWell when I hire a new IT Admin in\nGermany I don't wanna have to add\n\n183\n00:09:14.090 --> 00:09:17.600\nthem to EU IT Admins and IT Admins.\n\n184\n00:09:17.600 --> 00:09:19.200\nI'd like to just do it once.\n\n185\n00:09:19.200 --> 00:09:22.650\nAnd so I can edit IT Admins or\nnot edit it, sorry.\n\n186\n00:09:22.650 --> 00:09:25.370\nI can go down to the group\nmembership of IT Admins.\n\n187\n00:09:25.370 --> 00:09:26.750\nAnd I'm running out of\nscreen real estate so\n\n188\n00:09:26.750 --> 00:09:29.110\nI'm gonna bump some of these\nlittle windows to free some room.\n\n189\n00:09:29.110 --> 00:09:33.260\nI'm gonna just kinda collapse them with\nthe pins and that way we get some more\n\n190\n00:09:33.260 --> 00:09:36.460\nroom on our screen we will be\nable to see this a little better.\n\n191\n00:09:36.460 --> 00:09:37.030\nThere we go.\n\n192\n00:09:38.270 --> 00:09:42.420\nRemember make the user interface work for\nyou, don't work around it.\n\n193\n00:09:42.420 --> 00:09:46.610\nAlright so I got my IT admins and right\ndown here I am going to hit my group I'm\n\n194\n00:09:46.610 --> 00:09:53.050\ngoing to add the EU and\nNorth American admins into it.\n\n195\n00:09:53.050 --> 00:09:56.020\nYou can always sort these things\nalphabetically or by group, and\n\n196\n00:09:56.020 --> 00:09:58.880\nit'll help you find what you're\nlooking for a little faster.\n\n197\n00:09:58.880 --> 00:10:02.530\nThere's the EU admins,\nI'm going to add them.\n\n198\n00:10:02.530 --> 00:10:04.738\nThen I'll find my North American\nadmins and I'll add them.\n\n199\n00:10:04.738 --> 00:10:07.506\nSo now I've got both of those\ngroups listed right here.\n\n200\n00:10:07.506 --> 00:10:09.564\nI'll just hit ok.\n\n201\n00:10:09.564 --> 00:10:12.909\nAnd now when I take a look\nat IT Admins up here,\n\n202\n00:10:12.909 --> 00:10:16.620\nyou'll see I've got EU and North America.\n\n203\n00:10:16.620 --> 00:10:20.980\nSo when I want to assign\na permission to all of my admins,\n\n204\n00:10:20.980 --> 00:10:23.040\nI'll use the IT Admins group.\n\n205\n00:10:23.040 --> 00:10:25.830\nIf I want to assign permissions\nto just North America,\n\n206\n00:10:25.830 --> 00:10:26.770\nI'll use just North America.\n\n207\n00:10:26.770 --> 00:10:29.110\nOr if I want it to be just EU,\nI'll use just EU.\n\n208\n00:10:29.110 --> 00:10:30.600\nBut I've got options.\n\n209\n00:10:30.600 --> 00:10:34.960\nAnd when I hire a new admin I just put\nthem in their appropriate continent and\n\n210\n00:10:34.960 --> 00:10:39.260\nthey'll automatically be in\nthe parent group, nested groups.\n\n211\n00:10:39.260 --> 00:10:44.550\nSo at the global level as on the last\nepisode, I went to administration and\n\n212\n00:10:44.550 --> 00:10:49.240\nglobal permissions and I assigned\npermissions there so I might want my IT\n\n213\n00:10:49.240 --> 00:10:54.770\nadmins to have read only at the parent\nlevel for the whole organization, right.\n\n214\n00:10:54.770 --> 00:10:57.100\nAnd so I'm gonna come in here and\nadd that.\n\n215\n00:10:57.100 --> 00:11:03.150\nI'm not gonna add EU or North America,\nI'm only gonna add IT admins.\n\n216\n00:11:03.150 --> 00:11:04.340\nCuz this is a global setting.\n\n217\n00:11:04.340 --> 00:11:07.940\nThis is something I want to\napply to all of my IT Admins.\n\n218\n00:11:07.940 --> 00:11:09.455\nSo I'm gonna add them.\n\n219\n00:11:09.455 --> 00:11:11.690\nWhoops, I'm gonna try and add them.\n\n220\n00:11:11.690 --> 00:11:13.020\nIf I can get my clicker to click.\n\n221\n00:11:13.020 --> 00:11:14.010\nThere we go.\n\n222\n00:11:14.010 --> 00:11:18.680\nSo I'm adding those admins and\nI'm gonna give them read only access.\n\n223\n00:11:18.680 --> 00:11:20.740\nJust read only and that's it.\n\n224\n00:11:20.740 --> 00:11:25.120\nOr maybe I wanna do the read only and\ncreate alarms that just because I'm\n\n225\n00:11:25.120 --> 00:11:30.360\na North American admin if I spot a problem\nin Europe, should I just ignore it?\n\n226\n00:11:30.360 --> 00:11:32.250\nNo, maybe I want to report it to them.\n\n227\n00:11:32.250 --> 00:11:34.090\nI might want to be able\nto create alarms too, so\n\n228\n00:11:34.090 --> 00:11:36.630\nnow I can report it to the European\nguys and they can go in and fix it.\n\n229\n00:11:36.630 --> 00:11:37.170\nAnd vice versa.\n\n230\n00:11:37.170 --> 00:11:39.520\nMaybe they spot a problem in my system,\nand they can report it to me.\n\n231\n00:11:39.520 --> 00:11:40.890\nAnd I can go in and fix it.\n\n232\n00:11:40.890 --> 00:11:42.700\nSo we'll give them read only and\ncreate alarms.\n\n233\n00:11:42.700 --> 00:11:46.410\nThat's going to be set up and\nit's set to propagate.\n\n234\n00:11:46.410 --> 00:11:51.550\nThis is global so it's gonna trickle down\nthe everything in my entire environment.\n\n235\n00:11:51.550 --> 00:11:52.680\nAll right.\n\n236\n00:11:52.680 --> 00:11:54.900\nNow let's go set up our data centers.\n\n237\n00:11:54.900 --> 00:11:57.670\nOkay, so now I've got that\ncreated at the global level.\n\n238\n00:11:57.670 --> 00:12:01.390\nThe IT admins get read only access\nwith create alarms everywhere.\n\n239\n00:12:02.450 --> 00:12:06.509\nNext, I'm gonna go back to my home and\nI'm gonna go to hosting clusters.\n\n240\n00:12:07.630 --> 00:12:11.350\nAnd inside of host and\nclusters I can see my vCenter server and\n\n241\n00:12:11.350 --> 00:12:14.300\nyou can assign permissions at\nthe vCenter server level if you want,\n\n242\n00:12:14.300 --> 00:12:16.370\nit'll apply to all the data centers.\n\n243\n00:12:16.370 --> 00:12:17.820\nOr I can start to create data centers.\n\n244\n00:12:17.820 --> 00:12:19.830\nYou'll see I've already\ngot a London data center.\n\n245\n00:12:19.830 --> 00:12:23.881\nYou know we might want to change\nit to have a different name or\n\n246\n00:12:23.881 --> 00:12:25.833\nI'll just create new ones.\n\n247\n00:12:25.833 --> 00:12:27.793\nSo I'm gonna create two new data centers.\n\n248\n00:12:27.793 --> 00:12:31.500\nI'll create a data center\ncalled North America.\n\n249\n00:12:34.060 --> 00:12:35.055\nOr actually, I'll do it a different way.\n\n250\n00:12:35.055 --> 00:12:36.943\nI'll create a data center\ncalled North America.\n\n251\n00:12:36.943 --> 00:12:40.740\nMaybe I only have one data center in\nNorth America and that's it okay?\n\n252\n00:12:40.740 --> 00:12:42.980\nSo I'll just create\na North America data center.\n\n253\n00:12:42.980 --> 00:12:46.210\nBut maybe in Europe,\nI've got three data centers.\n\n254\n00:12:46.210 --> 00:12:49.590\nOne in London, one in Germany and\none in France, right?\n\n255\n00:12:49.590 --> 00:12:51.930\nSo I'm going to create more data\ncenters for that, right, so\n\n256\n00:12:51.930 --> 00:12:58.200\nI'll create a data center called Germany\nand a data center called France,\n\n257\n00:12:58.200 --> 00:13:01.040\nright so we've got more than\none data center over there.\n\n258\n00:13:01.040 --> 00:13:03.220\nAnd I want to assign permissions.\n\n259\n00:13:03.220 --> 00:13:05.200\nWell, if I want to assign permissions for\n\n260\n00:13:05.200 --> 00:13:08.990\nthe European IT admins, there's three\ndifferent data centers that I could go to.\n\n261\n00:13:08.990 --> 00:13:11.180\nI'd have to assign\npermissions three times.\n\n262\n00:13:11.180 --> 00:13:13.690\nBut you'll notice that I\ncould also create a folder.\n\n263\n00:13:13.690 --> 00:13:16.800\nSo, I could come in here and\ncreate a folder.\n\n264\n00:13:16.800 --> 00:13:21.030\nAnd when you create a folder,\nI might create a folder called EU.\n\n265\n00:13:21.030 --> 00:13:25.670\nAnd so now I can put all my\nEuropean assets in that folder.\n\n266\n00:13:25.670 --> 00:13:30.530\nAnd I could create another folder\ncalled NA, for North America.\n\n267\n00:13:30.530 --> 00:13:32.470\nAnd I can put my\nNorth American assets there.\n\n268\n00:13:32.470 --> 00:13:36.830\nAnd I can assign permissions to a folder\njust as well as I could assign them to\n\n269\n00:13:36.830 --> 00:13:39.230\na date center like this.\n\n270\n00:13:39.230 --> 00:13:41.930\nNow, if I was in the native client\nit would let me drag and drop.\n\n271\n00:13:41.930 --> 00:13:44.260\nIt won't let me do it in the web client.\n\n272\n00:13:44.260 --> 00:13:45.440\nWell, look at that.\nIsn't that convenient.\n\n273\n00:13:45.440 --> 00:13:49.160\nAlright, so I'm just gonna\ndrag old Germany and London.\n\n274\n00:13:49.160 --> 00:13:53.290\nI'm just gonna drag and\ndrop these guys into that EU folder.\n\n275\n00:13:53.290 --> 00:13:57.000\nAnd I'm doing this, this is something\nyour end-users will never see but\n\n276\n00:13:57.000 --> 00:13:59.170\nI'm doing this to help\nme with my IT admins.\n\n277\n00:13:59.170 --> 00:14:03.980\nAnd you know North America, I should\nhave named it like a city, New York or\n\n278\n00:14:03.980 --> 00:14:05.140\nsomething like that.\n\n279\n00:14:05.140 --> 00:14:08.250\nActually I don't know if it'll let you\nrename this once you've created it.\n\n280\n00:14:08.250 --> 00:14:11.960\nIt's A little finicky about the stuff\nthat you're able to change.\n\n281\n00:14:11.960 --> 00:14:16.940\nI feel like you can't rename it once\nit's made, at least from the UI,\n\n282\n00:14:16.940 --> 00:14:19.140\nso let me just delete that.\n\n283\n00:14:19.140 --> 00:14:20.650\nI'll recreate it.\nSince it's empty.\n\n284\n00:14:20.650 --> 00:14:23.880\nIf it wasn't empty what I would do\nis I would create a new data center\n\n285\n00:14:23.880 --> 00:14:26.570\nwith the name that I wanted and then just\ndrag and drop the resources inside of it.\n\n286\n00:14:26.570 --> 00:14:27.590\nThat'd make it easier.\n\n287\n00:14:27.590 --> 00:14:30.550\nBut I'll create a new data center\nhere inside of North America, and\n\n288\n00:14:30.550 --> 00:14:32.030\nthis one I'll call New York, right?\n\n289\n00:14:32.030 --> 00:14:33.169\nSo this one's gonna be in New York.\n\n290\n00:14:35.823 --> 00:14:38.596\nAll right, so\nnow I've got all these data centers, and\n\n291\n00:14:38.596 --> 00:14:42.254\nthe cool part here is instead of applying\npermissions globally I can apply\n\n292\n00:14:42.254 --> 00:14:46.265\npermissions based on these folders or\nbased on the data center itself.\n\n293\n00:14:46.265 --> 00:14:51.365\nI might create a France IT admins,\nGermany IT admins,\n\n294\n00:14:51.365 --> 00:14:57.145\nLondon IT admins, and\nthen I could put them in the EU IT admins,\n\n295\n00:14:57.145 --> 00:14:59.885\nnesting those groups, and\nstart applying permissions that way too.\n\n296\n00:14:59.885 --> 00:15:02.195\nBut I'm gonna try and keep it just\nto the two that I've got, right?\n\n297\n00:15:02.195 --> 00:15:04.880\nSo I'll take North America here, and\n\n298\n00:15:04.880 --> 00:15:10.550\nwhen you right-click on North America,\nyou'll see where you can add permissions.\n\n299\n00:15:10.550 --> 00:15:13.500\nAnd now I'm adding\npermissions to the folder and\n\n300\n00:15:13.500 --> 00:15:16.640\nnot globally like we saw a moment ago.\n\n301\n00:15:16.640 --> 00:15:20.780\nAnd so\nI want to North American admins to be\n\n302\n00:15:20.780 --> 00:15:23.690\nadministrators on anything\nin the North America folder.\n\n303\n00:15:23.690 --> 00:15:28.138\nSo I'm going to go ahead and add, and\nI'm going to find those North America\n\n304\n00:15:28.138 --> 00:15:32.685\nusers.\n\n305\n00:15:32.685 --> 00:15:39.450\nWhy is it not finding that?\n\n306\n00:15:39.450 --> 00:15:41.745\nSearch is not playing nice here.\n\n307\n00:15:41.745 --> 00:15:45.140\n[LAUGH]\nAll right,\n\n308\n00:15:45.140 --> 00:15:48.900\nwell I tried to use the search to speed\nthings up and end up slowing things down.\n\n309\n00:15:48.900 --> 00:15:50.270\nWould have been faster to navigate down.\n\n310\n00:15:50.270 --> 00:15:52.080\nSo I'm gonna navigate down and\n\n311\n00:15:52.080 --> 00:15:57.700\nfind my North American IT admins and\nYou know what,\n\n312\n00:15:57.700 --> 00:16:00.410\nI'm looking at a domain instead of\nvSphere, I'm looking in the wrong place.\n\n313\n00:16:00.410 --> 00:16:02.135\nSo here I am blaming the search,\nand it's my own fault.\n\n314\n00:16:02.135 --> 00:16:03.932\nRemember you've got this\ndrop-down box up here, and\n\n315\n00:16:03.932 --> 00:16:05.806\nmine was set to look at the local,\nthe Windows accounts,\n\n316\n00:16:05.806 --> 00:16:06.914\nthat's why I couldn't find it.\n\n317\n00:16:06.914 --> 00:16:08.660\nSo I need to switch back to vSphere.\n\n318\n00:16:08.660 --> 00:16:12.400\nAnd so now if I just search For NA,\nthere is my NA IT Admin, right,\n\n319\n00:16:12.400 --> 00:16:13.764\nthat's what I wanted.\n\n320\n00:16:13.764 --> 00:16:17.668\nSo I'm gonna add them, and you might be\ntempted to add the European ones, but\n\n321\n00:16:17.668 --> 00:16:21.610\nI don't need to cuz their permissions\nare trickling down from global.\n\n322\n00:16:21.610 --> 00:16:23.650\nSo I don't need to give\ntheir permissions here.\n\n323\n00:16:23.650 --> 00:16:26.290\nI can just add these guys,\nmy North American guys.\n\n324\n00:16:26.290 --> 00:16:28.250\nAnd I'm gonna make them administrators.\n\n325\n00:16:28.250 --> 00:16:31.890\nNow when I do that, right down here,\nit's set to propagate to children.\n\n326\n00:16:31.890 --> 00:16:38.515\nSo it's going to apply to the NA folder\nand the New York Data Center and\n\n327\n00:16:38.515 --> 00:16:42.265\nanything else that's inside of there,\nit's going to apply.\n\n328\n00:16:42.265 --> 00:16:45.255\nThey're gonna become administrators for\nall of this hierarchy, but\n\n329\n00:16:45.255 --> 00:16:50.180\nnot EU, not France, Germany, or London,\nwhich is a city and not a country.\n\n330\n00:16:50.180 --> 00:16:52.740\nWell actually, I kind of mixed cities and\ncountries at this point anyway, so\n\n331\n00:16:52.740 --> 00:16:53.250\nwhat does it matter?\n\n332\n00:16:53.250 --> 00:16:55.660\nSo anyhow, the permissions\naren't gonna apply over there.\n\n333\n00:16:55.660 --> 00:16:57.420\nThey're just applying down here.\n\n334\n00:16:57.420 --> 00:17:00.257\nSo now I'm isolating those permissions,\nwhich is really what you wanna do.\n\n335\n00:17:00.257 --> 00:17:02.980\nAnd I can go ahead and hit OK.\n\n336\n00:17:02.980 --> 00:17:07.500\nBut if I'm not sure what's going to\nbe affected, I can hit View Children.\n\n337\n00:17:07.500 --> 00:17:10.840\nAnd now it's gonna give me a list,\nwhat all is being affected.\n\n338\n00:17:10.840 --> 00:17:14.480\nAnd I can browse in here, and I can see\nthe Hosts and Clusters, the VMs and\n\n339\n00:17:14.480 --> 00:17:15.880\nTemplates, the Storage, and\n\n340\n00:17:15.880 --> 00:17:18.580\nthe Networking that's all a part\nof what I'm about to affect.\n\n341\n00:17:18.580 --> 00:17:22.323\nAnd so, now I get that big picture,\nI can see what's about to be affected,\n\n342\n00:17:22.323 --> 00:17:25.125\nwho I'm about to actually\ngrant these permissions to.\n\n343\n00:17:25.125 --> 00:17:28.140\nAnd in my case, it's exactly what\nI wanted it, it was North America.\n\n344\n00:17:28.140 --> 00:17:32.490\nAnd now I can go in and\ndo the same thing for Europe.\n\n345\n00:17:32.490 --> 00:17:34.820\nAnd so I can just hit OK on that.\n\n346\n00:17:34.820 --> 00:17:36.980\nAnd I can go to EU and\nrepeat the same process.\n\n347\n00:17:36.980 --> 00:17:38.120\nI'm gonna add a permission.\n\n348\n00:17:39.530 --> 00:17:44.230\nAnd once I go to add the permission,\nI can find my EU users.\n\n349\n00:17:44.230 --> 00:17:45.297\nThere it goes defaulting to Windows again.\n\n350\n00:17:48.641 --> 00:17:51.480\nSo, I'm gonna filter that\ndown to the EU users.\n\n351\n00:17:51.480 --> 00:17:53.030\nWe'll get them added.\n\n352\n00:17:53.030 --> 00:17:55.790\nAnd I'm gonna make them Administrators.\n\n353\n00:17:55.790 --> 00:17:59.500\nAnd I can do View Children on theirs\nto see what's going to be affected.\n\n354\n00:17:59.500 --> 00:18:02.730\nAnd I see France, Germany,\nanything inside of them.\n\n355\n00:18:02.730 --> 00:18:05.840\nSo inside of London, for example,\nI've got that server, and\n\n356\n00:18:05.840 --> 00:18:10.420\ninside of that, I can see the virtual\nmachines that are about to be affected.\n\n357\n00:18:10.420 --> 00:18:13.240\nIf I go to VMs and Templates,\nI could see the VMs here also,\n\n358\n00:18:13.240 --> 00:18:17.240\nthey're gonna show up, right,\nbut not the other items.\n\n359\n00:18:17.240 --> 00:18:19.650\nThe Storage and Networking,\nsame thing, you can drill down, and\n\n360\n00:18:19.650 --> 00:18:24.430\nyou can get an idea of what it\nis that's about to be affected.\n\n361\n00:18:24.430 --> 00:18:28.660\nAnd so that's fine, I'll go ahead and\nhit OK, and that's gonna take effect.\n\n362\n00:18:28.660 --> 00:18:31.940\nAll right, so now, I've got permissions\nassigned, and they trickle down.\n\n363\n00:18:31.940 --> 00:18:36.100\nNow I could get really strict and say you\nknow what, I've got a particular server\n\n364\n00:18:36.100 --> 00:18:39.950\nthat I do not want those\nNorth American admins messing with.\n\n365\n00:18:39.950 --> 00:18:41.910\nAnd so I can go down and\nI can find that server.\n\n366\n00:18:41.910 --> 00:18:44.990\nSo I'm gonna go down under London,\nand I'm gonna find that host.\n\n367\n00:18:44.990 --> 00:18:47.760\nHere's the host, plabesx01.\n\n368\n00:18:47.760 --> 00:18:51.290\nAnd if I pull up its permissions,\nright, so\n\n369\n00:18:51.290 --> 00:18:53.880\nwhen I go to edit the permissions\non this account, and,\n\n370\n00:18:53.880 --> 00:18:58.210\nwait, it's actually a little easier if I\njust take the server and go to Manage.\n\n371\n00:18:58.210 --> 00:19:02.040\nNow we can go to manage\nthe permissions in here, and\n\n372\n00:19:02.040 --> 00:19:06.580\nonce I'm looking at that, I can tweak\nthe permissions right here on the server.\n\n373\n00:19:06.580 --> 00:19:11.462\nBut notice, right here, EU-IT Admins,\nI didn't add permission to this host,\n\n374\n00:19:11.462 --> 00:19:13.768\nit trickled down, right.\n\n375\n00:19:13.768 --> 00:19:14.950\nThat's coming from up above,\n\n376\n00:19:14.950 --> 00:19:19.310\nand so over here, this column\nbecomes really important to find in.\n\n377\n00:19:19.310 --> 00:19:22.842\nWhere did EU- IT Admins get\npermissions to the server?\n\n378\n00:19:22.842 --> 00:19:25.750\nThey got it from the EU folder.\n\n379\n00:19:25.750 --> 00:19:28.184\nNow I know where that permission\ncame from, so if I wanna change it,\n\n380\n00:19:28.184 --> 00:19:29.392\nI go to that folder and change it.\n\n381\n00:19:29.392 --> 00:19:34.700\nOr if I just wanna change it on this\nsystem, I can overwrite it, okay.\n\n382\n00:19:34.700 --> 00:19:38.640\nYou can take a permission like that one,\nI could add new permissions to extend\n\n383\n00:19:38.640 --> 00:19:43.560\npeople, or I could edit and\nchange the role on the permission.\n\n384\n00:19:43.560 --> 00:19:45.220\nAnd see the big warning that I get?\n\n385\n00:19:45.220 --> 00:19:46.170\nThe permission for\n\n386\n00:19:46.170 --> 00:19:51.220\nthe usergroup VSPHERE.LOCAL\\EDU-IT Admins\nis inherited from the object EU.\n\n387\n00:19:51.220 --> 00:19:55.043\nModifying it for this object will create\na new permission for the object and\n\n388\n00:19:55.043 --> 00:19:56.994\nnot change the original permission.\n\n389\n00:19:56.994 --> 00:20:02.960\nIn other words, the original one will\nstill be there, and now I'm adding to it.\n\n390\n00:20:02.960 --> 00:20:06.280\nAnd that's where the no access\npolicy comes in is that we can\n\n391\n00:20:06.280 --> 00:20:09.700\ntake away somebody's access\nwith no access if we want,\n\n392\n00:20:09.700 --> 00:20:12.818\nversus trying to edit here\nwhere we're just adding to it.\n\n393\n00:20:12.818 --> 00:20:15.800\nSo you've gotta be careful about\nhow you assign your permissions and\n\n394\n00:20:15.800 --> 00:20:18.330\nunderstand that they trickle down.\n\n395\n00:20:18.330 --> 00:20:21.455\nAnd if you wanna see what\nthe actual permissions look like,\n\n396\n00:20:21.455 --> 00:20:25.597\nyou just go to the object in question,\ngo to its Manage tab, and Permissions.\n\n397\n00:20:25.597 --> 00:20:29.378\nAnd you'll see what the permissions\nactually look like, and you'll see where\n\n398\n00:20:29.378 --> 00:20:33.980\nI've got a lot of global permissions that\nare here, including IT Admins as a whole.\n\n399\n00:20:33.980 --> 00:20:37.092\nNorth American admins don't show up\nin this list because I never assigned\n\n400\n00:20:37.092 --> 00:20:37.598\nthem to EU.\n\n401\n00:20:37.598 --> 00:20:41.880\nI assigned IT Admins at the global level,\nand that's where these are coming from.\n\n402\n00:20:41.880 --> 00:20:45.240\nSo that defined in column,\nreally important.\n\n403\n00:20:45.240 --> 00:20:47.230\nAll right, now, I could still come in, and\n\n404\n00:20:47.230 --> 00:20:50.118\nI could add in the North American guys,\nright?\n\n405\n00:20:50.118 --> 00:20:54.890\nSo I'm gonna come in here and add those\nguys in, and so we'll come in here and\n\n406\n00:20:54.890 --> 00:20:58.859\nwe'll search for that group,\nwhich will turn up eventually.\n\n407\n00:20:58.859 --> 00:21:04.910\nAnd as soon as I have them,\nwe can add them in.\n\n408\n00:21:04.910 --> 00:21:09.720\nThere we go, add North American admins,\nand we'll say OK to that.\n\n409\n00:21:09.720 --> 00:21:13.070\nSo now I'm gonna add them in, and\nwhen I add them in under the role,\n\n410\n00:21:13.070 --> 00:21:15.690\nI can give them no access, okay.\n\n411\n00:21:15.690 --> 00:21:16.813\nNow no access is kind of special,\n\n412\n00:21:16.813 --> 00:21:18.750\nit's a little bit different\nthan the other privileges.\n\n413\n00:21:18.750 --> 00:21:24.090\nWhen I give them no access,\nthat's taking away their permissions.\n\n414\n00:21:24.090 --> 00:21:27.940\nAnd so now, even though up above,\nthey would have had more access,\n\n415\n00:21:27.940 --> 00:21:30.700\nnow when I assign it,\nthey're gonna lose that access right here.\n\n416\n00:21:30.700 --> 00:21:35.260\nAnd so IT admins for EU,\nthey're administrators.\n\n417\n00:21:35.260 --> 00:21:38.800\nAnd IT admins globally are read only and\ncreate alarms.\n\n418\n00:21:38.800 --> 00:21:40.977\nBut North American IT admins\nare now no access, and\n\n419\n00:21:40.977 --> 00:21:43.871\nit's applied to this object and\neverything inside of this object.\n\n420\n00:21:43.871 --> 00:21:46.450\nSo it even trickles down from here.\n\n421\n00:21:46.450 --> 00:21:50.900\nIf we edit that, whoops,\nif we can actually click edit,\n\n422\n00:21:50.900 --> 00:21:54.450\nthere we go,\nwhen you go to edit it, over here,\n\n423\n00:21:54.450 --> 00:21:57.130\nyou can hit View Children, and\nyou'll see what it applies to.\n\n424\n00:21:57.130 --> 00:21:59.250\nAnd this is a lot more specific\nthan what we saw before.\n\n425\n00:21:59.250 --> 00:22:02.440\nI'm not seeing all those data centers,\nand network, and all that stuff.\n\n426\n00:22:02.440 --> 00:22:06.890\nI'm just seeing virtual machines and\napplication groups that are tied together,\n\n427\n00:22:06.890 --> 00:22:10.260\nthese virtual applications, and\nwhat's actually being affected,\n\n428\n00:22:10.260 --> 00:22:13.420\nall the stuff inside of it, so\nkind of a neat way to handle that.\n\n429\n00:22:14.790 --> 00:22:17.810\nNow that's basically the solid\nrun down on permissions.\n\n430\n00:22:17.810 --> 00:22:20.251\nWe'll see permissions pop up again\na few times as the series runs on.\n\n431\n00:22:20.251 --> 00:22:24.330\nBut these are the main ones that\nwe do need to know for the exam.\n\n432\n00:22:24.330 --> 00:22:30.190\nThere's one more little thing that I wanna\npoint out that, it turns up on the exam.\n\n433\n00:22:30.190 --> 00:22:32.100\nIt's a feature no one ever uses.\n\n434\n00:22:32.100 --> 00:22:36.624\nWell, nobody that I know of, but\nwhen we create users inside of ESX,\n\n435\n00:22:36.624 --> 00:22:40.226\nwe can actually export them\nto a text file if we need to.\n\n436\n00:22:40.226 --> 00:22:42.943\nAnd I know, it sounds weird, we were\ntalking about permissions, and now I'm\n\n437\n00:22:42.943 --> 00:22:45.554\ntalking about exporting text files,\nI just have nowhere else to put this.\n\n438\n00:22:45.554 --> 00:22:49.250\nIt does show up on the exam,\nso I'm gonna mention it here.\n\n439\n00:22:49.250 --> 00:22:53.540\nLet's say that you create\na ton of users in vCenter, and\n\n440\n00:22:53.540 --> 00:22:57.530\nthen one day, you decide that you want to\nmigrate over to Active Directory users.\n\n441\n00:22:57.530 --> 00:23:01.490\nYou might wanna export all your users from\nvCenter, so that you can then take that\n\n442\n00:23:01.490 --> 00:23:03.895\ndata, maybe import it into\nActive Directory or something like that.\n\n443\n00:23:03.895 --> 00:23:06.125\nOr you just wanna run\noff some kind of report.\n\n444\n00:23:06.125 --> 00:23:11.195\nWell you can do that, you can export what\nyou've got, and it will be available for\n\n445\n00:23:11.195 --> 00:23:13.945\nyou to be able to use in other places.\n\n446\n00:23:13.945 --> 00:23:16.120\nSo the way you do that,\n\n447\n00:23:16.120 --> 00:23:18.480\nwell, the first thing you do\nis you get out of this screen.\n\n448\n00:23:18.480 --> 00:23:22.820\nAnd so I'm gonna go back up to Home and\nAdministration, and\n\n449\n00:23:22.820 --> 00:23:28.220\non the Administration screen,\nI'm gonna go to my Users and Groups.\n\n450\n00:23:28.220 --> 00:23:32.680\nAnd earlier, I was in here and I was using\nthe little plus sign to add people and\n\n451\n00:23:32.680 --> 00:23:37.410\nadd them to groups and stuff, but\nif you scroll around on the screen, you'll\n\n452\n00:23:37.410 --> 00:23:41.750\nfind where there's the export button,\nand I'm actually, there it is, sorry.\n\n453\n00:23:41.750 --> 00:23:43.440\nI thought it was being\ncut off by my screen.\n\n454\n00:23:43.440 --> 00:23:45.680\nIt's being cut off by my giant head.\n\n455\n00:23:45.680 --> 00:23:46.300\nHere it is.\n\n456\n00:23:46.300 --> 00:23:50.750\nSo, see how it says I've got 16 items,\nand it has this weird little button here?\n\n457\n00:23:50.750 --> 00:23:52.250\nThat's the export button.\n\n458\n00:23:52.250 --> 00:23:54.875\nAnd so you can highlight users, or\nyou can export the whole thing.\n\n459\n00:23:54.875 --> 00:23:58.590\nAnd it's got a few different\nmodes that it works in.\n\n460\n00:23:58.590 --> 00:24:03.300\nIf I just click the button,\nit's gonna go to export it as a file.\n\n461\n00:24:03.300 --> 00:24:06.890\nAnd so right there, I can export it as a\nfile, and I can save it to my desktop, and\n\n462\n00:24:06.890 --> 00:24:08.300\nit's gonna save that.\n\n463\n00:24:08.300 --> 00:24:13.140\nIf I hit the little drop down arrow\nbeside it, I'll see different options.\n\n464\n00:24:13.140 --> 00:24:17.700\nAnd really, it's just Export All or\nCopy All, right.\n\n465\n00:24:17.700 --> 00:24:18.920\nCuz I didn't select anything.\n\n466\n00:24:18.920 --> 00:24:21.580\nIf I had selected some stuff,\nthe other two would be lit.\n\n467\n00:24:21.580 --> 00:24:23.920\nBut the difference here is\ninstead of copying to a file,\n\n468\n00:24:23.920 --> 00:24:27.300\nit can copy right to your clipboard, and\nthen you can reuse it somewhere else.\n\n469\n00:24:27.300 --> 00:24:32.110\nSo for example, if I Copy All and\nthen I fire up something like Notepad,\n\n470\n00:24:33.520 --> 00:24:36.900\nI can view that,\nas soon as I get into Notepad.\n\n471\n00:24:38.590 --> 00:24:42.630\nAnd in Notepad,\nI can attempt to paste it, there we go.\n\n472\n00:24:42.630 --> 00:24:47.430\nAnd so what you see is Group Name, Domain,\nDescription, Users, vsphere, local.\n\n473\n00:24:47.430 --> 00:24:49.450\nAnd then it starts to list\nout all the user accounts.\n\n474\n00:24:49.450 --> 00:24:50.890\nSo we've got them where\nthey're coming from.\n\n475\n00:24:50.890 --> 00:24:54.190\nIt's not the most incredibly\nuseful thing in the world,\n\n476\n00:24:54.190 --> 00:24:56.620\nwhich is probably what you're thinking\nright now, and I'd agree with you.\n\n477\n00:24:56.620 --> 00:25:00.180\nBut it is possible that it shows up on\nthe exam, so this is literally something\n\n478\n00:25:00.180 --> 00:25:03.870\nI've never once used in production,\nbut it is testable material.\n\n479\n00:25:03.870 --> 00:25:06.430\n>> Don, we appreciate you putting\nthat last little tidbit in there,\n\n480\n00:25:06.430 --> 00:25:09.620\nit's kind of hard to figure out where\nto put some stuff when it's something\n\n481\n00:25:09.620 --> 00:25:11.470\noff the wall like that,\nbut we do appreciate it.\n\n482\n00:25:11.470 --> 00:25:14.800\nAnd it does look we're coming to the end\nof the episode here, but before we do,\n\n483\n00:25:14.800 --> 00:25:18.910\nyou got any last words you might wanna\nsay about role based access control?\n\n484\n00:25:18.910 --> 00:25:20.090\n>> Don't trust your admins.\n\n485\n00:25:20.090 --> 00:25:21.060\nIt would be the main thing.\n\n486\n00:25:21.060 --> 00:25:24.660\nAnd what I mean there is not that you\ncan't trust them to work on your servers,\n\n487\n00:25:24.660 --> 00:25:27.895\nbut don't trust them to\nproperly assign permissions.\n\n488\n00:25:27.895 --> 00:25:30.355\nAlways go through and\naudit your permissions from time to time.\n\n489\n00:25:30.355 --> 00:25:32.895\nJust pick an object at random and\nlook at the permissions and\n\n490\n00:25:32.895 --> 00:25:34.955\nlook at what's been assigned and\nwhere it's coming from.\n\n491\n00:25:34.955 --> 00:25:38.507\nAnd what you'll find is where people don't\nstick to applying permissions as high as\n\n492\n00:25:38.507 --> 00:25:40.320\npossible, sometimes they go really low.\n\n493\n00:25:40.320 --> 00:25:43.629\nOr they assigned permissions to a user\ninstead of a group, and all of a sudden,\n\n494\n00:25:43.629 --> 00:25:46.430\nyou have one user who has access\nthat they shouldn't have.\n\n495\n00:25:46.430 --> 00:25:49.930\nSo you need to audit your permissions and\ndocument your permissions.\n\n496\n00:25:49.930 --> 00:25:51.380\nKeep a record of them.\n\n497\n00:25:51.380 --> 00:25:55.490\nYou can use what's in vCenter,\nthat's fine, but ideally,\n\n498\n00:25:55.490 --> 00:25:58.830\nyou want your own documentations a little\nmore clear, a little easier to understand.\n\n499\n00:25:58.830 --> 00:26:00.550\nEverything's in one place, and you see it.\n\n500\n00:26:00.550 --> 00:26:02.930\nAlso, use change control,\n\n501\n00:26:02.930 --> 00:26:05.810\nwhere somebody has to approve\nmaking a change to permissions.\n\n502\n00:26:05.810 --> 00:26:09.170\nThat way, you ensure you're never granting\naccess to somebody that shouldn't have it.\n\n503\n00:26:09.170 --> 00:26:11.970\n>> Don, thanks for that great advice, and\nthank-you to the viewer for watching.\n\n504\n00:26:11.970 --> 00:26:15.090\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n505\n00:26:15.090 --> 00:26:15.820\n>> And I'm Don Pezet.\n\n506\n00:26:15.820 --> 00:26:16.423\n>> And we'll see you next time.\n\n507\n00:26:16.423 --> 00:26:25.620\n[MUSIC]\n\n",
          "vimeoId": "168555797"
        },
        {
          "description": "In this episode, Wes and Don demonstrate implementing a single sign-on inside of vCenter. They discuss components like the VMware Certificate Authority (vMCA), the Platform Services Controller (PSC) and the role they play inside of a single sign-on infrastructure.",
          "length": "1744",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-2-1-single_sign_on-052616-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-2-1-single_sign_on-052616-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-2-1-single_sign_on-052616-1-sm.jpg",
          "title": "Single Sign-On",
          "transcript": "WEBVTT\n\n1\n00:00:00.022 --> 00:00:10.022\n[MUSIC]\n\n2\n00:00:11.807 --> 00:00:14.573\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.573 --> 00:00:16.118\nI'm your host, Wes Bryan, and\n\n4\n00:00:16.118 --> 00:00:19.970\nin today's episode we're continuing\nthrough our series with VMware.\n\n5\n00:00:19.970 --> 00:00:20.680\nMore specifically,\n\n6\n00:00:20.680 --> 00:00:24.160\nwe're continuing on in the VMware\nCertified Professional version 6.\n\n7\n00:00:24.160 --> 00:00:26.660\nJoining me back in the studio is\nnone other than Mr. Don Pezet.\n\n8\n00:00:26.660 --> 00:00:27.760\nDon, how you doing, sir?\n\n9\n00:00:27.760 --> 00:00:28.700\n>> I'm doing great, Wes.\n\n10\n00:00:28.700 --> 00:00:30.850\nReady to dive right back\ninto the world of vSphere 6.\n\n11\n00:00:30.850 --> 00:00:34.690\nIn this episode, we're gonna be\ntaking a look at single sign-on.\n\n12\n00:00:34.690 --> 00:00:37.986\nAnd it is important that we have a good\nunderstanding of what VMware means when\n\n13\n00:00:37.986 --> 00:00:39.152\nthey say single sign-on,\n\n14\n00:00:39.152 --> 00:00:43.090\nbecause it's a little bit different than\nwhat other people might be thinking.\n\n15\n00:00:43.090 --> 00:00:46.110\nWhen we talk about single sign-on,\nthere's actually two\n\n16\n00:00:46.110 --> 00:00:49.770\ndifferent levels of authentication that\nhappen inside a VMware, inside a vSphere.\n\n17\n00:00:49.770 --> 00:00:54.790\nThere's authentication between\nthe different components in vSphere,\n\n18\n00:00:54.790 --> 00:00:57.950\nand communication between vSphere and\nexternal components.\n\n19\n00:00:57.950 --> 00:01:00.960\nSo, for example,\nwhen I think of single sign-on,\n\n20\n00:01:00.960 --> 00:01:03.910\nI always think of two completely\ndifferent environments.\n\n21\n00:01:03.910 --> 00:01:05.416\nSo, for example, VMware or\n\n22\n00:01:05.416 --> 00:01:08.590\nvSphere on one side and\nMicrosoft Active Directory on another.\n\n23\n00:01:08.590 --> 00:01:12.140\nTwo completely different companies,\ntwo completely different user databases.\n\n24\n00:01:12.140 --> 00:01:13.840\nAnd yet we get them to talk together.\n\n25\n00:01:13.840 --> 00:01:17.540\nNow I have one user account that I\ncan use in both environments, right.\n\n26\n00:01:17.540 --> 00:01:20.392\nTo me that's what I think of\nwhen I think of single sign-on.\n\n27\n00:01:20.392 --> 00:01:24.150\nBut VMware extends that to go a little bit\nbeyond two completely different systems to\n\n28\n00:01:24.150 --> 00:01:26.690\ninclude their own systems.\n\n29\n00:01:26.690 --> 00:01:31.630\nIn other words, if I have two ESXi hosts,\nhow can I make it\n\n30\n00:01:31.630 --> 00:01:35.870\nwhere I have one user account that I can\nlogin to both those ESXi hosts with?\n\n31\n00:01:35.870 --> 00:01:39.060\nOr if I have more than one vCenter server,\nor if I have an entire infrastructure in\n\n32\n00:01:39.060 --> 00:01:43.710\nplace, how do I log into all of my\nVMware components with just one account?\n\n33\n00:01:43.710 --> 00:01:46.760\nAnd that's considered single sign-on also.\n\n34\n00:01:46.760 --> 00:01:50.130\nEven though it's all within\nthe VMware umbrella of products,\n\n35\n00:01:50.130 --> 00:01:51.830\nit's still single sign-on.\n\n36\n00:01:51.830 --> 00:01:56.454\nSo, regardless of whether we integrate\nwith some third party system,\n\n37\n00:01:56.454 --> 00:02:01.634\nwhen you install vSphere 6, you\nare creating a single sign-on environment.\n\n38\n00:02:01.634 --> 00:02:10.140\nSo everybody, 100% of the VMware users\nare using a single sign-on environment.\n\n39\n00:02:10.140 --> 00:02:12.670\nBut it may just be set up automatically\nfor you and you never notice this.\n\n40\n00:02:12.670 --> 00:02:14.790\nSo you ignore it, and\nyou don't even pay attention to the term.\n\n41\n00:02:14.790 --> 00:02:17.150\nUnfortunately, if you're gonna take the\nexam, that's not really an option, right?\n\n42\n00:02:17.150 --> 00:02:18.280\nSo, we do need to know about it, and\n\n43\n00:02:18.280 --> 00:02:20.770\nwe do need to know how to\nintegrate to external hosts.\n\n44\n00:02:20.770 --> 00:02:22.880\nSo before I dive into\nthe external host part though,\n\n45\n00:02:22.880 --> 00:02:25.510\nlet's just talk a little bit\nabout what we have by default.\n\n46\n00:02:25.510 --> 00:02:31.725\nWhen we installed vCenter, in particular,\nif you watched our episode on installing\n\n47\n00:02:31.725 --> 00:02:36.080\nvCenter, you saw that when I went through\nthe installation, there came a part where\n\n48\n00:02:36.080 --> 00:02:39.450\nit asked a couple of questions that\nhad to deal with single sign-on.\n\n49\n00:02:39.450 --> 00:02:42.530\nBut it didn't come right out and\ncall them single sign-on.\n\n50\n00:02:42.530 --> 00:02:46.270\nWhat it was talking about was something\ncalled the Platform Services Controller,\n\n51\n00:02:46.270 --> 00:02:47.710\nthe PSC.\n\n52\n00:02:47.710 --> 00:02:50.608\nWhen you install vCenter,\nthere's really two components.\n\n53\n00:02:50.608 --> 00:02:54.260\nThere's the vCenter server itself\nwhich we use to manage our VMs, and\n\n54\n00:02:54.260 --> 00:02:57.120\nthen there's the PSC,\nthe Platform Services Controller.\n\n55\n00:02:57.120 --> 00:03:01.971\nAnd in that Platform Services Controller,\nare four or five different components,\n\n56\n00:03:01.971 --> 00:03:04.908\nbut the two that we really\ncare about are the VMCA and\n\n57\n00:03:04.908 --> 00:03:08.190\nthe single sign-on functionality,\nall right.\n\n58\n00:03:08.190 --> 00:03:12.168\nSingle sign-on, or SSO, that's just\nsharing a user account, making it where I\n\n59\n00:03:12.168 --> 00:03:15.530\ncan have one user account that\nworks in multiple locations, right.\n\n60\n00:03:15.530 --> 00:03:17.050\nThat's what single sign-on provides.\n\n61\n00:03:17.050 --> 00:03:19.550\nIt provides a way for\ntwo systems to communicate and\n\n62\n00:03:19.550 --> 00:03:21.920\nfigure out if a user account is valid.\n\n63\n00:03:21.920 --> 00:03:27.510\nThe VMCA, that's\nthe Virtual Machine Certificate Authority,\n\n64\n00:03:27.510 --> 00:03:31.150\nit's a certificate service for\nproviding certificates for authentication.\n\n65\n00:03:31.150 --> 00:03:33.390\nNow when we authenticate,\n\n66\n00:03:33.390 --> 00:03:35.540\nwe usually authenticate with\na username and a password, right.\n\n67\n00:03:35.540 --> 00:03:38.500\nThat's probably the most\ncommon way of authenticating.\n\n68\n00:03:38.500 --> 00:03:41.180\nBut we can authenticate\nwith certificates also.\n\n69\n00:03:41.180 --> 00:03:44.795\nSingle sign-on is built around users and\npasswords for the most part.\n\n70\n00:03:44.795 --> 00:03:47.980\nVMCA is what provides\ncertificate services.\n\n71\n00:03:47.980 --> 00:03:51.269\nAnd so for anything that uses\ncertificates, the VMCA gets involved, and\n\n72\n00:03:51.269 --> 00:03:52.444\nthat's a part of the PSC.\n\n73\n00:03:52.444 --> 00:03:54.810\nI'm gonna see how many acronyms\nI can use in this episode.\n\n74\n00:03:54.810 --> 00:03:59.630\nSo, the Platform Services Controller\nis providing single sign-on and\n\n75\n00:03:59.630 --> 00:04:03.630\ncertificate authority services,\nand that really is set up for us.\n\n76\n00:04:03.630 --> 00:04:04.890\nWhen we run through that installer and\n\n77\n00:04:04.890 --> 00:04:10.050\nwe tell it, all we picked was do we\nwant an external PSC or an embedded PSC.\n\n78\n00:04:10.050 --> 00:04:13.782\nEmbedded meant that the PSC would be\ninstalled right on the same box as our\n\n79\n00:04:13.782 --> 00:04:15.450\nvCenter server.\n\n80\n00:04:15.450 --> 00:04:19.502\nAnd external means that I would have\none PSC box and one vCenter box, right,\n\n81\n00:04:19.502 --> 00:04:21.510\ntwo separate machines.\n\n82\n00:04:21.510 --> 00:04:23.780\nThe vCenter box is providing\nall my management,\n\n83\n00:04:23.780 --> 00:04:27.760\nthe PSC box is providing single\nsign-on and a certificate authority.\n\n84\n00:04:27.760 --> 00:04:32.290\nNow, if I have more than one vCenter\nserver, they can all share one PSC.\n\n85\n00:04:32.290 --> 00:04:33.930\nSo now I've got one\ncertificate authority and\n\n86\n00:04:33.930 --> 00:04:36.950\nsingle sign-on box that's\nservicing all of my vCenter boxes.\n\n87\n00:04:36.950 --> 00:04:39.970\nAnd in turn, all the ESX hosts\nthat are attached to it and\n\n88\n00:04:39.970 --> 00:04:42.640\nall the data storage and\nall the other stuff\n\n89\n00:04:42.640 --> 00:04:47.280\nthat's a part of that environment all\ntied into one single sign-on environment.\n\n90\n00:04:47.280 --> 00:04:50.295\nSo that's where we start talking about\nauthenticating between VMware devices,\n\n91\n00:04:50.295 --> 00:04:53.925\nis that I might have a user\naccount in vCenter, but\n\n92\n00:04:53.925 --> 00:04:56.745\nI can log into ESX using\nthat vCenter account.\n\n93\n00:04:56.745 --> 00:05:00.573\nOr I can log into the PSC using the\nvCenter account cuz the vCenter account\n\n94\n00:05:00.573 --> 00:05:02.095\nactually exists in the PSC.\n\n95\n00:05:02.095 --> 00:05:04.925\nSo that's the functionality\nthat we get by default.\n\n96\n00:05:04.925 --> 00:05:08.475\nAnd during the install,\nwe just click Next a bunch of times and\n\n97\n00:05:08.475 --> 00:05:11.215\nit built that infrastructure for\nus, all right?\n\n98\n00:05:11.215 --> 00:05:13.755\nSo if you ever wanna see the components,\nyou can see it in action.\n\n99\n00:05:13.755 --> 00:05:16.086\nIt's kind of spread out in\na few different places.\n\n100\n00:05:16.086 --> 00:05:17.034\nSo let me show you here.\n\n101\n00:05:17.034 --> 00:05:21.432\nI'll take this installation that I've got\nand I do a simple install on this, right?\n\n102\n00:05:21.432 --> 00:05:26.690\nSo it is the vCenter server and\nPSC running on the same box.\n\n103\n00:05:26.690 --> 00:05:28.955\nThis is an embedded installation.\n\n104\n00:05:28.955 --> 00:05:34.675\nAnd we can go into vCenter and if we wanna\nsee things like the certificate authority,\n\n105\n00:05:34.675 --> 00:05:38.265\nright, the CA, the CA is actually\nburied kind of deep into this.\n\n106\n00:05:38.265 --> 00:05:41.055\nIf we go under Administration and\n\n107\n00:05:41.055 --> 00:05:44.230\ninside of Administration we can\ngo down to System Configuration.\n\n108\n00:05:44.230 --> 00:05:47.580\nAnd inside of System Configuration,\nway down here under Deployment,\n\n109\n00:05:48.950 --> 00:05:52.190\nwe can go to Nodes and\nwe'll start to see our nodes, right?\n\n110\n00:05:52.190 --> 00:05:54.870\nAnd so here's my vCenter server.\n\n111\n00:05:54.870 --> 00:06:00.000\nAnd this node, if I had a separate PSC,\nit would show up under here too, right?\n\n112\n00:06:00.000 --> 00:06:03.552\nI did embedded so I just have one box,\nthat's my vCenter server and my PSC.\n\n113\n00:06:03.552 --> 00:06:07.262\nIf I did them separate I'd see both,\nI'd see my vCenter server and\n\n114\n00:06:07.262 --> 00:06:09.240\nthe PSC listed separately.\n\n115\n00:06:09.240 --> 00:06:12.440\nSo for the certificates I'd wanna make\nsure I clicked whichever one had my PSC.\n\n116\n00:06:13.540 --> 00:06:16.700\nAnd once I choose that I can go to Manage,\nand\n\n117\n00:06:16.700 --> 00:06:19.370\nnow you can see the certificate\nauthority right there.\n\n118\n00:06:19.370 --> 00:06:20.400\nAnd so it's gonna load up.\n\n119\n00:06:20.400 --> 00:06:22.980\nNow, a couple of words about this.\n\n120\n00:06:24.300 --> 00:06:25.840\nWhen I pull this up,\n\n121\n00:06:25.840 --> 00:06:28.190\nyou're gonna see where it says\nwe have to verify our password.\n\n122\n00:06:28.190 --> 00:06:29.840\nCertificates are very sensitive.\n\n123\n00:06:29.840 --> 00:06:33.174\nIf somebody compromises our certificate\ndatabase, that's a bad thing, right, and\n\n124\n00:06:33.174 --> 00:06:35.060\nwe'd have to invalidate\nall our certificates.\n\n125\n00:06:35.060 --> 00:06:37.145\nSo in order to work with this\nwe have to verify the password.\n\n126\n00:06:37.145 --> 00:06:42.060\nAnd I don't know if it's a quirk\nwith the user interface,\n\n127\n00:06:42.060 --> 00:06:47.230\nor a bug with the web client or\nwhatever, but it is astronomically slow.\n\n128\n00:06:47.230 --> 00:06:48.700\nIt is really, really slow.\n\n129\n00:06:48.700 --> 00:06:54.400\nSo when I provide my password and\ntell it OK, it's gonna verify my password.\n\n130\n00:06:54.400 --> 00:06:59.170\nAnd if I look down here under my recent\ntask, here we go, starting the task.\n\n131\n00:06:59.170 --> 00:07:02.860\nThis is starting to authenticate\nme against the certificate server.\n\n132\n00:07:02.860 --> 00:07:03.920\nIt will work.\n\n133\n00:07:03.920 --> 00:07:06.190\nIt will get me in, I promise you.\n\n134\n00:07:06.190 --> 00:07:09.520\nBut it takes two minutes sometimes and a\nlot of times the web server will time out.\n\n135\n00:07:09.520 --> 00:07:11.080\nSo you end up having to refresh your page.\n\n136\n00:07:11.080 --> 00:07:15.810\nAnd we've got that Refresh icon,\nright up here at the top,\n\n137\n00:07:15.810 --> 00:07:17.320\nthat we can use refresh to get into it.\n\n138\n00:07:17.320 --> 00:07:20.370\nSo if you're gonna use the Web UI to\ninteract with the certificate authority,\n\n139\n00:07:20.370 --> 00:07:22.100\nyou can, just be ready for it.\n\n140\n00:07:22.100 --> 00:07:25.950\nIt's really slow, and it's been like this\nin every environment I've worked on.\n\n141\n00:07:25.950 --> 00:07:27.780\nNot just this environment\nhere on the show, but\n\n142\n00:07:27.780 --> 00:07:29.470\nin every one I've actually ever touched.\n\n143\n00:07:29.470 --> 00:07:34.020\nSo for me, I don't normally work with\nthe certificate authority via the web UI.\n\n144\n00:07:34.020 --> 00:07:36.530\nI typically use the command\nline interface for it.\n\n145\n00:07:36.530 --> 00:07:39.310\nAnd we're gonna see that\nin the hardening episode.\n\n146\n00:07:39.310 --> 00:07:41.970\nWe'll get into that and I'll show you\nthe command line interface there.\n\n147\n00:07:41.970 --> 00:07:44.860\nBut what I really wanted to show you here\nfor this episode which is just this is\n\n148\n00:07:44.860 --> 00:07:48.660\nthe certificate authority that we've got\nit right here because this is my PSC.\n\n149\n00:07:48.660 --> 00:07:50.704\nAnd so\nit's providing certificate services.\n\n150\n00:07:50.704 --> 00:07:55.999\nAnd every ESXi host that I bring into this\nvCenter deployment will trust the CA,\n\n151\n00:07:55.999 --> 00:08:00.363\nwhich means they'll allow the CA\nto issue certificates to them.\n\n152\n00:08:00.363 --> 00:08:03.350\nAnd now I’ve got trusted certificates\nbetween them, all right.\n\n153\n00:08:03.350 --> 00:08:06.690\nNow we don't normally ever have to do\nanything in here, it just kinda sits here.\n\n154\n00:08:06.690 --> 00:08:12.137\nBut the number one thing that we may\nwant to configure, is instead of having\n\n155\n00:08:12.137 --> 00:08:17.770\nvCenter be a certificate authority,\nwe can make it an issuer, a secondary.\n\n156\n00:08:17.770 --> 00:08:20.799\nIn the world of PKI,\npublic key infrastructure,\n\n157\n00:08:20.799 --> 00:08:24.184\nyou have your root CA, and\nthen you have secondary CAs,\n\n158\n00:08:24.184 --> 00:08:28.120\nthe ones that are are sometimes\ncalled intermediary CA's.\n\n159\n00:08:28.120 --> 00:08:30.970\nThey're the ones that\nare issuing certificates, but\n\n160\n00:08:30.970 --> 00:08:32.870\nthey're not actually the root.\n\n161\n00:08:32.870 --> 00:08:34.770\nWe might all ready have a root.\n\n162\n00:08:34.770 --> 00:08:36.485\nIf I've got a Microsoft Active Directory,\n\n163\n00:08:36.485 --> 00:08:39.560\nI've probably deployed a certificate\nauthorities as a part of that.\n\n164\n00:08:39.560 --> 00:08:42.830\nAnd so if I've all ready got a CA,\nI might want to keep that.\n\n165\n00:08:42.830 --> 00:08:46.266\nAnd so what you can do, is you can go\nin here and you can ditch your own CA,\n\n166\n00:08:46.266 --> 00:08:50.850\nthe one in VMware, and make yourself\nan issuer off of your Microsoft CA.\n\n167\n00:08:50.850 --> 00:08:53.700\nSo now you keep the standard CA\nyou're all ready using through\n\n168\n00:08:53.700 --> 00:08:57.110\nyour entire environment and\nVMware fits into that nicely.\n\n169\n00:08:57.110 --> 00:09:00.580\nThat's not so much single sign-on as\nit is public key infrastructure, but\n\n170\n00:09:00.580 --> 00:09:01.910\nit kinda goes hand in hand, right?\n\n171\n00:09:01.910 --> 00:09:03.550\nIt is a form of authentication and\n\n172\n00:09:03.550 --> 00:09:05.910\nwe can play nice with other\nproviders that are out there.\n\n173\n00:09:05.910 --> 00:09:09.891\nSo that's usually what we would configure\nhere, but if you're kind of watching\n\n174\n00:09:09.891 --> 00:09:14.239\nmy screen you'll see it's still sitting\nthere, still starting to test, still 0%.\n\n175\n00:09:14.239 --> 00:09:19.530\nI promise you it will finish, it literally\ntakes two minutes or more to do this.\n\n176\n00:09:19.530 --> 00:09:22.610\nI kinda feel like it's been more than two\nminutes already so it may have just timed\n\n177\n00:09:22.610 --> 00:09:25.230\nout, but the web service will eventually\ntime out and you refresh and get in.\n\n178\n00:09:25.230 --> 00:09:28.010\nSo, I normally ditch out of this and\ngo the CLI,\n\n179\n00:09:28.010 --> 00:09:29.990\nwe'll see that in the hardening episode.\n\n180\n00:09:29.990 --> 00:09:35.200\nAll right, so, that's one piece of\nthe single sign-on infrastructure.\n\n181\n00:09:35.200 --> 00:09:37.800\nBut that's kind of a minor piece cuz\nwe don't normally have to mess with it.\n\n182\n00:09:37.800 --> 00:09:40.400\nIf you don't have an existing\npublic key infrastructure then\n\n183\n00:09:40.400 --> 00:09:43.750\nyou just ride with what VMware gives\nyou by default and it works fine.\n\n184\n00:09:43.750 --> 00:09:46.730\nIt's great, you get in there and\nyou're done, right?\n\n185\n00:09:46.730 --> 00:09:48.730\nBut the user accounts,\n\n186\n00:09:48.730 --> 00:09:52.280\nthe authentication, that's something\nthat we will have to mess with.\n\n187\n00:09:52.280 --> 00:09:54.298\nAnd so that's another piece\nthat's handled by our PSC.\n\n188\n00:09:54.298 --> 00:09:56.472\nAnd so if I wanna get in and\nwork with that,\n\n189\n00:09:56.472 --> 00:09:59.050\nwe have to go to a different place, okay.\n\n190\n00:09:59.050 --> 00:10:04.230\nAnd what we do is we go back to, I'm just\ngonna jump right back to the home page.\n\n191\n00:10:04.230 --> 00:10:06.830\nAnd under home,\nI'm gonna go to administration, right?\n\n192\n00:10:06.830 --> 00:10:08.220\nSo I'm going to jump\nback to administration.\n\n193\n00:10:09.410 --> 00:10:10.852\nAnd instead of administration,\n\n194\n00:10:10.852 --> 00:10:15.520\nI'm gonna go into our configuration for\nsingle sign-on.\n\n195\n00:10:15.520 --> 00:10:18.965\nSo see how you've got administration, and\nthen right under that we've got single\n\n196\n00:10:18.965 --> 00:10:22.680\nsign-on, and here's the configuration for\nsingle sign-on.\n\n197\n00:10:22.680 --> 00:10:26.780\nNow when we look at that configuration,\nwe're gonna see a few things.\n\n198\n00:10:26.780 --> 00:10:29.800\nThe default thing that pops up\nis the password policy, and\n\n199\n00:10:29.800 --> 00:10:31.610\nI'll talk about those a little bit later.\n\n200\n00:10:31.610 --> 00:10:35.880\nBut where I wanna start is this guy here,\nidentity sources.\n\n201\n00:10:35.880 --> 00:10:41.000\nThese are the places that I've already\ngot single sign-on configured for.\n\n202\n00:10:41.000 --> 00:10:44.660\nSo when I log on with the user account,\nwhere can those user accounts come from?\n\n203\n00:10:44.660 --> 00:10:48.390\nWhen I assign a role to a group,\nwhere can those groups come from?\n\n204\n00:10:48.390 --> 00:10:53.520\nSo these are sources for users and\ngroups and there's two by default.\n\n205\n00:10:53.520 --> 00:10:55.342\nYou’ll have this on any\nvCenter deployment,\n\n206\n00:10:55.342 --> 00:10:56.796\nyou'll always have two by default.\n\n207\n00:10:56.796 --> 00:10:59.415\nThe first one is vsphere.local.\n\n208\n00:10:59.415 --> 00:11:03.330\nWell,during the install if you accepted\nall the defaults then it'll be\n\n209\n00:11:03.330 --> 00:11:04.365\nvsphere.local.\n\n210\n00:11:04.365 --> 00:11:07.308\nBut if you put in your own domain\nname during the install it'll be your\n\n211\n00:11:07.308 --> 00:11:08.440\ndomain name here.\n\n212\n00:11:08.440 --> 00:11:12.925\nSo whatever domain name you attach to\nvCenter, that's what's gonna show up here.\n\n213\n00:11:12.925 --> 00:11:16.020\nAnd that's the main vSphere repository for\n\n214\n00:11:16.020 --> 00:11:17.700\nuser accounts, so\nthat's the one that we normally work with.\n\n215\n00:11:17.700 --> 00:11:21.270\nIt's the one I've been using this whole\nseries so far, is vsphere.local, or\n\n216\n00:11:21.270 --> 00:11:23.100\nwhatever name you gave it.\n\n217\n00:11:23.100 --> 00:11:28.662\nBut after that you'll see another one, and\nnotice the type here, Local OS, all right?\n\n218\n00:11:28.662 --> 00:11:32.810\nThis vCenter server's running on top\nof Windows, and Windows has users and\n\n219\n00:11:32.810 --> 00:11:36.830\ngroups right there on the local machine,\nand that's what this is referring to.\n\n220\n00:11:36.830 --> 00:11:43.860\nSo my server is called PLABVC01 and you'll\nsee that it is a local OS account here,\n\n221\n00:11:43.860 --> 00:11:47.710\nit's a Windows account,\nit's got its own users and passwords.\n\n222\n00:11:47.710 --> 00:11:49.630\nSo we're already set up for that.\n\n223\n00:11:49.630 --> 00:11:55.495\nWe've already got single sign-on between\nvSphere and this instance of Windows.\n\n224\n00:11:55.495 --> 00:11:57.799\nBut where things get really fun\nis when we add external sources,\n\n225\n00:11:57.799 --> 00:11:59.515\nwhen we add other people\nthat we can connect to.\n\n226\n00:11:59.515 --> 00:12:05.155\nAnd when we add external sources,\nnow we can have some real fun, right?\n\n227\n00:12:05.155 --> 00:12:07.363\nNow we can connect to things\nlike the Active Directory and\n\n228\n00:12:07.363 --> 00:12:09.755\nall of our user accounts and\ngroups that we've already got for\n\n229\n00:12:09.755 --> 00:12:11.423\nsupporting Windows will be visible here.\n\n230\n00:12:11.423 --> 00:12:15.085\nAnd that's not the only one,\nyou can add all sorts of different ones.\n\n231\n00:12:15.085 --> 00:12:17.385\nIf I hit the little green plus sign here,\n\n232\n00:12:17.385 --> 00:12:20.070\nwe'll see The different\nones that are supported.\n\n233\n00:12:20.070 --> 00:12:22.190\nNotice that Active Directory\nis listed twice.\n\n234\n00:12:22.190 --> 00:12:25.860\nFirst, it's Active Directory\nIntegrated Windows Authentication.\n\n235\n00:12:25.860 --> 00:12:29.930\nOkay, the second one is\nActive Directory as an LDAP Server.\n\n236\n00:12:29.930 --> 00:12:31.650\nMicrosoft's Active Directory,\n\n237\n00:12:31.650 --> 00:12:35.940\nit technically runs the Lightweight\nDirectory Access Protocol, LDAP.\n\n238\n00:12:35.940 --> 00:12:38.860\nBut Microsoft has kinda messed around\nwith it a bit on the back end.\n\n239\n00:12:38.860 --> 00:12:43.150\nAnd so it's not a perfect implementation\nof LDAP, it's not completely standard,\n\n240\n00:12:43.150 --> 00:12:43.830\nit's compliant.\n\n241\n00:12:43.830 --> 00:12:49.230\nSo we can authenticate against it using\nActive Directory's authentication and\n\n242\n00:12:49.230 --> 00:12:52.450\nproviding usernames and\npasswords for Active Directory\n\n243\n00:12:52.450 --> 00:12:56.740\nin our standard Windows authentication,\nor we can connect via LDAP.\n\n244\n00:12:56.740 --> 00:12:57.840\nAnd what you're gonna notice,\n\n245\n00:12:57.840 --> 00:13:02.810\nthe big difference, is the information\nthat I have to provide down here.\n\n246\n00:13:02.810 --> 00:13:07.400\nIf I do Active Directory, see how the only\nthing I have to provide, technically,\n\n247\n00:13:07.400 --> 00:13:10.120\nis the domain name, and that's it.\n\n248\n00:13:10.120 --> 00:13:12.210\nBut I could also provide\nsome additional data here,\n\n249\n00:13:12.210 --> 00:13:14.500\nlike a user name and\na password to connect.\n\n250\n00:13:14.500 --> 00:13:19.170\nBut when I go with LDAP, true LDAP,\nI have to provide a lot more.\n\n251\n00:13:19.170 --> 00:13:22.780\nI've gotta provide where the user accounts\nare stored, where the groups are stored,\n\n252\n00:13:22.780 --> 00:13:25.270\nthe primary URLs for connecting and so on.\n\n253\n00:13:25.270 --> 00:13:28.610\nBecause the official standard allows for\nthose to change, allows for\n\n254\n00:13:28.610 --> 00:13:30.330\nthose to be different values.\n\n255\n00:13:30.330 --> 00:13:34.310\nMicrosoft has chosen a different value and\nby choosing the integrated one,\n\n256\n00:13:34.310 --> 00:13:36.880\nit's already gonna know those values,\ngonna point right to them.\n\n257\n00:13:36.880 --> 00:13:40.350\nSo we've got two different\nways of getting connected.\n\n258\n00:13:40.350 --> 00:13:44.380\nBut you also have Open LDAP, and Open LDAP\nis really cool because if you have\n\n259\n00:13:44.380 --> 00:13:48.540\nan entire Unix or Linux environment,\nyou can fire up an Open LDAP server.\n\n260\n00:13:48.540 --> 00:13:51.830\nAnd now you can do single sign-on\nwith your Unix boxes and VMware.\n\n261\n00:13:51.830 --> 00:13:56.150\nYou can also do open LDAP against\nthings like Apple's Open Directory,\n\n262\n00:13:56.150 --> 00:14:00.980\nNovell's eDirectory, you can even\ntie it into things like Shibboleth.\n\n263\n00:14:00.980 --> 00:14:04.820\nAnd Shibboleth if you've never worked\nwith that, it's an open source identify\n\n264\n00:14:04.820 --> 00:14:08.860\nmanagement framework that allows you\nto connect to darn near anything.\n\n265\n00:14:08.860 --> 00:14:12.622\nSo once you have Vsphere connected to\nthis, now you can authenticate with\n\n266\n00:14:12.622 --> 00:14:16.200\nstinking Twitter accounts or Facebook, or\nwhatever, you can go nuts with it, right?\n\n267\n00:14:16.200 --> 00:14:18.451\nSo Open LDAP really opens up the door\nto be able to authenticate to\n\n268\n00:14:18.451 --> 00:14:20.000\ndarn near anything.\n\n269\n00:14:20.000 --> 00:14:21.140\nAnd then you got Local OS.\n\n270\n00:14:21.140 --> 00:14:24.110\nNow I don't really need Local OS\nbecause I've already got\n\n271\n00:14:24.110 --> 00:14:26.300\nLocal OS set up in this machine, right?\n\n272\n00:14:26.300 --> 00:14:29.200\nWell what it's referring to\n\n273\n00:14:29.200 --> 00:14:32.530\nare the other machines that I\nmight have inside of vSphere.\n\n274\n00:14:32.530 --> 00:14:35.650\nIf I have my PSC running\non one machine and\n\n275\n00:14:35.650 --> 00:14:41.800\nmy vCenter running on another the local OS\nby default is going to be the PSC's OS.\n\n276\n00:14:41.800 --> 00:14:44.450\nWhat if I wanna use local accounts\nfrom the vCenter server too?\n\n277\n00:14:45.690 --> 00:14:48.220\nI could come in and I could add\nthat as a valid local source and\n\n278\n00:14:48.220 --> 00:14:50.540\nnow I'd be able to authenticate\nagainst those accounts also.\n\n279\n00:14:50.540 --> 00:14:52.850\nSo you have a little bit of\nflexibility how you wanna do that.\n\n280\n00:14:52.850 --> 00:14:55.380\nI don't think I've actually\ndone this in production cuz\n\n281\n00:14:55.380 --> 00:14:56.830\nthere's not really a whole lot of point.\n\n282\n00:14:56.830 --> 00:14:59.491\nWe're normally tying to some kind\nof external directory, right,\n\n283\n00:14:59.491 --> 00:15:01.040\nlike the Microsoft Active Directory.\n\n284\n00:15:02.060 --> 00:15:04.700\nWhich talking about it's one thing,\nseeing it in action is another,\n\n285\n00:15:04.700 --> 00:15:06.440\nlets kinda look at how this works.\n\n286\n00:15:06.440 --> 00:15:09.912\nI'm gonna just cancel out of\nthis one if it'll let me.\n\n287\n00:15:09.912 --> 00:15:15.270\nAnd, my window's kinda trimming off\nthe bottom, I can't see the Cancel button.\n\n288\n00:15:15.270 --> 00:15:17.330\nIt's gonna force me to configure it,\nisn't it?\n\n289\n00:15:17.330 --> 00:15:19.110\nThose mean guys,\nalways making me configure stuff.\n\n290\n00:15:19.110 --> 00:15:19.860\nThere we go, now I can cancel it.\n\n291\n00:15:19.860 --> 00:15:24.150\nAll right, so I'm gonna cancel out of that\nand we've got Local OS already set up.\n\n292\n00:15:24.150 --> 00:15:25.510\nSo, what is Local OS?\n\n293\n00:15:25.510 --> 00:15:30.490\nWell this is a Windows box, and\nin Windows I've got user accounts, right?\n\n294\n00:15:30.490 --> 00:15:34.620\nSo If I go into my Server Manager and\n\n295\n00:15:34.620 --> 00:15:39.270\ninside of my Server Manager I can go\nto tools and computer management.\n\n296\n00:15:40.580 --> 00:15:45.170\nAnd in computer management I can go\nto local users and groups and users.\n\n297\n00:15:45.170 --> 00:15:48.633\nAnd here I see administrator and\nguest and under groups I see,\n\n298\n00:15:48.633 --> 00:15:51.372\nwell, there's a bunch of groups here,\nright?\n\n299\n00:15:51.372 --> 00:15:56.131\nSo I could come in and I can create an\naccount and it would be here in Windows.\n\n300\n00:15:56.131 --> 00:15:59.333\nI could use it for Windows permissions\nall the Windows stuff that I wanna use,\n\n301\n00:15:59.333 --> 00:16:01.316\nI could use it to log in\nto this Windows machine.\n\n302\n00:16:01.316 --> 00:16:02.830\nAnd V center is going to see it,\n\n303\n00:16:02.830 --> 00:16:05.580\nbecause single sign on is\nalready configured, right?\n\n304\n00:16:05.580 --> 00:16:09.450\nSo I'm going to come in and\nI'll add an account, and let's see,\n\n305\n00:16:09.450 --> 00:16:10.760\nwho can we make an account for?\n\n306\n00:16:12.780 --> 00:16:13.760\nLet's go Star Trek today.\n\n307\n00:16:13.760 --> 00:16:19.620\nSo I'm gonna create an account for the B\nCisco and I think I'm spelling that wrong.\n\n308\n00:16:19.620 --> 00:16:22.410\nBenjamin, do you remember\nhow Cisco spelled his name?\n\n309\n00:16:22.410 --> 00:16:22.917\nI think it was like that.\nSo\n\n310\n00:16:22.917 --> 00:16:25.296\nanyhow, we'll do one for Benjamin Cisco.\n\n311\n00:16:25.296 --> 00:16:26.920\nI'm gonna create him an account.\n\n312\n00:16:26.920 --> 00:16:30.030\nAnd he just gonna be a local Windows user,\nright?\n\n313\n00:16:30.030 --> 00:16:32.860\nSo this isn't in nv sphere\nthis is just right here.\n\n314\n00:16:32.860 --> 00:16:36.220\nLocal Windows and\ngetting that one created.\n\n315\n00:16:37.520 --> 00:16:42.749\nAnd maybe I'll create a group\nwhich I'll just call local,\n\n316\n00:16:42.749 --> 00:16:48.035\nnot star ship, but\nI'll call them LocalCaptains.\n\n317\n00:16:48.035 --> 00:16:51.945\nActually, he wasn't a captain, well we\nwon't get into our Star Trek nuances here.\n\n318\n00:16:51.945 --> 00:16:54.645\nWe'll create a group called Star Trek\ncaptains, I'm gonna throw in\n\n319\n00:16:54.645 --> 00:16:59.705\nBenjamin Cisco so let me just get his\naccount pulled up here and we'll find him.\n\n320\n00:17:01.195 --> 00:17:05.930\nOr we just did BCisco for his account,\nshould find that easy enough.\n\n321\n00:17:05.930 --> 00:17:06.687\nThere we go.\n\n322\n00:17:06.687 --> 00:17:08.220\nAnd so\nI'm gonna get him thrown into the group.\n\n323\n00:17:08.220 --> 00:17:09.150\nI'll create that.\n\n324\n00:17:09.150 --> 00:17:11.090\nSo now I've created a local group and\n\n325\n00:17:11.090 --> 00:17:15.970\na local user account right\nhere inside of Windows, right?\n\n326\n00:17:15.970 --> 00:17:17.330\nNot messing with VMWare at all.\n\n327\n00:17:17.330 --> 00:17:21.790\nBut because VMWare is already configured\nfor single sign-on with the local OS,\n\n328\n00:17:21.790 --> 00:17:24.620\nthose will show up and\nI can start using them.\n\n329\n00:17:24.620 --> 00:17:26.300\nSo if I were to jump back here.\n\n330\n00:17:26.300 --> 00:17:27.870\nI'm not gonna see anything different here.\n\n331\n00:17:27.870 --> 00:17:30.470\nAnd in fact, under single sign-on,\nif I go down to users and\n\n332\n00:17:30.470 --> 00:17:33.880\ngroups, I don't see anything\ndifferent here either.\n\n333\n00:17:33.880 --> 00:17:36.650\nI'm looking at users, and\nI don't see Benjamin Cisco.\n\n334\n00:17:36.650 --> 00:17:40.390\nIf I look at groups,\nI don't see my local captains.\n\n335\n00:17:40.390 --> 00:17:42.850\nWell, the reason I'm not seeing\nthem is that by default,\n\n336\n00:17:42.850 --> 00:17:45.940\nwhat you're seeing Is vsphere.local.\n\n337\n00:17:45.940 --> 00:17:46.540\nRight?\n\n338\n00:17:46.540 --> 00:17:49.416\nAnd if I drop that down I\ncan choose PLABVC01 and\n\n339\n00:17:49.416 --> 00:17:53.987\nnow I am seeing the Windows accounts and\nthere is Benjamin Cisco right there.\n\n340\n00:17:53.987 --> 00:17:59.320\nSo VMware without me configuring anything\nalready recognizes those local accounts.\n\n341\n00:17:59.320 --> 00:18:02.990\nThing is,\nwho really uses local Windows accounts?\n\n342\n00:18:02.990 --> 00:18:05.337\nIf this were a server in a DMZ maybe.\n\n343\n00:18:05.337 --> 00:18:06.351\nRight.\nMaybe then we would do it.\n\n344\n00:18:06.351 --> 00:18:08.510\nBecause we don't want to connect\nit back to our active directory.\n\n345\n00:18:08.510 --> 00:18:10.540\nBut if this is any kind\nof internal server.\n\n346\n00:18:10.540 --> 00:18:12.620\nIt's going to be joined\nto an active directory.\n\n347\n00:18:12.620 --> 00:18:13.558\nTo a domain.\n\n348\n00:18:13.558 --> 00:18:15.410\nAnd we want to use domain accounts.\n\n349\n00:18:15.410 --> 00:18:18.040\nLocal accounts only work\non this one server.\n\n350\n00:18:18.040 --> 00:18:20.434\nIf I have 1,000 servers,\nI want it to work on all of them, right?\n\n351\n00:18:20.434 --> 00:18:22.310\nAnd that's where a directory comes in.\n\n352\n00:18:22.310 --> 00:18:25.750\nSo I want to connect this\nto my active directory.\n\n353\n00:18:25.750 --> 00:18:30.120\nAnd now I'll get access to all the various\naccounts that are in the active directory.\n\n354\n00:18:30.120 --> 00:18:33.900\nNow technically this\nmachine is a domain member.\n\n355\n00:18:33.900 --> 00:18:37.601\nSo this Windows machine,\nit's running Windows Server 2012, and\n\n356\n00:18:37.601 --> 00:18:39.087\nit is connected to a domain.\n\n357\n00:18:39.087 --> 00:18:43.090\nAnd it is connected to I believe\nit's called practicelabs.com.\n\n358\n00:18:43.090 --> 00:18:46.160\nSo let me, let's find out here,\nwe'll verify that.\n\n359\n00:18:46.160 --> 00:18:51.300\nSo I'm going to pull up the properties\non this PC and we'll see that yeah,\n\n360\n00:18:51.300 --> 00:18:55.220\nsure enough right here I can see\nthat the computer name is PLABVC01.\n\n361\n00:18:55.220 --> 00:18:58.600\nAnd I'm joined to a domain\ncalled PRACTICELABS.COM.\n\n362\n00:18:58.600 --> 00:19:04.290\nSo my server that vCenter's running on\nis joined to an Active Directory domain,\n\n363\n00:19:04.290 --> 00:19:07.765\nbut single sign on does not set up for\nthe automatically.\n\n364\n00:19:07.765 --> 00:19:09.465\nFor the local accounts it is.\n\n365\n00:19:09.465 --> 00:19:10.425\nFor domain accounts, it's not.\n\n366\n00:19:10.425 --> 00:19:12.825\nEven if you're a domain member, it's not.\n\n367\n00:19:12.825 --> 00:19:14.555\nAnd I know what you might be thinking.\n\n368\n00:19:14.555 --> 00:19:15.885\nWell, what if I'm a domain controller.\n\n369\n00:19:15.885 --> 00:19:18.295\nWell, actually, you're not allowed to\ninstall V Center on a domain controller.\n\n370\n00:19:18.295 --> 00:19:18.895\nWell, I should do it.\n\n371\n00:19:18.895 --> 00:19:20.315\nSo that will never happen.\n\n372\n00:19:20.315 --> 00:19:22.735\nBut on a domain member,\nyou can install it.\n\n373\n00:19:22.735 --> 00:19:24.345\nIt just doesn't set up single sign-on.\n\n374\n00:19:24.345 --> 00:19:26.595\nSo we need to set that up, okay?\n\n375\n00:19:26.595 --> 00:19:28.465\nAnd setting it up is not hard.\n\n376\n00:19:28.465 --> 00:19:30.530\nIf I go back into my client.\n\n377\n00:19:30.530 --> 00:19:34.920\nAnd I go back down to my\nsingle sign on configuration.\n\n378\n00:19:34.920 --> 00:19:36.680\nWe can take a look at our sources, right?\n\n379\n00:19:36.680 --> 00:19:40.550\nSo I've already got the source for\nlocal OS and for the vsphere.local and\n\n380\n00:19:40.550 --> 00:19:42.850\nI can add a new source.\n\n381\n00:19:42.850 --> 00:19:44.574\nI'm gonna choose Active Directory.\n\n382\n00:19:44.574 --> 00:19:48.050\nAll right, and I'll use the integrated\nWindows Authentication because I don't\n\n383\n00:19:48.050 --> 00:19:51.560\nneed to change anything,\nit's the standard Microsoft install.\n\n384\n00:19:51.560 --> 00:19:53.120\nWhat's gonna be different\nthough is right down here.\n\n385\n00:19:53.120 --> 00:19:55.420\nI need to pick who I'm gonna connect as.\n\n386\n00:19:55.420 --> 00:19:57.330\nAnd you got two choices.\n\n387\n00:19:57.330 --> 00:20:00.330\nIf your machine is joined to the domain,\n\n388\n00:20:00.330 --> 00:20:02.420\nyou can just choose to\nuse the machine account.\n\n389\n00:20:02.420 --> 00:20:05.030\nIt'll connect to the active director use\nthe machine account everything will work\n\n390\n00:20:05.030 --> 00:20:07.070\nfine, and that's it.\n\n391\n00:20:07.070 --> 00:20:08.780\nThat's usually the best way to go.\n\n392\n00:20:08.780 --> 00:20:12.140\nMachine accounts are really neat because\ntheir passwords are super complex and\n\n393\n00:20:12.140 --> 00:20:13.920\nthey change very very often.\n\n394\n00:20:13.920 --> 00:20:15.900\nSometimes as often as every six hours, but\n\n395\n00:20:15.900 --> 00:20:18.640\nat a minimum they change according\nto whatever your password policy is.\n\n396\n00:20:18.640 --> 00:20:19.680\nAnd you don't have to worry about it.\n\n397\n00:20:19.680 --> 00:20:22.090\nYou don't even know what your\nmachine account's password is.\n\n398\n00:20:22.090 --> 00:20:23.840\nSo it's kind of like\nan extra level of security,\n\n399\n00:20:23.840 --> 00:20:25.290\nit's handling all of that for you.\n\n400\n00:20:25.290 --> 00:20:27.333\nSo the machine accounts the way to go.\n\n401\n00:20:27.333 --> 00:20:31.304\nIf your vCenter server\nis joined to the domain.\n\n402\n00:20:31.304 --> 00:20:33.747\nBut what if your vCenter server\nis not joined to the domain?\n\n403\n00:20:33.747 --> 00:20:36.969\nWhat if it is a Windows box and\nI just didn't join it to the domain or\n\n404\n00:20:36.969 --> 00:20:40.973\nwhat if I used the vCenter appliance and\nit's running Suse Linux under the hood?\n\n405\n00:20:40.973 --> 00:20:43.280\nIt's not going to be joining\nthe domain there either, right?\n\n406\n00:20:43.280 --> 00:20:48.880\nAnd so in that case, I'm gonna have to use\na dedicated user account and password.\n\n407\n00:20:48.880 --> 00:20:51.380\nAnd so\nhere you specify a server principle name.\n\n408\n00:20:51.380 --> 00:20:55.130\nAn SPN, so what server am I\ngoing to be connecting to?\n\n409\n00:20:55.130 --> 00:20:57.210\nA username and a password.\n\n410\n00:20:57.210 --> 00:21:00.990\nAnd you've gotta provide credentials\nbecause you're not already logged in.\n\n411\n00:21:00.990 --> 00:21:04.030\nBut because I'm a domain member I can\njust choose use a machine account.\n\n412\n00:21:04.030 --> 00:21:07.250\nOtherwise I would put in here some kind\nof account that I use specifically for\n\n413\n00:21:07.250 --> 00:21:08.120\nthis purpose.\n\n414\n00:21:08.120 --> 00:21:09.330\nDon't use a user account.\n\n415\n00:21:09.330 --> 00:21:12.100\nYou will think like, i'll just put my\ncredentials in there it will be fine.\n\n416\n00:21:12.100 --> 00:21:15.990\nIt will, it'll be fine right up until the\npoint where you change you password, and\n\n417\n00:21:15.990 --> 00:21:18.070\nnow you can't log into vCenter anymore,\nright?\n\n418\n00:21:18.070 --> 00:21:19.835\nCuz now it can't see the Active Directory.\n\n419\n00:21:19.835 --> 00:21:23.516\nSo you wanna make sure it's a dedicated\naccount just used for vCenter and\n\n420\n00:21:23.516 --> 00:21:26.230\nthat you manage this\npassword appropriately.\n\n421\n00:21:26.230 --> 00:21:28.410\nYou do need to change\nthe password from time to time,\n\n422\n00:21:28.410 --> 00:21:32.110\nbecause the older the password gets,\nthe more likely it can be brute-forced.\n\n423\n00:21:32.110 --> 00:21:33.690\nAll right, but\nI'll be able to use a machine account, and\n\n424\n00:21:33.690 --> 00:21:35.020\nthat's going to make this super-easy.\n\n425\n00:21:35.020 --> 00:21:38.605\nI mean really, at this point,\nI just need to click okay,\n\n426\n00:21:38.605 --> 00:21:41.766\nif I can get the okay button\nto show up on my screen.\n\n427\n00:21:41.766 --> 00:21:43.388\nYou know the lower your resolution is,\n\n428\n00:21:43.388 --> 00:21:45.630\nthe harder it becomes to\nsee some of these things.\n\n429\n00:21:45.630 --> 00:21:46.640\nThere we go.\n\n430\n00:21:46.640 --> 00:21:49.850\nAnd so I'll just hit the OK button and\nthat's gonna add it in.\n\n431\n00:21:49.850 --> 00:21:54.500\nSo now that it's got it added in I can\nsee that I've got PRACTICELABS.COM,\n\n432\n00:21:54.500 --> 00:21:58.990\nit's an active directory account and\nI'm attached to it.\n\n433\n00:21:58.990 --> 00:22:01.430\nSo now when I start to go to\nwork with user accounts and\n\n434\n00:22:01.430 --> 00:22:05.100\nwork with groups, it'll know in\nthe background, they can reach out and\n\n435\n00:22:05.100 --> 00:22:08.000\ntalk to the active directory and\nsee that system.\n\n436\n00:22:08.000 --> 00:22:11.430\nNow, I don't see it here,\nlet's go over to users and groups.\n\n437\n00:22:11.430 --> 00:22:12.470\nAnd when I go to users and\n\n438\n00:22:12.470 --> 00:22:16.860\ngroups, right now I see vsphere.local,\nthat's my default.\n\n439\n00:22:16.860 --> 00:22:20.200\nIf I drop that down,\nnow I've got PRACTICELABS.COM.\n\n440\n00:22:20.200 --> 00:22:25.100\nAnd I can choose that and look at all\nthe user accounts that just appeared.\n\n441\n00:22:25.100 --> 00:22:27.390\nThese are all my active\ndirectory user accounts.\n\n442\n00:22:27.390 --> 00:22:31.928\nThere's a John Smith, a Jan Riguez,\nElizabeth Scott, Lisa Way something or\n\n443\n00:22:31.928 --> 00:22:32.558\nanother.\n\n444\n00:22:32.558 --> 00:22:37.214\nSo I've got these user accounts turning\nup, these are all in my Active Directory.\n\n445\n00:22:37.214 --> 00:22:40.260\nAnd it's not just user accounts,\nthe groups turn up also.\n\n446\n00:22:40.260 --> 00:22:43.740\nSo now I can use my standard\nActive Directory accounts and\n\n447\n00:22:43.740 --> 00:22:46.200\nI've got single sign-on capabilities.\n\n448\n00:22:46.200 --> 00:22:51.270\nIf I take one of these users,\nlike John, and I put him in a group and\n\n449\n00:22:51.270 --> 00:22:54.650\nassign him the role of\nadministrator inside of the VMware?\n\n450\n00:22:54.650 --> 00:22:56.040\nInside of vCenter.\n\n451\n00:22:56.040 --> 00:23:00.371\nNow he can log into the Vcenter\nwith this domain account.\n\n452\n00:23:00.371 --> 00:23:04.430\nAnd that's really gonna make this\na kind of much easier environment.\n\n453\n00:23:04.430 --> 00:23:08.114\nSo now I've got my standard Windows\naccount that I log into my desktop with,\n\n454\n00:23:08.114 --> 00:23:11.741\nthat I log into my email with and now\nwhen I'm gonna to manage the V center and\n\n455\n00:23:11.741 --> 00:23:13.700\nlog with the same account.\n\n456\n00:23:13.700 --> 00:23:15.710\nI know, what's the big benefit of that?\n\n457\n00:23:15.710 --> 00:23:18.376\nThe biggest benefit is,\nI only have to remember one password.\n\n458\n00:23:18.376 --> 00:23:20.573\nRight, and that's the password for\nmy Windows account and that's it,\n\n459\n00:23:20.573 --> 00:23:22.190\nmy active directory account.\n\n460\n00:23:22.190 --> 00:23:25.630\nThe other thing is, if I ever needed to\nchange my password, I can go change my\n\n461\n00:23:25.630 --> 00:23:30.520\npassword in active directory, and\nnow it's changed in my local computer,\n\n462\n00:23:30.520 --> 00:23:34.730\nit's changed on my email and it's\nchanged in Vcenter when I go to log in.\n\n463\n00:23:34.730 --> 00:23:38.060\nBecause all of them actually exist in\nthe same place in the active directory.\n\n464\n00:23:38.060 --> 00:23:40.660\nI have one username and password.\n\n465\n00:23:40.660 --> 00:23:42.120\nSingle sign on.\n\n466\n00:23:42.120 --> 00:23:45.645\nI sign in with the same account in each of\nthese different places and I don't have to\n\n467\n00:23:45.645 --> 00:23:49.227\nworry about doing all this different types\nof passwords and remembering different\n\n468\n00:23:49.227 --> 00:23:51.884\nplaces to go to reset the password\nwhen I decide to change and so\n\n469\n00:23:51.884 --> 00:23:55.342\non, so it's all kind of in one place,\nthat's the big advantage we have there.\n\n470\n00:23:55.342 --> 00:23:58.140\nBut now I do need to remember when we\nstart assigning permissions, right?\n\n471\n00:23:58.140 --> 00:24:00.721\nSo if I go, let me go back to the home.\n\n472\n00:24:00.721 --> 00:24:02.683\nAnd I'll go into my host and clusters.\n\n473\n00:24:02.683 --> 00:24:05.795\nWhen I start to assign\npermissions to something, so\n\n474\n00:24:05.795 --> 00:24:08.740\nmaybe I take this London data center.\n\n475\n00:24:08.740 --> 00:24:13.920\nIn the London data center, I can go to\nManage it, I can go to the Permissions,\n\n476\n00:24:15.800 --> 00:24:19.310\nright here, and\nI can start to assign permissions.\n\n477\n00:24:19.310 --> 00:24:23.500\nAnd so, when I add some new permissions\nin here, on the left side, I'm seeing\n\n478\n00:24:23.500 --> 00:24:28.020\nusers and groups right, people that I\ncan add in and I can give them a role.\n\n479\n00:24:28.020 --> 00:24:33.150\nMaybe I wanna make my domain admins\nan administrator on the system, right?\n\n480\n00:24:33.150 --> 00:24:35.053\nSo, I can come down here and\nI can hit Add, and\n\n481\n00:24:35.053 --> 00:24:38.618\nnow here's the part I have to remember is\nthat when I'm picking I've gotta remember\n\n482\n00:24:38.618 --> 00:24:40.143\nto choose my source up top, right?\n\n483\n00:24:40.143 --> 00:24:42.588\nAnd it's showing PRACTICELABS.COM.\n\n484\n00:24:42.588 --> 00:24:45.600\nIt's showing that domain because\nthat's the most recent one I added so\n\n485\n00:24:45.600 --> 00:24:48.827\nit's assuming that's the one that I\nwant but I can start to pick and choose.\n\n486\n00:24:48.827 --> 00:24:52.954\nAnd notice, actually it's not showing my\ndomain, that's the local machine, PLABVC01\n\n487\n00:24:52.954 --> 00:24:56.420\ncuz I see Benjamin Sisko right, that's\nmy first hint this is my local machine.\n\n488\n00:24:56.420 --> 00:24:59.300\nSo, this is the Windows local account.\n\n489\n00:24:59.300 --> 00:25:00.769\nAnd so I can add that one in.\n\n490\n00:25:00.769 --> 00:25:02.803\nAnd so I'm adding Benjamin Sisko.\n\n491\n00:25:02.803 --> 00:25:05.610\nI can then switch that to the domain.\n\n492\n00:25:05.610 --> 00:25:09.310\nThe domain was called PRACTICELABS, and\nnow I can add in Elizabeth Scott or\n\n493\n00:25:09.310 --> 00:25:11.480\nadministrator, these are users.\n\n494\n00:25:11.480 --> 00:25:12.690\nI can go down and find the group.\n\n495\n00:25:12.690 --> 00:25:14.800\nI'm gonna find the domain admins group.\n\n496\n00:25:14.800 --> 00:25:17.110\nI say I'm gonna find it,\nit is in here somewhere.\n\n497\n00:25:18.510 --> 00:25:20.586\nDomain admins, right there.\n\n498\n00:25:20.586 --> 00:25:23.230\nI'm gonna add domain administrators, okay?\n\n499\n00:25:23.230 --> 00:25:28.090\nAnd I can go in and\nI can add in something from VSPHERE.LOCAL.\n\n500\n00:25:28.090 --> 00:25:31.020\nSo maybe I wanna add in the administrators\nor some other account that\n\n501\n00:25:31.020 --> 00:25:33.910\nI've created here, I guess I really\nhaven't created any accounts, have I?\n\n502\n00:25:33.910 --> 00:25:36.340\nYeah, so\nthat's gonna limit my utility there, but\n\n503\n00:25:36.340 --> 00:25:38.110\nI'll just add administrator, all right.\n\n504\n00:25:38.110 --> 00:25:42.079\nSo when you look at what I'm doing down\nhere, I'm adding user accounts and\n\n505\n00:25:42.079 --> 00:25:45.168\ngroups from three different\nsources all at the same time.\n\n506\n00:25:45.168 --> 00:25:48.474\nSo, I've gotta remember in my mind when I\nstart assigning permissions to make sure\n\n507\n00:25:48.474 --> 00:25:50.340\nI'm connecting to the right source.\n\n508\n00:25:50.340 --> 00:25:54.480\nAnd when I connect to the right source\nthen I can assign those permissions and\n\n509\n00:25:54.480 --> 00:25:55.840\nassign them how we want.\n\n510\n00:25:55.840 --> 00:25:58.160\nSo I can make Benjamin Sisko\nan administrator,\n\n511\n00:25:58.160 --> 00:25:59.720\nthat's that local Windows account.\n\n512\n00:25:59.720 --> 00:26:03.614\nI can make my VSPHERE administrator\ngroup administrators, and\n\n513\n00:26:03.614 --> 00:26:07.724\nI can make my domain admins\nadministrators, or whatever other role\n\n514\n00:26:07.724 --> 00:26:11.850\nit is I want to assign to them and\nyou can always pick and choose here.\n\n515\n00:26:11.850 --> 00:26:13.900\nWe talked about permissions\nin another episode.\n\n516\n00:26:13.900 --> 00:26:16.980\nBut I'm making these guys\nadministrators at this level, and\n\n517\n00:26:16.980 --> 00:26:20.520\nit's gonna propagate to the children,\nI can say OK to that.\n\n518\n00:26:20.520 --> 00:26:24.720\nAnd now, for any system inside\nof that data center, so for\n\n519\n00:26:24.720 --> 00:26:30.430\nexample PLABESX01, somebody could go and\nlog in to that machine and log in, if they\n\n520\n00:26:30.430 --> 00:26:34.270\nwere a domain admin in Active Directory,\nthey'd be able to log in and access it.\n\n521\n00:26:34.270 --> 00:26:37.400\nSo this really opens things up and\nmakes it a lot easier and\n\n522\n00:26:37.400 --> 00:26:39.600\nalso remember you've got\nyour global permissions.\n\n523\n00:26:39.600 --> 00:26:42.770\nSo I set this up right here on\nthis individual server, but\n\n524\n00:26:42.770 --> 00:26:46.890\nin your global permissions you can set\nit up so that people can connect and\n\n525\n00:26:46.890 --> 00:26:50.070\nthat would be like the whole environment,\nright, not just like a single place.\n\n526\n00:26:50.070 --> 00:26:56.100\nSo if I go to my, I went to Home >\nSystem Configuration > Global Permissions.\n\n527\n00:26:56.100 --> 00:26:59.150\nSo if I wanna make all of\nmy Active Directory admins\n\n528\n00:26:59.150 --> 00:27:03.570\ninside of my entire vSphere environment,\nI can do it right here.\n\n529\n00:27:03.570 --> 00:27:05.410\nAnd I'll just go right back in and\nadd them.\n\n530\n00:27:06.880 --> 00:27:09.190\nIn a small shop you might do this,\nin a big shop you probably wouldn't.\n\n531\n00:27:09.190 --> 00:27:11.550\nIn a big shop, you'd probably have\nan Active Directory group for\n\n532\n00:27:11.550 --> 00:27:14.240\nyour VMware admins and they are the ones\nthat you'd wanna make in here,\n\n533\n00:27:14.240 --> 00:27:15.920\nnot necessarily your domain admins.\n\n534\n00:27:15.920 --> 00:27:18.650\nBut I'm doing domain admins\nbecause they already exist,\n\n535\n00:27:18.650 --> 00:27:19.940\nmakes it a little easier for me.\n\n536\n00:27:21.640 --> 00:27:23.990\nSo I'm gonna come in here and\nfind my domain admins.\n\n537\n00:27:25.840 --> 00:27:30.362\nAnd now once I add them in,\nI can make them administrators for\n\n538\n00:27:30.362 --> 00:27:35.850\nmy entire VMware, my entire vCenter and\nvSphere environment.\n\n539\n00:27:35.850 --> 00:27:39.084\nAnd that'll propagate to children and\nso now that's deployed.\n\n540\n00:27:39.084 --> 00:27:42.027\nOkay, so the cool part here is that if\nI ever browse the vCenter homepage,\n\n541\n00:27:42.027 --> 00:27:44.019\nI can now log in with my\nActive Directory account,\n\n542\n00:27:44.019 --> 00:27:45.750\nassuming I'm a domain admin, all right.\n\n543\n00:27:45.750 --> 00:27:50.136\nNow there's a few other things that we'll\nneed to see as a part of that, but for\n\n544\n00:27:50.136 --> 00:27:52.410\nthe most part, that's setting up SSO.\n\n545\n00:27:52.410 --> 00:27:53.795\nWe're now connected to\nthe Active Directory.\n\n546\n00:27:53.795 --> 00:27:55.025\nThat was pretty easy.\n\n547\n00:27:55.025 --> 00:27:57.198\nA lot of people hear about SSO and\nthey start to panic like,\n\n548\n00:27:57.198 --> 00:28:00.515\nI don't wanna set up federated services\nand all this other stuff, and I'll agree,\n\n549\n00:28:00.515 --> 00:28:02.775\nfederated services is\na stinking nightmare.\n\n550\n00:28:02.775 --> 00:28:03.645\nThis was easy.\n\n551\n00:28:03.645 --> 00:28:07.590\nI just had to hit a radio button and\na check box and I'm done.\n\n552\n00:28:07.590 --> 00:28:08.720\nIt's pretty simple.\n\n553\n00:28:08.720 --> 00:28:12.611\nSo getting this set up is something\nthat the majority of people deploying\n\n554\n00:28:12.611 --> 00:28:13.325\nvCenter do.\n\n555\n00:28:13.325 --> 00:28:16.140\nIt just makes it so much easier to\nhave less accounts to worry about.\n\n556\n00:28:16.140 --> 00:28:18.342\n>> Don, we thank you for\nshowing us this information here.\n\n557\n00:28:18.342 --> 00:28:21.014\nIt does look like we're coming to\nthe end of another episode, but\n\n558\n00:28:21.014 --> 00:28:24.350\nbefore we call it a day here,\ndo you have any additional information?\n\n559\n00:28:24.350 --> 00:28:26.510\n>> I do have a bit that\nI wanna talk about.\n\n560\n00:28:26.510 --> 00:28:29.350\nI know I wanna talk about\npassword policies a bit, and\n\n561\n00:28:29.350 --> 00:28:32.220\nI wanna talk about how this impacts\nthings like upgrades and stuff.\n\n562\n00:28:32.220 --> 00:28:35.980\nSo maybe we'll do a part two on SSOs so\nI can just wrap up those odds and ends.\n\n563\n00:28:35.980 --> 00:28:39.370\nWhat we saw here, really, was all you\nneeded to know to get SSO deployed, but\n\n564\n00:28:39.370 --> 00:28:41.160\non the exam they want you\nto know a little bit more,\n\n565\n00:28:41.160 --> 00:28:44.130\nso I do need to cover some odds and ends\nto make sure that we're exam complete.\n\n566\n00:28:44.130 --> 00:28:46.800\nSo definitely check out episode two,\nor part two.\n\n567\n00:28:46.800 --> 00:28:49.940\n>> All right, Don, we appreciate you, and\nwe appreciate you the viewer watching.\n\n568\n00:28:49.940 --> 00:28:52.820\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n569\n00:28:52.820 --> 00:28:53.640\n>> And I'm Don Pezet.\n\n570\n00:28:53.640 --> 00:28:55.559\n>> And we'll see you next time.\n\n571\n00:28:55.559 --> 00:29:03.770\n[MUSIC]\n\n",
          "vimeoId": "168555781"
        },
        {
          "description": "In this episode, Wes and Don continue their discussion on implementing a single sign-on. They explain using single sign-on policies to control or limit user access. They look at the considerations that need to be taken into account with upgrades when using a single sign-on. They demonstrate how to join ESXi hosts to a Microsoft Active Directory domain.",
          "length": "1819",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-2-2-single_sign_on_pt2-052616-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-2-2-single_sign_on_pt2-052616-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-2-2-single_sign_on_pt2-052616-1-sm.jpg",
          "title": "Single Sign-On Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.782 --> 00:00:14.511\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.511 --> 00:00:15.896\nI'm your host Wes Bryan and\n\n4\n00:00:15.896 --> 00:00:19.610\nin today's episode we're continuing\nthrough our series in VMware.\n\n5\n00:00:19.610 --> 00:00:20.854\nMore specifically we're\n\n6\n00:00:20.854 --> 00:00:24.300\nfocussing in on the VMWare\nCertified Professional Version 6.\n\n7\n00:00:24.300 --> 00:00:26.110\nWe're coming back at you with a part two.\n\n8\n00:00:26.110 --> 00:00:28.430\nJoining us in the studio is\nnone other than Mr. Don Pezet.\n\n9\n00:00:28.430 --> 00:00:29.510\nDon, how you doing, sir?\n\n10\n00:00:29.510 --> 00:00:30.380\n>> I'm doing great, Wes.\n\n11\n00:00:30.380 --> 00:00:34.299\nWe're gonna dive right back in and\ndo a little exam prep wrap-up for\n\n12\n00:00:34.299 --> 00:00:35.410\nsingle sign-on.\n\n13\n00:00:35.410 --> 00:00:36.550\nIn the last episode,\n\n14\n00:00:36.550 --> 00:00:39.460\nwe got a chance to see how to configure\nsingle sign-on, it's really easy.\n\n15\n00:00:39.460 --> 00:00:42.300\nWe saw how to use it, to assign\npermissions with it and get it in place.\n\n16\n00:00:42.300 --> 00:00:44.404\nAnd so we've kind of seen\neverything we need to know for\n\n17\n00:00:44.404 --> 00:00:46.800\nour practical implementation\nin real life land.\n\n18\n00:00:46.800 --> 00:00:48.490\nBut on the exam they want\nyou to know a few odds and\n\n19\n00:00:48.490 --> 00:00:50.700\nends since that's what we're\ngonna pick up with right here.\n\n20\n00:00:50.700 --> 00:00:53.418\nAnd these are things that you may or\nmay not encounter out in the real world.\n\n21\n00:00:53.418 --> 00:00:56.118\nBut you kind of need to know they\nexist cuz you might actually\n\n22\n00:00:56.118 --> 00:00:57.039\nbe able to use them.\n\n23\n00:00:57.039 --> 00:01:02.505\nAnd the first one that I wanna talk about\nis what if we have multiple vCenter boxes,\n\n24\n00:01:02.505 --> 00:01:03.460\nright?\n\n25\n00:01:03.460 --> 00:01:08.230\nI logged into one vCenter machine and\nI configured that single sign-on, right?\n\n26\n00:01:08.230 --> 00:01:11.900\nI added the practice labs Active Directory\ndomain to it so that it would show up.\n\n27\n00:01:11.900 --> 00:01:13.630\nRight, that's what we\ndid in the last episode.\n\n28\n00:01:13.630 --> 00:01:15.060\nBut what if I have another vCenter box?\n\n29\n00:01:15.060 --> 00:01:17.155\nWhat if I have a multi-site deployment?\n\n30\n00:01:17.155 --> 00:01:20.385\nAnd so I've got vCenter boxes\nin 10 different locations and\n\n31\n00:01:20.385 --> 00:01:23.945\nI wanna have single sign-on\nextend across all of them.\n\n32\n00:01:23.945 --> 00:01:27.105\nWell, it's actually really\neasy to set that up too.\n\n33\n00:01:27.105 --> 00:01:30.782\nBut we have to remember that it's done\nduring the installation of vCenter.\n\n34\n00:01:30.782 --> 00:01:32.482\nWhen you install vCenter,\n\n35\n00:01:32.482 --> 00:01:36.142\nit actually allows you to connect\nto an existing SSO environment.\n\n36\n00:01:36.142 --> 00:01:36.822\nLet me show you that.\n\n37\n00:01:36.822 --> 00:01:40.122\nIf you watched our episode on installing\nvCenter, you probably saw it there but\n\n38\n00:01:40.122 --> 00:01:41.392\nwe'll just kind of recap it here.\n\n39\n00:01:41.392 --> 00:01:43.726\nSo I'm gonna take this server and\n\n40\n00:01:43.726 --> 00:01:45.786\nthis server does not currently\nhave vCenter installed on it.\n\n41\n00:01:45.786 --> 00:01:49.676\nSo I'm gonna launch the installer like\nI'm gonna install vCenter, right?\n\n42\n00:01:49.676 --> 00:01:51.646\nAnd when we go to install it,\n\n43\n00:01:51.646 --> 00:01:53.956\nit's gonna walk us through our\nstandard installation steps.\n\n44\n00:01:53.956 --> 00:01:58.670\nI've got to agree to a license agreement\nand here's where it's asking about whether\n\n45\n00:01:58.670 --> 00:02:03.530\nI have the PSC embedded or\nseparate, right?\n\n46\n00:02:03.530 --> 00:02:06.572\nSo remember the PSC is what's\npowering single sign-on.\n\n47\n00:02:06.572 --> 00:02:10.550\nMy vCenter server doesn't have to run\na PSC, I could connect to an existing one.\n\n48\n00:02:10.550 --> 00:02:13.200\nSo I might have a PSC\nat my headquarters and\n\n49\n00:02:13.200 --> 00:02:17.180\nthen this vCenter box is deployed\nsomewhere else and it's connecting to it.\n\n50\n00:02:17.180 --> 00:02:19.690\nSo if I come down here and\njust choose vCenter Server.\n\n51\n00:02:19.690 --> 00:02:22.990\nI'll have to provide it the details\nof where the PSC is, so\n\n52\n00:02:22.990 --> 00:02:25.040\nit'll be able to connect and use it.\n\n53\n00:02:25.040 --> 00:02:27.950\nIf I go brand new,\nI'll have my own PSC and that's fine too,\n\n54\n00:02:27.950 --> 00:02:32.840\nyou can have your own PSC and\nstill join with the other environment.\n\n55\n00:02:32.840 --> 00:02:35.060\nWhy would I want more than one PSC?\n\n56\n00:02:35.060 --> 00:02:38.330\nWell, what happens if the PSC fails?\n\n57\n00:02:38.330 --> 00:02:41.410\nNow I can't authenticate anymore,\nmy certificates don't work,\n\n58\n00:02:41.410 --> 00:02:42.800\nthat's not good stuff, right?\n\n59\n00:02:42.800 --> 00:02:45.880\nSo we might choose to have more than one\njust to make sure we get redundancy and\n\n60\n00:02:45.880 --> 00:02:47.050\nextra balancing there.\n\n61\n00:02:47.050 --> 00:02:51.130\nIf I have ten different locations, I don't\nwant everybody in one location having to\n\n62\n00:02:51.130 --> 00:02:53.885\nreach across the network to get to a PSC\nsomewhere else if I don't have to.\n\n63\n00:02:53.885 --> 00:02:57.255\nSo I could create multiple PSCs or\nwe could just have one.\n\n64\n00:02:57.255 --> 00:02:59.885\nYou can have just one PSC\nin multiple vCenter boxes,\n\n65\n00:02:59.885 --> 00:03:02.913\nwe normally do that if this is all in the\nsame location, if it's all in one site.\n\n66\n00:03:02.913 --> 00:03:07.727\nAll right now, as we move forward,\nit's gonna ask me for a system name.\n\n67\n00:03:07.727 --> 00:03:10.807\nAnd my DNS isn't registered but\n\n68\n00:03:10.807 --> 00:03:12.837\nI'm gonna ignore that right now cuz\nit's not something I really care about.\n\n69\n00:03:12.837 --> 00:03:15.157\nThis is what I care about,\nis on the next screen.\n\n70\n00:03:15.157 --> 00:03:17.657\nNow I get my vCenter\nSingle Sign On Configuration.\n\n71\n00:03:17.657 --> 00:03:21.647\nSo when we did that install back\nin I don't know, episode two or\n\n72\n00:03:21.647 --> 00:03:22.720\nwhatever it was.\n\n73\n00:03:22.720 --> 00:03:25.135\nI created a new vCenter\nSngle Sign On domain,\n\n74\n00:03:25.135 --> 00:03:27.730\nthat's where vsphere.local was created.\n\n75\n00:03:27.730 --> 00:03:31.810\nI could've changed its name,\nwe could've called it lab.itpro.tv or\n\n76\n00:03:31.810 --> 00:03:32.790\nsomething like that.\n\n77\n00:03:32.790 --> 00:03:35.610\nAnd now it would've had\nthat alternate name,right?\n\n78\n00:03:35.610 --> 00:03:37.410\nBut I left it vsphere.local.\n\n79\n00:03:37.410 --> 00:03:42.530\nBut the other option down here is to\njoin an existing single sign on domain.\n\n80\n00:03:42.530 --> 00:03:46.950\nThat means that I've already got\na PSC somewhere in vCenter setup.\n\n81\n00:03:46.950 --> 00:03:50.540\nAnd it's already got single sign-on\nconfigured, which is kind of the default.\n\n82\n00:03:50.540 --> 00:03:52.700\nAnd I just wanna connect to it,\nI don't wanna start from scratch,\n\n83\n00:03:52.700 --> 00:03:53.700\nI wanna connect it.\n\n84\n00:03:53.700 --> 00:03:58.160\nAnd so here you can specify the fully\nqualified domain name for the PSC.\n\n85\n00:03:58.160 --> 00:04:02.310\nWhere is the Platform Services Controller\nthat I'm gonna connect to?\n\n86\n00:04:02.310 --> 00:04:06.230\nSo this would be if it's an external\nPSC that I wanna connect to and\n\n87\n00:04:06.230 --> 00:04:10.870\nthe HTTPS port, which is usually 443\nunless you changed it during the install.\n\n88\n00:04:10.870 --> 00:04:13.290\nThe username and password to connect.\n\n89\n00:04:13.290 --> 00:04:16.950\nAnd now it's gonna connect and\nwe've got a multi-site deployment.\n\n90\n00:04:16.950 --> 00:04:19.760\nI've got vCenter servers\nin more than one location\n\n91\n00:04:19.760 --> 00:04:21.690\nthat are now sharing a single\nsign-on environment.\n\n92\n00:04:21.690 --> 00:04:26.280\nSo I would have in my case, I would have\nthe practice labs Active Directory domain.\n\n93\n00:04:26.280 --> 00:04:29.800\nBut I would also have the vsphere.local,\n\n94\n00:04:29.800 --> 00:04:33.620\nthat is one vsphere.local shared\nacross each of these vCenter boxes.\n\n95\n00:04:33.620 --> 00:04:36.100\nSo even though it's called .local,\nit's not so local anymore.\n\n96\n00:04:36.100 --> 00:04:38.820\nNow it's spread across each\nof these different machines.\n\n97\n00:04:38.820 --> 00:04:41.750\nAnd then I still have my local\nWindows authentication that occurs,\n\n98\n00:04:41.750 --> 00:04:43.580\nthat's gonna happen here too by default.\n\n99\n00:04:43.580 --> 00:04:45.690\nBut I don't necessarily need that.\n\n100\n00:04:45.690 --> 00:04:49.790\nSo during the install, we have the\nopportunity to set that and change it and\n\n101\n00:04:49.790 --> 00:04:51.615\nthat's the easiest way to\ngo about doing multi-site.\n\n102\n00:04:52.850 --> 00:04:55.440\nAll right, some of the other\nthings that we need to talk about.\n\n103\n00:04:55.440 --> 00:04:58.980\nWe saw a configuring single sign-on,\nthat wasn't such a big deal, so\n\n104\n00:04:58.980 --> 00:05:00.960\nwe got that set up.\n\n105\n00:05:00.960 --> 00:05:04.590\nI do wanna talk about SSO policies,\nsingle sign-on policies.\n\n106\n00:05:04.590 --> 00:05:06.210\nWhen I got it configured\nin the last episode,\n\n107\n00:05:06.210 --> 00:05:09.020\nwe added the Active Directory\nas a single sign-on source.\n\n108\n00:05:09.020 --> 00:05:11.150\nIt gets hard to say.\n\n109\n00:05:11.150 --> 00:05:13.850\nSo we added that but we didn't really\nconfigure or tweak any settings on it, so\n\n110\n00:05:13.850 --> 00:05:14.770\nI do wanna show you that.\n\n111\n00:05:14.770 --> 00:05:18.170\nI'm gonna go back into my\nvCenter environment and\n\n112\n00:05:18.170 --> 00:05:19.730\nI'm gonna go down to Administration.\n\n113\n00:05:20.800 --> 00:05:25.170\nAnd under Administration,\nwe're gonna go into Single Sign On and\n\n114\n00:05:25.170 --> 00:05:27.740\nConfiguration, all right?\n\n115\n00:05:27.740 --> 00:05:29.810\nWhere we were working in\nthe last episode was right here\n\n116\n00:05:29.810 --> 00:05:31.850\nunder the Identity Sources tab.\n\n117\n00:05:31.850 --> 00:05:34.040\nBut if you look at the Policies tab,\n\n118\n00:05:34.040 --> 00:05:38.010\nyou'll see that there's three different\npolicies we can define as a part of SSO.\n\n119\n00:05:38.010 --> 00:05:42.339\nThere's a Password Policy, a Lockout\nPolicy and a Token Policy, all right?\n\n120\n00:05:42.339 --> 00:05:45.800\nEach one has a specific purpose,\nit serves a particular role.\n\n121\n00:05:45.800 --> 00:05:47.360\nThe Password Policy,\n\n122\n00:05:47.360 --> 00:05:50.250\nthis is how our password expirations\nare going to be handled.\n\n123\n00:05:50.250 --> 00:05:55.340\nNow, if you're doing Active Directory for\nyour SSO, it has its own password policy.\n\n124\n00:05:55.340 --> 00:05:57.490\nAnd so you probably don't\ncare about this one at all,\n\n125\n00:05:57.490 --> 00:06:01.080\nyou can ignore it because it's\nbeing handled by Active Directory.\n\n126\n00:06:01.080 --> 00:06:03.410\nBut if you're just using\nthe vsphere.local and\n\n127\n00:06:03.410 --> 00:06:06.690\nyou've extended it across multiple\nvCenter servers like I just showed you.\n\n128\n00:06:06.690 --> 00:06:09.970\nThen you need you're own password\npolicy inside of vCenter and\n\n129\n00:06:09.970 --> 00:06:11.560\nyou can define it right here.\n\n130\n00:06:11.560 --> 00:06:15.070\nPassword must be changed\nevery x amount of days,\n\n131\n00:06:15.070 --> 00:06:19.030\nusers can't reuse passwords they've\nused before, here saying the previous 5.\n\n132\n00:06:19.030 --> 00:06:23.950\nMaximum length of 20, minimum length\nof 8 and then character requirements.\n\n133\n00:06:23.950 --> 00:06:28.390\nDo I need alphabetical,\nnumerical, uppercase, lowercase,\n\n134\n00:06:28.390 --> 00:06:30.840\nspecial characters, we define that too.\n\n135\n00:06:30.840 --> 00:06:35.140\nAnd these settings, these are all able\nto be changed if we wanna edit them.\n\n136\n00:06:35.140 --> 00:06:38.330\nMy resolution's kind of low, so I have\nto scroll over to see the Edit button.\n\n137\n00:06:38.330 --> 00:06:42.320\nBut the Edit button is there,\nI promise you and you can edit this and\n\n138\n00:06:42.320 --> 00:06:45.490\nyou can set the policy to\nmatch what your company has.\n\n139\n00:06:45.490 --> 00:06:50.160\nSo maybe you've got a 60-day policy,\nright?\n\n140\n00:06:50.160 --> 00:06:54.970\nNo password should be used for\nmore than 60 days and previous passwords?\n\n141\n00:06:54.970 --> 00:07:00.040\nWe might set that to 999, I never want\nsomebody to be able to reuse a password.\n\n142\n00:07:00.040 --> 00:07:01.350\nMaximum length?\n\n143\n00:07:01.350 --> 00:07:04.310\nI might wanna go more than 20 characters,\nmaybe we wanna go 60.\n\n144\n00:07:04.310 --> 00:07:08.385\nI can say a minimum length of 8 and\nthen complexity requirements.\n\n145\n00:07:08.385 --> 00:07:12.045\nUppercase, lowercase, numeric,\nalphabet, special characters,\n\n146\n00:07:12.045 --> 00:07:13.825\nhowever many it is that we need.\n\n147\n00:07:13.825 --> 00:07:18.845\nNotice I've got at least two alphabetic\ncharacters, maybe I wanna make that one.\n\n148\n00:07:18.845 --> 00:07:23.243\nWell, one will cause me a little bit of a\nproblem because I require an uppercase and\n\n149\n00:07:23.243 --> 00:07:24.919\na lowercase, so that's two.\n\n150\n00:07:24.919 --> 00:07:27.880\nAnd that's why it defaults to two here cuz\nyou need an uppercase and a lowercase.\n\n151\n00:07:27.880 --> 00:07:30.835\nSo if somebody just does\none letter it's not enough\n\n152\n00:07:30.835 --> 00:07:32.370\ncuz you can't have uppercase and\nlowercase.\n\n153\n00:07:32.370 --> 00:07:35.750\nSo you just try and find the balance for\nwhat it is that you need.\n\n154\n00:07:35.750 --> 00:07:40.700\nAnd then I like this little setting down\nhere, Identical adjacent Characters.\n\n155\n00:07:40.700 --> 00:07:44.150\nBecause you'll have where people\njust say like one, one, one, one.\n\n156\n00:07:44.150 --> 00:07:46.020\nAnd this will stop them from doing that.\n\n157\n00:07:46.020 --> 00:07:48.440\nYou won't be able to use the same\none over and over and over again.\n\n158\n00:07:48.440 --> 00:07:49.650\nSo you can set a limit.\n\n159\n00:07:49.650 --> 00:07:51.680\nThe default is three, you can make\nit lower or higher, all right.\n\n160\n00:07:52.990 --> 00:07:57.150\nOnce that's defined, we'll now have\na password policy that's set and\n\n161\n00:07:57.150 --> 00:08:00.510\nthat's applying to the accounts\nright here inside of SSO.\n\n162\n00:08:00.510 --> 00:08:04.000\nSo when we start creating accounts in\nvsphere.local and somebody logs in and\n\n163\n00:08:04.000 --> 00:08:06.641\nthe password is expired,\nit will force them to change it.\n\n164\n00:08:06.641 --> 00:08:09.360\nAnd when the change it, they don't have\nto meet these complexity requirements.\n\n165\n00:08:09.360 --> 00:08:11.867\nThat's pretty standard\npassword policy stuff there,\n\n166\n00:08:11.867 --> 00:08:13.900\nprobably not Earth shattering for\nyou guys.\n\n167\n00:08:15.400 --> 00:08:17.810\nAll right,\nthe next policy is the lockout policy and\n\n168\n00:08:17.810 --> 00:08:21.330\nthis one's really important cuz it\ncan help prevent brute force attacks.\n\n169\n00:08:21.330 --> 00:08:25.230\nRemember that the vCenter environment,\nit uses a web client.\n\n170\n00:08:25.230 --> 00:08:28.600\nAnd so anybody can fire up a web browser\nand point it at your vCenter server.\n\n171\n00:08:28.600 --> 00:08:30.952\nNow we can use the firewall to\nrestrict who's allowed to get to it,\n\n172\n00:08:30.952 --> 00:08:32.759\nwe'll talk about that in\nthe hardening episodes.\n\n173\n00:08:32.759 --> 00:08:35.486\nBut if I want it open\nto my network team and\n\n174\n00:08:35.486 --> 00:08:39.106\nsomebody manages to get on\nmy network teams network.\n\n175\n00:08:39.106 --> 00:08:42.707\nWell now they could brute force, they\ncould just try to guess a password, most\n\n176\n00:08:42.707 --> 00:08:46.543\npeople know that a vSphere environment is\ngoing to have an administrator account.\n\n177\n00:08:46.543 --> 00:08:50.006\nAnd as long as they know the domain,\nwhich is probably vSphere.local,\n\n178\n00:08:50.006 --> 00:08:53.263\n[LAUGH] then they can log in as\nthe administrator of vSphere.local.\n\n179\n00:08:53.263 --> 00:08:55.020\nNow they just have to guess a password.\n\n180\n00:08:56.310 --> 00:08:58.160\nSo they could go in and\ntry to guess that password.\n\n181\n00:08:58.160 --> 00:08:59.870\nIf they know that SSO is configured,\n\n182\n00:08:59.870 --> 00:09:02.969\nthen they might know that it's your\nemail address you log in with.\n\n183\n00:09:02.969 --> 00:09:06.243\nSo they can try that and start guessing\npasswords over and over again.\n\n184\n00:09:06.243 --> 00:09:10.527\nSo we can set a lockout that says after\na certain amount of failed attempts,\n\n185\n00:09:10.527 --> 00:09:12.580\nlock the account.\n\n186\n00:09:12.580 --> 00:09:17.180\nThe default is after five\nfailed attempts within three\n\n187\n00:09:17.180 --> 00:09:22.190\nminutes we're gonna lock them out and it's\ngonna keep them locked for five minutes.\n\n188\n00:09:22.190 --> 00:09:24.880\nI might want to change that\naround a little bit, right.\n\n189\n00:09:24.880 --> 00:09:27.940\nSo five failed attempts in three minutes,\n\n190\n00:09:27.940 --> 00:09:30.990\nthat might be not aggressive enough for\nme.\n\n191\n00:09:30.990 --> 00:09:33.320\nCuz now what I'm really doing is if\nsomebody's trying to brute force,\n\n192\n00:09:33.320 --> 00:09:36.330\nI'm holding them to five\nattempts every three minutes.\n\n193\n00:09:36.330 --> 00:09:39.210\nWell then they get flagged and\nanother five minutes goes by,\n\n194\n00:09:39.210 --> 00:09:42.600\nso it's really five attempts\nevery eight minutes.\n\n195\n00:09:42.600 --> 00:09:45.070\nSo every eight minutes somebody\ncan try five passwords.\n\n196\n00:09:45.070 --> 00:09:47.860\nWell if there are millions of\ncombinations of passwords,\n\n197\n00:09:47.860 --> 00:09:49.450\nit's probably more than millions.\n\n198\n00:09:49.450 --> 00:09:51.910\nIt would take a long,\nlong time for them to guess and\n\n199\n00:09:51.910 --> 00:09:54.198\nthis is a pretty effective policy.\n\n200\n00:09:54.198 --> 00:09:58.340\nI might wanna be more aggressive or less\naggressive based on just kind of my users.\n\n201\n00:09:58.340 --> 00:10:01.594\nIf I find the users are constantly\nscrewing up their password, maybe I need\n\n202\n00:10:01.594 --> 00:10:04.965\nto hire better users or you'll maybe\nneed to loosen this policy a little bit.\n\n203\n00:10:04.965 --> 00:10:09.211\nAnd just like the other one, it's off of\nmy screen, I'm gonna minimize the alarms\n\n204\n00:10:09.211 --> 00:10:12.710\npanel and the work in progress panels,\nso that I can see it.\n\n205\n00:10:12.710 --> 00:10:13.908\nThere is my Edit button and\n\n206\n00:10:13.908 --> 00:10:16.475\nnow, I can edit that and\nI'm going tweak those values.\n\n207\n00:10:16.475 --> 00:10:18.740\nAnd you can set that to seconds,\nminutes, hours,\n\n208\n00:10:18.740 --> 00:10:22.100\nday as whatever it is that you want,\nand you can put that in place.\n\n209\n00:10:22.100 --> 00:10:26.561\n>> Don is there any benefit to\nincreasing the amount of attempts there?\n\n210\n00:10:26.561 --> 00:10:30.058\nAnd when I say that it's always\ngonna make it more secure.\n\n211\n00:10:30.058 --> 00:10:34.120\nBut in relation to some kind of brute\nforce software cuz as you've said,\n\n212\n00:10:34.120 --> 00:10:38.717\nyou increased those lockouts or decrease\nthe attempts I guess you should say, and\n\n213\n00:10:38.717 --> 00:10:40.210\nyou burnt your users.\n\n214\n00:10:40.210 --> 00:10:41.044\nIs there really a benefit?\n\n215\n00:10:41.044 --> 00:10:42.564\n>> You gotta find the sweet spot, right?\n\n216\n00:10:42.564 --> 00:10:43.446\n>> Yeah.\n>> The balance.\n\n217\n00:10:43.446 --> 00:10:45.920\nHave you ever forgotten your password?\n\n218\n00:10:45.920 --> 00:10:47.120\n>> Yes.\n>> Or you got to a site and\n\n219\n00:10:47.120 --> 00:10:50.470\nyou like I'm pretty sure the password\nwas this and you try a few combinations.\n\n220\n00:10:50.470 --> 00:10:53.770\nHow many combinations do you have to\ntry for you to remember what it was?\n\n221\n00:10:53.770 --> 00:10:55.900\nMight be five or six combinations, right?\n\n222\n00:10:55.900 --> 00:10:57.230\nSo if it's five or six and\n\n223\n00:10:57.230 --> 00:11:00.070\nI do it in a three minute period\nI just got, I hit this policy.\n\n224\n00:11:00.070 --> 00:11:02.670\nWell if somebody's brute forcing us,\nthey're usually using software to do it.\n\n225\n00:11:02.670 --> 00:11:07.910\nAnd they'll probably be trying thousands\nof time per second even, in some cases.\n\n226\n00:11:07.910 --> 00:11:11.460\nSo I could probably loosen this a little\nbit more, and still be perfectly safe.\n\n227\n00:11:11.460 --> 00:11:12.980\nYou just have to find that balance.\n\n228\n00:11:12.980 --> 00:11:16.690\nIt's what's acceptable to your users and\nwhat's acceptable to the security team.\n\n229\n00:11:16.690 --> 00:11:19.017\nBecause the security team is gonna\nhave a lot feedback on this one.\n\n230\n00:11:19.017 --> 00:11:23.929\nThey want it to be not too lax,\nbecause then brute force becomes possible.\n\n231\n00:11:23.929 --> 00:11:27.755\nSo just kinda figuring out what works for\nyou.\n\n232\n00:11:28.765 --> 00:11:31.295\nThe last one is the one you're\nleast likely to mess with and\n\n233\n00:11:31.295 --> 00:11:32.785\nthat's the Token Policy.\n\n234\n00:11:32.785 --> 00:11:36.885\nToken Policies, basically when you\nauthenticate you're given a token and\n\n235\n00:11:36.885 --> 00:11:38.265\nyour token is only good for\n\n236\n00:11:38.265 --> 00:11:40.920\na certain period of time before\nyou have to authenticate again.\n\n237\n00:11:40.920 --> 00:11:43.468\nSo you log in, you start to work,\n\n238\n00:11:43.468 --> 00:11:47.747\nnow if you idle and\nwalk away the net token starts aging.\n\n239\n00:11:47.747 --> 00:11:50.301\nAnd maybe it's the end of the day and\nyou leave the office and\n\n240\n00:11:50.301 --> 00:11:52.620\nyou left yourself logged in to vCenter.\n\n241\n00:11:52.620 --> 00:11:55.900\nWhen you come back in the morning\nis that token still good?\n\n242\n00:11:55.900 --> 00:11:59.130\nIf it is, in theory, somebody else\ncould sit at your computer, and\n\n243\n00:11:59.130 --> 00:12:00.540\nstart using the system.\n\n244\n00:12:00.540 --> 00:12:04.470\nOr somebody could've intercepted your\ntoken on the network, and be replaying it.\n\n245\n00:12:04.470 --> 00:12:07.500\nBut the tokens expire, and when they\nexpire, you have to authenticate.\n\n246\n00:12:07.500 --> 00:12:09.580\nSo if somebody intercepted your token,\n\n247\n00:12:09.580 --> 00:12:11.660\nthey wouldn't be able to\nuse it after it expired.\n\n248\n00:12:11.660 --> 00:12:14.440\nOr if you left yourself logged in,\nyou'd effectively be logged out,\n\n249\n00:12:14.440 --> 00:12:16.140\ncuz your token wouldn't be valid anymore.\n\n250\n00:12:16.140 --> 00:12:20.180\nSo we can set what that lifetime is, and\n\n251\n00:12:20.180 --> 00:12:23.960\nyou'll see that the maximum bear a token\nlifetime right now is set to five minutes.\n\n252\n00:12:23.960 --> 00:12:27.190\nEvery five minutes I've got\nto interact with the system.\n\n253\n00:12:27.190 --> 00:12:30.175\nAnd If I don't then it's\ngonna effectively log me out.\n\n254\n00:12:30.175 --> 00:12:32.675\nIt doesn't actually log you out,\nit just expires your token.\n\n255\n00:12:32.675 --> 00:12:36.175\nSo you'll still be in vCenter, but the\nnext time you try and perform an action,\n\n256\n00:12:36.175 --> 00:12:39.275\nit's gonna fail or you're gonna\nreauthenticate, one of the two.\n\n257\n00:12:39.275 --> 00:12:40.829\nIt'll usually just send you\nback to the login page.\n\n258\n00:12:41.990 --> 00:12:47.900\nYou can also set things like\nthe Maximum token renewal account.\n\n259\n00:12:47.900 --> 00:12:53.990\nIf I stay online, I can renew my\ntoken up to ten times as a default.\n\n260\n00:12:53.990 --> 00:12:58.694\nIf we require a lifetime of five minutes\nand I can renew up to ten times, that\n\n261\n00:12:58.694 --> 00:13:03.789\nmeans I can work in vCenter for 50 minutes\nbefore I have to authenticate again.\n\n262\n00:13:03.789 --> 00:13:07.397\nWell that's not a terribly long time,\nI might wanna extend that or maybe that's\n\n263\n00:13:07.397 --> 00:13:11.220\ntoo long in my book and I wanna shorten\nit based on the needs of my company.\n\n264\n00:13:11.220 --> 00:13:13.860\nYou've go the Maximum\ntoken delegation count.\n\n265\n00:13:13.860 --> 00:13:16.760\nHow many times can I open up\ndifferent windows and tabs and\n\n266\n00:13:16.760 --> 00:13:20.540\nstart having different systems all\nusing that token before it runs out?\n\n267\n00:13:20.540 --> 00:13:23.340\nThese are all different\nthings that we can tweak and\n\n268\n00:13:23.340 --> 00:13:25.498\nthe default values are pretty stable.\n\n269\n00:13:25.498 --> 00:13:27.140\nYou don't normally mess with them.\n\n270\n00:13:27.140 --> 00:13:30.060\nThe only one that really comes into play\nin most environments is this guy right\n\n271\n00:13:30.060 --> 00:13:36.060\nhere, that the tokens have a clock\ntolerance of 600,000 milliseconds or\n\n272\n00:13:36.060 --> 00:13:39.180\n600 seconds or was that, 1 hour?\n\n273\n00:13:39.180 --> 00:13:43.126\nNo.\n600 seconds is 60 minutes which is 60\n\n274\n00:13:43.126 --> 00:13:44.940\nminutes is an hour.\n\n275\n00:13:44.940 --> 00:13:47.790\nSo I guess that's one hour,\nso it's one hour.\n\n276\n00:13:47.790 --> 00:13:51.470\nWell, what that means is that somebody\ncould be authenticating and their computer\n\n277\n00:13:51.470 --> 00:13:55.660\nclock could be off by up to an hour and\nthe token is still considered valid.\n\n278\n00:13:55.660 --> 00:13:59.110\nThe problem there is a hacker\ncould intercept the token or\n\n279\n00:13:59.110 --> 00:14:02.260\neven intercept an entire\nauthentication packet and replay it.\n\n280\n00:14:02.260 --> 00:14:06.278\nAnd as long as they do it within an hour\nwill accept it, that may be too lenient.\n\n281\n00:14:06.278 --> 00:14:09.880\nI might wanna make that more\naggressive to stop replay attacks.\n\n282\n00:14:09.880 --> 00:14:11.530\nNow normally,\nwe do encryption on the network so\n\n283\n00:14:11.530 --> 00:14:14.390\nthey can't get that token packet in\nthe first place, so it doesn't matter.\n\n284\n00:14:14.390 --> 00:14:16.670\nBut you might wanna make this\nmore aggressive or more lenient.\n\n285\n00:14:16.670 --> 00:14:19.120\nIf you have bad time synchronization\nacross your company,\n\n286\n00:14:19.120 --> 00:14:20.230\nthen you might need to do that.\n\n287\n00:14:20.230 --> 00:14:23.733\nBut for the most part,\nthe token policy we just leave alone.\n\n288\n00:14:23.733 --> 00:14:24.504\nBut it is there,\n\n289\n00:14:24.504 --> 00:14:27.657\nthese are all different things that\nwe can tweak on a single sign up.\n\n290\n00:14:27.657 --> 00:14:30.432\nLet's see, what else do we have?\n\n291\n00:14:30.432 --> 00:14:34.370\nQuick work on upgrades.\n\n292\n00:14:35.510 --> 00:14:39.340\nUpgrading with single sign on\ncan be a little bit tricky.\n\n293\n00:14:39.340 --> 00:14:44.747\nI'm running vSphere 6,\nmaybe I was running vSphere 5.5 before or\n\n294\n00:14:44.747 --> 00:14:50.990\neven vSphere 5.0 or maybe vSphere 6.5\ncomes out and it's time to upgrade.\n\n295\n00:14:52.140 --> 00:14:55.170\nHow do we handle upgrades under vSphere?\n\n296\n00:14:55.170 --> 00:14:58.130\nWell upgrades need to be followed\nin a very particular pattern.\n\n297\n00:14:59.550 --> 00:15:03.020\nYou always need to upgrade vCenter and\n\n298\n00:15:03.020 --> 00:15:07.100\nthe PSC together if they're together,\nor separate if they're separate.\n\n299\n00:15:07.100 --> 00:15:11.270\nBut you need to upgrade vCenter first,\nalways upgrade vCenter first.\n\n300\n00:15:11.270 --> 00:15:15.130\nSo if you're a vCenter 6,\nand vCenter 6.5 comes out,\n\n301\n00:15:15.130 --> 00:15:20.040\nso I want to upgrade vCenter to 6.5,\nI'm gonna upgrade it first.\n\n302\n00:15:20.040 --> 00:15:22.340\nPop in the disc,\nrun through the upgrade process.\n\n303\n00:15:22.340 --> 00:15:25.480\nI'm gonna upgrade the PSC also, and so\n\n304\n00:15:25.480 --> 00:15:29.880\nyou'll normally upgrade vCenter first and\nthen the PSC if they're separate.\n\n305\n00:15:29.880 --> 00:15:32.510\nIf they're together, they get upgraded\nat the same time, it's no big deal.\n\n306\n00:15:32.510 --> 00:15:38.026\nBut vCenter should always be first and\nyour ESXi hosts should be last.\n\n307\n00:15:38.026 --> 00:15:43.698\nAlways upgrade your ESXi hosts\nlast because what happens is,\n\n308\n00:15:43.698 --> 00:15:47.734\nwe'll use the old example of 5 and 5.5,\n\n309\n00:15:47.734 --> 00:15:52.330\nis that vCenter 5.5 could\nmanage ESX 5 hosts.\n\n310\n00:15:52.330 --> 00:15:56.542\nAnd it could manage ESX 5.5 host but\n\n311\n00:15:56.542 --> 00:16:01.683\nvCenter 5 could not manage ESX 5.5 hosts.\n\n312\n00:16:01.683 --> 00:16:03.706\nSo vCenter needs to be upgraded first,\n\n313\n00:16:03.706 --> 00:16:06.601\ncuz it'll be able to handle\neverybody else from there.\n\n314\n00:16:06.601 --> 00:16:08.714\nESXi host need to be upgraded last, so\n\n315\n00:16:08.714 --> 00:16:12.370\nalways remember that because\nthat impact single sign on.\n\n316\n00:16:12.370 --> 00:16:15.686\nIf I upgrade my hosts first,\nnow they can't talk to vCenter and\n\n317\n00:16:15.686 --> 00:16:17.197\nthey can't talk to the PSC.\n\n318\n00:16:17.197 --> 00:16:18.962\nWhich means now I can't authenticate and\n\n319\n00:16:18.962 --> 00:16:21.460\nnow I've effectively\nbroken single sign on.\n\n320\n00:16:21.460 --> 00:16:23.170\nThat's bad, we don't want that.\n\n321\n00:16:23.170 --> 00:16:27.801\nYou always want your single sign on to\nwork otherwise you get locked out and\n\n322\n00:16:27.801 --> 00:16:32.070\nyou have a resume generating event,\nan RGE so you don't want that.\n\n323\n00:16:32.070 --> 00:16:35.520\nYou wanna make sure you upgrade\nvCenter first then the PFC or\n\n324\n00:16:35.520 --> 00:16:39.180\ntogether if they're together and\nthen last, the ESXi hosts.\n\n325\n00:16:40.500 --> 00:16:44.189\nThe only other thing I have is an exam\nobjective they call out that is something\n\n326\n00:16:44.189 --> 00:16:47.960\nI absolutely don't use in production is\nthat a lot of people don't know this.\n\n327\n00:16:47.960 --> 00:16:51.938\nBut vCenter's running on top of\nWindows in my environment, and\n\n328\n00:16:51.938 --> 00:16:55.030\nI've got Windows joined to the domain.\n\n329\n00:16:55.030 --> 00:16:58.240\nAnd so I've got a domain joined\ncomputer that's running vCenter, so\n\n330\n00:16:58.240 --> 00:17:00.020\nit's in the Active Directory.\n\n331\n00:17:00.020 --> 00:17:03.760\nI've got all my ESXi hosts too,\nbut those ESXi hosts,\n\n332\n00:17:03.760 --> 00:17:06.930\nthey're Linux machines and they're\nnot joined to the Active Directory.\n\n333\n00:17:06.930 --> 00:17:08.370\nThey don't show up in\nthe Active Directory, and\n\n334\n00:17:08.370 --> 00:17:10.110\nI'm fine with that cuz I don't care.\n\n335\n00:17:10.110 --> 00:17:12.750\nBecause they're Linux hosts,\nI don't need them in the Active Directory.\n\n336\n00:17:12.750 --> 00:17:16.800\nBut some people really want those ESXi\nhosts to show up in the Active Directory.\n\n337\n00:17:16.800 --> 00:17:21.630\nAnd the main reason is if you do, you can\nlog in even if your PSC goes offline.\n\n338\n00:17:21.630 --> 00:17:25.170\nThe ESXi host can still talk to\na domain controller to login.\n\n339\n00:17:25.170 --> 00:17:27.752\nSo if you want that functionality,\n\n340\n00:17:27.752 --> 00:17:31.981\nyou can join your ESXi host to\nan Active Directory domain.\n\n341\n00:17:31.981 --> 00:17:35.541\nAnd they'll show up with a computer\naccount in the Active Directory and\n\n342\n00:17:35.541 --> 00:17:39.179\nyou'll be able to login even in\nthe event that the vCenter server fails.\n\n343\n00:17:39.179 --> 00:17:42.402\nNow, f the vCenter server fails, you need\nto get it back on line as soon as you can\n\n344\n00:17:42.402 --> 00:17:45.160\ncuz that's the heart of your\nmanagement environment.\n\n345\n00:17:45.160 --> 00:17:48.380\nBut while it's offline you'll still be\nable to manage the vms a little bit.\n\n346\n00:17:48.380 --> 00:17:49.425\nStart them up, shut them down,\n\n347\n00:17:49.425 --> 00:17:51.290\nthings like that cuz you'd be\nable to log into the hosts.\n\n348\n00:17:52.640 --> 00:17:55.197\nWe can get them joined,\nlet me show you how that works.\n\n349\n00:17:55.197 --> 00:17:58.451\nIt's actually not very hard, although I\ndon't know if this environment's set up to\n\n350\n00:17:58.451 --> 00:18:00.410\ndo it right, so\nI might get an error but we'll see.\n\n351\n00:18:00.410 --> 00:18:04.210\nSo what I'm going to do is\nI'm gonna get one joined, and\n\n352\n00:18:04.210 --> 00:18:09.070\nI'm going to jump up to my home and\nI'm gonna go down to hosts and clusters.\n\n353\n00:18:09.070 --> 00:18:11.740\nThis is done on the host itself.\n\n354\n00:18:11.740 --> 00:18:14.650\nSo when I go into host,\nI'm gonna go over here to Manage, and\n\n355\n00:18:14.650 --> 00:18:19.400\nwe can start to configure all of our\nvarious settings right inside of the host.\n\n356\n00:18:19.400 --> 00:18:24.451\nNow, the things that I wanna get set\nup in here are gonna be under the host,\n\n357\n00:18:24.451 --> 00:18:25.520\nunder Manage.\n\n358\n00:18:25.520 --> 00:18:27.772\nAnd then we're going to\ngo into our Settings,\n\n359\n00:18:27.772 --> 00:18:30.600\nwhich are all kind of\nburied right over here.\n\n360\n00:18:30.600 --> 00:18:32.250\nIn our Settings, we're looking for\n\n361\n00:18:32.250 --> 00:18:37.060\nSystem and Authentication Services,\nwhich are right here.\n\n362\n00:18:38.190 --> 00:18:41.540\nUnder Authentication Services, you'll\nsee where you're authenticating, and\n\n363\n00:18:41.540 --> 00:18:44.320\nby default is set to Local Authentication.\n\n364\n00:18:44.320 --> 00:18:48.892\nAnd Local Authentication is attached\nto vCenter, so in my case that's\n\n365\n00:18:48.892 --> 00:18:53.708\nthe vSphere.local SSO domain as well\nas local accounts on this ESXi host.\n\n366\n00:18:53.708 --> 00:18:56.900\nBut see how you've got Domain Settings?\n\n367\n00:18:56.900 --> 00:18:59.980\nIt can actually be tied to\nan Active Directory domain and\n\n368\n00:18:59.980 --> 00:19:01.400\nyou've got Trusted Domain Controllers.\n\n369\n00:19:01.400 --> 00:19:03.253\nSo it does support being connected,\n\n370\n00:19:03.253 --> 00:19:07.091\nand you've got a nice big Join Domain\nbutton right here to get it connected.\n\n371\n00:19:07.091 --> 00:19:10.630\nA couple of things that need\nto be set up before hand.\n\n372\n00:19:10.630 --> 00:19:12.750\nFirst off, my system clock.\n\n373\n00:19:12.750 --> 00:19:15.617\nThe Active Directory uses Kerberos for\nauthentication and\n\n374\n00:19:15.617 --> 00:19:18.480\nMicrosoft only allows\na five minute offset.\n\n375\n00:19:18.480 --> 00:19:22.900\nWe saw an hour offset a minute ago inside\nof VMWare, but Microsoft is five minutes.\n\n376\n00:19:22.900 --> 00:19:25.230\nSo a really short offset time for\nyour clock.\n\n377\n00:19:25.230 --> 00:19:27.700\nSo I probably need to go\nto time configuration and\n\n378\n00:19:27.700 --> 00:19:29.720\nmake sure that I'm synching my time.\n\n379\n00:19:29.720 --> 00:19:33.990\nSee out my NTP Client is disabled, so\nI'm not really synching my time, am I?\n\n380\n00:19:33.990 --> 00:19:39.310\nBut I can Edit that, and I can synchronize\nmy time against an external NTP server or\n\n381\n00:19:39.310 --> 00:19:42.240\nwhat I'd like to do is synchronize\nagainst the domain controller.\n\n382\n00:19:42.240 --> 00:19:45.282\nHow better to make sure your time is\nsynchronize with the domain controller\n\n383\n00:19:45.282 --> 00:19:47.660\nthan actually to sync from\nthe domain controller itself.\n\n384\n00:19:47.660 --> 00:19:50.254\nEvery Microsoft domain\ncontroller is a time server,\n\n385\n00:19:50.254 --> 00:19:52.281\nthey've got that functionality there.\n\n386\n00:19:52.281 --> 00:19:55.098\nIn the Microsoft world,\nI know this isn't a Microsoft show,\n\n387\n00:19:55.098 --> 00:19:58.202\nbut there's a domain controller\nthat's called the PDC emulator.\n\n388\n00:19:58.202 --> 00:20:01.339\nAnd the PDC emulator\nis a root time source,\n\n389\n00:20:01.339 --> 00:20:05.969\nit's considered a stratum one\ntime source for your machines.\n\n390\n00:20:05.969 --> 00:20:07.409\nAnd we don't need to know all that,\n\n391\n00:20:07.409 --> 00:20:09.953\nwe just need to know that you can\npoint at a domain controller and\n\n392\n00:20:09.953 --> 00:20:13.080\nyou can see your time from it, and that\nway you'll know you have it set right.\n\n393\n00:20:13.080 --> 00:20:16.200\nSo I can come in here and\nspecify an NTP server and\n\n394\n00:20:16.200 --> 00:20:19.245\nI can put in whatever my\ndomain controller is.\n\n395\n00:20:19.245 --> 00:20:21.015\nI actually don't know the IP\nof my domain controller,\n\n396\n00:20:21.015 --> 00:20:22.217\nlet me go figure that out real quick.\n\n397\n00:20:22.217 --> 00:20:26.209\n[LAUGH] So I've got this domain\ncontroller here, PLANDC01,\n\n398\n00:20:26.209 --> 00:20:29.940\nand it's 192.168.0.1, that's it's IP.\n\n399\n00:20:29.940 --> 00:20:35.987\nSo I'm gonna set my time to\nsynchronize against that, 192.168.0.1.\n\n400\n00:20:35.987 --> 00:20:41.432\nAnd if it's not available I could always\nspecify an alternate and do something like\n\n401\n00:20:41.432 --> 00:20:46.750\npool.ntp.org, and tie it to some external\none but I'll just point to that DC.\n\n402\n00:20:48.140 --> 00:20:51.747\nAnd then I'll set the time client\nto start and stop with the host, so\n\n403\n00:20:51.747 --> 00:20:55.230\nwhenever the host boots up it's\ngonna start the time client, and\n\n404\n00:20:55.230 --> 00:20:56.769\nI'll go ahead and start it.\n\n405\n00:20:56.769 --> 00:21:00.294\nSo now that host, that ESXi host is\ngonna start synchronizing its time\n\n406\n00:21:00.294 --> 00:21:02.400\nwith the domain controller.\n\n407\n00:21:02.400 --> 00:21:05.700\nAnd we probably want to do the same thing\nwith vCenter we saw that in an earlier\n\n408\n00:21:05.700 --> 00:21:08.710\nepisode, we wanna make sure we have\nall of our stuff kind of synchronized.\n\n409\n00:21:08.710 --> 00:21:11.042\nIn my case,\nvCenter's running on top of windows and\n\n410\n00:21:11.042 --> 00:21:12.527\nwindows is joined to the domain.\n\n411\n00:21:12.527 --> 00:21:15.457\nSo I'm already synchronizing\nmy clock properly, so\n\n412\n00:21:15.457 --> 00:21:19.180\nI don't have to worry about the clock\non the vCenter server itself.\n\n413\n00:21:19.180 --> 00:21:22.240\nThen you've got your\nNetworking tab up here and\n\n414\n00:21:22.240 --> 00:21:25.846\nunder Networking you can set\nyour TCIP configuration.\n\n415\n00:21:25.846 --> 00:21:29.978\nAnd under TCIP here's where you can tweak\nthings like who your DNS servers are, and\n\n416\n00:21:29.978 --> 00:21:31.540\nyour default gateway.\n\n417\n00:21:31.540 --> 00:21:36.378\nAnd the reason I bring this up is if you\nlook at my host the IPv4 Gateway Address\n\n418\n00:21:36.378 --> 00:21:39.144\nis set, but\nmy Preferred DNS server is not.\n\n419\n00:21:39.144 --> 00:21:40.940\nI can't do name lookups.\n\n420\n00:21:40.940 --> 00:21:43.390\nNow Active Directory can\nwork with DNS hookups and\n\n421\n00:21:43.390 --> 00:21:46.180\nit can work with net bios broadcasts.\n\n422\n00:21:46.180 --> 00:21:50.520\nThat net bios stuff will work if my\nESXi hosts are on the same network\n\n423\n00:21:50.520 --> 00:21:52.220\nas my domain controller.\n\n424\n00:21:52.220 --> 00:21:56.160\nBut if they're separate, my ESXi host\nneeds to be able to do DNS lookups to\n\n425\n00:21:56.160 --> 00:21:57.890\nfind it, cuz the broadcast won't work.\n\n426\n00:21:57.890 --> 00:22:00.960\nI need DNS servers, and\nI don't have any right now.\n\n427\n00:22:00.960 --> 00:22:04.490\nSo I need to edit that, and\nset some DNS servers for\n\n428\n00:22:04.490 --> 00:22:05.740\nthis to be able to communicate.\n\n429\n00:22:05.740 --> 00:22:08.930\nI'm glad I thought to check this, cuz if\nI hadn't it would have failed to join.\n\n430\n00:22:08.930 --> 00:22:11.500\nSo I'm gonna come in here and manually\nenter in a prefered DNS server and\n\n431\n00:22:11.500 --> 00:22:13.270\nI'm gonna put in that domain controller.\n\n432\n00:22:13.270 --> 00:22:16.970\nWhen you run the Active Directory, you\nalways run an internal DNS server cuz you\n\n433\n00:22:16.970 --> 00:22:20.480\nneed all those Active Directory records,\nand so I'm putting those in here.\n\n434\n00:22:20.480 --> 00:22:23.440\nI can set my domain, my domain which\nI also don't remember from earlier.\n\n435\n00:22:23.440 --> 00:22:24.240\nLet's go find that.\n\n436\n00:22:24.240 --> 00:22:28.110\nI think it was called practicelabs.com\nyeah, practicelabs.com.\n\n437\n00:22:28.110 --> 00:22:31.680\nSo I'm gonna go back to my machine here,\nand I'll add it.\n\n438\n00:22:31.680 --> 00:22:37.660\nSo we'll call it practice,\nthere we go, practicelabs.com.\n\n439\n00:22:37.660 --> 00:22:40.250\nAnd my host name,\nmy host name is local host.\n\n440\n00:22:40.250 --> 00:22:46.511\nI can leave it that way or I can change it\nin vCenter, I'm calling this plabesx01.\n\n441\n00:22:46.511 --> 00:22:50.086\nSo I can always rename it like that so\nI'll recognize it a little better.\n\n442\n00:22:50.086 --> 00:22:53.783\nI don't want a bunch of machines in\nthe Active Directory called local host,\n\n443\n00:22:53.783 --> 00:22:55.240\nthat's not going to help me.\n\n444\n00:22:55.240 --> 00:22:59.523\nSo I can set those, and\nI can even make practicelabs.com,\n\n445\n00:22:59.523 --> 00:23:04.332\na search domain if I want,\nI don't have to do that but I'll set it.\n\n446\n00:23:04.332 --> 00:23:07.649\nSo now that I got that place,\nI'll hit the OK button, and\n\n447\n00:23:07.649 --> 00:23:11.400\nnow my time is synchronized and\nmy DNS look up should be working.\n\n448\n00:23:11.400 --> 00:23:15.450\nNow I'll use my IT operative\nthere of should, you know what?\n\n449\n00:23:15.450 --> 00:23:18.710\nIt hasn't refreshed,\nmy preferred DNS isn't showing up.\n\n450\n00:23:18.710 --> 00:23:23.011\nMy task shows as completed,\nlet me just refresh this screen and\n\n451\n00:23:23.011 --> 00:23:28.217\nsometimes the screen doesn't refresh and\nthe setting actually did apply.\n\n452\n00:23:28.217 --> 00:23:31.210\nYeah that's what it was here,\nthat setting did apply.\n\n453\n00:23:31.210 --> 00:23:32.630\nIt just wasn't showing\nup until I hit refresh.\n\n454\n00:23:32.630 --> 00:23:34.836\nRemember, you've always got\nthat refresh button up there.\n\n455\n00:23:34.836 --> 00:23:36.833\nIt's kinda like getting\na second opinion from a doctor.\n\n456\n00:23:36.833 --> 00:23:40.711\nIf you don't like the first thing\nyou hear, just hit refresh.\n\n457\n00:23:40.711 --> 00:23:44.194\nSo now,\nI should be able to join the domain.\n\n458\n00:23:44.194 --> 00:23:46.908\n[LAUGH] Connectivity and\na lot of other good stuff.\n\n459\n00:23:46.908 --> 00:23:50.610\nSo I'm gonna go over here to settings\nback down to authentication services and\n\n460\n00:23:50.610 --> 00:23:53.300\nI'm gonna hit that big shiny join\ndomain button that has been tempting me\n\n461\n00:23:53.300 --> 00:23:54.420\nthis whole time.\n\n462\n00:23:54.420 --> 00:23:57.290\nAnd now we need to provide\nsome basic information.\n\n463\n00:23:57.290 --> 00:23:58.101\nWhat's the domain called?\n\n464\n00:23:58.101 --> 00:24:03.117\nMine is practicelabs.com, and\nthen what's the user account?\n\n465\n00:24:03.117 --> 00:24:05.880\nThat's something I probably should\nhave looked up before the show, but\n\n466\n00:24:05.880 --> 00:24:08.430\nI'll assume that the administrator\naccount will work just fine.\n\n467\n00:24:09.470 --> 00:24:13.490\nTechnically, any user account in\nthe active directory is capable of adding\n\n468\n00:24:13.490 --> 00:24:15.090\na machine to the AD.\n\n469\n00:24:15.090 --> 00:24:17.945\nWhat Microsoft doesn't advertise\nall that heavily is that\n\n470\n00:24:17.945 --> 00:24:20.805\nevery user account can do it ten times.\n\n471\n00:24:20.805 --> 00:24:22.695\nSo once you got at ten machines,\nyou hit your limit.\n\n472\n00:24:22.695 --> 00:24:25.885\nSo I don't have to have an admin account,\nI can use a regular account, but\n\n473\n00:24:25.885 --> 00:24:29.380\nonce I add in my 10th host,\nthe 11th one would fail, right.\n\n474\n00:24:29.380 --> 00:24:30.350\nYou can modify that.\n\n475\n00:24:30.350 --> 00:24:32.440\nSome people modify it\nto bump that number up.\n\n476\n00:24:32.440 --> 00:24:35.850\nIf you use the administrator though, they\ncan add an unlimited amount of accounts,\n\n477\n00:24:35.850 --> 00:24:37.690\nso that's why I'm using\nthe administrator account.\n\n478\n00:24:37.690 --> 00:24:40.520\nAnd what I should have looked up before\nthe show is what its password is.\n\n479\n00:24:40.520 --> 00:24:41.880\nI think I know it.\n\n480\n00:24:41.880 --> 00:24:44.030\nWe'll see if that works for us.\n\n481\n00:24:44.030 --> 00:24:45.370\nSo that's gonna reach out.\n\n482\n00:24:45.370 --> 00:24:48.180\nIt's gonna try and find the domain\ncontroller and it's gonna join it.\n\n483\n00:24:48.180 --> 00:24:52.200\nAnd I can see that task running right\ndown here and I cannot complete log in.\n\n484\n00:24:52.200 --> 00:24:57.210\nAnd if I pull up that message,\nI got a notification for it.\n\n485\n00:24:57.210 --> 00:24:59.270\nAnd the notification's buried down here.\n\n486\n00:24:59.270 --> 00:25:00.210\nLet me get it out here.\n\n487\n00:25:00.210 --> 00:25:03.020\nCannot complete login due to\nan incorrect username or password.\n\n488\n00:25:03.020 --> 00:25:06.520\nSo I need a valid username and password\non the domain to be able to do it.\n\n489\n00:25:06.520 --> 00:25:09.040\nSo I guess I can go whip one up real\nquick and then we'll get it joined.\n\n490\n00:25:09.040 --> 00:25:12.490\nSo, once that's joined,\nnow we attach the domain.\n\n491\n00:25:12.490 --> 00:25:15.450\n>> You know, Don, what I think is\ninteresting is when you verified your\n\n492\n00:25:15.450 --> 00:25:16.890\npassword it took two minutes, but boy,\n\n493\n00:25:16.890 --> 00:25:19.300\nwhen you type it wrong it\nverified it right away.\n\n494\n00:25:19.300 --> 00:25:23.150\n>> Well that was the certificate\nservices which is a part of the PSC.\n\n495\n00:25:23.150 --> 00:25:26.720\nThis is technically a part of the ESXi\nhost and that stuff runs fast.\n\n496\n00:25:26.720 --> 00:25:30.650\nThat certificate service,\nI'm not joking, that is a pain.\n\n497\n00:25:30.650 --> 00:25:33.329\nSo I'm gonna whip up a new user account\nreal quick, just actually, you know what,\n\n498\n00:25:33.329 --> 00:25:35.330\nI'll just create an account for myself.\n\n499\n00:25:35.330 --> 00:25:39.250\nSo I'm gonna create a Don Pezet account.\n\n500\n00:25:39.250 --> 00:25:42.650\nSo I'll just be dpezet@practicelabs.com.\n\n501\n00:25:42.650 --> 00:25:47.580\nAnd I'll know my password because that\nis always handy when working with\n\n502\n00:25:47.580 --> 00:25:49.800\nan accountant is to know what\nyour password actually is.\n\n503\n00:25:49.800 --> 00:25:52.160\nSo I'll get that set and I'm just\ngonna add myself to administrators.\n\n504\n00:25:52.160 --> 00:25:55.540\nI don't technically need to be\nadministrators just to join a machine, but\n\n505\n00:25:55.540 --> 00:25:57.400\nI don't know, I feel special.\n\n506\n00:25:57.400 --> 00:25:59.340\nI wanna be a domain admin so\nI'm gonna add it in.\n\n507\n00:26:00.620 --> 00:26:02.000\nDomain admins.\n\n508\n00:26:02.000 --> 00:26:02.944\nAnd we'll get that set.\n\n509\n00:26:02.944 --> 00:26:05.172\nWhile I'm in here,\nlet me mention something.\n\n510\n00:26:05.172 --> 00:26:10.204\nIn the Active Directory, once the ESX\nhosts are joined in the Active Directory,\n\n511\n00:26:10.204 --> 00:26:14.644\nif you create a group called ESX admins,\nit doesn't exist by default,\n\n512\n00:26:14.644 --> 00:26:15.915\nyou have to make it.\n\n513\n00:26:15.915 --> 00:26:18.995\nIf you make a group called ESX admins,\n\n514\n00:26:18.995 --> 00:26:22.675\nanybody you put in that group will\nautomatically be an administrator on your\n\n515\n00:26:22.675 --> 00:26:26.200\nESX hosts on every ESX host\nin your entire environment.\n\n516\n00:26:26.200 --> 00:26:29.300\nThe group doesn't exist,\nbut vSphere looks for it.\n\n517\n00:26:29.300 --> 00:26:33.040\nSo, every time an ESX host authenticates\nagainst the Active Directory,\n\n518\n00:26:33.040 --> 00:26:35.820\nit looks to see if a group\ncalled ESX admins exists.\n\n519\n00:26:35.820 --> 00:26:37.035\nAnd if it does,\n\n520\n00:26:37.035 --> 00:26:40.945\nanybody in that group is allowed to\nbe an administrator on that ESX host.\n\n521\n00:26:40.945 --> 00:26:42.725\nSo if I wanna get this up and\ngoing quick and\n\n522\n00:26:42.725 --> 00:26:45.005\nmake these people administrators,\nI can set that up.\n\n523\n00:26:45.005 --> 00:26:49.305\nSo I'm creating an account for myself\nhere and I'm making me a domain admin.\n\n524\n00:26:49.305 --> 00:26:52.575\nBut while I'm in here I'm\ngonna make another group.\n\n525\n00:26:52.575 --> 00:26:57.846\nSo I'll just do a new group,\nAnd when I create that group,\n\n526\n00:26:57.846 --> 00:27:02.440\nI'm gonna call it ESX Admins,\nand the name is very specific.\n\n527\n00:27:02.440 --> 00:27:05.210\nIt's gotta be be ESX space Admins.\n\n528\n00:27:05.210 --> 00:27:08.340\nIt's not case sensitive, but in all the\ndocumentation they show ESX capital and\n\n529\n00:27:08.340 --> 00:27:13.230\nthe A capital, but what's important is\nthat it's ESX space Admins, all right.\n\n530\n00:27:13.230 --> 00:27:17.070\nAnd if you create a group with that name,\nthen, you'll be able to authenticate,.\n\n531\n00:27:17.070 --> 00:27:20.360\nIt'll actually work whether it's\ndomain local, global or universal.\n\n532\n00:27:20.360 --> 00:27:25.470\nI typically do a universal on this, but\nglobal's the one that you normally need.\n\n533\n00:27:25.470 --> 00:27:26.880\nSo I'll go ahead and create that.\n\n534\n00:27:26.880 --> 00:27:28.310\nAnd I can put myself in that, too.\n\n535\n00:27:28.310 --> 00:27:31.645\nThat way I'll be an admin\non these accounts.\n\n536\n00:27:31.645 --> 00:27:36.573\nSo if I come in and find myself,\nI'm on a soul searching expedition here to\n\n537\n00:27:36.573 --> 00:27:40.425\nfind myself,\napparently I'm not going to find myself.\n\n538\n00:27:40.425 --> 00:27:43.110\n[LAUGH] Somewhere in this\nlist I will find my account.\n\n539\n00:27:43.110 --> 00:27:46.830\nThere I am, and I'm gonna add\nmyself to that ESX Admins group.\n\n540\n00:27:46.830 --> 00:27:48.550\nSo kind of a neat thing.\n\n541\n00:27:48.550 --> 00:27:50.320\nIt's not very well documented\nout there in the Internet, but\n\n542\n00:27:50.320 --> 00:27:53.989\nit is in VMware's documentation,\nthey show that ESX Admins group.\n\n543\n00:27:56.320 --> 00:27:58.810\nThere we go, all right.\n\n544\n00:27:58.810 --> 00:28:01.090\nSo now that I've got that,\nlet's go back and try and\n\n545\n00:28:01.090 --> 00:28:03.730\nrejoin this client that failed for me.\n\n546\n00:28:03.730 --> 00:28:05.130\nSo I'm gonna rejoin.\n\n547\n00:28:05.130 --> 00:28:09.687\nI'm gonna put in practicelabs.com.\n\n548\n00:28:09.687 --> 00:28:14.010\nI'm gonna use my user account that\nshould actually work this time.\n\n549\n00:28:14.010 --> 00:28:16.370\nAlthough I've rambled on long enough I\nmight have forgotten my own password.\n\n550\n00:28:16.370 --> 00:28:18.150\nAnd we'll give that another shot.\n\n551\n00:28:18.150 --> 00:28:20.860\nOkay, so it's gonna reach out\nin the background, there we go.\n\n552\n00:28:20.860 --> 00:28:23.950\nNow I get a nice big green\ncheckmark completed and\n\n553\n00:28:23.950 --> 00:28:27.655\nI show that it's tied to practicelabs.com,\nright.\n\n554\n00:28:27.655 --> 00:28:28.850\nIt's tied to that domain.\n\n555\n00:28:28.850 --> 00:28:30.330\nNow I tied to the Active Directory, so\n\n556\n00:28:30.330 --> 00:28:32.640\nI don't have any trusted\ndomain controllers listed.\n\n557\n00:28:32.640 --> 00:28:36.810\nIf I had tied to a open\nLDAP environment or\n\n558\n00:28:36.810 --> 00:28:40.580\na Samba environment, then I would have\nto specify domain controllers and\n\n559\n00:28:40.580 --> 00:28:42.580\nthey would show up here as\ntrusted domain controllers.\n\n560\n00:28:42.580 --> 00:28:44.340\nBut when it's just\na regular Active Directory,\n\n561\n00:28:44.340 --> 00:28:47.800\nall the domain controllers are trusted so\nthey don't get listed here.\n\n562\n00:28:47.800 --> 00:28:48.900\nBut I'm now connected.\n\n563\n00:28:48.900 --> 00:28:52.980\nI've got directory service configuration\nActive Directory and I'm tied into it.\n\n564\n00:28:52.980 --> 00:28:56.580\nAnd so\nnow we can authenticate on the ESXI host\n\n565\n00:28:56.580 --> 00:29:00.490\nas an Active Directory account\neven if the PSC is offline.\n\n566\n00:29:00.490 --> 00:29:02.740\nWith the PSC I connect\nthat to Active Directory.\n\n567\n00:29:02.740 --> 00:29:06.020\nWe set up single sign-in, so I can\nalready log in with the accounts, but\n\n568\n00:29:06.020 --> 00:29:07.740\nassuming the PSC was up.\n\n569\n00:29:07.740 --> 00:29:09.590\nIf it goes down, now I've got a problem.\n\n570\n00:29:09.590 --> 00:29:10.700\nBut now I'm covered.\n\n571\n00:29:10.700 --> 00:29:12.930\nI can log into the host\neven if the PSC goes down.\n\n572\n00:29:12.930 --> 00:29:14.375\nSo nice backup plan.\n\n573\n00:29:14.375 --> 00:29:15.570\n>> Don, we appreciate that.\n\n574\n00:29:15.570 --> 00:29:18.330\nThank you for showing us how to\njoin that to Active Directory.\n\n575\n00:29:18.330 --> 00:29:19.200\nLooking at the clock, though,\n\n576\n00:29:19.200 --> 00:29:21.710\ndoes look like we're coming to\nthe end of another episode.\n\n577\n00:29:21.710 --> 00:29:24.170\nBut before we do,\ndo you have any additional words?\n\n578\n00:29:24.170 --> 00:29:26.240\n>> That's about it for single sign-on.\n\n579\n00:29:26.240 --> 00:29:27.270\nYou guys see, it's pretty simple,\n\n580\n00:29:27.270 --> 00:29:28.900\nit's just kind of knowing\nwhere the options are.\n\n581\n00:29:28.900 --> 00:29:32.650\nWe are going to visit authentication\na little more in our hardening episode.\n\n582\n00:29:32.650 --> 00:29:36.300\nWe're going to talk about vCenter,\nhardening ESXi, hardening,\n\n583\n00:29:36.300 --> 00:29:41.290\nwhat's the other thing, vCenter,\nESXi, and the virtual machines.\n\n584\n00:29:41.290 --> 00:29:44.350\nSo we'll talk about hardening those and\nso we'll dabble in some of these settings\n\n585\n00:29:44.350 --> 00:29:47.670\nagain later on, but these are the main\nones we need to know about, SSO and,\n\n586\n00:29:47.670 --> 00:29:49.130\nkind of what's on the exam.\n\n587\n00:29:49.130 --> 00:29:51.050\nYou don't have to use all\nthe features we talked about.\n\n588\n00:29:51.050 --> 00:29:53.680\nYou don't have to use SSO at all, really,\n\n589\n00:29:53.680 --> 00:29:56.660\nyou can use all local accounts if\nyou want, it just makes life harder.\n\n590\n00:29:56.660 --> 00:29:59.480\nSo pick and choose the pieces\nfrom that that sounded good.\n\n591\n00:29:59.480 --> 00:30:01.900\nUse those in your environment and\nit will work out really well.\n\n592\n00:30:01.900 --> 00:30:03.920\n>> Don, thank you for\njoining us in the studios again, and\n\n593\n00:30:03.920 --> 00:30:05.450\nthank you to the viewers for watching.\n\n594\n00:30:05.450 --> 00:30:08.160\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n595\n00:30:08.160 --> 00:30:08.880\n>> And I'm Don Pezet.\n\n596\n00:30:08.880 --> 00:30:11.118\n>> And we'll see you next time.\n\n597\n00:30:11.118 --> 00:30:19.030\n[MUSIC]\n\n",
          "vimeoId": "168555508"
        },
        {
          "description": "In this episode, Wes and Don demonstrate how to reduce the attack surface of vSphere by using a security practice called hardening. They look at how to harden ESXi hosts by disabling services, firewall configuration and host profiles.",
          "length": "2582",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-3-1-hardening_vsphere-052616-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-3-1-hardening_vsphere-052616-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-3-1-hardening_vsphere-052616-1-sm.jpg",
          "title": "Hardening vShpere",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:03.435\n[SOUND]\n\n2\n00:00:03.435 --> 00:00:11.935\n[MUSIC]\n\n3\n00:00:11.935 --> 00:00:16.096\nWelcome back to another exciting episode\nhere at ITPro-TV, I'm your host Wes Bryan\n\n4\n00:00:16.096 --> 00:00:19.577\nand today's episode we're continuing\nthrough our series in VMware.\n\n5\n00:00:19.577 --> 00:00:20.680\nMore specifically,\n\n6\n00:00:20.680 --> 00:00:24.450\nwe're continuing on in the VMware\ncertified professional version 6.\n\n7\n00:00:24.450 --> 00:00:26.940\nJoining me back in the studios is\nnone other than Mr. Don Pezet.\n\n8\n00:00:26.940 --> 00:00:28.220\nDon, how are you today doing sir?\n\n9\n00:00:28.220 --> 00:00:29.160\n>> I'm doing great Wes.\n\n10\n00:00:29.160 --> 00:00:32.080\nReady to drive right back\ninto vSphere Security.\n\n11\n00:00:32.080 --> 00:00:34.740\nIn the last couple of episodes,\nwe've taken a look at things like\n\n12\n00:00:34.740 --> 00:00:37.590\nsingle sign on and\npermissions management, user accounts.\n\n13\n00:00:37.590 --> 00:00:38.250\nAll that good stuff.\n\n14\n00:00:38.250 --> 00:00:42.640\nIn this episode, we're gonna switch gears\nand talk about hardening our systems.\n\n15\n00:00:42.640 --> 00:00:44.970\nNow, what do I mean by hardening?\n\n16\n00:00:44.970 --> 00:00:49.590\nWell, when you're doing an initial\ninstall of software, let say its vCenter,\n\n17\n00:00:49.590 --> 00:00:51.090\nreally any program in the world.\n\n18\n00:00:51.090 --> 00:00:53.650\nYou just hit next to bunch of times and\ninstalls.\n\n19\n00:00:53.650 --> 00:00:55.630\nIt's gonna install in a default manner.\n\n20\n00:00:55.630 --> 00:01:00.440\nAnd a default manner is designed to be the\nmost suitable for every user out there.\n\n21\n00:01:00.440 --> 00:01:03.290\nIt's gonna like, try to meet the needs\nof the lowest common denominators so\n\n22\n00:01:03.290 --> 00:01:07.320\nthat everybody is, at least\nmoderately happy with the end result.\n\n23\n00:01:07.320 --> 00:01:10.470\nOn a positive side, that means your\nsystem's gonna work right out of the box.\n\n24\n00:01:10.470 --> 00:01:11.630\nThat's good.\n\n25\n00:01:11.630 --> 00:01:16.130\nBut on a negative side, it means there's a\nlot of things that are gonna be turned on\n\n26\n00:01:16.130 --> 00:01:18.340\nthat you don't unnecessarily use.\n\n27\n00:01:18.340 --> 00:01:19.970\nAnd if you don't use it,\n\n28\n00:01:19.970 --> 00:01:23.830\nthat's all stuff that is what's called\nincreasing your attack surface.\n\n29\n00:01:23.830 --> 00:01:25.650\nWhen a hacker tries to\nbreak into your system,\n\n30\n00:01:25.650 --> 00:01:27.830\nthey're gonna look at all of\nthings that you're running and\n\n31\n00:01:27.830 --> 00:01:30.600\nthey're gonna try to find\nthe weakest element and get into it.\n\n32\n00:01:30.600 --> 00:01:33.620\nSo if there's things that you're not\nusing, you should turn them off.\n\n33\n00:01:33.620 --> 00:01:36.160\nTurn them off or restrict access.\n\n34\n00:01:36.160 --> 00:01:39.912\nIn that way, when that hacker looks to\nsee all the stuff that can be attacked,\n\n35\n00:01:39.912 --> 00:01:42.397\nthey only see stuff that\nyou're actually using and\n\n36\n00:01:42.397 --> 00:01:45.530\nyou can focus on making\nthose as secure as possible.\n\n37\n00:01:45.530 --> 00:01:47.940\nSo, in this episode, I say episode,\n\n38\n00:01:47.940 --> 00:01:50.552\nit's probably gonna be more than one\nepisode cuz I got a lot to cover here.\n\n39\n00:01:50.552 --> 00:01:55.110\nWe're gonna talk about hardening\nthe ESXI hosts, we're gonna talk about\n\n40\n00:01:55.110 --> 00:01:59.390\nhardening the center, and we're gonna talk\nabout hardening our virtual machines to\n\n41\n00:01:59.390 --> 00:02:03.310\nprotect them from various types of\nattacks, and denial service and\n\n42\n00:02:03.310 --> 00:02:06.380\nall the various other things that\nthe baddies do out there on the networks.\n\n43\n00:02:06.380 --> 00:02:10.000\nThat's kind of our goal,\nwe've got a lot to get through.\n\n44\n00:02:10.000 --> 00:02:12.300\nSo, let's kick things\noff with an ESXI hosts.\n\n45\n00:02:12.300 --> 00:02:14.010\nI want to take an ESXI host and harden it.\n\n46\n00:02:14.010 --> 00:02:18.140\nNow, way back, episode one or\ntwo I dont know.\n\n47\n00:02:18.140 --> 00:02:20.960\nWe saw installing ESXI and\nit was super easy.\n\n48\n00:02:20.960 --> 00:02:25.180\nWe booted off a CD, we hit next a bunch\nof times, we picked a hard drive and\n\n49\n00:02:25.180 --> 00:02:26.490\nit booted up, right?\n\n50\n00:02:26.490 --> 00:02:28.010\nWe were running ESXI.\n\n51\n00:02:28.010 --> 00:02:32.120\nThen we imported it into our vCenter\nenvironment so we can manage it.\n\n52\n00:02:32.120 --> 00:02:33.550\nNow, it's up and it's running.\n\n53\n00:02:33.550 --> 00:02:37.980\nWell, there's a lot of services and\na lot of network access on those ESXI\n\n54\n00:02:37.980 --> 00:02:42.240\nboxes that we may not need or\nwe may want to restrict, and\n\n55\n00:02:42.240 --> 00:02:45.950\nthe default configuration is\nactually a little on the loose side.\n\n56\n00:02:45.950 --> 00:02:48.400\nSo, let's walk through that and\ntake a look at what we've got.\n\n57\n00:02:48.400 --> 00:02:49.902\nSo, I'm in my vCenter environment here.\n\n58\n00:02:49.902 --> 00:02:52.320\nI'm gonna do this all\nthrough vCenter if I can.\n\n59\n00:02:52.320 --> 00:02:56.508\nAnd I'm gonna go into my host and\nclusters and I'm gonna find my host.\n\n60\n00:02:56.508 --> 00:02:59.710\nSo I'm gonna find this plabESX01.\n\n61\n00:02:59.710 --> 00:03:01.559\nAnd when I go into Manage,\n\n62\n00:03:02.650 --> 00:03:06.480\nunder manage we'll start to see our\nvarious settings and information.\n\n63\n00:03:06.480 --> 00:03:10.200\nAnd what I'm looking for\nis the security profile right?\n\n64\n00:03:10.200 --> 00:03:14.340\nWhen you look at it, you've got things\nlike your licensing your system and so on.\n\n65\n00:03:14.340 --> 00:03:19.150\nAnd in here, we'll find our\nsecurity profile buried away.\n\n66\n00:03:20.370 --> 00:03:22.220\nRight here, there you go,\nsecurity profile.\n\n67\n00:03:22.220 --> 00:03:24.550\nAnd finding it is apparently\nthe hardest part.\n\n68\n00:03:24.550 --> 00:03:26.640\nAnd under the security profile,\nyou're gonna see two things and\n\n69\n00:03:26.640 --> 00:03:28.200\neach of these need your attention.\n\n70\n00:03:28.200 --> 00:03:32.760\nThe first one is the firewall, there is a\nnetwork firewall on every single ESXI box,\n\n71\n00:03:32.760 --> 00:03:36.220\nit's a software firewall and\nit runs right from that machine.\n\n72\n00:03:36.220 --> 00:03:40.500\nNow, why don't we emphasize that,\nwell, with software firewalls,\n\n73\n00:03:40.500 --> 00:03:41.380\nthey're very effective.\n\n74\n00:03:41.380 --> 00:03:44.310\nWe can stop traffic on that host.\n\n75\n00:03:44.310 --> 00:03:48.470\nThe negative of a software firewall\nis that, whatever the attack is,\n\n76\n00:03:48.470 --> 00:03:53.020\nhas already made it all the way to the\nhost and it's up to the host to stop it.\n\n77\n00:03:53.020 --> 00:03:56.730\nSo it's always better to stop that\ntraffic with a real firewall,\n\n78\n00:03:56.730 --> 00:03:58.940\na physical firewall on your network.\n\n79\n00:03:58.940 --> 00:04:02.960\nAnd a firewall in between your LAN and\nyour WAN, in between the internet and you.\n\n80\n00:04:02.960 --> 00:04:06.830\nBut those kinds of firewalls\ndon't stop internal attacks.\n\n81\n00:04:06.830 --> 00:04:09.270\nI could have a disgruntled\nemployee on my network.\n\n82\n00:04:09.270 --> 00:04:13.950\nThey're behind the firewall and now\nthey're trying to access this ESXI box, so\n\n83\n00:04:13.950 --> 00:04:18.520\nthe software firewall will not as good\nas a real one, is still incredibly\n\n84\n00:04:18.520 --> 00:04:22.430\nimportant because it's gonna be protecting\nus from those internal attacks.\n\n85\n00:04:22.430 --> 00:04:25.440\nAnd sadly, I saw some statistics.\n\n86\n00:04:25.440 --> 00:04:29.680\nIt's like over 50% of attacks originate\nfrom inside of an organization,\n\n87\n00:04:29.680 --> 00:04:32.830\nthe insider attacks and that's not good.\n\n88\n00:04:32.830 --> 00:04:37.430\nSo, when we look at this, I want you to\nnotice the default firewall configuration.\n\n89\n00:04:37.430 --> 00:04:42.820\nWe've got things like the CIM Server,\nNFC, Virtuals and DHCP, DNS.\n\n90\n00:04:42.820 --> 00:04:47.540\nAs I look down this list, it's got the\nprotocols defined, it's got their ports\n\n91\n00:04:47.540 --> 00:04:53.730\ndefine, and look at who can get at them,\nall, all, all.\n\n92\n00:04:53.730 --> 00:04:54.737\nIt's wide open.\n\n93\n00:04:54.737 --> 00:04:59.630\nIt is completely wide open,\nanybody can access any one of these ports.\n\n94\n00:04:59.630 --> 00:05:01.500\nNow, should I be terrified and worried?\n\n95\n00:05:01.500 --> 00:05:04.010\nNo, I mean maybe a little worried,\nthis much.\n\n96\n00:05:04.010 --> 00:05:08.590\nBut I don't need to be terrified because\nall of these are tied to services.\n\n97\n00:05:08.590 --> 00:05:09.850\nFor example, SSH.\n\n98\n00:05:09.850 --> 00:05:10.770\nOkay.\n\n99\n00:05:10.770 --> 00:05:13.180\nWho can open up an SSH\nconnection to my server?\n\n100\n00:05:13.180 --> 00:05:16.090\nAccording to this, all IP's.\n\n101\n00:05:16.090 --> 00:05:20.530\nAnybody can open up an SSH connection\nto this server, it's set to all.\n\n102\n00:05:20.530 --> 00:05:22.680\nBut if I scroll down to the next section.\n\n103\n00:05:22.680 --> 00:05:25.850\nThe next section are the services\nthemselves right.\n\n104\n00:05:25.850 --> 00:05:27.630\nSo here I can see my services.\n\n105\n00:05:27.630 --> 00:05:31.980\nAnd I can see which services are running\nand which services are stopped.\n\n106\n00:05:31.980 --> 00:05:37.840\nAnd what you may find is that,\nSSH as a service, oop, if I can get my\n\n107\n00:05:37.840 --> 00:05:44.350\nlittle scroll to not go crazy on me, there\nwe go, the SSH service may not be running.\n\n108\n00:05:44.350 --> 00:05:48.340\nIf SSH is not running, do I care if\nthe port's open on the firewall?\n\n109\n00:05:48.340 --> 00:05:51.000\nNo, sure, an attacker can\nget through port 22, great.\n\n110\n00:05:51.000 --> 00:05:53.620\nAnd they connect to the server and\nwhat do they get?\n\n111\n00:05:53.620 --> 00:05:54.270\nNothing.\n\n112\n00:05:54.270 --> 00:05:55.080\nIt just sits there and\n\n113\n00:05:55.080 --> 00:05:58.850\nthe connection times out because\nthere was no server to answer them.\n\n114\n00:05:58.850 --> 00:06:01.740\nBut in my case, SSH is running.\n\n115\n00:06:01.740 --> 00:06:03.480\nIt's running, it's turned on.\n\n116\n00:06:03.480 --> 00:06:08.110\nSo, an attacker can get through the\nfirewall, and connect to the SSH server.\n\n117\n00:06:08.110 --> 00:06:09.888\nNow, do I need to be terrified about that?\n\n118\n00:06:09.888 --> 00:06:13.670\nNot necessarily cuz what do\nI need to connect with SSH?\n\n119\n00:06:13.670 --> 00:06:15.070\nI need to authenticate.\n\n120\n00:06:15.070 --> 00:06:16.650\nI need to use name and password.\n\n121\n00:06:16.650 --> 00:06:21.730\nSo, I still have extra steps on top of\nthis that are gonna protect me, but\n\n122\n00:06:21.730 --> 00:06:25.270\nthe real lesson here is, there may be\nservices on here we don't care about.\n\n123\n00:06:25.270 --> 00:06:27.830\nThere may be services that we don't use.\n\n124\n00:06:27.830 --> 00:06:32.865\nSo for example, the direct console UI.\n\n125\n00:06:32.865 --> 00:06:33.420\nOkay.\n\n126\n00:06:33.420 --> 00:06:36.290\nThis is the direct console user interface.\n\n127\n00:06:36.290 --> 00:06:38.470\nSomebody could walk to\nthat physical machine and\n\n128\n00:06:38.470 --> 00:06:41.200\naccess that user interface\nright there on the console.\n\n129\n00:06:41.200 --> 00:06:42.750\nI may not use that.\n\n130\n00:06:42.750 --> 00:06:45.280\nIf I'm not using it, I should turn it off.\n\n131\n00:06:45.280 --> 00:06:46.380\nTurn it off, I'm not using it.\n\n132\n00:06:46.380 --> 00:06:49.270\nIf I'm not using SNMP, turn it off.\n\n133\n00:06:49.270 --> 00:06:53.630\nIf I'm not using Syslog,\nwhich I'm sure I am, but if I wasn't,\n\n134\n00:06:53.630 --> 00:06:54.550\nyou could turn it off.\n\n135\n00:06:54.550 --> 00:06:56.670\nAny of these services,\nyou can turn them off.\n\n136\n00:06:56.670 --> 00:06:58.300\nAll you gonna do is hit\nthe Edit button up here.\n\n137\n00:06:58.300 --> 00:07:02.120\nAnd when you're editing the services,\nyou can go through and you can pick them.\n\n138\n00:07:02.120 --> 00:07:06.330\nSo I can pick SSH, for example, and I\ncould stop it, and I could tell it not to\n\n139\n00:07:06.330 --> 00:07:10.470\nstart back up again, and I can set it\nto start and stop manually, right?\n\n140\n00:07:10.470 --> 00:07:13.690\nThat way, it'll only start when I want\nit to, and I'm gonna leave it stopped.\n\n141\n00:07:13.690 --> 00:07:15.345\nNow, I don't have to\nworry about SSH anymore.\n\n142\n00:07:15.345 --> 00:07:16.170\nOkay?\n\n143\n00:07:16.170 --> 00:07:19.560\nSo if you're not using a service, stop it.\n\n144\n00:07:19.560 --> 00:07:20.580\nDon't let it run.\n\n145\n00:07:20.580 --> 00:07:21.080\nTurn it off.\n\n146\n00:07:22.370 --> 00:07:25.590\nBut, what if I need it,\nI mean there's SSH.\n\n147\n00:07:25.590 --> 00:07:28.740\nThere are times where I might\nneed the SSH into this host.\n\n148\n00:07:28.740 --> 00:07:29.980\nSo I don't wanna stop SSH.\n\n149\n00:07:30.980 --> 00:07:34.480\nBut at the same I don't want just\nanybody being able to connect to it.\n\n150\n00:07:34.480 --> 00:07:36.160\nSo that's where the firewall comes in,\n\n151\n00:07:36.160 --> 00:07:38.040\nthat's why these two\nare packaged together.\n\n152\n00:07:38.040 --> 00:07:40.590\nStopping the service is 100% effective.\n\n153\n00:07:40.590 --> 00:07:44.270\nIf I stop SSH,\nnobody can connect to it, it's safe.\n\n154\n00:07:45.710 --> 00:07:49.460\nBut if I want even one person to connect\nto it, I've got to start the service.\n\n155\n00:07:49.460 --> 00:07:51.770\nAnd so now that's no longer safe anymore,\nright?\n\n156\n00:07:51.770 --> 00:07:54.070\nSo now, I go to the firewall instead.\n\n157\n00:07:54.070 --> 00:07:58.120\nAnd when I go to the firewall,\nI got a few choices here what I wanna do.\n\n158\n00:07:58.120 --> 00:08:00.872\nI'm gonna find SSH in the list again.\n\n159\n00:08:00.872 --> 00:08:05.471\nThe list which, I didn't point this on,\nI really should have When you're\n\n160\n00:08:05.471 --> 00:08:09.884\nlooking at the firewall the firewall's\nactually divided into two pieces.\n\n161\n00:08:09.884 --> 00:08:14.646\nIt's hard to tell but there's a section\ncalled Incoming Connections and\n\n162\n00:08:14.646 --> 00:08:17.710\na section called Outgoing Connections.\n\n163\n00:08:17.710 --> 00:08:21.440\nSo this is data from inside\nthe server going out and\n\n164\n00:08:21.440 --> 00:08:23.480\ndata from outside the server coming in.\n\n165\n00:08:23.480 --> 00:08:25.540\nWhy would we want to filter\nOutgoing Connections?\n\n166\n00:08:25.540 --> 00:08:30.430\nOutgoing means the ESXI box tries to\nreach out to something on its own, okay?\n\n167\n00:08:30.430 --> 00:08:34.050\nWhy would I need to filter that?\n\n168\n00:08:34.050 --> 00:08:36.340\nWell, there's something\ncalled a leap frog attack.\n\n169\n00:08:36.340 --> 00:08:41.250\nA leap frog attack is where\nmaybe somebody on the Internet\n\n170\n00:08:41.250 --> 00:08:46.070\nis not allowed to access my active\ndirectory domain controller, right?\n\n171\n00:08:46.070 --> 00:08:47.900\nSo somebody on the Internet cannot\nget to my domain controller.\n\n172\n00:08:47.900 --> 00:08:54.320\nBut, my ESXi box, it might be allowed\nto get to the domain controller.\n\n173\n00:08:54.320 --> 00:08:56.070\nIt's in my DMZ or whatever and\n\n174\n00:08:56.070 --> 00:08:57.940\nI've allowed it to get to\nthe domain controller.\n\n175\n00:08:57.940 --> 00:09:01.910\nSo an attacker could break\nin the ESXi box, and\n\n176\n00:09:01.910 --> 00:09:05.370\nthen leapfrog through it to\nget to the domain controller.\n\n177\n00:09:05.370 --> 00:09:08.460\nSo, I might want to filter outgoing\nconnections to prevent that.\n\n178\n00:09:08.460 --> 00:09:11.400\nNow, I'll tell you, it's not terribly\neffective, cuz if the hacker is already in\n\n179\n00:09:11.400 --> 00:09:15.000\nthe ESXi box then they can go and adjust\nthe firewall and turn off these rules.\n\n180\n00:09:15.000 --> 00:09:18.460\nSo you've got the outgoing connections\nrule, but they're not terribly effective.\n\n181\n00:09:18.460 --> 00:09:20.360\nSo we don't normally mess with those.\n\n182\n00:09:20.360 --> 00:09:21.850\nWe don't necessarily have to tweak them.\n\n183\n00:09:21.850 --> 00:09:24.570\nYou can, but in coming connections\nthe one we care about.\n\n184\n00:09:24.570 --> 00:09:27.110\nAnd I couldn't find SSH when\nI was looking real quick and\n\n185\n00:09:27.110 --> 00:09:29.180\nit was because I was in the outgoing\nconnections by accident.\n\n186\n00:09:29.180 --> 00:09:31.570\nSo I need to look at in coming and\n\n187\n00:09:31.570 --> 00:09:36.290\ninside of incoming I should be able\nto find SSH, there it is right there.\n\n188\n00:09:36.290 --> 00:09:39.700\nAnd it's set so that all users can use it.\n\n189\n00:09:39.700 --> 00:09:41.210\nNow, I'm gonna edit that.\n\n190\n00:09:41.210 --> 00:09:45.580\nSo, I need to go and find my edit\nbutton which is up at the top and\n\n191\n00:09:45.580 --> 00:09:48.570\nI'm gonna edit that and\nI'm gonna refine SSH.\n\n192\n00:09:48.570 --> 00:09:50.880\nNow, when you look at it here,\n\n193\n00:09:50.880 --> 00:09:53.790\nit looks a little different\nthan what we saw a moment ago.\n\n194\n00:09:53.790 --> 00:09:56.190\nSo I'm not just seeing\nstraight-up firewall ports.\n\n195\n00:09:56.190 --> 00:09:59.590\nI'm seeing SSH because I had\nhighlighted it and here it is.\n\n196\n00:09:59.590 --> 00:10:03.000\nAnd it's showing the two\ndifferent modes of SSH.\n\n197\n00:10:03.000 --> 00:10:07.200\nThis machine can be a SSH Client,\nmaking outgoing connections, and\n\n198\n00:10:07.200 --> 00:10:10.280\nit can be an SSH server,\nreceiving incoming connections.\n\n199\n00:10:10.280 --> 00:10:13.832\nAnd so, I've got Incoming port 22\nas enabled, so checkmark by it.\n\n200\n00:10:13.832 --> 00:10:16.890\nOutgoing 22 Is disabled.\n\n201\n00:10:16.890 --> 00:10:20.020\nI can't be an SSH client which is\nperfectly fine with me that's not how I'm\n\n202\n00:10:20.020 --> 00:10:21.530\ngoing to use it anyway.\n\n203\n00:10:21.530 --> 00:10:27.180\nSo I can see that it is enabled and\nright now it just up and running.\n\n204\n00:10:27.180 --> 00:10:29.950\nIt's TCP port 22 what we expected and\n\n205\n00:10:29.950 --> 00:10:34.420\nright down here I see allow\nconnections from any IP address.\n\n206\n00:10:34.420 --> 00:10:35.440\nIt's wide open.\n\n207\n00:10:35.440 --> 00:10:37.420\nAnybody can connect to this thing.\n\n208\n00:10:37.420 --> 00:10:41.400\nSo, I might want to restrict that, and\nyou can restrict it a few different ways.\n\n209\n00:10:41.400 --> 00:10:45.580\nSo, when you uncheck that you can then\nput in who's allowed to get to it.\n\n210\n00:10:45.580 --> 00:10:47.480\nYou might wanna be really specific.\n\n211\n00:10:47.480 --> 00:10:53.897\nHey, my laptop is at 192.168.0.222, so I'm\ngonna allow that IP specifically, right?\n\n212\n00:10:53.897 --> 00:11:00.315\nAnd maybe Wes's laptop is 192.168.0.174,\n\n213\n00:11:00.315 --> 00:11:04.813\nthat's great, I can put those in there.\n\n214\n00:11:04.813 --> 00:11:08.940\nAnd now Wes and\nI will both be able to SSH into this box.\n\n215\n00:11:08.940 --> 00:11:10.120\nAssuming we have a username and password.\n\n216\n00:11:10.120 --> 00:11:12.500\nStill have to have a username and\npassword, right?\n\n217\n00:11:12.500 --> 00:11:15.430\nBut now I've restricted IPs\nthat are allowed to connect.\n\n218\n00:11:15.430 --> 00:11:18.290\nThe challenge here though is,\nwhat if we use DHCP?\n\n219\n00:11:18.290 --> 00:11:21.690\nWell, I might be 222 today,\nbut tomorrow I might be 135.\n\n220\n00:11:21.690 --> 00:11:26.380\nSo, I would need to put DHCP\nreservations in for these laptops and so\n\n221\n00:11:26.380 --> 00:11:28.450\nit becomes a bit of a hassle, right?\n\n222\n00:11:28.450 --> 00:11:32.773\nSo instead what I might choose is say I'm\ngonna put all my network administrators on\n\n223\n00:11:32.773 --> 00:11:33.462\none subnet.\n\n224\n00:11:33.462 --> 00:11:39.202\nMaybe all of my network administrators\nare on the 192.168.5 network.\n\n225\n00:11:39.202 --> 00:11:40.676\nAnd so, I can add that.\n\n226\n00:11:40.676 --> 00:11:45.745\nI can say 192.168.5.0/24\n\n227\n00:11:45.745 --> 00:11:50.096\nThat's a sider subnet short hand.\n\n228\n00:11:50.096 --> 00:11:52.103\nAnd so, I'm doing this sider notation.\n\n229\n00:11:52.103 --> 00:11:55.277\n1.92.168.5.0/24.\n\n230\n00:11:55.277 --> 00:12:01.927\nThat means 192.168.5.1 all\nthe way through 192.168.5.254.\n\n231\n00:12:01.927 --> 00:12:04.060\nSo I'm getting that whole group.\n\n232\n00:12:04.060 --> 00:12:05.950\nRight there in one and I can mix and\n\n233\n00:12:05.950 --> 00:12:10.450\nmatch, I'm mixing single IP's\nwith entire ranges of IP's.\n\n234\n00:12:10.450 --> 00:12:14.444\nAnd so, you can plug that in to your\nhertz content and if you forget it,\n\n235\n00:12:14.444 --> 00:12:19.256\nit's always got that little example right\nhere with They show the different ways you\n\n236\n00:12:19.256 --> 00:12:22.064\ncan kind of format it and\nthey show like a / 22.\n\n237\n00:12:22.064 --> 00:12:26.690\n/24s are really common /16s,\n/8s is the ones that we normally see.\n\n238\n00:12:27.740 --> 00:12:28.930\nAlright so I'm gonna punch those in.\n\n239\n00:12:28.930 --> 00:12:31.970\nSo now, is SSH enabled?\n\n240\n00:12:31.970 --> 00:12:34.760\nYes, SSH is still turned on, right?\n\n241\n00:12:34.760 --> 00:12:39.828\nBut I don't have to worry about\ninternal employees trying to get to it,\n\n242\n00:12:39.828 --> 00:12:44.980\nthey shouldn't be able to get to it\nbecause I've now restricted it, and\n\n243\n00:12:44.980 --> 00:12:50.724\nif I come in here to find SSH in my list,\nwhoops, my mouse is being compounded here\n\n244\n00:12:50.724 --> 00:12:56.153\nso let me find s is h in my list again and\nnow what we'll see is that it updates.\n\n245\n00:12:56.153 --> 00:12:57.900\nNow, my screen actually hasn't refreshed.\n\n246\n00:12:57.900 --> 00:13:04.390\nSo see how SSH for\nme is still showing TCP port 22 and All.\n\n247\n00:13:04.390 --> 00:13:05.500\nSo it hasn't updated.\n\n248\n00:13:05.500 --> 00:13:09.360\nWell down just a little bit, see we've got\nthis Refresh buttons, that's refresh for\n\n249\n00:13:09.360 --> 00:13:10.150\nthe services.\n\n250\n00:13:10.150 --> 00:13:12.270\nI don't remember if we have one for\nthe firewall or not.\n\n251\n00:13:12.270 --> 00:13:13.090\nAnd, we don't.\n\n252\n00:13:13.090 --> 00:13:14.060\nSo, if it doesn't refresh,\n\n253\n00:13:14.060 --> 00:13:17.380\nyou can always use vCenter's big\nfat Refresh button up there.\n\n254\n00:13:17.380 --> 00:13:18.570\nThat's what I'm gonna hit.\n\n255\n00:13:18.570 --> 00:13:19.300\nAnd refresh that.\n\n256\n00:13:19.300 --> 00:13:21.450\nAnd we should see that\nit no longer says all.\n\n257\n00:13:22.460 --> 00:13:24.650\nAlways a good idea to check this.\n\n258\n00:13:24.650 --> 00:13:28.730\nBecause sometimes you might make a change,\nand I'm guilty of this, I think I've done\n\n259\n00:13:28.730 --> 00:13:32.120\nit in the show already, where sometimes\nI'll hit Cancel instead of OK.\n\n260\n00:13:32.120 --> 00:13:35.230\nAnd I think the setting is in there,\nand then it turns out that it's not.\n\n261\n00:13:35.230 --> 00:13:37.610\nBut I can see, just whiz by my screen.\n\n262\n00:13:37.610 --> 00:13:38.540\nRight there.\n\n263\n00:13:38.540 --> 00:13:42.420\nThe SSH server now shows\nthese are the three IPs or\n\n264\n00:13:42.420 --> 00:13:43.940\nIP ranges that are allowed to get to it.\n\n265\n00:13:43.940 --> 00:13:46.710\nSo I'm restricting access\nto that connection.\n\n266\n00:13:46.710 --> 00:13:47.800\nIt's important that we do this.\n\n267\n00:13:47.800 --> 00:13:49.980\nIt's very simple to go in and punch it in.\n\n268\n00:13:49.980 --> 00:13:52.840\nThe guys at VMware can't do this for\nyou, cuz they don't know your network.\n\n269\n00:13:52.840 --> 00:13:55.290\nThey don't know what IPs you use,\nthey don't know what's internal and\n\n270\n00:13:55.290 --> 00:13:57.190\nthey don't know where\nyour network admins are.\n\n271\n00:13:57.190 --> 00:13:58.740\nIt's up to you to set that.\n\n272\n00:13:58.740 --> 00:14:03.230\nSo, we just need to punch it in, it's not\nhard, you get it set up and there it is.\n\n273\n00:14:03.230 --> 00:14:08.270\nThe hardest part about this is\nwhat if I have 100 ESXI hosts?\n\n274\n00:14:09.340 --> 00:14:14.210\nYou want and go and\nconnect to every single ESXI host, and\n\n275\n00:14:14.210 --> 00:14:15.920\ncan figure this by hand?\n\n276\n00:14:15.920 --> 00:14:16.830\nIt's kind of a nightmare, right?\n\n277\n00:14:16.830 --> 00:14:19.220\nIt's a lot of stuff to put in there,\nit'd be a hassle.\n\n278\n00:14:19.220 --> 00:14:22.930\nStarting and stopping the services,\nopening and closing the firewall ports,\n\n279\n00:14:22.930 --> 00:14:25.360\ngetting all that set, it's kind of a pain.\n\n280\n00:14:25.360 --> 00:14:29.260\nBut the nice part about this is,\nwe can take these settings and\n\n281\n00:14:29.260 --> 00:14:31.790\nturn into what's called\na security profile, right?\n\n282\n00:14:31.790 --> 00:14:34.110\nI mean, it says security\nprofile right here, right.\n\n283\n00:14:34.110 --> 00:14:36.820\nThis is the security profile for\nthis one machine, but\n\n284\n00:14:36.820 --> 00:14:40.250\nwe can turn it into a host profile.\n\n285\n00:14:40.250 --> 00:14:42.990\nA host profile is a collection\nof all of these settings.\n\n286\n00:14:42.990 --> 00:14:46.090\nIt gathers all those settings\ntogether to a host profile, and\n\n287\n00:14:46.090 --> 00:14:50.310\nwe can take that host profile and\napply it to as many machines as we want.\n\n288\n00:14:50.310 --> 00:14:54.620\nI create one host profile, get it set\nup exactly the way that I want it and\n\n289\n00:14:54.620 --> 00:14:57.240\nthen go and\napply it wherever I need, okay?\n\n290\n00:14:57.240 --> 00:15:01.130\nHost Profile's you actually see right\ndown here just two more menu options.\n\n291\n00:15:01.130 --> 00:15:04.870\nIf I go to Host Profile you'll see\nright now my Host Profile is none.\n\n292\n00:15:04.870 --> 00:15:06.270\nI don't have one.\n\n293\n00:15:06.270 --> 00:15:10.190\nI can attach one if I did have one,\nbut I don't, right.\n\n294\n00:15:10.190 --> 00:15:14.400\nSo what I'm gonna need is I'm gonna\nneed to create a host profile.\n\n295\n00:15:14.400 --> 00:15:16.230\nThe way it works right now,\nI need to create one.\n\n296\n00:15:16.230 --> 00:15:18.560\nI don't have it, so\nI'll make one, all right?\n\n297\n00:15:18.560 --> 00:15:21.970\nSo what I'm going to do is,\nI can go about it a few different ways.\n\n298\n00:15:21.970 --> 00:15:24.840\nThere is a centralized place we can\ngo to to mess with the host profiles.\n\n299\n00:15:24.840 --> 00:15:28.920\nIf I go to attach, though, when I go to\nattach It's going to see that I don't have\n\n300\n00:15:28.920 --> 00:15:33.590\nany and\nI thought it gave me a create button, but\n\n301\n00:15:33.590 --> 00:15:36.450\nit actually doesn't, so\nI guess we will do it the other way.\n\n302\n00:15:36.450 --> 00:15:40.130\nSo we need to go an create a host\nprofile based on this particular host.\n\n303\n00:15:40.130 --> 00:15:41.990\nSo I've got PLab ESXL1.\n\n304\n00:15:41.990 --> 00:15:44.420\nI'm going to use as my template.\n\n305\n00:15:44.420 --> 00:15:48.240\nStep one, I need to get it set\nexactly the way that I want it, right.\n\n306\n00:15:48.240 --> 00:15:50.180\nI need to customize the firewall rules.\n\n307\n00:15:50.180 --> 00:15:51.840\nI need to update this, update that.\n\n308\n00:15:51.840 --> 00:15:53.230\nI need to get all those things set.\n\n309\n00:15:53.230 --> 00:15:56.120\nSo right now, I've actually got it set\nkind of a way that I don't want it to be,\n\n310\n00:15:56.120 --> 00:15:59.480\nso I'm gonna edit that SSH rule again.\n\n311\n00:15:59.480 --> 00:16:03.182\nAnd I'm gonna update my IP range.\n\n312\n00:16:03.182 --> 00:16:07.397\nSo I need to make sure that\nI've got the 192.168.0 network.\n\n313\n00:16:07.397 --> 00:16:10.494\nIs what I want, and we'll just\nget rid of the rest of these IPs.\n\n314\n00:16:10.494 --> 00:16:12.054\nAll right, so basically you go in,\n\n315\n00:16:12.054 --> 00:16:14.344\nand you get everything\nconfigured the way you want.\n\n316\n00:16:14.344 --> 00:16:17.258\nWe can always edit these after the fact,\nso it's not set in stone.\n\n317\n00:16:17.258 --> 00:16:18.851\nIt's kind of an initial starting point.\n\n318\n00:16:18.851 --> 00:16:20.409\nSo you get everything\nset the way you want.\n\n319\n00:16:20.409 --> 00:16:23.857\nYour security profile in, and your other\nsettings, cuz they'll all be part of\n\n320\n00:16:23.857 --> 00:16:27.540\nthe host profile if you choose and\nthen we can deploy it together.\n\n321\n00:16:27.540 --> 00:16:29.830\nAll right so\nI've now got that firewall set.\n\n322\n00:16:29.830 --> 00:16:32.372\nI'm gonna just refresh real quick and\nmake sure that takes effect.\n\n323\n00:16:32.372 --> 00:16:35.562\nI don't wanna get burned on it\nnot actually taking effect.\n\n324\n00:16:35.562 --> 00:16:36.311\nAnd it did.\n\n325\n00:16:36.311 --> 00:16:38.530\nOkay, I can see that setting is\nin there the way that I want it.\n\n326\n00:16:38.530 --> 00:16:41.608\nOkay, now I can go and\nI can create a host profile.\n\n327\n00:16:41.608 --> 00:16:46.302\nSo I'm gonna jump back to my home page and\ninside the homepage,\n\n328\n00:16:46.302 --> 00:16:50.657\nwe're gonna need to jump in and\ncreate this host profile.\n\n329\n00:16:50.657 --> 00:16:54.875\nAnd what you'll find is that these get\nburied away in a few different places.\n\n330\n00:16:54.875 --> 00:16:58.906\nBut if you look right here you've\ngot policies and profiles and\n\n331\n00:16:58.906 --> 00:17:02.261\nunder those you'll find\nhost profiles right here.\n\n332\n00:17:02.261 --> 00:17:04.967\nAnd in my host profiles right here,\nI don't have any.\n\n333\n00:17:04.967 --> 00:17:06.082\nSo, I need to create one.\n\n334\n00:17:06.082 --> 00:17:08.460\nAnd you'll see I have two\ndifferent buttons up here.\n\n335\n00:17:08.460 --> 00:17:10.950\nOne of them is gonna let\nme import a host profile.\n\n336\n00:17:10.950 --> 00:17:12.931\nSo if I had written one somewhere\nelse I could import it.\n\n337\n00:17:12.931 --> 00:17:15.023\nThe host profile is really an XML file.\n\n338\n00:17:15.023 --> 00:17:17.729\nSo you can take this XML file and\nlay out all your settings and\n\n339\n00:17:17.729 --> 00:17:19.636\nthen import it quick and easy right here.\n\n340\n00:17:19.636 --> 00:17:22.751\nSo if you've already got it made\nin another V center environment,\n\n341\n00:17:22.751 --> 00:17:23.982\nyou can bring it right in.\n\n342\n00:17:23.982 --> 00:17:29.084\nBut I don't, so I'm gonna hit this green\nplus sign to extract a profile from host.\n\n343\n00:17:29.084 --> 00:17:31.253\nSo that's what it's saying,\nextract host profile.\n\n344\n00:17:31.253 --> 00:17:36.224\nAnd so now you can pick the host that\nyou have configured the way you want.\n\n345\n00:17:36.224 --> 00:17:38.224\nSo I've got plabesx01.\n\n346\n00:17:38.224 --> 00:17:41.921\nThat one is set exactly the way I want it,\nbut I got a warning flag cuz it's in\n\n347\n00:17:41.921 --> 00:17:44.829\nan evaluation license right now and\nexpires in 60 days.\n\n348\n00:17:44.829 --> 00:17:45.780\nThat's what that warning is.\n\n349\n00:17:45.780 --> 00:17:50.255\nSo I'm gonna choose that host And\nonce we pick it, and you can filter and\n\n350\n00:17:50.255 --> 00:17:55.264\nsearch, you can pick your different\nvCenter Servers if you have more than one.\n\n351\n00:17:55.264 --> 00:17:58.058\nYou do whatever it is that\nyou need to find that host.\n\n352\n00:17:58.058 --> 00:18:02.588\nAnd once you find it,\nyou can just hit the good old next button.\n\n353\n00:18:02.588 --> 00:18:04.140\nAnd now you can give it a name.\n\n354\n00:18:04.140 --> 00:18:09.400\nAnd so I might call this my\nProduction ESXI Host Profile or\n\n355\n00:18:09.400 --> 00:18:13.027\nthis might be my DMZ ESXI Host Profile.\n\n356\n00:18:13.027 --> 00:18:14.117\nI might have different needs.\n\n357\n00:18:14.117 --> 00:18:15.699\nI might have a research and\ndevelopment one.\n\n358\n00:18:15.699 --> 00:18:19.399\nI might have more than one host profile\nto meet the particular needs of that\n\n359\n00:18:19.399 --> 00:18:20.123\ndeployment.\n\n360\n00:18:20.123 --> 00:18:25.146\nBut I'll just call this one\nmy Production Host Profile.\n\n361\n00:18:25.146 --> 00:18:26.915\nWe'll hit next.\n\n362\n00:18:26.915 --> 00:18:28.565\nAnd then, it's ready to complete.\n\n363\n00:18:28.565 --> 00:18:31.520\nWe can hit finish, and\nit's going to go and extract it.\n\n364\n00:18:31.520 --> 00:18:33.413\nWhat it's going to do,\nand this takes a minute.\n\n365\n00:18:33.413 --> 00:18:37.977\nI think I've got my Recent tasks minimize\nright now so let me blow that up.\n\n366\n00:18:37.977 --> 00:18:38.942\nThere it goes.\n\n367\n00:18:38.942 --> 00:18:40.772\nSo it's creating a host profile and\n\n368\n00:18:40.772 --> 00:18:44.737\nthis will take a minute cuz what it's\ngonna do is it's gonna go to that host and\n\n369\n00:18:44.737 --> 00:18:47.488\nit's gonna collect every\nsingle setting from ESXI.\n\n370\n00:18:47.488 --> 00:18:50.325\nSo it's pulling the whole config.\n\n371\n00:18:50.325 --> 00:18:55.040\nThen it's gonna go through a delete any\nsettings That are unique to that machine.\n\n372\n00:18:55.040 --> 00:18:56.467\nFor example Hostname.\n\n373\n00:18:56.467 --> 00:18:59.602\nDo I want all of my ESXI host\nto have the same host name?\n\n374\n00:18:59.602 --> 00:19:02.578\nNo, so it's gonna delete that license.\n\n375\n00:19:02.578 --> 00:19:04.978\nAm I using the same License\non every ESXI host?\n\n376\n00:19:04.978 --> 00:19:06.926\nNo, so it's deleting the license.\n\n377\n00:19:06.926 --> 00:19:10.378\nIt's deleting any setting\nthat should be unique and\n\n378\n00:19:10.378 --> 00:19:13.052\nwhat's left are the generic settings.\n\n379\n00:19:13.052 --> 00:19:15.760\nThe ones that we can apply to\nevery machine that's out there.\n\n380\n00:19:15.760 --> 00:19:17.500\nAnd so when it's done,\n\n381\n00:19:17.500 --> 00:19:22.880\nI now have a production ESXi host\nprofile sitting right there.\n\n382\n00:19:22.880 --> 00:19:25.323\nNotice compliant hosts, zero.\n\n383\n00:19:25.323 --> 00:19:30.684\nI extracted it from the host but I haven't\nactually applied it to anybody yet.\n\n384\n00:19:30.684 --> 00:19:33.906\nWhen you apply it,\nsomebody will show as compliant.\n\n385\n00:19:33.906 --> 00:19:36.729\nIf somebody goes in and\nstarts dinking with the settings and\n\n386\n00:19:36.729 --> 00:19:39.222\nchanging things,\nthey'll show as not compliant.\n\n387\n00:19:39.222 --> 00:19:43.944\nIn other words, they may not be configured\nthe way that we want them to be configured\n\n388\n00:19:43.944 --> 00:19:47.604\nand so now it's up to us to go and\nreapply that and get it secured.\n\n389\n00:19:47.604 --> 00:19:50.805\nSo right now,\nthat's kind of the status that we're in.\n\n390\n00:19:50.805 --> 00:19:51.900\nSo I've got it.\n\n391\n00:19:51.900 --> 00:19:55.836\nAnd from this screen, you'll see where\nI've got all these new buttons up here.\n\n392\n00:19:55.836 --> 00:20:00.434\nI only had two buttons a minute ago,\ncreate and import.\n\n393\n00:20:00.434 --> 00:20:02.252\nNow I've got duplicate.\n\n394\n00:20:02.252 --> 00:20:05.560\nI've got where we can copy it,\nwe can delete it or\n\n395\n00:20:05.560 --> 00:20:09.870\ncheck our host to make sure\nthat everybody's compliant.\n\n396\n00:20:09.870 --> 00:20:12.454\nWe can attach or detach from a client, so\n\n397\n00:20:12.454 --> 00:20:17.101\nI can actually attach it to a host\nfrom right here, and we can remediate.\n\n398\n00:20:17.101 --> 00:20:21.557\nRemediate says if a host is no longer\ncompliant, make them compliant.\n\n399\n00:20:21.557 --> 00:20:23.637\nGo back and put the settings\nback to the way they were.\n\n400\n00:20:23.637 --> 00:20:27.050\nSo maybe somebody went in and\nthey adjusted my SSH settings.\n\n401\n00:20:27.050 --> 00:20:29.656\nI could just hit remediate and\nit would take that host and\n\n402\n00:20:29.656 --> 00:20:31.163\nput it right back the way it was.\n\n403\n00:20:31.163 --> 00:20:31.681\nQuick and\n\n404\n00:20:31.681 --> 00:20:35.904\neasy way to ensure that all your machines\nhave a consistent security policy.\n\n405\n00:20:35.904 --> 00:20:38.523\nAll right, so then you've got\nyour other generic actions.\n\n406\n00:20:38.523 --> 00:20:41.733\nNow I point these buttons out here\nalthough I don't actually use them\n\n407\n00:20:41.733 --> 00:20:42.293\nvery much.\n\n408\n00:20:42.293 --> 00:20:42.891\nSo, instead,\n\n409\n00:20:42.891 --> 00:20:45.521\nI usually attach it on the host and\nyou saw where we can do that right?\n\n410\n00:20:45.521 --> 00:20:48.666\nSo, if I go back to my home and\nI go down to my,\n\n411\n00:20:48.666 --> 00:20:53.511\nI'll try to go back to home and I go\nto my host of clusters and I go in and\n\n412\n00:20:53.511 --> 00:20:58.356\nI find that host inside of the settings,\nyou've got host profile,\n\n413\n00:20:58.356 --> 00:21:02.607\nand so right here we can attach it and\nI find I do it from here.\n\n414\n00:21:02.607 --> 00:21:05.405\nIf you're going to test a host profile\nto a bunch of machines at once,\n\n415\n00:21:05.405 --> 00:21:08.079\nit's easier to do it from the profile\nscreen I was on a moment ago.\n\n416\n00:21:08.079 --> 00:21:11.102\nBut if I'm just doing it to one,\nI usually do it from right here.\n\n417\n00:21:11.102 --> 00:21:16.446\nAnd I can attach and I'm going to\nattach its own profile back to it.\n\n418\n00:21:16.446 --> 00:21:19.065\nWell, it doesn't actually know that\nthe profile belongs to this machine\n\n419\n00:21:19.065 --> 00:21:20.767\nbecause all the unique\nstuff has been deleted.\n\n420\n00:21:20.767 --> 00:21:23.650\nThis is just a generic old profile now.\n\n421\n00:21:23.650 --> 00:21:25.771\nAnd I can apply it to this machine and\n\n422\n00:21:25.771 --> 00:21:28.544\nit'll insure that we\nmeet the requirements.\n\n423\n00:21:28.544 --> 00:21:30.860\nAnd down here we can see\nnetwork configuration and\n\n424\n00:21:30.860 --> 00:21:33.796\nauthentication configuration\nthat's coming along with it.\n\n425\n00:21:33.796 --> 00:21:37.870\nAnd so you'll be able to see, like this\none has the domain host joined, and\n\n426\n00:21:37.870 --> 00:21:42.142\nunder network I can see where I've got\nsome virtual switch configurations and\n\n427\n00:21:42.142 --> 00:21:45.725\nother things here and this is all\ncoming along with that profile.\n\n428\n00:21:45.725 --> 00:21:47.448\nAll right, so I'll hit Next, and\n\n429\n00:21:47.448 --> 00:21:50.249\nnow it's gonna start getting\nthat attached and apply.\n\n430\n00:21:50.249 --> 00:21:53.092\nOkay once that's applied,\nnow I know it will be set the way I want.\n\n431\n00:21:53.092 --> 00:21:55.684\nAnd it's already kind of\nset the way I want anyway.\n\n432\n00:21:55.684 --> 00:21:57.717\nNow here I get my customizations.\n\n433\n00:21:57.717 --> 00:22:00.305\nAnd on the customizations\nside what is this?\n\n434\n00:22:00.305 --> 00:22:02.667\nWell these are some of those\nunique settings right.\n\n435\n00:22:02.667 --> 00:22:07.910\nSettings that may not necessarily apply\nto other hosts like name for this host.\n\n436\n00:22:07.910 --> 00:22:10.073\nAnd so I can come in and\nI can give it a name and so on.\n\n437\n00:22:10.073 --> 00:22:14.821\nSo now we can specifically anything\nthat is truly unique that is missing.\n\n438\n00:22:14.821 --> 00:22:19.317\nAll right, you've got the password for\nthe account, the network host groups and\n\n439\n00:22:19.317 --> 00:22:23.114\nso on, whether you want to enable or\ndisable the hardware profiles.\n\n440\n00:22:23.114 --> 00:22:27.271\nAll these things come along with it so\nyou can specify the customizations.\n\n441\n00:22:27.271 --> 00:22:30.850\nIf you leave them blank it's just gonna\nleave whatever's on that system already.\n\n442\n00:22:30.850 --> 00:22:33.451\nIt might actually complain about some.\n\n443\n00:22:33.451 --> 00:22:35.459\nIt’s going to make me put\nin some of these things.\n\n444\n00:22:35.459 --> 00:22:37.550\nI need a host IP address.\n\n445\n00:22:37.550 --> 00:22:42.735\nI'll set that to the same one that it\nhad all ready and then continue on.\n\n446\n00:22:42.735 --> 00:22:44.462\nI could have deleted these\nout of the profile, too.\n\n447\n00:22:44.462 --> 00:22:47.172\nI guess that would have made a little\nmore sense so I didn't have to do it.\n\n448\n00:22:47.172 --> 00:22:49.979\nBut I'll just punch these in so\nwe can see it happen.\n\n449\n00:22:49.979 --> 00:22:51.394\nI'll probably end up breaking my host.\n\n450\n00:22:51.394 --> 00:22:53.778\n[LAUGH] Let's see.\n\n451\n00:22:53.778 --> 00:22:55.750\nThe name, this is PLABESX01.\n\n452\n00:22:57.850 --> 00:23:01.567\nThe iSCSI alias,\nI have no idea what my alias was before,\n\n453\n00:23:01.567 --> 00:23:03.819\nso I'll just call it MySCSI01.\n\n454\n00:23:03.819 --> 00:23:06.180\nName shouldn't really\nimpact things too much.\n\n455\n00:23:06.180 --> 00:23:11.484\nThe user name, now this is an interesting\none because what is our user name in ESX?\n\n456\n00:23:11.484 --> 00:23:13.252\nRoot, right?\n\n457\n00:23:13.252 --> 00:23:14.189\nBut here I can change it.\n\n458\n00:23:14.189 --> 00:23:16.960\nI can actually pick something\ndifferent if I wanted to.\n\n459\n00:23:16.960 --> 00:23:18.862\nNow this is talking about\njoining the domain, and\n\n460\n00:23:18.862 --> 00:23:20.911\nI don't use the root account for\njoining the domain.\n\n461\n00:23:20.911 --> 00:23:25.361\nSo I'm going to use whatever account\nit is that I'm using for that, and\n\n462\n00:23:25.361 --> 00:23:29.900\nbefore I was using an account I made for\nmyself so I'll punch that one in.\n\n463\n00:23:29.900 --> 00:23:33.170\nI will try.\n\n464\n00:23:33.170 --> 00:23:34.625\nGot that one locked, doesn't it.\n\n465\n00:23:34.625 --> 00:23:35.750\nIt's not letting me change it.\n\n466\n00:23:37.830 --> 00:23:38.366\nThere we go.\n\n467\n00:23:38.366 --> 00:23:40.451\nIt's appearing off-screen,\nwhich is convenient.\n\n468\n00:23:40.451 --> 00:23:42.239\nSo, let me get that moved around.\n\n469\n00:23:42.239 --> 00:23:44.937\nAnd I'll punch in my password,\nso it can join the domain.\n\n470\n00:23:44.937 --> 00:23:49.467\nAll right this is just kind of replacing\nthat unique data for this machine.\n\n471\n00:23:49.467 --> 00:23:52.879\nIn reality I'm putting most of the same\nstuff that is already in there.\n\n472\n00:23:52.879 --> 00:23:54.631\nMAC Address is a little bit tricky.\n\n473\n00:23:54.631 --> 00:23:57.781\nI don't think that one's required field\nbecause it'll just use the MAC address it\n\n474\n00:23:57.781 --> 00:23:58.324\nalready has.\n\n475\n00:23:58.324 --> 00:24:00.221\nSo let me try that.\n\n476\n00:24:00.221 --> 00:24:01.862\nThere we go, now it’s validating.\n\n477\n00:24:01.862 --> 00:24:05.180\nAll right let's go to apply this profile\nand I really shouldn't seeing anything\n\n478\n00:24:05.180 --> 00:24:08.427\ndifferent here because I'm applying\nthis machine's own profile back to it.\n\n479\n00:24:08.427 --> 00:24:11.934\nBut if I had a hundred other machines.\n\n480\n00:24:11.934 --> 00:24:14.722\nI can then apply this profile\nto a hundred other machines and\n\n481\n00:24:14.722 --> 00:24:16.517\nthey would all get set up the same way.\n\n482\n00:24:16.517 --> 00:24:19.140\nAnd if I ever needed to change it I\ncould just go modify the profile.\n\n483\n00:24:19.140 --> 00:24:20.810\nI could create a new profile and\n\n484\n00:24:20.810 --> 00:24:23.908\njust reapply it to all those machines and\nit's going to start happening.\n\n485\n00:24:23.908 --> 00:24:27.200\nNow it'll take a little while for that to\napply and I'm not going to wait for it.\n\n486\n00:24:27.200 --> 00:24:31.830\nBut if I go back to my home page and\npolicies and profiles,\n\n487\n00:24:33.320 --> 00:24:36.420\nI can take a look at that host profile,\nwhoops, I can click on the wrong spot.\n\n488\n00:24:36.420 --> 00:24:38.150\nBut I can take a look at\nthat host profile and\n\n489\n00:24:38.150 --> 00:24:43.290\nI should see that it's now attached to\na machine and it's got an unknown state.\n\n490\n00:24:43.290 --> 00:24:45.420\nAnd that's because it's\napplying right now.\n\n491\n00:24:45.420 --> 00:24:49.280\nAnd when it's done it's either going\nto compliant or not compliant.\n\n492\n00:24:49.280 --> 00:24:51.200\nIt should go straight to compliant.\n\n493\n00:24:51.200 --> 00:24:54.370\nIf it goes straight to not compliant that\nmeans that some setting had an error and\n\n494\n00:24:54.370 --> 00:24:56.510\nfailed to apply and\nit's probably gonna stay that way.\n\n495\n00:24:56.510 --> 00:24:59.100\nSo I need to go dig in my logs and\nfind out what happened.\n\n496\n00:24:59.100 --> 00:25:02.860\nBut otherwise, it shouldn't have\nbeen there ended up incompliant.\n\n497\n00:25:02.860 --> 00:25:05.700\nIf over time it becomes not compliant,\n\n498\n00:25:05.700 --> 00:25:08.160\nthat's where we just use\nthe remediate button up here.\n\n499\n00:25:08.160 --> 00:25:11.640\nAnd it'll make it compliant and it'll put\nthose settings back to the way they were.\n\n500\n00:25:11.640 --> 00:25:13.620\nSo all kind of tied right in there.\n\n501\n00:25:13.620 --> 00:25:17.560\nHost profiles are great way to configure\nlarge quantities of machines and\n\n502\n00:25:17.560 --> 00:25:18.860\nget them all set up consistently.\n\n503\n00:25:20.300 --> 00:25:22.590\nAll right, other things that we can do.\n\n504\n00:25:22.590 --> 00:25:26.784\nWhen I take that profile,\nI probably should have done this before,\n\n505\n00:25:26.784 --> 00:25:30.140\nis you can go to Action and\nEdit settings, and\n\n506\n00:25:30.140 --> 00:25:32.760\nnow you can edit the settings\ninside of that profile.\n\n507\n00:25:32.760 --> 00:25:34.850\nAnd so\nyou'll see where you can kind of tweak it.\n\n508\n00:25:34.850 --> 00:25:38.130\nAnd what I should have done is taken some\nof the settings that were a part of it and\n\n509\n00:25:38.130 --> 00:25:40.820\nremoved them out of there,\njust to make it easier to deploy.\n\n510\n00:25:40.820 --> 00:25:44.260\nSo for example, if all I really care\nabout are the security services,\n\n511\n00:25:44.260 --> 00:25:47.660\nI could have removed\nthe networking configuration.\n\n512\n00:25:47.660 --> 00:25:49.140\nAnd the general settings and\nstuff like that,\n\n513\n00:25:49.140 --> 00:25:53.560\nI could have removed all of these and\nthat way all I was pushing was security.\n\n514\n00:25:53.560 --> 00:25:57.120\nAnd so I'm just kinda coming in and\nunchecking some of these.\n\n515\n00:25:57.120 --> 00:26:01.040\nAnd that way we don't have to deal with,\nthat screen where I had to\n\n516\n00:26:01.040 --> 00:26:04.360\nprovide unique information,\nyou don't wanna do that 900 times right?\n\n517\n00:26:04.360 --> 00:26:08.670\nSo if you pull that stuff and\njust leave Security, right?\n\n518\n00:26:08.670 --> 00:26:11.580\nThat'll make life a lot easier so\nI can take my Advance settings,\n\n519\n00:26:11.580 --> 00:26:13.180\nI'll turn all these off.\n\n520\n00:26:13.180 --> 00:26:16.780\nAnd like I said,\nI probably should've done this before,\n\n521\n00:26:16.780 --> 00:26:17.950\nbut I'm doing it after the fact.\n\n522\n00:26:17.950 --> 00:26:19.820\nIt was just one machine so\nit didn't matter.\n\n523\n00:26:19.820 --> 00:26:23.070\nIf it was 900 machines,\nthis would matter big time,\n\n524\n00:26:23.070 --> 00:26:26.310\nunless you're an hourly employee I guess,\nthen it would be fine.\n\n525\n00:26:26.310 --> 00:26:27.990\nAnd the only other thing\nI have General settings.\n\n526\n00:26:29.010 --> 00:26:34.700\nSo now my policy is much smaller, my\npolicy now just has security settings and\n\n527\n00:26:34.700 --> 00:26:36.920\nthat's it and\neven inside the security settings.\n\n528\n00:26:36.920 --> 00:26:40.460\nIf I'm really just concerned about,\nI missed one, if I'm really just concerned\n\n529\n00:26:40.460 --> 00:26:45.180\nabout services then, I may wanna go and\nlimit that down a bit.\n\n530\n00:26:45.180 --> 00:26:48.720\nSo, I've got firewall security service or\nsecurity settings and\n\n531\n00:26:48.720 --> 00:26:49.560\nservice configuration.\n\n532\n00:26:49.560 --> 00:26:53.560\nSo, each of these we can break down and\nstart to tweak a little more.\n\n533\n00:26:53.560 --> 00:26:56.620\nI might not care so\nmuch about these security settings and\n\n534\n00:26:56.620 --> 00:26:59.850\nI'm really just worried about firewall and\nservice configuration.\n\n535\n00:26:59.850 --> 00:27:03.390\nSo it's up to you what you want to push\nnow I've made this host profile basically\n\n536\n00:27:03.390 --> 00:27:04.300\na security profile.\n\n537\n00:27:05.810 --> 00:27:08.810\nAnd then on the next page we\nget customized hosts, and\n\n538\n00:27:08.810 --> 00:27:11.050\nthe customized host section\nis where we can try and\n\n539\n00:27:11.050 --> 00:27:13.230\nanswer some of those unique\nquestions ahead of time.\n\n540\n00:27:13.230 --> 00:27:16.890\nSee here's those values that I provided\nearlier and they've been stored so\n\n541\n00:27:16.890 --> 00:27:18.410\nthat I can customize them.\n\n542\n00:27:18.410 --> 00:27:21.830\nThose aren't gonna apply any more\nbecause I've disabled those settings.\n\n543\n00:27:21.830 --> 00:27:26.110\nThen we can finish that up and any time in\nthe future I need to change it I can do\n\n544\n00:27:26.110 --> 00:27:28.560\nthat and once I change it I just need\nto come in here and hit remediate.\n\n545\n00:27:28.560 --> 00:27:32.940\nAnd it will push those changes out to all\nthe hosts that have this profile attached.\n\n546\n00:27:32.940 --> 00:27:35.380\nGreat way to secure your systems and\nharden them.\n\n547\n00:27:35.380 --> 00:27:39.140\nTurn off everything you don't use,\npush out consistent firewall settings and\n\n548\n00:27:39.140 --> 00:27:41.490\nmake sure that nobody messes of\nthose settings after the fact,\n\n549\n00:27:41.490 --> 00:27:44.920\nall kinda right in one place.\n\n550\n00:27:44.920 --> 00:27:47.160\nSome of the other things to talk about.\n\n551\n00:27:48.600 --> 00:27:53.252\nWe talked about the lockdown mode\nin an earlier episode ESXi by\n\n552\n00:27:53.252 --> 00:27:56.302\ndefault has a direct console UI, DCUI.\n\n553\n00:27:56.302 --> 00:28:01.063\nSomebody could walk up to the physical ESX\nbox and access that console and try and\n\n554\n00:28:01.063 --> 00:28:02.730\nbreak in, right.\n\n555\n00:28:02.730 --> 00:28:03.960\nWe may not want that.\n\n556\n00:28:03.960 --> 00:28:06.560\nSo you can disable the direct console and\n\n557\n00:28:06.560 --> 00:28:09.635\nmake it where you have to\nmange it from vCenter.\n\n558\n00:28:09.635 --> 00:28:11.820\nVCenter is the only way\nto manage that host.\n\n559\n00:28:11.820 --> 00:28:13.620\nSo if we wanna do that we can turn it on.\n\n560\n00:28:13.620 --> 00:28:15.510\nI could have made it\na part of this profile.\n\n561\n00:28:15.510 --> 00:28:19.010\nIt's actually a setting that is available\ninside of the security profile or\n\n562\n00:28:19.010 --> 00:28:20.380\nwe can do it by hand.\n\n563\n00:28:20.380 --> 00:28:24.460\nIf you bake it into the profile or\ndo it by hand the end result is the same.\n\n564\n00:28:24.460 --> 00:28:26.570\nIf you put it in the profile it\nwill apply to all your machines.\n\n565\n00:28:26.570 --> 00:28:30.250\nSo we'll do it individually since\nthat will be a little bit different.\n\n566\n00:28:30.250 --> 00:28:32.060\nBe a chance to see something cooler.\n\n567\n00:28:32.060 --> 00:28:34.660\nSo I'm gonna go back into my host and\n\n568\n00:28:34.660 --> 00:28:39.440\nin my host, I'm gonna go to Manage and\nSettings and then Security Profile.\n\n569\n00:28:39.440 --> 00:28:43.540\nAnd the Security Profile is exactly where\nI was for looking at the firewall and\n\n570\n00:28:43.540 --> 00:28:46.820\nthe Service settings, I just had never\nscrolled all the way down to the bottom.\n\n571\n00:28:46.820 --> 00:28:50.630\nIf you scroll all the way down to\nthe bottom that's where you'll see\n\n572\n00:28:50.630 --> 00:28:53.470\nLockdown Mode and\nthat's where we can turn that on.\n\n573\n00:28:53.470 --> 00:28:57.190\nAnd stop people from getting to\nthe direct console of that system.\n\n574\n00:28:57.190 --> 00:28:59.950\nThere's two modes, Normal and Strict.\n\n575\n00:28:59.950 --> 00:29:02.920\nStrict is what you normally want\nwhich makes you think that it\n\n576\n00:29:02.920 --> 00:29:03.870\nshould be called Normal.\n\n577\n00:29:03.870 --> 00:29:06.710\nBut in Strict mode, it is super strict.\n\n578\n00:29:06.710 --> 00:29:11.180\nIt's going to stop the direct console\nuser interface service from running.\n\n579\n00:29:11.180 --> 00:29:12.520\nIt's not going to run at all.\n\n580\n00:29:12.520 --> 00:29:15.550\nAnd you're only gonna be able\nto manage it through vCenter.\n\n581\n00:29:15.550 --> 00:29:18.360\nThe problem is if vCenter\nwere to go offline,\n\n582\n00:29:18.360 --> 00:29:19.660\nyou can no longer manage that system.\n\n583\n00:29:19.660 --> 00:29:21.170\nIt's completely stopped.\n\n584\n00:29:21.170 --> 00:29:24.610\nSo you could choose to\ngo to Normal instead.\n\n585\n00:29:24.610 --> 00:29:26.230\nAnd if you go to Normal,\n\n586\n00:29:26.230 --> 00:29:30.580\nit says you can't access the console\ndirectly from the machine.\n\n587\n00:29:30.580 --> 00:29:34.200\nBut you can do it through\nthe local console.\n\n588\n00:29:34.200 --> 00:29:36.320\nWhat the heck does that\nmean the local console?\n\n589\n00:29:36.320 --> 00:29:40.980\nWell, what this means is that you\ncould physically walk up to it and\n\n590\n00:29:40.980 --> 00:29:42.820\nsee the console.\n\n591\n00:29:42.820 --> 00:29:44.610\nSo what's the point in that?\n\n592\n00:29:44.610 --> 00:29:48.650\nWell, you can actually access\nthe DC Live from an SSH session.\n\n593\n00:29:48.650 --> 00:29:52.590\nIf you SSH into an ESXi box,\nand you type DCUI and\n\n594\n00:29:52.590 --> 00:29:56.010\npress Enter, it'll launch the console,\nright there in your SSH session, and\n\n595\n00:29:56.010 --> 00:29:57.372\nso you can access it remotely.\n\n596\n00:29:57.372 --> 00:30:00.980\nThis will stop that, that'll stop you\nfrom being able to run an SSH session,\n\n597\n00:30:00.980 --> 00:30:03.730\nbut you'll still have it on\nthe physical console itself.\n\n598\n00:30:03.730 --> 00:30:04.460\nAnd the idea is there,\n\n599\n00:30:04.460 --> 00:30:07.330\nthat you have physical security that\nstops people from getting to the service.\n\n600\n00:30:07.330 --> 00:30:09.490\nThat's why that's the Normal mode.\n\n601\n00:30:09.490 --> 00:30:12.420\nBut Strict is what I normally use,\nwhere I want to make sure if\n\n602\n00:30:12.420 --> 00:30:15.700\nthis server is out somewhere where I\ncan't control it, I want it to be strict.\n\n603\n00:30:15.700 --> 00:30:18.460\nYou got to have vCenter to get to it,\nthere's no other way.\n\n604\n00:30:18.460 --> 00:30:21.740\nSo we can turn that on and that would\nbe a part of our security profile and\n\n605\n00:30:21.740 --> 00:30:24.260\nthat can be pushed out as\npart of the host profile.\n\n606\n00:30:24.260 --> 00:30:27.450\nYou do also have exception users which\nis kind of nice if you're worried about\n\n607\n00:30:27.450 --> 00:30:31.200\ngetting locked out part as long\nas the DCUI service is running,\n\n608\n00:30:31.200 --> 00:30:33.730\nyou can specify users that\nare able to get into it.\n\n609\n00:30:33.730 --> 00:30:35.530\nThe exception users are right there.\n\n610\n00:30:35.530 --> 00:30:38.940\nWith Strict Mode you can't really do\nan exception cuz they can't even get to\n\n611\n00:30:38.940 --> 00:30:39.810\nthe login screen.\n\n612\n00:30:39.810 --> 00:30:42.578\nBut in Normal Mode you can and\nthat's where you put the exception.\n\n613\n00:30:42.578 --> 00:30:45.730\nIf somebody SSH in with\na particular account,\n\n614\n00:30:45.730 --> 00:30:47.879\nthey'll still be able\nto launch that console.\n\n615\n00:30:49.550 --> 00:30:51.470\nAll right, what else do I have?\n\n616\n00:30:51.470 --> 00:30:53.710\nA couple more little odds and ends.\n\n617\n00:30:53.710 --> 00:30:55.940\nI know we're running low on time, but\nlet me see if we can get these in here.\n\n618\n00:30:55.940 --> 00:30:58.220\nSo a few more things on the ESXi hosts.\n\n619\n00:30:59.410 --> 00:31:03.300\nNetwork security, I mentioned the firewall\nthat's built into the network.\n\n620\n00:31:03.300 --> 00:31:06.500\nThere is actually a few other network\nsettings that can be applied to the host\n\n621\n00:31:06.500 --> 00:31:10.550\nthat help for protection from things\nlike denial service attacks, right?\n\n622\n00:31:10.550 --> 00:31:14.420\nAnd these are tucked away in the virtual\nswitch that the host are plugged into.\n\n623\n00:31:14.420 --> 00:31:19.810\nSo if we wanna see these, I'm in my\nhost right now so I'm in PLabESX01\n\n624\n00:31:20.920 --> 00:31:25.360\nand I'm on the manage screen and\nthere's this Networking tab.\n\n625\n00:31:25.360 --> 00:31:29.280\nIf I jump over to Networking,\nyou'll see Virtual Switches.\n\n626\n00:31:29.280 --> 00:31:31.380\nThat's the virtual switch\nthat we're plugged into.\n\n627\n00:31:31.380 --> 00:31:35.260\nYou even get a little picture of it that\nkinda shows your virtual machine network,\n\n628\n00:31:35.260 --> 00:31:38.720\nplugged into this virtual switch,\nplugged into a physical adapter.\n\n629\n00:31:38.720 --> 00:31:43.540\nWell that virtual switch has certain\nsecurity protections built in to\n\n630\n00:31:43.540 --> 00:31:45.930\nsave us from denial of\nservice type attacks.\n\n631\n00:31:45.930 --> 00:31:49.720\nAnd if we edit that,\nit's going to come up and\n\n632\n00:31:49.720 --> 00:31:52.120\nyou'll see this security tab over here.\n\n633\n00:31:52.120 --> 00:31:54.630\nAnd you'll see three settings that\nwe can tweak that have to deal with\n\n634\n00:31:54.630 --> 00:31:55.780\nhardening the server.\n\n635\n00:31:55.780 --> 00:31:58.193\nFirst is Promiscuous mode.\n\n636\n00:31:58.193 --> 00:32:02.061\nBy default,\na virtual network adapter will only\n\n637\n00:32:02.061 --> 00:32:06.220\nreceive traffic that is destined for\nthat adapter.\n\n638\n00:32:06.220 --> 00:32:09.432\nSo if I have an IP address and\na MAC address that identifies me and\n\n639\n00:32:09.432 --> 00:32:13.314\ntraffic comes in that's destined for\nsomebody else's IP and MAC address,\n\n640\n00:32:13.314 --> 00:32:15.340\nI'll throw it away.\n\n641\n00:32:15.340 --> 00:32:18.510\nBut if you're running software like\nWireshark, Network Sniffers, they want to\n\n642\n00:32:18.510 --> 00:32:21.405\ngo into promiscuous mode, where they'll\nwill accept traffic from any IP and\n\n643\n00:32:21.405 --> 00:32:24.965\nany MAC address cuz they wanna record\nit and that's blocked by default.\n\n644\n00:32:24.965 --> 00:32:27.125\nSo that's turned on,\nthat's a default setting.\n\n645\n00:32:27.125 --> 00:32:30.165\nIf you have a machine you're using for\nnetwork monitoring,\n\n646\n00:32:30.165 --> 00:32:33.290\nyou might need to turn this off so\nthat you can do that monitoring.\n\n647\n00:32:33.290 --> 00:32:36.140\nBut you'd want to make sure you created\na dedicated virtual machine network for\n\n648\n00:32:36.140 --> 00:32:38.070\nyour system so you're not turning\nit on for everybody, right?\n\n649\n00:32:38.070 --> 00:32:39.380\nIt's tied to that switch.\n\n650\n00:32:39.380 --> 00:32:42.280\nThe virtual switch can be plugged\ninto the same physical network but\n\n651\n00:32:42.280 --> 00:32:46.750\nit needs to be a separate virtual\nswitch so you can tweak the setting.\n\n652\n00:32:46.750 --> 00:32:48.280\nMAC address changes.\n\n653\n00:32:48.280 --> 00:32:52.070\nBy default, the virtual machine can change\nits MAC address and it'll allow that.\n\n654\n00:32:52.070 --> 00:32:54.040\nYou can change that to reject it.\n\n655\n00:32:54.040 --> 00:32:56.160\nNow if a virtual machine\nchanges it's Mac address.\n\n656\n00:32:56.160 --> 00:32:58.100\nIt assumes you're trying\nto spoof an address.\n\n657\n00:32:58.100 --> 00:32:59.030\nAnd it stops it.\n\n658\n00:32:59.030 --> 00:33:01.080\nSo you can kind of block that access.\n\n659\n00:33:01.080 --> 00:33:02.860\nBut this last one is\nthe most important one.\n\n660\n00:33:02.860 --> 00:33:04.430\nForged transmits.\n\n661\n00:33:04.430 --> 00:33:08.040\nIf the virtual switch sees the Mac\naddress coming in on a port.\n\n662\n00:33:08.040 --> 00:33:10.270\nThat's different than\nthe last port it saw it on.\n\n663\n00:33:10.270 --> 00:33:12.110\nIt assumes it's a forged transmit.\n\n664\n00:33:12.110 --> 00:33:13.960\nAnd so you can tell it to reject that.\n\n665\n00:33:13.960 --> 00:33:17.020\nThe problem is, what if I actually\nmove the virtual machine?\n\n666\n00:33:17.020 --> 00:33:19.570\nWhat if I move the virtual machine\nfrom one V switch to another?\n\n667\n00:33:19.570 --> 00:33:22.800\nWell, it's gonna look like a forged\ntransmit and it's gonna get blocked.\n\n668\n00:33:22.800 --> 00:33:25.940\nSo it's off by default It is off.\n\n669\n00:33:25.940 --> 00:33:28.420\nFor transmits are accepted by default,\n\n670\n00:33:28.420 --> 00:33:31.270\nI might want to turn that off\nto make it more restrictive.\n\n671\n00:33:31.270 --> 00:33:35.350\nI just need to be aware that anytime I\nmove a virtual machine to another v switch\n\n672\n00:33:35.350 --> 00:33:37.870\nit might trigger this and\nblock the traffic, right?\n\n673\n00:33:37.870 --> 00:33:40.140\nSo we've got to be careful\nwith how we move that.\n\n674\n00:33:40.140 --> 00:33:41.400\nSame thing with Mac address changes.\n\n675\n00:33:41.400 --> 00:33:43.650\nIf we choose to reject Changes.\n\n676\n00:33:43.650 --> 00:33:45.930\nWe need to be aware of\nthat on our systems.\n\n677\n00:33:45.930 --> 00:33:48.390\nThese are all designed to\nkinda help protect us.\n\n678\n00:33:48.390 --> 00:33:50.260\nOn the denial of service attack site,\n\n679\n00:33:50.260 --> 00:33:54.950\nsomebody might try flooding your ESXi\nhost so that nobody can get to the VM's.\n\n680\n00:33:54.950 --> 00:33:57.590\nAnd so right over here you'll see\nwhere we can do traffic shaping.\n\n681\n00:33:57.590 --> 00:34:00.870\nTraffic shaping is where we\ncan restrict the amount of\n\n682\n00:34:00.870 --> 00:34:05.110\nbandwidth this allowed to pass through the\nESXi host To always label little room for\n\n683\n00:34:05.110 --> 00:34:06.260\nyou to be able to manage it.\n\n684\n00:34:06.260 --> 00:34:09.640\nSo you can start to set peak and burst\nsize and so on untill we limit the amount\n\n685\n00:34:09.640 --> 00:34:12.450\nof traffic passing through it,\nthose are few other settings.\n\n686\n00:34:13.610 --> 00:34:17.530\nThe last thing that I wanna point\nout is that if you've got vCenter,\n\n687\n00:34:17.530 --> 00:34:22.820\nyou manage your virtual machines and\nyour ESX hosts all right from here.\n\n688\n00:34:22.820 --> 00:34:27.480\nBut every ESX Host has a web interface,\nright?\n\n689\n00:34:27.480 --> 00:34:29.790\nThis machine is 192.168.0.3 and\nit's running a web service.\n\n690\n00:34:29.790 --> 00:34:33.590\nIt's actually running two web services.\n\n691\n00:34:33.590 --> 00:34:38.430\nSo it's running a couple of different\nthings on it and back in episode two\n\n692\n00:34:38.430 --> 00:34:42.380\nwhen we created an ESXi host, I browsed\nto that webpage so that we could see it.\n\n693\n00:34:42.380 --> 00:34:46.000\nWell that webpage is always there and\nclients can try and connect to it.\n\n694\n00:34:46.000 --> 00:34:48.450\nAnd they can download the vSphere client.\n\n695\n00:34:48.450 --> 00:34:51.920\nDo you want just anybody on your\nnetwork downloading the vSphere client?\n\n696\n00:34:51.920 --> 00:34:54.530\nWell there's other places they can get it,\nbut this is making it easy, right?\n\n697\n00:34:54.530 --> 00:34:58.710\nSo we can actually turn off the web\ninterface on our ESXi host.\n\n698\n00:34:58.710 --> 00:34:59.770\nThere's two different web interfaces.\n\n699\n00:34:59.770 --> 00:35:02.260\nThere's the main one,\nthe one that we normally see.\n\n700\n00:35:02.260 --> 00:35:05.390\nThat's the one that provides\nthe web interface for ESXi and\n\n701\n00:35:05.390 --> 00:35:07.060\nthe data store browser.\n\n702\n00:35:07.060 --> 00:35:09.920\nIt's what lets you see all sorts of\n\n703\n00:35:09.920 --> 00:35:14.660\ninformation about the virtual machines\nthat are stored on that ESX box.\n\n704\n00:35:14.660 --> 00:35:16.350\nSo that's the main interface.\n\n705\n00:35:16.350 --> 00:35:18.590\nAnd if we're not using it,\nif we're using vCenter or\n\n706\n00:35:18.590 --> 00:35:21.050\nwe're using the shell,\nthen we can turn that web interface off.\n\n707\n00:35:22.290 --> 00:35:26.460\nThe second interface is called\nthe Managed Objects Browser, the MOB.\n\n708\n00:35:26.460 --> 00:35:29.900\nAnd the managed objects\nbrowser what that one does\n\n709\n00:35:29.900 --> 00:35:34.360\nis it provides all the statistical\ninformation about your ESXI box.\n\n710\n00:35:34.360 --> 00:35:38.300\nSo when you're managing in a vCenter\nit's pulling through its own system.\n\n711\n00:35:38.300 --> 00:35:40.920\nBut when you log in through\nthe vSphere client,\n\n712\n00:35:40.920 --> 00:35:44.970\nthe native client, all the statistics\non bandwidth and memory utilization and\n\n713\n00:35:44.970 --> 00:35:47.300\nall that stuff is being\nfed through the MLB.\n\n714\n00:35:47.300 --> 00:35:50.510\nWell again if you're not using it,\nif you're just using vCenter,\n\n715\n00:35:50.510 --> 00:35:52.190\nyou can turn off the MOB.\n\n716\n00:35:52.190 --> 00:35:53.490\nAnd so and you can do that.\n\n717\n00:35:53.490 --> 00:35:55.320\nIt has to be done from\nthe command line though.\n\n718\n00:35:55.320 --> 00:35:59.710\nYou normally do it from\nthe console of that machine.\n\n719\n00:35:59.710 --> 00:36:02.940\nIf SSH is enabled you can just\nSSH into it and get it set.\n\n720\n00:36:02.940 --> 00:36:07.100\nSo for example we have SSH\none one of these boxes.\n\n721\n00:36:07.100 --> 00:36:09.150\nIt might be on my domain controller but\nI think it's on this one.\n\n722\n00:36:09.150 --> 00:36:09.790\nYeah it's right there.\n\n723\n00:36:09.790 --> 00:36:13.760\nSo I can SSH into that box and\nI can get it set.\n\n724\n00:36:13.760 --> 00:36:15.260\nAssuming SSH is actually running.\n\n725\n00:36:16.320 --> 00:36:19.140\nAnd it looks like it is because\nI get a certificate prompt.\n\n726\n00:36:19.140 --> 00:36:20.470\nLet me just get logged into it.\n\n727\n00:36:22.010 --> 00:36:26.410\nAnd And it's taking it's time.\n\n728\n00:36:26.410 --> 00:36:27.110\nIt might not be ready.\n\n729\n00:36:27.110 --> 00:36:30.300\nSo I'm applying a security\nprofile right now so\n\n730\n00:36:30.300 --> 00:36:32.360\nsome various things can be happening.\n\n731\n00:36:32.360 --> 00:36:33.970\nWell it's asking for a password.\n\n732\n00:36:33.970 --> 00:36:35.530\nThat's a good sign.\n\n733\n00:36:35.530 --> 00:36:37.110\nI think I put the wrong password in.\n\n734\n00:36:37.110 --> 00:36:38.750\nWell, there's security for you, right?\n\n735\n00:36:38.750 --> 00:36:42.520\nIt's gotta have the right password or\nit's not gonna let us in.\n\n736\n00:36:42.520 --> 00:36:46.290\nBut once I get to the shell\nfrom there I'll be able to\n\n737\n00:36:46.290 --> 00:36:49.640\ndisable those two web interfaces and\nwe'll get a chance to see it.\n\n738\n00:36:49.640 --> 00:36:52.060\nAll right, well,\napparently I don't know my passwords.\n\n739\n00:36:52.060 --> 00:36:54.220\nLet's jump over to my other machine\nwhere I do know the password.\n\n740\n00:36:54.220 --> 00:36:58.310\nSo this is the ESS box that\nI fired up in episode two.\n\n741\n00:36:58.310 --> 00:37:03.100\nI'm just gonna fire up good old Putty and\nI'm gonna SSH into that turkey.\n\n742\n00:37:03.100 --> 00:37:07.830\nAnd once I get logged in I'm just gonna\nlog in root and throw in my password.\n\n743\n00:37:07.830 --> 00:37:09.150\nThere we go.\nAll right, so\n\n744\n00:37:09.150 --> 00:37:12.710\nnow I'm in the ESX terminal, right?\n\n745\n00:37:12.710 --> 00:37:15.280\nAnd so I'm in the shell and\nI'm able to issue commands, and\n\n746\n00:37:15.280 --> 00:37:17.070\nthere's a neat command in here.\n\n747\n00:37:17.070 --> 00:37:19.830\nCalled vim-cmd.\n\n748\n00:37:19.830 --> 00:37:22.320\nAnd it lets you do all sort\nof crazy stuff, right.\n\n749\n00:37:22.320 --> 00:37:23.890\nSo you got a bunch of\ndifferent commands for\n\n750\n00:37:23.890 --> 00:37:28.030\nmodifying the way this system functions\nand what I wanna do is I wanna disable\n\n751\n00:37:28.030 --> 00:37:32.210\nthe two web interfaces, the primary\ninterface and the main objective browser.\n\n752\n00:37:32.210 --> 00:37:33.890\nI'm just gonna turn those Off.\n\n753\n00:37:33.890 --> 00:37:37.870\nSo the command to do that is vim-cmd.\n\n754\n00:37:37.870 --> 00:37:41.360\nAnd then proxysvc,\n\n755\n00:37:41.360 --> 00:37:45.440\nthe webpage uses a proxy and so\nit's the proxy that I'm actually with.\n\n756\n00:37:45.440 --> 00:37:50.595\nSo I'm modifying the proxy service And\nthe command I wanna send to it is\n\n757\n00:37:50.595 --> 00:37:56.910\nremove_service, so\nI'm removing a service from the proxy.\n\n758\n00:37:56.910 --> 00:38:01.670\nAnd the proxy location is /,\nthis is the root, the main webpage.\n\n759\n00:38:01.670 --> 00:38:08.630\nAnd then I need to tell it that\nI'm removing HTTPS With redirect.\n\n760\n00:38:10.130 --> 00:38:11.840\nAlright, now, what does that mean?\n\n761\n00:38:11.840 --> 00:38:12.750\nWell, let me show you.\n\n762\n00:38:12.750 --> 00:38:15.300\nIf I fire up a web browser and\n\n763\n00:38:15.300 --> 00:38:19.320\nI left it open, let me fire up a clean web\nbrowser, I'm going to browse that host.\n\n764\n00:38:19.320 --> 00:38:24.510\nNow I'm going to browse to\nhttp://192.168.0.156, right there.\n\n765\n00:38:24.510 --> 00:38:29.610\nI'm not doing it securely.\n\n766\n00:38:29.610 --> 00:38:31.370\nI'm just doing http.\n\n767\n00:38:31.370 --> 00:38:35.160\nAnd when I browse to it,\nI hit a redirector.\n\n768\n00:38:35.160 --> 00:38:39.260\nIt's redirecting me to the secure page,\nhttps and\n\n769\n00:38:39.260 --> 00:38:42.010\nnow I'm looking at that main page.\n\n770\n00:38:42.010 --> 00:38:46.670\nSo when I delete this,\ni'm deleting the site at root,\n\n771\n00:38:47.670 --> 00:38:50.200\nand i'm deleting https with redirect.\n\n772\n00:38:50.200 --> 00:38:53.750\nI don't want the http version or\nthe redirect to be there,\n\n773\n00:38:53.750 --> 00:38:55.390\nthat's what we're yanking out.\n\n774\n00:38:55.390 --> 00:38:56.840\nAnd pulling that from the system.\n\n775\n00:38:56.840 --> 00:39:01.760\nSo that one command right there is\ngonna disable the web interface, and\n\n776\n00:39:01.760 --> 00:39:04.160\nso I'll see successfully removed service.\n\n777\n00:39:04.160 --> 00:39:08.410\nBut, there is still a second web\ninterface, the managed object browser,\n\n778\n00:39:08.410 --> 00:39:11.130\nit's still there and running,\nso I need to get rid of it.\n\n779\n00:39:11.130 --> 00:39:13.840\nAnd the command is basically the same\n\n780\n00:39:13.840 --> 00:39:18.750\nexcept the Manage Object Browser\nis in the slash MOB folder.\n\n781\n00:39:18.750 --> 00:39:20.780\nThat's actually an alias.\n\n782\n00:39:20.780 --> 00:39:24.890\nAnd so we'll use that slash MOB and\nremove that service also.\n\n783\n00:39:24.890 --> 00:39:28.905\nSo now we've yanked those two services\nout and they're no longer running.\n\n784\n00:39:28.905 --> 00:39:32.525\nSo what happens is the web\ninterface is no longer functioning.\n\n785\n00:39:32.525 --> 00:39:38.275\nSo if I fire up a web browser,\nand I go to 192.168.0.156 and\n\n786\n00:39:38.275 --> 00:39:43.915\nI try and pull up that page,\nI get 404 webpage cannot be found.\n\n787\n00:39:43.915 --> 00:39:45.690\nThe web service is no longer running.\n\n788\n00:39:45.690 --> 00:39:50.810\nAnd if I try and be sneaky and\ngo to /mob, 404 not found.\n\n789\n00:39:50.810 --> 00:39:52.130\nOkay, the web server's still there.\n\n790\n00:39:52.130 --> 00:39:54.500\nAnd it didn't even try\nto forward me to secure.\n\n791\n00:39:54.500 --> 00:39:55.680\nIt always does that.\n\n792\n00:39:55.680 --> 00:39:57.162\nBut the pages are no longer present.\n\n793\n00:39:57.162 --> 00:39:59.077\nI've removed those virtual directories.\n\n794\n00:39:59.077 --> 00:40:02.698\nSo if we're trying to harden our system,\nthis is yet another way to do it.\n\n795\n00:40:02.698 --> 00:40:04.182\nNow personally.\n\n796\n00:40:04.182 --> 00:40:06.346\nI don't usually do it this way, right?\n\n797\n00:40:06.346 --> 00:40:08.950\nThis way's on the exam,\nthat's why I bring it up here, right?\n\n798\n00:40:08.950 --> 00:40:10.700\nWe wanna make sure you\ndo well on the exam.\n\n799\n00:40:10.700 --> 00:40:14.740\nBut in real life land, I usually just\nmodify the software firewall and\n\n800\n00:40:14.740 --> 00:40:18.740\nset the software firewall to say,\nonly allow connections on port 80 to these\n\n801\n00:40:18.740 --> 00:40:22.360\nIPs and port 443, and\nI leave these services running, right?\n\n802\n00:40:22.360 --> 00:40:25.850\nBut, you need to know for\nthe exam that you can disable them.\n\n803\n00:40:25.850 --> 00:40:28.520\nAnd you can disable them with a command\njust like this, it turns them off and\n\n804\n00:40:28.520 --> 00:40:29.110\ngets them out of there.\n\n805\n00:40:29.110 --> 00:40:32.950\nWe saw the firewall earlier, so\nyou guys have seen that route too.\n\n806\n00:40:32.950 --> 00:40:36.395\nIf, for some reason, you need to turn them\nback on, the command to turn it back on is\n\n807\n00:40:36.395 --> 00:40:39.086\nactually a little bit longer,\nI'll put them in the show notes.\n\n808\n00:40:39.086 --> 00:40:45.609\nBut instead of saying vim-cmd\nproxysvc/remove_service,\n\n809\n00:40:45.609 --> 00:40:49.700\nwe're gonna say add_tcp_service.\n\n810\n00:40:49.700 --> 00:40:52.330\nSo we're adding a service back.\n\n811\n00:40:52.330 --> 00:40:56.310\nAnd it's going to be that\nslash with HTTP as redirect.\n\n812\n00:40:56.310 --> 00:41:00.094\nBut I need to add one little\nthing to the end, 8309.\n\n813\n00:41:01.150 --> 00:41:04.690\nWhich is a little internal number\nthat it uses for that port.\n\n814\n00:41:04.690 --> 00:41:08.530\nAnd it says that, what, shoot,\nI forgot the host name.\n\n815\n00:41:08.530 --> 00:41:11.860\nMy host name is just localhost, so\nit's not anything spectacular anyway.\n\n816\n00:41:11.860 --> 00:41:13.870\nAnd we can throw that right back on there.\n\n817\n00:41:13.870 --> 00:41:14.518\nI know what you're thinking.\n\n818\n00:41:14.518 --> 00:41:19.720\nDon, 8309, it's not port 8309,\nit's supposed to be port 80.\n\n819\n00:41:19.720 --> 00:41:24.110\nWell, what they do is each these\nlittle services that run inside of it,\n\n820\n00:41:24.110 --> 00:41:27.030\nit puts them on to different port numbers,\ndifferent kind of settings.\n\n821\n00:41:27.030 --> 00:41:29.820\nAnd so it's gonna attach it there,\nat least it's supposed to.\n\n822\n00:41:29.820 --> 00:41:33.010\nSo let's come back here and\ncheck and see what happens.\n\n823\n00:41:33.010 --> 00:41:35.210\nI'm sure enough I get the webpage, right?\n\n824\n00:41:35.210 --> 00:41:38.380\nI connect to web server on port 80,\nbut on the backend,\n\n825\n00:41:38.380 --> 00:41:42.440\nthe proxy is tied to port 8309 so\nthat's why that number is wrong.\n\n826\n00:41:42.440 --> 00:41:43.420\nSo you can put them back in.\n\n827\n00:41:43.420 --> 00:41:45.630\nAnd I'll put the screens in\nthe show notes like I said.\n\n828\n00:41:45.630 --> 00:41:46.880\nSame thing for the MOB, right?\n\n829\n00:41:46.880 --> 00:41:48.600\nYou would run a similar\ncommand to turn that back on.\n\n830\n00:41:48.600 --> 00:41:49.840\nSo easy enough to flip it on and off.\n\n831\n00:41:50.840 --> 00:41:54.460\nYou'd have to do it this way if you wanted\nto turn one off and leave the other on,\n\n832\n00:41:54.460 --> 00:41:56.950\nbut if you were trying to turn them\nboth off, just use the firewall.\n\n833\n00:41:56.950 --> 00:41:57.470\nIt's easier.\n\n834\n00:41:57.470 --> 00:41:59.560\nThat method is a little more effective.\n\n835\n00:41:59.560 --> 00:42:03.820\n>> Don we appreciate you showing us\nhow to harden the host themselves.\n\n836\n00:42:03.820 --> 00:42:06.489\nNow I know that we've still got what,\nvCenter to go, we've got the VMs to go,\n\n837\n00:42:06.489 --> 00:42:09.128\nbut looking at the time, looks like\nwe're gonna save that for another part.\n\n838\n00:42:09.128 --> 00:42:11.230\n>> [LAUGH]\n>> But before we sign out,\n\n839\n00:42:11.230 --> 00:42:14.240\ndo you got any additional words,\nas it relates to the host?\n\n840\n00:42:14.240 --> 00:42:17.140\n>> Yeah, remember, all the things that\nI just talked about are on the exam, so\n\n841\n00:42:17.140 --> 00:42:18.200\nthat's important, you need to know them.\n\n842\n00:42:18.200 --> 00:42:20.210\nBut that doesn't mean you have\nto use them in real life.\n\n843\n00:42:20.210 --> 00:42:23.670\nLook at each of these and\nfigure out which ones make sense for you.\n\n844\n00:42:23.670 --> 00:42:26.930\nIf you've only got five hosts,\nyou probably don't need host profiles.\n\n845\n00:42:26.930 --> 00:42:29.390\nYou might just wanna manually\nconfigure each one individually.\n\n846\n00:42:29.390 --> 00:42:32.300\nIf you have 500 hosts,\nyou absolutely need host profiles, right?\n\n847\n00:42:32.300 --> 00:42:33.440\nBut, you pick and choose.\n\n848\n00:42:33.440 --> 00:42:36.330\nWhich components work in your environment,\nthe settings that are most friendly.\n\n849\n00:42:36.330 --> 00:42:41.120\nAnd you're always trying to balance ease\nof use with security and find that healthy\n\n850\n00:42:41.120 --> 00:42:44.780\nmiddle ground where you make things nice\nand secure, but not a nightmare to use.\n\n851\n00:42:44.780 --> 00:42:47.050\n>> Well, Don, we appreciate you\nbeing in the studios with us.\n\n852\n00:42:47.050 --> 00:42:48.380\nAnd we appreciate you the viewers.\n\n853\n00:42:48.380 --> 00:42:51.030\nSigning out for ITPro.TV,\nI've been your host Wes Bryan.\n\n854\n00:42:51.030 --> 00:42:52.060\n>> And I'm Don Pezet.\n\n855\n00:42:52.060 --> 00:42:54.108\n>> And we'll see you next time.\n\n856\n00:42:54.108 --> 00:42:59.807\n[SOUND]\n\n",
          "vimeoId": "168555427"
        },
        {
          "description": "In this episode, Wes and Don continue their demonstration on how to reduce the attack surface of vSphere by using a security practice called hardening. They look at how to harden vCenter Servers by using the VMware Certificate Authority (VMCA). They look at management through the GUI as well as more options that the CLI gives the user access to.",
          "length": "1982",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-3-2-hardening_vsphere_pt2-052716-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-3-2-hardening_vsphere_pt2-052716-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dvc-2-3-2-hardening_vsphere_pt2-052716-1-sm.jpg",
          "title": "Hardening vSphere Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.888 --> 00:00:14.548\nWelcome back to another exciting\nepisode here at ITPRO.TV.\n\n3\n00:00:14.548 --> 00:00:18.050\nI'm your host Wes Bryan and in today's\nepisode we're continuing through\n\n4\n00:00:18.050 --> 00:00:22.334\nour series within VMware,, that's right,\nVMware Certified Professional Version 6,\n\n5\n00:00:22.334 --> 00:00:23.851\ncoming back out of the Part Two.\n\n6\n00:00:23.851 --> 00:00:25.041\nAnd that's hardening V-sphere.\n\n7\n00:00:25.041 --> 00:00:27.541\nJoining me back in the studios is\nnone other than Mr. Don Pezet.\n\n8\n00:00:27.541 --> 00:00:28.640\nDon, how you doing sir?\n\n9\n00:00:28.640 --> 00:00:31.410\n>> I am doing great,\nwas ready to dive right back in.\n\n10\n00:00:31.410 --> 00:00:33.120\nLike Wes said, this is a Part 2.\n\n11\n00:00:33.120 --> 00:00:36.900\nIn the last episode we got a chance to\nsee hardening our ESXI host, right, so\n\n12\n00:00:36.900 --> 00:00:39.510\nthe actual hypervisor host,\nwe took a look at those.\n\n13\n00:00:39.510 --> 00:00:40.560\nThere are a lot of neat little bells and\n\n14\n00:00:40.560 --> 00:00:43.680\nwhistles to tweak inside of those\nto make them a little more secure.\n\n15\n00:00:43.680 --> 00:00:47.920\nToday we're gonna start off focussing\non the vCenter Server this time around.\n\n16\n00:00:47.920 --> 00:00:51.050\nNow when you deploy vCenter Server\nthere's two ways you could can deploy it.\n\n17\n00:00:51.050 --> 00:00:55.210\nOne, as a Linux appliance that the VMware\nguys have already built up for you and\n\n18\n00:00:55.210 --> 00:00:58.060\nis actually already hardened\nto a pretty good degree.\n\n19\n00:00:58.060 --> 00:01:00.920\nThe other option though is to deploy\nit as a Windows Server like I've\n\n20\n00:01:00.920 --> 00:01:02.110\ndone here in the lab.\n\n21\n00:01:02.110 --> 00:01:04.150\nAnd when you deploy it\nas a Windows server,\n\n22\n00:01:04.150 --> 00:01:08.220\nit's kind of up to you to harden it to\nmake sure that it's safe and secure.\n\n23\n00:01:08.220 --> 00:01:09.450\nSo we're going to take a look at those.\n\n24\n00:01:09.450 --> 00:01:11.450\nAnd it really won't take all that long for\nus to do it.\n\n25\n00:01:11.450 --> 00:01:12.880\nSo after we get that done,\n\n26\n00:01:12.880 --> 00:01:16.310\nwe'll take a look at securing\nour virtual machines also.\n\n27\n00:01:16.310 --> 00:01:18.360\nSo we make sure that that\naccess is protected and\n\n28\n00:01:18.360 --> 00:01:21.430\ninsulated from people who\nshouldn't have access.\n\n29\n00:01:21.430 --> 00:01:23.070\nAll right, well let's kick this thing off.\n\n30\n00:01:23.070 --> 00:01:27.130\nI wanna start by doubling back to\na topic we covered a few episodes ago.\n\n31\n00:01:27.130 --> 00:01:31.890\nWe touched on the certificate\nservices available inside a vCenter,\n\n32\n00:01:31.890 --> 00:01:35.590\nand in particular,\nthe Platform Services Control, or the PSC.\n\n33\n00:01:35.590 --> 00:01:38.740\nSo, when you install vCenter, remember\nthat there's two primary components.\n\n34\n00:01:38.740 --> 00:01:42.598\nThere's vCenter itself, and then there's\nthe Platform Services Control, or the PSC.\n\n35\n00:01:42.598 --> 00:01:45.820\nNow the PSC,\nit provides a number of services, but\n\n36\n00:01:45.820 --> 00:01:51.830\nthe two key services that PSC provides are\nsingle sign on, and certificate services.\n\n37\n00:01:51.830 --> 00:01:55.050\nNow, we covered it a little bit in\nthe single sign on episode because,\n\n38\n00:01:55.050 --> 00:01:57.910\nwell, single sign on is provided\nby the PSC, we had to, right?\n\n39\n00:01:57.910 --> 00:02:00.700\nAnd so that's one step of kind\nof hardening our servers,\n\n40\n00:02:00.700 --> 00:02:04.060\nsetting it up to authenticate\nagainst an external directory so\n\n41\n00:02:04.060 --> 00:02:06.930\nthat we can manage our user\naccounts a little more granularly.\n\n42\n00:02:06.930 --> 00:02:10.660\nNot sure if that's a word but\nI'm gonna use it.\n\n43\n00:02:10.660 --> 00:02:14.550\nSo that's one kind of function of it,\nbut the other side was the certificates.\n\n44\n00:02:14.550 --> 00:02:16.270\nAnd the certificates are what\nI wanna view right now,\n\n45\n00:02:16.270 --> 00:02:18.340\nwe didn't talk about those\nin the other episode.\n\n46\n00:02:18.340 --> 00:02:23.500\nWith the certificate services, when you\nbring up a PSC, it is a certificate\n\n47\n00:02:23.500 --> 00:02:28.120\nauthority and it is able to issue\ncertificates to your ESXi host so\n\n48\n00:02:28.120 --> 00:02:31.160\nthat they can use to handle encryption\nbetween your different devices.\n\n49\n00:02:31.160 --> 00:02:35.620\nNow, when that's done it's\nup to us to maintain that.\n\n50\n00:02:35.620 --> 00:02:37.210\nNow we might wanna tweak and change that.\n\n51\n00:02:37.210 --> 00:02:40.740\nAs a part of hardening our system we might\nwanna switch it to our own certificates.\n\n52\n00:02:40.740 --> 00:02:44.310\nOr you might just wanna randomly\ngenerate your own search.\n\n53\n00:02:44.310 --> 00:02:47.080\nThere are many,\nmany software providers out there\n\n54\n00:02:47.080 --> 00:02:50.420\nwhere they use the same private key for\nevery single install.\n\n55\n00:02:50.420 --> 00:02:55.380\nAnd that's bad news VMware doesnt do that,\nbut if you're like me and\n\n56\n00:02:55.380 --> 00:02:58.200\nyou've gotten to the point where you don't\ntrust any software vendor, it would be\n\n57\n00:02:58.200 --> 00:03:01.090\nnice to reissue those keys yourself\nif you could and we certainly can.\n\n58\n00:03:01.090 --> 00:03:03.090\nNow there's two ways to do it and\n\n59\n00:03:03.090 --> 00:03:07.710\nthe way that I touched on in the single\nsign on episode is using the GUI which\n\n60\n00:03:07.710 --> 00:03:10.100\nI'll be honest with you guys,\nin real life land I never use the GUI for\n\n61\n00:03:10.100 --> 00:03:13.590\nthis because it is so incredibly slow,\nbut let me show you what I mean.\n\n62\n00:03:13.590 --> 00:03:16.910\nSo, I'm logged into my vCenter panel here,\n\n63\n00:03:16.910 --> 00:03:19.360\nand I'm gonna minimize all\nthese little side panels and\n\n64\n00:03:19.360 --> 00:03:23.310\nget them out of the way just to give us\na little more screen real estate for this.\n\n65\n00:03:23.310 --> 00:03:27.820\nAnd if I navigate to where the CA\nsettings are, it's actually buried down\n\n66\n00:03:27.820 --> 00:03:31.240\na decent bit, right, so\nI need to go down under Administration.\n\n67\n00:03:31.240 --> 00:03:36.510\nAnd inside of Administration I can go\ndown here to System Configuration.\n\n68\n00:03:36.510 --> 00:03:40.580\nAnd inside of System Configuration I can\nfind my Platform Services Controller.\n\n69\n00:03:40.580 --> 00:03:43.342\nNow I've got mine deployed\nin the simple model.\n\n70\n00:03:43.342 --> 00:03:46.570\nSo vCenter and\nthe PSC are running on the same machine so\n\n71\n00:03:46.570 --> 00:03:48.070\nI only have this one machine.\n\n72\n00:03:48.070 --> 00:03:50.050\nBut in your environment you\nmay deploy them separately.\n\n73\n00:03:50.050 --> 00:03:54.010\nSo what I'm looking for is the PSC and\nso you'll find it in the list and\n\n74\n00:03:54.010 --> 00:03:59.030\nthen I'll just jump over here to\nManage and Certificate Authority.\n\n75\n00:03:59.030 --> 00:04:01.550\nNow the Certificate Authority\npage is protected, so\n\n76\n00:04:01.550 --> 00:04:04.400\nyou'll see where it's telling me\nI've got to verify my password.\n\n77\n00:04:04.400 --> 00:04:09.190\nAnd if I go and verify it, I just\nhave to punch in what my password is.\n\n78\n00:04:09.190 --> 00:04:11.570\nAnd so I'll do that and\nnow it's gonna verify it.\n\n79\n00:04:11.570 --> 00:04:14.923\nAnd my goodness, that is like the fastest\nthis has ever come up for me.\n\n80\n00:04:14.923 --> 00:04:19.690\n[LAUGH] If you watch the other episode,\nI showed how it kinda takes forever.\n\n81\n00:04:19.690 --> 00:04:23.270\nWell, it usually does, I'm shocked and\namazed here on this one, and\n\n82\n00:04:23.270 --> 00:04:25.670\nthat's partly why I don't\nlike to use the GUI,\n\n83\n00:04:25.670 --> 00:04:27.750\nand I didn't even intend to\nshow it here on the show.\n\n84\n00:04:27.750 --> 00:04:29.750\nI was gonna show how long it took,\nbut I guess, since I'm here,\n\n85\n00:04:29.750 --> 00:04:31.020\nI might as well show you guys.\n\n86\n00:04:31.020 --> 00:04:34.850\nWhat I can see here are all\nthe certificates that were generated\n\n87\n00:04:34.850 --> 00:04:36.940\nwhen this system was set up.\n\n88\n00:04:36.940 --> 00:04:41.090\nAnd I did this install back on\nMay 18th and so when I look\n\n89\n00:04:41.090 --> 00:04:44.930\nyou'll see these certificates that were\ngenerated or not May 18th, May 23rd.\n\n90\n00:04:44.930 --> 00:04:47.160\nSo we will see all of these\nare set from May 23rd.\n\n91\n00:04:47.160 --> 00:04:50.940\nWell not all of them,\nmost of them are set for May 23rd.\n\n92\n00:04:50.940 --> 00:04:53.420\nSo you can kinda tell when\nI did this install, right?\n\n93\n00:04:53.420 --> 00:04:59.140\nI did it May 23rd at 9:58 PM or 10:07 PM\nand that's when these were all generated.\n\n94\n00:04:59.140 --> 00:05:03.450\nAnd if you look at the certificates,\nthey were tied to various services, right?\n\n95\n00:05:03.450 --> 00:05:08.860\nMost of them are tied to my vCenter server\nwhich is called WIN-SERVER01.lab.itpro.tv\n\n96\n00:05:08.860 --> 00:05:10.900\nso I see my server right there.\n\n97\n00:05:10.900 --> 00:05:13.620\nBut I've also got certificates for\nsingle sign on, and for\n\n98\n00:05:13.620 --> 00:05:16.700\nthe single server signings or\ndigitally signing certificates.\n\n99\n00:05:16.700 --> 00:05:18.830\nSo these are other certificates\nthat are powering it.\n\n100\n00:05:18.830 --> 00:05:20.670\nAnd then some of the unique\ncertificates that are used for\n\n101\n00:05:20.670 --> 00:05:23.380\nvarious functions inside of vCenter.\n\n102\n00:05:23.380 --> 00:05:28.360\nBut as you get down here you'll see other\nthings like, well, the VMCA, right,\n\n103\n00:05:28.360 --> 00:05:30.520\nthe Virtual Machine Certificate Authority.\n\n104\n00:05:30.520 --> 00:05:34.030\nSo that one's tucked away right in here,\nand you'll see how it's signed by\n\n105\n00:05:34.030 --> 00:05:38.980\nOUWMware engineering,\norganizations VMware, location Palo Alto.\n\n106\n00:05:38.980 --> 00:05:41.860\nWell the VMware guys\ngenerated the certificate.\n\n107\n00:05:41.860 --> 00:05:44.650\nSo I'm trusting them that they\n\n108\n00:05:44.650 --> 00:05:47.550\ngenerated the secure certificate\nthat is at the bit rate that I want.\n\n109\n00:05:47.550 --> 00:05:51.020\nThat is not the same for every VMware\ncustomer out there in the planet.\n\n110\n00:05:51.020 --> 00:05:54.190\nAnd if I don't trust them\nwe can always reissue.\n\n111\n00:05:54.190 --> 00:05:54.820\nAll right.\n\n112\n00:05:54.820 --> 00:05:57.470\nNow from this screen there's not\na whole heck of a lot you can do.\n\n113\n00:05:57.470 --> 00:06:01.230\nYou see I got my little Select All and\nCopy All buttons and\n\n114\n00:06:01.230 --> 00:06:02.930\nthat's really about it.\n\n115\n00:06:02.930 --> 00:06:06.550\nBut when you choose an individual\ncertificate another button appears and\n\n116\n00:06:06.550 --> 00:06:07.637\nyou can show the details.\n\n117\n00:06:07.637 --> 00:06:09.010\nAnd that's where we can dive in and\n\n118\n00:06:09.010 --> 00:06:11.920\nlook at the same information,\njust not in table form.\n\n119\n00:06:11.920 --> 00:06:15.192\nAnd I can see that these are actually\npretty good certificates.\n\n120\n00:06:15.192 --> 00:06:18.655\nThey're done with SHA-256 with RSA,\nthey're Version 3.\n\n121\n00:06:18.655 --> 00:06:22.540\nSo, they're pretty well suited for what\nI need, and obviously they're working.\n\n122\n00:06:22.540 --> 00:06:24.420\nOtherwise, I wouldn't be\nlogged in in the first place.\n\n123\n00:06:24.420 --> 00:06:28.070\nSo, there's not much that I\nreally need to do to these guys\n\n124\n00:06:28.070 --> 00:06:30.400\nif they're working the way that I want.\n\n125\n00:06:30.400 --> 00:06:33.530\nBut, if we really want\nto harden our server,\n\n126\n00:06:33.530 --> 00:06:35.330\nwe'll likely want to\nreissue some of these.\n\n127\n00:06:35.330 --> 00:06:36.860\nAnd so you can certainly do that.\n\n128\n00:06:36.860 --> 00:06:38.440\nIn here, you can see your Revoked and\n\n129\n00:06:38.440 --> 00:06:41.200\nExpired Certificates if any\ncertificates have gone bad.\n\n130\n00:06:41.200 --> 00:06:43.060\nAnd you can see your Root Certificate.\n\n131\n00:06:43.060 --> 00:06:45.970\nAnd the Root Certificate is important,\nbecause if you want other\n\n132\n00:06:45.970 --> 00:06:49.880\npeople to trust you, you'll need to\nadd this root certificate to their\n\n133\n00:06:49.880 --> 00:06:53.900\nTrusted Root Certificate Store,\nso that's all available here.\n\n134\n00:06:53.900 --> 00:06:56.390\nNow one thing you guys might have\nnoticed as I click through here,\n\n135\n00:06:56.390 --> 00:06:58.970\nthere haven't been a lot\nof action buttons, right?\n\n136\n00:06:58.970 --> 00:07:03.865\nLike if I take a certificate I wanna\nrevoke it, I don't have an option to\n\n137\n00:07:03.865 --> 00:07:08.145\nrevoke it if I right click I get no\nactions available, if I go up here I can\n\n138\n00:07:08.145 --> 00:07:12.990\ncopy it, I can view details, but there's\nnot a lot that I can even do from the GUI.\n\n139\n00:07:12.990 --> 00:07:15.930\nSo, again,\nit goes back to what I was saying how I\n\n140\n00:07:15.930 --> 00:07:20.260\ndon't typically use the GUI for this\nbecause it's fairly limited, all right.\n\n141\n00:07:20.260 --> 00:07:24.630\nSo instead, what you can do\nis drop to the command line.\n\n142\n00:07:24.630 --> 00:07:28.710\nAnd at the command line, we actually have\na CLI-based management interface for\n\n143\n00:07:28.710 --> 00:07:32.330\nthe certificate server that actually is\nuseful and it's what I typically use.\n\n144\n00:07:32.330 --> 00:07:37.850\nNow, it is just a little batch file and\nif I, let me switch over to my server here\n\n145\n00:07:37.850 --> 00:07:44.810\nand I'm gonna open up a command prompt and\nif we browse around in our command prompt\n\n146\n00:07:44.810 --> 00:07:49.720\nwe can get to the command-line-based\ntool for this.\n\n147\n00:07:49.720 --> 00:07:50.684\nAnd it's kinda buried away.\n\n148\n00:07:50.684 --> 00:07:58.590\nIt's inside of program\nfiles/VMware/vendorserver/vmc AD,\n\n149\n00:07:58.590 --> 00:08:06.927\nwhich is that Virtual Machine\nCertificate Authority demon, right?\n\n150\n00:08:06.927 --> 00:08:08.730\nThat's the service that\nruns in the background.\n\n151\n00:08:08.730 --> 00:08:10.690\nI would be doing this on my PSC.\n\n152\n00:08:10.690 --> 00:08:12.420\nSo wherever your platform\nservices controller is,\n\n153\n00:08:12.420 --> 00:08:13.530\nthat's where you're gonna do this.\n\n154\n00:08:13.530 --> 00:08:18.291\nAnd if you look around in that directory,\nthe utility we're looking for is this,\n\n155\n00:08:18.291 --> 00:08:21.948\nwhoops, this guy right here,\ncertificate_manager.bat,\n\n156\n00:08:21.948 --> 00:08:23.469\njust a little batch file.\n\n157\n00:08:23.469 --> 00:08:27.260\nAnd you can run this batch file, and\nVMware's already got all the various\n\n158\n00:08:27.260 --> 00:08:30.624\ncommands for us built into it, so\nwe don't have to memorize these\n\n159\n00:08:30.624 --> 00:08:34.380\ncraze long vim- whatever commands,\nwe can just run it right from here.\n\n160\n00:08:34.380 --> 00:08:38.240\nSo I'm gonna run that\ncertificate manger.bat.\n\n161\n00:08:38.240 --> 00:08:42.984\nNow, before I run that, I'm gonna make my\nwindow bigger because while VMware has\n\n162\n00:08:42.984 --> 00:08:48.031\nmade this easy for us, they actually chose\na screen layout that doesn't work so well.\n\n163\n00:08:48.031 --> 00:08:52.418\nSo I'm gonna bump it up so\nthat my width is about 100 pixels wide and\n\n164\n00:08:52.418 --> 00:08:54.850\nI'll bump my height up to about 40.\n\n165\n00:08:57.435 --> 00:08:59.244\nAnd we'll say OK to that.\n\n166\n00:08:59.244 --> 00:09:01.910\nSo that's gonna make my\nwindow a little bit bigger.\n\n167\n00:09:01.910 --> 00:09:04.160\nAnd I'm doing that\nbecause when we run this,\n\n168\n00:09:04.160 --> 00:09:06.590\nthe utility itself, see what it does?\n\n169\n00:09:06.590 --> 00:09:08.730\nIt displays this nice,\npretty menu, which I appreciate.\n\n170\n00:09:08.730 --> 00:09:10.790\nI appreciate having a nice, easy menu.\n\n171\n00:09:10.790 --> 00:09:13.641\nBut it's very wide and if you don't\nhave your screen wide, if you have it at\n\n172\n00:09:13.641 --> 00:09:16.924\nthe standard 80 pixels, it does a screen\nwrap and it's very hard to read and stuff.\n\n173\n00:09:16.924 --> 00:09:20.765\nSo I just brought mine up to about 100,\nI keep saying 100 pixels.\n\n174\n00:09:20.765 --> 00:09:24.810\nIt's not 100 pixels,\nlike 100 characters wide whatever that is.\n\n175\n00:09:24.810 --> 00:09:28.182\nBut what we can see right here is\nthe command line based interface for\n\n176\n00:09:28.182 --> 00:09:29.497\nmanaging certificates.\n\n177\n00:09:29.497 --> 00:09:32.026\nThis is the vSphere 6.0\nCertificate Manager and\n\n178\n00:09:32.026 --> 00:09:35.749\nI'll see the various potions that I\nhave and notice what some of these are.\n\n179\n00:09:35.749 --> 00:09:38.929\nSome of these are just really,\nreally simple,\n\n180\n00:09:38.929 --> 00:09:44.028\nlike regenerate a new VMCA root\ncertificate and replace all certificates.\n\n181\n00:09:44.028 --> 00:09:47.331\nIf I just don't trust VMware,\nif I'm worried that they\n\n182\n00:09:47.331 --> 00:09:51.852\nused the same private key on every\nsingle host, right, this was a big deal.\n\n183\n00:09:51.852 --> 00:09:53.037\nDo you remember, Wes?\n\n184\n00:09:53.037 --> 00:09:54.570\nWas it TP Link?\n\n185\n00:09:54.570 --> 00:09:59.092\nIt was one of the router vendors where\nthey manufactured millions of routers and\n\n186\n00:09:59.092 --> 00:10:03.020\nthey used the same private key\non every single one of them.\n\n187\n00:10:03.020 --> 00:10:06.600\nAnd so if you were to extract\nthe private key out of one of them,\n\n188\n00:10:06.600 --> 00:10:09.520\nyou could then intercept\ntraffic on anybody else's\n\n189\n00:10:09.520 --> 00:10:12.340\nnetwork who were using that same\nthe same router across the entire globe.\n\n190\n00:10:12.340 --> 00:10:14.290\nAnd you could use that private\nkey to decrypt the data.\n\n191\n00:10:14.290 --> 00:10:16.980\nIt basically rendered the encryption\nof those devices useless.\n\n192\n00:10:16.980 --> 00:10:19.160\nSo we never wanna reuse those.\n\n193\n00:10:19.160 --> 00:10:20.230\nWell, VMware doesn't.\n\n194\n00:10:20.230 --> 00:10:23.200\nWhen we installed vCenter,\nit generated its own cert.\n\n195\n00:10:23.200 --> 00:10:25.860\nBut if you wanna be certain,\noption number four.\n\n196\n00:10:25.860 --> 00:10:28.412\nWe can hit that,\nit'll regenerate all the certificates, and\n\n197\n00:10:28.412 --> 00:10:30.780\nit will get us in business, right?\n\n198\n00:10:30.780 --> 00:10:35.472\nBut, what if you want to change\nthe way those certificates are?\n\n199\n00:10:35.472 --> 00:10:37.490\nYou wanna manipulate their bit strength,\nor\n\n200\n00:10:37.490 --> 00:10:41.740\nsomething like that, or you don't wanna\ngenerate the certificates yourself,\n\n201\n00:10:41.740 --> 00:10:45.450\nyou wanna generate the certificates\nfrom a CA that your already have.\n\n202\n00:10:45.450 --> 00:10:49.065\nMaybe you have a public key infrastructure\nalready in place and you don't want to use\n\n203\n00:10:49.065 --> 00:10:54.170\nself-sign certificates generated by them,\nyou wanna actually attach it to your own.\n\n204\n00:10:54.170 --> 00:10:55.770\nWell if you want you can do that.\n\n205\n00:10:55.770 --> 00:10:57.510\nAnd you'll see each one in here.\n\n206\n00:10:57.510 --> 00:11:01.100\nWe've got replace machine SSL\ncertificate with Custom Certificate.\n\n207\n00:11:01.100 --> 00:11:06.790\nReplace Solution user certificate,\nreplace the, here we go,\n\n208\n00:11:06.790 --> 00:11:11.790\nMachine SSL certificate with\nVMCA Certification or with custom signing.\n\n209\n00:11:11.790 --> 00:11:15.137\nSo we've got a few different options here\nto pick which one it is that we want.\n\n210\n00:11:15.137 --> 00:11:17.999\nIf you just wanna regenerate,\nnumber four, number four knocks out,\n\n211\n00:11:17.999 --> 00:11:20.210\nregenerates it with more self sign stuff.\n\n212\n00:11:20.210 --> 00:11:22.070\nBut if we go custom,\n\n213\n00:11:22.070 --> 00:11:26.020\nthat's when we can start to point to\nthings like our own pre-existing CA.\n\n214\n00:11:26.020 --> 00:11:29.600\nWe can generate a certificate signing\nrequest and get those signed,\n\n215\n00:11:29.600 --> 00:11:31.140\nand now it becomes a part of our PKI.\n\n216\n00:11:32.370 --> 00:11:34.180\nSo you got a few different options there.\n\n217\n00:11:34.180 --> 00:11:37.520\nAnd if you screw things up\nbecause it certainly is possible,\n\n218\n00:11:37.520 --> 00:11:38.950\nI can really mess things up.\n\n219\n00:11:38.950 --> 00:11:40.650\nIf I do, option number seven,\n\n220\n00:11:40.650 --> 00:11:43.680\nrevert the last perform operation by\nrepublishing the old certificates.\n\n221\n00:11:43.680 --> 00:11:46.010\nIt can just put us back\nto the way that it was.\n\n222\n00:11:46.010 --> 00:11:50.000\nSo if I go to regenerate my own, right,\nso I'll go ahead and do a number four.\n\n223\n00:11:50.000 --> 00:11:52.440\nWhen I go to regenerate,\nit's just prompting me here,\n\n224\n00:11:52.440 --> 00:11:54.140\nam I sure that's what I wanna do?\n\n225\n00:11:54.140 --> 00:11:55.810\nAnd my head's gonna be on top of this.\n\n226\n00:11:55.810 --> 00:11:57.740\nI don't know if we can get rid of my face.\n\n227\n00:11:57.740 --> 00:12:00.342\nBut you'll see, so\nam I sure I wanna do this?\n\n228\n00:12:00.342 --> 00:12:04.506\nI'll go ahead and just say yes to that,\nand now it's gonna start prompting me for\n\n229\n00:12:04.506 --> 00:12:05.928\nthe information, right?\n\n230\n00:12:05.928 --> 00:12:08.024\nPlease provide a valid single sign on and\n\n231\n00:12:08.024 --> 00:12:11.610\nVC privileged user credential to\nbe able to perform this operation.\n\n232\n00:12:11.610 --> 00:12:13.818\nSo I've got to be able to\nlogin with a valid account.\n\n233\n00:12:13.818 --> 00:12:17.400\nUser name, adminstrater@vsphere.locall\nis who I'm logged in as.\n\n234\n00:12:17.400 --> 00:12:18.480\nI'll stick with that.\n\n235\n00:12:18.480 --> 00:12:23.070\nAnd then the password,\nwhich I think I remember.\n\n236\n00:12:23.070 --> 00:12:25.570\nI've been really bad about\nremembering passwords this show.\n\n237\n00:12:25.570 --> 00:12:27.360\nAnd now, we can go through and\nprovide the other values.\n\n238\n00:12:27.360 --> 00:12:28.518\nRight, so here's where I can change it.\n\n239\n00:12:28.518 --> 00:12:32.100\nI don't wanna say that it was\ngenerated by VMware in Palo Alto,\n\n240\n00:12:32.100 --> 00:12:35.320\nI wanna say it was generated by us, right.\n\n241\n00:12:35.320 --> 00:12:39.200\nSo I might leave the name as CA,\nthat's fine.\n\n242\n00:12:39.200 --> 00:12:43.890\nBut then with the organization,\nI might wanna make that ITProTV.\n\n243\n00:12:45.090 --> 00:12:48.260\nAnd for the organizational unit,\nI might call this the lab.\n\n244\n00:12:49.670 --> 00:12:51.765\nThe state, we're in Florida.\n\n245\n00:12:51.765 --> 00:12:58.805\nThe locality is Gainesville and\nthe country is US, so I'll leave that be.\n\n246\n00:12:58.805 --> 00:13:00.935\nAnd then we've got that proper name.\n\n247\n00:13:00.935 --> 00:13:06.246\nNow the proper name is whatever people\nare accessing my server as it's called,\n\n248\n00:13:06.246 --> 00:13:11.410\nand they default to CA, but my server\nis actually, what is my server called?\n\n249\n00:13:11.410 --> 00:13:16.844\nIt's win-server01.lab.itpro.tv, so I'm\njust gonna punch in that proper name and\n\n250\n00:13:16.844 --> 00:13:20.383\nthen we get the value for\nthe organization and we continue.\n\n251\n00:13:20.383 --> 00:13:25.550\nSo, we should be good here and,\nactually we did jump, didn't we?\n\n252\n00:13:25.550 --> 00:13:30.498\nSo first I did my CA cert and now we've\ngot the machine cert that's generating.\n\n253\n00:13:30.498 --> 00:13:35.436\nSo it just prompted me again, so I'll\npunch these values in a second time and\n\n254\n00:13:35.436 --> 00:13:37.250\nthis is my lab.\n\n255\n00:13:37.250 --> 00:13:41.710\nWe are still in Florida, Gainesville.\n\n256\n00:13:41.710 --> 00:13:43.600\nI know, it's fun the second time isn't it?\n\n257\n00:13:43.600 --> 00:13:46.110\nAnd now,\nthey wanna know the IP address value And\n\n258\n00:13:46.110 --> 00:13:47.950\nthis one is optional I can leave it out.\n\n259\n00:13:47.950 --> 00:13:51.410\nBut if you know what your IP address is,\nyou can punch that in so\n\n260\n00:13:51.410 --> 00:13:53.270\nit'll be accurate.\n\n261\n00:13:53.270 --> 00:13:54.270\nAnd an email.\n\n262\n00:13:54.270 --> 00:13:58.610\nSo we can put in admin or\nwhatever it is that we want, for\n\n263\n00:13:58.610 --> 00:13:59.930\npeople to be able to see that.\n\n264\n00:13:59.930 --> 00:14:06.751\nAll right and now my fully qualified name\nwhich for me is win-server01.lab.itpro.tv.\n\n265\n00:14:06.751 --> 00:14:11.073\nAnd one last certificate, each one of\nthese certificates serves a different\n\n266\n00:14:11.073 --> 00:14:14.250\npurpose and so\nit's basically regenerating them all.\n\n267\n00:14:14.250 --> 00:14:17.880\nWe said regenerate everything, and you\nsaw the list in the background, whoops.\n\n268\n00:14:17.880 --> 00:14:21.410\nThe list in the background,\nwhich I've clicked away from here.\n\n269\n00:14:21.410 --> 00:14:23.510\nWhere you can see all these\ndifferent certificates.\n\n270\n00:14:23.510 --> 00:14:26.940\nWhat we're regenerating right\nnow are these four right here.\n\n271\n00:14:26.940 --> 00:14:28.990\nThose are the first two\nthat I just did and\n\n272\n00:14:28.990 --> 00:14:30.890\nnow it's doing the single sign on servers.\n\n273\n00:14:30.890 --> 00:14:32.770\nAnd it will end up\nregenerating these down here.\n\n274\n00:14:32.770 --> 00:14:35.190\nIf I remember right,\nit does these two automatically.\n\n275\n00:14:35.190 --> 00:14:38.102\nBut basically it will go through and\nprovide this information, and\n\n276\n00:14:38.102 --> 00:14:40.351\nwhen it's done it will\nregenerate these certs, and\n\n277\n00:14:40.351 --> 00:14:42.361\nnow I will know that they\nwere generated by me.\n\n278\n00:14:42.361 --> 00:14:45.177\n>> And Don, it's important to\nget all this information right,\n\n279\n00:14:45.177 --> 00:14:48.211\ncuz that correctly matches\nthe certificate to the right host, and\n\n280\n00:14:48.211 --> 00:14:51.760\none other thing too, you can't modify\nthese values after the fact, right?\n\n281\n00:14:51.760 --> 00:14:54.600\nCuz that would essentially be\ninvalidating a certificate, right?\n\n282\n00:14:54.600 --> 00:14:55.760\nSo it's a big no no.\n\n283\n00:14:55.760 --> 00:14:57.780\n>> Yeah, when they're self\nsigned certificates like this,\n\n284\n00:14:57.780 --> 00:14:58.680\nthis is not such a big deal.\n\n285\n00:14:58.680 --> 00:15:01.760\nBecause if you get it wrong you\njust regenerate them, right?\n\n286\n00:15:01.760 --> 00:15:05.752\nBut if you're tying this to an external\nCA and you're buying these certificates,\n\n287\n00:15:05.752 --> 00:15:08.617\nthat to regenerate them there\nbecomes a little bit harder.\n\n288\n00:15:08.617 --> 00:15:12.225\nThere are some providers like\nDigicert that are really good about\n\n289\n00:15:12.225 --> 00:15:14.270\nletting you reissue certificates.\n\n290\n00:15:14.270 --> 00:15:16.400\nThere's other providers that\nwon't let you reissue them and\n\n291\n00:15:16.400 --> 00:15:18.400\nyou have to buy them again,\nand so that's a problem.\n\n292\n00:15:18.400 --> 00:15:22.159\nIf it's your own internal CA,\nthen again, it's not such a big deal,\n\n293\n00:15:22.159 --> 00:15:24.925\nit just kinda depends on\nwhat you're trying to do.\n\n294\n00:15:24.925 --> 00:15:28.734\nSo I know I'm kind of getting bored\nwith entering all these already, but\n\n295\n00:15:28.734 --> 00:15:32.510\nwe don't actually have to go through and\nadd all of these.\n\n296\n00:15:32.510 --> 00:15:36.221\nLet's see, that should be about it.\n\n297\n00:15:36.221 --> 00:15:39.280\nAnd it's gonna do one more,\nso I'm gonna ignore that.\n\n298\n00:15:39.280 --> 00:15:40.380\nBut basically you punch those in, and\n\n299\n00:15:40.380 --> 00:15:42.170\nthen it's gonna regenerate\nthose certificates and\n\n300\n00:15:42.170 --> 00:15:45.980\nnow you'll know that they're ones that you\ngenerated yourself and they're in place.\n\n301\n00:15:45.980 --> 00:15:48.970\nSo definitely an easy kind\nof way to go about that.\n\n302\n00:15:48.970 --> 00:15:51.315\nJust remember from the command line\nclient, you can actually get work done.\n\n303\n00:15:51.315 --> 00:15:55.010\nFrom the GUI, it's pretty limited and\nit's normally really slow.\n\n304\n00:15:55.010 --> 00:15:57.259\nI'm apparently in some kind of\nBermuda Triangle nexus here,\n\n305\n00:15:57.259 --> 00:15:59.174\ncuz things are running really fast for\nme right now.\n\n306\n00:15:59.174 --> 00:16:00.041\nBut normally it's really slow.\n\n307\n00:16:00.041 --> 00:16:03.380\nI don't even bother going to the web\nUI in most cases because of that.\n\n308\n00:16:04.650 --> 00:16:08.180\nAll right, the other things we need to\nthink about when hardening your vCenter\n\n309\n00:16:08.180 --> 00:16:13.850\nserver really don't pertain to VMware,\nthey pertain to your operating system.\n\n310\n00:16:13.850 --> 00:16:18.520\nSo when we talk about hardening vCenter,\nvCenter is just a web page in my case,\n\n311\n00:16:18.520 --> 00:16:20.720\nrunning right on top of a Windows machine,\nright?\n\n312\n00:16:20.720 --> 00:16:23.100\nSo here it is, Windows Server 2012 R2.\n\n313\n00:16:23.100 --> 00:16:26.150\nAnd so\nwhen it comes to hardening the server,\n\n314\n00:16:26.150 --> 00:16:29.210\nI need to follow the vendor guides for\nthat, right.\n\n315\n00:16:29.210 --> 00:16:31.780\nFor this server its\nWindows server 2012 R2.\n\n316\n00:16:31.780 --> 00:16:34.320\nSo if I go to Microsoft's website\nthey have hardening guys for\n\n317\n00:16:34.320 --> 00:16:35.130\nWindows Server 2012.\n\n318\n00:16:35.130 --> 00:16:39.760\nYou can go in and disable any service\nyoure not using, you can turn on your\n\n319\n00:16:39.760 --> 00:16:43.320\nWindows firewall, restrict access from\nthere, those are all important things.\n\n320\n00:16:43.320 --> 00:16:45.990\nIt's all built right into\nthe Operating System.\n\n321\n00:16:45.990 --> 00:16:47.520\nSo, in the exam they're not\ngonna test you on that,\n\n322\n00:16:47.520 --> 00:16:52.210\nthey don't want you to be a Windows expert\nthey want you to be a vSphere expert.\n\n323\n00:16:52.210 --> 00:16:57.050\nBut what they may ask you is where should\nyou go to find out how to secure that and\n\n324\n00:16:57.050 --> 00:16:59.532\nyou want to say the hardening\nguide from the vendor.\n\n325\n00:16:59.532 --> 00:17:03.730\nAnd it'll usually be generic like that\nbecause there's Windows for a standard\n\n326\n00:17:03.730 --> 00:17:08.390\nvCenter install and there's Suse Linux for\nthe appliance install, but the appliance\n\n327\n00:17:08.390 --> 00:17:11.080\nis already hardened for the most part so\nwe don't have to sweat that so much.\n\n328\n00:17:12.470 --> 00:17:16.490\nAll right, just remember set your\nfirewall, set your user permissions.\n\n329\n00:17:16.490 --> 00:17:19.450\nIf the vCenter server is joined to\na domain that helps out a lot because\n\n330\n00:17:19.450 --> 00:17:22.380\nnow you can use your domain accounts\nwhich makes it easier to manage.\n\n331\n00:17:22.380 --> 00:17:24.680\nThose are all different things that\ncan kinda help with securing that.\n\n332\n00:17:26.570 --> 00:17:29.350\nAll right, after that we've\ngot our virtual machines and\n\n333\n00:17:29.350 --> 00:17:31.970\nwe haven't worked much with\nvirtual machines so far.\n\n334\n00:17:31.970 --> 00:17:35.820\nWe haven't done the episode on creating\nvirtual machines yet but when it comes\n\n335\n00:17:35.820 --> 00:17:39.650\nhardening virtual machines, the virtual\nmachines run their own operating system.\n\n336\n00:17:39.650 --> 00:17:42.940\nAnd so whatever that operating system is,\nyou've got hardening guides for\n\n337\n00:17:42.940 --> 00:17:43.690\nthose OS's.\n\n338\n00:17:43.690 --> 00:17:46.110\nYou go to RedHat or Ubuntu.\n\n339\n00:17:46.110 --> 00:17:49.680\nYou go to Microsoft, whoever it is that\nmade the operating system for that VM and\n\n340\n00:17:49.680 --> 00:17:52.680\nyou follow their hardening guide for\nthe virtual machine itself.\n\n341\n00:17:52.680 --> 00:17:57.260\nOn the VMware side,\nwe can't harden the guest OS, but\n\n342\n00:17:57.260 --> 00:18:00.650\nwe can harden the access to the guest OS.\n\n343\n00:18:00.650 --> 00:18:02.860\nThe ways that we're able to\ninteract with that guest OS,\n\n344\n00:18:02.860 --> 00:18:05.430\nthat's the stuff that we\ncan harden on our systems.\n\n345\n00:18:05.430 --> 00:18:08.320\nAnd by default it's pretty wide open.\n\n346\n00:18:08.320 --> 00:18:14.690\nAny user that's allowed to log into the\nvCenter will be able to view the settings\n\n347\n00:18:14.690 --> 00:18:18.120\nthat virtual machine and potentially\nopen up a console connection to it.\n\n348\n00:18:18.120 --> 00:18:20.300\nAnd so we need to make sure\nthat we restrict access so\n\n349\n00:18:20.300 --> 00:18:22.950\nthat only the people we want to\nhave access will have access.\n\n350\n00:18:22.950 --> 00:18:27.940\nAnd there's certain parts where we blur\nthe lines between the VM and vCenter.\n\n351\n00:18:27.940 --> 00:18:31.530\nFor example with the VM Ware tools,\nwhen you install a virtual machine,\n\n352\n00:18:31.530 --> 00:18:36.450\nthe guest OS, is it really aware that\nit's running on a virtual environment?\n\n353\n00:18:36.450 --> 00:18:40.830\nAnd we installed a virtual machine tools\ninto it to enable extra functionality and\n\n354\n00:18:40.830 --> 00:18:41.730\nnow it is aware.\n\n355\n00:18:41.730 --> 00:18:44.600\nNow it knows it's running on\na virtual infrastructure and\n\n356\n00:18:44.600 --> 00:18:46.280\nthe line starts to get\na little bit blurred.\n\n357\n00:18:46.280 --> 00:18:49.680\nThe guests can start to see\ncomponents inside of the server.\n\n358\n00:18:49.680 --> 00:18:52.580\nAnd so when that happens we need you to\njust take some steps to make sure that\n\n359\n00:18:52.580 --> 00:18:55.670\nthat is protected,\nif that's even the behavior we want.\n\n360\n00:18:55.670 --> 00:18:59.630\nMaybe we completely do not want the guest\nVM to know that it's virtualized,\n\n361\n00:18:59.630 --> 00:19:02.640\nthat as far as it's concerned,\nit is on a hardware system.\n\n362\n00:19:02.640 --> 00:19:04.025\nThere are times where we want that, right?\n\n363\n00:19:04.025 --> 00:19:07.075\nAnd you don't want people to\ninteract with the underlying system.\n\n364\n00:19:07.075 --> 00:19:10.925\nSo for that there are steps that\nwe can take to harden the system.\n\n365\n00:19:10.925 --> 00:19:15.615\nLet's run through a few\nof those VMWare tools.\n\n366\n00:19:15.615 --> 00:19:16.952\nI might want it so\n\n367\n00:19:16.952 --> 00:19:21.622\nthat when I deploy a virtual machine,\nthat it doesn't have the VMware tools.\n\n368\n00:19:21.622 --> 00:19:25.632\nThat it just runs the guest OS, and the\nguest OS thinks that it is all by itself.\n\n369\n00:19:25.632 --> 00:19:30.300\nSo I might wanna restrict who's\nallowed to install those VMware tools.\n\n370\n00:19:30.300 --> 00:19:33.390\nI might not want anybody to be able\nto install those VMware tools,\n\n371\n00:19:33.390 --> 00:19:38.130\nI might want to allow,\nit's up to me how I wanna do that.\n\n372\n00:19:38.130 --> 00:19:42.170\nBut we can do that easily through\nthe permissions inside of vCenter.\n\n373\n00:19:42.170 --> 00:19:46.780\nIf I go back up to my home page here,\nI'm gonna go to administration and\n\n374\n00:19:46.780 --> 00:19:47.469\nI'm gonna go to Roles.\n\n375\n00:19:48.560 --> 00:19:55.790\nI can create a role called allowed or\n\n376\n00:19:55.790 --> 00:20:01.565\nallow to install VMware tools or\nI'll just call the VM tools.\n\n377\n00:20:01.565 --> 00:20:02.493\nThat's what they normally call it.\n\n378\n00:20:02.493 --> 00:20:05.895\nSo I'm gonna create one called\nallow to install VM tools, right?\n\n379\n00:20:05.895 --> 00:20:10.225\nAnd down here in my privileges\nI can scroll down and\n\n380\n00:20:10.225 --> 00:20:13.295\nfind the ability to install that.\n\n381\n00:20:13.295 --> 00:20:16.090\nSo I'm gonna go down here and\nfind Virtual Machine.\n\n382\n00:20:16.090 --> 00:20:19.040\nAnd inside of Virtual Machine\nyou got a few different options.\n\n383\n00:20:19.040 --> 00:20:23.230\nAnd here I'm looking for interaction,\nand under interaction I can find\n\n384\n00:20:24.550 --> 00:20:29.345\nthe install of VMware tools right there,\nVMware Tools Install, okay?\n\n385\n00:20:29.345 --> 00:20:31.055\nSo, I can check that off.\n\n386\n00:20:31.055 --> 00:20:36.095\nAnd now, somebody who has this role will\nbe allowed to install the VMware Tools.\n\n387\n00:20:36.095 --> 00:20:38.735\nAnd I might not wanna go\nas dedicated as this.\n\n388\n00:20:38.735 --> 00:20:42.447\nI might want to create it a little bit\nbigger like a manage virtual machines role\n\n389\n00:20:42.447 --> 00:20:44.557\nthat allows you to do this\nas well as other things.\n\n390\n00:20:44.557 --> 00:20:47.037\nAnd you'll see some of the other\nthings that I mentioned.\n\n391\n00:20:47.037 --> 00:20:53.847\nWith VMware Tools, it allows us to do more\nthan just have a virtual machine running.\n\n392\n00:20:53.847 --> 00:20:56.777\nFor example, some of the things it\nprovides are the ability to synchronize\n\n393\n00:20:56.777 --> 00:21:00.020\nthe clock between the guest and\nthe host OS.\n\n394\n00:21:00.020 --> 00:21:06.790\nSo the clock on the host ESXI box will\nset the clock in the virtual machine.\n\n395\n00:21:06.790 --> 00:21:08.320\nSometimes you want that,\nsometimes you don't.\n\n396\n00:21:08.320 --> 00:21:10.850\nLike if you have a Windows\ndomain controller it hates that.\n\n397\n00:21:10.850 --> 00:21:14.282\nYou never wanna synchronize a domain\ncontroller's clock with anything other\n\n398\n00:21:14.282 --> 00:21:16.475\nthan NTP sever so this kinda breaks it.\n\n399\n00:21:16.475 --> 00:21:20.165\nBut with guest OS other guest OS\nwas you might want that right?\n\n400\n00:21:20.165 --> 00:21:23.173\nSo we see a lot of that right\nhere in our permissions.\n\n401\n00:21:23.173 --> 00:21:27.367\nYou start kinda browsing through what's\nall in here you'll see things like\n\n402\n00:21:27.367 --> 00:21:28.977\nconfigure CD media.\n\n403\n00:21:28.977 --> 00:21:31.737\nWho's allowed to attached an ISO image or\n\n404\n00:21:31.737 --> 00:21:33.797\ndetach an ISO image from\nthat virtual machine.\n\n405\n00:21:33.797 --> 00:21:38.277\nI may not want somebody to have that\npermission so I can turn that on and off.\n\n406\n00:21:40.148 --> 00:21:43.498\nOther things, drag and drop,\nwhere is, drag and drop right here.\n\n407\n00:21:43.498 --> 00:21:44.468\nThis is a big one.\n\n408\n00:21:44.468 --> 00:21:49.498\nOkay, drag and drop, somebody could\nbe viewing the console of a guest.\n\n409\n00:21:49.498 --> 00:21:55.148\nSo we log into vCenter, we find a host\nwe click to connect to its console and\n\n410\n00:21:55.148 --> 00:21:58.238\nnow we see the screen of that desktop.\n\n411\n00:21:58.238 --> 00:22:03.410\nWell if it's running Linux with a GUI or\nif it's running Windows you can drag and\n\n412\n00:22:03.410 --> 00:22:07.190\ndrop files from the VM to your desktop or\n\n413\n00:22:07.190 --> 00:22:09.390\nfrom your desktop or\nfrom your desktop to the VM.\n\n414\n00:22:09.390 --> 00:22:12.030\nWell, maybe you've written\nsome malicious software and\n\n415\n00:22:12.030 --> 00:22:15.300\nyou drag that from your desktop and\nyou drag that right into the VM.\n\n416\n00:22:15.300 --> 00:22:16.770\nNow you're moving data.\n\n417\n00:22:16.770 --> 00:22:19.940\nOver the network, we can protect that\nwith firewalls and access lists and\n\n418\n00:22:19.940 --> 00:22:25.080\nstuff like that, but here it's happening\nentirely through the connection\n\n419\n00:22:25.080 --> 00:22:29.470\nto the console that VMware provides and\nwe may not want that.\n\n420\n00:22:29.470 --> 00:22:34.670\nAnd so by providing a drag and drop\naccess that can be a risk, and so we may\n\n421\n00:22:34.670 --> 00:22:40.210\nwanna remove that access, so that while\nwe are granting somebody console access,\n\n422\n00:22:40.210 --> 00:22:45.400\nlike console interaction that were\nnot giving them drag and drop, okay.\n\n423\n00:22:45.400 --> 00:22:51.660\nThere's always that temptation that if\nI'm saying like allow to manage VM right?\n\n424\n00:22:51.660 --> 00:22:53.220\nso this role I'm gonna use it for\n\n425\n00:22:53.220 --> 00:22:58.210\nanybody who's allowed to manage the VM,\nI might not want to grant them drag and\n\n426\n00:22:58.210 --> 00:23:01.240\ndrop, I might not want to grant\nthem VMware Tools install.\n\n427\n00:23:01.240 --> 00:23:04.360\nNow, if the VMWare Tools aren't installed,\ndrag and drop doesn't work.\n\n428\n00:23:04.360 --> 00:23:05.780\nSo if I'd taken this away.\n\n429\n00:23:05.780 --> 00:23:10.170\nBut now I've added VMware Tools Install\nbut I'm not giving them drag and\n\n430\n00:23:10.170 --> 00:23:10.930\ndrop permissions.\n\n431\n00:23:10.930 --> 00:23:14.030\nSo even though the functionality is there,\nthey won't be able to do it.\n\n432\n00:23:14.030 --> 00:23:17.780\nThat's cool because other users\nmight want to have that access.\n\n433\n00:23:17.780 --> 00:23:18.670\nSo now I can pick and\n\n434\n00:23:18.670 --> 00:23:20.980\nchoose versus just not having\nit installed in the first place.\n\n435\n00:23:20.980 --> 00:23:22.638\nThat's a little more flexible.\n\n436\n00:23:22.638 --> 00:23:26.650\nSo VMware tools,\nit gives you great features but\n\n437\n00:23:26.650 --> 00:23:28.610\nit does come along with a little risk.\n\n438\n00:23:28.610 --> 00:23:31.170\nIf you just browse around through here\nyou'll see all the different things that\n\n439\n00:23:31.170 --> 00:23:34.080\nyou can give access to,\nlike recording sessions and so on.\n\n440\n00:23:34.080 --> 00:23:36.200\nThese are things you may\nnot want people to have.\n\n441\n00:23:36.200 --> 00:23:38.800\nIf you want somebody to have temporary\naccess to a virtual machine you may not\n\n442\n00:23:38.800 --> 00:23:42.290\nwant them to be able to record a session\nbecause after you remove their access they\n\n443\n00:23:42.290 --> 00:23:43.920\nstill have the recording and\nthey can go back and\n\n444\n00:23:43.920 --> 00:23:46.060\nlook at data that you might not want\nthem to have access to anymore.\n\n445\n00:23:46.060 --> 00:23:48.450\nSo these are just things\nthat we can kind of tweak.\n\n446\n00:23:48.450 --> 00:23:52.293\nWhen you grant somebody control of\na virtual machine you don't have to give\n\n447\n00:23:52.293 --> 00:23:54.741\nthem 100% control of the virtual machine.\n\n448\n00:23:54.741 --> 00:23:59.114\nYou can create a custom role and\npick, and choose what they get.\n\n449\n00:23:59.114 --> 00:24:00.220\nYou gotta be careful with that.\n\n450\n00:24:00.220 --> 00:24:03.730\nBecause what a lot of people do is when\nthey go to give access to somebody for\n\n451\n00:24:03.730 --> 00:24:04.930\na virtual machine.\n\n452\n00:24:04.930 --> 00:24:07.484\nThey'll give them administrator\naccess on that one VM.\n\n453\n00:24:07.484 --> 00:24:10.560\nLet's say Wes,\nyou're in control of this virtual machine.\n\n454\n00:24:10.560 --> 00:24:11.810\nI'll just make you an admin on that VM.\n\n455\n00:24:12.830 --> 00:24:14.500\nThey limited it, right.\nThey're not an admin on\n\n456\n00:24:14.500 --> 00:24:17.750\nthe whole data center or\nan admin in all of vCenter.\n\n457\n00:24:17.750 --> 00:24:21.520\nBut they're an admin just in that VM,\nbut they can do anything.\n\n458\n00:24:21.520 --> 00:24:22.350\nI may not want that.\n\n459\n00:24:22.350 --> 00:24:25.100\nSo that's where you start to create\nthings like virtual machine user.\n\n460\n00:24:25.100 --> 00:24:26.740\nThis is a sample one that they've made.\n\n461\n00:24:26.740 --> 00:24:29.780\nAnd if you look at the sample they made,\nyou can come down here and\n\n462\n00:24:29.780 --> 00:24:32.490\nsee where they've got\npermissions doled out.\n\n463\n00:24:32.490 --> 00:24:36.880\nIf we go down to virtual machine and\ninteraction.\n\n464\n00:24:36.880 --> 00:24:40.360\nWe can see where they've given them\npermission for console interaction, for\n\n465\n00:24:40.360 --> 00:24:41.900\ndevice connection.\n\n466\n00:24:41.900 --> 00:24:44.120\nThey've not given them drag and drop.\n\n467\n00:24:44.120 --> 00:24:47.610\nSo VMware is kind of showing us an example\nof a throttled down connection right\n\n468\n00:24:47.610 --> 00:24:50.650\nthere, just right here in our\ntemplate default profiles.\n\n469\n00:24:50.650 --> 00:24:56.050\nAll right, what are some of the other\nthings we have to worry about in here?\n\n470\n00:24:57.100 --> 00:25:00.720\nWith virtual machines, for\nthe most part that's the limit\n\n471\n00:25:00.720 --> 00:25:03.180\nto what we can harden on\nthe virtual machine itself, right?\n\n472\n00:25:03.180 --> 00:25:05.520\nLimiting people's access to the VM.\n\n473\n00:25:05.520 --> 00:25:08.720\nEverything else that we harden is done\nfrom inside of the virtual machine itself.\n\n474\n00:25:08.720 --> 00:25:12.630\nThe one exception is networking, right?\n\n475\n00:25:12.630 --> 00:25:15.200\nEvery virtual machine you create is going\nto be connected to a virtual switch.\n\n476\n00:25:15.200 --> 00:25:18.360\nAnd we're going to see virtual switches\nin a couple episodes coming up.\n\n477\n00:25:18.360 --> 00:25:20.490\nBut those virtual switches\nare like real switches.\n\n478\n00:25:20.490 --> 00:25:22.937\nIf I take two computers and\nI plugged them into the same switch,\n\n479\n00:25:22.937 --> 00:25:24.612\nthey're going to see each other, right?\n\n480\n00:25:24.612 --> 00:25:27.300\nIf I take two virtual machines and\nI plug them into the same switch,\n\n481\n00:25:27.300 --> 00:25:29.550\nthey're going to see each other.\n\n482\n00:25:29.550 --> 00:25:30.950\nI may not want that.\n\n483\n00:25:30.950 --> 00:25:34.680\nLet's say that i've got a DMZ,\nright, a demilitarized zone.\n\n484\n00:25:34.680 --> 00:25:37.870\nThese are web servers that\ni'm exposing to the internet.\n\n485\n00:25:37.870 --> 00:25:41.549\nI might have five web servers, and I want\nall five of them available to the public.\n\n486\n00:25:42.620 --> 00:25:46.420\nWell if I put them all on one virtual\nswitch those five machines all\n\n487\n00:25:46.420 --> 00:25:47.880\nsee each other.\n\n488\n00:25:47.880 --> 00:25:49.220\nI may not want that.\n\n489\n00:25:49.220 --> 00:25:51.310\nA hacker might break into one and\n\n490\n00:25:51.310 --> 00:25:56.160\nthen use that to gain extra\naccess to the other four, right?\n\n491\n00:25:56.160 --> 00:25:58.140\nSo if I want to prevent that.\n\n492\n00:25:58.140 --> 00:26:01.780\nI could put each virtual machine\non its own virtual switch.\n\n493\n00:26:01.780 --> 00:26:03.950\nThese are virtual switches,\nthey don't cost us any money.\n\n494\n00:26:03.950 --> 00:26:07.650\nIf I have one or if I have 50, it costs\nus the same exact amount of money.\n\n495\n00:26:07.650 --> 00:26:10.630\nSo unlike a physical switch where I\nhave to go and buy more hardware or\n\n496\n00:26:10.630 --> 00:26:14.390\nI have to do crazy VLAN setups,\nhere I just create more virtual switches.\n\n497\n00:26:14.390 --> 00:26:16.150\nAnd now,\nI can start to separate them out and\n\n498\n00:26:16.150 --> 00:26:20.250\nI can make it where one virtual machine\nis not able to talk to another.\n\n499\n00:26:20.250 --> 00:26:21.812\nIf you use VLAN, you can get even further.\n\n500\n00:26:21.812 --> 00:26:24.424\nNow you can create truly\nseparated networks and\n\n501\n00:26:24.424 --> 00:26:28.660\nthese VM's will not be able to see\neach other at all via the network.\n\n502\n00:26:28.660 --> 00:26:31.150\nTheir memory is already isolated by ESX.\n\n503\n00:26:31.150 --> 00:26:33.890\nTheir CPU access is isolated,\nthe disc access is isolated.\n\n504\n00:26:33.890 --> 00:26:35.720\nYou have complete isolation.\n\n505\n00:26:35.720 --> 00:26:39.117\nNetwork is the one place where the virtual\nmachines start to blend together.\n\n506\n00:26:39.117 --> 00:26:42.103\nAnd even the host can blend\ntogether on that, too,\n\n507\n00:26:42.103 --> 00:26:44.780\nif you've chosen to give that access.\n\n508\n00:26:44.780 --> 00:26:46.971\nWe'll cover virtual switches,\nv-switches, and\n\n509\n00:26:46.971 --> 00:26:49.270\ndistributed v-switches in\na few episodes coming up.\n\n510\n00:26:49.270 --> 00:26:50.900\nI definitely encourage you to watch those,\n\n511\n00:26:50.900 --> 00:26:53.510\nbecause when you create\nthem you make the choice.\n\n512\n00:26:53.510 --> 00:26:56.870\nOf how visible you want the host\non them to be and the guest to be.\n\n513\n00:26:56.870 --> 00:27:00.460\nAnd so, you can create very\nrestrictive switches or\n\n514\n00:27:00.460 --> 00:27:02.080\nyou can create very broad switches.\n\n515\n00:27:02.080 --> 00:27:03.120\nJust be careful.\n\n516\n00:27:03.120 --> 00:27:05.520\nLet me show you one of the main\nreasons we have to be careful.\n\n517\n00:27:05.520 --> 00:27:10.120\nI'm gonna go and\npull up my networking on these.\n\n518\n00:27:10.120 --> 00:27:15.750\nSo if I go back up to my home screen and\nI'm gonna go down here to networking.\n\n519\n00:27:15.750 --> 00:27:18.680\nAnd I'm gonna pull up my Virtual\nmachine network, all right.\n\n520\n00:27:18.680 --> 00:27:22.350\nWhen I look at the virtual machine\nnetwork that I've got in my environment\n\n521\n00:27:22.350 --> 00:27:25.760\nwhat I'm seeing here is not a whole lot.\n\n522\n00:27:25.760 --> 00:27:27.770\nSo I see that I've got\none virtual machine.\n\n523\n00:27:27.770 --> 00:27:30.180\nI've got a couple of hosts,\nand nothing shows up here.\n\n524\n00:27:30.180 --> 00:27:32.750\nAnd that's because this is\na pretty plain installer.\n\n525\n00:27:32.750 --> 00:27:35.375\nThere's not really a whole\nlot spectacular going on.\n\n526\n00:27:35.375 --> 00:27:41.670\nBut if I jump over to my host and\nclusters, and I go in and I find a host.\n\n527\n00:27:41.670 --> 00:27:44.690\nEvery host has a default network switch.\n\n528\n00:27:44.690 --> 00:27:47.370\nAnd so, if I go to the host and\nI go to Manage, and\n\n529\n00:27:47.370 --> 00:27:50.720\nI go to Networking,\nit's gonna show me Virtual Switches.\n\n530\n00:27:50.720 --> 00:27:54.500\nAnd here's where I can see\nthe default virtual switches created.\n\n531\n00:27:54.500 --> 00:27:56.910\nAnd the way that it's configured\nis certainly functional.\n\n532\n00:27:56.910 --> 00:28:00.100\nIt certainly does the job\nthat it's intended to do.\n\n533\n00:28:00.100 --> 00:28:03.446\nBut what you have is a management network.\n\n534\n00:28:03.446 --> 00:28:08.261\nThis is how we management VMware,\nV center and\n\n535\n00:28:08.261 --> 00:28:13.823\nthe ESXI host and\nyou have a Virtual machine network.\n\n536\n00:28:13.823 --> 00:28:17.775\nAnd they're both connected to\nyour first physical adaptor,\n\n537\n00:28:17.775 --> 00:28:22.050\nwell VMware recommends you have\nmultiple physical adaptors.\n\n538\n00:28:22.050 --> 00:28:25.540\nThat way you can have one\ndedicated just for management.\n\n539\n00:28:25.540 --> 00:28:29.520\nYou can have another dedicated for\nyour virtual machines or\n\n540\n00:28:29.520 --> 00:28:31.510\neven individual virtual machines.\n\n541\n00:28:31.510 --> 00:28:33.960\nI might have five VMs so\nI put five network cards in this,\n\n542\n00:28:33.960 --> 00:28:35.550\nthey all have separate network cards.\n\n543\n00:28:35.550 --> 00:28:38.840\nOr they might be tied to VLAN's, so\nI'm not using VLAN ID's here, so\n\n544\n00:28:38.840 --> 00:28:40.370\nI could have virtual local area networks.\n\n545\n00:28:40.370 --> 00:28:42.526\nThey could be on the same physical card,\nbut\n\n546\n00:28:42.526 --> 00:28:45.045\nvirtually divided to isolate\nthem on that system.\n\n547\n00:28:45.045 --> 00:28:49.830\nNow, I don't see anybody connected, which\nmean my virtual machines are probably off.\n\n548\n00:28:49.830 --> 00:28:53.480\nSo let's go see if that is the case.\n\n549\n00:28:53.480 --> 00:28:54.057\nYeah, this virtual machine is off.\n\n550\n00:28:54.057 --> 00:28:55.926\nSo let me just power this turkey on.\n\n551\n00:28:55.926 --> 00:28:58.969\nAnd that way it will connect\nto its network interface and\n\n552\n00:28:58.969 --> 00:29:01.960\nwe'll see it appear back under\na host in just a moment.\n\n553\n00:29:01.960 --> 00:29:03.270\nAll right, so that one's powering on.\n\n554\n00:29:03.270 --> 00:29:06.600\nIt should already be there and\nit is, okay.\n\n555\n00:29:06.600 --> 00:29:10.330\nSo now if I look, that virtual machine\nnetwork, see how it's got WEB01.\n\n556\n00:29:10.330 --> 00:29:12.120\nAnd it's plugged in and\n\n557\n00:29:12.120 --> 00:29:16.550\nif I follow the little line here,\nsee how the two lines come together?\n\n558\n00:29:16.550 --> 00:29:19.750\nThe management and that virtual machine\ncome together and it come across.\n\n559\n00:29:19.750 --> 00:29:22.558\nThat means this virtual machine can\nactually access the management interface.\n\n560\n00:29:22.558 --> 00:29:26.847\nSo if somebody were to hack in to\nthis web server, they can now try and\n\n561\n00:29:26.847 --> 00:29:30.810\naccess V center that's not good,\nwe don't want that.\n\n562\n00:29:30.810 --> 00:29:34.180\nWell, this is the management interface for\nthe host.\n\n563\n00:29:34.180 --> 00:29:37.657\nIf the host has had that management\ninterface disabled like we saw in\n\n564\n00:29:37.657 --> 00:29:39.304\nthe first part of this episode.\n\n565\n00:29:39.304 --> 00:29:41.045\nThen they won't be able to get to it.\n\n566\n00:29:41.045 --> 00:29:44.830\nBut what would be better would be if\nthis was plugged into something else.\n\n567\n00:29:44.830 --> 00:29:46.740\nAnd you can create one of two things.\n\n568\n00:29:46.740 --> 00:29:48.750\nThese right here are called port groups.\n\n569\n00:29:48.750 --> 00:29:51.580\nSo I've got one port group here for\nmanagement, and another port group for\n\n570\n00:29:51.580 --> 00:29:54.040\nthis VM, and any other VM that I create.\n\n571\n00:29:54.040 --> 00:29:55.990\nI can create multiple port groups and\n\n572\n00:29:55.990 --> 00:29:58.550\nput them on different V-lanes,\nthat's one solution.\n\n573\n00:29:58.550 --> 00:30:01.248\nOr I can create multiple virtual switches,\nand\n\n574\n00:30:01.248 --> 00:30:04.153\nI can move this VM network\nover to the other switch.\n\n575\n00:30:04.153 --> 00:30:07.527\nSo it's like two different switches\nas long as I don't uplink them,\n\n576\n00:30:07.527 --> 00:30:10.320\nthey will be separated and\nisolated, alright.\n\n577\n00:30:10.320 --> 00:30:14.136\nThat's the main way that we can control\nvirtual machine to virtual machine\n\n578\n00:30:14.136 --> 00:30:15.722\ncommunications, all right.\n\n579\n00:30:15.722 --> 00:30:19.710\nVM to VM really network is\nthe only way they can blend.\n\n580\n00:30:19.710 --> 00:30:22.150\nMemory is isolated, processor's isolated,\n\n581\n00:30:22.150 --> 00:30:24.890\ndisc is isolated,\nnetwork is the only place where it isn't.\n\n582\n00:30:24.890 --> 00:30:28.233\n>> And Donny, theoretically even if you've\ndone your due diligence like you've said,\n\n583\n00:30:28.233 --> 00:30:30.084\nyou've looked at your\nvendor documentation.\n\n584\n00:30:30.084 --> 00:30:32.256\nYou've hardened the servers so\nthe devices that are on those networks.\n\n585\n00:30:32.256 --> 00:30:34.390\nI can really run a sniffer, right?\n\n586\n00:30:34.390 --> 00:30:37.430\nIf it's a switch, I can capture\nadvertisements and broadcast it.\n\n587\n00:30:37.430 --> 00:30:40.020\nNecessarily, maybe you don't\nwant anybody seeing it.\n\n588\n00:30:40.020 --> 00:30:40.950\n>> Yeah, absolutely.\n\n589\n00:30:40.950 --> 00:30:44.130\nAnd in the first part of this episode,\nwe talked a little bit about promiscuous\n\n590\n00:30:44.130 --> 00:30:46.650\nmode which is what sniffer would need and\nwe saw what we could disable.\n\n591\n00:30:46.650 --> 00:30:49.460\nWe can block that functionality,\nthese are things that we can certainly do.\n\n592\n00:30:49.460 --> 00:30:52.790\nRight there the functional is right\nthere with certain note to configure and\n\n593\n00:30:52.790 --> 00:30:53.370\nget set up.\n\n594\n00:30:53.370 --> 00:30:57.820\nSo don’t assume that the default install\nset up exactly the way you want it.\n\n595\n00:30:57.820 --> 00:31:00.905\nEverybody got different need, you may\nneed to tweak that on the DMC Server.\n\n596\n00:31:00.905 --> 00:31:05.564\nYou've got a lot of strict than you\nare on internal LAN server you can\n\n597\n00:31:05.564 --> 00:31:08.600\nstill be too lacks on internal server.\n\n598\n00:31:08.600 --> 00:31:10.490\nYou basically just need to get\nthese things configured and\n\n599\n00:31:10.490 --> 00:31:11.530\nset up the way they want them.\n\n600\n00:31:11.530 --> 00:31:15.170\nSo, we're going to see virtual switches\nagain a little bit later, but definitely\n\n601\n00:31:15.170 --> 00:31:18.630\nbe aware that that's something that you're\ngoing to need to tweak and configure.\n\n602\n00:31:18.630 --> 00:31:22.071\nBut otherwise, I think that's a pretty\ngood rundown there of hardening,\n\n603\n00:31:22.071 --> 00:31:23.939\nin Part I we saw hardening our EXI hosts.\n\n604\n00:31:23.939 --> 00:31:26.538\nAnd in this episode we talk\nabout hardening V Center and\n\n605\n00:31:26.538 --> 00:31:29.319\ntalk about hardening, not so\nmuch the virtual machines.\n\n606\n00:31:29.319 --> 00:31:32.680\nAs much as it is the access to\nthe virtual machines, right.\n\n607\n00:31:32.680 --> 00:31:35.690\nAnd making sure that we get\nthat most secure environment.\n\n608\n00:31:35.690 --> 00:31:38.218\nWe talk about custom building\nour security profile.\n\n609\n00:31:38.218 --> 00:31:43.030\nCuz those roles that we have might not\nmeet the needs exactly as we want them.\n\n610\n00:31:43.030 --> 00:31:45.940\nSo don't hesitate to create your own and\nbuild a nice,\n\n611\n00:31:45.940 --> 00:31:50.060\nsecure environment where nobody has\nmore access than they absolutely need.\n\n612\n00:31:50.060 --> 00:31:53.020\n>> A lot of great advice, to, on getting\nthat third party documentation and\n\n613\n00:31:53.020 --> 00:31:55.110\nfollowing their advice as well, Don.\n\n614\n00:31:55.110 --> 00:31:57.490\nDoes look like we're coming to\nthe end of another episode, and\n\n615\n00:31:57.490 --> 00:31:59.120\nI know this is very security centric.\n\n616\n00:31:59.120 --> 00:31:59.725\nSo I can only imagine.\n\n617\n00:31:59.725 --> 00:32:01.476\n>> [LAUGH]\n>> You've probably got a little bit more\n\n618\n00:32:01.476 --> 00:32:02.556\nadvice, before we call it a day.\n\n619\n00:32:02.556 --> 00:32:06.687\n>> As always, once you get your\nenvironment set up perfectly,\n\n620\n00:32:06.687 --> 00:32:08.990\nyou're done, right?\n\n621\n00:32:08.990 --> 00:32:10.420\nYou're done right then.\n\n622\n00:32:10.420 --> 00:32:13.040\nBut over time,\npeople start making changes.\n\n623\n00:32:13.040 --> 00:32:16.760\nAnd your system might have been secured\non day one, but on day 50, on day 100,\n\n624\n00:32:16.760 --> 00:32:18.260\nyou may not be secure anymore.\n\n625\n00:32:18.260 --> 00:32:20.160\nSo you've always got to revisit the stuff.\n\n626\n00:32:20.160 --> 00:32:23.130\nAnd that's where things like host\nprofiles, that we can reapply and\n\n627\n00:32:23.130 --> 00:32:24.960\nremediate, those really come in handy.\n\n628\n00:32:24.960 --> 00:32:27.960\nUnfortunately, we don't have that for\ndistributed virtual switches.\n\n629\n00:32:27.960 --> 00:32:32.750\nSo, with DV switches, you've gotta go back\nand just evaluate them from time to time,\n\n630\n00:32:32.750 --> 00:32:33.650\nlook at the configuration.\n\n631\n00:32:33.650 --> 00:32:36.440\nDo an internal audit and\nmake sure that you\n\n632\n00:32:36.440 --> 00:32:39.570\ndon't have any VM's attached to your\nmanagement interface, that kind of stuff.\n\n633\n00:32:39.570 --> 00:32:40.790\nAnd just keep an eye on it.\n\n634\n00:32:40.790 --> 00:32:43.980\nYou got to have constant vigilance, and\nmake sure that your systems are secure.\n\n635\n00:32:43.980 --> 00:32:47.090\n>> Well, Don, we appreciate as always\nhaving you in the studios with us, and\n\n636\n00:32:47.090 --> 00:32:48.650\nwe appreciate you the viewer joining us.\n\n637\n00:32:48.650 --> 00:32:51.506\nSigning off for IT Pro TV,\nI've been your host, Wes Brian.\n\n638\n00:32:51.506 --> 00:32:53.182\n>> And I'm Don Pezet.\n>> And we'll see you next time.\n\n639\n00:32:53.182 --> 00:32:55.470\n[MUSIC]\n\n",
          "vimeoId": "168554784"
        }
      ],
      "title": "vSphere Security"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don demonstrate the types of vSwitches that can be set up and used in vSphere. They look at VM-base vSwitches that are used for VM communications as well as VMkernel vSwitches that are used for host communications and management.",
          "length": "2005",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-1-configureing_vswitches-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-1-configureing_vswitches-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-1-configureing_vswitches-1-sm.jpg",
          "title": "Configuring vSwitches",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.746 --> 00:00:14.366\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.366 --> 00:00:18.290\nI'm your host Wes Bryan, and in today's\nepisode we're continuing through our\n\n4\n00:00:18.290 --> 00:00:21.534\nseries, within the VMware certified\nprofessional version six.\n\n5\n00:00:21.534 --> 00:00:25.177\nWe're moving into new territory,\nand that is vSphere networking, and\n\n6\n00:00:25.177 --> 00:00:27.650\nwe are looking at\nconfiguring vSwitches today.\n\n7\n00:00:27.650 --> 00:00:30.160\nJoining me today back in the studios\nis none other than is Mr. Don Pezet.\n\n8\n00:00:30.160 --> 00:00:31.260\nDon how you doing sir?\n\n9\n00:00:31.260 --> 00:00:35.130\n>> I am doing swell, ready to jump\nright back into vSphere six and\n\n10\n00:00:35.130 --> 00:00:38.100\nlike Wes said in this episode we're\ngonna be looking at networking.\n\n11\n00:00:38.100 --> 00:00:42.030\nSo we really haven't touched networking\nvery much so far, and we kinda need to.\n\n12\n00:00:42.030 --> 00:00:45.380\nI wanna start off basic with vSwitches and\nso we're gonna run through that here.\n\n13\n00:00:45.380 --> 00:00:48.380\nBut know that in real life land the\nmajority of the time we're actually gonna\n\n14\n00:00:48.380 --> 00:00:50.006\ndo what are called distributed vSwitches.\n\n15\n00:00:50.006 --> 00:00:53.110\nBut before we can talk about distributing\nthem we kinda need to know what a vSwitch\n\n16\n00:00:53.110 --> 00:00:54.170\nis in the first place.\n\n17\n00:00:54.170 --> 00:00:56.015\nAnd so\nwe're gonna get a chance to see that.\n\n18\n00:00:56.015 --> 00:00:59.535\nNow, in a lot of third party\nvirtualization products,\n\n19\n00:00:59.535 --> 00:01:05.575\nin products like Citrix XenServer, or\nMicrosoft's Hyper-V and other products.\n\n20\n00:01:05.575 --> 00:01:07.590\nWhen you create a virtual machine,\n\n21\n00:01:07.590 --> 00:01:11.920\nyou attach the network adapter to that\nvirtual machine to a physical adapter.\n\n22\n00:01:11.920 --> 00:01:14.450\nAnd that creates a network and off you go.\n\n23\n00:01:14.450 --> 00:01:17.140\nVMware actually gives us a little\nbit more power than that.\n\n24\n00:01:17.140 --> 00:01:22.400\nInside a vSphere, especially inside the\nESXI host, we can create virtual switches.\n\n25\n00:01:22.400 --> 00:01:26.340\nSo not just attaching\na physical adapter to a VM, but\n\n26\n00:01:26.340 --> 00:01:31.150\nactually creating a virtual switch that\nhas all the capabilities of a physical\n\n27\n00:01:31.150 --> 00:01:33.560\nswitch right here inside of\na virtualization environment.\n\n28\n00:01:33.560 --> 00:01:36.440\nAnd that opens us up to a lot\nof power that gives us some\n\n29\n00:01:36.440 --> 00:01:37.680\nreally cool things that we can do.\n\n30\n00:01:37.680 --> 00:01:41.780\nIn fact, when we get into the distributed\nside you'll see where we can\n\n31\n00:01:41.780 --> 00:01:46.210\neven yank out VMware switch and\nwe can pop in Cisco's 1000 series switch.\n\n32\n00:01:46.210 --> 00:01:50.560\nWhere it's a completely virtualized\nCisco switch that's in the background.\n\n33\n00:01:50.560 --> 00:01:54.130\nAnd now you got tons of power that you\ncan use, it's really impressive stuff.\n\n34\n00:01:55.390 --> 00:01:58.570\nIt doesn't have to be complex, you can\nbe very simple if that's what you want.\n\n35\n00:01:58.570 --> 00:02:02.070\nIt can be very complex but the point is,\nit's all done in software.\n\n36\n00:02:02.070 --> 00:02:04.430\nIt's all software defined networking, SDN.\n\n37\n00:02:04.430 --> 00:02:08.790\nAnd what that basically means for\nus, what we care about is, if I have\n\n38\n00:02:08.790 --> 00:02:13.660\none virtual switch or 100 virtual\nswitches, doesn't cost me any extra money.\n\n39\n00:02:13.660 --> 00:02:17.530\nSo I want an extremely complex network,\nI have that power, I can do it.\n\n40\n00:02:17.530 --> 00:02:18.840\nIf I wanna keep it simple, I can.\n\n41\n00:02:18.840 --> 00:02:19.400\nAll right?\n\n42\n00:02:19.400 --> 00:02:22.120\nSo that's what we gonna run through here\nas a chance to see how to create those\n\n43\n00:02:22.120 --> 00:02:24.810\nnetworks and\nsee how complex we can make it.\n\n44\n00:02:24.810 --> 00:02:28.700\n>> Don, and some of the other vendors and\nI know this is not another vendor show.\n\n45\n00:02:28.700 --> 00:02:32.590\nWe have different types of\nvirtual switches we can create,\n\n46\n00:02:32.590 --> 00:02:35.250\nwhether its virtual box,\nsomething like hyperV, right.\n\n47\n00:02:35.250 --> 00:02:37.820\nAnd it depends on the type of\ncommunication that you need and where that\n\n48\n00:02:37.820 --> 00:02:41.300\ncommunication has to happen that\ndictates which type of switch you make.\n\n49\n00:02:41.300 --> 00:02:43.250\nDo we have different types\nof communication here?\n\n50\n00:02:43.250 --> 00:02:46.170\n>> Not really, cuz the way VMware\napproaches it is different because they\n\n51\n00:02:46.170 --> 00:02:47.540\napproach it like real switches.\n\n52\n00:02:47.540 --> 00:02:52.030\nSo, if I want a virtual machine to\nbe isolated from everybody else,\n\n53\n00:02:52.030 --> 00:02:54.630\nI plug it into it's own switch,\njust like I would in real life.\n\n54\n00:02:54.630 --> 00:02:57.180\nDon't plug it into the switch with\neverybody else if you don't want it to see\n\n55\n00:02:57.180 --> 00:02:58.150\neverybody else, move it off.\n\n56\n00:02:58.150 --> 00:03:01.974\nOr maybe I want it on it's own VLAN, so\nI define a VLAN and move it off to that.\n\n57\n00:03:01.974 --> 00:03:02.810\nYou can do that.\n\n58\n00:03:02.810 --> 00:03:05.650\nYou treat your virtual switches just\nlike you would real switches, right.\n\n59\n00:03:05.650 --> 00:03:09.410\nThe other vendors, they like to\nsay this is an isolated port or\n\n60\n00:03:09.410 --> 00:03:13.370\nthis is a host only port or\nthis is a external port.\n\n61\n00:03:13.370 --> 00:03:14.580\nA port's a port to Cisco.\n\n62\n00:03:14.580 --> 00:03:15.680\nIt's just a switch port.\n\n63\n00:03:15.680 --> 00:03:17.160\nAnd what cables you plug,\n\n64\n00:03:17.160 --> 00:03:20.400\nwhat virtual cables you plug in is what's\ngonna define what you can gain access to.\n\n65\n00:03:20.400 --> 00:03:21.030\nAll right.\n\n66\n00:03:21.030 --> 00:03:22.800\nLet's take a look at\nwhat we have by default.\n\n67\n00:03:22.800 --> 00:03:28.370\nNow, a vSwitch, by default,\nexists on a single ESXI host.\n\n68\n00:03:28.370 --> 00:03:33.690\nSo every ESXI host you create\nhas one vSwitch by default.\n\n69\n00:03:33.690 --> 00:03:34.960\nIt's made during the install.\n\n70\n00:03:34.960 --> 00:03:37.600\nBecause that's how we access\nthe management interface.\n\n71\n00:03:37.600 --> 00:03:43.110\nIf I go into vCenter and I go into my,\nactually let me go back to the home here.\n\n72\n00:03:43.110 --> 00:03:46.640\nI need to go to Hosts and Clusters,\nand I'm gonna pick one of my hosts.\n\n73\n00:03:46.640 --> 00:03:48.350\nI'll take ESX host02.\n\n74\n00:03:48.350 --> 00:03:54.110\nThis is a system that I installed\nESX on it and that's it.\n\n75\n00:03:54.110 --> 00:03:57.770\nI did just the default install, I set\na password, and then I added a vCenter.\n\n76\n00:03:57.770 --> 00:04:00.590\nSo I have not customized\nthe configuration of this server.\n\n77\n00:04:00.590 --> 00:04:03.610\nBeyond just getting it\nattached to vCenter.\n\n78\n00:04:03.610 --> 00:04:08.200\nAnd so if I go under Manage and\nNetworking, I can see that there's been\n\n79\n00:04:08.200 --> 00:04:11.270\na virtual switch created for\nme called vswitch0, all right.\n\n80\n00:04:11.270 --> 00:04:15.240\nSo vswitch0 is the default\nvswitch that it made for me.\n\n81\n00:04:15.240 --> 00:04:18.680\nAnd if I look at the configuration,\nit shows me a nice little picture so\n\n82\n00:04:18.680 --> 00:04:20.980\nwe don't have to read, which is nice.\n\n83\n00:04:20.980 --> 00:04:26.090\nBut what you basically have is one\nswitch that has two ports in it.\n\n84\n00:04:26.090 --> 00:04:27.280\nAnd those two ports are linked.\n\n85\n00:04:27.280 --> 00:04:30.640\nSee that little orange line right there\nletting me know they're linked together.\n\n86\n00:04:30.640 --> 00:04:33.930\nAnd I've got my physical\nadapter plugged in so\n\n87\n00:04:33.930 --> 00:04:36.850\nI've got a physical network\nadapter on my machine.\n\n88\n00:04:36.850 --> 00:04:41.000\nAnd I've got the Virtual Network Adapter\nfor this interface and\n\n89\n00:04:41.000 --> 00:04:43.350\nthis interface is my Management Network.\n\n90\n00:04:43.350 --> 00:04:47.750\nThis is what's letting me get to\nthe Virtual Management Interface for ESX.\n\n91\n00:04:47.750 --> 00:04:50.270\nSo it has to set that up,\notherwise I can't connect to the server.\n\n92\n00:04:51.270 --> 00:04:53.410\nI don't have any\nVirtual Machines on this host.\n\n93\n00:04:53.410 --> 00:04:55.940\nBut if I did, the default for\n\n94\n00:04:55.940 --> 00:04:59.590\na virtual machine would be to end\nup right here on this VM network.\n\n95\n00:04:59.590 --> 00:05:01.500\nOkay.\nSo the VM network is created, but\n\n96\n00:05:01.500 --> 00:05:05.380\nif you look at the cabling\nit's the same switch and\n\n97\n00:05:05.380 --> 00:05:08.500\nit runs to the same port over here.\n\n98\n00:05:08.500 --> 00:05:10.550\nThese are effectively the same.\n\n99\n00:05:10.550 --> 00:05:14.040\nIt's one switch if I plug my\nmanagement network, my VM, and\n\n100\n00:05:14.040 --> 00:05:17.680\nmy physical adapter all into the same\nswitch they can all see each other.\n\n101\n00:05:17.680 --> 00:05:18.810\nAnd that may be what you want.\n\n102\n00:05:18.810 --> 00:05:22.480\nThat may be the exact configuration\nyou want or it may not.\n\n103\n00:05:22.480 --> 00:05:25.930\nOne of the big problems you're gonna bump\ninto here is that your virtual machine is\n\n104\n00:05:25.930 --> 00:05:27.940\non the same network as\nyour management network.\n\n105\n00:05:27.940 --> 00:05:31.520\nSo that means that if I fire\nup a VM it can just browse and\n\n106\n00:05:31.520 --> 00:05:32.315\naccess the manager network.\n\n107\n00:05:32.315 --> 00:05:33.250\nI may not want that.\n\n108\n00:05:33.250 --> 00:05:37.730\nI may not want them to be able to\nget to the vCenter web console or\n\n109\n00:05:37.730 --> 00:05:38.750\nwhatever, right?\n\n110\n00:05:38.750 --> 00:05:41.560\nSo in that scenario I might\nwanna split these up.\n\n111\n00:05:41.560 --> 00:05:42.520\nThere's a few ways you can do that.\n\n112\n00:05:42.520 --> 00:05:47.430\nIf you have more than one physical adapter\nyou can define that in the network.\n\n113\n00:05:47.430 --> 00:05:49.460\nYou can create additional switches.\n\n114\n00:05:49.460 --> 00:05:52.940\nYou can create additional connections for\nthem and to find that out.\n\n115\n00:05:52.940 --> 00:05:55.080\nLet me jump over to my other server.\n\n116\n00:05:55.080 --> 00:05:57.300\nMy other server does have\na virtual machine, so\n\n117\n00:05:57.300 --> 00:05:59.380\nI have a virtual machine\ncalled web01 on it.\n\n118\n00:05:59.380 --> 00:06:02.870\nIt's just a Linux web\nserver that's fired up.\n\n119\n00:06:02.870 --> 00:06:07.090\nAnd so if I take a look at its networking,\nit looks the same it's that same default\n\n120\n00:06:07.090 --> 00:06:10.240\nswitch except it actually has\none virtual machine right here.\n\n121\n00:06:10.240 --> 00:06:11.510\nSo see how I have a green port?\n\n122\n00:06:11.510 --> 00:06:14.030\nOn the other one this was\nempty cuz I had no VMs.\n\n123\n00:06:14.030 --> 00:06:17.890\nWhy, I could make this one empty too if I\nshut that web server down, for example.\n\n124\n00:06:17.890 --> 00:06:21.290\nSo I'm just gonna take it and\nwe'll power it off.\n\n125\n00:06:21.290 --> 00:06:22.580\nSo I'm gonna power that thing off.\n\n126\n00:06:23.930 --> 00:06:28.250\nWhen you turn that virtual machine off,\nit's powered down.\n\n127\n00:06:28.250 --> 00:06:29.500\nSo think about a physical switch.\n\n128\n00:06:29.500 --> 00:06:32.790\nWhat would happen on a physical\nswitch if you powered a host down?\n\n129\n00:06:32.790 --> 00:06:33.930\nThe link light goes off.\n\n130\n00:06:33.930 --> 00:06:35.300\nRight?\nThe link light doesn't stay on when\n\n131\n00:06:35.300 --> 00:06:35.800\nthe machine's off.\n\n132\n00:06:35.800 --> 00:06:38.330\nWell, I guess it could have\na Wake-on-Lan adapter,\n\n133\n00:06:38.330 --> 00:06:39.840\nin which case the link\nlight might stay on.\n\n134\n00:06:39.840 --> 00:06:43.880\nBut in this case if I go back to\nmy networking what I'm gonna see\n\n135\n00:06:43.880 --> 00:06:45.780\nis that green light is gone, right.\n\n136\n00:06:45.780 --> 00:06:46.710\nIt's no longer plugged in.\n\n137\n00:06:46.710 --> 00:06:51.120\nI do have a virtual machine it's just\nnot on and there is its port and\n\n138\n00:06:51.120 --> 00:06:52.310\nit's grey cuz the machine is off.\n\n139\n00:06:52.310 --> 00:06:54.490\nWe don't have Wake-on-Lan support for it.\n\n140\n00:06:54.490 --> 00:06:56.760\nSo if I power back on it'll be there.\n\n141\n00:06:56.760 --> 00:07:00.660\nBut I can also change what it's plugged\ninto so if I, let me power back on.\n\n142\n00:07:00.660 --> 00:07:01.728\nSo I'm gonna power it on.\n\n143\n00:07:01.728 --> 00:07:05.305\nAnd if I look right here at its\nsettings I've got Network adapter and\n\n144\n00:07:05.305 --> 00:07:07.649\nit shows that it is\nplugged in to VM Network.\n\n145\n00:07:07.649 --> 00:07:11.820\nAnd it said Disconnected, but then when\nI powered it on, now it says Connected.\n\n146\n00:07:11.820 --> 00:07:14.840\nSo it shows that it is\nplugged in to that network.\n\n147\n00:07:14.840 --> 00:07:17.910\nAnd you can tweak and change that if you\nwant you can connect it to different\n\n148\n00:07:17.910 --> 00:07:20.890\nnetworks, but I've only got one network.\n\n149\n00:07:20.890 --> 00:07:23.110\nSo what if I wanna isolate it?\n\n150\n00:07:23.110 --> 00:07:25.660\nIf I wanna isolate it I\ncan create more networks.\n\n151\n00:07:25.660 --> 00:07:28.260\nNow back in my host.\n\n152\n00:07:28.260 --> 00:07:31.110\nIf I go under my network,\n\n153\n00:07:31.110 --> 00:07:34.060\nyou'll see I've got several different\nthings along the left side here.\n\n154\n00:07:34.060 --> 00:07:35.400\nAlright virtual switches.\n\n155\n00:07:35.400 --> 00:07:37.010\nThat's what we been talking about so far.\n\n156\n00:07:37.010 --> 00:07:40.520\nThese are just like physical switches\nexcept they are here and they're fake.\n\n157\n00:07:40.520 --> 00:07:42.920\nRight after it I have VMkernel adaptors.\n\n158\n00:07:42.920 --> 00:07:43.470\nWhat are those?\n\n159\n00:07:44.540 --> 00:07:48.140\nWell VMkernel adapters, those\nare the network adapters that are used for\n\n160\n00:07:48.140 --> 00:07:50.620\nthe management processes inside of VMware.\n\n161\n00:07:50.620 --> 00:07:53.310\nThese are things like\nthe management interface, right?\n\n162\n00:07:53.310 --> 00:07:55.597\nThis is a VMkernel adapter right here,\nand it says it.\n\n163\n00:07:55.597 --> 00:07:59.741\nVMkernel ports one, versus down here\nwhere these are virtual machines.\n\n164\n00:07:59.741 --> 00:08:01.138\nHere it's a VMkernel port.\n\n165\n00:08:01.138 --> 00:08:05.418\nSo this is talking about\nthe actual VM visor kernel and\n\n166\n00:08:05.418 --> 00:08:08.300\nthe way we interact with it.\n\n167\n00:08:08.300 --> 00:08:10.658\nThings like VMotion and\nheart beat and so on,\n\n168\n00:08:10.658 --> 00:08:13.940\nthose can all use these\nVMkernel adapters too.\n\n169\n00:08:13.940 --> 00:08:16.930\nThen we got physical adapters\nwell like name and place.\n\n170\n00:08:16.930 --> 00:08:19.610\nThese are the actual network\nadapters in our server.\n\n171\n00:08:19.610 --> 00:08:21.520\nYou may have one or\nmore of these adapters.\n\n172\n00:08:21.520 --> 00:08:24.600\nWhen I take a look at mine, you see\nI actually have two adapters, right?\n\n173\n00:08:24.600 --> 00:08:26.030\nI have two gig adapters.\n\n174\n00:08:26.030 --> 00:08:32.010\nThey're showing up as Intel 82545EM\nblah blah blah, copper adapters, right?\n\n175\n00:08:32.010 --> 00:08:34.860\nOne is attached to vSwitch0,\nthe other one's not attached to anything,\n\n176\n00:08:34.860 --> 00:08:37.110\nit's just sitting there,\nI'm not using it, right?\n\n177\n00:08:37.110 --> 00:08:40.400\nI can create another switch and\nattach it to this adapter, or\n\n178\n00:08:40.400 --> 00:08:42.180\nI could attach this adapter\nto my first switch.\n\n179\n00:08:42.180 --> 00:08:44.970\nYou can have more than one adapter\non a switch, actually kind of neat.\n\n180\n00:08:44.970 --> 00:08:47.060\nI'll show you why here in just a minute.\n\n181\n00:08:47.060 --> 00:08:49.450\nThen we've got our TCP/IP configuration.\n\n182\n00:08:49.450 --> 00:08:52.300\nWell, the virtual switches\ndon't have IP addresses.\n\n183\n00:08:52.300 --> 00:08:56.230\nSo when you look in here, what it's really\ntalking about is just the default gateway\n\n184\n00:08:56.230 --> 00:08:59.590\nthat's being handed out in the event\nthat we set up DHCP on these switches.\n\n185\n00:08:59.590 --> 00:09:03.720\nYou can actually be your own DHCP server\non the switch to issue out addresses.\n\n186\n00:09:03.720 --> 00:09:06.060\nI'm not doing that here, but\nyou can certainly do that.\n\n187\n00:09:06.060 --> 00:09:09.240\nAnd then last, we have our advanced\nsettings where you where you tweak\n\n188\n00:09:09.240 --> 00:09:14.180\nthings like IPv6 support and DirectPath\nI/O if your hardware supports it.\n\n189\n00:09:14.180 --> 00:09:17.530\nWith DirectPath, you might have more\nthan one way to get to a destination.\n\n190\n00:09:17.530 --> 00:09:21.130\nAnd when the virtual machine reaches\nout to the hardware network adapter,\n\n191\n00:09:21.130 --> 00:09:24.845\nit can actually provide direct hardware\naccess to that network adapter.\n\n192\n00:09:24.845 --> 00:09:28.200\nDirectPath input and\noutput if your hardware supports it.\n\n193\n00:09:28.200 --> 00:09:28.740\nMine does not.\n\n194\n00:09:29.990 --> 00:09:34.250\nAll right, so\nif I go back to my virtual switches,\n\n195\n00:09:34.250 --> 00:09:38.460\nthis virtual switch just has one\nphysical network adapter and that's it.\n\n196\n00:09:38.460 --> 00:09:41.620\nOkay, I can add more than one\nphysical network adapter.\n\n197\n00:09:41.620 --> 00:09:43.910\nAnd there's a few reasons\nwhy I might wanna do it.\n\n198\n00:09:43.910 --> 00:09:48.720\nThe two primary reasons\nare performance and redundancy.\n\n199\n00:09:48.720 --> 00:09:49.810\nOkay, performance.\n\n200\n00:09:49.810 --> 00:09:53.255\nIf I had more than one network adapter,\nI can bond them together and\n\n201\n00:09:53.255 --> 00:09:56.640\nI get improved performance,\nI'd get faster speeds.\n\n202\n00:09:56.640 --> 00:10:01.220\nIf I have just one adapter, I'm limited\nto the speed of that one adapter.\n\n203\n00:10:01.220 --> 00:10:03.170\nIf I have two, I can increase.\n\n204\n00:10:03.170 --> 00:10:06.200\nIf I have just one adapter,\nwhat happens if that adapter fails?\n\n205\n00:10:06.200 --> 00:10:08.330\nAll those VM's just got\ncut off from the network.\n\n206\n00:10:08.330 --> 00:10:11.950\nIf I have two adapters, now one can fail\nand the other's still running, right?\n\n207\n00:10:11.950 --> 00:10:15.900\nSo I can define additional network\nadapters on these things and\n\n208\n00:10:15.900 --> 00:10:17.320\nhave some kind of fun with it, right?\n\n209\n00:10:17.320 --> 00:10:19.650\nSo if I wanna tweak that, I certainly can.\n\n210\n00:10:19.650 --> 00:10:22.480\nAll we have to do is edit our vSwitch.\n\n211\n00:10:22.480 --> 00:10:24.250\nSo I can take this vSwitch and\n\n212\n00:10:24.250 --> 00:10:27.940\nyou'll see you got a few different buttons\nup here like this one which says manage\n\n213\n00:10:27.940 --> 00:10:31.880\nthe physical network adapters connected to\nthe switch versus just straight up edit.\n\n214\n00:10:31.880 --> 00:10:36.151\nIf I go to straight up edit that switch,\nyou'll see I don't have a whole lot of\n\n215\n00:10:36.151 --> 00:10:39.196\noptions in here pertaining\nto the physical adapters.\n\n216\n00:10:39.196 --> 00:10:43.383\nI can see that it's got an MTU size,\nright, maximum transmission unit.\n\n217\n00:10:43.383 --> 00:10:48.990\nI've got my security settings we saw\nback in the, what episode was that?\n\n218\n00:10:48.990 --> 00:10:50.690\nSome episode, we covered that already.\n\n219\n00:10:50.690 --> 00:10:54.700\nWhere we can tweak the, it was hardening\nthe ESXi host where we covered that.\n\n220\n00:10:54.700 --> 00:10:58.480\nI see traffic shaping where I can restrict\nthe bandwidth, and I see teaming and\n\n221\n00:10:58.480 --> 00:10:59.364\nfailover.\n\n222\n00:10:59.364 --> 00:11:00.746\nNow we're talking.\n\n223\n00:11:00.746 --> 00:11:02.490\nNow we're talking about physical adapters,\nright?\n\n224\n00:11:02.490 --> 00:11:04.810\nHere's where I can set up teaming.\n\n225\n00:11:04.810 --> 00:11:08.540\nWhere I bond two adapters together to\nget increased bandwidth or failover.\n\n226\n00:11:08.540 --> 00:11:10.386\nIf one fails, the other takes over.\n\n227\n00:11:10.386 --> 00:11:12.370\nWell, I see vmnic0.\n\n228\n00:11:12.370 --> 00:11:14.720\nThat's my first adapter.\n\n229\n00:11:14.720 --> 00:11:16.590\nWhere's my other adapter?\n\n230\n00:11:16.590 --> 00:11:19.200\nWell, the other adapter is not\nattached to this switch yet, and so\n\n231\n00:11:19.200 --> 00:11:20.460\nit doesn't show up.\n\n232\n00:11:20.460 --> 00:11:22.400\nSo this is where I wanna\ngo to configure it, but\n\n233\n00:11:22.400 --> 00:11:24.170\nI need to get that other adapter in there.\n\n234\n00:11:24.170 --> 00:11:26.370\nAnd that's why I pointed\nout the other button.\n\n235\n00:11:26.370 --> 00:11:29.990\nThe button up here that says manage\nthe physical network adapters.\n\n236\n00:11:29.990 --> 00:11:32.350\nBecause what you have to\ndo is you have to go in and\n\n237\n00:11:32.350 --> 00:11:35.800\ndefine which adapters\nare attached to that switch.\n\n238\n00:11:35.800 --> 00:11:38.420\nAnd right now, I've only got one.\n\n239\n00:11:38.420 --> 00:11:41.540\nNow I've gotta choose how\nI want to set this up.\n\n240\n00:11:41.540 --> 00:11:45.590\nIf I'm trying to get performance,\nI need two adapters that are both active\n\n241\n00:11:45.590 --> 00:11:48.230\nat the same time so\nI can move data over both.\n\n242\n00:11:48.230 --> 00:11:52.180\nIf I'm just trying to get redundancy,\nI need one adapter active and\n\n243\n00:11:52.180 --> 00:11:53.990\nthe other one in standby.\n\n244\n00:11:53.990 --> 00:11:56.410\nSo if the first one fails,\nthe other one kick in.\n\n245\n00:11:56.410 --> 00:11:59.500\nBut as long as the first one is running,\nthe second one just sits there and waits.\n\n246\n00:11:59.500 --> 00:12:00.970\nNow, I'll be honest with you guys,\n\n247\n00:12:00.970 --> 00:12:04.770\nmost people don't set that up because if\nyou could have both adapters running,\n\n248\n00:12:04.770 --> 00:12:07.030\nyou could double your bandwidth,\nyou might as well do it.\n\n249\n00:12:07.030 --> 00:12:10.440\nAnd if one fails, your bandwidth goes\ndown, but you stay up and online.\n\n250\n00:12:10.440 --> 00:12:14.982\nSo it's rare that we do a standby type\nadapter solution but you certainly could.\n\n251\n00:12:14.982 --> 00:12:20.896\nWhen I go to add in an adapter, I can add\nit in and there it shows that vmnic1.\n\n252\n00:12:20.896 --> 00:12:23.270\nThat's my second adapter that I can pick.\n\n253\n00:12:23.270 --> 00:12:24.660\nAnd I can pick where it's gonna go.\n\n254\n00:12:24.660 --> 00:12:27.910\nDo I want it to be active,\nstandby or unused, right?\n\n255\n00:12:27.910 --> 00:12:30.442\nAnd so I can come in and put it,\nmaybe I want it to be standby,\n\n256\n00:12:30.442 --> 00:12:31.920\nmaybe I want it to be active.\n\n257\n00:12:31.920 --> 00:12:33.210\nAnd I can attach it.\n\n258\n00:12:33.210 --> 00:12:34.710\nAnd when I attach it,\n\n259\n00:12:34.710 --> 00:12:37.500\nit's just gonna show me the additional\nproperties of that adapter so\n\n260\n00:12:37.500 --> 00:12:41.560\nI can see what it supports or what it\ndoes, but I can't really change anything.\n\n261\n00:12:41.560 --> 00:12:42.790\nI'm just attaching it.\n\n262\n00:12:42.790 --> 00:12:47.230\nSo I'm gonna go ahead and attach that\none and now I've got the two nics.\n\n263\n00:12:47.230 --> 00:12:48.750\nAnd you can change the order.\n\n264\n00:12:48.750 --> 00:12:51.670\nYou might have one that's\nmore important than another.\n\n265\n00:12:51.670 --> 00:12:54.671\nThis is really important with standby\nadapters cuz it'll fail over to the first\n\n266\n00:12:54.671 --> 00:12:55.550\none in the list.\n\n267\n00:12:55.550 --> 00:12:56.670\nAnd so you can use these up and\n\n268\n00:12:56.670 --> 00:13:00.420\ndown arrows to change which\none is the primary adapter.\n\n269\n00:13:00.420 --> 00:13:03.768\nIf they're both active like this, it's not\nreally gonna matter which one is primary,\n\n270\n00:13:03.768 --> 00:13:06.435\none can fail to the other,\nit'll be fine, all right?\n\n271\n00:13:06.435 --> 00:13:10.380\nMaybe we'll go both active, why not?\n\n272\n00:13:10.380 --> 00:13:13.370\nOkay, actually hang on, I gotta think.\n\n273\n00:13:14.840 --> 00:13:17.610\nMy physical interfaces are plugged into\ntwo different networks so if I try and\n\n274\n00:13:17.610 --> 00:13:18.610\nbring them both active,\n\n275\n00:13:18.610 --> 00:13:22.440\nI'm probably gonna lock myself\nout of this vCenter environment.\n\n276\n00:13:22.440 --> 00:13:24.453\nBecause if it tries to send\nme to the second adapter and\n\n277\n00:13:24.453 --> 00:13:26.930\nit's on a separate physical network,\nI'm gonna be in trouble.\n\n278\n00:13:26.930 --> 00:13:31.310\nSo, instead of adding it in as inactive,\nlet me add that in as a standby instead.\n\n279\n00:13:31.310 --> 00:13:33.690\nSo I'm gonna use the arrows\nto move it down to standby.\n\n280\n00:13:33.690 --> 00:13:38.000\nSo vmnic0 is gonna be active, this one\nwill be standby, so I shouldn't hit it.\n\n281\n00:13:38.000 --> 00:13:42.670\n>> Don do you have a scenario where we\nmight wanna use an unused adapter or\n\n282\n00:13:42.670 --> 00:13:43.420\nselect that?\n\n283\n00:13:43.420 --> 00:13:47.852\nI know server hardware's so cheap we just\nhave extra network adapters laying around.\n\n284\n00:13:47.852 --> 00:13:50.340\n>> What it's really for\nis to reserve the adapter.\n\n285\n00:13:50.340 --> 00:13:52.220\nSo that if another network\nadmin comes in and\n\n286\n00:13:52.220 --> 00:13:55.060\nthey're configuring some other vSwitch,\nso they don't steal the adapter from you.\n\n287\n00:13:55.060 --> 00:13:57.430\nSo you kinda stick it in unused and\nit just holds it.\n\n288\n00:13:57.430 --> 00:14:00.150\nIt might be that you're holding it for\nfuture use,\n\n289\n00:14:00.150 --> 00:14:02.460\nit might be that you\nsuspect it of being bad.\n\n290\n00:14:02.460 --> 00:14:06.310\nAnd so you move it down to unused, until\nyou can run diagnostics on it, replace it.\n\n291\n00:14:06.310 --> 00:14:09.270\nThose are some of the different\nreasons why you might use that, yep.\n\n292\n00:14:09.270 --> 00:14:10.970\nAll right, so\nI'm gonna leave it there as standby.\n\n293\n00:14:10.970 --> 00:14:14.268\nYou do have to be careful or you could\nlock yourself out of the system if you're\n\n294\n00:14:14.268 --> 00:14:17.035\nmessing with the adapter that\nyour management interface is on.\n\n295\n00:14:17.035 --> 00:14:18.666\nAnd I am messing with that adapter.\n\n296\n00:14:18.666 --> 00:14:22.875\n[LAUGH] So I'm trying to be careful not\nto lock myself out cuz that would be\n\n297\n00:14:22.875 --> 00:14:23.870\nembarrassing.\n\n298\n00:14:23.870 --> 00:14:28.650\nAll right, so now I've attached that\nsecond adapter to my virtual switch.\n\n299\n00:14:28.650 --> 00:14:29.648\nI don't see anything different though.\n\n300\n00:14:29.648 --> 00:14:32.670\nWhen I looked down here,\nI still just see vmnic0.\n\n301\n00:14:32.670 --> 00:14:35.708\nAnd there's a few reasons why that can\nhappen, the main reason being that\n\n302\n00:14:35.708 --> 00:14:39.800\ntypically the screen doesn't refresh, so\nI'm gonna refresh it, and there we go.\n\n303\n00:14:39.800 --> 00:14:41.660\nNow I see I've got two adapters.\n\n304\n00:14:41.660 --> 00:14:43.625\nAnd see how one is orange and\nthe other one is clear?\n\n305\n00:14:43.625 --> 00:14:46.241\nThat's cuz one is active,\nand the other is stand by.\n\n306\n00:14:46.241 --> 00:14:49.455\nIf I had done both as active,\nthey'd both be lit up right now, and\n\n307\n00:14:49.455 --> 00:14:51.065\nI'd have those two adapters.\n\n308\n00:14:51.065 --> 00:14:54.355\nAll right, my virtual machines\nare now gonna pass over this first one\n\n309\n00:14:54.355 --> 00:14:55.685\nunless it fails.\n\n310\n00:14:55.685 --> 00:14:57.075\nThen they'll drop down to the second one.\n\n311\n00:14:57.075 --> 00:14:59.820\nSo, I've got more than\none physical adapter.\n\n312\n00:14:59.820 --> 00:15:03.940\nAnd now, when I edit the switch,\nI can edit the switch,\n\n313\n00:15:03.940 --> 00:15:06.360\nI can go down to teaming and failover, and\n\n314\n00:15:06.360 --> 00:15:09.320\nnow I see the configuration\nsettings here that I can adjust.\n\n315\n00:15:09.320 --> 00:15:13.357\nI see that vmnic1 is a standby, I could\nbump it up to active if I wanted, or\n\n316\n00:15:13.357 --> 00:15:15.260\nI could even flop this one around.\n\n317\n00:15:15.260 --> 00:15:17.530\nI could move them to where\nI needed them to be, and\n\n318\n00:15:17.530 --> 00:15:20.910\nget them set up the way that\nI want them to be set up.\n\n319\n00:15:20.910 --> 00:15:25.470\nIf I'm choosing to do load balancing, well\nhere I can tweak how load balancing works.\n\n320\n00:15:25.470 --> 00:15:28.350\nAnd I can tweak how network failures\nare detected if I'm doing standby\n\n321\n00:15:28.350 --> 00:15:29.580\nlike I am right now.\n\n322\n00:15:29.580 --> 00:15:32.370\nOn the load balancing side, by default,\n\n323\n00:15:32.370 --> 00:15:36.480\nit balances based on\nthe originating virtual port.\n\n324\n00:15:36.480 --> 00:15:40.874\nSo basically if I have ten VMs,\nin theory, five end up on one adapter and\n\n325\n00:15:40.874 --> 00:15:42.939\nfive end up on the other, right?\n\n326\n00:15:42.939 --> 00:15:47.152\nBut you can change it to be based\non source MAC address or IP.\n\n327\n00:15:47.152 --> 00:15:50.571\nWe can use explicit failover order where\nit goes round robin based on the order\n\n328\n00:15:50.571 --> 00:15:51.500\nthey're in.\n\n329\n00:15:51.500 --> 00:15:54.853\nThere's several different ways you can\nconfigure that based on your needs, but\n\n330\n00:15:54.853 --> 00:15:57.528\nfor most people, the originating\nvirtual port is good enough.\n\n331\n00:15:57.528 --> 00:16:00.512\nBut if you've got one file server that\nyou know has a ton of traffic and\n\n332\n00:16:00.512 --> 00:16:01.593\nother ones that don't,\n\n333\n00:16:01.593 --> 00:16:04.989\nyou might not get true balancing You might\nwanna go to a dedicated interface for\n\n334\n00:16:04.989 --> 00:16:08.260\nthat file server, versus all of the other\nservers to get lumped together.\n\n335\n00:16:08.260 --> 00:16:10.670\nIt's up to you how you\nwanna configure that.\n\n336\n00:16:10.670 --> 00:16:13.943\nWith failure detection like I've got,\nit's set right now for link status only.\n\n337\n00:16:13.943 --> 00:16:19.543\nIf the network link on vmnic0 goes down,\nthen it will flip over to vmnic1.\n\n338\n00:16:19.543 --> 00:16:23.225\nBut as long as this link is up,\nvmnic0 will always stay up.\n\n339\n00:16:23.225 --> 00:16:26.825\nThe problem there is that means I've\ngot Layer 1 and Layer 2 protection, but\n\n340\n00:16:26.825 --> 00:16:28.215\nnot necessarily Layer 3.\n\n341\n00:16:28.215 --> 00:16:31.905\nThe route across that interface could go\ndown, and the IP address could be bad, or\n\n342\n00:16:31.905 --> 00:16:33.550\nsomething like that and\nit's not gonna stop.\n\n343\n00:16:33.550 --> 00:16:36.740\nSo you have other options\nlike Beacon probing.\n\n344\n00:16:36.740 --> 00:16:40.240\nAnd with Beacon probing, it will actually\nsend out communication across that line to\n\n345\n00:16:40.240 --> 00:16:44.330\nmake sure that it's truly working and\nnot just rely on a link light.\n\n346\n00:16:44.330 --> 00:16:47.480\nBecause it's kind of funny when you\nhave an eight wire connection for\n\n347\n00:16:47.480 --> 00:16:48.640\ncopper running in.\n\n348\n00:16:48.640 --> 00:16:51.170\nThere's actually only two wires in\nthat bundle that are needed for\n\n349\n00:16:51.170 --> 00:16:52.490\nthe link light to come up.\n\n350\n00:16:52.490 --> 00:16:54.921\nSo all the other wires could be bad and\nyou'd still in a link light.\n\n351\n00:16:54.921 --> 00:16:56.202\nYou can't always trust that.\n\n352\n00:16:56.202 --> 00:16:58.608\nAnd so that's where we have\nthe Beacon probing which helps,\n\n353\n00:16:58.608 --> 00:17:01.503\nwho actually send the communication\nto verifies a little mo in-depth.\n\n354\n00:17:01.503 --> 00:17:03.927\nAll right, but\nI'll stick with link status only for now.\n\n355\n00:17:03.927 --> 00:17:06.840\nAll right,\nyou've also got notify switches.\n\n356\n00:17:06.840 --> 00:17:08.578\nNow this is kind of an important one.\n\n357\n00:17:08.578 --> 00:17:12.510\nWhen you failover, all the Mac addresses\nfor your virtual machine now jump over to\n\n358\n00:17:12.510 --> 00:17:15.070\nanother port and\nyour switch has to relearn that.\n\n359\n00:17:15.070 --> 00:17:16.310\nUntil your switch relearns,\n\n360\n00:17:16.310 --> 00:17:19.330\nit's gonna be trying to send traffic\nover the other link which isn't there.\n\n361\n00:17:19.330 --> 00:17:23.880\nSo if we say notify, as soon as we\nfailover, we immediately send messages so\n\n362\n00:17:23.880 --> 00:17:26.030\nthe switch learns those\nMac addresses right away.\n\n363\n00:17:26.030 --> 00:17:28.170\nIt speeds up discovery and\nso that's useful.\n\n364\n00:17:28.170 --> 00:17:31.230\nThat's turned on by default,\nand then failback.\n\n365\n00:17:31.230 --> 00:17:34.840\nIf the primary NIC dies, and\nit jumps over to the backup, but\n\n366\n00:17:34.840 --> 00:17:39.160\nthen the primary NIC resumes,\ndo we go back to the primary NIC?\n\n367\n00:17:39.160 --> 00:17:41.810\nWe may or may not want that cuz\nyou could end up with flapping.\n\n368\n00:17:41.810 --> 00:17:45.530\nMaybe the NIC is coming up and\ngoing down, coming up, and going down,\n\n369\n00:17:45.530 --> 00:17:47.750\nand you don't wanna constantly\nbe going back and forth.\n\n370\n00:17:47.750 --> 00:17:49.560\nSo you might want it to failover and\n\n371\n00:17:49.560 --> 00:17:54.810\nthen require you to manually fail it back,\nYou've got that option, all right.\n\n372\n00:17:54.810 --> 00:17:56.340\nSo I'm gonna leave it set this way.\n\n373\n00:17:56.340 --> 00:17:58.090\nNow I've got a nice little\nredundant environment.\n\n374\n00:17:58.090 --> 00:18:00.600\nBut I still have the problem of what I\nmentioned at the beginning of the show,\n\n375\n00:18:00.600 --> 00:18:04.520\nwhich is technically both of these\nguys are able to see each other.\n\n376\n00:18:04.520 --> 00:18:07.210\nThe virtual machine can see\nthe management network and so on.\n\n377\n00:18:07.210 --> 00:18:10.292\nSo, I might wanna move this virtual\nmachine off to a separate switch\n\n378\n00:18:10.292 --> 00:18:11.290\naltogether, right?\n\n379\n00:18:11.290 --> 00:18:14.400\nSo I'm gonna take vmnic1\nout of this switch.\n\n380\n00:18:14.400 --> 00:18:16.910\nSo I'm gonna go back to\nmanaging my physical adapters.\n\n381\n00:18:16.910 --> 00:18:19.240\nI'm gonna take vmnic1 and\nI'm just gonna remove it.\n\n382\n00:18:20.260 --> 00:18:23.730\nSo I'm gonna go back to the way we\nwere where we had one vSwitch with\n\n383\n00:18:23.730 --> 00:18:24.520\none adapter in it.\n\n384\n00:18:24.520 --> 00:18:25.103\nRefresh that time.\n\n385\n00:18:25.103 --> 00:18:28.779\nSometimes it refreshes,\nit's kind of finicky.\n\n386\n00:18:28.779 --> 00:18:32.970\nAll right, so what I'm gonna do, I'm gonna\ncreate a completely separate switch.\n\n387\n00:18:32.970 --> 00:18:34.730\nNow normally that means I'd\nhave to go buy a switch.\n\n388\n00:18:34.730 --> 00:18:36.400\nBut here I don't, right, I can just go in.\n\n389\n00:18:36.400 --> 00:18:38.130\nAnd I can create a new switch.\n\n390\n00:18:38.130 --> 00:18:41.730\nAnd so right up top,\nI can use add host networking.\n\n391\n00:18:41.730 --> 00:18:43.310\nYou'll see you've got\na few different options,\n\n392\n00:18:43.310 --> 00:18:45.618\nlike refreshing the networking and so on.\n\n393\n00:18:45.618 --> 00:18:49.560\nI wanna add a host network, and\nwhen I go to add a host network,\n\n394\n00:18:49.560 --> 00:18:51.020\nit's gonna ask me what I'm doing.\n\n395\n00:18:51.020 --> 00:18:52.860\nAnd there's three different choices here.\n\n396\n00:18:52.860 --> 00:18:53.780\nAnd I know Wes asked if there\n\n397\n00:18:53.780 --> 00:18:56.040\nwere different types of\ncommunications earlier in this show.\n\n398\n00:18:56.040 --> 00:18:56.960\nThere really aren't.\n\n399\n00:18:56.960 --> 00:19:00.020\nHere I'm telling it basically what\nI intend to use the switch for and\n\n400\n00:19:00.020 --> 00:19:02.194\nit's basically putting some\ndefault settings in place.\n\n401\n00:19:02.194 --> 00:19:04.930\nBut the configuration\nis actually the same.\n\n402\n00:19:04.930 --> 00:19:07.780\nThe technology is the same, but\nthe way it's configured is different.\n\n403\n00:19:07.780 --> 00:19:10.540\nSo the first one is\nVMkernel network adapter.\n\n404\n00:19:10.540 --> 00:19:13.230\nAm I trying to add another\nmanagement interface?\n\n405\n00:19:13.230 --> 00:19:15.024\nWell, why would I need more\nthan one management interface?\n\n406\n00:19:15.024 --> 00:19:18.197\nWell some of these\ntechnologies like vMotion,\n\n407\n00:19:18.197 --> 00:19:20.587\nvMotion can use a lot of bandwidth.\n\n408\n00:19:20.587 --> 00:19:25.665\nvMotion, let's just take a virtual machine\nthat's running on one physical host and\n\n409\n00:19:25.665 --> 00:19:29.062\nmove it to another physical host and\ndo it while it's on.\n\n410\n00:19:29.062 --> 00:19:33.390\nAnd the way it does that is you've already\ngot the hard drive synchronized between\n\n411\n00:19:33.390 --> 00:19:36.084\nthe two systems,\nis to take what's in RAM on one and\n\n412\n00:19:36.084 --> 00:19:38.900\nsynchronize it with\nthe RAM on the other one.\n\n413\n00:19:38.900 --> 00:19:41.570\nAnd when the RAM is\ncompletely synchronized,\n\n414\n00:19:41.570 --> 00:19:43.330\nthen it can flip over to the other one.\n\n415\n00:19:43.330 --> 00:19:45.650\nWell, if you've got 8 gigs of\nRAM on a virtual machine and\n\n416\n00:19:45.650 --> 00:19:50.730\nit's very busy, RAM is constantly getting\nupdated so it has to slow the RAM down\n\n417\n00:19:50.730 --> 00:19:54.560\nwhile it synchronizes it,\nget them in lock step and then flip over.\n\n418\n00:19:54.560 --> 00:19:57.660\nThe more bandwidth you have,\nthe faster that'll happen.\n\n419\n00:19:57.660 --> 00:20:01.718\nSo I might wanna have a dedicated vMotion\nadapter and so I can specify in here.\n\n420\n00:20:01.718 --> 00:20:05.374\nI'll do a VMkernel and then it'll\nask me what I want to enable, right?\n\n421\n00:20:05.374 --> 00:20:07.180\nSo if I were to move forward on this,\n\n422\n00:20:07.180 --> 00:20:10.976\nit's gonna ask me to pick an existing\nswitch if I want or do a new switch, and\n\n423\n00:20:10.976 --> 00:20:14.895\nthen it'll ask me to pick which services\nI want and I can choose just vMotion or\n\n424\n00:20:14.895 --> 00:20:19.100\njust fiber channel over Ethernet, or\nwhatever it is that I'm trying to achieve.\n\n425\n00:20:20.140 --> 00:20:24.300\nBut the bottom two are the ones that we\nnormally want, physical network adapter or\n\n426\n00:20:24.300 --> 00:20:27.060\nvirtual machine port group for\na standard switch.\n\n427\n00:20:27.060 --> 00:20:30.760\nNow, when I choose Physical Network\nAdapter, what that's telling it is I wanna\n\n428\n00:20:30.760 --> 00:20:34.195\nadd another physical adapter to the system\nand I might be adding a physical\n\n429\n00:20:34.195 --> 00:20:38.360\nadapter to the existing switch or creating\na new switch with a physical adapter.\n\n430\n00:20:38.360 --> 00:20:39.890\nThat's what I want.\n\n431\n00:20:39.890 --> 00:20:40.700\nEither way,\n\n432\n00:20:40.700 --> 00:20:44.460\nit's creating a virtual machine port group\njust like it says in the bottom option.\n\n433\n00:20:44.460 --> 00:20:49.280\nThe only difference is if I choose\nthe bottom one, I can create a port group\n\n434\n00:20:49.280 --> 00:20:53.330\non a new switch, if I want,\nwith no physical adapter.\n\n435\n00:20:53.330 --> 00:20:55.540\nIf there's no physical adapter,\nthis is now isolated.\n\n436\n00:20:55.540 --> 00:20:58.160\nSo it's gonna be like choosing an isolated\nnetwork with those other vendors.\n\n437\n00:20:58.160 --> 00:21:00.580\nHere, I can create it just by not\nplugging in a physical adapter.\n\n438\n00:21:00.580 --> 00:21:04.080\nSo, really,\nall three of these create a port group.\n\n439\n00:21:04.080 --> 00:21:07.024\nIt's just configured slightly different,\nand you can change it after the fact.\n\n440\n00:21:07.024 --> 00:21:10.694\nIf I create a port group with no physical\nadapter attached, it's isolated,\n\n441\n00:21:10.694 --> 00:21:13.516\nI can always come and\nattach a physical adapter to it later,\n\n442\n00:21:13.516 --> 00:21:15.501\nand all of a sudden it's, external now.\n\n443\n00:21:15.501 --> 00:21:16.929\nIt's attached to a LAN.\n\n444\n00:21:16.929 --> 00:21:18.643\nSo this is all easy to customize and\nchange.\n\n445\n00:21:18.643 --> 00:21:22.312\nI'm gonna choose physical network\nadapter and move forward, and\n\n446\n00:21:22.312 --> 00:21:25.210\nit's gonna ask me what\nadapter I wanna pick.\n\n447\n00:21:25.210 --> 00:21:28.730\nNow when I go and\nattach a physical adapter, it's asking,\n\n448\n00:21:28.730 --> 00:21:32.980\ndo I want to attach to an existing\nswitch or do I wanna go to a new switch.\n\n449\n00:21:32.980 --> 00:21:34.070\nI'm gonna do a new switch.\n\n450\n00:21:34.070 --> 00:21:37.620\nI want a completely separate switch\ncuz I'm trying to isolate traffic.\n\n451\n00:21:37.620 --> 00:21:39.750\nI want my management on one interface.\n\n452\n00:21:39.750 --> 00:21:41.480\nI want my VMs on another, right?\n\n453\n00:21:41.480 --> 00:21:45.510\nSo I'll do a new standard switch,\nand I'll hit Next.\n\n454\n00:21:45.510 --> 00:21:48.220\nAnd then it's gonna ask\nme to pick my adapter.\n\n455\n00:21:48.220 --> 00:21:52.005\nSo shoot, I've gotta come in here and\nadd my adapter.\n\n456\n00:21:53.070 --> 00:21:54.530\nThere we go.\n\n457\n00:21:54.530 --> 00:21:56.310\nAnd I'll add that one in as active, so\n\n458\n00:21:56.310 --> 00:21:59.830\nthere's my new vmnic1 being\nattached to this new switch.\n\n459\n00:21:59.830 --> 00:22:02.590\nAll shiny and new, and\nI'll go ahead and finish up.\n\n460\n00:22:02.590 --> 00:22:07.395\nAnd so when I'm done, I'm gonna\nsee that I now have two vSwitches,\n\n461\n00:22:07.395 --> 00:22:09.110\nvSwitch0, vSwitch1.\n\n462\n00:22:09.110 --> 00:22:12.514\nvSwitch0 has my management interface and\nit has this VMNetwork and\n\n463\n00:22:12.514 --> 00:22:15.750\nit's got the physical adapter for vmnic0.\n\n464\n00:22:15.750 --> 00:22:19.910\nIf I choose vSwitch1, here's the switch,\n\n465\n00:22:19.910 --> 00:22:23.800\nit's got a physical adapter and\nit's got no associated port groups.\n\n466\n00:22:23.800 --> 00:22:25.210\nNothing's attached to it.\n\n467\n00:22:25.210 --> 00:22:30.425\nSo I need to create a port group so that\nI can connect my hosts to it, all right?\n\n468\n00:22:30.425 --> 00:22:33.225\nAnd I can do that by editing or\njust clicking this link here, but\n\n469\n00:22:33.225 --> 00:22:35.455\nI usually use a little wizard\ncuz it's a bit easier.\n\n470\n00:22:35.455 --> 00:22:38.535\nIf I go back to Add Host Networking,\nthis time I can choose, hey,\n\n471\n00:22:38.535 --> 00:22:41.390\nI wanna create a virtual\nmachine port group.\n\n472\n00:22:41.390 --> 00:22:45.130\nAnd now when I move forward,\nI can pick an existing switch.\n\n473\n00:22:45.130 --> 00:22:47.080\nAnd I'm gonna pick vSwitch1, right?\n\n474\n00:22:47.080 --> 00:22:48.322\nvSwitch0 already has some stuff.\n\n475\n00:22:48.322 --> 00:22:49.948\nI'm gonna do vSwitch1.\n\n476\n00:22:49.948 --> 00:22:53.430\nAnd as I move forward,\nit's gonna ask me to give it a name.\n\n477\n00:22:53.430 --> 00:22:55.280\nAnd I'm gonna call it my DMZ, right?\n\n478\n00:22:55.280 --> 00:22:58.740\nThese are gonna be servers or work\nstations or whatever that are exposed to\n\n479\n00:22:58.740 --> 00:23:02.200\nthe Internet, and I don't want them\nto communicate with my other VMs and\n\n480\n00:23:02.200 --> 00:23:04.070\nI definitely don't want them to\ncommunicate with management.\n\n481\n00:23:04.070 --> 00:23:05.770\nI want these to be separate.\n\n482\n00:23:05.770 --> 00:23:09.710\nNow I can achieve the same goal through\nVLANs if I had virtual local area\n\n483\n00:23:09.710 --> 00:23:13.350\nnetworks, right, VLANs to find in my\nphysical switches, we could tie into that.\n\n484\n00:23:13.350 --> 00:23:15.420\nBut if I'm trying to do\nit all internal here,\n\n485\n00:23:15.420 --> 00:23:17.300\nI'm gonna do it based\non physical adapters.\n\n486\n00:23:17.300 --> 00:23:20.300\nI'm separating it that way, so I don't\nneed to mess with VLANs on this one.\n\n487\n00:23:20.300 --> 00:23:22.890\nI'll show you a VLAN\nexample here in a minute.\n\n488\n00:23:22.890 --> 00:23:24.389\nAnd I can move forward and finish that up.\n\n489\n00:23:25.430 --> 00:23:28.900\nAnd now what I'm gonna see is\nthat I've got a new port group\n\n490\n00:23:28.900 --> 00:23:32.870\nthat will appear any moment,\nready to receive some virtual machines.\n\n491\n00:23:32.870 --> 00:23:34.630\nSo now that I've got\nthat DMZ switch created,\n\n492\n00:23:34.630 --> 00:23:37.400\nright, vSwitch1,\nI just need to plug some stuff into it.\n\n493\n00:23:37.400 --> 00:23:41.190\nSo I'm gonna go edit that web server and\nwe'll move it right into vSwitch1.\n\n494\n00:23:41.190 --> 00:23:43.109\nSo, we should go back to\nmy home screen here and\n\n495\n00:23:43.109 --> 00:23:45.586\nwe're gonna jump down to\nvirtual machines and templates.\n\n496\n00:23:45.586 --> 00:23:48.372\nAnd I'm gonna find good old web 01.\n\n497\n00:23:48.372 --> 00:23:53.740\nWe're going to manage settings,\nvirtual machine hardware.\n\n498\n00:23:53.740 --> 00:23:57.202\nAnd I'm gonna edit the virtual\nmachine hardware for that machine.\n\n499\n00:23:57.202 --> 00:24:00.740\nAnd once I get in here, I can take\nthat network adapter right here,\n\n500\n00:24:00.740 --> 00:24:04.290\nnetwork adapter 1 and see how it\nshows us connected to VMNetwork.\n\n501\n00:24:04.290 --> 00:24:09.901\nAnd if I drop that down I see all of\nmy networks, and I can choose DMZ.\n\n502\n00:24:09.901 --> 00:24:12.550\nAnd so\nnow I'm gonna plug it right into the DMZ.\n\n503\n00:24:12.550 --> 00:24:15.794\nI'll hit OK on that, and\nas soon as that updates,\n\n504\n00:24:15.794 --> 00:24:20.230\nif I watch my recent tasks down\nhere I'll see it's kind of working.\n\n505\n00:24:20.230 --> 00:24:22.760\nIt should happen pretty quick, it did, and\n\n506\n00:24:22.760 --> 00:24:25.180\nas soon as it's done it will\nshow it's plugged into the DMZ.\n\n507\n00:24:25.180 --> 00:24:30.220\nAnd I can go verify that by\njumping back to my host, and\n\n508\n00:24:30.220 --> 00:24:31.810\ngoing into my host networking.\n\n509\n00:24:33.090 --> 00:24:38.540\nAnd when I take a look at vSwitch1,\nvSwitch1 now shows as having\n\n510\n00:24:38.540 --> 00:24:43.632\none physical adapter, and inside of it,\nthere's WEB01 plugged right into it, okay?\n\n511\n00:24:43.632 --> 00:24:48.798\nSo WEB01 is now plugged in effectively\nto a switch that's connected to VMNIC1.\n\n512\n00:24:48.798 --> 00:24:52.950\nSo if VMNIC1 is plugged into my\nphysical DMZ, this virtual machine and\n\n513\n00:24:52.950 --> 00:24:57.370\nany other virtual machine I add to it is\nalso plugged into that DMZ, all right?\n\n514\n00:24:57.370 --> 00:25:02.110\nNow, let's pretend for\na moment that WEB01 isn't a web server.\n\n515\n00:25:02.110 --> 00:25:08.040\nWhat if it's a software firewall or\na proxy server, a gateway of some sort?\n\n516\n00:25:08.040 --> 00:25:12.520\nAnd I want it to be plugged into\nthe DMZ and my internal network.\n\n517\n00:25:12.520 --> 00:25:16.680\nWell, a virtual machine can actually\nbe plugged into more than one network.\n\n518\n00:25:16.680 --> 00:25:19.780\nIt could be plugged into more than\none port group on the same switch, or\n\n519\n00:25:19.780 --> 00:25:22.510\nit could be plugged into two\ncompletely different switches.\n\n520\n00:25:22.510 --> 00:25:24.580\nAnd the way we do it is\njust like in real life.\n\n521\n00:25:24.580 --> 00:25:29.340\nIn real life, if I have a server and I\nwanna plug it into two different switches,\n\n522\n00:25:29.340 --> 00:25:30.330\nwhat do I need?\n\n523\n00:25:30.330 --> 00:25:32.250\nI need two different network cards, right?\n\n524\n00:25:32.250 --> 00:25:35.180\nSo I can always add another network\ncard to this virtual machine and\n\n525\n00:25:35.180 --> 00:25:36.920\nthen plug it into a second switch.\n\n526\n00:25:36.920 --> 00:25:39.710\nThink of these vSwitches as real switches.\n\n527\n00:25:39.710 --> 00:25:41.130\nJust like a real switch, all right.\n\n528\n00:25:41.130 --> 00:25:42.210\nSo I'm gonna go and\n\n529\n00:25:42.210 --> 00:25:47.170\ntake that virtual machine WEB01 and\nI'm gonna edit its hardware again.\n\n530\n00:25:47.170 --> 00:25:48.760\nAnd, I might actually\nhave to shut it down.\n\n531\n00:25:48.760 --> 00:25:50.660\nLet me see if it will let me do this live.\n\n532\n00:25:50.660 --> 00:25:53.417\nSome OS's will let you add a network,\nthink real life, okay,\n\n533\n00:25:53.417 --> 00:25:56.817\nyou wanna add another network adapter\nto your server, what do you have to do?\n\n534\n00:25:56.817 --> 00:25:59.000\nYou have to shut it down and\nadd the adapter, right?\n\n535\n00:25:59.000 --> 00:26:01.725\nSo it might complain at me, but\nwe'll see what we can do here.\n\n536\n00:26:01.725 --> 00:26:05.732\nSo I'm gonna add a network adapter and\nI'll add that one in, and when I add that\n\n537\n00:26:05.732 --> 00:26:09.212\nnew network adapter, it asks me,\nwhat network do I want it to be on?\n\n538\n00:26:09.212 --> 00:26:11.220\nI'm gonna add it to the VM network.\n\n539\n00:26:11.220 --> 00:26:14.698\nSo now I'm gonna have my first\nadapter attached to DMZ,\n\n540\n00:26:14.698 --> 00:26:17.886\nmy second adapter attached to VM network,\nright?\n\n541\n00:26:17.886 --> 00:26:21.261\nAnd so when I say okay to that,\nit's gonna plug that thing in, or\n\n542\n00:26:21.261 --> 00:26:24.075\nit's gonna crash, one thing or\nthe other, [LAUGH] and\n\n543\n00:26:24.075 --> 00:26:27.527\nthen we'll end up with two adapters\nplugged in the two switches.\n\n544\n00:26:27.527 --> 00:26:30.864\nAnd if I jump back to my host,\nback to my networking, and\n\n545\n00:26:30.864 --> 00:26:34.130\nback to my vSwitches, and\nI take a look at my pictures,\n\n546\n00:26:34.130 --> 00:26:38.181\nI'm gonna hit my own refresh button\njust to make sure this is clean.\n\n547\n00:26:38.181 --> 00:26:43.202\nAnd we take a look at our pictures,\nnow when I look down here at the bottom\n\n548\n00:26:43.202 --> 00:26:49.063\nI can see here's my default vSwitch0,\nwhich has my management network, and\n\n549\n00:26:49.063 --> 00:26:54.115\nit's got virtual machine zero,\nshoot, it is gonna make me reboot.\n\n550\n00:26:54.115 --> 00:26:57.180\nSo the virtual machine isn't\nseeing that new adapter.\n\n551\n00:26:57.180 --> 00:26:59.890\nLet me just refresh one more time,\nmaybe I'm being impatient.\n\n552\n00:26:59.890 --> 00:27:01.160\nI did kind of move fast there.\n\n553\n00:27:01.160 --> 00:27:04.180\nSo, yeah it's not gonna refresh for me.\n\n554\n00:27:04.180 --> 00:27:09.395\nSo I'll need to restart that virtual\nmachine to recognize the adapter, but\n\n555\n00:27:09.395 --> 00:27:13.090\nit'll show it as being plugged in here and\nit will be plugged into the other switch.\n\n556\n00:27:13.090 --> 00:27:16.530\nSo kind of nice that we have\nthat functionality there.\n\n557\n00:27:16.530 --> 00:27:20.681\nAnd I'm just gonna,\nlet's reset that thing.\n\n558\n00:27:20.681 --> 00:27:21.848\nAnd so we'll let it reset and\n\n559\n00:27:21.848 --> 00:27:25.312\nonce it reboots, then it will recognize\nthat second adapter and connect properly.\n\n560\n00:27:25.312 --> 00:27:27.288\nSo we'll give it a moment\nwhile it's doing that.\n\n561\n00:27:27.288 --> 00:27:30.980\nNow while it's doing that let me show you\na little bit about that VM kernel adapter.\n\n562\n00:27:30.980 --> 00:27:33.870\nAnd then I think that's about\nthe last I have for this episode.\n\n563\n00:27:33.870 --> 00:27:37.840\nIf I go back to my host networking and\nI take vSwitch0 and\n\n564\n00:27:37.840 --> 00:27:39.410\nlook at that kernel adapter right?\n\n565\n00:27:39.410 --> 00:27:42.210\nThat VM kernel port that's\nmy management interface.\n\n566\n00:27:42.210 --> 00:27:46.300\nAnd right up here I can see my VM\nkernel adaptors andd I've only got one.\n\n567\n00:27:46.300 --> 00:27:49.779\nYou can add more than one if you wanna\ndedicate it for different services.\n\n568\n00:27:49.779 --> 00:27:52.471\nAnd if you edit that VM kernel adapter,\n\n569\n00:27:52.471 --> 00:27:55.659\nwe're gonna see all\nthe different services.\n\n570\n00:27:55.659 --> 00:27:58.535\nThe one created by default is just for\nmanagement traffic, and\n\n571\n00:27:58.535 --> 00:28:00.980\nyou probably don't wanna mess with it.\n\n572\n00:28:00.980 --> 00:28:04.750\nThe reason is if you break it, now you\ndon't have a way to connect, right.\n\n573\n00:28:04.750 --> 00:28:06.630\nI mean, you're not completely out of luck.\n\n574\n00:28:06.630 --> 00:28:10.690\nIf you go to the console\nof an ESX host right here.\n\n575\n00:28:10.690 --> 00:28:14.990\nIn the console, if you press F2,\n\n576\n00:28:14.990 --> 00:28:20.300\nyou can get into your customize screen,\nand there we go.\n\n577\n00:28:20.300 --> 00:28:22.130\nAnd when you get into\nyour customize screen,\n\n578\n00:28:22.130 --> 00:28:23.590\nyou'll see some of the different options.\n\n579\n00:28:23.590 --> 00:28:27.330\nOne of which\nIs Configure Management Network.\n\n580\n00:28:27.330 --> 00:28:31.840\nSo if I get completely locked out, I can\ngo up to the console of the machine, and\n\n581\n00:28:31.840 --> 00:28:35.310\nI can Restart the Management Network,\nTest the Management Network adapters, and\n\n582\n00:28:35.310 --> 00:28:36.390\nConfigure the Management Network.\n\n583\n00:28:36.390 --> 00:28:37.460\nSo I can always put it back.\n\n584\n00:28:37.460 --> 00:28:40.420\nSo if you really lock yourself out, you\njust need physical access to the box and\n\n585\n00:28:40.420 --> 00:28:41.730\nyou can fix it, right.\n\n586\n00:28:41.730 --> 00:28:43.610\nBut you don't wanna have to do that.\n\n587\n00:28:43.610 --> 00:28:47.770\nFor example, what if you put\nthis thing in lock down load?\n\n588\n00:28:47.770 --> 00:28:49.847\nWell, now you can't get to\nthe screen I'm on right now,\n\n589\n00:28:49.847 --> 00:28:52.812\nyou gotta configure it from vCenter but\nyou just locked yourself out of vCenter.\n\n590\n00:28:52.812 --> 00:28:54.985\nNow you're out of luck,\nnow you're kinda screwed, right?\n\n591\n00:28:54.985 --> 00:28:57.390\nSo, you don't want that, right?\n\n592\n00:28:57.390 --> 00:29:00.520\nSo definitely be careful to make sure you\ndon't lock yourself out of these things,\n\n593\n00:29:00.520 --> 00:29:01.770\nso leave this one alone.\n\n594\n00:29:01.770 --> 00:29:04.230\nBut you can create more\nVM kernel adapters.\n\n595\n00:29:04.230 --> 00:29:06.660\nSo you might wanna have\na dedicated one for vMotion.\n\n596\n00:29:06.660 --> 00:29:07.660\nI do that all of the time.\n\n597\n00:29:07.660 --> 00:29:10.460\nIf you want the best failover,\ndedicate adapters for that.\n\n598\n00:29:10.460 --> 00:29:13.474\nDedicate adapters for storage,\nlike virtual SAN traffic,\n\n599\n00:29:13.474 --> 00:29:16.087\nreally handy to have to get\nyour best optimization.\n\n600\n00:29:16.087 --> 00:29:19.178\nYou might wanna use jumbo frames\non your virtual SAN network and\n\n601\n00:29:19.178 --> 00:29:22.909\nnot use jumbo frames on the rest, so\nyou have separate VM kernel adapters for\n\n602\n00:29:22.909 --> 00:29:24.790\neach so you can start to specify that.\n\n603\n00:29:24.790 --> 00:29:26.290\nSo those are all different\nthings we can do there.\n\n604\n00:29:26.290 --> 00:29:31.740\nAll right, let's see if our virtual\nmachine has sorted itself out.\n\n605\n00:29:31.740 --> 00:29:36.380\nSo I'm just taking a look at WEB01, it\ndoes show its two interfaces as connected.\n\n606\n00:29:36.380 --> 00:29:41.480\nI'm gonna go back to my host, and\nnetworking and I'm gonna take a look at\n\n607\n00:29:41.480 --> 00:29:46.680\nmy switches and I'm gonna force\na refresh just because I can.\n\n608\n00:29:47.880 --> 00:29:52.040\nAnd eventually my picture will come back\nup or, have I broken the rules here?\n\n609\n00:29:52.040 --> 00:29:53.526\nIt's not gonna show me a picture anymore.\n\n610\n00:29:53.526 --> 00:29:55.650\n[LAUGH] It's getting mad at me.\n\n611\n00:29:55.650 --> 00:29:58.120\nAll right,\nwell here I can see my DMZ switch, and\n\n612\n00:29:58.120 --> 00:30:01.430\nI still see WEB01 is plugged\nright there into my DMZ switch.\n\n613\n00:30:01.430 --> 00:30:06.340\nAnd vSwitch0, there we go, that's what\nI was trying to get this whole time.\n\n614\n00:30:06.340 --> 00:30:08.610\nI can see I've got that\none physical adapter, and\n\n615\n00:30:08.610 --> 00:30:14.670\nI can see Virtual Machines (1) [LAUGH] and\nI expanded it, it disappeared again.\n\n616\n00:30:14.670 --> 00:30:17.460\nBut that machine is plugged in there,\nI promise you.\n\n617\n00:30:17.460 --> 00:30:19.190\nI mean we see it right\nhere from the machine.\n\n618\n00:30:19.190 --> 00:30:21.390\nYou can be connected to\nmore than one switch.\n\n619\n00:30:21.390 --> 00:30:24.110\nYou can actually have more than\none connection to the same switch.\n\n620\n00:30:24.110 --> 00:30:29.140\nSo for example, I could edit this and\nmake both of those DMC adaptors.\n\n621\n00:30:29.140 --> 00:30:31.410\nRight, if I wanted, I could do that.\n\n622\n00:30:31.410 --> 00:30:33.140\nThere's not a lot of reason to do that.\n\n623\n00:30:33.140 --> 00:30:35.845\nNormally you do that load balancing or\nperformance.\n\n624\n00:30:35.845 --> 00:30:38.383\nThese are virtual adapters anyway so\nyou're not gonna get\n\n625\n00:30:38.383 --> 00:30:40.992\nany better performance out of\ntwo than you would out of one.\n\n626\n00:30:40.992 --> 00:30:44.802\nThey're plugged into the same virtual\nswitch, so not a lot of call to do that,\n\n627\n00:30:44.802 --> 00:30:48.370\nbut once it's there,\nit'll be in place and off you go.\n\n628\n00:30:48.370 --> 00:30:51.796\nNow, everything we've seen so\nfar has been what's called a vSwitch and\n\n629\n00:30:51.796 --> 00:30:53.943\nyou guys see that they're pretty powerful.\n\n630\n00:30:53.943 --> 00:30:57.010\nWe can do a lot of stuff with these\nthings and they're very effective.\n\n631\n00:30:57.010 --> 00:30:57.940\nYou'll work with them a lot.\n\n632\n00:30:59.020 --> 00:31:05.660\nExcept vSwitches are really only useful\nif you have stand alone ESXi boxes.\n\n633\n00:31:05.660 --> 00:31:09.000\nIf I have multiple ESXi\nboxes clustered together for\n\n634\n00:31:09.000 --> 00:31:13.380\nthings like vMotion, I need to\nhave a VM like my web server here,\n\n635\n00:31:13.380 --> 00:31:17.760\nwhere it can failover from one physical\nhost to another physical host.\n\n636\n00:31:17.760 --> 00:31:20.230\nWell, where does this vSwitch exist?\n\n637\n00:31:20.230 --> 00:31:25.130\nThe vSwitch exists,\nin my case, on esx-host01.\n\n638\n00:31:25.130 --> 00:31:30.869\nOn esx-host02, if I go to networking,\nI don't have a vSwitch1.\n\n639\n00:31:30.869 --> 00:31:36.350\nSo if my web server fails over to\nesx-host02, it has no network connection.\n\n640\n00:31:36.350 --> 00:31:37.890\nSo what's point in failing it over?\n\n641\n00:31:37.890 --> 00:31:39.050\nIt's offline.\n\n642\n00:31:39.050 --> 00:31:43.360\nSo vSwitches are only useful\nin standalone environments.\n\n643\n00:31:43.360 --> 00:31:45.890\nThat's a pretty big limitation to them,\nright.\n\n644\n00:31:45.890 --> 00:31:48.470\nSo, you might use vSwitches\nin a small company, but\n\n645\n00:31:48.470 --> 00:31:51.530\nin a large company,\nit's a rarity they use vSwitches.\n\n646\n00:31:51.530 --> 00:31:55.330\nInstead, you use what are called\ndistributed virtual switches,\n\n647\n00:31:55.330 --> 00:31:57.080\nor dvSwitches.\n\n648\n00:31:57.080 --> 00:32:00.010\ndvSwitches don't exist on one host.\n\n649\n00:32:00.010 --> 00:32:03.560\nThey exist on all the hosts in a cluster.\n\n650\n00:32:03.560 --> 00:32:07.040\nSo if I have a cluster of 16 ESXi hosts,\n\n651\n00:32:07.040 --> 00:32:10.630\nI can have one dvSwitch\nthat spanned all of them.\n\n652\n00:32:10.630 --> 00:32:14.230\nAnd now, if my web server failed\nover from host to host to host,\n\n653\n00:32:14.230 --> 00:32:16.210\nit would always have that network present.\n\n654\n00:32:16.210 --> 00:32:19.693\nSo medium, large environment,\nyou’re almost always gonna use distributed\n\n655\n00:32:19.693 --> 00:32:23.105\nvSwitches, which are what we’re\ngonna see in the next episode.\n\n656\n00:32:23.105 --> 00:32:25.565\n>> A lot of great information\nthere on networking, Don.\n\n657\n00:32:25.565 --> 00:32:26.925\nAnd I am looking at the clock.\n\n658\n00:32:26.925 --> 00:32:28.771\nIt does look like were flexing\nthe muscles on the clock.\n\n659\n00:32:28.771 --> 00:32:32.226\n[LAUGH] Also, more importantly, I don’t\nknow if we wanna wrap this up before Don\n\n660\n00:32:32.226 --> 00:32:34.165\nstrangles Flash on us there, but-\n>> I know.\n\n661\n00:32:34.165 --> 00:32:36.338\n[LAUGH]\n>> But before we do, Don,\n\n662\n00:32:36.338 --> 00:32:38.010\ndo you have any parting words?\n\n663\n00:32:38.010 --> 00:32:40.980\n>> Main thing is vSwitches\nare really useful.\n\n664\n00:32:40.980 --> 00:32:42.990\nIt's easy enough to change them around.\n\n665\n00:32:42.990 --> 00:32:45.817\nYou just think of them as physical\nswitches cuz they work exactly like\n\n666\n00:32:45.817 --> 00:32:48.720\nphysical switches do, and\nthey're pretty cut and dry.\n\n667\n00:32:48.720 --> 00:32:52.780\nBe careful with the Management VM kernel\nadapter, cuz you can lock yourself out of\n\n668\n00:32:52.780 --> 00:32:55.460\nthe box, especially if you\nhave lock down mode turned on.\n\n669\n00:32:55.460 --> 00:32:59.740\nIn fact, what I usually recommend is\nturn off lock down mode on the host\n\n670\n00:32:59.740 --> 00:33:01.550\nwhile you're configuring these adapters.\n\n671\n00:33:01.550 --> 00:33:05.090\nAnd only once you get it all done\ndo you turn lock down mode back on.\n\n672\n00:33:05.090 --> 00:33:07.700\nJust to save you the trouble of\ngetting locked out of your own host.\n\n673\n00:33:07.700 --> 00:33:10.101\n>> Well, Don, we appreciate having\nyou at the studio as always and\n\n674\n00:33:10.101 --> 00:33:11.711\nwe appreciate you, the viewer watching.\n\n675\n00:33:11.711 --> 00:33:14.581\nSigning out for ITProTV,\nI've been your host, Wes Brian.\n\n676\n00:33:14.581 --> 00:33:16.923\n>> And I'm Don Pezet\n>> And we'll see you next time.\n\n677\n00:33:16.923 --> 00:33:24.419\n[MUSIC]\n\n",
          "vimeoId": "168555113"
        },
        {
          "description": "**Errata - Don mentions a vSphere Enterprise license is needed for DV switches which is incorrect. The actual license needed for DV switches is Enterprise Plus**\n\nIn this episode, Don describes Distributed Virtual Switches and discusses how dvSwitches can overcome the limitations found in traditional vSwitches. He then demonstrates deploying and managing dvSwitches inside of vCenter 6.",
          "length": "2110",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-2-1-configuring_distributed_vswitches-053116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-2-1-configuring_distributed_vswitches-053116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-2-1-configuring_distributed_vswitches-053116-1-sm.jpg",
          "title": "Configuring Distributed vSwitches",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.186 --> 00:00:15.157\nAll right, good morning,\ngood afternoon, and good evening,\n\n3\n00:00:15.157 --> 00:00:17.529\nand welcome back to another\nepisode of ITPRO.TV.\n\n4\n00:00:17.529 --> 00:00:19.200\nI'm your host Don Pezet.\n\n5\n00:00:19.200 --> 00:00:23.170\nGoing solo today with an episode of\nVMware Certified Professional 6.\n\n6\n00:00:23.170 --> 00:00:27.220\nAnd in this episode, we're gonna be\ntackling distributed virtual switches\n\n7\n00:00:27.220 --> 00:00:30.580\nwhich is a really cool topic so,\nlet's get right to it.\n\n8\n00:00:30.580 --> 00:00:34.250\nIn our last episode we had a chance to\ntalk about V switches, virtual switches,\n\n9\n00:00:34.250 --> 00:00:37.190\nand those are kind of an important\nbuilding block, right?\n\n10\n00:00:37.190 --> 00:00:39.930\nIt's hard to use a virtual machine\neffectively unless it has a network\n\n11\n00:00:39.930 --> 00:00:43.360\nconnection and you can't really get\na network connection without having some\n\n12\n00:00:43.360 --> 00:00:44.690\nkind of virtual switch in place.\n\n13\n00:00:44.690 --> 00:00:47.790\nAnd so we got a chance to see those and\nthey worked really well, right.\n\n14\n00:00:47.790 --> 00:00:50.320\nIf you went through the whole episode,\nyou saw it was easy to create a vSwitch,\n\n15\n00:00:50.320 --> 00:00:52.770\nit was easy to attach it to\na physical interface, and\n\n16\n00:00:52.770 --> 00:00:54.910\nyou got network connectivity up and\ngoing in no time.\n\n17\n00:00:56.010 --> 00:00:58.510\nBut there's a little\nproblem with vSwitches,\n\n18\n00:00:58.510 --> 00:01:04.000\nthe problem with a vSwitch is\nit exists only on one ESXi host.\n\n19\n00:01:04.000 --> 00:01:08.840\nSo, I have a VM Visor that's fired up,\nI create a vSwitch that's on it.\n\n20\n00:01:08.840 --> 00:01:12.370\nIt exists right there in its own\nlittle microcosm, and that's it.\n\n21\n00:01:12.370 --> 00:01:16.495\nNow, if I only have one ESXi host,\nthat's no big deal, I'm cool with that,\n\n22\n00:01:16.495 --> 00:01:19.731\nI'll just have my one host,\nmy one vSwitch, life is great,\n\n23\n00:01:19.731 --> 00:01:22.025\nI never need to worry about anything else.\n\n24\n00:01:22.025 --> 00:01:26.507\nBut the moment you have two or\nthree or four ESXi boxes or 100 or\n\n25\n00:01:26.507 --> 00:01:30.090\n1,000, now we've got a problem.\n\n26\n00:01:30.090 --> 00:01:34.230\nBut the problem isn't necessarily the\nvSwitch itself, the vSwitch works great.\n\n27\n00:01:34.230 --> 00:01:37.170\nThe problem is with clustering.\n\n28\n00:01:37.170 --> 00:01:41.680\nWhen we cluster our ESXi boxes together,\nwe get them to combine,\n\n29\n00:01:41.680 --> 00:01:45.980\nto interweave, so that we can have\nresources shared between them.\n\n30\n00:01:45.980 --> 00:01:48.010\nAnd the best example of that is vMotion,\n\n31\n00:01:48.010 --> 00:01:52.948\nvMotion is kind of like the holy\ngrail of virtualization.\n\n32\n00:01:52.948 --> 00:01:57.280\nVMotion, lets us take a running virtual\nmachine, a virtual machine that is up and\n\n33\n00:01:57.280 --> 00:02:01.390\nrunning and\nactive right now on this ESXi host.\n\n34\n00:02:01.390 --> 00:02:04.640\nAnd we can move it to another ESXi host.\n\n35\n00:02:04.640 --> 00:02:07.780\nWe can actually move it between\nphysical pieces of hardware,\n\n36\n00:02:08.850 --> 00:02:09.970\nwhile the virtual machine is still on.\n\n37\n00:02:09.970 --> 00:02:12.360\nWe never shut it off, it doesn't reboot.\n\n38\n00:02:12.360 --> 00:02:14.120\nIt doesn't miss a beat.\n\n39\n00:02:14.120 --> 00:02:16.590\nIt just jumps from one\nphysical hardware to another.\n\n40\n00:02:16.590 --> 00:02:20.555\nSo the cool part there is, let's say\nthat I need to do some maintenance.\n\n41\n00:02:20.555 --> 00:02:27.680\nI need to add some bigger hard drives or\ndo an ESXi update for a physical host.\n\n42\n00:02:27.680 --> 00:02:30.860\nI can just take all the virtual machines\nthat are on it right now that are running,\n\n43\n00:02:30.860 --> 00:02:34.060\nmove them off to another host,\nand do my upgrade.\n\n44\n00:02:34.060 --> 00:02:36.070\nAnd when I'm done,\nI can move them all back again.\n\n45\n00:02:36.070 --> 00:02:36.750\nAnd then, the whole time,\n\n46\n00:02:36.750 --> 00:02:39.470\nyour end users are none the wiser,\nthey don't even see it.\n\n47\n00:02:39.470 --> 00:02:41.130\nIt's all kind of invisible to them.\n\n48\n00:02:41.130 --> 00:02:42.190\nIt's really impressive stuff.\n\n49\n00:02:43.340 --> 00:02:46.960\nBut, a Virtual Machine can\nexist in more than one place.\n\n50\n00:02:46.960 --> 00:02:49.870\nWe can have a SAN, a storage area\nnetwork that shares their hard drives.\n\n51\n00:02:49.870 --> 00:02:52.040\nThey can be in more than one place.\n\n52\n00:02:52.040 --> 00:02:57.010\nBut if they're attached to a vSwitch and\nthe vSwitch exists on one server,\n\n53\n00:02:57.010 --> 00:02:59.300\nwhat happens when we move that\nvirtual machine over to a new server?\n\n54\n00:03:00.510 --> 00:03:01.470\nIt's got no network.\n\n55\n00:03:01.470 --> 00:03:03.420\nIt has no virtual switch to connect to.\n\n56\n00:03:03.420 --> 00:03:07.603\nNow maybe you took the time to create the\nexact identical vSwitches on both servers\n\n57\n00:03:07.603 --> 00:03:10.752\nand gave them the same name and so\non, so you can move it over and\n\n58\n00:03:10.752 --> 00:03:12.408\ntransition quickly like that.\n\n59\n00:03:12.408 --> 00:03:14.130\nBut most of the time we haven't done that.\n\n60\n00:03:14.130 --> 00:03:16.970\nMost of the time, there's variations\nfrom one host to another.\n\n61\n00:03:16.970 --> 00:03:20.140\nAnd what results is that we move\nthe virtual machine over and\n\n62\n00:03:20.140 --> 00:03:22.430\nnow it has no network connection.\n\n63\n00:03:22.430 --> 00:03:23.775\nAnd you're effectively dead in the water.\n\n64\n00:03:23.775 --> 00:03:27.620\nVMotion was nice but\nit didn't save us downtime, right?\n\n65\n00:03:28.680 --> 00:03:32.360\nA distributed virtual\nswitch is the solution.\n\n66\n00:03:32.360 --> 00:03:35.100\nA vSwitch exists on one host but\na DV switch,\n\n67\n00:03:35.100 --> 00:03:39.410\na distributive virtual switch,\nit exists on multiple hosts.\n\n68\n00:03:39.410 --> 00:03:43.540\nWe actually stretch the switch to\nencompass more than one host, and\n\n69\n00:03:43.540 --> 00:03:46.170\nit can be two hosts, it can be 20,\nit can be 100 hosts.\n\n70\n00:03:46.170 --> 00:03:48.700\nYou can stretch it as big\nas you need it to be.\n\n71\n00:03:48.700 --> 00:03:52.270\nAnd the cool part there is,\nI can move that virtual machine to\n\n72\n00:03:52.270 --> 00:03:55.980\nany host that's apart of that vSwitch and\nit'll have the same network.\n\n73\n00:03:55.980 --> 00:03:56.740\nIt'll be connected.\n\n74\n00:03:56.740 --> 00:03:57.260\nIt'll be up.\n\n75\n00:03:57.260 --> 00:03:58.270\nIt'll be running.\n\n76\n00:03:58.270 --> 00:04:02.060\nSo for the most part,\nDV switches are what you want to use.\n\n77\n00:04:02.060 --> 00:04:06.900\nNow I know what you might be thinking is,\nwell why don't we always use DV switches?\n\n78\n00:04:06.900 --> 00:04:09.740\nWhy even bother with vSwitches\nif DV switches are going\n\n79\n00:04:09.740 --> 00:04:10.360\nto be the better option?\n\n80\n00:04:10.360 --> 00:04:13.270\nIf you're in a cluster environment,\nyou're right, you're absolutely right,\n\n81\n00:04:13.270 --> 00:04:15.758\njust use DV switches,\ndon't ever bother with VSwitches.\n\n82\n00:04:15.758 --> 00:04:21.271\nBut if you're dealing with standalone ESXi\nboxes, DV switches aren't really useful,\n\n83\n00:04:21.271 --> 00:04:25.178\nthey don't benefit you there\nbecause it's just a single box.\n\n84\n00:04:25.178 --> 00:04:28.624\nAnd I know what you might be thinking is,\nwell, why not do DV switches in anyway,\n\n85\n00:04:28.624 --> 00:04:31.411\nand that way if I add more boxes in\nthe future I can just stretch it,\n\n86\n00:04:31.411 --> 00:04:34.480\nas opposed to having to\nrecreate all new switches.\n\n87\n00:04:34.480 --> 00:04:38.590\nThe big problem, it's not a problem which\nis kind of something we need to recognize\n\n88\n00:04:38.590 --> 00:04:42.720\nis that DV switches are actually\na part vSphere Enterprise Edition.\n\n89\n00:04:42.720 --> 00:04:44.430\nSo you have to have\nthe Enterprise Edition for it.\n\n90\n00:04:44.430 --> 00:04:47.760\nIf you have the standard edition of\nvSphere which a lot less expensive,\n\n91\n00:04:47.760 --> 00:04:49.280\nyou only have vSwitches.\n\n92\n00:04:49.280 --> 00:04:52.191\nSo DV switches, they cost you more money.\n\n93\n00:04:52.191 --> 00:04:55.040\nNow if you've already gone Enterprise,\nthen you've already got it.\n\n94\n00:04:55.040 --> 00:04:57.840\nYou've already covered the license, you\ncan go ahead and deploy it and off you go.\n\n95\n00:04:57.840 --> 00:05:01.600\nI've seen many environments where\nall they use are DV switches,\n\n96\n00:05:01.600 --> 00:05:02.890\neven on standalone hosts.\n\n97\n00:05:02.890 --> 00:05:06.450\nAnd they're doing it because they know,\nin the future we might add more hosts, and\n\n98\n00:05:06.450 --> 00:05:09.710\nif we do, we can just stretch\nthat DV switch and it's done.\n\n99\n00:05:09.710 --> 00:05:14.220\nRight, versus if we did a vSwitch, you\ncan't convert a vSwitch into a DV switch.\n\n100\n00:05:14.220 --> 00:05:19.710\nWhat you have to do is take your vSwitch,\ncreate a new DV switch, and then\n\n101\n00:05:19.710 --> 00:05:22.840\nyou've gotta unplug your virtual machine\nfrom one and plug it into the other.\n\n102\n00:05:22.840 --> 00:05:24.330\nWhats going to happen when you do that?\n\n103\n00:05:24.330 --> 00:05:27.130\nDowntime.\nRight now, it's a couple of seconds,\n\n104\n00:05:27.130 --> 00:05:29.430\nmaybe a minute of downtime\nas you change that setting,\n\n105\n00:05:29.430 --> 00:05:32.958\nmove it over, that may not be a big\ndeal to you and that's fine, right?\n\n106\n00:05:32.958 --> 00:05:36.890\nBut if you're trying to do some kind of\nmission critical no fail environment,\n\n107\n00:05:36.890 --> 00:05:37.810\nyou don't want to deal with that.\n\n108\n00:05:37.810 --> 00:05:39.700\nHaving a DV switch is gonna\nbe a better solution.\n\n109\n00:05:40.742 --> 00:05:44.790\nAll right now, creating a DV switch is not\nmuch different than creating a vSwitch.\n\n110\n00:05:44.790 --> 00:05:46.991\nThe big difference is when\nyou go to pick your ports,\n\n111\n00:05:46.991 --> 00:05:48.999\nyou're not gonna have ports for\njust one host.\n\n112\n00:05:48.999 --> 00:05:51.910\nYou're gonna have ports for\nevery host that's a part of the DV switch.\n\n113\n00:05:51.910 --> 00:05:55.880\nAnd as you add more hosts in, it's\nadding more ports to that DV switch, and\n\n114\n00:05:55.880 --> 00:05:58.360\nby ports I mean physical ports,\nphysical network adapters.\n\n115\n00:05:58.360 --> 00:06:02.040\nOn the virtual side you have unlimited\nports there, that's no big deal, but\n\n116\n00:06:02.040 --> 00:06:04.490\non the physical side you\ncan have many right.\n\n117\n00:06:04.490 --> 00:06:07.770\nAnd that's cool cuz that gives\nus fail over and redundancy too.\n\n118\n00:06:07.770 --> 00:06:11.810\nIf the network link for one host\nwere to die your VMs could jump over\n\n119\n00:06:11.810 --> 00:06:14.700\nto another host and they'd still have\nthat access through the other host,\n\n120\n00:06:14.700 --> 00:06:15.999\nthat functionality would be there.\n\n121\n00:06:17.340 --> 00:06:20.830\nAll right, so some of the other\nthings about DV switches.\n\n122\n00:06:20.830 --> 00:06:24.040\nDV switches have a lot of really\ncool bells and whistle and\n\n123\n00:06:24.040 --> 00:06:26.340\nwe're going to see a lot of\nthem as we go through the show.\n\n124\n00:06:26.340 --> 00:06:28.670\nThere is security policies\nthat we can deploy,\n\n125\n00:06:28.670 --> 00:06:31.830\nthere's other just general policies for\ntheir functionality.\n\n126\n00:06:31.830 --> 00:06:36.500\nThere are things like LACP,\nLACP is link aggregation and\n\n127\n00:06:36.500 --> 00:06:40.990\ncontrol protocol and unless we take\nmore than one physical interface and\n\n128\n00:06:40.990 --> 00:06:45.700\ncombine them together into one big virtual\ninterface, it gives you two benefits.\n\n129\n00:06:45.700 --> 00:06:47.060\nIt gives you redundancy.\n\n130\n00:06:47.060 --> 00:06:50.250\nIf one link in that bundle fails, it's no\nbig deal, right, you've got other links.\n\n131\n00:06:50.250 --> 00:06:53.370\nThe other thing is it gives you\nperformance improvements, right, because\n\n132\n00:06:53.370 --> 00:06:56.240\nyou are spreading your load balance\nfrom your traffic across those links.\n\n133\n00:06:56.240 --> 00:07:00.440\nNow you can do teaming and\nfail over even on a regular vSwitch.\n\n134\n00:07:00.440 --> 00:07:03.560\nTeaming and fail over just means\nyou have two network adapters and\n\n135\n00:07:03.560 --> 00:07:05.290\nwe do some kind of a load balancer.\n\n136\n00:07:05.290 --> 00:07:10.360\nAnd when you do that, what you're\ndoing is your VMware, ESXi host,\n\n137\n00:07:10.360 --> 00:07:15.210\nit is fully aware that it's load\nbalancing and teaming on those adapters.\n\n138\n00:07:15.210 --> 00:07:16.140\nBut your switch?\n\n139\n00:07:16.140 --> 00:07:20.010\nYour switch isn't a part of that,\nit doesn't know we're tricking the switch.\n\n140\n00:07:20.010 --> 00:07:22.080\nIt sees some MAC addresses\non one interface,\n\n141\n00:07:22.080 --> 00:07:25.250\nsome MAC addresses on the other, and\nthat's it, we kinda trick the switch.\n\n142\n00:07:25.250 --> 00:07:30.300\nWhen you LACP, your switch actually\nparticipates and your switch is aware.\n\n143\n00:07:30.300 --> 00:07:34.160\nThe switch knows that, hey, these four\nadapters all run to the same host and\n\n144\n00:07:34.160 --> 00:07:35.200\nthey're all bundled together.\n\n145\n00:07:35.200 --> 00:07:37.890\nIf one link fails the other\nthree are perfectly fine.\n\n146\n00:07:37.890 --> 00:07:42.890\nSo with LACP,\nfailure usually results in no packet\n\n147\n00:07:42.890 --> 00:07:47.870\nloss that you might lose a pack if it was\non the line at the time the link failed.\n\n148\n00:07:47.870 --> 00:07:50.000\nBut TCP retransmits\nwill take care of that.\n\n149\n00:07:50.000 --> 00:07:53.427\nSo otherwise,\nyou really don't loose any data with LACP.\n\n150\n00:07:53.427 --> 00:07:58.372\nFail over is very fast, the load balancing\nis very reliable, it's a great solution.\n\n151\n00:07:58.372 --> 00:08:02.792\nWith teaming and failover in a regular\nvSwitch, as soon as a link fails, it takes\n\n152\n00:08:02.792 --> 00:08:07.147\nwhatever the ARP rediscovery period is,\nwhich can be as great as 30 seconds,\n\n153\n00:08:07.147 --> 00:08:11.600\nbefore a switch recognizes that it needs\nto failover and move the other link.\n\n154\n00:08:11.600 --> 00:08:13.080\nAnd that results in longer downtime.\n\n155\n00:08:13.080 --> 00:08:14.880\nSo LACP is faster and more reliable.\n\n156\n00:08:14.880 --> 00:08:16.559\nWe're gonna see it later on in the show.\n\n157\n00:08:17.590 --> 00:08:22.720\nThere's also things like network\ninput output control, NIOC.\n\n158\n00:08:22.720 --> 00:08:25.640\nNIOC lets us set governors, limits,\n\n159\n00:08:25.640 --> 00:08:28.240\nto the amount of bandwidth that\neach service is allowed to use.\n\n160\n00:08:28.240 --> 00:08:30.150\nAnd not just limits,\nyou can do reservations.\n\n161\n00:08:30.150 --> 00:08:32.300\nYou can hold certain amounts\nof bandwidth for a service.\n\n162\n00:08:32.300 --> 00:08:33.810\nYou wanna prioritize things.\n\n163\n00:08:33.810 --> 00:08:35.590\nThat's really useful for\nstuff like vMotion,\n\n164\n00:08:35.590 --> 00:08:39.710\nwhere you might wanna set aside a block,\na bandwidth, just for vMotion.\n\n165\n00:08:39.710 --> 00:08:41.090\nYou can certainly do that.\n\n166\n00:08:41.090 --> 00:08:46.300\nSo those are additional features that are\na part of distributed virtual switches.\n\n167\n00:08:46.300 --> 00:08:48.370\nSo these guys are really powerful.\n\n168\n00:08:48.370 --> 00:08:50.730\nThey do a lot of really cool stuff.\n\n169\n00:08:50.730 --> 00:08:52.730\nAnd I'm kinda rambling on about it.\n\n170\n00:08:52.730 --> 00:08:56.070\nWhy don't we just jump in and\nkinda see what we can do?\n\n171\n00:08:56.070 --> 00:08:58.890\nNow, creating a distributive\nvirtual switch is pretty easy.\n\n172\n00:08:58.890 --> 00:09:00.390\nBasically when you go into vCenter.\n\n173\n00:09:00.390 --> 00:09:02.520\nNow, when we created a vSwitch,\nwhat did we do?\n\n174\n00:09:02.520 --> 00:09:03.520\nWe went to a host.\n\n175\n00:09:03.520 --> 00:09:05.770\nRight, so we went to host in clusters.\n\n176\n00:09:05.770 --> 00:09:08.120\nWe picked a host like my ESX host 01.\n\n177\n00:09:08.120 --> 00:09:12.745\nWe went to networking and then right\nhere we created virtual switches and\n\n178\n00:09:12.745 --> 00:09:14.515\nyou'll see I've got a vSwitch0.\n\n179\n00:09:14.515 --> 00:09:16.985\nThat's the default vSwitch that's created.\n\n180\n00:09:16.985 --> 00:09:20.645\nWe created it on the host\nbecause that's where it exists.\n\n181\n00:09:20.645 --> 00:09:23.235\nIt exists on that one host.\n\n182\n00:09:23.235 --> 00:09:29.015\nIf I go to the other host, ESX host 02,\nit has its own virtual switches, right?\n\n183\n00:09:29.015 --> 00:09:31.265\nEach host is maintaining it's own.\n\n184\n00:09:31.265 --> 00:09:35.270\nBut a distributed virtual\nswitch isn't tied to one host.\n\n185\n00:09:35.270 --> 00:09:37.940\nIt's tied to whatever\nhosts are a part of it.\n\n186\n00:09:37.940 --> 00:09:39.600\nSo to create distributable\nvirtual switches,\n\n187\n00:09:39.600 --> 00:09:45.760\nwhat we do is we go back to our home and\nwe go into networking.\n\n188\n00:09:45.760 --> 00:09:50.160\nAnd inside of networking,\nyou'll see your data center, and\n\n189\n00:09:50.160 --> 00:09:52.690\nthen the virtual networks\nthat are inside of it.\n\n190\n00:09:52.690 --> 00:09:56.230\nAnd so here's my vCenter server,\nthe data center that I've created, and\n\n191\n00:09:56.230 --> 00:09:59.800\nI've got a default network created\ncalled virtual machine network.\n\n192\n00:09:59.800 --> 00:10:03.280\nAnd if I look at the different\noptions that are available to me here\n\n193\n00:10:03.280 --> 00:10:07.340\nwhen I'm on this page,\nyou'll see add a host, create a cluster,\n\n194\n00:10:07.340 --> 00:10:11.650\ncreate a new virtual machine,\ncreate a distributed switch.\n\n195\n00:10:11.650 --> 00:10:14.930\nAnd you can get it by right\nclicking on the data center also\n\n196\n00:10:14.930 --> 00:10:18.130\nthat you'll see the option to\ncreate a new distribute switch, or\n\n197\n00:10:18.130 --> 00:10:20.490\nif you have a config file,\nyou can import one.\n\n198\n00:10:20.490 --> 00:10:22.550\nNow, actually let me\nclarify that a little bit.\n\n199\n00:10:22.550 --> 00:10:26.910\nWhy would I import a virtual switch\nas opposed to just creating one?\n\n200\n00:10:26.910 --> 00:10:31.320\nWell, there are some third party\nvendors that have created their own\n\n201\n00:10:31.320 --> 00:10:33.700\ndistributed switch that you can use.\n\n202\n00:10:33.700 --> 00:10:37.170\nAnd one of the best\nexamples of that is CISCO.\n\n203\n00:10:37.170 --> 00:10:42.040\nCISCO has the Nexus series of switches,\nand they have the Nexus1000V.\n\n204\n00:10:42.040 --> 00:10:42.930\nV stands for virtual.\n\n205\n00:10:42.930 --> 00:10:44.360\nIt's a virtual switch.\n\n206\n00:10:44.360 --> 00:10:47.295\nSo we could actually\nimport a CISCO 1000 V and\n\n207\n00:10:47.295 --> 00:10:52.275\nNexus switch and now have CISCO's\nnetworking behind the scenes.\n\n208\n00:10:52.275 --> 00:10:55.635\nNow the exam doesn't really dive into\nthat, but just in real life land know that\n\n209\n00:10:55.635 --> 00:10:59.365\nthat's out there and there's various\nreasons why you might want to do that.\n\n210\n00:10:59.365 --> 00:11:02.735\nIf you have a true CISCO data\ncenter with all of their equipment,\n\n211\n00:11:02.735 --> 00:11:06.165\nit makes it all mesh together and you\nget really reliable performance on that.\n\n212\n00:11:06.165 --> 00:11:09.830\nBut for most of us, we're just gonna do\na regular distributed virtual switch,\n\n213\n00:11:09.830 --> 00:11:12.260\nwhich exists entirely inside of vSphere.\n\n214\n00:11:13.850 --> 00:11:16.010\nWhen you go to create it,\na simple wizard is gonna launch.\n\n215\n00:11:16.010 --> 00:11:17.710\nThis is gonna ask you for\na few things, right?\n\n216\n00:11:17.710 --> 00:11:20.430\nSo we have to give this switch a name.\n\n217\n00:11:20.430 --> 00:11:24.180\nAnd this switch, the default is just\ndSwitch, for distributed switch.\n\n218\n00:11:25.370 --> 00:11:28.160\nThis name, it does need to be relevant,\nbecause you might have more\n\n219\n00:11:28.160 --> 00:11:31.040\nthan one virtual switch to create it for\nwhatever your purpose is.\n\n220\n00:11:31.040 --> 00:11:34.410\nSo I might be creating this\nvirtual switch purely for\n\n221\n00:11:34.410 --> 00:11:38.410\nmy virtual machines to use, right?\n\n222\n00:11:38.410 --> 00:11:41.130\nI don't intend to use this for\nmy management network.\n\n223\n00:11:41.130 --> 00:11:43.420\nI wanna keep my management\nnetwork separate.\n\n224\n00:11:43.420 --> 00:11:45.370\nI want this just to be for\nthe virtual machines.\n\n225\n00:11:45.370 --> 00:11:49.230\nSo I'm gonna call this my VM-Switch.\n\n226\n00:11:49.230 --> 00:11:52.320\nAnd maybe I'll just add\nto it my VM-dvSwitch,\n\n227\n00:11:52.320 --> 00:11:54.170\nthat way I can keep track of that.\n\n228\n00:11:54.170 --> 00:11:57.370\nAnd notice that this should be\na virtual switch because I might have\n\n229\n00:11:57.370 --> 00:12:00.720\nregular vSwitches that could\nalso be named vmSwitch.\n\n230\n00:12:00.720 --> 00:12:01.820\nI want to be able to tell them apart.\n\n231\n00:12:01.820 --> 00:12:04.390\nSo the naming convention\nis entirely up to you.\n\n232\n00:12:04.390 --> 00:12:06.993\nI'm gonna call mine VM-dvSwitch.\n\n233\n00:12:06.993 --> 00:12:13.585\nAll right, then it's gonna ask me to pick\na version and this is kind of important.\n\n234\n00:12:13.585 --> 00:12:17.335\nWhen you create a distributed virtual\nswitch, it can span more than one host.\n\n235\n00:12:17.335 --> 00:12:20.175\nAnd those hosts don't have\nto be the same version.\n\n236\n00:12:20.175 --> 00:12:28.240\nI can have some ESXI 5 boxes, and some\nESX 55 boxes, and some ESXI 6.0 boxes.\n\n237\n00:12:28.240 --> 00:12:31.520\nAnd, if I want my DV switch\nto span across all of them,\n\n238\n00:12:31.520 --> 00:12:34.510\nI need to pick the lowest\ncommon denominator.\n\n239\n00:12:34.510 --> 00:12:39.650\nIf I have even one VMWare ESXI\n5.0 machine in there,\n\n240\n00:12:39.650 --> 00:12:41.790\nI need to make a version 5 switch.\n\n241\n00:12:42.830 --> 00:12:44.370\nThe problem is.\n\n242\n00:12:44.370 --> 00:12:45.380\nYou lose features.\n\n243\n00:12:45.380 --> 00:12:47.440\nThere's new features\nintroduced with each version.\n\n244\n00:12:47.440 --> 00:12:49.550\nAnd they kind of detail\nthem all right here.\n\n245\n00:12:49.550 --> 00:12:51.590\nIt's letting you know,\ndistributed switch version 5.\n\n246\n00:12:51.590 --> 00:12:53.000\nThat like the lowest you can do.\n\n247\n00:12:53.000 --> 00:12:55.470\nAnd it's compatible with\nESXI version 5 and later.\n\n248\n00:12:55.470 --> 00:12:59.800\nIt gives you network IO control,\nlike I mentioned earlier, and IOC.\n\n249\n00:12:59.800 --> 00:13:02.170\nNetFlow, port mirroring and so on.\n\n250\n00:13:02.170 --> 00:13:04.640\nBut as you look above,\nwhat if I went LACP?\n\n251\n00:13:04.640 --> 00:13:07.460\nWell, LACP was introduced in 5.1.\n\n252\n00:13:07.460 --> 00:13:12.020\nSo I would need to get\nrid of any 5.0 hosts, or\n\n253\n00:13:12.020 --> 00:13:13.970\nat least upgrade them\nto 5.1 to support that.\n\n254\n00:13:13.970 --> 00:13:18.370\nAnd when you go up to 5.5,\nyou'll see enhanced LACP support.\n\n255\n00:13:18.370 --> 00:13:19.150\nThey made it better.\n\n256\n00:13:19.150 --> 00:13:20.705\nRight?\nThey improved on some things.\n\n257\n00:13:20.705 --> 00:13:22.130\n5.1 was the first version to have.\n\n258\n00:13:22.130 --> 00:13:23.780\nThey always improve.\n\n259\n00:13:23.780 --> 00:13:25.790\nBut you also get traffic filtering and\nmarking,\n\n260\n00:13:25.790 --> 00:13:27.210\nwhich is part of quality of service.\n\n261\n00:13:28.420 --> 00:13:31.260\nThen, when you get to the top,\ndistributed switch version 6,\n\n262\n00:13:31.260 --> 00:13:34.120\nthis is where they\nintroduced NIOC version 3,\n\n263\n00:13:34.120 --> 00:13:39.280\neven more improvements, and IGMP and\nMLD snooping, which are really handy.\n\n264\n00:13:39.280 --> 00:13:42.960\nIf you're doing multicast to ipv4 or\njust ipv6 in general.\n\n265\n00:13:42.960 --> 00:13:45.500\nCuz ipv6 is very multicast heavy.\n\n266\n00:13:45.500 --> 00:13:47.950\nSo those are great features to have.\n\n267\n00:13:47.950 --> 00:13:51.140\nBut if you don't need them,\nif you don't care about that stuff then\n\n268\n00:13:51.140 --> 00:13:54.080\nyou can go all the way down with\nthe distributed switch version 5.\n\n269\n00:13:54.080 --> 00:13:56.810\nFortunately, it's super easy to upgrade.\n\n270\n00:13:56.810 --> 00:13:58.150\nYou can't downgrade.\n\n271\n00:13:58.150 --> 00:14:00.270\nSo you need to pick\nthe lowest version now, and\n\n272\n00:14:00.270 --> 00:14:03.160\njust know that it's easy to\nupgrade after the fact, right.\n\n273\n00:14:03.160 --> 00:14:06.180\nI'll show you an example, like, actually\nit's really almost not even worth showing,\n\n274\n00:14:06.180 --> 00:14:08.130\nbecause you just right click on it,\nchoose upgrade, switch.\n\n275\n00:14:08.130 --> 00:14:09.960\nIt's super easy, I'll show you.\n\n276\n00:14:09.960 --> 00:14:11.600\nBut when you create these,\n\n277\n00:14:11.600 --> 00:14:14.480\njust know that you're gonna lose\ncertain features the older you go.\n\n278\n00:14:14.480 --> 00:14:19.360\nMy environment is all vSphere 6,\nI've got all ESXi 6.0 boxes.\n\n279\n00:14:19.360 --> 00:14:23.710\nSo I'm gonna go ahead and choose that\nversion, but now I know if I add\n\n280\n00:14:23.710 --> 00:14:26.762\na 5.5 box for some reason,\nI can't stretch this switch to cover it.\n\n281\n00:14:26.762 --> 00:14:30.350\nAll right, so\nI'll go ahead and create that.\n\n282\n00:14:30.350 --> 00:14:34.830\nNext, it's going to ask about a few\nthings here, number of uplinks.\n\n283\n00:14:34.830 --> 00:14:36.510\nNow, what's an uplink?\n\n284\n00:14:36.510 --> 00:14:40.690\nWhen you create a virtual switch,\nif it's designed to be private, just for\n\n285\n00:14:40.690 --> 00:14:43.860\nvirtual machines, no access to the\ninternet, or your local area network, or\n\n286\n00:14:43.860 --> 00:14:46.790\nwhatever T\\then, it's not gonna\nhave any uplinks, zero uplinks.\n\n287\n00:14:46.790 --> 00:14:49.220\nIt's a private isolated switch.\n\n288\n00:14:49.220 --> 00:14:53.460\nBut typically, we want our switch to\nbe connected to our local area network,\n\n289\n00:14:53.460 --> 00:14:57.930\nour DMZ or our WAN or whatever,\nsome kind of network that we've got.\n\n290\n00:14:57.930 --> 00:15:00.620\nAnd so this is gonna be the number\nof uplinks that we have.\n\n291\n00:15:00.620 --> 00:15:04.080\nAnd normally with a vSwitch\nthis would mean how many\n\n292\n00:15:04.080 --> 00:15:07.000\nphysical adapters do I have in that host.\n\n293\n00:15:08.010 --> 00:15:10.630\nBut here, it kinda means the same.\n\n294\n00:15:10.630 --> 00:15:14.470\nIt means how many physical adapters\ndo I have in each host individually.\n\n295\n00:15:14.470 --> 00:15:16.920\nI might have five hosts, and\n\n296\n00:15:16.920 --> 00:15:22.100\nif each host only has one network adapter,\nthen I can drop this down to 1.\n\n297\n00:15:22.100 --> 00:15:24.730\nI've got 5 hosts,\nI'll end up with 5 uplinks.\n\n298\n00:15:24.730 --> 00:15:26.440\nOne per host.\n\n299\n00:15:26.440 --> 00:15:28.580\nIf each server has 2 adapters,\n\n300\n00:15:28.580 --> 00:15:31.470\nit's pretty common these days,\nthen I would set this to 2.\n\n301\n00:15:31.470 --> 00:15:34.340\nI'm going to have five hosts for\na total of ten adapters, but\n\n302\n00:15:34.340 --> 00:15:37.340\nit's 2 uplinks per host, per server.\n\n303\n00:15:37.340 --> 00:15:37.900\nAll right.\n\n304\n00:15:37.900 --> 00:15:38.790\nThe default is 4.\n\n305\n00:15:38.790 --> 00:15:40.840\nAnd the reality is that\nyou could leave it at 4.\n\n306\n00:15:40.840 --> 00:15:42.160\nYou don't have to use all 4.\n\n307\n00:15:42.160 --> 00:15:44.282\nI can just attach 1 or 2 adapters.\n\n308\n00:15:44.282 --> 00:15:45.455\nI rarely change this.\n\n309\n00:15:45.455 --> 00:15:47.400\nAnd you could always change\nit after the fact too.\n\n310\n00:15:47.400 --> 00:15:48.583\nYou could always add more.\n\n311\n00:15:48.583 --> 00:15:50.563\nSo it's hard to go wrong.\n\n312\n00:15:50.563 --> 00:15:54.204\nYou could pick a number too low, I guess\nthat would be the one negative, but again,\n\n313\n00:15:54.204 --> 00:15:56.610\nyou could just go and\nedit that and fix it, no big deal.\n\n314\n00:15:57.780 --> 00:15:59.870\nThen network IO control and IOC.\n\n315\n00:15:59.870 --> 00:16:02.400\nAnd IOC is enabled by default and\n\n316\n00:16:02.400 --> 00:16:06.410\nI mentioned it earlier, NIOC is a way\nthat we can like reserve bandwidth or\n\n317\n00:16:06.410 --> 00:16:09.130\nwe can put limits on the bandwidth\nthe service can use.\n\n318\n00:16:09.130 --> 00:16:11.680\nIt is turned on by default.\n\n319\n00:16:11.680 --> 00:16:15.190\nAnd by default what it's doing is\nprioritizing virtual machine traffic.\n\n320\n00:16:15.190 --> 00:16:19.720\nSo virtual machine traffic will\nget priority over VMotion,\n\n321\n00:16:19.720 --> 00:16:25.510\nVSAN, MFS, any of the other protocols\nthat it's using for disc access.\n\n322\n00:16:25.510 --> 00:16:27.370\nVirtual machines get priority.\n\n323\n00:16:27.370 --> 00:16:28.620\nIf that's what you want, that's great.\n\n324\n00:16:28.620 --> 00:16:29.470\nLeave it at the default.\n\n325\n00:16:29.470 --> 00:16:31.690\nIf that's not what you want,\nyou'll wanna go and edit it.\n\n326\n00:16:31.690 --> 00:16:33.550\nWe'll address an IOC later in the show.\n\n327\n00:16:35.210 --> 00:16:36.600\nThen we've got the port group.\n\n328\n00:16:36.600 --> 00:16:41.320\nIn order for a switch to work, it doesn't\nhave to have necessarily uplinks.\n\n329\n00:16:41.320 --> 00:16:44.190\nWe need uplinks if we want to\nconnect to external networks.\n\n330\n00:16:44.190 --> 00:16:47.500\nBut we can set that to zero if we want,\nand not connect to any external networks.\n\n331\n00:16:47.500 --> 00:16:50.320\nBut we have to have at\nleast one port group.\n\n332\n00:16:50.320 --> 00:16:53.490\nThe uplinks are physical\nports that face the world.\n\n333\n00:16:53.490 --> 00:16:57.920\nThe port groups are virtual links that\nface our virtual machines and a switch\n\n334\n00:16:57.920 --> 00:17:02.210\nwith no ports is not particularly useful,\nso we've got to create port groups.\n\n335\n00:17:02.210 --> 00:17:04.380\nNow you might only have one port group,\nand\n\n336\n00:17:04.380 --> 00:17:07.380\nall of your virtual machines get\nthrown into that one port group.\n\n337\n00:17:07.380 --> 00:17:10.510\nOr you might wanna separate that out,\nand you can do that.\n\n338\n00:17:10.510 --> 00:17:12.400\nIt wants to create\na default port group for\n\n339\n00:17:12.400 --> 00:17:14.580\nme and\nit's gonna give it a port group name.\n\n340\n00:17:14.580 --> 00:17:18.140\nAnd so I might call this my VM-LAN.\n\n341\n00:17:18.140 --> 00:17:22.360\nMaybe I've got a local\narea network in a DMZ or\n\n342\n00:17:22.360 --> 00:17:25.250\nmaybe I've got sales and\nmarketing and so on.\n\n343\n00:17:25.250 --> 00:17:28.120\nI might have different\ndivisions inside of my company.\n\n344\n00:17:28.120 --> 00:17:30.700\nAnd so I create various networks for that.\n\n345\n00:17:30.700 --> 00:17:33.780\nWell, you could do this by\nhaving separate switches.\n\n346\n00:17:33.780 --> 00:17:37.320\nI might have a sales switch, and\na marketing switch and so on,\n\n347\n00:17:37.320 --> 00:17:41.290\ncreating one distributive virtual switch\nfor each of these different divisions.\n\n348\n00:17:41.290 --> 00:17:45.000\nBut the easiest way to handle it,\nreally the best way, is with VLANs.\n\n349\n00:17:45.000 --> 00:17:47.590\nVLANs are virtual local area networks.\n\n350\n00:17:47.590 --> 00:17:50.310\nWe can assign a VLAN ID to this traffic,\nand\n\n351\n00:17:50.310 --> 00:17:54.060\nnow I can have more than one port\ngroup on the same DV switch, and\n\n352\n00:17:54.060 --> 00:17:56.530\neach one is a different VLAN number so\nthey're all isolated.\n\n353\n00:17:56.530 --> 00:17:59.670\nI'm creating virtual switches\ninside of a virtual switch,\n\n354\n00:17:59.670 --> 00:18:02.950\nkind of like nested virtualization\nexcept this works really well.\n\n355\n00:18:02.950 --> 00:18:07.264\nWell it doesn't show any of that\nstuff here so what I'm gonna do is.\n\n356\n00:18:07.264 --> 00:18:11.711\nI'll just let's just create one I'll\nsay this is like my sales department.\n\n357\n00:18:11.711 --> 00:18:15.275\nSo I'll call this VM dash sales and\nthis is my port group so\n\n358\n00:18:15.275 --> 00:18:19.506\nI could have like a pg or whatever to\nthis to try and give me some kind of\n\n359\n00:18:19.506 --> 00:18:24.150\nconsistent naming convention but\nI'll just leave it as VM sales for now.\n\n360\n00:18:25.200 --> 00:18:27.370\nIt's not giving me options\nto configure VLANs or\n\n361\n00:18:27.370 --> 00:18:29.530\nanything I'll have to come back and\ndo that after the fact.\n\n362\n00:18:31.080 --> 00:18:36.340\nAll right, then it gives me my summary and\nit's got suggested next actions.\n\n363\n00:18:36.340 --> 00:18:38.110\nCreate a New Distributed Port Group.\n\n364\n00:18:38.110 --> 00:18:40.930\nI might want to create more\nport groups based on my needs.\n\n365\n00:18:40.930 --> 00:18:41.830\nAdd and Manage Hosts.\n\n366\n00:18:41.830 --> 00:18:43.390\nThat's the really important one.\n\n367\n00:18:43.390 --> 00:18:45.440\nI'm about to create\na distributed virtual switch.\n\n368\n00:18:45.440 --> 00:18:48.110\nAnd guess what hosts are attached to it?\n\n369\n00:18:48.110 --> 00:18:48.840\nNone.\n\n370\n00:18:48.840 --> 00:18:50.380\nSo the switch is dead in the water.\n\n371\n00:18:50.380 --> 00:18:53.320\nThe switch actually\nexists inside of vCenter.\n\n372\n00:18:53.320 --> 00:18:56.320\nIt's not tied to one host,\nit's tied to a group of hosts.\n\n373\n00:18:56.320 --> 00:19:00.520\nAnd so the switch exists in vCenter and\nthen we attach the hosts to it.\n\n374\n00:19:00.520 --> 00:19:01.718\nSo there it is, it just showed up.\n\n375\n00:19:01.718 --> 00:19:04.575\nThere's my VM-dvSwitch, and\n\n376\n00:19:04.575 --> 00:19:09.635\nif I expand it out, I can see the uplinks,\nand there's VM-Sales, right?\n\n377\n00:19:09.635 --> 00:19:11.615\nThere's that first port\ngroup that I created.\n\n378\n00:19:12.725 --> 00:19:15.595\nAnd I can start to create\nmore port groups as I need\n\n379\n00:19:15.595 --> 00:19:17.845\nto reflect whatever my environment is.\n\n380\n00:19:17.845 --> 00:19:21.985\nSo I can come down to the dvSwitch itself,\nand we can right click on that and\n\n381\n00:19:21.985 --> 00:19:24.920\nyou'll see where we can do\na distributed port group.\n\n382\n00:19:24.920 --> 00:19:26.970\nAnd I can create another\ndistributed port group.\n\n383\n00:19:26.970 --> 00:19:28.450\nSo I might create another one.\n\n384\n00:19:28.450 --> 00:19:31.190\nI did sales, so\nmaybe I wanna create one for marketing.\n\n385\n00:19:31.190 --> 00:19:32.830\nSo I'll do VM dash marketing.\n\n386\n00:19:34.590 --> 00:19:36.510\nAnd I'll hit next.\n\n387\n00:19:36.510 --> 00:19:39.680\nAnd on this one, it gives me more options.\n\n388\n00:19:39.680 --> 00:19:42.390\nWhen it created it in the wizard\nit created in default 1, and\n\n389\n00:19:42.390 --> 00:19:44.090\nit just set it to all the defaults.\n\n390\n00:19:44.090 --> 00:19:46.500\nNow I can choose to how\nI wanna handle this.\n\n391\n00:19:46.500 --> 00:19:48.160\nHow do I want it to bind to ports?\n\n392\n00:19:48.160 --> 00:19:49.160\nRight now I've got it static.\n\n393\n00:19:49.160 --> 00:19:51.290\nIn other words,\nwhen I create a virtual machine,\n\n394\n00:19:51.290 --> 00:19:56.110\nI have to choose to plug the virtual\nmachine into this port group, it's static.\n\n395\n00:19:56.110 --> 00:19:57.490\nBut you can set it to dynamic,\n\n396\n00:19:57.490 --> 00:20:01.820\nand with dynamic now what would happen\nis a virtual machine would plug in and\n\n397\n00:20:01.820 --> 00:20:04.840\nI could set a policy which says\nautomatically throw it onto this switch.\n\n398\n00:20:04.840 --> 00:20:08.790\nBut you'll see it's being replaced and\nthey've got ephemeral also which is\n\n399\n00:20:08.790 --> 00:20:13.240\nno binding, in other words when you plug\nthings in they just grab what's first\n\n400\n00:20:13.240 --> 00:20:17.010\navailable it's not necessarily\nwhat we want static is the best.\n\n401\n00:20:17.010 --> 00:20:21.160\nAnd they even warned me about that saaying\nwith like dynamic it says that it is\n\n402\n00:20:21.160 --> 00:20:24.780\nstrongly recommended to choose the static\nport binding type for better performance.\n\n403\n00:20:24.780 --> 00:20:26.570\nYour devices know exactly\nwhat to plug in to.\n\n404\n00:20:28.590 --> 00:20:31.060\nSome of the other things,\nthe number of ports in the port group.\n\n405\n00:20:31.060 --> 00:20:33.650\nNow the port group defaults to eight and\njust like the uplinks,\n\n406\n00:20:33.650 --> 00:20:35.590\nwe can increase this or decrease this.\n\n407\n00:20:35.590 --> 00:20:40.100\nBut since there's only eight ports,\nthat means I can plug in eight VM nics,\n\n408\n00:20:40.100 --> 00:20:43.010\nVM network cards into this network port,\ninto this port group.\n\n409\n00:20:43.010 --> 00:20:46.510\nBut if I have nine or\nten, am I out of luck?\n\n410\n00:20:46.510 --> 00:20:49.447\nWell by the defaults, yes, but\nI can always just come and increase that.\n\n411\n00:20:49.447 --> 00:20:51.300\nThink of this as like creating a switch.\n\n412\n00:20:51.300 --> 00:20:53.370\nI might want a 24 port switch.\n\n413\n00:20:53.370 --> 00:20:54.100\nI can create that.\n\n414\n00:20:54.100 --> 00:20:55.750\nOr 48 port switch, or whatever.\n\n415\n00:20:55.750 --> 00:20:57.260\nI'm defining how many\nports I want it to be in.\n\n416\n00:20:59.380 --> 00:21:01.010\nThen we've got a network resource pool.\n\n417\n00:21:01.010 --> 00:21:03.090\nThat's actually a part of NIOC.\n\n418\n00:21:03.090 --> 00:21:07.330\nSo with NIOC we create these\nreservations of bandwidth.\n\n419\n00:21:07.330 --> 00:21:10.800\nAnd your network resource pool is what\ndefines the reservations attached to you.\n\n420\n00:21:10.800 --> 00:21:13.530\nI'm gonna leave that be and\nwe'll talk about it with NIFC.\n\n421\n00:21:13.530 --> 00:21:16.130\nHere's the one I really wanted\nto highlight though, VLANs.\n\n422\n00:21:16.130 --> 00:21:18.430\nThese are virtual local area networks.\n\n423\n00:21:18.430 --> 00:21:23.140\nI've already got a distributed port\ngroup on here called vm-sales, and\n\n424\n00:21:23.140 --> 00:21:24.840\nthat's gonna be my sales people.\n\n425\n00:21:24.840 --> 00:21:26.620\nNow I've got VM-marketing.\n\n426\n00:21:26.620 --> 00:21:29.890\nThey're both on the same switch, they're\nboth plugged into the same up links,\n\n427\n00:21:29.890 --> 00:21:32.300\nhow do we tell the traffic apart, right?\n\n428\n00:21:32.300 --> 00:21:33.680\nWe do it with a VLAN.\n\n429\n00:21:33.680 --> 00:21:37.620\nA VLAN is a virtual local area network and\nwe can assign it a number.\n\n430\n00:21:37.620 --> 00:21:40.606\nSo I can choose VLAN and\nI can give it a VLAN ID.\n\n431\n00:21:40.606 --> 00:21:45.950\nVLAN IDs are 1 through 4095 and\nI just need to pick a value in there.\n\n432\n00:21:45.950 --> 00:21:49.320\nNow there's some that are kind of\nspecial you need to leave alone.\n\n433\n00:21:49.320 --> 00:21:51.920\nVLAN 1 is typically the default VLAN.\n\n434\n00:21:51.920 --> 00:21:56.283\nSo the other port group I\nhave is probably on VLAN 1.\n\n435\n00:21:56.283 --> 00:21:59.747\nIf I make this one VLAN 1 also,\nthen they're basically the same, and\n\n436\n00:21:59.747 --> 00:22:00.876\nI lose my separation.\n\n437\n00:22:00.876 --> 00:22:06.690\nVLANs 1000 through 1005 a reserved\non most Cisco switches.\n\n438\n00:22:06.690 --> 00:22:10.180\nSo if you are plugged into Cisco devices,\nyou don't wanna use 1000 trough 1005.\n\n439\n00:22:10.180 --> 00:22:16.160\nAnd then the 4094 number, that's\nactually a newer numbering scheme for\n\n440\n00:22:16.160 --> 00:22:21.871\nVLANs so some of your older switches\nmight not support numbers that high.\n\n441\n00:22:21.871 --> 00:22:25.496\nSo you gotta double check your switches to\nsee what they support cuz your switch is\n\n442\n00:22:25.496 --> 00:22:27.290\nwhat's actually creating the VLAN.\n\n443\n00:22:27.290 --> 00:22:29.780\nHere we're just attaching\nour virtual machines to it,\n\n444\n00:22:29.780 --> 00:22:31.090\nyour switch is what creates it.\n\n445\n00:22:31.090 --> 00:22:34.770\nSo, read your switch documentation, for\nwhatever vendor you use, if it's HP or\n\n446\n00:22:34.770 --> 00:22:36.800\nCisco, Juniper, whoever.\n\n447\n00:22:36.800 --> 00:22:38.690\nRead their documentation,\nsee what they support, and\n\n448\n00:22:38.690 --> 00:22:40.260\npick numbers that are appropriate.\n\n449\n00:22:40.260 --> 00:22:43.200\nIf you stay low with your numbers,\nthen you're usually going to be safe.\n\n450\n00:22:43.200 --> 00:22:46.925\nSo for example my marketing\ndepartment I might make VLAN 20,\n\n451\n00:22:46.925 --> 00:22:49.327\nsales I might make VLAN 10, and so on.\n\n452\n00:22:49.327 --> 00:22:52.679\nI know I'll be safe with\nnumbers that are low like that.\n\n453\n00:22:52.679 --> 00:22:57.280\nAll right, I'm going to go ahead and\nhit next and then finish that up.\n\n454\n00:22:57.280 --> 00:23:00.000\nAnd now,\nI'll have two of these Port Groups.\n\n455\n00:23:00.000 --> 00:23:02.729\nI've got one for\nmarketing and one for sales.\n\n456\n00:23:03.970 --> 00:23:07.440\nAnd on sales, it's kind of set to its\ndefault, we didn't really mess with it.\n\n457\n00:23:07.440 --> 00:23:11.345\nSo if I look at sales' settings over here,\nif I go to manage and settings,\n\n458\n00:23:11.345 --> 00:23:18.360\nunder properties, you'll see VLAN\nisn't really set on this one.\n\n459\n00:23:18.360 --> 00:23:21.510\nSo it's not defined, but\nif I come up and look at marketing, and\n\n460\n00:23:21.510 --> 00:23:23.190\nI take a look at VLAN.\n\n461\n00:23:23.190 --> 00:23:26.010\nYou know, actually, sorry,\nthat's the override policy,\n\n462\n00:23:26.010 --> 00:23:27.780\nthat's not the right setting.\n\n463\n00:23:27.780 --> 00:23:32.070\nBut they're basically defined and\nset to be tied a certain way, and\n\n464\n00:23:32.070 --> 00:23:36.900\nif I edit this one that we just\ncreated a moment ago, here we go.\n\n465\n00:23:36.900 --> 00:23:39.580\nI can jump down to VLAN and\nsee that VLAN is set.\n\n466\n00:23:39.580 --> 00:23:42.347\nEven though the policy says disabled,\nthe VLAN is set.\n\n467\n00:23:42.347 --> 00:23:45.022\nLet me go take a look at the sales one.\n\n468\n00:23:45.022 --> 00:23:47.217\nAnd we'll edit this guy.\n\n469\n00:23:47.217 --> 00:23:49.857\nAnd we'll jump down to its VLAN.\n\n470\n00:23:49.857 --> 00:23:53.320\nAnd because it was the default,\nit's set to none.\n\n471\n00:23:53.320 --> 00:23:54.860\nAnd so I just want to change that.\n\n472\n00:23:54.860 --> 00:23:56.254\nNow, there are two\ndifferent types of VLANs,\n\n473\n00:23:56.254 --> 00:23:58.490\nlet me mention these, I don't know if\nthey'll show up on the exam or not.\n\n474\n00:23:58.490 --> 00:23:59.930\nVLAN trunking.\n\n475\n00:24:01.140 --> 00:24:05.730\nIf my virtual machine is some\nkind of firewall, right.\n\n476\n00:24:05.730 --> 00:24:08.810\nMaybe I'm running CISCOs ASAV,\ntheir virtual firewall.\n\n477\n00:24:08.810 --> 00:24:11.170\nCISCOs ASA understands VLANs.\n\n478\n00:24:11.170 --> 00:24:13.910\nAnd so we can see more than one\nnetwork on the same adapter.\n\n479\n00:24:13.910 --> 00:24:17.080\nAnd as a result, I could have\na firewall with one interface.\n\n480\n00:24:17.080 --> 00:24:20.980\nIt could have ins and outs and\nall of that all on one network link.\n\n481\n00:24:20.980 --> 00:24:25.100\nBut it would need to see all those VLANS\nand you do that by doing VLAN trunking.\n\n482\n00:24:25.100 --> 00:24:26.420\nThat's not very common.\n\n483\n00:24:26.420 --> 00:24:29.810\nIt usually, like with ASAV you can\njust add more interfaces to it and\n\n484\n00:24:29.810 --> 00:24:31.330\nthat's the way to handle it.\n\n485\n00:24:31.330 --> 00:24:34.970\nBut VLAN trunking is possible, so\nit's a pretty rarely used option.\n\n486\n00:24:34.970 --> 00:24:38.540\nThere is another option called Private\nVLAN though, and this is a neat one.\n\n487\n00:24:38.540 --> 00:24:43.530\nNormally, if I have, let's say I have five\nhosts and I put them on a port group.\n\n488\n00:24:43.530 --> 00:24:44.760\nThey're going to be\nable to see each other.\n\n489\n00:24:44.760 --> 00:24:46.110\nThey're plugged into the same port group.\n\n490\n00:24:46.110 --> 00:24:49.160\nIt's like a virtual switch,\nthey see each other.\n\n491\n00:24:49.160 --> 00:24:50.660\nWell, what if I don't want that?\n\n492\n00:24:50.660 --> 00:24:52.830\nWhat if they're different customers?\n\n493\n00:24:52.830 --> 00:24:54.050\nOr what if it's a DMZ, right?\n\n494\n00:24:54.050 --> 00:24:56.180\nAnd I've got five web servers.\n\n495\n00:24:56.180 --> 00:24:59.020\nIf somebody hacks into one web\nserver they can then leapfrog and\n\n496\n00:24:59.020 --> 00:25:00.550\nbreak into all the others.\n\n497\n00:25:00.550 --> 00:25:03.190\nWhat if I wanna keep each\nweb server independent?\n\n498\n00:25:03.190 --> 00:25:06.160\nWell, the old way to do it\nwas to set up five VLANs,\n\n499\n00:25:06.160 --> 00:25:09.010\neach web server gets its own VLAN,\nbut that's a lot of work, right.\n\n500\n00:25:09.010 --> 00:25:10.450\nA lot of resources.\n\n501\n00:25:10.450 --> 00:25:15.000\nWith a Private VLAN, you could put as\nmany hosts in the VLAN as you want.\n\n502\n00:25:15.000 --> 00:25:18.300\nAnd since its flag is private,\nthe hosts can't see each other.\n\n503\n00:25:18.300 --> 00:25:19.700\nThey can see the uplink.\n\n504\n00:25:19.700 --> 00:25:22.340\nThey can get out to the network,\nbut they can't see each other.\n\n505\n00:25:22.340 --> 00:25:24.670\nAnd that stops leapfrog attacks.\n\n506\n00:25:24.670 --> 00:25:27.720\nIf somebody breaks into one,\nthey can't hop into the others.\n\n507\n00:25:27.720 --> 00:25:29.830\nThat's really useful in DMZs.\n\n508\n00:25:29.830 --> 00:25:32.390\nIt's really annoying in\nregular local area networks.\n\n509\n00:25:32.390 --> 00:25:35.581\nSo we don't normally use it there, but in\na DMZ environment you definitely use it.\n\n510\n00:25:35.581 --> 00:25:38.240\nAll right, but in this case,\nI'm gonna choose just a regular VLAN,\n\n511\n00:25:38.240 --> 00:25:39.950\nand this is my sales department.\n\n512\n00:25:39.950 --> 00:25:43.720\nI made marketing 20, so\nI'll make this one 10.\n\n513\n00:25:43.720 --> 00:25:47.080\nSo sales would be VLAN 10, and\nmarketing would be VLAN 20.\n\n514\n00:25:47.080 --> 00:25:50.942\nSo now, they're set and\ndefined on these different VLANs.\n\n515\n00:25:50.942 --> 00:25:54.910\nAll right, now when I take\na look at these switches or\n\n516\n00:25:54.910 --> 00:25:57.670\nthese port groups there's\nnot too much to see, right?\n\n517\n00:25:57.670 --> 00:26:01.741\nWhen I look at VM sales I can see\nnow that it is on VLAN ID 10.\n\n518\n00:26:01.741 --> 00:26:06.143\nIts port binding is static and\nit's got no hosts and no virtual machines,\n\n519\n00:26:06.143 --> 00:26:08.380\nwhich means it doesn't work.\n\n520\n00:26:08.380 --> 00:26:10.588\nAnd I'll see the same thing for marketing.\n\n521\n00:26:10.588 --> 00:26:15.860\nIt's on VLAN 20, it's got a static\nbinding, no hosts, no virtual machines.\n\n522\n00:26:15.860 --> 00:26:18.750\nI can't even plug in a virtual machine\nright now cuz I have to have at least one\n\n523\n00:26:18.750 --> 00:26:20.190\nhost attached.\n\n524\n00:26:20.190 --> 00:26:22.670\nSo I'm gonna go back up here\nto my DV switch, right?\n\n525\n00:26:22.670 --> 00:26:27.540\nSo here's my virtual machine DV switch and\nI'm gonna go and right click on it and\n\n526\n00:26:27.540 --> 00:26:29.460\njust go to add and manage hosts.\n\n527\n00:26:29.460 --> 00:26:31.620\nWe need to attach hosts to it.\n\n528\n00:26:31.620 --> 00:26:33.610\nAnd so\nyou'll see here where we can add hosts.\n\n529\n00:26:33.610 --> 00:26:35.830\nWe can remove hosts or\nwe can manage the networking.\n\n530\n00:26:35.830 --> 00:26:37.930\nThis is where we can\nchange the configuration.\n\n531\n00:26:37.930 --> 00:26:40.630\nI wanna add hosts, all right.\n\n532\n00:26:40.630 --> 00:26:43.660\nAnd then when I move forward,\nit's gonna ask who I want to attach.\n\n533\n00:26:43.660 --> 00:26:47.850\nAnd I'll just choose to add\nin my two ES XBoxes, right?\n\n534\n00:26:47.850 --> 00:26:51.900\nSo here's the two boxes that I wanna\nstretch this virtual switch across.\n\n535\n00:26:51.900 --> 00:26:55.360\nAnd when I say okay to that,\nit's gonna add them here into the list.\n\n536\n00:26:55.360 --> 00:26:56.540\nAnd I'll hit next.\n\n537\n00:26:56.540 --> 00:27:00.098\nAnd now, it's gonna ask me what network\nadapters I wanna make a part of\n\n538\n00:27:00.098 --> 00:27:01.194\nthe virtual switch?\n\n539\n00:27:01.194 --> 00:27:04.200\nAnd it's given me kind of\na little preview down here.\n\n540\n00:27:04.200 --> 00:27:06.300\nHere's the distributive virtual switch.\n\n541\n00:27:06.300 --> 00:27:08.260\nIt's gonna have uplinks attached to it.\n\n542\n00:27:08.260 --> 00:27:10.150\nAnd so it's showing an uplink here.\n\n543\n00:27:10.150 --> 00:27:13.390\nAnd it's going to have these\nport groups attached to it.\n\n544\n00:27:13.390 --> 00:27:18.280\nNow, I already have a port group\ncalled Virtual machines, all right.\n\n545\n00:27:18.280 --> 00:27:21.760\nSo, it's wanting to bring\nthis port group in and\n\n546\n00:27:21.760 --> 00:27:24.430\nI've got a kernel port group for\nmanagement.\n\n547\n00:27:24.430 --> 00:27:26.320\nWell, I said earlier in the show,\nI wanna leave management alone.\n\n548\n00:27:26.320 --> 00:27:28.788\nI don't want to bring management\ninto the DV switch, right?\n\n549\n00:27:28.788 --> 00:27:31.956\nCuz if something goes wrong with the DV\nswitch I might lose access to management.\n\n550\n00:27:31.956 --> 00:27:34.792\nIn reality you can move it in,\nit will do just fine, but\n\n551\n00:27:34.792 --> 00:27:37.640\nI wanna keep mine separate so\nI don't lock myself out.\n\n552\n00:27:37.640 --> 00:27:40.462\nSo, I need to pick what I'm moving over,\nand it's offering for\n\n553\n00:27:40.462 --> 00:27:43.546\nme to manage my physical adapters,\nmanage my VM kernel adapters, and\n\n554\n00:27:43.546 --> 00:27:46.620\nI'm going to uncheck that cuzI\ndon't wanna bring them in.\n\n555\n00:27:46.620 --> 00:27:48.850\nI can migrate virtual machine networking.\n\n556\n00:27:48.850 --> 00:27:54.450\nIn other words, I can take this VM\nport group that already exists,\n\n557\n00:27:54.450 --> 00:27:58.790\nand I can convert it Into a distributed\nvirtual switch port group.\n\n558\n00:27:58.790 --> 00:27:59.430\nIt's not gonna convert.\n\n559\n00:27:59.430 --> 00:28:01.280\nIt's gonna create a new one,\nand then move the VMs over, and\n\n560\n00:28:01.280 --> 00:28:02.610\nthen delete the old one is what it does.\n\n561\n00:28:02.610 --> 00:28:04.640\nBut it's not as elegant as it sounds.\n\n562\n00:28:04.640 --> 00:28:06.060\nBut it does work.\n\n563\n00:28:06.060 --> 00:28:07.860\nAnd then I can manage Advanced Settings.\n\n564\n00:28:07.860 --> 00:28:09.660\nI just want to manage\nmy physical adapters.\n\n565\n00:28:09.660 --> 00:28:11.420\nI just wanna get this thing turned on.\n\n566\n00:28:11.420 --> 00:28:15.260\nI've already got the port groups\nmade that I need, all right.\n\n567\n00:28:15.260 --> 00:28:17.120\nSo on the next screen,\nthis is the important screen.\n\n568\n00:28:17.120 --> 00:28:19.675\nAnd this the screen that can be\na little challenging sometimes,\n\n569\n00:28:19.675 --> 00:28:21.350\ncuz it's not quite intuitive.\n\n570\n00:28:21.350 --> 00:28:24.870\nWhat it's doing,\nis it's showing my different hosts and\n\n571\n00:28:24.870 --> 00:28:27.010\nwhat physical adapters they have.\n\n572\n00:28:27.010 --> 00:28:29.662\nNotice I've got a VM NIC0\nin both of my servers.\n\n573\n00:28:29.662 --> 00:28:31.448\nAnd they're both attached to V switch 0.\n\n574\n00:28:31.448 --> 00:28:33.200\nThat's my management network, right?\n\n575\n00:28:33.200 --> 00:28:35.370\nMy management interface\nis tied to that V switch,\n\n576\n00:28:35.370 --> 00:28:39.070\nthe default V switch created\nwhen I installed ESXI.\n\n577\n00:28:39.070 --> 00:28:41.460\nSo was that virtual machine network, and\n\n578\n00:28:41.460 --> 00:28:44.580\nwhere this gets confusing\nis I can't see that here.\n\n579\n00:28:44.580 --> 00:28:48.080\nI can't see what's actually using that,\nI just it attached to the virtual switch.\n\n580\n00:28:48.080 --> 00:28:51.600\nThat's why it's so important to give your\nvirtual switches names you can recognize.\n\n581\n00:28:51.600 --> 00:28:52.290\nV switch zero?\n\n582\n00:28:52.290 --> 00:28:53.760\nThat doesn't tell me anything.\n\n583\n00:28:53.760 --> 00:28:56.390\nWell, I know it's the default,\nso I can kind of infer.\n\n584\n00:28:56.390 --> 00:29:00.080\nBut I don't really know what\nport groups are attached to it.\n\n585\n00:29:00.080 --> 00:29:05.840\nBut I wanna do is I wanna take these other\nNICs and attach them to my DV switch.\n\n586\n00:29:05.840 --> 00:29:10.010\nI can only attach up to\nlimit of uplinks we defined.\n\n587\n00:29:10.010 --> 00:29:11.710\nWe stuck with the default, the four.\n\n588\n00:29:11.710 --> 00:29:13.690\nI've only got two network adapters anyway.\n\n589\n00:29:13.690 --> 00:29:15.260\nYou really just need one.\n\n590\n00:29:15.260 --> 00:29:19.990\nIf I take VM NIC1 for example,\nand I assign that uplink,\n\n591\n00:29:19.990 --> 00:29:23.650\nI can assign it to uplink one through\nfour or I can leave it as auto,\n\n592\n00:29:23.650 --> 00:29:27.050\nit'll just figure out where to fill it\nwhich is usually gonna be uplink one.\n\n593\n00:29:27.050 --> 00:29:31.650\nAnd so I can do that and now it's just\nset to be automatically in there.\n\n594\n00:29:31.650 --> 00:29:35.070\nIf I'm trying to keep my physical\nadapters labeled on my servers though,\n\n595\n00:29:35.070 --> 00:29:38.690\nif I always wanna know the port\nfurthest to the left is port one,\n\n596\n00:29:38.690 --> 00:29:40.530\nauto assign gets a little confusing.\n\n597\n00:29:40.530 --> 00:29:45.000\nAnd so in that scenario, what I might\nwant to do is take that NIC And\n\n598\n00:29:45.000 --> 00:29:46.410\nmanually assign it to Uplink 1.\n\n599\n00:29:46.410 --> 00:29:50.410\nThat way I always know when I'm monitoring\nbandwidth, when I'm troubleshooting,\n\n600\n00:29:50.410 --> 00:29:53.150\nif port one goes down,\nit's the port furthest to the left, or\n\n601\n00:29:53.150 --> 00:29:55.400\nhowever that is on my physical server.\n\n602\n00:29:55.400 --> 00:30:00.740\nI'm gonna do the same thing down here\non my other server, on exshost02 so\n\n603\n00:30:00.740 --> 00:30:06.970\nthat they both now have one NIC attached\nto uplink 1 of the virtual switch.\n\n604\n00:30:06.970 --> 00:30:08.140\nTechnically, that's all I need.\n\n605\n00:30:08.140 --> 00:30:11.130\nI now have a distributed virtual\nswitch that spans both hosts and\n\n606\n00:30:11.130 --> 00:30:13.770\nthat each have one physical\nadapter that's in it.\n\n607\n00:30:13.770 --> 00:30:16.600\nIf one host goes down, the other\none's still up, it's still attached,\n\n608\n00:30:16.600 --> 00:30:18.890\nstill working, and we're in business.\n\n609\n00:30:18.890 --> 00:30:23.670\nIf I stop right here, I've created\na standard distributed virtual switch.\n\n610\n00:30:23.670 --> 00:30:25.360\nBut a lot of times we want redundancy.\n\n611\n00:30:25.360 --> 00:30:29.030\nWe want failover, we want teaming,\nlink aggregation, all that good stuff.\n\n612\n00:30:29.030 --> 00:30:30.770\nAnd for that you need two adapters.\n\n613\n00:30:30.770 --> 00:30:33.010\nSo I'm gonna take the other adapter,\nvmnic2 and\n\n614\n00:30:33.010 --> 00:30:38.000\nI'm gonna assign that one to Uplink 2,\nand we'll get that one attached.\n\n615\n00:30:38.000 --> 00:30:40.840\nWe'll do the same thing\non the other server.\n\n616\n00:30:40.840 --> 00:30:46.070\nAnd so now I've got one NIC\nthat is attached to vswitch0.\n\n617\n00:30:46.070 --> 00:30:47.030\nThat's my management NIC.\n\n618\n00:30:47.030 --> 00:30:47.700\nI'm leaving that be.\n\n619\n00:30:47.700 --> 00:30:50.380\nAnd then I've got two more NICs\n\n620\n00:30:50.380 --> 00:30:52.790\nthat are assigned to\nthe distributor virtual switch.\n\n621\n00:30:52.790 --> 00:30:54.230\nAnd it's the same on both hosts.\n\n622\n00:30:54.230 --> 00:30:59.220\nSo I actually have four physical adapters\nin this distributed virtual switch.\n\n623\n00:30:59.220 --> 00:31:00.910\nTwo on one host, two on the other.\n\n624\n00:31:00.910 --> 00:31:02.700\nYou see where we start\nto get this redundancy,\n\n625\n00:31:02.700 --> 00:31:06.830\nreliability, rapid failover cuz you've\ngot this maximum amount of connectors.\n\n626\n00:31:08.940 --> 00:31:09.910\nAll right, I can move forward on that.\n\n627\n00:31:09.910 --> 00:31:10.730\nThat's really all we need.\n\n628\n00:31:10.730 --> 00:31:14.370\nWe do get this one important screen\nwhich is where it measures impact.\n\n629\n00:31:14.370 --> 00:31:15.940\nWhat does it mean by impact?\n\n630\n00:31:15.940 --> 00:31:21.365\nWell, if you are using fiber channel\nover ethernet, or if you are using\n\n631\n00:31:21.365 --> 00:31:26.260\niSCSI, your storage might be connected\nvia some of these network adapters.\n\n632\n00:31:26.260 --> 00:31:28.860\nAnd if we start messing around with\nthe network adapters, what could happen?\n\n633\n00:31:28.860 --> 00:31:30.140\nWe could lose our drives.\n\n634\n00:31:30.140 --> 00:31:32.000\nAnd so\nit's checking to see if we're doing that.\n\n635\n00:31:32.000 --> 00:31:34.010\nSee where it says iSCSI no impact?\n\n636\n00:31:34.010 --> 00:31:36.220\nIt was looking to see if I was\ngonna mess with my storage.\n\n637\n00:31:36.220 --> 00:31:38.740\nI'm not using iSCSI right now,\nso it's no problem.\n\n638\n00:31:38.740 --> 00:31:41.910\nIt ignores it, and we're ready to finish.\n\n639\n00:31:41.910 --> 00:31:44.771\nAnd when we're done,\nwe can finish that up.\n\n640\n00:31:44.771 --> 00:31:49.447\nAnd now, as soon as that updates, We'll\nhave a distributed virtual switch that\n\n641\n00:31:49.447 --> 00:31:53.310\nactually has physical adaptors in it,\nwhich means?\n\n642\n00:31:53.310 --> 00:31:53.990\nIt works!\n\n643\n00:31:53.990 --> 00:31:59.550\nMeans we can actually use the darn thing\nnow and put it to some kind of use.\n\n644\n00:31:59.550 --> 00:32:03.380\nIf I go to my Monitor tab here, I can\nsee I don't have any issues triggered.\n\n645\n00:32:03.380 --> 00:32:05.950\nIf I go to my Summary tab and\ntake a look at it.\n\n646\n00:32:05.950 --> 00:32:09.690\nI can now see I've got\nthree networks in place.\n\n647\n00:32:09.690 --> 00:32:11.430\nI've got two hosts attached.\n\n648\n00:32:11.430 --> 00:32:12.690\nI've got no virtual machines.\n\n649\n00:32:12.690 --> 00:32:15.550\nI've got 40 ports,\nbecause I bumped up that one port number.\n\n650\n00:32:15.550 --> 00:32:20.340\nBut I can see that that virtual switch\nis indeed, up and ready to be used.\n\n651\n00:32:20.340 --> 00:32:22.790\nThe only thing left is to\nmove a host over to it.\n\n652\n00:32:22.790 --> 00:32:24.490\nI mean not a host, a guest.\n\n653\n00:32:24.490 --> 00:32:25.560\nA virtual machine.\n\n654\n00:32:25.560 --> 00:32:28.880\nSo, let me go hunt down\na Virtual Machine that we can move.\n\n655\n00:32:28.880 --> 00:32:31.030\nAnd I think I've got one\nlaying around somewhere.\n\n656\n00:32:31.030 --> 00:32:32.010\nMaybe I don't.\n\n657\n00:32:32.010 --> 00:32:34.930\nIf I don't have a Virtual Machine,\nthat's gooing to make life a little tough.\n\n658\n00:32:34.930 --> 00:32:36.210\nI don't have a Virtual Machine.\n\n659\n00:32:36.210 --> 00:32:39.390\nBut, what we can do is,\nif we take a Virtual Machine and\n\n660\n00:32:39.390 --> 00:32:41.580\njust edit its network adapter,\nyou'll see that port group.\n\n661\n00:32:41.580 --> 00:32:43.080\nYou can plug it right in.\n\n662\n00:32:43.080 --> 00:32:45.790\nSo maybe we'll say that I know\nI've got a lot more to get to and\n\n663\n00:32:45.790 --> 00:32:46.950\nI'm running low on time anyway.\n\n664\n00:32:46.950 --> 00:32:48.640\nSo maybe, we'll just do that in part two.\n\n665\n00:32:48.640 --> 00:32:51.180\nBut now,\nwhenever I create a virtual machine.\n\n666\n00:32:51.180 --> 00:32:57.720\nIf I plug the virtual machine into my new\nsales or marketing port group, right.\n\n667\n00:32:57.720 --> 00:32:59.255\nBecause they're distributed,\n\n668\n00:32:59.255 --> 00:33:02.950\nthat virtual machine will be able to\nmove from exo host 01 to exo host 02.\n\n669\n00:33:02.950 --> 00:33:07.410\nAnd it'll see the same distributed virtual\nswitch with the same port groups; and\n\n670\n00:33:07.410 --> 00:33:09.980\nbe able to communicate the same\nas it was on the other server.\n\n671\n00:33:09.980 --> 00:33:11.260\nNow we get failover.\n\n672\n00:33:11.260 --> 00:33:13.450\nNow we get the support that we need.\n\n673\n00:33:13.450 --> 00:33:15.840\nAnd that's the power of\na distributed virtual switch.\n\n674\n00:33:15.840 --> 00:33:18.700\nSo, while vSwitches are great.\n\n675\n00:33:18.700 --> 00:33:20.500\nThey work really well,\nthey're very stable,\n\n676\n00:33:20.500 --> 00:33:24.220\nthey work fine, distributed virtual\nswitches are more powerful.\n\n677\n00:33:24.220 --> 00:33:26.220\nI can still do vMotion\nwith regular vSwitches.\n\n678\n00:33:26.220 --> 00:33:29.960\nI just have to make sure I can create\nthe exact identical configuration on each\n\n679\n00:33:29.960 --> 00:33:31.620\nphysical ESXi host.\n\n680\n00:33:31.620 --> 00:33:34.310\nWith a distributed virtual\nswitch I could have variations.\n\n681\n00:33:34.310 --> 00:33:36.590\nI could have different types of adapters,\nthey could be different numbers.\n\n682\n00:33:36.590 --> 00:33:39.000\nI could have all sorts of flexibility\n\n683\n00:33:39.000 --> 00:33:41.440\nbecause of the power that\ndistributed virtual switch has.\n\n684\n00:33:41.440 --> 00:33:44.790\nAnd the configuration is stored up\nin v-center, so I can add more host,\n\n685\n00:33:44.790 --> 00:33:45.760\nI could take hosts out.\n\n686\n00:33:45.760 --> 00:33:49.750\nYou could do a lot of cool stuff that\nyou just can't do with v-switches.\n\n687\n00:33:49.750 --> 00:33:51.980\nAll right, so I think that's probably\na pretty good stopping point for\n\n688\n00:33:51.980 --> 00:33:53.070\nthis episode.\n\n689\n00:33:53.070 --> 00:33:55.670\nI've run through how\nto create a DV switch.\n\n690\n00:33:55.670 --> 00:33:57.530\nHow to create a DV port group.\n\n691\n00:33:57.530 --> 00:33:59.850\nHow to throw some host into it and\nget it up and running.\n\n692\n00:33:59.850 --> 00:34:01.998\nNow, I didn't actually use the darn thing.\n\n693\n00:34:01.998 --> 00:34:05.520\nWe want to see that a little bit, so maybe\nin part two we'll get a chance to see.\n\n694\n00:34:07.190 --> 00:34:07.960\nAdding it in or maybe,\n\n695\n00:34:07.960 --> 00:34:10.190\nwe'll just call it advanced features or\nsomething crazy like that.\n\n696\n00:34:10.190 --> 00:34:11.980\nBut we'll see adding some hosts.\n\n697\n00:34:11.980 --> 00:34:12.610\nI keep saying hosts.\n\n698\n00:34:12.610 --> 00:34:13.790\nAdding some guests and\n\n699\n00:34:13.790 --> 00:34:17.920\nthen, once we've got guests\ncustomizing the bells and whistles.\n\n700\n00:34:17.920 --> 00:34:19.440\nThe advanced features.\n\n701\n00:34:19.440 --> 00:34:23.920\nWe have LACP and ANA IOC and\nthose settings that are out there.\n\n702\n00:34:23.920 --> 00:34:25.190\nWhen you know how to get those configured.\n\n703\n00:34:25.190 --> 00:34:27.580\nSo we'll take a look at getting\nthose set up and the other things.\n\n704\n00:34:27.580 --> 00:34:30.400\nBut as far as basic functionality,\nthat's it.\n\n705\n00:34:30.400 --> 00:34:32.260\nAnd I did talk a lot about it.\n\n706\n00:34:32.260 --> 00:34:35.400\nIf I'd just jumped in and done it,\nit probably took five minutes, right?\n\n707\n00:34:35.400 --> 00:34:37.780\nCreating a dv switch is\nnot a hard thing to do.\n\n708\n00:34:37.780 --> 00:34:39.270\nIt's definitely something\nyou're going to use there,\n\n709\n00:34:39.270 --> 00:34:40.530\nespecially if you have clusters.\n\n710\n00:34:40.530 --> 00:34:42.840\nIf you have clusters,\nyou should be using dv switches.\n\n711\n00:34:42.840 --> 00:34:44.780\nThat's what they're made for.\n\n712\n00:34:44.780 --> 00:34:46.190\nAll right, well,\nhopefully you guys enjoyed it.\n\n713\n00:34:46.190 --> 00:34:47.290\nIt's been a pretty fun topic.\n\n714\n00:34:47.290 --> 00:34:48.320\nI know I like networking.\n\n715\n00:34:48.320 --> 00:34:49.680\nIt's got a special place in my heart.\n\n716\n00:34:49.680 --> 00:34:53.300\nBut all good things must come to an end,\nso we'll wrap this episode up.\n\n717\n00:34:53.300 --> 00:34:55.930\nSigning off for ITProTV, I'm Don Pezet.\n\n718\n00:34:55.930 --> 00:34:56.828\nAnd I will see you next time.\n\n719\n00:34:56.828 --> 00:35:03.711\n[MUSIC]\n\n720\n00:35:03.711 --> 00:35:04.211\nAll right\n\n",
          "vimeoId": "168932278"
        },
        {
          "description": "In this episode, Don continues working with Distributed Virtual Switches in VMware vCenter 6. He demonstrates distributed port groups and shows how dvSwitches can span multiple ESXi hosts creating a true Software Defined Network (SDN)",
          "length": "1637",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-2-2-configuring_distributed_vswitches_pt2-053116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-2-2-configuring_distributed_vswitches_pt2-053116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-2-2-configuring_distributed_vswitches_pt2-053116-1-sm.jpg",
          "title": "Configuring Distributed vSwitches Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.051 --> 00:00:14.811\nAll right, good morning,\ngood afternoon, and good evening.\n\n3\n00:00:14.811 --> 00:00:19.030\nAnd welcome back to another episode\nof ITProTV, I'm your host Don Pezet.\n\n4\n00:00:19.030 --> 00:00:21.716\nBack with Part 2 of Distributed vSwitches,\n\n5\n00:00:21.716 --> 00:00:25.620\nwhich is part of our\nVMware Certified Professional 6 series.\n\n6\n00:00:25.620 --> 00:00:29.180\nAnd if you watched our last episode,\nI hope you did, cuz this is Part 2 for\n\n7\n00:00:29.180 --> 00:00:32.050\nit, we started talking about\ndistributed virtual switches.\n\n8\n00:00:32.050 --> 00:00:34.820\nAnd I showed you guys how\nto create a virtual switch,\n\n9\n00:00:34.820 --> 00:00:39.000\nhow to create the port groups, how to\nattach some physical interfaces to it.\n\n10\n00:00:39.000 --> 00:00:42.990\nAnd we got that up, we got it running,\nand we saw it, right?\n\n11\n00:00:42.990 --> 00:00:46.480\nBut we had to stop short a little bit,\nwell mostly cuz I ran out of time, but\n\n12\n00:00:46.480 --> 00:00:50.850\nalso because I needed to\nattach a guest to the switch.\n\n13\n00:00:50.850 --> 00:00:53.790\nA switch without any guest attached\nto it is really pointless,\n\n14\n00:00:53.790 --> 00:00:55.030\nit doesn't do anything.\n\n15\n00:00:55.030 --> 00:00:57.850\nSo once you've created\nthe distributed virtual switch,\n\n16\n00:00:57.850 --> 00:01:01.750\nnow we need to get some things\nplugged in and get them up and going.\n\n17\n00:01:01.750 --> 00:01:04.130\nInside of your virtual switch you\ncan create multiple port groups,\n\n18\n00:01:04.130 --> 00:01:05.780\nyou have multiple different networks.\n\n19\n00:01:05.780 --> 00:01:08.640\nAnd when you go to configure your virtual\nmachines they can take advantage of\n\n20\n00:01:08.640 --> 00:01:09.460\nthat, right.\n\n21\n00:01:09.460 --> 00:01:12.020\nSo let me show you the process\nof how that works.\n\n22\n00:01:12.020 --> 00:01:14.900\nSo what I'm gonna do is,\nlet's just kinda recap my settings.\n\n23\n00:01:14.900 --> 00:01:18.220\nSo I'm gonna go back to my main home page,\nand\n\n24\n00:01:18.220 --> 00:01:21.330\ngo down to Networking, and\njump into my Datacenter.\n\n25\n00:01:21.330 --> 00:01:25.329\nAnd I'm gonna find the distributed virtual\nswitch that we made in the last episode,\n\n26\n00:01:25.329 --> 00:01:28.163\nso here it is, VM-dvSwitch,\nthat's the switch we made.\n\n27\n00:01:28.163 --> 00:01:30.374\nAnd if I come and\ntake a look at its summary,\n\n28\n00:01:30.374 --> 00:01:34.120\nI can see a little bit of information\nabout it, but the most important one\n\n29\n00:01:34.120 --> 00:01:37.393\nthat I'm paying attention to\nright now is Virtual machine 0.\n\n30\n00:01:37.393 --> 00:01:40.554\nAs long as there's no VMs attached to it,\nit's not doing me any good,\n\n31\n00:01:40.554 --> 00:01:42.070\nI might as well delete it.\n\n32\n00:01:42.070 --> 00:01:44.070\nSo I wanna get that set up.\n\n33\n00:01:44.070 --> 00:01:48.760\nInside of it I've got two\ndifferent port groups.\n\n34\n00:01:48.760 --> 00:01:52.910\nSo what I'm really doing is, not plugging\na virtual machine into the dvSwitch, but\n\n35\n00:01:52.910 --> 00:01:55.110\nplugging it in to the port group.\n\n36\n00:01:55.110 --> 00:01:57.930\nAnd the reason I highlight that is that we\nneed to know the name of the port group\n\n37\n00:01:57.930 --> 00:01:59.120\nthat we wanna plug into.\n\n38\n00:01:59.120 --> 00:02:02.120\nSo if I have a computer that's supposed\nto be on my marketing network,\n\n39\n00:02:02.120 --> 00:02:03.210\nit's gonna go into this port group.\n\n40\n00:02:03.210 --> 00:02:06.394\nIf it's supposed to be in my sales\nnetwork it'll go into this port group.\n\n41\n00:02:06.394 --> 00:02:09.097\nAnd I can always move them back and forth,\nit's just a network adaptor, right?\n\n42\n00:02:09.097 --> 00:02:11.947\nJust like in real life you can\nunplug adapter and plug it in,\n\n43\n00:02:11.947 --> 00:02:15.850\nyou can do that virtually here,\nwe can unplug it and plug it in.\n\n44\n00:02:15.850 --> 00:02:20.320\nSo if I jump over to my virtual machines,\nI've got a virtual machine here,\n\n45\n00:02:20.320 --> 00:02:21.900\na little Linux Web Server.\n\n46\n00:02:21.900 --> 00:02:24.060\nAnd if I choose the Web server,\nand I go and\n\n47\n00:02:24.060 --> 00:02:27.950\ntake a look at its settings,\nI can see its Network adapter, and\n\n48\n00:02:27.950 --> 00:02:31.010\nits network adapter is currently\nplugged into VM Network, right?\n\n49\n00:02:31.010 --> 00:02:36.540\nVM Network is one of the default networks\nthat's created on vSwitch0 on a host.\n\n50\n00:02:36.540 --> 00:02:38.310\nSo whichever host this is on,\n\n51\n00:02:38.310 --> 00:02:42.870\nwhich I think it's on,\npretty sure it's on host ESX1.\n\n52\n00:02:42.870 --> 00:02:47.790\nSo it's on my first ESXi box,\nit has a vSwitch called vSwitch0,\n\n53\n00:02:47.790 --> 00:02:50.122\nand it has a port group called VM Network.\n\n54\n00:02:50.122 --> 00:02:52.680\nIf you're ever not sure,\nyou can always click on it.\n\n55\n00:02:52.680 --> 00:02:56.149\nAnd it'll take you to wherever it's\nsupposed to be, or you'll get a nice\n\n56\n00:02:56.149 --> 00:02:59.750\nlittle [LAUGH] little error there,\nwe'll let it reload its interface.\n\n57\n00:02:59.750 --> 00:03:05.350\nSo it'll take you to wherever that port\ngroup exists and that's important, because\n\n58\n00:03:05.350 --> 00:03:09.410\nwhen you install ESXi, assuming you follow\nthe defaults, a switch will be created\n\n59\n00:03:09.410 --> 00:03:14.230\ncall vSwitch0 and a port group will be\ncreated that'll be called virtual machine.\n\n60\n00:03:14.230 --> 00:03:18.962\nSo if I have a hundred ESXI boxes,\nI have a hundred vSwitch0,\n\n61\n00:03:18.962 --> 00:03:23.210\nand I have a hundred virtual\nmachine port groups.\n\n62\n00:03:23.210 --> 00:03:27.210\nSo just because it says virtual machine\nthere doesn't necessarily mean that's\n\n63\n00:03:27.210 --> 00:03:28.650\nexactly what it is, right?\n\n64\n00:03:28.650 --> 00:03:32.570\nSo how do I know which one\nit's actually plugged into?\n\n65\n00:03:32.570 --> 00:03:35.207\nAnd we can click on that link and\nit'll take us to wherever that is.\n\n66\n00:03:35.207 --> 00:03:39.211\nAnd we can kind of figure it out and\nsee what that one's attached to.\n\n67\n00:03:39.211 --> 00:03:42.920\nSo when I come in here and\ntake a look at related objects for\n\n68\n00:03:42.920 --> 00:03:48.082\nvirtual machines, I can see I've got\na related object in WEB01, right?\n\n69\n00:03:48.082 --> 00:03:51.050\nSo there's my guest,\nand when I go to Hosts,\n\n70\n00:03:51.050 --> 00:03:54.900\nI can see it's actually\nshowing up on both.\n\n71\n00:03:54.900 --> 00:03:56.938\nAnd the reason it's showing up on\nboth is they have the same name,\n\n72\n00:03:56.938 --> 00:03:57.988\nit's treating them as the same.\n\n73\n00:03:57.988 --> 00:04:01.336\nAnd if these are clustered together\nwe'll be able to fail over,\n\n74\n00:04:01.336 --> 00:04:02.887\ncuz they have that same name.\n\n75\n00:04:02.887 --> 00:04:05.358\nAll right, so if I look, my consume CPU,\n\n76\n00:04:05.358 --> 00:04:08.740\nI wonder why consume CPU's\na little higher on that one?\n\n77\n00:04:08.740 --> 00:04:13.200\nSo the other way we can check is to\nactually just go to the host itself.\n\n78\n00:04:13.200 --> 00:04:15.687\nAnd so if we jump back to our Hosts and\n\n79\n00:04:15.687 --> 00:04:18.320\nClusters, you can browse\ninto one of the hosts and\n\n80\n00:04:18.320 --> 00:04:22.120\ngo into their networking, and you'll be\nable to spot it from inside of there too.\n\n81\n00:04:22.120 --> 00:04:25.647\nSo there's a few different ways we can go\nabout trying to find where these things\n\n82\n00:04:25.647 --> 00:04:26.500\nare plugged into.\n\n83\n00:04:26.500 --> 00:04:29.322\nSo I'm just kinda diving\nhere into ESXHost01.\n\n84\n00:04:29.322 --> 00:04:33.207\nAnd when I go into it, and\nI take a look at its vSwitch0,\n\n85\n00:04:33.207 --> 00:04:38.419\nI can look down here and I can see that\nthere is a virtual machine attached and\n\n86\n00:04:38.419 --> 00:04:42.265\nit's WEB01, so\nthere it is right there on ESX01.\n\n87\n00:04:42.265 --> 00:04:44.825\nSo what I want to do\nis effectively move it\n\n88\n00:04:44.825 --> 00:04:48.475\nfrom Switch0 up to the distributed\nvirtual switch up here.\n\n89\n00:04:48.475 --> 00:04:50.905\nSo that's what I want to do is\njust quickly transition that.\n\n90\n00:04:50.905 --> 00:04:54.215\nSo I can take that virtual machine and\nI can edit its settings.\n\n91\n00:04:54.215 --> 00:04:55.695\nNow mine is showing\ndisconnected right now, and\n\n92\n00:04:55.695 --> 00:04:57.105\nthat's cuz the virtual\nmachine is powered off.\n\n93\n00:04:57.105 --> 00:05:00.285\nWhen you power off a virtual machine\nit always shows as disconnected.\n\n94\n00:05:00.285 --> 00:05:03.100\nIf I power it on, it'll just flip\nto connected and that's that.\n\n95\n00:05:03.100 --> 00:05:06.560\nYou can plug and unplug these\nwhile the virtual machine is on,\n\n96\n00:05:06.560 --> 00:05:08.310\nyou don't have to turn it off.\n\n97\n00:05:08.310 --> 00:05:10.780\nJust know that if you're using DHCP or\nwhatever,\n\n98\n00:05:10.780 --> 00:05:12.760\nit is gonna create some\ndowntime when you move it.\n\n99\n00:05:12.760 --> 00:05:14.547\nBut you're moving to\nanother network anyway,\n\n100\n00:05:14.547 --> 00:05:16.250\nI think you'd expect\nto have some downtime.\n\n101\n00:05:16.250 --> 00:05:18.491\nAll right, so I'm gonna go and edit that.\n\n102\n00:05:18.491 --> 00:05:22.010\nAnd when I go to edit the settings\nI can go into the Network adapter.\n\n103\n00:05:22.010 --> 00:05:25.160\nAnd so here's the Network adapeor, and\nit's currently plugged into VM Network.\n\n104\n00:05:25.160 --> 00:05:30.251\nAnd when I drop that down now I can pick,\nand see how I've got the dvSwitch itself?\n\n105\n00:05:30.251 --> 00:05:34.697\nBut I've also got the port groups that\nI created inside of it, all right.\n\n106\n00:05:34.697 --> 00:05:36.253\nAnd that's what I want to plug into.\n\n107\n00:05:36.253 --> 00:05:38.959\nLet's say that this is a sales Web server,\nand so\n\n108\n00:05:38.959 --> 00:05:41.088\nI'm gonna put it on my sales network.\n\n109\n00:05:41.088 --> 00:05:44.330\nAnd, I'll go and hit OK to that.\n\n110\n00:05:44.330 --> 00:05:45.320\nAnd so that's gonna plug it in,\n\n111\n00:05:45.320 --> 00:05:49.240\nI'll give it just a second for\nthat'll refresh to show the new network.\n\n112\n00:05:49.240 --> 00:05:49.950\nThere it goes.\n\n113\n00:05:49.950 --> 00:05:52.070\nJust took a second, so I've got VM-Sales.\n\n114\n00:05:52.070 --> 00:05:55.750\nAnd once that's plugged in,\nnow if I power on that machine,\n\n115\n00:05:55.750 --> 00:05:59.570\nit's going to be running\ninside of that port group.\n\n116\n00:05:59.570 --> 00:06:03.430\nSo I can go and power this thing on,\nand now it's gonna start booting up.\n\n117\n00:06:03.430 --> 00:06:07.330\nAnd that should change from disconnected\nto connected, and there it goes.\n\n118\n00:06:07.330 --> 00:06:08.960\nNow VM-Sales connected.\n\n119\n00:06:08.960 --> 00:06:14.010\nSo sticking a virtual machine onto\nthe dvSwitch is not a big deal, right?\n\n120\n00:06:14.010 --> 00:06:16.130\nIt's just a matter of editing that\nNetwork adapter, moving it over there,\n\n121\n00:06:16.130 --> 00:06:17.820\nand you're in business.\n\n122\n00:06:17.820 --> 00:06:22.560\nOkay, so now that that's done,\nwhen I jump back out to my networking, and\n\n123\n00:06:22.560 --> 00:06:26.340\nI go to my VM-dvSwitch.\n\n124\n00:06:26.340 --> 00:06:30.309\nNow when I take a look at it,\nif I go down to the port group for\n\n125\n00:06:30.309 --> 00:06:32.587\nsales I should see, there it is.\n\n126\n00:06:32.587 --> 00:06:35.083\nHosts 2, Virtual machines 1.\n\n127\n00:06:35.083 --> 00:06:36.685\nAnd so it's set up right there.\n\n128\n00:06:36.685 --> 00:06:40.066\nThat virtual machine is\nnow on this port group,\n\n129\n00:06:40.066 --> 00:06:45.070\nwhich is also on a VLAN,\nVLAN 10 or 20, 10, right there.\n\n130\n00:06:45.070 --> 00:06:47.710\nSo now it's up and going, and\nit's in business, all right.\n\n131\n00:06:47.710 --> 00:06:52.160\nNotice that I can attach things to the\nswitch itself, not inside of a port group.\n\n132\n00:06:52.160 --> 00:06:54.420\nIf you do that you lose some\nof the bells and whistles,\n\n133\n00:06:54.420 --> 00:06:56.150\na lot of that stuff doesn't work anymore.\n\n134\n00:06:56.150 --> 00:06:58.080\nBut if you're just trying to\ngroup people together and\n\n135\n00:06:58.080 --> 00:07:01.730\nnot have isolation of any sort, you can\njust plug them right into the switch and\n\n136\n00:07:01.730 --> 00:07:03.050\nthen they'll get that access there too.\n\n137\n00:07:03.050 --> 00:07:04.760\nSo a couple of different\nways to go about that.\n\n138\n00:07:06.200 --> 00:07:10.010\nAll right so now, I actually have a fully\nfunctional distributed virtual switch.\n\n139\n00:07:10.010 --> 00:07:12.820\nNow it's up and it's going and\nI know I could take my VM and fail it\n\n140\n00:07:12.820 --> 00:07:17.240\nover between ESX Host 01 and Host 02, and\nit will have the exact same switch, and\n\n141\n00:07:17.240 --> 00:07:19.390\nit will have that configuration,\nand be ready to rock.\n\n142\n00:07:20.710 --> 00:07:24.650\nAll right, one other loose end\nthat we had in the last episode.\n\n143\n00:07:24.650 --> 00:07:27.270\nI mentioned that we can easily upgrade\n\n144\n00:07:27.270 --> 00:07:30.460\na distributed virtual switch if we\ncreated one of the older versions.\n\n145\n00:07:30.460 --> 00:07:35.460\nWhen I click on my dvSwitch here,\nVM-dvSwitch, I can look over here and\n\n146\n00:07:35.460 --> 00:07:36.420\nsee the version.\n\n147\n00:07:36.420 --> 00:07:39.330\nMine is version 6.0.0, right?\n\n148\n00:07:39.330 --> 00:07:43.210\nSo I have all ESXi 6 boxes and\nso that's fine with me,\n\n149\n00:07:43.210 --> 00:07:45.520\nthat's where I want it,\neverything's running great.\n\n150\n00:07:45.520 --> 00:07:48.654\nBut what if I had upgraded my ESXi boxes?\n\n151\n00:07:48.654 --> 00:07:54.946\nWhat if they were running 5.5 and\nI upgraded them to ESXi 6?\n\n152\n00:07:54.946 --> 00:07:58.139\nWell when you do that it doesn't\nupgrade the vSwitches And\n\n153\n00:07:58.139 --> 00:08:00.950\nactually leaves the v\nswitches at the old version.\n\n154\n00:08:00.950 --> 00:08:05.282\nSo you might be running ESXI6 and\nstill have distributive virtual switches\n\n155\n00:08:05.282 --> 00:08:09.830\nthat are 5.5 or maybe even older cuz\nit's been like this for a long time.\n\n156\n00:08:09.830 --> 00:08:13.750\nSo you might have some older hardware\nthat's been upgraded a few times and\n\n157\n00:08:13.750 --> 00:08:16.270\nnobody ever thought to\ncheck the v switches and so\n\n158\n00:08:16.270 --> 00:08:18.530\nyour distributive virtual switches\nis some really old version.\n\n159\n00:08:18.530 --> 00:08:21.910\nAnd then one day you come in and\ntry to configure lack P or\n\n160\n00:08:21.910 --> 00:08:24.898\nadvance IOC and the features aren't there.\n\n161\n00:08:24.898 --> 00:08:29.110\nThe options aren't showing up and it's\nbecause you're that older version, right.\n\n162\n00:08:29.110 --> 00:08:32.090\nSo we need to upgrade our\ndistributive virtual switches to\n\n163\n00:08:32.090 --> 00:08:33.740\nsupport the new features.\n\n164\n00:08:33.740 --> 00:08:37.140\nWhen you click on a distributive\nvirtual switch and\n\n165\n00:08:37.140 --> 00:08:39.460\ntake a look at like its summary page.\n\n166\n00:08:39.460 --> 00:08:43.570\nSo here I am with my VM-dvswitch,\nwhich we just had version 6.0.\n\n167\n00:08:43.570 --> 00:08:45.350\nI got a sort of features table.\n\n168\n00:08:45.350 --> 00:08:50.900\nAnd when you look at the features table,\nyou'll see all the things were supported.\n\n169\n00:08:50.900 --> 00:08:54.400\nI got Netflow,\nLink Layer Discovery Protocol and so on.\n\n170\n00:08:54.400 --> 00:08:58.860\nEach of these are features\nof the version 6 switch.\n\n171\n00:08:58.860 --> 00:09:02.540\nIf I take an older switch,\nlike I've got a Legacy switch here.\n\n172\n00:09:02.540 --> 00:09:04.150\nIf we take a look at this Legacy switch,\n\n173\n00:09:04.150 --> 00:09:09.420\nthis one is version 5.0,\nit's running on a ESXi 6 box.\n\n174\n00:09:09.420 --> 00:09:11.700\nBut like we saw in the last episode,\nyou can create an older version.\n\n175\n00:09:11.700 --> 00:09:15.500\nSo this is an older version, and so it's\nwarning me, hey, upgrades are available.\n\n176\n00:09:15.500 --> 00:09:18.260\nYou can upgrade this switch and\nget some new features.\n\n177\n00:09:18.260 --> 00:09:23.680\nAnd if I look at the features block,\nnotice how NI/OC is supported, NetFlow is\n\n178\n00:09:23.680 --> 00:09:27.810\nsupported, Link Layer Discovery Protocol,\nLink Aggregation Protocol not supported.\n\n179\n00:09:27.810 --> 00:09:29.030\nI can't do LACP.\n\n180\n00:09:29.030 --> 00:09:31.187\nCoz it didn't exist in 5.0.\n\n181\n00:09:31.187 --> 00:09:35.640\nI cant do IGMP/MLD,\ni can't do health checks.\n\n182\n00:09:35.640 --> 00:09:40.380\nThose are newer features, that\nweren't supported in the 5.0 features.\n\n183\n00:09:40.380 --> 00:09:42.880\nEven NIO, see if we expand that out.\n\n184\n00:09:42.880 --> 00:09:46.090\nSee how we analyse C is\nsupported by this version two.\n\n185\n00:09:46.090 --> 00:09:48.360\nIf we look at my other switch.\n\n186\n00:09:48.360 --> 00:09:52.710\nNIOC was supported in it's version 3.\n\n187\n00:09:52.710 --> 00:09:58.670\nSo if I want NIOC version 3, the advance\nNIOC I've got to go to the newer version.\n\n188\n00:09:58.670 --> 00:10:01.650\nSo upgrading is really easy\nyou can use the little link.\n\n189\n00:10:01.650 --> 00:10:04.390\nIf I click on Legacy my old switch.\n\n190\n00:10:04.390 --> 00:10:06.100\nI have the upgrades available link.\n\n191\n00:10:06.100 --> 00:10:09.140\nI can use that or\nyou can just right click on the thing and\n\n192\n00:10:09.140 --> 00:10:11.820\nit's right here in the upgrade menu.\n\n193\n00:10:11.820 --> 00:10:15.480\nWe can go and chose to upgrade\nthe distributed switch, and\n\n194\n00:10:15.480 --> 00:10:18.100\nwhen we upgrade it now we\ncan move to the new version.\n\n195\n00:10:18.100 --> 00:10:23.870\nNotice there's separate upgrades here for\nNIOC to move from version 2 to version 3.\n\n196\n00:10:23.870 --> 00:10:26.510\nAnd to enhance LACP support.\n\n197\n00:10:27.620 --> 00:10:29.795\nLACP was introduced in 5.1 and\n\n198\n00:10:29.795 --> 00:10:35.760\nthen enhance LACP was introduced in 5.5\nwhere they increased its performance, so\n\n199\n00:10:35.760 --> 00:10:39.250\nif I want to upgrade that, you can upgrade\nthose two features individually, right?\n\n200\n00:10:39.250 --> 00:10:42.850\nWe're gonna talk more about NIOC and\nLACP in another episode But,\n\n201\n00:10:42.850 --> 00:10:46.270\nupgrading the switch, we just do with\nthis option and now we can pick.\n\n202\n00:10:46.270 --> 00:10:51.781\nAnd here's where you start to see\nthose different features, right?\n\n203\n00:10:51.781 --> 00:10:53.155\n5.1 gets me LACP.\n\n204\n00:10:53.155 --> 00:10:54.811\n5.5 gets me enhanced LACP.\n\n205\n00:10:54.811 --> 00:10:59.510\n6.0 gets you IGMP/MLD snooping,\namongst other things right?\n\n206\n00:10:59.510 --> 00:11:00.900\nNIOC version 3.\n\n207\n00:11:00.900 --> 00:11:06.160\nSo if I need those features then I\nneed to jump up to that version.\n\n208\n00:11:06.160 --> 00:11:07.300\nBut if I don't need those features.\n\n209\n00:11:07.300 --> 00:11:09.470\nMaybe I'm not gonna use\nNIOC what do I care?\n\n210\n00:11:09.470 --> 00:11:12.620\nAnd IGMP whatever,\nI'm not gonna worry about that.\n\n211\n00:11:12.620 --> 00:11:14.450\nIf I don't need those features.\n\n212\n00:11:14.450 --> 00:11:17.520\nI might want to stay on\nan older switch version, and\n\n213\n00:11:17.520 --> 00:11:23.140\nthe reason is that I might have ESXi\nhosts that haven't been upgraded yet.\n\n214\n00:11:23.140 --> 00:11:27.230\nIf I go to version 6 on my switch,\nall of my hosts need to be version 6 also.\n\n215\n00:11:27.230 --> 00:11:29.370\nAnd I might not be ready for that.\n\n216\n00:11:29.370 --> 00:11:33.010\nSo the rule of thumb is when you upgrade,\nyou upgrade your hosts first.\n\n217\n00:11:33.010 --> 00:11:35.720\nThen you come back and\nupgrade your virtual switches.\n\n218\n00:11:35.720 --> 00:11:39.870\nCuz you can run an older version of the\nvirtual switch on a newer version of ESXi,\n\n219\n00:11:39.870 --> 00:11:41.850\nbut you can't do it the other way around.\n\n220\n00:11:41.850 --> 00:11:45.280\nI can't run a newer version of\nthe switch on an older version of ESXi.\n\n221\n00:11:45.280 --> 00:11:47.680\nSo upgrade ESXi first.\n\n222\n00:11:47.680 --> 00:11:51.350\nAnd only move to the lowest\ncommon denominator.\n\n223\n00:11:51.350 --> 00:11:56.780\nSo if I have a hundred hosts and\n90 of them are version 6,\n\n224\n00:11:56.780 --> 00:12:00.332\nand 10 of them are version 5.5 I need\nto keep my virtual switch at 5.5.\n\n225\n00:12:00.332 --> 00:12:02.570\nSo [INAUDIBLE] all of them, right?\n\n226\n00:12:02.570 --> 00:12:04.650\nOr I need to go and\nupgrade those remaining 10 hosts.\n\n227\n00:12:04.650 --> 00:12:06.042\nOne or the other.\n\n228\n00:12:06.042 --> 00:12:08.550\nAll right, so when we upgrade,\nyou can do it in steps.\n\n229\n00:12:08.550 --> 00:12:10.800\nSo like if I go here to version 5.5.\n\n230\n00:12:10.800 --> 00:12:15.170\nI won't get NIOC three and I won't get\nIGMP, but I will get enhanced LACP.\n\n231\n00:12:16.380 --> 00:12:17.200\nOr you can just do it all at once,\n\n232\n00:12:17.200 --> 00:12:19.330\nyou can just jump straight to the new\nversion and that's what I'll do.\n\n233\n00:12:19.330 --> 00:12:22.160\nI'm going to go ahead and\nchoose version six and I'll move forward,\n\n234\n00:12:22.160 --> 00:12:23.530\nit's going to check for compatibility.\n\n235\n00:12:23.530 --> 00:12:27.260\nNow, what it's doing is that it's\nlooking to make sure all my hosts\n\n236\n00:12:27.260 --> 00:12:28.590\nsupport version six.\n\n237\n00:12:28.590 --> 00:12:32.100\nIf I still had five five hosts I'm going\nto get some compatibility problems here.\n\n238\n00:12:32.100 --> 00:12:35.610\nMine are all six so we will be fine and\nwe can finish that out.\n\n239\n00:12:35.610 --> 00:12:41.470\nAll right, now when I go to finish it up,\nit's still offering to do enhanced LACP.\n\n240\n00:12:41.470 --> 00:12:45.930\nI'm gonna have LACP support,\nbut not enhanced LACP.\n\n241\n00:12:45.930 --> 00:12:48.400\nI can check this box and I'll get it, or\n\n242\n00:12:48.400 --> 00:12:50.380\nI can use the upgrade option later and\nadd it.\n\n243\n00:12:50.380 --> 00:12:52.490\nNow why not just do it?\n\n244\n00:12:52.490 --> 00:12:57.040\nThe reason is, if I'm using LACP,\nmy switch has to be aware of it and\n\n245\n00:12:57.040 --> 00:12:58.690\nmy switch is configured for it.\n\n246\n00:12:58.690 --> 00:13:01.060\nWhen we do the enhanced version,\nit resets that.\n\n247\n00:13:01.060 --> 00:13:02.770\nAnd it can break the connection\nwith the switch.\n\n248\n00:13:02.770 --> 00:13:06.880\nSo, I need to make sure I've got physical\naccess to that switch in the event\n\n249\n00:13:06.880 --> 00:13:08.200\nthat something goes wrong.\n\n250\n00:13:08.200 --> 00:13:10.180\nThat's why they don't\nupgrade it automatically.\n\n251\n00:13:10.180 --> 00:13:12.350\nYou can do it, you can just check this,\nit'll upgrade it automatically,\n\n252\n00:13:12.350 --> 00:13:14.820\nand assuming everything goes well,\nyou'll be fine.\n\n253\n00:13:14.820 --> 00:13:17.760\nBut what if you're 500 hundred\nmiles away from the server.\n\n254\n00:13:17.760 --> 00:13:19.320\nAnd nobody's in that building and\nyou go and\n\n255\n00:13:19.320 --> 00:13:23.550\nupgrade it and all of a sudden the\nswitch's like peak configuration dies out.\n\n256\n00:13:23.550 --> 00:13:24.810\nNow you're out of luck, right?\n\n257\n00:13:24.810 --> 00:13:30.610\nSo we need to make sure that we\ndon't enhance if we're not ready for\n\n258\n00:13:30.610 --> 00:13:31.450\nthat, right?\n\n259\n00:13:31.450 --> 00:13:33.490\nAnd it's even telling us here,\nyou know you don't have to do it.\n\n260\n00:13:33.490 --> 00:13:36.740\nYou can still use the regular\nLACP from version 5.1.\n\n261\n00:13:36.740 --> 00:13:39.280\nAnd you're not kind of forced to upgrade.\n\n262\n00:13:39.280 --> 00:13:42.300\nBut I'll go ahead and,\nI guess I'll leave that part off, why not.\n\n263\n00:13:43.510 --> 00:13:46.110\nAll right, now when I finish\nit's gonna do the upgrade, and\n\n264\n00:13:46.110 --> 00:13:48.500\nthe upgrade only takes a moment,\nso it's gonna bump across.\n\n265\n00:13:48.500 --> 00:13:54.520\nIn fact, mine's already done, so my legacy\nDV switch now shows as version six.\n\n266\n00:13:54.520 --> 00:13:57.380\nBut it does show that upgrades\nare available, right?\n\n267\n00:13:57.380 --> 00:14:00.520\nI upgraded the switch, but\nthe features can still be upgraded.\n\n268\n00:14:00.520 --> 00:14:06.000\nSo if I go to my Upgrade menu you'll see\nEnhance LACP support is now lit up right?\n\n269\n00:14:06.000 --> 00:14:07.390\nAnd so I can enhance that.\n\n270\n00:14:07.390 --> 00:14:10.060\nThat's the last step to get\nthis one all the way up.\n\n271\n00:14:10.060 --> 00:14:12.810\nYou can back up your configuration\none last time just in case\n\n272\n00:14:12.810 --> 00:14:14.410\nsomething goes wrong.\n\n273\n00:14:14.410 --> 00:14:16.790\nAnd then we can do the upgrade.\n\n274\n00:14:16.790 --> 00:14:19.550\nI pass my little checks there,\neverything is compatible and\n\n275\n00:14:19.550 --> 00:14:21.740\nwe can finish that up and\nnow we're in business there too.\n\n276\n00:14:21.740 --> 00:14:26.710\nSo upgrading a DV switch not a hard\nthing and we get new features right.\n\n277\n00:14:26.710 --> 00:14:31.680\nNow when I look at that feature table,\nI've got an I/O C version 3,\n\n278\n00:14:31.680 --> 00:14:36.422\nI've got IGMP, LACP, it's all right\nthere and with an enhanced support.\n\n279\n00:14:36.422 --> 00:14:41.230\nAll right, the last thing that\nI want to talk about before we\n\n280\n00:14:41.230 --> 00:14:44.800\nwrap up just general DV switches\nis this table right here, right?\n\n281\n00:14:44.800 --> 00:14:46.500\nThere's a lot of features in here.\n\n282\n00:14:46.500 --> 00:14:48.070\nWhat are these things?\n\n283\n00:14:48.070 --> 00:14:50.590\nOkay, well, each one of these\n\n284\n00:14:50.590 --> 00:14:55.020\nare a service of the distributive virtual\nswitch that each serve a purpose.\n\n285\n00:14:55.020 --> 00:14:57.920\nAnd you may or may not use these.\n\n286\n00:14:57.920 --> 00:15:00.420\nIf you've gone through\nthe trouble of paying for\n\n287\n00:15:00.420 --> 00:15:03.870\nVSphere Enterprise Edition and\ngotten the devious switch support,\n\n288\n00:15:03.870 --> 00:15:05.730\nthen you might as well use the features\nthat are available to you.\n\n289\n00:15:05.730 --> 00:15:07.590\nThe first one I talked\nabout a little bit and\n\n290\n00:15:07.590 --> 00:15:10.277\nwe're gonna see it in the next\nepisode is network I/O control.\n\n291\n00:15:10.277 --> 00:15:13.100\nNetwork I/O control is a way for\nus to filter and\n\n292\n00:15:13.100 --> 00:15:15.740\nrestrict bandwidth on the system.\n\n293\n00:15:15.740 --> 00:15:18.300\nWe can limit services to\na certain amount of bandwidth or\n\n294\n00:15:18.300 --> 00:15:20.100\nwe can even reserve bandwidth for\n\n295\n00:15:20.100 --> 00:15:23.960\na service to say, always hold this amount\nof space for this particular service.\n\n296\n00:15:23.960 --> 00:15:27.430\nSo, it gives you control of\nyour network input and output.\n\n297\n00:15:27.430 --> 00:15:29.660\nThus the name, Network I/O Control.\n\n298\n00:15:29.660 --> 00:15:33.070\nBut basically it's like\naudio services in a way.\n\n299\n00:15:33.070 --> 00:15:36.420\nIn that we're restricting that access.\n\n300\n00:15:36.420 --> 00:15:40.230\nNetflow, Netflow is a protocol\nthat was developed by Cisco and\n\n301\n00:15:40.230 --> 00:15:42.450\none of this is reporting service.\n\n302\n00:15:42.450 --> 00:15:45.750\nIt allows you to report information\nthat your network communication.\n\n303\n00:15:45.750 --> 00:15:47.410\nMaybe you look at your network adapter.\n\n304\n00:15:47.410 --> 00:15:52.250\nAnd in your monitor screen, so\nmaybe I jump over to monitor and\n\n305\n00:15:52.250 --> 00:15:55.241\nI start looking at my health monitor.\n\n306\n00:15:55.241 --> 00:15:58.760\nAnd I start getting errors in here letting\nme know I'm running out of bandwidth.\n\n307\n00:15:58.760 --> 00:16:01.700\nOkay, I'm using up too much\nbandwidth on my network.\n\n308\n00:16:01.700 --> 00:16:04.780\nMy network interface is\ncompletely pegged out, okay?\n\n309\n00:16:04.780 --> 00:16:08.430\nWell, I might have 10 different virtual\nmachines on that one interface.\n\n310\n00:16:08.430 --> 00:16:10.230\nWhich virtual machine's\neating the bandwidth?\n\n311\n00:16:10.230 --> 00:16:11.580\nI don't necessarily know.\n\n312\n00:16:11.580 --> 00:16:13.210\nYou get summary reports here, right?\n\n313\n00:16:13.210 --> 00:16:15.850\nThat's not necessarily the most\nhelpful thing in the world.\n\n314\n00:16:15.850 --> 00:16:19.460\nSo, if I'm only getting summary reports,\n\n315\n00:16:19.460 --> 00:16:23.120\nI don't know which virtual machine it\nis that's consuming that bandwidth.\n\n316\n00:16:23.120 --> 00:16:25.120\nAnd so I've gotta find out.\n\n317\n00:16:25.120 --> 00:16:27.830\nAnd then, even if I know\nwhich virtual machine it is,\n\n318\n00:16:27.830 --> 00:16:30.520\nwhat's the traffic in the VM\nthat's consuming that?\n\n319\n00:16:30.520 --> 00:16:33.400\nMaybe I have an Active Directory\ndomain controller, and\n\n320\n00:16:33.400 --> 00:16:36.320\nI see it's spiking my bandwidth\nall the way to the top.\n\n321\n00:16:36.320 --> 00:16:40.710\nWhy, is it DNS, is it directory service,\nis it a virus or malware?\n\n322\n00:16:40.710 --> 00:16:42.470\nWhat is eating up that bandwidth?\n\n323\n00:16:42.470 --> 00:16:43.830\nYou don't know, all right?\n\n324\n00:16:43.830 --> 00:16:46.860\nAnd then the default functions,\nyou don't have a way to tell either,\n\n325\n00:16:46.860 --> 00:16:48.810\nyou just see the bandwidth and that's it.\n\n326\n00:16:48.810 --> 00:16:54.780\nWith NetFlow, it'll actually report the\nactual communications, not the payload.\n\n327\n00:16:54.780 --> 00:16:57.710\nSo, if I'm sending a 10 gig\nfile across the Internet,\n\n328\n00:16:57.710 --> 00:17:00.220\nit's not gonna be a 10 gig report, right?\n\n329\n00:17:00.220 --> 00:17:04.520\nBut it is gonna show that this\nvirtual machine opened a connection to\n\n330\n00:17:04.520 --> 00:17:07.780\nthis external host and\nit did it on this particular port.\n\n331\n00:17:07.780 --> 00:17:09.790\nThink of it like as the output for\nnetstat, right?\n\n332\n00:17:09.790 --> 00:17:15.600\nThe netstat command, if I jump into my\nterminal and do like a netstat dash A.\n\n333\n00:17:15.600 --> 00:17:18.042\nThat's what I'm trying to do, there we go.\n\n334\n00:17:18.042 --> 00:17:23.260\nSo netstat on a normal machine\nshows a bunch of junk here.\n\n335\n00:17:23.260 --> 00:17:24.200\nThere we go.\n\n336\n00:17:24.200 --> 00:17:28.460\nShows my IP address and\nwho I'm connected to.\n\n337\n00:17:28.460 --> 00:17:32.670\nSo I can see that I've got a connection,\n10.1.230.241, that's my laptop.\n\n338\n00:17:32.670 --> 00:17:40.130\nI've got a connection to 172.249.153.246,\nwhoever that is, and I'm using HTTPS.\n\n339\n00:17:40.130 --> 00:17:43.150\nSo, I've got a secure\nweb connection to that.\n\n340\n00:17:44.600 --> 00:17:45.900\nI don't know who it is, but\n\n341\n00:17:45.900 --> 00:17:49.830\nif that is what's eating up all of\nmy bandwidth I can go and find out.\n\n342\n00:17:49.830 --> 00:17:50.590\nWhat is that IP?\n\n343\n00:17:50.590 --> 00:17:51.686\nWho is that tied to?\n\n344\n00:17:51.686 --> 00:17:52.750\nOr maybe it is something I do know,\n\n345\n00:17:52.750 --> 00:17:58.500\nlike right here I've got an https\nsession open to my vCenter server.\n\n346\n00:17:58.500 --> 00:18:01.140\nAnd so, if I see that pegging out,\nI'll know exactly what's going on.\n\n347\n00:18:01.140 --> 00:18:04.060\nThis is what netstat does\non an individual machine.\n\n348\n00:18:04.060 --> 00:18:08.100\nNetFlow does it all the time,\nand it can monitor that link for\n\n349\n00:18:08.100 --> 00:18:11.500\nall the virtual machines that are passing\nover to report that data back.\n\n350\n00:18:11.500 --> 00:18:15.330\nIt's really, really cool and\nit gives you really detailed information.\n\n351\n00:18:15.330 --> 00:18:19.690\nThe only problem on NetFlow is\nthat VMWare's vSphere, well,\n\n352\n00:18:19.690 --> 00:18:22.310\nESXI, can generate NetFlow data.\n\n353\n00:18:22.310 --> 00:18:24.870\nAnd Cisco switches,\nCisco routers, Cisco ASAs,\n\n354\n00:18:24.870 --> 00:18:26.380\nthey can all generate NetFlow data also.\n\n355\n00:18:26.380 --> 00:18:29.440\nBut they don't give you a way to\ninterpret it, so you've gotta go and\n\n356\n00:18:29.440 --> 00:18:34.420\nget third party software to\nreceive the NetFlow report and\n\n357\n00:18:34.420 --> 00:18:37.240\nextrapolate the information,\nactually make it into a readable format.\n\n358\n00:18:37.240 --> 00:18:39.260\nSo NetFlow's really awesome, but\n\n359\n00:18:39.260 --> 00:18:43.860\nyou've gotta have additional software\nto be able to actually make use of it.\n\n360\n00:18:43.860 --> 00:18:47.590\nIf you're curious, there's a free program\nfrom Solar Winds, a company called\n\n361\n00:18:47.590 --> 00:18:50.760\nSolar Winds, if you do a Google search for\nit, they have a NetFlow reporter.\n\n362\n00:18:50.760 --> 00:18:53.760\nIt's very limited, but then they have\na full commercial version of it.\n\n363\n00:18:53.760 --> 00:18:56.560\nIt's pretty darned expensive,\nbut it's really awesome and\n\n364\n00:18:56.560 --> 00:18:58.950\nit gives you visibility into your\nnetwork that you wouldn't normally have.\n\n365\n00:19:00.360 --> 00:19:02.780\nThink of it as like a sniffer\nthat doesn't carry payload.\n\n366\n00:19:04.010 --> 00:19:06.280\nThen we've got link layer\ndiscovery protocol, LLDP.\n\n367\n00:19:07.370 --> 00:19:11.390\nHave you ever walked into a closet,\ninto like a network closet, and\n\n368\n00:19:11.390 --> 00:19:13.530\nyou've go a stack of virtual hosts, right?\n\n369\n00:19:13.530 --> 00:19:17.630\nSo I've got five VMware machines,\nESXI machines, and\n\n370\n00:19:17.630 --> 00:19:21.820\nthey've all got four network adapters,\nand they all run to a switch but\n\n371\n00:19:21.820 --> 00:19:23.990\nthe switch is just\na jumbled mess of cables.\n\n372\n00:19:23.990 --> 00:19:28.100\nI don't actually know what port my servers\nare plugged into, it's all just a mess.\n\n373\n00:19:28.100 --> 00:19:28.760\nSo what do you do?\n\n374\n00:19:29.860 --> 00:19:32.120\nYou go to the back of the server, you\nfind a cable, and you start to trace it.\n\n375\n00:19:32.120 --> 00:19:36.540\nYou follow the cable around and\nfigure out where it runs into the switch.\n\n376\n00:19:36.540 --> 00:19:38.980\nHalf the time, you unplug the cable while\nyou're doing it, then you get downtime,\n\n377\n00:19:38.980 --> 00:19:41.090\nand people get mad at you, right?\n\n378\n00:19:41.090 --> 00:19:45.920\nLLDP is an open standards protocol\nthat lets devices discover each other.\n\n379\n00:19:45.920 --> 00:19:49.462\nSo if you're switch supports LLDP,\nyou can log into the switch, and\n\n380\n00:19:49.462 --> 00:19:52.038\nyou can say tell me what\nis plugged into each port.\n\n381\n00:19:52.038 --> 00:19:56.420\nAnd it'll list the ports and the ID of\nwhat devices are plugged into each port.\n\n382\n00:19:56.420 --> 00:19:59.780\nIts a great way to figure out what\nport a server is plugged into.\n\n383\n00:19:59.780 --> 00:20:04.135\nThat's extremely handy when you're\nconfiguring things like virtual switch\n\n384\n00:20:04.135 --> 00:20:09.130\nuplinks or LACP, we'll see it later, or\neven just trying to troubleshoot a cable.\n\n385\n00:20:09.130 --> 00:20:11.920\nOne link goes down, what port'ss\nit plugged into on the switch?\n\n386\n00:20:11.920 --> 00:20:15.030\nSo LLDP lets us find that, and\nthat support is turned on by default.\n\n387\n00:20:16.530 --> 00:20:18.050\nLink Aggregation Control Protocol,\n\n388\n00:20:18.050 --> 00:20:20.600\nwe're gonna talk about that\nmore in another episode, too.\n\n389\n00:20:20.600 --> 00:20:23.955\nLACP is an advanced way of doing teaming.\n\n390\n00:20:23.955 --> 00:20:27.240\nWe can bond multiple\nnetwork links together\n\n391\n00:20:27.240 --> 00:20:31.820\nto create a higher bandwidth link that\ndoes load balancing and has failover.\n\n392\n00:20:31.820 --> 00:20:34.170\nIf one link fails,\nit just continues to use the other ones.\n\n393\n00:20:34.170 --> 00:20:37.380\nThe neat part about LACP is it can\nbond many, many adapters together.\n\n394\n00:20:37.380 --> 00:20:39.360\nYou can bond four,\neight adapters, 16 adapters,\n\n395\n00:20:39.360 --> 00:20:43.030\njust combine them all together and\ncan create this massive links.\n\n396\n00:20:43.030 --> 00:20:44.140\nSo that's what LACP is.\n\n397\n00:20:45.280 --> 00:20:45.870\nPort mirroring.\n\n398\n00:20:45.870 --> 00:20:48.610\nI mentioned a sniffer a moment ago.\n\n399\n00:20:48.610 --> 00:20:51.310\nA network sniffer is a device you\ncan plug into the network and\n\n400\n00:20:51.310 --> 00:20:53.630\nit'll just record all the traffic it sees.\n\n401\n00:20:53.630 --> 00:20:57.610\nThe problem is, on a switch network, the\nonly traffic you'll ever see is traffic\n\n402\n00:20:57.610 --> 00:21:01.150\ndestined for you, or\nbroadcasts, and that's it.\n\n403\n00:21:01.150 --> 00:21:04.180\nYou won't see, if I'm on computer A, and\n\n404\n00:21:04.180 --> 00:21:08.430\ncomputer B is talking to computer C,\nI won't see that.\n\n405\n00:21:08.430 --> 00:21:09.730\nI won't see B talking to C.\n\n406\n00:21:09.730 --> 00:21:12.810\nI only see people talking to A and\nbroadcasts.\n\n407\n00:21:12.810 --> 00:21:17.540\nSo if I wanna see they're talking about,\nI need to go to my switch, and\n\n408\n00:21:17.540 --> 00:21:22.340\nI need to mirror the traffic on their port\nto my port so I can get a copy of it.\n\n409\n00:21:22.340 --> 00:21:24.740\nSo almost every physical switch has that.\n\n410\n00:21:24.740 --> 00:21:27.300\nOn HP Procurves they\ncall it port mirroring.\n\n411\n00:21:27.300 --> 00:21:28.940\nOn most devices they\ncall it port mirroring.\n\n412\n00:21:28.940 --> 00:21:32.260\nCisco calls it the switch port analyzer,\nfor some reason,\n\n413\n00:21:32.260 --> 00:21:34.360\nI don't know why, but\nthey have a different name for it.\n\n414\n00:21:34.360 --> 00:21:36.940\nThey call it span, switch port analyzer.\n\n415\n00:21:36.940 --> 00:21:38.910\nBut in our virtual switch\nwe have the same thing,\n\n416\n00:21:38.910 --> 00:21:40.970\nexcept it's called a normal name,\nport mirroring.\n\n417\n00:21:40.970 --> 00:21:44.760\nI can take one of the ports\non my virtual switch and\n\n418\n00:21:44.760 --> 00:21:48.520\nI can clone the traffic, I can mirror\nthe traffic over to another port.\n\n419\n00:21:48.520 --> 00:21:50.990\nSo, I can have a virtual machine\nthat was running a sniffer and\n\n420\n00:21:50.990 --> 00:21:53.492\nit can now intercept that traffic for\nanalysis.\n\n421\n00:21:53.492 --> 00:21:58.989\nAnd unlike NetFlow, where NetFlow\ntells me about the communications,\n\n422\n00:21:58.989 --> 00:22:03.060\nport mirroring actually sends me the data,\nthe true payload.\n\n423\n00:22:03.060 --> 00:22:07.100\nSo now, not only do I see who's talking,\nbut I see what they actually transmitted,\n\n424\n00:22:07.100 --> 00:22:09.440\nand that can be useful in\ntroubleshooting sometimes.\n\n425\n00:22:09.440 --> 00:22:11.566\nOr just being nosy, one or the other.\n\n426\n00:22:11.566 --> 00:22:14.460\nIGMP and MLD support.\n\n427\n00:22:14.460 --> 00:22:20.810\nOkay, IGMP is a group management protocol,\nit's design for a multicasts.\n\n428\n00:22:20.810 --> 00:22:25.400\nWhen you have a multicast, in networking\nyou have unicast where one person talks to\n\n429\n00:22:25.400 --> 00:22:29.080\none person, and you have a broadcast,\nwhere one person talks to everybody.\n\n430\n00:22:29.080 --> 00:22:31.880\nAnd a multicast is kind of in between,\n\n431\n00:22:31.880 --> 00:22:34.830\nit's where one person talks\nto a group of people, and\n\n432\n00:22:34.830 --> 00:22:38.230\nthat group, those are people that voted\nto be a part of that communication.\n\n433\n00:22:38.230 --> 00:22:41.220\nAnd the way they vote is by using IGMP.\n\n434\n00:22:41.220 --> 00:22:44.220\nSo we have to be able to\nvote to join that multicast.\n\n435\n00:22:44.220 --> 00:22:51.000\nMLD is link discovery, it's used for IPv6\ncuz in IPv6 you don't have broadcasts, and\n\n436\n00:22:51.000 --> 00:22:54.758\nso you have to be able to discover other\npeople that are on the network with you.\n\n437\n00:22:54.758 --> 00:22:58.050\nAnd it uses MLD,\nit’s a multicast communication.\n\n438\n00:22:58.050 --> 00:23:01.190\nSo, IGMP and MLD are both multicast heavy.\n\n439\n00:23:01.190 --> 00:23:05.790\nMLD is really just using IPv6\nversus IGMP that's using IPv4, but\n\n440\n00:23:05.790 --> 00:23:07.205\nthey both serve the same purpose.\n\n441\n00:23:07.205 --> 00:23:10.660\nThat functionality is turned on so\nthat VMware can recognize\n\n442\n00:23:10.660 --> 00:23:14.630\nwhen one communication might need to\ngo to more than one virtual machine,\n\n443\n00:23:14.630 --> 00:23:17.300\nmore than one virtual machine may have\nvoted to be a part of that group and so\n\n444\n00:23:17.300 --> 00:23:18.430\nthey need to get copies of that data.\n\n445\n00:23:19.550 --> 00:23:21.230\nAnd then the last one is the health check.\n\n446\n00:23:21.230 --> 00:23:24.600\nThe health check is one of the cooler\nthings because what it does is it allows\n\n447\n00:23:24.600 --> 00:23:28.750\nVMware to evaluate whether\nthe virtual switch is healthy.\n\n448\n00:23:28.750 --> 00:23:32.270\nIt can look and say, all right, you got\nhost one and host two, and on host one,\n\n449\n00:23:32.270 --> 00:23:36.290\nI know it's got link lights, but\nthat switch isn't working right.\n\n450\n00:23:36.290 --> 00:23:37.550\nSo, lets fail over,\n\n451\n00:23:37.550 --> 00:23:40.500\nlets move the virtual machines over to the\nother host because the other host is okay.\n\n452\n00:23:40.500 --> 00:23:43.420\nIt needs to be able to analyze\nwhat's going on inside of\n\n453\n00:23:43.420 --> 00:23:46.840\nthat virtual switch to make\nsure that it is truly healthy.\n\n454\n00:23:46.840 --> 00:23:49.432\nAnd in the original versions\nin 5.0 they didn't have that.\n\n455\n00:23:49.432 --> 00:23:53.065\nAnd so, sometimes you'd have where\nyour network was not working and\n\n456\n00:23:53.065 --> 00:23:54.576\nit wouldn't fail you over.\n\n457\n00:23:54.576 --> 00:23:58.774\nIn the original vSwitches the only thing\nit would detect is if the physical uplink\n\n458\n00:23:58.774 --> 00:23:59.402\nwent down.\n\n459\n00:23:59.402 --> 00:24:02.107\nBut there is plenty of times where\nyour network isn't working but\n\n460\n00:24:02.107 --> 00:24:05.230\nyour link lights are still up and\nthe virtual switch wouldn't failover.\n\n461\n00:24:05.230 --> 00:24:08.500\nSo that health check is a great way for\nit to get additional data and\n\n462\n00:24:08.500 --> 00:24:10.470\nmake a right decision on when to failover.\n\n463\n00:24:10.470 --> 00:24:13.210\nSo these are all features.\n\n464\n00:24:13.210 --> 00:24:18.170\nThat are a part of the switch and you'll\nsee the majority of them are supported and\n\n465\n00:24:18.170 --> 00:24:20.530\nthey're actually on by\ndefault if we configure them.\n\n466\n00:24:20.530 --> 00:24:23.730\nIf you dig around in the settings for\nyour virtual switch.\n\n467\n00:24:23.730 --> 00:24:27.430\nSo if I go into,\noops I'm on my legacy switch.\n\n468\n00:24:27.430 --> 00:24:30.420\nIf I go into my regular switch here and\nI go into manage.\n\n469\n00:24:30.420 --> 00:24:34.440\nAnd look across the top we've got a ton\nof different things that we can define.\n\n470\n00:24:34.440 --> 00:24:37.850\nAnd if we go under settings,\nhere's where you'll start to see\n\n471\n00:24:37.850 --> 00:24:41.250\nwhere you can configure netflow\nif we want to set that up, right.\n\n472\n00:24:41.250 --> 00:24:43.570\nWe need a collector ip address,\n\n473\n00:24:43.570 --> 00:24:46.050\nwho we're going to send all\nthat reporting information to.\n\n474\n00:24:46.050 --> 00:24:48.380\nThis is where we run\nthe software to interpret it.\n\n475\n00:24:48.380 --> 00:24:49.870\nI've got my port mirroring.\n\n476\n00:24:49.870 --> 00:24:53.960\nIf I want to clone ports together, I would\nneed to come in and add the port pairs,\n\n477\n00:24:53.960 --> 00:24:58.080\nthe source port and the destination\nport my health checks, right?\n\n478\n00:24:58.080 --> 00:24:59.040\nWhat are we tracking?\n\n479\n00:24:59.040 --> 00:25:00.360\nAre we tracking VLANs?\n\n480\n00:25:00.360 --> 00:25:02.020\nAre we tracking teaming and failover?\n\n481\n00:25:02.020 --> 00:25:03.210\nAnd what other information?\n\n482\n00:25:03.210 --> 00:25:05.000\nWe can configure that right here.\n\n483\n00:25:05.000 --> 00:25:06.720\nThe support is there.\n\n484\n00:25:06.720 --> 00:25:09.350\nIt's up to us to turn them on.\n\n485\n00:25:09.350 --> 00:25:11.510\nOther ones like LLDP?\n\n486\n00:25:11.510 --> 00:25:13.310\nLLDP is just on and working.\n\n487\n00:25:13.310 --> 00:25:15.630\nWe don't actually have\nto tweak that at all.\n\n488\n00:25:15.630 --> 00:25:17.340\nIt's just up and doing its thing.\n\n489\n00:25:17.340 --> 00:25:20.210\nSo I don't actually see\noptions over here for it.\n\n490\n00:25:20.210 --> 00:25:22.810\nIf I take a look at my properties,\n\n491\n00:25:22.810 --> 00:25:24.800\nsometimes the information\nwill show up in here.\n\n492\n00:25:24.800 --> 00:25:27.620\nSo my discovery protocol for\nexample, actually showing CDP,\n\n493\n00:25:27.620 --> 00:25:32.180\nCisco Discovery Protocol, it knows\nthat I'm plugged into a Cisco switch.\n\n494\n00:25:32.180 --> 00:25:34.750\nIf I wasn't plugged into a Cisco\nswitch it would be doing the LLDP.\n\n495\n00:25:35.990 --> 00:25:39.080\nAnd then under Topology we can\nget that summary of our machine.\n\n496\n00:25:39.080 --> 00:25:44.950\nAnd when I look at my summary,\nmy virtual switch has two port groups and\n\n497\n00:25:44.950 --> 00:25:47.690\non the uplink side, remember, I said\nit was going to have four uplinks but\n\n498\n00:25:47.690 --> 00:25:50.038\nI never did attach NICs to\nthose two other uplinks.\n\n499\n00:25:50.038 --> 00:25:54.910\nSo, I've got two NICs in Uplink 1 and\nUplink 2 and my switch is up and\n\n500\n00:25:54.910 --> 00:25:56.470\nhappy, right.\n\n501\n00:25:56.470 --> 00:25:59.200\nSo everything's pretty much running,\nI've got it set up the way that I want and\n\n502\n00:25:59.200 --> 00:26:01.580\nthe services are doing\nwhat the services do.\n\n503\n00:26:01.580 --> 00:26:03.900\nThat's pretty much it for\nthe distributable virtual switch.\n\n504\n00:26:03.900 --> 00:26:04.670\nAll right.\n\n505\n00:26:04.670 --> 00:26:07.040\nSo let's wrap this one up here.\n\n506\n00:26:07.040 --> 00:26:08.640\nThis is a pretty good spot\nto wrap this episode up.\n\n507\n00:26:08.640 --> 00:26:11.630\nBecause what we've seen in the first\nepisode was creating a distributable\n\n508\n00:26:11.630 --> 00:26:12.890\nvirtual switch.\n\n509\n00:26:12.890 --> 00:26:16.140\nIn this episode we saw moving\na virtual machine into it.\n\n510\n00:26:16.140 --> 00:26:17.680\nSo now we're actually using it.\n\n511\n00:26:17.680 --> 00:26:19.420\nAnd all the bells and whistles, right?\n\n512\n00:26:19.420 --> 00:26:22.290\nThe advanced features and\nsupport that we can turn on.\n\n513\n00:26:22.290 --> 00:26:26.510\nThe only thing we didn't see is\nI didn't actually show NIOC,\n\n514\n00:26:26.510 --> 00:26:28.660\nthe network input output control.\n\n515\n00:26:28.660 --> 00:26:32.230\nAnd I didn't show the link aggregation and\ncontrol protocol, LACP.\n\n516\n00:26:32.230 --> 00:26:34.370\nSo what we're gonna do is we're\ngonna do an advanced episode.\n\n517\n00:26:34.370 --> 00:26:38.360\nAnother episode where we'll cover NIOC and\nLACP so you can see those in detail and\n\n518\n00:26:38.360 --> 00:26:40.330\nthen that will wrap up\ndistributive virtual switches.\n\n519\n00:26:40.330 --> 00:26:42.390\nIt's a big topic, right?\n\n520\n00:26:42.390 --> 00:26:45.430\nBut the neat thing about these is\nonce you get them set up, it's\n\n521\n00:26:45.430 --> 00:26:48.370\npretty much like the rotisserie chicken\ncommercials, right, set it and forget it.\n\n522\n00:26:48.370 --> 00:26:50.920\nYou get the switches set up,\nand they're done, and\n\n523\n00:26:50.920 --> 00:26:52.460\nthat's the last you mess with them.\n\n524\n00:26:52.460 --> 00:26:56.330\nThing is you just have to know the\nfeatures, turn on the ones you want, and\n\n525\n00:26:56.330 --> 00:26:57.030\nget it in place.\n\n526\n00:26:57.030 --> 00:26:59.660\nAnd just take advantage of\neverything that's in there.\n\n527\n00:26:59.660 --> 00:27:00.730\nAll right well that's about it for\n\n528\n00:27:00.730 --> 00:27:02.350\ndistributive virtual\nswitches this episode.\n\n529\n00:27:02.350 --> 00:27:04.140\nI do hope you guys enjoyed it.\n\n530\n00:27:04.140 --> 00:27:07.143\nBut for now, signing off for\nITProTV I'm Don Pezet.\n\n531\n00:27:07.143 --> 00:27:08.895\nAnd I'll see ya next time.\n\n532\n00:27:08.895 --> 00:27:16.960\n[MUSIC]\n\n",
          "vimeoId": "168932277"
        },
        {
          "description": "In this episode, Don discusses some of the advanced functionality available in VMware vSwitches. He begins by demonstrating how to use the Link Aggregation and Control Protocol (LACP) to bundle ports for increased performance and redundancy. Then he demonstrates Network I/O Control (NIOC) and how it can help prevent bandwidth starvation.",
          "length": "1990",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-3-lacp_and_nioc-053116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-3-lacp_and_nioc-053116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-3-3-lacp_and_nioc-053116-1-sm.jpg",
          "title": "LACP and NI/OC",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.383 --> 00:00:15.226\nAll right, good morning,\ngood afternoon, and good evening and\n\n3\n00:00:15.226 --> 00:00:17.201\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:17.201 --> 00:00:18.440\nI'm your host Don Pezet,\n\n5\n00:00:18.440 --> 00:00:23.410\nback again with another episode of\nVMware Certified Professional version six.\n\n6\n00:00:23.410 --> 00:00:25.925\nNow in our last few episodes,\nwe've been tackling networking.\n\n7\n00:00:25.925 --> 00:00:29.910\nWe saw V switches, we saw DV switches,\nand in this episode,\n\n8\n00:00:29.910 --> 00:00:33.910\nwe're gonna continue on with DV switches,\nand talk about some of the more advanced\n\n9\n00:00:33.910 --> 00:00:36.210\nfeatures that are baked\naway inside of them.\n\n10\n00:00:36.210 --> 00:00:37.650\nNow in our previous episodes,\n\n11\n00:00:37.650 --> 00:00:40.580\nwe saw how to get DV switches set up,\nthe distributed virtual switches.\n\n12\n00:00:40.580 --> 00:00:43.460\nWe saw what they can do and\nhow you get them in place.\n\n13\n00:00:43.460 --> 00:00:46.270\nAnd there were two special\nfeatures that I said I was gonna\n\n14\n00:00:46.270 --> 00:00:47.820\ntalk about a little bit later.\n\n15\n00:00:47.820 --> 00:00:49.220\nWell, this is that later.\n\n16\n00:00:49.220 --> 00:00:55.020\nSo, one of the features is link\naggregation control protocol or LACP,\n\n17\n00:00:55.020 --> 00:01:00.480\nthe other one is network input\noutput control, or NIOC.\n\n18\n00:01:00.480 --> 00:01:04.550\nMaybe you call it Nioc, I don't know,\nN-I-O-C is what I call it.\n\n19\n00:01:04.550 --> 00:01:07.770\nThose two features are some really neat\nones that are baked into the distributive\n\n20\n00:01:07.770 --> 00:01:09.000\nvirtual switches.\n\n21\n00:01:09.000 --> 00:01:10.050\nThey haven't been around forever.\n\n22\n00:01:10.050 --> 00:01:11.390\nThese are things that were introduced or\n\n23\n00:01:11.390 --> 00:01:13.720\nupgraded in newer versions\nof the DV switch.\n\n24\n00:01:13.720 --> 00:01:15.170\nFor the exam and for real life,\n\n25\n00:01:15.170 --> 00:01:18.870\nwe need to know about them, because they\ncan actually do a couple of neat things.\n\n26\n00:01:18.870 --> 00:01:20.630\nLet's start with LACP.\n\n27\n00:01:20.630 --> 00:01:23.650\nNow when I created the distributed\nvirtual switch in the other episode.\n\n28\n00:01:23.650 --> 00:01:25.690\nIn fact, here, let's take a look\nat what we've got so far, right?\n\n29\n00:01:25.690 --> 00:01:28.500\nSo in our story so far.\n\n30\n00:01:28.500 --> 00:01:30.390\nIf I go down to my networking and\n\n31\n00:01:30.390 --> 00:01:34.700\ngo down to the distributed virtual switch\nthat we made in the previous episodes.\n\n32\n00:01:34.700 --> 00:01:37.590\nWhen we take a look at\nthe switch as we've made it so\n\n33\n00:01:37.590 --> 00:01:42.180\nfar, there's not a whole\nheck of a lot to it, right?\n\n34\n00:01:42.180 --> 00:01:45.889\nBasically I created some port groups and\ntucked them away in there and\n\n35\n00:01:47.240 --> 00:01:51.730\ngot this set up as a very simple\njust DV switch that's in place.\n\n36\n00:01:51.730 --> 00:01:54.860\nAnd one of the things that I did,\none of the options that it gave me,\n\n37\n00:01:54.860 --> 00:01:58.750\nif I can get my little\nsummary screen pulled up,\n\n38\n00:01:58.750 --> 00:02:02.430\nis that it gave me the option to add\nmultiple network interfaces to it.\n\n39\n00:02:02.430 --> 00:02:03.500\nAnd so I did, right?\n\n40\n00:02:03.500 --> 00:02:06.160\nI added a handful of\nnetwork interfaces to it so\n\n41\n00:02:06.160 --> 00:02:09.530\nthat I'd be able to have failover and\nredundancy.\n\n42\n00:02:09.530 --> 00:02:12.370\nSo when we look at it,\nyou'll see my networks, or the three,\n\n43\n00:02:12.370 --> 00:02:14.250\nbecause of the port groups that I made.\n\n44\n00:02:14.250 --> 00:02:16.560\nAnd when we define the ports\non those port groups,\n\n45\n00:02:16.560 --> 00:02:19.470\nI added a couple of different\nuplinks in them to manage them.\n\n46\n00:02:19.470 --> 00:02:22.420\nActually we can see it a little\nbit better on the host screen.\n\n47\n00:02:22.420 --> 00:02:25.329\nLet me jump over to the host screen so\nwe can see it here.\n\n48\n00:02:26.780 --> 00:02:27.420\nAnd pull it up.\n\n49\n00:02:27.420 --> 00:02:27.990\nThere we go.\n\n50\n00:02:27.990 --> 00:02:29.670\nThis will show a little better.\n\n51\n00:02:29.670 --> 00:02:32.810\nLet me see if I can't make\nthat somewhat bigger.\n\n52\n00:02:32.810 --> 00:02:36.350\nAll right, so here's the distributed\nvirtual switch as we made it.\n\n53\n00:02:36.350 --> 00:02:38.040\nI've got VM Sales.\n\n54\n00:02:38.040 --> 00:02:39.560\nWe had another VM Marketing.\n\n55\n00:02:39.560 --> 00:02:41.890\nThere's no virtual machines on it,\nso it's not showing up here.\n\n56\n00:02:41.890 --> 00:02:45.560\nBut we have these physical adapters and\ntwo of them are empty but\n\n57\n00:02:45.560 --> 00:02:47.630\nthese top two here, uplink 1, uplink 2.\n\n58\n00:02:47.630 --> 00:02:51.450\nThose are network adaptors\nthat are in the physical host.\n\n59\n00:02:51.450 --> 00:02:56.380\nSo I've got more than one uplink adapter\nin this distributive virtual switch.\n\n60\n00:02:56.380 --> 00:02:58.750\nSo what happens when we do that?\n\n61\n00:02:58.750 --> 00:03:02.360\nWhen you have more than one physical\nadaptor attached to a switch\n\n62\n00:03:02.360 --> 00:03:05.010\nIt does teaming and failover.\n\n63\n00:03:05.010 --> 00:03:08.000\nSo when you configure that switch that's\nan option that you have to define,\n\n64\n00:03:08.000 --> 00:03:11.780\nis how you want teaming and\nfailover to be supported on the switch.\n\n65\n00:03:11.780 --> 00:03:16.090\nNow the default teaming and\nfailover is actually very basic.\n\n66\n00:03:16.090 --> 00:03:21.050\nThe way it works is teaming,\nthe two network adapters get combined, and\n\n67\n00:03:21.050 --> 00:03:23.930\nwhen virtual machines start to\ncommunicate it load balances them.\n\n68\n00:03:23.930 --> 00:03:26.550\nAnd it load balances them\nby Mac address by default.\n\n69\n00:03:26.550 --> 00:03:29.130\nSo it's taking each virtual machine and\nit is saying hey,\n\n70\n00:03:29.130 --> 00:03:31.710\nVM one goes out the first network adapter.\n\n71\n00:03:31.710 --> 00:03:33.270\nVM two goes out the second adapter.\n\n72\n00:03:33.270 --> 00:03:34.860\nVM three goes out the first adapter.\n\n73\n00:03:34.860 --> 00:03:36.380\nVM four goes out the second adapter.\n\n74\n00:03:36.380 --> 00:03:38.550\nIt's just round robin, right?\n\n75\n00:03:38.550 --> 00:03:43.450\nIt's not the best form of load balancing\nbecause you might have one virtual machine\n\n76\n00:03:43.450 --> 00:03:46.980\nthat generates a huge amount of traffic,\nand other virtual machines that don't.\n\n77\n00:03:46.980 --> 00:03:51.390\nBut they're being balanced\nevenly in terms of sheer number\n\n78\n00:03:51.390 --> 00:03:54.190\nof VMs on the different interfaces,\nso it's not always equal.\n\n79\n00:03:54.190 --> 00:03:57.340\nIt's not always balanced,\nit's not the greatest way of doing things.\n\n80\n00:03:57.340 --> 00:03:58.920\nThat's the teaming side.\n\n81\n00:03:58.920 --> 00:04:00.290\nOn the switch side,\n\n82\n00:04:00.290 --> 00:04:02.630\nthey just see MAC addresses coming\nout at the different interfaces.\n\n83\n00:04:02.630 --> 00:04:05.530\nThe switch has no idea that those\ninterfaces are teamed at all,\n\n84\n00:04:05.530 --> 00:04:08.286\nit just sees different MACs and different\ninterfaces and responds appropriately.\n\n85\n00:04:08.286 --> 00:04:12.400\nOn a failover side, if one link dies,\n\n86\n00:04:12.400 --> 00:04:16.300\nit just shuts it down and then all\nthe traffic goes over the other link.\n\n87\n00:04:16.300 --> 00:04:18.710\nYour switch sees that and\nrelearns the MAC addresses,\n\n88\n00:04:18.710 --> 00:04:21.300\nlearns that the MAC addresses\nmoved to this other interface.\n\n89\n00:04:21.300 --> 00:04:23.770\nSo the switch doesn't\nrealize what's going on.\n\n90\n00:04:23.770 --> 00:04:25.830\nIt just thinks there's\nother switches out there.\n\n91\n00:04:25.830 --> 00:04:29.750\nOn the distributed virtual side it's\njust doing basic load balancing.\n\n92\n00:04:29.750 --> 00:04:31.570\nSo the built in teaming and failover,\n\n93\n00:04:31.570 --> 00:04:35.860\nwhat's going on right now in this set up,\nis actually not very robust.\n\n94\n00:04:35.860 --> 00:04:40.040\nLACP on the other hand is\na different way of doing things.\n\n95\n00:04:40.040 --> 00:04:43.100\nLACP is Link Aggregation and\nControl Protocol.\n\n96\n00:04:43.100 --> 00:04:46.785\nThe link aggregation, that means taking\nmore than one physical interface like\n\n97\n00:04:46.785 --> 00:04:50.440\nthese and\ncombining them into a virtual interface.\n\n98\n00:04:50.440 --> 00:04:54.500\nWhen it does that, it no longer treats\nit as two different physical adapters.\n\n99\n00:04:54.500 --> 00:04:57.280\nIt treats it as one virtual adapter.\n\n100\n00:04:57.280 --> 00:05:02.100\nSo when we send traffic out, the traffic\nis being sent spread across both links.\n\n101\n00:05:02.100 --> 00:05:03.660\nAnd it's doing it in a way that is very,\n\n102\n00:05:03.660 --> 00:05:07.240\nvery even,\nevenly distributed between the two.\n\n103\n00:05:07.240 --> 00:05:09.770\nAnd more importantly,\nthe switch on the other end.\n\n104\n00:05:09.770 --> 00:05:13.600\nYou might have a CISCO or HP or\nJuniper switch or whatever.\n\n105\n00:05:13.600 --> 00:05:15.620\nIt can run LACP also.\n\n106\n00:05:15.620 --> 00:05:16.970\nAnd so it's aware.\n\n107\n00:05:16.970 --> 00:05:19.910\nIt knows that it's a bonded port.\n\n108\n00:05:19.910 --> 00:05:23.650\nSo when you have failover, the switch\ndoesn't have to learn the MAC addresses.\n\n109\n00:05:23.650 --> 00:05:26.850\nThe switch already knows the MAC addresses\nare valid on any of the physical ports\n\n110\n00:05:26.850 --> 00:05:28.390\nin that LACP bundle.\n\n111\n00:05:28.390 --> 00:05:33.140\nSo we get much faster failover, and\nwe get much better load balancing, so\n\n112\n00:05:33.140 --> 00:05:34.520\nthat's the link aggregation part.\n\n113\n00:05:34.520 --> 00:05:38.470\nThe CP, the control protocol,\nwell, protocols,\n\n114\n00:05:38.470 --> 00:05:42.950\nbut control is how we handle communicating\nwith the switch on the other side.\n\n115\n00:05:42.950 --> 00:05:48.180\nBecause the switch and VMware, or ESXi,\nare gonna have to talk and play nice.\n\n116\n00:05:48.180 --> 00:05:51.730\nAnd LACP is an open standard so\nthat anybody can support it.\n\n117\n00:05:51.730 --> 00:05:56.040\nBe careful because there are some\nproprietary protocols, like Cisco.\n\n118\n00:05:56.040 --> 00:05:59.140\nCisco has the Port Aggregation Protocol,\nor PAGP.\n\n119\n00:05:59.140 --> 00:06:02.920\nPAgP is Cisco only, but\nCisco supports LACP also.\n\n120\n00:06:02.920 --> 00:06:06.780\nSo we want to use LACP if we can\nbecause VMware supports it too, right.\n\n121\n00:06:06.780 --> 00:06:08.460\nNow we can get the devices talking and\nthey're happy.\n\n122\n00:06:08.460 --> 00:06:11.770\nSo that's a better solution\nthan what I've got right here.\n\n123\n00:06:11.770 --> 00:06:13.890\nWhat I've got,\nwhen we set up this DV switch,\n\n124\n00:06:13.890 --> 00:06:15.610\nI just added the uplinks and that was it.\n\n125\n00:06:15.610 --> 00:06:17.900\nIt does the teaming and failover for me.\n\n126\n00:06:17.900 --> 00:06:21.440\nAnd some of those options you'll see\npop up in a few different screens,\n\n127\n00:06:21.440 --> 00:06:26.060\nlike when I go into some of my settings,\nusually for the switches themselves.\n\n128\n00:06:26.060 --> 00:06:31.000\nIf I go back to my switch screens and\nI take a look at my settings in here,\n\n129\n00:06:31.000 --> 00:06:34.650\nyou'll sometimes see teaming and\nfailover options pop up.\n\n130\n00:06:34.650 --> 00:06:37.190\nIf I had a regular switch, I would see it.\n\n131\n00:06:37.190 --> 00:06:41.700\nIf I jump in and well,\nit's buried in here somewhere but\n\n132\n00:06:41.700 --> 00:06:44.720\nin a DV Switch instead of teaming and\nfailover we see LACP.\n\n133\n00:06:44.720 --> 00:06:47.000\nBecause that's what they want\nthey want us to configure here,\n\n134\n00:06:47.000 --> 00:06:49.600\nto get that extra support put into place.\n\n135\n00:06:49.600 --> 00:06:51.700\nTeaming and\nfailover is kind of the old way.\n\n136\n00:06:51.700 --> 00:06:53.980\nLACP, that's the new way.\n\n137\n00:06:53.980 --> 00:06:56.310\nSo what we're gonna do is\nwe're gonna enable LACP.\n\n138\n00:06:56.310 --> 00:06:57.890\nWe're gonna get it set up here.\n\n139\n00:06:57.890 --> 00:07:02.060\nAnd there's really two different\nthings that have to occur.\n\n140\n00:07:02.060 --> 00:07:05.280\nOne, I got to go to my switch and\nmake sure it's turned on, on my switch.\n\n141\n00:07:05.280 --> 00:07:10.050\nWhoever's physical switch you have, Cisco,\nwhatever, you need to log in to it and\n\n142\n00:07:10.050 --> 00:07:12.970\nconfigure LACP on the ports\nthat we're plugged into.\n\n143\n00:07:12.970 --> 00:07:16.960\nOnce that's on,\nthen we go to VMware into our V center and\n\n144\n00:07:16.960 --> 00:07:18.720\nwe enable it on the DV switch.\n\n145\n00:07:18.720 --> 00:07:21.820\nSo I'm on my DV switch here,\nand i'm looking at LACP, and\n\n146\n00:07:21.820 --> 00:07:26.860\nit's asking me for\na link aggregation group.\n\n147\n00:07:26.860 --> 00:07:29.170\nA LAG.\nWhat a LAG is,\n\n148\n00:07:29.170 --> 00:07:30.550\nis simply a collection of ports.\n\n149\n00:07:30.550 --> 00:07:36.198\nI'm gonna gather some ports together\nto put them into a LACP bundle.\n\n150\n00:07:36.198 --> 00:07:39.530\nSo, I'm gonna hit add, and really all\nyou're doing is creating one with a name.\n\n151\n00:07:39.530 --> 00:07:44.060\nIt's not asking me for\nactual network interfaces yet, so\n\n152\n00:07:44.060 --> 00:07:46.190\nI can come in here and\nI can create a bundle.\n\n153\n00:07:46.190 --> 00:07:52.310\nSo I might say, maybe this will be for my,\nI can create it from the DV switch itself,\n\n154\n00:07:52.310 --> 00:07:53.820\nor I can create it from\none of my port groups.\n\n155\n00:07:53.820 --> 00:07:56.257\nLike this is just gonna be for\nsales, or just for marketing.\n\n156\n00:07:56.257 --> 00:07:57.919\nSo you can come in and define that.\n\n157\n00:07:57.919 --> 00:08:00.246\nWhen you create these, look down here.\n\n158\n00:08:00.246 --> 00:08:03.231\nYou'll see where you can\ndefine If this was just for\n\n159\n00:08:03.231 --> 00:08:07.327\nsales I could tie it to my sales VLAN or\nif I wanted to carry both sales and\n\n160\n00:08:07.327 --> 00:08:11.300\nmarketing I could turn on trunking and\nnow it would carry those two.\n\n161\n00:08:11.300 --> 00:08:14.010\nSo you can set up that\nflexibility on the link.\n\n162\n00:08:14.010 --> 00:08:16.190\nFor me, I'm going to create\na link aggregation group and\n\n163\n00:08:16.190 --> 00:08:19.984\nI'll just call it my cvSwitch-LAG1.\n\n164\n00:08:19.984 --> 00:08:24.710\nJust trying to give it a name so\nI can recognize exactly what it is.\n\n165\n00:08:24.710 --> 00:08:27.080\nAnd it's asking for\na number of ports, all right?\n\n166\n00:08:27.080 --> 00:08:30.480\nNumber of ports is talking about how many\nconnections to a physical switch that I've\n\n167\n00:08:30.480 --> 00:08:31.480\ngot, right?\n\n168\n00:08:31.480 --> 00:08:35.310\nAnd if I set it to 2,\nwell it assumes I'm gonna have two ports.\n\n169\n00:08:35.310 --> 00:08:37.850\nBut with the DV switcher\nspread across multiple hosts.\n\n170\n00:08:37.850 --> 00:08:41.930\nSo I could have two ports on each host and\nactually have far more than just two.\n\n171\n00:08:43.010 --> 00:08:43.820\nThen the mode.\n\n172\n00:08:43.820 --> 00:08:45.000\nMode is kind of important.\n\n173\n00:08:45.000 --> 00:08:47.870\nLike PS 2 modes active and\npassive all right.\n\n174\n00:08:47.870 --> 00:08:52.390\nWith the active mode, what's gonna happen\nis our system is gonna fire up and\n\n175\n00:08:52.390 --> 00:08:56.460\nas soon as we detect link lights,\nwe're gonna try and build a LACP bundle.\n\n176\n00:08:56.460 --> 00:08:59.370\nSo we're gonna try and\nbundle with the switch on the other side.\n\n177\n00:08:59.370 --> 00:09:03.990\nIf the other side fails, then we'll drop\ndown and run them as standalone ports,\n\n178\n00:09:03.990 --> 00:09:05.650\nwhich is not really gonna work for us.\n\n179\n00:09:05.650 --> 00:09:08.110\nSo we really want it to become a bundle.\n\n180\n00:09:08.110 --> 00:09:12.220\nIf you go into passive, your interfaces\nwill come up as standalone ports.\n\n181\n00:09:12.220 --> 00:09:16.210\nAnd the switch on the other side\nhas to ask us to go active.\n\n182\n00:09:16.210 --> 00:09:19.870\nAnd then if somebody else asks us,\nthen we'll do it.\n\n183\n00:09:19.870 --> 00:09:21.420\nWe'll go ahead and\nbuild like people on noble,\n\n184\n00:09:21.420 --> 00:09:22.490\nbut we won't do it ourselves, right.\n\n185\n00:09:22.490 --> 00:09:23.860\nSomebody's gotta ask us.\n\n186\n00:09:23.860 --> 00:09:25.690\nNow, the reason I point this out here,\n\n187\n00:09:25.690 --> 00:09:27.150\nyou're almost always going\nto want to go active.\n\n188\n00:09:27.150 --> 00:09:30.169\nThat you want to go active, you wanna\nactively try and create that bundle.\n\n189\n00:09:31.680 --> 00:09:35.990\nIf one side is active and one side\nis passive, you'll build a bundle.\n\n190\n00:09:35.990 --> 00:09:38.900\nIf both sides are active,\nyou'll build a bundle.\n\n191\n00:09:38.900 --> 00:09:42.890\nBut if both sides are passive,\nthat's where you'll have a problem.\n\n192\n00:09:42.890 --> 00:09:45.530\nOne side will never ask, and\nthe other side will never ask, and\n\n193\n00:09:45.530 --> 00:09:46.530\nthey don't bundle.\n\n194\n00:09:46.530 --> 00:09:47.470\nSo be aware of that.\n\n195\n00:09:47.470 --> 00:09:49.720\nNever end up in an environment where\nboth sides are set to passive.\n\n196\n00:09:49.720 --> 00:09:52.180\nYou might as well have not turned\non LACP in the first place.\n\n197\n00:09:52.180 --> 00:09:54.140\nI'm going to go ahead and\nset it to active, and\n\n198\n00:09:54.140 --> 00:09:56.190\nthen I get to pick\nthe load balancing mode.\n\n199\n00:09:56.190 --> 00:09:59.010\nNow LACP load balances very effectively.\n\n200\n00:09:59.010 --> 00:10:03.460\nSee how it's source and destination IP,\nTCP and UDP port, and VLAN.\n\n201\n00:10:03.460 --> 00:10:06.400\nIt's using all of those Those\nthings to figure out how to best\n\n202\n00:10:06.400 --> 00:10:07.720\nload balance people.\n\n203\n00:10:07.720 --> 00:10:09.980\nNot just Mac address and that's it right?\n\n204\n00:10:09.980 --> 00:10:11.830\nSo this is far more reliable.\n\n205\n00:10:11.830 --> 00:10:13.090\nBut you can change it.\n\n206\n00:10:13.090 --> 00:10:17.740\nYou can switch it to MAC address if that's\nwhat you wanna do or VLAN number or so on.\n\n207\n00:10:17.740 --> 00:10:19.810\nYou got a ton of options in here.\n\n208\n00:10:19.810 --> 00:10:21.670\nDestination IP and so on.\n\n209\n00:10:21.670 --> 00:10:23.850\nYou can pick what method\nit is that you want.\n\n210\n00:10:23.850 --> 00:10:26.050\nBut the default is honestly\none of the best right?\n\n211\n00:10:26.050 --> 00:10:27.889\nThis is gonna give us very even balancing.\n\n212\n00:10:29.440 --> 00:10:32.920\nAll right, so\nthat's gonna be my link aggregation group.\n\n213\n00:10:32.920 --> 00:10:34.950\nI'm gonna go ahead and\nsay OK and get that created.\n\n214\n00:10:34.950 --> 00:10:38.490\nNow you'll notice it never asked\nme to pick any physical adapters.\n\n215\n00:10:38.490 --> 00:10:40.070\nSo how does it know what to bundle?\n\n216\n00:10:40.070 --> 00:10:41.220\nThe short answer is it doesn't.\n\n217\n00:10:41.220 --> 00:10:43.350\nIt doesn't know what to bundle just yet.\n\n218\n00:10:43.350 --> 00:10:45.270\nAnd here's the reason.\n\n219\n00:10:45.270 --> 00:10:48.590\nThose physical adapters,\nmine are already in use.\n\n220\n00:10:48.590 --> 00:10:51.590\nI've already tied my physical\nadapters to the port groups.\n\n221\n00:10:51.590 --> 00:10:54.410\nSo if I start yanking physical\nadapters and moving over here,\n\n222\n00:10:54.410 --> 00:10:57.820\nwhat's going to happen,\nI'm going to have down time, right?\n\n223\n00:10:57.820 --> 00:11:01.800\nI could do that, if this was a brand new\nvSphere environment, I was just setting it\n\n224\n00:11:01.800 --> 00:11:03.810\nup, then I wouldn't care about downtime,\nit's brand new, right?\n\n225\n00:11:03.810 --> 00:11:06.840\nI can add this in, add my physical\nadapters and be in business.\n\n226\n00:11:06.840 --> 00:11:09.310\nBut if this is a pre-existing\nenvironment like mine,\n\n227\n00:11:09.310 --> 00:11:11.890\nI wanna minimize downtime\nas much as possible.\n\n228\n00:11:11.890 --> 00:11:14.260\nSo the way we do that is\nby doing a migration.\n\n229\n00:11:14.260 --> 00:11:16.180\nAnd the migration is three steps.\n\n230\n00:11:16.180 --> 00:11:18.780\nIt's actually not very hard they give\nus a little wizard that helps us.\n\n231\n00:11:18.780 --> 00:11:22.580\nYou'll see that link right here\nmigrating network traffic to LAGs.\n\n232\n00:11:22.580 --> 00:11:25.360\nThe advantage of doing it this\nway is you don't get downtime.\n\n233\n00:11:25.360 --> 00:11:29.530\nYou move your virtual machines over, and\nyou move your physical adapters over, and\n\n234\n00:11:29.530 --> 00:11:30.990\nthey never lose network connectivity.\n\n235\n00:11:30.990 --> 00:11:32.800\nEverything runs nice and smooth.\n\n236\n00:11:32.800 --> 00:11:35.290\nWhat we're gonna do is we're\ngonna take the LAG and\n\n237\n00:11:35.290 --> 00:11:40.810\nthat link aggregation group, we're gonna\nadd it to our vSwitch, to our dvSwitch.\n\n238\n00:11:40.810 --> 00:11:43.925\nAnd when we add it,\nwe're gonna add it as a standby.\n\n239\n00:11:43.925 --> 00:11:48.315\nIn a dvSwitch you have active uplinks and\nyou have standbys, right?\n\n240\n00:11:48.315 --> 00:11:53.135\nThe standbys aren't used, just the actives\nare, unless all the actives fail,\n\n241\n00:11:53.135 --> 00:11:54.835\nand then the standby gets used.\n\n242\n00:11:54.835 --> 00:11:55.835\nSo by doing this,\n\n243\n00:11:55.835 --> 00:11:59.400\nwe have our active interfaces and\nthen we have our LAG and standby.\n\n244\n00:11:59.400 --> 00:12:02.900\nWe can move the active\ninterfaces into the standby and\n\n245\n00:12:02.900 --> 00:12:05.870\nnow when they fail the standby\nkicks in and takes over.\n\n246\n00:12:05.870 --> 00:12:07.490\nRight?\nIt's been sitting there all along and\n\n247\n00:12:07.490 --> 00:12:09.770\nyou fail right over to\neffectively the same adapters and\n\n248\n00:12:09.770 --> 00:12:10.930\nyou don't have any down time.\n\n249\n00:12:10.930 --> 00:12:13.380\nAll right?\nSo let's run through that process.\n\n250\n00:12:13.380 --> 00:12:15.780\nI'm gonna click migrating\nnetwork traffic to LAGs.\n\n251\n00:12:15.780 --> 00:12:17.450\nAnd here it shows me the three steps so\n\n252\n00:12:17.450 --> 00:12:19.400\nif you don't remember them\nthey're all right here.\n\n253\n00:12:19.400 --> 00:12:22.200\nFirst, it's showing us to\nadd the LAG as a standby.\n\n254\n00:12:22.200 --> 00:12:26.590\nThen reassign the physical adapters, and\nthen make the LAG the active, right.\n\n255\n00:12:26.590 --> 00:12:28.610\nJust one, two, three, we can knock it out.\n\n256\n00:12:28.610 --> 00:12:31.250\nSo let me start by making\nthe LAG a standby.\n\n257\n00:12:31.250 --> 00:12:34.219\nSo when I click on that link it'll take\nme to my distributed virtual switch.\n\n258\n00:12:35.690 --> 00:12:38.420\nAnd this is offering for\nme to reconfigure the switch and\n\n259\n00:12:38.420 --> 00:12:41.240\nwhat I wanna configure is teaming and\nfailover.\n\n260\n00:12:41.240 --> 00:12:45.180\nI know I said teaming and failover\nis the old way, but LACP needs it.\n\n261\n00:12:45.180 --> 00:12:47.490\nSo I've gotta choose that and\nthen we'll take over for it.\n\n262\n00:12:47.490 --> 00:12:48.380\nSo just choose teaming and\n\n263\n00:12:48.380 --> 00:12:50.900\nfailover, we don't need any\nof the other stuff for this.\n\n264\n00:12:51.950 --> 00:12:53.350\nAnd then we'll hit Next.\n\n265\n00:12:53.350 --> 00:12:55.230\nAnd now I can pick my port groups.\n\n266\n00:12:55.230 --> 00:12:55.780\nAll right.\n\n267\n00:12:55.780 --> 00:12:59.470\nNow, when I look at my port groups, well,\nI need to pick which one I'm gonna modify.\n\n268\n00:12:59.470 --> 00:13:01.920\nAnd so here's where I can select it and\nI can pick.\n\n269\n00:13:01.920 --> 00:13:05.340\nAm I modifying sales or marketing, or\nam I modifying all of them, right?\n\n270\n00:13:05.340 --> 00:13:06.510\nI can do them all.\n\n271\n00:13:06.510 --> 00:13:07.680\nI'll just do sales.\n\n272\n00:13:07.680 --> 00:13:08.850\nAll right.\n\n273\n00:13:08.850 --> 00:13:10.260\nSo I'll choose my sales port group.\n\n274\n00:13:11.550 --> 00:13:16.540\nAnd now it's chosen, and we'll hit Next,\nand now teaming and failover.\n\n275\n00:13:16.540 --> 00:13:20.170\nNow teaming and failover, see how\nit's load balancing based on route,\n\n276\n00:13:20.170 --> 00:13:24.970\nbased on originating virtual port,\nor network failure detection?\n\n277\n00:13:24.970 --> 00:13:26.300\nThis is all the old stuff.\n\n278\n00:13:26.300 --> 00:13:29.180\nI'm gonna ignore that,\ncuz we're about to move away from it.\n\n279\n00:13:29.180 --> 00:13:31.690\nAnd then down here I\nsee my failover order.\n\n280\n00:13:31.690 --> 00:13:33.170\nThis is what's important.\n\n281\n00:13:33.170 --> 00:13:37.210\nI've got my four uplinks which,\nfrom the earlier shows we saw,\n\n282\n00:13:37.210 --> 00:13:39.560\nwe actually one have two\nuplinks on these servers.\n\n283\n00:13:39.560 --> 00:13:41.460\nSo these other two aren't even used.\n\n284\n00:13:41.460 --> 00:13:43.160\nBut these guys are active.\n\n285\n00:13:43.160 --> 00:13:45.970\nAnd then down here is my LAG and\nit's unused.\n\n286\n00:13:45.970 --> 00:13:48.790\nAnd what I'm going to do,\nI'm going to move it up to stand by.\n\n287\n00:13:48.790 --> 00:13:51.140\nAnd as soon as I do that,\nI'm going to get a warning.\n\n288\n00:13:51.140 --> 00:13:52.610\nSee that warning right there?\n\n289\n00:13:52.610 --> 00:13:58.300\nAnd it tells me using a combination is\nonly acceptable if you're migrating.\n\n290\n00:13:58.300 --> 00:13:59.950\nWell, that's exactly what I'm doing so\nthat's okay.\n\n291\n00:13:59.950 --> 00:14:00.852\nI'm gonna stick with migrating.\n\n292\n00:14:00.852 --> 00:14:05.190\nAll right, so I am gonna make it a standby\nand I'm just gonna move forward and\n\n293\n00:14:05.190 --> 00:14:05.740\nfinish that up.\n\n294\n00:14:05.740 --> 00:14:08.950\nAnd there's the warning about only\ndoing this during the migration.\n\n295\n00:14:08.950 --> 00:14:10.490\nThat's exactly what I'm doing.\n\n296\n00:14:10.490 --> 00:14:12.180\nSo I'll go ahead and finish it.\n\n297\n00:14:12.180 --> 00:14:15.310\nAll right, so\nnow my active uplinks are still active.\n\n298\n00:14:15.310 --> 00:14:16.480\nThat hasn't changed.\n\n299\n00:14:16.480 --> 00:14:19.310\nMy LAG is a standby, but\nmy LAG's broken anyway.\n\n300\n00:14:19.310 --> 00:14:20.110\nIt's got no interfaces.\n\n301\n00:14:20.110 --> 00:14:23.680\nSo it doesn't actually work, but\nit's a standby, so nobody notices.\n\n302\n00:14:23.680 --> 00:14:25.560\nNow it's just a part of the port group.\n\n303\n00:14:25.560 --> 00:14:27.170\nThat's what's really important.\n\n304\n00:14:27.170 --> 00:14:31.020\nSo now I can move the physical\ninterfaces down into it.\n\n305\n00:14:31.020 --> 00:14:32.010\nAnd it'll start to work.\n\n306\n00:14:32.010 --> 00:14:33.410\nSo that's the next step.\n\n307\n00:14:33.410 --> 00:14:34.160\nStep two.\n\n308\n00:14:34.160 --> 00:14:36.300\nWe're gonna add hosts to it.\n\n309\n00:14:36.300 --> 00:14:39.420\nSo I am going to chose to add hosts.\n\n310\n00:14:39.420 --> 00:14:41.100\nAnd I'm not actually adding hosts here.\n\n311\n00:14:41.100 --> 00:14:43.260\nWhat I'm doing is managing\nhosts networking.\n\n312\n00:14:43.260 --> 00:14:45.750\nBecause I've already got ESX host01 and\nhost02.\n\n313\n00:14:45.750 --> 00:14:47.260\nI've already got hosts in there.\n\n314\n00:14:47.260 --> 00:14:49.180\nI need to mess with their networking.\n\n315\n00:14:49.180 --> 00:14:50.680\nAnd so I'll move forward on that screen.\n\n316\n00:14:51.860 --> 00:14:56.400\nAnd I can pick the hosts and\nwe can see ESX host01 and 02.\n\n317\n00:14:56.400 --> 00:14:59.585\nI'm just gonna add them both in cuz\nthey're both part of that dvSwitch.\n\n318\n00:15:00.900 --> 00:15:02.810\nAnd then we get to our adapters.\n\n319\n00:15:02.810 --> 00:15:05.370\nNow I'm only messing with\nmy physical adapters so\n\n320\n00:15:05.370 --> 00:15:07.360\nI'm gonna uncheck manage kernel adapters.\n\n321\n00:15:07.360 --> 00:15:09.120\nI wanna leave management alone.\n\n322\n00:15:09.120 --> 00:15:11.190\nI'm just messing with\nthe physical adaptors.\n\n323\n00:15:12.320 --> 00:15:14.090\nAnd then I'll hit, Next.\n\n324\n00:15:14.090 --> 00:15:16.020\nAnd here's where we get to update them.\n\n325\n00:15:16.020 --> 00:15:20.990\nNow, notice vmnic1 and vmnic2 see\nhow there attached to the dvSwitch,\n\n326\n00:15:20.990 --> 00:15:22.830\nright they're attached\nto that virtual switch.\n\n327\n00:15:22.830 --> 00:15:24.780\nAnd same thing on the other host.\n\n328\n00:15:24.780 --> 00:15:27.440\nWhat I'm gonna do is,\nI'm gonna change them so\n\n329\n00:15:27.440 --> 00:15:30.030\nthey're assigned to the LAG instead.\n\n330\n00:15:30.030 --> 00:15:33.070\nThis is where we put the physical\nadapters into the link aggregation group.\n\n331\n00:15:33.070 --> 00:15:37.660\nSo I'm gonna choose to assign it, and\nwhen I go to assign it here's the LAG.\n\n332\n00:15:37.660 --> 00:15:40.630\nAnd remember when I created the LAG I\ntold it to create two ports.\n\n333\n00:15:40.630 --> 00:15:43.080\nSo we've got -0 and -1.\n\n334\n00:15:43.080 --> 00:15:46.700\nI could have done four ports if I\nneeded four, but I just needed two.\n\n335\n00:15:46.700 --> 00:15:53.760\nSo I'm gonna take these links, and\nI'm gonna move them over to the LAG.\n\n336\n00:15:53.760 --> 00:15:57.210\nSo, I just do it one at a time,\nwhich is kinda lame, but\n\n337\n00:15:57.210 --> 00:15:58.937\nit is the way I have to do it.\n\n338\n00:15:58.937 --> 00:16:05.353\nAnd so, on ESX host 01, I just moved\nNIC 1 and NIC 2 over to LAG 0 on LAG-1.\n\n339\n00:16:05.353 --> 00:16:07.653\nAnd now I'll do the same thing for\nthe other server.\n\n340\n00:16:07.653 --> 00:16:13.210\nI'm gonna move it to LAG-0 and\nLAG-1, just the same exact process.\n\n341\n00:16:13.210 --> 00:16:16.660\nSo even though I chose two ports,\nthat's really four, two on one server,\n\n342\n00:16:16.660 --> 00:16:17.200\ntwo on another.\n\n343\n00:16:17.200 --> 00:16:19.825\nThe more servers I have, the more ports.\n\n344\n00:16:19.825 --> 00:16:21.380\nSo there we've got them set.\n\n345\n00:16:21.380 --> 00:16:22.645\nI'm leaving management alone, right?\n\n346\n00:16:22.645 --> 00:16:26.130\nI don't wanna mess with that cuz I don't\nwanna accidentally lock myself out.\n\n347\n00:16:26.130 --> 00:16:28.800\nAnd I'll finish it up,\nI get my Impact screen, right?\n\n348\n00:16:28.800 --> 00:16:32.630\nSo it's showing that iSCSI will be\nfine after this, and I can finish.\n\n349\n00:16:33.720 --> 00:16:38.930\nAll right, what's happening now is I just\npulled the only two active adapters out\n\n350\n00:16:38.930 --> 00:16:40.420\nand stuck them into the LAG.\n\n351\n00:16:40.420 --> 00:16:45.080\nThe LAG is standby, so\nnow the active adapters fail, and\n\n352\n00:16:45.080 --> 00:16:47.190\nthe LAG kicks in, it was standby.\n\n353\n00:16:47.190 --> 00:16:51.210\nAnd so my virtual machines all\njump to the LAG automatically.\n\n354\n00:16:51.210 --> 00:16:54.720\nJust happens in the background,\nit's all automatic, no downtime.\n\n355\n00:16:54.720 --> 00:16:57.020\nSo now that that's done, the only\nother thing I need to do is go and\n\n356\n00:16:57.020 --> 00:17:01.315\nget rid of those physical uplinks so\nthat all I have is the LAG.\n\n357\n00:17:01.315 --> 00:17:04.490\nAnd so that's the last option,\nthe third option here.\n\n358\n00:17:04.490 --> 00:17:08.010\nWe'll go right back to our Port Groups and\nwe'll finish our migration.\n\n359\n00:17:08.010 --> 00:17:10.705\nSo just like before, I'm gonna come in\nhere and choose Teaming and Failover.\n\n360\n00:17:13.451 --> 00:17:17.849\nAnd then for my distributed port group\nI'll choose my Sales port group that we\n\n361\n00:17:17.849 --> 00:17:20.839\nwere working with,\nall right, so there's Sales.\n\n362\n00:17:21.930 --> 00:17:25.965\nAnd then down here under Active uplinks,\nwhat I'm gonna do is,\n\n363\n00:17:25.965 --> 00:17:27.380\noop, did I do marketing last time?\n\n364\n00:17:29.430 --> 00:17:31.120\nAll right, apparently my LAG jumped out.\n\n365\n00:17:31.120 --> 00:17:32.896\nBut what I'm gonna do is I'm\ngonna take these uplinks and\n\n366\n00:17:32.896 --> 00:17:33.904\nI'll just highlight them all.\n\n367\n00:17:33.904 --> 00:17:37.550\nAnd I'm gonna move them down to Unused.\n\n368\n00:17:37.550 --> 00:17:40.652\nAnd then I'm gonna take my LAG and\nI'm gonna move it up.\n\n369\n00:17:40.652 --> 00:17:42.080\nI didn't refresh my screen so\n\n370\n00:17:42.080 --> 00:17:45.920\napparently it didn't remember the LAG\nwas already a standby, but there we go.\n\n371\n00:17:45.920 --> 00:17:48.720\nSo now I have the LAG is Active and\n\n372\n00:17:48.720 --> 00:17:51.350\neverything else has been\nmoved out to Unused.\n\n373\n00:17:51.350 --> 00:17:52.910\nSo now when I move forward,\n\n374\n00:17:52.910 --> 00:17:57.175\nthese settings up here, the Load balancing\nsettings, it's only one adapter.\n\n375\n00:17:57.175 --> 00:17:58.920\nCan you load balance on one adapter?\n\n376\n00:17:58.920 --> 00:18:01.750\nNo, this is no longer taking effect.\n\n377\n00:18:01.750 --> 00:18:04.290\nRegular teaming and\nfail over is no longer working.\n\n378\n00:18:04.290 --> 00:18:06.230\nNow it's LACP that's handling it.\n\n379\n00:18:06.230 --> 00:18:08.920\nSo the fact that there is more than\none adapter inside of this LAG\n\n380\n00:18:08.920 --> 00:18:10.190\nis kind of invisible to this screen.\n\n381\n00:18:11.590 --> 00:18:13.580\nAnd so we move forward and finish that up.\n\n382\n00:18:13.580 --> 00:18:18.110\nNow it's gonna jump us over and\nwe'll be set up to do link aggregation.\n\n383\n00:18:18.110 --> 00:18:21.624\nSo now it's truly active and\nwhen I look at LACP,\n\n384\n00:18:21.624 --> 00:18:25.430\nI'm gonna just make\nthis actually finished.\n\n385\n00:18:25.430 --> 00:18:28.640\nIt's always important to watch your\ntask to make it truly completes.\n\n386\n00:18:30.040 --> 00:18:32.320\nAnd up here, let me just refresh this so\n\n387\n00:18:32.320 --> 00:18:35.090\nI've got the latest information\nwhen I look at my LAG.\n\n388\n00:18:35.090 --> 00:18:39.630\nAnd I scroll down here, I can see that\nit showing that it is Active, 2 ports.\n\n389\n00:18:39.630 --> 00:18:41.095\nAnd we should be good to go there.\n\n390\n00:18:42.950 --> 00:18:45.570\nAnd I'm just gonna come in here and\ncheck my health real quick and\n\n391\n00:18:45.570 --> 00:18:47.930\njust make sure I don't have\nany health status alerts.\n\n392\n00:18:47.930 --> 00:18:50.370\nIf anything actually broke\nyou'd see a big warning here.\n\n393\n00:18:50.370 --> 00:18:52.500\nBut I can see it looks\nlike everybody's okay.\n\n394\n00:18:52.500 --> 00:18:57.220\nMy VLAN Health Status is unknown, probably\ncuz my switch isn't reporting back so\n\n395\n00:18:57.220 --> 00:18:57.810\nthat's fine.\n\n396\n00:18:59.010 --> 00:19:00.862\nAnd so we should be good to go there.\n\n397\n00:19:00.862 --> 00:19:05.490\nAll right, so now VM Sales is configured\nto use that link aggregation group.\n\n398\n00:19:05.490 --> 00:19:08.970\nIt is using LACP, and\nnow we get balancing, right?\n\n399\n00:19:08.970 --> 00:19:12.837\nSo that's link aggregation and control\nprotocol, neat way to balance stuff out.\n\n400\n00:19:12.837 --> 00:19:16.537\nIf you're using vSphere Enterprise,\nyou wanna use LACP.\n\n401\n00:19:16.537 --> 00:19:19.150\nLACP is better than teaming and failover.\n\n402\n00:19:19.150 --> 00:19:23.212\nIf you're using Standard Edition,\nteaming and failover is what you have, so\n\n403\n00:19:23.212 --> 00:19:24.144\nyou gotta use it.\n\n404\n00:19:24.144 --> 00:19:29.628\nAll right, the other thing I wanted to\npoint out was NIOC, Network I/O Control.\n\n405\n00:19:29.628 --> 00:19:33.000\nAnd Network I/O Control is just a way we\ncan get involved in how the bandwidth is\n\n406\n00:19:33.000 --> 00:19:34.900\nmanaged on our servers.\n\n407\n00:19:34.900 --> 00:19:36.900\nNIOC is enabled by default.\n\n408\n00:19:36.900 --> 00:19:40.601\nIt's actually turned on and doing stuff,\nwhether we configure it or not, right?\n\n409\n00:19:40.601 --> 00:19:42.010\nLet me show you how that works.\n\n410\n00:19:42.010 --> 00:19:46.797\nSo if we dive into our switch, and\nwhat I'm gonna do is I'm just gonna jump\n\n411\n00:19:46.797 --> 00:19:49.980\nback into my vSwitch,\nwhere I'm at right here.\n\n412\n00:19:51.140 --> 00:19:56.980\nAnd inside of the vSwitch,\nif we go into our settings,\n\n413\n00:19:56.980 --> 00:20:01.010\nthen we can go into Manage and\nResource Allocation.\n\n414\n00:20:01.010 --> 00:20:05.090\nSo Manage and Resource Allocation\non the distributive virtual switch.\n\n415\n00:20:05.090 --> 00:20:07.430\nThis is where we configure NIOC.\n\n416\n00:20:07.430 --> 00:20:10.220\nAnd when I get in here,\nyou've got two options,\n\n417\n00:20:10.220 --> 00:20:12.819\nSystem traffic and Network resource pools.\n\n418\n00:20:12.819 --> 00:20:14.450\nAnd System traffic is\nwhere we wanna start.\n\n419\n00:20:14.450 --> 00:20:17.370\nThis is really where NIOC is configured.\n\n420\n00:20:17.370 --> 00:20:23.990\nYou can see if NIOC is even turned\non by going to our Summary page.\n\n421\n00:20:23.990 --> 00:20:25.590\nWhen you choose a dvSwich and\n\n422\n00:20:25.590 --> 00:20:30.160\ngo to Summary, you'll see right here\nwhether NIOC is turned on or not, right?\n\n423\n00:20:30.160 --> 00:20:34.140\nIt's supported, it's able to run here.\n\n424\n00:20:34.140 --> 00:20:38.200\nAnd so we should be good to go and\nuse it if we go in and we configure it.\n\n425\n00:20:38.200 --> 00:20:42.030\nAnd so when I go back to Manage and\nI go to Resource Allocation and\n\n426\n00:20:42.030 --> 00:20:46.890\nSystem traffic right here,\nI can see NIOC is enabled.\n\n427\n00:20:46.890 --> 00:20:50.340\nSo it's supported and it's enabled and\nturned on, all right?\n\n428\n00:20:50.340 --> 00:20:53.590\nNow the way NIOC works is it\ntakes a look at your link speed,\n\n429\n00:20:53.590 --> 00:20:55.480\nright, your network interfaces.\n\n430\n00:20:55.480 --> 00:20:57.150\nSo here it's showing\nme my total bandwidth.\n\n431\n00:20:57.150 --> 00:21:00.830\nI have a single gigabit adapter\nthat's actually got a link right now.\n\n432\n00:21:00.830 --> 00:21:03.720\nSo it's showing me that I\nhave 1 gig of bandwidth.\n\n433\n00:21:03.720 --> 00:21:06.110\nAnd then what am I doing with it?\n\n434\n00:21:06.110 --> 00:21:10.920\nI have nothing reserved, I have a full\ngig of bandwidth available right now.\n\n435\n00:21:10.920 --> 00:21:14.550\nSo see I can see, I guess my head's\nkind of covering that, there we go.\n\n436\n00:21:14.550 --> 00:21:18.090\nSo I've got 0 gigs reserved,\nI've got 1 gig available.\n\n437\n00:21:18.090 --> 00:21:21.700\nIt's basically sitting here doing nothing,\nright, my server's kind of bored.\n\n438\n00:21:21.700 --> 00:21:25.200\nMy maximum reservation\nallowed is 0.75 gigs.\n\n439\n00:21:25.200 --> 00:21:31.490\nSo I can reserve up to 750 megabits\nof data for a particular service.\n\n440\n00:21:31.490 --> 00:21:34.360\nBut it's needing at least\n250 megabits just to handle\n\n441\n00:21:34.360 --> 00:21:37.430\nregular system operations and other stuff.\n\n442\n00:21:37.430 --> 00:21:39.080\nSo it's up to me to configure that.\n\n443\n00:21:39.080 --> 00:21:41.060\nRight now we haven't configured any of it.\n\n444\n00:21:41.060 --> 00:21:44.210\nBut if you look down here you'll see\nwhere it does actually have some\n\n445\n00:21:44.210 --> 00:21:45.530\ndefault settings.\n\n446\n00:21:45.530 --> 00:21:49.940\nAnd if you'll look at the default\nsettings, they're kinda interesting.\n\n447\n00:21:49.940 --> 00:21:53.780\nWhat you see looking down the list is\na list of all the services that generate\n\n448\n00:21:53.780 --> 00:21:54.900\nbandwidth on the server.\n\n449\n00:21:54.900 --> 00:21:59.440\nSo you've got Fault Tolerance,\nManagement, NFS, iSCSI, vMotion.\n\n450\n00:21:59.440 --> 00:22:01.670\nAll these guys consume bandwidth.\n\n451\n00:22:01.670 --> 00:22:04.320\nAnd they're set up with\nsomething called a share, right?\n\n452\n00:22:04.320 --> 00:22:06.260\nA share is kind of like stocks,\n\n453\n00:22:06.260 --> 00:22:10.260\nright, when you buy stock in a company\nyou're buying a percentage of ownership.\n\n454\n00:22:10.260 --> 00:22:11.130\nWell that's what you're doing here,\n\n455\n00:22:11.130 --> 00:22:14.365\nis these guys are buying a percentage\nof the available bandwidth.\n\n456\n00:22:14.365 --> 00:22:16.675\nThe thing is,\nthe available bandwidth changes.\n\n457\n00:22:16.675 --> 00:22:19.415\nSo this isn't necessarily a percentage.\n\n458\n00:22:19.415 --> 00:22:23.245\nIf something like Fault Tolerance\nhas 50% of the bandwidth,\n\n459\n00:22:23.245 --> 00:22:25.165\nit would have 500 megabit.\n\n460\n00:22:25.165 --> 00:22:27.320\nBut it doesn't have 50% of the bandwidth.\n\n461\n00:22:27.320 --> 00:22:30.979\nCuz all these guys are set to 50,\nwith exception of Virtual Machine Traffic.\n\n462\n00:22:30.979 --> 00:22:33.070\nAnd Virtual Machine Traffic is set to 100.\n\n463\n00:22:33.070 --> 00:22:36.170\nSo if that was 100%, Virtual Machine\nTraffic would consume everything.\n\n464\n00:22:36.170 --> 00:22:38.056\nNobody else would have any bandwidth,\nright?\n\n465\n00:22:38.056 --> 00:22:40.800\nSo they way works is, they're shares.\n\n466\n00:22:40.800 --> 00:22:46.590\nAt any given time, one or more or\neven all these services could be talking.\n\n467\n00:22:46.590 --> 00:22:49.420\nAnd so what VMware does is\nit takes the share count for\n\n468\n00:22:49.420 --> 00:22:53.200\neach service that's talking right now and\nit adds them together.\n\n469\n00:22:53.200 --> 00:22:56.060\nAnd that becomes the total\namount of shares.\n\n470\n00:22:56.060 --> 00:22:59.740\nThen it divides that out and\nyou end up with what you actually get.\n\n471\n00:22:59.740 --> 00:23:00.790\nLet me give you an example.\n\n472\n00:23:00.790 --> 00:23:04.950\nSo let's say the first three, so\nFault Tolerance, Management and NFS.\n\n473\n00:23:04.950 --> 00:23:07.780\nSo all three of these guys\nare talking right now.\n\n474\n00:23:07.780 --> 00:23:11.560\nWell they all have 50 shares so\nit adds up to 150 shares.\n\n475\n00:23:13.270 --> 00:23:16.080\nEach one of them has 50\nof those 150 shares.\n\n476\n00:23:16.080 --> 00:23:18.100\nThey have a third of the shares.\n\n477\n00:23:18.100 --> 00:23:21.504\nSo [COUGH] fault tolerance\nwill get 33% of the bandwidth.\n\n478\n00:23:21.504 --> 00:23:23.800\nManagement Traffic would\nget 33% of the bandwidth.\n\n479\n00:23:23.800 --> 00:23:27.370\nAnd NFS would get 33% of their bandwidth,\nthey divide it up, right?\n\n480\n00:23:27.370 --> 00:23:32.340\nSo in that scenario 50\ncorresponds with 33%.\n\n481\n00:23:32.340 --> 00:23:35.860\nBut if a fourth service started talking,\nlike Virtual Machine Traffic,\n\n482\n00:23:35.860 --> 00:23:40.640\nnow I've got 250 shares,\nthat adds up to 250.\n\n483\n00:23:40.640 --> 00:23:44.050\nAnd each of these accounts for\na different level of it.\n\n484\n00:23:44.050 --> 00:23:46.340\nEach would could for 20% at that point.\n\n485\n00:23:46.340 --> 00:23:49.370\nFault Tolerance, you get 20%,\nManagement Traffic,\n\n486\n00:23:49.370 --> 00:23:53.120\nwe get 20%, NFS, we get 20%, and\nVirtual Machines, you get 40%, right?\n\n487\n00:23:53.120 --> 00:23:55.430\nSo shares are not a percentage.\n\n488\n00:23:55.430 --> 00:23:58.076\nThey're just a number,\nand they all get added up.\n\n489\n00:23:58.076 --> 00:23:59.200\nAnd then they're able to be divided\n\n490\n00:23:59.200 --> 00:24:00.889\nout to find out what percentage\npeople actually get.\n\n491\n00:24:00.889 --> 00:24:03.389\nSo you're really setting\nmore like a priority here.\n\n492\n00:24:03.389 --> 00:24:06.016\nAnd there's three macros that you'll see.\n\n493\n00:24:06.016 --> 00:24:10.250\nThe macros are low, normal, and high.\n\n494\n00:24:10.250 --> 00:24:15.200\nLow is 25 shares, normal is 50 shares,\nand high is 100 shares.\n\n495\n00:24:15.200 --> 00:24:19.360\nSo if you have a high priority service,\nyou can give it 100 shares.\n\n496\n00:24:19.360 --> 00:24:21.880\nIf you have some service you don't\ncare about, you can set it lower.\n\n497\n00:24:21.880 --> 00:24:27.730\nSo for example, notice vMotion,\nvMotion by default only has 50 shares.\n\n498\n00:24:27.730 --> 00:24:31.220\nIf I'm trying to fail a virtual machine\nover to another piece of hardware,\n\n499\n00:24:31.220 --> 00:24:32.570\nit's gotta synchronize RAM.\n\n500\n00:24:32.570 --> 00:24:36.550\nAnd synchronizing RAM takes bandwidth,\nbut right now it's only got 50 shares.\n\n501\n00:24:36.550 --> 00:24:38.640\nSo if I have virtual machines running and\n\n502\n00:24:38.640 --> 00:24:41.570\nI'm doing other stuff,\nthey'll get priority.\n\n503\n00:24:41.570 --> 00:24:43.590\nvMotion will take longer to work.\n\n504\n00:24:43.590 --> 00:24:46.720\nIf I want vMotion to work faster,\nI might wanna bump that up and\n\n505\n00:24:46.720 --> 00:24:49.130\ngive it more shares so it happens faster.\n\n506\n00:24:49.130 --> 00:24:52.370\nBut then when I use vMotion,\nI might see other things start to suffer.\n\n507\n00:24:52.370 --> 00:24:54.073\nSo my management might get slower or\n\n508\n00:24:54.073 --> 00:24:58.010\nvirtual machines might get slower because\nvMotion is running in the background.\n\n509\n00:24:58.010 --> 00:25:01.835\nVMware wants your virtual machines\nto perform as best as possible.\n\n510\n00:25:01.835 --> 00:25:04.930\nThey want them to perform at wire speed,\nthat's why they get more shares.\n\n511\n00:25:04.930 --> 00:25:06.860\nBut this is all customizable by you.\n\n512\n00:25:06.860 --> 00:25:09.550\nYou can take any one of these and\nyou can right-click on it.\n\n513\n00:25:09.550 --> 00:25:13.740\nSo I can take vMotion and\nright-click on it and choose Edit.\n\n514\n00:25:13.740 --> 00:25:17.220\nAnd now I can edit vMotion and\nI can use the templates.\n\n515\n00:25:17.220 --> 00:25:18.891\nI can say low, normal or high.\n\n516\n00:25:18.891 --> 00:25:26.480\nAnd you'll see, low is 25, high is 100,\nnormal is 50, or I can set it to custom.\n\n517\n00:25:26.480 --> 00:25:29.120\nAnd now I can come in and\nI can pick my own number, right?\n\n518\n00:25:29.120 --> 00:25:33.450\nAnd so you can set in your maximum of 100,\nminimum of one or\n\n519\n00:25:33.450 --> 00:25:38.390\nany number in between, right,\nso I can set it to 66, or\n\n520\n00:25:38.390 --> 00:25:42.340\nwhatever number it is that I\nchoose to put in there, okay.\n\n521\n00:25:42.340 --> 00:25:45.880\nYou can also define a reservation.\n\n522\n00:25:45.880 --> 00:25:47.555\nHere's where I can say, you know what?\n\n523\n00:25:47.555 --> 00:25:51.710\nvMotion is so important to me that I\nwanna reserve some bandwidth for it.\n\n524\n00:25:52.710 --> 00:25:55.620\nThen you'll always have that\namount of bandwidth available.\n\n525\n00:25:55.620 --> 00:25:58.740\nI don't usually do that here for vMotion,\nbut where I do it, I usually do it for\n\n526\n00:25:58.740 --> 00:26:00.020\nthe management network.\n\n527\n00:26:00.020 --> 00:26:03.110\nI wanna make sure that no matter what\nhappens that I can always manage\n\n528\n00:26:03.110 --> 00:26:04.570\nmy ESX hosts, right.\n\n529\n00:26:04.570 --> 00:26:09.300\nSo what I might do is say, all right,\nI'm gonna bump vMotion up to 66,\n\n530\n00:26:09.300 --> 00:26:12.378\nso vMotion, whoops.\n\n531\n00:26:12.378 --> 00:26:16.040\n[LAUGH] Sorry, going crazy here.\n\n532\n00:26:16.040 --> 00:26:18.180\nIf I get back into my\n[LAUGH] configuration.\n\n533\n00:26:18.180 --> 00:26:19.560\nThere we go.\nI do know how to use a mouse,\n\n534\n00:26:19.560 --> 00:26:21.370\nI promise you.\n\n535\n00:26:21.370 --> 00:26:24.670\nI can see vMotion traffic\nnow is set to 66, right?\n\n536\n00:26:24.670 --> 00:26:26.320\nSo it's got more shares.\n\n537\n00:26:26.320 --> 00:26:28.190\nI'm gonna take my management traffic and\n\n538\n00:26:28.190 --> 00:26:31.830\nI'm gonna reserve a small amount of\nbandwidth so that no matter what happens,\n\n539\n00:26:31.830 --> 00:26:34.480\nI will always be able to\nconnect to management traffic.\n\n540\n00:26:34.480 --> 00:26:35.390\nSo I'm gonna edit that one.\n\n541\n00:26:36.910 --> 00:26:40.730\nAnd under Reservation,\nI'm gonna reserve 2 megabits.\n\n542\n00:26:40.730 --> 00:26:44.010\n2 megabits is not a lot,\nI'm on a gig adapter.\n\n543\n00:26:44.010 --> 00:26:48.250\nBut to be able to access the web interface\nand to be able to log in and manage it and\n\n544\n00:26:48.250 --> 00:26:50.914\nwhatever, 2 megabits is\nprobably all I need.\n\n545\n00:26:50.914 --> 00:26:52.940\nSo I'm gonna set aside 2 megabits and\n\n546\n00:26:52.940 --> 00:26:57.270\nno matter what happens, if the server is\nidle, if the server is slam busy at 100%,\n\n547\n00:26:57.270 --> 00:27:00.200\nthere will always be 2 megabits\nof bandwidth set aside for\n\n548\n00:27:00.200 --> 00:27:03.070\nthe management interface,\nwhether we're using it or not, right?\n\n549\n00:27:03.070 --> 00:27:04.760\nSo I'm gonna set that aside.\n\n550\n00:27:04.760 --> 00:27:06.180\nThe opposite of which is a limit.\n\n551\n00:27:06.180 --> 00:27:07.960\nI could set a limit and say,\n\n552\n00:27:07.960 --> 00:27:14.130\nI never want vMotion to consume\nmore than x amount of bandwidth.\n\n553\n00:27:14.130 --> 00:27:19.530\nSo for example, I'll take vMotion,\nand I'll edit that one.\n\n554\n00:27:19.530 --> 00:27:26.698\nAnd I'll set a limit on it, and I'm gonna\nlimit it to, let's say, 900, right?\n\n555\n00:27:26.698 --> 00:27:30.470\nI never want it to consume more\nthan 900 megabits of bandwidth.\n\n556\n00:27:30.470 --> 00:27:32.710\nThat way there's always at least\n100 megabytes available for\n\n557\n00:27:32.710 --> 00:27:34.480\nother things to run and do their stuff.\n\n558\n00:27:37.130 --> 00:27:39.571\nSo those are some of the different\noptions we can kinda tweak for NIOC.\n\n559\n00:27:39.571 --> 00:27:44.000\nAnd now we get that customized and it\nstarts to work the way that we want it,.\n\n560\n00:27:44.000 --> 00:27:46.850\nNow that's part of the equation.\n\n561\n00:27:46.850 --> 00:27:50.350\nThe other thing, though,\nis that it does lump things together,\n\n562\n00:27:50.350 --> 00:27:51.500\nlike virtual machine traffic.\n\n563\n00:27:51.500 --> 00:27:55.730\nSee how virtual machine traffic,\nit's all my virtual machines.\n\n564\n00:27:55.730 --> 00:27:58.210\nI might have some virtual machines that\nare more important than others and\n\n565\n00:27:58.210 --> 00:27:59.820\nI want to start dividing them up.\n\n566\n00:27:59.820 --> 00:28:02.510\nWell, for that,\nthings get a little bit challenging.\n\n567\n00:28:02.510 --> 00:28:05.570\nSo what we have to do there is create\nwhat are called resource pools.\n\n568\n00:28:05.570 --> 00:28:08.570\nAnd you'll remember when\nwe created the DV switches\n\n569\n00:28:08.570 --> 00:28:12.130\nthat you could pick a resource\npool to attach to a DV switch.\n\n570\n00:28:12.130 --> 00:28:16.150\nAnd you can create a DV switch for\nhigh priority servers and a DV switch for\n\n571\n00:28:16.150 --> 00:28:19.410\nlow priority servers and give different\nresource pools based on that.\n\n572\n00:28:19.410 --> 00:28:23.040\nSo to create a resource pool, you have\nto start by creating a reservation.\n\n573\n00:28:23.040 --> 00:28:28.130\nSo I'm gonna take virtual machine traffic\nhere and I'm gonna edit that, and\n\n574\n00:28:28.130 --> 00:28:33.010\nI'm gonna reserve 300 megabits of traffic,\nall right.\n\n575\n00:28:33.010 --> 00:28:36.050\nSo I'm reserving 300 megabits\nof traffic for virtual machines.\n\n576\n00:28:36.050 --> 00:28:39.091\nAnd you'll notice it's updating up\nhere to show that I've got this\n\n577\n00:28:39.091 --> 00:28:41.057\nmeasurable reservation now and\n\n578\n00:28:41.057 --> 00:28:44.340\nso I've got some memory that's\npulled out of the general pool.\n\n579\n00:28:44.340 --> 00:28:47.010\nAnd now I can go over here\nto resource pools, and\n\n580\n00:28:47.010 --> 00:28:51.180\nunder resource pools I can start to\ncreate pools and divvy up that bandwidth.\n\n581\n00:28:51.180 --> 00:28:57.780\nSo I can add a resource pool which I'll\ncall High Priority Servers, all right?\n\n582\n00:28:57.780 --> 00:29:01.500\nAnd I can come in and\nI can give them a reservation quota,\n\n583\n00:29:01.500 --> 00:29:04.640\nlike a limit of the reservation\nto be able to use.\n\n584\n00:29:04.640 --> 00:29:07.454\nAnd so\nI can give them the whole 300 megabits, or\n\n585\n00:29:07.454 --> 00:29:11.067\nmaybe just 200 megabits of that\nreserved bandwidth, right.\n\n586\n00:29:11.067 --> 00:29:15.850\nAnd so there's gonna be my first pool,\nas soon as the screen refreshes.\n\n587\n00:29:15.850 --> 00:29:19.210\nI can then create more pools based on\nthe other priorities of my servers.\n\n588\n00:29:19.210 --> 00:29:21.370\nSo while I wait on that,\nI can create another one and\n\n589\n00:29:21.370 --> 00:29:23.190\nI'll call this one Low Priority Servers.\n\n590\n00:29:25.590 --> 00:29:27.450\nI gave the other ones 200 megabit.\n\n591\n00:29:27.450 --> 00:29:29.660\nI'll give this one 100 megabit.\n\n592\n00:29:29.660 --> 00:29:31.330\nAnd I'll create that.\n\n593\n00:29:31.330 --> 00:29:33.210\nAnd my High Priority Servers\njust showed up.\n\n594\n00:29:33.210 --> 00:29:36.330\nIf I were watching my Recent Tasks,\nit's probably already done, yeah.\n\n595\n00:29:36.330 --> 00:29:38.090\nMy screen just needs to refresh.\n\n596\n00:29:38.090 --> 00:29:40.060\nSo I'm gonna give it a quick refresh.\n\n597\n00:29:40.060 --> 00:29:40.920\nThere we go.\n\n598\n00:29:40.920 --> 00:29:43.910\nSo now I've got high priority and\nlow priority servers created.\n\n599\n00:29:43.910 --> 00:29:48.235\nMy virtual machine networks already\nhave a reservation of 300 megs, but\n\n600\n00:29:48.235 --> 00:29:52.034\nnow I've divided it so\nthat I've got 200 here and 100 here.\n\n601\n00:29:52.034 --> 00:29:57.220\nAnd when you choose them, down below\nyou can see where they're assigned.\n\n602\n00:29:57.220 --> 00:30:01.430\nSo the distributed port groups attached\nto high priority servers, well,\n\n603\n00:30:01.430 --> 00:30:02.405\nI don't have any.\n\n604\n00:30:02.405 --> 00:30:04.790\nOr virtual machines attached\nto high priority servers,\n\n605\n00:30:04.790 --> 00:30:05.880\nI don't have any there either.\n\n606\n00:30:05.880 --> 00:30:07.320\nThe list is empty.\n\n607\n00:30:07.320 --> 00:30:09.590\nI don't actually have anything attached.\n\n608\n00:30:09.590 --> 00:30:14.480\nNow I can go to the port groups, or I can\ngo to the virtual machines themselves and\n\n609\n00:30:14.480 --> 00:30:16.990\nI can attach them to these resource pools.\n\n610\n00:30:16.990 --> 00:30:18.580\nWe normally do it by the port group,\nright?\n\n611\n00:30:18.580 --> 00:30:21.680\nSo I might go to my Sales Port Group.\n\n612\n00:30:21.680 --> 00:30:24.790\nAnd under my Sales Port Group,\nif I go to Manage and\n\n613\n00:30:24.790 --> 00:30:28.400\nlook at the Properties, you can see\nthe network resource pool right there.\n\n614\n00:30:28.400 --> 00:30:33.490\nSo maybe my sales servers are high\npriority, so I'll edit this.\n\n615\n00:30:33.490 --> 00:30:37.760\nI'll go to that resource\npool setting right here and\n\n616\n00:30:37.760 --> 00:30:39.350\nI'll set it to High Priority Servers.\n\n617\n00:30:39.350 --> 00:30:44.220\nSo now my Sales Port Group will\nhave that 200 megabits reserved for\n\n618\n00:30:44.220 --> 00:30:45.960\nit and it's ready to rock.\n\n619\n00:30:45.960 --> 00:30:49.740\nAnd then I go to my marketing and\nI edit these guys, marketing people,\n\n620\n00:30:49.740 --> 00:30:51.170\nwho wants advertisements?\n\n621\n00:30:51.170 --> 00:30:54.570\nSo I'll take their network resource pool\nand I'll set them to low priority servers.\n\n622\n00:30:54.570 --> 00:30:57.010\nAnd so now they get 100 megabits.\n\n623\n00:30:57.010 --> 00:31:00.110\nIt's a 300 megabit pool\nthat's reserved at all times,\n\n624\n00:31:00.110 --> 00:31:04.410\n200 megs is now going to Sales,\n100 to Marketing, right?\n\n625\n00:31:04.410 --> 00:31:07.820\nThat's not a lot of bandwidth, so in real\nlife you might want to do higher numbers,\n\n626\n00:31:07.820 --> 00:31:09.990\nbut just as an example there,\nwe've now divided it up.\n\n627\n00:31:09.990 --> 00:31:15.360\nSo when you're configuring NIOC, when you\ngo to the distributed switch and you go\n\n628\n00:31:15.360 --> 00:31:19.280\nto resource allocation and system traffic,\nthese numbers here, they're great.\n\n629\n00:31:19.280 --> 00:31:22.810\nIt works really well but\nit doesn't give you granular control.\n\n630\n00:31:22.810 --> 00:31:25.960\nThe resource pools,\nthat's where you get the granular control.\n\n631\n00:31:25.960 --> 00:31:30.820\nOkay, so if you combine the two, now you\nget some really specific implementations.\n\n632\n00:31:30.820 --> 00:31:31.950\nIf you wanna go bigger you can.\n\n633\n00:31:31.950 --> 00:31:34.780\nAnd the nice part about this is I\nconfigured it on a distributed virtual\n\n634\n00:31:34.780 --> 00:31:36.090\nswitch, right.\n\n635\n00:31:36.090 --> 00:31:40.050\nSo if I have ten different hosts,\nthese settings apply across all the hosts.\n\n636\n00:31:40.050 --> 00:31:43.930\nAll the hosts may have a gigabit adapter,\na 10 gig adapter, and\n\n637\n00:31:43.930 --> 00:31:46.400\nnow they're all dividing\nit up the same way\n\n638\n00:31:46.400 --> 00:31:48.910\ncuz the settings are part of\nthe distributed virtual switch.\n\n639\n00:31:50.640 --> 00:31:53.273\nAll right, so that's a pretty\ngood rundown on this one and\n\n640\n00:31:53.273 --> 00:31:56.513\nI think I've kind of run out of stuff\nto talk about on virtual switches.\n\n641\n00:31:56.513 --> 00:31:58.909\nIn this episode,\nwe had a chance to see LACP,\n\n642\n00:31:58.909 --> 00:32:03.450\nthe link action control protocol which, if\nyou have the feature, if you paid for it,\n\n643\n00:32:03.450 --> 00:32:07.264\nyou absolutely want as opposed to\ndoing regular teaming and fail over.\n\n644\n00:32:07.264 --> 00:32:08.540\nIt's a great protocol.\n\n645\n00:32:08.540 --> 00:32:12.370\nAnd then we've got to choose a CNOIC,\nthe network input/output control.\n\n646\n00:32:12.370 --> 00:32:13.890\nYou may or may not wanna use that one.\n\n647\n00:32:13.890 --> 00:32:16.850\nIf you really need to make sure\nthat certain virtual machines have\n\n648\n00:32:16.850 --> 00:32:20.690\nthe bandwidth they need when they need it,\nNIOC is great.\n\n649\n00:32:20.690 --> 00:32:23.780\nBut if you're not mission critical and\nyou don't necessarily care about that,\n\n650\n00:32:23.780 --> 00:32:26.050\nyou can just rely on\nthe default NIOC settings.\n\n651\n00:32:26.050 --> 00:32:28.540\nIt'll balance things out pretty well and\nyou'll be in good shape.\n\n652\n00:32:28.540 --> 00:32:32.460\nAlthough I'm a big fan of reserving at\nleast a little bit of bandwidth for\n\n653\n00:32:32.460 --> 00:32:36.220\nthe management interface because I've\nbeen locked out before and it's not fun.\n\n654\n00:32:36.220 --> 00:32:38.427\nIf you have some reserved,\nyou'll be taken care of, right?\n\n655\n00:32:38.427 --> 00:32:41.010\nThat's kind of nice little\nthing that I like to do.\n\n656\n00:32:41.010 --> 00:32:42.860\nAll right, well,\nthat pretty much wraps this one up.\n\n657\n00:32:42.860 --> 00:32:44.830\nI do hope you guys enjoyed it.\n\n658\n00:32:44.830 --> 00:32:47.700\nStay tuned because we've got\nmore VMware content coming up.\n\n659\n00:32:47.700 --> 00:32:49.850\nWe've got a whole lot of\nextra stuff to jump into.\n\n660\n00:32:49.850 --> 00:32:56.885\nBut for now, signing off for ITProTV,\nI'm Don Pezet, and I'll see you next time.\n\n661\n00:32:56.885 --> 00:33:06.885\n[SOUND]\n\n",
          "vimeoId": "168932276"
        }
      ],
      "title": "vSphere Networking"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Don provides an overview of how VMware ESXi and VMware vCenter manage storage. He introduces the viewers to the concept of a VMware Datastore and discusses some of the different types of storage available for use inside of a vSphere deployment.",
          "length": "1990",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-1-understaning_vsphere_storage-053116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-1-understaning_vsphere_storage-053116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-1-understaning_vsphere_storage-053116-1-sm.jpg",
          "title": "Understanding vSphere Storage",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.598 --> 00:00:14.781\nAll right, good morning,\ngood afternoon, and good evening!\n\n3\n00:00:14.781 --> 00:00:17.150\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:17.150 --> 00:00:19.090\nI'm your host Don Pezet.\n\n5\n00:00:19.090 --> 00:00:23.010\nBack again with another episode of\nVM certified professional version 6.\n\n6\n00:00:23.010 --> 00:00:27.110\nIn this episode, we are kicking off\nour section on VM ware storage.\n\n7\n00:00:27.110 --> 00:00:30.540\nGetting your storage set up is not the\nmost challenging thing in the world, but\n\n8\n00:00:30.540 --> 00:00:34.120\nit is very important because everything\nwe do is built on top of that storage.\n\n9\n00:00:34.120 --> 00:00:37.100\nAnd if you get it wrong, it really\nkinda screws the whole environment up.\n\n10\n00:00:37.100 --> 00:00:39.930\nSo we definitely need to have\nan understanding of how vSphere handles\n\n11\n00:00:39.930 --> 00:00:42.250\nstorage, how ESXI handles storage, and\n\n12\n00:00:42.250 --> 00:00:44.320\nhow our virtual machines\nkinda play nice with that.\n\n13\n00:00:44.320 --> 00:00:47.650\nSo I wanted to take a little bit of time\nbefore we dived into all the configuration\n\n14\n00:00:47.650 --> 00:00:52.530\nstuff to just take a look at how\nvSphere handles that storage.\n\n15\n00:00:52.530 --> 00:00:53.590\nCuz it shows up kind of weird.\n\n16\n00:00:53.590 --> 00:00:56.490\nThere's some interesting naming\nconventions and other settings that\n\n17\n00:00:56.490 --> 00:01:01.020\nthat may look different to you if you've\nnot worked with VMWare before, and so\n\n18\n00:01:01.020 --> 00:01:03.770\nwe just need to make sure we got\na handle on those for the exam.\n\n19\n00:01:03.770 --> 00:01:06.750\nSo that's what we're going to\ntake a look at right here.\n\n20\n00:01:06.750 --> 00:01:11.865\nThe main complexity comes from how\nmuch support VMWare has that when you\n\n21\n00:01:11.865 --> 00:01:16.875\ndeploy an ESXI box, it actually supports\na ton of different types of storage.\n\n22\n00:01:16.875 --> 00:01:21.195\nYou can have the traditional stuff,\nright like the SATA or scuzzy drives.\n\n23\n00:01:21.195 --> 00:01:23.970\nThat's what most servers are gonna\nhave these days, SATA and scuzzy.\n\n24\n00:01:23.970 --> 00:01:27.140\nBut you might even have things\nlike esata external sata drives.\n\n25\n00:01:27.140 --> 00:01:29.550\nYou might have old stuff like IDE drives.\n\n26\n00:01:29.550 --> 00:01:31.940\nWell the ESXI will recognize those.\n\n27\n00:01:31.940 --> 00:01:36.750\nAnd then you might have the fancy stuff\nlike fiber channel host bus adapters,\n\n28\n00:01:36.750 --> 00:01:41.880\nHBAs and that's where you have all of your\nstorage in a san, and your servers sees\n\n29\n00:01:41.880 --> 00:01:46.110\nat via with technically a network adaptor\nbut shows up as a hard drive controller.\n\n30\n00:01:46.110 --> 00:01:48.230\nAnd there were fiber channels\nthings get really weird,\n\n31\n00:01:48.230 --> 00:01:51.340\nyou can have things like fiber\nchannel over ethernet, FCOE.\n\n32\n00:01:51.340 --> 00:01:53.970\nAnd yes, XI supports those too.\n\n33\n00:01:53.970 --> 00:02:00.085\nSo there's all these different ways\nthat we can attach storage into ESX,\n\n34\n00:02:00.085 --> 00:02:02.185\nand we just need to recognize\nhow they show up and\n\n35\n00:02:02.185 --> 00:02:04.105\nhow we can kinda work with those,\nall right.\n\n36\n00:02:04.105 --> 00:02:06.965\nNow one of the first concepts that\nI wanna address is just the idea of\n\n37\n00:02:06.965 --> 00:02:08.610\nstorage, right.\n\n38\n00:02:08.610 --> 00:02:12.980\nIn a typical server environment you have\nwhat's called direct attach storage, or\n\n39\n00:02:12.980 --> 00:02:14.140\nDAS.\n\n40\n00:02:14.140 --> 00:02:18.240\nDirect attach storage is where each of\nyour servers has hard drives inside of it.\n\n41\n00:02:18.240 --> 00:02:19.540\nRight?\nAnd this is very common.\n\n42\n00:02:19.540 --> 00:02:26.150\nAnd maybe we have one hard drive that's\nset up to be the ESX install right so\n\n43\n00:02:26.150 --> 00:02:28.400\nthat's where VM where\nESX Azure is running from and\n\n44\n00:02:28.400 --> 00:02:32.120\nthen the other hard drive is setup to\nstore our virtual machines all right.\n\n45\n00:02:32.120 --> 00:02:34.930\nThe virtual machines are gonna be\nstored what's called a data store.\n\n46\n00:02:34.930 --> 00:02:38.730\nA data store is where your\nvirtual machine hard drives and\n\n47\n00:02:38.730 --> 00:02:41.460\nother things like ISO images gets stored.\n\n48\n00:02:41.460 --> 00:02:44.010\nSo we typically separate those out.\n\n49\n00:02:44.010 --> 00:02:46.620\nAnd I say typically,\nthe install actually makes you do it.\n\n50\n00:02:46.620 --> 00:02:49.990\nEven if you only have one drive,\nit'll still separate them out itself.\n\n51\n00:02:49.990 --> 00:02:53.330\nIt'll create a partition for\nthe operating system and a partition for\n\n52\n00:02:53.330 --> 00:02:55.020\nyour virtual machines.\n\n53\n00:02:55.020 --> 00:02:57.260\nBut it's directly attached to the server,\nso,\n\n54\n00:02:57.260 --> 00:03:00.330\nif I have a virtual machine\nrunning here on server 1,\n\n55\n00:03:00.330 --> 00:03:03.760\nand this hard drive fails,\nwhat happens to the virtual machine?\n\n56\n00:03:03.760 --> 00:03:05.860\nIt goes offline.\n\n57\n00:03:05.860 --> 00:03:09.000\nWhat if I fail that virtual\nmachine over to another server?\n\n58\n00:03:09.000 --> 00:03:10.620\nWell the other server\nhas its own hard drives.\n\n59\n00:03:10.620 --> 00:03:11.680\nIt has its own data stores.\n\n60\n00:03:11.680 --> 00:03:13.270\nIt has its own data.\n\n61\n00:03:13.270 --> 00:03:16.100\nSo I can't fail that virtual machine over.\n\n62\n00:03:16.100 --> 00:03:18.920\nIf I try and fail it over,\nI need to copy its hard drive, too.\n\n63\n00:03:18.920 --> 00:03:22.750\nThen if these drives just went offline,\nthat's not an option for me.\n\n64\n00:03:22.750 --> 00:03:25.340\nRight.\nSo direct attached storage is fine when\n\n65\n00:03:25.340 --> 00:03:28.760\nyou just have a handful of servers, and\nyou don't want a complex environment.\n\n66\n00:03:28.760 --> 00:03:31.470\nBut it doesn't give you\na lot of flexibility.\n\n67\n00:03:31.470 --> 00:03:36.690\nIf you want the ultimate flexibility,\nyou don't want direct attached storage.\n\n68\n00:03:36.690 --> 00:03:41.460\nInstead, you want a storage\narea network or a SAN.\n\n69\n00:03:41.460 --> 00:03:46.620\nWith a SAN, instead of your drives\nbeing in the servers themselves,\n\n70\n00:03:46.620 --> 00:03:49.230\nyou have the hard drives in\nsome kind of an appliance.\n\n71\n00:03:49.230 --> 00:03:51.250\nAnd there's a number of\ncompanies out there,\n\n72\n00:03:51.250 --> 00:03:56.360\nlike HP and EMC, that make these\nmassive storage appliances.\n\n73\n00:03:56.360 --> 00:03:59.960\nAnd you can put hundreds,\neven thousands, of hard drives in them.\n\n74\n00:03:59.960 --> 00:04:04.040\nAnd then your servers\nconnect to those drives.\n\n75\n00:04:04.040 --> 00:04:08.380\nNow the cool part about this is, lets say\nthat this is a virtual hard drive for\n\n76\n00:04:08.380 --> 00:04:09.670\na virtual machine of mine right.\n\n77\n00:04:09.670 --> 00:04:11.930\nI've got a VM created.\n\n78\n00:04:11.930 --> 00:04:15.710\nLet me make it some other\ncolor than what it is.\n\n79\n00:04:15.710 --> 00:04:16.270\nI'll just make it blue.\n\n80\n00:04:16.270 --> 00:04:19.400\nAll right, so\nhere's my virtual machine hard drive.\n\n81\n00:04:19.400 --> 00:04:22.280\nWith direct attach storage,\nit would be directly on a server.\n\n82\n00:04:22.280 --> 00:04:25.880\nAnd if I wanted to fail that\nVirtual Machine over, I would have to copy\n\n83\n00:04:25.880 --> 00:04:30.370\nthe drive over, which is not necessarily\nsomething that's gonna happen, right?\n\n84\n00:04:30.370 --> 00:04:36.100\nSo, instead, if I put that\nVirtual Machine drive down here, right?\n\n85\n00:04:36.100 --> 00:04:38.890\nI put the Virtual Machine drive on my SAN.\n\n86\n00:04:38.890 --> 00:04:40.530\nSo it's down here.\n\n87\n00:04:40.530 --> 00:04:42.360\nServer 1 can access it.\n\n88\n00:04:42.360 --> 00:04:43.450\nServer 2 can access it.\n\n89\n00:04:43.450 --> 00:04:44.880\nServer 3 can access it.\n\n90\n00:04:44.880 --> 00:04:46.770\nThey can all access that drive.\n\n91\n00:04:46.770 --> 00:04:48.820\nThey can all get at the information.\n\n92\n00:04:50.310 --> 00:04:54.210\nNow if I want to fail over to Server 2,\nall I have to do is,\n\n93\n00:04:54.210 --> 00:04:59.550\nif the VM is running, we can use VMotion\nand copy the RAM over, what's in RAM.\n\n94\n00:04:59.550 --> 00:05:02.680\nAnd then server two can access the drive,\nand we don't even have down time.\n\n95\n00:05:02.680 --> 00:05:04.190\nBut if I had a server failure,\n\n96\n00:05:04.190 --> 00:05:08.210\nif server one completely died out,\nthen I'm going to lose what's in RAM.\n\n97\n00:05:08.210 --> 00:05:10.870\nSo server two can connect and\njust boot up the Virtual Machine,\n\n98\n00:05:10.870 --> 00:05:14.520\nnow my down time is just however\nlong it takes to boot the VM, and\n\n99\n00:05:14.520 --> 00:05:17.450\nnow we're back up, and\nwe're resilient and we're running, right?\n\n100\n00:05:17.450 --> 00:05:20.520\nThat's the advantage of shared storage.\n\n101\n00:05:20.520 --> 00:05:22.900\nThere's two challenges\nwith shared storage.\n\n102\n00:05:22.900 --> 00:05:26.980\nFirst off, when you power on the server,\nit's not in the server.\n\n103\n00:05:26.980 --> 00:05:28.770\nSo how does the server find it?\n\n104\n00:05:28.770 --> 00:05:31.680\nThe server's gotta have a way to\nfind that storage even though it's\n\n105\n00:05:31.680 --> 00:05:33.020\nnot inside the server itself.\n\n106\n00:05:33.020 --> 00:05:38.420\nAnd then the second problem is\nwith shared storage, what happens.\n\n107\n00:05:38.420 --> 00:05:43.580\nIf two servers try to access the same\ndata at the same time, okay,\n\n108\n00:05:43.580 --> 00:05:46.368\nwell, it's a short answer,\nthe data gets corrupted.\n\n109\n00:05:46.368 --> 00:05:50.830\nIf two servers read the same data\nat the same time it's no big deal.\n\n110\n00:05:50.830 --> 00:05:54.850\nBut if the two servers try and\nwrite to the same data at the same time,\n\n111\n00:05:54.850 --> 00:05:58.430\nthe data gets corrupted, it gets damaged\nand we lose our data and that's bad.\n\n112\n00:05:58.430 --> 00:06:02.010\nSo we have to have a way for\nthe servers to find a storage, and\n\n113\n00:06:02.010 --> 00:06:05.630\nthen we have to have a way to\nmake the servers play nice, so\n\n114\n00:06:05.630 --> 00:06:10.490\nthat if one server is accessing data,\nthe other server doesn't do it.\n\n115\n00:06:10.490 --> 00:06:14.090\nWell, the discovery part\nis actually kinda easy.\n\n116\n00:06:14.090 --> 00:06:16.400\nESX has it built in.\n\n117\n00:06:16.400 --> 00:06:19.400\nSo that when the operating system boots,\nthen it goes and it finds that storage.\n\n118\n00:06:19.400 --> 00:06:21.400\nWe set it up so it's in there.\n\n119\n00:06:21.400 --> 00:06:24.710\nAnd for most of our storage\ntypes will define that.\n\n120\n00:06:24.710 --> 00:06:26.890\nIf it's fiber like this though,\n\n121\n00:06:26.890 --> 00:06:31.730\nyou put a physical adapter in this server\ncalled a fiber HBA, a host bus adapter.\n\n122\n00:06:31.730 --> 00:06:33.370\nAnd your motherboard, your CPU,\n\n123\n00:06:33.370 --> 00:06:36.440\nyour BIOS, they'll actually see\nthat as a hard drive controller.\n\n124\n00:06:36.440 --> 00:06:38.310\nThey won't see it as a network adapter.\n\n125\n00:06:38.310 --> 00:06:42.340\nAnd when they talk to it like a hard drive\ncontroller, it'll talk over this fiber and\n\n126\n00:06:42.340 --> 00:06:44.330\nget a list of the drives\ndown here to bring back.\n\n127\n00:06:44.330 --> 00:06:48.660\nSo even though the drives aren't internal,\nthe servers think they are.\n\n128\n00:06:48.660 --> 00:06:52.040\nIt thinks that those drives are in\nthe server, and that's pretty cool because\n\n129\n00:06:53.140 --> 00:06:55.230\nI took my virtual machine drive and\nmoved it down here.\n\n130\n00:06:55.230 --> 00:06:56.200\nRight?\nBut what if I took my\n\n131\n00:06:56.200 --> 00:06:57.130\noperating system drive?\n\n132\n00:06:57.130 --> 00:07:00.010\nSo let's say that this one\nhas my operating system.\n\n133\n00:07:00.010 --> 00:07:04.200\nI could move that into the SAN also, and\n\n134\n00:07:04.200 --> 00:07:08.010\nnow this server doesn't have\nany hard drives at all.\n\n135\n00:07:08.010 --> 00:07:11.980\nWhen you power the server on,\nit looks at the HBA, and\n\n136\n00:07:11.980 --> 00:07:15.100\nthe HBA shows these two sets of disks.\n\n137\n00:07:15.100 --> 00:07:17.340\nAnd the server says, okay,\nI'm gonna boot off of this one right here.\n\n138\n00:07:17.340 --> 00:07:18.040\nAnd it boots up.\n\n139\n00:07:18.040 --> 00:07:20.730\nAnd then it goes into launch it's VM's and\nit launches them off of here.\n\n140\n00:07:20.730 --> 00:07:23.550\nThis server has no hard drives.\n\n141\n00:07:23.550 --> 00:07:25.660\nNow, why would I want to do that?\n\n142\n00:07:25.660 --> 00:07:29.000\nWell, let's say a network adapter dies\nin this server or the motherboard,\n\n143\n00:07:29.000 --> 00:07:33.230\na power supply, a CPU, any hardware\ncomponent dies in this server,\n\n144\n00:07:33.230 --> 00:07:37.830\nI can take that server out,\nput in an entirely new server and\n\n145\n00:07:37.830 --> 00:07:41.200\nit can boot up, see these drives and\nI'm back up in business.\n\n146\n00:07:41.200 --> 00:07:44.010\nI'm completely independent\nof my hardware now.\n\n147\n00:07:44.010 --> 00:07:49.470\nI can completely swap out hardware because\nthe storage is back here on my SAN.\n\n148\n00:07:49.470 --> 00:07:53.080\nThat's the advantage of going to\nwhat's called a diskless install.\n\n149\n00:07:53.080 --> 00:07:55.350\nThere's no disks in the server.\n\n150\n00:07:55.350 --> 00:07:56.848\nEverything is on the SAN, alright?\n\n151\n00:07:56.848 --> 00:07:59.974\nbut you need an HPA for\nthat, you need a fiber HPA.\n\n152\n00:07:59.974 --> 00:08:04.955\nYou can't do that with other technologies,\nthings like iSCSI, right?\n\n153\n00:08:04.955 --> 00:08:09.269\niSCSI is an interesting one because here,\nsee how I've got these orange lines, and\n\n154\n00:08:09.269 --> 00:08:12.380\nthis is supposed to be my\nfiber HPA running to the SAN.\n\n155\n00:08:12.380 --> 00:08:14.270\nThis is a dedicated storage network.\n\n156\n00:08:14.270 --> 00:08:17.950\nA network that's made of fiber optics\nthat runs the SCSI protocol on it.\n\n157\n00:08:19.020 --> 00:08:22.350\niSCSI takes the SCSI protocol and\nit puts it on a TCP/IP network.\n\n158\n00:08:22.350 --> 00:08:26.620\nIt puts it on a regular ethernet TCP/IP\nnetwork and you communicate, it's slower.\n\n159\n00:08:26.620 --> 00:08:28.050\nIt's not as robust.\n\n160\n00:08:28.050 --> 00:08:29.060\nAnd the other problem is,\n\n161\n00:08:29.060 --> 00:08:34.150\nbecause it's on a TCP/IP network, I have\nto have a TCP/IP protocol stack running.\n\n162\n00:08:34.150 --> 00:08:38.540\nWhen your computer boots, it's the BIOS\nthat's kicking in, or UEFI, one or\n\n163\n00:08:38.540 --> 00:08:42.750\nthe other, and when those kick in,\nthey don't have a network protocol stack,\n\n164\n00:08:42.750 --> 00:08:46.470\nthey're looking for internal drives,\nso they can't find iSCSI storage.\n\n165\n00:08:46.470 --> 00:08:49.880\nI can't boot this server\noff of iSCSI storage.\n\n166\n00:08:49.880 --> 00:08:51.510\nIt's not possible, right?\n\n167\n00:08:51.510 --> 00:08:58.190\nSo, if I want a true diskless install,\nI'm going to need a true SAN, a fiber SAN.\n\n168\n00:08:58.190 --> 00:09:00.280\nI guess it could be a copper SAN.\n\n169\n00:09:00.280 --> 00:09:03.360\nThere are some, like the direct attach\nSANs, but it starts to defeat the purpose.\n\n170\n00:09:03.360 --> 00:09:06.220\nIt's usually a fiber optic SAN that\ngives us that connectivity and\n\n171\n00:09:06.220 --> 00:09:07.830\nthe flexibility, all right?\n\n172\n00:09:07.830 --> 00:09:12.530\nBut either way, we need to make sure that\nVMware is properly seeing that storage.\n\n173\n00:09:12.530 --> 00:09:14.400\nHow do we know if it's seeing the storage?\n\n174\n00:09:14.400 --> 00:09:16.570\nWell, it's configured inside of the hosts.\n\n175\n00:09:16.570 --> 00:09:20.760\nLet's jump over to my vCenter environment,\nand I'm gonna go into my Hosts and\n\n176\n00:09:20.760 --> 00:09:25.340\nClusters, and\nI'll take esx-host01, all right?\n\n177\n00:09:25.340 --> 00:09:29.040\nWhen I go into esx-host01,\nI can go under Manage, and\n\n178\n00:09:29.040 --> 00:09:31.070\nunder manage you've got storage.\n\n179\n00:09:31.070 --> 00:09:33.870\nAnd storage is broken up\ninto a couple of pieces and\n\n180\n00:09:33.870 --> 00:09:35.730\nthe first two are the real important ones.\n\n181\n00:09:35.730 --> 00:09:39.210\nThe first one is storage adapters and\nthe second one is storage devices.\n\n182\n00:09:39.210 --> 00:09:41.790\nThe storage adapters Adapters.\n\n183\n00:09:41.790 --> 00:09:45.790\nThose are the devices that let us\nconnect to the actual hard drives.\n\n184\n00:09:45.790 --> 00:09:49.750\nRIght, so this would be my\nonboard raid controller, or\n\n185\n00:09:49.750 --> 00:09:53.360\nmy fiber hba,\nmy eye scozee controller if I've got one,\n\n186\n00:09:53.360 --> 00:09:56.140\nthose are the things that would\nshow up under storage adapters.\n\n187\n00:09:56.140 --> 00:10:00.450\nAnd then on each adapter are gonna\nbe one or more hard drives.\n\n188\n00:10:00.450 --> 00:10:02.470\nAnd those show up under\nmy storage devices.\n\n189\n00:10:02.470 --> 00:10:04.090\nSo these are the hard\ndrives that I'm seeing.\n\n190\n00:10:04.090 --> 00:10:07.470\nNow that the naming convention\nis kinda important.\n\n191\n00:10:07.470 --> 00:10:10.650\nIn real life land you'll have whatever\nname you want for them, but on the exam,\n\n192\n00:10:10.650 --> 00:10:12.400\nthey want you to know VMwares.\n\n193\n00:10:12.400 --> 00:10:17.480\nWhen you look at the storage adapters,\nall of the adapters get treated as HBAs,\n\n194\n00:10:17.480 --> 00:10:19.050\nas host bust adapters.\n\n195\n00:10:19.050 --> 00:10:23.820\nDoesn't matter if they're fiber or\ncopper, if they're SCSI or IDE or SATA or\n\n196\n00:10:23.820 --> 00:10:27.730\nwhatever, they're all treated as HBAs So\nthey're going to get numbered that way.\n\n197\n00:10:27.730 --> 00:10:31.200\nThey'll show as vmhba and then a number.\n\n198\n00:10:31.200 --> 00:10:34.460\nSo, virtual machine host bus adaptor and\nthen a number.\n\n199\n00:10:34.460 --> 00:10:38.270\nSo you'll see I've got 3 of them,\nvmhba1, vmhba0 and\n\n200\n00:10:38.270 --> 00:10:40.920\nvmhba32 I don't know why it's 32.\n\n201\n00:10:40.920 --> 00:10:42.872\nIt just seems to have picked that.\n\n202\n00:10:42.872 --> 00:10:44.902\n[LAUGH] So I didn't name them.\n\n203\n00:10:44.902 --> 00:10:45.510\nIt did.\nAnd\n\n204\n00:10:45.510 --> 00:10:48.640\nif you look at the different types,\nI've got one that's SCSI,\n\n205\n00:10:48.640 --> 00:10:53.660\nand then I've got two more that are listed\nas block SCSI, different types of SCSI.\n\n206\n00:10:53.660 --> 00:11:00.030\nThe first one is showing that it's on\na Fusion-MPT Dual Ultra320 SCSI The other\n\n207\n00:11:00.030 --> 00:11:05.940\ntwo are showing as PIIX4 for\n430TX/440BX/MX IDE Controller.\n\n208\n00:11:05.940 --> 00:11:08.850\nThose are Intel motherboard part numbers,\nright?\n\n209\n00:11:08.850 --> 00:11:11.550\nSo these are the two different\nadapters that it found.\n\n210\n00:11:11.550 --> 00:11:14.030\nAnd there's potentially devices on each.\n\n211\n00:11:14.030 --> 00:11:18.110\nNow the reality is, one of these is\nprobably from my CD drive, right?\n\n212\n00:11:18.110 --> 00:11:23.690\nAnd so, it's a CD drive, I can't boot\nmy system off of a CD, it's read only.\n\n213\n00:11:23.690 --> 00:11:27.390\nAnd I can't run virtual machines off a CD,\nbecause again, it's read only.\n\n214\n00:11:27.390 --> 00:11:31.060\nSo I might see an adaptor in here but\nnot see any devices on it.\n\n215\n00:11:31.060 --> 00:11:35.550\nBut one of these other ones will actually\nhave my hard drives attached to it.\n\n216\n00:11:35.550 --> 00:11:38.350\nThis server has two hard drives in it,\none from my operating system and\n\n217\n00:11:38.350 --> 00:11:39.940\none that, I don't think I'm\nactually using right now,\n\n218\n00:11:39.940 --> 00:11:41.580\nI think it's just sitting\nthere doing nothing.\n\n219\n00:11:41.580 --> 00:11:43.300\nIt'll be attached to one of these two.\n\n220\n00:11:43.300 --> 00:11:44.840\nHow do I know which one?\n\n221\n00:11:44.840 --> 00:11:47.090\nShort answer is I don't,\nI don't know which one, but\n\n222\n00:11:47.090 --> 00:11:50.430\nI can go over here to storage devices and\nI can figure it out.\n\n223\n00:11:50.430 --> 00:11:54.800\nAnd here is where I can start\nto see what's attached to what.\n\n224\n00:11:54.800 --> 00:11:57.890\nAnd I can see that I'm spotting\nthree different drives.\n\n225\n00:11:57.890 --> 00:12:02.160\nOkay, I've got two disks,\na 40 gig disk and a 512 gig disk.\n\n226\n00:12:02.160 --> 00:12:05.450\nThose are the two hard drives in\nthe server and I've got a cd rom.\n\n227\n00:12:05.450 --> 00:12:10.230\nNow the cd rom shows up even though\nI can't actually use it for storage.\n\n228\n00:12:10.230 --> 00:12:15.220\nAnd if I look at the name\nthe name is what's important,\n\n229\n00:12:15.220 --> 00:12:17.440\nhere's where it's telling\nme information about it.\n\n230\n00:12:17.440 --> 00:12:23.280\nThese first two discs are both\nattached to vmhba1 and\n\n231\n00:12:23.280 --> 00:12:27.642\nif you look at the name it's mpx.vmhba1.\n\n232\n00:12:27.642 --> 00:12:31.750\nAll right,\nMPX is kind of the umbrella name for\n\n233\n00:12:31.750 --> 00:12:34.520\nthe storage provider\nthat's built into ESX.\n\n234\n00:12:34.520 --> 00:12:37.050\nOn any modern ESX box,\n\n235\n00:12:37.050 --> 00:12:41.410\nall of your storage providers are gonna be\nprefixed with MPX, you'll see that there.\n\n236\n00:12:41.410 --> 00:12:45.950\nIf you have older ESX boxes, or ones that\nhave been upgraded over and over and over\n\n237\n00:12:45.950 --> 00:12:50.330\nagain, so maybe it was maybe it was ESXI 4\nand then you upgraded to 5 and 5.1, 5.5.\n\n238\n00:12:50.330 --> 00:12:52.830\nNow you're on 6, you can do that.\n\n239\n00:12:52.830 --> 00:12:53.410\nRight?\n\n240\n00:12:53.410 --> 00:12:56.020\nESXI 6 will run on some\nof that older hardware.\n\n241\n00:12:56.020 --> 00:12:59.060\nThen you might see other\nthings than MPX in there.\n\n242\n00:12:59.060 --> 00:13:00.800\nFor example, on SCSI disks,\n\n243\n00:13:00.800 --> 00:13:05.300\non older systems, you might see EUI,\nwhich was the old universal numbering.\n\n244\n00:13:05.300 --> 00:13:10.310\nYou might see naa is another one, or\neven vml, vml would be really old.\n\n245\n00:13:10.310 --> 00:13:14.500\nI mean, you could have ancient ESX for\nthat one, but\n\n246\n00:13:14.500 --> 00:13:17.090\non any modern system you'll see mpx.\n\n247\n00:13:17.090 --> 00:13:20.640\nAnd then the following name is\nvmhba followed by a number.\n\n248\n00:13:20.640 --> 00:13:25.390\nSo I know that these first two are on\nvmhba1, and the other ones on vmhba32.\n\n249\n00:13:25.390 --> 00:13:30.030\nSo when I went back on my storage\nadapters I had this vmhba1, that's where\n\n250\n00:13:30.030 --> 00:13:35.020\nmy two hard drives are and vmhba32,\nthat's where that CD rom drive is.\n\n251\n00:13:35.020 --> 00:13:38.900\nI've got vmhba0 apparently nothings on it.\n\n252\n00:13:38.900 --> 00:13:39.740\nVery common for\n\n253\n00:13:39.740 --> 00:13:43.090\nyou to get a server that has a motherboard\nwith connectors on it that aren't used.\n\n254\n00:13:43.090 --> 00:13:45.660\nYou might have an onboard RAID controller,\nbut\n\n255\n00:13:45.660 --> 00:13:47.930\nyou still have the onboard regular SATA or\n\n256\n00:13:47.930 --> 00:13:50.690\nSCSI ports that you're just not using\ncuz you're using the RAID controller.\n\n257\n00:13:50.690 --> 00:13:53.720\nSo don't be surprised if you have\nan adapter with nothing plugged\n\n258\n00:13:53.720 --> 00:13:54.340\ninto it, like I do.\n\n259\n00:13:56.030 --> 00:13:59.270\nAll right, then, the rest of the name,\nif we look at it.\n\n260\n00:13:59.270 --> 00:14:05.290\nSee how mine are mpx.vmhba1 And\nthen :c00:t00:l0, right.\n\n261\n00:14:05.290 --> 00:14:07.510\nWhat's all that stuff?\n\n262\n00:14:08.620 --> 00:14:13.680\nWell, it's talking about the channel and\nthe identifier for the disk.\n\n263\n00:14:13.680 --> 00:14:16.400\nAnd so these are both on channel 0.\n\n264\n00:14:16.400 --> 00:14:18.260\nAnd then we've got t0, t1, right.\n\n265\n00:14:18.260 --> 00:14:21.360\nSo basically the first disk and\nthe second disk.\n\n266\n00:14:21.360 --> 00:14:23.460\nYou can have more than\none disk on a SCSI chain.\n\n267\n00:14:23.460 --> 00:14:24.990\nYou can have up to 15 disks.\n\n268\n00:14:24.990 --> 00:14:25.810\nRight?\n\n269\n00:14:25.810 --> 00:14:28.100\nMost people these days are doing\nserial attached SCSI so\n\n270\n00:14:28.100 --> 00:14:30.150\nit'll be one disk per channel.\n\n271\n00:14:30.150 --> 00:14:32.890\nAnd if you're doing SATA you'll\nhave one disk per channel too.\n\n272\n00:14:32.890 --> 00:14:35.200\nSo you won't necessarily see\nit like I'm seeing here.\n\n273\n00:14:35.200 --> 00:14:36.530\nMine's using regular SCSI.\n\n274\n00:14:37.600 --> 00:14:41.780\nSo those are the disks that are showing\nup and down here I can see that CD,\n\n275\n00:14:41.780 --> 00:14:44.808\nsame basic naming basically\nfollowing right after that.\n\n276\n00:14:44.808 --> 00:14:49.720\nAll right, so\nthose are the existing stores\n\n277\n00:14:49.720 --> 00:14:53.470\nthat I'm seeing and you can do various\nfilters up here, you'll see where you can\n\n278\n00:14:53.470 --> 00:14:57.160\nrefresh your layout you can light\nup a hard drive that's useful.\n\n279\n00:14:57.160 --> 00:15:00.170\nIf you're staring at the front of a SAN,\nand there's a hundred hard drives,\n\n280\n00:15:00.170 --> 00:15:01.660\nhow do you know which one is which.\n\n281\n00:15:01.660 --> 00:15:04.530\nYou can pick the hard drive here and hit\nthe green light, and it'll light it up so\n\n282\n00:15:04.530 --> 00:15:06.850\nthat you actually see that status.\n\n283\n00:15:06.850 --> 00:15:09.020\nYou can also do some basic filtering.\n\n284\n00:15:09.020 --> 00:15:11.470\nWe can mark them as hard drives, so\n\n285\n00:15:11.470 --> 00:15:14.640\nif it doesn't know that this is a hard\ndrive, well it knows they're hard drives.\n\n286\n00:15:14.640 --> 00:15:16.160\nSee how it shows them as disks?\n\n287\n00:15:16.160 --> 00:15:19.760\nBut sometimes it might pick something\nup as cache instead, and so\n\n288\n00:15:19.760 --> 00:15:21.700\nI could change it and\nflag it as a hard drive.\n\n289\n00:15:21.700 --> 00:15:25.630\nYou've got Host Cache Configuration over\nhere, there's a lot of RAID controllers,\n\n290\n00:15:25.630 --> 00:15:30.340\nthat will have 32 gigs, even 128 gigs of\n\n291\n00:15:30.340 --> 00:15:33.720\nflash on the RAID controller to give\nyou accelerated performance, and\n\n292\n00:15:33.720 --> 00:15:36.370\nso it will normally show up\nunder host cache, like this.\n\n293\n00:15:36.370 --> 00:15:40.320\nYou can also have regular disk storage,\nit shows up that way too, so\n\n294\n00:15:40.320 --> 00:15:43.019\nthose are instances where something might\nnot show up the way that you expect it.\n\n295\n00:15:44.442 --> 00:15:47.800\nAll right now,\nwhat If I wanna attach this to a sand.\n\n296\n00:15:47.800 --> 00:15:50.420\nWell what would do is I'd\nshut the server down, and\n\n297\n00:15:50.420 --> 00:15:54.740\nthen I would add the fiber HBA and\nI would power it on.\n\n298\n00:15:54.740 --> 00:15:57.730\nAnd as soon as the system came up I'd come\nright in here to storage adapters and\n\n299\n00:15:57.730 --> 00:15:59.717\nI'd look to see if the storage\nadapters showed up.\n\n300\n00:15:59.717 --> 00:16:03.669\nIdeally it'll just show up here in\nthe list, if it's supported by VMware,\n\n301\n00:16:03.669 --> 00:16:05.164\nthat's kind of important.\n\n302\n00:16:05.164 --> 00:16:07.995\nVMware, they actually have\na compatibility guide.\n\n303\n00:16:07.995 --> 00:16:10.844\nIf you're gonna be connecting to a SAN\nyou need to make sure that it shows up on\n\n304\n00:16:10.844 --> 00:16:12.144\nthe VMware Compatibility Guide.\n\n305\n00:16:12.144 --> 00:16:14.195\nAnd you come in here and search for\nwhatever it is that you have.\n\n306\n00:16:14.195 --> 00:16:17.278\nYou can specify motherboards, and\nso on, and it will look it up and\n\n307\n00:16:17.278 --> 00:16:19.620\nfind out whether or not they support it.\n\n308\n00:16:19.620 --> 00:16:21.772\nAssuming your hardware\nadapter is supported,\n\n309\n00:16:21.772 --> 00:16:23.450\nit will just magically show up here.\n\n310\n00:16:23.450 --> 00:16:27.730\nNow, I'll tell you the system\ndetects it really fast, but\n\n311\n00:16:27.730 --> 00:16:30.400\nthe graphical user interface doesn't for\nwhatever reason.\n\n312\n00:16:30.400 --> 00:16:32.685\nAnd so if you look up here at the buttons,\n\n313\n00:16:32.685 --> 00:16:35.790\nyou'll see there's refresh\nthis host information.\n\n314\n00:16:35.790 --> 00:16:39.130\nSo let's just refresh the Gui,\nthat's kinda useful.\n\n315\n00:16:39.130 --> 00:16:43.940\nBut over here is rescan\nthe host storage adapter.\n\n316\n00:16:43.940 --> 00:16:47.120\nSo if you've added an adapter,\nyou can rescan it so\n\n317\n00:16:47.120 --> 00:16:49.230\nit can pick up the hard\ndrives on the adapter.\n\n318\n00:16:49.230 --> 00:16:52.710\nAnd then here, this one,\nrescan the storage adaptors.\n\n319\n00:16:52.710 --> 00:16:55.260\nMaybe you've got a server that you don't\nhave to shut down to add adaptors.\n\n320\n00:16:55.260 --> 00:16:57.160\nMaybe it has a hot spot functionality.\n\n321\n00:16:57.160 --> 00:16:59.970\nAnd so if you swap one in, you might\nhave to hit this to rescan and look for\n\n322\n00:16:59.970 --> 00:17:01.460\nan adaptor that didn't show up.\n\n323\n00:17:01.460 --> 00:17:03.020\nSo you've got the ability to do a rescan.\n\n324\n00:17:03.020 --> 00:17:06.390\nAnd you'll see frequently where a warning\nwill pop up on your screen saying,\n\n325\n00:17:06.390 --> 00:17:08.560\nyou really should do a rescan.\n\n326\n00:17:08.560 --> 00:17:11.660\nLet me give you an example of iSCSI.\n\n327\n00:17:11.660 --> 00:17:15.730\nIf I wanna attach to iSCSI storage,\niSCSI storage is on the network.\n\n328\n00:17:15.730 --> 00:17:19.090\nSo I don't have a regular,\nphysical host bus adapter for it,\n\n329\n00:17:19.090 --> 00:17:20.430\nI use my network adapter.\n\n330\n00:17:20.430 --> 00:17:21.770\nAnd so I can come in and\nI can configure that.\n\n331\n00:17:21.770 --> 00:17:24.680\nNow it's never gonna automatically\nfind it, I have to add it in.\n\n332\n00:17:24.680 --> 00:17:28.533\nSo let me walk through that process I'm\ngonna go to my storage adapters and\n\n333\n00:17:28.533 --> 00:17:30.533\nI'm gonna add a new storage adapter.\n\n334\n00:17:30.533 --> 00:17:33.163\nIf it was a hardware adapter it\nwould find them on it's own but\n\n335\n00:17:33.163 --> 00:17:35.392\nbecause this is a software\nadapter I have to add it.\n\n336\n00:17:35.392 --> 00:17:40.000\nAnd you'll see iSCSI and\nFCoE are both software adapters.\n\n337\n00:17:40.000 --> 00:17:43.390\nSo I'm gonna go and choose to add it,\nso it's gonna add it to the list, right?\n\n338\n00:17:43.390 --> 00:17:47.570\nSo I'll go ahead and\ndo that and it should show up.\n\n339\n00:17:47.570 --> 00:17:49.690\nThere it was,\ndown there at the bottom, there we go.\n\n340\n00:17:49.690 --> 00:17:52.470\nSo I just created vmhba33,\nand it shows as iSCSI,\n\n341\n00:17:52.470 --> 00:17:57.620\nit shows as online, and\nit shows my iqn, my identifier, right?\n\n342\n00:17:57.620 --> 00:18:01.320\nSo there it is,\nI'm now connected to iSCSI, right?\n\n343\n00:18:01.320 --> 00:18:05.140\nSort of, if I look down here at\nthe bottom, I've chosen vmhba33, and\n\n344\n00:18:05.140 --> 00:18:07.770\nunder devices it's empty.\n\n345\n00:18:07.770 --> 00:18:11.490\nSo what I've done is I've\nturned on iSCSI support, but\n\n346\n00:18:11.490 --> 00:18:15.380\nI need to point it to the actual\niSCSI SAN that's on the network.\n\n347\n00:18:15.380 --> 00:18:18.380\nSo no matter how many times I hit refresh\nor whatever, it's not gonna make any\n\n348\n00:18:18.380 --> 00:18:21.570\ndifference until I actually get in\nhere and configure it to connect.\n\n349\n00:18:21.570 --> 00:18:24.110\nOtherwise it's just gonna sit here, right?\n\n350\n00:18:24.110 --> 00:18:28.680\nSo if we wanna configure that, for\niSCSI you define what's called a target.\n\n351\n00:18:28.680 --> 00:18:32.580\nAnd so I'm gonna go under Targets, and\nhere's where you can specify where your\n\n352\n00:18:32.580 --> 00:18:35.350\nSAN is, and so\nI'm gonna add in a target real quick.\n\n353\n00:18:35.350 --> 00:18:38.760\nAnd I've just got a simple SAN fired up,\nnothing too fancy.\n\n354\n00:18:38.760 --> 00:18:43.750\nI'm actually not a fan of iSCSI, I try\nnot to use it if I can ever avoid it.\n\n355\n00:18:43.750 --> 00:18:50.110\nBecause when you send SCSI traffic over\na TCPIP network you get TCPIP's overhead.\n\n356\n00:18:50.110 --> 00:18:52.570\nIt slows things down, it's really painful.\n\n357\n00:18:52.570 --> 00:18:56.570\nSo, iSCSI's great in a test or a lab\nenvironment, it's terrible in production.\n\n358\n00:18:56.570 --> 00:18:58.620\nSo, you really don't wanna\nuse it in production.\n\n359\n00:18:58.620 --> 00:19:00.460\nBut I'm just using it\nhere as a simple example.\n\n360\n00:19:00.460 --> 00:19:03.790\nAll right, so I'm gonna punch in\nthe IP address of that server.\n\n361\n00:19:03.790 --> 00:19:08.910\nAnd it's gonna connect and\nit's connecting in the background,\n\n362\n00:19:08.910 --> 00:19:11.120\nmy screen has kind of disappeared.\n\n363\n00:19:11.120 --> 00:19:13.890\nLet me jump back into my configuration.\n\n364\n00:19:15.650 --> 00:19:18.325\nAnd I'll have to refresh my screen,\nit's kind of wigging out on my here.\n\n365\n00:19:18.325 --> 00:19:22.660\nSo it's gonna connect, and we'll see\nif it gets connected to that target.\n\n366\n00:19:22.660 --> 00:19:25.620\nNow if you're doing authentication,\nyou'll have to provide a username and\n\n367\n00:19:25.620 --> 00:19:27.710\na password, I've got mine set\nup kind of just automatic.\n\n368\n00:19:27.710 --> 00:19:30.880\nAnd it didn't turn up,\nso let's try that again,\n\n369\n00:19:30.880 --> 00:19:33.330\nI'm gonna go back to my Static Discovery\nhere and I'll add it again.\n\n370\n00:19:35.808 --> 00:19:41.340\nHaving a web-based management interface\nlike this is nice because it makes\n\n371\n00:19:41.340 --> 00:19:43.630\nit where you don't install\nsoftware on your machine.\n\n372\n00:19:43.630 --> 00:19:46.500\nBut it's kind of\na negative sometimes if if\n\n373\n00:19:48.440 --> 00:19:50.880\nit crashes out like mine just did [LAUGH].\n\n374\n00:19:50.880 --> 00:19:53.400\nSo I'm just gonna try and\npunch this back in again and\n\n375\n00:19:53.400 --> 00:19:57.520\nI shouldn't have to give an iSCSI target\nname, let's just try that one more time.\n\n376\n00:19:57.520 --> 00:19:59.170\nIt is gonna make me give it a target name.\n\n377\n00:19:59.170 --> 00:20:06.344\nAll right, so\nI'll call this the itprotv-lab-iSCSI.\n\n378\n00:20:06.344 --> 00:20:10.080\nAll right, so we'll give it a name and\nwe'll let it re-detect.\n\n379\n00:20:10.080 --> 00:20:12.100\nAll right, so it's gonna reach out and\ntry and connect to that, and\n\n380\n00:20:12.100 --> 00:20:13.930\nI'll give it just a moment\nto see if it connects.\n\n381\n00:20:13.930 --> 00:20:16.710\nNow, if I don't see anything right away,\nI'm actually not\n\n382\n00:20:16.710 --> 00:20:20.140\nworried about that because I might\njust need to refresh my screen.\n\n383\n00:20:20.140 --> 00:20:22.200\nMy tasks here show as completed.\n\n384\n00:20:22.200 --> 00:20:25.810\nI've got this\nChange Software Internet SCSI Status.\n\n385\n00:20:25.810 --> 00:20:30.450\nAnd it says it's completed so if there's\nstill nothing showing up down there\n\n386\n00:20:30.450 --> 00:20:32.240\nI may just need to do a refresh, right?\n\n387\n00:20:32.240 --> 00:20:34.750\nAnd this is where these refresh\nbuttons come in handy and\n\n388\n00:20:34.750 --> 00:20:36.410\nit does show up on the exam.\n\n389\n00:20:36.410 --> 00:20:40.690\nWhere I can rescan my adapters and\nI can rescan the storage.\n\n390\n00:20:40.690 --> 00:20:43.180\nI don't need to rescan the adapter,\nmy adapter shows up, but\n\n391\n00:20:43.180 --> 00:20:44.950\nI do need to rescan the storage.\n\n392\n00:20:44.950 --> 00:20:48.180\nI'm connected to that device and if I\nrescan the storage, it should look for\n\n393\n00:20:48.180 --> 00:20:50.130\ndrives that are attached to it.\n\n394\n00:20:50.130 --> 00:20:54.240\nAnd those drives should show up here\nunder Devices when it finds them.\n\n395\n00:20:54.240 --> 00:20:57.508\nAll right, now iSCSI is not necessarily\nthe fastest thing on the planet.\n\n396\n00:20:57.508 --> 00:21:00.940\nSo I'm gonna give it just a minute while\nit reaches out to connect to that, and\n\n397\n00:21:00.940 --> 00:21:02.620\nI might need to refresh one more time.\n\n398\n00:21:02.620 --> 00:21:04.080\nSo we'll give that a second.\n\n399\n00:21:04.080 --> 00:21:07.220\nBut once it connects, it's gonna\ntalk to that SAN and it's gonna say,\n\n400\n00:21:07.220 --> 00:21:08.610\ngive me a list of drives.\n\n401\n00:21:08.610 --> 00:21:10.760\nAnd those will drives will\nnow show up under my devices,\n\n402\n00:21:10.760 --> 00:21:13.270\nand we'll actually see them as drives\nthat I can start to work with.\n\n403\n00:21:13.270 --> 00:21:16.010\nWith fiber, you can boot off of them,\nthey're a boot time.\n\n404\n00:21:16.010 --> 00:21:20.520\nWith iSCSI, they only show up after\nthe system has fired up its network and\n\n405\n00:21:20.520 --> 00:21:22.760\nmade it where it's able to reach out and\nconnect.\n\n406\n00:21:22.760 --> 00:21:27.550\nNow once it's connected,\nnow we can start to use the drives.\n\n407\n00:21:27.550 --> 00:21:29.990\nAnd you can't really use the drive\n\n408\n00:21:29.990 --> 00:21:32.820\nuntil you've created what's\ncalled a datastore on it.\n\n409\n00:21:32.820 --> 00:21:34.600\nA datastore it's a format.\n\n410\n00:21:34.600 --> 00:21:37.260\nYou have to format out that\nstorage to be able to use it and\n\n411\n00:21:37.260 --> 00:21:39.960\nthere's two different formats for\ndatastores.\n\n412\n00:21:39.960 --> 00:21:44.410\nOne is NFS, which we're not normally gonna\nuse, NFS is the network files system.\n\n413\n00:21:44.410 --> 00:21:47.460\nIt's used by UNIX and\nit's typically used with shared folders.\n\n414\n00:21:47.460 --> 00:21:49.520\nSo I might have a Linux or\n\n415\n00:21:49.520 --> 00:21:52.750\nUnix based server on my network or\nMac OS for that matter.\n\n416\n00:21:52.750 --> 00:21:55.485\nAnd I might set up an NFS share on it and\n\n417\n00:21:55.485 --> 00:21:59.075\nI can mount a datastore in vSphere\nto point to that NFS share.\n\n418\n00:21:59.075 --> 00:22:01.795\nAnd now anything I put on\nthe data store goes to NFS.\n\n419\n00:22:01.795 --> 00:22:04.675\nWell, that's over TCP-IP,\nit's over your regular network.\n\n420\n00:22:04.675 --> 00:22:06.445\nIt's slow, it's not ideal.\n\n421\n00:22:06.445 --> 00:22:08.985\nIt's actually great for\nstoring ISO images.\n\n422\n00:22:08.985 --> 00:22:11.795\nSo if you have ISOs, like disk images,\nyou can load them up to your heart's\n\n423\n00:22:11.795 --> 00:22:14.590\ncontent in an NFS datastore and\nit works great.\n\n424\n00:22:14.590 --> 00:22:17.290\nBut you wouldn't wanna put your\nvirtual machine hard drives in there.\n\n425\n00:22:17.290 --> 00:22:19.510\nIt will let you, but\nyou wouldn't wanna do that.\n\n426\n00:22:19.510 --> 00:22:23.020\nInstead you're gonna want a datastore\nthat's actually created on regular\n\n427\n00:22:23.020 --> 00:22:25.230\nhard drives, or SAN drives.\n\n428\n00:22:25.230 --> 00:22:28.769\nAnd those are gonna be formatted\nwith what's called the VMFS,\n\n429\n00:22:28.769 --> 00:22:30.721\nthe virtual machine file system.\n\n430\n00:22:30.721 --> 00:22:33.982\nThe VMFS is a special file\nsystem that VMware created.\n\n431\n00:22:33.982 --> 00:22:38.344\nThat provides support for\nvirtual machines, for v-Motion,\n\n432\n00:22:38.344 --> 00:22:41.260\nfor snapshots, for advanced disk I/O.\n\n433\n00:22:41.260 --> 00:22:45.690\nAll the advanced bells and whistles of\nthe storage system inside of vSphere and\n\n434\n00:22:45.690 --> 00:22:49.440\nESXi are provided by\nthat VMFS file system.\n\n435\n00:22:49.440 --> 00:22:51.766\nSo when we create a datastore\non the hard drive,\n\n436\n00:22:51.766 --> 00:22:54.810\nit's gonna format that hard\ndrive with the VMFS file system.\n\n437\n00:22:54.810 --> 00:22:57.310\nAnd then we'll be able to\nactually use it to store things.\n\n438\n00:22:57.310 --> 00:22:59.040\nBut we've gotta have\nthe drive set up first, and\n\n439\n00:22:59.040 --> 00:23:00.080\nthen we'll be able to connect and create.\n\n440\n00:23:00.080 --> 00:23:01.070\nI actually have my internal drive,\n\n441\n00:23:01.070 --> 00:23:03.790\nI guess I can just use that one\ninstead of waiting on iSCSI.\n\n442\n00:23:03.790 --> 00:23:05.810\nIf I jump down to my storage devices,\n\n443\n00:23:05.810 --> 00:23:08.630\nI can see these internal\ndrives that I've got.\n\n444\n00:23:08.630 --> 00:23:10.660\nI've got a 40 gig one\nthat I'm already using,\n\n445\n00:23:10.660 --> 00:23:13.860\nthat's where my operating system is.\n\n446\n00:23:13.860 --> 00:23:17.000\nBut I've got a 500 gig drive that I'm not\nusing, it's just kinda sitting there.\n\n447\n00:23:17.000 --> 00:23:20.580\nAnd so if I wanna use that,\nI could take it and\n\n448\n00:23:20.580 --> 00:23:25.350\ncreate a data store to reside on it and\nnow I'll be able to put things in it.\n\n449\n00:23:25.350 --> 00:23:27.660\nWe do that on the host,\nso I'm on the host here.\n\n450\n00:23:28.780 --> 00:23:32.600\nAnd when we take a look at the host, we\nneed to switch over to our storage view.\n\n451\n00:23:32.600 --> 00:23:37.240\nAnd so in my navigator over here, see\nhow I'm on the Hosts and Clusters link?\n\n452\n00:23:37.240 --> 00:23:39.610\nI'm gonna switch over to Storage.\n\n453\n00:23:39.610 --> 00:23:43.610\nAnd under storage I see some\ndatastores that I have, okay?\n\n454\n00:23:43.610 --> 00:23:45.730\nDatastore1, datastore1, what is that?\n\n455\n00:23:45.730 --> 00:23:51.020\nWell, I have two servers,\nESXHost01 and Host02.\n\n456\n00:23:51.020 --> 00:23:53.950\nHost02 is in maintenance mode right now,\nthat's this inactive one.\n\n457\n00:23:53.950 --> 00:23:56.450\nBut they both have a datastore\ncalled datastore1.\n\n458\n00:23:56.450 --> 00:24:00.458\nWhen you install ESXi it creates one\ndatastore right there on the drive with\n\n459\n00:24:00.458 --> 00:24:01.741\nthe operating system.\n\n460\n00:24:01.741 --> 00:24:03.246\nAnd it's called datastore1.\n\n461\n00:24:03.246 --> 00:24:06.170\nThe more servers you have the more\ndatastore1's you'll have.\n\n462\n00:24:06.170 --> 00:24:07.943\nIt gets really confusing really fast.\n\n463\n00:24:07.943 --> 00:24:11.068\nSo usually, I don't make use of those.\n\n464\n00:24:11.068 --> 00:24:14.880\nSo just ignore datastore one, or\njust kind of flag it not to use.\n\n465\n00:24:14.880 --> 00:24:16.690\nWe're going to create our own.\n\n466\n00:24:16.690 --> 00:24:18.600\nSo I'm going to create\na new datastore in here.\n\n467\n00:24:19.870 --> 00:24:23.660\nAnd I'll just right click on the\ndatacenter, and as you kind of look down\n\n468\n00:24:23.660 --> 00:24:27.560\nat the various things you've got, you've\ngot storage, and new datastore, alright?\n\n469\n00:24:27.560 --> 00:24:29.300\nI'm going to create a new datastore.\n\n470\n00:24:29.300 --> 00:24:31.600\nAnd it's gonna ask where it's gonna go.\n\n471\n00:24:31.600 --> 00:24:32.760\nAnd it's going in that data center.\n\n472\n00:24:33.760 --> 00:24:35.230\nAnd then it's gonna ask for the type.\n\n473\n00:24:35.230 --> 00:24:38.150\nAnd here's where I'm gonna see NFS and\nVMFS, right?\n\n474\n00:24:38.150 --> 00:24:40.200\nIt needs to know what\nI'm trying to create.\n\n475\n00:24:40.200 --> 00:24:43.400\nAnd so as it moves forward, it's looking\nat the possible options that I have.\n\n476\n00:24:43.400 --> 00:24:47.525\nCuz if I'm attached to a fiber channel\nsan, or if I'm attached to [INAUDIBLE], or\n\n477\n00:24:47.525 --> 00:24:50.960\nif I have local storage, each one is going\nto present me with different things.\n\n478\n00:24:50.960 --> 00:24:52.830\nAnd so it's gonna build that up and\ndisplay it.\n\n479\n00:24:52.830 --> 00:24:56.380\nAnd mine is sitting here probably\nbecause iSCSI is timing out.\n\n480\n00:24:56.380 --> 00:24:57.340\nThere we go.\n\n481\n00:24:57.340 --> 00:24:59.120\nAnd I got three options.\n\n482\n00:24:59.120 --> 00:24:59.930\nThe first one is VMFS.\n\n483\n00:24:59.930 --> 00:25:00.900\nThat's the one I want.\n\n484\n00:25:00.900 --> 00:25:02.800\nThat's the virtual machine file system.\n\n485\n00:25:02.800 --> 00:25:06.340\nIt's a data store on a disk or LUN.\n\n486\n00:25:06.340 --> 00:25:07.550\nWhat's a LUN?\n\n487\n00:25:07.550 --> 00:25:10.470\nWell a LUN is a logical unit number.\n\n488\n00:25:10.470 --> 00:25:11.970\nWhen you have a SUN.\n\n489\n00:25:11.970 --> 00:25:14.690\nIf I go back to my crazy diagram here,\nI have a SAN.\n\n490\n00:25:14.690 --> 00:25:16.430\nA SAN has a bunch of hard drives.\n\n491\n00:25:16.430 --> 00:25:19.760\nWhen a server connects, how does it\ntell one hard drive apart from another?\n\n492\n00:25:19.760 --> 00:25:23.280\nWell, each hard drive is given a LUN,\na logical unit number.\n\n493\n00:25:23.280 --> 00:25:25.240\nAnd I keep saying hard drive.\n\n494\n00:25:25.240 --> 00:25:27.170\nIt's not necessarily one hard drive.\n\n495\n00:25:27.170 --> 00:25:30.770\nI might have 3 hard drives\nin a rayfiveerray or\n\n496\n00:25:30.770 --> 00:25:35.640\n20 hard drives in a rayteneray, and\nit shows up as one big virtual drive.\n\n497\n00:25:35.640 --> 00:25:37.610\nAnd that virtual drive gets along.\n\n498\n00:25:37.610 --> 00:25:42.050\nSo our server unit sees it as a logical\nunit number, a single number.\n\n499\n00:25:42.050 --> 00:25:45.560\nAn ascargi chain you can have\nup to 15 ascargi hard drives.\n\n500\n00:25:45.560 --> 00:25:47.240\nAnd they're labeled 1-15.\n\n501\n00:25:47.240 --> 00:25:51.100\n0 is tied up by the server so\nyou have 1-15 leftover.\n\n502\n00:25:51.100 --> 00:25:53.120\nWell, that's kind of how these LUNs work.\n\n503\n00:25:53.120 --> 00:25:56.530\nLUNs actually came from the SCSI world,\nso that's why I'm saying,\n\n504\n00:25:56.530 --> 00:26:00.300\nthis is either gonna be a disk,\nwhich would be internal to the server, or\n\n505\n00:26:00.300 --> 00:26:04.170\na LUN, which would be on a fiber\nchannel SAN or some kind of copper SAN.\n\n506\n00:26:05.260 --> 00:26:06.430\nThen I can do NFS.\n\n507\n00:26:06.430 --> 00:26:08.090\nNFS is that datastore over the network.\n\n508\n00:26:08.090 --> 00:26:09.070\nI said that's slow.\n\n509\n00:26:09.070 --> 00:26:10.140\nWe don't wanna do that.\n\n510\n00:26:10.140 --> 00:26:12.490\nUnless this is where we're going\nto be storing ISO images or\n\n511\n00:26:12.490 --> 00:26:16.840\nmaybe virtual machine templates we\ndon't need that often or whatever.\n\n512\n00:26:16.840 --> 00:26:20.570\nThe last one is VVOL,\nwhich is virtual volume, and\n\n513\n00:26:20.570 --> 00:26:23.630\na virtual volume is a data store\nthat's stored in the VSAN.\n\n514\n00:26:23.630 --> 00:26:25.890\nWe'll talk about VSANs in another episode.\n\n515\n00:26:25.890 --> 00:26:30.360\nBut you can take one physical SAN and\nslice it into virtual SANs.\n\n516\n00:26:30.360 --> 00:26:34.590\nSo maybe I've got storage for\na DMZ on one SAN and\n\n517\n00:26:34.590 --> 00:26:37.880\nI've got storage on my\ninternal stuff on another SAN.\n\n518\n00:26:37.880 --> 00:26:40.150\nAnd I wanna combine it\ninto one virtual SAN.\n\n519\n00:26:40.150 --> 00:26:43.860\nOr I have one physical SAN I want to\ndivide into virtual SANs either way and\n\n520\n00:26:43.860 --> 00:26:45.790\nthose will be virtual volumes.\n\n521\n00:26:45.790 --> 00:26:49.020\nBut I'm gonna do VMFS that's the standard\nstorage what we're gonna use most of\n\n522\n00:26:49.020 --> 00:26:51.060\nthe time.\n\n523\n00:26:51.060 --> 00:26:53.020\nNow it's gonna ask where\nI'm gonna create it and\n\n524\n00:26:53.020 --> 00:26:56.650\nI need to pick the host that it's gonna be\ntied to and mine's gonna be tied to host1\n\n525\n00:26:56.650 --> 00:27:01.230\nand it's gonna look at that host and\nit's gonna show me any drive.\n\n526\n00:27:01.230 --> 00:27:03.280\nThat's not currently in use.\n\n527\n00:27:03.280 --> 00:27:06.700\nSo my 40 gig drive, that's where my\noperating system is, that's in use,\n\n528\n00:27:06.700 --> 00:27:08.060\nit doesn't show up.\n\n529\n00:27:08.060 --> 00:27:11.780\nMy 500 gig drive, it's right here,\nit shows up, and it's ready to go.\n\n530\n00:27:11.780 --> 00:27:15.480\nAnd if iSCSI had detected I would\nsee the iSCSI drives here too.\n\n531\n00:27:15.480 --> 00:27:18.370\nBut my internal drive is good enough for\nme, that's the one I'm gonna ride with.\n\n532\n00:27:18.370 --> 00:27:20.710\nIt's got 500 gigs of space on it.\n\n533\n00:27:20.710 --> 00:27:25.150\nAnd so now I'll hit next and\nit's gonna ask how I wanna do it.\n\n534\n00:27:25.150 --> 00:27:28.760\nNow I can use the whole\ndrive that's the default or\n\n535\n00:27:28.760 --> 00:27:33.120\nI can customize it and I can specify\na certain portion of the drive ques.\n\n536\n00:27:33.120 --> 00:27:35.100\nIt's up to me to go in here and\n\n537\n00:27:35.100 --> 00:27:40.770\nchange the size, adjust that to whatever\nit is that im trying to achieve.\n\n538\n00:27:40.770 --> 00:27:43.650\nAnd I can even create more than\none data store in the same drive\n\n539\n00:27:43.650 --> 00:27:47.260\nnot a whole lot of reason to do that\nI know you might be thinking well I\n\n540\n00:27:47.260 --> 00:27:50.920\nmight do that to separate things maybe\na DMZ service I wanna keep separate.\n\n541\n00:27:50.920 --> 00:27:56.230\nWell when you store virtual machines\nin VMFS it isolates the VMs already so\n\n542\n00:27:56.230 --> 00:27:58.400\nthat they are in their own directory but\nthere is permissions and\n\n543\n00:27:58.400 --> 00:28:01.350\nthings that have set so\nthat each virtual machine is truly\n\n544\n00:28:01.350 --> 00:28:04.550\nisolated inside of VMFS it's\none of the nice features.\n\n545\n00:28:04.550 --> 00:28:08.870\nSo, there's really no benefit of dicing\nthis up into smaller partitions,\n\n546\n00:28:08.870 --> 00:28:09.620\nI'll just do the whole thing.\n\n547\n00:28:11.660 --> 00:28:15.200\nWhen that's done I'm going to finish\nit up, and now I'm going to have\n\n548\n00:28:15.200 --> 00:28:19.880\na data store available, and it's given\nit the amazing name of data store.\n\n549\n00:28:19.880 --> 00:28:23.930\nAgain, one that can be used over and over\nand completely confused and forgotten.\n\n550\n00:28:23.930 --> 00:28:27.220\nSo we might wanna change that name or\nedit it a bit to try and\n\n551\n00:28:27.220 --> 00:28:30.140\nmake it something that's\na little more meaningful to us.\n\n552\n00:28:30.140 --> 00:28:34.480\nBut the default setting there of just\ndata store is fine for me for now.\n\n553\n00:28:34.480 --> 00:28:39.040\nAnd we can get that put in place and now\nwe can start to use it by use it I mean\n\n554\n00:28:39.040 --> 00:28:41.700\nwhen I create a virtual machine it's gonna\nask me where to put the hard drives,\n\n555\n00:28:41.700 --> 00:28:45.230\nI can choose to put the hard drives right\nhere and that's gonna be where I store it.\n\n556\n00:28:45.230 --> 00:28:47.960\nNow the problem with the data\nstorage that I just made\n\n557\n00:28:47.960 --> 00:28:53.110\nis that it's tied to ESX host 01,\nit's right here in this machine.\n\n558\n00:28:53.110 --> 00:28:56.080\nIf I had clustered storage\nthat would be better.\n\n559\n00:28:56.080 --> 00:28:57.690\nBecause now it's not tied to one machine.\n\n560\n00:28:57.690 --> 00:28:59.708\nSo you probably noticed when\nI created that datastore,\n\n561\n00:28:59.708 --> 00:29:04.160\nwhen I right-clicked I went to Storage and\nNew Datastore.\n\n562\n00:29:04.160 --> 00:29:07.200\nRight beneath it, New Datastore Cluster.\n\n563\n00:29:07.200 --> 00:29:11.400\nThat's when you've got storage that's\nattached to more than one host.\n\n564\n00:29:11.400 --> 00:29:12.750\nThen you can have failover.\n\n565\n00:29:12.750 --> 00:29:16.780\nIf you're gonna do vMotion, your datastore\nis gonna need to be a datastore cluster.\n\n566\n00:29:16.780 --> 00:29:19.210\nIt's gotta be shared between the systems.\n\n567\n00:29:19.210 --> 00:29:20.350\nIn my scenario it's not.\n\n568\n00:29:20.350 --> 00:29:22.250\nI choose local storage, right?\n\n569\n00:29:22.250 --> 00:29:25.440\nIf I was connected to iScuzzy,\niScuzzy could be a datastore cluster.\n\n570\n00:29:25.440 --> 00:29:28.100\nI can have more than one system\nconnected to the iScuzzy.\n\n571\n00:29:28.100 --> 00:29:31.580\nIf I had Fibre HBAs, again,\nmore than one system can be connected.\n\n572\n00:29:31.580 --> 00:29:33.350\nThat would be a datastore cluster.\n\n573\n00:29:33.350 --> 00:29:37.050\nAll right, so\nthat's all going on behind the scenes, and\n\n574\n00:29:37.050 --> 00:29:40.850\nonce it's set up we don't normally have\nto mess with it, because for now on,\n\n575\n00:29:40.850 --> 00:29:42.800\nwhenever you create a new virtual machine,\nright?\n\n576\n00:29:42.800 --> 00:29:48.380\nSo if I go and whip up a new virtual\nmachine, and I go to create that,\n\n577\n00:29:48.380 --> 00:29:52.400\nas I create it and deploy it it's\ngonna ask me where I'm gonna store it.\n\n578\n00:29:52.400 --> 00:29:56.410\nAnd eventually I'll get to a screen, let\nme I'm just gonna throw some junk in here.\n\n579\n00:29:56.410 --> 00:30:01.240\nAnd so eventually I'll get to the screen\nwhere it asks me to pick my storage.\n\n580\n00:30:01.240 --> 00:30:03.150\nAnd so when I get to that screen,\nhere we go.\n\n581\n00:30:03.150 --> 00:30:07.570\nSelect storage and it's going to show\nme all the options available to me.\n\n582\n00:30:07.570 --> 00:30:11.770\nAnd I'll see my fiber storage,\nmy direct attached storage,\n\n583\n00:30:11.770 --> 00:30:13.405\nmy storage all listed here.\n\n584\n00:30:13.405 --> 00:30:16.550\nAnd I can pick where I want\nthat virtual machine to reside.\n\n585\n00:30:16.550 --> 00:30:21.390\nSo I might have one fiber channel saying\nthat it's decked out with all SSDs,\n\n586\n00:30:21.390 --> 00:30:26.930\nsuper fast, and I might have another fiber\nchannel saying that it's all SATA drives\n\n587\n00:30:26.930 --> 00:30:31.640\nthat are slower, and if it's a mission\ncritical server it goes on the SSDs, and\n\n588\n00:30:31.640 --> 00:30:35.010\nif it's a regular server it\ngoes on the magnetic drives.\n\n589\n00:30:35.010 --> 00:30:37.250\nAnd that way I get tiered data storage.\n\n590\n00:30:37.250 --> 00:30:39.980\nIt's up to you in how you define\nthose data stores to make that work.\n\n591\n00:30:41.610 --> 00:30:45.620\nAll right.\nSo, that's pretty much a good overview.\n\n592\n00:30:45.620 --> 00:30:49.500\nI guess one other thing I want to\nmention because this gets confusing.\n\n593\n00:30:49.500 --> 00:30:51.880\nVMFS, it's evolved over the years.\n\n594\n00:30:51.880 --> 00:30:55.159\nEach version of ESXI normally\nbrings improvements to VMFS.\n\n595\n00:30:56.160 --> 00:30:58.600\nESXI 6 is kind of an exception.\n\n596\n00:30:58.600 --> 00:31:05.090\nSo, what you used to have, you had VMFS\nversion 3, and then they skipped 4.\n\n597\n00:31:05.090 --> 00:31:07.200\nESXI 4 used VMFS 3.\n\n598\n00:31:07.200 --> 00:31:12.840\nAnd then is ESXI 5,\nthey came out with VMFS 5.\n\n599\n00:31:12.840 --> 00:31:17.480\nWell, in ESXI 6,\nI will say it right sooner or later.\n\n600\n00:31:17.480 --> 00:31:20.230\nWe have VMFS version 5 still, all right.\n\n601\n00:31:20.230 --> 00:31:26.470\nSo VMFS didn't change between ESXi 5 and\nESXi 6.\n\n602\n00:31:26.470 --> 00:31:29.010\nAll right, so\nit stayed the same between those two.\n\n603\n00:31:29.010 --> 00:31:36.180\nSo even though my environment is entirely\nESXi 6, I'm still running VMFS 5.\n\n604\n00:31:36.180 --> 00:31:39.500\nIf I ever upgrade in\nthe future to ESXi seven and\n\n605\n00:31:39.500 --> 00:31:41.020\nmaybe they come out with VMFS seven.\n\n606\n00:31:41.020 --> 00:31:43.800\nThis hasn't happened but theoretically.\n\n607\n00:31:43.800 --> 00:31:46.350\nThen we can always upgrade\nour data storer and\n\n608\n00:31:46.350 --> 00:31:48.120\nthen it will be in that new file system.\n\n609\n00:31:48.120 --> 00:31:50.070\nBut it's usually easier to just\ncreate a new data storer and\n\n610\n00:31:50.070 --> 00:31:51.870\nmove your data over to it\nthan it is to upgrade.\n\n611\n00:31:51.870 --> 00:31:53.590\nThe upgrade's kind of a weird process.\n\n612\n00:31:53.590 --> 00:31:55.450\nBut that's what I'm seeing\nhere on this screen.\n\n613\n00:31:55.450 --> 00:31:57.690\nIf you noticed when I\nlooked at my data storers.\n\n614\n00:31:57.690 --> 00:32:00.650\nOver here they're showing as VMFS 5.\n\n615\n00:32:00.650 --> 00:32:03.680\nThat's what reminded\nme to talk about that.\n\n616\n00:32:03.680 --> 00:32:04.350\nAll right.\n\n617\n00:32:04.350 --> 00:32:06.710\nSo that's basically it for\ndata stores in the back end.\n\n618\n00:32:06.710 --> 00:32:09.510\nJust understand that your data stores\ncan be on any number of different\n\n619\n00:32:09.510 --> 00:32:10.250\ntypes of storage.\n\n620\n00:32:10.250 --> 00:32:10.970\nSSD.\n\n621\n00:32:10.970 --> 00:32:11.950\nMagnetic.\n\n622\n00:32:11.950 --> 00:32:13.710\nIt can be fiber channel.\n\n623\n00:32:13.710 --> 00:32:14.680\nDirect attached.\n\n624\n00:32:14.680 --> 00:32:15.550\niSCSI.\n\n625\n00:32:15.550 --> 00:32:17.940\nAll sorts of options there.\n\n626\n00:32:17.940 --> 00:32:19.360\nEach one has their own pros and cons.\n\n627\n00:32:19.360 --> 00:32:20.460\nYou've gotta pick the right one for\n\n628\n00:32:20.460 --> 00:32:23.060\nyour solution that gives you the\nperformance characteristics that you need.\n\n629\n00:32:24.150 --> 00:32:26.450\nNow, there's a pretty good spot for\nus to wrap this one up.\n\n630\n00:32:26.450 --> 00:32:29.950\nIn this episode, we got a chance\nto talk about how vSphere, and\n\n631\n00:32:29.950 --> 00:32:32.130\nparticularly ESXi handles storage.\n\n632\n00:32:32.130 --> 00:32:34.000\nWe talked about some of the different\nconnectivity methods and\n\n633\n00:32:34.000 --> 00:32:36.670\nI showed you the screens where\nthat gets set up and how we can\n\n634\n00:32:36.670 --> 00:32:40.230\nrefresh the adaptors to be able to find\nout where the new stuff has been added.\n\n635\n00:32:40.230 --> 00:32:42.060\nWe didn't actually use it,\nbut that's fine.\n\n636\n00:32:42.060 --> 00:32:44.540\nWe're gonna use it more in the next\nepisode as we get this configured.\n\n637\n00:32:44.540 --> 00:32:48.020\nEspecially when we get into clustering,\ncuz we need to set up clustered storage\n\n638\n00:32:48.020 --> 00:32:49.800\nthat's available to all\nof our different systems.\n\n639\n00:32:49.800 --> 00:32:52.430\nSo we'll get a chance to see\nmore of that down the road.\n\n640\n00:32:52.430 --> 00:32:55.490\nBut for now, this is a pretty good\nspot for us to wrap this one up.\n\n641\n00:32:55.490 --> 00:33:01.763\nSo signing off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n642\n00:33:01.763 --> 00:33:08.525\n[MUSIC]\n\n",
          "vimeoId": "168932275"
        },
        {
          "description": "In this episode, Wes and Don demonstrate how to configure and implement datastores in vSphere. They explain direct-attached storage, iSCSI, FCoE and fibre channel.",
          "length": "1961",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-2-1-working_with_datastores-060116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-2-1-working_with_datastores-060116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-2-1-working_with_datastores-060116-1-sm.jpg",
          "title": "Working with Datastores",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.588 --> 00:00:14.382\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.382 --> 00:00:18.437\nI'm your host Wes Bryan and in today's\nepisode, we're continuing our series,\n\n4\n00:00:18.437 --> 00:00:19.387\nInside of VMware.\n\n5\n00:00:19.387 --> 00:00:20.070\nThat's right,\n\n6\n00:00:20.070 --> 00:00:23.401\nwe're coming back with more of the VMware\nCertified Professional Version Six.\n\n7\n00:00:23.401 --> 00:00:25.881\nJoining me back in the studios,\nis none other than Mr. Don Pezet.\n\n8\n00:00:25.881 --> 00:00:26.816\nDon, how are you doing sir?\n\n9\n00:00:26.816 --> 00:00:27.830\n>> I'm doing great, Wes.\n\n10\n00:00:27.830 --> 00:00:29.954\nReady to dive right\nback into vSphere 6 and\n\n11\n00:00:29.954 --> 00:00:32.836\nin this episode,\nwe're going to be tackling data stores.\n\n12\n00:00:32.836 --> 00:00:36.142\nYou might have noticed something\nkind of interesting at this point,\n\n13\n00:00:36.142 --> 00:00:39.562\nis we're a solid ten episodes into\nthis series or something like that.\n\n14\n00:00:39.562 --> 00:00:42.643\nAnd we haven't created\na single virtual machine yet.\n\n15\n00:00:42.643 --> 00:00:43.974\nThis whole thing a virtualization product.\n\n16\n00:00:43.974 --> 00:00:45.569\n>> We just haven't\ncreated virtual machines.\n\n17\n00:00:45.569 --> 00:00:47.309\nAnd there's a reason for that.\n\n18\n00:00:47.309 --> 00:00:50.691\nThere's a reason for all of this stuff,\nis that it is really important we get our\n\n19\n00:00:50.691 --> 00:00:53.994\ninfrastructure set up correctly first\nbefore we start slapping VMs into it.\n\n20\n00:00:53.994 --> 00:00:55.358\nOtherwise, they're not\ngoing to perform well.\n\n21\n00:00:55.358 --> 00:01:00.531\nAnd one of the main areas that we\nhaven't addressed yet is the data store.\n\n22\n00:01:00.531 --> 00:01:03.838\nThe data store is simply a place on\nthe hard drives that we put our virtual\n\n23\n00:01:03.838 --> 00:01:04.896\nmachine hard drives.\n\n24\n00:01:04.896 --> 00:01:07.044\nOur virtual machines\nhave virtual disks and\n\n25\n00:01:07.044 --> 00:01:09.144\nthose virtual disks have to go somewhere.\n\n26\n00:01:09.144 --> 00:01:13.578\nNow if you have a default install like\nI've got, what I've been working with this\n\n27\n00:01:13.578 --> 00:01:17.822\nwhole series, the only place you put your\nvirtual machines disk are on the same\n\n28\n00:01:17.822 --> 00:01:21.061\ndrives as the ESXI operating system and\nthat's not ideal.\n\n29\n00:01:21.061 --> 00:01:22.196\nWe don't wanna do that.\n\n30\n00:01:22.196 --> 00:01:24.127\nSo were normally gonna come along and\n\n31\n00:01:24.127 --> 00:01:27.130\ncreate our own data storage\nwhere we can place the disks.\n\n32\n00:01:27.130 --> 00:01:31.899\nAnd once that's done, now we'll have\nthe network in place, the disk in place,\n\n33\n00:01:31.899 --> 00:01:34.634\nthe hosts in place, and\nvCenter's in place,\n\n34\n00:01:34.634 --> 00:01:38.862\nand it's ready to create our guests and\nactually get to virtualizing.\n\n35\n00:01:38.862 --> 00:01:41.592\nBut before we get to that,\nlet's take a look at the data stores and\n\n36\n00:01:41.592 --> 00:01:42.395\nsee what we can do.\n\n37\n00:01:42.395 --> 00:01:47.001\nIn our last episode, we talked about some\nof the different storage types inside of\n\n38\n00:01:47.001 --> 00:01:48.620\nESX and vCenter in general.\n\n39\n00:01:48.620 --> 00:01:51.170\nAnd so in this episode we're\ngonna actually use them.\n\n40\n00:01:51.170 --> 00:01:55.229\nSo instead of just talking about how they\nwork, we’ll actually put them in play and\n\n41\n00:01:55.229 --> 00:01:56.745\nstart to get our system set up.\n\n42\n00:01:56.745 --> 00:01:59.585\nNow, I want to stat off with\nthe most common type of storage,\n\n43\n00:01:59.585 --> 00:02:02.945\nwhich is also the least flexible,\nand that's direct attach storage.\n\n44\n00:02:02.945 --> 00:02:06.033\nIf you have an ESXI box,\nthe easiest way to get it up and\n\n45\n00:02:06.033 --> 00:02:09.479\nrunning with storage is to stick\na hard drive in it, right?\n\n46\n00:02:09.479 --> 00:02:12.534\nYou probably already have a hard drive\nin it for the operating system, so\n\n47\n00:02:12.534 --> 00:02:15.540\nyou can stick more hard drives in it\nto have additional storage space for\n\n48\n00:02:15.540 --> 00:02:16.611\nyour virtual machines.\n\n49\n00:02:16.611 --> 00:02:21.447\nNow we can do that and it'll work just\nfine, but it kills certain things,\n\n50\n00:02:21.447 --> 00:02:22.932\nthings like VMotion.\n\n51\n00:02:22.932 --> 00:02:26.494\nIf I have a virtual machine that I wanna\nbe able to fail over from one physical\n\n52\n00:02:26.494 --> 00:02:30.455\nhost to another physical host, the storage\nneeds to be able to move along with it and\n\n53\n00:02:30.455 --> 00:02:33.144\nhaving a SAN, a storage area network,\nprovides that.\n\n54\n00:02:33.144 --> 00:02:35.206\nNow we can have it, where we fail over and\n\n55\n00:02:35.206 --> 00:02:37.714\nthe storage follows the VM\nover to new hardware.\n\n56\n00:02:37.714 --> 00:02:39.311\nBut with direct attached\nstorage you don't have that.\n\n57\n00:02:39.311 --> 00:02:44.076\nSo direct attached storage is easy,\nit's cheap, but it's not flexible and\n\n58\n00:02:44.076 --> 00:02:45.479\nit's not resilient.\n\n59\n00:02:45.479 --> 00:02:48.531\nSo in the event of a failure\nyour systems will go offline and\n\n60\n00:02:48.531 --> 00:02:51.474\nyou might have a raid five or\na raid ten or raid whatever.\n\n61\n00:02:51.474 --> 00:02:55.010\nSo you're not going to lose your data but\nyou're still offline during that failure\n\n62\n00:02:55.010 --> 00:02:56.996\nso you've got to recover and\nbring it back on.\n\n63\n00:02:56.996 --> 00:02:59.255\nBut it is the simplest so\nlet's start right there.\n\n64\n00:02:59.255 --> 00:03:03.921\nNow when you install ESX,\nit actually creates one datastore for you.\n\n65\n00:03:03.921 --> 00:03:06.921\nIf you poke around in your storage,\nyou'll see them pop up.\n\n66\n00:03:06.921 --> 00:03:09.796\nNow in my environment,\nif I go under my Hosts and Clusters,\n\n67\n00:03:09.796 --> 00:03:12.624\nyou'll see I've got two hosts,\nhost01 and host02.\n\n68\n00:03:12.624 --> 00:03:14.765\nI've got host02 in\nmaintenance mode right now.\n\n69\n00:03:14.765 --> 00:03:16.397\nBut here's my two hosts.\n\n70\n00:03:16.397 --> 00:03:22.150\nAnd all I did was install ESXi on them and\nadd them into the center.\n\n71\n00:03:22.150 --> 00:03:22.718\nThat's it, right.\n\n72\n00:03:22.718 --> 00:03:26.670\nI have a really customize them at\nall aside from that, that activity.\n\n73\n00:03:26.670 --> 00:03:31.139\nNow if I take esx-host01 and\nI go over here to related objects,\n\n74\n00:03:31.139 --> 00:03:35.464\nI can see the other things that\nare attached to esx-host01.\n\n75\n00:03:35.464 --> 00:03:38.834\nSo you'll see things like virtual\nmachines and virtual labs and so on.\n\n76\n00:03:38.834 --> 00:03:41.902\nAnd if I keep scrolling over,\nI can find data stores.\n\n77\n00:03:41.902 --> 00:03:45.934\nNow, I didn't create a data store for\nesx-host01.\n\n78\n00:03:45.934 --> 00:03:49.471\nIt created one for me, and so\nI see it right there, datastore1.\n\n79\n00:03:49.471 --> 00:03:51.880\nAnd datastore1 is direct attach storage.\n\n80\n00:03:51.880 --> 00:03:56.537\nIt's on the hard drive with the ESXI\noperating system, all right?\n\n81\n00:03:56.537 --> 00:03:58.360\nSo that's shared with the OS.\n\n82\n00:03:58.360 --> 00:03:59.852\nNow, I say it's direct attached.\n\n83\n00:03:59.852 --> 00:04:02.735\nThere is one scenario where it\nmight not be direct attached.\n\n84\n00:04:02.735 --> 00:04:07.014\nIf I have a Fiber Channel SAN and\nI have a Fiber Channel HBA in that host,\n\n85\n00:04:07.014 --> 00:04:11.224\nthen it can't tell the difference\nbetween an internal hard drive and\n\n86\n00:04:11.224 --> 00:04:13.275\none that's over fiber channel.\n\n87\n00:04:13.275 --> 00:04:15.485\nA fiber channel one looks\nlike an internal drive.\n\n88\n00:04:15.485 --> 00:04:18.659\nSo potentially this could be\non a Fiber Channel Array.\n\n89\n00:04:18.659 --> 00:04:20.396\nBut I know that server\nI'm the one who made it.\n\n90\n00:04:20.396 --> 00:04:23.081\nIt's got a very small hard drive for\nthe operating system and\n\n91\n00:04:23.081 --> 00:04:24.630\nthat's where this datastore is.\n\n92\n00:04:24.630 --> 00:04:26.637\nSo the datastore is not particularly big.\n\n93\n00:04:26.637 --> 00:04:29.192\nNow one problem you gotta watch out for\nis the name.\n\n94\n00:04:29.192 --> 00:04:33.767\nSee it's called datastore1 and if I\nlook at esx-host02 which is offline for\n\n95\n00:04:33.767 --> 00:04:36.960\nme right now, it's called datastore1 also.\n\n96\n00:04:36.960 --> 00:04:42.293\nWell, it is parentheses 1 which meant\nthere is already one datastore called,\n\n97\n00:04:42.293 --> 00:04:44.849\nso they called this one (1) right?\n\n98\n00:04:44.849 --> 00:04:47.977\nEvery ESX host that I bring up is\ngonna have this datastore1 and\n\n99\n00:04:47.977 --> 00:04:49.878\nI'm gonna end up with a bunch of them.\n\n100\n00:04:49.878 --> 00:04:54.261\nAnd it gets annoying,\nespecially if you got to home and\n\n101\n00:04:54.261 --> 00:04:58.846\nstorage and you start to see\na list of all your datastore.\n\n102\n00:04:58.846 --> 00:05:04.569\nAnd so when you look at your datastores\nhere, they start showing up as datastore1,\n\n103\n00:05:04.569 --> 00:05:08.534\ndatastore1, datastore1 over and\nover and over again.\n\n104\n00:05:08.534 --> 00:05:10.294\nHow do you know which one is which?\n\n105\n00:05:10.294 --> 00:05:14.355\nWhich one of these belongs to esx-host01,\nwhich one belongs to host02 and\n\n106\n00:05:14.355 --> 00:05:15.817\nit gets confusing, right.\n\n107\n00:05:15.817 --> 00:05:18.763\nSo I like to rename this to be\nable to keep it all straight.\n\n108\n00:05:18.763 --> 00:05:22.824\nBut if you ever curious if you just\ndon't know which server it belongs to,\n\n109\n00:05:22.824 --> 00:05:26.313\nthat's where that related objects\ntab comes in really handy.\n\n110\n00:05:26.313 --> 00:05:30.067\nIs that I can choose datastore1 or\ndatastore1(1) and\n\n111\n00:05:30.067 --> 00:05:31.980\nwhen I go to related objects,\n\n112\n00:05:31.980 --> 00:05:37.280\nthat's where I can find virtual machines\nas well as hosts that are attached to it.\n\n113\n00:05:37.280 --> 00:05:39.186\nAnd now I can figure out\nwho that is attached to.\n\n114\n00:05:39.186 --> 00:05:43.540\nBut I'm just gonna rename, like I'll take\ndatastore1 and I'm gonna rename that.\n\n115\n00:05:43.540 --> 00:05:46.883\nSo if you right click on it,\nyou can go down to rename and\n\n116\n00:05:46.883 --> 00:05:49.379\nI can rename it something else, right?\n\n117\n00:05:49.379 --> 00:05:54.616\nSo I'm gonna call this one\nesx-host01-datastore1.\n\n118\n00:05:54.616 --> 00:05:58.643\nAnd that way, now when I look at it,\nI don't have to pull up related objects.\n\n119\n00:05:58.643 --> 00:06:01.014\nI'll know exactly where\nthat data store belongs.\n\n120\n00:06:01.014 --> 00:06:04.424\nIt's right there, and it's on that\nsystem and I can tell it apart.\n\n121\n00:06:04.424 --> 00:06:05.659\nAnd I'd probably do the same\nthing with this one.\n\n122\n00:06:05.659 --> 00:06:08.502\nI don't know if it'll let me rename\nwhile it's offline, it might.\n\n123\n00:06:08.502 --> 00:06:12.243\nBut if I can rename it while it's offline,\nthen I will.\n\n124\n00:06:12.243 --> 00:06:13.708\nThere we go.\n\n125\n00:06:13.708 --> 00:06:17.738\nNow, I'm making a change while its\noffline and what's gonna happen is,\n\n126\n00:06:17.738 --> 00:06:20.338\nit's just going to kind\nof cue up this change and\n\n127\n00:06:20.338 --> 00:06:23.674\nthe next time that server is back online,\nit will update it.\n\n128\n00:06:23.674 --> 00:06:27.208\nBut right now it's putting it into the\nvCenter database and so the next time that\n\n129\n00:06:27.208 --> 00:06:30.661\nhost is online, it checks the database and\nsees the change and it takes it in.\n\n130\n00:06:30.661 --> 00:06:33.637\nSo, it let me make that\nchange while I was offline.\n\n131\n00:06:33.637 --> 00:06:35.697\nSo now I've got those named,\nI can tell them apart.\n\n132\n00:06:35.697 --> 00:06:40.652\nNaming your datastores is really\nimportant, and users never see this name.\n\n133\n00:06:40.652 --> 00:06:43.250\nIn fact, most people never see it,\neven the administrators.\n\n134\n00:06:43.250 --> 00:06:46.280\nWe see it when we create a new virtual\nmachine and we have to pick a datastore.\n\n135\n00:06:46.280 --> 00:06:50.370\nSo giving it a name that's meaningful\nwill really save you a lot of time.\n\n136\n00:06:50.370 --> 00:06:53.211\nAll right, now in that host,\nin either of my hosts,\n\n137\n00:06:53.211 --> 00:06:55.485\nI actually have more than one hard drive.\n\n138\n00:06:55.485 --> 00:06:59.113\nSo if I take a look at esx-host01,\n\n139\n00:06:59.113 --> 00:07:03.333\nand I'm gonna go into Manage and storage.\n\n140\n00:07:03.333 --> 00:07:07.667\nSo I'm just browsing into hosting\nclusters, browsing into esxhost01,\n\n141\n00:07:07.667 --> 00:07:10.787\ngoing to the manage tab,\ngoing to the storage button.\n\n142\n00:07:10.787 --> 00:07:14.270\nAnd then down here I can see my\nstorage adapters and storage devices.\n\n143\n00:07:14.270 --> 00:07:17.428\nAnd under storage devices I'll see\nall of the storage that I've got.\n\n144\n00:07:17.428 --> 00:07:20.731\nAnd right now,\nI've got a 40 GB hard drive and\n\n145\n00:07:20.731 --> 00:07:23.876\na 500 GB hard drive inside of that system.\n\n146\n00:07:23.876 --> 00:07:25.722\nNow, I show them as hard drives.\n\n147\n00:07:25.722 --> 00:07:28.843\nThey could be a RAID array.\n\n148\n00:07:28.843 --> 00:07:31.780\nThis could actually be five\nhard drives in a RAID 5 array.\n\n149\n00:07:31.780 --> 00:07:33.796\nI wouldn't know, because the VMware\nis going to see it as a drive.\n\n150\n00:07:33.796 --> 00:07:36.687\nI'd have to go to my RAID controller\nto see how that's actually configured.\n\n151\n00:07:36.687 --> 00:07:40.054\nBut, as far as ESX is concerned,\nthis is just a 500 gig hard drive.\n\n152\n00:07:40.054 --> 00:07:41.621\nSame thing with the 40 gig, here.\n\n153\n00:07:41.621 --> 00:07:44.640\nIt doesn't know exactly\nthe information about that.\n\n154\n00:07:44.640 --> 00:07:47.225\nNow, for the most part,\nit will detect these drives and\n\n155\n00:07:47.225 --> 00:07:48.665\nwe can start to work with them.\n\n156\n00:07:48.665 --> 00:07:52.267\nMy data center that I made, or my\ndatastore, datastore1, that was automatic\n\n157\n00:07:52.267 --> 00:07:55.707\nwas created right here on this 40 gig\ndrive because when I did the install,\n\n158\n00:07:55.707 --> 00:07:59.400\nthe install asked me where I wanted it\ninstalled and I picked this 40 gig drive.\n\n159\n00:07:59.400 --> 00:08:01.484\nAnd so it created data store one there.\n\n160\n00:08:01.484 --> 00:08:05.260\nIf I had checked both of these\ndrives during the install,\n\n161\n00:08:05.260 --> 00:08:09.870\nthen it would have made data\nstore one span the two drives.\n\n162\n00:08:09.870 --> 00:08:11.430\nBut I'm not a big fan of that.\n\n163\n00:08:11.430 --> 00:08:15.795\nAnd the reason is, if you lose either\ndrive, the whole data store is gone.\n\n164\n00:08:15.795 --> 00:08:18.055\nYou have to have both intact.\n\n165\n00:08:18.055 --> 00:08:20.775\nSo I don't like to span data\nstores across physical drives.\n\n166\n00:08:20.775 --> 00:08:22.255\nI usually use a rate controller for that.\n\n167\n00:08:22.255 --> 00:08:23.635\nThat's the better way to handle it.\n\n168\n00:08:23.635 --> 00:08:25.535\nOr use your SAN, it'll handle it.\n\n169\n00:08:25.535 --> 00:08:27.705\nBut what I did is when I did the install,\n\n170\n00:08:27.705 --> 00:08:30.495\nI just chose the 40 gig drive and\nI left this other one empty.\n\n171\n00:08:30.495 --> 00:08:31.295\nSo this one is empty.\n\n172\n00:08:31.295 --> 00:08:33.735\nIt says there that it's not being used and\nI can now go and\n\n173\n00:08:33.735 --> 00:08:34.800\ncreate a data store on it.\n\n174\n00:08:34.800 --> 00:08:38.620\nNow let me double back\non spanning hard drives.\n\n175\n00:08:38.620 --> 00:08:43.120\nWhen you create a data store it can\nspan more than one disc, and if it does,\n\n176\n00:08:43.120 --> 00:08:44.510\nsome interesting things can happen.\n\n177\n00:08:45.550 --> 00:08:47.800\nNormally, we don't want to do it,\nwe use a raid controller, but\n\n178\n00:08:47.800 --> 00:08:50.590\nthere's one scenario where we might\nwant to go ahead and do it, and\n\n179\n00:08:50.590 --> 00:08:55.030\nthat's where I want to mix SSD and\nregular magnetic discs.\n\n180\n00:08:55.030 --> 00:08:55.720\nRight, so magnetic discs,\n\n181\n00:08:55.720 --> 00:08:57.780\nthose are the ones that have\nthe spinning platters inside of them,\n\n182\n00:08:57.780 --> 00:09:00.670\nthey've got a motor and an arm and\nthey can only go so fast.\n\n183\n00:09:00.670 --> 00:09:02.530\nBut, SSDs are solid state.\n\n184\n00:09:02.530 --> 00:09:04.360\nThey go really fast, right?\n\n185\n00:09:04.360 --> 00:09:07.840\nAnd so it's much faster storage,\nbut it's much more expensive.\n\n186\n00:09:07.840 --> 00:09:11.820\nSo we can't normally buy as much solid\nstate storage as we do magnetic.\n\n187\n00:09:11.820 --> 00:09:15.080\nSo we might want to mix and\nhave what's called tiered storage, right?.\n\n188\n00:09:15.080 --> 00:09:17.270\nTiered storage is where\nyou have super fast,\n\n189\n00:09:17.270 --> 00:09:20.680\nsuper expensive storage,\nthen you have slower, cheaper storage.\n\n190\n00:09:20.680 --> 00:09:24.200\nAnd you normally have a little bit of the\nfast stuff and a lot of the slow stuff.\n\n191\n00:09:24.200 --> 00:09:27.940\nAnd so there maybe critical things that\nyou want to go on the fast storage, and\n\n192\n00:09:27.940 --> 00:09:30.600\nthings that are very infrequently\nused to go in the slow storage.\n\n193\n00:09:30.600 --> 00:09:34.410\nWell, if I make a data store\nthat's spans both SSDs and\n\n194\n00:09:34.410 --> 00:09:38.500\nhard drives, then ESX will\nactually prioritize that for me.\n\n195\n00:09:38.500 --> 00:09:40.810\nIt'll take the frequently accessed\nstuff data and move it to the SSD.\n\n196\n00:09:40.810 --> 00:09:44.540\nIt will take the less frequently accessed\nstuff and move it to the magnetic media,\n\n197\n00:09:44.540 --> 00:09:49.500\nso it can do that,\nif it knows what disks are what.\n\n198\n00:09:49.500 --> 00:09:54.320\nAnd when I look at this, notice how I've\ngot these two disks here, one is 40 gigs,\n\n199\n00:09:54.320 --> 00:09:59.290\none is 512, and see how the drive\ntype shows as flash on both of them?\n\n200\n00:09:59.290 --> 00:10:01.620\nIt thinks they're both solid state disks.\n\n201\n00:10:01.620 --> 00:10:04.880\nNow, I don't know why it thinks\nthey're solid state disks, I know, and\n\n202\n00:10:04.880 --> 00:10:07.640\nthey're spinning disks, right, so\nthey're not actually solid state.\n\n203\n00:10:07.640 --> 00:10:11.410\nSo I may need to change that,\nand you can highlight a disc and\n\n204\n00:10:11.410 --> 00:10:13.980\nsee this little button\nup here that says HDD?\n\n205\n00:10:13.980 --> 00:10:18.600\nIf my disc was mis-identified,\nI can click that HDD button and\n\n206\n00:10:18.600 --> 00:10:22.960\nit will convert it,\nfrom flash to magnetic.\n\n207\n00:10:22.960 --> 00:10:23.780\nAnd I say converted,\n\n208\n00:10:23.780 --> 00:10:26.942\nit just makes a little note in\nthe data base and that's it, right?\n\n209\n00:10:26.942 --> 00:10:29.510\nSo, it's not spectacular,\nit's not having to move files or anything,\n\n210\n00:10:29.510 --> 00:10:31.530\nit just changes the little note and\nit's done.\n\n211\n00:10:31.530 --> 00:10:34.205\nAnd eventually, it'll show up.\n\n212\n00:10:34.205 --> 00:10:36.280\n[LAUGH] Again, if we get impatient,\nwe can always reach.\n\n213\n00:10:36.280 --> 00:10:37.240\nThere it is, sorry.\n\n214\n00:10:37.240 --> 00:10:38.370\nI'm being impatient.\n\n215\n00:10:38.370 --> 00:10:40.420\nSo now it just shows as a regular HDD,\nright?\n\n216\n00:10:40.420 --> 00:10:45.730\nAnd so if I have disks that are flash, and\nI have disks that are regular magnetic\n\n217\n00:10:45.730 --> 00:10:48.960\ndisks, I just need to come in here and\nmake sure they’re flagged properly.\n\n218\n00:10:48.960 --> 00:10:50.830\nRight, and so\nnow that one is flagged as HDD.\n\n219\n00:10:50.830 --> 00:10:53.950\nIt didn't matter here because I'm not\ngoing to span the disks anyway but if I\n\n220\n00:10:53.950 --> 00:10:56.630\nwas spanning, it’d be really important for\nme to go in and flag these right.\n\n221\n00:10:56.630 --> 00:10:59.495\nAnd if it was an HDD,\nif it was a regular magnetic disk.\n\n222\n00:10:59.495 --> 00:11:02.523\nAnd I wanted it to be a solid state,\nnow I can highlight it.\n\n223\n00:11:02.523 --> 00:11:06.355\nAnd you'll see the HDV button\nchange to an F button for flash.\n\n224\n00:11:06.355 --> 00:11:10.345\nAnd now I can flag it as SSD and\nthat way VMware will know the difference.\n\n225\n00:11:10.345 --> 00:11:13.705\nIt'll be able to make the decision\nas to how it prioritizes that data.\n\n226\n00:11:15.125 --> 00:11:17.845\nAll right, but let's say I wanna\nactually use this 500 gig disk now.\n\n227\n00:11:17.845 --> 00:11:19.135\nI wanna put a data store there so\n\n228\n00:11:19.135 --> 00:11:21.270\nI can start creating virtual machines and\nother things.\n\n229\n00:11:21.270 --> 00:11:23.760\nWell, I need to go to my host.\n\n230\n00:11:23.760 --> 00:11:26.840\nAnd I'm just gonna right click on\nthe host and in the menu that pops up,\n\n231\n00:11:26.840 --> 00:11:28.930\nI'm gonna look for the storage menu.\n\n232\n00:11:28.930 --> 00:11:31.400\nAnd under storage,\nwe're gonna go to new data store.\n\n233\n00:11:31.400 --> 00:11:34.780\nYou'll see there's a few other\noptions here like rescan storage.\n\n234\n00:11:34.780 --> 00:11:38.420\nIf I had hard drive go offline and I\nrepaired it, I'd need to rescan storage so\n\n235\n00:11:38.420 --> 00:11:42.000\nit could spot the new discs, or if I\nhave hot swap days, a lot of servers do,\n\n236\n00:11:42.000 --> 00:11:43.180\nand I add disks.\n\n237\n00:11:43.180 --> 00:11:45.350\nI could rescan storage and\nit'll find those new disks.\n\n238\n00:11:45.350 --> 00:11:47.250\nRight?\nSo that's what that's option is for.\n\n239\n00:11:47.250 --> 00:11:50.418\nAnd then,\nAdd Virtual Flash Resource Capacity.\n\n240\n00:11:50.418 --> 00:11:52.679\nWhat's that?\n\n241\n00:11:52.679 --> 00:11:57.070\nWell, with our systems,\nyou can throw in an SSD drive and\n\n242\n00:11:57.070 --> 00:12:00.040\nhave it be used as a cache for\nthe system, to accelerate, again,\n\n243\n00:12:00.040 --> 00:12:02.230\nfrequently read stuff,\nlike tiered storage again.\n\n244\n00:12:02.230 --> 00:12:05.170\nExcept this isn't necessarily dedicated\nto one particular data store,\n\n245\n00:12:05.170 --> 00:12:07.220\nit can be shared for that host itself.\n\n246\n00:12:07.220 --> 00:12:10.270\nAnd so I can add some flash\nstorage to serve that role.\n\n247\n00:12:10.270 --> 00:12:13.070\nAnd you're starting to see some\nservers that come with a little\n\n248\n00:12:14.100 --> 00:12:18.500\nmSata port right on the server's\nmotherboard, where you can pop in a 128 or\n\n249\n00:12:18.500 --> 00:12:23.360\n256 gig card and\nhave that accelerated cache right there.\n\n250\n00:12:23.360 --> 00:12:25.000\nBut I just want a regular old data store,\n\n251\n00:12:25.000 --> 00:12:27.110\nI wanna put some\ninformation on this drive.\n\n252\n00:12:27.110 --> 00:12:28.660\nAnd so\nwhen I go to create that data store,\n\n253\n00:12:28.660 --> 00:12:31.580\nit's gonna give me three choices,\nall right?\n\n254\n00:12:31.580 --> 00:12:35.470\nI can create a virtual\nmachine file system, or VMFS.\n\n255\n00:12:35.470 --> 00:12:39.640\nWhen your adding storage to local disk,\nor to a LUN, right?\n\n256\n00:12:39.640 --> 00:12:42.700\nA Logical Unit Number, which would\nbe if it were attached to a SAN.\n\n257\n00:12:42.700 --> 00:12:44.610\nThen were going to crease a VMFS disk,\nright?\n\n258\n00:12:44.610 --> 00:12:47.810\nAnd we're going to be talking about\nthese other ones a little bit later, but\n\n259\n00:12:47.810 --> 00:12:51.110\nNFS if its a network storage and\na VVOL, or virtual volume,\n\n260\n00:12:51.110 --> 00:12:55.870\nas if were attaching to a virtual SAN,\nwe're creating a virtual disk on it.\n\n261\n00:12:55.870 --> 00:12:58.150\nBut I'm going to create VMFS,\na Virtual Machine File System,\n\n262\n00:12:58.150 --> 00:13:01.045\nthat's almost always\nwhat your going to do.\n\n263\n00:13:01.045 --> 00:13:03.270\nAnd then on the next screen,\n\n264\n00:13:03.270 --> 00:13:07.330\nnow it's going to show me any\ndiscs that are not currently used.\n\n265\n00:13:07.330 --> 00:13:11.030\nAnd right here I can see that\na 500 GB disc that is not in use.\n\n266\n00:13:11.030 --> 00:13:12.600\nI don't see my 40 GB disc.\n\n267\n00:13:12.600 --> 00:13:13.880\nWhy not?\n\n268\n00:13:13.880 --> 00:13:17.030\nIt's in use, it's already got a data store\non it so it's not going to show up here.\n\n269\n00:13:17.030 --> 00:13:19.170\nI'm just going to see my 500 GB disc.\n\n270\n00:13:19.170 --> 00:13:20.200\nNotice the name.\n\n271\n00:13:20.200 --> 00:13:21.430\nI'm guilty of this really bad.\n\n272\n00:13:21.430 --> 00:13:22.980\nI think I did it in an earlier episode.\n\n273\n00:13:22.980 --> 00:13:26.160\nI'll just hit next and\nleave it called Data Store, and\n\n274\n00:13:26.160 --> 00:13:28.060\nthen you get confused which one is which.\n\n275\n00:13:28.060 --> 00:13:31.835\nSo I like to rename it, and\nI'm gonna name this one,\n\n276\n00:13:31.835 --> 00:13:36.461\nesxhost01-dasdatastore.\n\n277\n00:13:36.461 --> 00:13:40.510\nSo this is gonna be my direct\nattach storage data store.\n\n278\n00:13:40.510 --> 00:13:42.950\nSo just giving it a name so\nI can remember what it is.\n\n279\n00:13:42.950 --> 00:13:47.010\nAnd I'm prefixing it with a server's name\nto make it easier when I'm in vCenter and\n\n280\n00:13:47.010 --> 00:13:48.020\nI see a ton of servers.\n\n281\n00:13:48.020 --> 00:13:49.890\nIf this were a stand alone server,\nI wouldn't do that.\n\n282\n00:13:49.890 --> 00:13:52.580\nI wouldn't care.\nI wouldn't care, but in vCenter, it does\n\n283\n00:13:52.580 --> 00:13:54.890\nget confusing sometimes with all the\ndifferent data storers that are out there.\n\n284\n00:13:54.890 --> 00:13:56.770\nSo I'm gonna name it appropriately.\n\n285\n00:13:56.770 --> 00:13:58.110\nAnd then I'll highlight that disk.\n\n286\n00:13:58.110 --> 00:13:59.850\nIf I have more disks, I can choose them.\n\n287\n00:13:59.850 --> 00:14:01.720\nIf I have multiple disks,\nI can do that, too.\n\n288\n00:14:03.080 --> 00:14:04.250\nAnd, then I'll hit next.\n\n289\n00:14:06.410 --> 00:14:08.150\nThen it's going to offer to partition it.\n\n290\n00:14:08.150 --> 00:14:12.190\nNow back in the day we used to\npartition discs all the time 'cause\n\n291\n00:14:12.190 --> 00:14:13.120\nit seemed like a good idea.\n\n292\n00:14:13.120 --> 00:14:16.380\nBut in this day and age partitioning\ndiscs is not really useful.\n\n293\n00:14:16.380 --> 00:14:21.400\nIf your attached to a SAN, then on\nthe SAN you're slicing up discs there and\n\n294\n00:14:21.400 --> 00:14:25.230\nyou create the slices to be the size that\nyou want and you don't need partition.\n\n295\n00:14:25.230 --> 00:14:27.250\nOn our RAID controller,\nyou can do the same thing.\n\n296\n00:14:27.250 --> 00:14:29.060\nYou can slice up your discs\nin the RAID controller and\n\n297\n00:14:29.060 --> 00:14:31.680\nyou create the virtual discs\nthat map to what you want.\n\n298\n00:14:31.680 --> 00:14:35.370\nYou don't need partitions, but it doesn't\nmean we still don't have the option.\n\n299\n00:14:35.370 --> 00:14:39.140\nSo if this were a true single disc,\nand I wanted to divide it in half,\n\n300\n00:14:39.140 --> 00:14:42.620\nMaybe half was gonna be a data store for\na certain set of virtual machines and\n\n301\n00:14:42.620 --> 00:14:44.560\nthe other half was a data store for\nanother set of virtual machines.\n\n302\n00:14:44.560 --> 00:14:45.240\nI can do that, right?\n\n303\n00:14:45.240 --> 00:14:47.830\nAnd create it in that empty space and go.\n\n304\n00:14:47.830 --> 00:14:50.800\nBut the reality is that every virtual\nmachine is going to be isolated\n\n305\n00:14:50.800 --> 00:14:51.640\nfrom each other.\n\n306\n00:14:51.640 --> 00:14:54.050\nSo, even though they have\nstorage in the same data store,\n\n307\n00:14:54.050 --> 00:14:55.800\nthey can't see each other.\n\n308\n00:14:55.800 --> 00:14:59.080\nSo, there's not really any\nreason to create partitions.\n\n309\n00:14:59.080 --> 00:15:02.880\nThere's no performance gain,\nand there's no security gain.\n\n310\n00:15:02.880 --> 00:15:04.160\nIt's just organization.\n\n311\n00:15:04.160 --> 00:15:06.460\nI guess, if you wanna organize\nthings you can do that.\n\n312\n00:15:06.460 --> 00:15:07.300\nAnd so over here,\n\n313\n00:15:07.300 --> 00:15:11.330\nif I start to adjust my size, see how\nthat partition is shrinking or growing.\n\n314\n00:15:11.330 --> 00:15:12.280\nI can change that and\n\n315\n00:15:12.280 --> 00:15:15.300\nthen I can use this empty space to\ncreate another data store if I wanted.\n\n316\n00:15:15.300 --> 00:15:17.445\nOr I could leave it empty,\nmaybe I just don't care.\n\n317\n00:15:17.445 --> 00:15:19.300\n[LAUGHS] I want to waste some storage.\n\n318\n00:15:19.300 --> 00:15:21.410\nI'm going to go ahead and\ncrank it all the way up all right?\n\n319\n00:15:21.410 --> 00:15:25.310\nAnd the default option here is to use all\navailable partitions, but you can tweak\n\n320\n00:15:25.310 --> 00:15:28.960\nthat if there were existing partitions,\nand just grab one particular partition.\n\n321\n00:15:28.960 --> 00:15:30.320\nI don't have any, so it's blank for me.\n\n322\n00:15:30.320 --> 00:15:34.460\nAll right, so I'm gonna go ahead and\nchoose that, and we'll hit next, and\n\n323\n00:15:34.460 --> 00:15:35.680\nwe'll finish that up.\n\n324\n00:15:35.680 --> 00:15:40.120\nNotice, I am running VSphere 6 and\nthis is ESXI 6.\n\n325\n00:15:40.120 --> 00:15:42.150\nBut the file system is VMFS 5.\n\n326\n00:15:42.150 --> 00:15:45.323\nOkay, it's actually, if I remember right,\nit's like 5.61 it is,\n\n327\n00:15:45.323 --> 00:15:46.663\nwhat the actual numbering is.\n\n328\n00:15:46.663 --> 00:15:52.797\nBut, its VMFS version 5, which is the same\nas what we used under ESX 5 and ESX 5.5.\n\n329\n00:15:52.797 --> 00:15:57.013\nSo, there's not really been any\ngiant increase in features or\n\n330\n00:15:57.013 --> 00:15:59.885\nimprovement there so it's still VMFS 5.\n\n331\n00:15:59.885 --> 00:16:03.650\nAll right, when I finish it's\ngonna create a new data store.\n\n332\n00:16:03.650 --> 00:16:06.240\nSo it's building that\nin the background and\n\n333\n00:16:06.240 --> 00:16:08.340\nlooks like I might have\na little bit of a problem.\n\n334\n00:16:08.340 --> 00:16:12.340\nSo it created the VMFS store and\nI see that is completed and\n\n335\n00:16:12.340 --> 00:16:17.660\nunder Rescan VMFS I got unable to\ncommunicate, well that for host O2.\n\n336\n00:16:17.660 --> 00:16:19.890\nHost O2's offline, so\nI can ignore that one.\n\n337\n00:16:19.890 --> 00:16:22.490\nIt tried to rescan the file system for\nmultiple servers,\n\n338\n00:16:22.490 --> 00:16:23.950\nnow why would it do that?\n\n339\n00:16:23.950 --> 00:16:28.100\nWell I just created a stand\nalone data store, but\n\n340\n00:16:28.100 --> 00:16:31.250\nwe can create distributed data stores,\n\n341\n00:16:31.250 --> 00:16:33.810\ndistributed storage that's spread\nacross more than one machine.\n\n342\n00:16:33.810 --> 00:16:36.180\nAnd when you do that it would\nneed to scan multiple systems.\n\n343\n00:16:36.180 --> 00:16:39.120\nSo anyhow, I tried to scan the other\nsystem, I'll just ignore that.\n\n344\n00:16:40.410 --> 00:16:43.510\nAll right, so now I've got\na nice new shiny data store, and\n\n345\n00:16:43.510 --> 00:16:46.858\nif I were to take that host and\ngo to look at its related objects and\n\n346\n00:16:46.858 --> 00:16:50.702\ngo to data stores I can see now that\nI've got the generic data store that was\n\n347\n00:16:50.702 --> 00:16:52.581\ncreated when the OS was installed.\n\n348\n00:16:52.581 --> 00:16:56.818\nAnd now I've got my direct attach\nstorage and those show up right here,\n\n349\n00:16:56.818 --> 00:16:59.660\none's 32 gigs, one's 511 gigs.\n\n350\n00:16:59.660 --> 00:17:01.190\nThat's the storage that's available.\n\n351\n00:17:01.190 --> 00:17:05.190\nFor now on when I create a virtual\nmachine I can specify this datastore, and\n\n352\n00:17:05.190 --> 00:17:07.090\nthat's where it's gonna reside.\n\n353\n00:17:07.090 --> 00:17:10.050\nNow, know that when I mapped this,\nI mapped it to an internal disk,\n\n354\n00:17:10.050 --> 00:17:13.620\nbut I could have mapped it to a LAN,\nand this could exist on a SAN.\n\n355\n00:17:13.620 --> 00:17:17.042\nAnd that means I could go to other\nservers, and it could exist there,\n\n356\n00:17:17.042 --> 00:17:17.758\ntoo, right?\n\n357\n00:17:17.758 --> 00:17:20.220\nIf they're connected to the SAN,\nthey can see that disk.\n\n358\n00:17:20.220 --> 00:17:21.900\nAnd have access to that data store.\n\n359\n00:17:21.900 --> 00:17:24.470\nThat's where clustering comes in\nwhich we'll see in another episode.\n\n360\n00:17:26.310 --> 00:17:29.030\nLet's talk a little bit more about SANs.\n\n361\n00:17:29.030 --> 00:17:32.860\nA lot of time when you have a sand\nconnected the discs just show up as local\n\n362\n00:17:32.860 --> 00:17:34.890\ndiscs, but there's one exception to that.\n\n363\n00:17:34.890 --> 00:17:36.460\nIf it's a fiber channel\nsand that's how it is.\n\n364\n00:17:36.460 --> 00:17:37.770\nThey're gonna show up that way.\n\n365\n00:17:37.770 --> 00:17:38.800\nWhen you go into your host.\n\n366\n00:17:38.800 --> 00:17:43.785\nSo if I take EXS host 01 and\nI go to Manage and Storage Adapters.\n\n367\n00:17:45.138 --> 00:17:49.060\nUnder Storage Adapters I would have\na fiber channel HBA that would show up in\n\n368\n00:17:49.060 --> 00:17:50.020\nhere as an adapter.\n\n369\n00:17:50.020 --> 00:17:54.540\nAnd when I went to Devices, I would\nsee the hard drives that the SAN was\n\n370\n00:17:54.540 --> 00:17:56.810\nadvertising to me and\nthey would just show up as local discs.\n\n371\n00:17:56.810 --> 00:17:59.430\nThat's how a fiber channel SAN works,\nthey're really straight forward.\n\n372\n00:17:59.430 --> 00:18:03.170\nIn fact the only configuration you ever\nreally have to do on the ESX side.\n\n373\n00:18:03.170 --> 00:18:04.710\nThere's a lot on the SAN side.\n\n374\n00:18:04.710 --> 00:18:08.770\nBut on the ESX side is if your\nadapter's not automatically detected.\n\n375\n00:18:08.770 --> 00:18:10.350\nYou might need to go to\nstorage adapters and\n\n376\n00:18:10.350 --> 00:18:13.910\nhit your little plus here and\nadd in a missing adapter.\n\n377\n00:18:13.910 --> 00:18:19.170\nBut when you use an adapter it should\nbe on VMware's it's compatibility list,\n\n378\n00:18:19.170 --> 00:18:20.160\nthe HCL.\n\n379\n00:18:20.160 --> 00:18:22.990\nIf it's on the hardware compatibility\nlist, it'll be detected and\n\n380\n00:18:22.990 --> 00:18:24.550\nit'll show up right here.\n\n381\n00:18:24.550 --> 00:18:25.470\nIf it doesn't,\n\n382\n00:18:25.470 --> 00:18:27.970\nyou're probably using an adapter that\nVMware is not gonna support anyway.\n\n383\n00:18:27.970 --> 00:18:29.920\nSo definitely get one that is supported.\n\n384\n00:18:31.220 --> 00:18:34.735\nBut there are certain types of adapters\nthat don't show up automatically.\n\n385\n00:18:34.735 --> 00:18:36.245\nThe software ones.\n\n386\n00:18:36.245 --> 00:18:40.335\nAnd when I hit that plus, you saw them\nright there, a Software iSCSI adapter and\n\n387\n00:18:40.335 --> 00:18:42.985\na Software FCoE adapter, all right.\n\n388\n00:18:42.985 --> 00:18:43.985\nWhat are these?\n\n389\n00:18:43.985 --> 00:18:49.500\nWell, Software FCoE,\nthat is Fiber Channel over Ethernet.\n\n390\n00:18:49.500 --> 00:18:54.070\nAnd that's where, instead of having fiber\nchannel running right to us in here,\n\n391\n00:18:54.070 --> 00:18:56.930\nwe do fiber channel to\nan Ethernet adapter.\n\n392\n00:18:56.930 --> 00:18:59.920\nWhy would I do that?\n\n393\n00:18:59.920 --> 00:19:03.451\nWell, normally, when we have fiber channel\nrun it's to a SAN right there in the same\n\n394\n00:19:03.451 --> 00:19:05.230\nbuilding as our device.\n\n395\n00:19:05.230 --> 00:19:08.420\nBut what if this is a disaster\nrecovery center, and\n\n396\n00:19:08.420 --> 00:19:12.960\nthe SAN is at our headquarters,\nand this host is at the DR center?\n\n397\n00:19:12.960 --> 00:19:15.240\nThey're in two geographical locations.\n\n398\n00:19:15.240 --> 00:19:17.935\nI may not be able to run fiber\nbetween those locations.\n\n399\n00:19:17.935 --> 00:19:20.385\nSo instead I can use fiber\nchannel of Ethernet.\n\n400\n00:19:20.385 --> 00:19:23.331\nAnd now, I can take the fiber\nchannel communication and\n\n401\n00:19:23.331 --> 00:19:27.593\nsend them over an Ethernet network over a\nVPN tunnel or a remote location or MPLS or\n\n402\n00:19:27.593 --> 00:19:31.595\nwhatever it is that I'm using\nto connect that remote location.\n\n403\n00:19:31.595 --> 00:19:34.572\nAnd have connectivity even though I'm\nnot in the same building as the SAN.\n\n404\n00:19:34.572 --> 00:19:37.152\nNow, that sounds awesome, but remember,\n\n405\n00:19:37.152 --> 00:19:41.160\nEthernet networks introduce overhead,\na lot of overhead.\n\n406\n00:19:41.160 --> 00:19:44.550\nOn a true fiber channel SAN,\nthe fiber fabric, right?\n\n407\n00:19:44.550 --> 00:19:46.850\nThat mesh that you create\nbetween your servers and\n\n408\n00:19:46.850 --> 00:19:50.510\nthe SAN it's actually just running the\nSCSI protocol right on top of that fiber.\n\n409\n00:19:50.510 --> 00:19:51.840\nIt's modified just a little bit but for\n\n410\n00:19:51.840 --> 00:19:54.388\nthe most part it is just SCSI\ncommunications right over the fiber.\n\n411\n00:19:54.388 --> 00:19:57.550\nHere we gotta take SCSI and\n\n412\n00:19:57.550 --> 00:20:02.060\nthen encapsulate it in Ethernet and\nTCP/IP and throw it on the network.\n\n413\n00:20:02.060 --> 00:20:04.100\nSo now we get all of the TCP/IP overhead.\n\n414\n00:20:04.100 --> 00:20:07.200\nAnd we get collisions, and what is it?\n\n415\n00:20:07.200 --> 00:20:12.030\nCDMA, the, no, it's CSM, what, collision.\n\n416\n00:20:12.030 --> 00:20:13.635\n>> Collision sends carrier.\n\n417\n00:20:13.635 --> 00:20:14.650\n>> [LAUGH]\n>> Collision sends.\n\n418\n00:20:14.650 --> 00:20:16.220\nNow I can't even say it myself.\n\n419\n00:20:16.220 --> 00:20:18.670\nCarrier sends multiple\naccess collision detection.\n\n420\n00:20:18.670 --> 00:20:19.305\n>> There we go.\n\n421\n00:20:19.305 --> 00:20:20.160\nCSMA/CD.\n\n422\n00:20:20.160 --> 00:20:21.590\nThat's it.\nThat's the acronym.\n\n423\n00:20:21.590 --> 00:20:26.060\nAnd so we've got all that extra stuff\nthat Ethernet does that slows that\n\n424\n00:20:26.060 --> 00:20:30.110\ncommunication down, that SCSI doesn't\nnormally have to do, so it's not fast.\n\n425\n00:20:30.110 --> 00:20:34.370\nSo if I just need a remote location able\nto see this data store to be able to clone\n\n426\n00:20:34.370 --> 00:20:36.370\nVMs or something like that,\nthen it'll do it, but\n\n427\n00:20:36.370 --> 00:20:39.110\nit's not something I wanna run on for\nproduction use.\n\n428\n00:20:39.110 --> 00:20:41.720\nIt's more of a disaster solution, right.\n\n429\n00:20:41.720 --> 00:20:44.430\nThe other one though is\na software ISCSI adapter.\n\n430\n00:20:44.430 --> 00:20:49.210\nISCSI very similar we're taking SCSI and\nthrowing it over Ethernet.\n\n431\n00:20:49.210 --> 00:20:53.840\nAnd where this is handy is if you\ndon't have a giant budget, right?\n\n432\n00:20:53.840 --> 00:20:56.150\nA fiber channel SAN is not cheap.\n\n433\n00:20:56.150 --> 00:20:59.130\nThe cheapest ones you can deploy today\nare usually in the 30 to $40,000 mark and\n\n434\n00:20:59.130 --> 00:21:02.640\nthat's just for the SAN and\nyou probably have a switch on top of that.\n\n435\n00:21:02.640 --> 00:21:07.100\nSo you'd probably end up closer to\n$50,000 for your basic fiber channel SAN.\n\n436\n00:21:07.100 --> 00:21:11.676\nWell, you can do an iSCSI SAN for\n$3000, $5000.\n\n437\n00:21:11.676 --> 00:21:13.540\nYou can do them pretty inexpensive.\n\n438\n00:21:13.540 --> 00:21:16.470\nThey're slower because they're\nusing a regular TCP/IP network.\n\n439\n00:21:16.470 --> 00:21:20.250\nBut if you do a dedicated network and\nyou do jumbo frames,\n\n440\n00:21:20.250 --> 00:21:24.010\nwhere you have a 9,000 byte MTU\ninstead of the old 1,500 byte,\n\n441\n00:21:24.010 --> 00:21:27.220\nThen you can actually get pretty\ndecent performance on it.\n\n442\n00:21:27.220 --> 00:21:31.560\nIt's great for labs and testing,\nsmall business, medium and large,\n\n443\n00:21:31.560 --> 00:21:33.220\nit's time to go fiber channel, right?\n\n444\n00:21:33.220 --> 00:21:36.020\nBut for a small business, you can get\nby with I SCSI and it works out well.\n\n445\n00:21:36.020 --> 00:21:39.210\nThe thing about iSCSI is it doesn't\nhave a dedicated hardware adapter.\n\n446\n00:21:39.210 --> 00:21:42.960\nSo we've got to add in a software one, and\nthat's what this is offering for me to do.\n\n447\n00:21:42.960 --> 00:21:46.270\nSo I'm going to add on in here,\nI'll add a software iSCSI adapter.\n\n448\n00:21:46.270 --> 00:21:48.290\nAnd when you add an ISCSI adapter,\n\n449\n00:21:48.290 --> 00:21:52.770\nwhat it's gonna do is enable you to\nlook to the network for storage.\n\n450\n00:21:52.770 --> 00:21:56.650\nAnd because it's attached to the network,\nwe can't automatically find things.\n\n451\n00:21:56.650 --> 00:21:58.780\nWe have to tell it where the things are.\n\n452\n00:21:58.780 --> 00:22:00.470\nSo I'm gonna come in here and\n\n453\n00:22:00.470 --> 00:22:03.770\nfind my fiber channel adapter,\nwhich is not showing up.\n\n454\n00:22:03.770 --> 00:22:05.390\nIf it doesn't show up,\nyou might need to refresh.\n\n455\n00:22:05.390 --> 00:22:07.960\nAnd you'll see, with storage,\nwe have to refresh all the time.\n\n456\n00:22:07.960 --> 00:22:11.090\nSo you'll see a button right here\nto refresh storage information.\n\n457\n00:22:11.090 --> 00:22:13.680\nTo refresh our control adapters and so on.\n\n458\n00:22:13.680 --> 00:22:17.240\nSo you may need to refresh to\nget that thing to show up, or\n\n459\n00:22:17.240 --> 00:22:20.590\nsometimes you just have to be patient and\nit'll turn up that way too.\n\n460\n00:22:20.590 --> 00:22:22.330\nSo I'm gonna let this thing scan.\n\n461\n00:22:23.400 --> 00:22:28.490\nI'm gonna pull up my recent tasks here and\njust see, we got that rescan of HBAs going\n\n462\n00:22:28.490 --> 00:22:33.360\non so it should be there,\nas soon as it shows up.\n\n463\n00:22:33.360 --> 00:22:35.940\nIf it still doesn't show up I may\njust need to refresh my whole screen.\n\n464\n00:22:35.940 --> 00:22:39.830\nAnd there it is, all right,\njust gotta be patient.\n\n465\n00:22:39.830 --> 00:22:42.770\nSo there's my iSCSI adapter,\nif I choose that as vmhba33,\n\n466\n00:22:42.770 --> 00:22:46.530\nright down here I can see devices\nthat are plugged into it.\n\n467\n00:22:46.530 --> 00:22:49.470\nNow if it were a fiber channel SAN,\nI'd immediately see disks, right?\n\n468\n00:22:49.470 --> 00:22:51.870\nBecause we view as\na hard drive controller.\n\n469\n00:22:51.870 --> 00:22:53.250\nBut with iSCSI I don't.\n\n470\n00:22:53.250 --> 00:22:54.840\nI've gotta talk to the iSCSI appliance.\n\n471\n00:22:54.840 --> 00:22:57.090\nIt's on the network so\nanybody could connect.\n\n472\n00:22:57.090 --> 00:22:59.390\nYou don't want just anybody\nbeing able to get at the data.\n\n473\n00:22:59.390 --> 00:23:03.100\nSo we have to have a user and a password,\nor do IP restrictions or whatever.\n\n474\n00:23:03.100 --> 00:23:05.240\nSo I need to go over here to Targets.\n\n475\n00:23:05.240 --> 00:23:07.990\nThe Target is iSCSI seeing itself, and\n\n476\n00:23:07.990 --> 00:23:12.190\nI'm gonna do Dynamic Discovery of\nthat target and I'm gonna add it in.\n\n477\n00:23:12.190 --> 00:23:17.099\nSo I need to add in 192.168.0.204,\nthat's my iSCSI SAN.\n\n478\n00:23:17.099 --> 00:23:20.395\nOkay, now, if you're just doing IP\nrestrictions, that's all you need and\n\n479\n00:23:20.395 --> 00:23:21.680\nyou can move forward.\n\n480\n00:23:21.680 --> 00:23:23.370\nIf you're doing authentication, though,\n\n481\n00:23:23.370 --> 00:23:26.590\nlike I am, then I'll need to\nprovide a username and a password.\n\n482\n00:23:26.590 --> 00:23:30.730\nSo, I'm gonna come down here and iSCSI\nSANs use CHAP, the Challenge Handshake and\n\n483\n00:23:30.730 --> 00:23:32.180\nAuthentication Protocol.\n\n484\n00:23:32.180 --> 00:23:33.920\nAnd so, I'm gonna do unidirectional CHAP.\n\n485\n00:23:33.920 --> 00:23:36.408\nThat's where I send a username and\na password.\n\n486\n00:23:36.408 --> 00:23:39.040\nYou knew bidirection where they send\nthe username and password back to you.\n\n487\n00:23:39.040 --> 00:23:40.523\nYou can authenticate both ways.\n\n488\n00:23:40.523 --> 00:23:44.298\nBut I'm just gonna send to them and\nI'll provide a login and\n\n489\n00:23:44.298 --> 00:23:47.017\nthis will configured on your iSCSI SAN, so\n\n490\n00:23:47.017 --> 00:23:51.336\nwhatever it is set over there is\nwhat your credentials are gonna be.\n\n491\n00:23:51.336 --> 00:23:53.203\nSo I'm gonna punch that in.\n\n492\n00:23:53.203 --> 00:23:54.812\nAnd I'll go ahead and say OK to that.\n\n493\n00:23:54.812 --> 00:23:59.052\nAnd it's telling me due to recent changes\nwe need to rescan the storage adapter.\n\n494\n00:23:59.052 --> 00:24:03.640\nAnd so right up here I've got the rescan\nfor storage adapter button and\n\n495\n00:24:03.640 --> 00:24:07.580\nI'll go ahead and\nhighlight my iSCSI, hit Rescan.\n\n496\n00:24:07.580 --> 00:24:08.910\nAnd now it's gonna scan it.\n\n497\n00:24:08.910 --> 00:24:09.630\nAnd when it scans it,\n\n498\n00:24:09.630 --> 00:24:14.650\nit's gonna talk to that iSCSI appliance\nand hopefully learn about some discs.\n\n499\n00:24:14.650 --> 00:24:17.490\nAnd so now when I go down here to Devices,\nwhat I'm hoping to see,\n\n500\n00:24:17.490 --> 00:24:21.570\nthere we go, is I got a 1 terabyte drive,\nright there.\n\n501\n00:24:21.570 --> 00:24:25.600\nSo there's a 1 terabyte drive attached\nto that iSCSI SAN that I now see and\n\n502\n00:24:25.600 --> 00:24:26.810\nI can use.\n\n503\n00:24:26.810 --> 00:24:30.949\nAnd because it's iSCSI, we don't know\nif it's a regular magnetic disk or\n\n504\n00:24:30.949 --> 00:24:35.483\nif it's SSD so I've got that same button\nright here where I can change it's status\n\n505\n00:24:35.483 --> 00:24:37.668\nand flip it to flash or HDD or whatever.\n\n506\n00:24:37.668 --> 00:24:42.730\nBut now that it's attached,\nmy system will see it as a local drive.\n\n507\n00:24:42.730 --> 00:24:45.640\nI had to go through a little work, but I\nsee it and I can see it as a local drive.\n\n508\n00:24:45.640 --> 00:24:51.160\nSo when I go back to my host,\nI can go to Storage and New Data Store.\n\n509\n00:24:51.160 --> 00:24:53.180\nAnd I'm going to create\nAnother Data Store.\n\n510\n00:24:53.180 --> 00:24:55.970\nI'm going to do VMFS just like last time.\n\n511\n00:24:55.970 --> 00:25:01.620\nExcept this time when I look at my discs,\nthere's that iSCSI saying right there.\n\n512\n00:25:01.620 --> 00:25:03.750\nOkay.\nI can see it, and I can choose it.\n\n513\n00:25:03.750 --> 00:25:05.010\nAnd I can come in and give it a name.\n\n514\n00:25:05.010 --> 00:25:09.270\nI'll call it esxhost01 iSCSI data store.\n\n515\n00:25:09.270 --> 00:25:10.400\nSo I can remember that's what it is.\n\n516\n00:25:10.400 --> 00:25:11.180\nRight.\nJust kind of giving it\n\n517\n00:25:11.180 --> 00:25:13.360\na name that actually means something.\n\n518\n00:25:13.360 --> 00:25:15.270\nI can move forward and finish that up.\n\n519\n00:25:15.270 --> 00:25:17.663\nAnd I have a whole terabyte on this thing,\nso\n\n520\n00:25:17.663 --> 00:25:21.380\nI could take the whole thing or\nI could partition it down.\n\n521\n00:25:21.380 --> 00:25:25.230\nAgain, not a lot of point in partitioning\nit down so I'll take the whole thing.\n\n522\n00:25:25.230 --> 00:25:27.200\nAnd we'll finish that up.\n\n523\n00:25:27.200 --> 00:25:32.120\nNow that it's done, as soon as that's\ncompleted, I can go to my related objects.\n\n524\n00:25:32.120 --> 00:25:36.760\nAnd my data stores and what I'm going to\nsee is my direct attach storage data store\n\n525\n00:25:36.760 --> 00:25:39.280\nand my iSCSI data store right here.\n\n526\n00:25:39.280 --> 00:25:42.240\nFrom that point on we\nuse them the same way.\n\n527\n00:25:42.240 --> 00:25:45.180\nIt doesn't matter that one is on\nthe network versus one is direct attached,\n\n528\n00:25:45.180 --> 00:25:47.060\nwe actually treat them the same way.\n\n529\n00:25:47.060 --> 00:25:49.296\nThe big advantage of the iSCSI,\n\n530\n00:25:49.296 --> 00:25:52.800\nis that I can have other\nservers connect to it, right?\n\n531\n00:25:52.800 --> 00:25:57.430\nTheres two big advantages for having\na SAN, be it esxhos or Fiber Channel.\n\n532\n00:25:57.430 --> 00:25:59.040\nthe two big advantages,\n\n533\n00:25:59.040 --> 00:26:02.555\none you have more than one host\nconnection which enables clustering.\n\n534\n00:26:02.555 --> 00:26:05.855\nNow, I can take a virtual machine and fail\nit over from one host to another because\n\n535\n00:26:05.855 --> 00:26:08.015\nboth hosts have access to the hard drives.\n\n536\n00:26:08.015 --> 00:26:09.115\nAll you have to do is synchronize the RAM.\n\n537\n00:26:10.145 --> 00:26:13.250\nIf I shut the virtual machine down first I\ndon't even have to synchronize RAM, I can\n\n538\n00:26:13.250 --> 00:26:16.810\nmove it over instantly because the storage\nis already visible to the other server.\n\n539\n00:26:16.810 --> 00:26:18.370\nThat's the first advantage.\n\n540\n00:26:18.370 --> 00:26:23.180\nThe second advantage is because\nit's on the network like this\n\n541\n00:26:23.180 --> 00:26:28.110\nit is easier for me to expand and\nmodify and change permissions where we can\n\n542\n00:26:28.110 --> 00:26:31.180\nhave it survive longer, we're going\nto get better utilization out of it.\n\n543\n00:26:31.180 --> 00:26:34.100\nThen it would if it was kinda\nstuck inside of a single box.\n\n544\n00:26:34.100 --> 00:26:35.800\nSo now we get that expandability.\n\n545\n00:26:35.800 --> 00:26:40.180\nThe ability to grow and exceed what\nthe storage is inside of a single server.\n\n546\n00:26:40.180 --> 00:26:43.140\nSo we're no longer dependent\non a physical server anymore,\n\n547\n00:26:43.140 --> 00:26:45.160\nit's out here on the network.\n\n548\n00:26:45.160 --> 00:26:48.430\nThe trade off is, well,\nwith iSCSI, it's performance.\n\n549\n00:26:48.430 --> 00:26:50.110\nWith Fiber Channels SAN,\nthere's real not a trade off.\n\n550\n00:26:50.110 --> 00:26:52.490\nFiber Channels SANs give you\na huge amount of band width.\n\n551\n00:26:52.490 --> 00:26:56.260\nYou can have six gigabit drives and\neight gigabit Fiber Channel.\n\n552\n00:26:56.260 --> 00:26:59.470\nAnd so now, your Fiber Channel is able to\nmove more than what a single drive can do.\n\n553\n00:26:59.470 --> 00:27:02.150\nNow, if you're doing multi-drive\ncommunications We do end up with\n\n554\n00:27:02.150 --> 00:27:03.980\na bottleneck, all right?\n\n555\n00:27:03.980 --> 00:27:05.410\nLet me throw in a third advantage.\n\n556\n00:27:05.410 --> 00:27:08.800\nA third advantage for\nhaving a SAN is multipath.\n\n557\n00:27:08.800 --> 00:27:11.220\nWith direct attach storage,\nyou have a SCSI or\n\n558\n00:27:11.220 --> 00:27:14.190\na SETA cable that runs from your\nmotherboard to the drive, right?\n\n559\n00:27:14.190 --> 00:27:16.050\nThere's only one way to get to that drive.\n\n560\n00:27:16.050 --> 00:27:20.910\nBut when it's on the network, I could\nhave two Fiber Channel HBAs that ran to\n\n561\n00:27:20.910 --> 00:27:25.240\ntwo different fiber channel switches that\nran To two different ports on the SAN.\n\n562\n00:27:25.240 --> 00:27:29.450\nOr I can have two different\nnetwork adaptors with iSCSI\n\n563\n00:27:29.450 --> 00:27:32.250\nthat run to two different switches that\nrun to two different ports on the SAN.\n\n564\n00:27:32.250 --> 00:27:33.100\nI can have multipath.\n\n565\n00:27:33.100 --> 00:27:36.130\nWhen you have multipath\nyou can have load balance.\n\n566\n00:27:36.130 --> 00:27:38.790\nAnd increase your bandwidth or\nyou can use one and\n\n567\n00:27:38.790 --> 00:27:40.260\nif it fails you can jump\nover to the others.\n\n568\n00:27:40.260 --> 00:27:42.050\nNow you get redundancy built into it.\n\n569\n00:27:42.050 --> 00:27:44.530\nThat's another advantage of\nhaving a storage area network\n\n570\n00:27:44.530 --> 00:27:46.490\nthat you don't get with\ndirect attach storage.\n\n571\n00:27:46.490 --> 00:27:49.605\nSo there's a few different kinds of\nbells and whistles available with that.\n\n572\n00:27:49.605 --> 00:27:52.690\nBut once they're created\nyou use them the same.\n\n573\n00:27:52.690 --> 00:27:54.570\nIf I were to whip up a virtual machine,\nright?\n\n574\n00:27:54.570 --> 00:27:56.940\nLet me come in here and\nwhip the virtual machine real quick.\n\n575\n00:27:56.940 --> 00:27:58.850\nI'm gonna create a new virtual machine.\n\n576\n00:28:00.410 --> 00:28:03.890\nWhen I go to create the virtual machine\nit's gonna ask me a series of questions.\n\n577\n00:28:03.890 --> 00:28:07.247\nI'm just gonna enter in junk here because\nI want to get down to the storage screen.\n\n578\n00:28:07.247 --> 00:28:09.060\nThat's where I really want to be.\n\n579\n00:28:09.060 --> 00:28:11.180\nSo I'm gonna create a virtual\nmachine on esxhost01.\n\n580\n00:28:11.180 --> 00:28:16.360\nAnd on this storage screen,\nit asks me where I want to put\n\n581\n00:28:16.360 --> 00:28:20.150\nmy virtual machine's discs, and\nI see all the datastores here.\n\n582\n00:28:20.150 --> 00:28:25.610\nAnd had I not named it as the iSCSI\ndatastore or the direct attach stores or\n\n583\n00:28:25.610 --> 00:28:29.960\nthe Fiber Channel stores, if I don't\nname them, you don't see a difference.\n\n584\n00:28:29.960 --> 00:28:31.560\nThey all have the same icon.\n\n585\n00:28:31.560 --> 00:28:33.680\nThey all say VMFS version 5.\n\n586\n00:28:33.680 --> 00:28:35.820\nThey all support storage DRS.\n\n587\n00:28:35.820 --> 00:28:38.690\nThey all work the same.\n\n588\n00:28:38.690 --> 00:28:42.570\nSo once they're created,\nthey're super easy to use, right.\n\n589\n00:28:42.570 --> 00:28:45.920\nSo don't show away from going with\na complex storage solution because you had\n\n590\n00:28:45.920 --> 00:28:47.540\nto be complex to set it up\nfrom the beginning, but\n\n591\n00:28:47.540 --> 00:28:51.200\nonce it's in place use it just like\nanything else, it becomes easy.\n\n592\n00:28:51.200 --> 00:28:53.590\nI threw out storage DRS,\njust kind of offhanded there.\n\n593\n00:28:53.590 --> 00:28:55.880\nI don't think we've talked about that yet.\n\n594\n00:28:55.880 --> 00:28:57.970\nDRS is distributed resource scheduler.\n\n595\n00:28:57.970 --> 00:29:00.070\nWe're gonna see it in a later episode.\n\n596\n00:29:00.070 --> 00:29:05.520\nBut it's a really cool feature,\nthat's a part of the VCR enterprise plus.\n\n597\n00:29:05.520 --> 00:29:08.630\nAnd I think it's also packaged\nwith the operations management.\n\n598\n00:29:08.630 --> 00:29:11.780\nAnd what it let's you do is monitor\nperformance on your systems.\n\n599\n00:29:11.780 --> 00:29:16.420\nAnd if there an excessive\ndisc io on one data store,\n\n600\n00:29:16.420 --> 00:29:18.840\nit can actually take\na virtual machine's disc and\n\n601\n00:29:18.840 --> 00:29:21.490\nmove them over to another data store\nwhere there's more discs io available.\n\n602\n00:29:21.490 --> 00:29:24.420\nSo it can balance things out\nbased on resource utilization.\n\n603\n00:29:24.420 --> 00:29:25.830\nIt's really awesome.\n\n604\n00:29:25.830 --> 00:29:27.530\nIt's kinda neat.\n\n605\n00:29:27.530 --> 00:29:29.560\nIt's very powerful.\n\n606\n00:29:29.560 --> 00:29:31.740\nYou'll get the best performance\npossible out of your system if you had\n\n607\n00:29:31.740 --> 00:29:32.810\na hands down.\n\n608\n00:29:32.810 --> 00:29:33.530\nBut it's a little bit,\n\n609\n00:29:33.530 --> 00:29:38.300\nit's a little weird because you'll\ncome into work in the morning and\n\n610\n00:29:38.300 --> 00:29:41.590\nyou're like I want to look at this virtual\nmachine and I wonder where it is today.\n\n611\n00:29:41.590 --> 00:29:44.240\nI wonder where its discs are,\nits discs over here, are they over there,\n\n612\n00:29:44.240 --> 00:29:45.130\nare they over there?\n\n613\n00:29:45.130 --> 00:29:45.940\nI don't know.\n\n614\n00:29:45.940 --> 00:29:49.410\nAnd the reality is we have the related\nobjects tab and you can go there you can\n\n615\n00:29:49.410 --> 00:29:52.320\nfigure out where stuff is really fast,\nso it's not that big of a deal.\n\n616\n00:29:52.320 --> 00:29:55.460\nBut it's one of those hard\nthings to get used to is hey,\n\n617\n00:29:55.460 --> 00:29:56.980\nI'm getting the best performance.\n\n618\n00:29:56.980 --> 00:29:59.590\nI'm getting the best redundancy, but\n\n619\n00:29:59.590 --> 00:30:02.140\nI don't really know where this stuff\nis landing, where it's sitting.\n\n620\n00:30:02.140 --> 00:30:03.880\nSo it kinda makes it a little bit weird.\n\n621\n00:30:03.880 --> 00:30:07.250\nBut that's what the storage DRS is and\nit doesn't just apply to storage.\n\n622\n00:30:07.250 --> 00:30:10.030\nWe have it for CPU, memory and\nall the other ones, too.\n\n623\n00:30:10.030 --> 00:30:11.630\nIt's just IC storage right here.\n\n624\n00:30:11.630 --> 00:30:15.710\nSo I can come in and\nI can choose my iSCSI storage, and\n\n625\n00:30:15.710 --> 00:30:20.600\nnow when I move forward to create this\nvirtual machine, it is going to whip it up\n\n626\n00:30:20.600 --> 00:30:25.320\nand its hard drives will exist on that\ndata store and so it will sit there and\n\n627\n00:30:25.320 --> 00:30:26.970\nI can put other things in the data store.\n\n628\n00:30:26.970 --> 00:30:29.560\nI will show an example, but I'm kind\nof out of time on this episode, but\n\n629\n00:30:29.560 --> 00:30:33.680\nin the next episode I'll show you guys how\nyou can stick ISO's in the data store and\n\n630\n00:30:33.680 --> 00:30:36.230\nnow anytime you need a CD image popped\ninto a virtual machine you can just\n\n631\n00:30:36.230 --> 00:30:37.260\ngo and grab it.\n\n632\n00:30:37.260 --> 00:30:39.910\nFor example, this one, if I wanna install\nan operating system on it I'm gonna have\n\n633\n00:30:39.910 --> 00:30:42.170\nto get the operating\nsystem from somewhere.\n\n634\n00:30:42.170 --> 00:30:45.960\nSo it would be nice if I had the ISOs in\nsome kind of centralized location that\n\n635\n00:30:45.960 --> 00:30:47.150\neverybody could get to, right?\n\n636\n00:30:47.150 --> 00:30:50.660\nSo those are some of the things that\nwe can do when we have a network-based\n\n637\n00:30:50.660 --> 00:30:54.090\ndata store that you can't really\ndo with direct-attached stores.\n\n638\n00:30:54.090 --> 00:30:55.370\nSo definitely a big difference there.\n\n639\n00:30:55.370 --> 00:30:56.730\nAnd I'll just cancel this.\n\n640\n00:30:56.730 --> 00:30:59.370\nBut I'll leave that data store there cuz\nwe're gonna see it more in our earlier\n\n641\n00:30:59.370 --> 00:31:00.180\nepisodes.\n\n642\n00:31:00.180 --> 00:31:00.690\n>> All right, Don.\n\n643\n00:31:00.690 --> 00:31:03.070\nA lot of great information\nsetting up the storage and\n\n644\n00:31:03.070 --> 00:31:04.620\nI know that we've got a lot more to go.\n\n645\n00:31:04.620 --> 00:31:06.380\nBut looking at that time clock,\nlike mentioned,\n\n646\n00:31:06.380 --> 00:31:08.770\nit does look like we're approaching\nthe end of another episode.\n\n647\n00:31:08.770 --> 00:31:11.750\nBut before we sign off,\ndo you got any additional words?\n\n648\n00:31:11.750 --> 00:31:13.860\n>> I do have a lot more to talk about\non this, so we're gonna do a part two.\n\n649\n00:31:13.860 --> 00:31:16.250\nI wanna talk about NFS stores.\n\n650\n00:31:16.250 --> 00:31:18.750\nThey don't get used a whole heck of\na lot in real life, LAN, but for\n\n651\n00:31:18.750 --> 00:31:21.770\nwhatever reason, they always show up\nin the exam, which is kind of annoying.\n\n652\n00:31:21.770 --> 00:31:24.160\nBut I'll show you how NFS stores work.\n\n653\n00:31:24.160 --> 00:31:27.130\nI didn't show you guys fiber channel, but\n\n654\n00:31:27.130 --> 00:31:31.670\nknow that with Fiber Channel, it is\nexactly like direct attached storage.\n\n655\n00:31:31.670 --> 00:31:33.590\nAll the real work is done with a SAN.\n\n656\n00:31:33.590 --> 00:31:36.240\nOn the SAN, you gotta slice up the disks,\nand on the SAN,\n\n657\n00:31:36.240 --> 00:31:38.630\nyou gotta say these discs get these LUNs.\n\n658\n00:31:38.630 --> 00:31:43.060\nAnd these LUNs get assigned to this\nAHBAs identifier or a worldwide name for\n\n659\n00:31:43.060 --> 00:31:44.020\nthat adaptor.\n\n660\n00:31:44.020 --> 00:31:47.450\nWhen all that's set up on the SAN\nyou fire up your ASX box and\n\n661\n00:31:47.450 --> 00:31:49.380\nit just sees the discs and that's it.\n\n662\n00:31:49.380 --> 00:31:50.660\nThere's not really much we do here.\n\n663\n00:31:50.660 --> 00:31:53.720\nSo on the exam they want you be\nfamiliar with Fiber Channel but\n\n664\n00:31:53.720 --> 00:31:55.000\nthere is no configuration for it.\n\n665\n00:31:55.000 --> 00:31:59.920\nBecause it's not a part of VSX the\nconfiguration's done on the sand and at\n\n666\n00:31:59.920 --> 00:32:03.800\nleast so far VMware doesn't make any SAN's\nso we don't have to worry about it there.\n\n667\n00:32:03.800 --> 00:32:05.630\nBut those are the key things.\n\n668\n00:32:05.630 --> 00:32:08.050\nI feel like there was something\nelse I wanted to talk about.\n\n669\n00:32:08.050 --> 00:32:11.270\nI'm gonna save distributed storage for\nwhen we get to the clustering section.\n\n670\n00:32:11.270 --> 00:32:13.520\nThat's a great chance for\nus to see distributed storage and\n\n671\n00:32:13.520 --> 00:32:16.850\nhow that works although already see\nit here with iSCSI is I can go and\n\n672\n00:32:16.850 --> 00:32:20.360\nadd that iSCSI target to other hosts and\nget that distributed storage.\n\n673\n00:32:20.360 --> 00:32:23.060\nSo we'll get a chance\nto see that later on.\n\n674\n00:32:23.060 --> 00:32:25.600\n>> All right Don, always a pleasure\nto have you here in the studios, and\n\n675\n00:32:25.600 --> 00:32:27.510\nalways a pleasure to have\nyou the viewer joining us.\n\n676\n00:32:27.510 --> 00:32:30.210\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n677\n00:32:30.210 --> 00:32:30.910\n>> And I'm Don Pezet.\n\n678\n00:32:30.910 --> 00:32:33.255\n>> And we'll see you next time.\n\n679\n00:32:33.255 --> 00:32:41.060\n[MUSIC]\n\n",
          "vimeoId": "169100592"
        },
        {
          "description": "In this episode, Wes and Don continue their discussion on configuring and implementing datastores in vSphere. They look at creating NFS based datastores and their implementation. They explain creating vCenter server storage filters and their usage.",
          "length": "1949",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-2-2-working_with_datastores_pt2-060116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-2-2-working_with_datastores_pt2-060116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-2-2-working_with_datastores_pt2-060116-1-sm.jpg",
          "title": "Working with Datastores Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.686 --> 00:00:14.311\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.311 --> 00:00:15.711\nI'm your host Wes Bryan, and\n\n4\n00:00:15.711 --> 00:00:19.370\nin today's episode we're continuing\nthrough our series inside of VMware.\n\n5\n00:00:19.370 --> 00:00:22.837\nThat's right we're coming back with more\nof the VMware certified professional\n\n6\n00:00:22.837 --> 00:00:23.401\nversion 6.\n\n7\n00:00:23.401 --> 00:00:25.870\nAnd this is actually a part two.\n\n8\n00:00:25.870 --> 00:00:28.470\nJoining us back in the studios\nis none other Mr. Don Vaset.\n\n9\n00:00:28.470 --> 00:00:29.620\nDon how are you doing today sir.\n\n10\n00:00:29.620 --> 00:00:30.540\n>> I'm doing great Wes.\n\n11\n00:00:30.540 --> 00:00:35.400\nDive right back into our V spheres\nSix in our Data Store episode.\n\n12\n00:00:35.400 --> 00:00:38.130\nIn part one, we started talking\nabout data stores, right?\n\n13\n00:00:38.130 --> 00:00:39.985\nPlaces we can, well, store our data.\n\n14\n00:00:39.985 --> 00:00:43.575\n[LAUGH] We can put our virtual\nmachine disks and other things.\n\n15\n00:00:43.575 --> 00:00:46.730\nWe gotta a chance to see direct\nattach storage, we saw iSCSI storage,\n\n16\n00:00:46.730 --> 00:00:49.570\nwe talked about fiber channels,\nwe've kinda knocked those out.\n\n17\n00:00:49.570 --> 00:00:51.930\nIn this episode, I wanna pick up with NFS.\n\n18\n00:00:51.930 --> 00:00:55.847\nNFS is the Network File System which is,\nit's actually a UNIX protocol,\n\n19\n00:00:55.847 --> 00:00:59.385\nit's created years and\nyears ago back in definitely by the 80s,\n\n20\n00:00:59.385 --> 00:01:00.732\nmaybe even in the 70s.\n\n21\n00:01:00.732 --> 00:01:04.255\nFor transferring files across\nthe network and it was designed for\n\n22\n00:01:04.255 --> 00:01:05.480\nUNIX to UNIX systems.\n\n23\n00:01:05.480 --> 00:01:09.430\nWell, ESXi is built on top Linux.\n\n24\n00:01:09.430 --> 00:01:11.700\nYou got a lot of\nSUSE Linux under the hood.\n\n25\n00:01:11.700 --> 00:01:15.750\nAnd so it makes sense that it would\nNFS support and it certainly does.\n\n26\n00:01:15.750 --> 00:01:19.201\nSo when we create a data store,\nwe can create a data store that's VMFS.\n\n27\n00:01:19.201 --> 00:01:24.121\nRight, and we saw that with our direct\nattach storage and fiber channel and\n\n28\n00:01:24.121 --> 00:01:27.750\neven iSCSI, or\nwe can create one that's NFS.\n\n29\n00:01:27.750 --> 00:01:31.630\nThat's a network file share that's\nstored somewhere on the network.\n\n30\n00:01:31.630 --> 00:01:34.870\nRight, that we've got a Unix-based\nserver somewhere in our network that's\n\n31\n00:01:34.870 --> 00:01:35.910\nstoring data.\n\n32\n00:01:35.910 --> 00:01:38.070\nAnd we can connect up vSphere and\n\n33\n00:01:38.070 --> 00:01:43.410\nESXi to it and store some stuff, so\nit's just another option for data storage.\n\n34\n00:01:43.410 --> 00:01:46.820\n>> Don, you said one of the things that I\nremember you saying is that NFS is rarely\n\n35\n00:01:46.820 --> 00:01:47.510\nused anymore.\n\n36\n00:01:47.510 --> 00:01:51.530\nIs there a real world implementation\nwhere we would use NFS\n\n37\n00:01:51.530 --> 00:01:54.180\ngiving a justification for\nit, still be in the product?\n\n38\n00:01:54.180 --> 00:01:57.710\n>> Yeah, so in the last episode,\nwhen I was creating the VMFS stores,\n\n39\n00:01:57.710 --> 00:01:59.430\nI said NFS is an option.\n\n40\n00:01:59.430 --> 00:02:00.760\nI never use it, right.\n\n41\n00:02:00.760 --> 00:02:04.950\nAnd what I probably should have said is\nthat I never use it, I very rarely use it.\n\n42\n00:02:04.950 --> 00:02:07.280\nThe main reason is performance, right.\n\n43\n00:02:07.280 --> 00:02:10.100\nNFS shares aren't going to be high speed.\n\n44\n00:02:10.100 --> 00:02:12.570\nThey're just over your\nregular TCPIP network so\n\n45\n00:02:12.570 --> 00:02:14.810\nthey're doing contention\nwith other traffic.\n\n46\n00:02:14.810 --> 00:02:18.360\nYou've got TCPIP overhead and it's just\nnot going to give you great performance.\n\n47\n00:02:18.360 --> 00:02:22.470\nSo if you're thinking about running\nyour virtual machines from an NFS share,\n\n48\n00:02:22.470 --> 00:02:23.700\nyou're going to be disappointed.\n\n49\n00:02:23.700 --> 00:02:26.050\nIt's not going to be fast.\n\n50\n00:02:26.050 --> 00:02:27.735\nBut that doesn't mean they're useless.\n\n51\n00:02:27.735 --> 00:02:30.370\nThere's actually a couple of different\nexamples where you might use them.\n\n52\n00:02:30.370 --> 00:02:34.050\nFor example, you might have\na virtual machine template, right.\n\n53\n00:02:34.050 --> 00:02:38.640\nA template is a virtual machine\nthat you create but you don't run.\n\n54\n00:02:38.640 --> 00:02:40.640\nThat you clone over and over again.\n\n55\n00:02:40.640 --> 00:02:43.300\nSo let's say I need 100 web servers.\n\n56\n00:02:43.300 --> 00:02:45.480\nI don't wanna create 100\nweb server individually.\n\n57\n00:02:45.480 --> 00:02:48.620\nI can create one and\nturn it into a template.\n\n58\n00:02:48.620 --> 00:02:51.960\nAnd now every time I need web server,\nI can just clone the template and\n\n59\n00:02:51.960 --> 00:02:53.320\nnow I've got a new web server.\n\n60\n00:02:53.320 --> 00:02:55.600\nThing about a template is,\nI'm not gonna run it.\n\n61\n00:02:55.600 --> 00:02:59.470\nSo do I wanna put it on my SSD,\nor my really expensive SAN.\n\n62\n00:02:59.470 --> 00:03:00.710\nNo.\n\n63\n00:03:00.710 --> 00:03:01.700\nI only need it every now and then.\n\n64\n00:03:01.700 --> 00:03:05.110\nSo I can put it on an NFS share and\nknow that it's there ready for\n\n65\n00:03:05.110 --> 00:03:05.830\nme if I ever need it.\n\n66\n00:03:05.830 --> 00:03:07.620\nSo it's a great place to put templates.\n\n67\n00:03:07.620 --> 00:03:11.510\nBut the place that I\nreally use it ISO images.\n\n68\n00:03:11.510 --> 00:03:14.550\nWhen you install an operating system or\ninstall third party software.\n\n69\n00:03:14.550 --> 00:03:17.050\nWhen you do updates a lot of\ntimes you'll have a CD or\n\n70\n00:03:17.050 --> 00:03:19.390\nDVD image that you need to\nprovide to the virtual machines.\n\n71\n00:03:19.390 --> 00:03:23.380\nNow you can give them access to\nthe physical drive on the server, but\n\n72\n00:03:23.380 --> 00:03:24.390\nif you doing Vmotion.\n\n73\n00:03:24.390 --> 00:03:26.870\nIf your VMs can bounce from\nserver to server to server.\n\n74\n00:03:26.870 --> 00:03:28.970\nIt's kind of a pain to figure\nout which server their on.\n\n75\n00:03:28.970 --> 00:03:30.420\nSo go put the CD in the drive and\n\n76\n00:03:30.420 --> 00:03:32.895\nthen if your like me you\nforget the CD in the drive.\n\n77\n00:03:32.895 --> 00:03:36.355\nAnd now the virtual machine\ncan't fail over to another host\n\n78\n00:03:36.355 --> 00:03:38.395\ncuz it depends on that CD\nthat's in the first one.\n\n79\n00:03:38.395 --> 00:03:41.985\nSo it's much better to do\na software image of the CD,\n\n80\n00:03:41.985 --> 00:03:45.875\nan ISO image, and\nstore that in an NFS share.\n\n81\n00:03:45.875 --> 00:03:49.569\nThen we can connect that as a data\ncenter into vCenter, into ESXi.\n\n82\n00:03:49.569 --> 00:03:53.593\nAnd they'll be able to see it and now when\nwe install a virtual machine they'll be\n\n83\n00:03:53.593 --> 00:03:57.085\nable to have that access and will even\nbe able to fail over to other hosts\n\n84\n00:03:57.085 --> 00:04:01.190\nbecause it's network storage, it's not\na physical CD drive in a physical host.\n\n85\n00:04:01.190 --> 00:04:07.400\nSo that's really the example of where I\nuse it the most, is with those ISO images.\n\n86\n00:04:07.400 --> 00:04:08.640\nSo let's get one created.\n\n87\n00:04:08.640 --> 00:04:11.490\nI've actually got an NFS share sitting\nhere on my network that we're going to\n\n88\n00:04:11.490 --> 00:04:12.270\nconnect to.\n\n89\n00:04:12.270 --> 00:04:15.650\nAnd get it put in as a data center,\nnow, or data store.\n\n90\n00:04:15.650 --> 00:04:19.240\nIf you watched the first episode, you know\nthat we all ready created a couple of data\n\n91\n00:04:19.240 --> 00:04:22.730\nstores and so I see the data stores\nthat I made here on host 01.\n\n92\n00:04:22.730 --> 00:04:26.850\nWe have a direct attach storage data\nstore that was hard drives right there\n\n93\n00:04:26.850 --> 00:04:28.080\nin the server.\n\n94\n00:04:28.080 --> 00:04:31.570\nAnd we have a iSCSI data store.\n\n95\n00:04:31.570 --> 00:04:35.540\nWhat I'm gonna do now is create another\none that's gonna be an NFS data store.\n\n96\n00:04:35.540 --> 00:04:40.110\nSo, I'm gonna go back over to my host,\nand I'll right click on old ESX host 01.\n\n97\n00:04:40.110 --> 00:04:44.420\nI'll go to Storage, and I'll go to\nNew Data store, just like we did before.\n\n98\n00:04:44.420 --> 00:04:46.930\nThe big difference is gonna\nbe right here on this screen.\n\n99\n00:04:46.930 --> 00:04:48.960\nInstead of choosing VMFS.\n\n100\n00:04:48.960 --> 00:04:50.800\nI'm gonna choose NFS, right?\n\n101\n00:04:50.800 --> 00:04:54.570\nI want to use the network file system\nto connect to a share on the network.\n\n102\n00:04:55.750 --> 00:04:58.170\nNow it's gonna ask me a question.\n\n103\n00:04:58.170 --> 00:05:00.600\nWhich NFS version do I want to support?\n\n104\n00:05:00.600 --> 00:05:03.330\nNFS Version 3 or NFS Version 4.1?\n\n105\n00:05:03.330 --> 00:05:06.470\nNow pretty much everything\nsupports NFS Version 3 so\n\n106\n00:05:06.470 --> 00:05:09.010\nyou're pretty safe if\nyou go with that one.\n\n107\n00:05:09.010 --> 00:05:13.560\nBut, there are some scenarios where\nyou definitely need NFS Version 4.1.\n\n108\n00:05:13.560 --> 00:05:15.010\nThe main reason is authentication.\n\n109\n00:05:15.010 --> 00:05:17.150\nYou actually do have\nauthentication with NFS Version 3.\n\n110\n00:05:17.150 --> 00:05:19.800\nBut the its the older unit style and\n\n111\n00:05:19.800 --> 00:05:21.965\nits actually not the most\nsecure thing in the world.\n\n112\n00:05:21.965 --> 00:05:24.190\nThere's a little bit of plain\ntext exchange that happens and\n\n113\n00:05:24.190 --> 00:05:25.228\nthat's not ideal.\n\n114\n00:05:25.228 --> 00:05:29.730\nWith NFS 4.1, you get support for\nKerberos authentication.\n\n115\n00:05:29.730 --> 00:05:32.130\nAnd so now it's encrypted authentication,\nit happens over the network,\n\n116\n00:05:32.130 --> 00:05:33.100\nit's much more secure.\n\n117\n00:05:34.420 --> 00:05:38.600\nVMWare supports both, ESXi supports both,\nbut it's up to your host.\n\n118\n00:05:38.600 --> 00:05:41.510\nWherever this NFS share actually\nresides to configure it.\n\n119\n00:05:41.510 --> 00:05:42.863\nAnd in my case, now that I think about it,\n\n120\n00:05:42.863 --> 00:05:45.049\nthis is probably something I should\nhave checked before the show.\n\n121\n00:05:45.049 --> 00:05:51.630\nI can't remember [LAUGH] whether or not\nmy NFS server supports Kerberos or not.\n\n122\n00:05:51.630 --> 00:05:54.380\nSo I'm gonna go with NFS Version\n3 cuz I know it'll work.\n\n123\n00:05:54.380 --> 00:05:54.980\nBut in real life,\n\n124\n00:05:54.980 --> 00:05:58.620\nif you can do NFS 4.1, you'll be better\noff from the authentication side.\n\n125\n00:05:58.620 --> 00:06:01.070\nAs far as speed and data access,\nthat's all the same.\n\n126\n00:06:01.070 --> 00:06:02.890\nThere's not really\nanything too crazy there.\n\n127\n00:06:02.890 --> 00:06:04.680\nBut the authentication is what helps.\n\n128\n00:06:04.680 --> 00:06:09.240\nAll right and I think we actually see,\nyeah, see how when I click,\n\n129\n00:06:09.240 --> 00:06:11.480\nlet me zoom in on this so\nwe can see a little better here.\n\n130\n00:06:11.480 --> 00:06:15.160\nWhen I click on NFS 3,\nI've only got four screens over here.\n\n131\n00:06:15.160 --> 00:06:17.140\nBut when I click on 4.1, there.\n\n132\n00:06:17.140 --> 00:06:18.580\nConfigure Kerberos authentication.\n\n133\n00:06:18.580 --> 00:06:19.340\nThat's what it's adding.\n\n134\n00:06:19.340 --> 00:06:20.810\nSo if you ever forget\nwhat it is that it adds,\n\n135\n00:06:20.810 --> 00:06:22.870\nyou can see it right there on the screen.\n\n136\n00:06:22.870 --> 00:06:24.690\nI'm gonna do NFS 3 and I'll hit next.\n\n137\n00:06:26.180 --> 00:06:28.980\nAll right, now, it kind of looks\nlike the other data store stuff,\n\n138\n00:06:28.980 --> 00:06:32.640\nexcept normally you'd pick a name,\nhere, and down here you'd pick a drive.\n\n139\n00:06:32.640 --> 00:06:35.640\nWell, instead of picking a drive,\nit's asking me for a server and\n\n140\n00:06:35.640 --> 00:06:36.980\na folder, right.\n\n141\n00:06:36.980 --> 00:06:39.230\nIt's not asking for\na username and a password.\n\n142\n00:06:39.230 --> 00:06:42.070\nAnd, so, it's not asking for\nauthentication.\n\n143\n00:06:42.070 --> 00:06:43.280\nHow's it authenticating?\n\n144\n00:06:43.280 --> 00:06:45.850\nWell, when somebody sets\nup an NFS share like this,\n\n145\n00:06:45.850 --> 00:06:48.340\nthey can actually set up\nIP address filtering, and\n\n146\n00:06:48.340 --> 00:06:50.420\nlimit the IP addresses that can get to it,\nand that's what I'm doing.\n\n147\n00:06:50.420 --> 00:06:52.560\nSo I actually don't need a username and\na password.\n\n148\n00:06:52.560 --> 00:06:54.920\nBut if I had done NFS four,\nI'd have a username and\n\n149\n00:06:54.920 --> 00:06:57.600\na password I could provide when\nI configure on that occasion.\n\n150\n00:06:57.600 --> 00:06:59.740\nAll right, so I'm gonna call this one.\n\n151\n00:06:59.740 --> 00:07:04.352\nNow, what I've been calling them\nbefore was esx-host01-nfs-datastore,\n\n152\n00:07:04.352 --> 00:07:07.913\nsomething like that, so\nI can remember where it was attached.\n\n153\n00:07:07.913 --> 00:07:11.930\nBut here's the thing,\nwith NFS it's a Network File System.\n\n154\n00:07:11.930 --> 00:07:14.470\nI could attach it to more than one host.\n\n155\n00:07:14.470 --> 00:07:17.690\nSo, I don't necessarily need\nto tie this to one host.\n\n156\n00:07:17.690 --> 00:07:20.110\nI'm just gonna call\nthis my NFS data store,\n\n157\n00:07:20.110 --> 00:07:23.410\nbecause I can attach it to\nas many people as I want.\n\n158\n00:07:23.410 --> 00:07:24.810\nI'm connecting it just to one right now.\n\n159\n00:07:24.810 --> 00:07:27.980\nI'm connecting it to ESX host 01, but\nI can always come back and it to more.\n\n160\n00:07:27.980 --> 00:07:32.050\nOr, I might just wanna call\nthis my ISO data store, right?\n\n161\n00:07:32.050 --> 00:07:34.390\nIt's NFS but\nI'm gonna be storing my ISO images here so\n\n162\n00:07:34.390 --> 00:07:36.650\nI might wanna give it\na name that I can remember.\n\n163\n00:07:36.650 --> 00:07:41.226\n>> Don, with the naming conventions there\nare they arbitrary or is this really just\n\n164\n00:07:41.226 --> 00:07:45.010\nso that you know if you get hundreds\nof these you can identify them?\n\n165\n00:07:45.010 --> 00:07:48.317\nI mean they don't have to be specifically\nset up like this, this is just for\n\n166\n00:07:48.317 --> 00:07:50.900\nyour easy identification\nof where they're located.\n\n167\n00:07:50.900 --> 00:07:51.570\n>> That's exactly right.\n\n168\n00:07:51.570 --> 00:07:52.590\nYou can call them whatever you want.\n\n169\n00:07:52.590 --> 00:07:53.340\nYou can call it Bob.\n\n170\n00:07:53.340 --> 00:07:55.440\nRight so\nthis is going to be my Bob data store.\n\n171\n00:07:55.440 --> 00:07:56.327\nAnd then you have Steve.\n\n172\n00:07:56.327 --> 00:07:58.215\nI've gone to places where\nthey thought it was funny and\n\n173\n00:07:58.215 --> 00:07:59.497\nthey'd be all Simpson characters.\n\n174\n00:07:59.497 --> 00:08:01.847\nAnd so like yeah those virtual\nmachines are over there on Bart.\n\n175\n00:08:01.847 --> 00:08:04.587\nOr over on Homer.\n\n176\n00:08:04.587 --> 00:08:07.759\nAnd it's funny until an emergency's going\non and you've gotta find something, and\n\n177\n00:08:07.759 --> 00:08:10.730\nall the data center stores have stupid\nnames and you don't know what's where.\n\n178\n00:08:10.730 --> 00:08:12.090\nAnd it's super-frustrating.\n\n179\n00:08:12.090 --> 00:08:17.200\nI've seen Simpsons characters,\nRoman gods, Greek gods, any gods.\n\n180\n00:08:17.200 --> 00:08:19.740\nJust tons of different,\nStar Trek characters, captains.\n\n181\n00:08:19.740 --> 00:08:21.080\nIt's super annoying.\n\n182\n00:08:21.080 --> 00:08:23.320\nGive it a name that makes sense,\nit helps you find things.\n\n183\n00:08:23.320 --> 00:08:26.720\n>> So, it's more for ease of access,\nso that would be your advice.\n\n184\n00:08:26.720 --> 00:08:29.280\nNaming conventions need to\nbe easily identifiable and\n\n185\n00:08:29.280 --> 00:08:33.270\ndefinitely recognizable, really,\nreally quick especially in a DR situation.\n\n186\n00:08:33.270 --> 00:08:34.050\n>> Absolutely, yeah.\n\n187\n00:08:34.050 --> 00:08:38.140\nSo, if I give it a name like this, yeah,\nit doesn't roll off the tongue, but\n\n188\n00:08:38.140 --> 00:08:39.190\nmy end users aren't gonna see it.\n\n189\n00:08:39.190 --> 00:08:40.010\nIt's just for administrators.\n\n190\n00:08:40.010 --> 00:08:43.310\nAnd when I look at it I see\nnfs-shared-iso-datastore.\n\n191\n00:08:43.310 --> 00:08:44.410\nSo, what do I learn from that?\n\n192\n00:08:44.410 --> 00:08:45.250\nIt's a datastore.\n\n193\n00:08:45.250 --> 00:08:47.840\nI kinda already knew that,\nI could probably leave that off, right?\n\n194\n00:08:47.840 --> 00:08:50.140\nBut nfs, I know the protocol.\n\n195\n00:08:50.140 --> 00:08:53.150\nIt's shared, in other words,\nI've got more than on host attached to it.\n\n196\n00:08:53.150 --> 00:08:55.540\nAnd isos,\nI'm gonna be storing isos there, right?\n\n197\n00:08:55.540 --> 00:08:58.200\nSo just come up with a naming\nconvention that works for you,\n\n198\n00:08:58.200 --> 00:09:00.830\nand know that you can rename\nthese things after the fact.\n\n199\n00:09:00.830 --> 00:09:05.450\nAnd you can be sure that I renamed Lisa,\nand Maggie and Marge, and\n\n200\n00:09:05.450 --> 00:09:08.063\nall those to actual names with that.\n\n201\n00:09:08.063 --> 00:09:10.587\nI didn't work for that company,\nI was doing a contract for them and, man,\n\n202\n00:09:10.587 --> 00:09:11.330\nit was a nightmare.\n\n203\n00:09:11.330 --> 00:09:12.970\nSo, I'm sure it seemed funny,\n\n204\n00:09:12.970 --> 00:09:16.250\nit seemed like a good idea at the time,\nnot in practice.\n\n205\n00:09:16.250 --> 00:09:17.910\nAll right.\nSo I need to specify the folder and\n\n206\n00:09:17.910 --> 00:09:18.420\nthe server.\n\n207\n00:09:18.420 --> 00:09:21.480\nNow, unfortunately the folder\nnames are not usually very easy.\n\n208\n00:09:21.480 --> 00:09:23.620\nIf you think Window shares,\nyou have the server slash, and\n\n209\n00:09:23.620 --> 00:09:25.140\nwhatever the folder name is.\n\n210\n00:09:25.140 --> 00:09:30.600\nBut in NFS it actually publishes, or\nit exports the whole UNIX path name.\n\n211\n00:09:30.600 --> 00:09:32.332\nAnd so, I've got to provide\nthe full path name to it.\n\n212\n00:09:32.332 --> 00:09:33.727\nYou'll have to go and\nget this from your server.\n\n213\n00:09:33.727 --> 00:09:43.000\nSo I'm gonna do /mnt/nfs/nfs-storage/iso.\n\n214\n00:09:43.000 --> 00:09:45.350\nSo this is gonna be where\nmy iso's are stored, okay?\n\n215\n00:09:45.350 --> 00:09:49.740\nAnd then I'll punch in my server,\nwhich is that guy right there.\n\n216\n00:09:49.740 --> 00:09:50.850\nAnd we'll get connected.\n\n217\n00:09:50.850 --> 00:09:52.870\nOkay, now if you look\ndown here at the bottom\n\n218\n00:09:53.900 --> 00:09:57.660\nit tells us mount NFS is read-only, okay?\n\n219\n00:09:57.660 --> 00:09:59.050\nDo I want it to be read-only?\n\n220\n00:09:59.050 --> 00:10:03.600\nWell, these are iso images and\nthat's all I want there, right?\n\n221\n00:10:03.600 --> 00:10:07.050\nVMware can't create iso images, so\nI don't have to worry about it writing.\n\n222\n00:10:07.050 --> 00:10:10.130\nWell, what I do have to worry about\nis somebody could create a virtual\n\n223\n00:10:10.130 --> 00:10:12.700\nmachine and they could choose\nthis as the datastore to use.\n\n224\n00:10:12.700 --> 00:10:14.740\nAnd now there's a virtual machine\nhard drive running in it,\n\n225\n00:10:14.740 --> 00:10:15.450\nand I don't want that.\n\n226\n00:10:15.450 --> 00:10:19.080\nSo I might want to mount\nit read-only to stop\n\n227\n00:10:19.080 --> 00:10:22.166\npeople from creating virtual machines or\ntemplates and sticking them in there.\n\n228\n00:10:22.166 --> 00:10:25.100\nIt's just gonna be ISOs in there,\nI don't want other stuff.\n\n229\n00:10:25.100 --> 00:10:27.190\nAnd so, I can create it like that,\nand I can move forward.\n\n230\n00:10:27.190 --> 00:10:30.950\nI can always create another NFS share if\nI want, and make that one available for\n\n231\n00:10:30.950 --> 00:10:33.770\nvirtual machines or for\ntemplates or whatever, right?\n\n232\n00:10:33.770 --> 00:10:35.860\nSo, in fact, I'll do that,\nI will create a second one.\n\n233\n00:10:35.860 --> 00:10:36.690\nSo I am gonna finish this one.\n\n234\n00:10:36.690 --> 00:10:38.110\nThis is my ISO one, right?\n\n235\n00:10:38.110 --> 00:10:39.570\nSo, I will finish that.\n\n236\n00:10:39.570 --> 00:10:42.960\nAnd let's say I want to create another\ndatastore, another NFS one, but\n\n237\n00:10:42.960 --> 00:10:45.380\nthis one I want it to be for\nvirtual machine templates.\n\n238\n00:10:45.380 --> 00:10:47.052\nSo, I am gonna come in here and\ncreate another one.\n\n239\n00:10:47.052 --> 00:10:49.820\nSo, I'll go back to Storage and\nNew Datastore.\n\n240\n00:10:49.820 --> 00:10:52.330\nI'll pick NFS again.\n\n241\n00:10:52.330 --> 00:10:55.220\nI'll stick with NSF version\nthree cuz my memory's terrible.\n\n242\n00:10:55.220 --> 00:11:01.020\nAnd then, this one, I'll call it\nmy NSF shared VM datastore, right?\n\n243\n00:11:01.020 --> 00:11:02.540\nOr even VM template.\n\n244\n00:11:02.540 --> 00:11:07.130\nSo this is my VM template datastore,\nright?\n\n245\n00:11:07.130 --> 00:11:08.080\nNow people will know.\n\n246\n00:11:08.080 --> 00:11:10.800\nThat's exactly what this is,\nit's NFS, so it's gonna be slow.\n\n247\n00:11:10.800 --> 00:11:11.370\nIt's shared.\n\n248\n00:11:11.370 --> 00:11:12.920\nMore than one server has access.\n\n249\n00:11:12.920 --> 00:11:15.260\nIt's VM templates, that's what go here.\n\n250\n00:11:15.260 --> 00:11:16.650\nAnd it's a datastore.\n\n251\n00:11:16.650 --> 00:11:20.070\nAnd so, I can punch in where\nI want that one to be.\n\n252\n00:11:20.070 --> 00:11:23.350\nSo I will put it, it's on the same server,\nit's just a different folder.\n\n253\n00:11:25.370 --> 00:11:29.030\nAnd I'll punch in that server also, okay?\n\n254\n00:11:29.030 --> 00:11:31.860\nSo, as soon as that's done, now this\none I'm not gonna mount read-only.\n\n255\n00:11:31.860 --> 00:11:34.510\nI want people to be able to create and\nput things into it.\n\n256\n00:11:34.510 --> 00:11:37.440\nAnd so, I'll just hit next and\nI'll finish that one up.\n\n257\n00:11:37.440 --> 00:11:39.290\nAnd now, that's gonna get\ncreated in the background and\n\n258\n00:11:39.290 --> 00:11:41.560\nI'll have my two datastores in place.\n\n259\n00:11:41.560 --> 00:11:44.885\nAnd, as always, we need to wait just\na little bit before they show up.\n\n260\n00:11:44.885 --> 00:11:48.050\nNFS ones normally show up pretty\nquickly cuz we're not having to rescan\n\n261\n00:11:48.050 --> 00:11:48.830\na physical adapter.\n\n262\n00:11:48.830 --> 00:11:50.020\nIt's just on the network.\n\n263\n00:11:50.020 --> 00:11:55.570\nAnd I can see, here is my two NFS\ndatastores that I just created.\n\n264\n00:11:55.570 --> 00:11:56.700\nOne's read only.\n\n265\n00:11:56.700 --> 00:11:58.180\nThe other one's read write.\n\n266\n00:11:58.180 --> 00:11:59.780\nThey're both NFS version three.\n\n267\n00:11:59.780 --> 00:12:04.070\nAnd if I scroll over here, they're\nboth the exact same size cuz they're\n\n268\n00:12:04.070 --> 00:12:06.310\njust different folders on the same drive,\nright?\n\n269\n00:12:06.310 --> 00:12:09.500\nSo, I have kind of separated\nit that way on the Nas box.\n\n270\n00:12:09.500 --> 00:12:13.320\nSo now I've got two new datastores\nthat are ready to rock.\n\n271\n00:12:13.320 --> 00:12:16.830\nAnd when I create a virtual machine and\nI go to pick a destination,\n\n272\n00:12:16.830 --> 00:12:20.180\nI could pick the direct attached\nstorage or the data store one.\n\n273\n00:12:20.180 --> 00:12:23.020\nI could pick the virtual\nmachine template datastore.\n\n274\n00:12:23.020 --> 00:12:26.710\nAnd now, I can throw data in there and\nit'll get stored right there in NFS.\n\n275\n00:12:28.610 --> 00:12:31.480\nOkay, so the virtual machine,\nwell, that one is easy.\n\n276\n00:12:31.480 --> 00:12:34.630\nIf we wanna see that in use,\njust, I create a virtual machine.\n\n277\n00:12:34.630 --> 00:12:35.820\nLet me whip up one real quick.\n\n278\n00:12:37.490 --> 00:12:40.700\nAnd as soon as I go to create that one,\nand\n\n279\n00:12:40.700 --> 00:12:44.730\nmove forward, we'll start to see\nwhere we pick our destination.\n\n280\n00:12:44.730 --> 00:12:46.090\nI just gotta get forward to that screen.\n\n281\n00:12:46.090 --> 00:12:49.450\nI'm just picking stuff really quick\nhere to get to the storage screen.\n\n282\n00:12:49.450 --> 00:12:51.620\nNow, when I get to the storage screen,\n\n283\n00:12:51.620 --> 00:12:54.520\nhere is where things get really\ntricky cuz it doesn't differentiate.\n\n284\n00:12:54.520 --> 00:12:56.610\nYou'll start to see where\nthe confusion could be.\n\n285\n00:12:56.610 --> 00:12:58.830\nI don't see the iso storage.\n\n286\n00:12:58.830 --> 00:13:00.090\nI don't see it cuz it's read-only.\n\n287\n00:13:00.090 --> 00:13:01.970\nCan't create a VM in a read\nonly environment, right?\n\n288\n00:13:01.970 --> 00:13:03.050\nSo, it doesn't show up.\n\n289\n00:13:03.050 --> 00:13:05.270\nBut I do see the VM template one.\n\n290\n00:13:05.270 --> 00:13:09.290\nAnd had I not named it nfs-shared-vm,\nif I hadn't named it that,\n\n291\n00:13:09.290 --> 00:13:13.090\nit would look just like\nthe other data stores, okay?\n\n292\n00:13:13.090 --> 00:13:14.460\nThere's no real way to differentiate.\n\n293\n00:13:14.460 --> 00:13:16.980\nAnd that's why, again,\nI say we need to name it that way.\n\n294\n00:13:16.980 --> 00:13:19.580\nI do have the type over here where\nI see NFS version three, but\n\n295\n00:13:19.580 --> 00:13:21.470\nit's really easy to overlook that.\n\n296\n00:13:21.470 --> 00:13:24.862\nThe icons are the same,\neverything just looks basically the same.\n\n297\n00:13:24.862 --> 00:13:26.080\nAll right.\n\n298\n00:13:26.080 --> 00:13:30.380\nNow, as far as getting that created and\nputting it in place, that's great.\n\n299\n00:13:30.380 --> 00:13:33.310\nBut one of the advantages of NFS that\nI mentioned is that we can use it\n\n300\n00:13:33.310 --> 00:13:36.020\nwith more than one host, right?\n\n301\n00:13:36.020 --> 00:13:39.565\nNow, be careful with that cuz\nyou have the temptation that now\n\n302\n00:13:39.565 --> 00:13:40.840\nI've added it to ESX host 01.\n\n303\n00:13:40.840 --> 00:13:44.415\nI could go and right-click on host two and\ngo to storage and, well,\n\n304\n00:13:44.415 --> 00:13:47.518\nhost two's off line so\nthat's not gonna work out so well.\n\n305\n00:13:47.518 --> 00:13:50.320\nBut I could come in and do new data\nstore and add it a second time.\n\n306\n00:13:50.320 --> 00:13:55.290\nIf you do that, VMware and ESX will see\nit as two different datastores even\n\n307\n00:13:55.290 --> 00:13:57.060\nthough it's pointed to the same place.\n\n308\n00:13:57.060 --> 00:13:59.330\nSo, if you want to connect\ninto more than one,\n\n309\n00:13:59.330 --> 00:14:02.425\nthe better thing to do is\nto pull up your datastore.\n\n310\n00:14:03.480 --> 00:14:08.780\nSo I'm going to esx-host01, I'm going\nto Related Objects and Datastores.\n\n311\n00:14:08.780 --> 00:14:13.890\nAnd I'm gonna find that NFS datastore,\nlike the ISO one or the VM template one.\n\n312\n00:14:13.890 --> 00:14:15.510\nAnd if you right-click on it and\n\n313\n00:14:15.510 --> 00:14:18.330\nlook at the options,\nyou'll see you have an option right here.\n\n314\n00:14:18.330 --> 00:14:20.830\nMount Datastore to Additional Hosts.\n\n315\n00:14:20.830 --> 00:14:21.500\nOkay?\n\n316\n00:14:21.500 --> 00:14:26.450\nIf you do that, it'll connect the NFS\nstore to more than one host, and\n\n317\n00:14:26.450 --> 00:14:29.630\nit'll recognize that\nit's the same datastore,\n\n318\n00:14:29.630 --> 00:14:33.350\nthat it's not five different\ndatastores on five different hosts.\n\n319\n00:14:33.350 --> 00:14:35.560\nIt's one datastore on\nfive different hosts.\n\n320\n00:14:35.560 --> 00:14:39.200\nThey all have direct access to it,\nand it's defined one time.\n\n321\n00:14:39.200 --> 00:14:40.300\nSo, you always wanna make sure you\n\n322\n00:14:40.300 --> 00:14:42.720\nuse that Mount Datastore to\nAdditional Hosts to add it.\n\n323\n00:14:42.720 --> 00:14:46.420\nAnd if I were to do that right now, my\nhost O2 is offline, so it's probably gonna\n\n324\n00:14:46.420 --> 00:14:50.600\ncomplain, but basically it's gonna give\nyou a list of all your hosts right here.\n\n325\n00:14:50.600 --> 00:14:54.660\nAnd you can check off the hosts that you\nwanna add, and then you just hit OK.\n\n326\n00:14:54.660 --> 00:14:56.810\nYou don't have to provide the username and\npassword again,\n\n327\n00:14:56.810 --> 00:14:58.080\nyou don't have to provide the path again.\n\n328\n00:14:58.080 --> 00:15:01.940\nIt's already got all that information,\nyou just check off the host and hit OK.\n\n329\n00:15:01.940 --> 00:15:02.730\nAnd it creates it.\n\n330\n00:15:02.730 --> 00:15:06.325\nSo, it's trying to scan\nmy second host right now.\n\n331\n00:15:06.325 --> 00:15:09.880\nIt's offline, so that's why it's kinda\nstalled there and I can't choose it.\n\n332\n00:15:09.880 --> 00:15:13.620\nBut what I would normally do is check that\noff, or check off all the hosts, right?\n\n333\n00:15:13.620 --> 00:15:15.370\nAnd then you just hit OK,\nand it adds them.\n\n334\n00:15:15.370 --> 00:15:18.190\nAnd now they've all got direct access\nto it, and you're in business.\n\n335\n00:15:18.190 --> 00:15:20.660\nSo that's really the best way\nto handle the NFS storage\n\n336\n00:15:20.660 --> 00:15:22.390\nto get it visible across all your hosts.\n\n337\n00:15:22.390 --> 00:15:25.650\n>> Now, Don, what about the ISO\nshare that you've created on that?\n\n338\n00:15:25.650 --> 00:15:27.200\nA couple of things on that.\n\n339\n00:15:27.200 --> 00:15:30.990\nFor one, you flagged it as read-only,\nso now we can't write to it.\n\n340\n00:15:30.990 --> 00:15:33.490\nSo how does that affect your\nability to put ISOs in it?\n\n341\n00:15:33.490 --> 00:15:35.520\nAnd if we can, how do we do that?\n\n342\n00:15:35.520 --> 00:15:37.550\n>> Okay, so a couple of ways to do it.\n\n343\n00:15:37.550 --> 00:15:40.560\nNow, if I wanna put files in here,\nI showed you where\n\n344\n00:15:40.560 --> 00:15:44.240\nif I create a virtual machine, I can pick\nthe NFS storage and it'll put it there.\n\n345\n00:15:44.240 --> 00:15:46.570\nBut I can't create an ISO that way,\nit won't let me.\n\n346\n00:15:46.570 --> 00:15:49.170\nSo I've gotta get the ISOs\nloaded in the NFS share somehow,\n\n347\n00:15:49.170 --> 00:15:51.210\nand there's two ways to do it.\n\n348\n00:15:51.210 --> 00:15:53.810\nThere's the way that I don't like to use,\nbut I'm gonna show you anyway, and\n\n349\n00:15:53.810 --> 00:15:55.020\nthen there's the way I actually do use.\n\n350\n00:15:55.020 --> 00:15:58.287\nSo, the way that I don't like to use\nis right here inside of V-sphere,\n\n351\n00:15:58.287 --> 00:16:00.148\nis that you can click on that datastore.\n\n352\n00:16:00.148 --> 00:16:02.884\nSo I can take this VM template datastore,\nand\n\n353\n00:16:02.884 --> 00:16:06.633\nif I click on that it's gonna\ntake me to the datastore itself.\n\n354\n00:16:06.633 --> 00:16:10.782\nOr I'm gonna get an error [LAUGH] And\nit's gonna reload my [LAUGH] UI.\n\n355\n00:16:10.782 --> 00:16:13.412\nIt's the convenience of a web based UI.\n\n356\n00:16:13.412 --> 00:16:16.720\nSo, I'm gonna browse into the data stores,\nI promise I will.\n\n357\n00:16:16.720 --> 00:16:19.980\nAnd when you get in there, its actually\ngot an option that says files.\n\n358\n00:16:19.980 --> 00:16:23.570\nAnd you can view the files in the data\nstore and you can upload files.\n\n359\n00:16:23.570 --> 00:16:27.050\nNow, the reason I don't like\nit is it users a little\n\n360\n00:16:28.270 --> 00:16:30.730\nagent type software that it has to have,\nso here we go.\n\n361\n00:16:30.730 --> 00:16:36.310\nSo now I'm back and so I clicked on the\ndata store, it took me to the data store.\n\n362\n00:16:36.310 --> 00:16:39.640\nAnd up here you can see virtual machines\nand hosts under related objects, but\n\n363\n00:16:39.640 --> 00:16:41.250\nI wanna go to Manage.\n\n364\n00:16:41.250 --> 00:16:46.890\nAnd under Manage you got Files, and\nunder Files well, you can see the files.\n\n365\n00:16:46.890 --> 00:16:48.600\nI can see what's in that data store.\n\n366\n00:16:48.600 --> 00:16:50.170\nMine's empty.\n\n367\n00:16:50.170 --> 00:16:54.440\nAnd I can upload files and\ncreate folders, okay.\n\n368\n00:16:54.440 --> 00:16:57.690\nNow, the thing is if we go to upload,\nlook at the little note that pops up.\n\n369\n00:16:57.690 --> 00:16:58.930\nIt's probably hard to read, but\n\n370\n00:16:58.930 --> 00:17:02.860\nit says install client integration\nplug-in, blah, blah, blah.\n\n371\n00:17:02.860 --> 00:17:05.830\nAnd wants you to install a web browser\nplug-in and that's what I don't like.\n\n372\n00:17:05.830 --> 00:17:08.050\nThis plug-in I'm gonna use one time and\nnot use again.\n\n373\n00:17:08.050 --> 00:17:08.690\nI don't wanna install it.\n\n374\n00:17:08.690 --> 00:17:10.450\nSo I don't normally go this route.\n\n375\n00:17:10.450 --> 00:17:13.770\nAnd for my VM template folder\nit's gonna work out just fine.\n\n376\n00:17:13.770 --> 00:17:15.070\nIt's not gonna work out fine for\n\n377\n00:17:15.070 --> 00:17:19.090\nmy ISO folder because the ISO like\nWes pointed out I made read only.\n\n378\n00:17:19.090 --> 00:17:19.660\nOkay.\n\n379\n00:17:19.660 --> 00:17:24.960\nSo if the read only, well,\nthat's read only for VMware right?\n\n380\n00:17:24.960 --> 00:17:28.380\nI can go outside of VMware so\nlike in my own laptop here.\n\n381\n00:17:29.520 --> 00:17:32.070\nSo I'm on my laptop and\n\n382\n00:17:32.070 --> 00:17:36.850\nlet just make this a little bit bigger for\nus so we'll be able to see it all.\n\n383\n00:17:36.850 --> 00:17:42.270\nI'm on my laptop and my laptop is a Mac so\nit's Unix based, right?\n\n384\n00:17:42.270 --> 00:17:45.130\nWe've got BSD kind of buried\nunder the hood with it.\n\n385\n00:17:45.130 --> 00:17:47.800\nAnd I've got NFS support built in.\n\n386\n00:17:49.000 --> 00:17:52.820\nMac, Linux, Unix,\nthey've all got NFS built in.\n\n387\n00:17:52.820 --> 00:17:54.120\nWindows is the only one that doesn't.\n\n388\n00:17:54.120 --> 00:17:56.020\nAnd you can get third-party NFS clients,\nand\n\n389\n00:17:56.020 --> 00:17:58.420\nMicrosoft actually has an NFS client\nthey don't support very well.\n\n390\n00:17:58.420 --> 00:18:02.300\nSo all of them are capable of connecting\nto NFS shares one way or another.\n\n391\n00:18:02.300 --> 00:18:06.320\nSo what I can do is right here on\nmy MAC I can get connected and\n\n392\n00:18:06.320 --> 00:18:09.120\nI can copy the ISOs in and\nthen they'll be available.\n\n393\n00:18:09.120 --> 00:18:16.980\nSo back here if I go,\nlet me go back to my ISO data store.\n\n394\n00:18:16.980 --> 00:18:19.550\nSo I'm gonna find my ISO\ndata store buried in here.\n\n395\n00:18:19.550 --> 00:18:22.780\nAnd let's see if I can crash my UI again.\n\n396\n00:18:22.780 --> 00:18:25.020\nSo, [LAUGH] I'm gonna go\ninto the ISO data store.\n\n397\n00:18:25.020 --> 00:18:27.690\nHere it is, and looking at it,\nI can see it's empty, right?\n\n398\n00:18:27.690 --> 00:18:29.270\nThere's no files in here.\n\n399\n00:18:29.270 --> 00:18:32.030\nAnd so on my Mac,\nI'm gonna copy some files in.\n\n400\n00:18:32.030 --> 00:18:34.720\nAnd so the first thing I need to do is,\nI need to make a directory for it.\n\n401\n00:18:34.720 --> 00:18:41.790\nSo, I'm gonna create a folder on\nmy hard drive that I can mount to.\n\n402\n00:18:41.790 --> 00:18:45.660\nAnd I've done this before, so\nI've already got the folder, so all right.\n\n403\n00:18:45.660 --> 00:18:48.630\nSo now I just need to\nbasically mount to it.\n\n404\n00:18:48.630 --> 00:18:51.950\nSo what I'm gonna do is\ndo a quick-mount and\n\n405\n00:18:51.950 --> 00:18:54.360\nI'm gonna tell it that I'm\nmounting to an NFS store.\n\n406\n00:18:54.360 --> 00:18:57.502\nSo I'll do a -t nfs.\n\n407\n00:18:57.502 --> 00:19:01.000\nOn a Unix box, I wouldn't have to do this,\nif I was on Linux for example.\n\n408\n00:19:01.000 --> 00:19:03.220\nBut on a Mac, I need to reserve the port.\n\n409\n00:19:03.220 --> 00:19:04.860\nMacs do weird things with network ports.\n\n410\n00:19:04.860 --> 00:19:09.270\nSo I need to do a port reservation, and\nI'm gonna tell it to do it read write.\n\n411\n00:19:09.270 --> 00:19:12.890\nSo I'm gonna create a read write\nconnection to that server.\n\n412\n00:19:12.890 --> 00:19:16.960\nAnd so now I'm just gonna put in\nthe server and the path to that folder.\n\n413\n00:19:16.960 --> 00:19:21.790\nAnd I know my head is gonna get on top\nof this, but let me just punch that in.\n\n414\n00:19:24.040 --> 00:19:27.772\nAnd it's gonna word wrap on me here but\nbasically pointing to that server and\n\n415\n00:19:27.772 --> 00:19:28.426\nthe folder.\n\n416\n00:19:28.426 --> 00:19:33.890\nAnd I'm gonna mount that to this folder\non my hard drive like that, okay.\n\n417\n00:19:33.890 --> 00:19:40.687\nSo now on my hard drive,\nI've got this folder that,\n\n418\n00:19:40.687 --> 00:19:44.760\nlet me elevate my\nprivileges here real quick.\n\n419\n00:19:44.760 --> 00:19:45.922\nI'm bumping into permission issues.\n\n420\n00:19:45.922 --> 00:19:46.677\nThere we go.\n\n421\n00:19:46.677 --> 00:19:49.251\nAll right.\nSo now I'm in that folder where I just\n\n422\n00:19:49.251 --> 00:19:52.440\nmounted into and\nI'm connected to that NFS share.\n\n423\n00:19:52.440 --> 00:19:57.375\nNow I can just copy files right into here,\nand they'll be in the NFS share.\n\n424\n00:19:57.375 --> 00:20:00.415\nSo if I go to, let's see,\nI think I've got some.\n\n425\n00:20:00.415 --> 00:20:06.390\nActually I think I've got an external\nhard drive attached that has what I want.\n\n426\n00:20:06.390 --> 00:20:06.890\nYeah.\n\n427\n00:20:08.110 --> 00:20:08.850\nThere we go.\n\n428\n00:20:08.850 --> 00:20:10.760\nI always keep a handful\nof ISOs available for\n\n429\n00:20:10.760 --> 00:20:12.560\noperating systems that I want to install.\n\n430\n00:20:12.560 --> 00:20:16.310\nActually, I want a minimal\ninstall is what I want.\n\n431\n00:20:16.310 --> 00:20:19.880\nLet me get, hm.\n\n432\n00:20:25.410 --> 00:20:28.767\nIf I can spell my own name right I guess\nthat's gonna help us a little bit.\n\n433\n00:20:30.693 --> 00:20:31.300\nThere we go.\n\n434\n00:20:31.300 --> 00:20:39.300\nI wanna copy this CentOS minimal install,\nI'm gonna copy that into the NFS share.\n\n435\n00:20:39.300 --> 00:20:43.510\nSo I'm copying it, and what's going on now\nis my Mac is copying it over the network\n\n436\n00:20:43.510 --> 00:20:45.270\nand into that NFS share.\n\n437\n00:20:45.270 --> 00:20:47.950\nAnd it's gonna copy it over,\nand once it's in the NFS share.\n\n438\n00:20:47.950 --> 00:20:49.720\nI can go back to VMware and\nrefresh the screen.\n\n439\n00:20:49.720 --> 00:20:51.190\nAnd it'll show up.\n\n440\n00:20:51.190 --> 00:20:53.080\nIt's read only in VMware.\n\n441\n00:20:53.080 --> 00:20:56.880\nBut on my Mac it's read/write and I can\ncopy the stuff because I knew how to get\n\n442\n00:20:56.880 --> 00:21:00.150\ninto it and get it mounted and\nI'm on the authorized list to connect.\n\n443\n00:21:00.150 --> 00:21:02.288\nSo, there you go it's connecting over now.\n\n444\n00:21:02.288 --> 00:21:05.330\nAgain cuz I'm on a Mac it's trying to\ndo this extended attribute garbage.\n\n445\n00:21:05.330 --> 00:21:06.080\nI can ignore that.\n\n446\n00:21:06.080 --> 00:21:09.590\nThat wouldn't happen on a Linux box or\non a Windows box, that's a Mac thing.\n\n447\n00:21:09.590 --> 00:21:13.670\nBut now I can go and\nstart to copy other disks,\n\n448\n00:21:13.670 --> 00:21:15.540\nmaybe the ones that\nare a little bit larger.\n\n449\n00:21:15.540 --> 00:21:17.650\nThat was a short one,\nI wanted to copy a fast one here so\n\n450\n00:21:17.650 --> 00:21:19.900\nwe can get it done in\na reasonable amount of time.\n\n451\n00:21:19.900 --> 00:21:24.080\nBut maybe I wanna have a full version\nof CentOS, or Windows server 2012.\n\n452\n00:21:24.080 --> 00:21:26.641\nFor example, I might wanna copy that one.\n\n453\n00:21:26.641 --> 00:21:31.296\nSo I'm gonna copy Windows server 2012, and\n\n454\n00:21:31.296 --> 00:21:35.278\nI'm gonna copy that to /private/nfs.\n\n455\n00:21:35.278 --> 00:21:38.290\nAnd I'll get that one copying too.\n\n456\n00:21:38.290 --> 00:21:39.450\nThat's gonna take a little while.\n\n457\n00:21:39.450 --> 00:21:42.170\nAnd so while we're waiting on\nthat I'm gonna jump back here and\n\n458\n00:21:42.170 --> 00:21:44.040\nthat data store still shows as empty.\n\n459\n00:21:44.040 --> 00:21:47.010\nBut you'll see I've got a little\nrefresh button parked over here and\n\n460\n00:21:47.010 --> 00:21:49.900\nI can refresh it, and there we go.\n\n461\n00:21:49.900 --> 00:21:52.990\nI see that CentOS image\nthat I copied over, and\n\n462\n00:21:52.990 --> 00:21:55.630\nI see the Windows Server image\nis copying over right now.\n\n463\n00:21:55.630 --> 00:21:57.390\nSo now these ISOs are available.\n\n464\n00:21:57.390 --> 00:22:00.850\nAnd if I've mounted this NFS\nshare to more than one host,\n\n465\n00:22:00.850 --> 00:22:03.730\nall of my hosts now have\naccess to these CDs.\n\n466\n00:22:03.730 --> 00:22:05.590\nAnd so when I have a virtual machine,\n\n467\n00:22:06.590 --> 00:22:08.750\nwhich I don't think I have any\nvirtual machines right now.\n\n468\n00:22:08.750 --> 00:22:11.460\nBut when I create a new virtual machine,\nlet's say I want to create a web server.\n\n469\n00:22:12.690 --> 00:22:16.540\nSo I can come in here and\ncreate a new virtual machine and\n\n470\n00:22:16.540 --> 00:22:21.030\nI'll just call it or something like that,\nnothing too creative.\n\n471\n00:22:21.030 --> 00:22:22.360\nSo I'm gonna create web01.\n\n472\n00:22:23.570 --> 00:22:26.780\nAnd it's gonna ask where to put\nit I'll put it on ESX host 01.\n\n473\n00:22:26.780 --> 00:22:33.390\nAnd then for my storage I'm gonna mount\nthat into my direct attached data store.\n\n474\n00:22:33.390 --> 00:22:36.150\nWe'll have it local\nbecause that'll be faster.\n\n475\n00:22:36.150 --> 00:22:39.660\nFor compatibility I'll do ESXI6 for\nmy guest OS.\n\n476\n00:22:39.660 --> 00:22:42.080\nThis one is going to Linux.\n\n477\n00:22:42.080 --> 00:22:45.960\nWe're going to do CentOS,\nwas that CentOS a seven or six?\n\n478\n00:22:45.960 --> 00:22:48.050\nDoesn't matter,\nthey all group together here anyway.\n\n479\n00:22:49.230 --> 00:22:51.760\nSoon as I find CentOS on the list,\nthere it went.\n\n480\n00:22:51.760 --> 00:22:52.282\nOops.\n\n481\n00:22:52.282 --> 00:22:56.600\n[LAUGH] Apparently the hard part for me is\ngonna be navigating this drop-down box.\n\n482\n00:22:56.600 --> 00:22:57.286\nThere it goes.\n\n483\n00:22:57.286 --> 00:23:00.594\nI need CentOS 4567 64 bit, perfect.\n\n484\n00:23:00.594 --> 00:23:02.420\nSo, I'm gonna pick that one.\n\n485\n00:23:02.420 --> 00:23:04.830\nAnd eventually I get the hardware.\n\n486\n00:23:04.830 --> 00:23:06.170\nHere we go on the hardware.\n\n487\n00:23:06.170 --> 00:23:08.130\nIf, I want to install an operating system,\n\n488\n00:23:08.130 --> 00:23:10.180\nit's gotta get the operating\nsystem from somewhere.\n\n489\n00:23:10.180 --> 00:23:11.690\nSo, I need to put that CD in.\n\n490\n00:23:11.690 --> 00:23:15.190\nSo, I'm gonna come in here and\nchoose Datastore ISO File, and\n\n491\n00:23:15.190 --> 00:23:17.340\nwhen I do that it's gonna let\nme browse my data stores.\n\n492\n00:23:17.340 --> 00:23:21.660\nAnd I can pick that ISO Datastore and\nit's gonna show the CDs.\n\n493\n00:23:21.660 --> 00:23:24.920\nI can pick that CentOS disc and\nI can say okay and it's gonna\n\n494\n00:23:24.920 --> 00:23:28.890\npop that disc in there and I'm gonna check\nthe connect cuz I need a brewed off of it.\n\n495\n00:23:28.890 --> 00:23:31.920\nI need it to be connected but\nnow I got a central place.\n\n496\n00:23:31.920 --> 00:23:34.180\nI didn't have to go put a cd in a server.\n\n497\n00:23:34.180 --> 00:23:36.460\nI didn't have to copy\nthe IOS image to this host.\n\n498\n00:23:36.460 --> 00:23:38.240\nI might have 1,000 hosts.\n\n499\n00:23:38.240 --> 00:23:41.800\nIf you have 1,000 host you don't want\na 1,000 copies of that CentOS disk.\n\n500\n00:23:41.800 --> 00:23:45.140\nNow I have one copy of the CentOS\ndisk in network share or\n\n501\n00:23:45.140 --> 00:23:46.210\nthe windows disk or whatever.\n\n502\n00:23:46.210 --> 00:23:48.090\nAnd they can all be\naccessed all from here.\n\n503\n00:23:48.090 --> 00:23:53.500\nAnd now when I fire this machine up\nthe first time it's going to boot up and\n\n504\n00:23:53.500 --> 00:23:56.830\nit's gonna to have access to that CD and\nbe able to start the install.\n\n505\n00:23:56.830 --> 00:23:59.240\nI think I gave it to much memory, hang on.\n\n506\n00:23:59.240 --> 00:24:01.650\nI'm gonna run my system out\nof memory if I'm not careful.\n\n507\n00:24:01.650 --> 00:24:04.835\nSo let me lower that memory a bit.\n\n508\n00:24:04.835 --> 00:24:09.562\nI've got a lot of different virtual\nmachines running on my laptop here so\n\n509\n00:24:09.562 --> 00:24:12.283\nwe definitely run the risk of exceeding.\n\n510\n00:24:12.283 --> 00:24:13.084\nWhat's available.\n\n511\n00:24:13.084 --> 00:24:14.442\nSo there we go,\nthat ought to be a little better.\n\n512\n00:24:14.442 --> 00:24:19.479\nNow I can power this thing on and when I\npower it on it is going to connect up to\n\n513\n00:24:19.479 --> 00:24:25.340\nthat NFS store, it's gonna mount that\nISO imagem and it's gonna boot it up.\n\n514\n00:24:25.340 --> 00:24:27.120\nSo I'm gonna give that just\na moment while it powers on.\n\n515\n00:24:27.120 --> 00:24:29.668\nThere it goes.\n\n516\n00:24:29.668 --> 00:24:33.230\nAnd I'm gonna connect to the console as\nsoon as I find the open console option.\n\n517\n00:24:34.740 --> 00:24:35.925\nHere it goes, so it's booting up.\n\n518\n00:24:35.925 --> 00:24:39.070\nAnd there it goes,\nbooting the CentOS installer and so\n\n519\n00:24:39.070 --> 00:24:42.130\nnow we can get right in here and\nwe can install our upgrade.\n\n520\n00:24:42.130 --> 00:24:43.480\nAnd I'm running off that data store.\n\n521\n00:24:43.480 --> 00:24:45.490\nSo, nice central place to\nhave those ISO images.\n\n522\n00:24:45.490 --> 00:24:47.320\n>> That's awesome,\nonce you've got it set up.\n\n523\n00:24:47.320 --> 00:24:50.060\nA lot more convenient,\nI can say, for sure.\n\n524\n00:24:50.060 --> 00:24:53.744\nNow, one of the things I've noticed,\nDon, is an interface's dynamic\n\n525\n00:24:53.744 --> 00:24:54.530\n>> [LAUGH]\n\n526\n00:24:54.530 --> 00:24:56.160\n>> But it certainly isn't automatic.\n\n527\n00:24:56.160 --> 00:24:57.890\nYou have to hit that refresh button a lot.\n\n528\n00:24:57.890 --> 00:25:02.310\nIs there a way you can make that\na little bit more simplistic or easier?\n\n529\n00:25:02.310 --> 00:25:04.340\nYeah, it's kind of frustrating.\n\n530\n00:25:04.340 --> 00:25:05.830\nYou're constantly having to refresh.\n\n531\n00:25:05.830 --> 00:25:09.040\nAny time you add an adapter, any time you\nadd drives, any time you add a data store.\n\n532\n00:25:09.040 --> 00:25:13.040\nAny time you add files to the data store,\nyou're constantly having to refresh.\n\n533\n00:25:13.040 --> 00:25:15.490\nThere is a way we can try to make\nthat a little bit easier, and\n\n534\n00:25:15.490 --> 00:25:17.250\nit does show up on the exam.\n\n535\n00:25:17.250 --> 00:25:20.450\nWe have these things called Storage\nFilters that are built in the vCenter.\n\n536\n00:25:20.450 --> 00:25:22.300\nAnd I'm gonna be honest with you guys,\n\n537\n00:25:22.300 --> 00:25:24.940\nyou're never gonna use\nstorage filters in real life.\n\n538\n00:25:24.940 --> 00:25:28.320\nThe refresh is inconvenient but\nyou just do it and it's done.\n\n539\n00:25:28.320 --> 00:25:29.650\nIt's not that big of a deal.\n\n540\n00:25:29.650 --> 00:25:33.580\nBut there's storage filters we can modify\nthat change the way that storage is\n\n541\n00:25:33.580 --> 00:25:35.490\nhandled by vCenter.\n\n542\n00:25:35.490 --> 00:25:39.775\nIt's hard to do these filters, but there\nis a filter we can put in place that says\n\n543\n00:25:39.775 --> 00:25:43.880\nanytime a management change happens,\nautomatically refresh storage.\n\n544\n00:25:43.880 --> 00:25:47.450\nWhat this is gonna do, is it's gonna make\nit where every time you make a change,\n\n545\n00:25:47.450 --> 00:25:50.740\nit automatically refreshes, which creates\na little bit of a performance hit and\n\n546\n00:25:50.740 --> 00:25:53.390\nmost of the time you are not making\nstorage change so it's kind of wasteful\n\n547\n00:25:53.390 --> 00:25:56.750\nbut it can make it automatic and it does\nturn up on the exam for whatever reason.\n\n548\n00:25:56.750 --> 00:25:58.880\nSo it's one of those\nthings that I tell you,\n\n549\n00:25:58.880 --> 00:26:01.750\nyou are never going to use it in\nreal life, the one time you use\n\n550\n00:26:01.750 --> 00:26:04.440\nit will be on the exam to get the question\nright so we definitely need to know it but\n\n551\n00:26:04.440 --> 00:26:07.980\nlet me show you those storage filters and\nthen we will kind of wrap up from there.\n\n552\n00:26:07.980 --> 00:26:09.460\nIn the vSphere Web Client,\n\n553\n00:26:09.460 --> 00:26:13.120\nwhat we are going to do is we're\ngonna go to our vCenter Server so\n\n554\n00:26:13.120 --> 00:26:16.370\nlet me switch back over to host and\nclusters and go to my vCenter Server.\n\n555\n00:26:16.370 --> 00:26:17.780\nI'm not choosing a host.\n\n556\n00:26:17.780 --> 00:26:19.590\nI'm choosing the vCenter Server itself.\n\n557\n00:26:19.590 --> 00:26:23.230\nSo for me that's this WIN-SERVER01\nthat I'm running vCenter on.\n\n558\n00:26:23.230 --> 00:26:27.900\nYou're gonna choose that and\nyou're gonna go over here to Manage and\n\n559\n00:26:27.900 --> 00:26:31.340\nunder Manage, you're gonna go\nto Advanced Settings, all right.\n\n560\n00:26:31.340 --> 00:26:34.240\nWe messed with a lot of these settings,\nbut never Advanced Settings.\n\n561\n00:26:34.240 --> 00:26:36.780\nWhat Advanced Settings does is\nit shows you every setting for\n\n562\n00:26:36.780 --> 00:26:40.255\nthe system,\neven ones that don't have a GUI element.\n\n563\n00:26:40.255 --> 00:26:43.595\nThere's some things you can configure that\njust aren't in the graphical interface and\n\n564\n00:26:43.595 --> 00:26:44.765\nthey're all right here.\n\n565\n00:26:44.765 --> 00:26:49.195\nSo what you're seeing are like\nregistry key entries in Windows,\n\n566\n00:26:49.195 --> 00:26:53.452\nis we're seeing all these possible things\nthat we can go in and manually edit.\n\n567\n00:26:53.452 --> 00:26:55.027\nWell, if you think this is advanced,\n\n568\n00:26:55.027 --> 00:26:59.382\nthere's even more options\nthat don't even show up here.\n\n569\n00:26:59.382 --> 00:27:02.562\nSo these are like the advanced\nadvanced options.\n\n570\n00:27:02.562 --> 00:27:06.282\nIf I want the storage to automatically\nrefresh every time I make a management\n\n571\n00:27:06.282 --> 00:27:10.272\nchange, well,\nI can create an advanced advanced option.\n\n572\n00:27:10.272 --> 00:27:12.972\n[LAUGH] That's not the official term,\nI'm gonna coin that one.\n\n573\n00:27:12.972 --> 00:27:16.772\nBut we can create an advanced option here\nthat says, manually do that refresh, and\n\n574\n00:27:16.772 --> 00:27:18.230\nit's called a filter.\n\n575\n00:27:18.230 --> 00:27:19.700\nIt's not actually filtering anything out.\n\n576\n00:27:19.700 --> 00:27:21.710\nBut the original use for it was to filter.\n\n577\n00:27:21.710 --> 00:27:23.410\nYou could actually hide certain things.\n\n578\n00:27:23.410 --> 00:27:26.100\nSo for example if I go to Edit This,\n\n579\n00:27:26.100 --> 00:27:30.795\nwhen you edit you'll see all the existing\nfilters and you can add in your own.\n\n580\n00:27:30.795 --> 00:27:35.483\nAnd when you add in your own,\nthere's a couple that show up in the exam,\n\n581\n00:27:35.483 --> 00:27:37.872\nlet me just kinda run through them.\n\n582\n00:27:37.872 --> 00:27:45.990\nConfig.vpxd.filter.vms Filter,\nthat guy right there.\n\n583\n00:27:45.990 --> 00:27:51.470\nIf you type that in and set the value to\ntrue, right, it's true or false,on or off.\n\n584\n00:27:51.470 --> 00:27:56.030\nIf I set that to true,\nwhat that gonna do us its going to hide.\n\n585\n00:27:56.030 --> 00:27:59.120\nIt should be vmfsFilter, there we go.\n\n586\n00:27:59.120 --> 00:28:02.200\nIt's gonna hide VMFS stores.\n\n587\n00:28:02.200 --> 00:28:05.660\nI won't see my VMFS data\nstores anymore okay.\n\n588\n00:28:05.660 --> 00:28:08.400\nI would see NFS but I wouldn't see VMFS.\n\n589\n00:28:08.400 --> 00:28:10.630\nNow what's the value in that?\n\n590\n00:28:10.630 --> 00:28:11.360\nThere really isn't.\n\n591\n00:28:11.360 --> 00:28:14.280\nI can't think of a value for it but\nwe need to know that it exist.\n\n592\n00:28:14.280 --> 00:28:16.470\nThat's an example of how\nthese filters kind of work.\n\n593\n00:28:16.470 --> 00:28:18.760\nAnd it's not the only one,\nwe could do an RDM filter.\n\n594\n00:28:20.220 --> 00:28:21.990\nAnd that would hide the raw devices.\n\n595\n00:28:21.990 --> 00:28:24.740\nIf you've ever had a virtual machine that\nhad a raw hard drive attached to it,\n\n596\n00:28:24.740 --> 00:28:25.900\nwe could hide those.\n\n597\n00:28:25.900 --> 00:28:27.190\nIf you're not gonna use that feature,\n\n598\n00:28:27.190 --> 00:28:29.150\nyou can just hide it, and\nnow it won't show up.\n\n599\n00:28:29.150 --> 00:28:31.660\nAnd that's one you might actually\nuse if you're trying to actively\n\n600\n00:28:31.660 --> 00:28:32.379\nstop people from using it.\n\n601\n00:28:33.530 --> 00:28:34.050\nUsing that.\n\n602\n00:28:34.050 --> 00:28:36.870\nWe can do, this is interesting,\n\n603\n00:28:36.870 --> 00:28:43.190\nthe same host and transports filter.\n\n604\n00:28:43.190 --> 00:28:44.870\nIf we turn that filter on,\n\n605\n00:28:44.870 --> 00:28:50.020\nif there is any incompatibility with\nthe storage at all, it hides it.\n\n606\n00:28:50.020 --> 00:28:53.320\nIf it's a unsupported storage adapter,\nan unsupported hard drive,\n\n607\n00:28:53.320 --> 00:28:57.000\nif the configuration's been changed\nto make it unsupported, it hides it.\n\n608\n00:28:57.000 --> 00:29:00.920\nThis is a great way to insure that\npeople only do configurations\n\n609\n00:29:00.920 --> 00:29:01.885\nthat VMware can help with.\n\n610\n00:29:01.885 --> 00:29:04.430\nCuz there's nothing worse than\ncalling VMware on the phone,\n\n611\n00:29:04.430 --> 00:29:06.450\nyou've got an active support contract and\nthey tell you,\n\n612\n00:29:06.450 --> 00:29:09.860\nwe're sorry you configured this in a way\nthat's not supported, we can't help you.\n\n613\n00:29:09.860 --> 00:29:11.620\nTo pay all of that money and\nthen not get support, so\n\n614\n00:29:11.620 --> 00:29:16.670\nwe can turn this on and that'll basically\nhide anything that's not compatible.\n\n615\n00:29:16.670 --> 00:29:18.890\nSo if we do something by\naccident we'll see it disappear.\n\n616\n00:29:18.890 --> 00:29:21.410\nI think it's kind of annoying but\nyou can do it.\n\n617\n00:29:21.410 --> 00:29:24.216\nAll right but the one that I really wanna\nhighlight, the one that is actually useful\n\n618\n00:29:24.216 --> 00:29:32.994\nis config.vpxd.filter.hostRescanFilter,\nlike that.\n\n619\n00:29:32.994 --> 00:29:38.210\nThe hostRescanFilter we set that to true,\nnow any time we make a management\n\n620\n00:29:38.210 --> 00:29:43.530\nchange on our storage, our data stores or\nwhatever, it's gonna do a rescan.\n\n621\n00:29:43.530 --> 00:29:46.180\nSo this is going to cause\nit to rescan automatically.\n\n622\n00:29:46.180 --> 00:29:52.340\nThis'll do everything except for\nnew files in an NFS store.\n\n623\n00:29:52.340 --> 00:29:55.910\nWhen new files are created in a NFS store,\nVMware has no way to now that happened.\n\n624\n00:29:55.910 --> 00:29:58.260\nThere's no trigger event cuz I\nuploaded those files from my Mac.\n\n625\n00:29:58.260 --> 00:29:59.930\nHow does it know that happened?\n\n626\n00:29:59.930 --> 00:30:00.940\nIt doesn't know, right.\n\n627\n00:30:00.940 --> 00:30:05.200\nSo there's no way for it to know and so\nthere's no way to trigger it but for\n\n628\n00:30:05.200 --> 00:30:09.670\neverything else, if I go and rename a data\nstore, if i go in and add an adapter,\n\n629\n00:30:09.670 --> 00:30:12.790\nif i go in and do anything like that\nit'll automatically do the rescan for me.\n\n630\n00:30:12.790 --> 00:30:15.969\nI was probably gonna rescan anyway,\nthis makes it a little bit easier and\n\n631\n00:30:15.969 --> 00:30:16.670\nautomated.\n\n632\n00:30:16.670 --> 00:30:19.880\nSo these filters are not easy to use.\n\n633\n00:30:19.880 --> 00:30:22.880\nFirst of all, you've gotta remember,\nyou're not gonna remember that, so\n\n634\n00:30:22.880 --> 00:30:26.510\nyou gotta go Google it, you gotta find\nthe value, you gotta put it in here,\n\n635\n00:30:26.510 --> 00:30:28.920\nyou set it to true, and now it's in place.\n\n636\n00:30:28.920 --> 00:30:31.750\nFortunately, it is set on the V-center\nserver, so it kind-of applies to all\n\n637\n00:30:31.750 --> 00:30:34.740\nthe different hosts that you have, but it\nis something you have to remember to do.\n\n638\n00:30:34.740 --> 00:30:37.180\nPersonally, I just remember\nto hit refresh, but\n\n639\n00:30:37.180 --> 00:30:41.110\nthat's partly because I don't I\ndon't work for just one company.\n\n640\n00:30:41.110 --> 00:30:45.000\nIf I go to multiple companies I don't\nknow if they got this set or not.\n\n641\n00:30:45.000 --> 00:30:47.450\nSo I'm in the habit of always\nhitting refresh, right?\n\n642\n00:30:47.450 --> 00:30:51.190\nBut if you are the VM administrator for\nyour company and you just support one\n\n643\n00:30:51.190 --> 00:30:54.040\nenvironment and you want to set this and\nmake it easier, you certainly can.\n\n644\n00:30:54.040 --> 00:30:55.700\nJust know that every time\nyou hire somebody new,\n\n645\n00:30:55.700 --> 00:30:58.270\nyou got to tell me you made that change,\nyou've changed that default behavior.\n\n646\n00:30:58.270 --> 00:31:01.970\nSo it's not It sounds like a big fun\nof but it does trap on the exam.\n\n647\n00:31:01.970 --> 00:31:03.551\n>> A lot of great information,\nDon, on the data stores.\n\n648\n00:31:03.551 --> 00:31:04.160\nWe appreciate that.\n\n649\n00:31:04.160 --> 00:31:07.390\nLooking at the time though it looks\nlike we are coming to the end of another\n\n650\n00:31:07.390 --> 00:31:10.605\nepisode but before we do, do you have any\nother additional information on setting up\n\n651\n00:31:10.605 --> 00:31:12.880\nyour data stores inside a vSphere?\n\n652\n00:31:12.880 --> 00:31:16.040\n>> The main thing to be aware of\nthis things is performance right.\n\n653\n00:31:16.040 --> 00:31:18.650\nNot all data stores are created equal.\n\n654\n00:31:18.650 --> 00:31:23.090\nThat a VMFS data store, for the most part,\nis gonna perform better than an NFS store.\n\n655\n00:31:23.090 --> 00:31:24.650\nThat a fibre channel or\n\n656\n00:31:24.650 --> 00:31:28.010\ndirect attached store is going\nto perform better than I-Scuzzy.\n\n657\n00:31:28.010 --> 00:31:31.880\nDirect Attached normally gives you the\nbest performance, but with Fiber Channel\n\n658\n00:31:31.880 --> 00:31:34.899\nyou can actually have more drive, so it\nmight actually get you a higher read IO.\n\n659\n00:31:36.230 --> 00:31:39.480\nWe're gonna talk in another\nepisode about storage I/O control.\n\n660\n00:31:39.480 --> 00:31:43.290\nIf you watched the network episode,\nwe had network I/O control, or NIOC.\n\n661\n00:31:43.290 --> 00:31:45.340\nStorage has that too, SIOC.\n\n662\n00:31:45.340 --> 00:31:48.230\nThose are advanced settings on the data\nstore, but they apply to all of them, so\n\n663\n00:31:48.230 --> 00:31:49.260\nI didn't cover it here.\n\n664\n00:31:49.260 --> 00:31:50.430\nWe'll cover it in another episode.\n\n665\n00:31:50.430 --> 00:31:54.320\nSo there are some advanced features that\nwe'll get to that are actually useful.\n\n666\n00:31:54.320 --> 00:31:57.770\nBut what we've seen here are really\nthe basics needed to create\n\n667\n00:31:57.770 --> 00:32:02.190\nDirect Attached Data Stores, Fiber Channel\nData Stores, iSCSI Data Stores and\n\n668\n00:32:02.190 --> 00:32:02.980\nNFS Data Stores.\n\n669\n00:32:02.980 --> 00:32:05.650\nFour different data store types\nthat can be created here.\n\n670\n00:32:05.650 --> 00:32:08.356\nThe only other type we haven't talked\nabout are the Distributed Data Stores,\n\n671\n00:32:08.356 --> 00:32:09.750\nthe ones we use in clustering.\n\n672\n00:32:09.750 --> 00:32:11.610\nAnd we'll see those in\nthe clustering episode.\n\n673\n00:32:11.610 --> 00:32:14.220\n>> Well, Don, as always it's a pleasure\nto have you in the studio with us and\n\n674\n00:32:14.220 --> 00:32:15.910\nit's a pleasure to have\nyou the viewers watching.\n\n675\n00:32:15.910 --> 00:32:18.590\nSigning off for ITProTV,\nI've been your host Wes Bryan.\n\n676\n00:32:18.590 --> 00:32:21.382\n>> And I'm Don Pezet\n>> And we'll see you next time.\n\n677\n00:32:21.382 --> 00:32:29.410\n[MUSIC]\n\n",
          "vimeoId": "169100591"
        },
        {
          "description": "In this episode, Wes and Don demonstrate storage I/O control or SIOC. They talk about concepts like Dynamic Queue Depth Throttling, Network I/O Control, the requirements and configurations",
          "length": "1746",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-3-storage_io_control-062116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-3-storage_io_control-062116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-3-storage_io_control-062116-1-sm.jpg",
          "title": "Storage IO Control",
          "transcript": "WEBVTT\n\n1\n00:00:00.016 --> 00:00:10.016\n[MUSIC]\n\n2\n00:00:11.668 --> 00:00:14.330\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.330 --> 00:00:16.010\nI'm your host, Wes Bryan, and\n\n4\n00:00:16.010 --> 00:00:19.030\nin today's episode were coming\nback at you with more VMWare.\n\n5\n00:00:19.030 --> 00:00:21.980\nThat's right,\nVMware certified professional version 6.\n\n6\n00:00:21.980 --> 00:00:24.830\nJoining me in the studios today is\nnone other than Mister Don Pezet.\n\n7\n00:00:24.830 --> 00:00:26.000\nDon, how you doing, sir?\n\n8\n00:00:26.000 --> 00:00:29.320\n>> I'm doing swell, Wes,\nready to dive right back into VMware.\n\n9\n00:00:29.320 --> 00:00:30.250\nAnd in this episode,\n\n10\n00:00:30.250 --> 00:00:34.100\nwe're gonna be focusing in on\nESXI disk performance, right?\n\n11\n00:00:34.100 --> 00:00:37.220\nAnd in particular,\nthe storage I/O control,\n\n12\n00:00:37.220 --> 00:00:39.770\nor SIOC feature inside of vSphere.\n\n13\n00:00:39.770 --> 00:00:44.120\nNow, in previous versions of Vcenter,\nVsphere,\n\n14\n00:00:44.120 --> 00:00:48.340\nESX, we had features for\nhelping to control disk access.\n\n15\n00:00:48.340 --> 00:00:51.672\nAnd it's very similar to network access,\nwhere you have network I/O control,\n\n16\n00:00:51.672 --> 00:00:53.965\nhere we have storage I/O control,\nsame kind of idea.\n\n17\n00:00:53.965 --> 00:00:57.150\nI/O is input and output.\n\n18\n00:00:57.150 --> 00:00:59.740\nOn a network, that's incoming and\noutgoing bandwidth.\n\n19\n00:00:59.740 --> 00:01:03.570\nBut on a disk, what we're talking\nabout are reads and writes.\n\n20\n00:01:03.570 --> 00:01:06.210\nReads are when we're getting\noutputs from a disk,\n\n21\n00:01:06.210 --> 00:01:09.400\nand writes are where we're inputting\nto a disk and putting data onto it.\n\n22\n00:01:09.400 --> 00:01:14.611\nSo when you have input and output, that's\njust activity you generate on your disk.\n\n23\n00:01:14.611 --> 00:01:18.270\nAnd disk is typically\nthe bottle next on a system.\n\n24\n00:01:18.270 --> 00:01:21.080\nSo when you have performance issues,\nit you usually comes down to that\n\n25\n00:01:21.080 --> 00:01:23.895\nbecause you have more than just one\nvirtual machine up and running on a host.\n\n26\n00:01:23.895 --> 00:01:28.350\nThey're all trying to access the same\nphysical desk and you get disk contention.\n\n27\n00:01:28.350 --> 00:01:30.470\nSo we need a way to regulate that.\n\n28\n00:01:30.470 --> 00:01:33.403\nAnd there was a way in\nprevious versions of vSphere.\n\n29\n00:01:33.403 --> 00:01:35.200\nThis is not a new thing.\n\n30\n00:01:35.200 --> 00:01:38.093\nSIOC, I feel like it was\nintroduced in 5.1 or 5.5, but\n\n31\n00:01:38.093 --> 00:01:40.210\nit was introduced in\none of those versions.\n\n32\n00:01:40.210 --> 00:01:43.370\nPrior to that,\nwe had a different technology.\n\n33\n00:01:43.370 --> 00:01:47.992\nThere was a technology called, I'd have to\nlook at my notes because I don't remember,\n\n34\n00:01:47.992 --> 00:01:49.950\nDynamic Q Depth throttling.\n\n35\n00:01:49.950 --> 00:01:52.080\nSo Dynamic Q Depth throttling.\n\n36\n00:01:52.080 --> 00:01:56.250\nAnd what that technology did was\nsomewhat mediocre, all right?\n\n37\n00:01:56.250 --> 00:02:02.470\nThe way it worked was that your host,\nyour ESXI host, would watch its storage.\n\n38\n00:02:02.470 --> 00:02:03.730\nSo, if you think about storage,\n\n39\n00:02:03.730 --> 00:02:05.486\nit's usually gonna be a SAN,\na storage area network.\n\n40\n00:02:05.486 --> 00:02:08.400\nYou're gonna have an HBA,\na host bus adapter,\n\n41\n00:02:08.400 --> 00:02:11.571\nwhich acts as the disk controller\nthat let's you talk to the disk.\n\n42\n00:02:11.571 --> 00:02:15.280\nAnd as your virtual machines\nwrite to that controller,\n\n43\n00:02:15.280 --> 00:02:19.550\nESXI really just kinda oes a first\nin first out, fhe first come,\n\n44\n00:02:19.550 --> 00:02:23.330\nfirst serve type mode,\nwhere people sharing that same connection.\n\n45\n00:02:23.330 --> 00:02:28.680\nWell, if enough virtual machines try to\naccess the same disk at the same time,\n\n46\n00:02:28.680 --> 00:02:30.230\nwe can get contention.\n\n47\n00:02:30.230 --> 00:02:31.590\nAnd when you have contention,\n\n48\n00:02:31.590 --> 00:02:35.630\nwhat happens is ESXI has to start\nqueuing up the disk access.\n\n49\n00:02:35.630 --> 00:02:39.590\nSo, if virtual machine one is writing\nto the disk, and virtual machine\n\n50\n00:02:39.590 --> 00:02:43.910\ntwo tries to write to the disk also,\nwe have to take the writes that virtual\n\n51\n00:02:43.910 --> 00:02:47.880\nmachine two is doing and stick it up in\nRAM, just kind of park it into a queue.\n\n52\n00:02:47.880 --> 00:02:49.980\nAnd then,\nvirtual machine one can finish, and\n\n53\n00:02:49.980 --> 00:02:52.120\nwhen it's done now virtual\nmachine two can write.\n\n54\n00:02:52.120 --> 00:02:54.320\nOkay, we just take what's in the queue and\nwe write it.\n\n55\n00:02:54.320 --> 00:02:54.930\nThe problem is,\n\n56\n00:02:54.930 --> 00:02:59.380\nthe more virtual machines you have,\nthe more data ends up in that queue.\n\n57\n00:02:59.380 --> 00:03:04.360\nSo what happens if the SAN,\nor whatever our storage is,\n\n58\n00:03:04.360 --> 00:03:08.030\nwhatever our datastore is,\nif our datastore gets saturated?\n\n59\n00:03:08.030 --> 00:03:10.580\nIt's just,\nit's overwhelmed with disk activity, and\n\n60\n00:03:10.580 --> 00:03:12.580\nit can't get to what we're doing.\n\n61\n00:03:12.580 --> 00:03:18.220\nWell, the way that the technology worked\npreviously is that ESXI would detect that,\n\n62\n00:03:18.220 --> 00:03:21.200\nit would see that the disk was\ngetting overwhelmed, and so\n\n63\n00:03:21.200 --> 00:03:22.740\nthen it would kick in throttling.\n\n64\n00:03:22.740 --> 00:03:25.808\nAnd the way that throttling worked is\nthat, globally across the entire ESXI box,\n\n65\n00:03:25.808 --> 00:03:28.394\nso all the virtual machines,\nit would cut their disk I/O by 50%.\n\n66\n00:03:28.394 --> 00:03:36.540\nIt would cut it in half, just right off\nthe bat we'll slash everybody by 50%.\n\n67\n00:03:36.540 --> 00:03:43.054\nAnd that way the disk can catch up,\ncan kind of wheedle down that queue.\n\n68\n00:03:43.054 --> 00:03:46.994\nAnd once it gets caught up,\nthen we go from 50% back up to 100% and\n\n69\n00:03:46.994 --> 00:03:49.440\nwe let the machines function again.\n\n70\n00:03:49.440 --> 00:03:53.960\nBut during that time, everybody's\ndisc performance is cut in half, and\n\n71\n00:03:53.960 --> 00:03:56.610\nthat means everybody\nruns a little bit slower.\n\n72\n00:03:56.610 --> 00:04:00.180\nNow, hopefully,\nyou've sized your environment just right,\n\n73\n00:04:00.180 --> 00:04:02.800\nthat your SAN is able to handle\nthe workload that you've got.\n\n74\n00:04:02.800 --> 00:04:06.460\nIf you're generating too much workload,\nyou may need to introduce more HBA's, or\n\n75\n00:04:06.460 --> 00:04:09.890\nmore SAN's, more disks,\nwhatever it is that you need to introduce\n\n76\n00:04:09.890 --> 00:04:14.210\nto create the proper level of bandwidth\nthat you need for your systems.\n\n77\n00:04:14.210 --> 00:04:17.108\nOay, but if you don't,\nanytime the queue gets full,\n\n78\n00:04:17.108 --> 00:04:19.380\nit's gonna slash that bandwidth by half.\n\n79\n00:04:19.380 --> 00:04:22.300\nWell, a lot of people don't like that,\na lot of people don't want that.\n\n80\n00:04:22.300 --> 00:04:27.330\nAnd so, that feature got replaced\nin newer versions of vSphere.\n\n81\n00:04:27.330 --> 00:04:31.550\nIn our newer system we have\nstorage I/O control, SIOC.\n\n82\n00:04:31.550 --> 00:04:34.950\nAnd SIOC gives us really granular control.\n\n83\n00:04:34.950 --> 00:04:37.940\nBut on the exam you may see both,\nso the older technology,\n\n84\n00:04:37.940 --> 00:04:40.530\nyou're not gonna use it anymore,\nright, because it's been replaced.\n\n85\n00:04:40.530 --> 00:04:44.130\nBut just so you can remember for\nthe exam, the older technology is called\n\n86\n00:04:44.130 --> 00:04:49.000\nDynamic Queue Depth Throttling,\nand it is off by default.\n\n87\n00:04:50.200 --> 00:04:53.360\nIf you want, you can still turn it on, and\nthat's what normally shows up on the exam.\n\n88\n00:04:53.360 --> 00:04:56.340\nLet me show you how to turn\nit on if you're a sadist and\n\n89\n00:04:56.340 --> 00:04:57.410\nyou like these old technologies.\n\n90\n00:04:57.410 --> 00:05:00.201\nSo the way you turn it on is\nyou go to your host, right,\n\n91\n00:05:00.201 --> 00:05:02.650\nbecause this is a host thing, right?\n\n92\n00:05:02.650 --> 00:05:03.790\nAnd so, you've gotta go to your host.\n\n93\n00:05:03.790 --> 00:05:08.840\nAnd so, I'm gonna pull up esx-host01,\nand I'm gonna go into Manage and\n\n94\n00:05:08.840 --> 00:05:11.825\nSettings, and\nwe've gotta go to the advanced settings.\n\n95\n00:05:11.825 --> 00:05:14.430\nThere's actually not a GUI element for\nthis one, so\n\n96\n00:05:14.430 --> 00:05:16.860\nI've gotta go to Advanced System Settings.\n\n97\n00:05:16.860 --> 00:05:20.740\nAnd under advanced system settings,\nwhen you go to pull up all the various\n\n98\n00:05:20.740 --> 00:05:25.470\nsettings that are in there, if you hunt\nthrough there, there's a section for disk.\n\n99\n00:05:25.470 --> 00:05:28.680\nAnd so, you'll see a bunch\nof disk entries in here.\n\n100\n00:05:28.680 --> 00:05:31.210\nAnd if you hunt through the disk entries,\nyou're looking for\n\n101\n00:05:31.210 --> 00:05:34.470\nthese two guys right here, okay?\n\n102\n00:05:34.470 --> 00:05:39.250\nDiskQFullSampleSize, and\nDiskQFullThreshold, all right?\n\n103\n00:05:39.250 --> 00:05:41.230\nThe first one's the most important one.\n\n104\n00:05:41.230 --> 00:05:43.080\nIt's set to zero by default.\n\n105\n00:05:43.080 --> 00:05:48.110\nThis is the one that says monitor the disk\nto see if the queue is full, right?\n\n106\n00:05:48.110 --> 00:05:49.080\nMy sample size.\n\n107\n00:05:49.080 --> 00:05:52.610\nHow much data do I gather to evaluate\nwhether the disk is full or not?\n\n108\n00:05:52.610 --> 00:05:56.000\nI mean, not the disk being full,\nbut the disk I/O is full, right?\n\n109\n00:05:56.000 --> 00:06:02.210\nIt set to zero, and that means that\nthe throttling is turned off, all right?\n\n110\n00:06:02.210 --> 00:06:04.780\nIt's not in use, and if you forget,\nyou can look over and\n\n111\n00:06:04.780 --> 00:06:05.620\nactually it doesn't say there.\n\n112\n00:06:05.620 --> 00:06:09.070\nIf you float over it, somewhere in here\nwe get like a little tool tip that\n\n113\n00:06:09.070 --> 00:06:10.160\nhelps us remember what that one is.\n\n114\n00:06:10.160 --> 00:06:14.550\nBut if you edit that setting and\nchange it to a non-zero value,\n\n115\n00:06:14.550 --> 00:06:19.250\nif you make it 1 or higher, now you're\nESXI box will start monitoring that\n\n116\n00:06:19.250 --> 00:06:24.040\ndisk to see if the queues are full.\n\n117\n00:06:24.040 --> 00:06:29.070\nAnd if they are, whenever it's full,\nit then slashes everybody by 50%,\n\n118\n00:06:29.070 --> 00:06:31.260\nglobally, and goes from there.\n\n119\n00:06:31.260 --> 00:06:33.590\nNow, two problems with this.\n\n120\n00:06:33.590 --> 00:06:36.540\nI mean, it all centers around being\nglobal, but the way it implements,\n\n121\n00:06:36.540 --> 00:06:38.000\nthere's two main problems.\n\n122\n00:06:38.000 --> 00:06:43.500\nThe first problem is, it's set on\nthe host, not on the datastore.\n\n123\n00:06:43.500 --> 00:06:46.560\nSo what if I have five\ndifferent datastores, and\n\n124\n00:06:46.560 --> 00:06:52.370\nfour of them are high performance\ndatastores that are on fiber channel SANs?\n\n125\n00:06:52.370 --> 00:06:55.770\nAnd then, I have one more datastore\nthat's an ISCSI piece of junk, and\n\n126\n00:06:55.770 --> 00:06:57.836\nthat's where I keep my ISO images, right?\n\n127\n00:06:57.836 --> 00:07:03.330\nAnd it's the iSCSI one that\nstarts getting bogged down.\n\n128\n00:07:03.330 --> 00:07:07.950\nWell, it's gonna slash everybody by\n50% across all the datastores, even\n\n129\n00:07:07.950 --> 00:07:11.901\nthe high speed fiber channel SAN while\nit waits on the iSCSI to get caught up.\n\n130\n00:07:11.901 --> 00:07:12.820\nIt's a global setting.\n\n131\n00:07:12.820 --> 00:07:16.770\nAnd because it's global,\nit's not terribly effective, right?\n\n132\n00:07:16.770 --> 00:07:20.370\nThe other thing is,\nwhat if I have five virtual machines?\n\n133\n00:07:20.370 --> 00:07:24.105\nOne's a database server, and I really need\nit to have the best disk I/O possible.\n\n134\n00:07:24.105 --> 00:07:28.750\nAnd the others are domain controllers,\nDNS servers, things like that.\n\n135\n00:07:28.750 --> 00:07:31.070\nMaybe they don't need as much disk I/O.\n\n136\n00:07:31.070 --> 00:07:34.560\nWell, the throttling that it puts\nin place is across the board,\n\n137\n00:07:34.560 --> 00:07:37.360\nacross all the virtual machines,\ntreats them all equally.\n\n138\n00:07:37.360 --> 00:07:39.570\nSo we don't get any granular control here.\n\n139\n00:07:39.570 --> 00:07:41.260\nIt treats them all equal.\n\n140\n00:07:41.260 --> 00:07:44.260\nEven within one virtual machine,\ninside of a single virtual machine,\n\n141\n00:07:44.260 --> 00:07:45.320\nI might have three drives.\n\n142\n00:07:45.320 --> 00:07:47.720\nOperating system,\ntransactional logs, and database.\n\n143\n00:07:47.720 --> 00:07:48.900\nSomething like that.\n\n144\n00:07:48.900 --> 00:07:51.330\nIt's gonna treat all three\ndrives the same way.\n\n145\n00:07:51.330 --> 00:07:55.340\nWell, the transaction logs,\nI need write performance on those.\n\n146\n00:07:55.340 --> 00:07:58.570\nThe database and operating system drives,\nwe can suffer there, it'll be okay.\n\n147\n00:07:58.570 --> 00:08:00.195\nBut it treats them all equally.\n\n148\n00:08:00.195 --> 00:08:02.604\nSo that was the big weakness\nwith the old technology.\n\n149\n00:08:02.604 --> 00:08:04.036\nThe old technology works.\n\n150\n00:08:04.036 --> 00:08:06.124\nIt certainly works or\nthe feature wouldn't be here anymore.\n\n151\n00:08:06.124 --> 00:08:07.077\nRight?\n\n152\n00:08:07.077 --> 00:08:08.879\nBut it wasn't very powerful,\n\n153\n00:08:08.879 --> 00:08:12.990\nit didn't give us granular\ncontrol over how the was applied.\n\n154\n00:08:12.990 --> 00:08:14.900\nSo, for most of us,\nwe're not going to use this,\n\n155\n00:08:14.900 --> 00:08:16.790\nwe're going to leave that value at 0.\n\n156\n00:08:16.790 --> 00:08:20.400\nSo, on the exam, we need to know\nthis to know how to turn it on.\n\n157\n00:08:20.400 --> 00:08:24.170\nIn real life, we need to know this so\nyou can spot whether it is on, right.\n\n158\n00:08:24.170 --> 00:08:28.591\nMaybe you just adopted a new vSphere\nenvironment and it might be vSphere 6.\n\n159\n00:08:28.591 --> 00:08:31.740\nSo you walk in there with the latest and\ngreatest hardware and technology.\n\n160\n00:08:31.740 --> 00:08:36.790\nBut it's been upgraded from\nvSphere way back like VI3 up in\n\n161\n00:08:36.790 --> 00:08:40.800\nto the earlier versions of vSphere and\nall the way up to 6.\n\n162\n00:08:40.800 --> 00:08:44.530\nAnd through the series of upgrades maybe\nthis setting was turned on on a host.\n\n163\n00:08:44.530 --> 00:08:48.180\nAnd the host has been upgraded three times\nand now it's still on the background.\n\n164\n00:08:48.180 --> 00:08:50.490\nSo we need to be able to check\nto see whether that's turned on.\n\n165\n00:08:50.490 --> 00:08:52.600\nSo definitely remember that setting.\n\n166\n00:08:52.600 --> 00:08:57.620\nAssuming it's off, though, that frees\nus up to do storage I/O control,\n\n167\n00:08:57.620 --> 00:08:59.136\nwhich is the better option, all right.\n\n168\n00:08:59.136 --> 00:09:03.740\nNow, storage I/O control is very\nsimilar to what we just saw,\n\n169\n00:09:03.740 --> 00:09:09.210\nthe dynamic queue depth throttling,\nI'll never remember that.\n\n170\n00:09:09.210 --> 00:09:13.350\nSo it's very similar to that,\nexcept it's much more granular.\n\n171\n00:09:13.350 --> 00:09:18.660\nWith SIOC, we can turn it on\non a per data store level.\n\n172\n00:09:18.660 --> 00:09:21.714\nSo, if I have that iSCSI data\nstore that I am just using for\n\n173\n00:09:21.714 --> 00:09:24.388\nISO images data I don't\ncare about performance,\n\n174\n00:09:24.388 --> 00:09:28.930\nI don't have to turn SIOC on for it, I can\njust leave it, if it goes slow, who cares?\n\n175\n00:09:28.930 --> 00:09:30.530\nIt's just ISO images.\n\n176\n00:09:30.530 --> 00:09:34.520\nBut then, if I have a data store that's on\nmy fiber channel SAN and it's where I've\n\n177\n00:09:34.520 --> 00:09:38.630\ngot my virtual machine hard drives,\nI want to manage storage there.\n\n178\n00:09:38.630 --> 00:09:42.150\nSo I can turn it on on\na per data store basis.\n\n179\n00:09:42.150 --> 00:09:47.330\nAll right, then,\nonce it's turned on you can configure\n\n180\n00:09:47.330 --> 00:09:53.060\nhow SIOC balances the machines\non a per-VMDK basis.\n\n181\n00:09:53.060 --> 00:09:55.000\nNow that's the real power right there.\n\n182\n00:09:55.000 --> 00:09:57.900\nNot even per virtual machine but per VMDK.\n\n183\n00:09:57.900 --> 00:10:01.070\nSo, if have more than one\nvirtual hard drive in the VM,\n\n184\n00:10:01.070 --> 00:10:04.170\nI can prioritize one drive over another.\n\n185\n00:10:04.170 --> 00:10:08.390\nIt's not a everyone's\ncreated equal type solution,\n\n186\n00:10:08.390 --> 00:10:12.500\nwe can get in there and influence it\njust like we would network IO control.\n\n187\n00:10:12.500 --> 00:10:15.220\nI know if you already\nwatched MIOC episode,\n\n188\n00:10:15.220 --> 00:10:16.960\nthen you've already heard this and\nI apologize but.\n\n189\n00:10:16.960 --> 00:10:18.600\nIf it in case you have it,\n\n190\n00:10:18.600 --> 00:10:24.190\nthe way NIOC balances people,\nis it uses what's called a share system.\n\n191\n00:10:24.190 --> 00:10:28.270\nEvery network adapter has a certain\namount of shares of bandwidth.\n\n192\n00:10:28.270 --> 00:10:30.590\nAnd that's exactly how SIOC works.\n\n193\n00:10:30.590 --> 00:10:34.555\nThat every VMDK has a certain\namount of shares in the input and\n\n194\n00:10:34.555 --> 00:10:37.520\noutput bandwidth our storage controllers.\n\n195\n00:10:37.520 --> 00:10:40.200\nSo think a bit as like the stock market,\nright.\n\n196\n00:10:40.200 --> 00:10:43.630\nWhen a company decides to sell shares\nin the company what are you buying?\n\n197\n00:10:43.630 --> 00:10:45.410\nYou're buying a portion of that company.\n\n198\n00:10:45.410 --> 00:10:46.570\nSo that's how virtual machines are.\n\n199\n00:10:46.570 --> 00:10:50.210\nThey're buying a portion\nof the storage aisle.\n\n200\n00:10:50.210 --> 00:10:56.010\nWell, by default, every virtual\nmachine will have 1,000 shares.\n\n201\n00:10:56.010 --> 00:11:00.360\nSo, if I have five virtual machines,\nand they each just have one disk,\n\n202\n00:11:00.360 --> 00:11:04.660\nthat's 1,000 shares each for\na total of 5,000 shares.\n\n203\n00:11:04.660 --> 00:11:08.320\nAnd then if we take that and\ndivide it by the five machines right,\n\n204\n00:11:08.320 --> 00:11:10.690\nyou end up with well back 2000.\n\n205\n00:11:10.690 --> 00:11:13.240\nSo they're all kind of\nequal at that point, and so\n\n206\n00:11:13.240 --> 00:11:16.310\neach would have 20% of\nthe available disk IO.\n\n207\n00:11:16.310 --> 00:11:17.440\nThey're all equal.\n\n208\n00:11:17.440 --> 00:11:19.490\nAnd that's exactly how this\nis configured by default.\n\n209\n00:11:19.490 --> 00:11:24.470\nBy default, all your virtual machines and\nall the VMDKs are created equally.\n\n210\n00:11:24.470 --> 00:11:26.840\nAnd then we can go in and influence it.\n\n211\n00:11:26.840 --> 00:11:28.470\nWe can take some disks and\n\n212\n00:11:28.470 --> 00:11:32.560\nreduce their shares,\nto reduce the amount of disk I/O they get.\n\n213\n00:11:32.560 --> 00:11:37.180\nOr we can take their shares and\nincrease them, to give them a boost, okay?\n\n214\n00:11:37.180 --> 00:11:42.020\nSo I might have a transaction log hard\ndrive and I definitely want it to get\n\n215\n00:11:42.020 --> 00:11:46.310\npriority, so instead of 1,000 shares\nmaybe I give it 2,000 shares.\n\n216\n00:11:46.310 --> 00:11:50.000\nAnd so now it'll get more disk\nIO when throttling is applied.\n\n217\n00:11:50.000 --> 00:11:53.430\nAnd you know, that's something I\nforgot to mention and I really should.\n\n218\n00:11:53.430 --> 00:11:55.220\nStorage IO control is not always on.\n\n219\n00:11:56.260 --> 00:11:58.777\nWhen we turn it on,\nit actually sits there and\n\n220\n00:11:58.777 --> 00:12:01.680\ndoes nothing until it detects congestion.\n\n221\n00:12:01.680 --> 00:12:06.920\nIf the drives are not congested, if\nthe queues are not full on your storage,\n\n222\n00:12:06.920 --> 00:12:08.280\nthen why would we throttle?\n\n223\n00:12:08.280 --> 00:12:09.690\nThere's no reason to throttle.\n\n224\n00:12:09.690 --> 00:12:15.060\nAnd so it doesn't throttle normally so\nthe shares, the SIOC, they're all ignored,\n\n225\n00:12:15.060 --> 00:12:19.250\nright up until the point when we see\ncongestion from the storage appliance.\n\n226\n00:12:19.250 --> 00:12:23.990\nOkay, and with SIOC it's actually\nreally smart, with the old method, with\n\n227\n00:12:23.990 --> 00:12:28.640\nthe depth queuing, what it would do is it\nwould just have to do these little tests,\n\n228\n00:12:28.640 --> 00:12:33.340\nthese samples, to see when\nthe disk was being oversaturated.\n\n229\n00:12:33.340 --> 00:12:38.650\nWith SIOC, it actually looks\nat the SCSI status messages.\n\n230\n00:12:38.650 --> 00:12:41.380\nThe SCSI protocol actually has\nfunctionality inside of it.\n\n231\n00:12:41.380 --> 00:12:42.810\nIt will tell us when the queues are full.\n\n232\n00:12:42.810 --> 00:12:44.860\nIt'll say, hey, you need to wait.\n\n233\n00:12:44.860 --> 00:12:46.910\nAnd so SIOC will hear that.\n\n234\n00:12:46.910 --> 00:12:51.070\nAnd when it hears, hey, I need to wait,\nthat's when it turns on all the balancing,\n\n235\n00:12:51.070 --> 00:12:52.870\nthat's when it turns on the throttling,\nand it says,\n\n236\n00:12:52.870 --> 00:12:54.840\nokay, time to look at the shares.\n\n237\n00:12:54.840 --> 00:12:57.680\nLet's look at who has what share,\nand I'm gonna take\n\n238\n00:12:57.680 --> 00:13:00.940\nthe available bandwidth that I've got, the\navailable I/O throughput that I've got,\n\n239\n00:13:00.940 --> 00:13:04.380\nand I'm gonna divide it up\naccording to the shares.\n\n240\n00:13:04.380 --> 00:13:07.880\nSo if I have three hosts.\n\n241\n00:13:07.880 --> 00:13:12.020\nOne of them has 1,000 shares,\nanother has 1,000 shares, and\n\n242\n00:13:12.020 --> 00:13:15.388\nthe third one has 2,000 shares.\n\n243\n00:13:15.388 --> 00:13:17.520\nThen we add that up it's 4,000 shares.\n\n244\n00:13:17.520 --> 00:13:20.730\nIt's gotta get divided amongst\nevenly amongst the systems, and\n\n245\n00:13:20.730 --> 00:13:24.760\nso the first host will get\n25% of the available IO.\n\n246\n00:13:24.760 --> 00:13:28.140\nThe second host would get 25%,\nI shouldn't say host, guest, right?\n\n247\n00:13:28.140 --> 00:13:34.058\nThe first VM would get 25%, the second\nVM would get 25%, and the third VM\n\n248\n00:13:34.058 --> 00:13:38.830\nwould get 50% of the available IO, because\nthose are the shares that we assigned it.\n\n249\n00:13:38.830 --> 00:13:44.530\nSo, we can set that, we can configure\nthat,.and now whenever there's congestion,\n\n250\n00:13:44.530 --> 00:13:47.440\nthe priority's applied\nthe way that I want it, okay.\n\n251\n00:13:47.440 --> 00:13:51.250\nThat's really important, especially when\nyou've got heavy disk IO applications,\n\n252\n00:13:51.250 --> 00:13:53.580\nyou don't want everybody\nto be treated equally,\n\n253\n00:13:53.580 --> 00:13:55.020\nbecause your solution is not equal.\n\n254\n00:13:55.020 --> 00:13:57.070\nYou need it to match your solution.\n\n255\n00:13:57.070 --> 00:14:00.780\n>> Don, if so if I go out and\nI buy something like a vSphere standard.\n\n256\n00:14:00.780 --> 00:14:03.630\nIs it something that I features I'm gonna\nsee inside of like a standard edition, or\n\n257\n00:14:03.630 --> 00:14:04.960\nwhat are the requirements gonna be?\n\n258\n00:14:04.960 --> 00:14:08.070\n>> I'm glad you asked Wes because\nI completely forgot about that.\n\n259\n00:14:08.070 --> 00:14:11.330\nIt's easy to lose sight sometimes when\nyou don't use lab environments and stuff.\n\n260\n00:14:11.330 --> 00:14:13.341\nThere are some features you\ngot to pay a little extra for.\n\n261\n00:14:13.341 --> 00:14:16.930\nAnd SIOC is not a free one,\nit's part of the Enterprise Plus license.\n\n262\n00:14:16.930 --> 00:14:20.680\nSo, if you've deployed vSphere standard.\n\n263\n00:14:20.680 --> 00:14:23.200\nOne of the acceleration kits or\nsomething like that.\n\n264\n00:14:23.200 --> 00:14:24.910\nYou may not have that SIOC.\n\n265\n00:14:24.910 --> 00:14:26.480\nYou'll see the option it\nwill just be grayed out.\n\n266\n00:14:26.480 --> 00:14:27.370\nAnd you won't be able to turn it on.\n\n267\n00:14:27.370 --> 00:14:30.280\nSo if you're sitting there scratching\nyour head like why can't I turn this own.\n\n268\n00:14:30.280 --> 00:14:31.780\nThat that may well be why, right?\n\n269\n00:14:31.780 --> 00:14:34.100\nYou've got to have\nan enterprise plus license.\n\n270\n00:14:34.100 --> 00:14:37.670\nThere is another scenario NFS.\n\n271\n00:14:37.670 --> 00:14:40.900\nIf you have a data store that's NFS,\nyou can actually do SIOC on it.\n\n272\n00:14:40.900 --> 00:14:44.930\nNot a lot of reason to, but\nyou can if it's NFS version 3.\n\n273\n00:14:44.930 --> 00:14:47.420\nIt's not support on NFS version 4.1.\n\n274\n00:14:47.420 --> 00:14:51.930\nSo if you've gone to the latest version\nof NFS, it can't do SIOC, all right?\n\n275\n00:14:51.930 --> 00:14:55.630\nI don't know the engineering reason for\nthat, I just know that it can't do it,\n\n276\n00:14:55.630 --> 00:14:59.780\nprobably because of the authentication,\nor something in that nature.\n\n277\n00:14:59.780 --> 00:15:02.450\nBut usually you don't\ndo SIOC on NFS anyway,\n\n278\n00:15:02.450 --> 00:15:06.010\nbecause NFS shares\nare notoriously low performance.\n\n279\n00:15:06.010 --> 00:15:09.520\nAnd so, you're not usually\ngonna put critical data there.\n\n280\n00:15:09.520 --> 00:15:13.630\nLet's say you have to use NFS, for some\nreason you're being forced to use NFS,\n\n281\n00:15:13.630 --> 00:15:15.031\nyou just don't have a SAN.\n\n282\n00:15:15.031 --> 00:15:17.792\nSo you don't wanna invest\nin that infrastructure,\n\n283\n00:15:17.792 --> 00:15:20.730\nand [INAUDIBLE] isn't working for\nyou so you go NFS.\n\n284\n00:15:20.730 --> 00:15:21.740\nIf you have to use it,\n\n285\n00:15:21.740 --> 00:15:25.420\nthen you are going to have congestion,\nit's almost guaranteed.\n\n286\n00:15:26.560 --> 00:15:29.390\nSo you could use SIOC and\ntry and pound things out there.\n\n287\n00:15:29.390 --> 00:15:33.620\nAnd SIOC will definitely be putting in\nsome time because that congestion will be\n\n288\n00:15:33.620 --> 00:15:35.420\nthere almost always.\n\n289\n00:15:35.420 --> 00:15:37.630\nAll right,so I've been\nrattling on about this stuff.\n\n290\n00:15:37.630 --> 00:15:40.040\nLet's see how to get it turned on, right?\n\n291\n00:15:40.040 --> 00:15:44.560\nTo configure SIOC, step one, we need to\nget it enabled on our data store, right.\n\n292\n00:15:44.560 --> 00:15:48.560\nSo in my environment here,\nI'm gonna take esxhost01 here and\n\n293\n00:15:48.560 --> 00:15:52.813\nI'm just gonna go to its related\nobjects and it's data stores.\n\n294\n00:15:54.260 --> 00:15:56.900\nAll right, so\nin ESX host 01 I've got three data stores.\n\n295\n00:15:56.900 --> 00:15:59.580\nI have an ISO datastore out\nthere which I'm gonna ignore.\n\n296\n00:15:59.580 --> 00:16:02.800\nBut then I've got these two local ones,\nright?\n\n297\n00:16:02.800 --> 00:16:04.688\nDatastore01 and datastore02.\n\n298\n00:16:04.688 --> 00:16:08.786\nDatastore01 was the one that was created\nautomatically when I installed ESXi.\n\n299\n00:16:08.786 --> 00:16:10.644\nIt's on the operating system drive.\n\n300\n00:16:10.644 --> 00:16:12.832\nAnd so I don't usually use it for\nanything, it just sits there.\n\n301\n00:16:12.832 --> 00:16:17.650\nBut datastore02, that one is a 500\ngig data store, if I remember right,\n\n302\n00:16:17.650 --> 00:16:21.671\nand it's on a little RAID 0 array,\nit's got good performance.\n\n303\n00:16:21.671 --> 00:16:24.340\nAnd that's where I'm putting my\nvirtual machine hard drives.\n\n304\n00:16:24.340 --> 00:16:28.074\nSo if I were to go into that data store,\nfor example, and\n\n305\n00:16:28.074 --> 00:16:32.760\nhit the, the vSphere 6 Web Client has\na little bug when you go into data\n\n306\n00:16:32.760 --> 00:16:37.148\nstores it crashes the UI,\nwhich is fun, but it'll reload here.\n\n307\n00:16:37.148 --> 00:16:40.756\nAs soon as it reloads once I go in there\nI'll be able to see the virtual disks and\n\n308\n00:16:40.756 --> 00:16:42.433\nfiles that are a part of it, right?\n\n309\n00:16:42.433 --> 00:16:45.669\nSo all of my virtual machines will have\ntheir disks right here on the system.\n\n310\n00:16:45.669 --> 00:16:47.974\nSo this data store is important to me,\n\n311\n00:16:47.974 --> 00:16:51.934\nthis is the one that I actually\ncare about, because inside of it,\n\n312\n00:16:51.934 --> 00:16:56.558\nI've got my database server and\nmy Windows client, they're right there.\n\n313\n00:16:56.558 --> 00:17:00.047\nSo looking at this data store, well,\n\n314\n00:17:00.047 --> 00:17:04.627\nif I want to enable SIOC,\nI choose the data store,\n\n315\n00:17:04.627 --> 00:17:09.754\nI go to Manage and\nonce I'm inside of the Manage screen,\n\n316\n00:17:09.754 --> 00:17:15.335\nyou can see it right here,\nDatastore Capabilities, SIOC.\n\n317\n00:17:15.335 --> 00:17:18.230\nStorage I/O control,\nit's currently disabled, right?\n\n318\n00:17:18.230 --> 00:17:20.934\nAnd if I expand that out,\nI'll see it's disabled.\n\n319\n00:17:20.934 --> 00:17:23.760\nMy mode, 90% of peak throughput.\n\n320\n00:17:23.760 --> 00:17:25.182\nThat's my threshold.\n\n321\n00:17:25.182 --> 00:17:31.460\nIf I hit 90% of my throughput,\nthat's when we start to impose our limits.\n\n322\n00:17:31.460 --> 00:17:34.280\nIf we're running below\n90% of our throughput,\n\n323\n00:17:34.280 --> 00:17:35.870\nwe don't bother with throttling.\n\n324\n00:17:35.870 --> 00:17:36.870\nWhy throttle somebody?\n\n325\n00:17:36.870 --> 00:17:40.910\nLet them all have equal access\nright up until that point, okay.\n\n326\n00:17:40.910 --> 00:17:43.800\nAnd then I can see my Storage I/O Metrics\nare turned on because, well,\n\n327\n00:17:43.800 --> 00:17:45.540\nwe need to be able to\ntrack what's going on.\n\n328\n00:17:45.540 --> 00:17:47.255\nNow it's not actually doing anything yet.\n\n329\n00:17:47.255 --> 00:17:50.340\nI need to turn that on, so\nI'm gonna go over here to Edit.\n\n330\n00:17:50.340 --> 00:17:55.260\nAnd when I edit the features,\nhere's where I can Enable SIOC, okay.\n\n331\n00:17:55.260 --> 00:17:58.910\nNow notice down here we've got\nDisable Storage I/O statistics.\n\n332\n00:17:58.910 --> 00:18:02.350\nAs soon as I turn on SIOC,\nsee how it disappeared?\n\n333\n00:18:02.350 --> 00:18:04.650\nYou gotta collect statistics or\nit doesn't work, right?\n\n334\n00:18:04.650 --> 00:18:06.300\nSo I lose the ability to turn that off.\n\n335\n00:18:06.300 --> 00:18:07.620\nIt's kind of important, all right?\n\n336\n00:18:07.620 --> 00:18:11.900\nSo I can turn that on and here's my\ncongestion threshold, which I can adjust.\n\n337\n00:18:11.900 --> 00:18:17.307\nNow the default is 90%, and so that's\nprobably what we wanna leave it at, okay?\n\n338\n00:18:17.307 --> 00:18:21.404\nBut you can change that, you can\nchange the percentage if you want, or\n\n339\n00:18:21.404 --> 00:18:22.522\nyou can go manual.\n\n340\n00:18:22.522 --> 00:18:27.423\nAnd what manual does is it doesn't\nactually track the congestion itself,\n\n341\n00:18:27.423 --> 00:18:28.995\nit tracks the latency.\n\n342\n00:18:28.995 --> 00:18:32.719\nIt says, okay I'm gonna send a write or\na read operation to the disk,\n\n343\n00:18:32.719 --> 00:18:34.082\nit actually sends both.\n\n344\n00:18:34.082 --> 00:18:35.442\nHow long does it take?\n\n345\n00:18:35.442 --> 00:18:40.970\nAnd you can set the threshold, you can\nsay if it takes 30 ms, that's too long,\n\n346\n00:18:40.970 --> 00:18:46.113\nif it takes 29 or less that's okay,\nbut 30 or more, that's too long.\n\n347\n00:18:46.113 --> 00:18:47.954\nImpose restrictions, all right?\n\n348\n00:18:47.954 --> 00:18:50.434\nAnd so\nyou can pick what's your acceptable level,\n\n349\n00:18:50.434 --> 00:18:53.674\nall the way down to five milliseconds and\nyou can go up pretty high.\n\n350\n00:18:53.674 --> 00:18:56.560\nI think 1,000, no, 100 is the highest.\n\n351\n00:18:56.560 --> 00:18:58.940\nSo you can pick what\nthat acceptable value is.\n\n352\n00:18:58.940 --> 00:19:01.160\nMost people just go with\npercentages though.\n\n353\n00:19:01.160 --> 00:19:05.000\nAs long as your SAN supports the SCSI\nprotocol, which they almost all do, and\n\n354\n00:19:05.000 --> 00:19:08.630\nit's communicating properly,\npercentage is what we want, okay?\n\n355\n00:19:08.630 --> 00:19:10.320\nSo we can get that set right there.\n\n356\n00:19:10.320 --> 00:19:13.890\nYou can also choose to\nExclude I/O statistics from\n\n357\n00:19:13.890 --> 00:19:15.210\nthe distributed resource scheduler.\n\n358\n00:19:15.210 --> 00:19:18.040\nIf you're not using DRS then\nyou don't care about this.\n\n359\n00:19:18.040 --> 00:19:22.660\nBut if you are using DRS, these\nstatistics get factored into that and if\n\n360\n00:19:22.660 --> 00:19:27.250\nDRS sees a virtual machine being throttled\nit may move it to another host so\n\n361\n00:19:27.250 --> 00:19:30.310\nthat it doesn't have to get throttled\nanymore, and we usually want that.\n\n362\n00:19:30.310 --> 00:19:34.450\nBut if you don't want that, if you don't\nwant DRS taking action based on SIOC,\n\n363\n00:19:34.450 --> 00:19:36.550\nyou can just check Exclude and\nthen it won't do that.\n\n364\n00:19:37.970 --> 00:19:41.870\nBut once this is done,\nit's now turned on for the data store, and\n\n365\n00:19:41.870 --> 00:19:44.590\nI've gotta be careful because it is on.\n\n366\n00:19:44.590 --> 00:19:46.760\nIt's on and it's running right now.\n\n367\n00:19:47.800 --> 00:19:53.510\nBut all of my disks, they've got\n1,000 shares, and everybody's being\n\n368\n00:19:53.510 --> 00:19:57.830\ntreated equal right now, so everybody's\ngot 1,000 shares and that's how it is.\n\n369\n00:19:57.830 --> 00:19:59.890\nSo on my system, I've got two hosts.\n\n370\n00:19:59.890 --> 00:20:04.480\nI've got a client, and\nI've got a database server, right?\n\n371\n00:20:04.480 --> 00:20:06.810\nDB01 and WinClient01.\n\n372\n00:20:06.810 --> 00:20:10.865\nAnd, they've both got their disks,\non datastore02.\n\n373\n00:20:10.865 --> 00:20:14.800\nSo, WinClient01 is on datastore02,\nwhich I guess would probably look\n\n374\n00:20:14.800 --> 00:20:18.810\na little better if I looked under\nthe disk, so if I go under its disk here,\n\n375\n00:20:20.560 --> 00:20:26.800\nwe can see it's under datastore02 and\nif I go to DB01, DB01 has two hard drives.\n\n376\n00:20:26.800 --> 00:20:30.389\nSo if I look at Hard disk 1,\nit's on datastore02 and\n\n377\n00:20:30.389 --> 00:20:34.068\nif I look at Hard disk 2,\nit's on datastore02 also.\n\n378\n00:20:34.068 --> 00:20:37.317\nSo, two disks, both on datastore02.\n\n379\n00:20:37.317 --> 00:20:40.576\nSo I've got three discs,\nall in datastore02,\n\n380\n00:20:40.576 --> 00:20:44.152\nall three discs have 1,000 shares each,\nright?\n\n381\n00:20:44.152 --> 00:20:49.095\nSo WinClient01 has 1,000 shares,\nthis drive has 1,000 shares and\n\n382\n00:20:49.095 --> 00:20:51.320\nthis drive has 1,000 shares.\n\n383\n00:20:51.320 --> 00:20:55.410\nNow that doesn't mean the data\nbase server has 2,000 shares.\n\n384\n00:20:55.410 --> 00:20:58.700\nBecause it's not looking at it from\nthe perspective of a virtual machine.\n\n385\n00:20:58.700 --> 00:21:01.209\nIt's looking at it from the perspective\nof a virtual hard drive.\n\n386\n00:21:01.209 --> 00:21:04.471\nThis hard drive has 1,000 shares,\nthis hard drive has 1,000 shares.\n\n387\n00:21:04.471 --> 00:21:09.159\nSo right now, if throttling kicks in,\nthis disk will get 33%,\n\n388\n00:21:09.159 --> 00:21:13.693\nthis disk will get 33%, and\nWinClient01 will get 33%.\n\n389\n00:21:13.693 --> 00:21:15.900\nAnd that may not be exactly how I want it.\n\n390\n00:21:15.900 --> 00:21:19.250\nI may want this disk,\nif it's my database disk,\n\n391\n00:21:19.250 --> 00:21:21.890\nto have more performance when\nthrottling is being applied.\n\n392\n00:21:21.890 --> 00:21:24.720\nSo this one gets preference\nover the other guys, right?\n\n393\n00:21:24.720 --> 00:21:27.460\nAnd so we can go in and\nwe can adjust that.\n\n394\n00:21:27.460 --> 00:21:31.620\nIf we edit our settings,\nwhen you go to edit the settings for\n\n395\n00:21:31.620 --> 00:21:35.020\nthe hardware you can come in and\nyou can find the hard disk and\n\n396\n00:21:35.020 --> 00:21:41.260\nI'm just gonna expand out Hard disk 2 and\nright in here you can find the Shares.\n\n397\n00:21:41.260 --> 00:21:41.760\nOkay?\n\n398\n00:21:41.760 --> 00:21:46.865\nNow you actually have this Limit,\ninput, outputs per second, IOPs.\n\n399\n00:21:46.865 --> 00:21:49.005\nThat applies all the time.\n\n400\n00:21:49.005 --> 00:21:50.805\nIf I implements IOPs Limits,\n\n401\n00:21:50.805 --> 00:21:54.768\nthat applies regardless of whether\nthe disk is congested or not.\n\n402\n00:21:54.768 --> 00:21:59.085\nThe disc could be completely idle and\nmy IOPs Limits would still apply, okay.\n\n403\n00:21:59.085 --> 00:22:01.713\nSIOC uses shares though and the shares,\n\n404\n00:22:01.713 --> 00:22:04.970\nthose are only applying\nwhen congestion occurs.\n\n405\n00:22:04.970 --> 00:22:08.524\nAnd that's a better option but\nif you don't pay for that license,\n\n406\n00:22:08.524 --> 00:22:12.726\nlimiting the IOPs is kind of your only\nreal option that you have for doing that.\n\n407\n00:22:12.726 --> 00:22:16.851\nBut with Shares I can come in and I can\nspecify a value, and the default is 1,000.\n\n408\n00:22:16.851 --> 00:22:18.931\nYou can go high, which is 2,000.\n\n409\n00:22:18.931 --> 00:22:20.836\nYou can go low, which is 500.\n\n410\n00:22:20.836 --> 00:22:24.161\nOr you can go Custom and\nset it to whatever you want, okay.\n\n411\n00:22:24.161 --> 00:22:26.048\nWithin limits.\n\n412\n00:22:26.048 --> 00:22:29.921\n4,000 is the highest value,\nso anywhere from 1 to 4,000.\n\n413\n00:22:29.921 --> 00:22:32.326\nOnce we get that set,\nnow we've got our priority.\n\n414\n00:22:32.326 --> 00:22:34.055\nI'm gonna make this a high priority disk.\n\n415\n00:22:34.055 --> 00:22:36.319\nI want this disk to have 2,000 shares.\n\n416\n00:22:36.319 --> 00:22:39.735\nSo, now if congestion occurs,\nthis disk has 2,000 shares,\n\n417\n00:22:39.735 --> 00:22:44.494\nthe operating system disk has 1,000\nshares and WinClient01 has 1,000 shares.\n\n418\n00:22:44.494 --> 00:22:47.942\nSo WinClient01 will get 25%, the OS for\n\n419\n00:22:47.942 --> 00:22:52.948\nthis machine will get 25%, and\nthe database will get 50%.\n\n420\n00:22:52.948 --> 00:22:56.557\nIt will get more access to the available\ndisk I/O than the other drives.\n\n421\n00:22:56.557 --> 00:23:00.378\nNow I can balance that out and\nwe're in good shape.\n\n422\n00:23:00.378 --> 00:23:03.880\nOnce I say OK to that, the shares,\nthat takes effect immediately.\n\n423\n00:23:03.880 --> 00:23:05.440\nAnd you can go in and\nchange that whenever you want.\n\n424\n00:23:05.440 --> 00:23:08.030\nYou can adjust the shares to\nfind the right balance and\n\n425\n00:23:08.030 --> 00:23:09.560\nget things set the way that you need it.\n\n426\n00:23:09.560 --> 00:23:12.420\nSo it's not too terribly\nhard to work with that.\n\n427\n00:23:12.420 --> 00:23:16.131\nOnce it's in place you're\npretty much done, right?\n\n428\n00:23:16.131 --> 00:23:18.705\nNow we can just let it run and\nwe're in business.\n\n429\n00:23:18.705 --> 00:23:20.032\nWell, how do we know we're in business?\n\n430\n00:23:20.032 --> 00:23:20.947\nHow do we know it works?\n\n431\n00:23:20.947 --> 00:23:23.962\nWell, if your disk is never congested,\nif your SAN or\n\n432\n00:23:23.962 --> 00:23:27.647\nwhatever storage you've got under\nthe hood is never congested,\n\n433\n00:23:27.647 --> 00:23:30.742\nthen it doesn't work and\nobviously, never turns on.\n\n434\n00:23:30.742 --> 00:23:33.514\nAnd hopefully,\nyou've had that problem, right?\n\n435\n00:23:33.514 --> 00:23:37.281\nBut the moment congestion occurs, SIOC\nwill kick in and it will start working.\n\n436\n00:23:37.281 --> 00:23:40.391\nAnd if you wanna see that,\nit's monitored from within the data store.\n\n437\n00:23:40.391 --> 00:23:42.931\nRemember we turned it\non on the data store?\n\n438\n00:23:42.931 --> 00:23:44.939\nSo I'm gonna go to datastore02.\n\n439\n00:23:44.939 --> 00:23:46.747\nHopefully my UI won't crash this time.\n\n440\n00:23:46.747 --> 00:23:47.971\nThere we go.\n\n441\n00:23:47.971 --> 00:23:51.734\nAnd when I go into datastore02,\nI'm gonna go to the data store and\n\n442\n00:23:51.734 --> 00:23:54.720\nI'm gonna go to the Monitor tab up top.\n\n443\n00:23:54.720 --> 00:23:58.120\nAnd under the Monitor tab,\nI'm gonna go to Performance, and\n\n444\n00:23:58.120 --> 00:24:02.680\nwe'll see the general performance for\nthis data store, eventually.\n\n445\n00:24:02.680 --> 00:24:04.159\nIt's thinking about it.\n\n446\n00:24:04.159 --> 00:24:07.909\nI've got my spinning gear of fate up here,\nso as soon as that's done,\n\n447\n00:24:07.909 --> 00:24:11.727\nwe'll get our performance and,\nwhen we look at the performance here,\n\n448\n00:24:11.727 --> 00:24:16.050\nwhat we're seeing is disk space, which\nis not really what I want, but I'm going\n\n449\n00:24:16.050 --> 00:24:20.185\nto drop that down and choose performance\nAnd now we'll be able to monitor it,\n\n450\n00:24:20.185 --> 00:24:23.090\nand unfortunately,\nit hasn't been on long enough.\n\n451\n00:24:23.090 --> 00:24:26.771\nI haven't been collecting statistics\nlong enough, so I don't have any data.\n\n452\n00:24:26.771 --> 00:24:28.080\nSo my time range is too great.\n\n453\n00:24:28.080 --> 00:24:28.870\nLet me go real time.\n\n454\n00:24:30.460 --> 00:24:31.040\nThere we go.\n\n455\n00:24:31.040 --> 00:24:33.210\nSo now I can start to take a look at it,\nand\n\n456\n00:24:33.210 --> 00:24:37.970\nhere's my\nStorage IO Control Normalized Latency.\n\n457\n00:24:37.970 --> 00:24:40.536\nThings are gonna run normal\nwhile SIOC is not working.\n\n458\n00:24:40.536 --> 00:24:43.879\nAnd the moment I hit 90%\nof my available throughput,\n\n459\n00:24:43.879 --> 00:24:46.810\nthen it's gonna start balancing people.\n\n460\n00:24:46.810 --> 00:24:50.470\nAnd so as I look at this here,\nI've got microseconds listed,\n\n461\n00:24:50.470 --> 00:24:53.630\nwhich means right now I'm\nnot under congestion, right?\n\n462\n00:24:53.630 --> 00:24:55.750\nSo SIOCs not really working.\n\n463\n00:24:55.750 --> 00:24:59.384\nBut what you'll start to see is\nthis will level out and flatline.\n\n464\n00:24:59.384 --> 00:25:02.497\nWhen you hit that 90%, right,\nit's gonna flatline and\n\n465\n00:25:02.497 --> 00:25:05.430\nit's gonna balance\nthe individual VMs inside of it.\n\n466\n00:25:05.430 --> 00:25:09.850\nSo what we're looking at here, aggregated\nIOPS, so these are all the virtual\n\n467\n00:25:09.850 --> 00:25:13.030\nmachines combined together to\ncreate the IOPs right here.\n\n468\n00:25:13.030 --> 00:25:16.800\nAnd you'll just see a flat line,\nthat's how spot when SIOC kicks in.\n\n469\n00:25:16.800 --> 00:25:17.950\nThat's when it's doing its job.\n\n470\n00:25:19.150 --> 00:25:22.180\nSo we would have to go and view the\nindividual virtual machines to see what\n\n471\n00:25:22.180 --> 00:25:26.070\ntheir IOPs look like during that time,\nto see them get affected.\n\n472\n00:25:26.070 --> 00:25:29.430\nDown here,\nI can see my Max Queue Depth per Host, and\n\n473\n00:25:29.430 --> 00:25:33.140\nthis is where I can see if the depth\nqueueing was kicking in, right?\n\n474\n00:25:33.140 --> 00:25:35.150\nThe old method of setting it up.\n\n475\n00:25:35.150 --> 00:25:36.770\nThe new method actually uses part of this,\n\n476\n00:25:36.770 --> 00:25:38.290\nit's just doing it\na little more granularly.\n\n477\n00:25:38.290 --> 00:25:40.510\nSo, you'll still see activity here.\n\n478\n00:25:40.510 --> 00:25:45.946\nBut then, right down here is where you'll\nstart to see the per-host IOPs, right?\n\n479\n00:25:45.946 --> 00:25:46.626\nAnd it's got the Top 10.\n\n480\n00:25:46.626 --> 00:25:49.316\nAnd this is where you should start\nto see things level out also\n\n481\n00:25:49.316 --> 00:25:51.430\nto know that SIOC is working.\n\n482\n00:25:51.430 --> 00:25:53.650\nAs long as you're not being throttled,\nyou're gonna see performance like mine,\n\n483\n00:25:53.650 --> 00:25:57.820\nwhere you've got spikes, sure, but\nfor the most part it's available.\n\n484\n00:25:57.820 --> 00:26:00.920\nI don't have congestion and\neverything is nice and stable.\n\n485\n00:26:02.250 --> 00:26:05.376\nAll right, so\nnot anything really too crazy to see here,\n\n486\n00:26:05.376 --> 00:26:09.500\nmost of this is just average latency and\nother information.\n\n487\n00:26:09.500 --> 00:26:13.350\nMy Write IOPs per Virtual Machine Disk for\nthe Top 10 disks and so\n\n488\n00:26:13.350 --> 00:26:17.590\non, each of these should\ncap out at close to my max.\n\n489\n00:26:17.590 --> 00:26:19.930\nMy screen keeps going gray cuz\nI've got it in real time mode so\n\n490\n00:26:19.930 --> 00:26:22.180\nit's just refreshing\nthe charts as we watch.\n\n491\n00:26:22.180 --> 00:26:23.861\nThat's what's going on.\n\n492\n00:26:23.861 --> 00:26:25.738\nBut notice here's WIN-CLIENT01 and so\n\n493\n00:26:25.738 --> 00:26:28.360\nthat's the only machine I\nhave powered on right now.\n\n494\n00:26:28.360 --> 00:26:31.250\nIf I had more than one machine powered on,\nI'd see the lines for the other ones and\n\n495\n00:26:31.250 --> 00:26:32.250\nI'd be able to monitor that.\n\n496\n00:26:32.250 --> 00:26:35.140\nI guess I could turn on my other\nvirtual machine, let me do that.\n\n497\n00:26:35.140 --> 00:26:39.762\nI'll power on Database01, And\n\n498\n00:26:39.762 --> 00:26:43.003\nlet me get it powered on.\n\n499\n00:26:43.003 --> 00:26:44.350\nYou know what?\nIt's not gonna be too happy,\n\n500\n00:26:44.350 --> 00:26:46.550\nit doesn't have a disk in it's drive,\nbut whatever,\n\n501\n00:26:46.550 --> 00:26:48.010\nit'll still generate some disk IO.\n\n502\n00:26:48.010 --> 00:26:49.510\nAnd so\nnow I can go back to my monitoring and\n\n503\n00:26:49.510 --> 00:26:54.500\nwe'll just kind of see that performance\nagain and be able to gauge whether or\n\n504\n00:26:54.500 --> 00:26:57.840\nnot we're seeing any true\nthrottling on these machines.\n\n505\n00:26:57.840 --> 00:27:00.550\nAnd you know that machine's\ngonna boot up in idle, isn't it?\n\n506\n00:27:00.550 --> 00:27:01.330\nYeah, we'll have to wait,\n\n507\n00:27:01.330 --> 00:27:04.270\nbut you'll start to see the other\nvirtual machines get laid out here too.\n\n508\n00:27:04.270 --> 00:27:07.250\nSo just a great away to monitor and\nsee whether or not it's actually working.\n\n509\n00:27:07.250 --> 00:27:10.800\nAnd what you should see is that\nwhen you're being throttled,\n\n510\n00:27:10.800 --> 00:27:15.040\nyou should see higher IO from the virtual\nmachines that have more shares.\n\n511\n00:27:15.040 --> 00:27:16.994\nAnd lower IO from the machines\nthat have less shares and\n\n512\n00:27:16.994 --> 00:27:18.790\nyou'll be able to see that\nactually take effect.\n\n513\n00:27:19.900 --> 00:27:23.420\nSo, that's basically it for SIOC,\nit's pretty easy to turn on, right?\n\n514\n00:27:23.420 --> 00:27:26.400\nRemember the steps, wqe turned it on on\nthe data store and then we went in and\n\n515\n00:27:26.400 --> 00:27:31.180\nadjusted the shares on the VMDKs\nthemselves, on the virtual hard disks.\n\n516\n00:27:31.180 --> 00:27:34.650\nSo you've gotta go to and balance that\nto meet the needs of your organization.\n\n517\n00:27:34.650 --> 00:27:38.000\nBe really careful if you're using\nthe Distributed Resource Scheduler.\n\n518\n00:27:38.000 --> 00:27:42.730\nBecause I might have a high share\nvirtual machine that then gets moved to\n\n519\n00:27:42.730 --> 00:27:45.698\nanother host where it's bumping up\nagainst another high share machine.\n\n520\n00:27:45.698 --> 00:27:48.280\nNow, DRS will normally take care\nof that and move us again, but\n\n521\n00:27:48.280 --> 00:27:49.960\nit can result in a lot of extra movement.\n\n522\n00:27:49.960 --> 00:27:53.300\nSo if we're really tweaking this down,\n\n523\n00:27:53.300 --> 00:27:57.434\nwe might not want our shares\nto count towards DRS.\n\n524\n00:27:57.434 --> 00:28:02.040\nAnd that's where we had that option to\ndisable that when we turned on our SIOC.\n\n525\n00:28:02.040 --> 00:28:05.213\n>> Don, appreciate all that great\ninformation on vSphere Storage.\n\n526\n00:28:05.213 --> 00:28:06.927\nBut before we do sign off,\ncuz looking at the time clock,\n\n527\n00:28:06.927 --> 00:28:08.570\nit does look like we're gonna\nhave to wrap this one up,\n\n528\n00:28:08.570 --> 00:28:10.690\ndo you have any additional considerations?\n\n529\n00:28:10.690 --> 00:28:14.600\n>> Main thing is figuring out the right\nshares to use is a little difficult.\n\n530\n00:28:14.600 --> 00:28:17.310\nAnd you're gonna have to tweak and\nmake changes to your environment until\n\n531\n00:28:17.310 --> 00:28:20.500\nyou find the right balance and prioritize\nthings the right way that you want.\n\n532\n00:28:20.500 --> 00:28:21.660\nSo you gotta keep an eye on it.\n\n533\n00:28:21.660 --> 00:28:23.960\nJust watch your monitor screens,\nsee how things go.\n\n534\n00:28:23.960 --> 00:28:26.610\nKnow that you're not always being\nthrottled, so you gotta watch throughout\n\n535\n00:28:26.610 --> 00:28:29.090\nthe peak times of the day when\nyou have a lot of disk activity,.\n\n536\n00:28:29.090 --> 00:28:31.310\nAnd also be aware that there's\noutlier type activities,\n\n537\n00:28:31.310 --> 00:28:34.966\nlike when you backup a hard drive,\nthat backup generates a ton of disk I/O.\n\n538\n00:28:34.966 --> 00:28:38.440\nAnd so, balancing can jump in and\nstart to impact those processes too.\n\n539\n00:28:38.440 --> 00:28:41.900\nSo just, it's not an, well I guess,\nit is an exact science.\n\n540\n00:28:41.900 --> 00:28:43.700\nJust hard to figure out\nthe exact part of it, right?\n\n541\n00:28:43.700 --> 00:28:47.370\nSo you may have to tweak it a bit to\nfind that right solution for you.\n\n542\n00:28:47.370 --> 00:28:50.070\n>> Well Don, as always, we do appreciate\nhaving you here in the studios.\n\n543\n00:28:50.070 --> 00:28:52.191\nAnd we appreciate you,\nthe viewer, watching.\n\n544\n00:28:52.191 --> 00:28:54.780\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n545\n00:28:54.780 --> 00:28:55.440\n>> And I'm Don Pezet.\n\n546\n00:28:55.440 --> 00:28:56.047\n>> And we'll see you next time.\n\n547\n00:28:56.047 --> 00:29:06.020\n[MUSIC]\n\n",
          "vimeoId": "171757364"
        },
        {
          "description": "In this episode, Wes and Don enter into the realm of vSANs in vSphere. They discuss the recommendations when using virtual SANs including license, drive and host considerations.",
          "length": "2071",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-4-1-virtual_san-062216-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-4-1-virtual_san-062216-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-4-1-virtual_san-062216-1-sm.jpg",
          "title": "Virtual SAN",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.576 --> 00:00:14.191\nWelcome back to another exciting\nepisode here at ITPROTV.\n\n3\n00:00:14.191 --> 00:00:17.895\nI'm your host Wes Bryant and today we're\ncoming back at you with more VMware,\n\n4\n00:00:17.895 --> 00:00:18.482\nTthat's right.\n\n5\n00:00:18.482 --> 00:00:22.150\nRight, a one-two punch to the VMWare\ncertified professional version six.\n\n6\n00:00:22.150 --> 00:00:26.390\nJoining me back in the studios today is\nthe VMWare boxing master, Mr. Don Bizette.\n\n7\n00:00:26.390 --> 00:00:27.200\nDon, how you doing sir?\n\n8\n00:00:27.200 --> 00:00:29.790\n>> I don't know that anyone's\never called me a boxing master.\n\n9\n00:00:29.790 --> 00:00:31.550\nThat's a recipe for disaster.\n\n10\n00:00:33.720 --> 00:00:34.870\nI'm excited to be back on the show,\n\n11\n00:00:34.870 --> 00:00:37.190\nas I'm ready to dive back\ninto the world of vSphere 6.\n\n12\n00:00:37.190 --> 00:00:40.410\nIn this episode we're gonna\nbe tackling virtual SANs,\n\n13\n00:00:40.410 --> 00:00:44.150\nwhich as the name implies,\nis kinda like a SAN only fake.\n\n14\n00:00:44.150 --> 00:00:46.520\nSo we get a chance to see how that works,\nand\n\n15\n00:00:46.520 --> 00:00:49.820\nwhy we'd even want to do\nthat inside of vSphere 6.\n\n16\n00:00:49.820 --> 00:00:52.460\nSo let's just kick things\noff really basic here with\n\n17\n00:00:52.460 --> 00:00:54.660\nwhy we'd even want a SAN\nin the first place, right?\n\n18\n00:00:54.660 --> 00:00:57.280\nA SAN, or a storage area\nnetwork here's where we have\n\n19\n00:00:57.280 --> 00:00:59.870\nshared storage that's available for\nour servers to use,\n\n20\n00:00:59.870 --> 00:01:02.410\nand we've already talked about it\nin the show in earlier episodes.\n\n21\n00:01:02.410 --> 00:01:06.930\nIt's really an important piece if we\nwanna have things like VMotion, right,\n\n22\n00:01:06.930 --> 00:01:10.040\nwhere you have a virtual machine that can\nmove from one physical server to another\n\n23\n00:01:10.040 --> 00:01:11.970\nphysical server without rebooting.\n\n24\n00:01:11.970 --> 00:01:15.950\nWhile it's online, while users are in it,\nwe can jump hardware and\n\n25\n00:01:15.950 --> 00:01:19.615\nreally increase availability by doing\nthat, it's an amazing thing to have.\n\n26\n00:01:19.615 --> 00:01:24.230\nThey other thing about is that they're\nreally expandable your normal server,\n\n27\n00:01:24.230 --> 00:01:26.810\nhow many hard drives can you fit in it,\neight,\n\n28\n00:01:26.810 --> 00:01:29.020\nmaybe 10 if you get one\nof those bigger serves.\n\n29\n00:01:29.020 --> 00:01:32.830\nThere are some servers that are 8U high,\nand you can fit a ton of hard drives in\n\n30\n00:01:32.830 --> 00:01:35.950\nthem, but most serves can only\nhold a handful of drives.\n\n31\n00:01:35.950 --> 00:01:38.170\nSo if you wanna high drive density,\n\n32\n00:01:38.170 --> 00:01:40.870\nyou really need to go to\nexternal drive arrays, or\n\n33\n00:01:40.870 --> 00:01:44.990\nyou can go to a SAN, and SANs can hold\nhundreds, even thousands of drives.\n\n34\n00:01:44.990 --> 00:01:48.110\nThey expand out and you can have\ncentralized storage, it's really,\n\n35\n00:01:48.110 --> 00:01:49.120\nreally impressive.\n\n36\n00:01:49.120 --> 00:01:52.270\nIt's another reason why you'd\nwant a storage area network, but\n\n37\n00:01:52.270 --> 00:01:55.020\nthere's one big reason why you might\nnot want a storage area network, and\n\n38\n00:01:55.020 --> 00:01:57.850\nthat's the cost, SANs are expensive.\n\n39\n00:01:57.850 --> 00:02:01.900\nAnd you can get cheap SANs out there,\nyou can go on eBay or,\n\n40\n00:02:01.900 --> 00:02:06.390\ndiscount SAN.gov, or\nwhatever website it is that's out there.\n\n41\n00:02:06.390 --> 00:02:09.350\nI'm sure you can get cheap ones, but\nyou don't wanna rely on that for\n\n42\n00:02:09.350 --> 00:02:10.540\nyour critical storage.\n\n43\n00:02:10.540 --> 00:02:15.220\nSo, reliable SANs from brands\nthat you trust are expensive,\n\n44\n00:02:15.220 --> 00:02:16.490\nthey cost a lot of money.\n\n45\n00:02:16.490 --> 00:02:19.960\nSo in your production environment you\nvery well may have that, in your dev and\n\n46\n00:02:19.960 --> 00:02:22.570\ntest environment you may not,\nor if you're a small or\n\n47\n00:02:22.570 --> 00:02:26.950\nmedium business you may just not have\nthe budget available to do a true SAN.\n\n48\n00:02:26.950 --> 00:02:31.940\nSo what VMware did is they came up with\na technology called virtual SANs or VSAN.\n\n49\n00:02:31.940 --> 00:02:38.630\nAnd with VSANs you can take more than one\nserver, and put local storage in them,\n\n50\n00:02:38.630 --> 00:02:43.910\nand have the servers combine that\nlocal storage to create a virtual SAN.\n\n51\n00:02:43.910 --> 00:02:47.940\nIt's not a real dedicated hardware\nSAN It's a SAN made up of the local\n\n52\n00:02:47.940 --> 00:02:51.000\ndisks attached to each of\nthe hosts in your VMware farm,\n\n53\n00:02:51.000 --> 00:02:56.730\nright so if I have ten ESXI hosts,\nI can cluster them together.\n\n54\n00:02:56.730 --> 00:03:01.320\nI can put hard drives in all ten of them,\nideally matching configurations.\n\n55\n00:03:01.320 --> 00:03:03.980\nAnd then we can bond all\nthat together into one\n\n56\n00:03:03.980 --> 00:03:06.910\nvirtual SAN that now spans\nacross all ten posts.\n\n57\n00:03:06.910 --> 00:03:11.360\nAnd if one host fails, it's equivalent of\na couple of drives failing in the SAN.\n\n58\n00:03:11.360 --> 00:03:13.775\nSAN's can work, recover from\ndrive failures, so can the VSAN.\n\n59\n00:03:13.775 --> 00:03:17.805\nAnd so you continue on and you continue\noperating and virtual machines can jump\n\n60\n00:03:17.805 --> 00:03:21.615\nfrom hardware to hardware, because now\nthere's the effective same result of\n\n61\n00:03:21.615 --> 00:03:26.585\nhaving shared storage even though we don't\nactually have a SAN, its a neat option.\n\n62\n00:03:26.585 --> 00:03:31.795\nIt's not something that I've used in\nproduction a ton, I shouldn't say a ton.\n\n63\n00:03:31.795 --> 00:03:35.450\nI've never deployed VSANs in\na production environment because\n\n64\n00:03:35.450 --> 00:03:38.540\nIn production you'll traditionally use\na realsan, right, it's production.\n\n65\n00:03:38.540 --> 00:03:43.040\nYou need reliable shared hardware and the\ninvestment need for structure makes sense.\n\n66\n00:03:43.040 --> 00:03:46.850\nIn lab and RND, in test environments,\nin labs with test environments, for\n\n67\n00:03:46.850 --> 00:03:50.050\nsmall business with internal\nprojects vsans work great.\n\n68\n00:03:50.050 --> 00:03:52.890\nI have deployed them on a umber of\noccasions because it's just a huge\n\n69\n00:03:52.890 --> 00:03:55.490\nsolution that doesn't\nincur the huge costs.\n\n70\n00:03:55.490 --> 00:03:57.480\nAnd Don I know you've\nworked with SANS A a lot,\n\n71\n00:03:57.480 --> 00:03:59.020\nthe physical ones we're talking about.\n\n72\n00:03:59.020 --> 00:04:00.990\nWhen we look at performance wise,\n\n73\n00:04:00.990 --> 00:04:02.890\nthat's the first thing that I\nwould think of in the virtual SAN.\n\n74\n00:04:02.890 --> 00:04:05.550\nWhile it does give us the ability to\nimplement one of these, what are we\n\n75\n00:04:05.550 --> 00:04:08.600\nlooking at when it comes to performance\ncompared to the traditional SAN?\n\n76\n00:04:08.600 --> 00:04:11.280\n>> So\nit kinda depends on how you configure it.\n\n77\n00:04:11.280 --> 00:04:15.130\nIn some aspects a VSAN can actually\nbe faster than a traditional SAN in\n\n78\n00:04:15.130 --> 00:04:15.920\nsome aspects.\n\n79\n00:04:15.920 --> 00:04:20.750\nI mean the stars have to be in\nalignment what happens is, you have\n\n80\n00:04:20.750 --> 00:04:24.620\nlocal storage on your servers, and\nit's spread across more than one server.\n\n81\n00:04:24.620 --> 00:04:29.740\nSo if I have an ESXi host that happens\nto be running a virtual machine\n\n82\n00:04:29.740 --> 00:04:35.030\non that same host, whose storage is backed\nby disks that are also in that same host\n\n83\n00:04:35.030 --> 00:04:38.830\nthat entire communication happens\nright there inside of that hose.\n\n84\n00:04:38.830 --> 00:04:42.110\nIt can be very, very, very fast.\n\n85\n00:04:42.110 --> 00:04:45.090\nBut, if that's not in alignment,\nif the storage is on one host and\n\n86\n00:04:45.090 --> 00:04:46.730\nthe virtual machine's on another host,\n\n87\n00:04:46.730 --> 00:04:50.620\nnow we're communicating over\ntraditional networking, right?\n\n88\n00:04:50.620 --> 00:04:54.140\nWhen you set up a v setting it uses\nregular network adapters to communicate\n\n89\n00:04:54.140 --> 00:04:57.150\nbetween the systems and\nthat's a bottleneck.\n\n90\n00:04:57.150 --> 00:04:58.600\nIf you have a one gigabit network or\n\n91\n00:04:58.600 --> 00:05:01.960\na ten gigabit network, that's what your\ndata's gonna be moving at now, and\n\n92\n00:05:01.960 --> 00:05:04.240\nthat can be significantly lower\nthan what you would have in a san.\n\n93\n00:05:04.240 --> 00:05:04.940\nAll right?\n\n94\n00:05:04.940 --> 00:05:09.080\nSo, the other thing that factors\ninto this, are the discs themselves.\n\n95\n00:05:09.080 --> 00:05:10.990\nRight?\nWhen you purchase the discs,\n\n96\n00:05:10.990 --> 00:05:16.440\nyou're gonna get a certain amount of,\nlatency or latency's not the right word.\n\n97\n00:05:16.440 --> 00:05:20.100\nWhat are we measuring disc IO, I'm\nforgetting the word, but when we do our\n\n98\n00:05:20.100 --> 00:05:24.290\nseek time and all of the response time for\nwhen we write to a drive.\n\n99\n00:05:24.290 --> 00:05:28.410\nIf you go all SSD, if you do all flash\ndrives, it's going to be pretty fast,\n\n100\n00:05:28.410 --> 00:05:31.630\nisn't it, but\nif you do traditional hard drives.\n\n101\n00:05:31.630 --> 00:05:33.470\nSpinning disk drives, magnetic disks,\n\n102\n00:05:33.470 --> 00:05:38.480\nit's going to be a little slower, and\nyou can mix them or you can go exclusive.\n\n103\n00:05:38.480 --> 00:05:40.940\nThere's actually two models for\ndoing a VSAN.\n\n104\n00:05:40.940 --> 00:05:42.260\nSo let's talk about the two models.\n\n105\n00:05:42.260 --> 00:05:45.610\nThere's what's called hybrid and\nall-flash, okay.\n\n106\n00:05:45.610 --> 00:05:50.690\nAnd like the names imply, hybrid is\nwhen we mix magnetic disks with solid\n\n107\n00:05:50.690 --> 00:05:56.560\nstate disks, and then all-flash is\nwhen we just have entire Entirely SSD.\n\n108\n00:05:56.560 --> 00:05:58.810\nNow when you go to deploy a virtual SAN,\n\n109\n00:05:58.810 --> 00:06:03.250\nI guess I should mention this, it's a\nlower cost than a SAN, but it's not free.\n\n110\n00:06:03.250 --> 00:06:05.480\nYou actually have to have a license for\nvirtual SAN,\n\n111\n00:06:05.480 --> 00:06:08.880\nit's a licensed feature that's\nnot included, even if you\n\n112\n00:06:08.880 --> 00:06:13.530\nhave vSphere 6 Enterprise Plus with\nOperations Management, right, the big one.\n\n113\n00:06:13.530 --> 00:06:15.110\nIt doesn't include VSAN support.\n\n114\n00:06:15.110 --> 00:06:17.970\nYou have to buy the VSAN license,\nand when you buy the license,\n\n115\n00:06:17.970 --> 00:06:18.920\nit comes in two modes.\n\n116\n00:06:18.920 --> 00:06:22.750\nIt comes in the standard mode and\nthe advanced mode, standard is geared for\n\n117\n00:06:22.750 --> 00:06:26.180\nhybrid, and\nthe advanced is geared for all Flash.\n\n118\n00:06:26.180 --> 00:06:28.370\nSo if you wanna go all Flash,\nyou certainly can.\n\n119\n00:06:28.370 --> 00:06:32.180\nYou're gonna have a really fast VSAN\nthat's now just limited by your network\n\n120\n00:06:32.180 --> 00:06:37.090\nbandwidth, and if you do the hybrid,\nyou can have magnetic and Flash mixed.\n\n121\n00:06:37.090 --> 00:06:39.830\nYou have Flash that's tier one storage and\n\n122\n00:06:39.830 --> 00:06:41.930\nthen you have your magnetic\nmedia that's Tier two.\n\n123\n00:06:41.930 --> 00:06:46.210\nSo everything that's being written is\ngoing to that tier two storage, but\n\n124\n00:06:46.210 --> 00:06:49.950\nwhen you're doing reads, the reads will\nget cached up to tier one storage.\n\n125\n00:06:49.950 --> 00:06:52.250\nKinda like the V Flash we talked\nabout it in another episode.\n\n126\n00:06:52.250 --> 00:06:56.270\nVery similar here but part of the V San,\nand it's all handled automatically for us.\n\n127\n00:06:56.270 --> 00:07:00.560\nSo we can go to a hybrid model and\nreally get some efficiencies out of that.\n\n128\n00:07:00.560 --> 00:07:03.440\nYou get a lot of efficiencies on the read\nside, on the write side not so much,\n\n129\n00:07:03.440 --> 00:07:05.660\ncuz your writes are going\nto the tier two storage.\n\n130\n00:07:05.660 --> 00:07:09.370\nSo when we go to plan this out,\nthis is something we need to think about,\n\n131\n00:07:09.370 --> 00:07:13.500\nbecause we're gonna need a license,\nwe're going to need a hard drive, but\n\n132\n00:07:13.500 --> 00:07:16.900\nwe're also going to need network\nbandwidth for this to work.\n\n133\n00:07:16.900 --> 00:07:22.650\nAnd if you're going hybrid,\nyour disk, like a SATA disk or\n\n134\n00:07:22.650 --> 00:07:26.690\neven a lot of the SCSI disks these days\nis right at about six gigabit, right?\n\n135\n00:07:26.690 --> 00:07:30.890\nSo if I do a one gigabit\nconnection between my servers,\n\n136\n00:07:30.890 --> 00:07:34.670\nIs that gonna be enough to do\ndata migrations on my VSAN?\n\n137\n00:07:34.670 --> 00:07:38.410\nIf I have a virtual machine whose VMDKs,\nthe virtual disks,\n\n138\n00:07:38.410 --> 00:07:41.450\nare on one host, and I need to move\nthem to drives on to another host,\n\n139\n00:07:41.450 --> 00:07:43.680\nhow long is that gonna take\nover a gigabit adapter?\n\n140\n00:07:43.680 --> 00:07:45.190\nIt might take too long.\n\n141\n00:07:45.190 --> 00:07:47.650\nWell, on a hybrid model,\nI might be okay with that.\n\n142\n00:07:47.650 --> 00:07:50.190\nWhen I'm in an all Flash model,\nit's not gonna be enough.\n\n143\n00:07:50.190 --> 00:07:52.686\nSo if I'm doing all Flash from my VSAN,\n\n144\n00:07:52.686 --> 00:07:57.162\nI really need to step up to a ten\ngigabit network in between my servers.\n\n145\n00:07:57.162 --> 00:07:59.345\nAnd that way they can move\nthat data between them.\n\n146\n00:07:59.345 --> 00:08:03.380\nYou know I'm talking about it\nin generalized concepts here.\n\n147\n00:08:03.380 --> 00:08:06.710\nLet's, I whipped up a few diagrams\nto kind of help understand this.\n\n148\n00:08:06.710 --> 00:08:11.030\nLet me show you guys some pictures here\nand I'm not the diagram king so these\n\n149\n00:08:11.030 --> 00:08:14.690\nare a little simplistic, and I apologize\nfor that but it'll get the point across.\n\n150\n00:08:14.690 --> 00:08:18.670\nThis a traditional stand when we normally\ndeploy a SAN you've got servers that\n\n151\n00:08:18.670 --> 00:08:21.980\nare plugged into a fiber channel switch,\nand the fiber channel switch is plugged\n\n152\n00:08:21.980 --> 00:08:25.320\ninto a SAN and\nall the drives are right here on that SAN.\n\n153\n00:08:25.320 --> 00:08:30.590\nSo, we have a cost, in the SAN itself,\nyou've got the storage processors,\n\n154\n00:08:30.590 --> 00:08:34.380\nthe discs, the array,\nthe power supplies, all of that.\n\n155\n00:08:34.380 --> 00:08:38.070\nThen you've got the fiber channel switch,\nwhich is typically dedicated and\n\n156\n00:08:38.070 --> 00:08:39.990\nit's got a cost associated with it, and\n\n157\n00:08:39.990 --> 00:08:43.710\nyou've got Fiber HBA's in each of your\nservers that are connecting to it.\n\n158\n00:08:43.710 --> 00:08:46.450\nAll of that is part of that storage array.\n\n159\n00:08:46.450 --> 00:08:48.970\nOkay, and that's where our cost comes in.\n\n160\n00:08:48.970 --> 00:08:52.350\nYou know, even a basic SAN these\ndays is gonna be about $30,000 and\n\n161\n00:08:52.350 --> 00:08:55.150\nthey go up from there,\nit adds up really fast, all right.\n\n162\n00:08:55.150 --> 00:09:01.700\nSo as an alternative, we can do a VSAN,\nand with VSAN what we have is our servers\n\n163\n00:09:01.700 --> 00:09:05.060\nis our servers have local storage, just\nhard drives right there in the server.\n\n164\n00:09:05.060 --> 00:09:09.690\nAnd we don't need fiber channel H-P-As,\nwe don't need a fiber channel switch,\n\n165\n00:09:09.690 --> 00:09:12.830\nwe don't need storage processors,\nwe don't need a SAN array,\n\n166\n00:09:12.830 --> 00:09:16.780\nwe don't need extra power supplies, it's\njust drives right inside of the server.\n\n167\n00:09:16.780 --> 00:09:19.440\nEvery server can hold a few\nhard drives inside of it.\n\n168\n00:09:19.440 --> 00:09:22.390\nEven the one use servers can hold at\nleast two hard drives in there, so\n\n169\n00:09:22.390 --> 00:09:26.490\nyou slap a couple of terabyte drives\nin there and off you go, right, and\n\n170\n00:09:26.490 --> 00:09:29.470\nthen they can communicate\nover a traditional network.\n\n171\n00:09:29.470 --> 00:09:33.380\nInstead of having a fiber channel switch,\nI can just have a regular gigabit, or\n\n172\n00:09:33.380 --> 00:09:35.435\n10 gigabit Gigabit ethernet switch.\n\n173\n00:09:35.435 --> 00:09:38.115\nAnd they can communicate across that link,\n\n174\n00:09:38.115 --> 00:09:40.425\nto virtually bond all\nthese drives together.\n\n175\n00:09:40.425 --> 00:09:43.535\n>> Now Don does that change the protocol,\nas far as SCSI goes.\n\n176\n00:09:43.535 --> 00:09:48.575\nIs this FCOE coming out, and being put on\nthat traditional ethernet based network?\n\n177\n00:09:48.575 --> 00:09:52.025\n>> So, VMware's actually kind\nof light on the details of this.\n\n178\n00:09:52.025 --> 00:09:53.555\nThis is VMware proprietary.\n\n179\n00:09:53.555 --> 00:09:56.915\nLike this is something that VMware\ncame up with, that only they support,\n\n180\n00:09:56.915 --> 00:09:58.710\nyou can't mix with other vendors, and\n\n181\n00:09:58.710 --> 00:10:02.220\nso I honestly don't know what\nit is that uses on the back end.\n\n182\n00:10:02.220 --> 00:10:05.880\nI know that this isn't ethernet network,\nit is TCPIP based,\n\n183\n00:10:05.880 --> 00:10:08.470\nyou'll use IPV4 address\nto communicate across it.\n\n184\n00:10:08.470 --> 00:10:11.510\nWhat we're actually setting up\nhere are Vkernal adapters right.\n\n185\n00:10:11.510 --> 00:10:15.380\nRemember from the networking episodes\nwe talked about VM kernal adaptors,\n\n186\n00:10:15.380 --> 00:10:19.320\nlike our management adaptor, or\nVMotion, uses VM kernel adapters.\n\n187\n00:10:19.320 --> 00:10:23.640\nWe'll set up dedicated VM kernel\nadapters to be able to support the VSAN.\n\n188\n00:10:23.640 --> 00:10:24.270\nAll right?\n\n189\n00:10:24.270 --> 00:10:26.990\nAnd, when we do that,\nwe'll assign them an IPV4 address, and\n\n190\n00:10:26.990 --> 00:10:30.150\nthese hosts all need to be able to\nsee each other via that network.\n\n191\n00:10:30.150 --> 00:10:32.910\nSo, this is a traditional IPV4 network.\n\n192\n00:10:32.910 --> 00:10:37.750\nNow, whether it does fiber channel over\nethernet, or whether it does iSCSI, or\n\n193\n00:10:37.750 --> 00:10:39.780\nwhatever, I can't really say.\n\n194\n00:10:39.780 --> 00:10:43.770\nIt's not actually sending storage\ncommands over these links though.\n\n195\n00:10:43.770 --> 00:10:47.520\nWhat we're doing is, the host is talking\nto the storage just like normal,\n\n196\n00:10:47.520 --> 00:10:50.200\ntalking to it's own drivers just\nlike it normally would, and\n\n197\n00:10:50.200 --> 00:10:52.960\nthis network is getting used for\nmore synchronizing data.\n\n198\n00:10:52.960 --> 00:10:55.190\nSo if I have a virtual machine here, and\n\n199\n00:10:55.190 --> 00:10:59.120\nit's got some VMDKs stored on this first\ndisk, I need to be synchronizing that to\n\n200\n00:10:59.120 --> 00:11:03.630\nanother disk in the array, otherwise\nI can't survive a failure, right?\n\n201\n00:11:03.630 --> 00:11:06.290\nIf this host were to fail it would\nlose the VMDKs, they need to be copied\n\n202\n00:11:06.290 --> 00:11:11.540\nsomewhere else, and so it's doing\nreplication across these links, more so\n\n203\n00:11:11.540 --> 00:11:17.570\nthan like actual storage commands,\nand then they use their own for that.\n\n204\n00:11:17.570 --> 00:11:21.220\nAlright now when we configure\nsomething like this\n\n205\n00:11:21.220 --> 00:11:23.640\nit creates a really neat environment.\n\n206\n00:11:23.640 --> 00:11:27.018\nYou certainly not get gonna get the same\nperformance you would that having a fiber\n\n207\n00:11:27.018 --> 00:11:30.512\nchannel but you guys could see that\nthe cost can be significantly lower.\n\n208\n00:11:30.512 --> 00:11:33.863\nThe VM curl adapters here, you will\nwant those to be dedicated adapters,\n\n209\n00:11:33.863 --> 00:11:36.530\nyou do not wanna share with anything else.\n\n210\n00:11:36.530 --> 00:11:40.070\nDon't make it be a management network,\ndon't make it be v motion.\n\n211\n00:11:40.070 --> 00:11:43.450\nJust use it for the vsan, because\nthe vsan will really peg that line out.\n\n212\n00:11:43.450 --> 00:11:46.640\nIf you have a gigabyte you can pretty\nmuch guarantee it will be maxed out.\n\n213\n00:11:46.640 --> 00:11:48.480\n>> Now you mentioned\nthe license [INAUDIBLE].\n\n214\n00:11:48.480 --> 00:11:50.860\nMy company doesn't have $30,000 and up.\n\n215\n00:11:50.860 --> 00:11:54.330\nWe don't have that capability or\nfunds to implement a traditional SAN,\n\n216\n00:11:54.330 --> 00:11:57.310\nwhat are the requirements other than\nthe license that you've mentioned,\n\n217\n00:11:57.310 --> 00:11:59.490\nin order to get this up and\nrunning and functional?\n\n218\n00:11:59.490 --> 00:12:01.840\n>> So there's the license, right?\n\n219\n00:12:01.840 --> 00:12:04.590\nThen, there's a little bit of hardware\nconfiguration that has to happen on\n\n220\n00:12:04.590 --> 00:12:05.130\nyour server.\n\n221\n00:12:05.130 --> 00:12:07.880\nSo you can't just use any old\nserver that's laying around,\n\n222\n00:12:07.880 --> 00:12:09.040\nthere's some minimums.\n\n223\n00:12:09.040 --> 00:12:13.590\nIf you go back and watch the ESXI\nepisode where we showed installing ESXI,\n\n224\n00:12:13.590 --> 00:12:18.190\nI said how the minimum amount of RAM for\nan ESXI host was four gigabytes, right?\n\n225\n00:12:18.190 --> 00:12:22.190\nWell if you're gonna run a VSAN,\nthe minimum is six gigs.\n\n226\n00:12:22.190 --> 00:12:26.550\nLike you can't do a VSAN on an ESXI\nhost with less than six gigs or any.\n\n227\n00:12:26.550 --> 00:12:30.520\nYou have to have six, but\nthat's not even VMware's recommendation.\n\n228\n00:12:30.520 --> 00:12:34.100\nVMware's recommendation is 32 gigs, that\nyou need to have at least 32 gigs of ram\n\n229\n00:12:34.100 --> 00:12:37.890\nin each ESXI host to be\nable to support the VSAN.\n\n230\n00:12:37.890 --> 00:12:39.750\nThe VCN eats up memory, right?\n\n231\n00:12:39.750 --> 00:12:44.250\nIt's building up these arrays and\nit's handling a lot of it in software.\n\n232\n00:12:44.250 --> 00:12:46.630\nYou don't even have to\nbuild rays on these things.\n\n233\n00:12:46.630 --> 00:12:47.840\nA lot of times you will, right?\n\n234\n00:12:47.840 --> 00:12:51.900\nSo when I show this diagram here and\nI've got these servers restored.\n\n235\n00:12:51.900 --> 00:12:56.560\nThis might be three drives in array five\narray or three drives in array zero array\n\n236\n00:12:56.560 --> 00:13:01.360\nor something like that, and so now the VCN\njust seems it as one drive, right.\n\n237\n00:13:01.360 --> 00:13:05.500\nBut I could actually leave these as three\nindependent disks, and the will grab them\n\n238\n00:13:05.500 --> 00:13:09.110\nand merge them all together for me,\nthen now I'm basically doing software raid\n\n239\n00:13:09.110 --> 00:13:11.810\nwhich, again, eats up some RAM\nwhile it's processing all of that.\n\n240\n00:13:11.810 --> 00:13:16.140\nSo they really want 32 GB of RAM,\nbut 6 GB is the actual minimum,\n\n241\n00:13:16.140 --> 00:13:18.860\nso if we try and trim this down\nto less than 6 GB it'll fail,\n\n242\n00:13:18.860 --> 00:13:20.610\nif we have 6 GB it'll actually turn on.\n\n243\n00:13:20.610 --> 00:13:23.830\nSo we need to have that, I already\nmentioned network adaptors, right?\n\n244\n00:13:23.830 --> 00:13:27.200\nif you're doing hybrid you can get\naway with a one gig adapter if\n\n245\n00:13:27.200 --> 00:13:31.830\nyou're doing all flash you really need\nto have a ten gig adapter, or more 40\n\n246\n00:13:31.830 --> 00:13:35.970\ngig adapters are becoming pretty common\nthese days that would be even better.\n\n247\n00:13:35.970 --> 00:13:40.870\nThink about your drives, most drives these\ndays are six gigabit drives, when you\n\n248\n00:13:40.870 --> 00:13:43.630\nbuy that brand new, shiny hard drive,\nwhen you look right on the cover and\n\n249\n00:13:43.630 --> 00:13:48.370\nit says six gigabit data transfer rate, if\nyou are only using a one gigabit network,\n\n250\n00:13:48.370 --> 00:13:52.050\nwhat did you just do,\nyou've hamstrung yourself.\n\n251\n00:13:52.050 --> 00:13:54.530\nYou can't support\nthe bandwidth of that drive.\n\n252\n00:13:54.530 --> 00:13:57.950\nYou are just sending synchronization data,\nit may not be that bad but you are likely\n\n253\n00:13:57.950 --> 00:14:02.540\ngoing to be behind, and so if a failure\never occurs, you just lost data.\n\n254\n00:14:02.540 --> 00:14:05.740\nYour server will come but you lost a few\nminutes of data cuz that's how far\n\n255\n00:14:05.740 --> 00:14:07.230\nbehind you were on your\nsynchronization organization.\n\n256\n00:14:07.230 --> 00:14:08.540\nSo we don't want that.\n\n257\n00:14:08.540 --> 00:14:10.150\nWe wanna make sure that we\nhave the bandwidth for it.\n\n258\n00:14:10.150 --> 00:14:13.330\nSo little bit on the hardware\nside to accommodate, but\n\n259\n00:14:13.330 --> 00:14:16.560\nonce we've got that,\nwe're pretty much ready to go.\n\n260\n00:14:16.560 --> 00:14:21.410\nOne big fat work of caution I wanna throw\nout here If you're going to deploy VSANs,\n\n261\n00:14:21.410 --> 00:14:25.010\nit is really important,\nsuper important, mega important\n\n262\n00:14:25.010 --> 00:14:29.000\nthat all of your hardware be on\nthe hardware compatibility list, the HCL.\n\n263\n00:14:29.000 --> 00:14:30.820\nI'll put a link in the show notes for\nthis.\n\n264\n00:14:30.820 --> 00:14:33.840\nIf you go to VMWare's website and\ngo to the hardware compatibility list,\n\n265\n00:14:33.840 --> 00:14:38.010\nyou can actually search for VSAN and it'll\nturn up all the hardware that's supported.\n\n266\n00:14:38.010 --> 00:14:41.350\nYou want to make sure that your network\nadapters, your hard drives, and all that\n\n267\n00:14:41.350 --> 00:14:45.710\nis on the HCL, the reality is the VSAN\nworks pretty well on darn near everything.\n\n268\n00:14:45.710 --> 00:14:48.620\nI don't think I've ever run into\nhardware where it wouldn't run,\n\n269\n00:14:48.620 --> 00:14:49.910\nas long as you had enough.\n\n270\n00:14:49.910 --> 00:14:52.360\nI have tried about a four gig system,\nit didn't work [LAUGH].\n\n271\n00:14:52.360 --> 00:14:57.690\nSo as long as you have the resources,\nit will run, but VMware might not support\n\n272\n00:14:57.690 --> 00:15:03.540\nyou, and because this SAN exists entirely\nin the vSphere realm, you really need\n\n273\n00:15:03.540 --> 00:15:08.120\nsomebody to help if something goes wrong,\nand VMware, they're that person, right?\n\n274\n00:15:08.120 --> 00:15:11.170\nSo we want them to be able to help us\nmake sure your hardware is on the HCL.\n\n275\n00:15:12.350 --> 00:15:17.060\nAll right, so one other thing,\njust kind of a guideline that VMware\n\n276\n00:15:17.060 --> 00:15:19.890\nthrows out there,\nif you're doing the hybrid model.\n\n277\n00:15:19.890 --> 00:15:23.190\nIf you're doing all flash, 100% of\nyour drives are gonna be flash drives.\n\n278\n00:15:23.190 --> 00:15:28.680\nIf you're doing hybrid, their\nrecommendation is that 90% of your storage\n\n279\n00:15:28.680 --> 00:15:31.450\nbe magnetic, and\n10% of your storage be flash.\n\n280\n00:15:31.450 --> 00:15:34.340\nNow, you can certainly mix it up,\nand you can go 50/50 if you want,\n\n281\n00:15:34.340 --> 00:15:38.150\nit's not gonna to stop you, but\ntheir recommendation is 90/10.\n\n282\n00:15:38.150 --> 00:15:42.918\nAnd the theory is that you really\non access about 10% of your data\n\n283\n00:15:42.918 --> 00:15:44.801\nfrequently Frequently.\n\n284\n00:15:44.801 --> 00:15:47.953\nthe other 90% is infrequent, like when\nyou boot your operating system, right?\n\n285\n00:15:47.953 --> 00:15:50.599\nYeah, you gotta read all those Windows\nfiles, all those Linux files, and\n\n286\n00:15:50.599 --> 00:15:51.660\nyou load that stuff into RAM.\n\n287\n00:15:51.660 --> 00:15:55.609\nBut once that's done, you're not really\nreading it off the disk any more.\n\n288\n00:15:55.609 --> 00:15:59.326\nSo there's no point in having a bunch\nof flash cache available to store that\n\n289\n00:15:59.326 --> 00:16:01.636\nwhen we're not really\ngonna access it again.\n\n290\n00:16:01.636 --> 00:16:06.262\nSo 90% magnetic, 10% flash,\nif you're gonna do a mix.\n\n291\n00:16:06.262 --> 00:16:09.080\nIf you're not gonna do a mix,\nit's 100% flash.\n\n292\n00:16:09.080 --> 00:16:12.353\n>> So we've got our infrastructure ready,\nwe've met all the hardware requirements,\n\n293\n00:16:12.353 --> 00:16:13.637\nthe recommendations are there.\n\n294\n00:16:13.637 --> 00:16:16.752\nNow we're ready to get started\nwith the cluster in, or a VSAN, so\n\n295\n00:16:16.752 --> 00:16:19.510\nI guess you're gonna give\nus a demonstration of that.\n\n296\n00:16:19.510 --> 00:16:20.304\n>> Sure thing.\n\n297\n00:16:20.304 --> 00:16:22.853\nLet's jump right into\nmy little console here.\n\n298\n00:16:22.853 --> 00:16:26.480\nI do need to mention one\nthing that I didn't mention.\n\n299\n00:16:26.480 --> 00:16:29.510\nBefore we get started,\nwe need to have a dedicated adapter.\n\n300\n00:16:29.510 --> 00:16:33.321\nWe need to have a network adapter that\nwe're going to be using just for the VSAN.\n\n301\n00:16:33.321 --> 00:16:36.500\nAnd this doesn't cost any extra money,\nthere's no license here.\n\n302\n00:16:36.500 --> 00:16:39.102\nBut we need to go and define that setup.\n\n303\n00:16:39.102 --> 00:16:41.221\nSo what I normally do,\nmy recommendation and\n\n304\n00:16:41.221 --> 00:16:43.130\nsurely you don't have to do it this way.\n\n305\n00:16:43.130 --> 00:16:46.770\nMy recommendation is create a dedicated\ndistributed virtual switch.\n\n306\n00:16:46.770 --> 00:16:53.710\nSo create a DV switch which means that we\nreally need to have the vcnr enterprise.\n\n307\n00:16:53.710 --> 00:16:56.800\nRight so vcnr enterprise is where you\nget the distributive virtual switches.\n\n308\n00:16:56.800 --> 00:16:59.850\nIn vcnr standard,\nyou just have regular virtual switches and\n\n309\n00:16:59.850 --> 00:17:02.100\nyou can make this work with\nregular virtual switches.\n\n310\n00:17:02.100 --> 00:17:06.100\nBut because this is all gonna be part of\na cluster, you really want a DV switch.\n\n311\n00:17:06.100 --> 00:17:08.230\nA switch that exists\non more than one host.\n\n312\n00:17:08.230 --> 00:17:11.050\nSo this is kinda gonna be\na [INAUDIBLE] enterprise solution.\n\n313\n00:17:11.050 --> 00:17:11.710\nRight.\n\n314\n00:17:11.710 --> 00:17:15.460\nSo what I've done is I've got\na couple of hosts lying around so\n\n315\n00:17:15.460 --> 00:17:17.270\nlet me jump here into my hosts.\n\n316\n00:17:17.270 --> 00:17:21.700\nAnd I have a simple cluster created and\nthis is a cluster we actually created one\n\n317\n00:17:21.700 --> 00:17:24.020\nof the other show,\nit's called Lab Cluster, right.\n\n318\n00:17:24.020 --> 00:17:28.770\nAnd I've got esx-host01 and\nesx-host02 chucked into that cluster.\n\n319\n00:17:28.770 --> 00:17:32.630\nAnd as a part of that cluster,\nI've created a distributed virtual switch.\n\n320\n00:17:32.630 --> 00:17:34.130\nNow, if you haven't seen it,\n\n321\n00:17:34.130 --> 00:17:37.540\njump over to our Networking episode where\nwe cover distributive virtual switches.\n\n322\n00:17:37.540 --> 00:17:41.676\nBut I created a DV switch,\nwhich I've got right here, called vSAN.\n\n323\n00:17:41.676 --> 00:17:44.970\nAnd I just named it that so\nI could remember why I made it.\n\n324\n00:17:44.970 --> 00:17:46.320\nWhy the heck did I make that switch?\n\n325\n00:17:46.320 --> 00:17:47.680\nYeah, that's the one for vSAN.\n\n326\n00:17:47.680 --> 00:17:52.100\nNow, I did a dedicated\ndistributive virtual switch.\n\n327\n00:17:52.100 --> 00:17:53.370\nYou don't have to.\n\n328\n00:17:53.370 --> 00:17:56.980\nYou could just do port groups\nunder the existing DV switch.\n\n329\n00:17:56.980 --> 00:17:58.980\nSo, if you've already got\na DV switch in place,\n\n330\n00:17:58.980 --> 00:18:01.100\nyou could just create a port group for\nthe vSAN.\n\n331\n00:18:01.100 --> 00:18:03.809\nAnd use that to tie it in place,\nand it's just in one switch now.\n\n332\n00:18:03.809 --> 00:18:07.800\nIf you wanna keep it simple, I'm just in\nthe habit of always separating it out.\n\n333\n00:18:07.800 --> 00:18:10.990\nI like to keep it completely separate for\ntroubleshooting and monitoring purposes.\n\n334\n00:18:10.990 --> 00:18:12.770\nIt makes it a little bit easier,\nin my opinion.\n\n335\n00:18:12.770 --> 00:18:16.410\nSo, unless you're just completely\naverse to having multiple switches,\n\n336\n00:18:16.410 --> 00:18:18.470\nI recommend doing a dedicated one.\n\n337\n00:18:18.470 --> 00:18:20.747\nSo, I've got this vSAN DV switch, and\n\n338\n00:18:20.747 --> 00:18:25.033\ninside of it I've made one port group\ncalled the vSANPortGroup, right?\n\n339\n00:18:25.033 --> 00:18:26.114\nJust a standard port group,\n\n340\n00:18:26.114 --> 00:18:28.620\nnothing magical about this thing at all,\nall right.\n\n341\n00:18:28.620 --> 00:18:33.202\nNow, when I created that port group I\ndesigned that to be the one that's gonna\n\n342\n00:18:33.202 --> 00:18:34.480\nbe used for the vSAN.\n\n343\n00:18:34.480 --> 00:18:38.478\nNow I didn't actually do anything to it,\nI just named it vSAN port group but\n\n344\n00:18:38.478 --> 00:18:40.520\nit's just a traditional port group.\n\n345\n00:18:40.520 --> 00:18:44.620\nSo I could have added that to one\nof my other virtual switches and\n\n346\n00:18:44.620 --> 00:18:46.350\nit would be the same result.\n\n347\n00:18:46.350 --> 00:18:49.134\nOkay, so then what I need to do is,\n\n348\n00:18:49.134 --> 00:18:53.659\nevery host that's gonna be\nparticipating in the VSAN.\n\n349\n00:18:53.659 --> 00:18:57.870\nIs going to need to have a VM kernel\nadaptor that's a part of that port group.\n\n350\n00:18:57.870 --> 00:19:00.100\nCuz they need to be able\nto see each other, right?\n\n351\n00:19:00.100 --> 00:19:03.040\nAnd so that's how they're gonna do it,\nis via that port group.\n\n352\n00:19:03.040 --> 00:19:05.730\nAnd remember that whenever you\ncreate a VM kernel adapter,\n\n353\n00:19:05.730 --> 00:19:08.100\nyou've got to pick a port group for\nit to be attached to.\n\n354\n00:19:08.100 --> 00:19:12.643\nAnd you have to pick the services that\nare available on the adapter, right.\n\n355\n00:19:12.643 --> 00:19:16.160\nSo if I were to jump back and\ntake a look at my hosts.\n\n356\n00:19:16.160 --> 00:19:21.530\nI'll take host 01 here, host 01,\nwhen I go to manage and\n\n357\n00:19:21.530 --> 00:19:24.339\nnetworking and VMkernel adapters.\n\n358\n00:19:25.500 --> 00:19:27.430\nSee, I've got two VMkernel adapters.\n\n359\n00:19:27.430 --> 00:19:30.070\nThe first one is the default one that\nwas created when the management network\n\n360\n00:19:30.070 --> 00:19:30.810\nwas setup, right?\n\n361\n00:19:30.810 --> 00:19:32.100\nSo that one is there by default.\n\n362\n00:19:32.100 --> 00:19:35.080\nI usually don't mess with that one cuz I\ndon't wanna lock myself out of the system,\n\n363\n00:19:35.080 --> 00:19:36.650\nand you can do that.\n\n364\n00:19:36.650 --> 00:19:40.700\nI created a new VMkernel adapter and\nattached it to that vSan\n\n365\n00:19:40.700 --> 00:19:43.830\ndistributed virtual switch,\nwhich is attached right there.\n\n366\n00:19:43.830 --> 00:19:46.880\nIf I edit that adapter and\nlook at it's settings,\n\n367\n00:19:46.880 --> 00:19:49.330\nyou'll see the various services\nthat can be chosen for it.\n\n368\n00:19:49.330 --> 00:19:52.550\nAnd I've only chosen one,\nVirtual SAN traffic.\n\n369\n00:19:52.550 --> 00:19:57.860\nI created a VM kernel adapter\nthat just does VSAN traffic.\n\n370\n00:19:57.860 --> 00:20:01.710\nAll the hosts that are gonna be\nin the VSAN need this same setup.\n\n371\n00:20:01.710 --> 00:20:03.250\nIt doesn't have to be the same number,\nright?\n\n372\n00:20:03.250 --> 00:20:06.884\nThis is VMK1, for me, right it can\nbe VMK2 on another system or VMK12,\n\n373\n00:20:06.884 --> 00:20:08.225\ndoesn't matter, right.\n\n374\n00:20:08.225 --> 00:20:12.731\nAs long as it's configured to handle\nvirtual SAN traffic and it's plugged into\n\n375\n00:20:12.731 --> 00:20:16.778\nthe same port group so that they\ncan communicate, that's important.\n\n376\n00:20:16.778 --> 00:20:20.002\nAnd then on the IPV4 setting side,\nor you can do IPV6,\n\n377\n00:20:20.002 --> 00:20:25.170\nwe have to have network connectivity, and\nso I've given it an IP address, right?\n\n378\n00:20:25.170 --> 00:20:27.450\nIt needs to be able to\ncommunicate with the other host,\n\n379\n00:20:27.450 --> 00:20:28.820\notherwise the VCN doesn't work.\n\n380\n00:20:29.920 --> 00:20:33.500\nNow, when I join a host\ninto this environment,\n\n381\n00:20:33.500 --> 00:20:36.320\nthere's two different roles that can play.\n\n382\n00:20:36.320 --> 00:20:40.310\nWhat you have is a actual VSAN member,\n\n383\n00:20:40.310 --> 00:20:43.510\nthat's somebody who's hosting\nstorage as part of the VSAN.\n\n384\n00:20:43.510 --> 00:20:46.140\nOr you can have what's\ncalled a witness server.\n\n385\n00:20:46.140 --> 00:20:48.850\nA witness server is somebody\nwho's a part of the VSAN but\n\n386\n00:20:48.850 --> 00:20:51.470\ndoesn't actually have any storage.\n\n387\n00:20:51.470 --> 00:20:53.997\nThe purpose of the witness\nserver is not to hold storage,\n\n388\n00:20:53.997 --> 00:20:56.163\nbut to help us recognize\nwhen there is an outage.\n\n389\n00:20:56.163 --> 00:21:00.795\nWhen a node actually fails and I will\ntalk more about that a little bit later.\n\n390\n00:21:00.795 --> 00:21:04.235\nSo I might have witness servers attached\nalso that do not actually have storage.\n\n391\n00:21:04.235 --> 00:21:07.313\nBut at this point when I configure it,\nit really looks the same,\n\n392\n00:21:07.313 --> 00:21:08.858\nit does not look any different.\n\n393\n00:21:08.858 --> 00:21:12.740\nSo for example I've got this\nesx-host03 setting out here.\n\n394\n00:21:12.740 --> 00:21:14.730\nRight, this is another host.\n\n395\n00:21:14.730 --> 00:21:18.060\nThis host doesn't have any extra storage\non it, like those other guys do.\n\n396\n00:21:18.060 --> 00:21:21.032\nBut if I want to use it as a witness,\nI need to bring it into the cluster and\n\n397\n00:21:21.032 --> 00:21:22.979\nI need to bring into that d-v switch,\nright.\n\n398\n00:21:22.979 --> 00:21:25.884\nSo I can take host03, and\nI'm just gonna drag it and\n\n399\n00:21:25.884 --> 00:21:27.770\nchuck it right into that cluster.\n\n400\n00:21:28.950 --> 00:21:32.600\nAll right, and so it's gonna\njoin the cluster, there it goes.\n\n401\n00:21:32.600 --> 00:21:37.565\nAnd when I go into its networking and VM\nkernel adapters, it just has vmk0, right?\n\n402\n00:21:37.565 --> 00:21:40.447\nIt doesn't have vmk1\nlike the other guys did.\n\n403\n00:21:40.447 --> 00:21:41.668\nSo I can come in and\n\n404\n00:21:41.668 --> 00:21:46.830\nI can create a new VMkernel adapter\nto get that support put in place.\n\n405\n00:21:46.830 --> 00:21:51.780\nAnd when I do that, we can go in and\nget that attached to the other port group.\n\n406\n00:21:51.780 --> 00:21:53.680\nNow, you can do it from here.\n\n407\n00:21:53.680 --> 00:21:57.000\nI usually, there's a couple of\ndifferent ways you can go about it.\n\n408\n00:21:57.000 --> 00:22:00.810\nBut if we do it from here you'll see\nwhere it's got ad host networking.\n\n409\n00:22:01.820 --> 00:22:06.386\nAnd we can add a new VMKernel Network\nAdaptor, and as I move forward,\n\n410\n00:22:06.386 --> 00:22:09.084\nit's going to ask me the target device.\n\n411\n00:22:09.084 --> 00:22:13.790\nAnd it's showing it's own little vSwitch,\nbut if I browse, I can find the D vSwitch.\n\n412\n00:22:13.790 --> 00:22:16.770\nWell, see how my DV\nswitch isn't showing up?\n\n413\n00:22:16.770 --> 00:22:19.110\nBecause I just moved into the cluster,\nit's not seeing it.\n\n414\n00:22:19.110 --> 00:22:20.270\nI'm not a part of it yet.\n\n415\n00:22:20.270 --> 00:22:22.612\nSince I don't have any ports on it, I'm\nnot going to be able to do it this way.\n\n416\n00:22:22.612 --> 00:22:24.736\nSo sometimes you can go\nthis way in the wizard,\n\n417\n00:22:24.736 --> 00:22:28.180\nother times you actually have to do\nto the DV switch and add it there.\n\n418\n00:22:28.180 --> 00:22:32.747\nSo, I'm gonna switch up to my networking\nand I'm gonna find that DV switch,\n\n419\n00:22:32.747 --> 00:22:33.326\nmy vSAN.\n\n420\n00:22:33.326 --> 00:22:37.860\nAnd I need to add that host to the DV\nswitch so that it'll become aware to it.\n\n421\n00:22:37.860 --> 00:22:41.077\nSo when you right click on that,\nsee we've got to add and manage hosts.\n\n422\n00:22:41.077 --> 00:22:47.730\nI'm gonna go in and do that, and I'm\ngonna add EX host 03 to this DV switch.\n\n423\n00:22:47.730 --> 00:22:50.610\nNow, it doesn't matter that it doesn't\nhave any storage cuz nothing I've done so\n\n424\n00:22:50.610 --> 00:22:52.350\nfar actually has to do with the VSAN.\n\n425\n00:22:52.350 --> 00:22:54.310\nI'm getting infrastructure set up for\n\n426\n00:22:54.310 --> 00:22:57.440\nthe VSAN,\nnot actually configuring the VSAN yet.\n\n427\n00:22:57.440 --> 00:23:00.610\nSo, I'm gonna add host03 to the DV switch.\n\n428\n00:23:01.690 --> 00:23:02.260\nAnd I'll say, okay,\n\n429\n00:23:02.260 --> 00:23:06.190\nthis is the equivalent of taking it,\nand plugging it in to a switch, right?\n\n430\n00:23:06.190 --> 00:23:09.583\nSo the DV switch is like\na storage switch for me.\n\n431\n00:23:09.583 --> 00:23:11.730\nNow here's where it gets important.\n\n432\n00:23:11.730 --> 00:23:14.560\nBy default, it's going to want\nto set up the VMkernel adapter,\n\n433\n00:23:14.560 --> 00:23:15.940\nwhich is exactly what I want.\n\n434\n00:23:15.940 --> 00:23:18.350\nBut I also need to set\nup a physical adaptor.\n\n435\n00:23:18.350 --> 00:23:22.310\nThere's going to be a physical network\nadaptor that's just used for the VSAN.\n\n436\n00:23:22.310 --> 00:23:25.493\nAnd so, I need to make sure I choose that\ntune, not just the VMkernel adaptor or\n\n437\n00:23:25.493 --> 00:23:26.710\nit will end up not plugged in.\n\n438\n00:23:28.510 --> 00:23:29.050\nAll right, so\n\n439\n00:23:29.050 --> 00:23:33.130\non the next screen it's going to ask\nme which physical nick am I attaching?\n\n440\n00:23:33.130 --> 00:23:35.370\nAnd I've got three network\nadaptors in this server.\n\n441\n00:23:35.370 --> 00:23:37.950\nThe first one, vmnic0 is the one\nI've got on my default switch.\n\n442\n00:23:37.950 --> 00:23:40.680\nThat's how I'm connected to the server,\ni don't wanna mess with it.\n\n443\n00:23:40.680 --> 00:23:43.241\nBut vmnic1,\nthat's the one I'm using for my VSAN.\n\n444\n00:23:43.241 --> 00:23:47.407\nSo it's a physical adaptor running to\na dedicated switch that I'm just using for\n\n445\n00:23:47.407 --> 00:23:47.967\nthe VSAN.\n\n446\n00:23:47.967 --> 00:23:51.468\nSo I'm gonna assign that as an uplink,\nattach to uplink one.\n\n447\n00:23:51.468 --> 00:23:54.120\nYou see I have up to\nfour uplinks if I want.\n\n448\n00:23:54.120 --> 00:23:55.958\nI'm not going crazy here.\n\n449\n00:23:55.958 --> 00:23:56.659\nI'll just do one.\n\n450\n00:23:56.659 --> 00:23:58.926\nBut if it's your storage network,\nit's probably pretty important.\n\n451\n00:23:58.926 --> 00:24:01.124\nYou might wanna have\nmore than one adapter.\n\n452\n00:24:01.124 --> 00:24:03.602\nSo you can have failover, or\nmaybe you wanna go crazy and\n\n453\n00:24:03.602 --> 00:24:06.126\ndo things like LACP to\nincrease your bandwidth.\n\n454\n00:24:06.126 --> 00:24:10.990\nIf I had 2 10 gig adapters, I could bond\nthem together and get 20 gig of bandwidth.\n\n455\n00:24:10.990 --> 00:24:12.319\nThat'd be pretty useful\non a storage network.\n\n456\n00:24:14.820 --> 00:24:16.570\nAll right,\non the next screen it's just gonna ask me\n\n457\n00:24:17.800 --> 00:24:19.510\nbasically what it's gonna be a part of and\n\n458\n00:24:19.510 --> 00:24:24.850\nyou'll see here, I've got this vmk0 which\nis my VM kernel adapter for management.\n\n459\n00:24:24.850 --> 00:24:28.660\nI need to add a new adapter,\nwhich is gonna be my vmk1.\n\n460\n00:24:28.660 --> 00:24:33.680\nAnd I can attach that to an existing\nnetwork, and this time, I'll see my Vsan.\n\n461\n00:24:33.680 --> 00:24:35.140\nThere's my Vsan port group.\n\n462\n00:24:35.140 --> 00:24:35.900\nI didn't see that before,\n\n463\n00:24:35.900 --> 00:24:38.690\nbecause I wasn't actually attached\nto the DV switch, now I am.\n\n464\n00:24:38.690 --> 00:24:43.340\nAll right, so once we've got that,\nwe can punch it in, and here's the most\n\n465\n00:24:43.340 --> 00:24:47.550\nimportant page I'm going to bump into,\nwhich is if I pick my services.\n\n466\n00:24:47.550 --> 00:24:49.340\nI've got to enable it for VSan.\n\n467\n00:24:49.340 --> 00:24:52.290\nNow I could use this for\nother things but I don't want to.\n\n468\n00:24:52.290 --> 00:24:54.971\nThis is going to be dedicated just for\nVSan traffic.\n\n469\n00:24:54.971 --> 00:24:59.570\nAll right, and\nthen I do have to give it an IPv4 address.\n\n470\n00:24:59.570 --> 00:25:02.810\nIf you have a DHTP server, you can do\nthat, but if I've got a network dedicated\n\n471\n00:25:02.810 --> 00:25:07.560\njust for VSans, I probably don't want\na DHTP server on that network too, right?\n\n472\n00:25:07.560 --> 00:25:09.510\nI'm trying to be as efficient as possible,\nso\n\n473\n00:25:09.510 --> 00:25:13.700\nI'm gonna do a static IP, and\nI'll just punch that one in.\n\n474\n00:25:15.030 --> 00:25:18.668\nNotice how the Gateway here,\nthe router is wrong.\n\n475\n00:25:18.668 --> 00:25:22.680\nSo, the network I'm putting in is\n192.68.1 and the router is 192.68.0.\n\n476\n00:25:22.680 --> 00:25:25.017\nThat's okay.\n\n477\n00:25:25.017 --> 00:25:28.440\nBecause it's not actually routing\nany traffic over this link, anyway.\n\n478\n00:25:28.440 --> 00:25:31.670\nIf I had enabled some of my other\nprotocols, this would be a problem.\n\n479\n00:25:31.670 --> 00:25:35.012\nBut since it's just a Vsan,\nI don't care about that.\n\n480\n00:25:35.012 --> 00:25:39.598\nAnd the main reason is it's prioritizing\nthe gateway I've got on the other adaptor\n\n481\n00:25:39.598 --> 00:25:41.113\nfirst, vmk0 over vmk1.\n\n482\n00:25:41.113 --> 00:25:45.003\nAnd I'm okay with that because I'm\nnot actually routing traffic on it.\n\n483\n00:25:45.003 --> 00:25:46.010\nSame thing with DNS.\n\n484\n00:25:46.010 --> 00:25:48.170\nI'm not actually doing any DNS\nlookups over this interface, so\n\n485\n00:25:48.170 --> 00:25:52.480\nI don't really care if that's right or\nwrong, and then we can finish that up.\n\n486\n00:25:52.480 --> 00:26:00.030\nWhen that's done, what we're gonna end up\nwith, is that esx-host03 now has vmk1,\n\n487\n00:26:00.030 --> 00:26:05.240\nthat's plugged into the Vsan switch,\nthat's enabled for Vsan traffic.\n\n488\n00:26:05.240 --> 00:26:08.810\nNow it's able to communicate to the Vsan.\n\n489\n00:26:08.810 --> 00:26:11.720\nIf I didn't have this done,\nthe Vsan wouldn't be able to communicate.\n\n490\n00:26:11.720 --> 00:26:13.900\nIt would let me set it up,\nit just wouldn't work.\n\n491\n00:26:13.900 --> 00:26:15.100\nWaste my time.\n\n492\n00:26:15.100 --> 00:26:21.050\nSo this is an important preparatory step\nto get us where we can deploy the Vsan.\n\n493\n00:26:21.050 --> 00:26:22.370\nOnce that's done,\n\n494\n00:26:22.370 --> 00:26:27.300\nnow I've got all three of those hosts\nin place and we're ready to rock.\n\n495\n00:26:27.300 --> 00:26:32.810\nAll right, so technically I still haven't\ndone anything in relation to the Vsan.\n\n496\n00:26:32.810 --> 00:26:36.090\nWe're just getting our infrastructure\nin place, getting things ready, okay.\n\n497\n00:26:36.090 --> 00:26:41.220\nNow I mentioned that host 03\ndoesn't have storage, okay.\n\n498\n00:26:41.220 --> 00:26:43.210\nIt's got storage, storage for its OS.\n\n499\n00:26:43.210 --> 00:26:48.680\nBut on ESX Host01,\nI've got a 500 gig magnetic drive.\n\n500\n00:26:48.680 --> 00:26:52.250\nAnd I've got a 128 gig flash drive,\nthat are sitting there,\n\n501\n00:26:52.250 --> 00:26:54.380\nready to go in for storage.\n\n502\n00:26:54.380 --> 00:27:00.120\nOn ESX Host 02 I've got a 500 gig\nmagnetic drive, and 128 gig flash drive.\n\n503\n00:27:00.120 --> 00:27:01.610\nAnd so\nthey're ready to go into a hybrid mode.\n\n504\n00:27:02.850 --> 00:27:05.910\nOn ESX Host 03 I just have\nthe OS drive and that's it.\n\n505\n00:27:05.910 --> 00:27:07.900\nI don't have extra drives in it.\n\n506\n00:27:07.900 --> 00:27:11.510\nI'm gonna use it as a witness host, okay?\n\n507\n00:27:11.510 --> 00:27:12.670\nLets talk about a witness host.\n\n508\n00:27:13.700 --> 00:27:19.720\nOfficially, if you want to deploy a Vsan,\nyou need a minimum of three hosts.\n\n509\n00:27:19.720 --> 00:27:20.810\nNow, I say officially.\n\n510\n00:27:20.810 --> 00:27:21.970\nYou can actually do two.\n\n511\n00:27:21.970 --> 00:27:25.930\nIf I want to do a Vsan deployment\nwith two hosts, I can do it.\n\n512\n00:27:25.930 --> 00:27:30.830\nThe problem is the two hosts can\nmake mistakes about whether or\n\n513\n00:27:30.830 --> 00:27:35.100\nnot they should go active for\na setup storage or not, okay?\n\n514\n00:27:35.100 --> 00:27:37.360\nYou really need three hosts.\n\n515\n00:27:37.360 --> 00:27:41.910\nYou need three so that they can properly\ndetermine when a failure occurs.\n\n516\n00:27:41.910 --> 00:27:44.430\nAnd the way that happens is through\nwhat's called a fault domain.\n\n517\n00:27:44.430 --> 00:27:46.220\nSo let me talk about fault\ndomains real quick, so\n\n518\n00:27:46.220 --> 00:27:47.860\nit will make sense when we go and\ndeploy it.\n\n519\n00:27:47.860 --> 00:27:53.470\nI have another fancy pants diagram here,\nall right.\n\n520\n00:27:53.470 --> 00:27:55.650\nWhat a fault domain was\noriginally designed for\n\n521\n00:27:55.650 --> 00:27:58.740\nis a little bit different than\nwhat we actually use it for now.\n\n522\n00:27:58.740 --> 00:28:01.740\nImagine, if you will, a server room.\n\n523\n00:28:01.740 --> 00:28:04.100\nIn my server room, I have two racks.\n\n524\n00:28:04.100 --> 00:28:06.420\nEach rack contains a bunch of servers.\n\n525\n00:28:06.420 --> 00:28:09.300\nAt the top of each rack I have\na nice switch that sits up there.\n\n526\n00:28:09.300 --> 00:28:10.540\nIt gives me my bandwidth.\n\n527\n00:28:10.540 --> 00:28:12.420\nThese are ten gig switches.\n\n528\n00:28:12.420 --> 00:28:15.760\nThose switches are all linked\ntogether to create my data centers.\n\n529\n00:28:15.760 --> 00:28:17.670\nMy data center might have\n100 of these racks and\n\n530\n00:28:17.670 --> 00:28:19.410\nthey're all linked together the same way.\n\n531\n00:28:19.410 --> 00:28:23.010\nAll right, in Rack 1,\nI've got a couple of hosts.\n\n532\n00:28:23.010 --> 00:28:24.170\nAnd in Rack 2 I've got a couple of hosts.\n\n533\n00:28:24.170 --> 00:28:25.908\nSo I've got four hosts all together.\n\n534\n00:28:25.908 --> 00:28:30.870\nAll right, now if I crease a Vsan here,\nI can do that.\n\n535\n00:28:30.870 --> 00:28:34.670\nThese four hosts can all join the Vsan,\nthey can all see each other.\n\n536\n00:28:34.670 --> 00:28:36.110\nThey can bond their storage together.\n\n537\n00:28:36.110 --> 00:28:39.240\nNow I've got a virtual SAN in place, okay.\n\n538\n00:28:39.240 --> 00:28:42.070\nAnd this host might go active for\na few VMs,\n\n539\n00:28:42.070 --> 00:28:45.010\nthis next host goes active for\na few others and so on, right?\n\n540\n00:28:45.010 --> 00:28:47.130\nThey're each active for\ndifferent virtual machines.\n\n541\n00:28:48.160 --> 00:28:52.930\nWell, if one host fails, let's say\nthis server right here fails, okay.\n\n542\n00:28:52.930 --> 00:28:56.189\nThe other three guys can't\nsee that host anymore.\n\n543\n00:28:56.189 --> 00:28:59.346\nAnd they talk to each other,\nand they say, hey,\n\n544\n00:28:59.346 --> 00:29:01.965\ncan any of you guys see host number four?\n\n545\n00:29:01.965 --> 00:29:04.170\nAnd they all say no,\nwe can't see host number four.\n\n546\n00:29:04.170 --> 00:29:09.155\nWe get three votes here, three people all\nsay, yeah, we can't see host number four.\n\n547\n00:29:09.155 --> 00:29:11.339\nSo they take over for\nwhat host four was doing,\n\n548\n00:29:11.339 --> 00:29:15.520\nwhatever virtual machines host four was\nrunning, they now start spinning up.\n\n549\n00:29:15.520 --> 00:29:18.190\nWhatever storage they had,\nthey now migrate it and\n\n550\n00:29:18.190 --> 00:29:20.100\nactivate in their own storage.\n\n551\n00:29:20.100 --> 00:29:21.690\nSo somebody else has a copy of that data.\n\n552\n00:29:21.690 --> 00:29:24.560\nSo they bring it active, and\nnow we've recovered from the failure and\n\n553\n00:29:24.560 --> 00:29:25.830\nwe're back in business, right?\n\n554\n00:29:25.830 --> 00:29:28.700\nWhen you have multiple hosts like this,\nthey they can make that decision.\n\n555\n00:29:30.270 --> 00:29:32.990\nBut, let me just give you\na little scenario here.\n\n556\n00:29:32.990 --> 00:29:38.450\nWhat if this link right here between\nthe racks, what if it fails?\n\n557\n00:29:38.450 --> 00:29:39.230\nThat link fails.\n\n558\n00:29:40.280 --> 00:29:44.290\nNow technically,\nthese two hosts are still up and happy.\n\n559\n00:29:44.290 --> 00:29:46.440\nAnd these two hosts are still up and\nhappy.\n\n560\n00:29:46.440 --> 00:29:47.980\nThey're up and online.\n\n561\n00:29:47.980 --> 00:29:51.860\nBut the link between the racks failed,\nokay.\n\n562\n00:29:51.860 --> 00:29:56.410\nSo, when that happens, these two guys\nstart talking to to each other, and\n\n563\n00:29:56.410 --> 00:29:58.320\nthey say, hey,\ncan you see host three and four?\n\n564\n00:29:58.320 --> 00:30:01.110\nAnd they each say no,\nwe can't see host three and four.\n\n565\n00:30:01.110 --> 00:30:03.180\nAnd they say all right,\nwell they must be dead,\n\n566\n00:30:03.180 --> 00:30:05.730\nlet's take over what they were doing and\nbring it back up.\n\n567\n00:30:05.730 --> 00:30:08.050\nMeanwhile over here,\nthese two guys are talking.\n\n568\n00:30:08.050 --> 00:30:10.260\nThey're saying hey,\ncan you see host one and two?\n\n569\n00:30:10.260 --> 00:30:12.600\nAnd they can't see those one and\ntwo, and they say all right,\n\n570\n00:30:12.600 --> 00:30:13.735\nwe need to bring them active.\n\n571\n00:30:13.735 --> 00:30:17.291\nAnd so now I've got a full set of\nvirtual machines running here.\n\n572\n00:30:17.291 --> 00:30:20.150\nAnd I've got a full set of\nmachine running over here.\n\n573\n00:30:20.150 --> 00:30:24.950\nNow it might not be a big deal, but\nif this is a dedicated storage network,\n\n574\n00:30:24.950 --> 00:30:28.920\nI may have a real network for\nmy actual data that is still up.\n\n575\n00:30:28.920 --> 00:30:31.750\nBut now I've got duplicated IPs and\nduplicated host,\n\n576\n00:30:31.750 --> 00:30:33.910\nI've got multiple people\nhosting the same data.\n\n577\n00:30:33.910 --> 00:30:35.950\nThings start going crazy, right?\n\n578\n00:30:35.950 --> 00:30:36.770\nAnd my network fails.\n\n579\n00:30:36.770 --> 00:30:39.530\nNow I've got a problem,\nwe never want that to happen, all right?\n\n580\n00:30:39.530 --> 00:30:44.600\nSo you need to look at your network and\nrecognize where you've\n\n581\n00:30:44.600 --> 00:30:49.320\ngot single points of failure, where you've\ngot things like this link right here, that\n\n582\n00:30:49.320 --> 00:30:54.560\ncould cause your virtual SAN to become\nsegregated into multiple divisions, okay?\n\n583\n00:30:54.560 --> 00:30:58.430\nAnd when that happens, we need to make\nsure that VMware knows about it, so\n\n584\n00:30:58.430 --> 00:31:02.390\nyou can go into Vsphere and you can\ncreate what are called faulto names.\n\n585\n00:31:02.390 --> 00:31:04.660\nYou can define it and\ncall it whatever you want.\n\n586\n00:31:04.660 --> 00:31:05.580\nMight not be racks.\n\n587\n00:31:05.580 --> 00:31:06.750\nThese might be buildings.\n\n588\n00:31:06.750 --> 00:31:10.810\nA Vsan can stretch multiple\ngeographic locations.\n\n589\n00:31:10.810 --> 00:31:12.630\nThis might be my production data center.\n\n590\n00:31:12.630 --> 00:31:15.050\nThis might be my disaster\nrecovery data center.\n\n591\n00:31:15.050 --> 00:31:16.260\nSo, you can define that.\n\n592\n00:31:16.260 --> 00:31:19.585\nYou can say here's fault domain one\nwhich I'm going to call rack one and\n\n593\n00:31:19.585 --> 00:31:22.039\nhere's fault domain two\nwhich I'll call rack two.\n\n594\n00:31:22.039 --> 00:31:24.692\nHere's fault domain one\ncalled headquarters, and\n\n595\n00:31:24.692 --> 00:31:27.414\nhere's fault domain two\ncalled disaster recovery.\n\n596\n00:31:27.414 --> 00:31:30.576\nBut the point is, as long as I have two,\nit's an even number and\n\n597\n00:31:30.576 --> 00:31:33.323\nthose two can become segregated and\nthere's no way for\n\n598\n00:31:33.323 --> 00:31:35.906\nthem to tell where the problem\nactually occurred.\n\n599\n00:31:35.906 --> 00:31:40.908\nSo what we need is a witness and\na witness is a third person that\n\n600\n00:31:40.908 --> 00:31:46.710\ncan get involved that acts as\na tiebreaker to this whole thing, okay.\n\n601\n00:31:46.710 --> 00:31:53.720\nA third rack, for example,\nor a third location, right?\n\n602\n00:31:53.720 --> 00:31:57.370\nProduction, disaster recovery and\nmaybe one of my branch offices or\n\n603\n00:31:57.370 --> 00:31:58.890\nsomething like that.\n\n604\n00:31:58.890 --> 00:32:02.960\nAnd that way, if this link right\nhere were to fail, right, so\n\n605\n00:32:02.960 --> 00:32:06.050\nlets say that links fails just\nlike I showed you a moment ago.\n\n606\n00:32:06.050 --> 00:32:08.350\nThese two hosts start\ntalking to each other.\n\n607\n00:32:08.350 --> 00:32:11.360\nAnd they say,\nhey can you see hosts three and four?\n\n608\n00:32:11.360 --> 00:32:13.590\nAnd they can't,\nthey say I can't get to three and four.\n\n609\n00:32:13.590 --> 00:32:17.720\nWell, they can still get all the way\nover here to this other rack and\n\n610\n00:32:17.720 --> 00:32:19.120\ntalk to this host.\n\n611\n00:32:19.120 --> 00:32:20.570\nAnd they can ask host five,\n\n612\n00:32:20.570 --> 00:32:23.470\nthey can say hey host five,\ndo you see host three and four?\n\n613\n00:32:23.470 --> 00:32:25.130\nAnd host five'll say,\nyep I see them right here.\n\n614\n00:32:25.130 --> 00:32:28.630\nI can talk to them right here\nacross my link, they're still up.\n\n615\n00:32:28.630 --> 00:32:32.860\nAnd so now host one and two know there's\na different problem on the network,\n\n616\n00:32:32.860 --> 00:32:36.090\nwe should not take over for OS three and\nfour, they're still up, right?\n\n617\n00:32:36.090 --> 00:32:42.510\nThe witness gives us that third vote,\ngives us that extra recommends, okay?\n\n618\n00:32:42.510 --> 00:32:49.690\nAnd so what VMware recommends Is that,\nat a minimum, you should have three hosts.\n\n619\n00:32:49.690 --> 00:32:51.890\nAnd three fault domains, right?\n\n620\n00:32:51.890 --> 00:32:53.920\nThe three hosts should each\nbe on their own fault domain.\n\n621\n00:32:53.920 --> 00:32:56.400\nThat would be your minimum deployment.\n\n622\n00:32:56.400 --> 00:32:57.106\nBut you can go higher.\n\n623\n00:32:57.106 --> 00:32:58.497\nYou can have 16 hosts.\n\n624\n00:32:58.497 --> 00:33:00.880\nI think the maximum is 64.\n\n625\n00:33:00.880 --> 00:33:04.320\nYou can have up to 64\nhosts as the maximum.\n\n626\n00:33:04.320 --> 00:33:05.670\nSo you can have a ton.\n\n627\n00:33:05.670 --> 00:33:09.570\nAnd then fault domains,\nyou can create a ton of fault domains too.\n\n628\n00:33:09.570 --> 00:33:10.680\nBut at the minimum you want three.\n\n629\n00:33:10.680 --> 00:33:13.190\nAnd that third one is gonna\nbe the tie breaker, right?\n\n630\n00:33:13.190 --> 00:33:18.130\nSo, that you never have a scenario where\none person brings stuff online just\n\n631\n00:33:18.130 --> 00:33:21.290\nbecause they think that there's an outage\nwhen there actually isn't, right?\n\n632\n00:33:21.290 --> 00:33:23.230\nSometimes a fault doesn't\nrequire a failover.\n\n633\n00:33:23.230 --> 00:33:27.090\nSo, setting up that witness\nIs really important.\n\n634\n00:33:27.090 --> 00:33:30.120\nAll right, shoot, Wes,\nwhat I wanted to do,\n\n635\n00:33:30.120 --> 00:33:32.230\nWes gives me evil eyes\nwhen he's not on camera.\n\n636\n00:33:32.230 --> 00:33:33.400\nIt's kinda crazy.\n\n637\n00:33:33.400 --> 00:33:36.600\nBut, [LAUGH] so, what I wanna\ndo is I wanna configure a VSAN,\n\n638\n00:33:36.600 --> 00:33:38.880\nwhich I've completely failed to do,\nand I know I'm out of time now, so.\n\n639\n00:33:38.880 --> 00:33:41.221\nSo Wes,\nwhy don't we do a part two on this one so\n\n640\n00:33:41.221 --> 00:33:43.513\nI can actually do what\nwe're talking about?\n\n641\n00:33:43.513 --> 00:33:44.630\n[LAUGH]\n>> That sounds good.\n\n642\n00:33:44.630 --> 00:33:46.590\nSo we'll go ahead and wrap this one up.\n\n643\n00:33:46.590 --> 00:33:47.200\nI tell you what.\n\n644\n00:33:47.200 --> 00:33:50.010\nDo you have anything else, or do you wanna\ngo ahead and save it for the part two?\n\n645\n00:33:50.010 --> 00:33:51.660\n>> Let's save it for\npart two cuz we still have a lot to do.\n\n646\n00:33:51.660 --> 00:33:54.390\nWe still haven't actually\nconfigured anything yet.\n\n647\n00:33:54.390 --> 00:33:56.140\nThat doesn't mean we just\nwasted 30 minutes, right?\n\n648\n00:33:56.140 --> 00:33:58.090\nEverything we did was prep work.\n\n649\n00:33:58.090 --> 00:34:00.830\nIt was stuff that we had to get put\nin place to make sure that our VSAN\n\n650\n00:34:00.830 --> 00:34:01.910\nworks properly.\n\n651\n00:34:01.910 --> 00:34:03.680\nSo once we've got this under our belt,\n\n652\n00:34:03.680 --> 00:34:05.830\nnow the actual deployment\nshould be pretty easy.\n\n653\n00:34:05.830 --> 00:34:08.180\n>> All right Don, well, thank you for\nbeing here in the studios.\n\n654\n00:34:08.180 --> 00:34:09.330\nLook forward to seeing part two.\n\n655\n00:34:09.330 --> 00:34:11.483\nAnd you guys come back and\njoin us in part two, as well.\n\n656\n00:34:11.483 --> 00:34:14.203\nSigning off for ITProTV,\nI've been your host, Wes Bryan.\n\n657\n00:34:14.203 --> 00:34:15.088\n>> And I'm Don Pezet.\n\n658\n00:34:15.088 --> 00:34:17.108\n>> We'll see you next time.\n\n659\n00:34:17.108 --> 00:34:24.461\n[MUSIC]\n\n660\n00:34:30.198 --> 00:34:31.199\n>> The\n\n",
          "vimeoId": "171970377"
        },
        {
          "description": "In this episode, Wes and Don continue their discussion on virtual SANs (vSANs). The look at managing disks, fault domains, storage policies, the VSAN observer and virtual volumes or VVOLs.",
          "length": "2391",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-4-2-virtual_san_pt2-062216-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-4-2-virtual_san_pt2-062216-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-4-2-virtual_san_pt2-062216-1-sm.jpg",
          "title": "Virtual SAN Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.683 --> 00:00:14.487\nWelcome back to another exciting\nepisode here at ITPro.TV.\n\n3\n00:00:14.487 --> 00:00:15.793\nI'm your host, Wes Bryan.\n\n4\n00:00:15.793 --> 00:00:18.313\nAnd in today's episode,\nwe're coming back with more VMware.\n\n5\n00:00:18.313 --> 00:00:21.655\nThat's right,\nVMware professional certified version 6.\n\n6\n00:00:21.655 --> 00:00:23.804\nWent back at a part two with virtual SANs.\n\n7\n00:00:23.804 --> 00:00:26.980\nAnd joining me back in the studios\nis none other than Mr. Don Pezet.\n\n8\n00:00:26.980 --> 00:00:27.869\nDon, how you doing sir?\n\n9\n00:00:27.869 --> 00:00:29.320\n>> I'm doing swell, Wes.\n\n10\n00:00:29.320 --> 00:00:32.271\nReady to jump in and\nactually get our virtual SANs configured.\n\n11\n00:00:32.271 --> 00:00:36.363\nIn our last episode, I went on for\neffectively half an hour [LAUGH] talking\n\n12\n00:00:36.363 --> 00:00:39.314\nabout what we need to do to\nget ready to deploy a VSAN,\n\n13\n00:00:39.314 --> 00:00:43.635\nwhich mostly centered around setting\nup the distributive virtual switch.\n\n14\n00:00:43.635 --> 00:00:47.168\nAnd so once we have that network\ninfrastructure in place,\n\n15\n00:00:47.168 --> 00:00:50.930\nnow it's time to actually go\nan get the virtual SAN turned on.\n\n16\n00:00:50.930 --> 00:00:55.180\nAnd it's somewhat anticlimactic because\ngetting it turned on is super easy.\n\n17\n00:00:55.180 --> 00:00:58.170\nBut there's a lot of configuration\noptions afterwards that we can go in and\n\n18\n00:00:58.170 --> 00:01:00.666\ntweak the way that it behaves and\nhave some fun with it.\n\n19\n00:01:00.666 --> 00:01:03.570\nSo once [INAUDIBLE] let's not dilly dally,\nwe're gonna jump right in,\n\n20\n00:01:03.570 --> 00:01:05.150\nand get that VSAN configured.\n\n21\n00:01:05.150 --> 00:01:07.660\nSo I'm gonna jump right back\ninto my environment and\n\n22\n00:01:07.660 --> 00:01:11.670\nwhat we've got,\nis according to VMware recommendations,\n\n23\n00:01:11.670 --> 00:01:15.495\nI now have three hosts that I'm\ngonna be deploying a VSAN on.\n\n24\n00:01:15.495 --> 00:01:19.043\nTwo of which have storage available,\none of which does not.\n\n25\n00:01:19.043 --> 00:01:21.594\nSo let's just to take a look at\nthat storage before I actually get\n\n26\n00:01:21.594 --> 00:01:22.645\nthings set up.\n\n27\n00:01:22.645 --> 00:01:25.183\nSo I'm gonna go into the host,\nI'll take host one.\n\n28\n00:01:25.183 --> 00:01:29.395\nAnd I'm gonna go to Manage > Storage, and\nI'm gonna look at the Storage Devices.\n\n29\n00:01:29.395 --> 00:01:32.850\nNow before you turn on the VSAN it's\nprobably a good idea to double check\n\n30\n00:01:32.850 --> 00:01:35.410\nthis anyway, especially if you're\ndoing a Hybrid deployment.\n\n31\n00:01:35.410 --> 00:01:39.000\nBecause some disks are gonna be SSD and\nsome are gonna be magnetic,\n\n32\n00:01:39.000 --> 00:01:41.920\nand we need to make sure they\nwere identified correctly.\n\n33\n00:01:41.920 --> 00:01:44.780\nUsually they are but sometimes it\ngets it wrong, so here's a chance for\n\n34\n00:01:44.780 --> 00:01:45.860\nus to fix it.\n\n35\n00:01:45.860 --> 00:01:51.960\nSo when I go under my Storage Devices,\nI've got a 128 GB disk and a 500GB disk.\n\n36\n00:01:51.960 --> 00:01:56.250\nThe 500GB one is magnetic,\nthe 128 GB is SSD.\n\n37\n00:01:56.250 --> 00:02:00.100\nAnd so I need to make sure they're\nidentified correctly and as I look,\n\n38\n00:02:00.100 --> 00:02:05.870\nI can see the 128 GB is Flash and\nthe 512 GB is an HDD or magnetic.\n\n39\n00:02:05.870 --> 00:02:07.683\nIf they were wrong,\nyou can click on them and\n\n40\n00:02:07.683 --> 00:02:10.491\njust hit the little button here to\nchange them from one to the other.\n\n41\n00:02:10.491 --> 00:02:13.820\nWe can actually change it during\nthe wizard for setting up the VSAN also.\n\n42\n00:02:13.820 --> 00:02:16.520\nSo there's more than one opportunity for\nus to fix this.\n\n43\n00:02:16.520 --> 00:02:19.190\nI just like to have it set\nright from the beginning.\n\n44\n00:02:19.190 --> 00:02:23.180\nAnd if I take a look at host02,\nI'm just double check that same thing and\n\n45\n00:02:23.180 --> 00:02:26.440\nmake sure that it's set for\nFlash and magnetic.\n\n46\n00:02:26.440 --> 00:02:31.120\nNow my drives are identical,\nI've got a 128 GB SSD and\n\n47\n00:02:31.120 --> 00:02:34.680\na 512 GB HD in both systems.\n\n48\n00:02:34.680 --> 00:02:37.730\nThey don't have to be identical,\nVMware recommends it.\n\n49\n00:02:37.730 --> 00:02:39.792\nThey recommend that they\nbe configured the same,\n\n50\n00:02:39.792 --> 00:02:41.717\nbecause it makes managing\nthis a lot simpler.\n\n51\n00:02:41.717 --> 00:02:45.749\nBut you can have different sizes and\nso on it is possible.\n\n52\n00:02:46.990 --> 00:02:50.920\nBut I've got my storage, I know I've got\nmy distributed virtual switch set up and\n\n53\n00:02:50.920 --> 00:02:53.240\nthat we've got that dedicated for\nour VSAN.\n\n54\n00:02:53.240 --> 00:02:55.570\nIf we didn't,\nit'll warn us during the wizard.\n\n55\n00:02:55.570 --> 00:02:57.400\nAt this point we're ready to turn it on.\n\n56\n00:02:57.400 --> 00:03:00.130\nNow the VSAN is configured\nat the cluster level.\n\n57\n00:03:00.130 --> 00:03:03.910\nSo if I'm gonna set up a VSAN,\nI need my notes to be in the cluster and\n\n58\n00:03:03.910 --> 00:03:05.020\nwe did that in the last episode.\n\n59\n00:03:05.020 --> 00:03:08.580\nAll three of my hosts are right\nhere in the same cluster.\n\n60\n00:03:08.580 --> 00:03:12.170\nAnd then we're just gonna\njump over here to Manage and\n\n61\n00:03:12.170 --> 00:03:15.300\nunder manage you'll have a section\nhere for the Virtual SAN.\n\n62\n00:03:16.570 --> 00:03:20.740\nNow the Virtual SAN does require\na licensed to be installed the supported,\n\n63\n00:03:20.740 --> 00:03:24.130\nbut it won't let you install\nthe license ahead of time.\n\n64\n00:03:24.130 --> 00:03:26.920\nIf you go to install the license it\nactually let you add the license, but\n\n65\n00:03:26.920 --> 00:03:29.000\nif you trying to touch it to the cluster.\n\n66\n00:03:29.000 --> 00:03:33.085\nIt won't let you attach it to\nthe cluster until the VSAN is turned on.\n\n67\n00:03:33.085 --> 00:03:37.180\nBecause it's gonna do some checks to\nmake sure our hardware's compatible.\n\n68\n00:03:37.180 --> 00:03:41.210\nAnd VMware doesn't want you assigning\na license to a host that's not compatible.\n\n69\n00:03:41.210 --> 00:03:42.750\nSo that's why they stop you from doing it.\n\n70\n00:03:42.750 --> 00:03:46.370\nSo when I come in here, I'm not gonna\nworry about the license just yet.\n\n71\n00:03:46.370 --> 00:03:49.368\nBut later I'll need to come back in and\nattach the license to the system so\n\n72\n00:03:49.368 --> 00:03:50.365\nit'll be able to work.\n\n73\n00:03:50.365 --> 00:03:52.551\nIt will just run in an eval\nmode in the beginning.\n\n74\n00:03:52.551 --> 00:03:57.235\nSo I'm gonna go under Virtual SAN and\ngeneral and you'll see Virtual SAN is\n\n75\n00:03:57.235 --> 00:04:01.340\nturned off with a big warning that\nthe Virtual SAN is not enabled.\n\n76\n00:04:01.340 --> 00:04:05.030\nSo not too much to see here expect for\nthe big fat configure button up top,\n\n77\n00:04:05.030 --> 00:04:06.140\nwhich is exactly what I want.\n\n78\n00:04:07.440 --> 00:04:10.205\nWhen you choose that it's gonna\nlaunch you into the VSAN wizard, and\n\n79\n00:04:10.205 --> 00:04:12.026\nthe vSAN wizard is pretty straightforward.\n\n80\n00:04:12.026 --> 00:04:15.969\nIt's gonna check all that stuff that we\nsetup in the last episode to make sure it\n\n81\n00:04:15.969 --> 00:04:19.230\nwas done, and\nif something wasn't done it'll stop us.\n\n82\n00:04:19.230 --> 00:04:21.410\nSo hopefully we've dotted our i's and\n\n83\n00:04:21.410 --> 00:04:24.030\ncrossed our t's and\neverything the way that we need.\n\n84\n00:04:24.030 --> 00:04:25.680\nSo it's gonna ask me to\nmake a few choices here.\n\n85\n00:04:25.680 --> 00:04:29.280\nThe first one,\nhow do we wanna add disk to the storage?\n\n86\n00:04:29.280 --> 00:04:32.540\nThere's two modes,\nyou can go Manual or Automatic.\n\n87\n00:04:32.540 --> 00:04:36.677\nIf I choose Automatic,\nany time I add a host to the VSAN,\n\n88\n00:04:36.677 --> 00:04:42.762\nif they have unclaimed disks, it'll claim\nthe disk, and throw it into the VSAN.\n\n89\n00:04:42.762 --> 00:04:45.000\nI may want that,\nI may want it to be automatic.\n\n90\n00:04:45.000 --> 00:04:46.280\nI may not though,\n\n91\n00:04:46.280 --> 00:04:49.760\nmaybe I've got some flash sitting there\nthat I want to turn on for vFlash later.\n\n92\n00:04:49.760 --> 00:04:52.310\nI don't want that to be part of the VSAN,\nI'm gonna be using it for\n\n93\n00:04:52.310 --> 00:04:56.030\nvFlash or\nmaybe I'm bringing in a witness host.\n\n94\n00:04:56.030 --> 00:04:58.790\nI just need it to be a witness, I don't\nwant it to actually host storage, so\n\n95\n00:04:58.790 --> 00:05:00.330\nI don't want it to claim those disks.\n\n96\n00:05:00.330 --> 00:05:03.913\nSo I prefer to go Manual on this one,\nbut you can go Automatic.\n\n97\n00:05:03.913 --> 00:05:06.703\nAnd that makes it really easy to\nthrow hosts into the VSAN, and\n\n98\n00:05:06.703 --> 00:05:08.860\ntheir storage just\nautomatically gets set up.\n\n99\n00:05:08.860 --> 00:05:11.220\nSome people like that,\nI'm not a big fan of automatic.\n\n100\n00:05:12.700 --> 00:05:14.830\nThen we've got Deduplication and\nCompression.\n\n101\n00:05:14.830 --> 00:05:16.107\nThis is kind of a neat one too.\n\n102\n00:05:16.107 --> 00:05:19.509\nTraditionally when you store data on\na SAN the data is just written, and\n\n103\n00:05:19.509 --> 00:05:23.890\nif I have 100 copies of the same file\nit stores it 100 times and that's that.\n\n104\n00:05:23.890 --> 00:05:27.290\nBut with a VSAN it's looking at\nthe data because it's synchronizing it\n\n105\n00:05:27.290 --> 00:05:28.550\nbetween hosts.\n\n106\n00:05:28.550 --> 00:05:33.514\nAnd when it does that if it sees\nidentical data it can store one copy\n\n107\n00:05:33.514 --> 00:05:37.773\nof it with pointers that say\nlinks back to the same data.\n\n108\n00:05:37.773 --> 00:05:40.727\nTo your operating systems,\nto your guests, they don't know it,\n\n109\n00:05:40.727 --> 00:05:42.276\nit just all looks the same to them.\n\n110\n00:05:42.276 --> 00:05:45.789\nBut on the storage side, we can really get\nsome extra storage out of the system and\n\n111\n00:05:45.789 --> 00:05:47.150\nit can improve things.\n\n112\n00:05:47.150 --> 00:05:49.430\nThat's an optional\nfeature you can turn on.\n\n113\n00:05:49.430 --> 00:05:52.615\nCompression, same thing we can compress\nthe data so it takes less space.\n\n114\n00:05:52.615 --> 00:05:54.815\nThat does cause a bit of\na performance hit, so\n\n115\n00:05:54.815 --> 00:05:56.305\na lot of people don't like that one.\n\n116\n00:05:56.305 --> 00:05:58.855\nBut you can turn it on,\nif you turn it on, it's both.\n\n117\n00:05:58.855 --> 00:06:04.757\nYou turn on Deduplication and Compression,\nnot one or the other, it's gonna be both.\n\n118\n00:06:04.757 --> 00:06:08.857\nYou've also got this option here\ncalled Allow Reduced Redundancy.\n\n119\n00:06:08.857 --> 00:06:12.542\nWhen I said duplicate files I made the\nmistake I hate making which is I said it's\n\n120\n00:06:12.542 --> 00:06:14.177\ngonna store one copy of that file.\n\n121\n00:06:14.177 --> 00:06:16.590\nIt actually doesn't,\nit stores two copies of the files.\n\n122\n00:06:16.590 --> 00:06:19.990\nSo if I had a hundred\nof instances that file,\n\n123\n00:06:19.990 --> 00:06:24.210\nit's gonna store two copies because\nif one copy fails, we need a backup.\n\n124\n00:06:24.210 --> 00:06:28.140\nBut if I Allow Reduced Redundancy,\nnow it will store one copy of that file.\n\n125\n00:06:28.140 --> 00:06:29.430\nAnd if I lose that one copy,\n\n126\n00:06:29.430 --> 00:06:32.440\nit's like losing the hundred copies,\nthat would be really bad.\n\n127\n00:06:32.440 --> 00:06:35.200\nSo we don't normally want that,\nbut you can turn it on and\n\n128\n00:06:35.200 --> 00:06:36.510\nyou'll save a ton of space.\n\n129\n00:06:36.510 --> 00:06:41.770\nBut there's that big tradeoff,\nthen fault domains.\n\n130\n00:06:41.770 --> 00:06:45.060\nUnder Fault Domains, here's where I\ncan tall it how I wanna set things up.\n\n131\n00:06:45.060 --> 00:06:47.074\nAnd notice the very first option here,\nConfigure,\n\n132\n00:06:47.074 --> 00:06:50.072\nwell the first option is to not configure,\nand I guess I should include that.\n\n133\n00:06:50.072 --> 00:06:53.553\nBut the second option is cConfigure\ntwo host virtual SAN cluster, and\n\n134\n00:06:53.553 --> 00:06:55.090\nI know what you're thinking.\n\n135\n00:06:55.090 --> 00:06:58.097\nWait a minute Don, you said that\nthe minimum requirement is three,\n\n136\n00:06:58.097 --> 00:06:59.435\nwhat's this two host stuff?\n\n137\n00:06:59.435 --> 00:07:03.730\nWell two hosts are in the VSAN and\none host as a witness.\n\n138\n00:07:03.730 --> 00:07:06.350\nThis is actually three hosts, not two.\n\n139\n00:07:06.350 --> 00:07:09.030\nAnd if you kinda click on little i here,\nit'll pop up and\n\n140\n00:07:09.030 --> 00:07:13.640\ntell you Two hosts at one site and\na witness host at another site.\n\n141\n00:07:13.640 --> 00:07:19.240\nSo three hosts two sites, that's what it's\ntalking about there with that option.\n\n142\n00:07:19.240 --> 00:07:20.820\nSo if I'm gonna have a witness\nI can choose that one.\n\n143\n00:07:20.820 --> 00:07:24.550\nIf I choose Do not configure,\nI can actually set up a two node system.\n\n144\n00:07:24.550 --> 00:07:27.310\nIt's just it might make bad\nchoices if that happens.\n\n145\n00:07:27.310 --> 00:07:32.750\nI wanna do a three system,\ntwo hosts in the VSAN, one as a witness.\n\n146\n00:07:32.750 --> 00:07:34.610\nYou can also do a stretched cluster.\n\n147\n00:07:34.610 --> 00:07:38.685\nThis is when my cluster is not just in one\nbuilding then I have it in two separate\n\n148\n00:07:38.685 --> 00:07:39.660\nfacilities.\n\n149\n00:07:39.660 --> 00:07:42.813\nI have production and disaster and\nrecovery, so I can spread that out.\n\n150\n00:07:42.813 --> 00:07:45.430\nAnd I can Configure those fault domains.\n\n151\n00:07:45.430 --> 00:07:48.007\nWith fault domains the servers\nmight all be in the same building\n\n152\n00:07:48.007 --> 00:07:49.084\njust in different racks.\n\n153\n00:07:49.084 --> 00:07:51.559\nAnd so I wanna isolate the systems\nbased on what rack their in so\n\n154\n00:07:51.559 --> 00:07:53.618\nthey can recognize when\nthey have those failures.\n\n155\n00:07:53.618 --> 00:07:54.934\nSo I can configure that too.\n\n156\n00:07:54.934 --> 00:07:57.745\nIt's up to me how I wanna go about this.\n\n157\n00:07:57.745 --> 00:08:00.832\nI certainly don't have to configure any\nof that right now, I can just set up\n\n158\n00:08:00.832 --> 00:08:04.120\na straight up VSAN and be done with it,\nor I can configure the advanced options.\n\n159\n00:08:04.120 --> 00:08:08.385\nAnd what you'll notice is that, over here,\nsee these little menu items over here.\n\n160\n00:08:08.385 --> 00:08:11.485\nAs I choose different options,\nsee how it changes.\n\n161\n00:08:11.485 --> 00:08:14.745\nSo depending on what I pick, there's\nmore or less than I might have to do.\n\n162\n00:08:14.745 --> 00:08:17.105\nIf I do a stretched cluster,\nthat's the hardest one.\n\n163\n00:08:17.105 --> 00:08:20.565\nThat's where we have to do fault domains,\nwe have to do witness hosts, right?\n\n164\n00:08:20.565 --> 00:08:22.245\nSo we have to do multiple things.\n\n165\n00:08:22.245 --> 00:08:25.615\nBut if I just choose to\nconfigure a VSAN cluster,\n\n166\n00:08:25.615 --> 00:08:28.725\nI just have to pick a witness host,\nI don't have to set up fault domains.\n\n167\n00:08:28.725 --> 00:08:31.235\nAnd if I choose fault domains,\nI do the fault domains, but\n\n168\n00:08:31.235 --> 00:08:32.910\nI don't have to pick a witness, right?\n\n169\n00:08:32.910 --> 00:08:36.060\nSo these are really three\nvariations of the same thing,\n\n170\n00:08:36.060 --> 00:08:37.350\njust picking which components we have.\n\n171\n00:08:37.350 --> 00:08:40.017\nAnd if you choose do not configure,\nyou can always come and\n\n172\n00:08:40.017 --> 00:08:43.567\nadd this stuff later on, it’s all easy\nto change after the fact, all right?\n\n173\n00:08:43.567 --> 00:08:47.187\nBut I’m gonna do a two host\nvirtual SAN cluster for right now,\n\n174\n00:08:47.187 --> 00:08:48.866\nthat’s what I’m gonna do.\n\n175\n00:08:48.866 --> 00:08:49.770\nAll right.\n\n176\n00:08:49.770 --> 00:08:53.406\nNow, when I do that, it’s warning me here,\nit says you must have exactly two hosts in\n\n177\n00:08:53.406 --> 00:08:56.580\nthe cluster in order to configure\ntwo host virtual SAN cluster.\n\n178\n00:08:56.580 --> 00:08:59.985\nMy problem is I brought my witness\nhost into the cluster, right?\n\n179\n00:08:59.985 --> 00:09:02.194\nSo I don't have exactly two, I have three.\n\n180\n00:09:02.194 --> 00:09:04.763\nAnd so, it's complaining about that.\n\n181\n00:09:04.763 --> 00:09:08.633\nI forgot about that requirement, so maybe\nI will do do not configure instead and\n\n182\n00:09:08.633 --> 00:09:11.950\nI'll add that in [LAUGH] after the fact,\nor I could do fault domains.\n\n183\n00:09:11.950 --> 00:09:13.379\nI'll leave it this way,\nI'll do do not configure.\n\n184\n00:09:14.500 --> 00:09:15.052\nAll right.\n\n185\n00:09:15.052 --> 00:09:17.150\nNow, it's double checking my network.\n\n186\n00:09:17.150 --> 00:09:19.780\nAnd hopefully you don't have\nanything to do on this screen.\n\n187\n00:09:19.780 --> 00:09:24.130\nIt's checking because, remember,\nevery host has to have a vm kernel adapter\n\n188\n00:09:24.130 --> 00:09:28.880\nthat's set to carry vSAN traffic, they've\ngot to be plugged in with an IP address so\n\n189\n00:09:28.880 --> 00:09:31.650\nthey can see each other,\nand vSAN has to be enabled.\n\n190\n00:09:31.650 --> 00:09:33.080\nAnd so, looking at my three systems,\n\n191\n00:09:33.080 --> 00:09:35.990\nthey're all plugged into\nthat same port group.\n\n192\n00:09:35.990 --> 00:09:39.440\nThey've all got IP addresses\nin the same subnet, and\n\n193\n00:09:39.440 --> 00:09:41.150\nvSAN is enabled for all of them.\n\n194\n00:09:41.150 --> 00:09:42.615\nMy networking is already taken care of.\n\n195\n00:09:44.118 --> 00:09:45.975\nAll right, one thing it doesn't do here,\n\n196\n00:09:45.975 --> 00:09:49.350\nit doesn't check to see if it's a 10\ngig network, or a 1 gig network.\n\n197\n00:09:49.350 --> 00:09:50.330\nThat's up to you.\n\n198\n00:09:50.330 --> 00:09:52.688\nIf you choose a 1 gig network,\nand you're doing all Flash,\n\n199\n00:09:52.688 --> 00:09:55.160\nyour performance is just\ngonna be terrible, right?\n\n200\n00:09:55.160 --> 00:09:57.749\nBut it'll work, and that's basically\nwhat they're confirming right here.\n\n201\n00:09:59.762 --> 00:10:01.600\nAll right, then, we can claim disks.\n\n202\n00:10:01.600 --> 00:10:04.340\nNow, it's up to me how I\nwant to go about this.\n\n203\n00:10:04.340 --> 00:10:07.070\nI can claim the discs now,\nor I can claim them later.\n\n204\n00:10:07.070 --> 00:10:10.610\nAnd what it's gonna do is it's\ngonna set up two tiers of data.\n\n205\n00:10:10.610 --> 00:10:14.330\nSo you've got your capacity tier and\nyour cache tier.\n\n206\n00:10:14.330 --> 00:10:15.640\nAnd if you look at my buttons up here,\n\n207\n00:10:15.640 --> 00:10:20.205\nwhich are mostly grayed out, you'll\nsee this one claim for capacity tier.\n\n208\n00:10:20.205 --> 00:10:22.785\nAnd then this other one, claim for\nthe cache tier, all right?\n\n209\n00:10:22.785 --> 00:10:26.415\nSo cache, that's that read cache, where\nit speeds up read activity on the disk.\n\n210\n00:10:26.415 --> 00:10:28.185\nThat's gonna be my Flash.\n\n211\n00:10:28.185 --> 00:10:31.415\nAnd then this other one,\nis claim for capacity tier.\n\n212\n00:10:31.415 --> 00:10:33.820\nThat's where my actual\ndata is going to be.\n\n213\n00:10:33.820 --> 00:10:36.860\nIn an all Flash environment,\nwe don't really worry about this, right?\n\n214\n00:10:36.860 --> 00:10:38.870\nIt's just all capacity tier, who cares?\n\n215\n00:10:38.870 --> 00:10:43.670\nBut in a hybrid environment, I want my\nFlash disks to be flagged for cache, and\n\n216\n00:10:43.670 --> 00:10:46.360\nI want my magnetic disks to be flagged for\ncapacity.\n\n217\n00:10:46.360 --> 00:10:48.640\nAnd so, I can come through and\nI can pick that.\n\n218\n00:10:48.640 --> 00:10:52.320\nSo as I look at it, I'm seeing some of\nthe different disks that are available.\n\n219\n00:10:52.320 --> 00:10:55.780\nAnd if I expand them out,\nI can see where they exist, right?\n\n220\n00:10:55.780 --> 00:11:01.270\nSo here's the 512 gig disks, and\nthen I've got some 128 gigs.\n\n221\n00:11:01.270 --> 00:11:03.880\nAnd I just need to make sure\nthey get claimed correctly.\n\n222\n00:11:03.880 --> 00:11:05.690\nAnd you can go through and\ndo it one by one, or\n\n223\n00:11:05.690 --> 00:11:08.700\nyou can highlight more than one\nat the same time and claim them.\n\n224\n00:11:08.700 --> 00:11:14.020\nSo I'm gonna take these 128 gig disks and\nclaim them for the cache tier.\n\n225\n00:11:14.020 --> 00:11:18.720\nAnd then I'm gonna take these 512 gig\ndisks down here and claim them for\n\n226\n00:11:18.720 --> 00:11:19.520\nthe capacity tier.\n\n227\n00:11:19.520 --> 00:11:22.460\nI've got one extra disk in here,\na 512 gig disk.\n\n228\n00:11:22.460 --> 00:11:23.470\nI guess that's in host03.\n\n229\n00:11:23.470 --> 00:11:26.900\nI must have left a larger Flash in there,\nso I'm just gonna ignore it.\n\n230\n00:11:26.900 --> 00:11:28.360\nI'm not gonna claim it at all.\n\n231\n00:11:28.360 --> 00:11:32.150\nBut otherwise, I've got my\ncapacity discs and my cache discs.\n\n232\n00:11:32.150 --> 00:11:33.590\nAnd I don't have to claim the discs now.\n\n233\n00:11:33.590 --> 00:11:35.270\nI could actually set\nthis up with no discs and\n\n234\n00:11:35.270 --> 00:11:37.480\nclaim them after the fact and\ngo from there.\n\n235\n00:11:37.480 --> 00:11:38.540\nAll right.\n\n236\n00:11:38.540 --> 00:11:41.040\nNow, I do get a warning down here,\nit says configuration not recommended.\n\n237\n00:11:41.040 --> 00:11:43.614\nSome hosts are claiming\nless disks than others.\n\n238\n00:11:43.614 --> 00:11:45.516\nThat's gonna be host3, right?\n\n239\n00:11:45.516 --> 00:11:49.390\nHost3, I didn't set to claim any disks,\nand I'm okay with that.\n\n240\n00:11:49.390 --> 00:11:50.488\nIt's not gonna be in the VSAN.\n\n241\n00:11:52.216 --> 00:11:54.130\nIn fact, I oughtta just pull\nit out of the cluster now.\n\n242\n00:11:56.605 --> 00:11:57.674\nIf I yank host3 out of the cluster,\n\n243\n00:11:57.674 --> 00:12:00.066\nit can stay as a part of that switch which\nmeans it will have communications, and\n\n244\n00:12:00.066 --> 00:12:01.555\nthen we can just use it as the witness.\n\n245\n00:12:01.555 --> 00:12:04.405\nI've got it in the cluster right now,\nso whatever.\n\n246\n00:12:04.405 --> 00:12:08.425\nAll right, notice my total VSAN data\nstore capacity is 1 terabyte, right?\n\n247\n00:12:08.425 --> 00:12:09.775\nSo I had two 500 gig disks.\n\n248\n00:12:09.775 --> 00:12:11.485\nThey're gonna combine to 1 terabyte.\n\n249\n00:12:11.485 --> 00:12:15.663\nAnd I had 228 gig SSDs that are going\nto combine to 256 gigs of cache.\n\n250\n00:12:16.665 --> 00:12:18.070\nWe go ahead and finish that up.\n\n251\n00:12:18.070 --> 00:12:19.780\nAnd now, it's gonna create that VSAN.\n\n252\n00:12:19.780 --> 00:12:22.590\nNow, hopefully, in your environment\nthis goes very smoothly.\n\n253\n00:12:22.590 --> 00:12:24.890\nIn my environment,\nI'm gonna get some warnings, right?\n\n254\n00:12:24.890 --> 00:12:28.680\nMy primary warning is gonna be that I\nhave hardware that's on the HCL, right?\n\n255\n00:12:28.680 --> 00:12:31.990\nIn my lab environment, I'm kind of\ncheating the rules a little bit on a few\n\n256\n00:12:31.990 --> 00:12:33.480\nthings, so\nI'm gonna get some warnings about that.\n\n257\n00:12:34.670 --> 00:12:38.160\nBy and large, you can ignore the warning\nright up until the point that you need to\n\n258\n00:12:38.160 --> 00:12:41.100\ncall the VMware for help, and then you\ncan't ignore that warning anymore because\n\n259\n00:12:41.100 --> 00:12:42.520\nthey're not gonna be able to help you.\n\n260\n00:12:42.520 --> 00:12:46.280\nSo you certainly wanna resolve\nany warnings that you get.\n\n261\n00:12:46.280 --> 00:12:50.130\nOne piece of advice,\ndon't act on the warnings right away.\n\n262\n00:12:50.130 --> 00:12:53.630\nSome warnings are gonna pop up here\nthat just take a little time to resolve,\n\n263\n00:12:53.630 --> 00:12:55.860\nall right, especially when it\ncomes to claiming those discs.\n\n264\n00:12:55.860 --> 00:12:58.667\nCuz it has to grab the disc,\nit has to format it, creates a data store,\n\n265\n00:12:58.667 --> 00:12:59.310\nbrings it up.\n\n266\n00:12:59.310 --> 00:13:00.410\nThat takes some time.\n\n267\n00:13:00.410 --> 00:13:01.790\nSo for the first five or\n\n268\n00:13:01.790 --> 00:13:05.853\nten minutes, you probably don't wanna\nact on your warnings right away, okay?\n\n269\n00:13:05.853 --> 00:13:06.820\nSo wait 10 minutes.\n\n270\n00:13:06.820 --> 00:13:10.980\nLet the cluster kind of settle itself\ndown and resolve it's issues, and\n\n271\n00:13:10.980 --> 00:13:14.960\nthen anything that's still standing,\nany warnings that are still standing,\n\n272\n00:13:14.960 --> 00:13:16.432\nthen you act on those, okay?\n\n273\n00:13:16.432 --> 00:13:18.110\nBut they do need a little bit of time.\n\n274\n00:13:18.110 --> 00:13:21.800\nSo, I'm getting some warnings that are\npopping up here, as this one's jumping up.\n\n275\n00:13:21.800 --> 00:13:25.300\nAnd so, as I look at my lab cluster,\nI can go to my summary screen and\n\n276\n00:13:25.300 --> 00:13:29.260\nsee what those warnings are, and\nthey'll probably be HCL warnings.\n\n277\n00:13:29.260 --> 00:13:30.760\nI might have a few others.\n\n278\n00:13:30.760 --> 00:13:34.050\nAnd, actually the warnings on my\ncluster have already disappeared.\n\n279\n00:13:34.050 --> 00:13:37.940\nLet's look at my individual host and\nsee what warnings are popping up there.\n\n280\n00:13:39.050 --> 00:13:41.640\nAll right, so\nthis one says host cannot communicate with\n\n281\n00:13:41.640 --> 00:13:44.730\nall other nodes in the virtual\nSAN enabled cluster, all right?\n\n282\n00:13:44.730 --> 00:13:45.950\nI got a network problem.\n\n283\n00:13:45.950 --> 00:13:48.970\nNow, I made the mistake of acting\non this one right away before, and\n\n284\n00:13:48.970 --> 00:13:52.200\nI'll tell you it's still activating\nthose adaptors for V SAN traffic, and\n\n285\n00:13:52.200 --> 00:13:56.890\nthey're gonna start communicating and we\njust need to wait and let it resolve that.\n\n286\n00:13:56.890 --> 00:14:01.380\nIf that's still up a few minutes from now,\nthen I'll get worried about it, all right?\n\n287\n00:14:01.380 --> 00:14:06.032\nBut for now, we're gonna let it sit\ntight and see where that goes, okay?\n\n288\n00:14:06.032 --> 00:14:09.540\nNow, while I'm waiting on it,\nI do have host03, I need to make a choice.\n\n289\n00:14:09.540 --> 00:14:13.010\nIf I want to make it as a witness,\nI need to get it out of the cluster.\n\n290\n00:14:13.010 --> 00:14:15.350\nI could put it into another cluster,\nor I could leave it in this one.\n\n291\n00:14:16.400 --> 00:14:17.840\nI could take it out, I suppose.\n\n292\n00:14:17.840 --> 00:14:20.930\nIt's not actually,\nI didn't claim any storage for it,\n\n293\n00:14:20.930 --> 00:14:22.020\nit's just kinda sitting there.\n\n294\n00:14:22.020 --> 00:14:25.850\nSo I can take it out of the cluster and\njust throw it back into the datacenter and\n\n295\n00:14:25.850 --> 00:14:26.960\nmove it along.\n\n296\n00:14:26.960 --> 00:14:28.460\nShoot, gotta move it into\nmaintenance mode first.\n\n297\n00:14:28.460 --> 00:14:32.349\nSo this will give me a good\nstalling point here to\n\n298\n00:14:33.370 --> 00:14:36.100\nwait on those other errors\nto kind of shift along.\n\n299\n00:14:36.100 --> 00:14:38.790\nNow, if I had virtual machines that\nwere active, I'd be worried about that.\n\n300\n00:14:38.790 --> 00:14:42.540\nIn this case, I don't, so\nwe can just take that and\n\n301\n00:14:42.540 --> 00:14:46.235\nshift it along and\nget that one out of there.\n\n302\n00:14:46.235 --> 00:14:49.380\nThat'll also resolve the error about\nhaving different hosts claiming different\n\n303\n00:14:49.380 --> 00:14:53.150\nstorage, and kinda resolve\na few different things at once.\n\n304\n00:14:53.150 --> 00:14:56.350\nI'll just take that right back\nout of maintenance mode and\n\n305\n00:14:56.350 --> 00:14:57.700\nget that one back online.\n\n306\n00:14:57.700 --> 00:14:59.800\nOkay, I'm gonna watch my recent tasks.\n\n307\n00:14:59.800 --> 00:15:01.730\nLooks like everything is\nshowing as completed.\n\n308\n00:15:01.730 --> 00:15:05.860\nSo now, I'm going to do exactly what I\nsaid not to do and just come in here and\n\n309\n00:15:05.860 --> 00:15:07.190\ndouble check my alarms.\n\n310\n00:15:07.190 --> 00:15:08.560\nNow, when I look at my alarms,\n\n311\n00:15:08.560 --> 00:15:12.910\nI can see Virtual SAN Health Alarm ESX\nVirtual SAN Health service installation.\n\n312\n00:15:14.530 --> 00:15:16.099\nWhat kind of alarm is that, all right?\n\n313\n00:15:16.099 --> 00:15:20.110\nIt's telling me that it's installing\nthe health service, and that's really it.\n\n314\n00:15:20.110 --> 00:15:22.368\nIt is not so\nmuch something I need to act on, right?\n\n315\n00:15:22.368 --> 00:15:25.776\nAnd then I've got Health Service Alarm for\nOverall Health Summary.\n\n316\n00:15:25.776 --> 00:15:28.080\nAll right,\nnow I've got some health problems, right?\n\n317\n00:15:28.080 --> 00:15:31.670\nAnd then my actual alarm, which is the\nCluster Health, so this is the real alarm.\n\n318\n00:15:31.670 --> 00:15:35.798\nWell, I expect the cluster to have\nproblems right now, so I'm gonna reset\n\n319\n00:15:35.798 --> 00:15:40.399\nthese to green because more than likely\nthey've already resolved their problem.\n\n320\n00:15:40.399 --> 00:15:43.623\nAnd then what we can do is we can\nrefresh our view and see whether or\n\n321\n00:15:43.623 --> 00:15:45.488\nnot these pop back up not not, okay?\n\n322\n00:15:45.488 --> 00:15:47.866\nAnd that's important in the early stages,\ncuz a lot of it does get activated.\n\n323\n00:15:47.866 --> 00:15:51.953\nYou've got multiple hosts that are talking\ntogether If you have fully HCL listed\n\n324\n00:15:51.953 --> 00:15:56.630\nhardware with plenty of RAM, you'll find a\nlot of this stuff moves through very fast.\n\n325\n00:15:56.630 --> 00:15:59.410\nIn a lab environment like mine where\nI'm kind of constrained on resources,\n\n326\n00:15:59.410 --> 00:16:00.540\nthings run a little bit slower.\n\n327\n00:16:00.540 --> 00:16:02.440\nAnd that makes these errors pop\nup a little more frequently.\n\n328\n00:16:03.660 --> 00:16:04.640\nLooking at this next one I've got,\n\n329\n00:16:04.640 --> 00:16:08.230\nhost cannot communicate with all other\nnodes in the Virtual SAN cluster.\n\n330\n00:16:08.230 --> 00:16:10.670\nWhich that'll probably be\nresolved here shortly too, and\n\n331\n00:16:10.670 --> 00:16:12.246\nprobably the same error on host02.\n\n332\n00:16:12.246 --> 00:16:17.690\nYeah, so we just need to let those kinda\ncruise along and they'll get happy again.\n\n333\n00:16:17.690 --> 00:16:22.680\nSo how do I know when everything's\nrunning nice and happy?\n\n334\n00:16:22.680 --> 00:16:24.720\nWell technically my VSAN is on.\n\n335\n00:16:24.720 --> 00:16:26.639\nI've got it configured,\nI haven't configured a witness host.\n\n336\n00:16:26.639 --> 00:16:29.393\nI haven't configured fault domains or\nanything like that.\n\n337\n00:16:29.393 --> 00:16:31.750\nI've really just turned on the VSAN.\n\n338\n00:16:31.750 --> 00:16:32.630\nHow do I know it's working?\n\n339\n00:16:32.630 --> 00:16:34.210\nWell two ways.\n\n340\n00:16:35.230 --> 00:16:41.412\nFirst off, I can go to the Cluster and if\nyou go to Manage > Settings > Virtual SAN.\n\n341\n00:16:41.412 --> 00:16:45.838\nWe can see here whether or\nnot we're enabled and whether or\n\n342\n00:16:45.838 --> 00:16:49.090\nnot we've got the system turned on.\n\n343\n00:16:49.090 --> 00:16:52.700\nAnd you can go to Disk Management and you\nshould be able to see your disks in here.\n\n344\n00:16:52.700 --> 00:16:56.100\nSo if I'm not seeing disks then I've got\na problem, but if I am seeing disks and\n\n345\n00:16:56.100 --> 00:16:59.350\nthey're showing as mounted and\nconnected, that's a good sign.\n\n346\n00:16:59.350 --> 00:17:03.080\nSee, how all of mine are showing Healthy\nand that they're a Hybrid configuration.\n\n347\n00:17:03.080 --> 00:17:05.030\nSo that's one quick way\nthat we can look and\n\n348\n00:17:05.030 --> 00:17:07.770\nverify that things are set\nthe way that we want.\n\n349\n00:17:07.770 --> 00:17:11.620\nNow I do still have the warnings floating\non the server, but again those are network\n\n350\n00:17:11.620 --> 00:17:15.690\nissues that should work themselves out as\nsoon as they start talking on the network.\n\n351\n00:17:15.690 --> 00:17:18.040\nI could have a legitimate network problem.\n\n352\n00:17:18.040 --> 00:17:20.730\nI did pick VM kernel one on both\nservers and connected them.\n\n353\n00:17:20.730 --> 00:17:23.820\nI gave them IPs,\nthey should be able to see each other.\n\n354\n00:17:23.820 --> 00:17:26.780\nBut it is possible that I've\nscrewed up that network or\n\n355\n00:17:26.780 --> 00:17:30.200\nnot plugged in those adapters, so I may\nhave to go and check my physical cabling.\n\n356\n00:17:30.200 --> 00:17:33.466\nBut I'm pretty used to seeing this\nerror so it'll usually go away.\n\n357\n00:17:33.466 --> 00:17:38.180\nThe other thing that I can do is,\nwe can take a look at monitoring.\n\n358\n00:17:38.180 --> 00:17:42.820\nSo if I go to my Cluster and I go to the\nMonitor tab, inside of the Monitor tab,\n\n359\n00:17:42.820 --> 00:17:45.150\nyou actually have a button up here for\nVirtual SAN.\n\n360\n00:17:45.150 --> 00:17:46.860\nAnd so you can choose that and\n\n361\n00:17:46.860 --> 00:17:50.830\nit's gonna bring up that same disk stream\nwhere we can verify that disk health.\n\n362\n00:17:50.830 --> 00:17:55.102\nBut you can also look at the virtual\ndisks that have been created.\n\n363\n00:17:55.102 --> 00:17:58.706\nOur Resynching Components and\nsee what their health is at, and\n\n364\n00:17:58.706 --> 00:18:00.270\nthen your general health.\n\n365\n00:18:00.270 --> 00:18:02.490\nRemember all the health warnings\nI had a few moments ago?\n\n366\n00:18:02.490 --> 00:18:03.540\nWhen I come in here to health,\n\n367\n00:18:03.540 --> 00:18:06.000\nif any of those warnings\nare still there I'll see them.\n\n368\n00:18:06.000 --> 00:18:07.470\nAnd sure enough, I've got some.\n\n369\n00:18:07.470 --> 00:18:09.800\nMy main warning is Hardware Compatibility.\n\n370\n00:18:09.800 --> 00:18:13.990\nI knew I was gonna get that, I knew I was\ngonna have some that weren't on the HCL.\n\n371\n00:18:13.990 --> 00:18:16.640\nAnd so I've got a couple\nof warnings there for that.\n\n372\n00:18:16.640 --> 00:18:19.018\nAnd then I've got\na performance service warning,\n\n373\n00:18:19.018 --> 00:18:21.572\nwhich is telling my Stats DB\nobject is having an issue.\n\n374\n00:18:21.572 --> 00:18:23.844\nNow that's another error\nthat you can expect to see,\n\n375\n00:18:23.844 --> 00:18:27.670\nbecause what's gonna be in your\nstatistics database in the beginning?\n\n376\n00:18:27.670 --> 00:18:29.800\nNothing, it's empty, it can't get data.\n\n377\n00:18:29.800 --> 00:18:32.080\nIt's gotta harvest some information\nfirst before it can get data.\n\n378\n00:18:32.080 --> 00:18:33.853\nSo that's another warning that\nwill resolve itself over time.\n\n379\n00:18:33.853 --> 00:18:37.234\nAnd so you can just wait and\nbe patient or you can sit here and\n\n380\n00:18:37.234 --> 00:18:41.530\nreclick Retest over and over again,\nand eventually it will go away.\n\n381\n00:18:41.530 --> 00:18:43.001\nBut for now we can kind of ignore them.\n\n382\n00:18:43.001 --> 00:18:48.943\nSo everything's looking pretty decent,\nI do have my Stats DB object down here.\n\n383\n00:18:48.943 --> 00:18:50.128\nObject exists, Warning.\n\n384\n00:18:50.128 --> 00:18:51.108\nThere's no data.\n\n385\n00:18:51.108 --> 00:18:53.089\nIt just has to build that up.\n\n386\n00:18:53.089 --> 00:18:56.520\nBut at this stage I've got my VSAN.\n\n387\n00:18:56.520 --> 00:18:59.430\nMy VSAN is up, and\nI'm pretty much ready to us it.\n\n388\n00:18:59.430 --> 00:19:03.070\nNow how do I use it?\n\n389\n00:19:03.070 --> 00:19:05.910\nWell when we created the VSAN it should\nhave created a data store to put in\n\n390\n00:19:05.910 --> 00:19:07.230\nas a part of it.\n\n391\n00:19:07.230 --> 00:19:10.580\nWe just use it like any other\ndata store that's out there.\n\n392\n00:19:10.580 --> 00:19:14.140\nIf I come into my system again, I'm gonna\njump over to my storage screen, and\n\n393\n00:19:14.140 --> 00:19:17.370\non my storage screen\nI've got a new datastore.\n\n394\n00:19:17.370 --> 00:19:18.953\nI didn't make that,\nit just magically appeared.\n\n395\n00:19:18.953 --> 00:19:23.749\nAnd so I've got vsanDatastore right here,\nand that's my VSAN.\n\n396\n00:19:23.749 --> 00:19:28.360\nIt's just a data store like anything else.\n\n397\n00:19:28.360 --> 00:19:32.930\nIf you look at the URL for it,\nsee how it's data store://vmfs/volumes.\n\n398\n00:19:32.930 --> 00:19:37.700\nIt's just registered in here,\nbut it is registered as a vsan.\n\n399\n00:19:37.700 --> 00:19:40.897\nAnd on the backend, it's spreading that\nacross the different environments and\n\n400\n00:19:40.897 --> 00:19:42.786\nyou can see my vsan\ncapacity screen right here.\n\n401\n00:19:42.786 --> 00:19:47.294\nWhere it is aware that it's a VSAN, and\nI've got 1 terabyte of space in it,\n\n402\n00:19:47.294 --> 00:19:50.680\nbecause I bonded those two 500 gig drives.\n\n403\n00:19:50.680 --> 00:19:54.250\nThe 256 gigs of cache doesn't\nshow up here, because it's cache.\n\n404\n00:19:54.250 --> 00:19:56.700\nI can't store data there,\nit stores it for me.\n\n405\n00:19:56.700 --> 00:19:58.810\nI just see the 1 terabyte\nof basic storage.\n\n406\n00:19:58.810 --> 00:20:00.910\nNow whenever I create a virtual machine.\n\n407\n00:20:00.910 --> 00:20:04.940\nSo if I go into my Cluster, and\nI go to create a New Virtual Machine.\n\n408\n00:20:04.940 --> 00:20:07.052\nWhen we create a virtual machine,\nand we pick the storage for it.\n\n409\n00:20:07.052 --> 00:20:10.164\nSo maybe I'm gonna make a database server.\n\n410\n00:20:10.164 --> 00:20:16.920\nSo DB01, I'll put it in my Datacenter,\nI'll put it in the lab cluster.\n\n411\n00:20:16.920 --> 00:20:18.341\nI'll stick it on host01.\n\n412\n00:20:19.930 --> 00:20:24.230\nWhen we go to pick our storage,\nwe'll see our data stores appear.\n\n413\n00:20:24.230 --> 00:20:26.710\nAnd as soon as it refreshes, there we go.\n\n414\n00:20:26.710 --> 00:20:28.400\nHere's me vsanDatastore.\n\n415\n00:20:28.400 --> 00:20:31.460\nAnd I can just choose that datastore,\nI can provision my disk and\n\n416\n00:20:31.460 --> 00:20:34.180\npop it right in there, and\nthen we'll be in business.\n\n417\n00:20:34.180 --> 00:20:37.960\n>> And Don, with these data stores,\nI know that they can be virtual volumes.\n\n418\n00:20:37.960 --> 00:20:39.688\nI think it's gonna be virtual\nvolumes here, the same?\n\n419\n00:20:39.688 --> 00:20:41.245\n>> I'm glad you asked that.\n\n420\n00:20:41.245 --> 00:20:42.207\nSo virtual volumes,\n\n421\n00:20:42.207 --> 00:20:45.690\nvirtual volumes are a technology that\ndoesn't get used a whole heck of a lot.\n\n422\n00:20:45.690 --> 00:20:48.450\nAnd you guys might have noticed\nit in the storage episode,\n\n423\n00:20:48.450 --> 00:20:52.370\nif I go to create a new a new datastore.\n\n424\n00:20:52.370 --> 00:20:56.170\nSo if I go into host01 or\none of these guys and\n\n425\n00:20:56.170 --> 00:20:58.340\nI go to create a new datastore in here.\n\n426\n00:20:58.340 --> 00:21:00.490\nWhen you create a datastore,\nyou get three choices.\n\n427\n00:21:00.490 --> 00:21:03.560\nVMFS is what we normally do, and then\nyou've got NFS and then you've got VVOL,\n\n428\n00:21:03.560 --> 00:21:05.070\nvirtual volumes.\n\n429\n00:21:05.070 --> 00:21:06.623\nWell we're working with virtual SANs.\n\n430\n00:21:06.623 --> 00:21:12.300\nSo makes sense you'd have virtual\nvolumes on a virtual SAN.\n\n431\n00:21:12.300 --> 00:21:15.670\nWell the two are actually unrelated,\nthey're two different technologies.\n\n432\n00:21:15.670 --> 00:21:18.180\nSo let's talk about virtual volumes\nreal quick just to make sure we avoid\n\n433\n00:21:18.180 --> 00:21:19.470\nconfusion on this one.\n\n434\n00:21:19.470 --> 00:21:20.759\nNow, virtual volumes do\nshow up on the exam.\n\n435\n00:21:20.759 --> 00:21:25.362\nIt's one of the things they want you to be\naware of, but there's not a whole heck of\n\n436\n00:21:25.362 --> 00:21:29.973\na lot to configure with virtual volumes so\nit doesn't show up that prominently.\n\n437\n00:21:29.973 --> 00:21:35.982\nVMware, the guys at VMware created an API,\nan application programming interface.\n\n438\n00:21:35.982 --> 00:21:37.507\nThere we go.\n\n439\n00:21:37.507 --> 00:21:43.615\nSo that vSphere can talk to SANs, can talk\nto physical storage for Jerry Networks.\n\n440\n00:21:43.615 --> 00:21:48.485\nAnd that means that vSphere can\nactually configure your SAN for you.\n\n441\n00:21:48.485 --> 00:21:51.195\nIt can reach out and\nconfigure the SAN, it can slice disks.\n\n442\n00:21:51.195 --> 00:21:53.461\nIt can makes volumes,\nit can do all sort of stuffs, and\n\n443\n00:21:53.461 --> 00:21:57.190\ncreate those without you ever having\nto go to your SAN management utility.\n\n444\n00:21:57.190 --> 00:21:58.294\nSo if you have a EMC SAN or\n\n445\n00:21:58.294 --> 00:22:01.126\nan HP SAN, you have your\nmanagement utilities that you use.\n\n446\n00:22:01.126 --> 00:22:04.310\nAnd you go in there and\nyou slice of volumes, you create a LAN,\n\n447\n00:22:04.310 --> 00:22:06.953\nyou set your LAN masking and\nyou attach it and so on.\n\n448\n00:22:06.953 --> 00:22:10.800\nAll that stuff you do in\nthis third party software.\n\n449\n00:22:10.800 --> 00:22:15.840\nWell with the VMware APIs\nvSphere can do that for you.\n\n450\n00:22:15.840 --> 00:22:19.730\nYou create a virtual machine and\nyou say, give it a virtual volume and\n\n451\n00:22:19.730 --> 00:22:20.610\nit'll reach out to the SAN.\n\n452\n00:22:20.610 --> 00:22:23.034\nIt'll make that volume, it'll make\na lan and it'll attach to this host.\n\n453\n00:22:23.034 --> 00:22:27.130\nAnd it'll get it assigned so\nyou can start to put your disks into it.\n\n454\n00:22:27.130 --> 00:22:29.856\nThat's what a VVOL is a virtual volume,\nand it works on a SAN.\n\n455\n00:22:29.856 --> 00:22:33.480\nIt's not a part of VSANs though.\n\n456\n00:22:33.480 --> 00:22:37.230\nYou can use VVOLs without VSANs, and\nyou can use VSANs without VVOLs.\n\n457\n00:22:37.230 --> 00:22:37.792\nThe two are not dependent.\n\n458\n00:22:37.792 --> 00:22:42.560\nThey're really two separate things and\nif you choose to deploy it, you can.\n\n459\n00:22:42.560 --> 00:22:44.018\nYou do have to make sure\nyour hardware is supported.\n\n460\n00:22:44.018 --> 00:22:48.470\nVVOLS only work on SANs that\nare part of the compatibility list.\n\n461\n00:22:48.470 --> 00:22:51.120\nSo it's got to be SAN\nofficially supported by VMware.\n\n462\n00:22:51.120 --> 00:22:52.453\nIf it's not then VVOLs don't work and\n\n463\n00:22:52.453 --> 00:22:54.544\nyou just ignore that option on\nthe screen like most of us do.\n\n464\n00:22:54.544 --> 00:22:59.070\nBut [LAUGH] if you have a SAN that\nis supported, boy is it convenient.\n\n465\n00:22:59.070 --> 00:23:01.840\nBecause now I don't have to go to some\nthird party SAN management software.\n\n466\n00:23:01.840 --> 00:23:04.740\nI just do it right here from\nthe vSphere web client.\n\n467\n00:23:04.740 --> 00:23:08.617\nI tell it to create a VVOL and it talks\nto the SAN and it makes it for me.\n\n468\n00:23:08.617 --> 00:23:12.552\nIn fact, the only thing you really have\nto do to get this set up is to make sure\n\n469\n00:23:12.552 --> 00:23:14.814\nthat your storage controller is working.\n\n470\n00:23:14.814 --> 00:23:17.589\nCuz your storage controller\nis how you see the SAN and\n\n471\n00:23:17.589 --> 00:23:21.455\nthen that's how you detect whether or\nnot that supports the VMware API.\n\n472\n00:23:21.455 --> 00:23:24.207\nThe VMware API,\nI always forget its name so\n\n473\n00:23:24.207 --> 00:23:27.586\nI wrote this down cuz the name\ncan turn up on the exam.\n\n474\n00:23:27.586 --> 00:23:31.981\nIt's the VASA API, V-A-S-A,\nand that stands for\n\n475\n00:23:31.981 --> 00:23:37.757\nVMware vSphere API for Storage Awareness\nrolls right off the tongue.\n\n476\n00:23:37.757 --> 00:23:41.524\nSo the vSphere API for storage awareness.\n\n477\n00:23:41.524 --> 00:23:42.211\nAPI.\n\n478\n00:23:42.211 --> 00:23:44.391\nLike I said,\n[LAUGH] we'll double up on that one.\n\n479\n00:23:44.391 --> 00:23:47.470\nThat's what that is and\nit's just a part of vSphere.\n\n480\n00:23:47.470 --> 00:23:51.817\nIt's on automatically, we just\nmanage our storage providers, right?\n\n481\n00:23:51.817 --> 00:23:55.426\nYour storage providers are how you\nconnect, you have storage endpoints,\n\n482\n00:23:55.426 --> 00:23:57.450\nthat's the SAN that you talk to.\n\n483\n00:23:57.450 --> 00:24:00.450\nYou can see those if we go,\nlet me cancel out of this.\n\n484\n00:24:00.450 --> 00:24:03.830\nLet me go back to my host here,\nor actually,\n\n485\n00:24:03.830 --> 00:24:05.510\nI need to do it from the vCenter Server.\n\n486\n00:24:05.510 --> 00:24:07.810\nSo I'm gonna go up here\nto the vCenter Server.\n\n487\n00:24:07.810 --> 00:24:11.976\nAnd if we just go to Manage, and\nyou've got this Storage Providers tab,\n\n488\n00:24:11.976 --> 00:24:16.919\nand under Storage Providers, here's where\nyou can attach your storage providers.\n\n489\n00:24:16.919 --> 00:24:19.033\nAnd see my VSAN is showing up, right?\n\n490\n00:24:19.033 --> 00:24:21.310\nThese are endpoints\nthat point to the VSAN.\n\n491\n00:24:21.310 --> 00:24:22.417\nAnd each one has a URL and\n\n492\n00:24:22.417 --> 00:24:25.539\nit's showing all the different\nhosts that are a part of that VSAN.\n\n493\n00:24:25.539 --> 00:24:31.490\nAnd see how it's using the VASA API,\nVASA API 1.5, to talk to that VSAN, okay?\n\n494\n00:24:31.490 --> 00:24:34.424\nSo there's VMware's own\nVSAN that we just set up,\n\n495\n00:24:34.424 --> 00:24:38.870\nwhich means technically I could create\na VVol on the VSAN if I wanted, right?\n\n496\n00:24:38.870 --> 00:24:40.933\nBut we traditionally use\nit with physical SANs.\n\n497\n00:24:40.933 --> 00:24:43.883\nAnd so you'd come in here and\nyou'd hit your little plus sign, and\n\n498\n00:24:43.883 --> 00:24:47.695\nyou'd add in the management information\nfor communicating with that physical SAN.\n\n499\n00:24:47.695 --> 00:24:49.937\nAnd if you've got an EMC or\nan HPE or whatever,\n\n500\n00:24:49.937 --> 00:24:53.273\nthen their documentation will tell\nyou exactly what to put in here and\n\n501\n00:24:53.273 --> 00:24:56.770\nyou can connect up, and\nnow you can create VVols on that system.\n\n502\n00:24:56.770 --> 00:25:00.460\nSo the two technologies are separate,\nbut they can be used together, and\n\n503\n00:25:00.460 --> 00:25:04.190\nit does create a little confusion\nbecause it's VSAN and VVolume,\n\n504\n00:25:04.190 --> 00:25:05.380\nit basically sounds the same.\n\n505\n00:25:06.390 --> 00:25:08.100\n>> Don, you mentioned a little\nbit about monitoring.\n\n506\n00:25:08.100 --> 00:25:11.150\nCan you tell us a little bit\nabout the VSAN Observer?\n\n507\n00:25:11.150 --> 00:25:12.010\n>> Yeah, so actually,\n\n508\n00:25:12.010 --> 00:25:15.520\nthere's a few advanced features that I\nhaven't really dinked with yet, right?\n\n509\n00:25:15.520 --> 00:25:18.500\nWe turned the SAN on and\nthen we saw how we could use it, but\n\n510\n00:25:18.500 --> 00:25:20.410\nwe haven't actually kind of\nmessed with the cool stuff.\n\n511\n00:25:20.410 --> 00:25:25.210\nSo, fault domains I know we talked about,\nbut didn't see storage policies,\n\n512\n00:25:25.210 --> 00:25:28.880\nthat we haven't even talked about yet,\nand then we've got the VSAN Observer.\n\n513\n00:25:28.880 --> 00:25:31.370\nThese are three things\nthat aren't required.\n\n514\n00:25:31.370 --> 00:25:33.160\nWe don't have to use them, right?\n\n515\n00:25:33.160 --> 00:25:36.157\nBut if you want to, they extend\nthe functionality of the Virtual SAN.\n\n516\n00:25:36.157 --> 00:25:38.372\nSo, let's run through all three.\n\n517\n00:25:38.372 --> 00:25:40.350\nYou mentioned the VSAN Observer, right?\n\n518\n00:25:40.350 --> 00:25:44.970\nThe VSAN Observer is a cool feature\nof vCenter, that is, not only is it\n\n519\n00:25:44.970 --> 00:25:49.740\nnot turned on by default, it is like super\nhidden away in the backend of vCenter,\n\n520\n00:25:49.740 --> 00:25:53.360\nthat unless you know it's there,\nyou'll never see it, and\n\n521\n00:25:53.360 --> 00:25:54.840\nit's kind of unfortunate.\n\n522\n00:25:54.840 --> 00:25:57.830\nWhen it comes to monitoring performance\nof the VSAN, it's really important,\n\n523\n00:25:57.830 --> 00:26:01.380\nbecause your VSAN, it might be slow for\nreasons that could be avoided.\n\n524\n00:26:01.380 --> 00:26:04.400\nIf you just added some more disks,\nif you upgraded your network adapters.\n\n525\n00:26:04.400 --> 00:26:07.390\nHow do you know how\nthe VSAN is really doing?\n\n526\n00:26:07.390 --> 00:26:09.870\nWell, the VSAN Observer can show us that,\nall right?\n\n527\n00:26:09.870 --> 00:26:12.650\nSo, what we do is we jump\nover to our vCenter Server.\n\n528\n00:26:12.650 --> 00:26:16.509\nSo I'm gonna get on my vCenter Server\nhere, this is my Windows Server 2012\n\n529\n00:26:16.509 --> 00:26:20.840\nmachine, that's running vCenter 6, and\nI'm gonna drop to a command prompt, okay?\n\n530\n00:26:21.980 --> 00:26:29.280\nAnd in the command prompt,\nI am going to start up the VSAN Observer.\n\n531\n00:26:29.280 --> 00:26:31.860\nThe VSAN Observer actually\nruns a little web server.\n\n532\n00:26:31.860 --> 00:26:35.730\nAnd the web server is tied to the\nperformance database on the backends but\n\n533\n00:26:35.730 --> 00:26:37.140\ncan show us some information.\n\n534\n00:26:37.140 --> 00:26:39.650\nTo get that launched,\nit's actually written in Ruby, and\n\n535\n00:26:39.650 --> 00:26:44.400\nmost of us don't have like a Ruby on\nRails system setup on our server to run,\n\n536\n00:26:44.400 --> 00:26:45.850\non Windows we definitely don't.\n\n537\n00:26:45.850 --> 00:26:49.040\nSo they actually have this packaged in\nwith a little batch file that I'm gonna\n\n538\n00:26:49.040 --> 00:26:51.870\nrun, so\nwe need to get into the vCenter folder.\n\n539\n00:26:51.870 --> 00:26:56.055\nSo I'm gonna change directories into\n\n540\n00:26:56.055 --> 00:27:02.860\nProgram Files\\VMware\\vCenter Server\\rvc,\nall right?\n\n541\n00:27:02.860 --> 00:27:04.082\nThat's where I want to get to.\n\n542\n00:27:04.082 --> 00:27:08.682\nAnd this is where my vCenter observer,\nI meant my VSAN Observer is tucked away.\n\n543\n00:27:08.682 --> 00:27:12.574\nAnd in here you got a couple little batch\nfiles, and this is the batch file I want,\n\n544\n00:27:12.574 --> 00:27:13.410\nthis rvc.bat.\n\n545\n00:27:13.410 --> 00:27:17.330\nSo I'm gonna run rvc.bat, just like that,\nto launch the batch file.\n\n546\n00:27:17.330 --> 00:27:18.906\nAnd it's gonna come up and\n\n547\n00:27:18.906 --> 00:27:23.861\nyou'll see where it's trying to log me\nin as administrator@vshphere.local.\n\n548\n00:27:23.861 --> 00:27:26.254\nOkay, if you've logged in with\nthe account before then it'll\n\n549\n00:27:26.254 --> 00:27:27.300\nautomatically log you in.\n\n550\n00:27:27.300 --> 00:27:29.250\nIf you haven't,\nit'll prompt you for the password.\n\n551\n00:27:29.250 --> 00:27:31.630\nSo I gotta punch in my password and\n\n552\n00:27:31.630 --> 00:27:35.760\nthis is it connecting into\nthe vCenter database on the backend.\n\n553\n00:27:35.760 --> 00:27:39.560\nAll right, so\nI'm creating a web server and\n\n554\n00:27:39.560 --> 00:27:41.780\nattaching to that database to launch it.\n\n555\n00:27:41.780 --> 00:27:44.540\nNow I do have to tell it\na little bit more information.\n\n556\n00:27:45.600 --> 00:27:46.950\nI'm seeing a file system here,\n\n557\n00:27:46.950 --> 00:27:50.730\nkind of like when you browse your\nhard drive, C:\\Program Files.\n\n558\n00:27:50.730 --> 00:27:53.970\nHere I've got localhost for\nmanaging the host that I'm on.\n\n559\n00:27:53.970 --> 00:27:56.380\nSo I'm gonna change into that directory.\n\n560\n00:27:56.380 --> 00:27:57.373\nIt's not really a directory.\n\n561\n00:27:57.373 --> 00:27:59.341\nThis is like a logical hierarchy.\n\n562\n00:27:59.341 --> 00:28:02.775\nIt's kind of like navigating to\nActive Directory in Windows or\n\n563\n00:28:02.775 --> 00:28:06.871\nsomething like that, and I need to\nget into, let's see, my Datacenter.\n\n564\n00:28:08.620 --> 00:28:09.785\nMy datacenter is called Datacenter.\n\n565\n00:28:09.785 --> 00:28:12.850\nIf you don't remember, you just go back\nto your web client and look at it.\n\n566\n00:28:12.850 --> 00:28:14.930\nSo I'm gonna browse into my Datacenter,\nand\n\n567\n00:28:14.930 --> 00:28:18.310\nthis is just my datacenter\nname from right here.\n\n568\n00:28:18.310 --> 00:28:21.069\nSo if I had named it Bob,\nI would be changing into the Bob folder.\n\n569\n00:28:22.400 --> 00:28:26.510\nAnd then once I'm in there,\nnow I can fire up my VSAN Observer.\n\n570\n00:28:26.510 --> 00:28:32.531\nSo I'm gonna say vsan.observer, and\nthen I need to point it at some servers,\n\n571\n00:28:32.531 --> 00:28:38.022\nand I'm just gonna point it at\n/computers/ and now the cluster name.\n\n572\n00:28:38.022 --> 00:28:42.380\nAnd my cluster name,\nI actually have forgotten, is LabCluster.\n\n573\n00:28:42.380 --> 00:28:49.057\nSo I need to tell it that name so\nit'll attach to the lab cluster, right?\n\n574\n00:28:49.057 --> 00:28:53.271\nThen I need to tell it to\nrun the webserver, and\n\n575\n00:28:53.271 --> 00:28:56.634\nI'm gonna tell it to force it to run.\n\n576\n00:28:56.634 --> 00:28:58.570\nYou don't always need that option.\n\n577\n00:28:58.570 --> 00:29:02.200\nWhat I'm telling it is basically if it\ndetects another web server, don't stop,\n\n578\n00:29:02.200 --> 00:29:03.770\njust run anyway.\n\n579\n00:29:03.770 --> 00:29:06.830\nA lot of times, you're running IIS,\nand so we get a conflict, right,\n\n580\n00:29:06.830 --> 00:29:09.200\nbecause both of them want Port 80 or\nwhatever.\n\n581\n00:29:09.200 --> 00:29:12.156\nBut the VSAN Server runs on its own little\nport, there's not normally an issue.\n\n582\n00:29:12.156 --> 00:29:14.882\nSo I'm gonna tell it to force to run,\nokay?\n\n583\n00:29:14.882 --> 00:29:18.880\nAnd it's gonna fire up, and it looks\nlike I've launched this one before.\n\n584\n00:29:18.880 --> 00:29:22.750\nIf you've never launched it before, it'll\nshow you a certificate fingerprint and\n\n585\n00:29:22.750 --> 00:29:24.310\nask you to accept it.\n\n586\n00:29:24.310 --> 00:29:27.860\nIn my case, I've launched it before so\nit's already got the fingerprint, so\n\n587\n00:29:27.860 --> 00:29:30.040\nthat's the SSL certificate.\n\n588\n00:29:30.040 --> 00:29:31.840\nSo it's not asking me to accept it.\n\n589\n00:29:31.840 --> 00:29:34.700\nIf you get prompted, you just say yes,\nand then it launches.\n\n590\n00:29:34.700 --> 00:29:36.891\nAnd so now I'm running a web server.\n\n591\n00:29:36.891 --> 00:29:39.800\nIt's running the VSAN Observer in\nthe background, and it's ready for\n\n592\n00:29:39.800 --> 00:29:41.610\nme to go and harvest some data out of it.\n\n593\n00:29:41.610 --> 00:29:45.858\nAnd I can fire up a web browser,\non this machine or on another machine,\n\n594\n00:29:45.858 --> 00:29:49.740\nI'll just use this machine, and\nwe can browse to it, and see.\n\n595\n00:29:49.740 --> 00:29:53.773\nSo it's just gonna be\nbrowsing to https:// and\n\n596\n00:29:53.773 --> 00:30:00.119\nwhatever your server name is,\nI'll just use localhost:8010, right?\n\n597\n00:30:00.119 --> 00:30:03.349\n8010 is the port number, and\nit's a self-signed certificate,\n\n598\n00:30:03.349 --> 00:30:05.350\nso I've gotta just continue in.\n\n599\n00:30:05.350 --> 00:30:09.572\nAnd now, I'm gonna be accessing\nthe vCenter Observer web interface.\n\n600\n00:30:09.572 --> 00:30:13.560\nAnd so I can get logged in, and now I\nstart to see performance of the VSAN.\n\n601\n00:30:13.560 --> 00:30:17.515\nAnd mine is gonna be super boring, because\nI don't even have a single VM running\n\n602\n00:30:17.515 --> 00:30:19.890\ninside of it yet, but\nyou get this nice layout.\n\n603\n00:30:19.890 --> 00:30:24.320\nAnd the best part about this\nis I'm seeing the VSAN for\n\n604\n00:30:24.320 --> 00:30:26.350\nboth of the hosts that are in the VSAN.\n\n605\n00:30:26.350 --> 00:30:31.370\nIf I had 64 hosts, I'd see 64 entries here\nwith the performance on every one of them.\n\n606\n00:30:31.370 --> 00:30:32.480\nSo if there's a bottleneck,\n\n607\n00:30:32.480 --> 00:30:36.230\nit could be tied to one particular host\nhaving a problem, I could spot it here.\n\n608\n00:30:36.230 --> 00:30:38.610\nYou see the latency,\nthe IOPS, the bandwidth,\n\n609\n00:30:38.610 --> 00:30:41.730\nif there's any congestion,\nthe outstanding IO.\n\n610\n00:30:41.730 --> 00:30:45.860\nHow far behind is this host to\napplying input and output on it, and\n\n611\n00:30:45.860 --> 00:30:50.230\nso you can start to see that and\nget an idea of how things are functioning.\n\n612\n00:30:50.230 --> 00:30:55.220\nYou can do VSan Disk Deep Dive and you can\nbreak down into the individual disks and\n\n613\n00:30:55.220 --> 00:30:57.802\nstart to look at\nthe performance on the hardware.\n\n614\n00:30:57.802 --> 00:31:02.060\nSo here's the SSDs versus the hard drives,\nright, or the magnetic disks, and\n\n615\n00:31:02.060 --> 00:31:04.360\nyou can start to monitor that performance.\n\n616\n00:31:04.360 --> 00:31:07.710\nYou can look at all sorts of\ninformation about the VSAN.\n\n617\n00:31:07.710 --> 00:31:12.530\nIt's super, super useful to be\nable to pull this information, and\n\n618\n00:31:12.530 --> 00:31:14.490\nget an idea of how your systems are doing.\n\n619\n00:31:14.490 --> 00:31:18.706\nSo monitoring a VSAN is a little different\nthan monitoring your regular data stores\n\n620\n00:31:18.706 --> 00:31:21.304\nbecause the VSAN is so\nmore complex under the hood.\n\n621\n00:31:21.304 --> 00:31:24.346\nIt's storing more than one copy of\nyour data, it's distributing it across\n\n622\n00:31:24.346 --> 00:31:27.112\nthe systems, and there's a lot of\nplaces you can have a bottleneck.\n\n623\n00:31:27.112 --> 00:31:28.460\nThe VSAN Observer lets you see that.\n\n624\n00:31:28.460 --> 00:31:31.040\nIt's a bit of a pain to get it running,\nbut once you've got it,\n\n625\n00:31:31.040 --> 00:31:32.176\nthen it works really well.\n\n626\n00:31:32.176 --> 00:31:35.489\n>> Don, you also mentioned storage\npolicies and when I think of things like\n\n627\n00:31:35.489 --> 00:31:38.205\npolicies I think of in other\nsystems like group policy, and\n\n628\n00:31:38.205 --> 00:31:41.103\nit limits the ability of people\nto do certain configurations.\n\n629\n00:31:41.103 --> 00:31:43.740\nMaybe you got file classification,\nyou don't want somebody storing a file.\n\n630\n00:31:43.740 --> 00:31:47.225\nBut storage policies seem to be\nquite the opposite here, in VMware,\n\n631\n00:31:47.225 --> 00:31:49.100\nalmost like an SLA for your VMs.\n\n632\n00:31:49.100 --> 00:31:52.190\n>> Yeah, they really are, and\nI had a warning about my policy.\n\n633\n00:31:52.190 --> 00:31:54.360\nSome of you guys might have saw\nit at the bottom of my screen,\n\n634\n00:31:54.360 --> 00:31:57.260\nwhere it was saying the storage\nI picked didn't match my policy.\n\n635\n00:31:57.260 --> 00:31:59.360\nWell you can create storage policies,\n\n636\n00:31:59.360 --> 00:32:01.792\nit's really important when you\nhave tiered storage, right.\n\n637\n00:32:01.792 --> 00:32:04.440\nAny time you have tiered storage you don't\nnecessarily want everything being thrown\n\n638\n00:32:04.440 --> 00:32:04.960\non there.\n\n639\n00:32:04.960 --> 00:32:06.590\nYou're trying to prioritize traffic and\n\n640\n00:32:06.590 --> 00:32:08.780\nyou can use your service policies\nto be able to handle that.\n\n641\n00:32:08.780 --> 00:32:09.510\nYou don't have to.\n\n642\n00:32:09.510 --> 00:32:12.000\nIt's an optional thing but\nif you want to use your storage policies.\n\n643\n00:32:13.090 --> 00:32:16.800\nStorage policies are really important\nwhen you're doing multipathing.\n\n644\n00:32:16.800 --> 00:32:19.270\nI'm not doing multipathing here,\nI just have my VSAN set up.\n\n645\n00:32:19.270 --> 00:32:21.480\nSo I may not choose to use\nstorage policies at all, but\n\n646\n00:32:21.480 --> 00:32:23.650\nif you do there's some neat\noptions that you can set.\n\n647\n00:32:23.650 --> 00:32:25.740\nLet me just run through those real quick.\n\n648\n00:32:25.740 --> 00:32:28.070\nSo if I go back to my to my cluster.\n\n649\n00:32:29.230 --> 00:32:33.079\nInside of my cluster, if I want\nto start configuring my policies.\n\n650\n00:32:33.079 --> 00:32:35.190\nActually, you know what,\nyou don't do it from the cluster, sorry.\n\n651\n00:32:35.190 --> 00:32:37.960\nYou can monitor from the cluster but if I\nwant to get it configured I need to go all\n\n652\n00:32:37.960 --> 00:32:40.510\nthe way to my Home, way back to Home.\n\n653\n00:32:40.510 --> 00:32:43.300\nAnd right here you've got your\nvirtual machine storage policies.\n\n654\n00:32:43.300 --> 00:32:44.990\nRight, that's where I want to go.\n\n655\n00:32:44.990 --> 00:32:47.670\nAnd the policies are defined\nat the vCenter level.\n\n656\n00:32:47.670 --> 00:32:51.476\nShoot, this little web UI\nbug is gonna drive me nuts.\n\n657\n00:32:51.476 --> 00:32:54.800\nSo it'll reload but, basically we define\nit at the vCenter level because this\n\n658\n00:32:54.800 --> 00:32:56.970\npolicy might apply to more than one VSAN.\n\n659\n00:32:56.970 --> 00:33:00.780\nMight apply to more than one cluster, it\ncan apply at a very high level if we want.\n\n660\n00:33:00.780 --> 00:33:04.560\nOr it can be very granular too, we've got\na few options with how that gets deployed.\n\n661\n00:33:04.560 --> 00:33:06.600\nBut what we do is we come in here, and\n\n662\n00:33:06.600 --> 00:33:09.640\nwe basically define how we\nwant that storage to be used.\n\n663\n00:33:09.640 --> 00:33:12.150\nI've got two default policies.\n\n664\n00:33:12.150 --> 00:33:14.740\nThere's the Virtual SAN\nDefault Storage Policy and\n\n665\n00:33:14.740 --> 00:33:16.980\nthe Virtual Volume No Requirements Policy,\nright?\n\n666\n00:33:18.080 --> 00:33:22.140\nSo when I apply storage, if I've got\nthe VVol No Requirements Policy on it,\n\n667\n00:33:22.140 --> 00:33:24.820\nthen anybody can use it,\nIt's got no requirements.\n\n668\n00:33:24.820 --> 00:33:27.280\nBut with\nthe Virtual SAN Default Storage Policy,\n\n669\n00:33:27.280 --> 00:33:31.212\nhere's where we can dictate how\nthat virtual SAN is being handled.\n\n670\n00:33:31.212 --> 00:33:35.060\nAnd [LAUGH] I knew I should've\nreloaded the browser.\n\n671\n00:33:35.060 --> 00:33:36.860\nVMware will patch this bug eventually,\n\n672\n00:33:36.860 --> 00:33:39.990\nit's just kinda one of the things we\nhave to suffer through right now.\n\n673\n00:33:39.990 --> 00:33:41.680\nBut basically what we can\ndo is we can go through and\n\n674\n00:33:41.680 --> 00:33:45.290\ndictate how we want that virtual SAN\nto be used, and that's important.\n\n675\n00:33:45.290 --> 00:33:47.300\nThat'll resolve the error that\nI saw on the screen earlier.\n\n676\n00:33:47.300 --> 00:33:49.770\nIt really wasn't an error it was\na warning, and you could've ignored it and\n\n677\n00:33:49.770 --> 00:33:50.960\njust moved on.\n\n678\n00:33:50.960 --> 00:33:52.780\nBut basically, when we go in here and\n\n679\n00:33:52.780 --> 00:33:57.070\nstart to tweak with that default storage\npolicy, you'll see the various settings in\n\n680\n00:33:57.070 --> 00:34:00.000\nhere that dictate how\nthat's being handled, okay?\n\n681\n00:34:00.000 --> 00:34:01.600\nAnd you have what are called rule sets.\n\n682\n00:34:01.600 --> 00:34:05.568\nAnd the rules are indicating\nhow much space to reserve,\n\n683\n00:34:05.568 --> 00:34:08.777\nhow much flash read\ncache is being reserved,\n\n684\n00:34:08.777 --> 00:34:13.180\nnumber of failures to tolerate,\nthat's pretty important.\n\n685\n00:34:13.180 --> 00:34:16.509\nRight now I just have two disks, so\nhow many failures can I tolerate?\n\n686\n00:34:17.650 --> 00:34:22.370\nOne, if I increase this policy to two,\nI need to be able to survive two failures.\n\n687\n00:34:22.370 --> 00:34:27.000\nI've only got two disks in my VSAN, so\nmy VSAN no longer matches this policy.\n\n688\n00:34:27.000 --> 00:34:31.410\nIt won't let me put anymore data on\nthe VSAN until I correct this, right?\n\n689\n00:34:31.410 --> 00:34:34.240\nIt stops me, so this is the service level\nagreement that Wes was talking about.\n\n690\n00:34:34.240 --> 00:34:38.150\nIf I'm promising people two disk\nfailure I can enforce that right here.\n\n691\n00:34:38.150 --> 00:34:40.300\nNumber of disk stripes per object, right.\n\n692\n00:34:40.300 --> 00:34:43.650\nSo if I'm breaking a file\nup like with RAID 0,\n\n693\n00:34:43.650 --> 00:34:46.630\nhow many stripes do I need\nto be able to maintain?\n\n694\n00:34:46.630 --> 00:34:49.530\nAnd the default is one,\nyou can increase that however.\n\n695\n00:34:49.530 --> 00:34:50.724\nForce provisioning,\n\n696\n00:34:50.724 --> 00:34:55.430\nright, do I want to force these\ndisks to come into the VSAN or not?\n\n697\n00:34:55.430 --> 00:34:58.530\nIt's all up to us how we want to define\nthat, and you can create more than one\n\n698\n00:34:58.530 --> 00:35:01.700\nrule set to meet several\ncomplex scenarios if you want.\n\n699\n00:35:01.700 --> 00:35:03.621\n>> And would this be something,\nDon, you would use on,\n\n700\n00:35:03.621 --> 00:35:05.460\nmaybe you got a mission-critical\napplication and\n\n701\n00:35:05.460 --> 00:35:06.500\nyou need performance on it.\n\n702\n00:35:06.500 --> 00:35:08.295\nLike maybe a database is\nbeing hosted on this,\n\n703\n00:35:08.295 --> 00:35:10.269\nis this where you would\nset a policy like that?\n\n704\n00:35:10.269 --> 00:35:12.250\n>> Yeah, yeah, you can create\nmore than one policy, right.\n\n705\n00:35:12.250 --> 00:35:14.889\nSo you'd have a VSAN policy for\nmission-critical stuff, and\n\n706\n00:35:14.889 --> 00:35:16.900\nVSAN policy for lab and dev stuff.\n\n707\n00:35:16.900 --> 00:35:19.880\nAnd on the lab and dev stuff you\nmight not require redundancy at all.\n\n708\n00:35:19.880 --> 00:35:24.340\nBut on the mission-critical stuff you\nforce two disk failure and so on.\n\n709\n00:35:24.340 --> 00:35:27.870\nAnd now, when I go to create VMs and\nI apply it to a data store,\n\n710\n00:35:27.870 --> 00:35:30.990\nI only apply it to data stores that\nhave the mission critical policy, right?\n\n711\n00:35:30.990 --> 00:35:32.610\nYou create those to meet\nyour business needs.\n\n712\n00:35:32.610 --> 00:35:34.160\nYou don't have to create them.\n\n713\n00:35:34.160 --> 00:35:37.320\nYou can use your noodle every time you\ncreate a machine and throw it in there.\n\n714\n00:35:37.320 --> 00:35:38.773\nBut if you have the service\npolicies in place,\n\n715\n00:35:38.773 --> 00:35:40.310\nit makes sure that people\ndon't make mistakes.\n\n716\n00:35:40.310 --> 00:35:45.098\nLike, ooh, sorry, I deployed our email\nserver onto this VSAN that was for\n\n717\n00:35:45.098 --> 00:35:46.425\ntest and dev.\n\n718\n00:35:46.425 --> 00:35:48.655\nSorry guys,\nnow we lost all our data, right?\n\n719\n00:35:48.655 --> 00:35:52.014\nHaving a policy in place prevents that\nfrom happening so great option there.\n\n720\n00:35:52.014 --> 00:35:53.837\nAnd then the last thing\nthat we talked about but\n\n721\n00:35:53.837 --> 00:35:55.302\ndidn't see were the fault domains.\n\n722\n00:35:55.302 --> 00:35:56.673\nI didn't really mess with those,\n\n723\n00:35:56.673 --> 00:35:58.627\nI actually never even set\nup our witness server.\n\n724\n00:35:58.627 --> 00:36:00.877\nSo if I jump back to my cluster.\n\n725\n00:36:02.227 --> 00:36:05.627\nSo I'm going back to Lab Cluster and\nI'm going to go to my virtual SAN.\n\n726\n00:36:05.627 --> 00:36:10.177\nWhen you go to configure the virtual SAN,\nI need to go back to Settings and\n\n727\n00:36:10.177 --> 00:36:11.230\nVirtual San.\n\n728\n00:36:11.230 --> 00:36:14.950\nWe can go right here to Fault Domains,\nand inside of the fault domains,\n\n729\n00:36:14.950 --> 00:36:15.580\nwe can define it.\n\n730\n00:36:15.580 --> 00:36:20.900\nNow, technically, I didn't configure fault\ndomains, but it did create them for me.\n\n731\n00:36:20.900 --> 00:36:26.300\nIf you don't configure fault domains, it\nputs each server in its own fault domain.\n\n732\n00:36:26.300 --> 00:36:30.050\nSo technically, host01 and host02 are in\ntheir own fault domains right now.\n\n733\n00:36:30.050 --> 00:36:33.850\nBut my configuration can tolerate\na maximum of 0 host failures right now.\n\n734\n00:36:33.850 --> 00:36:37.060\nIt's not happy about it, because each\nfault domain only has a single host.\n\n735\n00:36:37.060 --> 00:36:40.580\nVMware recommends that you have\ntwo servers in every fault domain,\n\n736\n00:36:40.580 --> 00:36:42.450\nat a minimum, and then go from there.\n\n737\n00:36:42.450 --> 00:36:44.480\nSince these guys are their\nown fault domains,\n\n738\n00:36:44.480 --> 00:36:47.080\nit's two domains,\nwith only one server in each.\n\n739\n00:36:47.080 --> 00:36:49.920\nSo technically I can't tolerate a failure,\nall right?\n\n740\n00:36:49.920 --> 00:36:52.930\nBut we can come through here and\nwe can add new fault domains.\n\n741\n00:36:52.930 --> 00:36:54.830\nAnd we can move the hosts into them.\n\n742\n00:36:54.830 --> 00:36:59.875\nSo I might create a fault domain for\njust host01 or host01 and host02.\n\n743\n00:36:59.875 --> 00:37:05.680\nAnd we can put them into, maybe it's Rack\n1, and so I'm defining each of my racks.\n\n744\n00:37:05.680 --> 00:37:08.628\nOr maybe it's my production data center\nand my disaster recovery data center,\n\n745\n00:37:08.628 --> 00:37:09.646\nhowever I wanna name that.\n\n746\n00:37:09.646 --> 00:37:13.550\nAnd so I can park them each\nin there by doing that.\n\n747\n00:37:13.550 --> 00:37:17.086\nAnd so I'm moving host01\ninto this new fault domain.\n\n748\n00:37:17.086 --> 00:37:21.127\nAnd then I can add another\none which I'll call Rack 2.\n\n749\n00:37:21.127 --> 00:37:25.020\nAnd this time host01 doesn't show up\nbecause it's already in a fault domain.\n\n750\n00:37:25.020 --> 00:37:27.547\nYou can move it if you change this to\nAll hosts and now I'll see everybody.\n\n751\n00:37:27.547 --> 00:37:30.290\nBut that one already shows as\nbeing in Rack 1, all right.\n\n752\n00:37:30.290 --> 00:37:33.630\nAnd so I'll hit OK and so\nthat one's getting moved over.\n\n753\n00:37:33.630 --> 00:37:36.440\nAnd we might need to refresh before\nit takes effect, but there they go.\n\n754\n00:37:36.440 --> 00:37:40.650\nSo now they're in those two\nseparate fault domains, right.\n\n755\n00:37:40.650 --> 00:37:42.702\nSo host01, host02, they're separated.\n\n756\n00:37:42.702 --> 00:37:45.308\nAnd we know that when we\ndeploy virtual machines,\n\n757\n00:37:45.308 --> 00:37:49.403\nif I deploy a virtual machine and I've\ngot two servers here in Rack 1, I don't\n\n758\n00:37:49.403 --> 00:37:53.480\nwant both copies of that virtual machine's\ndrive to be right here in Rack 1.\n\n759\n00:37:53.480 --> 00:37:55.920\nCuz if Rack 1 fails,\nI lose both of their drives.\n\n760\n00:37:55.920 --> 00:37:59.550\nSo one copy will be in Rack 1 and\nthe other copy will be in Rack 2.\n\n761\n00:37:59.550 --> 00:38:01.790\nIt'll spread them out\nacross the fault domains.\n\n762\n00:38:01.790 --> 00:38:04.040\nWe don't want our copies\nall in the same domain.\n\n763\n00:38:04.040 --> 00:38:06.490\nIt doesn't know to do that\nunless we set it up and\n\n764\n00:38:06.490 --> 00:38:08.680\ndefine it like what I'm doing here, okay?\n\n765\n00:38:08.680 --> 00:38:12.190\nSo that gets that set up so that we'll\nbe able to handle that communication.\n\n766\n00:38:13.540 --> 00:38:15.860\nAll right, so\nwe're looking pretty good there,\n\n767\n00:38:15.860 --> 00:38:18.600\nmost of our configuration is in business.\n\n768\n00:38:18.600 --> 00:38:22.660\nWe've got our disks added in,\nwe've got our fault domains configured.\n\n769\n00:38:22.660 --> 00:38:24.940\nWe've got a pretty healthy\nVSAN at this point,\n\n770\n00:38:24.940 --> 00:38:27.920\nand now it's just business as usual.\n\n771\n00:38:27.920 --> 00:38:30.140\nFrom here,\nwe start creating our virtual machines.\n\n772\n00:38:30.140 --> 00:38:33.030\nAnd when you pick a data store,\nyou just pick a VSAN data store.\n\n773\n00:38:33.030 --> 00:38:35.180\nEverything else runs\nlike normal from here.\n\n774\n00:38:35.180 --> 00:38:36.630\nWe've got it created,\nwe've got it in place.\n\n775\n00:38:36.630 --> 00:38:38.100\nAnd it's a pretty neat solution.\n\n776\n00:38:38.100 --> 00:38:39.970\nI know effectively have a SAN.\n\n777\n00:38:39.970 --> 00:38:44.690\nI've got shared network across my\nsystems but I don't have a physical SAN.\n\n778\n00:38:44.690 --> 00:38:47.096\nIt's all done virtually,\nright here, inside of the software.\n\n779\n00:38:47.096 --> 00:38:48.299\n>> Don, a lot of options and\n\n780\n00:38:48.299 --> 00:38:51.980\nconsiderations when you're gonna bring\none of these virtual SANs online.\n\n781\n00:38:51.980 --> 00:38:53.760\nBut I will say, judging by that clock,\n\n782\n00:38:53.760 --> 00:38:55.880\ndoes look like we're coming to\nthe end of another episode.\n\n783\n00:38:55.880 --> 00:39:00.150\nBut before we do, do you have any\nadditional words on virtual SANs?\n\n784\n00:39:00.150 --> 00:39:02.410\n>> Main thing,\ndon't rush on those warnings.\n\n785\n00:39:02.410 --> 00:39:05.375\nIn fact, I don't know if you guys noticed,\nbut the warnings that were on host01 and\n\n786\n00:39:05.375 --> 00:39:08.570\nhost02, those disappeared now,\nthe communication warnings.\n\n787\n00:39:08.570 --> 00:39:11.090\nOn some of these, you just need to\ngive it a little time to settle down.\n\n788\n00:39:11.090 --> 00:39:13.410\nThe VSANs take a little while to register,\n\n789\n00:39:13.410 --> 00:39:16.400\nespecially if you don't have a ton of\nmemory like mine [LAUGH] right now.\n\n790\n00:39:16.400 --> 00:39:19.690\nSo don't get too much in\na hurry on the initial setup.\n\n791\n00:39:19.690 --> 00:39:22.640\nNow once it's set up, like a month\nfrom now, if a warning pops up, yeah,\n\n792\n00:39:22.640 --> 00:39:23.470\nimmediately get on that.\n\n793\n00:39:23.470 --> 00:39:24.480\nYou need to deal with it.\n\n794\n00:39:24.480 --> 00:39:27.342\nBut the first time you set up a VSAN,\nplan for giving it 10 or\n\n795\n00:39:27.342 --> 00:39:29.884\n15 minutes just to settle down and\nsort itself out.\n\n796\n00:39:29.884 --> 00:39:33.518\nAnd then start working with it and\ntrying to resolve any warnings you've got.\n\n797\n00:39:33.518 --> 00:39:36.200\n>> Well Don, we appreciate you joining us,\nand you the viewer as well,\n\n798\n00:39:36.200 --> 00:39:36.960\nthank you for joining us.\n\n799\n00:39:36.960 --> 00:39:40.160\nSigning out for ITProTV,\nI've been your host Wes Bryan.\n\n800\n00:39:40.160 --> 00:39:40.716\n>> And I'm Don Pezet.\n\n801\n00:39:40.716 --> 00:39:42.250\n>> And we'll see you next time.\n\n802\n00:39:42.250 --> 00:39:50.980\n[SOUND]\n\n",
          "vimeoId": "171970395"
        },
        {
          "description": "In this episode, Wes and Don demonstrate setting up and implementing storage multi-pathing. They talk about Path Selection Plug-ins (PSP) including path selection policy and path claiming. They mention technologies like Storage Array Top Plug-ins (SATPs), Most Recently Used (MRUs), Round Robin and Fixed path.",
          "length": "2101",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-5-1-storage_multi-pathing-062316-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-5-1-storage_multi-pathing-062316-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-5-1-storage_multi-pathing-062316-1-sm.jpg",
          "title": "Storage Multi-Pathing",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.705 --> 00:00:14.211\nWelcome back to another exciting\nepisode here at IT Pro TV.\n\n3\n00:00:14.211 --> 00:00:15.751\nI'm your host, Wes Bryan,\n\n4\n00:00:15.751 --> 00:00:18.990\nand today's episode we're coming back\nat you with more of that VM Ware.\n\n5\n00:00:18.990 --> 00:00:21.950\nThat's right, VM Ware certified\nprofessional version six.\n\n6\n00:00:21.950 --> 00:00:24.690\nJoining me back in the studios today\nis none other than Mr. Don Pezet.\n\n7\n00:00:24.690 --> 00:00:25.800\nDon, how you doing, sir?\n\n8\n00:00:25.800 --> 00:00:29.250\n>> I'm doing just well, Wes, ready to dive\nright back into the world of vSphere.\n\n9\n00:00:29.250 --> 00:00:32.120\nAnd in this episode,\nwe're gonna be focusing on storage again.\n\n10\n00:00:32.120 --> 00:00:34.670\nNow, I know we've had\nseveral episodes on storage.\n\n11\n00:00:34.670 --> 00:00:36.010\nYou saw how to create data stores.\n\n12\n00:00:36.010 --> 00:00:37.930\nYou saw some of the different\ntypes that were out there.\n\n13\n00:00:37.930 --> 00:00:38.950\nSo we've already worked them a bit.\n\n14\n00:00:38.950 --> 00:00:43.410\nWhat we're gonna do in this episode is\nwe're gonna say, storage is just too easy.\n\n15\n00:00:43.410 --> 00:00:45.680\nWhat can we do to make it\na little more difficult?\n\n16\n00:00:45.680 --> 00:00:47.930\nAnd what we're gonna do is see\nthat right here in this episode,\n\n17\n00:00:47.930 --> 00:00:52.380\nbecause we're gonna introduce\nsomething called multipathing.\n\n18\n00:00:52.380 --> 00:00:55.140\nTypically, when you have storage, you just\ndirectly plug it into your system, and\n\n19\n00:00:55.140 --> 00:00:56.410\nyou've got access to it.\n\n20\n00:00:56.410 --> 00:00:59.860\nBut sometimes we want to achieve more for\nour storage.\n\n21\n00:00:59.860 --> 00:01:02.600\nNow, this is not a small,\nmedium business type thing.\n\n22\n00:01:02.600 --> 00:01:06.290\nIn an enterprise environment,\nwe've got mission critical systems,\n\n23\n00:01:06.290 --> 00:01:09.790\nwe want to focus on performance and\nreliability and\n\n24\n00:01:09.790 --> 00:01:14.040\ndo anything we can to get the best\nof both worlds in our environment.\n\n25\n00:01:14.040 --> 00:01:16.200\nAnd multipathing is how we achieve it.\n\n26\n00:01:16.200 --> 00:01:18.490\nSo we're gonna take a look at\nhow to get that set up and\n\n27\n00:01:18.490 --> 00:01:21.200\nthe ways that we can use\nit in our environment.\n\n28\n00:01:21.200 --> 00:01:23.570\nNow, let's start really basic on this one,\n\n29\n00:01:23.570 --> 00:01:25.640\nin case you've never had to\ndeal with multipathing before.\n\n30\n00:01:25.640 --> 00:01:29.150\nI've got a little diagram whipped up\nhere to kinda show you what I mean.\n\n31\n00:01:29.150 --> 00:01:32.140\nHere's a pretty traditional\nSAN type deployment.\n\n32\n00:01:32.140 --> 00:01:34.550\nI've got a storage area network,\nand I've got three servers.\n\n33\n00:01:34.550 --> 00:01:37.940\nNow, the servers may or\nmay not have local hard drives, right?\n\n34\n00:01:37.940 --> 00:01:40.250\nI might be booting an operating\nsystem from these local drives,\n\n35\n00:01:40.250 --> 00:01:42.220\nor I might be booting\neverything from the SAN,\n\n36\n00:01:42.220 --> 00:01:44.570\nthere might not be any hard\ndrives in the servers at all.\n\n37\n00:01:44.570 --> 00:01:48.450\nBut either way they're centralized\nstorage, they boot up and then they're\n\n38\n00:01:48.450 --> 00:01:51.710\nable to start accessing the virtual\nmachines that are stored here in the SAN.\n\n39\n00:01:51.710 --> 00:01:53.230\nIf the virtual machines\naren't stored here,\n\n40\n00:01:53.230 --> 00:01:55.630\nthen things like v-motion\ndon't work out so well.\n\n41\n00:01:55.630 --> 00:01:57.245\nSo we really need that\nto be stored down there.\n\n42\n00:01:57.245 --> 00:02:02.540\nNow, the problem with the solution\nis the single point of failure.\n\n43\n00:02:02.540 --> 00:02:03.710\nLook at server two.\n\n44\n00:02:03.710 --> 00:02:07.970\nServer two has one cable that runs\nbetween the server and the SAN.\n\n45\n00:02:07.970 --> 00:02:11.300\nWhat happens if that cable were to fail?\n\n46\n00:02:11.300 --> 00:02:15.620\nIf it fails, sever two loses\nvisibility for all its storage and\n\n47\n00:02:15.620 --> 00:02:18.290\nnow server one and\nserver three have to take over.\n\n48\n00:02:18.290 --> 00:02:21.303\nSo from a redundancy standpoint,\nthis is not very redundant.\n\n49\n00:02:21.303 --> 00:02:23.730\nWe have single point of failure.\n\n50\n00:02:23.730 --> 00:02:26.490\nFrom a performance standpoint,\nwe also have a bottleneck.\n\n51\n00:02:26.490 --> 00:02:29.350\nThere is one link,\none fiber link that's being run here.\n\n52\n00:02:29.350 --> 00:02:32.880\nSo, all the virtual machines\nthat are on this host\n\n53\n00:02:32.880 --> 00:02:36.330\nare sharing one fiber link to the SAN for\nbandwidth.\n\n54\n00:02:36.330 --> 00:02:38.480\nSo I've got a bottleneck for performance.\n\n55\n00:02:38.480 --> 00:02:41.615\nSo if I'm trying to get\nthe best performance and\n\n56\n00:02:41.615 --> 00:02:45.065\nreliability out of an environment,\nthis is not necessarily ideal.\n\n57\n00:02:45.065 --> 00:02:49.205\nIt's better than local storage because\nI'm getting the advantage of v-motion and\n\n58\n00:02:49.205 --> 00:02:53.890\nfail over and all that good stuff,\nbut it's not as good as it could be.\n\n59\n00:02:53.890 --> 00:02:56.960\nMultipathing makes it\nas good as it could be.\n\n60\n00:02:56.960 --> 00:03:00.180\nA multipath environment\nlooks something like this.\n\n61\n00:03:00.180 --> 00:03:01.960\nI still have a SAN.\n\n62\n00:03:01.960 --> 00:03:05.160\nI still have one SAN down here\nat the bottom of my diagram, and\n\n63\n00:03:05.160 --> 00:03:07.430\nI still have three servers up top, right?\n\n64\n00:03:07.430 --> 00:03:09.070\nSo, that has a changed.\n\n65\n00:03:09.070 --> 00:03:13.390\nBut what has changed is all\nthe stuff in the middle, all right?\n\n66\n00:03:13.390 --> 00:03:15.860\nAnd this is called the fabric or\nthe switch fabric.\n\n67\n00:03:15.860 --> 00:03:18.780\nWhen you build up a fiber optic storage,\nan area network,\n\n68\n00:03:18.780 --> 00:03:22.010\na SAN, you're gonna build\nup a fiber optic fabric.\n\n69\n00:03:22.010 --> 00:03:25.440\nYou'll have fiber switches and you'll\nhave connections that run between them.\n\n70\n00:03:25.440 --> 00:03:27.240\nNow, I keep taking about fiber optics.\n\n71\n00:03:27.240 --> 00:03:29.150\nIt's the exact same for iSCSI.\n\n72\n00:03:29.150 --> 00:03:31.960\nSo if you're in iSCSI over Ethernet,\nit's done the same way.\n\n73\n00:03:31.960 --> 00:03:33.240\nIt's just a little bit harder.\n\n74\n00:03:33.240 --> 00:03:35.110\nIt's actually really easy to\ndo this on the fiber channel.\n\n75\n00:03:36.290 --> 00:03:38.070\nNotice how I've got this detailed, though.\n\n76\n00:03:38.070 --> 00:03:41.170\nI don't just have one switch anymore,\nI have two switches.\n\n77\n00:03:41.170 --> 00:03:45.550\nAnd the SAN has two connections,\none to each switch.\n\n78\n00:03:45.550 --> 00:03:49.320\nSo if this cable fails, no big deal,\nit uses the other cable.\n\n79\n00:03:49.320 --> 00:03:52.180\nIf this switch fails, no big deal,\nit uses the other switch.\n\n80\n00:03:52.180 --> 00:03:55.180\nNow we've got full redundancy for\nthe networking gear.\n\n81\n00:03:55.180 --> 00:04:00.440\nAnd each server has two HBAs,\ntwo host bus adapters.\n\n82\n00:04:00.440 --> 00:04:03.380\nSo we've got one controller\nplugged into the orange cable,\n\n83\n00:04:03.380 --> 00:04:05.450\nanother controller plugged\ninto the green cable.\n\n84\n00:04:05.450 --> 00:04:07.950\nIf one controller fails,\nwe just use the other controller.\n\n85\n00:04:07.950 --> 00:04:10.460\nIf one cable fails,\nwe just flip over to the other one, right?\n\n86\n00:04:10.460 --> 00:04:12.040\nWe've got redundancy.\n\n87\n00:04:12.040 --> 00:04:14.730\nThis gives us the best of both worlds for\nredundancy.\n\n88\n00:04:14.730 --> 00:04:15.780\nNow, be careful.\n\n89\n00:04:15.780 --> 00:04:21.300\nWhen you buy HBAs, there's plenty of\ncompanies that sell dual port HBAs.\n\n90\n00:04:21.300 --> 00:04:23.450\nWell, what happens if that HBA fails?\n\n91\n00:04:23.450 --> 00:04:24.790\nYou'll lose both ports.\n\n92\n00:04:24.790 --> 00:04:30.010\nSo a dual port HBA gives us a performance\nbenefit, but not really redundancy, right?\n\n93\n00:04:30.010 --> 00:04:33.870\nSo I typically wanna have two\ncompletely separate HBAs here.\n\n94\n00:04:33.870 --> 00:04:37.330\nThat way, if one controller fails, I've\ngot the other controller, or the other\n\n95\n00:04:37.330 --> 00:04:41.420\nadapter that I can use and we've got\nfull redundancy as well as performance.\n\n96\n00:04:41.420 --> 00:04:43.880\nNow, performance,\nthat's kind of an interesting one,\n\n97\n00:04:43.880 --> 00:04:49.590\nbecause if I have two paths, let's say\nthat this is a four gigabit SAN, right?\n\n98\n00:04:49.590 --> 00:04:53.710\nA four gigabit is probably the slowest\npv that you can buy today.\n\n99\n00:04:53.710 --> 00:04:58.465\nSo if we get a four gigabit SAN,\nI can have a four gig link here, and\n\n100\n00:04:58.465 --> 00:04:59.915\na four gig link here.\n\n101\n00:04:59.915 --> 00:05:03.645\nAnd so now, I've effectively\nI've got eight gigs of bandwidth\n\n102\n00:05:03.645 --> 00:05:05.185\nif I choose to use it.\n\n103\n00:05:05.185 --> 00:05:06.695\nBy default, VMware won't do that.\n\n104\n00:05:06.695 --> 00:05:08.515\nWhen you fire up vSphere and\n\n105\n00:05:08.515 --> 00:05:11.645\nget ESX configured, it's just gonna\nuse one of these connections, right?\n\n106\n00:05:11.645 --> 00:05:13.235\nIt's in what's called a fixed mode.\n\n107\n00:05:13.235 --> 00:05:15.440\nIt just uses the first one you can find.\n\n108\n00:05:15.440 --> 00:05:18.450\nIt'll use the second one only\nif the first one fails, and\n\n109\n00:05:18.450 --> 00:05:19.410\nthen they'll go to the second one.\n\n110\n00:05:19.410 --> 00:05:22.590\nIt's kind of a active standby\ntype configuration, right?\n\n111\n00:05:22.590 --> 00:05:24.620\nYou've got one that we're using,\nand one that's a backup.\n\n112\n00:05:24.620 --> 00:05:26.650\nThat gives us redundancy, that's great.\n\n113\n00:05:26.650 --> 00:05:28.840\nBut if we want performance,\nwe wanna change that behavior.\n\n114\n00:05:28.840 --> 00:05:32.710\n>> Now, Don, can one of those switches\nat any time maybe not be able to handle\n\n115\n00:05:32.710 --> 00:05:36.600\nthe workload, and would something\nlike this benefit in that aspect?\n\n116\n00:05:36.600 --> 00:05:38.640\n>> It wouldn't in an active passive,\nright?\n\n117\n00:05:38.640 --> 00:05:40.170\nSo, if I had one active and\n\n118\n00:05:40.170 --> 00:05:44.080\nthe other passive, as long as the active\none can communicate, even if it's slowly,\n\n119\n00:05:44.080 --> 00:05:46.520\nit's still gonna communicate,\nwe're gonna stay on that line.\n\n120\n00:05:46.520 --> 00:05:50.860\nBut if we activate both of them,\nif we bring them both active,\n\n121\n00:05:50.860 --> 00:05:51.880\nnow I get redundancy.\n\n122\n00:05:51.880 --> 00:05:55.220\nIf one fails, I just use the other,\nand I get performance.\n\n123\n00:05:55.220 --> 00:05:59.310\nI can send my traffic, I can load\nbalance my traffic across the two links.\n\n124\n00:05:59.310 --> 00:06:01.510\nAnd now,\nif one switch is getting bogged down and\n\n125\n00:06:01.510 --> 00:06:03.950\ngetting slow,\nI got the other one available, too.\n\n126\n00:06:03.950 --> 00:06:05.520\nSo I just send traffic over it.\n\n127\n00:06:05.520 --> 00:06:07.140\nNow, I get the best of both worlds.\n\n128\n00:06:07.140 --> 00:06:10.540\nI get redundancy and\nperformance improvements.\n\n129\n00:06:10.540 --> 00:06:12.510\nAnd we're taking advantage of\nthe hardware that we put in.\n\n130\n00:06:12.510 --> 00:06:14.140\nCuz this is not cheap, right?\n\n131\n00:06:14.140 --> 00:06:16.150\nThese should be dedicated switches,\neven for iSCSI,\n\n132\n00:06:16.150 --> 00:06:17.560\nthey should be dedicated switches.\n\n133\n00:06:17.560 --> 00:06:21.040\nSo, at a minimum,\nI've doubled my switch hardware costs.\n\n134\n00:06:21.040 --> 00:06:23.530\nAnd I need extra network adapters,\nor extra HBAs,\n\n135\n00:06:23.530 --> 00:06:25.910\nextra cabling, more configuration.\n\n136\n00:06:25.910 --> 00:06:31.170\nIt takes more work to get this set up and\nput in place, but the end result is\n\n137\n00:06:31.170 --> 00:06:36.420\nsomething that is very stable and\nperforms at a very high level, all right?\n\n138\n00:06:36.420 --> 00:06:39.460\nAnd we don't have to stop at two,\nyou can add more paths than this.\n\n139\n00:06:39.460 --> 00:06:43.100\nIf you really wanna go crazy,\nyou can have three, four and then go nuts.\n\n140\n00:06:43.100 --> 00:06:47.575\nNormally, I don't see people do that,\nto go into more fabrics like these,\n\n141\n00:06:47.575 --> 00:06:50.020\ncuz the fabrics do get kind of complex and\nthere's only so\n\n142\n00:06:50.020 --> 00:06:52.090\nmuch room in your server for adapters.\n\n143\n00:06:52.090 --> 00:06:55.990\nBut something you could do is, if we go\nback to my diagram, where I've got this\n\n144\n00:06:55.990 --> 00:07:01.680\norange link, I could have a dual port HPA\nwith two connections to the orange switch,\n\n145\n00:07:01.680 --> 00:07:06.510\nand I could have a dual port HPA\nto the green switch, too, right?\n\n146\n00:07:06.510 --> 00:07:10.560\nSo now I've got four connections as\nfar as performance is concerned.\n\n147\n00:07:10.560 --> 00:07:14.490\nBut as far as redundancy is concerned,\nthese two connections are linked together,\n\n148\n00:07:14.490 --> 00:07:15.870\nand these two connections\nare linked together, so\n\n149\n00:07:15.870 --> 00:07:18.700\nif one of them fails I have to\nflip over to the other one.\n\n150\n00:07:18.700 --> 00:07:23.420\nBut now on a four gig network, I can\npotentially be moving like 16 gigs of data\n\n151\n00:07:23.420 --> 00:07:24.600\nbecause I've doubled my connection.\n\n152\n00:07:24.600 --> 00:07:27.430\nSo you can really customize\nthis to meet whatever the needs\n\n153\n00:07:27.430 --> 00:07:28.670\nare of your organization.\n\n154\n00:07:28.670 --> 00:07:31.590\nDon, I know that in a packet switching\nnetwork, that's one of the beauties\n\n155\n00:07:31.590 --> 00:07:34.410\nof packet switching is that every package\ncan just kind of take its own path,\n\n156\n00:07:34.410 --> 00:07:35.790\ncan find its own path to the end point.\n\n157\n00:07:35.790 --> 00:07:37.230\nNow, you say multipathing,\n\n158\n00:07:37.230 --> 00:07:40.780\nis there a way that we can control\nwhat paths are being taken?\n\n159\n00:07:40.780 --> 00:07:43.740\nCan we define that, or\nis it basically first come, first serve?\n\n160\n00:07:43.740 --> 00:07:47.610\n>> So, by default, it's kind of a first\ncome first serve, but we can customize it.\n\n161\n00:07:47.610 --> 00:07:49.980\nSo, let's break out some Cisco jargon.\n\n162\n00:07:49.980 --> 00:07:52.459\nAnd I hate to throw acronyms around,\nbut they're on the exam, so\n\n163\n00:07:52.459 --> 00:07:53.235\nwe gotta know them.\n\n164\n00:07:53.235 --> 00:07:57.534\nThere is two acronyms we need to be aware\nof here, and that's the SATP and PSP,\n\n165\n00:07:57.534 --> 00:07:58.197\nall right?\n\n166\n00:07:58.197 --> 00:08:01.669\nThe SATP,\nit's not like a College entrance exam,\n\n167\n00:08:01.669 --> 00:08:04.835\nwhich is what I think of\nevery time I hear SATP.\n\n168\n00:08:04.835 --> 00:08:08.939\nWhat it is, is a storage type plugin.\n\n169\n00:08:08.939 --> 00:08:14.530\nSo, when we plug storage, and it actually\nstands for storage array type plugin.\n\n170\n00:08:14.530 --> 00:08:16.720\nThere we go.\nThat's what it officially stands for.\n\n171\n00:08:16.720 --> 00:08:20.130\nWhen you plug a drive into your system\nhow does it get connected right.\n\n172\n00:08:20.130 --> 00:08:23.070\nWhen you talk about storage arrays there's\na number of different types that we have.\n\n173\n00:08:23.070 --> 00:08:24.283\nThere's local storage.\n\n174\n00:08:24.283 --> 00:08:28.033\nI might just have traditional SCSI\nstorage right inside of my system.\n\n175\n00:08:28.033 --> 00:08:32.210\nNow can I multi path to SCSI\nstorage inside of my system?\n\n176\n00:08:32.210 --> 00:08:33.090\nNo, you can't.\n\n177\n00:08:33.090 --> 00:08:34.790\nRight, so\nmultipathing doesn't apply to that.\n\n178\n00:08:34.790 --> 00:08:35.830\nIt's an internal drive.\n\n179\n00:08:35.830 --> 00:08:38.350\nYou just have access to it, through\nthe one controller that it's plugged into,\n\n180\n00:08:38.350 --> 00:08:39.180\nand that's it.\n\n181\n00:08:39.180 --> 00:08:42.080\nAnd it's probably plugged into\na RAID controller anyway.\n\n182\n00:08:42.080 --> 00:08:44.850\nSo the disk that VMware sees\nis not even a real disk.\n\n183\n00:08:44.850 --> 00:08:48.150\nSo we can't multipath to\na virtual disk in that scenario.\n\n184\n00:08:48.150 --> 00:08:55.270\nSo for disks connected with the local\nSATP there is no multipathing right.\n\n185\n00:08:55.270 --> 00:08:56.960\nBut there's other SATPs.\n\n186\n00:08:56.960 --> 00:08:58.530\nThere's one for iSCSI.\n\n187\n00:08:58.530 --> 00:09:00.480\nThere's one for fiber channel.\n\n188\n00:09:00.480 --> 00:09:02.890\nAnd there's one for\nfiber channel over ethernet.\n\n189\n00:09:02.890 --> 00:09:07.104\nAnd those three SATPs all\nsupport multipathing.\n\n190\n00:09:07.104 --> 00:09:12.708\nSo their storage array type plugin\nhas that functionality, right.\n\n191\n00:09:12.708 --> 00:09:14.038\nSo if you see SATP on the exam,\n\n192\n00:09:14.038 --> 00:09:16.506\nit's talking about what\ntype of storage you've got.\n\n193\n00:09:16.506 --> 00:09:23.065\nAnd if they support multipathing, they can\nthen load one of three different PSPs.\n\n194\n00:09:23.065 --> 00:09:25.044\nAnd unfortunately,\nthis one isn't PlayStation Portable.\n\n195\n00:09:25.044 --> 00:09:28.833\nThis one is a path selection plugin.\n\n196\n00:09:28.833 --> 00:09:31.703\nAnd there's three different\npath selection plugins.\n\n197\n00:09:31.703 --> 00:09:34.370\nThe default one,\nthe one that's on automatically.\n\n198\n00:09:34.370 --> 00:09:37.664\nIf you don't configure a thing,\nyou just turn the stuff on,\n\n199\n00:09:37.664 --> 00:09:40.323\nthe default one is what's\ncalled the fixed PSP.\n\n200\n00:09:40.323 --> 00:09:44.350\nThe fixed PSP is where you tell\nthe system what path to follow.\n\n201\n00:09:44.350 --> 00:09:46.041\nAll right?\nAnd if you don't,\n\n202\n00:09:46.041 --> 00:09:48.101\nlike if you don't know to do it.\n\n203\n00:09:48.101 --> 00:09:49.480\nThat PSP's turned on automatically.\n\n204\n00:09:49.480 --> 00:09:51.710\nAnd it just uses whichever\none you configure first.\n\n205\n00:09:51.710 --> 00:09:52.300\nRight?\n\n206\n00:09:52.300 --> 00:09:56.890\nWhen we load these HBAs, we have to\nadd them into the storage control.\n\n207\n00:09:56.890 --> 00:09:59.370\nWe saw that in the storage episodes\nthat you gotta add them in.\n\n208\n00:09:59.370 --> 00:10:01.108\nWhen add iSCSI, you gotta add that target.\n\n209\n00:10:01.108 --> 00:10:04.310\nSo whichever one you do first,\nthat becomes the fixed path.\n\n210\n00:10:04.310 --> 00:10:08.380\nThat's the path you're gonna use\nno matter what, unless it fails.\n\n211\n00:10:08.380 --> 00:10:10.370\nIf it fails then you'll try another one,\nright.\n\n212\n00:10:10.370 --> 00:10:13.980\nSo fixed is the default, and\nit really is a first come, first serve.\n\n213\n00:10:13.980 --> 00:10:15.023\nThat's the one you use.\n\n214\n00:10:15.023 --> 00:10:18.470\nNow, the neat thing about fixed,\nif you wanna go this route.\n\n215\n00:10:18.470 --> 00:10:22.008\nIf you're really worried about\nredundancy and not so much performance.\n\n216\n00:10:22.008 --> 00:10:23.257\nFixed is gonna use the first one.\n\n217\n00:10:23.257 --> 00:10:24.540\nSo you don't get a performance gain.\n\n218\n00:10:24.540 --> 00:10:28.930\nThe other adapters are gonna come up\nas kind of a standby type mode, right.\n\n219\n00:10:28.930 --> 00:10:31.760\nBut if there's a failure,\nthe main link will go down.\n\n220\n00:10:31.760 --> 00:10:33.456\nAnd the backup link will kick in.\n\n221\n00:10:33.456 --> 00:10:37.650\nIf the main link comes back,\nit'll fail back to the main link again.\n\n222\n00:10:37.650 --> 00:10:39.955\nSo it'll try and\nkeep you on that main link.\n\n223\n00:10:39.955 --> 00:10:42.137\nAnd so,\nwhen you're doing the fixed configuration,\n\n224\n00:10:42.137 --> 00:10:45.110\nyou have a reasonable expectation\nof where your traffic is going.\n\n225\n00:10:45.110 --> 00:10:46.720\nAnd that makes it easier for monitoring.\n\n226\n00:10:46.720 --> 00:10:50.240\nIf I wanna monitor like,\ndisc performance, I can go to my switch.\n\n227\n00:10:50.240 --> 00:10:53.750\nAnd I know exactly which port to monitor\ncuz I know where that traffic is, right?\n\n228\n00:10:53.750 --> 00:10:54.915\nWhen you're doing load balancing,\n\n229\n00:10:54.915 --> 00:10:56.389\nmonitoring becomes\na little more difficult.\n\n230\n00:10:56.389 --> 00:10:58.155\nCuz now you have to monitor two ports, and\n\n231\n00:10:58.155 --> 00:11:01.300\nyou gotta aggregate that data together\nto figure out your total numbers.\n\n232\n00:11:01.300 --> 00:11:04.560\nIt's easy to monitor that\nfrom the inside of vCenter.\n\n233\n00:11:04.560 --> 00:11:07.330\nBut it's not easy to monitor\nthat from the switches.\n\n234\n00:11:07.330 --> 00:11:08.970\nIt becomes a little more complex.\n\n235\n00:11:08.970 --> 00:11:12.800\nSo fixed is one of the PSPs that we have.\n\n236\n00:11:12.800 --> 00:11:17.820\nThere's two other PSPs that\nare a little more flexible.\n\n237\n00:11:17.820 --> 00:11:19.740\nThe next one is what's called MRU.\n\n238\n00:11:19.740 --> 00:11:21.270\nAnd MRU, it sounds complex.\n\n239\n00:11:21.270 --> 00:11:23.624\nBut it's just most recently used.\n\n240\n00:11:23.624 --> 00:11:25.358\nWhichever one you used last, right.\n\n241\n00:11:25.358 --> 00:11:29.957\nSo much like fixed, with fixed, it uses\nthe first one we can configure, with MRU,\n\n242\n00:11:29.957 --> 00:11:32.720\nit uses the first one you configure.\n\n243\n00:11:32.720 --> 00:11:36.270\nThe difference is,\nit doesn't necessarily have a primary.\n\n244\n00:11:36.270 --> 00:11:38.910\nRight.\nSo it uses the first one that's available.\n\n245\n00:11:38.910 --> 00:11:41.820\nAnd if it fails, it just goes to\nthe next one that's available.\n\n246\n00:11:41.820 --> 00:11:44.780\nAnd that's now the new most recently used.\n\n247\n00:11:44.780 --> 00:11:48.050\nSo the difference here is if\nthe original one comes back up.\n\n248\n00:11:48.050 --> 00:11:49.590\nIt's not the most recently used.\n\n249\n00:11:49.590 --> 00:11:50.728\nIt doesn't fail back.\n\n250\n00:11:50.728 --> 00:11:53.603\nIt stays on the other adapter, right.\n\n251\n00:11:53.603 --> 00:11:55.900\nAnd it runs like then till\nthat other adapter fails.\n\n252\n00:11:55.900 --> 00:11:57.020\nAnd then it fails back to the other one.\n\n253\n00:11:57.020 --> 00:11:58.650\nIn order, if you have four or\nfive of these things.\n\n254\n00:11:58.650 --> 00:11:59.799\nIt'll just bounce between them.\n\n255\n00:11:59.799 --> 00:12:02.045\nSo most recently used.\n\n256\n00:12:02.045 --> 00:12:04.119\nThink of it as like not\nhaving an affinity.\n\n257\n00:12:04.119 --> 00:12:05.750\nIt doesn't really care what cable it's on.\n\n258\n00:12:05.750 --> 00:12:08.730\nIt's just whichever one was the last one\nthat was actually active and working.\n\n259\n00:12:08.730 --> 00:12:11.570\nAnd if it stops working,\nit just goes to the next one and moves on.\n\n260\n00:12:11.570 --> 00:12:15.240\nSo MRU and\nfixed they behave pretty much the same.\n\n261\n00:12:15.240 --> 00:12:18.380\nAll right,\njust the fail back is the big difference.\n\n262\n00:12:18.380 --> 00:12:21.984\nAnd then the last PSP is\ncalled round-robin, all right.\n\n263\n00:12:21.984 --> 00:12:26.947\nThe round robin path selection plugin,\nwhat it does is it tells the system.\n\n264\n00:12:26.947 --> 00:12:29.150\nHey, I wanna bring them both active.\n\n265\n00:12:29.150 --> 00:12:31.410\nIf I've got two, or I've got four,\nbring all four of them active.\n\n266\n00:12:31.410 --> 00:12:32.220\nBut let's just say two.\n\n267\n00:12:32.220 --> 00:12:33.900\nWe wanna bring the two active.\n\n268\n00:12:33.900 --> 00:12:35.896\nAnd then we're gonna\nround-robin our traffic.\n\n269\n00:12:35.896 --> 00:12:39.793\nWhen traffic gets sent over the line,\nwe'll send some over this one.\n\n270\n00:12:39.793 --> 00:12:40.846\nAnd then bounce over to the next one.\n\n271\n00:12:40.846 --> 00:12:41.925\nAnd then bounce back to the first one.\n\n272\n00:12:41.925 --> 00:12:45.340\nAnd bounce between them over,\nand over, and over again.\n\n273\n00:12:45.340 --> 00:12:48.021\nAnd if one fails it just takes\nit out of the round-robin.\n\n274\n00:12:48.021 --> 00:12:50.949\nAnd it continues to send over\nthe second link, all right?\n\n275\n00:12:50.949 --> 00:12:52.764\nAnd if the original link comes back up,\n\n276\n00:12:52.764 --> 00:12:55.990\nthen it continues to round-robin\nacross both of them again.\n\n277\n00:12:55.990 --> 00:12:59.640\nSo I get redundancy, and\nI get a bit of a performance boost.\n\n278\n00:12:59.640 --> 00:13:00.167\nAll right.\nSo\n\n279\n00:13:00.167 --> 00:13:04.017\nyou're probably thinking what I\nalways thought, which is wow,\n\n280\n00:13:04.017 --> 00:13:09.134\nwhy are the other options even there, why\nwouldn't I always want to do round-robin?\n\n281\n00:13:09.134 --> 00:13:10.562\nIt sounds great, okay.\n\n282\n00:13:10.562 --> 00:13:14.240\nWell I actually asked that question to one\nof the VMware engineers a few years ago.\n\n283\n00:13:14.240 --> 00:13:15.600\nBecause that's what I thought.\n\n284\n00:13:15.600 --> 00:13:17.570\nWhy wouldn't you want to use round-robin?\n\n285\n00:13:17.570 --> 00:13:20.420\nAnd the engineer had something\nreally interesting that he told me.\n\n286\n00:13:20.420 --> 00:13:23.004\nHe said well here's the problem, Don,\n\n287\n00:13:23.004 --> 00:13:26.652\nwith fixed and\nwith MRU they detect failures instantly,\n\n288\n00:13:26.652 --> 00:13:31.897\nthey know right away that failure happened\nbecause the link is completely gone and\n\n289\n00:13:31.897 --> 00:13:35.945\nthen just able to flip right over and\nyou're back in business.\n\n290\n00:13:35.945 --> 00:13:39.811\nBut with round-robin, because it's\nbouncing traffic back and forth,\n\n291\n00:13:39.811 --> 00:13:43.420\nwhen the link fails,\nit doesn't notice it right away.\n\n292\n00:13:43.420 --> 00:13:46.894\nAnd it can take a few seconds\nbefore it actually detects it and\n\n293\n00:13:46.894 --> 00:13:49.223\nstop sending traffic across that link.\n\n294\n00:13:49.223 --> 00:13:53.610\nBecause it's gotta measure whether or\nnot it's just latency, or something else,\n\n295\n00:13:53.610 --> 00:13:56.785\nor maybe they jump to the second\nadapter during the failure.\n\n296\n00:13:56.785 --> 00:13:59.884\nAnd it took a little while to jump back to\nthe first adapter again to notice it It\n\n297\n00:13:59.884 --> 00:14:02.160\njust doesn't notice failures as fast.\n\n298\n00:14:02.160 --> 00:14:04.540\nAnd what that means is that ocassionally,\n\n299\n00:14:04.540 --> 00:14:07.190\nyour virtual machines can\nlose access to their storage.\n\n300\n00:14:07.190 --> 00:14:10.890\nWhich is usually gonna cause\nthem to reboot, all right?\n\n301\n00:14:10.890 --> 00:14:14.810\nI say usually.\nThere's some OSs like Linux CentOS.\n\n302\n00:14:14.810 --> 00:14:16.260\nIf you're running CentOS.\n\n303\n00:14:16.260 --> 00:14:18.400\nIt actually handles losing\nits storage pretty well.\n\n304\n00:14:18.400 --> 00:14:21.840\nIt basically freezes up, and then as soon\nas the storage comes back it continues.\n\n305\n00:14:21.840 --> 00:14:25.420\nBut there's other OSs\nlike Windows Server 2008.\n\n306\n00:14:25.420 --> 00:14:27.430\nBoy it does not like losing its storage.\n\n307\n00:14:27.430 --> 00:14:28.944\nIt freezes for a moment, and\n\n308\n00:14:28.944 --> 00:14:32.423\nthen if that storage isn't back\nfast enough then it'll reboot.\n\n309\n00:14:32.423 --> 00:14:36.786\nSo when you do fixed or MRU, they\nhandle that fail over much faster, and\n\n310\n00:14:36.786 --> 00:14:41.130\nyour guest OSs they usually don't\neven notice that happens, right?\n\n311\n00:14:41.130 --> 00:14:44.060\nIt fails over immediately and\nyou're back in business.\n\n312\n00:14:44.060 --> 00:14:46.310\nThe guest OS continues\nbusiness like normal.\n\n313\n00:14:46.310 --> 00:14:48.150\nBut we don't get the performance boost.\n\n314\n00:14:48.150 --> 00:14:49.102\nRight.\n\n315\n00:14:49.102 --> 00:14:51.560\nWith round-robin we get\nthe performance boost and\n\n316\n00:14:51.560 --> 00:14:54.380\nduring a failover there's a chance\nthat our system might reboot.\n\n317\n00:14:54.380 --> 00:14:56.522\nI know I said it's like\na couple of seconds.\n\n318\n00:14:56.522 --> 00:15:00.261\nAnd you're probably thinking, a couple\nof seconds that's no big deal, but\n\n319\n00:15:00.261 --> 00:15:02.960\nwe measure storage access in milliseconds.\n\n320\n00:15:02.960 --> 00:15:07.240\nAnd so, a couple of seconds\nis a lot of milliseconds.\n\n321\n00:15:07.240 --> 00:15:09.990\nAnd that really adds up and\nit causes some problems in the system.\n\n322\n00:15:09.990 --> 00:15:11.670\nSo, test it out.\n\n323\n00:15:11.670 --> 00:15:12.490\nTest out the round-robin.\n\n324\n00:15:12.490 --> 00:15:14.646\nIt may work perfectly\nfine in your environment.\n\n325\n00:15:14.646 --> 00:15:17.796\nIf you've got five web servers\nthat are clustered together and\n\n326\n00:15:17.796 --> 00:15:20.598\none of those web servers loses\nits storage for a moment.\n\n327\n00:15:20.598 --> 00:15:22.294\nThat's no big deal.\nYou got four more web servers, right.\n\n328\n00:15:22.294 --> 00:15:23.030\nSo you don't care.\n\n329\n00:15:23.030 --> 00:15:24.493\nRound-robin works great.\n\n330\n00:15:24.493 --> 00:15:26.452\nBut if it's a database server, and\n\n331\n00:15:26.452 --> 00:15:29.465\nit's expecting that storage\nto always be available.\n\n332\n00:15:29.465 --> 00:15:33.219\nYou might find that the performance\ngain of round robin is not worth it, and\n\n333\n00:15:33.219 --> 00:15:33.874\nthat MRU, or\n\n334\n00:15:33.874 --> 00:15:37.941\nfixed is better for you because that's\ngonna ensure that reliable data access.\n\n335\n00:15:37.941 --> 00:15:40.820\nSo you just have to pick\naccording to what you need.\n\n336\n00:15:40.820 --> 00:15:43.740\nSo for the exam, remember this.\n\n337\n00:15:43.740 --> 00:15:48.985\nRemember that fixed fails back to the\noriginal controller when it's restored.\n\n338\n00:15:48.985 --> 00:15:52.901\nAnd that MRU does not fail back to the\noriginal controller when it's restored.\n\n339\n00:15:52.901 --> 00:15:54.326\nThat's the difference between those two.\n\n340\n00:15:54.326 --> 00:15:57.320\nAnd otherwise they have an active,\nand everything else is passive.\n\n341\n00:15:57.320 --> 00:16:00.766\nRound robin brings them all active and\nlets them load balance, and so we do not\n\n342\n00:16:00.766 --> 00:16:04.265\nhave to worry about fallback that they all\ncome back in, but we have a little bit\n\n343\n00:16:04.265 --> 00:16:07.740\nmore of a risk during a failure that is\ngonna detect it and move us over in time.\n\n344\n00:16:07.740 --> 00:16:08.253\nAlright so\n\n345\n00:16:08.253 --> 00:16:12.130\nthose are kind of the characteristics each\nthat we need to remember for the exam.\n\n346\n00:16:12.130 --> 00:16:15.757\nAll right so when we configure\nmultiple paths for the system,\n\n347\n00:16:15.757 --> 00:16:18.350\nit'll see that a multiple path is present.\n\n348\n00:16:18.350 --> 00:16:20.640\nSo fiber channel's the easiest right?\n\n349\n00:16:20.640 --> 00:16:23.260\nWith fiber channel you just add\nthe extra HPA and plug it in.\n\n350\n00:16:23.260 --> 00:16:25.136\nAnd the system will look out, and\n\n351\n00:16:25.136 --> 00:16:27.950\nit'll see the drives on\nthe other end of that HPA.\n\n352\n00:16:27.950 --> 00:16:32.018\nAnd remember with VMware,\nwhen it creates a data store on a drive,\n\n353\n00:16:32.018 --> 00:16:34.720\nit always puts a few files in there,\nright?\n\n354\n00:16:34.720 --> 00:16:35.390\nLet me show you here.\n\n355\n00:16:35.390 --> 00:16:37.290\nLet me get to my, where is my environment?\n\n356\n00:16:37.290 --> 00:16:41.750\nHere, all right, so I've got a host and\nunfortunately, I don't have a fiber\n\n357\n00:16:41.750 --> 00:16:45.310\nchannel SAN laying around, so I'm gonna\nuse a SCSI one here to show you guys.\n\n358\n00:16:45.310 --> 00:16:51.310\nBut I've got a data store created,\nand that data store is right here.\n\n359\n00:16:51.310 --> 00:16:55.279\nESX Host 01 iscsi datastore, so\nit's connected to an iscsi datastore,\n\n360\n00:16:55.279 --> 00:16:59.689\nit's got a network adapter that's on one\nnetwork, and it sees that storage on that\n\n361\n00:16:59.689 --> 00:17:03.043\none network so very traditional\nsan type configuration here.\n\n362\n00:17:03.043 --> 00:17:05.730\nAnd see these files that\nwere created inside of it.\n\n363\n00:17:05.730 --> 00:17:11.340\nAll right it's got a file here .naa,\nand then this giant ID number.\n\n364\n00:17:11.340 --> 00:17:15.310\nWhy does it create this file on there?\n\n365\n00:17:15.310 --> 00:17:17.570\nSo we can identify the data store.\n\n366\n00:17:17.570 --> 00:17:22.310\nIf a second path comes up, and\nI see a brand new hard drive on it and\n\n367\n00:17:22.310 --> 00:17:24.070\nI go to load it up.\n\n368\n00:17:24.070 --> 00:17:27.250\nAnd I see this file on it,\nI can match it up.\n\n369\n00:17:27.250 --> 00:17:31.360\nAnd say wait a minute I already know that\ndata store over on this other controller.\n\n370\n00:17:31.360 --> 00:17:34.200\nI see it on two different controllers,\nI've got multiple paths, right.\n\n371\n00:17:34.200 --> 00:17:38.400\nSo ESXi is able to detect that\nthanks to these ID numbers.\n\n372\n00:17:38.400 --> 00:17:41.020\nAnd there's actually a few other IDs that\nare tucked away that we can't see here\n\n373\n00:17:41.020 --> 00:17:41.810\nin the UI.\n\n374\n00:17:41.810 --> 00:17:44.340\nBut it's got a way that it can\ndetect that and recognize it.\n\n375\n00:17:44.340 --> 00:17:47.200\nSo it will know you have multiple paths.\n\n376\n00:17:47.200 --> 00:17:51.140\nWhen you plug in that next fibre HBA,\nand your switch or\n\n377\n00:17:51.140 --> 00:17:54.920\nyour SAN are configured to present\nthe same LUNs on that other connection.\n\n378\n00:17:54.920 --> 00:17:57.310\nIt's gonna see the same LUN\non two different connections,\n\n379\n00:17:57.310 --> 00:18:02.338\nit's gonna recognize the data store,\nand it's gonna enable multi-pathing.\n\n380\n00:18:02.338 --> 00:18:03.820\nAnd it's gonna enable fixed by default,\n\n381\n00:18:03.820 --> 00:18:07.660\nwhich means it's going to use\nthe one we've already defined, but\n\n382\n00:18:07.660 --> 00:18:12.050\nthis new HBA you just added is gonna be\na backup, and that's how it goes, right.\n\n383\n00:18:12.050 --> 00:18:15.680\nSo, with fiber HBA it's really easy, you\njust check them in there and you're done.\n\n384\n00:18:15.680 --> 00:18:20.490\nWith eyescuzzi, and fiber channel over\nethernet is a little bit harder, because\n\n385\n00:18:20.490 --> 00:18:24.460\ntechnically it's a separate network, so we\nhave a different IP range on the network.\n\n386\n00:18:24.460 --> 00:18:27.780\nYou have to present the the other ip\naddress of your storage controller to be\n\n387\n00:18:27.780 --> 00:18:28.980\nable to reach out and talk to it.\n\n388\n00:18:28.980 --> 00:18:31.980\nSo, there's a little bit more ground\nwork that we have to do to get set up.\n\n389\n00:18:31.980 --> 00:18:35.050\nAll right, so let's take a look at it.\n\n390\n00:18:35.050 --> 00:18:37.780\nI think I covered most of the basics here.\n\n391\n00:18:37.780 --> 00:18:39.738\nAnd a few other little\nthings that I wanna mention.\n\n392\n00:18:39.738 --> 00:18:42.591\nBut let's just take a look at getting\na multiple path upon this system, and\n\n393\n00:18:42.591 --> 00:18:45.150\nthen we'll talk about some of\nthe other nuts and bolts after that.\n\n394\n00:18:45.150 --> 00:18:46.480\nAll right.\n\n395\n00:18:46.480 --> 00:18:49.560\nI told you guys that I only have\none path to this storage right now.\n\n396\n00:18:49.560 --> 00:18:50.760\nHow do we know that's true?\n\n397\n00:18:50.760 --> 00:18:52.390\nLet's make sure I'm not lying to you.\n\n398\n00:18:52.390 --> 00:18:54.209\nAnd I don't have a staged lab here.\n\n399\n00:18:54.209 --> 00:18:59.800\nSo I have esx-host01 and, if I go,\nactually let me get to the host itself.\n\n400\n00:18:59.800 --> 00:19:01.036\nThat's its data store.\n\n401\n00:19:01.036 --> 00:19:05.830\nAnd I'm gonna go over here to manage,\nand I'm gonna go to storage.\n\n402\n00:19:05.830 --> 00:19:07.900\nAnd, I'm gonna take a look\nat my storage adapters.\n\n403\n00:19:07.900 --> 00:19:12.890\nSo, in my storage adapters,\nI've got my internal storage controllers.\n\n404\n00:19:12.890 --> 00:19:15.890\nAnd if I scroll down,\nhere's my iSCSI software adapter, right?\n\n405\n00:19:15.890 --> 00:19:16.850\nSo, it's my vmh 33.\n\n406\n00:19:16.850 --> 00:19:22.850\nSo I've got this one configured to\nreach out and talk to a target.\n\n407\n00:19:22.850 --> 00:19:27.628\nAnd if I go down here and\nlook at my targets, what we'll see is\n\n408\n00:19:27.628 --> 00:19:32.529\nthat I only have one target,\n192.168.0.200.\n\n409\n00:19:32.529 --> 00:19:33.223\nRight?\n\n410\n00:19:33.223 --> 00:19:38.029\nSo, I have a VM kernel adapter that's\ngot 192.168.0 network address,\n\n411\n00:19:38.029 --> 00:19:40.685\nand that's how I'm talking to that target.\n\n412\n00:19:40.685 --> 00:19:41.865\nThat's my first path.\n\n413\n00:19:41.865 --> 00:19:45.667\nI'm gonna add a second path here in\na minute, though it'll be on a different\n\n414\n00:19:45.667 --> 00:19:48.177\nnetwork, it'll be on\nthe 192.168.1 network, all right?\n\n415\n00:19:48.177 --> 00:19:52.507\nA separate network, separate switches,\nrunning to a separate network adapter\n\n416\n00:19:52.507 --> 00:19:54.177\non the sand to be able to connect to it,\nright?\n\n417\n00:19:54.177 --> 00:19:55.637\nAll separate.\n\n418\n00:19:55.637 --> 00:19:57.297\nBut right now, I've just got one.\n\n419\n00:19:57.297 --> 00:20:00.880\nAnd you've got this really cool paths\ntab up here that we normally ignore.\n\n420\n00:20:00.880 --> 00:20:03.500\nWe ignore it, because we only\nhave one path so what do we care?\n\n421\n00:20:03.500 --> 00:20:05.930\nBut we're about to do more paths,\nso I'm going to go over here and\n\n422\n00:20:05.930 --> 00:20:10.900\nI can see that I am connected and\nI've got one path.\n\n423\n00:20:10.900 --> 00:20:13.410\nAnd that path is showing as active.\n\n424\n00:20:13.410 --> 00:20:18.660\nNow it's showing as active, and it's got\nthat little I/O on the side there, okay.\n\n425\n00:20:18.660 --> 00:20:23.489\nThat means not only is it active, but\nI'm using it for input and output.\n\n426\n00:20:23.489 --> 00:20:26.421\nRemember hwo I said with fixed,\nyou'll have one that's moving data and\n\n427\n00:20:26.421 --> 00:20:28.050\none that's kind of in standby.\n\n428\n00:20:28.050 --> 00:20:31.513\nAnd MRU, same thing, right,\none that's active and one that's standby,\n\n429\n00:20:31.513 --> 00:20:33.910\nwell, they'll actually also was active,\nright?\n\n430\n00:20:33.910 --> 00:20:38.000\nThey're both active, they're up,\nbut only one will have I/O on it.\n\n431\n00:20:38.000 --> 00:20:41.090\nSo that little note there is\nwhat's actually telling you\n\n432\n00:20:41.090 --> 00:20:43.590\nwhat's going on, okay?\n\n433\n00:20:43.590 --> 00:20:47.870\nAnd when you look at this,\nit can be confusing sometimes,\n\n434\n00:20:47.870 --> 00:20:49.880\nif I had more than one LUN, right?\n\n435\n00:20:49.880 --> 00:20:53.050\nI've only got one virtual disk\non that [INAUDIBLE], right?\n\n436\n00:20:53.050 --> 00:20:55.720\nAnd so it's only seeing one zero.\n\n437\n00:20:55.720 --> 00:20:59.480\nIf I had three disks,\nI would see LUN 0, LUN 1, LUN 2.\n\n438\n00:20:59.480 --> 00:21:03.420\nAnd so I might come in here and\nsay, wait, I've got three paths.\n\n439\n00:21:03.420 --> 00:21:04.820\nWell you don't have three paths.\n\n440\n00:21:04.820 --> 00:21:09.190\nYou have one path to three\ndifferent drives, right.\n\n441\n00:21:09.190 --> 00:21:12.450\nBe really careful on the exam,\nbecause they can show you a picture\n\n442\n00:21:12.450 --> 00:21:14.490\nof something like this, and\nyou'll see more than one path, and\n\n443\n00:21:14.490 --> 00:21:18.640\nyou'll assume that multi-pathing is\nset up, but look at the LUN numbers.\n\n444\n00:21:18.640 --> 00:21:23.890\nWhen you have true multipathing set up,\nyou'll see the one LUN more than once.\n\n445\n00:21:23.890 --> 00:21:25.580\nI'll add another path for LUN 0.\n\n446\n00:21:25.580 --> 00:21:28.470\nIf I have three LUNs, LUNs 0, 1, and\n\n447\n00:21:28.470 --> 00:21:33.100\n2, then I should have six paths,\nright, two to each of them.\n\n448\n00:21:33.100 --> 00:21:35.600\nYou'll see each LUN's\nset of paths separately.\n\n449\n00:21:35.600 --> 00:21:37.900\nIt's an easy one to trip up.\n\n450\n00:21:37.900 --> 00:21:39.290\nAll right, but\nin this case I've only got one path.\n\n451\n00:21:39.290 --> 00:21:43.210\nAnd if I go into my devices over here,\nI just see that one disc.\n\n452\n00:21:43.210 --> 00:21:44.520\nIt's a one terrabyte disc.\n\n453\n00:21:44.520 --> 00:21:47.498\nIt's attached, and\nthat's what I'm using for my data store.\n\n454\n00:21:47.498 --> 00:21:51.791\nSo when I created that data\nstore this guy up here,\n\n455\n00:21:51.791 --> 00:21:55.485\nthe esx-host01-iscsi-datastore.\n\n456\n00:21:55.485 --> 00:22:00.555\nI created it, I put it on that disk,\nand it's up and it's running.\n\n457\n00:22:00.555 --> 00:22:01.865\nAnd it's only got one path.\n\n458\n00:22:01.865 --> 00:22:04.070\nYou can also verify it\nfrom the data store.\n\n459\n00:22:04.070 --> 00:22:09.440\nSo when I'm here in the data store,\nif I go to settings,\n\n460\n00:22:09.440 --> 00:22:12.620\nand then go down to connectivity and\nmulti pathing,\n\n461\n00:22:12.620 --> 00:22:16.670\nyou get a little information here\nabout multi pathing that you've got.\n\n462\n00:22:16.670 --> 00:22:20.710\nAnd so I can see that I've got EXSO 1\nas the only one with this data store.\n\n463\n00:22:20.710 --> 00:22:23.000\nIf I was doing a cluster,\nI would have more than one host, and\n\n464\n00:22:23.000 --> 00:22:24.770\nyou can view it from each host.\n\n465\n00:22:24.770 --> 00:22:29.140\nAnd down here at the bottom\nis where we can start to see\n\n466\n00:22:29.140 --> 00:22:31.610\nhow this is actually set up.\n\n467\n00:22:31.610 --> 00:22:36.520\nAnd see how the path\nselection policy is fixed.\n\n468\n00:22:36.520 --> 00:22:39.250\nThat's the default, it's using\nthe first one that I configured.\n\n469\n00:22:39.250 --> 00:22:43.490\nAnd the Storage Array Type Policy,\nSATP is the default setting.\n\n470\n00:22:43.490 --> 00:22:48.230\nIt's just using fixed kinda activity to\nget me over there and that's it, right.\n\n471\n00:22:48.230 --> 00:22:51.871\nAll right down here I can see,\npaths I've got one path.\n\n472\n00:22:51.871 --> 00:22:54.982\nJust one path, and if I scroll down a bit,\nthere's that one path,\n\n473\n00:22:54.982 --> 00:22:58.790\nthat's the same data that I saw over\non the storage controller earlier.\n\n474\n00:22:58.790 --> 00:23:00.150\nRight?\nSo, we can verify it from\n\n475\n00:23:00.150 --> 00:23:03.410\nthe storage controller, or\nwe can verify it from the data store.\n\n476\n00:23:03.410 --> 00:23:06.440\nEither way,\nI've only got one path right now.\n\n477\n00:23:06.440 --> 00:23:08.960\nSo, I'm gonna add another target.\n\n478\n00:23:08.960 --> 00:23:11.370\nAnd as soon as I add another target,\n\n479\n00:23:11.370 --> 00:23:13.560\nit's gonna view that as a completely\nseparate SAN, all right?\n\n480\n00:23:13.560 --> 00:23:16.023\nSo you've got two iSCSI SANs, great.\n\n481\n00:23:16.023 --> 00:23:18.975\nBut when it connects, and it sees that\ndisk, and it sees that data store.\n\n482\n00:23:18.975 --> 00:23:21.974\nAnd it sees the same\nidentity numbers on it.\n\n483\n00:23:21.974 --> 00:23:23.271\nIt will say, wait a minute.\n\n484\n00:23:23.271 --> 00:23:25.430\nThis is two paths to the same thing.\n\n485\n00:23:25.430 --> 00:23:27.370\nAnd now I'll have two paths.\n\n486\n00:23:27.370 --> 00:23:28.502\nAll right?\nWith an HBA,\n\n487\n00:23:28.502 --> 00:23:33.400\nwith a fiber optic network, you just chuck\nin the other adaptor and re-scan, right?\n\n488\n00:23:33.400 --> 00:23:37.464\nWith iSCSI or fiber channel over ethernet,\nI have to add a new target and\n\n489\n00:23:37.464 --> 00:23:38.450\nthen re-scan.\n\n490\n00:23:38.450 --> 00:23:41.850\nSo it's adding software instead of\nhardware, but it's the same process.\n\n491\n00:23:41.850 --> 00:23:44.890\nSo, I'm going to jump back to my host,\nand I'm going to do that, right?\n\n492\n00:23:44.890 --> 00:23:50.204\nSo, I'm going to go into my host,\nI'll go to manage, storage and adapters.\n\n493\n00:23:50.204 --> 00:23:55.304\nI'm going to choose my adapter,\nwhich I've already chosen right here.\n\n494\n00:23:55.304 --> 00:23:58.391\nAnd then,\nonce I've got that adapter chosen,\n\n495\n00:23:58.391 --> 00:24:02.081\nI'm going to go down to my targets And\nI'm gonna add the target in.\n\n496\n00:24:02.081 --> 00:24:03.340\nOkay, so I'll just add it in.\n\n497\n00:24:03.340 --> 00:24:05.290\nSo, this is on a separate network.\n\n498\n00:24:05.290 --> 00:24:11.690\nIn theory, I could have given the sand two\nIPs on the same network, but if you have\n\n499\n00:24:11.690 --> 00:24:14.910\ntwo IPs on the same network, how do you\nsend them across two different switches?\n\n500\n00:24:14.910 --> 00:24:15.990\nIt's really difficult to do that.\n\n501\n00:24:15.990 --> 00:24:19.130\nLayer two is not really designed\nto do that in the OSI model.\n\n502\n00:24:19.130 --> 00:24:21.740\nLayer three, though,\nrouted traffic, that'll do it.\n\n503\n00:24:21.740 --> 00:24:23.720\nThey need to be two different IP subnets.\n\n504\n00:24:23.720 --> 00:24:27.400\nAnd now I can say the first subnet\ngoes over this set of switches,\n\n505\n00:24:27.400 --> 00:24:29.200\nthe second subnet goes over\nthat set of switches, and\n\n506\n00:24:29.200 --> 00:24:32.400\nI achieve that by plugging my network\nadaptors into those different switches.\n\n507\n00:24:32.400 --> 00:24:33.800\nThat makes it easier all right.\n\n508\n00:24:33.800 --> 00:24:38.240\nSo I'm gonna punch in the other\nIP address for my server,\n\n509\n00:24:38.240 --> 00:24:42.460\nwhich is on the 192.168.1 network instead\nof the 192.168.0 network all right.\n\n510\n00:24:42.460 --> 00:24:47.250\nAnd I don't have any\nauthentication turned on for mine.\n\n511\n00:24:47.250 --> 00:24:50.000\nOn a fiber HBA you wouldn't\nhave authentication either, but\n\n512\n00:24:50.000 --> 00:24:53.960\non iSCSI you might choose to turn that on,\nI'm just gonna leave it off.\n\n513\n00:24:53.960 --> 00:24:56.730\nAll right, so that's gonna add another\ntarget, and as soon as I do that I'm gonna\n\n514\n00:24:56.730 --> 00:25:01.330\nget a warning on my screen telling me I\nneed to re-scan my system, there it is.\n\n515\n00:25:01.330 --> 00:25:04.140\nSo now I can see I've got my two targets,\n\n516\n00:25:04.140 --> 00:25:07.740\nwhich as far as the system is concerned\nare two completely separate SANs.\n\n517\n00:25:07.740 --> 00:25:10.070\nIt doesn't know that they're the same SAN,\nbut\n\n518\n00:25:10.070 --> 00:25:12.410\nwhen I rescan what it's warning me about.\n\n519\n00:25:12.410 --> 00:25:16.480\nWhen I rescan,\nit's gonna scan that adapter and look for\n\n520\n00:25:16.480 --> 00:25:18.080\nthe devices on the other end.\n\n521\n00:25:18.080 --> 00:25:23.080\nAnd when it finds duplicate\ndevices with the same ID,\n\n522\n00:25:23.080 --> 00:25:27.080\nthat's when it'll know that I've got\nmultipathing in place, all right.\n\n523\n00:25:27.080 --> 00:25:30.530\nSo I'm gonna let that rescan, it's doing\nit right now, and I can sit here and\n\n524\n00:25:30.530 --> 00:25:32.320\nwatch my task to see it complete.\n\n525\n00:25:32.320 --> 00:25:34.990\nAnd then we should have multipathing.\n\n526\n00:25:34.990 --> 00:25:38.270\nNow I do wanna throw out one thing,\nif this were an HBA, or\n\n527\n00:25:38.270 --> 00:25:40.920\nif this were Fibre Channel, or\nEthernet, yeah, we'd be done.\n\n528\n00:25:40.920 --> 00:25:42.370\nWe'd see our multipath,\n\n529\n00:25:42.370 --> 00:25:47.390\nbut the majority of the time with iSCSI\nit still doesn't find the multipath.\n\n530\n00:25:47.390 --> 00:25:50.150\nIt's something quirky about\nhow iSCSI does its discovery.\n\n531\n00:25:50.150 --> 00:25:54.710\nSo I won't be surprised,\nif I don't see my multipath.\n\n532\n00:25:54.710 --> 00:25:58.530\nWe might, but if we don't then I might\nneed to do what's called port binding.\n\n533\n00:25:58.530 --> 00:26:02.070\nPort binding is where I tie that\ntarget to my adapter, and so\n\n534\n00:26:02.070 --> 00:26:05.350\nnow it's port bound to this system,\nand it knows to use that as a path.\n\n535\n00:26:05.350 --> 00:26:06.380\nSo I might have to do that.\n\n536\n00:26:06.380 --> 00:26:08.660\nLet's see if I'm in that scenario.\n\n537\n00:26:08.660 --> 00:26:15.071\nSo under my storage adapter now,\nwhen I take a look at that adapter,\n\n538\n00:26:15.071 --> 00:26:19.250\nI've got my targets, and let me just get\na little more room on the screen here.\n\n539\n00:26:19.250 --> 00:26:24.080\nSo I got my two targets, and I'm gonna\ngo over to paths, and yeah, sure enough.\n\n540\n00:26:24.080 --> 00:26:26.240\nAll right.\nSo I've only got one path.\n\n541\n00:26:26.240 --> 00:26:26.810\nRight?\n\n542\n00:26:26.810 --> 00:26:28.550\nI've got one path to one zero.\n\n543\n00:26:28.550 --> 00:26:30.560\nThe other path to one\nzero is not showing up.\n\n544\n00:26:30.560 --> 00:26:33.800\nSo I'm gonna have to port bind these,\nand it's just a function of iSCSI.\n\n545\n00:26:33.800 --> 00:26:36.510\nYou'll see I've got this tab up here,\nnetwork port binding.\n\n546\n00:26:36.510 --> 00:26:39.570\nSo I'm gonna choose that, and\nright now we've got no VM\n\n547\n00:26:39.570 --> 00:26:42.970\nkernel network adapters are bound\nto the iSCSI host post adapter.\n\n548\n00:26:42.970 --> 00:26:44.830\nSo I need to go ahead and\nbind those adapters in.\n\n549\n00:26:44.830 --> 00:26:46.350\nYou know, now that I've said it,\n\n550\n00:26:46.350 --> 00:26:48.530\nI think I've forgotten something\nkind of important here, Wes.\n\n551\n00:26:49.720 --> 00:26:52.480\nI need to have a separate adapter for\nthis, right,\n\n552\n00:26:52.480 --> 00:26:55.580\nI want it to be on a separate network, and\nI kind of forgot to configure that, right.\n\n553\n00:26:55.580 --> 00:26:58.650\nSo that might also be why I'm\nnot seeing the other path.\n\n554\n00:26:58.650 --> 00:27:01.660\nI don't have a way to connect\nto the 192.168.1 network.\n\n555\n00:27:01.660 --> 00:27:03.790\nYou kind of need that extra adapter.\n\n556\n00:27:03.790 --> 00:27:07.150\nSo, I can't remember if I did\nthat before the show or not, so\n\n557\n00:27:07.150 --> 00:27:08.830\nlet's go find that out real quick.\n\n558\n00:27:08.830 --> 00:27:12.820\nI'm gonna jump over to my networking and\ngo over to VM kernel adapters, and\n\n559\n00:27:12.820 --> 00:27:16.540\nideally if you're multi-pathing,\nyou've have two adapters, right?\n\n560\n00:27:16.540 --> 00:27:19.420\nOne adapter one one network,\none adapter on the other.\n\n561\n00:27:19.420 --> 00:27:24.480\nI've just got this one VM kernel adaptor\nthat's on the 192.168.0 network.\n\n562\n00:27:24.480 --> 00:27:28.460\nIf I don't have one on the 192.168.1\nnetwork, I'm not gonna be able to connect.\n\n563\n00:27:28.460 --> 00:27:30.690\nSo I need to add another\nVM kernel adaptor.\n\n564\n00:27:30.690 --> 00:27:31.840\nI forgot that step.\n\n565\n00:27:31.840 --> 00:27:33.945\nSo let me go ahead and\nadd that in real quick.\n\n566\n00:27:33.945 --> 00:27:35.655\nSome add in new VM internal adaptor.\n\n567\n00:27:36.905 --> 00:27:40.045\nAnd I can reuse existing\nvSwitch if I want, but\n\n568\n00:27:40.045 --> 00:27:42.195\nthat's probably not really what you want.\n\n569\n00:27:42.195 --> 00:27:44.135\nWhat you really want is\na separate physical switch.\n\n570\n00:27:44.135 --> 00:27:46.450\nRight?\nA separate physical network adaptor.\n\n571\n00:27:46.450 --> 00:27:49.160\nAnd so doing a separate v-switch\nis the easiest way to do that.\n\n572\n00:27:49.160 --> 00:27:53.000\nSo I could create a new v-switch and\nattach it and go from there.\n\n573\n00:27:53.000 --> 00:27:56.530\nThe way my lab is set up, though, I can do\nit on the standard v-switch if I want, and\n\n574\n00:27:56.530 --> 00:27:59.490\njust do a separate port group that's\ntied to different physical adaptors.\n\n575\n00:27:59.490 --> 00:28:02.070\nIt's up to me how I wanna go about that.\n\n576\n00:28:02.070 --> 00:28:05.370\nI'll go and do a new standard switch so,\ncuz that's how I'd do it in real life.\n\n577\n00:28:07.300 --> 00:28:10.330\nFrom here we can then pick the adaptors\nthat are gonna be a part of this, and\n\n578\n00:28:10.330 --> 00:28:13.120\nhere's where I'm gonna pick the physical\nadaptor that this one's going to use.\n\n579\n00:28:13.120 --> 00:28:14.680\nI'm gonna add in a new adaptor, and\n\n580\n00:28:14.680 --> 00:28:17.410\nI've got this vmnic1 that's\nkinda laying around.\n\n581\n00:28:17.410 --> 00:28:18.800\nSo I'm going to add that one in.\n\n582\n00:28:18.800 --> 00:28:22.700\nSo VMnic1 is going to be an active\nadapter for this new system.\n\n583\n00:28:24.130 --> 00:28:25.950\nAnd then I can give it a network name.\n\n584\n00:28:25.950 --> 00:28:29.580\nIt's called VMkernel here,\nI'm going to call this like iscsi2, so\n\n585\n00:28:29.580 --> 00:28:32.760\nthis is my second adapter\nthat's being used for iscsi.\n\n586\n00:28:32.760 --> 00:28:34.950\nAnd then down here I pick the services.\n\n587\n00:28:34.950 --> 00:28:38.420\nNow iscsi doesn't have a dedicated entry.\n\n588\n00:28:38.420 --> 00:28:40.730\nIt used to in some of the earlier\nversions, it doesn't anymore.\n\n589\n00:28:40.730 --> 00:28:45.860\nSo I don't need to pick much, if I'm doing\nvMotion, I'll need to check that off,\n\n590\n00:28:45.860 --> 00:28:49.130\nand I might want to enable management\ntraffic if that's a real network that I\n\n591\n00:28:49.130 --> 00:28:51.760\nmight be on, but I don't technically\nhave to enable any of this,\n\n592\n00:28:51.760 --> 00:28:54.940\nI could leave them all empty although\nV Motion won't work, if I do that.\n\n593\n00:28:54.940 --> 00:28:57.160\nSo I'm going to go ahead and\ncheck those off.\n\n594\n00:28:58.630 --> 00:29:00.170\nAnd now I can assign that IP address.\n\n595\n00:29:00.170 --> 00:29:03.980\nNow I'm going to give it an IP\non that 192.168.1 network, so\n\n596\n00:29:03.980 --> 00:29:05.625\nI'll be able to talk.\n\n597\n00:29:05.625 --> 00:29:06.890\nThat's gonna make a big difference.\n\n598\n00:29:06.890 --> 00:29:10.905\n[LAUGH] And\nI'm not worried about the gateway or\n\n599\n00:29:10.905 --> 00:29:13.215\nthe DNS server being wrong or right.\n\n600\n00:29:13.215 --> 00:29:14.085\nIt doesn't matter.\n\n601\n00:29:14.085 --> 00:29:16.255\nI've got the other adapter that\nI communicate on normally,\n\n602\n00:29:16.255 --> 00:29:17.992\nso that's fine for me.\n\n603\n00:29:17.992 --> 00:29:19.222\nThis one is just for eyes can see.\n\n604\n00:29:20.342 --> 00:29:21.122\nAll right.\n\n605\n00:29:21.122 --> 00:29:26.392\nSo now I can finish that up and\nI'll have a new VM Internal adaptor that's\n\n606\n00:29:26.392 --> 00:29:31.072\nplug into a new vSwitch this tied to\na different physical adaptor on my system.\n\n607\n00:29:31.072 --> 00:29:35.500\nSo I have Via zero that's\nconnect to the first target.\n\n608\n00:29:35.500 --> 00:29:39.091\nAnd via one that's connected\nto the second target.\n\n609\n00:29:39.091 --> 00:29:42.141\nTwo different physical adapters,\ntwo different cables run to two different\n\n610\n00:29:42.141 --> 00:29:48.290\nswitches run to two different interfaces\non my sand, full multi-pathing, all right?\n\n611\n00:29:48.290 --> 00:29:51.160\nSo now that I've got that,\nlet me go double check and\n\n612\n00:29:51.160 --> 00:29:52.420\nsee if my paths show up now.\n\n613\n00:29:52.420 --> 00:29:54.900\nI might still have to do\nnetwork port finding, but\n\n614\n00:29:54.900 --> 00:29:57.320\nthat may have resolved\nmy issue right there.\n\n615\n00:29:57.320 --> 00:30:02.300\nSo I'm going to jump over to storage,\nI'm gonna go down to my adapter, and\n\n616\n00:30:02.300 --> 00:30:03.740\nI'm gonna re-scan it.\n\n617\n00:30:03.740 --> 00:30:04.830\nIt's not warning me.\n\n618\n00:30:04.830 --> 00:30:07.310\nBut I know I need to rescan it,\nbecause I just added that adapter.\n\n619\n00:30:07.310 --> 00:30:12.530\nSo I'm gonna cause a rescan, and\nwe'll see if we get anything new.\n\n620\n00:30:12.530 --> 00:30:14.380\nThat rescan went super fast.\n\n621\n00:30:14.380 --> 00:30:15.540\nSo let's see.\n\n622\n00:30:16.650 --> 00:30:19.325\nI got my other path, and\nI didn't have to do so there we go.\n\n623\n00:30:19.325 --> 00:30:21.875\nAll right, I have two paths now.\n\n624\n00:30:21.875 --> 00:30:23.875\nAnd let's take a look at these paths,\nwhat are we seeing?\n\n625\n00:30:23.875 --> 00:30:27.155\nWell, I've got two connections that\ngive the runtime name that doesn't help\n\n626\n00:30:27.155 --> 00:30:27.736\nme so much.\n\n627\n00:30:27.736 --> 00:30:31.043\nThe target name that doesn't help me so\nmuch either,\n\n628\n00:30:31.043 --> 00:30:33.840\nbecause the target name\nIs gonna be the same.\n\n629\n00:30:33.840 --> 00:30:36.920\nBut if I keep going across,\nI can see the IP, and\n\n630\n00:30:36.920 --> 00:30:42.392\nsee how I've got 192.168.1.200 and\n192.168.0.200.\n\n631\n00:30:42.392 --> 00:30:43.822\nSo there we go.\nWe got them both and\n\n632\n00:30:43.822 --> 00:30:46.790\nthey're showing up right there and\nnotice the LUN.\n\n633\n00:30:46.790 --> 00:30:48.330\nThey're both LUN zero.\n\n634\n00:30:48.330 --> 00:30:50.020\nThat's critical right there.\n\n635\n00:30:50.020 --> 00:30:53.560\nCuz if I see LUN zero and\nLUN one, I don't have two paths,\n\n636\n00:30:53.560 --> 00:30:56.720\nI have one path to two different LUNs,\nright.\n\n637\n00:30:56.720 --> 00:30:59.100\nI'm not getting the multipathing\nthat I really want.\n\n638\n00:30:59.100 --> 00:31:02.850\nAnd then you can also see how\none of them is active, and\n\n639\n00:31:02.850 --> 00:31:06.210\nthe other is one is Active I/O, right.\n\n640\n00:31:06.210 --> 00:31:10.810\nThe one to 192.168.0 that's the one I\nhad set up first, so it's active I/O.\n\n641\n00:31:10.810 --> 00:31:15.750\nThe one to 192.168.1,\nit's active with no I/O, right?\n\n642\n00:31:15.750 --> 00:31:18.600\nSo it's in a standby state, right?\n\n643\n00:31:18.600 --> 00:31:20.200\nI'm not actually using it.\n\n644\n00:31:20.200 --> 00:31:23.630\nIt's available,\nI can use it if the other one fails.\n\n645\n00:31:23.630 --> 00:31:25.410\nBut for right now I'm using the other one.\n\n646\n00:31:25.410 --> 00:31:26.649\nI'm using the first one that was defined.\n\n647\n00:31:27.960 --> 00:31:31.280\nNow, just for your own reference,\nlet's say these paths didn't show up.\n\n648\n00:31:31.280 --> 00:31:33.360\nIf they didn't show up,\nthen I would do network port binding.\n\n649\n00:31:33.360 --> 00:31:34.500\nThat would be my next step, right?\n\n650\n00:31:34.500 --> 00:31:37.360\nSo we would go to this\nnetwork port binding tab, and\n\n651\n00:31:37.360 --> 00:31:39.580\nyou just hit your little\nplus sign right here.\n\n652\n00:31:39.580 --> 00:31:43.205\nAnd it's gonna show you\nyour VM kernel adaptors.\n\n653\n00:31:43.205 --> 00:31:47.644\nAnd what you're doing is you're just\ntelling which VM kernel adaptors to use.\n\n654\n00:31:47.644 --> 00:31:50.141\nSo if you have more than\none adaptor laid out,\n\n655\n00:31:50.141 --> 00:31:52.584\nsome might have the connectivity you want.\n\n656\n00:31:52.584 --> 00:31:53.307\nSome might not.\n\n657\n00:31:53.307 --> 00:31:56.920\nAnd so you would just check off\nthe ones that you wanted, and\n\n658\n00:31:56.920 --> 00:32:00.630\nthen you would hit OK and\nit'll bind those in.\n\n659\n00:32:00.630 --> 00:32:04.910\nYou don't have to do it,\nI only do it if my paths don't show up.\n\n660\n00:32:04.910 --> 00:32:06.740\nIf my paths do show up,\nI leave this off and\n\n661\n00:32:06.740 --> 00:32:08.270\nI don't do network port binding, right?\n\n662\n00:32:08.270 --> 00:32:11.810\nCuz what happens in the future if you come\nand have to change out an adaptor, right?\n\n663\n00:32:11.810 --> 00:32:15.460\nI have an adaptor fail, I do a warranty\ncall on it, now I've got to remember to\n\n664\n00:32:15.460 --> 00:32:18.440\ncome in here and add the new adapter,\nI gotta change that stuff out.\n\n665\n00:32:18.440 --> 00:32:21.110\nBut if I don't do binding,\nI guess the physical adapter wouldn't\n\n666\n00:32:21.110 --> 00:32:24.070\nnecessarily change as much as\nthe virtual switch reconfiguring there.\n\n667\n00:32:24.070 --> 00:32:27.240\nBut if I don't bind it,\nthen it will just automatically detect and\n\n668\n00:32:27.240 --> 00:32:28.510\nit will grab the next one.\n\n669\n00:32:28.510 --> 00:32:31.120\nIf I bind it, I've got to remember to\ncome back in here and change that.\n\n670\n00:32:31.120 --> 00:32:34.890\nSo, I try not to set this\nunless I absolutely have to.\n\n671\n00:32:34.890 --> 00:32:37.412\nAll right, but\nat this point I do have multipathing.\n\n672\n00:32:37.412 --> 00:32:42.222\nSo if I go back to my datastore, I'm\ngonna jump over to that iSCSI datastore,\n\n673\n00:32:42.222 --> 00:32:45.848\nand I'm gonna go to Manage >\nSettings > Connectivity and\n\n674\n00:32:45.848 --> 00:32:48.870\nMultipathing, like we did earlier.\n\n675\n00:32:48.870 --> 00:32:54.120\nAnd when I take a look at esx-host01's\npoint of view, right down here,\n\n676\n00:32:54.120 --> 00:32:58.370\nwhat I should see is that\nI now have two paths.\n\n677\n00:32:58.370 --> 00:33:01.350\nI'm still in the Fixed mode,\nright, the PSP and the SATP,\n\n678\n00:33:01.350 --> 00:33:06.030\nthose havent changed, but now I have\ntwo paths showing up right here, and\n\n679\n00:33:06.030 --> 00:33:08.550\nI can see those paths and\nwhich ones are active.\n\n680\n00:33:08.550 --> 00:33:11.250\nAnd I can even jump in and\nchange the state of those.\n\n681\n00:33:11.250 --> 00:33:15.319\nIf I want to test a failover,\nI can come in and disable one of these.\n\n682\n00:33:15.319 --> 00:33:18.134\nOr I could choose one that was\ndisabled and reenable it, so\n\n683\n00:33:18.134 --> 00:33:20.431\nyou can kind of flip it and\nsee what happens, and\n\n684\n00:33:20.431 --> 00:33:23.774\nsee that I/O move to the other one\nif we wanted to test it, all right?\n\n685\n00:33:23.774 --> 00:33:27.603\nBut now, I’ve got multipathing and\nwe're up and running.\n\n686\n00:33:27.603 --> 00:33:31.923\nOne's active, one's standby,\nnow I’ve got great redundancy,\n\n687\n00:33:31.923 --> 00:33:33.880\nzero change in performance.\n\n688\n00:33:33.880 --> 00:33:36.996\nI'll have the exact same performance\nprofile here as I did before,\n\n689\n00:33:36.996 --> 00:33:39.250\ncuz I’m still technically\njust using one path.\n\n690\n00:33:39.250 --> 00:33:41.723\nAll right,\nI have a lot more that I want to show, but\n\n691\n00:33:41.723 --> 00:33:43.290\nI know I'm running low on time.\n\n692\n00:33:43.290 --> 00:33:46.070\nSo, I want to show you some additional\nport states that we can have,\n\n693\n00:33:46.070 --> 00:33:49.020\nI want to do some of the other\npath selection plugins.\n\n694\n00:33:49.020 --> 00:33:52.060\nAnd I wanna talk about another technology\nthat gets kinda wrapped into this that\n\n695\n00:33:52.060 --> 00:33:53.420\ncauses a lot of confusion.\n\n696\n00:33:53.420 --> 00:33:55.100\nSo I have a few more things to tackle, but\n\n697\n00:33:55.100 --> 00:33:57.440\nI think we're gonna do that\nas part of a part two, Wes.\n\n698\n00:33:57.440 --> 00:33:59.030\n>> All right, Don, so\nthat's what we're gonna do.\n\n699\n00:33:59.030 --> 00:34:00.270\nWe'll go ahead and wrap this one up.\n\n700\n00:34:00.270 --> 00:34:02.265\nBut before we do,\ndo you got any additional words, or\n\n701\n00:34:02.265 --> 00:34:04.255\ndo you wanna go ahead and\njust throw that in part two?\n\n702\n00:34:04.255 --> 00:34:06.855\n>> The main thing here is make\nsure you double check your work\n\n703\n00:34:06.855 --> 00:34:07.645\nwith all of this stuff.\n\n704\n00:34:07.645 --> 00:34:11.450\nMake sure you rescan your adapters often,\nbecause you'll configure it and\n\n705\n00:34:11.450 --> 00:34:14.815\nthen things won't show up, and you just\nneed to rescan and make sure they show up.\n\n706\n00:34:14.815 --> 00:34:17.730\nAnd then always make sure\nyou test your paths, too.\n\n707\n00:34:17.730 --> 00:34:21.110\nKeep in mind that you\ncan set up multipathing,\n\n708\n00:34:21.110 --> 00:34:22.850\neven with one network adapter.\n\n709\n00:34:22.850 --> 00:34:25.720\nIt'll let you do it if you start creating\nmultiple targets with the same IP\n\n710\n00:34:25.720 --> 00:34:29.420\nrange and you throw them onto one adapter,\nthat's not true multipathing though.\n\n711\n00:34:29.420 --> 00:34:31.153\nThis is really about\nyour physical network.\n\n712\n00:34:31.153 --> 00:34:35.605\nSo you gotta have a duplicate physical\nnetwork to really take advantage of this.\n\n713\n00:34:35.605 --> 00:34:38.345\nIf you're doing multiple logical\npaths over the same physical network,\n\n714\n00:34:38.345 --> 00:34:39.185\nyou're just wasting your time.\n\n715\n00:34:39.185 --> 00:34:40.411\nYou might as well just have one path,\n\n716\n00:34:40.411 --> 00:34:44.025\ncuz you're not gonna get any\nincreased performance or redundancy.\n\n717\n00:34:44.025 --> 00:34:46.365\n>> All right, Don, well I look\nforward to seeing you in part two.\n\n718\n00:34:46.365 --> 00:34:47.465\nAnd thank you for watching.\n\n719\n00:34:47.465 --> 00:34:50.295\nSigning out for ITProTV,\nI've been your host Wes Bryan.\n\n720\n00:34:50.295 --> 00:34:50.955\n>> And I'm Don Pezet.\n\n721\n00:34:50.955 --> 00:34:52.381\n>> And we'll see you next time.\n\n722\n00:34:52.381 --> 00:34:59.564\n[MUSIC]\n\n",
          "vimeoId": "172100716"
        },
        {
          "description": "In this episode, Wes and Don continue their demonstration on setting up and implementing storage multi-patting. They look at Asymmetric Logical Unit Access (ALUA) and the different path statuses such as active, standby, disabled and dead. They talk about monitoring and configuration of the storage controllers as well.",
          "length": "1146",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-5-2-storage_multi-pathing_pt2-062316-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-5-2-storage_multi-pathing_pt2-062316-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-4-5-2-storage_multi-pathing_pt2-062316-1-sm.jpg",
          "title": "Storage Multi-Pathing Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.700 --> 00:00:14.483\nWelcome back to another exciting\nepisode here at ITPRO.TV.\n\n3\n00:00:14.483 --> 00:00:18.690\nI'm your host Wes Bryan and in today's\nepisode we're continuing on in VMware.\n\n4\n00:00:18.690 --> 00:00:21.560\nThat's right, the VMware Certified\nProfessional version 6, and\n\n5\n00:00:21.560 --> 00:00:25.150\nthis is actually a part two\nin storage multipathing.\n\n6\n00:00:25.150 --> 00:00:28.110\nThere's more than one path you can\ntake and before I set myself up with\n\n7\n00:00:28.110 --> 00:00:32.070\na bad Yoda joke, joining me in the studios\nis non other than Mr. Don Pezet.\n\n8\n00:00:32.070 --> 00:00:32.930\nDon, how you doing sir?\n\n9\n00:00:32.930 --> 00:00:33.890\n>> I am doing swell Wes,\n\n10\n00:00:33.890 --> 00:00:37.810\nready to dive back into part\ntwo of storage multipathing.\n\n11\n00:00:37.810 --> 00:00:41.370\nIn our last episode we got a chance\nto see how to configure multipathing,\n\n12\n00:00:41.370 --> 00:00:43.070\njust to get it turned on, right?\n\n13\n00:00:43.070 --> 00:00:45.150\nTook me apparently 30 minutes to do that.\n\n14\n00:00:45.150 --> 00:00:48.402\nSo, we got it turned on,\nwe saw, we are multi-pathing.\n\n15\n00:00:48.402 --> 00:00:51.220\nBut we're multipathing\nin the default manner.\n\n16\n00:00:51.220 --> 00:00:54.290\nAnd I want to start off this show by\nshowing how to change that, right?\n\n17\n00:00:54.290 --> 00:00:57.820\nSo, if you remember from last episode,\nlet's refresh our memories.\n\n18\n00:00:57.820 --> 00:01:03.170\nNow, when you have more than one path\nbetween an ESXi host and its network\n\n19\n00:01:03.170 --> 00:01:06.440\nattached storage, it would be a fiber\nchannel sand or I scheduled whatever.\n\n20\n00:01:06.440 --> 00:01:10.830\nWhen you have more than one path,\nthere's three modes we can connect with.\n\n21\n00:01:10.830 --> 00:01:15.180\nThere's fixed, where we have one\ndefined connection that we always use\n\n22\n00:01:15.180 --> 00:01:17.480\nunless it fails and\nthen we have a backup, right?\n\n23\n00:01:17.480 --> 00:01:22.120\nThat's the fixed method,\nthere's MRU or most recently used.\n\n24\n00:01:22.120 --> 00:01:26.450\nAnd that's where whichever one was active\nfirst, we use and if it fails we just flip\n\n25\n00:01:26.450 --> 00:01:29.050\nover to another one, unless it fails,\nand we flip back, right?\n\n26\n00:01:29.050 --> 00:01:32.810\nMost recently used and\nthe third mode is round robin.\n\n27\n00:01:32.810 --> 00:01:37.370\nRound robin is where we load balance\nour traffic across both has.\n\n28\n00:01:37.370 --> 00:01:42.100\nSo now, not only do we get redundancy,\nbut we also get a performance boost.\n\n29\n00:01:42.100 --> 00:01:45.480\nAnd we saw in the last episode when we\nturned on multipathing that it defaulted\n\n30\n00:01:45.480 --> 00:01:49.180\nto fixed, that's the default, and\nnow we want to get in there and\n\n31\n00:01:49.180 --> 00:01:49.800\nchange that, right?\n\n32\n00:01:49.800 --> 00:01:50.908\nWe want to modify that.\n\n33\n00:01:50.908 --> 00:01:53.390\nNow, the multipathing is\ncontrolled by what's called a PSP,\n\n34\n00:01:53.390 --> 00:01:56.220\na path selection plugin.\n\n35\n00:01:56.220 --> 00:01:59.360\nAnd the path selection plugin, well,\nthere's one for each of the three motives.\n\n36\n00:01:59.360 --> 00:02:04.150\nSo, we basically have to tell the system,\ndon't use this PSP, use this other PSP,\n\n37\n00:02:04.150 --> 00:02:07.390\nand then it will use the right one\nto get in there and get connected.\n\n38\n00:02:07.390 --> 00:02:10.410\nAnd that's done at the data store level.\n\n39\n00:02:10.410 --> 00:02:13.668\nThat means we can have more than one\ndata store using a different PSP,\n\n40\n00:02:13.668 --> 00:02:16.026\nI might have one data store\nthat set to use fixed and\n\n41\n00:02:16.026 --> 00:02:18.675\nanother data store that\nset to use round robin.\n\n42\n00:02:18.675 --> 00:02:21.865\nIt's at the data store level, it gives\nus a lot of flexibility, all right?\n\n43\n00:02:21.865 --> 00:02:23.805\nSo, let's dive in and take a look at that.\n\n44\n00:02:23.805 --> 00:02:26.975\nSo I'm connected into my\nvCenter environment and\n\n45\n00:02:26.975 --> 00:02:28.565\nI'm looking at my data store.\n\n46\n00:02:28.565 --> 00:02:32.470\nSo I've got this ESX host\n01 I SCSI data store.\n\n47\n00:02:32.470 --> 00:02:37.440\nAnd I'm going up to Manage, Settings,\nand Connectivity and Multipathing.\n\n48\n00:02:37.440 --> 00:02:39.010\nAnd when I look at my status for\n\n49\n00:02:39.010 --> 00:02:42.890\nthis connection I can see that\nI have two paths right now.\n\n50\n00:02:42.890 --> 00:02:47.360\nAnd the two paths are both connecting me\nto LAN zero, so it's one hard drive and\n\n51\n00:02:47.360 --> 00:02:48.700\nI'm connected to both.\n\n52\n00:02:48.700 --> 00:02:52.070\nAnd this one is show us Active IO.\n\n53\n00:02:52.070 --> 00:02:55.100\nWe've defaulted to fixed and\nin the fixed environment,\n\n54\n00:02:55.100 --> 00:02:58.880\nall of our paths go active but we're\nonly saying discount over one of them.\n\n55\n00:02:58.880 --> 00:03:01.000\nThe fixed one, the first one we defined.\n\n56\n00:03:01.000 --> 00:03:04.120\nAnd I can see way over here\nin this preferred column\n\n57\n00:03:04.120 --> 00:03:05.820\nthis one has an asterisk right.\n\n58\n00:03:05.820 --> 00:03:08.140\nThat's the first one,\nthat's the one that we defined, and\n\n59\n00:03:08.140 --> 00:03:09.750\nit's the one that's going to be used.\n\n60\n00:03:09.750 --> 00:03:13.400\nIf it were to fail then we'd\nflip over to this other one.\n\n61\n00:03:13.400 --> 00:03:15.650\nAnd we'd only return here\nif that link came back.\n\n62\n00:03:15.650 --> 00:03:19.060\nWhen the link comes up we jump back\nover to it and that's it, right.\n\n63\n00:03:19.060 --> 00:03:23.290\nAnd if I look up here, in my details.\n\n64\n00:03:23.290 --> 00:03:25.790\nIf I can scroll my screen right,\nthere we go.\n\n65\n00:03:25.790 --> 00:03:30.860\nYou can see where my path selection policy\nright now is showing as fixed, all right.\n\n66\n00:03:30.860 --> 00:03:33.800\nIf I expand that out I can just see it's\nfixed and here's my preferred path with\n\n67\n00:03:33.800 --> 00:03:35.750\nthat name that doesn't mean\na whole lot to me, all right.\n\n68\n00:03:35.750 --> 00:03:38.860\nSo that's how I know\nthat I'm running fixed.\n\n69\n00:03:38.860 --> 00:03:42.450\nAnd right over here we've got our\nEdit button where we can jump in and\n\n70\n00:03:42.450 --> 00:03:43.890\nchange that behavior.\n\n71\n00:03:43.890 --> 00:03:48.540\nAnd so if I edit that, now I'm gonna\ncome in and I'll see my paths, right.\n\n72\n00:03:48.540 --> 00:03:51.880\nAnd see how it's showing this guy\nas my preferred right now, and\n\n73\n00:03:51.880 --> 00:03:53.410\nI'm in that fixed mode.\n\n74\n00:03:53.410 --> 00:03:58.480\nAnd if I drop it down,\nnow I can pick between Most Recently Used,\n\n75\n00:03:58.480 --> 00:04:00.590\nRound Robin and Fixed.\n\n76\n00:04:00.590 --> 00:04:03.230\nAnd see how they all say VMware?\n\n77\n00:04:03.230 --> 00:04:07.900\nVMware wrote all this using\ntheir VASA storage API V-A-S-A.\n\n78\n00:04:07.900 --> 00:04:11.590\nAnd, that VASA Storage API allows third\nparties to write their own plugins.\n\n79\n00:04:11.590 --> 00:04:15.300\nSo, anybody out there could\nwrite their own plugin,\n\n80\n00:04:15.300 --> 00:04:19.250\nwe could inject it into vCenter, and\nthen we would have that choice here.\n\n81\n00:04:19.250 --> 00:04:20.560\nSo they've flagged these as VMware so\n\n82\n00:04:20.560 --> 00:04:24.620\nyou know that they're the original ones\nthat came with Vasa, that VMware supports.\n\n83\n00:04:24.620 --> 00:04:27.960\nIf you choose a third party one,\nthat's fine, but VMware won't support you,\n\n84\n00:04:27.960 --> 00:04:30.690\nyou've got to call the third party for\nsupport if there's a problem.\n\n85\n00:04:30.690 --> 00:04:34.870\nAnd there are a few sand vendors out\nthere that have special plugins for\n\n86\n00:04:34.870 --> 00:04:35.870\ncommunicating with their sand.\n\n87\n00:04:35.870 --> 00:04:39.370\nBecause they have some crazy\nfeature benefit where it\n\n88\n00:04:39.370 --> 00:04:43.180\nusually centers around reducing\nfault detection on Round Robin.\n\n89\n00:04:43.180 --> 00:04:46.170\nCuz Round Robin with VMware can take\na little while to detect a fault,\n\n90\n00:04:46.170 --> 00:04:47.680\nit can take a few seconds.\n\n91\n00:04:47.680 --> 00:04:49.790\nSome third parties have gotten it down\nto where it's very, very fast, and\n\n92\n00:04:49.790 --> 00:04:50.860\nit makes it a great solution.\n\n93\n00:04:51.960 --> 00:04:55.420\nAll right, well, if I choose MRU, I'm not\nreally gonna see anything change here,\n\n94\n00:04:55.420 --> 00:04:57.720\nbecause MRU uses whichever\none was up first,\n\n95\n00:04:57.720 --> 00:05:00.090\nwhich is whichever one I\nconfigured first for Fixed.\n\n96\n00:05:00.090 --> 00:05:02.590\nSo for me, Fixed and\nMRU are gonna be about the same.\n\n97\n00:05:02.590 --> 00:05:06.410\nI'm gonna choose Round Robin,\nRound Robin is different.\n\n98\n00:05:06.410 --> 00:05:10.280\nWith Round Robin, it's gonna say I don't\nreally care which one came up first.\n\n99\n00:05:10.280 --> 00:05:13.230\nIf they're both Active, let's go ahead and\nbring them both Active.\n\n100\n00:05:13.230 --> 00:05:18.710\nI'm gonna Round Robin my data between the\ntwo so I can take advantage of both links.\n\n101\n00:05:18.710 --> 00:05:19.930\nAnd then if one link goes down,\n\n102\n00:05:19.930 --> 00:05:22.600\nI'll just shift all my traffic\nover to the one that's up.\n\n103\n00:05:22.600 --> 00:05:25.190\nAnd when the second link comes back\nonline, we just bring it back in and\n\n104\n00:05:25.190 --> 00:05:26.220\nnow we're round robining again.\n\n105\n00:05:26.220 --> 00:05:29.210\nIt gives us that balance and\nwe're in place, all right?\n\n106\n00:05:29.210 --> 00:05:31.270\nSo I'm gonna go ahead and\nchoose that and I'll just hit OK.\n\n107\n00:05:31.270 --> 00:05:33.415\nAnd what we're gonna see is,\n\n108\n00:05:33.415 --> 00:05:38.205\nafter a moment, the PSP will\nchange from Fixed to Round Robin.\n\n109\n00:05:38.205 --> 00:05:40.645\nAnd now the new behavior\nis going to take effect.\n\n110\n00:05:40.645 --> 00:05:44.895\nNow, you probably want to\ndo this after hours, or\n\n111\n00:05:44.895 --> 00:05:48.375\nwhen you can afford some down time,\nunless you've tested ahead of time.\n\n112\n00:05:48.375 --> 00:05:51.165\nMost of the time, your virtual machines\nhave no idea the change occurred.\n\n113\n00:05:51.165 --> 00:05:54.420\nAnd everything just runs smoothly\nwithout a blip in the world.\n\n114\n00:05:54.420 --> 00:05:58.460\nBut I have occasionally seen, where\na third party storage controller driver\n\n115\n00:05:58.460 --> 00:06:01.170\ncan start to freak out a little\nbit when you make this change and\n\n116\n00:06:01.170 --> 00:06:02.900\nyou end up having to reboot your host.\n\n117\n00:06:02.900 --> 00:06:05.010\nA simple reboot takes care of it, but\n\n118\n00:06:05.010 --> 00:06:07.620\nif you have to reboot the host,\nyour VMs can start to get messed up.\n\n119\n00:06:07.620 --> 00:06:10.700\nSo, what I recommend is either\ndoing this after hours.\n\n120\n00:06:10.700 --> 00:06:15.750\nOr if you have Vmotion set up,\njust move your VMs to another host,\n\n121\n00:06:15.750 --> 00:06:20.160\nconfigure multipathing here, and move your\nVMs back to it after it's configured.\n\n122\n00:06:20.160 --> 00:06:23.750\nAnd that way you don't have to worry\nabout your guests getting locked out.\n\n123\n00:06:23.750 --> 00:06:26.100\n>> Now the ESXi host,\nthey can see those paths.\n\n124\n00:06:26.100 --> 00:06:28.560\nHow about the SAN,\ncan the SAN see those paths or\n\n125\n00:06:28.560 --> 00:06:30.790\ndo we have to do some kind of\nconfiguration to make that happen?\n\n126\n00:06:30.790 --> 00:06:32.860\n>> So there's actually\nsomething interesting here.\n\n127\n00:06:32.860 --> 00:06:37.850\nYour SAN, it sees the paths, but the SAN\ndoesn't actually care about who connects.\n\n128\n00:06:37.850 --> 00:06:41.560\nThe SAN is going to see it as different\npeople, because it's tracking it based on\n\n129\n00:06:41.560 --> 00:06:45.830\nyour HBA identifiers,\nyour worldwide names and those things.\n\n130\n00:06:45.830 --> 00:06:49.150\nSo it thinks that it's two\ndifferent people connecting.\n\n131\n00:06:49.150 --> 00:06:52.210\nSo ESX is really where\nthe logic is happening here.\n\n132\n00:06:52.210 --> 00:06:53.720\nIt knows, hey I'm doing round robbing.\n\n133\n00:06:53.720 --> 00:06:54.880\nYou notice I've got two paths.\n\n134\n00:06:54.880 --> 00:06:57.680\nI'm gonna keep one active and\none non-active and that's how it goes.\n\n135\n00:06:57.680 --> 00:07:01.180\nSo for the most part,\nthis is entirely inside of ESXi.\n\n136\n00:07:02.460 --> 00:07:04.820\nBut there is an exception, all right.\n\n137\n00:07:04.820 --> 00:07:09.500\nYour SAN, in addition to having\nmultiple network adapters,\n\n138\n00:07:09.500 --> 00:07:12.410\nyour SAN might have multiple\nstorage processors, right?\n\n139\n00:07:12.410 --> 00:07:13.760\nHP is really big into this.\n\n140\n00:07:13.760 --> 00:07:18.580\nWhen you buy an HPE SAN, they always have\nthe option to get a second controller.\n\n141\n00:07:18.580 --> 00:07:22.710\nAnd the controller, that's your processor\nand memory, it's the logic of the SAN.\n\n142\n00:07:22.710 --> 00:07:25.130\nIt's basically a server\nbuilt into your SAN.\n\n143\n00:07:25.130 --> 00:07:29.340\nHaving a redundant network adapters is\nnice, having another hard drive is nice.\n\n144\n00:07:29.340 --> 00:07:31.180\nBut having a redundant processors,\n\n145\n00:07:31.180 --> 00:07:35.600\nnow it's like having two SANs that just\nhappen to be in the same metal box, right?\n\n146\n00:07:35.600 --> 00:07:38.390\nYou can have redundant power supplies,\nredundant processors,\n\n147\n00:07:38.390 --> 00:07:42.180\nredundant hard drives, redundant\nnetwork adaptors, redundant HPAs.\n\n148\n00:07:42.180 --> 00:07:44.130\nAnd now you really do,\n\n149\n00:07:44.130 --> 00:07:46.790\nyou have two SANs, they just happen\nto be in the same metal box.\n\n150\n00:07:46.790 --> 00:07:50.680\nYou have a complete silo failure on one\nside, and the other side takes over and\n\n151\n00:07:50.680 --> 00:07:52.150\nit's fine and it's running.\n\n152\n00:07:52.150 --> 00:07:55.260\nThe only thing it doesn't protect\nyou from is your facility crashing.\n\n153\n00:07:55.260 --> 00:07:58.660\nSo if you have that kind\nof environment set up\n\n154\n00:07:58.660 --> 00:08:01.040\nyour sand might have two network adapters.\n\n155\n00:08:01.040 --> 00:08:03.450\nWhere one adaptor, or HBA.\n\n156\n00:08:03.450 --> 00:08:07.160\nOne HBA runs into the processor\nthat's active and\n\n157\n00:08:07.160 --> 00:08:11.560\nthe other HBA runs into\nthe processor that's not active.\n\n158\n00:08:11.560 --> 00:08:15.535\nAnd if that processor is in standby,\nwhat is VMware gonna see?\n\n159\n00:08:15.535 --> 00:08:17.685\nWhat is ESXi gonna see when\nit looks at that path?\n\n160\n00:08:17.685 --> 00:08:19.855\nIt's not gonna see anything, is it?\n\n161\n00:08:19.855 --> 00:08:24.385\nSo there's actually a protocol that those\nsystems can speak through to recognize\n\n162\n00:08:24.385 --> 00:08:25.905\nwhat's going on.\n\n163\n00:08:25.905 --> 00:08:31.500\nAnd what it's called is Asymmetric\nlogical unit access, right?\n\n164\n00:08:31.500 --> 00:08:36.390\nAnd what it means, is that I might have\nmore than one path to the sand, but\n\n165\n00:08:36.390 --> 00:08:42.280\non the sand side only one is active and\nthe other is standing by.\n\n166\n00:08:42.280 --> 00:08:47.920\nNot on the ESXi side, and on the sand\nside if it's main processing fails,\n\n167\n00:08:47.920 --> 00:08:51.560\nthe other processor takes over and becomes\nactive, and now we flip over to it.\n\n168\n00:08:51.560 --> 00:08:57.240\nSo it's just like fixed, or MRU, but\non the SAN side instead of here.\n\n169\n00:08:57.240 --> 00:09:01.660\nSo it's A-L-U-A,\nasymmetric logical unit access.\n\n170\n00:09:01.660 --> 00:09:05.160\nAnd VMware, ESXi, it's aware of that.\n\n171\n00:09:05.160 --> 00:09:06.530\nIt knows about ALUA.\n\n172\n00:09:06.530 --> 00:09:08.830\nIt knows how to read it and\nsee what's going on.\n\n173\n00:09:08.830 --> 00:09:12.630\nAnd so when it looks to that second path,\nit'll see the other controller and\n\n174\n00:09:12.630 --> 00:09:13.940\nit'll see that it's in standby.\n\n175\n00:09:13.940 --> 00:09:17.730\nIt'll say, okay, all right, all right,\nI got a path here, but it's in standby.\n\n176\n00:09:17.730 --> 00:09:20.730\nSo if I turn on round robining,\nI'm not gonna round\n\n177\n00:09:20.730 --> 00:09:24.050\nrobin traffic to a processor that's\nin standby, there's no point.\n\n178\n00:09:24.050 --> 00:09:25.590\nSo even though round robining is on,\n\n179\n00:09:25.590 --> 00:09:30.950\nI'll still only have that one path to\nthe active processor and that's it.\n\n180\n00:09:30.950 --> 00:09:34.670\nSo, when you turn on round robining,\nwe should actually see it here on mine,\n\n181\n00:09:34.670 --> 00:09:37.760\nbecause I'm pretty certain my\ncontroller's gonna run this way.\n\n182\n00:09:37.760 --> 00:09:40.780\nWe'll find out here, let me refresh it,\nit's still showing fixed.\n\n183\n00:09:40.780 --> 00:09:42.970\nI'm gonna refresh, there we go, all right.\n\n184\n00:09:42.970 --> 00:09:47.820\nSo, mine's showing Round Robin, and\nso it's up and going in theory.\n\n185\n00:09:47.820 --> 00:09:49.020\nI had two paths, so\n\n186\n00:09:49.020 --> 00:09:52.810\nif I look down here at my two paths,\nshoot, nope both mine went active.\n\n187\n00:09:52.810 --> 00:09:57.020\nI've only got one processor in my SAN and\nso it's showing as active both ways.\n\n188\n00:09:57.020 --> 00:09:58.780\nSo both of them are now active IO,\n\n189\n00:09:58.780 --> 00:10:03.473\nI'm sending traffic across both links\nto get to that cuz they're both hectic.\n\n190\n00:10:03.473 --> 00:10:06.860\nBut if I had a second\ncontroller that was in standby\n\n191\n00:10:06.860 --> 00:10:11.010\nthen it can't bring the other one\nactive cuz the processor's in Stand-by.\n\n192\n00:10:11.010 --> 00:10:16.650\nAnd, so, it's actually gonna change\nthis status and it will say Stand-by.\n\n193\n00:10:16.650 --> 00:10:20.330\nThere's actually four different\nstatuses that we can see in your file.\n\n194\n00:10:20.330 --> 00:10:23.890\nActive and Active (I/O), those are the\nonly ones you normally wanna see, okay?\n\n195\n00:10:23.890 --> 00:10:27.630\nActive means yes, I see the processor,\nI can jump on to whatever I want.\n\n196\n00:10:27.630 --> 00:10:30.810\nAnd Active (I/O) means yeah,\nI see the processor and\n\n197\n00:10:30.810 --> 00:10:32.660\nI'm sending data across it, right?\n\n198\n00:10:32.660 --> 00:10:34.867\nSo, in my case, both the status.\n\n199\n00:10:34.867 --> 00:10:37.135\nThose are the ones you want to see, right?\n\n200\n00:10:37.135 --> 00:10:37.929\nYou might also see Stand-by.\n\n201\n00:10:37.929 --> 00:10:41.817\nIf it says Stand-by,\nthat's ALUA You can see a processor, but\n\n202\n00:10:41.817 --> 00:10:45.550\nthe processor on the other\nside is not active yet.\n\n203\n00:10:45.550 --> 00:10:49.396\nAnd so only when it goe active\nwill we flip over to it, okay?\n\n204\n00:10:49.396 --> 00:10:52.030\nOn the SANs side they have\na different terminology for it.\n\n205\n00:10:52.030 --> 00:10:54.730\nSo here we call it active and\nstand-by but on the SAN side,\n\n206\n00:10:54.730 --> 00:10:59.670\nthey have what's called active\noptimized and active non optimized.\n\n207\n00:10:59.670 --> 00:11:04.600\nOkay, active optimized means that's an\nactive path and the processor is running.\n\n208\n00:11:04.600 --> 00:11:08.200\nActive non optimized means\nIt's an active path, but\n\n209\n00:11:08.200 --> 00:11:11.040\nthe processors in standby, and\nI shouldn't send traffic over.\n\n210\n00:11:11.040 --> 00:11:15.390\nIt's non-optimized,\nunless the optimized path goes down,\n\n211\n00:11:15.390 --> 00:11:16.920\nI'm not gonna touch\nthat non-optimized one.\n\n212\n00:11:16.920 --> 00:11:19.810\nIt's just gonna sit there,\neven if I turn on round robin,\n\n213\n00:11:19.810 --> 00:11:21.360\nit's not gonna use it all right?\n\n214\n00:11:21.360 --> 00:11:23.060\nSo that's where the SAN get's involved.\n\n215\n00:11:23.060 --> 00:11:26.530\nSo Wes' original question was, do we\nhave to do anything on the SAN there?\n\n216\n00:11:26.530 --> 00:11:28.080\nDoes the SAN get involved?\n\n217\n00:11:28.080 --> 00:11:31.670\nThe answer is, yes,\nif it's got more than one processor.\n\n218\n00:11:31.670 --> 00:11:34.910\nIn my lab, my SAN only has one processor.\n\n219\n00:11:34.910 --> 00:11:38.320\nAnd so, it's gonna be active no matter\nwhat, and I see it across these two paths,\n\n220\n00:11:38.320 --> 00:11:40.120\nand that's why I've gone active Active.\n\n221\n00:11:40.120 --> 00:11:43.140\n>> Don do we get the ability to\nsee these active links if one's\n\n222\n00:11:43.140 --> 00:11:47.350\nactive optimized versus if one's\nnon active, active non optimized.\n\n223\n00:11:47.350 --> 00:11:48.330\n>> Yeah.\n>> I should say?\n\n224\n00:11:48.330 --> 00:11:49.660\n>> Active non optimized is easy to spot.\n\n225\n00:11:49.660 --> 00:11:51.350\nIt doesn't say it, it just says standby.\n\n226\n00:11:51.350 --> 00:11:54.350\nRight so if it says standby\nthat's active non optimized.\n\n227\n00:11:54.350 --> 00:11:57.870\nBut if it says Active or\nActive IO that's active optimized,\n\n228\n00:11:57.870 --> 00:12:00.510\nso that those both count, so\nthat's what you're going to see.\n\n229\n00:12:00.510 --> 00:12:03.350\nThere are two other statuses\nthat hopefully you don't see.\n\n230\n00:12:03.350 --> 00:12:06.340\nThere's disabled and dead.\n\n231\n00:12:06.340 --> 00:12:08.830\nAnd so I guess disabled's not so bad.\n\n232\n00:12:08.830 --> 00:12:12.050\nDisabled is where you have\ndisabled the path right?\n\n233\n00:12:12.050 --> 00:12:14.700\nWe can choose one of these paths and\ndisable it.\n\n234\n00:12:14.700 --> 00:12:17.270\nAll I have to do is if I highlight\nthe path we get a nice big\n\n235\n00:12:17.270 --> 00:12:21.030\ndisable button we can disable it and\nthat's gonna flip it to disabled, right?\n\n236\n00:12:21.030 --> 00:12:24.580\nAnd it'll take it a moment but that'll\nrefresh let me just manually refresh and\n\n237\n00:12:24.580 --> 00:12:29.220\nthat'll flip over and so now I'll\nhave two paths but one's disabled.\n\n238\n00:12:29.220 --> 00:12:31.210\nAnd see how it says disabled IO?\n\n239\n00:12:31.210 --> 00:12:32.360\nIt's disabled.\n\n240\n00:12:32.360 --> 00:12:35.070\nWe would be sending I/O\non it if it was enabled.\n\n241\n00:12:35.070 --> 00:12:36.050\nThat's what that little note means.\n\n242\n00:12:36.050 --> 00:12:39.480\nNot that we're actually sending I/O on it,\nbut it's now disabled, okay.\n\n243\n00:12:39.480 --> 00:12:42.800\nSo that's one status you might see, and\nthen I can always re-enable that one.\n\n244\n00:12:42.800 --> 00:12:44.030\nThe other one is dead.\n\n245\n00:12:44.030 --> 00:12:47.300\nAnd dead, the triangle is empty, but\nyou've got a red line around it.\n\n246\n00:12:47.300 --> 00:12:51.650\nSo if it's red and that's letting you\nknow that it should be active, but\n\n247\n00:12:51.650 --> 00:12:55.100\nwe can't see the LAN, we can't see\nthe process around the other side.\n\n248\n00:12:55.100 --> 00:12:58.350\nSomething has happened in that network and\nwe've got a failure.\n\n249\n00:12:58.350 --> 00:13:00.480\nNow, when you have a failure like this,\n\n250\n00:13:02.310 --> 00:13:04.190\nVMware has some interesting\nterminology that they use for\n\n251\n00:13:04.190 --> 00:13:09.260\nfailures when it says dead, in theory\nit's just the storage controller, right?\n\n252\n00:13:09.260 --> 00:13:12.870\nBut it could actually be more\nthan just the storage controller.\n\n253\n00:13:12.870 --> 00:13:15.440\nIt could be the entire host.\n\n254\n00:13:15.440 --> 00:13:19.530\nIf that entire host is down, vCenter\nwill still know about the data store,\n\n255\n00:13:19.530 --> 00:13:21.990\nthe data store stored\nin vCenter's database.\n\n256\n00:13:21.990 --> 00:13:25.720\nBut it won't be able to talk to the data\nstore because the host is down, all right.\n\n257\n00:13:25.720 --> 00:13:33.250\nSo when we have an outage in VMware land\nthe two terms they use are PDL and APD.\n\n258\n00:13:33.250 --> 00:13:34.230\nPDL is.\n\n259\n00:13:34.230 --> 00:13:39.280\nPermanent data loss, and\nAPD is all paths down,\n\n260\n00:13:39.280 --> 00:13:42.230\npermanent data loss is what we\nnormally see here, when we see one\n\n261\n00:13:42.230 --> 00:13:46.660\nof these guys go to dead it means that\nwe've lost connectivity to the storage.\n\n262\n00:13:46.660 --> 00:13:49.060\nThe host is still up, the host is running,\n\n263\n00:13:49.060 --> 00:13:52.990\nwe can talk to the host, but it can't\nconnect to the storage, all right?\n\n264\n00:13:52.990 --> 00:13:55.440\nAnd that's called permanent data loss,\nor PDL.\n\n265\n00:13:55.440 --> 00:13:57.970\nWe have no way to recover that\ndata because the link is down.\n\n266\n00:13:57.970 --> 00:13:59.310\nUntil that link comes back up.\n\n267\n00:13:59.310 --> 00:14:01.730\nThen we'll have access to\nour data store again, okay?\n\n268\n00:14:01.730 --> 00:14:03.970\nSo PDL is what you're\nnormally going to get.\n\n269\n00:14:03.970 --> 00:14:06.270\nBut if the entire host fails.\n\n270\n00:14:07.980 --> 00:14:11.140\nYeah, the storage down, but so\nis everything else about that host.\n\n271\n00:14:11.140 --> 00:14:13.740\nAnd that's called all paths down, APD.\n\n272\n00:14:13.740 --> 00:14:16.950\nAll paths down doesn't just\nrefer to the storage paths.\n\n273\n00:14:16.950 --> 00:14:20.060\nBecause you can get all paths down\nwithout multipathing even turned on.\n\n274\n00:14:20.060 --> 00:14:23.120\nIt refers to the storage,\nthe network, the data storage.\n\n275\n00:14:23.120 --> 00:14:26.570\nThe VMs, the host, like every single\nbit of it if you power the host off.\n\n276\n00:14:26.570 --> 00:14:28.770\nIf you just walk up to it and\nyank its power cables out.\n\n277\n00:14:28.770 --> 00:14:30.690\nThat would be an all paths down, right?\n\n278\n00:14:30.690 --> 00:14:33.340\nSo APD and PDL,\nthose are the two kind of status.\n\n279\n00:14:33.340 --> 00:14:34.950\nYou'll see them in the error logs.\n\n280\n00:14:34.950 --> 00:14:36.620\n>> Now with setting these multipaths,\n\n281\n00:14:36.620 --> 00:14:39.990\nis there a way that we can perform\nany kind of monitoring on them?\n\n282\n00:14:39.990 --> 00:14:42.810\nLike I was saying, if you can\nsee these links, whether they're\n\n283\n00:14:42.810 --> 00:14:46.100\nactive optimized but is there a general\nway that we can see monitoring.\n\n284\n00:14:46.100 --> 00:14:48.790\n>> For the most part,\nthe monitoring is what we see right here.\n\n285\n00:14:48.790 --> 00:14:53.251\nSo when we go into the Data Store, i go in\nManage Settings, Connectivity, Multipaths,\n\n286\n00:14:53.251 --> 00:14:55.460\nthat we can verify their\nstatus right here.\n\n287\n00:14:55.460 --> 00:14:57.670\nSo this is normally where\nyou're gonna monitor that.\n\n288\n00:14:57.670 --> 00:14:59.420\nAs far as performance, though.\n\n289\n00:14:59.420 --> 00:15:02.760\nIf you're trying to monitor utilization,\nyou've got your traditional monitoring.\n\n290\n00:15:02.760 --> 00:15:06.110\nWe monitor the storage just like\nwe monitor any other storage.\n\n291\n00:15:06.110 --> 00:15:08.390\nThe data store has a certain amount of IO,\n\n292\n00:15:08.390 --> 00:15:12.300\nit's just being balanced across the links\nand so we can monitor it that way.\n\n293\n00:15:13.480 --> 00:15:16.950\nIt's somewhat limited though when we\ncome in here, because when I come in and\n\n294\n00:15:16.950 --> 00:15:20.820\nstart looking at performance,\nit's gonna lay things out for me.\n\n295\n00:15:20.820 --> 00:15:23.580\nHere, let me go real time, which is gonna\nmake my computer a little slow, but\n\n296\n00:15:23.580 --> 00:15:24.950\nwe'll do it anyway.\n\n297\n00:15:24.950 --> 00:15:29.680\nCuz, I'll see Storage IO, we saw this\nin the Storage IO control episode.\n\n298\n00:15:29.680 --> 00:15:34.660\nSo, I can see my communications, but it's\nnot breaking it up by the adapter, right?\n\n299\n00:15:34.660 --> 00:15:39.810\nIt's kind of total, so for this data\nstore, here is the disk IO I'm generating.\n\n300\n00:15:39.810 --> 00:15:44.980\nIf I'm in MRU, or if I'm in FIX, that I\nknow this is all traffic over one adapter.\n\n301\n00:15:44.980 --> 00:15:48.900\nBut if I'm round robin, I have to do\na little aggregation in my head and say,\n\n302\n00:15:48.900 --> 00:15:51.050\nokay, I've got two four gigabit links, so\n\n303\n00:15:51.050 --> 00:15:53.270\nI've actually got\neight-gigabit of throughput.\n\n304\n00:15:53.270 --> 00:15:55.960\nNow let me put that in\nthe context of these reports.\n\n305\n00:15:55.960 --> 00:15:57.423\nAnd it interpret it from here.\n\n306\n00:15:57.423 --> 00:16:01.285\nWith round robin you should have\neven traffic over each link and\n\n307\n00:16:01.285 --> 00:16:03.545\nit doesn't give us a great\nway to monitor and\n\n308\n00:16:03.545 --> 00:16:08.735\nsee that aside from these reports that\nare already aggregated, all right?\n\n309\n00:16:08.735 --> 00:16:11.270\nSo that pretty much tackles those I think\n\n310\n00:16:11.270 --> 00:16:13.290\nthat's a pretty good run\ndown of multipathing.\n\n311\n00:16:13.290 --> 00:16:15.080\nWe've got a multipath\nsolution in place now,\n\n312\n00:16:15.080 --> 00:16:17.100\nI'm setting my traffic across two links.\n\n313\n00:16:17.100 --> 00:16:18.370\nI'm increasing my bandwidth.\n\n314\n00:16:18.370 --> 00:16:21.080\nIf I have a failure,\nI just flip over to the other one.\n\n315\n00:16:21.080 --> 00:16:23.420\nI can start throwing VMs\nin this data store, and\n\n316\n00:16:23.420 --> 00:16:26.370\nthey'll take advantage of multi-path.\n\n317\n00:16:26.370 --> 00:16:29.760\nAll right, now what I've shown you\nis probably all you need to know\n\n318\n00:16:29.760 --> 00:16:30.320\nfor the exam.\n\n319\n00:16:30.320 --> 00:16:32.610\nBut I do wanna throw one thing\nout here for real life land,\n\n320\n00:16:32.610 --> 00:16:37.770\nwhich is there are other things you\ncould configure with multipathing,\n\n321\n00:16:37.770 --> 00:16:40.440\nfor example, LUN masking, right?\n\n322\n00:16:40.440 --> 00:16:43.300\nI have two connections to\nthe same iSCSI target.\n\n323\n00:16:43.300 --> 00:16:46.680\nLet's say that I have five\ndifferent LUNs on there and\n\n324\n00:16:46.680 --> 00:16:51.050\nI want some LUNs to use multipathing and\nsome LUNs not to.\n\n325\n00:16:51.050 --> 00:16:53.930\nWell, by default, they'll see all\nthe LUNs, and so they're all available for\n\n326\n00:16:53.930 --> 00:16:57.310\nmultipathing, and it'll default to fixed,\nso I'm not too worried about it, but\n\n327\n00:16:57.310 --> 00:16:59.240\nmaybe I don't want that right.\n\n328\n00:16:59.240 --> 00:17:02.420\nSo what you can do is configure\nLUN masking where you go in and\n\n329\n00:17:02.420 --> 00:17:03.230\nyou tell the system.\n\n330\n00:17:03.230 --> 00:17:09.800\nHey on this path hide this two LUNs and\non this other path hide this three LUNs.\n\n331\n00:17:09.800 --> 00:17:12.025\nWell you don't have\na way to do that in UI.\n\n332\n00:17:12.025 --> 00:17:13.895\nBut you can drop down to the command line.\n\n333\n00:17:13.895 --> 00:17:16.895\nYou can do it through PowerCLI or through\nthe regular command line tools that\n\n334\n00:17:16.895 --> 00:17:20.075\nare part of ESX and\nyou can configure things like LUN masking.\n\n335\n00:17:20.075 --> 00:17:23.505\nI doubt that will show up on the exam,\nbut it real life end,\n\n336\n00:17:23.505 --> 00:17:25.580\nif there's ever a time when\nyou need something like that,\n\n337\n00:17:25.580 --> 00:17:28.310\njust know that just because it's not\nin the UI doesn't mean you can't do it.\n\n338\n00:17:28.310 --> 00:17:30.380\nYou'll just have to drop\nto the command line.\n\n339\n00:17:30.380 --> 00:17:33.500\nAnd I'll put in a link in the show notes\nto the some of the configuration documents\n\n340\n00:17:33.500 --> 00:17:34.230\non VMware's site.\n\n341\n00:17:34.230 --> 00:17:35.800\nAnd they've got it all laid out.\n\n342\n00:17:35.800 --> 00:17:37.113\nThe commands are not easy.\n\n343\n00:17:37.113 --> 00:17:38.075\n[LAUGH].\n\n344\n00:17:38.075 --> 00:17:40.629\nNothing is in the command line,\nbut the functionality is there for\n\n345\n00:17:40.629 --> 00:17:42.120\nyou to take advantage of.\n\n346\n00:17:42.120 --> 00:17:44.890\n>> All right.\nSo a lot a great information here Don.\n\n347\n00:17:44.890 --> 00:17:47.930\nDoes look like we're coming to\nthe end of another episode here, but\n\n348\n00:17:47.930 --> 00:17:50.620\nbefore we do, do you got any\nadditional advice you'd like to\n\n349\n00:17:50.620 --> 00:17:53.320\nin part to us when it\ncomes to multipathing.\n\n350\n00:17:53.320 --> 00:17:55.270\n>> The main thing is you wanna monitor it,\nright?\n\n351\n00:17:55.270 --> 00:17:56.300\nYou wanna keep an eye on it,\n\n352\n00:17:56.300 --> 00:17:58.880\nmake sure that it is working\nthe way that you expect it.\n\n353\n00:17:58.880 --> 00:18:02.380\nTest the failover,\njust make sure that your systems respond.\n\n354\n00:18:02.380 --> 00:18:05.310\nRemember if you go Round Robin,\nabsolutely test failover,\n\n355\n00:18:05.310 --> 00:18:07.690\ncuz you just wanna make sure that\nyour software survives the failover.\n\n356\n00:18:07.690 --> 00:18:10.960\nIf your software does, it works great, and\nthen you don't have to worry about it.\n\n357\n00:18:10.960 --> 00:18:15.000\nIf your software doesn't react well\nthen that's kind of your warning to say,\n\n358\n00:18:15.000 --> 00:18:18.820\nyeah let me move over to MRU or\nlet me move over to fixed and\n\n359\n00:18:18.820 --> 00:18:21.330\nround robin would be nice, but\nit's just not gonna work out for me.\n\n360\n00:18:21.330 --> 00:18:25.110\nAnd also remember different data\nstores can have different plans.\n\n361\n00:18:25.110 --> 00:18:26.590\nSo our PSPs.\n\n362\n00:18:26.590 --> 00:18:28.940\nSo I can go to one data store and\nset it up for Round Robin,\n\n363\n00:18:28.940 --> 00:18:31.560\nand go to another data store and\nset it for fixed.\n\n364\n00:18:31.560 --> 00:18:34.310\nAnd if I have some software application\nthat just doesn't play nice with\n\n365\n00:18:34.310 --> 00:18:37.880\nRound Robin's failure detection, I can\nmove it over to the fixed data store.\n\n366\n00:18:37.880 --> 00:18:41.040\nAnd then I can have my stuff that does\nplay nice over in the Round Robin one.\n\n367\n00:18:41.040 --> 00:18:43.720\nSo you can mix and match and\nreally take advantage of this.\n\n368\n00:18:43.720 --> 00:18:47.780\nIt's all there for you to use,\nit's just gotta get set up.\n\n369\n00:18:47.780 --> 00:18:50.480\n>> All right, Don, well thank you for\ngiving us all that great information.\n\n370\n00:18:50.480 --> 00:18:53.363\nAnd thank you to the viewer for\nwatching and setting up for ITPRO.TV.\n\n371\n00:18:53.363 --> 00:18:54.980\nI've been your host, Wes Bryan.\n\n372\n00:18:54.980 --> 00:18:55.770\n>> And I'm Don Pezet.\n\n373\n00:18:55.770 --> 00:18:57.272\n>> We'll see you next time.\n\n374\n00:18:57.272 --> 00:19:06.089\n[MUSIC]\n\n",
          "vimeoId": "172100722"
        }
      ],
      "title": "vSphere Storage"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don demonstrate how to create and configure virtual machines inside of vSphere. They explain the various settings that can be configured when creating and managing virtual machines.",
          "length": "2035",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-1-creating_virtual_machines-060116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-1-creating_virtual_machines-060116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-1-creating_virtual_machines-060116-1-sm.jpg",
          "title": "Creating Virtual Machines",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:10.008\n[MUSIC]\n\n2\n00:00:11.738 --> 00:00:14.795\nWelcome back to the another\nexciting episode here at ITProTV.\n\n3\n00:00:14.795 --> 00:00:15.575\nI'm your host,\n\n4\n00:00:15.575 --> 00:00:19.719\nWes Bryan, and in today's episode we're\ncontinuing through our series with VMware.\n\n5\n00:00:19.719 --> 00:00:23.099\nComing back at you with some more\nVMware certified professional and\n\n6\n00:00:23.099 --> 00:00:25.485\nwe're talking virtual machines today.\n\n7\n00:00:25.485 --> 00:00:26.885\nBut I'm not gonna steal his thunder.\n\n8\n00:00:26.885 --> 00:00:29.725\nJoining us in the studio today is\nnone other than Mr. Don Pezet.\n\n9\n00:00:29.725 --> 00:00:30.715\nDon, how you doing, sir?\n\n10\n00:00:30.715 --> 00:00:31.695\n>> I'm doing well, Wes.\n\n11\n00:00:31.695 --> 00:00:35.853\nI know it's hard to not get excited\nbecause we were counting episode before\n\n12\n00:00:35.853 --> 00:00:39.026\nthis and talking about how we're 16,\n17 episodes.\n\n13\n00:00:39.026 --> 00:00:40.714\nHowever, many into this series and\n\n14\n00:00:40.714 --> 00:00:44.120\ntechnically we haven't addressed\ncreating virtual machines yet.\n\n15\n00:00:44.120 --> 00:00:47.880\nAnd it's kind of a funny topic because if\nyou go and look at the exam objectives\n\n16\n00:00:47.880 --> 00:00:51.500\nfrom the VMware, creating a virtual\nmachine is actually not on the exam.\n\n17\n00:00:51.500 --> 00:00:53.870\nWe could teach this whole\nseries of topics and\n\n18\n00:00:53.870 --> 00:00:56.140\nnever actually talk about creating VMs.\n\n19\n00:00:56.140 --> 00:00:57.330\nIt does kind of defeat the purpose though.\n\n20\n00:00:57.330 --> 00:01:00.780\nSo we are going to talk about it right\nhere, how we create virtual machines,\n\n21\n00:01:00.780 --> 00:01:01.920\nwhat the different settings mean.\n\n22\n00:01:01.920 --> 00:01:05.490\nWhat's involved in that process,\nbecause ultimately when you get\n\n23\n00:01:05.490 --> 00:01:08.920\nvSphere all set up,\nthe virtual machines are what's important.\n\n24\n00:01:08.920 --> 00:01:10.460\nThat's what you're gonna\nbe working with the most,\n\n25\n00:01:10.460 --> 00:01:13.860\nand that's what we're going to\nsee right here, in this episode.\n\n26\n00:01:13.860 --> 00:01:16.530\nAll right, now understand that in our\nprevious episodes we covered things like\n\n27\n00:01:16.530 --> 00:01:20.410\nstorage, and networking, and getting host\ninstalled, and getting vSphere installed.\n\n28\n00:01:20.410 --> 00:01:23.190\nAnd that's all infrastructure,\nand it's really important.\n\n29\n00:01:23.190 --> 00:01:25.030\nIt's important you have your\ninfrastructure in place, and\n\n30\n00:01:25.030 --> 00:01:28.350\nyou have it configured right, because\notherwise your VMs are gonna run slow or\n\n31\n00:01:28.350 --> 00:01:30.520\ninconsistently, and\nyou're gonna have problems moving forward.\n\n32\n00:01:30.520 --> 00:01:32.100\nSo always keep that in mind,\n\n33\n00:01:32.100 --> 00:01:35.140\nit's not that we've been\nlollygagging on wasteful topics.\n\n34\n00:01:35.140 --> 00:01:38.750\nThat's all critical stuff that's\nrequired to support your VMs.\n\n35\n00:01:38.750 --> 00:01:42.220\nBut once your infrastructure's in place,\nworking with VMs is actually really easy.\n\n36\n00:01:42.220 --> 00:01:45.020\nSo, let's actually let's\njust dive right in.\n\n37\n00:01:45.020 --> 00:01:46.540\nLet's dive into creating\na virtual machine and\n\n38\n00:01:46.540 --> 00:01:49.210\nwe'll just kind of walk through\nall the steps that are involved.\n\n39\n00:01:49.210 --> 00:01:53.510\nI'm going to jump here\ninto my vCenter screen.\n\n40\n00:01:53.510 --> 00:01:56.250\nAnd under vCenter way over\nhere in the left side.\n\n41\n00:01:56.250 --> 00:01:58.860\nAll this time I keep going on Hosts and\nClusters, right?\n\n42\n00:01:58.860 --> 00:02:01.000\nBecause when we go to that one\nyou see your vCenter servers.\n\n43\n00:02:01.000 --> 00:02:03.340\nYou see your host,\nyou can create stuff there.\n\n44\n00:02:03.340 --> 00:02:04.780\nYou can create your data centers.\n\n45\n00:02:04.780 --> 00:02:07.530\nI mean your data storage even though your\ndata storage are under Storage also.\n\n46\n00:02:07.530 --> 00:02:09.290\nBut you can still create them up here, so\n\n47\n00:02:09.290 --> 00:02:11.920\nthat's where you spend most of your time\nwhen you're supporting the infrastructure.\n\n48\n00:02:11.920 --> 00:02:14.350\nBut when you're supporting\nvirtual machines,\n\n49\n00:02:14.350 --> 00:02:18.030\nwell those can be done right here,\nVMs and templates.\n\n50\n00:02:18.030 --> 00:02:22.380\nWhen we go into VMs and templates, we'll\nsee all the virtual machines you have.\n\n51\n00:02:22.380 --> 00:02:26.350\nYou cannot create a virtual machine\nunless you have at least one data center.\n\n52\n00:02:26.350 --> 00:02:29.640\nYou need to have a data center in place,\nand we talked about that earlier.\n\n53\n00:02:29.640 --> 00:02:32.750\nIf you don't have one you just right\nclick on your vCenter server and\n\n54\n00:02:32.750 --> 00:02:34.470\nyou create a new data center.\n\n55\n00:02:34.470 --> 00:02:36.050\nNot a big deal, right?\n\n56\n00:02:36.050 --> 00:02:38.610\nOnce you have the data center in place,\nnow you can start creating VMs.\n\n57\n00:02:38.610 --> 00:02:40.990\nYou'll put your hosts in\nthose data centers too.\n\n58\n00:02:40.990 --> 00:02:43.970\nSo I've already got one virtual\nmachine sitting here, WEB01.\n\n59\n00:02:43.970 --> 00:02:47.290\nAnd it's got that little green triangle on\nit that lets me know that its powered on,\n\n60\n00:02:47.290 --> 00:02:49.200\nits running, and its doing stuff.\n\n61\n00:02:49.200 --> 00:02:52.860\nBut I want to create my own\nvirtual machine, a new one.\n\n62\n00:02:52.860 --> 00:02:56.690\nAnd so to do that you can actually\nstart way up at the top if you want, or\n\n63\n00:02:56.690 --> 00:02:58.820\non the data center,\nit doesnt really matter.\n\n64\n00:02:58.820 --> 00:03:04.300\nWhat we are going to do is we are going to\nright click and go to New Virtual Machine.\n\n65\n00:03:04.300 --> 00:03:07.920\nNow when you go to create\na new virtual machine.\n\n66\n00:03:07.920 --> 00:03:13.400\nFrom nothing a New Virtual Machine created\nfrom scratch or a New VM from Library.\n\n67\n00:03:14.750 --> 00:03:15.930\nWhat's a library?\n\n68\n00:03:15.930 --> 00:03:18.240\nWell a library is to\nrestore our templates.\n\n69\n00:03:18.240 --> 00:03:22.150\nI might wanna create a web server, but\nI've created web servers before, so\n\n70\n00:03:22.150 --> 00:03:25.150\nI might have created a web server template\nthat I can just clone to create this\n\n71\n00:03:25.150 --> 00:03:25.670\nvirtual machine.\n\n72\n00:03:25.670 --> 00:03:29.280\nSo I'm not creating it from scratch,\nI'm creating it from the library.\n\n73\n00:03:29.280 --> 00:03:31.390\nBut since this is really\nthe beginning of this server,\n\n74\n00:03:31.390 --> 00:03:32.520\nI don't have any of those templates.\n\n75\n00:03:32.520 --> 00:03:33.380\nSo instead,\n\n76\n00:03:33.380 --> 00:03:36.830\nI'm gonna choose the top option to\ncreate a New Virtual Machine, all right.\n\n77\n00:03:36.830 --> 00:03:38.140\nAnd when I choose that,\n\n78\n00:03:38.140 --> 00:03:41.850\nnow I'm gonna launch into\nthe New Virtual Machine Wizard,\n\n79\n00:03:41.850 --> 00:03:44.720\nwhich is gonna walk me through each of\nthe questions that I have to answer.\n\n80\n00:03:44.720 --> 00:03:47.330\nAnd you'll see there's\nquite a few over here.\n\n81\n00:03:47.330 --> 00:03:48.629\nTechnically, it's three steps.\n\n82\n00:03:49.730 --> 00:03:53.630\nSelect the type Edit\nthe settings finish right.\n\n83\n00:03:53.630 --> 00:03:56.550\nBut inside of it you'll see especially\nEdit the settings there's a ton of\n\n84\n00:03:56.550 --> 00:03:58.330\ndifferent things that we have to provide.\n\n85\n00:03:58.330 --> 00:04:01.730\nAnd depending on the answers,\nI may see some of those disappear or\n\n86\n00:04:01.730 --> 00:04:05.230\nI may see more appear as we\ngo through the configuration.\n\n87\n00:04:05.230 --> 00:04:07.435\nThe first screen is just asking me\nwhat type of VM I want to create.\n\n88\n00:04:07.435 --> 00:04:11.890\nNormally we're creating a new virtual\nmachine, that's what I'm gonna do here.\n\n89\n00:04:11.890 --> 00:04:15.130\nI could deploy from a template,\nI've already got a template created,\n\n90\n00:04:15.130 --> 00:04:17.830\nI just want to clone that,\nlike from the library.\n\n91\n00:04:17.830 --> 00:04:19.110\nWe could clone an existing VM.\n\n92\n00:04:19.110 --> 00:04:23.802\nI've already got WEB01, if I'm trying to\nmake WEB02 I could just clone that, and\n\n93\n00:04:23.802 --> 00:04:25.101\nnow I've got WEB02.\n\n94\n00:04:25.101 --> 00:04:27.318\nSo I don't necessarily have\nto start from scratch.\n\n95\n00:04:27.318 --> 00:04:30.820\nI can clone a virtual\nmachine to a template.\n\n96\n00:04:30.820 --> 00:04:36.010\nI don't have any templates now and so\nI could take WEB01 and clone it to turn\n\n97\n00:04:36.010 --> 00:04:40.710\nit into a template and now I can deploy\nthat template as many times as I want.\n\n98\n00:04:40.710 --> 00:04:43.610\nI can clone a template to a template,\nthat one sounds crazy.\n\n99\n00:04:43.610 --> 00:04:46.380\nWhy the heck would I want to make\na template out of a template?\n\n100\n00:04:46.380 --> 00:04:47.960\nI might want to change one.\n\n101\n00:04:47.960 --> 00:04:51.010\nI might have one that's a web server for\ninternal use and\n\n102\n00:04:51.010 --> 00:04:52.940\none that is a web server for external use.\n\n103\n00:04:52.940 --> 00:04:55.110\nThey might be identical as\nfar as operating system.\n\n104\n00:04:55.110 --> 00:04:57.380\nAs far as the web server configuration.\n\n105\n00:04:57.380 --> 00:04:59.690\nBut they might have\ndifferent firewall settings.\n\n106\n00:04:59.690 --> 00:05:01.700\nAnd so I create two different templates.\n\n107\n00:05:01.700 --> 00:05:04.770\nBut I clone one, and\nthen modify the other template as needed.\n\n108\n00:05:06.540 --> 00:05:09.770\nThen we've got Convert\ntemplate to virtual machine.\n\n109\n00:05:09.770 --> 00:05:13.310\nNormally, what we do is\nwe Deploy from template,\n\n110\n00:05:13.310 --> 00:05:17.300\nwe take a template and\nwe copy it to make a virtual machine.\n\n111\n00:05:17.300 --> 00:05:20.290\nIf I convert a template to a virtual\nmachine, why would I do that?\n\n112\n00:05:20.290 --> 00:05:25.330\nWell, you can't power on a template,\nI can't turn a template on.\n\n113\n00:05:25.330 --> 00:05:29.320\nAnd so, if I want to make changes\ninside of it, what can I do?\n\n114\n00:05:29.320 --> 00:05:32.220\nIf I'm just changing out files,\nI can mount the virtual hard drive, and\n\n115\n00:05:32.220 --> 00:05:33.630\nI can change the files.\n\n116\n00:05:33.630 --> 00:05:36.930\nBut if I want to make an operating\nsystem change, I need to boot it up.\n\n117\n00:05:36.930 --> 00:05:40.750\nSo I convert the template to a VM,\nI powered on.\n\n118\n00:05:40.750 --> 00:05:45.960\nI made my changes and\nwhen I'm done I then clone that VM\n\n119\n00:05:45.960 --> 00:05:49.240\nback into a template and\nnow its back into the template form again.\n\n120\n00:05:49.240 --> 00:05:52.120\nSo that's all apart of that\ntemplate creating process.\n\n121\n00:05:52.120 --> 00:05:56.080\nBut for us I just want to create\na new virtual machine from scratch.\n\n122\n00:05:56.080 --> 00:05:59.380\nThat's what I'm going to do\nthen I'm going to hit next.\n\n123\n00:05:59.380 --> 00:06:02.960\nNow I'm going to give it a name and\nI tell it where it's going to be hosted.\n\n124\n00:06:02.960 --> 00:06:06.510\nSo maybe this is going to be,\nthis will be a database server.\n\n125\n00:06:06.510 --> 00:06:09.118\nSo I'm going to call this DB01.\n\n126\n00:06:09.118 --> 00:06:10.910\nI've got WEB01 that's my web server.\n\n127\n00:06:10.910 --> 00:06:14.770\nHere's database DB01, I'll create that.\n\n128\n00:06:14.770 --> 00:06:16.840\nAnd I picked the data\ncenter it wants to go into.\n\n129\n00:06:16.840 --> 00:06:20.380\nIf you expand that out,\nnotice I don't see any hosts.\n\n130\n00:06:20.380 --> 00:06:22.710\nI don't get to pick a host on this screen,\nI'm just picking a datacenter.\n\n131\n00:06:22.710 --> 00:06:24.120\nYou may have more than one datacenter, and\n\n132\n00:06:24.120 --> 00:06:25.778\nthat's gonna filter\nthe host that I see later.\n\n133\n00:06:25.778 --> 00:06:32.420\nAll right, then now it asks what\nhost I want it to reside on.\n\n134\n00:06:32.420 --> 00:06:35.910\nI see the datacenter that I picked,\nand every host inside of it.\n\n135\n00:06:35.910 --> 00:06:37.980\nMy host02 is in maintenance\nmode right now, so\n\n136\n00:06:37.980 --> 00:06:40.540\nI'm gonna choose host01,\nit's kind of my only choice.\n\n137\n00:06:42.770 --> 00:06:44.800\nIt is gonna run a compatibility check and\n\n138\n00:06:44.800 --> 00:06:49.540\nmake sure that I don't have any special\nsettings that are gonna conflict.\n\n139\n00:06:49.540 --> 00:06:52.540\nSince I'm doing a new VM from\nscratch that's always gonna pass.\n\n140\n00:06:52.540 --> 00:06:54.550\nBut if I was doing a template.\n\n141\n00:06:54.550 --> 00:06:58.420\nThe template might call for certain\nhardware that's not present on that host,\n\n142\n00:06:58.420 --> 00:07:01.240\nthen we're going to get a conflict,\nand we'll see a compatibility problem.\n\n143\n00:07:01.240 --> 00:07:02.370\nThat's not going to be an issue for\nme here.\n\n144\n00:07:04.450 --> 00:07:06.690\nAll right, now I need to pick my storage.\n\n145\n00:07:06.690 --> 00:07:09.360\nWhen you create a virtual machine,\nit's going to have at least\n\n146\n00:07:09.360 --> 00:07:12.910\none virtual hard drive and\nit's gotta store it somewhere.\n\n147\n00:07:12.910 --> 00:07:15.310\nBut it's also going to have\nits configuration file,\n\n148\n00:07:15.310 --> 00:07:16.960\nthe file that identifies what hardware and\n\n149\n00:07:16.960 --> 00:07:19.480\nother settings it has,\nit's got to store that somewhere too.\n\n150\n00:07:19.480 --> 00:07:21.420\nSo I've gotta pick a data store for\nit reside on.\n\n151\n00:07:21.420 --> 00:07:25.210\nI'm gonna put it on my direct attached\none, if you haven't seen it already watch\n\n152\n00:07:25.210 --> 00:07:27.450\nour data store episode when\nwe talk all about those.\n\n153\n00:07:27.450 --> 00:07:30.056\nBut this just storage where we're\ngonna place that virtual machine\n\n154\n00:07:31.816 --> 00:07:33.530\nThen we'll hit next.\n\n155\n00:07:33.530 --> 00:07:35.090\nAnd now,\nit's gonna ask about compatibility.\n\n156\n00:07:35.090 --> 00:07:36.810\nNow, this is an interesting one.\n\n157\n00:07:36.810 --> 00:07:41.890\nBy default it wants to be compatible\nwith ESXi 6.0 or later, all right.\n\n158\n00:07:41.890 --> 00:07:48.538\nI might have a mix environment, where I\nsaw an ESXi 5.5, or even ESXi 5 or 5.1.\n\n159\n00:07:48.538 --> 00:07:52.210\nMaybe even 4 or 4.1,\nhopefully not, but maybe, right?\n\n160\n00:07:52.210 --> 00:07:56.544\nIf I create a virtual machine\nthat only runs on 6.0 and later,\n\n161\n00:07:56.544 --> 00:07:59.849\nI will not be able to fail\nit over to my other host.\n\n162\n00:07:59.849 --> 00:08:04.703\nOkay, so if I have all ESXI 6 hosts\nthis is great, it works fine.\n\n163\n00:08:04.703 --> 00:08:08.332\nBut if I have a mixed environment, I need\nto pick the lowest common denominator.\n\n164\n00:08:08.332 --> 00:08:10.976\nAnd VMWare, with each version,\nthey add new features.\n\n165\n00:08:10.976 --> 00:08:15.180\nSo if I drop this down, you'll see\nwhere I can pick between each of\n\n166\n00:08:15.180 --> 00:08:19.699\nthe different versions,\n3.5, 4, 5, 5.1, 5.5 and 6.\n\n167\n00:08:19.699 --> 00:08:24.700\nI need to pick the oldest version that\nI'm still supporting in my data center.\n\n168\n00:08:24.700 --> 00:08:27.064\nNow I might lose some\nfunctionality as a result.\n\n169\n00:08:27.064 --> 00:08:31.597\nThere might be something new that was in\n6 that wasn't in 5.5 that I need to pick.\n\n170\n00:08:31.597 --> 00:08:35.566\nNow what these are actually matching\nup with, it doesn't show up on here.\n\n171\n00:08:35.566 --> 00:08:36.611\nBut what these are actually\n\n172\n00:08:36.611 --> 00:08:38.802\nmatching up with are what\nare called hardware versions.\n\n173\n00:08:38.802 --> 00:08:43.728\nAnd the hardware versions dictate what\nmodel of network adapter we simulate,\n\n174\n00:08:43.728 --> 00:08:46.874\nand how the processors are presented,\nand so on.\n\n175\n00:08:46.874 --> 00:08:48.951\nAnd a lot of it doesn't change\nfrom version to version.\n\n176\n00:08:48.951 --> 00:08:53.526\nBut if even one little thing changes,\nVMware increments that hardware version.\n\n177\n00:08:53.526 --> 00:08:56.101\nThe latest version number\nright now is version 12.\n\n178\n00:08:56.101 --> 00:09:02.058\nSo version 12 is only supported in\nVMware Workstation and VMware Fusion.\n\n179\n00:09:02.058 --> 00:09:03.925\nIt's not supported in VMware Server yet.\n\n180\n00:09:03.925 --> 00:09:06.050\nIt will be in the next version,\nbut for right now it isn't.\n\n181\n00:09:06.050 --> 00:09:10.000\nSo they normally test new hardware\nversions in the workstation products and\n\n182\n00:09:10.000 --> 00:09:11.549\nthen bring them into server.\n\n183\n00:09:11.549 --> 00:09:16.200\nSo we can do up to hardware version\n11 right now on the server and\n\n184\n00:09:16.200 --> 00:09:17.590\nin ESX, not 12.\n\n185\n00:09:17.590 --> 00:09:20.601\nAnd when we start choosing\nolder ones like 5.5,\n\n186\n00:09:20.601 --> 00:09:24.534\nthere's hardware version 10,\n5.1 is hardware version 9.\n\n187\n00:09:24.534 --> 00:09:28.102\nAnd it just goes back and back and\nback to these different hardware versions.\n\n188\n00:09:28.102 --> 00:09:30.637\nSo that's really what we're picking.\n\n189\n00:09:30.637 --> 00:09:33.574\nAnd there's a little information\nbubble over here you can and\n\n190\n00:09:33.574 --> 00:09:36.074\nit got a neat little link here for\nmore information.\n\n191\n00:09:36.074 --> 00:09:38.487\nAnd it will take you to VM website and\n\n192\n00:09:38.487 --> 00:09:41.951\nit details the differences\nin hardware versions.\n\n193\n00:09:41.951 --> 00:09:45.860\nSo what is the difference if I pick\nhardware version 11 verses hardware\n\n194\n00:09:45.860 --> 00:09:46.701\nversion 10.\n\n195\n00:09:46.701 --> 00:09:48.309\nMaybe I'll have a mixed environment.\n\n196\n00:09:48.309 --> 00:09:54.937\nI've got 10 ESX6 hosts and\nI got 2 ESX5.5 hosts okay.\n\n197\n00:09:54.937 --> 00:09:57.571\nDo I really care if I can\nfail over this five fives?\n\n198\n00:09:57.571 --> 00:10:00.822\nI still have ten six hosts so\nI could stick with those.\n\n199\n00:10:00.822 --> 00:10:03.629\nWell here's the difference,\nmaximum memory.\n\n200\n00:10:03.629 --> 00:10:07.873\nIf I want four gigs of\nmemory in a virtual machine,\n\n201\n00:10:07.873 --> 00:10:12.126\nI need hardware version\n11 in ESX 4 terabytes.\n\n202\n00:10:12.126 --> 00:10:13.958\nSorry, it's a little bit bigger.\n\n203\n00:10:13.958 --> 00:10:17.948\nIf I want just one terabyte of memory,\nI can do that with ESX 5.5.\n\n204\n00:10:17.948 --> 00:10:21.150\nOne terabyte's a lot of memory though,\nso maybe I'm fine with that.\n\n205\n00:10:21.150 --> 00:10:26.620\nMaximum number of processors,\n128 in version 11, only 64 in version ten.\n\n206\n00:10:26.620 --> 00:10:28.555\nSame thing with some\nof the other settings.\n\n207\n00:10:28.555 --> 00:10:29.331\nA lot of it's the same.\n\n208\n00:10:29.331 --> 00:10:32.859\nThe number of SCSI adapters,\nthe BUS logic, SATA controllers.\n\n209\n00:10:32.859 --> 00:10:34.004\nThese are all identical.\n\n210\n00:10:34.004 --> 00:10:37.811\nBut you see where it gets different like\nSATA controllers were not supported in\n\n211\n00:10:37.811 --> 00:10:39.905\nversion nine and earlier.\n\n212\n00:10:39.905 --> 00:10:42.374\nSo if I wanna use data controllers\nI don't version nine and earlier.\n\n213\n00:10:42.374 --> 00:10:44.184\nI wanna stick it with my newer systems.\n\n214\n00:10:44.184 --> 00:10:45.217\nSo this is a neat table.\n\n215\n00:10:45.217 --> 00:10:48.277\nYou don't have to memorize it for\nthe exam or anything, but for\n\n216\n00:10:48.277 --> 00:10:50.838\nyour own benefit if you\nwanna know the differences.\n\n217\n00:10:50.838 --> 00:10:53.043\nThese are the differences between it, and\n\n218\n00:10:53.043 --> 00:10:55.929\nthe way I got to that was just\nright here in my web client.\n\n219\n00:10:55.929 --> 00:10:58.692\nYou click the i, and\nthen more information.\n\n220\n00:10:58.692 --> 00:11:02.842\nIt will take you right to that page and\nyou can see everything you need.\n\n221\n00:11:02.842 --> 00:11:03.980\nAll right, so I'm gonna do ESXI 6.\n\n222\n00:11:03.980 --> 00:11:06.716\nNow, let's say that I picked 5.\n\n223\n00:11:06.716 --> 00:11:08.185\nI can do that.\n\n224\n00:11:08.185 --> 00:11:09.948\nAnd we can always upgrade it later.\n\n225\n00:11:09.948 --> 00:11:12.687\nAll right,\nwe saw the main difference between 5:5 and\n\n226\n00:11:12.687 --> 00:11:14.407\n6 was simply the amount of memory.\n\n227\n00:11:14.407 --> 00:11:16.634\nThat was really the big difference,\nand the number of processors.\n\n228\n00:11:16.634 --> 00:11:20.358\nSo, if I don't care about those,\nI could create an ESX5.5 compatible\n\n229\n00:11:20.358 --> 00:11:23.556\none at a hardware version ten and\nI can upgrade it after effect.\n\n230\n00:11:23.556 --> 00:11:24.629\nLet's do that.\n\n231\n00:11:24.629 --> 00:11:29.587\nOn the next page, I need to tell it what\nguest operating system I'm gonna run and\n\n232\n00:11:29.587 --> 00:11:30.846\nthis is important.\n\n233\n00:11:30.846 --> 00:11:33.275\nI know a lot people say\nwell it's just hardware.\n\n234\n00:11:33.275 --> 00:11:35.408\nWhat do we care what operating\nsystem it's gonna be?\n\n235\n00:11:35.408 --> 00:11:36.543\nWe can pick whatever.\n\n236\n00:11:36.543 --> 00:11:39.292\nBut VMWare actually has\ncertain expectations for\n\n237\n00:11:39.292 --> 00:11:43.094\nhow the guest operating system is\ngonna interact with the hardware.\n\n238\n00:11:43.094 --> 00:11:47.478\nAnd depending on what you choose here,\nit's gonna set it up for success or\n\n239\n00:11:47.478 --> 00:11:48.124\nfailure.\n\n240\n00:11:48.124 --> 00:11:50.638\nThere's some operating systems\nthat are super picky and\n\n241\n00:11:50.638 --> 00:11:52.479\nthere's some that are really flexible.\n\n242\n00:11:52.479 --> 00:11:53.727\nLike with Windows it's hard to go wrong.\n\n243\n00:11:53.727 --> 00:11:56.581\nWith Windows you just have\nto pick 64 bit or 32 bit and\n\n244\n00:11:56.581 --> 00:11:58.965\nafter that they pretty\nmuch all work the same.\n\n245\n00:11:58.965 --> 00:12:00.920\nA lot of the Linux\ndistros are the same too,\n\n246\n00:12:00.920 --> 00:12:04.615\nbut there are some that are different,\nespecially the ones that require EFI BIOS\n\n247\n00:12:04.615 --> 00:12:06.865\nversus the ones that\nrequire traditional BIOS.\n\n248\n00:12:06.865 --> 00:12:09.290\nThat's a big difference in simulation.\n\n249\n00:12:09.290 --> 00:12:12.045\nAlso whether they're 32 bit or 64 bit.\n\n250\n00:12:12.045 --> 00:12:15.883\nThat’s important too, and\nwe can't change it after the fact so\n\n251\n00:12:15.883 --> 00:12:18.522\nwe've got to make sure\nwe get it right here.\n\n252\n00:12:18.522 --> 00:12:21.677\nIf I'm gonna install Windows, I can\npick that and I can tell it the version.\n\n253\n00:12:21.677 --> 00:12:26.294\nYou'll see 64-bit and 32-bit\nare called out and we can Classify all\n\n254\n00:12:26.294 --> 00:12:30.778\nthe way back to MS-DOS and\nWindows 3.1 if we really want to go crazy.\n\n255\n00:12:30.778 --> 00:12:34.591\nThose are 16 bit systems if we\nreally want to go nuts, right?\n\n256\n00:12:34.591 --> 00:12:37.191\nBut if I want to bring up\na Windows Server 2012 machine,\n\n257\n00:12:37.191 --> 00:12:38.543\nI can choose that and off we go.\n\n258\n00:12:38.543 --> 00:12:40.148\nOr I can tell it I'm doing Linux.\n\n259\n00:12:40.148 --> 00:12:43.590\nAnd under Linux it'll throw the different\ndistros and this is important because\n\n260\n00:12:43.590 --> 00:12:46.323\nthere's different VMware tools\nthat interact with these, and\n\n261\n00:12:46.323 --> 00:12:48.357\nwe'll talk about VMware\ntools in a little bit.\n\n262\n00:12:48.357 --> 00:12:52.765\nBut we need to pick the right distro and\nyou'll see differences here by version.\n\n263\n00:12:52.765 --> 00:12:57.980\nSo Red Hat Enterprise Linux 6 versus\nRed Hat Enterprise Linux version 7.\n\n264\n00:12:57.980 --> 00:12:59.510\nWhy does it have to call each one out?\n\n265\n00:12:59.510 --> 00:13:00.689\nWell there's big changes.\n\n266\n00:13:00.689 --> 00:13:06.395\nLike in version 6 of Red Hat, you had\nthe upstart boot management process.\n\n267\n00:13:06.395 --> 00:13:08.495\nIn 7 you have system D.\n\n268\n00:13:08.495 --> 00:13:10.901\nBig difference, huge difference\nin the way they start up and\n\n269\n00:13:10.901 --> 00:13:12.990\nthe way that VMware interacts\nwith those machines.\n\n270\n00:13:12.990 --> 00:13:15.624\nWe got to make sure we\nchoose it accurately.\n\n271\n00:13:15.624 --> 00:13:21.780\nAnd then you'll see SUSE Linux,\nwe got CentOS, Debian, Asianux.\n\n272\n00:13:21.780 --> 00:13:23.366\nI’m not familiar with that one.\n\n273\n00:13:23.366 --> 00:13:28.857\nOracle Linux which is effectively CentOS\nwhich in turn is effectively Red Hat.\n\n274\n00:13:28.857 --> 00:13:31.784\nUbuntu Linux or\nUbuntu Linux if you say it right and\n\n275\n00:13:31.784 --> 00:13:36.314\nthen we have the generic ones and on\nthe generic ones is what you're picking is\n\n276\n00:13:36.314 --> 00:13:41.284\nthe version of the Linux kernel that\nyou're running, 2.4, 2.6, or 3.X.\n\n277\n00:13:41.284 --> 00:13:45.068\n4.2 is what we're up to now\non the latest kernel so\n\n278\n00:13:45.068 --> 00:13:48.339\nyou would choose 3.X or\nlater for that one.\n\n279\n00:13:48.339 --> 00:13:52.689\n>> So Don we might be inclined to say,\nokay, that's just hardware, but\n\n280\n00:13:52.689 --> 00:13:57.485\nunderneath VMWare it says okay, I\nrecognize the DNA of that operating system\n\n281\n00:13:57.485 --> 00:14:02.132\nand I am expecting this to happen this\nway maybe something else to happen and\n\n282\n00:14:02.132 --> 00:14:04.158\nthe boot loaders themself too.\n\n283\n00:14:04.158 --> 00:14:05.757\n>> Yeah, the two main areas we see it.\n\n284\n00:14:05.757 --> 00:14:06.541\nWe don't actually see it.\n\n285\n00:14:06.541 --> 00:14:07.427\nIt’s all behind the scenes.\n\n286\n00:14:07.427 --> 00:14:11.067\nA type one hypervisor\nacts like a traffic cop.\n\n287\n00:14:11.067 --> 00:14:14.163\nAnd it says, this virtual machine's\nallowed to access the hardware now.\n\n288\n00:14:14.163 --> 00:14:17.240\nOkay you stop now there's other virtual\nmachines that are allowed to access it,\n\n289\n00:14:17.240 --> 00:14:18.107\nnow you stop, right.\n\n290\n00:14:18.107 --> 00:14:20.544\nWhen it says stop, I need you to stop.\n\n291\n00:14:20.544 --> 00:14:24.431\nIf we choose the right OS here,\nit tells it nicely, hey you need to stop.\n\n292\n00:14:24.431 --> 00:14:27.606\nAnd the guest operating system\nunderstands, it says hey it's not my turn,\n\n293\n00:14:27.606 --> 00:14:28.359\nlet me wait okay?\n\n294\n00:14:28.359 --> 00:14:31.923\nIf we choose the wrong one here, what\nhappens is the hypervisor says you need to\n\n295\n00:14:31.923 --> 00:14:35.460\nstop, and it stops it, and the guest\nOS doesn't know what's happening.\n\n296\n00:14:35.460 --> 00:14:38.320\nAll of a sudden the hardware\njust isn't available.\n\n297\n00:14:38.320 --> 00:14:40.372\nOn some systems they just slow down.\n\n298\n00:14:40.372 --> 00:14:44.094\nOn other systems, they blue screen,\nor crash, or throw up some error, and\n\n299\n00:14:44.094 --> 00:14:47.780\nyou get the sad Mac or whatever your\noperating system does when it crashes.\n\n300\n00:14:47.780 --> 00:14:48.991\nAnd that's not good, right?\n\n301\n00:14:48.991 --> 00:14:52.086\nSo it's the difference between\nhaving a stable, reliable machine or\n\n302\n00:14:52.086 --> 00:14:55.607\none that occasionally flakes out on you\ncuz it doesn't know wha's happening.\n\n303\n00:14:55.607 --> 00:14:56.918\nThat's the main one.\n\n304\n00:14:56.918 --> 00:14:59.059\nAnd the other is memory handling, right?\n\n305\n00:14:59.059 --> 00:15:01.851\nThey're accessing RAM and\nthe RAM is protected space.\n\n306\n00:15:01.851 --> 00:15:02.548\nSo VMware,\n\n307\n00:15:02.548 --> 00:15:07.405\nthe hypervisor has to protect the sections\nof RAM from one VM from another.\n\n308\n00:15:07.405 --> 00:15:11.695\nAnd if one VM tries to do something it\nshouldn't, if we choose right here,\n\n309\n00:15:11.695 --> 00:15:12.340\nit'll be nice.\n\n310\n00:15:12.340 --> 00:15:16.311\nIt’ll say these are your boundaries,\nyou need to operate within them And the VM\n\n311\n00:15:16.311 --> 00:15:20.356\nwill say okay, those are my boundaries,\nI understand versus stop blocking me.\n\n312\n00:15:20.356 --> 00:15:22.374\nI'm going to access that memory.\n\n313\n00:15:22.374 --> 00:15:25.427\nAnd then we get a segment fall\nthrough a buffer overflow or whatever.\n\n314\n00:15:25.427 --> 00:15:26.512\nAnd the VM crashes, right?\n\n315\n00:15:26.512 --> 00:15:27.672\nSo it's really all about stability.\n\n316\n00:15:27.672 --> 00:15:29.145\nYou want to choose the right one.\n\n317\n00:15:29.145 --> 00:15:33.671\nAll right, so the other option is\ninstead of using Linux we use other.\n\n318\n00:15:33.671 --> 00:15:37.557\nAnd the other is kind of a funny one\nbecause you'll see a few different\n\n319\n00:15:37.557 --> 00:15:39.034\noptions, Apple Mac OS X.\n\n320\n00:15:39.034 --> 00:15:41.976\nNow Apple has some interesting\nrequirements of virtualization.\n\n321\n00:15:41.976 --> 00:15:46.338\nYou're only allowed to virtualize OS X\nif you're running on Mac hardware.\n\n322\n00:15:46.338 --> 00:15:48.418\nI am running on Mac hardware and\nso that's what I see.\n\n323\n00:15:48.418 --> 00:15:51.535\nYou may not see this option when\nyours turns up if you're running on\n\n324\n00:15:51.535 --> 00:15:52.210\na regular PC.\n\n325\n00:15:52.210 --> 00:15:54.286\nYou're technically not allowed to do it.\n\n326\n00:15:54.286 --> 00:15:57.791\nAnd if you keep scrolling down,\nyou'll see IBM OS2.\n\n327\n00:15:57.791 --> 00:15:58.846\nTalk about particulars.\n\n328\n00:15:58.846 --> 00:16:00.869\nThis one is super sensitive about memory.\n\n329\n00:16:00.869 --> 00:16:04.271\nIf you don't choose this option,\nyou are not getting OS2 running Good old\n\n330\n00:16:04.271 --> 00:16:06.549\nNovel netware if we want\nto walk down memory lane.\n\n331\n00:16:06.549 --> 00:16:08.060\nWe've got Solaris.\n\n332\n00:16:08.060 --> 00:16:10.810\nEven Solaris back to\nthe Sun Microsystem days.\n\n333\n00:16:10.810 --> 00:16:14.820\nGo Open Server which I don't think\nanybody runs anymore but you never know.\n\n334\n00:16:14.820 --> 00:16:16.500\nSerenity Systems ecom station.\n\n335\n00:16:16.500 --> 00:16:18.520\nThat's the new version of OS2.\n\n336\n00:16:18.520 --> 00:16:19.610\nI wouldn't call it new.\n\n337\n00:16:19.610 --> 00:16:21.080\nThey haven't really done much with it.\n\n338\n00:16:21.080 --> 00:16:24.730\nThen you get generic systems here and\nESXi.\n\n339\n00:16:24.730 --> 00:16:28.620\nYou can actually run ESXi as\na virtual machine on top of ESX,\n\n340\n00:16:28.620 --> 00:16:30.470\nwhich it certainly works.\n\n341\n00:16:30.470 --> 00:16:31.990\nActually, I'm kinda doing it right now.\n\n342\n00:16:31.990 --> 00:16:33.300\nSo, [LAUGH] you can do it.\n\n343\n00:16:33.300 --> 00:16:34.710\nIt doesn't run very fast.\n\n344\n00:16:34.710 --> 00:16:36.350\nIt's great for labs and learning.\n\n345\n00:16:36.350 --> 00:16:37.660\nIt's not great for production.\n\n346\n00:16:37.660 --> 00:16:39.620\n>> I think it's kinda interesting there,\nDon.\n\n347\n00:16:39.620 --> 00:16:42.480\nIf you were to tell somebody, okay, so how\ndid you have that set up as far as your\n\n348\n00:16:42.480 --> 00:16:44.930\nguest OS family, you had the other other.\n\n349\n00:16:44.930 --> 00:16:45.540\nThe other other.\n\n350\n00:16:45.540 --> 00:16:46.068\n>> The other other.\n\n351\n00:16:46.068 --> 00:16:48.750\n[LAUGH]\n>> [LAUGH] So let's see,\n\n352\n00:16:48.750 --> 00:16:50.420\nI'm gonna do a Debian 7.\n\n353\n00:16:50.420 --> 00:16:53.640\nAnd it's not a bad thing to\nchoose other other, right.\n\n354\n00:16:53.640 --> 00:16:57.060\nThere are times where you just have to\nsay, look, go generic and we'll hope for\n\n355\n00:16:57.060 --> 00:16:59.450\nthe best with my VM, right, and\nthat's what you have to choose.\n\n356\n00:16:59.450 --> 00:17:02.310\nSo you don't wanna choose\na wrong operating system.\n\n357\n00:17:02.310 --> 00:17:04.110\nAll right,\nI'm gonna bring up a Debian machine.\n\n358\n00:17:04.110 --> 00:17:07.960\nI wanna bring up a MySQL database and\nso I'm gonna use Debian Linux to do it.\n\n359\n00:17:07.960 --> 00:17:11.620\nAnd so I've got the 64 bit\nversion of Debian Linux 7.\n\n360\n00:17:11.620 --> 00:17:13.850\nI think I have actually like 7.4 or 7.5.\n\n361\n00:17:13.850 --> 00:17:16.520\nSo I'm gonna install that one.\n\n362\n00:17:16.520 --> 00:17:19.270\nAnd now when I hit next it's gonna\nask me to customize the hardware.\n\n363\n00:17:19.270 --> 00:17:21.400\nAnd this is kind of the important screen.\n\n364\n00:17:21.400 --> 00:17:25.690\nBecause what I pick here is gonna dictate\nhow well my virtual machine performs.\n\n365\n00:17:25.690 --> 00:17:28.760\nNow on a nice side,\nI can change all this after the fact.\n\n366\n00:17:28.760 --> 00:17:30.830\nSo it's hard to screw up this screen.\n\n367\n00:17:30.830 --> 00:17:33.160\nThat screen a moment ago where\nI picked my operating system,\n\n368\n00:17:33.160 --> 00:17:34.710\nI could screw things up there.\n\n369\n00:17:34.710 --> 00:17:37.280\nHere if I screw up I can always just\ncome back and edit it and fix it.\n\n370\n00:17:37.280 --> 00:17:39.290\nSo it's not the end of the world.\n\n371\n00:17:39.290 --> 00:17:41.500\nThe first choice I have are my CPUs.\n\n372\n00:17:41.500 --> 00:17:43.900\nAnd the main thing it's asking\nme just how many CPUs do I want?\n\n373\n00:17:43.900 --> 00:17:44.910\nDo I want one?\n\n374\n00:17:44.910 --> 00:17:45.580\nTwo?\n\n375\n00:17:45.580 --> 00:17:46.330\nTwenty?\n\n376\n00:17:46.330 --> 00:17:46.920\nRight?\n\n377\n00:17:46.920 --> 00:17:49.750\nAnd it's gonna show based on how\nmany your physical machine has.\n\n378\n00:17:49.750 --> 00:17:50.634\nMy machine has two.\n\n379\n00:17:50.634 --> 00:17:51.500\nI can't choose more than two.\n\n380\n00:17:51.500 --> 00:17:54.720\nI can't choose more than what I have.\n\n381\n00:17:54.720 --> 00:17:56.340\nRight?\nSo, it's holding me to two.\n\n382\n00:17:56.340 --> 00:17:58.300\nIt's gonna have one CPU by default.\n\n383\n00:17:58.300 --> 00:17:59.430\nI can bump that up if you want.\n\n384\n00:17:59.430 --> 00:18:02.160\nIf you click the little i here, it just\ngives you a little more information here\n\n385\n00:18:02.160 --> 00:18:05.320\nwarning you about not going\ncrazy with virtual CPUs\n\n386\n00:18:05.320 --> 00:18:08.590\nbecause you can oversubscribe your system\nand get your system too busy, all right?\n\n387\n00:18:08.590 --> 00:18:11.290\nSo I might wanna bump this one\nup to two or leave it at one.\n\n388\n00:18:11.290 --> 00:18:14.720\nIf I had four CPUs or eight CPUs,\nthey would all show up here, and\n\n389\n00:18:14.720 --> 00:18:15.470\nI'd be able to pick that.\n\n390\n00:18:16.740 --> 00:18:18.400\nOn the memory side, same thing.\n\n391\n00:18:18.400 --> 00:18:20.220\nWe can choose the amount of\nRAM that we want to have.\n\n392\n00:18:20.220 --> 00:18:23.670\nYou've got the pre-selected\noptions here if you drop it down.\n\n393\n00:18:23.670 --> 00:18:26.340\nThis is based on the operating\nsystem we picked on the last screen.\n\n394\n00:18:26.340 --> 00:18:30.680\nSo it's telling me a minimum of 512,\na maximum of one terabyte.\n\n395\n00:18:30.680 --> 00:18:32.830\nRight, because of\nthe hardware version I chose.\n\n396\n00:18:32.830 --> 00:18:36.140\nIf I'd chosen hardware version\n11 I can go up to 4 terabytes.\n\n397\n00:18:36.140 --> 00:18:39.870\nBut since I chose hardware version\n10 I'm limited to one terabyte.\n\n398\n00:18:39.870 --> 00:18:43.010\nIt's telling me best for performance is\nfour I can punch in whatever value I want.\n\n399\n00:18:43.010 --> 00:18:44.240\nI'm gonna go with the minimum.\n\n400\n00:18:44.240 --> 00:18:44.810\nRight?\n\n401\n00:18:44.810 --> 00:18:47.700\nAnd you can always change to\nlarger units of measure to make it\n\n402\n00:18:47.700 --> 00:18:48.510\neasier to type in that number.\n\n403\n00:18:48.510 --> 00:18:52.370\nNow notice on the left side, there's\na little drop down box by these and\n\n404\n00:18:52.370 --> 00:18:55.740\nif you click it, each of these\nactually have additional options.\n\n405\n00:18:55.740 --> 00:19:00.403\nSo, for example, my virtual CPU's,\nI can do virtual cores inside of them,\n\n406\n00:19:00.403 --> 00:19:03.110\ntoo, if my physical hardware supports it.\n\n407\n00:19:03.110 --> 00:19:06.810\nWe can turn on CPU Hot Plug\nwhich not many systems support,\n\n408\n00:19:06.810 --> 00:19:09.210\nadding CPUs while the system is on.\n\n409\n00:19:09.210 --> 00:19:11.890\nWe can also reserve performance.\n\n410\n00:19:11.890 --> 00:19:14.170\nWe can set minimum\namounts of resources and\n\n411\n00:19:14.170 --> 00:19:17.300\nmaximum amount of resources that are\navailable for that VM to stop one VM from\n\n412\n00:19:17.300 --> 00:19:21.400\nmonopolizing our entire system and causing\nthe other VMs to start slowing down.\n\n413\n00:19:23.160 --> 00:19:28.470\nYou can do a CPU ID mask,\nnow this is important, normally type 1 and\n\n414\n00:19:28.470 --> 00:19:32.835\neven some type 2 hypervisors can't run\nin a virtual machine, you can't nest\n\n415\n00:19:32.835 --> 00:19:36.845\nvirtualization products, but if you expose\nthese flags to the guest you actually can,\n\n416\n00:19:36.845 --> 00:19:38.285\nsome of this stuff can start to work.\n\n417\n00:19:38.285 --> 00:19:41.865\nNow it's not a good idea,\nin a lab environment you may use that,\n\n418\n00:19:41.865 --> 00:19:44.305\nin production you probably won't so\nyou can turn that off.\n\n419\n00:19:44.305 --> 00:19:46.715\nSame thing with the hardware\nvirtualization, you can turn that on and\n\n420\n00:19:46.715 --> 00:19:48.380\nexpose it to the VM.\n\n421\n00:19:48.380 --> 00:19:51.290\nAnd then some of the other options\nyou'll see kind of laid out here.\n\n422\n00:19:51.290 --> 00:19:55.010\nMost of these we typically won't mess\nwith, or in specific scenarios where we're\n\n423\n00:19:55.010 --> 00:19:58.820\nwanting to tune performance then we can\nadjust them, on the RAM side you'll see\n\n424\n00:19:58.820 --> 00:20:02.990\nwhere we can reserve memory now\nwhy would we reserve memory?\n\n425\n00:20:02.990 --> 00:20:06.540\nI gave it two gigs, so\nit's gonna have two gigs of memory, right?\n\n426\n00:20:06.540 --> 00:20:11.670\nWe'll, you can actually assign more memory\nto your VMs than you actually have,\n\n427\n00:20:11.670 --> 00:20:14.430\nand the VMs all start to share memory.\n\n428\n00:20:14.430 --> 00:20:18.090\nThe problem is if all your VMs request\nmemory at once you can get contention,\n\n429\n00:20:18.090 --> 00:20:20.320\nand people won't get access\nto the memory they want.\n\n430\n00:20:20.320 --> 00:20:25.120\nSo we can set up reservations, we can lock\nthat guest memory and say that it will be\n\n431\n00:20:25.120 --> 00:20:27.530\navailable to this machine, or\na certain amount will be available.\n\n432\n00:20:27.530 --> 00:20:30.280\nAnd you can set upper limits and\nlower limits for that, all right?\n\n433\n00:20:30.280 --> 00:20:31.919\nSo you do have a couple of\ndifferent options there.\n\n434\n00:20:33.250 --> 00:20:36.680\nOn the hard drive side,\nit's gonna have one hard drive by default.\n\n435\n00:20:36.680 --> 00:20:38.740\nI might want more and\nI can certainly add more but\n\n436\n00:20:38.740 --> 00:20:41.930\nthe default is to have one\nit's gonna do a 16 gig drive.\n\n437\n00:20:41.930 --> 00:20:43.960\nI might want more, I might want less.\n\n438\n00:20:43.960 --> 00:20:46.840\nThe VMware is basing this on\nthe recommendations from that vendor\n\n439\n00:20:46.840 --> 00:20:49.300\nwhen we picked it from the last\ndrop-down box on the last screen.\n\n440\n00:20:49.300 --> 00:20:51.000\nSo I can just bump that number up.\n\n441\n00:20:51.000 --> 00:20:55.050\nWe can go megabytes, terabytes,\nwhatever it is that we want to create.\n\n442\n00:20:55.050 --> 00:20:55.600\nRight?\n\n443\n00:20:55.600 --> 00:20:59.910\nIf you expand that out you'll see there's\na handful of options here as far as which\n\n444\n00:20:59.910 --> 00:21:01.610\ndata store it's gonna be.\n\n445\n00:21:01.610 --> 00:21:04.180\nAnd you'll see the location by\ndefault to store it with the VM.\n\n446\n00:21:04.180 --> 00:21:06.780\nSo we'll see that on\nanother screen in a moment.\n\n447\n00:21:06.780 --> 00:21:08.650\nActually, I think we already\npicked the data store didn't we?\n\n448\n00:21:08.650 --> 00:21:10.200\nYeah.\nI put it into the direct attach store.\n\n449\n00:21:10.200 --> 00:21:11.500\nSo we've already picked that.\n\n450\n00:21:11.500 --> 00:21:14.810\nYou can set up whether it's shared\nstorage, if you're gonna limit IO,\n\n451\n00:21:14.810 --> 00:21:16.630\nthis is part of the storage IO control.\n\n452\n00:21:16.630 --> 00:21:18.890\nWhen you start to define those options and\n\n453\n00:21:18.890 --> 00:21:22.860\nif it's got any virtual flash\nread cache accelerated storage.\n\n454\n00:21:22.860 --> 00:21:24.470\nOn a database server like this,\nI might want that.\n\n455\n00:21:24.470 --> 00:21:25.910\nThat would improve performance.\n\n456\n00:21:25.910 --> 00:21:27.900\nOn a web server I\nprobably wouldn't bother,\n\n457\n00:21:27.900 --> 00:21:29.390\non a database server it's different.\n\n458\n00:21:31.970 --> 00:21:33.450\nAlright, SCSI controller.\n\n459\n00:21:33.450 --> 00:21:37.390\nWe have a SCSI controller here,\nwhich is a VMware ParaVirtual.\n\n460\n00:21:37.390 --> 00:21:41.220\nNormally we don't emulate hardware so\nthat we can access it at wire speed but\n\n461\n00:21:41.220 --> 00:21:44.750\nthe emulated SCSI controller\nthat creates is ParaVirtualized.\n\n462\n00:21:44.750 --> 00:21:47.190\nIn other words,\nyou sort of see the hardware but\n\n463\n00:21:47.190 --> 00:21:48.610\nyou're not allowed to directly talk to it.\n\n464\n00:21:48.610 --> 00:21:50.210\nYou have to go through the hypervisor.\n\n465\n00:21:50.210 --> 00:21:53.230\nBut we're going to format our calls in\na way that's already ready to be sent to\n\n466\n00:21:53.230 --> 00:21:54.990\nthat hardware controller and\nget improved performance.\n\n467\n00:21:54.990 --> 00:21:56.070\nThat's the default.\n\n468\n00:21:56.070 --> 00:21:59.610\nWe don't want to mess with that but\nyou can change it and\n\n469\n00:21:59.610 --> 00:22:01.960\nsay I don't want to do\nVMware para virtual.\n\n470\n00:22:01.960 --> 00:22:05.960\nI want to do one of these other\nones like LSI Logic or Boss Logic.\n\n471\n00:22:05.960 --> 00:22:10.010\nJust know if you choose those, the call\nyou're making is not on the right format.\n\n472\n00:22:10.010 --> 00:22:13.000\nNow it's got to be changed and\nyou're going to get lower performance.\n\n473\n00:22:13.000 --> 00:22:14.730\nWhen would I wanna do this?\n\n474\n00:22:14.730 --> 00:22:18.610\nIf I had some guest operating system\nthat didn't support the VMWare drivers\n\n475\n00:22:18.610 --> 00:22:21.950\nthen I could choose one of these and the\nguest operating system might choose it.\n\n476\n00:22:21.950 --> 00:22:24.896\nSo I would only use this if it was\nthe difference between the virtual machine\n\n477\n00:22:24.896 --> 00:22:26.195\nworking or not working.\n\n478\n00:22:26.195 --> 00:22:29.120\nI wouldn't use this if I can get\nthe virtual machine working under the para\n\n479\n00:22:29.120 --> 00:22:29.785\nvirtual driver.\n\n480\n00:22:29.785 --> 00:22:32.835\nThat's typically what you want.\n\n481\n00:22:32.835 --> 00:22:33.555\nNetworking.\n\n482\n00:22:33.555 --> 00:22:35.781\nWhich network do I want to plug it\ninto and I'll drop that down and\n\n483\n00:22:35.781 --> 00:22:37.445\nsee the various networks\nthat we've created.\n\n484\n00:22:37.445 --> 00:22:39.905\nThis will be your v switches,\n\n485\n00:22:39.905 --> 00:22:42.645\ndistributor virtual switches and\nthe port groups that are on them.\n\n486\n00:22:42.645 --> 00:22:45.600\nSo I've got a port group called\nVM Network and that's what I'm seeing.\n\n487\n00:22:45.600 --> 00:22:49.990\nThat's the only port group I've got\nright now, notice the connect option.\n\n488\n00:22:49.990 --> 00:22:54.430\nIf that's not checked when the system\nboots up it’ll see a network adapter.\n\n489\n00:22:54.430 --> 00:22:56.480\nBut it’ll look like the cables unplugged.\n\n490\n00:22:56.480 --> 00:22:59.520\nIf it's checked we’ll have a link light,\ncables plugged in.\n\n491\n00:22:59.520 --> 00:23:03.070\nNormally you want that, but maybe you got\nsome problem with the virtual machine or\n\n492\n00:23:03.070 --> 00:23:04.910\nmaybe you're testing\na restore of a machine.\n\n493\n00:23:04.910 --> 00:23:07.670\nAnd when you boot it up, you don't want\nto get duplicate IPs on the network,\n\n494\n00:23:07.670 --> 00:23:09.400\ncuz the real machine is still running, so\n\n495\n00:23:09.400 --> 00:23:11.440\nwe might choose to boot it\nwith that not connected.\n\n496\n00:23:11.440 --> 00:23:14.430\nThat way we can boot it up and test\nthe machine to make sure it's not working.\n\n497\n00:23:14.430 --> 00:23:16.520\nNormally I just move it off\nto a different port group and\n\n498\n00:23:16.520 --> 00:23:17.930\nthat would stop the duplicate IPs too.\n\n499\n00:23:19.880 --> 00:23:20.830\nCD drive.\n\n500\n00:23:20.830 --> 00:23:24.290\nWe usually only need the CD drive for\ndoing the install of the guest OS.\n\n501\n00:23:24.290 --> 00:23:24.850\nRight?\n\n502\n00:23:24.850 --> 00:23:28.160\nI told it that I was going to\ninstall Debian Linux on this.\n\n503\n00:23:28.160 --> 00:23:30.130\nWhere's it gonna get Debian Linux from?\n\n504\n00:23:30.130 --> 00:23:31.300\nI need to give it to it.\n\n505\n00:23:31.300 --> 00:23:32.490\nAnd so I can plug that into the CD.\n\n506\n00:23:32.490 --> 00:23:34.480\nThe default is that it's gonna\nplug into the client device.\n\n507\n00:23:34.480 --> 00:23:37.940\nAnd that means, on my ESXI host\nthere's a physical CD drive.\n\n508\n00:23:37.940 --> 00:23:39.490\nAnd I'm gonna put the disc in there.\n\n509\n00:23:39.490 --> 00:23:41.910\nBut I have a data store iso.\n\n510\n00:23:41.910 --> 00:23:44.010\nSo I've got an iso image of Debian Linux.\n\n511\n00:23:44.010 --> 00:23:46.670\nIt's in one of my data stores, and\nI can come in here and find it.\n\n512\n00:23:46.670 --> 00:23:50.010\nIf I go to my data store, and\nI find Debian and there it is.\n\n513\n00:23:51.200 --> 00:23:52.790\nAnd so now I can pop that in.\n\n514\n00:23:52.790 --> 00:23:56.542\nNow be careful here because notice\nthe default is that it's not connected.\n\n515\n00:23:56.542 --> 00:23:58.563\nYou can't boot off a CD\nunless it's connected.\n\n516\n00:23:58.563 --> 00:24:03.480\nI need to check that to say when it\nboots up have that CD in the drive\n\n517\n00:24:03.480 --> 00:24:05.403\nready to do the install.\n\n518\n00:24:05.403 --> 00:24:06.562\nFloppy drive.\n\n519\n00:24:06.562 --> 00:24:10.038\nWell, to be honest with you, most of us\ndon't need floppy drives any more but\n\n520\n00:24:10.038 --> 00:24:13.517\nmaybe you've got some system like\nmaybe you're trying to get Windows 3.1\n\n521\n00:24:13.517 --> 00:24:14.127\ninstalled.\n\n522\n00:24:14.127 --> 00:24:15.141\nThat was on a floppy disk.\n\n523\n00:24:15.141 --> 00:24:19.184\nYou do your virtual floppy disks to get\nthat set up and so you can come in and\n\n524\n00:24:19.184 --> 00:24:20.058\nconnect that.\n\n525\n00:24:20.058 --> 00:24:22.375\nHonestly, I don't need it so\nI'd probably come back and\n\n526\n00:24:22.375 --> 00:24:23.738\ndelete this floppy drive later.\n\n527\n00:24:23.738 --> 00:24:25.974\nPretty sure we can't\ndelete that from here.\n\n528\n00:24:25.974 --> 00:24:26.949\nActually, we can.\n\n529\n00:24:26.949 --> 00:24:28.774\nIf we look when I float over it,\n\n530\n00:24:28.774 --> 00:24:33.345\nfloat over that floppy drive way on the\nright side here hmy little x appears and\n\n531\n00:24:33.345 --> 00:24:36.676\nI can click that, and\nI just got rid of the floppy drive.\n\n532\n00:24:36.676 --> 00:24:39.803\nIf you don't need hardware,\nget rid of it cuz that's extra drivers and\n\n533\n00:24:39.803 --> 00:24:41.694\nstuff the virtual machine doesn't need.\n\n534\n00:24:41.694 --> 00:24:43.850\nSo, I'm just gonna delete\nthat floppy drive.\n\n535\n00:24:43.850 --> 00:24:45.425\nSame thing goes for\nthings like sound cards.\n\n536\n00:24:45.425 --> 00:24:48.995\nIf you're not going to use sound on your\nserver, you get rid of the sound card.\n\n537\n00:24:48.995 --> 00:24:52.691\nAnd I'm pretty sure I don't have\na sound card in this one anyway, but\n\n538\n00:24:52.691 --> 00:24:55.893\nthose are just examples of\nhardware you may or may not need.\n\n539\n00:24:55.893 --> 00:24:59.185\nTechnically, once the OS is installed\nI don't need that CD drive anymore.\n\n540\n00:24:59.185 --> 00:25:01.417\nSo I might choose to come back and\n\n541\n00:25:01.417 --> 00:25:04.734\ndelete the CD drive just\nto get it out of the way.\n\n542\n00:25:04.734 --> 00:25:05.917\nVideo card.\n\n543\n00:25:05.917 --> 00:25:09.558\nFor most of us,\nthe regular video card is fine.\n\n544\n00:25:09.558 --> 00:25:12.038\nBut if you're running\nthe latest hardware version,\n\n545\n00:25:12.038 --> 00:25:15.903\nif you are doing hardware version 11, it\nsupports up to two gigs of video memory.\n\n546\n00:25:15.903 --> 00:25:20.056\nThat means you can do 3D rendering, 3D\naccelerated video and maybe you want that,\n\n547\n00:25:20.056 --> 00:25:21.531\nor high resolution screens.\n\n548\n00:25:21.531 --> 00:25:24.977\nIf I'm doing a command line based\nweb server, or database server,\n\n549\n00:25:24.977 --> 00:25:26.013\nI don't need that.\n\n550\n00:25:26.013 --> 00:25:30.476\nSo I can choose a video card that has\na very low level of settings right?\n\n551\n00:25:30.476 --> 00:25:34.835\nOne display, 8 megabytes of memory,\nand that's it, okay?\n\n552\n00:25:34.835 --> 00:25:36.410\nNo 3D support.\n\n553\n00:25:36.410 --> 00:25:39.334\nBut, if I'm trying to run\nsome 3D accelerated whatever,\n\n554\n00:25:39.334 --> 00:25:41.388\nyou usually save it for Virtual Desktop.\n\n555\n00:25:41.388 --> 00:25:44.997\nIf you're doing VDI, somebody wants to run\ntheir Windows desktop from the server, and\n\n556\n00:25:44.997 --> 00:25:46.420\nthey want it to look pretty.\n\n557\n00:25:46.420 --> 00:25:50.661\nSo, for them, we might need to\nbump them up to more displays, or\n\n558\n00:25:50.661 --> 00:25:53.647\nthey might need a gig of memory or\nwhatever and\n\n559\n00:25:53.647 --> 00:25:59.244\nI don't have enough in my server to be\nable to do that, so we'll say 512, right?\n\n560\n00:25:59.244 --> 00:26:02.536\nAnd if you do enough,\nyou can actually enable that 3D support.\n\n561\n00:26:02.536 --> 00:26:04.917\nI don't have a 3D card\nin my hardware server.\n\n562\n00:26:04.917 --> 00:26:08.730\nIf I did, I could choose that, and\nthen we'd have that 3D support.\n\n563\n00:26:08.730 --> 00:26:10.566\nThe reality is most of\nus don't need that so\n\n564\n00:26:10.566 --> 00:26:12.718\nI'm gonna leave that at\nthe basic settings here.\n\n565\n00:26:12.718 --> 00:26:14.952\nNothing too fancy.\n\n566\n00:26:14.952 --> 00:26:16.335\nWe'll just leave it be.\n\n567\n00:26:16.335 --> 00:26:19.967\nIf you do the auto detect,\nit looks to your server's hardware and\n\n568\n00:26:19.967 --> 00:26:24.207\nit tries to match that for the guest but\nagain we don't normally sweat that.\n\n569\n00:26:24.207 --> 00:26:28.378\nAll right then we've got VMCI and\nthat's our communication interface.\n\n570\n00:26:28.378 --> 00:26:33.978\nThis is how VMware talks to virtual\nmachines but notice right here, obsolete.\n\n571\n00:26:33.978 --> 00:26:36.239\nVMCI between VMs is no longer supported.\n\n572\n00:26:36.239 --> 00:26:39.392\nAll right and what happens now\nis virtual machines are not\n\n573\n00:26:39.392 --> 00:26:41.633\nallowed to talk directly to each other.\n\n574\n00:26:41.633 --> 00:26:43.100\nInstead they talk via the network.\n\n575\n00:26:43.100 --> 00:26:45.453\nIn that way we control them\njust like any other machines.\n\n576\n00:26:45.453 --> 00:26:47.489\nIt's part of a Virtual Machine isolation.\n\n577\n00:26:47.489 --> 00:26:51.032\nIf I chose an older hardware set,\nI could've picked this option but\n\n578\n00:26:51.032 --> 00:26:55.154\nit's not supported online, and\nhonestly you don't really need it anymore.\n\n579\n00:26:55.154 --> 00:26:59.312\nAnd then lastly we have other devices\nwhich are kinda miscellaneous stuff like\n\n580\n00:26:59.312 --> 00:27:01.140\nIDE, keyboard, mouse and so on.\n\n581\n00:27:01.140 --> 00:27:05.412\nThese are things that we don't typically\nneed to mess with and that's a good thing,\n\n582\n00:27:05.412 --> 00:27:07.831\ncuz there's no real\noptions to mess with them.\n\n583\n00:27:07.831 --> 00:27:11.383\nIf you need some hardware that didn't show\nup, I'm creating a database server so\n\n584\n00:27:11.383 --> 00:27:13.446\nI want one hard drive for\nthe operating system.\n\n585\n00:27:13.446 --> 00:27:15.850\nI want another hard drive for my database.\n\n586\n00:27:15.850 --> 00:27:17.974\nWell it's only gonna create\none hard drive right?\n\n587\n00:27:17.974 --> 00:27:20.352\nWell down here we can create\nadditional hardware, and\n\n588\n00:27:20.352 --> 00:27:21.755\nI wanna add another hard drive.\n\n589\n00:27:21.755 --> 00:27:25.193\nSo when I click that, I'll see a list\nof all the things that we can add, and\n\n590\n00:27:25.193 --> 00:27:27.485\nmost of it's pretty straightforward,\nright?\n\n591\n00:27:27.485 --> 00:27:32.993\nNew Hard drive, Network,\nCD/DVD, Serial Ports, and so on.\n\n592\n00:27:32.993 --> 00:27:37.162\nSome of them are a little weird though,\nlike USB Controller, or Host USB Device.\n\n593\n00:27:37.162 --> 00:27:39.587\nI can actually take a USB device\nplugged into the host and\n\n594\n00:27:39.587 --> 00:27:40.990\nattach it to a virtual machine.\n\n595\n00:27:40.990 --> 00:27:42.889\nIt's called USB pass through.\n\n596\n00:27:42.889 --> 00:27:46.572\nNot every hardware supports that, but\nsometimes you might have software that\n\n597\n00:27:46.572 --> 00:27:49.990\nrequires like a USB dongle for its\nlicense and I can plug it in and do that.\n\n598\n00:27:49.990 --> 00:27:54.713\nThe risk is that you can't use vmotion\nanymore because the USB device is plugged\n\n599\n00:27:54.713 --> 00:27:55.637\ninto one host.\n\n600\n00:27:55.637 --> 00:27:57.743\nYour virtual machine is\nnow married to that host.\n\n601\n00:27:57.743 --> 00:27:59.703\nIf your virtual machine\nfails to another host,\n\n602\n00:27:59.703 --> 00:28:02.796\nit doesn't have the USB dongle over there,\nit's not going to work right?\n\n603\n00:28:02.796 --> 00:28:06.544\nSo that kills mobility but\nthe functionality is there.\n\n604\n00:28:06.544 --> 00:28:09.276\nSCSI and PCI devices are in there.\n\n605\n00:28:09.276 --> 00:28:11.827\nWhat's one that is a little\nmore commonly used?\n\n606\n00:28:11.827 --> 00:28:12.957\nRDM disk.\n\n607\n00:28:12.957 --> 00:28:15.332\nThat's a raw device disk, right?\n\n608\n00:28:15.332 --> 00:28:17.417\nThis is where I have a raw\nhard drive exposed to the DM.\n\n609\n00:28:17.417 --> 00:28:21.392\nIf I want to the best possible disk I own,\nI can take a raw disk and\n\n610\n00:28:21.392 --> 00:28:23.793\nattach it to my database server here.\n\n611\n00:28:23.793 --> 00:28:25.621\nNo other virtual machine\ncan touch that disk.\n\n612\n00:28:25.621 --> 00:28:28.477\nIt's now exclusive to\nthis virtual machine.\n\n613\n00:28:28.477 --> 00:28:32.090\nAnd once it's tied to the VM,\nit now has exclusive access to it.\n\n614\n00:28:32.090 --> 00:28:32.842\nIt doesn't have to go through a filter.\n\n615\n00:28:32.842 --> 00:28:36.973\nIt can just reach out and touch that\ndisk and get the best disk i/o possible.\n\n616\n00:28:36.973 --> 00:28:39.600\nSo I can add that here, but\nI just want a regular disk for me.\n\n617\n00:28:39.600 --> 00:28:41.350\nSo I'm gonna create a new one.\n\n618\n00:28:41.350 --> 00:28:43.715\nAnd its just a new hard\ndisk all add that in.\n\n619\n00:28:43.715 --> 00:28:44.782\nAnd now I can pick the size.\n\n620\n00:28:44.782 --> 00:28:47.742\nMaybe I want this one\nto be 500 gigs right?\n\n621\n00:28:47.742 --> 00:28:49.537\nApparently I don't have enough room for\nthat.\n\n622\n00:28:49.537 --> 00:28:52.116\nWhat room do I have?\n\n623\n00:28:52.116 --> 00:28:53.263\nIs it not gonna tell me?\n\n624\n00:28:53.263 --> 00:28:54.514\nAll right we'll just do 100 gigs then.\n\n625\n00:28:54.514 --> 00:28:57.347\nSo I'll create a 100 gig disk and\nI'll punch that one in and\n\n626\n00:28:57.347 --> 00:28:59.269\nnow I'll have a place to put my database.\n\n627\n00:28:59.269 --> 00:29:02.296\nAnd I can add more disks more network\nadapters or whatever else I needed.\n\n628\n00:29:02.296 --> 00:29:04.254\n>> Now Don, was that over allocation?\n\n629\n00:29:04.254 --> 00:29:05.509\nIs that what it showed you right away?\n\n630\n00:29:05.509 --> 00:29:07.990\nIt said well you're trying 500 gigs, but\n\n631\n00:29:07.990 --> 00:29:10.598\nwe're not gonna give it to\nyou cuz we don't have it.\n\n632\n00:29:10.598 --> 00:29:16.358\n>> I didn't pay attention when the error\npopped up, and now it's, [LAUGH].\n\n633\n00:29:16.358 --> 00:29:17.406\nNow it's not gonna tell me.\n\n634\n00:29:17.406 --> 00:29:20.471\nBut more than likely I don't remember\nhow much storage I actually have.\n\n635\n00:29:20.471 --> 00:29:23.361\nI have a second hard drive in this\nthing and it is only 500 gigs so\n\n636\n00:29:23.361 --> 00:29:25.586\nI must have picked a bigger number and\nthere we go.\n\n637\n00:29:25.586 --> 00:29:28.997\nYep the warning popped up and it said it\nwas greater than the amount available in\n\n638\n00:29:28.997 --> 00:29:30.610\nthe data store so I'm exceeding it.\n\n639\n00:29:30.610 --> 00:29:34.139\nNow that doesn't mean I can't do it\nright and that's why I expanded this.\n\n640\n00:29:34.139 --> 00:29:36.839\nSo, according to this, I can't make it.\n\n641\n00:29:36.839 --> 00:29:38.301\nI want a terabyte.\n\n642\n00:29:38.301 --> 00:29:39.756\nI'm gonna do a terabyte disk.\n\n643\n00:29:39.756 --> 00:29:41.493\nWell, it's not gonna let me, right?\n\n644\n00:29:41.493 --> 00:29:44.183\nI could thin provision the disk,\nall right?\n\n645\n00:29:44.183 --> 00:29:47.663\nNow, if I expand this out,\nI'll see the options in the disk.\n\n646\n00:29:47.663 --> 00:29:49.848\nAnd right now it's going to\ncreate it in the datastore.\n\n647\n00:29:49.848 --> 00:29:52.887\nAnd if I look right down here\ni've got disc provisioning, and\n\n648\n00:29:52.887 --> 00:29:55.173\nright now it's thick\nprovision lazy zeroed.\n\n649\n00:29:55.173 --> 00:29:58.980\nI've got thick provision eager zeroed and\nthin provision.\n\n650\n00:29:58.980 --> 00:30:00.130\nWhat are these?\n\n651\n00:30:00.130 --> 00:30:03.355\nWell thick provision lazy zeroed,\nwhat that means is if I tell it I want\n\n652\n00:30:03.355 --> 00:30:06.704\na terrabyte, it's going to lay out\none terrabyte of storage right now.\n\n653\n00:30:06.704 --> 00:30:09.943\nIt's gonna flag one terabyte, just for\n\n654\n00:30:09.943 --> 00:30:14.525\nthis virtual machine,\nreserve, exclusive right now.\n\n655\n00:30:14.525 --> 00:30:15.625\nAnd that's all it's gonna do.\n\n656\n00:30:15.625 --> 00:30:18.134\nIt’s just gonna flag it for us.\n\n657\n00:30:18.134 --> 00:30:20.897\nThick provision eager\nzeroed does the same thing,\n\n658\n00:30:20.897 --> 00:30:25.740\nexcept it then proceeds to write a zero\nto every block inside of that terabyte.\n\n659\n00:30:25.740 --> 00:30:28.680\nSo what if that storage was\nused somewhere else before?\n\n660\n00:30:28.680 --> 00:30:30.491\nThere might be deleted files\nthere in the background.\n\n661\n00:30:30.491 --> 00:30:33.755\nSo if I fire up a VM and\nthen I run a scan on it.\n\n662\n00:30:33.755 --> 00:30:37.573\nI scan the hard drive and I find deleted\nfiles, maybe from another customer.\n\n663\n00:30:37.573 --> 00:30:41.497\nSo, If I have multiple tenants, if I'm\nrenting out storage space to people,\n\n664\n00:30:41.497 --> 00:30:43.757\nI want to make sure that\ndata gets zeroed out so\n\n665\n00:30:43.757 --> 00:30:45.793\nthey can't find someone else's data.\n\n666\n00:30:45.793 --> 00:30:47.259\nSo that's the difference\nbetween these two.\n\n667\n00:30:47.259 --> 00:30:50.425\nBut both of them provision\nthe data immediately.\n\n668\n00:30:50.425 --> 00:30:53.850\nIf I wanna give it a terabyte,\nI need a terabyte of storage.\n\n669\n00:30:53.850 --> 00:30:56.908\nOr I can lie to the server and\ntell it to thin provision.\n\n670\n00:30:56.908 --> 00:31:01.628\nWith thin provision it says I want\na terabyte, but create an empty file.\n\n671\n00:31:01.628 --> 00:31:04.950\nCreate a file that's very small and\nas I put data in it,\n\n672\n00:31:04.950 --> 00:31:08.791\nthen grow the disk to get bigger and\nbigger and bigger, right?\n\n673\n00:31:08.791 --> 00:31:10.688\nOn one hand,\nit lets me have really big disks,\n\n674\n00:31:10.688 --> 00:31:13.754\neven though I don't have the storage\nto back it knowing that in the future,\n\n675\n00:31:13.754 --> 00:31:16.013\nI can always move to bigger\ndisks when that time comes.\n\n676\n00:31:16.013 --> 00:31:19.412\nOn the other hand,\nevery time that file has to grow,\n\n677\n00:31:19.412 --> 00:31:23.059\nit starts to fragment and\nI get a performance decrease.\n\n678\n00:31:23.059 --> 00:31:26.566\nThin provisioning is great in labs and\nresearch environments cuz you can create\n\n679\n00:31:26.566 --> 00:31:28.972\nhuge amounts of storage in\na small amount of space, but\n\n680\n00:31:28.972 --> 00:31:31.195\nthe performance of it is\nterrible in production.\n\n681\n00:31:31.195 --> 00:31:33.146\nSo we don't normally want that\nin production, all right.\n\n682\n00:31:33.146 --> 00:31:34.544\nBut it does allow us to cheat the system.\n\n683\n00:31:34.544 --> 00:31:37.160\nAnd so now when I choose to\nthin provision that disk,\n\n684\n00:31:37.160 --> 00:31:40.134\nit will actually be okay with\nme provisioning out something\n\n685\n00:31:40.134 --> 00:31:43.113\nbigger because it's gonna be\nthin provision, all right?\n\n686\n00:31:43.113 --> 00:31:43.957\nBut I'm not gonna do that.\n\n687\n00:31:43.957 --> 00:31:48.807\nI'll do the thick provision lazy zero and\nI'll just do 100 gigs.\n\n688\n00:31:48.807 --> 00:31:50.446\nI'll try and be nice to my system.\n\n689\n00:31:50.446 --> 00:31:52.136\nAnd it's telling me my\nmaximum right there.\n\n690\n00:31:52.136 --> 00:31:55.335\nI guess if I bothered to look at that,\nthat would've told me.\n\n691\n00:31:55.335 --> 00:31:59.740\nAll right, so I'm gonna set that and\nget that disk added in.\n\n692\n00:31:59.740 --> 00:32:00.882\nAnd now when I hit Next,\n\n693\n00:32:00.882 --> 00:32:03.810\nit's got everything it needs\nto create my virtual machine.\n\n694\n00:32:03.810 --> 00:32:04.321\nActually, you know what?\n\n695\n00:32:04.321 --> 00:32:05.581\nLet me go back one screen.\n\n696\n00:32:05.581 --> 00:32:06.964\nI stopped right there.\n\n697\n00:32:06.964 --> 00:32:08.583\nThere are a few more options in here.\n\n698\n00:32:08.583 --> 00:32:12.322\nIf I go to the VM options button you will\nsee where we can do the advanced settings\n\n699\n00:32:12.322 --> 00:32:14.035\nin here, and I want to cover these.\n\n700\n00:32:14.035 --> 00:32:15.005\nBut I know we are out of time.\n\n701\n00:32:15.005 --> 00:32:16.431\nWes is giving me the evil eye.\n\n702\n00:32:16.431 --> 00:32:20.464\nSo we'll talk more about these settings\nin the next episode and the distributed\n\n703\n00:32:20.464 --> 00:32:24.210\nresource scheduler which I know we've\nmentioned in other episodes too.\n\n704\n00:32:24.210 --> 00:32:25.361\nWe’ll talk about it a little more too.\n\n705\n00:32:25.361 --> 00:32:29.205\nSo there are a few more options there,\nbut as far as creating the VM,\n\n706\n00:32:29.205 --> 00:32:32.187\nthat's enough for\nme to move forward and finish it.\n\n707\n00:32:32.187 --> 00:32:35.817\nAnd once it's finished it creates\nthe VM but it's powered off and\n\n708\n00:32:35.817 --> 00:32:37.344\nit's just sitting there.\n\n709\n00:32:37.344 --> 00:32:39.883\nI need to start it up so\nthat it can start its install and\n\n710\n00:32:39.883 --> 00:32:42.884\ninstall the guest operating system\nwill begin to work with it.\n\n711\n00:32:42.884 --> 00:32:47.173\nBut, as far as creating the VM, those are\nall my settings, it's all in place, and\n\n712\n00:32:47.173 --> 00:32:48.726\nI'm ready to get it fired up.\n\n713\n00:32:48.726 --> 00:32:51.974\n>> It's great to see that with all this\ntalk about virtualization and VMware,\n\n714\n00:32:51.974 --> 00:32:54.320\nthat VMware actually\nvirtualizes virtual machines.\n\n715\n00:32:54.320 --> 00:32:55.855\n>> [LAUGH]\n>> So, good to see that.\n\n716\n00:32:55.855 --> 00:32:59.317\nDoes look like we're running to the end of\nanother episode, and I know we're coming\n\n717\n00:32:59.317 --> 00:33:02.309\nback from a part two, but before we do,\nDon, got any additional words?\n\n718\n00:33:02.309 --> 00:33:06.127\n>> The main thing is, most of the options\nthat you choose during VM creation,\n\n719\n00:33:06.127 --> 00:33:07.490\nyou can change later.\n\n720\n00:33:07.490 --> 00:33:10.000\nSo it's hard to make\na mistake that you can't fix.\n\n721\n00:33:10.000 --> 00:33:11.940\nThe one exception is when you\npick the operating system.\n\n722\n00:33:11.940 --> 00:33:14.497\nIf you pick that wrong,\nit's easier to just delete the VM and\n\n723\n00:33:14.497 --> 00:33:16.413\ncreate a new one than it is to try and\nfix that.\n\n724\n00:33:16.413 --> 00:33:17.565\nIt’s not an easy thing to fix.\n\n725\n00:33:17.565 --> 00:33:20.601\nSo make sure you choose that correctly.\n\n726\n00:33:20.601 --> 00:33:21.962\nI didn't get to upgrading, shoot.\n\n727\n00:33:21.962 --> 00:33:24.659\nI wanted to show upgrading because you\nremember I created a hardware level 10 and\n\n728\n00:33:24.659 --> 00:33:25.970\nI wanted to bump it up to hardware 11.\n\n729\n00:33:25.970 --> 00:33:28.815\nIt's actually super easy to do that,\nso we'll do that in part two.\n\n730\n00:33:28.815 --> 00:33:30.571\nI’ll need to make a note to remember that.\n\n731\n00:33:30.571 --> 00:33:32.665\nBut there is more to see.\n\n732\n00:33:32.665 --> 00:33:35.210\nJust remember, most of the changes\nyou can correct later on, so\n\n733\n00:33:35.210 --> 00:33:36.873\nif you make a mistake it's not a big deal.\n\n734\n00:33:36.873 --> 00:33:38.526\n>> Well Don we look forward\nto seeing in part two.\n\n735\n00:33:38.526 --> 00:33:41.655\nThanks for being in the studio as always,\nand thank you to our viewers for watching.\n\n736\n00:33:41.655 --> 00:33:44.232\nSigning out for ITProTV,\nI've been your host Wes Bryan.\n\n737\n00:33:44.232 --> 00:33:45.038\n>> And I'm Don Pizet.\n\n738\n00:33:45.038 --> 00:33:47.001\n>> And we'll see you next time.\n\n739\n00:33:47.001 --> 00:33:52.531\n[MUSIC]\n\n",
          "vimeoId": "169100590"
        },
        {
          "description": "In this episode, Wes and Don continue their demonstration on how to create and configure virtual machines inside of vSphere. They explain the upgrade process when upgrading a guest from one hardware version to another. They look at the files that make up the virtual machine like .vmdk, .nvram, and .vmx files.",
          "length": "1990",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-2-creating_virtual_machines_pt2-060216-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-2-creating_virtual_machines_pt2-060216-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-2-creating_virtual_machines_pt2-060216-1-sm.jpg",
          "title": "Creating Virtual Machines Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.007 --> 00:00:14.430\nWelcome back to another exciting episode,\nhere at ITPRO.TV.\n\n3\n00:00:14.430 --> 00:00:15.820\n>> I'm your host Wes Brian and\n\n4\n00:00:15.820 --> 00:00:19.140\nin today's episode we're coming\nat you with more VM ware.\n\n5\n00:00:19.140 --> 00:00:22.690\nThat's right, more of the VM ware\ncertified professional version 6.\n\n6\n00:00:22.690 --> 00:00:24.860\nPart two on creating virtual machines.\n\n7\n00:00:24.860 --> 00:00:27.270\nJoining me in the studios is\nnone other than Mr. Don Pezet.\n\n8\n00:00:27.270 --> 00:00:28.350\nDon, how are you doing, sir?\n\n9\n00:00:28.350 --> 00:00:29.220\n>> I'm doing great, Wes.\n\n10\n00:00:29.220 --> 00:00:31.540\nReady to dive right back in\ncreating our virtual machines.\n\n11\n00:00:31.540 --> 00:00:35.000\nAnd technically, in the last episode,\nwe created a virtual machine.\n\n12\n00:00:35.000 --> 00:00:36.070\nSo, you could say that we're done but,\n\n13\n00:00:36.070 --> 00:00:38.280\nthere were lot of options\nthat we didn't get to.\n\n14\n00:00:38.280 --> 00:00:40.280\nI know I left off talking\nabout hardware revisions.\n\n15\n00:00:40.280 --> 00:00:42.096\nWe wanted to take a look that and\na few other things and.\n\n16\n00:00:42.096 --> 00:00:46.140\nAnd Wes, [LAUGH] looking at the notes that\nI put together, there's probably gonna be\n\n17\n00:00:46.140 --> 00:00:49.500\na part three of this thing because I\nreally do have a lot of little nuts and\n\n18\n00:00:49.500 --> 00:00:53.150\nbolts, little details that I wanna tackle\non these that are important to understand.\n\n19\n00:00:53.150 --> 00:00:55.990\nWhen you create a virtual machine,\nthere's a lot of choices and\n\n20\n00:00:55.990 --> 00:00:59.350\nso what we saw in part one,\nthat was like the bare minimum.\n\n21\n00:00:59.350 --> 00:01:03.360\nThat's what it takes to get a virtual\nmachine up and running and that's it.\n\n22\n00:01:03.360 --> 00:01:05.740\nNow, we need to go into the more\nadvanced things, rIgh?.\n\n23\n00:01:05.740 --> 00:01:08.500\nWhat do we tweak about the virtual\nmachine to really get it working.\n\n24\n00:01:08.500 --> 00:01:12.290\nNow, one of the last things I talked\nabout were the hardware versions.\n\n25\n00:01:12.290 --> 00:01:15.040\nEvery virtual machine is\nbuilt on a framework.\n\n26\n00:01:15.040 --> 00:01:20.310\nAnd that framework It's a set of, and\nI don't want to say virtual Hardware.\n\n27\n00:01:20.310 --> 00:01:22.010\nIt's not all virtual hardware.\n\n28\n00:01:22.010 --> 00:01:23.200\nSome of it is actual hardware.\n\n29\n00:01:23.200 --> 00:01:25.210\nBut it's a set of rules,\n\n30\n00:01:25.210 --> 00:01:29.250\nthat the virtual machine can use to talk\nto the hardware on the ESXI hyper visor.\n\n31\n00:01:30.390 --> 00:01:34.540\nMost of the hardware is direct access,\nsome of it though is para-virtualized\n\n32\n00:01:34.540 --> 00:01:37.950\naccess, or access through some\nkind of virtualized hardware.\n\n33\n00:01:37.950 --> 00:01:39.870\nAnd the virtual machine has\nto know what to look for.\n\n34\n00:01:39.870 --> 00:01:40.940\nIt has to have a certain drivers,\n\n35\n00:01:40.940 --> 00:01:43.520\nhas to have a certain hardware\nidentifiers that it touches.\n\n36\n00:01:43.520 --> 00:01:46.210\nAnd from time to time\nVMware updates those.\n\n37\n00:01:46.210 --> 00:01:49.050\nAnd when they do,\nthey create another hardware version.\n\n38\n00:01:49.050 --> 00:01:55.740\nAnd so I talked about how in ESXI 6\nwe're now up to hardware version 11.\n\n39\n00:01:55.740 --> 00:02:00.620\nBut in VMware Fusion, for example,\nthey're up to hardware version 12.\n\n40\n00:02:00.620 --> 00:02:04.140\nSo they roll out this new hardware\nversions, they test things out and\n\n41\n00:02:04.140 --> 00:02:06.870\nonly when they're nice and\nstable do they move them over to ESX.\n\n42\n00:02:06.870 --> 00:02:10.180\nNow, we don't necessarily\neven really care about that,\n\n43\n00:02:10.180 --> 00:02:13.760\nsometimes there's a feature we need or\nthat we want, right so ESX,\n\n44\n00:02:13.760 --> 00:02:20.640\nESXi 5.5 shipped with hardware\nversion 10 is the default.\n\n45\n00:02:20.640 --> 00:02:23.830\nThe XSI6 wants to go to\nhardware version 11.\n\n46\n00:02:23.830 --> 00:02:26.740\nThe biggest difference between 10 and\n11 is that in\n\n47\n00:02:26.740 --> 00:02:31.130\nhardware version 10 a virtual machine\ncan only have up to a terabyte of RAM.\n\n48\n00:02:31.130 --> 00:02:33.280\nI know just a terabyte of a RAM.\n\n49\n00:02:33.280 --> 00:02:36.740\nBut when you go to hardware version 11\nyou can have up to four terabytes of RAM.\n\n50\n00:02:36.740 --> 00:02:38.760\nSo it basically increased the amount\nof memory that we can handle.\n\n51\n00:02:38.760 --> 00:02:42.460\nNow, how many of us are running a terabyte\nof memory in our virtual machines?\n\n52\n00:02:43.600 --> 00:02:44.220\nNot me.\n\n53\n00:02:44.220 --> 00:02:48.360\nI don't have a single virtual machine\nthat has even 500 gigs of RAM,\n\n54\n00:02:48.360 --> 00:02:50.340\nbut there are people out\nthere who need it and\n\n55\n00:02:50.340 --> 00:02:53.350\nif you need it you've got to get\nthat newer hardware version.\n\n56\n00:02:53.350 --> 00:02:56.610\nSo most of us don't really care what\nthe hardware version is because\n\n57\n00:02:56.610 --> 00:03:00.430\neven hardware version six probably has all\nof the different features that we need for\n\n58\n00:03:00.430 --> 00:03:02.710\na typical virtual machine.\n\n59\n00:03:02.710 --> 00:03:05.050\nBut there may come a time\nwhere you need to upgrade.\n\n60\n00:03:05.050 --> 00:03:07.880\nWhen you need to say all right,\nI'm on hardware version 10.\n\n61\n00:03:07.880 --> 00:03:09.560\nI need to bump up to 11.\n\n62\n00:03:09.560 --> 00:03:14.770\nWell, in the show last time, we created\na SQL server, a database server.\n\n63\n00:03:14.770 --> 00:03:17.330\nAnd I made it hardware\nversion 10 on purpose.\n\n64\n00:03:17.330 --> 00:03:22.100\nSo we're gonna see upgrading that\none to 11 and getting that in place.\n\n65\n00:03:22.100 --> 00:03:24.550\nAnd I know I'm kind of\nplaying it up as a big deal.\n\n66\n00:03:24.550 --> 00:03:26.260\nIt's actually not very spectacular at all.\n\n67\n00:03:26.260 --> 00:03:28.710\nWe're going to tell it to upgrade,\nand it kind of does it.\n\n68\n00:03:28.710 --> 00:03:31.510\nThe virtual machine usually has to reboot,\nand then that's it.\n\n69\n00:03:31.510 --> 00:03:33.490\nSo its not really spectacular and amazing.\n\n70\n00:03:33.490 --> 00:03:37.870\n>> So, if we don't get the ooh,\neffect, like watching fireworks,\n\n71\n00:03:37.870 --> 00:03:42.390\nhow do we even tell if the upgrade\nis done, completed, successful?\n\n72\n00:03:42.390 --> 00:03:43.820\nWhat is it that we can see?\n\n73\n00:03:43.820 --> 00:03:45.300\n>> There's a couple of ways.\n\n74\n00:03:45.300 --> 00:03:47.580\nOne we can see in the settings\nthe virtual machine.\n\n75\n00:03:47.580 --> 00:03:50.520\nSo I come in and\nI go in to my host in clusters and\n\n76\n00:03:50.520 --> 00:03:53.590\nI find that SQL server or a database.\n\n77\n00:03:53.590 --> 00:03:55.170\nSo I call it DBO1.\n\n78\n00:03:55.170 --> 00:03:58.210\nSo I can find DB01 over here and\n\n79\n00:03:58.210 --> 00:04:02.380\nwhen you go to manage it, and\nyou take a look at its settings and\n\n80\n00:04:02.380 --> 00:04:06.220\ninformation, you can actually see\nit right here under compatibility.\n\n81\n00:04:06.220 --> 00:04:11.040\nSee on line says ESXi 5.5 and\nlater VM version 10.\n\n82\n00:04:11.040 --> 00:04:15.480\nOkay, so I know that I'm at hardware\nversion 10 on this virtual machine.\n\n83\n00:04:15.480 --> 00:04:17.650\nIf I take a look at my\nweb server over here and\n\n84\n00:04:17.650 --> 00:04:23.040\nI look at the same data,\nI'm at VM version 11, ESXI 6.0 and later.\n\n85\n00:04:23.040 --> 00:04:24.970\nAll right, so when I do the upgrade,\n\n86\n00:04:24.970 --> 00:04:28.070\nat a minimum I'll see this\ntext change right here.\n\n87\n00:04:28.070 --> 00:04:29.720\nAgain, amazing.\n\n88\n00:04:29.720 --> 00:04:33.430\nBut we can also see it in the files on a\nvirtual machine and now I think about it.\n\n89\n00:04:33.430 --> 00:04:35.700\nWe never really looked to those file,\ndid we?\n\n90\n00:04:35.700 --> 00:04:39.420\nWhen you create a virtual machine, it ask\nyou what data store to placed in, right?\n\n91\n00:04:39.420 --> 00:04:42.820\nSo like when I created this virtual\nmachine, this Web01, it asks for\n\n92\n00:04:42.820 --> 00:04:46.720\na data store for to in, and put it there.\n\n93\n00:04:46.720 --> 00:04:48.740\nIf I edit my settings and\ntake a look at it,\n\n94\n00:04:48.740 --> 00:04:51.150\nI should be able to,\nTurn it up in here somewhere.\n\n95\n00:04:51.150 --> 00:04:56.860\nAnd data store is buried in here,\nwell shoot.\n\n96\n00:04:56.860 --> 00:04:59.800\nSomewhere in here tells you the data\nstore that we put it in and\n\n97\n00:04:59.800 --> 00:05:02.380\nit is,\nwell I know what data store it's in.\n\n98\n00:05:02.380 --> 00:05:04.700\nWe can go to related objects and\nwe'll see it there.\n\n99\n00:05:04.700 --> 00:05:07.850\nSo it's going to be punched into\na data store and here we go.\n\n100\n00:05:07.850 --> 00:05:09.310\nYou see I'm tied to two data stores,\n\n101\n00:05:09.310 --> 00:05:13.400\nthe ISO data store where I'm actually\ngetting my CD image for the install.\n\n102\n00:05:13.400 --> 00:05:16.890\nAnd the shared datastore which is\nwhere I put my virtual machine files.\n\n103\n00:05:16.890 --> 00:05:22.480\nAnd if you browse through that datastore,\ninside that datastore you can go to Manage\n\n104\n00:05:22.480 --> 00:05:25.640\nand Files and\nyou can see what's in the datastore.\n\n105\n00:05:25.640 --> 00:05:26.675\nAnd so I'm looking at that shared.\n\n106\n00:05:26.675 --> 00:05:30.870\nShared-datastore and I see a couple\nof folders, WEB01, WEB02, DB01.\n\n107\n00:05:30.870 --> 00:05:35.550\nWell actually, I have WEB01,\nI have DB01, I don't have a WEB02,\n\n108\n00:05:35.550 --> 00:05:37.550\nthat one got left behind.\n\n109\n00:05:37.550 --> 00:05:40.910\nSometimes files get left\nbehind in the datastore and.\n\n110\n00:05:40.910 --> 00:05:43.960\nThat's one reason why you might need to\ncome in here and clean it up a bit, right.\n\n111\n00:05:43.960 --> 00:05:45.030\nI don't have a WEB02 anymore so\n\n112\n00:05:45.030 --> 00:05:47.500\nI should probably get rid of that and\nI don't need it.\n\n113\n00:05:47.500 --> 00:05:50.050\nBut actually let's use WEB02\nas an example real quick.\n\n114\n00:05:50.050 --> 00:05:54.300\nWhen I look at WEB02 there's just\na couple of files that are in it, right?\n\n115\n00:05:54.300 --> 00:05:59.040\nI see wWEB02.vmx, WEBb02.vmdk and\nWEB02.vmsd, right?\n\n116\n00:05:59.040 --> 00:06:02.510\nSo, it's just a handful of files.\n\n117\n00:06:02.510 --> 00:06:06.260\nThese files are what actually\nmakes up that virtual machine.\n\n118\n00:06:06.260 --> 00:06:09.070\nAnd I never really use this virtual\nmachine, so there's not much here.\n\n119\n00:06:09.070 --> 00:06:13.640\nIf I take a look at WEB01,\nI see a lot more files in it.\n\n120\n00:06:13.640 --> 00:06:16.990\nOkay, and\nI may even see more files than this,\n\n121\n00:06:16.990 --> 00:06:20.590\ndepending on what I've done with\nthat machine and how I've used it.\n\n122\n00:06:20.590 --> 00:06:23.640\nSo you may see tons of files in here, but\n\n123\n00:06:23.640 --> 00:06:29.040\nthe two most important ones\nare the vmx files and the VMDK files.\n\n124\n00:06:29.040 --> 00:06:31.190\nThose are the two most important ones.\n\n125\n00:06:31.190 --> 00:06:34.990\nThat's because they actually hold the\ninformation about your virtual machine.\n\n126\n00:06:34.990 --> 00:06:39.090\nThe VMX file,\nthat is the virtual machine configuration.\n\n127\n00:06:39.090 --> 00:06:42.290\nSo when we ran through that create\na virtual machine wizard, and\n\n128\n00:06:42.290 --> 00:06:47.490\nwe told it, I want 500 megs of memory,\nor 10 gigs of memory, or however much.\n\n129\n00:06:47.490 --> 00:06:50.800\nI want these CPUs,\nI wanna add these virtual disks,\n\n130\n00:06:50.800 --> 00:06:53.190\nI want the network to be\nplugged in to this port group.\n\n131\n00:06:53.190 --> 00:06:54.810\nWe made all those choices.\n\n132\n00:06:54.810 --> 00:06:57.720\nThat was all being stored\nright here in the vmx file.\n\n133\n00:06:58.810 --> 00:07:02.720\nAnd then when we created that virtual hard\ndrive to install our operating system on,\n\n134\n00:07:02.720 --> 00:07:05.760\nthat's the VMDK,\nthat's a virtual machine disk, right?\n\n135\n00:07:05.760 --> 00:07:07.630\nSo that's the virtual machine hard drive.\n\n136\n00:07:07.630 --> 00:07:11.610\nAnd I give this one an 8 gig disk,\nand I can see this is an 8 gig file.\n\n137\n00:07:11.610 --> 00:07:12.670\nI didn't thin provision it.\n\n138\n00:07:12.670 --> 00:07:13.460\nI thick provisioned it.\n\n139\n00:07:13.460 --> 00:07:17.660\nSo I told it to make an 8 gig drive,\nit laid out an 8 gig drive, and it did it.\n\n140\n00:07:17.660 --> 00:07:20.260\nOn the database server,\nI did something bigger, right?\n\n141\n00:07:20.260 --> 00:07:21.600\nWe had more than one disk.\n\n142\n00:07:21.600 --> 00:07:26.100\nAnd so when I look here I've got\nDB01.vmdk that's eight gigs.\n\n143\n00:07:26.100 --> 00:07:32.370\nAnd then I've got DB01_1.vmdk,\nthat's the second drive that's 100 gigs.\n\n144\n00:07:32.370 --> 00:07:34.310\nIt made a bigger drive for\nthat second drive.\n\n145\n00:07:34.310 --> 00:07:36.460\nSo I can see those files right there.\n\n146\n00:07:36.460 --> 00:07:40.500\nNow notice how DB01 has four files in it.\n\n147\n00:07:40.500 --> 00:07:43.270\nAnd Web01 has like 10.\n\n148\n00:07:43.270 --> 00:07:46.190\nWell that's because Web01 is powered on.\n\n149\n00:07:46.190 --> 00:07:50.170\nWhen you power on the virtual machine,\nmore files get created.\n\n150\n00:07:50.170 --> 00:07:53.605\nWhen you power it on,\nit reads this VMX file and\n\n151\n00:07:53.605 --> 00:07:57.355\nthen it reads the hard drive and\nstarts to boot the operating system.\n\n152\n00:07:57.355 --> 00:07:58.735\nIt starts to create more.\n\n153\n00:07:58.735 --> 00:08:00.316\nSo what are these other files?\n\n154\n00:08:00.316 --> 00:08:01.695\nWell, some are important, some aren't.\n\n155\n00:08:01.695 --> 00:08:03.890\nSome are just transient\nfiles that come and go.\n\n156\n00:08:03.890 --> 00:08:08.783\nSo for example, this lck file, the lck\nfile tells the system that you cannot\n\n157\n00:08:08.783 --> 00:08:12.460\nedit the virtual machine\nconfiguration right now.\n\n158\n00:08:12.460 --> 00:08:13.740\nThe machine's powered on.\n\n159\n00:08:13.740 --> 00:08:17.980\nIf the VM is powered on,\nyou can't edit the config.\n\n160\n00:08:17.980 --> 00:08:20.250\nIf the machine is powered off, you can.\n\n161\n00:08:20.250 --> 00:08:25.300\nSo if I take WEB01 and I'm gonna go\nback to my virtual machines here.\n\n162\n00:08:25.300 --> 00:08:29.560\nAnd take WEB01, and\ngo to Manage > Settings, and try and\n\n163\n00:08:29.560 --> 00:08:31.020\nmake changes in here.\n\n164\n00:08:31.020 --> 00:08:33.540\nWell this machine is powered on right now,\nso\n\n165\n00:08:33.540 --> 00:08:35.210\nif I try to make changes\nit's not gonna work.\n\n166\n00:08:35.210 --> 00:08:38.680\nAnd see how CPU is grayed out and\nMemory is grayed out.\n\n167\n00:08:38.680 --> 00:08:41.209\nI can't change those,\nit won't let me do them on the fly.\n\n168\n00:08:41.209 --> 00:08:45.500\nCan you add CPUs, or take away CPUs\nfrom a machine while it's powered on?\n\n169\n00:08:45.500 --> 00:08:46.948\nNot most of them.\n\n170\n00:08:46.948 --> 00:08:52.200\nSo a lot of options will be grayed out,\nbut if I take DB01, DB01 is powered off.\n\n171\n00:08:52.200 --> 00:08:57.122\nAnd so if I take it, and I go to edit\nits settings, I can adjust the CPU,\n\n172\n00:08:57.122 --> 00:09:00.640\nI can adjust the Memory\ncuz it's not powerhouse.\n\n173\n00:09:00.640 --> 00:09:03.770\nThat's what that locked file does, it\njust shows the machine it is powered on.\n\n174\n00:09:05.570 --> 00:09:09.730\nThen if we look at some of the other\nfiles that are created in there,\n\n175\n00:09:09.730 --> 00:09:12.570\nif I get to the right folder again,\nyou'll see things like nvram.\n\n176\n00:09:13.730 --> 00:09:14.426\nWhat is nvram?\n\n177\n00:09:14.426 --> 00:09:21.020\nWell it's non-volatile ram, in a normal\ncomputer you have BIOS or UEFI BIOS.\n\n178\n00:09:21.020 --> 00:09:23.360\nAnd all the setting to\nthe hardware are there.\n\n179\n00:09:23.360 --> 00:09:26.690\nThe setting like when you boot up\nwhat's your first boot device?\n\n180\n00:09:26.690 --> 00:09:30.450\nDo you boot to the CD drive first or\ndo you boot to the harddrive first.\n\n181\n00:09:30.450 --> 00:09:33.210\nWhen you boot up,\nhow much memory do you have?\n\n182\n00:09:33.210 --> 00:09:36.042\nThat kid of stuff is stored in\nthe BIOS of your computer and\n\n183\n00:09:36.042 --> 00:09:38.462\nthis is the virtual BIOS right here,\nthe nvram.\n\n184\n00:09:38.462 --> 00:09:41.625\nThat's where those settings are stored,\nso it's pretty important.\n\n185\n00:09:41.625 --> 00:09:44.470\n>> Don, with that VMX file there, and\n\n186\n00:09:44.470 --> 00:09:47.810\nI guess this would be a couple\nof questions all in one.\n\n187\n00:09:47.810 --> 00:09:52.100\nCan we directly edit those files and if\nwe can, should we be editing those files?\n\n188\n00:09:52.100 --> 00:09:54.600\n>> You can, you certainly can,\nthey're just text files.\n\n189\n00:09:54.600 --> 00:09:56.096\nThe VMX files are just text, and\n\n190\n00:09:56.096 --> 00:09:59.207\nit's got the hardware settings of\nthat virtual machine in there.\n\n191\n00:09:59.207 --> 00:10:04.135\nThis machine is on right now, so if I were\nto edit it that would probably be bad.\n\n192\n00:10:04.135 --> 00:10:06.977\nSo you don't generally want to do it\nwhile the machine is powered on, but\n\n193\n00:10:06.977 --> 00:10:09.129\nif you shut the machine down\nyou can edit that VMX file.\n\n194\n00:10:09.129 --> 00:10:12.507\nYou want it to be shut down anyway\nbecause the VMX file is only read when\n\n195\n00:10:12.507 --> 00:10:14.010\nyou boot up.\n\n196\n00:10:14.010 --> 00:10:16.883\nSo if I were to edit it while it's on,\nit's gonna ignore the settings and\n\n197\n00:10:16.883 --> 00:10:19.723\nwhen it shuts down it'll probably\nundo them and I'll lose my changes.\n\n198\n00:10:19.723 --> 00:10:23.015\n>> We've also seen where you drop\nback to the command line many times,\n\n199\n00:10:23.015 --> 00:10:25.640\nbecause the GUI might be\nlimited in what you can do.\n\n200\n00:10:25.640 --> 00:10:29.560\nSo is there a situation where you\nmight wanna modify those VMX files\n\n201\n00:10:29.560 --> 00:10:32.508\nversus what's in\nthe graphical user interface?\n\n202\n00:10:32.508 --> 00:10:33.700\n>> Yeah, there are.\n\n203\n00:10:33.700 --> 00:10:36.752\nLet me see if I get one of those VMX\nfiles open for us here real quick.\n\n204\n00:10:36.752 --> 00:10:42.040\nI'll pull up like DB01s, and let me\njust get that into like a text editor.\n\n205\n00:10:43.110 --> 00:10:45.621\nI'm sure I've got something that\ncan open that up nice and easy.\n\n206\n00:10:45.621 --> 00:10:46.730\nWhere's good old sublime text.\n\n207\n00:10:46.730 --> 00:10:51.517\nSo it really just is a text file,\nand it is, it's actually XML.\n\n208\n00:10:51.517 --> 00:10:56.225\nSo it's written in a format that almost\nlooks easy to read and I said it's XML,\n\n209\n00:10:56.225 --> 00:10:57.020\nit's not.\n\n210\n00:10:57.020 --> 00:10:59.627\nIt's just a straight up key value.\n\n211\n00:10:59.627 --> 00:11:01.983\nSo you got a key on left,\nequals and a value on the right, so\n\n212\n00:11:01.983 --> 00:11:05.170\nit's not structured XML,\nI think something different apparently.\n\n213\n00:11:05.170 --> 00:11:07.950\nBut the way it works when\nyou crack it open is,\n\n214\n00:11:07.950 --> 00:11:12.870\nyou'll have a setting here on the left and\nthen it's defined to a value on the right.\n\n215\n00:11:12.870 --> 00:11:14.860\nSo for example, the nvram for\n\n216\n00:11:14.860 --> 00:11:19.150\nthis virtual machine is stored\nin the file called DB01.nvram.\n\n217\n00:11:19.150 --> 00:11:23.940\nSo when it reads the VMX file and it says\nhey, I need to read the BIOS settings for\n\n218\n00:11:23.940 --> 00:11:26.300\nit, here's the file I need to go and\nget that.\n\n219\n00:11:26.300 --> 00:11:29.692\nSo sometimes it's like that,\nnow this setting is not in the GUI.\n\n220\n00:11:29.692 --> 00:11:33.642\nIn the GUI, I can't change the name\nof where the NVRAM is stored.\n\n221\n00:11:33.642 --> 00:11:36.846\nBut I could change it here, I can't think\nof a real world example where I would want\n\n222\n00:11:36.846 --> 00:11:38.520\nto do that, but it's possible.\n\n223\n00:11:38.520 --> 00:11:40.242\n>> You mentioned upgrading the version,\n\n224\n00:11:40.242 --> 00:11:42.600\nI'm gonna take a stab at this\none at line three there.\n\n225\n00:11:42.600 --> 00:11:43.192\nDoes that tell you-\n>> [LAUGH]\n\n226\n00:11:43.192 --> 00:11:44.367\n>> What the current version is of\n\n227\n00:11:44.367 --> 00:11:44.982\nthe hardware?\n\n228\n00:11:44.982 --> 00:11:45.928\n>> That is exactly it.\n\n229\n00:11:45.928 --> 00:11:49.019\nNow, so\nit does say virtualHW.version = \"10\".\n\n230\n00:11:49.019 --> 00:11:51.270\nSo we are on version 10 versus version 11.\n\n231\n00:11:51.270 --> 00:11:54.340\nSo here's another place where I can\nverify that we had actually upgraded if\n\n232\n00:11:54.340 --> 00:11:55.080\nwe upgraded.\n\n233\n00:11:55.080 --> 00:11:58.040\nBut there's more to it though, cuz if you\nscroll down you'll start to see where it\n\n234\n00:11:58.040 --> 00:12:00.960\ndefines a lot of things,\nthese virtual devices.\n\n235\n00:12:00.960 --> 00:12:04.363\nAnd the virtual devices in version 10\nare defined a little different than in\n\n236\n00:12:04.363 --> 00:12:05.053\nversion 11.\n\n237\n00:12:05.053 --> 00:12:09.050\nAnd so that can make a difference down\nhere too, there might be other changes.\n\n238\n00:12:09.050 --> 00:12:11.880\nFor example,\nwe might have SATA controllers.\n\n239\n00:12:11.880 --> 00:12:15.690\nSATA controllers that were only supported\nstarting with I think it was version 9.\n\n240\n00:12:15.690 --> 00:12:19.850\nAnd if you had earlier than version 9,\nyou'd have to have SCSI.\n\n241\n00:12:19.850 --> 00:12:21.341\nSo if you upgraded from nine to ten,\n\n242\n00:12:21.341 --> 00:12:24.196\nit might add SATA configurations\nin here you didn't have already.\n\n243\n00:12:24.196 --> 00:12:28.378\nI'm trying to think of an example of\nsomething that I've messed with in here.\n\n244\n00:12:28.378 --> 00:12:30.663\nThere's an option that doesn't show up.\n\n245\n00:12:30.663 --> 00:12:33.693\nSo like these ethernet devices,\nsee how it says ethernet0, and\n\n246\n00:12:33.693 --> 00:12:36.730\nthen it gives it a network name and\nall that stuff.\n\n247\n00:12:36.730 --> 00:12:38.440\nThe adapter that it emulates,\n\n248\n00:12:38.440 --> 00:12:41.673\nis basically creating one that\nuses a particular driver.\n\n249\n00:12:41.673 --> 00:12:45.110\nAnd I have had times where I had\nsoftware that didn't recognize that.\n\n250\n00:12:45.110 --> 00:12:47.448\nAnd so I ended up coming in here and\nadding extra line.\n\n251\n00:12:47.448 --> 00:12:53.299\nThere's a secret option that you can put\nin that says, emulated Intel E 1000 or\n\n252\n00:12:53.299 --> 00:12:58.148\none of those old net 1000 adaptors\nthat Novell loves so much, and\n\n253\n00:12:58.148 --> 00:13:00.505\nyou can put one of those in there.\n\n254\n00:13:00.505 --> 00:13:02.935\nYou don't normally wanna do that,\ncuz you get worse performance.\n\n255\n00:13:02.935 --> 00:13:06.667\nYou get better performance using\nthe native drives that it uses in VMware.\n\n256\n00:13:06.667 --> 00:13:10.049\nBut those are options that you may have\nto come in here and manually change,\n\n257\n00:13:10.049 --> 00:13:12.560\ncuz they don't give you\na GUI option to do it.\n\n258\n00:13:12.560 --> 00:13:15.734\nBut if you continue looking down here\nyou'll just see everything defined like\n\n259\n00:13:15.734 --> 00:13:16.611\nhow the cd is mapped.\n\n260\n00:13:16.611 --> 00:13:17.710\nHere's the virtual disk,\n\n261\n00:13:17.710 --> 00:13:20.635\nthis is the second virtual disk the first\none would be in here somewhere.\n\n262\n00:13:20.635 --> 00:13:22.760\nSo it's telling me where\nto go to find that.\n\n263\n00:13:22.760 --> 00:13:25.160\nThese are all things that\nare stored inside of it and\n\n264\n00:13:25.160 --> 00:13:28.490\nyou can see when I set this up,\nhere's the guestOS that I picked.\n\n265\n00:13:28.490 --> 00:13:32.505\nI told that I was gonna be running 64-bit\ncentos, and that's how it was setup.\n\n266\n00:13:32.505 --> 00:13:34.591\nThat's something that I can't\nchange in the GUI either.\n\n267\n00:13:34.591 --> 00:13:36.760\nIt's easier to just make\na new virtual machines.\n\n268\n00:13:36.760 --> 00:13:40.270\nSo that's what these VMX files are and\nthey are pretty important,\n\n269\n00:13:40.270 --> 00:13:44.870\nbecause they are the defining exactly\nhow that virtual machine works.\n\n270\n00:13:44.870 --> 00:13:48.930\nSome of the other ones like\nthe VMSD is our snapshot database.\n\n271\n00:13:48.930 --> 00:13:51.060\nIf I had taken snapshots\nof my virtual machine,\n\n272\n00:13:51.060 --> 00:13:52.840\nand we haven't really\ntalked about snapshots yet.\n\n273\n00:13:52.840 --> 00:13:55.790\nWe will talk about them when\nwe get to backups and restore.\n\n274\n00:13:55.790 --> 00:13:59.340\nBut a snapshot will start to create\nmultiple virtual hard drives and\n\n275\n00:13:59.340 --> 00:14:01.040\nthis database keeps tracking them.\n\n276\n00:14:01.040 --> 00:14:03.540\nI don't have any right now so\nI've got a 0k file.\n\n277\n00:14:03.540 --> 00:14:04.713\nIt's basically an empty file.\n\n278\n00:14:04.713 --> 00:14:05.535\n>> Whoops.\n\n279\n00:14:05.535 --> 00:14:09.506\n>> [LAUGH] And then we've got our logged\nfile which is all the events that occurred\n\n280\n00:14:09.506 --> 00:14:12.710\naround this virtual machine\nall stored right in here.\n\n281\n00:14:12.710 --> 00:14:14.700\n>> Don,\nwhen you start take additional snapshots,\n\n282\n00:14:14.700 --> 00:14:16.600\nwill you see not only that database?\n\n283\n00:14:16.600 --> 00:14:19.210\nWill you see additional files as\nyou take different snapshots or\n\n284\n00:14:19.210 --> 00:14:21.380\nis that information just\nstored in that database file?\n\n285\n00:14:21.380 --> 00:14:23.090\n>> No, no, it's all separate files here.\n\n286\n00:14:23.090 --> 00:14:25.809\nYou'll end up with multiple\nhard drives files.\n\n287\n00:14:25.809 --> 00:14:29.209\nSo like I've got WEB01.vmdk,\nthere'll be a snapshot file for\n\n288\n00:14:29.209 --> 00:14:31.040\nthat hard drive that gets created.\n\n289\n00:14:31.040 --> 00:14:33.910\nSame thing with the second I've\nonly one hard drive in this server.\n\n290\n00:14:33.910 --> 00:14:36.560\nSo if I had any other\ndrivers then we get it to,\n\n291\n00:14:36.560 --> 00:14:41.200\nas well as if the snapshot was\ntaken while the machine was on.\n\n292\n00:14:41.200 --> 00:14:44.641\nThere'd be a copy of what was\nin RAMs stored to a file too.\n\n293\n00:14:44.641 --> 00:14:47.624\nIf the snapshot was taken while it\nwas off, there's nothing in RAM so\n\n294\n00:14:47.624 --> 00:14:51.080\nthat doesn't happen, but that's basically\nthe process of what would occur.\n\n295\n00:14:51.080 --> 00:14:54.084\nI guess I could take a snapshot\nreal quick just to do it.\n\n296\n00:14:54.084 --> 00:14:58.479\nI should be set up for that, actually I\nwas looking at web01, so let me do web01.\n\n297\n00:14:58.479 --> 00:15:00.875\nSo I'm gonna take a quick\nsnapshot of it and\n\n298\n00:15:00.875 --> 00:15:06.020\nwe'll cover snapshots again later on in\nthe series, but I'm just gonna take one.\n\n299\n00:15:06.020 --> 00:15:08.822\nAnd I'm snapshotting web01\nwhich is powered on.\n\n300\n00:15:08.822 --> 00:15:12.580\nAnd so I've got this option down here,\nSnapshot the virtual machine's memory and\n\n301\n00:15:12.580 --> 00:15:14.630\nthat's normally what you want.\n\n302\n00:15:14.630 --> 00:15:19.995\nSo I'm gonna go ahead and do that and so\nnow it's gonna grab a snapshot real quick.\n\n303\n00:15:19.995 --> 00:15:23.185\nIt shouldn't take very long,\nthe machine's only got 500 megs in memory.\n\n304\n00:15:23.185 --> 00:15:23.945\nThe more memory you have,\n\n305\n00:15:23.945 --> 00:15:27.545\nthe longer it takes to make a snapshot so\nthat should almost be done.\n\n306\n00:15:27.545 --> 00:15:31.355\nAnd when it's done, we'll see those actual\nsnapshot files get created, there we go.\n\n307\n00:15:31.355 --> 00:15:34.755\nSo now if we jump back\nover to my data store and\n\n308\n00:15:34.755 --> 00:15:37.215\ntake a look at my files,\ndrop me, need to do a refresh.\n\n309\n00:15:37.215 --> 00:15:43.900\nWe'll do that real quick, and there we go.\n\n310\n00:15:43.900 --> 00:15:49.040\nAnd what we should see,\nif this ever refreshes for me.\n\n311\n00:15:51.040 --> 00:15:52.165\nIt's not refreshing, great.\n\n312\n00:15:52.165 --> 00:15:54.099\n[LAUGH] If I can get my screen to refresh,\n\n313\n00:15:54.099 --> 00:15:56.457\nthen what we'll see is\nthese new files up here.\n\n314\n00:15:56.457 --> 00:15:59.025\nAnd actually, I can probably just\nbrowse to it on the hard drive or\n\n315\n00:15:59.025 --> 00:15:59.878\nsomething instead.\n\n316\n00:15:59.878 --> 00:16:03.411\nBut we'll start to see those\nsnapshots appear inside of there.\n\n317\n00:16:03.411 --> 00:16:11.218\nAnd so those files, Will end up like so\n\n318\n00:16:11.218 --> 00:16:16.196\nmuch easier to see this in the web UI\nat the screen updates, there we go.\n\n319\n00:16:16.196 --> 00:16:21.709\nSo see how I have got [LAUGH] WEB01.vmdk,\n\n320\n00:16:21.709 --> 00:16:25.270\nthere is the hardrive.\n\n321\n00:16:25.270 --> 00:16:30.708\nBut now I've also got\nWEBO1-Snapshot1.vmsn and\n\n322\n00:16:30.708 --> 00:16:34.040\nvmem, so there's the memory.\n\n323\n00:16:34.040 --> 00:16:41.660\nWhat was in RAM captured to disk and\nup here I've got WEBO1-000001.vmdk,\n\n324\n00:16:41.660 --> 00:16:45.642\na new virtual disk and\na delta virtual disk.\n\n325\n00:16:45.642 --> 00:16:48.162\nThat's the snapshot files that\nwe created around that disk.\n\n326\n00:16:48.162 --> 00:16:52.752\nSo we start to see a lot more stuff\nappear based on what's going on with that\n\n327\n00:16:52.752 --> 00:16:55.560\nmachine and what it's being used for.\n\n328\n00:16:55.560 --> 00:16:59.309\nSo those are all now appearing\nbecause of that snapshot and\n\n329\n00:16:59.309 --> 00:17:02.903\nif we take a look at the file\nsize as a sum of these things,\n\n330\n00:17:02.903 --> 00:17:07.519\nmy snapshot database that was 0k\na few minutes ago is now 392 bytes.\n\n331\n00:17:07.519 --> 00:17:10.111\nNow it's got data in it,\nthe snapshot database is populated.\n\n332\n00:17:10.111 --> 00:17:12.620\nAnd when I look at things\nlike that memory file,\n\n333\n00:17:12.620 --> 00:17:16.909\nI have 500 megs of memory on this server,\nand that memory file is 536 megs.\n\n334\n00:17:16.909 --> 00:17:20.585\nThat's the snapshot of everything that\nwas in RAM at the time that snapshot was\n\n335\n00:17:20.585 --> 00:17:22.540\ntaken, and kind of plopped on top there.\n\n336\n00:17:22.540 --> 00:17:25.000\nSo that's the way that\nthose snapshots work and\n\n337\n00:17:25.000 --> 00:17:28.100\nagain we'll see them later, but those\nare just additional files that you'll see\n\n338\n00:17:28.100 --> 00:17:29.520\nwhen messing with the virtual machine.\n\n339\n00:17:29.520 --> 00:17:32.130\nAnd you don't normally want to mes with\nthose, you just wanna leave them be,\n\n340\n00:17:32.130 --> 00:17:33.260\ndon't tink with them.\n\n341\n00:17:33.260 --> 00:17:36.140\nYou might edit the VMX\nfile from time to time but\n\n342\n00:17:36.140 --> 00:17:38.770\notherwise I usually just come\nhere to check on the sizes.\n\n343\n00:17:38.770 --> 00:17:41.979\nIf you thin provision a disc,\nthis is quick easy way to come and\n\n344\n00:17:41.979 --> 00:17:44.279\nsee how big data disc\nhas grown to over time.\n\n345\n00:17:44.279 --> 00:17:48.252\nNow the whole point of this as I realize\nwe're over halfway through the show now,\n\n346\n00:17:48.252 --> 00:17:51.993\nis I wanted to upgrade the stinking\nhardware level of this virtual machine,\n\n347\n00:17:51.993 --> 00:17:53.700\nand I just still haven't done it.\n\n348\n00:17:53.700 --> 00:17:55.890\nSo let's do that so DB01,\n\n349\n00:17:55.890 --> 00:18:00.070\nthis virtual machine right here,\nis at hardware level 10.\n\n350\n00:18:00.070 --> 00:18:02.378\nSo I can see VM version 10,\nI wanna bump it up to hardware version 11.\n\n351\n00:18:02.378 --> 00:18:05.500\nSo I'm just gonna right-click\non that virtual machine.\n\n352\n00:18:05.500 --> 00:18:09.470\nIn the options we kind of\nscan down the list here.\n\n353\n00:18:09.470 --> 00:18:10.630\nWe'll find where we can go and\n\n354\n00:18:10.630 --> 00:18:15.550\nwe can upgrade that virtual machine\nto move it up to the next version.\n\n355\n00:18:16.800 --> 00:18:22.350\nIf I come down here to compatibility, and\nlook I've got Upgrade VM Compatibility.\n\n356\n00:18:22.350 --> 00:18:24.596\nYou've also got Schedule VM Compatibility.\n\n357\n00:18:24.596 --> 00:18:26.340\nNow why would I want to do that?\n\n358\n00:18:26.340 --> 00:18:28.080\nIt's gonna reboot my virtual machine.\n\n359\n00:18:28.080 --> 00:18:29.660\nI may not want it to reboot right now, so\n\n360\n00:18:29.660 --> 00:18:32.520\nI could schedule it to occur\nin the middle of the night.\n\n361\n00:18:32.520 --> 00:18:35.685\nNow there's problems that can happen\nwith an upgrade like this and\n\n362\n00:18:35.685 --> 00:18:37.220\nI probably wanna be aware of it.\n\n363\n00:18:37.220 --> 00:18:38.591\nSo I don't usually like to\nschedule it if I can avoid it.\n\n364\n00:18:38.591 --> 00:18:41.867\nI like to be involved, but\nif you're doing tons of machines,\n\n365\n00:18:41.867 --> 00:18:43.560\nyou can test it out on one.\n\n366\n00:18:43.560 --> 00:18:46.530\nMake sure it works, and\nthen schedule it on all the other ones and\n\n367\n00:18:46.530 --> 00:18:48.682\nroll it all out without\nyou having to be there.\n\n368\n00:18:48.682 --> 00:18:51.350\nI'm here though, so\nwe'll just do Upgrade Compatibility.\n\n369\n00:18:51.350 --> 00:18:54.180\nAnd it's warning me that I'm about to\nmake a change that might make this\n\n370\n00:18:54.180 --> 00:18:56.800\nvirtual machine not compatible\nwith certain hosts.\n\n371\n00:18:56.800 --> 00:19:02.860\nIf I have cluster that has some ESXi\n6 boxes and som ESXi 5 boxes, and\n\n372\n00:19:02.860 --> 00:19:06.910\nI go to hardware version 11, this guest\nwill only be able to run on the six boxes.\n\n373\n00:19:06.910 --> 00:19:09.940\nIt won't be able to run on the five,\nfive boxes anymore, I'm okay with that.\n\n374\n00:19:11.060 --> 00:19:12.954\nNow we can pick the hardware version.\n\n375\n00:19:12.954 --> 00:19:14.670\nNow you can only pick\nnewer hardware versions.\n\n376\n00:19:14.670 --> 00:19:18.781\nSo I don't see the old ones,\nand I'm already at version 10,\n\n377\n00:19:18.781 --> 00:19:20.576\nthe only newer one is 11.\n\n378\n00:19:20.576 --> 00:19:26.733\nSo that's all that I get, I'll chose that\nand I'll say OK, and that is how it goes.\n\n379\n00:19:26.733 --> 00:19:29.141\nAnd you'll see that it's already done,\nit already finished.\n\n380\n00:19:29.141 --> 00:19:32.645\nAnd in some cases where there's\na significant hardware change,\n\n381\n00:19:32.645 --> 00:19:35.250\nyou have to reboot the virtual machine.\n\n382\n00:19:35.250 --> 00:19:39.901\nThis was a minor change and\nsince it was minor, it didn't even reboot.\n\n383\n00:19:39.901 --> 00:19:42.690\nBut there are some changes that won't\ntake affect until reboot happens.\n\n384\n00:19:42.690 --> 00:19:46.250\nSo for example, I can't add 4\nterabytes of memory to this right now.\n\n385\n00:19:46.250 --> 00:19:48.350\nI'm still held to 1\nterabyte until I reboot it,\n\n386\n00:19:48.350 --> 00:19:50.810\nbecause it's then gonna\nreload that VMX file.\n\n387\n00:19:50.810 --> 00:19:55.008\nBut the VMX file is gonna get updated,\nit should already be updated.\n\n388\n00:19:55.008 --> 00:20:01.408\nAnd let's see here if I\ncan reopen this file.\n\n389\n00:20:01.408 --> 00:20:06.273\nActually here,\nlet me just browse back to it.\n\n390\n00:20:06.273 --> 00:20:11.040\n[LAUGH] I can figure virtual\nmachines like crazy, but\n\n391\n00:20:11.040 --> 00:20:17.659\nthen when it comes to browsing my own\nhard drive, this is the file I want.\n\n392\n00:20:17.659 --> 00:20:19.228\nThat's not what I wanted, great.\n\n393\n00:20:19.228 --> 00:20:23.340\nThis is gonna be my complex task\nof the day, just editing a file.\n\n394\n00:20:23.340 --> 00:20:24.530\nWe'll just open it in text edit here.\n\n395\n00:20:24.530 --> 00:20:28.430\nSo now when I go and open it, I can see\nright there at the top of that file,\n\n396\n00:20:28.430 --> 00:20:30.522\nvirtual.HW.version = \"11\".\n\n397\n00:20:30.522 --> 00:20:33.986\nSo it's been bumped up to\nthat new hardware version and\n\n398\n00:20:33.986 --> 00:20:35.806\nwe can see that in the UI too.\n\n399\n00:20:35.806 --> 00:20:38.370\nWhen I look at db01,\nit now shows that new hardware version.\n\n400\n00:20:38.370 --> 00:20:41.270\nSo not spectacular, but\nthat gets it upgraded.\n\n401\n00:20:41.270 --> 00:20:44.650\n>> In this upgrades Don, where you\nmight have some older hosts would that\n\n402\n00:20:44.650 --> 00:20:47.560\npotentially affect something like\nVMotion if you've got that set up or\n\n403\n00:20:47.560 --> 00:20:51.190\nyou're doing a live migration maybe\nbetween an older host or something?\n\n404\n00:20:51.190 --> 00:20:53.450\nWould you have to worry about\nthat like compatibility with live\n\n405\n00:20:53.450 --> 00:20:54.170\nmigration and stuff?\n\n406\n00:20:54.170 --> 00:20:55.690\n>> Absolutely, yeah.\n\n407\n00:20:55.690 --> 00:20:57.870\nAnd in theory, if you got a cluster setup,\n\n408\n00:20:57.870 --> 00:21:00.840\nyou really do wanna keep all your\nhosts all at the same version anyway.\n\n409\n00:21:00.840 --> 00:21:02.510\nSo as long as your hosts are all\nat the same version you're\n\n410\n00:21:02.510 --> 00:21:03.170\nnot gonna have a problem.\n\n411\n00:21:03.170 --> 00:21:06.400\nBut if you've got mixed version of hosts,\nwhen you upgrade your\n\n412\n00:21:06.400 --> 00:21:09.370\nguest's hardware level you're\nrestricting where it can migrate to.\n\n413\n00:21:09.370 --> 00:21:12.440\nSo if I've only got one ESXi 6 box,\n\n414\n00:21:12.440 --> 00:21:17.840\nand I just bump this VM up to hardware\nversion 11, I just killed VMotion.\n\n415\n00:21:17.840 --> 00:21:21.124\nI can't move to any of those other older\nboxes, this is until I upgrade them to.\n\n416\n00:21:21.124 --> 00:21:26.189\nAnd that's why VMware always says this,\nwhen you do upgrades, you always want\n\n417\n00:21:26.189 --> 00:21:31.268\nto upgrade, you upgrade vCenter first,\nthat's the first thing you upgrade.\n\n418\n00:21:31.268 --> 00:21:34.535\nThen you upgrade all of your ESXi boxes,\nyou get them upgraded.\n\n419\n00:21:34.535 --> 00:21:35.950\nAnd then this is kind of a last step,\n\n420\n00:21:35.950 --> 00:21:37.940\nupgrading the hardware\nof our virtual machines.\n\n421\n00:21:37.940 --> 00:21:40.488\nAnd in fact we might even skip it,\nbecause if there's not a new\n\n422\n00:21:40.488 --> 00:21:43.036\nfeature to introduce with\nthe hardware version that we need,\n\n423\n00:21:43.036 --> 00:21:45.009\nthen there is absolutely\nno benefit to go to it.\n\n424\n00:21:45.009 --> 00:21:47.709\nIt's not like it's a security fix,\nthey're not patching security holes here.\n\n425\n00:21:47.709 --> 00:21:52.480\nThey're not improving performance,\nthey're expanding functionality.\n\n426\n00:21:52.480 --> 00:21:54.854\nAnd if you don't need that\nexpanded functionality,\n\n427\n00:21:54.854 --> 00:21:57.501\ndon't upgrade the hardware version,\nyou don't need to.\n\n428\n00:21:57.501 --> 00:22:00.840\nIt is easy to upgrade, you just saw that.\n\n429\n00:22:00.840 --> 00:22:02.290\nIt's impossible to downgrade.\n\n430\n00:22:02.290 --> 00:22:05.070\nSo if I want to downgrade,\nI either have to have a snapshot cuz\n\n431\n00:22:05.070 --> 00:22:06.890\na snapshot will actually store\nthe old hardware version.\n\n432\n00:22:06.890 --> 00:22:08.630\nSo I can roll back to\nthat snapshot I made, and\n\n433\n00:22:08.630 --> 00:22:10.350\nnow I'm back to the hold\nhardware version or\n\n434\n00:22:10.350 --> 00:22:12.240\nI need to have a back up\nof the virtual machine.\n\n435\n00:22:12.240 --> 00:22:17.236\nIf I don't have those, there's no real\nway that I can downgrade that hardware\n\n436\n00:22:17.236 --> 00:22:19.518\nversion without breaking things.\n\n437\n00:22:19.518 --> 00:22:21.510\nBoy, I spent way longer on\nthat than I intended to.\n\n438\n00:22:21.510 --> 00:22:26.090\nSo let's, [LAUGH] it's good information to\nhave though, definitely something to know.\n\n439\n00:22:26.090 --> 00:22:29.564\nThe other thing that we really didn't\ntouch on in the last episode was when we\n\n440\n00:22:29.564 --> 00:22:30.878\ncreated a virtual machine.\n\n441\n00:22:30.878 --> 00:22:34.320\nOne of the first steps that I\nperform on a new virtual machine.\n\n442\n00:22:34.320 --> 00:22:37.260\nSo you install the OS,\nyou get it up and going.\n\n443\n00:22:37.260 --> 00:22:41.930\nOne of the first things that I like to do\nafter that is to install the VM T ools.\n\n444\n00:22:41.930 --> 00:22:45.147\nThe VM Tools are the VMware\nvirtual machine tools and\n\n445\n00:22:45.147 --> 00:22:47.792\nwhat they are are a collection of drivers.\n\n446\n00:22:47.792 --> 00:22:52.174\nDrivers and utilities that allow the guest\noperating system to participate more\n\n447\n00:22:52.174 --> 00:22:53.278\nfriendly with ESX.\n\n448\n00:22:53.278 --> 00:22:57.140\nA lot of times your guests\ndon't know they're virtualized.\n\n449\n00:22:57.140 --> 00:22:58.760\nThey think they're\nrunning on real hardware.\n\n450\n00:22:58.760 --> 00:23:02.300\nThey have no idea they're running on\ntop of a virtualization platform.\n\n451\n00:23:02.300 --> 00:23:06.858\nAnd if we let them know, then they can\nactually behave a little differently and\n\n452\n00:23:06.858 --> 00:23:08.041\na little more nice.\n\n453\n00:23:08.041 --> 00:23:11.854\nBecause what is a physical,\nif I install an OS directly on hardware,\n\n454\n00:23:11.854 --> 00:23:13.625\nwhat does it assume?\n\n455\n00:23:13.625 --> 00:23:16.425\nIt assumes that is has exclusive\naccess to the hardware, and\n\n456\n00:23:16.425 --> 00:23:17.785\ncan do whatever it wants.\n\n457\n00:23:17.785 --> 00:23:22.285\nIf it wants to lock the soundcard only for\nits use, it can do that.\n\n458\n00:23:22.285 --> 00:23:24.815\nBecause it's the only one that\ncan access that soundcard.\n\n459\n00:23:24.815 --> 00:23:27.575\nBut in a virtual environment,\nyou're not allowed to do that.\n\n460\n00:23:27.575 --> 00:23:29.065\nYou can't lock the soundcard just for\n\n461\n00:23:29.065 --> 00:23:32.420\nyour use, because you're sharing it\nacross these other virtual machines too.\n\n462\n00:23:32.420 --> 00:23:36.830\nSo we need to know to play nice, and\nthe virtual machine tools help to do that.\n\n463\n00:23:36.830 --> 00:23:41.380\nThere's a number of different features in\nthere that are a kind of a part of it.\n\n464\n00:23:41.380 --> 00:23:43.888\nFor example, screen resolution.\n\n465\n00:23:43.888 --> 00:23:47.865\nWhen you fire up a virtual machine,\nit has this very basic video driver, and\n\n466\n00:23:47.865 --> 00:23:50.923\nyou're gonna end up with\nan 800 by 600 resolution.\n\n467\n00:23:50.923 --> 00:23:55.307\nNow I was perfectly happy with 800 by\n600 for years and years and years, so\n\n468\n00:23:55.307 --> 00:23:57.938\nit's not necessarily a bad thing for\na server.\n\n469\n00:23:57.938 --> 00:24:01.597\nBut if it's a desktop, end users,\nthey all have widescreen monitors now,\n\n470\n00:24:01.597 --> 00:24:03.840\nthey all have 16 by 9 or\nhigher resolution.\n\n471\n00:24:03.840 --> 00:24:08.710\n800 by 600 is pretty small, there's\na lot of utilities, the VSphere web\n\n472\n00:24:08.710 --> 00:24:13.380\nclient itself that are a nightmare\nto use and 800 by 600 is too small.\n\n473\n00:24:13.380 --> 00:24:15.330\nSo if we install the VMware tools,\n\n474\n00:24:15.330 --> 00:24:19.000\nit allows the virtual machine\nto see additional video memory.\n\n475\n00:24:19.000 --> 00:24:21.380\nAnd now we can have a 16 by 9 resolution.\n\n476\n00:24:21.380 --> 00:24:23.490\nNow we can have 1280 by 720,\neven 1920 by 1080,\n\n477\n00:24:23.490 --> 00:24:28.270\nif you want the higher resolutions\nthat are used these days.\n\n478\n00:24:28.270 --> 00:24:30.390\nYou can even do multiple monitors.\n\n479\n00:24:30.390 --> 00:24:32.810\nWhy would a virtual machine\never have multiple monitors.\n\n480\n00:24:32.810 --> 00:24:34.810\nShort answer is a wouldn't, right?\n\n481\n00:24:34.810 --> 00:24:35.780\nBut if you're doing VDI,\n\n482\n00:24:35.780 --> 00:24:40.350\nVirtual Desktop, now and end-user might be\non a thin client with two monitors, and\n\n483\n00:24:40.350 --> 00:24:43.000\nthey want their virtual machine to have\ntwo monitors, and so they need that.\n\n484\n00:24:43.000 --> 00:24:45.600\nSo, you can actually have that\nfunctionality if the VM tools were\n\n485\n00:24:45.600 --> 00:24:46.690\ninstalled.\n\n486\n00:24:46.690 --> 00:24:48.430\nSound support,\n\n487\n00:24:48.430 --> 00:24:51.580\nif you want your sound to work at all\nyou've got to have VM tools installed.\n\n488\n00:24:51.580 --> 00:24:53.420\nIts got the drivers for\nthe VM ware sublayer.\n\n489\n00:24:53.420 --> 00:24:56.200\nIf you're just doing servers\nyou don't care about that.\n\n490\n00:24:56.200 --> 00:24:57.350\nI'd, I usually don't.\n\n491\n00:24:57.350 --> 00:25:00.670\nBut if you're doing VDI, you do.\n\n492\n00:25:00.670 --> 00:25:02.540\nQuies snapshot support.\n\n493\n00:25:02.540 --> 00:25:04.377\nWhen you take a snapshot,\n\n494\n00:25:04.377 --> 00:25:08.740\na snapshot is freezing your\nhard drives at a point of time.\n\n495\n00:25:08.740 --> 00:25:10.660\nAt a particular point in time.\n\n496\n00:25:10.660 --> 00:25:15.470\nAnd so when you roll back to that point\nin time, you roll back to that snapshot.\n\n497\n00:25:15.470 --> 00:25:16.230\nIts like a time machine.\n\n498\n00:25:16.230 --> 00:25:16.888\nYou go back in time.\n\n499\n00:25:16.888 --> 00:25:23.030\nWell, what happens if your virtual machine\nis running when you take the snapshot?\n\n500\n00:25:23.030 --> 00:25:23.880\nI just did that a minute ago.\n\n501\n00:25:23.880 --> 00:25:26.130\nI took a snapshot of\na running virtual machine.\n\n502\n00:25:26.130 --> 00:25:27.850\nAnd while it was running.\n\n503\n00:25:27.850 --> 00:25:30.800\nWhat if it was halfway through\nwriting a file to that hard drive?\n\n504\n00:25:30.800 --> 00:25:33.950\nIt was halfway through writing.\n\n505\n00:25:33.950 --> 00:25:35.590\nWas it all the way through?\n\n506\n00:25:35.590 --> 00:25:37.000\nNo, it was halfway.\n\n507\n00:25:37.000 --> 00:25:38.890\nWell, if that was an internal file.\n\n508\n00:25:38.890 --> 00:25:41.620\nIf I was copying from one place\non the hard drive to another.\n\n509\n00:25:41.620 --> 00:25:44.990\nWhen I roll back to that snapshot,\nit will just finish that copy operation,\n\n510\n00:25:44.990 --> 00:25:46.490\nno harm, no foul.\n\n511\n00:25:46.490 --> 00:25:49.700\nBut what if I was copying that\nfile from a network resource, and\n\n512\n00:25:49.700 --> 00:25:52.610\nI took a snapshot half way through copying\nthat file from a network resource,\n\n513\n00:25:52.610 --> 00:25:55.870\nor writing to the database\nfrom a network resource.\n\n514\n00:25:55.870 --> 00:26:00.410\nWhen I roll that machine back to\nthe snapshot later on in the future,\n\n515\n00:26:00.410 --> 00:26:03.450\nit's gonna be back at that point in time\nand the network resource that it was\n\n516\n00:26:03.450 --> 00:26:06.880\ncopying or the application it was calling,\nit may not even be around anymore.\n\n517\n00:26:06.880 --> 00:26:08.820\nIt's definitely moved on to other things.\n\n518\n00:26:08.820 --> 00:26:10.610\nAnd so now that data is corrupt.\n\n519\n00:26:10.610 --> 00:26:12.750\nYou only get half the data and\nit corrupts your database.\n\n520\n00:26:12.750 --> 00:26:16.060\nOr you have damaged files on\nthe hard drive and you don't know it\n\n521\n00:26:16.060 --> 00:26:19.700\nbecause they were half way through\nwriting when you took that snapshot.\n\n522\n00:26:19.700 --> 00:26:23.350\nSo taking a snapshot of a running\nmachine is not a good idea.\n\n523\n00:26:23.350 --> 00:26:25.710\nIf you take a snapshot of\na machine that's turned off,\n\n524\n00:26:25.710 --> 00:26:27.300\nthe hard drives are completely still,\n\n525\n00:26:27.300 --> 00:26:30.860\neverything is happy, you'll get a great\nsnapshot that works 100% of the time.\n\n526\n00:26:30.860 --> 00:26:33.290\nSo you can always take a snapshot\nwhile it is powered off.\n\n527\n00:26:33.290 --> 00:26:36.250\nBut now you have a downtime,\nanytime you take a snapshot.\n\n528\n00:26:36.250 --> 00:26:38.670\nWell, if you install VMWare tools,\n\n529\n00:26:38.670 --> 00:26:42.990\nthe virtual machine now knows\nthat it is running on a host.\n\n530\n00:26:42.990 --> 00:26:44.277\nAnd when you go to take a snapshot.\n\n531\n00:26:44.277 --> 00:26:47.480\nThe snapshot sub-system will\ntell the virtual machine,\n\n532\n00:26:47.480 --> 00:26:52.050\nhey, I need you to hold off on any\nwrites that you're doing for a moment.\n\n533\n00:26:52.050 --> 00:26:55.900\nAnd the virtual machine will start\ncaching writes in RAM, and you can take\n\n534\n00:26:55.900 --> 00:27:00.490\na snapshot of the hard drive as it is\nright now without those writes going on.\n\n535\n00:27:00.490 --> 00:27:02.520\nWhat it does is it quiesces.\n\n536\n00:27:02.520 --> 00:27:06.220\nIt tells it, hey finish what\nyou're writing right now, but\n\n537\n00:27:06.220 --> 00:27:08.328\nanything new just hold it in RAM for\na minute.\n\n538\n00:27:08.328 --> 00:27:12.820\nSo with O/S, as it quietens down\nthe drives, the drives get quiet, and\n\n539\n00:27:12.820 --> 00:27:16.620\nwe take a copy then, and\nthen it does its rights and moves on.\n\n540\n00:27:16.620 --> 00:27:19.390\nWith Windows you have volume shadow copy,\nand that's what it's kind of using,\n\n541\n00:27:19.390 --> 00:27:21.210\nthe volume shadow service provider.\n\n542\n00:27:21.210 --> 00:27:27.170\nIn Linux, it actually uses its own little\nproviders that are part of the VM tools.\n\n543\n00:27:27.170 --> 00:27:29.470\nBut if you want Qiest snapshots,\nyou've got to have that in.\n\n544\n00:27:29.470 --> 00:27:31.190\nYou might have noticed that\noption when I went here,\n\n545\n00:27:31.190 --> 00:27:33.690\nI'll take DVR1 When I went\nto take that snapshot,\n\n546\n00:27:33.690 --> 00:27:39.360\nthere was an option down at the bottom,\nquiesce guest file system,okay?\n\n547\n00:27:39.360 --> 00:27:41.610\nAnd see the note beside it?\n\n548\n00:27:41.610 --> 00:27:44.020\nNeeds VMware tools installed.\n\n549\n00:27:44.020 --> 00:27:48.940\nAnd so when I took that snapshot of web01,\nweb01 was up and running.\n\n550\n00:27:48.940 --> 00:27:53.000\nAnd so I took a snapshot, and down here\nI chose to do a snapshot of the virtual\n\n551\n00:27:53.000 --> 00:27:56.380\nmachines memory but\nI couldn't quiesce the file system.\n\n552\n00:27:56.380 --> 00:27:59.610\nSo I potentially could have corrupt\ndata in that snapshot I just made.\n\n553\n00:27:59.610 --> 00:28:02.420\nIf I had VMware tools installed\nthough I could check this and\n\n554\n00:28:02.420 --> 00:28:03.460\nI would know the data would be safe.\n\n555\n00:28:05.140 --> 00:28:07.150\nAnother feature is time synchronization.\n\n556\n00:28:07.150 --> 00:28:08.950\nEvery virtual machine\nis gonna have a clock.\n\n557\n00:28:08.950 --> 00:28:10.670\nEvery operating system has a clock.\n\n558\n00:28:10.670 --> 00:28:14.410\nAnd normally they relay on their hardware\nclock to be able to see that but\n\n559\n00:28:14.410 --> 00:28:18.430\nin a virtual machine you won't have\na hardware clock, you have the host.\n\n560\n00:28:18.430 --> 00:28:21.630\nAnd so with VMware tools it can\nsynchronize the clock between the host and\n\n561\n00:28:21.630 --> 00:28:24.590\nthe guest so it's a great way to\nhave those time synchronized so\n\n562\n00:28:24.590 --> 00:28:28.560\nwe don't have to worry about having\nindividual basis clock on every VM.\n\n563\n00:28:28.560 --> 00:28:30.340\nThey can all pull from\nthat one main location,\n\n564\n00:28:30.340 --> 00:28:32.430\nand that's done through VMware tools also.\n\n565\n00:28:32.430 --> 00:28:36.840\n>> Now, Don, when you install those VMware\ntools, is there any post installation\n\n566\n00:28:36.840 --> 00:28:40.540\nconfiguration you have to do, or is it\njust push and click and we're ready to go?\n\n567\n00:28:40.540 --> 00:28:42.290\n>> It can actually be really simple,\nright?\n\n568\n00:28:42.290 --> 00:28:45.880\nOn a Windows machine, for example,\nyou launch the VMware tools installer and\n\n569\n00:28:45.880 --> 00:28:48.080\nyou click Next three times, and it's done.\n\n570\n00:28:48.080 --> 00:28:49.630\nI mean, there's no options to config.\n\n571\n00:28:49.630 --> 00:28:52.580\nIt's just literally Next,\nNext, Next, done, right?\n\n572\n00:28:52.580 --> 00:28:56.300\nI guess you have to give it\nthe administrator credentials, right.\n\n573\n00:28:56.300 --> 00:28:57.660\nYou have accepted what is it?\n\n574\n00:28:57.660 --> 00:28:59.950\nUAC prompt or\nwhatever it is the Windows has.\n\n575\n00:28:59.950 --> 00:29:02.430\nIn the Linux or\nUnits world it's a little more complex.\n\n576\n00:29:02.430 --> 00:29:03.520\nCuz we gotta drop to the command line.\n\n577\n00:29:03.520 --> 00:29:04.410\nGet it installed.\n\n578\n00:29:04.410 --> 00:29:05.360\nIt's a little bit harder.\n\n579\n00:29:05.360 --> 00:29:09.160\nAlthough I will say there's a lot\nof Linux distributions now.\n\n580\n00:29:09.160 --> 00:29:12.120\nThat are baking the VMware\ntools into the distros already.\n\n581\n00:29:12.120 --> 00:29:16.520\nSo, if you install Ubuntu for example,\nor the newer Red Hat releases.\n\n582\n00:29:16.520 --> 00:29:18.430\nThey already have VMware\ntools built into them.\n\n583\n00:29:18.430 --> 00:29:20.030\nSo you don't even have\nto install VMware tools.\n\n584\n00:29:20.030 --> 00:29:22.760\nYou just load the virtual machine up and\nit’s already there.\n\n585\n00:29:22.760 --> 00:29:23.780\nIt’s already part of the OS.\n\n586\n00:29:23.780 --> 00:29:24.879\nSo it’s kinda neat to have that.\n\n587\n00:29:26.140 --> 00:29:27.480\nFor most of us that's it.\n\n588\n00:29:27.480 --> 00:29:29.280\nYou just can install it and that's it.\n\n589\n00:29:29.280 --> 00:29:30.880\nBut you can custom them.\n\n590\n00:29:30.880 --> 00:29:32.710\nYou can go in and\ntweak some of the settings.\n\n591\n00:29:32.710 --> 00:29:34.280\nFor example, time synchronization.\n\n592\n00:29:34.280 --> 00:29:36.400\nI know I just mentioned it and\nsaid it's great.\n\n593\n00:29:36.400 --> 00:29:40.330\nThere is actually a time where it's not so\ngreat and that is, if you have a virtual\n\n594\n00:29:40.330 --> 00:29:44.410\nmachine that is a Microsoft Windows\nActive Directory Domain Controller.\n\n595\n00:29:44.410 --> 00:29:49.550\nBoy, domain controllers hate having their\nclocks synced by anything other than NTP.\n\n596\n00:29:49.550 --> 00:29:53.840\nIf you're syncing it with a host BIOS,\nit's a nightmare.\n\n597\n00:29:53.840 --> 00:29:56.170\nIt will break your domain controllers,\nbad news.\n\n598\n00:29:56.170 --> 00:29:57.790\nSo on a Windows domain controller,\n\n599\n00:29:57.790 --> 00:30:01.070\nif you're running that as a VM,\nyou wanna turn off time synchronization.\n\n600\n00:30:01.070 --> 00:30:02.800\nAnd so you do have those options.\n\n601\n00:30:02.800 --> 00:30:05.310\nWe can edit them in\nthe virtual machine settings.\n\n602\n00:30:05.310 --> 00:30:06.530\nI don't actually have.\n\n603\n00:30:06.530 --> 00:30:09.370\nI should, I don't know how\nmy tools installed yet but\n\n604\n00:30:09.370 --> 00:30:10.190\nI'll show you where they are.\n\n605\n00:30:10.190 --> 00:30:11.260\nWe do need to install them.\n\n606\n00:30:11.260 --> 00:30:14.610\nI don't know if we still have time for\nit but if I take Web01 here.\n\n607\n00:30:14.610 --> 00:30:18.400\nI'm gonna go to Web01 and\ngo to manage and settings, and\n\n608\n00:30:18.400 --> 00:30:21.030\nunder settings you got VM Options.\n\n609\n00:30:21.030 --> 00:30:24.010\nAnd so if I go to VM Options\nunder the options over here.\n\n610\n00:30:24.010 --> 00:30:26.110\nYou'll see VMWare tool settings.\n\n611\n00:30:26.110 --> 00:30:28.220\nAnd you can expand that out.\n\n612\n00:30:28.220 --> 00:30:29.200\nAnd there's settings in here.\n\n613\n00:30:29.200 --> 00:30:30.940\nLet me just go to the edit screen on this.\n\n614\n00:30:30.940 --> 00:30:32.000\nI'm going to go to the edit screen so\n\n615\n00:30:32.000 --> 00:30:35.240\nwe can actually see\nthe individual choosable options.\n\n616\n00:30:35.240 --> 00:30:38.580\nAnd what you'll see if you can\ntweak a lot of this stuff.\n\n617\n00:30:38.580 --> 00:30:40.670\nThe power operations, okay?\n\n618\n00:30:40.670 --> 00:30:44.090\nNormally, if I tell VMWare to\nshut down a virtual machine,\n\n619\n00:30:44.090 --> 00:30:46.530\nit's like yanking\nthe power plug out of it.\n\n620\n00:30:46.530 --> 00:30:47.470\nIs that a good thing?\n\n621\n00:30:47.470 --> 00:30:50.350\nIf I have a server up running,\nI just yank the power plug out of it.\n\n622\n00:30:50.350 --> 00:30:53.370\nWell, I might have rights that were\nhalfway through, and I just lost data.\n\n623\n00:30:53.370 --> 00:30:54.360\nI might have corrupted data.\n\n624\n00:30:54.360 --> 00:30:55.490\nIt's not a good idea.\n\n625\n00:30:55.490 --> 00:30:57.970\nIf I have the virtual machine\ntools installed, though.\n\n626\n00:30:57.970 --> 00:30:58.475\nI can tell.\nTell it,\n\n627\n00:30:58.475 --> 00:31:01.975\nhey when I tell it to shut down,\ngracefully shut down the guest.\n\n628\n00:31:01.975 --> 00:31:04.775\nIf it's a Linux box send it the shut\ndown command, if it's a Windows box\n\n629\n00:31:04.775 --> 00:31:07.845\nsend it the shut down command and\nthey'll gracefully shut down.\n\n630\n00:31:07.845 --> 00:31:08.485\nThat's what we want.\n\n631\n00:31:08.485 --> 00:31:09.745\nThat's part of what VM Virtuals can do.\n\n632\n00:31:09.745 --> 00:31:12.255\nSo you can come in here and\nset how that works.\n\n633\n00:31:12.255 --> 00:31:16.515\nYou can set scripts that run after\npowering on, after resuming, and so on.\n\n634\n00:31:16.515 --> 00:31:18.910\nWe can define whether or\nnot we want those.\n\n635\n00:31:18.910 --> 00:31:20.450\nA lot of my options are grayed\nout here cuz I haven't\n\n636\n00:31:20.450 --> 00:31:22.080\ninstalled the VMWare tools yet.\n\n637\n00:31:22.080 --> 00:31:23.670\nI can do tools upgrades.\n\n638\n00:31:23.670 --> 00:31:24.820\nIf there's an upgrade for\n\n639\n00:31:24.820 --> 00:31:27.050\nVMWare tools do we automatically\npush it to the virtual machines?\n\n640\n00:31:27.050 --> 00:31:32.430\nThey check every time they power on,\nand time, do I want to synchronize\n\n641\n00:31:32.430 --> 00:31:34.690\nthe guest time with the host and\nI can turn that on and off.\n\n642\n00:31:34.690 --> 00:31:38.430\nSo if this is a domain control, I want\nto come and turn it off, uncheck it.\n\n643\n00:31:38.430 --> 00:31:41.360\nBut if it's a web server,\ndatabase server, whatever,\n\n644\n00:31:41.360 --> 00:31:43.470\nthen it's perfectly fine to synchronize\nthat, I can leave that turned on.\n\n645\n00:31:43.470 --> 00:31:45.620\nBut these are kind of the limits\nto the configuration.\n\n646\n00:31:45.620 --> 00:31:46.170\nRight here.\n\n647\n00:31:46.170 --> 00:31:49.440\n>> Don, speaking about VMware tool\nscripts there in the Linux world,\n\n648\n00:31:49.440 --> 00:31:53.440\ndo you have like a pseudo script you\ncan run and it configures it for you or\n\n649\n00:31:53.440 --> 00:31:55.000\nis this a very manual process?\n\n650\n00:31:55.000 --> 00:31:58.110\n>> There's actually a series of\nscripts that are available really for\n\n651\n00:31:58.110 --> 00:32:00.470\nevery operating system,\nsome of them are nice and\n\n652\n00:32:00.470 --> 00:32:02.200\neasy like the Windows when we have a GUI.\n\n653\n00:32:02.200 --> 00:32:05.460\nIt's a graphical user install that you\njust click on next a few times and\n\n654\n00:32:05.460 --> 00:32:06.160\nyou're done.\n\n655\n00:32:06.160 --> 00:32:08.200\nIn th Linux world we do have\nto go to the command line.\n\n656\n00:32:08.200 --> 00:32:10.860\nIn the Mac world you have\nto go to the command line.\n\n657\n00:32:10.860 --> 00:32:13.960\nIt just kind of depends on your\nOS on which one you're gonna do,\n\n658\n00:32:13.960 --> 00:32:16.790\nand I want to show this to you guys but\nI know we're out of time.\n\n659\n00:32:16.790 --> 00:32:21.070\nSo I mentioned we'd probably have a part\nthree so I think we're gonna do that.\n\n660\n00:32:21.070 --> 00:32:22.230\nWe'll do a part three.\n\n661\n00:32:22.230 --> 00:32:23.800\nI'll install the VMware tools and\n\n662\n00:32:23.800 --> 00:32:26.310\nthen I started other things that\nwe need to get to some bells and\n\n663\n00:32:26.310 --> 00:32:29.470\nwhistles that I want show of for\nvirtual machine configurations too.\n\n664\n00:32:29.470 --> 00:32:31.440\nSo, well, we'll pick that up in part two.\n\n665\n00:32:31.440 --> 00:32:32.000\n>> Well that sounds.\n\n666\n00:32:32.000 --> 00:32:33.500\n>> Three.\n>> There's part three, yes.\n\n667\n00:32:33.500 --> 00:32:34.000\nIt's gonna be.\n\n668\n00:32:34.000 --> 00:32:35.960\nIt's gonna be the trilogy here for sure.\n\n669\n00:32:35.960 --> 00:32:38.440\nWell Don, we do appreciate\nhaving you in this studio.\n\n670\n00:32:38.440 --> 00:32:42.060\nAnd we do appreciate you come in by and\ngive us all these information.\n\n671\n00:32:42.060 --> 00:32:44.450\nBefore we sign out, do you have any\nadditional information for this one?.\n\n672\n00:32:44.450 --> 00:32:45.620\nI gotta stop while I'm ahead, Wes.\n\n673\n00:32:45.620 --> 00:32:47.420\nIf I keep going this will be\nthe longest episode on record.\n\n674\n00:32:47.420 --> 00:32:49.640\nSo, just remember\nVMWare Tools are important,\n\n675\n00:32:49.640 --> 00:32:51.960\nyou definitely wanna install them on\nyour virtual machines if you can.\n\n676\n00:32:51.960 --> 00:32:54.050\n>> All right, well we appreciate\nhaving you in the studios.\n\n677\n00:32:54.050 --> 00:32:55.530\nAnd we appreciate you the viewer watching.\n\n678\n00:32:55.530 --> 00:33:01.905\nSigning out for\nITProTV I've been your host Wes Bryan.\n\n679\n00:33:01.905 --> 00:33:02.955\n>> And I'm Don Pezet.\n\n680\n00:33:02.955 --> 00:33:06.390\n>> And we'll see you next time.\n\n681\n00:33:06.390 --> 00:33:09.580\n[SOUND]\n\n",
          "vimeoId": "169852227"
        },
        {
          "description": "In this episode, Wes and Don continue their demonstration on how to create and configure virtual machines inside of vSphere. They explain the process of installing the VMware Tools and various settings. They also discuss additional options such as Remote Console, power management, boot options and Fibre Channel NPIVs.",
          "length": "1505",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-3-creating_virtual_machines_pt3-060216-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-3-creating_virtual_machines_pt3-060216-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-1-3-creating_virtual_machines_pt3-060216-1-sm.jpg",
          "title": "Creating Virtual Machines Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.876 --> 00:00:14.411\n>> Welcome back to another\nexciting episode here at ITProTV.\n\n3\n00:00:14.411 --> 00:00:15.960\nI'm your host, Wes Bryan, and\n\n4\n00:00:15.960 --> 00:00:19.110\nin today's episode we're continuing\nthrough our series in VMWare.\n\n5\n00:00:19.110 --> 00:00:19.621\nThat’s right,\n\n6\n00:00:19.621 --> 00:00:23.300\nwe’re coming back at you with some more\nVMware Certified Professional, and\n\n7\n00:00:23.300 --> 00:00:27.300\nbelieve it or not this is actually a part\nthree on creating virtual machines.\n\n8\n00:00:27.300 --> 00:00:29.320\nSo we won’t waste any time here.\n\n9\n00:00:29.320 --> 00:00:31.740\nJoining me in the studios is\nnone other than Mr. Don Pezet.\n\n10\n00:00:31.740 --> 00:00:32.790\nDon, how you doing, sir?\n\n11\n00:00:32.790 --> 00:00:35.250\n>> I’m doing great, Wes,\nIf I could just stop rambling so\n\n12\n00:00:35.250 --> 00:00:36.630\nmuch about virtual machines.\n\n13\n00:00:36.630 --> 00:00:38.522\nI'm excited to jump back\ninto this thing and\n\n14\n00:00:38.522 --> 00:00:40.853\nget to some of the things I tried\nto rap up in the last episode.\n\n15\n00:00:40.853 --> 00:00:44.080\nBe we talked a lot about the VMware\ntools in the last episode,\n\n16\n00:00:44.080 --> 00:00:47.020\nwe just didn't actually\nget them installed.\n\n17\n00:00:47.020 --> 00:00:50.320\nSo, I want to show you guys that process,\nget some of the tools installed, and\n\n18\n00:00:50.320 --> 00:00:51.710\nshow you how it works.\n\n19\n00:00:51.710 --> 00:00:54.140\nAnd then we've got a few other VM\noptions we need to configure, too.\n\n20\n00:00:54.140 --> 00:00:56.460\nSo let's just kick it off there.\n\n21\n00:00:56.460 --> 00:00:58.590\nI've been working with two\nvirtual machines in the show.\n\n22\n00:00:58.590 --> 00:01:00.360\nI've got these WEB01 and DB01.\n\n23\n00:01:00.360 --> 00:01:01.930\nThese two guys.\n\n24\n00:01:01.930 --> 00:01:03.750\nThey're both CentOS boxes.\n\n25\n00:01:03.750 --> 00:01:06.045\nI think CentOS6, if I remember right.\n\n26\n00:01:06.045 --> 00:01:09.500\nAnd they're both up,\nI've got them installed.\n\n27\n00:01:09.500 --> 00:01:10.820\nBut I just installed the base OS,\n\n28\n00:01:10.820 --> 00:01:13.690\nI never actually installed\nthe VM ware tools on them.\n\n29\n00:01:13.690 --> 00:01:16.370\nAnd as a result,\nI'm missing some functionality.\n\n30\n00:01:16.370 --> 00:01:22.080\nSo, for example, if I take WEB01 here,\nand I go into the options and\n\n31\n00:01:22.080 --> 00:01:25.270\ntake a look at the VMware tools settings,\na lot of that stuff would be\n\n32\n00:01:25.270 --> 00:01:29.040\ngrayed out in there because,\nwell, they're not installed.\n\n33\n00:01:29.040 --> 00:01:32.380\nAnd what I highlighted in the last\nepisode was if I try to take a snapshot,\n\n34\n00:01:32.380 --> 00:01:35.890\nwhen I take a snapshot of it,\nthere's an option right here to\n\n35\n00:01:35.890 --> 00:01:38.600\nquiesce the guest file system\nwhere I can get it to quiet down.\n\n36\n00:01:38.600 --> 00:01:40.420\nSlow down all the rights\nto the hard drive so\n\n37\n00:01:40.420 --> 00:01:44.720\nI can take a good, clean snapshot of the\nhard drive and then start writing again.\n\n38\n00:01:44.720 --> 00:01:46.830\nRight now,\nmy VMware tools are not installed,\n\n39\n00:01:46.830 --> 00:01:50.254\nand so I can't do that,\nI can't quiesce the hard-drive.\n\n40\n00:01:50.254 --> 00:01:52.270\nSo, if I want to do those things,\n\n41\n00:01:52.270 --> 00:01:55.220\nI'm going to need to install\nthe virtual machine additions.\n\n42\n00:01:55.220 --> 00:01:58.590\nAnd if you're looking at the getting\nstarted page for your virtual machine,\n\n43\n00:01:58.590 --> 00:02:00.580\nwhen you create a virtual machine,\n\n44\n00:02:00.580 --> 00:02:04.150\nit actually tells us in here some of the\ndifferent things that you might wanna do.\n\n45\n00:02:04.150 --> 00:02:06.880\nAnd its got learn how to install\na guest operating system.\n\n46\n00:02:06.880 --> 00:02:08.440\nAnd if we go into those documents,\n\n47\n00:02:08.440 --> 00:02:11.570\nit actually talks about installing the\nVMware tools and getting them in place.\n\n48\n00:02:11.570 --> 00:02:15.475\nBut it is one of the first steps that\nwe need to do to get the machine up and\n\n49\n00:02:15.475 --> 00:02:16.390\nhealthy.\n\n50\n00:02:16.390 --> 00:02:19.250\nNow, if you don't know if your machine\nhas the VMWare tools already or\n\n51\n00:02:19.250 --> 00:02:22.240\nnot, the summary tab is\na great place to find it.\n\n52\n00:02:22.240 --> 00:02:25.520\nYou can click on your virtual machine,\ngo to the summary tab,\n\n53\n00:02:25.520 --> 00:02:30.070\nand up in the summary,\nyou'll see right here, VMware Tools.\n\n54\n00:02:30.070 --> 00:02:32.300\nAnd then you're gonna\nsee one of two things.\n\n55\n00:02:32.300 --> 00:02:35.060\nEither that it's not running and\nnot installed, like mine.\n\n56\n00:02:35.060 --> 00:02:38.550\nOr the version of the VMware tools,\nbecause the version can get out of date,\n\n57\n00:02:38.550 --> 00:02:40.000\ntoo, and you might need to update them.\n\n58\n00:02:40.000 --> 00:02:41.830\nSo that's another thing\nthat you'll see there.\n\n59\n00:02:41.830 --> 00:02:45.520\nSo mine's up, but\nit doesn't have VMware tools.\n\n60\n00:02:45.520 --> 00:02:47.410\nNow, installing VMware\ntools is really easy.\n\n61\n00:02:47.410 --> 00:02:49.950\nIf you haven't done it, you'll have\nthis nice big warning right here,\n\n62\n00:02:49.950 --> 00:02:52.060\nVMware tools not installed\non the virtual machine.\n\n63\n00:02:52.060 --> 00:02:55.570\nAnd you can click this link to\ninstall the VMware tools, all right?\n\n64\n00:02:55.570 --> 00:02:57.990\nSo it's as easy as clicking a link.\n\n65\n00:02:57.990 --> 00:03:00.360\nWhat's it actually doing, though?\n\n66\n00:03:00.360 --> 00:03:04.280\nWhen you click the link, what it's really\ndoing is taking an ISO image that has\n\n67\n00:03:04.280 --> 00:03:08.180\nthe VMware tools, and it's putting it into\nthe virtual machine to start the install.\n\n68\n00:03:08.180 --> 00:03:11.010\nIt actually can't do the install for\nyou, though.\n\n69\n00:03:11.010 --> 00:03:13.960\nSo you still have to log into\nthe virtual machine, and go and do it.\n\n70\n00:03:13.960 --> 00:03:16.770\nBut it can kick off the process, right?\n\n71\n00:03:16.770 --> 00:03:20.970\nSo if I were to click that, it's gonna\ntell me that it's going to mount the CD,\n\n72\n00:03:20.970 --> 00:03:24.460\nit's gonna put that in the operating\nsystem, and then we'd need to start it and\n\n73\n00:03:24.460 --> 00:03:25.340\ngetting it running, right?\n\n74\n00:03:25.340 --> 00:03:28.220\nSo it's just telling me that they\ncan do that, and I can hit mount.\n\n75\n00:03:28.220 --> 00:03:32.330\nNow, when I hit mount, it will\nactually try to launch the installer.\n\n76\n00:03:32.330 --> 00:03:34.620\nAnd sometimes if you have\nAutorun turned on in Windows,\n\n77\n00:03:34.620 --> 00:03:36.650\nit might actually be able\nto run the installer.\n\n78\n00:03:36.650 --> 00:03:39.800\nBut other times it's just gonna pop that\ndisk in there, and then it's gonna sit,\n\n79\n00:03:39.800 --> 00:03:40.910\nall right?\n\n80\n00:03:40.910 --> 00:03:42.830\nSo what did it really do?\n\n81\n00:03:42.830 --> 00:03:45.620\nWell, let me make sure it's actually\ndone attempting, it is, good.\n\n82\n00:03:45.620 --> 00:03:47.610\nAll right,\nwhat it really did is put that CD in.\n\n83\n00:03:47.610 --> 00:03:50.670\nSo if I go to Manage > Settings, and\n\n84\n00:03:50.670 --> 00:03:55.660\nI go to my virtual machine hardware,\nI can look at the CD/DVD drive.\n\n85\n00:03:55.660 --> 00:03:58.670\nAnd if I expand that out,\nsee what it mounted?\n\n86\n00:03:58.670 --> 00:04:01.095\nIt mounted a file called Linux.iso,\nall right?\n\n87\n00:04:01.095 --> 00:04:04.680\nThat's an ISO image of\nthe VMware tools for\n\n88\n00:04:04.680 --> 00:04:08.896\nLinux, and it's got ISO images for\nall sorts of different OS's baked into it.\n\n89\n00:04:08.896 --> 00:04:10.750\nIf we edit this, and\n\n90\n00:04:10.750 --> 00:04:16.920\nI go down to that same CD drive, I can\nsee the file that it picked right here.\n\n91\n00:04:16.920 --> 00:04:19.269\nIf I hit browse, and browse my datastores,\n\n92\n00:04:19.269 --> 00:04:22.350\nyou'll notice a datastore\nhere called VM images.\n\n93\n00:04:22.350 --> 00:04:23.430\nI didn't make that.\n\n94\n00:04:23.430 --> 00:04:25.080\nThat's a part of ESXI.\n\n95\n00:04:25.080 --> 00:04:29.410\nEvery ESXI box that you set up will\nhave this VM images datastore.\n\n96\n00:04:29.410 --> 00:04:35.450\nAnd if you browse inside of it,\nthat's where it's got the tools-isoimages.\n\n97\n00:04:35.450 --> 00:04:38.200\nAnd it's got ISO images for\n\n98\n00:04:38.200 --> 00:04:41.010\nall the various operating\nsystems that VMware supports.\n\n99\n00:04:41.010 --> 00:04:43.540\nSo we'll see Windows, WindowsPre2K,\n\n100\n00:04:43.540 --> 00:04:48.470\nactually these are the signature files,\nso I need these guys here, the ISO's.\n\n101\n00:04:48.470 --> 00:04:53.540\nI've got freebsd, Linux,\nhand full of others.\n\n102\n00:04:53.540 --> 00:04:56.040\nThere's Netware, Windows, Darwin.\n\n103\n00:04:56.040 --> 00:04:57.670\nDarwin is MAC OS, right?\n\n104\n00:04:57.670 --> 00:04:58.960\nSo, OS X.\n\n105\n00:04:58.960 --> 00:05:02.470\nSolaris, so I'm seeing each of\nthe different ones that we support.\n\n106\n00:05:02.470 --> 00:05:04.740\nI've got a Linux box, so\nthat's the one that I want.\n\n107\n00:05:04.740 --> 00:05:07.300\nBut if this was a Windows machine,\nI'd want the Windows ISO, and\n\n108\n00:05:07.300 --> 00:05:08.150\nit's got the tools there.\n\n109\n00:05:08.150 --> 00:05:10.930\nNow, Windows is not a lot\nof fun on this one because\n\n110\n00:05:10.930 --> 00:05:12.288\nthere's a little setup.exe file.\n\n111\n00:05:12.288 --> 00:05:15.010\nYou double-click it, and you click\nnext three times and you're done.\n\n112\n00:05:15.010 --> 00:05:17.620\nSo it's like the least\nexciting install possible.\n\n113\n00:05:17.620 --> 00:05:18.830\nBut on the Linux side,\n\n114\n00:05:19.910 --> 00:05:24.190\nVMware doesn't know whether you even\nhave a graphical user interface at all.\n\n115\n00:05:24.190 --> 00:05:27.450\nSo can they give us a GUI tool if they\ndon't even know you'll have a GUI?\n\n116\n00:05:27.450 --> 00:05:28.540\nNo, we've got a command line tool,\n\n117\n00:05:28.540 --> 00:05:31.280\nwe've got a shell script that we\ncan run that'll install those.\n\n118\n00:05:31.280 --> 00:05:35.495\nAnd so that's what I got here on this\nmachine, is that ISO images mounted.\n\n119\n00:05:35.495 --> 00:05:37.445\nAnd now we can go and we can install it.\n\n120\n00:05:37.445 --> 00:05:41.559\nSo I've got WEB01 pulled up here\nin my console, and just for\n\n121\n00:05:41.559 --> 00:05:44.736\nmy own curiosity, it is, CentOS 6.7.\n\n122\n00:05:44.736 --> 00:05:48.607\nSo that's the latest version of\nthe six string, but CentOS 7 is out.\n\n123\n00:05:48.607 --> 00:05:51.387\nCentOS 7 actually has the VMware\ntools baked into it, so\n\n124\n00:05:51.387 --> 00:05:53.197\nthere's not a lot of need to install it.\n\n125\n00:05:53.197 --> 00:05:56.417\nCentOS 6.7,\nit might have the VMware tools.\n\n126\n00:05:56.417 --> 00:05:57.957\nEasy way to find out is try and\n\n127\n00:05:57.957 --> 00:06:01.807\ninstall them again,\nif it gives us trouble then we’ll know.\n\n128\n00:06:01.807 --> 00:06:04.517\nAll right,\nnow the hardest part about Linux is\n\n129\n00:06:04.517 --> 00:06:07.787\neach distribution handles\nmounted media different.\n\n130\n00:06:07.787 --> 00:06:11.317\nSome distributions, like Ubuntu,\nwill mount the CD for\n\n131\n00:06:11.317 --> 00:06:14.430\nyou automatically, and\nyou don't have to worry about it.\n\n132\n00:06:14.430 --> 00:06:16.510\nOther ones like CentOS,\na lot of times will make you mount it.\n\n133\n00:06:16.510 --> 00:06:19.220\nSo I'm just gonna run the mount command\nand see if it already mounted my CD drive.\n\n134\n00:06:19.220 --> 00:06:22.830\nAnd I'm just gonna look through everything\nthat it mounted here, and, yeah,\n\n135\n00:06:22.830 --> 00:06:26.790\nit didn't mount my CD drive for\nme, so I need to get it mounted.\n\n136\n00:06:26.790 --> 00:06:33.710\nSo I'm gonna make a folder to mount\nthat to, and I'll just do /mnt/cdrom.\n\n137\n00:06:33.710 --> 00:06:35.670\nYou can do whatever you want, right?\n\n138\n00:06:35.670 --> 00:06:38.250\nBut that's where I'm gonna mount it to.\n\n139\n00:06:38.250 --> 00:06:42.453\nSo I'm going to mount\n/dev/cdrom to /mnt/cdrom.\n\n140\n00:06:43.920 --> 00:06:46.184\nAnd there it goes.\n\n141\n00:06:46.184 --> 00:06:48.608\nAll right, so\nnow that I've got that mounted,\n\n142\n00:06:48.608 --> 00:06:52.380\nI can switch over into that folder, and\nwe can take a look at what's in it.\n\n143\n00:06:52.380 --> 00:06:55.000\nAnd what we're gonna see\nare a couple of files.\n\n144\n00:06:55.000 --> 00:06:57.300\nThese are that actual VMware tools files.\n\n145\n00:06:57.300 --> 00:07:05.320\nAnd the main file that I care about\nis vmwaretools-10.0.6-3560309.tar.gz.\n\n146\n00:07:05.320 --> 00:07:06.810\nRolls right off the tongue.\n\n147\n00:07:06.810 --> 00:07:12.420\nThat is a tar, a tape archive, and\na g-zip, it's gnu zipped and compressed.\n\n148\n00:07:12.420 --> 00:07:15.840\nThat's got all the VMware tools in it,\nand that's the file that I really want.\n\n149\n00:07:15.840 --> 00:07:19.280\nThere's other files in here, you'll notice\nthese other programs, the upgraders.\n\n150\n00:07:19.280 --> 00:07:21.220\nIf I've already got\nthe VMware tools installed,\n\n151\n00:07:21.220 --> 00:07:23.690\nI can just run the upgrade script and\nthat'll take care of me.\n\n152\n00:07:23.690 --> 00:07:26.450\nI don't have it installed yet, though,\nso I need the actual installer.\n\n153\n00:07:26.450 --> 00:07:30.200\nNow, it is archived and\nI'm on a CD drive that's read-only.\n\n154\n00:07:30.200 --> 00:07:32.550\nYou probably saw that little\nmounting message up above there.\n\n155\n00:07:32.550 --> 00:07:35.060\nSo I need to copy that to my home\ndirectory so I can work with it.\n\n156\n00:07:35.060 --> 00:07:37.380\nSo I'm just gonna copy that file, and\n\n157\n00:07:37.380 --> 00:07:41.170\nI'm gonna send that right\nover to my home directory.\n\n158\n00:07:41.170 --> 00:07:44.470\nAnd once it to my home directory, now\nI'll be able to work with it right here.\n\n159\n00:07:44.470 --> 00:07:47.970\nIn fact, I don't need the CD drive\nanymore, I can get rid of that.\n\n160\n00:07:49.200 --> 00:07:50.210\nSo that's gone.\n\n161\n00:07:50.210 --> 00:07:53.450\nAnd now, I've got that archive\nright here in my home directory.\n\n162\n00:07:53.450 --> 00:07:55.351\nI need to extract it, and\nget all the files out of it.\n\n163\n00:07:55.351 --> 00:07:59.655\nNow, it's a tar.gz, that means it's\ntarred and it's gzipped, and so\n\n164\n00:07:59.655 --> 00:08:00.843\nI need to undo both.\n\n165\n00:08:00.843 --> 00:08:02.810\nFortunately, I can do that\nwith the tar command.\n\n166\n00:08:02.810 --> 00:08:07.425\nSo I'm gonna use tar and\nI'll say X for extract, V for verbose.\n\n167\n00:08:07.425 --> 00:08:09.090\nSo that I can see it happening.\n\n168\n00:08:09.090 --> 00:08:12.100\nZ saying unzip it, right?\n\n169\n00:08:12.100 --> 00:08:16.000\nUn G zip it, and then F to tell\nit the file that I wanna use.\n\n170\n00:08:16.000 --> 00:08:17.290\nAnd then I can give it that file name.\n\n171\n00:08:17.290 --> 00:08:20.850\nAnd when I run this,\nwe're gonna see a lot of stuff scroll by.\n\n172\n00:08:20.850 --> 00:08:23.380\nAnd that's it extracting\nthe VMware tools for me.\n\n173\n00:08:23.380 --> 00:08:24.660\nSo that I'll be able to do the install.\n\n174\n00:08:24.660 --> 00:08:26.870\nSo that's gonna ramble on by, real quick.\n\n175\n00:08:26.870 --> 00:08:29.710\nIt is creating a subfolder for me, and\nwhat I need will be right in there.\n\n176\n00:08:29.710 --> 00:08:32.220\nAnd there will be an install script,\nthat's suitable for\n\n177\n00:08:32.220 --> 00:08:35.630\ndoing the first installation\nof VMware tools on a machine.\n\n178\n00:08:35.630 --> 00:08:36.810\nAll right, so\nthat's gonna take just a moment,\n\n179\n00:08:36.810 --> 00:08:37.850\nwhile it tracks all of those files.\n\n180\n00:08:37.850 --> 00:08:40.090\nThen as soon as it's done,\nwe'll be able to get to the installer.\n\n181\n00:08:40.090 --> 00:08:41.770\nAnd there we go.\nIt's finished.\n\n182\n00:08:41.770 --> 00:08:44.700\nSo we can look and\nit's actually gonna create a folder, and\n\n183\n00:08:44.700 --> 00:08:47.540\nit'll probably be hard to see\nbecause it's dark blue on black, but\n\n184\n00:08:47.540 --> 00:08:51.200\nit created a folder called VMWare\ntools distrib, or distribution.\n\n185\n00:08:51.200 --> 00:08:55.794\nAnd if I get into that folder, I'll see\nthe actual install file that I want.\n\n186\n00:08:55.794 --> 00:08:57.862\nVMWare dash install dot pl right.\n\n187\n00:08:57.862 --> 00:09:02.485\nIt's a little Perl script, that's what's\ngonna install the VMWare tools and\n\n188\n00:09:02.485 --> 00:09:06.142\nif I call that script,\nthat's gonna start the installer, and\n\n189\n00:09:06.142 --> 00:09:10.213\nI know on the Windows server how I\nsaid you just click next three times,\n\n190\n00:09:10.213 --> 00:09:15.290\nwell on the Linux box, it is a script,\nand it's basically press enter 15 times.\n\n191\n00:09:15.290 --> 00:09:18.380\nIt's gonna give you a bunch of options,\nand you can override them if you want, but\n\n192\n00:09:18.380 --> 00:09:20.570\nfor the most part we just\nwant to accept the defaults.\n\n193\n00:09:20.570 --> 00:09:23.210\nThe first one is Where do I want\nto install the binary files to?\n\n194\n00:09:23.210 --> 00:09:26.860\nAnd /usr/bin,\nthat's as good a place as any for this but\n\n195\n00:09:26.860 --> 00:09:31.150\nyou could choose to override it and\nput it in sbin or wherever.\n\n196\n00:09:31.150 --> 00:09:34.720\nWhich directory contains the init for\ninitialization files?\n\n197\n00:09:34.720 --> 00:09:38.520\nOn a startup system like this,\nit's /etc/rc.d, and\n\n198\n00:09:38.520 --> 00:09:41.000\nI don't want to deviate from that.\n\n199\n00:09:41.000 --> 00:09:44.650\nThen we've got the init scripts that are\nin init.d, we'll leave that at the default\n\n200\n00:09:44.650 --> 00:09:47.110\nfor the daemon files those\nare going to go into sbin.\n\n201\n00:09:47.110 --> 00:09:48.830\nI'll accept the default there.\n\n202\n00:09:48.830 --> 00:09:50.040\nAnd then the library files.\n\n203\n00:09:50.040 --> 00:09:51.370\nThese are kind of important ones.\n\n204\n00:09:51.370 --> 00:09:56.730\nThese are the drivers themselves\nin /usr/lib/VMware tools.\n\n205\n00:09:56.730 --> 00:09:59.550\nAnd now its just going to say,\nthat doesn't exist,\n\n206\n00:09:59.550 --> 00:10:00.440\nare you sure you want to do it?\n\n207\n00:10:00.440 --> 00:10:01.490\nAnd I will say yes.\n\n208\n00:10:01.490 --> 00:10:04.370\nAnd literally I am just hitting\nenter over and over again.\n\n209\n00:10:04.370 --> 00:10:07.280\nYou don't even need to pay somebody\nmore than the minimum wage for this.\n\n210\n00:10:07.280 --> 00:10:08.850\nThis pressing enter over and over.\n\n211\n00:10:08.850 --> 00:10:11.270\nBut if we wanna change them\nwe have that option, okay?\n\n212\n00:10:11.270 --> 00:10:14.280\nSo when it does that it's going to go and\ncreate that folder and\n\n213\n00:10:14.280 --> 00:10:15.110\nstart to copy files.\n\n214\n00:10:15.110 --> 00:10:17.700\nNow, you do need to be root to do this,\nright?\n\n215\n00:10:17.700 --> 00:10:21.160\nI'm already root, I'm breaking security\nrules and logging in this root.\n\n216\n00:10:21.160 --> 00:10:23.570\nIf I wasn't root,\nI'll be getting errors here.\n\n217\n00:10:23.570 --> 00:10:26.670\nSo, I need use the Psuedu command when\nI called up Perl script to make sure\n\n218\n00:10:26.670 --> 00:10:27.760\nthat I've got it.\n\n219\n00:10:27.760 --> 00:10:29.570\nSo, that's the last air root.\n\n220\n00:10:29.570 --> 00:10:33.200\nAgent, it's transient files and\nthat should be about it.\n\n221\n00:10:33.200 --> 00:10:34.410\nWe have documentation.\n\n222\n00:10:34.410 --> 00:10:37.660\nSo, once you got the documentation\nsomewhere, we'll let that go.\n\n223\n00:10:37.660 --> 00:10:40.200\nAnd now it's offering whether or\n\n224\n00:10:40.200 --> 00:10:44.570\nnot we want to invoke the VMware tools for\nthe first time.\n\n225\n00:10:44.570 --> 00:10:46.340\nProbably do, you went through\nthe trouble to install it,\n\n226\n00:10:46.340 --> 00:10:47.720\nmight as well go ahead and run it.\n\n227\n00:10:47.720 --> 00:10:51.320\nAnd that's going to get that final thing\nup, and now it's initializing the tools,\n\n228\n00:10:51.320 --> 00:10:54.480\nand we'll have the VMware tools up and\nrunning on our system.\n\n229\n00:10:54.480 --> 00:10:59.580\nOkay, once that's done what you might\nsee is your virtual machine might lose\n\n230\n00:10:59.580 --> 00:11:03.330\nnetwork connectivity for a moment and then\nwake back up as it loads network drivers.\n\n231\n00:11:03.330 --> 00:11:07.460\nYour network config might get broken\nbecause the config file before might have\n\n232\n00:11:07.460 --> 00:11:14.330\nbeen tied to ethernet zero and now instead\nof em0 it becomes vm0, or something.\n\n233\n00:11:14.330 --> 00:11:16.000\nYour interface name might change.\n\n234\n00:11:16.000 --> 00:11:18.280\nSo you might need to go and\ntweak some settings there.\n\n235\n00:11:18.280 --> 00:11:18.970\nIf needed be.\n\n236\n00:11:18.970 --> 00:11:22.500\nNow it's going to get\ninto some optional stuff.\n\n237\n00:11:22.500 --> 00:11:24.290\nIn Windows, you always have a GUI.\n\n238\n00:11:24.290 --> 00:11:28.310\nAnd so there's GUI tools like dragging and\ndropping files between your desktop and\n\n239\n00:11:28.310 --> 00:11:30.270\nthe console of a virtual machine.\n\n240\n00:11:30.270 --> 00:11:32.400\nIn Linux, you don't always have a GUI.\n\n241\n00:11:32.400 --> 00:11:35.590\nSo the next couple of questions just ask\nme whether I want to install the GUI\n\n242\n00:11:35.590 --> 00:11:36.640\nutilities.\n\n243\n00:11:36.640 --> 00:11:38.430\nI don't have a graphical user\ninterface on this system.\n\n244\n00:11:38.430 --> 00:11:39.560\nSo I'm going to just say no to these.\n\n245\n00:11:39.560 --> 00:11:40.490\nAnd that is the default.\n\n246\n00:11:40.490 --> 00:11:42.440\nSo I'm just going to, except that.\n\n247\n00:11:42.440 --> 00:11:46.030\nSo just doing no for\ndragging and dropping and so on.\n\n248\n00:11:46.030 --> 00:11:50.410\nAnd then after that we've got guest\nauthentication with our environment,\n\n249\n00:11:50.410 --> 00:11:53.450\nwhich we want because we have\nvCenter single sign on, so\n\n250\n00:11:53.450 --> 00:11:55.930\nwe'll accept the default on those.\n\n251\n00:11:55.930 --> 00:11:59.760\nAnd now it's bothering to tell me it\ndidn't find X Windows, which is the GUI,\n\n252\n00:11:59.760 --> 00:12:01.240\nand that's okay.\n\n253\n00:12:01.240 --> 00:12:03.940\nSo at this point We should\nbe pretty good to go.\n\n254\n00:12:03.940 --> 00:12:05.790\nI didn't have to be\nan expert on this stuff.\n\n255\n00:12:05.790 --> 00:12:08.310\nReally you just press enter a bunch\nof times and it installs it.\n\n256\n00:12:08.310 --> 00:12:14.110\nAnd once it's done,\nnow we can interact with the ESXI box.\n\n257\n00:12:14.110 --> 00:12:17.050\n>> Now Don, you talked about some of\nthe options that are available with\n\n258\n00:12:17.050 --> 00:12:17.760\nVMware tools.\n\n259\n00:12:17.760 --> 00:12:20.560\nIn fact, we seen a couple here in the CLI.\n\n260\n00:12:20.560 --> 00:12:22.420\nAre there additional options?\n\n261\n00:12:22.420 --> 00:12:26.000\n>> There are, once it's done,\nonce the tools actually start, and\n\n262\n00:12:26.000 --> 00:12:29.590\nmines still kind of activating itself and\nit'll probably need to reboot afterwards.\n\n263\n00:12:29.590 --> 00:12:33.240\nBut once it's done,\nthat's when we jump back to our GUI and\n\n264\n00:12:33.240 --> 00:12:37.060\nin our GUI what we'll see is that,\n\n265\n00:12:37.060 --> 00:12:41.710\nmine did just finish right so\nwe get the thank you from the VMware team.\n\n266\n00:12:41.710 --> 00:12:44.839\nAnd they're telling me it's done I can\nun-mount the CD ROM drive if I'm not\n\n267\n00:12:45.950 --> 00:12:48.240\nusing it anymore, so\nI can get rid of that.\n\n268\n00:12:48.240 --> 00:12:49.590\nAnd so now we're good to go.\n\n269\n00:12:49.590 --> 00:12:52.250\nYou can even delete the install\nfiles that were copied.\n\n270\n00:12:52.250 --> 00:12:55.790\nBut now that it's done,\nour graphical interface for\n\n271\n00:12:55.790 --> 00:12:59.320\nv center should recognize the tools\nare installed, and we can see it.\n\n272\n00:12:59.320 --> 00:13:02.630\nNow, I have seen sometimes where I\nhad to reboot the virtual machine\n\n273\n00:13:02.630 --> 00:13:03.210\nbefore that work.\n\n274\n00:13:03.210 --> 00:13:04.770\nLet's see if that happens this time.\n\n275\n00:13:04.770 --> 00:13:06.200\nI don't know if it will.\n\n276\n00:13:06.200 --> 00:13:10.810\nLet me get of full screen here and\njump back over to vCenter.\n\n277\n00:13:10.810 --> 00:13:15.170\nAnd on vCenter my machine shows,\nVMware Tools Install in progress.\n\n278\n00:13:15.170 --> 00:13:19.140\nI'm just gonna refresh that one time and\nsee if that changes and\n\n279\n00:13:19.140 --> 00:13:21.080\nif it doesn't I might need to reboot.\n\n280\n00:13:21.080 --> 00:13:24.330\nAnd, well, mine says\nVMware Tools Upgrade in progress,\n\n281\n00:13:24.330 --> 00:13:25.780\nthat's a little different, right?\n\n282\n00:13:25.780 --> 00:13:28.020\nSo it's trying to get that sorted out.\n\n283\n00:13:28.020 --> 00:13:31.110\nIt's populating with more information\nthan it did before right.\n\n284\n00:13:31.110 --> 00:13:34.410\nLike it sees the IP address of\nthe guest which it didn't see before so\n\n285\n00:13:34.410 --> 00:13:37.680\nit is getting a little more information\nwhich means the VMware tools are working.\n\n286\n00:13:37.680 --> 00:13:40.120\nThey made us not be done yet\nand so I'm wanna refresh.\n\n287\n00:13:40.120 --> 00:13:42.480\nWhat happens is once they\nstart talking to the host,\n\n288\n00:13:42.480 --> 00:13:44.880\nthe host can actually update\nit if there's newer versions,\n\n289\n00:13:44.880 --> 00:13:48.390\nthere shouldn't be any newer versions for\nme cuz I just installed the darn thing.\n\n290\n00:13:48.390 --> 00:13:51.440\nSo, it should be okay.\n\n291\n00:13:51.440 --> 00:13:53.900\nIf that upgrade stays,\nwhich mine is staying saying,\n\n292\n00:13:53.900 --> 00:13:57.320\nupgrading, then it's probably a good\nidea to reboot the virtual machine.\n\n293\n00:13:57.320 --> 00:13:59.720\nNow, assuming the tools are installed,\n\n294\n00:13:59.720 --> 00:14:02.700\nI should be able to\ngracefully restart the VM.\n\n295\n00:14:02.700 --> 00:14:09.030\nIf the tools weren't installed, you can\nright click the VM > Power > Power off.\n\n296\n00:14:09.030 --> 00:14:09.940\nBut what's that gonna do?\n\n297\n00:14:09.940 --> 00:14:12.070\nThat's gonna yank\nthe power plug out of it.\n\n298\n00:14:12.070 --> 00:14:15.740\nBut see I've only got\nShut Down Guest OS or Restart Guest OS.\n\n299\n00:14:15.740 --> 00:14:16.870\nThat's graceful.\n\n300\n00:14:16.870 --> 00:14:20.020\nIt's gonna reach out to the Guest OS and\nsay could you please restart.\n\n301\n00:14:20.020 --> 00:14:21.680\nAnd then it will restart on it's own.\n\n302\n00:14:21.680 --> 00:14:25.510\nThat's what we want, that's art of\nVMWare tools gets us, right, and\n\n303\n00:14:25.510 --> 00:14:28.700\nyou'll see other options like\nthe guest OS options here.\n\n304\n00:14:28.700 --> 00:14:30.860\nWe can unmount the VMWare tools and\n\n305\n00:14:30.860 --> 00:14:35.170\nso our now is able to talk\nwith that guest a little bit.\n\n306\n00:14:35.170 --> 00:14:37.110\nSo I'm gonna give this a shot here.\n\n307\n00:14:37.110 --> 00:14:41.770\nI'm gonna go to power and\nrestart guest os and see if that works.\n\n308\n00:14:41.770 --> 00:14:44.990\nAnd, you know, if I had taken\nthe time to read that message\n\n309\n00:14:44.990 --> 00:14:48.330\nit was actually telling me that\nit wasn't able to do the restart.\n\n310\n00:14:48.330 --> 00:14:50.120\nBut it did it,\nthat was a graceful shut down.\n\n311\n00:14:50.120 --> 00:14:53.830\nI saw the Linux stuff kind of churn along\nthere, it did the graceful restart.\n\n312\n00:14:53.830 --> 00:14:58.150\nSo Once this is done, I'm now gonna have\nmy full VM Ware Tools functionality,\n\n313\n00:14:58.150 --> 00:14:59.720\nbut definitely something to check.\n\n314\n00:14:59.720 --> 00:15:00.890\nBut that's not what you asked, Wes.\n\n315\n00:15:00.890 --> 00:15:04.780\nI kind of got side tracked cuz you asked\nif there were other options, right?\n\n316\n00:15:04.780 --> 00:15:06.410\nNow that the tools are installed,\n\n317\n00:15:06.410 --> 00:15:11.110\nonce they get detected here, now I'll be\nable to start tweaking those settings so\n\n318\n00:15:11.110 --> 00:15:16.890\nthat if I go into my virtual machine, and\nI go to Manage>VM Options>VMware Tools.\n\n319\n00:15:16.890 --> 00:15:20.520\nThese will actually mean something now.\n\n320\n00:15:20.520 --> 00:15:25.560\nSo when I come in here to VMware Tools,\n\n321\n00:15:25.560 --> 00:15:29.050\nnow I'll be able to adjust these\nsettings to mean something.\n\n322\n00:15:29.050 --> 00:15:32.140\nSee how some of these the power\noperations I still can't choose.\n\n323\n00:15:32.140 --> 00:15:35.170\nAnd that's because the system is still\nrebooting the tools on fully loaded and\n\n324\n00:15:35.170 --> 00:15:36.920\nsame thing with these other options but\n\n325\n00:15:36.920 --> 00:15:39.210\nI'll be able to start checking\nthose in getting them set.\n\n326\n00:15:39.210 --> 00:15:41.880\nI can tell it to check for\nupgrades and those will start to work.\n\n327\n00:15:41.880 --> 00:15:45.040\nSo that's pretty much it\non the VMware tool site.\n\n328\n00:15:45.040 --> 00:15:47.974\nBut you'll notice there's a lot of other\nstuff in here that's not necessarily\n\n329\n00:15:47.974 --> 00:15:48.863\nVMware tools related.\n\n330\n00:15:48.863 --> 00:15:53.575\nSo like the power management options\nup here the remote console options and\n\n331\n00:15:53.575 --> 00:15:56.503\ngeneral options,\nall of these other things.\n\n332\n00:15:56.503 --> 00:16:00.001\nThese are related to the advanced\nconfiguration of the virtual machines.\n\n333\n00:16:00.001 --> 00:16:03.000\nAnd let's run through some of these\ncuz I know a lot of them is not\n\n334\n00:16:03.000 --> 00:16:06.240\nnecessarily super popular, so\nit will make a lot of sense, right?\n\n335\n00:16:06.240 --> 00:16:08.690\nLike here, VMware remote console options.\n\n336\n00:16:08.690 --> 00:16:10.980\nActually let me just, I'm gonna edit\nthis so we get the edit screen.\n\n337\n00:16:10.980 --> 00:16:13.590\nIt's a little easier to\nsee on the edit screen.\n\n338\n00:16:13.590 --> 00:16:15.420\nSo when I go here under VM options and\n\n339\n00:16:15.420 --> 00:16:17.970\nwe take a look at it,\nthe VMware remote console.\n\n340\n00:16:17.970 --> 00:16:22.150\nAll right, see how it says lock the guest\noperating system when the last remote user\n\n341\n00:16:22.150 --> 00:16:23.280\ndisconnects.\n\n342\n00:16:23.280 --> 00:16:26.560\nIf you got people remotely\nconnecting to the virtual machine\n\n343\n00:16:26.560 --> 00:16:28.292\nwhat's the first thing they're gonna do?\n\n344\n00:16:28.292 --> 00:16:30.690\nThey’re gonna unlock the screen or\nlog in with their user account and\n\n345\n00:16:30.690 --> 00:16:31.800\nstart to work with it.\n\n346\n00:16:31.800 --> 00:16:33.230\nWell, if they disconnect,\n\n347\n00:16:33.230 --> 00:16:35.800\nwhat happens to the next person\nwho connects to the console.\n\n348\n00:16:35.800 --> 00:16:38.680\nConsole's already logged in,\nlogged in as a different user.\n\n349\n00:16:38.680 --> 00:16:39.840\nAnd so you can tell it hey,\n\n350\n00:16:39.840 --> 00:16:44.430\nwhen somebody connects if the last person\ndisconnects go ahead and lock the screen.\n\n351\n00:16:44.430 --> 00:16:46.980\nThat way when somebody else remotely\nconnects they'll see the lock screen and\n\n352\n00:16:46.980 --> 00:16:48.470\nthey'll have to authenticate.\n\n353\n00:16:48.470 --> 00:16:53.430\nEither as themselves or while a user\nwith sufficient permission to kick off\n\n354\n00:16:53.430 --> 00:16:54.800\nthe other people so we can try that up.\n\n355\n00:16:54.800 --> 00:16:58.490\nThat only works if the VM were chose and\ninstalled, mine is still loading so\n\n356\n00:16:58.490 --> 00:16:59.390\nit's all great out for me.\n\n357\n00:17:00.400 --> 00:17:02.490\nThen you've got power management, right?\n\n358\n00:17:02.490 --> 00:17:05.888\nPower management says if we shut\ndown the host operating system,\n\n359\n00:17:05.888 --> 00:17:10.046\nif the host operating system goes into\nthe standby, what happens to the guest?\n\n360\n00:17:10.046 --> 00:17:12.427\nDoes the guest guest\ngo into stand by also?\n\n361\n00:17:12.427 --> 00:17:15.239\nOr do we suspend the Virtual Machine?\n\n362\n00:17:15.239 --> 00:17:18.482\nTake its RAM right at the hard drive and\npower it off,\n\n363\n00:17:18.482 --> 00:17:21.760\nso I can choose between\nthose different behaviors.\n\n364\n00:17:21.760 --> 00:17:22.927\nWe've got boot options.\n\n365\n00:17:22.927 --> 00:17:26.437\nWhen the virtual machine boots up,\nwhat is it do?\n\n366\n00:17:26.437 --> 00:17:29.799\nAnd the default is its going to\nbe using its own little bios,\n\n367\n00:17:29.799 --> 00:17:33.310\nwe saw the NV RAM file earlier,\nand then is there a boot delay?\n\n368\n00:17:33.310 --> 00:17:35.180\nWhy would I want a boot delay?\n\n369\n00:17:35.180 --> 00:17:39.530\nWell, let's say that I've got\n15 guests on this one host and\n\n370\n00:17:39.530 --> 00:17:42.550\nI have them all set to\nautomatically start up.\n\n371\n00:17:42.550 --> 00:17:44.520\nWhen I power on that host.\n\n372\n00:17:44.520 --> 00:17:47.070\nI'm gonna have 15 machines all\ntrying to boot at the same time,\n\n373\n00:17:47.070 --> 00:17:48.390\nthat's a lot of disk I/O.\n\n374\n00:17:48.390 --> 00:17:51.558\nServers rarely generate more disk\nI/O than they do during boot time.\n\n375\n00:17:51.558 --> 00:17:55.303\nSo I might set a delay and say, for\nexample, I want these three servers to\n\n376\n00:17:55.303 --> 00:17:59.249\npower on immediately, these other three\nservers boot up after one minute.\n\n377\n00:17:59.249 --> 00:18:01.223\nThese other servers boot\nup after five minutes and\n\n378\n00:18:01.223 --> 00:18:04.040\nthat kind of staggers that boot process,\nyou can set a delay.\n\n379\n00:18:04.040 --> 00:18:10.120\nOn that Virtual Machine to start up, and\nmake it a little less disk-intensive.\n\n380\n00:18:10.120 --> 00:18:12.030\nWe can force BIOS setup,\n\n381\n00:18:12.030 --> 00:18:14.730\nwhich basically makes you do the hardware\ndetection every time it boots.\n\n382\n00:18:14.730 --> 00:18:17.600\nWhere it looks for how much memory\nyou have and what disks are present.\n\n383\n00:18:17.600 --> 00:18:20.139\nI don't know exactly\nwhy you would do that.\n\n384\n00:18:20.139 --> 00:18:23.987\nI guess, if you wanna get into the BIOS,\nit's next to impossible to hit delete on\n\n385\n00:18:23.987 --> 00:18:26.661\nyour keyboard while it's\nbooting cuz VMs boot so fast.\n\n386\n00:18:26.661 --> 00:18:28.691\nSo this would force us\nto get into BIOS and\n\n387\n00:18:28.691 --> 00:18:32.110\nnot have to worry about hitting\na hotkey real quick while it booted.\n\n388\n00:18:32.110 --> 00:18:33.410\nField boot recovery.\n\n389\n00:18:33.410 --> 00:18:35.850\nIf it crashes during boot,\nif it doesn't come up,what do we do?\n\n390\n00:18:35.850 --> 00:18:37.230\nDo we just try and reboot it?\n\n391\n00:18:37.230 --> 00:18:37.939\nRight, we can turn that on.\n\n392\n00:18:37.939 --> 00:18:40.208\nThe default is it just locks up and\nthat's it.\n\n393\n00:18:40.208 --> 00:18:43.454\nAnd that may be better for us cuz now we\ncan see the error versus it just sitting\n\n394\n00:18:43.454 --> 00:18:44.990\nthere continually trying to boot.\n\n395\n00:18:46.580 --> 00:18:48.850\nThen as we dig down a little\ndeeper there's one last option for\n\n396\n00:18:48.850 --> 00:18:51.630\nFibre Channel NPIV and\nyou'll see where we can expand that and\n\n397\n00:18:51.630 --> 00:18:54.620\nwe can turn it on or\noff if we wanna use NPIV.\n\n398\n00:18:54.620 --> 00:18:56.670\n>> Now I've been following\nyou up until this point, Don.\n\n399\n00:18:56.670 --> 00:18:58.960\nMost of these seem\nfairly straight forward,\n\n400\n00:18:58.960 --> 00:19:01.790\nbut MP, I can't even say the acronym here.\n\n401\n00:19:01.790 --> 00:19:04.620\nMPIV, what is that?\n\n402\n00:19:04.620 --> 00:19:07.140\n>> MPIV, we talk about fiber\nchannel in this series.\n\n403\n00:19:07.140 --> 00:19:08.140\nWe don't really dive into it.\n\n404\n00:19:08.140 --> 00:19:11.370\nIn the fiber channel world\nfiber channel switches\n\n405\n00:19:11.370 --> 00:19:14.120\nidentify nodes on the network channel\nby assigning what is called an n_port.\n\n406\n00:19:14.120 --> 00:19:17.160\nIt's n, underscore port which I guess\nthey don't really write here on\n\n407\n00:19:17.160 --> 00:19:18.310\nthe screen anywhere do they.\n\n408\n00:19:18.310 --> 00:19:21.705\nBut anyhow, it's called an n_port,\nand it basically stands for a node.\n\n409\n00:19:21.705 --> 00:19:23.251\nOne node is plugged into one port.\n\n410\n00:19:23.251 --> 00:19:24.896\nIf you can think about a physical switch,\n\n411\n00:19:24.896 --> 00:19:27.130\nyou have one computer\nplugged into one port.\n\n412\n00:19:27.130 --> 00:19:29.450\nBut with NVIV what you can do,\n\n413\n00:19:29.450 --> 00:19:34.950\nyou can have a Virtual Machine that seize\nthe SAN that connects directly the SAN.\n\n414\n00:19:34.950 --> 00:19:38.760\nSo a virtual machine instead of connecting\nto a VMDK a virtual hard drive,\n\n415\n00:19:38.760 --> 00:19:40.350\nit could connect to the SAN itself.\n\n416\n00:19:40.350 --> 00:19:42.630\nWe do that when we want high disk IO.\n\n417\n00:19:42.630 --> 00:19:47.355\nWell, the problem there is your host\nis what's plugged into the SAN not\n\n418\n00:19:47.355 --> 00:19:48.861\nthe virtual machine.\n\n419\n00:19:48.861 --> 00:19:51.426\nSo when you have the virtual\nmachine reaching out the SAN and\n\n420\n00:19:51.426 --> 00:19:53.231\nyou have the host reaching out to the SAN.\n\n421\n00:19:53.231 --> 00:19:56.292\nTechnically, you've got two\ndifferent nodes on the same\n\n422\n00:19:56.292 --> 00:19:58.861\nport which is not normally allowed,\nall right?\n\n423\n00:19:58.861 --> 00:20:01.080\nNPIV allows that.\n\n424\n00:20:01.080 --> 00:20:08.310\nNPIV is the nport or\nnode port identity or ID virtualization.\n\n425\n00:20:08.310 --> 00:20:09.980\nI kinda screwed that up, didn't I?\n\n426\n00:20:09.980 --> 00:20:12.140\nNport ID virtualization.\n\n427\n00:20:12.140 --> 00:20:13.320\nThat's what it stands for.\n\n428\n00:20:13.320 --> 00:20:15.860\nBut n port is short for node,\nand ID is short for identity.\n\n429\n00:20:15.860 --> 00:20:19.920\nSo if we wanted to go all out, it would\nbe node port identity virtualization.\n\n430\n00:20:19.920 --> 00:20:24.250\nSo that's what NPIV is and\nif you turn it on, you can define.\n\n431\n00:20:24.250 --> 00:20:27.540\nThe worldwide names are going to be\nallowed to be shown on this link,\n\n432\n00:20:27.540 --> 00:20:30.760\nto the switch and\nthe switch will see that and recognize it.\n\n433\n00:20:30.760 --> 00:20:32.740\nI got more than one note\nof the same interface.\n\n434\n00:20:32.740 --> 00:20:35.330\nThat’s not allowed by\na lot of fiber switches.\n\n435\n00:20:35.330 --> 00:20:36.630\nSo we have to turn that support on.\n\n436\n00:20:36.630 --> 00:20:39.320\nSo that’s what NPIV is and\nyou got that sitting right here.\n\n437\n00:20:39.320 --> 00:20:41.260\nIf you don't have a Fiber Channel SAN.\n\n438\n00:20:41.260 --> 00:20:42.410\nThis is useless to you.\n\n439\n00:20:42.410 --> 00:20:43.610\nYou don't worry about it.\n\n440\n00:20:43.610 --> 00:20:45.830\nEven if you do have a Fiber Channel SAN.\n\n441\n00:20:45.830 --> 00:20:47.840\nIf you’ve got a Fiber Channel SAN but\n\n442\n00:20:47.840 --> 00:20:51.420\nyour VMs are just using regular VMDKs\ntoward stored in the data store.\n\n443\n00:20:51.420 --> 00:20:52.860\nThen this doesn't matter to you.\n\n444\n00:20:52.860 --> 00:20:57.310\nThis really only matters when you're\ndirectly exposing sun drives to the VM.\n\n445\n00:20:57.310 --> 00:21:00.290\nSo basically the VM is\nbypassing the host of us and\n\n446\n00:21:00.290 --> 00:21:02.040\ngoing straight to the sun itself.\n\n447\n00:21:02.040 --> 00:21:03.630\nThat's when PIV comes in.\n\n448\n00:21:03.630 --> 00:21:06.900\nSo most people haven't worked that I'm\nnot surprising you haven't heard that\n\n449\n00:21:06.900 --> 00:21:10.150\none where is in it just one of\nthe advanced options that we got here that\n\n450\n00:21:10.150 --> 00:21:11.590\nwe might need to tweak.\n\n451\n00:21:11.590 --> 00:21:14.870\nAnd it certainly could turn up on the exam\nso it's good to know what that is.\n\n452\n00:21:16.350 --> 00:21:19.310\nAll right so\nwe've got our VMWare tools installed,\n\n453\n00:21:19.310 --> 00:21:21.880\nwe've seen some of the advanced\noptions that we can tweak in here.\n\n454\n00:21:21.880 --> 00:21:24.450\nThere are a few other things\nthat we'll see later on\n\n455\n00:21:24.450 --> 00:21:29.150\nI'm curious to see if my VMware\ntools ever did complete or\n\n456\n00:21:29.150 --> 00:21:32.110\nif it still shows,\nstill shows upgrade in progress.\n\n457\n00:21:32.110 --> 00:21:34.120\nI wonder what the heck it\nthinks it's upgrading, but\n\n458\n00:21:34.120 --> 00:21:35.520\nthe VM Ware tools are working.\n\n459\n00:21:35.520 --> 00:21:38.450\nWe saw that I was able to do that\ngraceful shutdown, which was nice.\n\n460\n00:21:38.450 --> 00:21:42.035\nAnd I should be able to do QUIS\nsnapshots now, assuming that is working.\n\n461\n00:21:42.035 --> 00:21:43.550\nSo if I go and take a snapshot.\n\n462\n00:21:43.550 --> 00:21:47.510\nNo, it is still not showing, so\nmy VMware tools are not fully installed.\n\n463\n00:21:47.510 --> 00:21:50.130\nThis is a good way to recognize\nthat I've got a problem, right,\n\n464\n00:21:50.130 --> 00:21:52.830\nthere is something wrong with my VMware\ntools, so I'll need to go in and\n\n465\n00:21:52.830 --> 00:21:56.290\ntry to find out what is going on there,\nwhy those tools aren't Talking.\n\n466\n00:21:56.290 --> 00:21:59.780\nI did restart my virtual machine,\nbut I did a hot restart.\n\n467\n00:21:59.780 --> 00:22:02.190\nI might do a cold restart\nwhere I actually shut it down.\n\n468\n00:22:02.190 --> 00:22:03.340\nSometimes you can do a hot restart.\n\n469\n00:22:03.340 --> 00:22:06.460\nIt just doesn't reinitialize those\ncommunications, and so that would be my\n\n470\n00:22:06.460 --> 00:22:11.930\nnext step is to come in here and again,\ntry and do a graceful shut down of the OS.\n\n471\n00:22:11.930 --> 00:22:15.010\nSo I'm gonna gracefully shut\ndown that web server and\n\n472\n00:22:15.010 --> 00:22:16.540\nthere it goes,\nit just kicked my out of my console.\n\n473\n00:22:17.720 --> 00:22:20.490\nAnd then, start it back up again and\nlet those run.\n\n474\n00:22:20.490 --> 00:22:22.880\nAnd this way, if there's\na problem with the VMware tools,\n\n475\n00:22:22.880 --> 00:22:24.420\nwe'll see it in the logs when it boots up.\n\n476\n00:22:24.420 --> 00:22:28.431\nSo that machine is now turned off and\nI can come back and start it again.\n\n477\n00:22:28.431 --> 00:22:31.392\nIf I can get into the right menu,\nand it'll boot up.\n\n478\n00:22:31.392 --> 00:22:34.660\nAnd hopefully, we'll see those\nVMware tools clean themselves up.\n\n479\n00:22:34.660 --> 00:22:38.492\nAnd see how the VMware tools show\nas not running right now but\n\n480\n00:22:38.492 --> 00:22:41.040\nit does show version 10246.\n\n481\n00:22:41.040 --> 00:22:42.560\nSo it is seeing the tools,\n\n482\n00:22:42.560 --> 00:22:45.570\nit is communicating, it just got\nstuck in some kind of upgrade loop.\n\n483\n00:22:45.570 --> 00:22:47.875\nSo we'll let that reboot and\nsee if it gets happy but\n\n484\n00:22:47.875 --> 00:22:50.562\nonce the tools are installed and\nmostly maintenance free.\n\n485\n00:22:50.562 --> 00:22:53.112\nIn fact, as long as you choose\nthe upgrade options, right,\n\n486\n00:22:53.112 --> 00:22:55.765\nwhich we saw where we could set\nthat to automatically upgrade.\n\n487\n00:22:55.765 --> 00:22:57.880\nThen you usually don't have to\nworry about the tools ever again.\n\n488\n00:22:57.880 --> 00:23:00.200\nThey're just in place and they run,\nbut you definitely want them.\n\n489\n00:23:01.360 --> 00:23:05.240\nAll right, well, Wes, on my notes here\nI wanted to talk about V apps and\n\n490\n00:23:05.240 --> 00:23:07.420\nI wanted to talk about clones and\ntemplates.\n\n491\n00:23:07.420 --> 00:23:09.960\nBut we might need to move\nthat into another episode.\n\n492\n00:23:09.960 --> 00:23:12.984\nLet's not do a part four on this one,\nbecause I think a trilogy is enough.\n\n493\n00:23:12.984 --> 00:23:16.012\nBut know that once you've\ncreated your virtual machines,\n\n494\n00:23:16.012 --> 00:23:19.648\neverything we've saw in the last three\nepisodes is really all we need to\n\n495\n00:23:19.648 --> 00:23:22.146\ncreate a virtual machine and\nget it up and going.\n\n496\n00:23:22.146 --> 00:23:25.380\nBut there's a few other time\nsaving techniques that we can use.\n\n497\n00:23:25.380 --> 00:23:27.090\nThere's virtual apps that\nwe are gonna learn about,\n\n498\n00:23:27.090 --> 00:23:29.820\nwhere we can group virtual\nmachines together.\n\n499\n00:23:29.820 --> 00:23:34.860\nAnd there's cloning and templating which\nwe can use to really quickly deploy out\n\n500\n00:23:34.860 --> 00:23:37.020\nVMs, so we're gonna talk about those two.\n\n501\n00:23:37.020 --> 00:23:39.750\nThey're completely optional, you don't\nhave to use VFs, you don't have to use\n\n502\n00:23:39.750 --> 00:23:43.000\nclones and templates at all and\nyou have full functionality of your VMs.\n\n503\n00:23:43.000 --> 00:23:45.370\nEverything we saw in\nthe last three episodes but\n\n504\n00:23:45.370 --> 00:23:47.940\nboy is it nice to be able to\nhave these time saving tools.\n\n505\n00:23:47.940 --> 00:23:50.330\nSo we're gonna see those in another\nepisode, definitely stay tuned for\n\n506\n00:23:50.330 --> 00:23:50.830\nthat one.\n\n507\n00:23:50.830 --> 00:23:52.130\n>> I was gonna say,\nI don't wanna sit here and\n\n508\n00:23:52.130 --> 00:23:54.570\nstate the obvious because you\nguys can't see off camera.\n\n509\n00:23:54.570 --> 00:23:57.442\nOver there giving Don,\nthe evil eye, saying, the clock,\n\n510\n00:23:57.442 --> 00:23:58.888\nwe've gotta wrap this one up.\n\n511\n00:23:58.888 --> 00:24:02.442\nAnd that looks like what we're gonna do\nhere Don, but before we do, do you got any\n\n512\n00:24:02.442 --> 00:24:05.843\nadditional information when it comes\nto creating your virtual machines, or\n\n513\n00:24:05.843 --> 00:24:07.385\neven the VMWare tools in general?\n\n514\n00:24:07.385 --> 00:24:09.090\n>> Make sure they do work.\n\n515\n00:24:09.090 --> 00:24:13.030\nMine actually are working now so I can\nsee that my VMware tools are showing as\n\n516\n00:24:13.030 --> 00:24:18.020\nRunning version 10.2.4.6 current, so don't\njust install them and assume they work.\n\n517\n00:24:18.020 --> 00:24:21.760\nDouble check, make sure they actually show\nas running inside the user end consul\n\n518\n00:24:21.760 --> 00:24:24.460\nbecause otherwise they melt before\nthey're working and test it out.\n\n519\n00:24:24.460 --> 00:24:26.790\nMake sure you can do that\ngraceful shut down but\n\n520\n00:24:26.790 --> 00:24:28.880\nonce the tools are in place you\ndon't have to worry about it.\n\n521\n00:24:28.880 --> 00:24:30.970\nBe careful because some distros,\n\n522\n00:24:30.970 --> 00:24:35.040\nlike Ubuntu, are now starting to package\nin the VMware tools with the distro.\n\n523\n00:24:35.040 --> 00:24:36.850\nSo you don't necessary\nneed to install them.\n\n524\n00:24:36.850 --> 00:24:39.390\nBring it up inside of V center and\nsee if it shows up.\n\n525\n00:24:39.390 --> 00:24:40.800\nIt may already be clean, so\n\n526\n00:24:40.800 --> 00:24:43.420\ndon't assume that you just have\nto go in there and install it.\n\n527\n00:24:43.420 --> 00:24:47.025\n>> Well, Don, we do appreciate you\nshowing us that patience is a virtue.\n\n528\n00:24:47.025 --> 00:24:47.530\n>> [LAUGH]\n>> And\n\n529\n00:24:47.530 --> 00:24:49.570\nwe also appreciate you being\nin the studio with us.\n\n530\n00:24:49.570 --> 00:24:51.180\nAnd we appreciate you the viewer watching.\n\n531\n00:24:51.180 --> 00:24:53.837\nSigning out for IT Pro TV,\nI've been your host Wes Brian.\n\n532\n00:24:53.837 --> 00:24:54.874\n>> And I'm Don Pezet.\n\n533\n00:24:54.874 --> 00:24:55.777\n>> We'll see you next time.\n\n534\n00:24:55.777 --> 00:25:04.700\n[MUSIC]\n\n",
          "vimeoId": "169851351"
        },
        {
          "description": "In this episode, Wes and Don introduce creating and deploying vApps inside of vCenter. They also discuss creating and managing virtual machine clones and templates.",
          "length": "2099",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-2-vapps_clones_and_templates-060316-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-2-vapps_clones_and_templates-060316-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-2-vapps_clones_and_templates-060316-1-sm.jpg",
          "title": "vApps Clones and Templates",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.675 --> 00:00:14.396\nWelcome back to another great\nepisode here at ITProTV.\n\n3\n00:00:14.396 --> 00:00:15.745\nI'm your host Wes Bryan, and\n\n4\n00:00:15.745 --> 00:00:19.180\nin today's episode we're continuing\nthrough our series in VMware.\n\n5\n00:00:19.180 --> 00:00:19.916\nThat's right,\n\n6\n00:00:19.916 --> 00:00:23.445\nwe're coming back at you with more\nVMware certified professional version 6.\n\n7\n00:00:23.445 --> 00:00:26.330\nWe've been looking at virtual machines\nin the last few episodes here.\n\n8\n00:00:26.330 --> 00:00:28.965\nJoining me back in the studios is\nnone other than Mr. Don Pezet.\n\n9\n00:00:28.965 --> 00:00:29.890\nDon, how you doing sir?\n\n10\n00:00:29.890 --> 00:00:30.793\n>> I'm doing great Wes.\n\n11\n00:00:30.793 --> 00:00:34.034\nWe need to dive right back into virtual\nmachines and if you watch our last few\n\n12\n00:00:34.034 --> 00:00:37.131\nepisodes you know we cover things\nlike how to create a virtual machine.\n\n13\n00:00:37.131 --> 00:00:40.032\nAnd all the various settings that\nwe can put in place on the VMs and\n\n14\n00:00:40.032 --> 00:00:41.980\nstuff that we can do with them.\n\n15\n00:00:41.980 --> 00:00:45.370\nWell in this episode we're gonna kind\nof continue on except instead of making\n\n16\n00:00:45.370 --> 00:00:48.670\nchanges to the virtual machine we're gonna\ntalk about how we can make changes go\n\n17\n00:00:48.670 --> 00:00:51.730\ngroups of VMs or\neven just to save some time.\n\n18\n00:00:51.730 --> 00:00:56.120\nWe got a few different technologies to\ncover here that are certainly optional,\n\n19\n00:00:56.120 --> 00:00:57.480\ncertainly ones you don't have to do.\n\n20\n00:00:57.480 --> 00:01:00.450\nWe've already cover everything you need\nto know to create a virtual machine.\n\n21\n00:01:00.450 --> 00:01:03.750\nBut in real life when there are certain\nthings we can put in place that will save\n\n22\n00:01:03.750 --> 00:01:07.240\nus time and make it more efficient\nto manage multiple virtual machines.\n\n23\n00:01:07.240 --> 00:01:10.662\nAnd the first one that I want to talk\nabout is called a technology that's\n\n24\n00:01:10.662 --> 00:01:11.413\ncalled a vApp.\n\n25\n00:01:11.413 --> 00:01:13.818\nVApp is short for a virtual application.\n\n26\n00:01:13.818 --> 00:01:19.800\nAnd what vApps let us do is it let us take\nvirtual machines and group them together.\n\n27\n00:01:19.800 --> 00:01:21.910\nNow why would I wanna group VMs together?\n\n28\n00:01:21.910 --> 00:01:24.200\nWell normally it's because I\nwanna manage them together.\n\n29\n00:01:24.200 --> 00:01:27.910\nIf I have virtual machines that are\nrelated to each other then I might wanna\n\n30\n00:01:27.910 --> 00:01:33.390\nbe able to manage the resources or\ndo things like that to them as a group.\n\n31\n00:01:33.390 --> 00:01:37.290\nAnd I know they are related,\nwhat does that even mean?\n\n32\n00:01:37.290 --> 00:01:39.710\nWell what we've got to do, we've got\nto think about applications today a lot\n\n33\n00:01:39.710 --> 00:01:41.730\ndifferent than the old applications.\n\n34\n00:01:41.730 --> 00:01:45.104\nBack in the golden day of computing,\nif I had an application.\n\n35\n00:01:45.104 --> 00:01:48.372\nLet's say,\nI wanted to bring up a email server,\n\n36\n00:01:48.372 --> 00:01:53.157\nthen what I likely did is brought up\none physical server that ran an email\n\n37\n00:01:53.157 --> 00:01:57.455\nserver application on it and\nthat was the whole solution.\n\n38\n00:01:57.455 --> 00:02:02.250\nSo let's see if we can old school here,\nif I wanted Lotus Domino, I brought up one\n\n39\n00:02:02.250 --> 00:02:06.160\nserver, I put Lotus Domino on there and my\nclients connected to it and that was it.\n\n40\n00:02:06.160 --> 00:02:10.220\nThat server was an island,\nit was standalone.\n\n41\n00:02:10.220 --> 00:02:13.190\nEverything that it needed was\nright there in that one server.\n\n42\n00:02:13.190 --> 00:02:16.110\nIf I wanted to get Domino fired up,\nI'd push the power button on the server.\n\n43\n00:02:16.110 --> 00:02:18.930\nIf I wanted to shut it down,\nI'd push the power button on the server.\n\n44\n00:02:18.930 --> 00:02:24.130\nIt was all independent, but in today's\nworld applications are rarely like that.\n\n45\n00:02:24.130 --> 00:02:26.921\nIf I bring up a mail server today,\nI need a plan for scale,\n\n46\n00:02:26.921 --> 00:02:28.153\nI need a plan for growth.\n\n47\n00:02:28.153 --> 00:02:32.530\nWe have many more users today than\nwe did back in the golden day.\n\n48\n00:02:32.530 --> 00:02:35.150\nSo what we have now is if I\nwere to bring up a mail server,\n\n49\n00:02:35.150 --> 00:02:38.650\nI might have one server\nthat's an SMTP server.\n\n50\n00:02:38.650 --> 00:02:40.163\nIt's sending and receiving email,\n\n51\n00:02:40.163 --> 00:02:42.422\nI might have another server\nthat's a mailbox server.\n\n52\n00:02:42.422 --> 00:02:45.220\nIt's like a big database and\nthat's where all mail is being stored.\n\n53\n00:02:45.220 --> 00:02:50.270\nI might have another server\nthat is doing spam filtering or\n\n54\n00:02:50.270 --> 00:02:53.120\nregulatory compliance,\nemail archiving, whatever.\n\n55\n00:02:53.120 --> 00:02:55.320\nI might have another server\nthat's a web server,\n\n56\n00:02:55.320 --> 00:02:58.900\nthat provides web based client\nactivity for my end users.\n\n57\n00:02:58.900 --> 00:03:00.980\nSo they can just go to a web page\nto access their email instead of\n\n58\n00:03:00.980 --> 00:03:01.910\nhaving a client.\n\n59\n00:03:01.910 --> 00:03:03.160\nSo now I'm up to four servers.\n\n60\n00:03:03.160 --> 00:03:08.580\nI could have four servers powering my\nenvironment and are they independent?\n\n61\n00:03:08.580 --> 00:03:12.730\nNo, if one of them were to fail,\nthe whole environment breaks down.\n\n62\n00:03:12.730 --> 00:03:15.550\nIf the mailbox database\nserver goes offline,\n\n63\n00:03:15.550 --> 00:03:18.850\ndoes it matter that my web server is up\nand people can get to the web client?\n\n64\n00:03:18.850 --> 00:03:20.700\nNo, cuz they can't get to their mailbox.\n\n65\n00:03:20.700 --> 00:03:21.940\nIf the web client goes down,\n\n66\n00:03:21.940 --> 00:03:25.240\ndoes it matter that the database is up\nbecause the clients can't get to it?\n\n67\n00:03:25.240 --> 00:03:28.050\nWell you could argue that incoming and\noutgoing email could still flow,\n\n68\n00:03:28.050 --> 00:03:31.470\nbut if people can't get to their mailbox,\nthat doesn't do them any good.\n\n69\n00:03:31.470 --> 00:03:34.220\nSo these are called related servers,\n\n70\n00:03:34.220 --> 00:03:37.725\nthere's four servers in my email solution,\nthey're all important.\n\n71\n00:03:37.725 --> 00:03:41.715\nEach one provides a role and\nI need all four of them to work together.\n\n72\n00:03:41.715 --> 00:03:44.925\nThe problem is vSphere\nhas no way to know that.\n\n73\n00:03:44.925 --> 00:03:46.995\nThe guys at VMware that\nwrote all this software,\n\n74\n00:03:46.995 --> 00:03:49.145\nthey don't know what applications you run.\n\n75\n00:03:49.145 --> 00:03:50.475\nThey've created the infrastructure for\n\n76\n00:03:50.475 --> 00:03:53.475\nyou to use, but\nthey don't know how you're gonna use it.\n\n77\n00:03:53.475 --> 00:03:59.005\nAnd when you bring up two servers, you\nmight have one that's called Mail Web 01,\n\n78\n00:03:59.005 --> 00:04:01.297\nand another that's Mail DB 01.\n\n79\n00:04:01.297 --> 00:04:04.180\nBut they don't know those are email\nservers, they have no clue.\n\n80\n00:04:04.180 --> 00:04:07.910\nSo we have to have a way to tell VMware,\ntell vSphere that hey,\n\n81\n00:04:07.910 --> 00:04:11.290\nthese two servers are related,\nthey're tied to each other.\n\n82\n00:04:11.290 --> 00:04:14.310\nIf I'm powering one on,\nI need the other one on too.\n\n83\n00:04:14.310 --> 00:04:19.150\nIf I'm doing VMotion to move one from\none side of hardware to another,\n\n84\n00:04:19.150 --> 00:04:22.390\nI wanna move them together,\nI wanna bring them along with each other.\n\n85\n00:04:22.390 --> 00:04:28.245\nAnd that's a big part of having a virtual\napp, it's grouping these things together.\n\n86\n00:04:28.245 --> 00:04:30.700\nFortunately, it's pretty easy to do this.\n\n87\n00:04:30.700 --> 00:04:33.900\nIf we dive into the vCenter screen,\nwe can get this created.\n\n88\n00:04:33.900 --> 00:04:37.180\nNow I’m doing it in vCenter here, which\nmeans it can work across multiple servers.\n\n89\n00:04:37.180 --> 00:04:39.013\nYou can do this on\nstandalone ESX boxes also.\n\n90\n00:04:39.013 --> 00:04:43.000\nSo if you just have a regular ESXi box,\nyou can still create a vApp.\n\n91\n00:04:43.000 --> 00:04:44.590\nYou lose some of the functionality,\n\n92\n00:04:44.590 --> 00:04:47.400\nobviously its not gonna help you with\nVMotion because you're standalone.\n\n93\n00:04:47.400 --> 00:04:51.146\nBut as far as being able to manage\nresources, power on, power off,\n\n94\n00:04:51.146 --> 00:04:54.922\nthat kind of stuff, you'll be able\nto the do right within the vApp.\n\n95\n00:04:54.922 --> 00:04:57.860\nAnd what I can do is I can browse\ninto my host and clusters.\n\n96\n00:04:57.860 --> 00:05:03.090\nAnd in the virtual machine episodes we\ncreated two VMs, a database server and\n\n97\n00:05:03.090 --> 00:05:05.520\na web server so\nthese are the two that we created.\n\n98\n00:05:05.520 --> 00:05:10.850\nNow as far as vSphere's concerned\nthose are two independent machines.\n\n99\n00:05:10.850 --> 00:05:14.850\nIf one is up, that doesn't effect\nthe other one in any way or\n\n100\n00:05:14.850 --> 00:05:17.340\nif the other one is shut down\nit doesn't matter right.\n\n101\n00:05:17.340 --> 00:05:19.912\nThese are independent machine and\n\n102\n00:05:19.912 --> 00:05:24.619\nmaybe they are, or\nmaybe this is something like Amazon.com.\n\n103\n00:05:24.619 --> 00:05:26.310\nWhen you go to Amazon.com what do you do?\n\n104\n00:05:26.310 --> 00:05:27.062\nYou go to a web page.\n\n105\n00:05:27.062 --> 00:05:31.160\nSo they've obviously got a web server, and\nthen you search their product data base.\n\n106\n00:05:31.160 --> 00:05:33.049\nAnd so they've got a product\ndata base somewhere, and\n\n107\n00:05:33.049 --> 00:05:34.855\nthen when you buy something\nyou swipe a credit card so\n\n108\n00:05:34.855 --> 00:05:36.967\nthere's some kind of payment\nprocessor in the background.\n\n109\n00:05:36.967 --> 00:05:41.322\nAnd there's more than likely business\nintelligence going on because they do\n\n110\n00:05:41.322 --> 00:05:42.530\nrecommended items.\n\n111\n00:05:42.530 --> 00:05:48.300\nDon recently bought\nX-Files season one on DVD.\n\n112\n00:05:48.300 --> 00:05:51.870\nHey, maybe you should buy season two,\nit's a recommended item.\n\n113\n00:05:51.870 --> 00:05:53.669\nThat might not be a critical component,\nif that fails,\n\n114\n00:05:53.669 --> 00:05:56.600\nmy rest of my [INAUDIBLE] might still\nwork, I just don't get a recommendation.\n\n115\n00:05:56.600 --> 00:05:59.010\nBut these are all different\ncomponents that are a part of it.\n\n116\n00:05:59.010 --> 00:06:02.360\nSo we've got to tell vSphere\nwhat's linked together.\n\n117\n00:06:02.360 --> 00:06:04.793\nLet's pick something a little more simple.\n\n118\n00:06:04.793 --> 00:06:06.262\nI'll do WordPress,\n\n119\n00:06:06.262 --> 00:06:11.007\nWordPress is the world's most\npopular content management system.\n\n120\n00:06:11.007 --> 00:06:15.630\nSomething like 30% of the Internet today\nis powered by WordPress based websites.\n\n121\n00:06:15.630 --> 00:06:19.730\nSo if I wanna deploy WordPress at\na minimum I'm gonna have two components.\n\n122\n00:06:19.730 --> 00:06:21.588\nYou can have a lot more, but\nat a minimum you'll have two.\n\n123\n00:06:21.588 --> 00:06:24.468\nYou'll have a web server which is\nwhat your clients will access.\n\n124\n00:06:24.468 --> 00:06:28.267\nAnd then your web server has to reach out\nto your data base server which is where\n\n125\n00:06:28.267 --> 00:06:30.670\nall your web page content is stored.\n\n126\n00:06:30.670 --> 00:06:34.740\nNow if the web server goes down,\npeople can't get to your site.\n\n127\n00:06:34.740 --> 00:06:37.360\nIf the database server goes down,\nthey can get to web page, but\n\n128\n00:06:37.360 --> 00:06:40.410\nall the pages are empty cuz the content\nis being served from the database.\n\n129\n00:06:40.410 --> 00:06:43.500\nSo I need both of them,\nI can't just have one.\n\n130\n00:06:43.500 --> 00:06:46.409\nThe whole thing is broken if I'm missing\neven one component, so I need them both.\n\n131\n00:06:46.409 --> 00:06:50.860\nSo I can group them together\ninto a virtual application.\n\n132\n00:06:50.860 --> 00:06:54.545\nStep one is to create the vApp, so\nI'm gonna right-click on my host up here.\n\n133\n00:06:54.545 --> 00:06:56.984\nAnd I'm gonna go up to New vAapp, and\n\n134\n00:06:56.984 --> 00:07:00.230\nif you look you'll see\nyou've got two choices.\n\n135\n00:07:00.230 --> 00:07:04.160\nNew vApp which is what I want and\nNew vApp from Library.\n\n136\n00:07:04.160 --> 00:07:06.450\nNow, I haven't talked about\nlibraries in this show yet.\n\n137\n00:07:06.450 --> 00:07:09.476\nSo this is kinda the first\ntime we've really seen it.\n\n138\n00:07:09.476 --> 00:07:15.170\nThe best way to describe a library\nis a library is a data store.\n\n139\n00:07:15.170 --> 00:07:17.900\nWe saw data stores earlier in the week\nto put our virtual machines in the data\n\n140\n00:07:17.900 --> 00:07:21.330\nstore, even ISO imagines in the data\nstore and they'd be ready to go.\n\n141\n00:07:21.330 --> 00:07:26.502\nSo if a library is a data store then why\nnot just say New vApp from a data store.\n\n142\n00:07:26.502 --> 00:07:29.902\nWell libraries are intended to be used\na little differently than data stores,\n\n143\n00:07:29.902 --> 00:07:32.130\nwith data stores we expect\nlive data to be in there.\n\n144\n00:07:32.130 --> 00:07:34.950\nI can have virtual machines in a data\nstore and actually run the virtual\n\n145\n00:07:34.950 --> 00:07:38.540\nmachines right from that data store,\nthat's the intention.\n\n146\n00:07:38.540 --> 00:07:41.910\nWith a library that's\nmore like cold storage,\n\n147\n00:07:41.910 --> 00:07:44.070\nI'm sticking things in\nthere until I need them.\n\n148\n00:07:44.070 --> 00:07:49.220\nI'm not running things from the library,\nI'm just storing them in the library.\n\n149\n00:07:49.220 --> 00:07:52.910\nAnd probably in some kind of generic\nformat that's ready to be cloned over and\n\n150\n00:07:52.910 --> 00:07:53.947\nover and over again.\n\n151\n00:07:53.947 --> 00:07:56.020\nBecause you can't always just\nclone a server a certain way.\n\n152\n00:07:56.020 --> 00:07:59.308\nSometimes you've got to take some\npreparation to get that ready.\n\n153\n00:07:59.308 --> 00:08:00.443\nSo that's what that is.\n\n154\n00:08:00.443 --> 00:08:03.503\nAnd we will see library's a little later\nbecause I want to show you guys clones and\n\n155\n00:08:03.503 --> 00:08:04.500\ntemplates this episode.\n\n156\n00:08:04.500 --> 00:08:07.040\nWe'll come back and visit library's again.\n\n157\n00:08:07.040 --> 00:08:08.850\nBut for\nright now I'm just going to do a new vApp.\n\n158\n00:08:08.850 --> 00:08:12.375\nWhen I go to create the new vApp,\nit gives me two choices,\n\n159\n00:08:12.375 --> 00:08:16.490\nI can create a new vApp or\nI can clone an existing vApp.\n\n160\n00:08:16.490 --> 00:08:18.460\nNow I know it seems kind of redundant.\n\n161\n00:08:18.460 --> 00:08:20.779\nDidn't we just see new vApp from library?\n\n162\n00:08:20.779 --> 00:08:23.324\nWhat we did and\ntechnically cloning an existing vApp,\n\n163\n00:08:23.324 --> 00:08:27.280\nthe existing vApp could be in the library,\nthis would be the same option.\n\n164\n00:08:27.280 --> 00:08:30.550\nBut this actually opens us up\nto one other option which is\n\n165\n00:08:30.550 --> 00:08:35.480\nI might have another vApp that is live and\nrunning right now.\n\n166\n00:08:35.480 --> 00:08:38.310\nAnd it's not in the library and\nI want to clone that.\n\n167\n00:08:38.310 --> 00:08:41.610\nWhat would be a scenario\nwhere we would use that?\n\n168\n00:08:41.610 --> 00:08:44.993\nMaybe one day a developer calls me and\nsays hey Don, I wanna try something out.\n\n169\n00:08:44.993 --> 00:08:46.497\nI got this new idea I\nthink it'll be great.\n\n170\n00:08:46.497 --> 00:08:49.527\nI'm gonna try it out on the site and\nI say no, no you're not, right?\n\n171\n00:08:49.527 --> 00:08:52.929\nThat's our production website, you can't\nexperiment on the production website.\n\n172\n00:08:52.929 --> 00:08:55.575\nLet me make you a clone.\n\n173\n00:08:55.575 --> 00:08:57.848\nLet me give you a sandbox environment\nwhere you can test it out.\n\n174\n00:08:57.848 --> 00:09:01.860\nAnd so\nI can clone the existing production vApp.\n\n175\n00:09:01.860 --> 00:09:05.950\nThe main one that's running\nour app I could clone that.\n\n176\n00:09:05.950 --> 00:09:09.510\nAnd if it's got a database server and\na web server and a file server and\n\n177\n00:09:09.510 --> 00:09:12.080\nwhatever else it's cloning all of that.\n\n178\n00:09:12.080 --> 00:09:15.618\nAnd I can drop it into a sandbox and\ngive the developer access.\n\n179\n00:09:15.618 --> 00:09:19.000\nNow the developer has an exact\nclone of my production vApp.\n\n180\n00:09:19.000 --> 00:09:20.580\nAnd so they can their experiment.\n\n181\n00:09:20.580 --> 00:09:23.195\nIf it works,\nthen it will work in production.\n\n182\n00:09:23.195 --> 00:09:26.925\nIf it doesn't work, then we just saved\nourselves some customer facing downtime.\n\n183\n00:09:26.925 --> 00:09:28.495\nBecause they broke this dev environment,\n\n184\n00:09:28.495 --> 00:09:30.085\nthey didn't break\nthe production environment.\n\n185\n00:09:30.085 --> 00:09:33.265\nSo that's where cloning an existing\nvApp could be really handy.\n\n186\n00:09:33.265 --> 00:09:35.445\nBut I don't have any vApps, so\nI need to create a new one, so\n\n187\n00:09:35.445 --> 00:09:38.017\nI'm gonna go up here and\njust choose Is to create a new vApp.\n\n188\n00:09:40.159 --> 00:09:42.067\nAll right,\nthen I need to give it a name and\n\n189\n00:09:42.067 --> 00:09:44.467\nif this is gonna be a WordPress\nsite I'll just call it WordPress.\n\n190\n00:09:44.467 --> 00:09:47.947\nYou might call it your production web\nsite or the URL for the web site,\n\n191\n00:09:47.947 --> 00:09:48.537\nwhatever it is.\n\n192\n00:09:48.537 --> 00:09:53.240\nSo this might be Lab .ITPro.TV or\nwhatever.\n\n193\n00:09:53.240 --> 00:09:57.560\nYou give it a name that you can\nrecognize and know what it means.\n\n194\n00:09:57.560 --> 00:09:59.210\nAnd then I need to pick a Datacenter.\n\n195\n00:09:59.210 --> 00:10:01.820\nI've only got one so that's easy, but\nif you have more than one Datacenter\n\n196\n00:10:01.820 --> 00:10:04.490\nyou'd pick the appropriate one for\nwhere you want this vApp to reside.\n\n197\n00:10:05.540 --> 00:10:07.370\nKnowing that you can always move it later.\n\n198\n00:10:07.370 --> 00:10:10.230\nAnd if you clone the vApp you can\nobviously deploy it to another Datacenter\n\n199\n00:10:10.230 --> 00:10:12.640\nif you want to, so you got a lot\nof flexibility down the road.\n\n200\n00:10:14.710 --> 00:10:15.845\nThen, we get this screen, and\n\n201\n00:10:15.845 --> 00:10:18.779\ntechnically I don't have to do anything\non this screen, I could just hit next.\n\n202\n00:10:18.779 --> 00:10:25.226\nBut, what this is allowing me to do Is to\nset resource allocations for the vApp.\n\n203\n00:10:25.226 --> 00:10:28.961\nNow we saw this screen before on\nthe individual virtual machines,\n\n204\n00:10:28.961 --> 00:10:30.762\nwhen we were creating our VMs and\n\n205\n00:10:30.762 --> 00:10:35.117\nwe went into VM options you could actually\nset resource allocations for a VM.\n\n206\n00:10:35.117 --> 00:10:39.308\nYou could set limits to how much CPU and\nmemory they can consume.\n\n207\n00:10:39.308 --> 00:10:41.109\nAnd you can set reservations for\n\n208\n00:10:41.109 --> 00:10:45.450\nhow much memory your CPU utilization\nwas set aside specifically for that VM.\n\n209\n00:10:45.450 --> 00:10:49.250\nWell here we can do it on the vApp also.\n\n210\n00:10:49.250 --> 00:10:50.720\nExcept here, it's a little different.\n\n211\n00:10:50.720 --> 00:10:53.600\nIt's more like a pool of resources, right?\n\n212\n00:10:53.600 --> 00:10:57.850\nAnd all the VM's inside of it can feed\noff of this one set of settings, right?\n\n213\n00:10:57.850 --> 00:11:00.970\nAnd so this kind of trickles\ndown to the VMs in the pool.\n\n214\n00:11:00.970 --> 00:11:06.700\nSo we may not want to manage our resources\nan the individual servers themselves,\n\n215\n00:11:06.700 --> 00:11:08.200\nbut manage them at the App level.\n\n216\n00:11:08.200 --> 00:11:09.610\nSo you can do it right here.\n\n217\n00:11:09.610 --> 00:11:13.770\nIf you do it here, you don't necessarily\nneed to configure it on the VMs.\n\n218\n00:11:13.770 --> 00:11:17.090\nIf you do configure on the VMs,\nthat overwrite these settings, right?\n\n219\n00:11:17.090 --> 00:11:20.270\nSo that the VM settings\noverwrite the vApp settings.\n\n220\n00:11:20.270 --> 00:11:23.045\nSo, I'm just gonna leave it here the\ndefault which are pretty much the limits.\n\n221\n00:11:24.810 --> 00:11:28.120\nAnd then we can finish that up and\nit's gonna create the vApp.\n\n222\n00:11:28.120 --> 00:11:31.900\nNow, creating the vApp,\nIt's not really anything too amazing.\n\n223\n00:11:31.900 --> 00:11:35.385\nIf you think about what I just did,\nif you took out all the Don talking parts.\n\n224\n00:11:35.385 --> 00:11:38.610\nI just ran the wizard, gave it a name,\nand hit finish, right?\n\n225\n00:11:38.610 --> 00:11:43.510\nSo what I've basically see here is\nvery similar to a folder, right?\n\n226\n00:11:43.510 --> 00:11:46.110\nHere is the vApp that I created Wordpress.\n\n227\n00:11:46.110 --> 00:11:47.763\nAnd inside of it, it's nothing.\n\n228\n00:11:47.763 --> 00:11:50.840\nIt's a empty vApp and\nit's just sitting there, right?\n\n229\n00:11:50.840 --> 00:11:53.515\nYou can create folders too, and so.\n\n230\n00:11:53.515 --> 00:11:56.930\nWell, really you see the folders\non the vCenter site.\n\n231\n00:11:56.930 --> 00:12:00.160\nSo if I were to go up here under\nvCenter I can create folders and\n\n232\n00:12:00.160 --> 00:12:04.170\na folder is a way that we can group\nresources together too, right?\n\n233\n00:12:04.170 --> 00:12:07.765\nExcept with a folder there's no\nreal way to manage those resources.\n\n234\n00:12:07.765 --> 00:12:11.125\nIt's just organization for the UI,\nfor the user interface, right?\n\n235\n00:12:11.125 --> 00:12:13.217\nNot really anything special on the VM's.\n\n236\n00:12:13.217 --> 00:12:15.740\nThe vApp on the other hand,\nwe can actually manage\n\n237\n00:12:15.740 --> 00:12:19.833\nthe virtual machines using that vApp and\nyou can do it right from here.\n\n238\n00:12:19.833 --> 00:12:23.855\nUnfortunately, the vApp is not terribly\nuseful until you put something in it and\n\n239\n00:12:23.855 --> 00:12:24.725\nmine is empty.\n\n240\n00:12:24.725 --> 00:12:27.474\nSo when I click on the vApp,\nyou see just a whole lot of nothing here.\n\n241\n00:12:27.474 --> 00:12:30.110\nIt's really easy to get\nstuff in the vApp though.\n\n242\n00:12:30.110 --> 00:12:31.360\nYou just drag and drop it.\n\n243\n00:12:31.360 --> 00:12:35.446\nSo if my WordPress environment needs this\ndatabase server, needs this web server.\n\n244\n00:12:35.446 --> 00:12:41.100\nI can just take the database server,\ndrag it, and drop it right into that vApp.\n\n245\n00:12:41.100 --> 00:12:43.770\nAnd then I can take my web server and\nI can do the same thing.\n\n246\n00:12:43.770 --> 00:12:48.980\nI'm just gonna drag it and drop it right\ninto the vApp and now they're in there.\n\n247\n00:12:48.980 --> 00:12:50.650\nI can take them out the same way.\n\n248\n00:12:50.650 --> 00:12:53.730\nYou can drag them and\ndrop them out of the vApp if you want and\n\n249\n00:12:53.730 --> 00:12:54.830\nnow they're not a part of it anymore.\n\n250\n00:12:54.830 --> 00:12:57.270\nSo it's easy to move resources in and out.\n\n251\n00:12:57.270 --> 00:13:00.205\nBut now that these are both\ninside of the WordPress vApp,\n\n252\n00:13:00.205 --> 00:13:04.980\nnow the vSphere knows,\nthese two VMs are related.\n\n253\n00:13:04.980 --> 00:13:08.073\nIf one goes down,\nthe other one's probably broken.\n\n254\n00:13:08.073 --> 00:13:11.940\nOr if one is experiencing problems,\nthe other one might be affected too.\n\n255\n00:13:11.940 --> 00:13:15.330\nNotice how they live together and\nwhen I go to do a migration or something,\n\n256\n00:13:15.330 --> 00:13:16.740\nI might not wanna migrate\njust one of them.\n\n257\n00:13:16.740 --> 00:13:18.680\nI might wanna migrate the entire vApp and\n\n258\n00:13:18.680 --> 00:13:22.120\nmove these servers together over\nto another set of hardware.\n\n259\n00:13:22.120 --> 00:13:24.310\nNow they're a team.\n\n260\n00:13:24.310 --> 00:13:27.910\n>> Don,\nonce you put those in that app there,\n\n261\n00:13:27.910 --> 00:13:30.980\ndoes that mean that when you control\nthe resources at the app level,\n\n262\n00:13:30.980 --> 00:13:34.910\nautomatically vSphere knows, hey we\ngotta manage these virtual machines.\n\n263\n00:13:34.910 --> 00:13:35.474\n>> Yes, absolutely.\n\n264\n00:13:35.474 --> 00:13:37.854\nYeah, unless they've been overridden,\nright?\n\n265\n00:13:37.854 --> 00:13:41.161\nCuz you can override the VM level and\nthere's times.\n\n266\n00:13:41.161 --> 00:13:42.300\nIf I look here, right?\n\n267\n00:13:42.300 --> 00:13:44.620\nA database server is gonna have disk I/Os.\n\n268\n00:13:44.620 --> 00:13:46.690\nThey are special to database servers.\n\n269\n00:13:46.690 --> 00:13:49.923\nA web server is not gonna have those\ndisk I/O needs, cuz a web server's is\n\n270\n00:13:49.923 --> 00:13:53.229\ngonna try to cache everything in RAM and\ndo it from RAM instead of disk I/O.\n\n271\n00:13:53.229 --> 00:13:56.509\nA database server needs a lot of RAM,\ntoo, because it's doing indexes and\n\n272\n00:13:56.509 --> 00:13:58.580\nother things that it catches in the RAM.\n\n273\n00:13:58.580 --> 00:14:00.690\nSo these two servers are really different.\n\n274\n00:14:00.690 --> 00:14:03.580\nSo I might need to go in and\nconfigure things on the VM themselves.\n\n275\n00:14:03.580 --> 00:14:06.970\nBut whenever possible, I should be\ndoing things up at the vApp level.\n\n276\n00:14:06.970 --> 00:14:10.780\nBecause that's gonna give me consistent\nmanagement of the VMs inside of it.\n\n277\n00:14:10.780 --> 00:14:12.880\nAnd now that I have got\nsomething in there.\n\n278\n00:14:12.880 --> 00:14:16.620\nI can look over here, and I start to see\na little more information being populated.\n\n279\n00:14:16.620 --> 00:14:20.450\nWell a lot of these is still blank,\ncuz I haven't truly configured it yet.\n\n280\n00:14:20.450 --> 00:14:23.010\nBut down here,\nI can see that my health status is normal,\n\n281\n00:14:23.010 --> 00:14:26.455\nmy vApp state is stopped\nmy vApp is not running.\n\n282\n00:14:26.455 --> 00:14:28.685\nAnd I can see my related\nobjects down here.\n\n283\n00:14:28.685 --> 00:14:30.995\nSo I've got a couple of datastores, and\n\n284\n00:14:30.995 --> 00:14:34.265\na virtual network that are now\ninvolved in this vApp.\n\n285\n00:14:34.265 --> 00:14:36.315\nThese are things that the vApp depends on.\n\n286\n00:14:36.315 --> 00:14:38.605\nIf I lose access to the shared-datastore,\n\n287\n00:14:38.605 --> 00:14:40.935\nsomething is gonna be\nbroken inside of this vApp.\n\n288\n00:14:40.935 --> 00:14:42.585\nIf I lose access to the iso-datastore,\n\n289\n00:14:42.585 --> 00:14:44.645\nsomething is gonna be\nbroken inside of this vApp.\n\n290\n00:14:44.645 --> 00:14:46.410\nSomething depends on that.\n\n291\n00:14:46.410 --> 00:14:49.290\nThe ISO data store means that\nI probably still have a CD\n\n292\n00:14:49.290 --> 00:14:51.910\ninserted into the virtual\ndrive in one of these boxes.\n\n293\n00:14:51.910 --> 00:14:55.720\nIf I were to unmount those, then that\ndependency would go away for the vApp.\n\n294\n00:14:55.720 --> 00:14:58.870\nBut now I can start to view\nit as the vApp as a whole.\n\n295\n00:14:58.870 --> 00:14:59.959\nAnd that's what's really important.\n\n296\n00:15:01.400 --> 00:15:04.254\nNow, normally if I wanna\npower on a virtual machine,\n\n297\n00:15:04.254 --> 00:15:05.977\nI can just right click on the VM.\n\n298\n00:15:05.977 --> 00:15:10.796\nSo if I take like WEB01 and right click,\nI can go to Power and I can power it on,\n\n299\n00:15:10.796 --> 00:15:11.345\nright?\n\n300\n00:15:11.345 --> 00:15:14.690\nAnd that's gonna power on just\nthat little web server and\n\n301\n00:15:14.690 --> 00:15:16.490\nget that thing powered up and going.\n\n302\n00:15:16.490 --> 00:15:20.440\nBut I can also go up here to my vApp,\nand when you right click a vApp,\n\n303\n00:15:20.440 --> 00:15:22.810\nyou see I have a power option here.\n\n304\n00:15:22.810 --> 00:15:25.610\nBut instead of powering on\na single virtual machine,\n\n305\n00:15:25.610 --> 00:15:28.500\nit is going to power on the entire vApp.\n\n306\n00:15:28.500 --> 00:15:30.885\nThe web server and\nthe database server will both come up.\n\n307\n00:15:30.885 --> 00:15:34.410\nI can create new virtual\nmachines right into the vApp.\n\n308\n00:15:34.410 --> 00:15:36.300\nAs opposed to creating them externally and\ndragging them in.\n\n309\n00:15:36.300 --> 00:15:37.670\nYou can create them right from here.\n\n310\n00:15:37.670 --> 00:15:42.250\nSo we'll see a lot of the same\noptions that we have at the host level\n\n311\n00:15:42.250 --> 00:15:44.070\nbrought into the vApp.\n\n312\n00:15:44.070 --> 00:15:47.500\nAnd you'll see some options that are from\nthe guest level brought into the vApp.\n\n313\n00:15:47.500 --> 00:15:49.603\nSo in a lot of ways the vApp is a blend.\n\n314\n00:15:49.603 --> 00:15:54.972\nBetween host settings and VM, our guest\nsettings kind of all merge together.\n\n315\n00:15:54.972 --> 00:15:56.836\nBut you'll also see where we can clone it.\n\n316\n00:15:56.836 --> 00:16:00.203\nSo when that developer calls me and says\nman, I want to experiment with something\n\n317\n00:16:00.203 --> 00:16:03.170\nbut I don't want to do it production\nI can say hey, no problem.\n\n318\n00:16:03.170 --> 00:16:03.900\nJust calm down.\n\n319\n00:16:03.900 --> 00:16:05.160\nI'll go here.\nI'll clone this.\n\n320\n00:16:05.160 --> 00:16:08.530\nI'm gonna clone the vApp and\nnow I can give you access to the clone and\n\n321\n00:16:08.530 --> 00:16:10.110\nyou can experiment to your heat's content.\n\n322\n00:16:10.110 --> 00:16:11.640\nIf you break it, no big deal.\n\n323\n00:16:11.640 --> 00:16:12.780\nProduction is safe.\n\n324\n00:16:12.780 --> 00:16:17.210\n>> And Don, what happens if, let's say in\nthis case maybe you decide that you need\n\n325\n00:16:17.210 --> 00:16:20.060\na recommendation server like\nback to your Amazon example,\n\n326\n00:16:20.060 --> 00:16:21.680\nyou need another component?\n\n327\n00:16:21.680 --> 00:16:26.420\nWithin this WordPress or this vApp,\nis it just a matter of creating the VM and\n\n328\n00:16:26.420 --> 00:16:27.678\ndragging and dropping like you just did?\n\n329\n00:16:27.678 --> 00:16:29.630\n>> Yeah I mean you can\ndo it that way right?\n\n330\n00:16:29.630 --> 00:16:32.180\nYou create the VM drag and drop it in\nthere if you've already got it you can\n\n331\n00:16:32.180 --> 00:16:35.390\ncreate it from a template or whatever or\nyou can create it right in the vApp, so\n\n332\n00:16:35.390 --> 00:16:37.580\nif I were to come in here and\nright click on WordPress and\n\n333\n00:16:37.580 --> 00:16:41.800\ngo to New Virtual Machine like that it's\ngonna create it already in the vApp.\n\n334\n00:16:41.800 --> 00:16:44.400\nSo, that kind of saves me\na little bit of effort there.\n\n335\n00:16:45.790 --> 00:16:49.570\nAlright, now, a couple other things about\nthis vApp that make it a little special.\n\n336\n00:16:49.570 --> 00:16:53.290\nNotice over here, I told it that\nthe vApp was called WordPress.\n\n337\n00:16:53.290 --> 00:16:57.010\nSee how it's got a product,\nversion, vendor.\n\n338\n00:16:57.010 --> 00:16:58.290\nWhat are those?\n\n339\n00:16:58.290 --> 00:17:02.969\nWell, when you create a vApp you\nmight be creating the vApp for\n\n340\n00:17:02.969 --> 00:17:06.230\nyou or you might be creating it for\ndistribution out to other people.\n\n341\n00:17:06.230 --> 00:17:08.990\nThis might be some appliance that\nyou're gonna sell to other companies.\n\n342\n00:17:08.990 --> 00:17:11.700\nAnd so\nyou can actually track the version number,\n\n343\n00:17:11.700 --> 00:17:14.560\nthe product and\nthe vendor of the virtual app so\n\n344\n00:17:14.560 --> 00:17:17.620\nthat when you distribute it out people\nwill know if they have the latest version.\n\n345\n00:17:17.620 --> 00:17:22.210\nAnd when you create a new version of that\nvApp, it might have a new database server,\n\n346\n00:17:22.210 --> 00:17:24.410\nand a new web server,\ncuz they've been updated.\n\n347\n00:17:24.410 --> 00:17:27.310\nAnd you replace the entire vApp.\n\n348\n00:17:27.310 --> 00:17:29.570\nSo instead of doing some\nkind of in place upgrade,\n\n349\n00:17:29.570 --> 00:17:31.510\nyou just swap out the vApp as a whole.\n\n350\n00:17:31.510 --> 00:17:33.125\nRight?\nNow, your database,\n\n351\n00:17:33.125 --> 00:17:35.120\nyou'd need that data\ncoming from somewhere.\n\n352\n00:17:35.120 --> 00:17:37.370\nBut everything else could be\nswapped out and it's no big deal.\n\n353\n00:17:37.370 --> 00:17:41.070\nSo when you start to work with these,\nif I jump under manage and\n\n354\n00:17:41.070 --> 00:17:43.240\nyou start to take a look at\nthe settings under manage,\n\n355\n00:17:43.240 --> 00:17:47.060\nyou'll see we've got tags and\npermissions, and scheduled tasks.\n\n356\n00:17:47.060 --> 00:17:52.570\nThese are all applying to\nthe vApp as a whole, and\n\n357\n00:17:52.570 --> 00:17:56.090\nas we define these,\nthese become a part of that package.\n\n358\n00:17:56.090 --> 00:17:57.210\nAnd so we can redistribute that.\n\n359\n00:17:57.210 --> 00:17:58.220\nWe can export it.\n\n360\n00:17:58.220 --> 00:18:00.930\nAnd you might have noticed that option\nwhen I right clicked on the vApp.\n\n361\n00:18:00.930 --> 00:18:03.410\nThere's this OVF template.\n\n362\n00:18:03.410 --> 00:18:05.478\nDeploy a template or export a template.\n\n363\n00:18:05.478 --> 00:18:07.260\nIf you create an OVF,\n\n364\n00:18:07.260 --> 00:18:11.850\nthat is a single file that's generated\nthat contains the entire vApp.\n\n365\n00:18:11.850 --> 00:18:14.760\nAnd you can take it to\nother VMware environments.\n\n366\n00:18:14.760 --> 00:18:19.060\nYou can actually take it to Virtual Box,\nMicrosoft HyperV, they all support OVFs.\n\n367\n00:18:19.060 --> 00:18:20.210\nAnd you can import it in, and\n\n368\n00:18:20.210 --> 00:18:22.460\nnow your vApp is running on\nan entirely different infrastructure.\n\n369\n00:18:22.460 --> 00:18:23.700\nIt's pretty neat stuff.\n\n370\n00:18:23.700 --> 00:18:26.380\nSo that developer who\nwants a test environment,\n\n371\n00:18:26.380 --> 00:18:28.260\nmaybe I don't have enough room\non my production server, so\n\n372\n00:18:28.260 --> 00:18:31.910\nI export it as an ovf, and\nthen I send that to them.\n\n373\n00:18:31.910 --> 00:18:33.780\nAnd they can fire up their\nown virtualization software,\n\n374\n00:18:33.780 --> 00:18:36.710\nmaybe they have VMware workstation or\n\n375\n00:18:36.710 --> 00:18:40.570\nVMware fusion on their own machine and\nthey can fire up the vApp right there and\n\n376\n00:18:40.570 --> 00:18:43.530\nget it up and running and do their\nexperiments right in their own system.\n\n377\n00:18:45.130 --> 00:18:50.120\nWe can also do,\nif we go to the vApp and go down to\n\n378\n00:18:50.120 --> 00:18:54.800\nedit settings, the settings for the vApp\nwill come up, and in the settings for\n\n379\n00:18:54.800 --> 00:18:58.510\nthe vApp, here's where I'll see the CPU\nresources and memory resources.\n\n380\n00:18:58.510 --> 00:19:00.230\nThose are things that we saw earlier.\n\n381\n00:19:00.230 --> 00:19:03.168\nYou'll also see IP allocation.\n\n382\n00:19:03.168 --> 00:19:07.210\nWell, if you're gonna be cloning this, you\ndon't want duplicate IPs on your network.\n\n383\n00:19:07.210 --> 00:19:10.282\nAnd so you can come in and\ncustomize those settings to make it so\n\n384\n00:19:10.282 --> 00:19:13.610\nthat you get IPs that\nare unique to this system.\n\n385\n00:19:13.610 --> 00:19:19.760\nBut then down here, this is where I get\nthe product name, the version, and so on.\n\n386\n00:19:19.760 --> 00:19:24.042\nSo maybe my product here is WordPress,\nand this is version 4.1.\n\n387\n00:19:24.042 --> 00:19:25.950\nI think 4.2 or 4.3 is the latest.\n\n388\n00:19:25.950 --> 00:19:29.530\nSo I put whatever that version is,\nand I might come in and\n\n389\n00:19:29.530 --> 00:19:34.691\nsay the full version is 4.1.3,\nso I can keep track of that and\n\n390\n00:19:34.691 --> 00:19:39.430\nthe product url, whatever that happens\nto be, www.WordPress.org and the vendor,\n\n391\n00:19:39.430 --> 00:19:43.200\nI don't know what they call themselves,\nwe'll just say its WordPress Inc.\n\n392\n00:19:43.200 --> 00:19:45.850\nAlthough I'm making it so\nI could say that I'm the vendor.\n\n393\n00:19:45.850 --> 00:19:48.870\nThis is my distribution of\na WordPress that I'm creating.\n\n394\n00:19:48.870 --> 00:19:51.840\nSo you come in and\nyou specify these settings though and\n\n395\n00:19:51.840 --> 00:19:55.830\nthat's gonna make it where if I distribute\nthis to other people they'll know what\n\n396\n00:19:55.830 --> 00:19:57.210\nversion it is and I can keep track of it.\n\n397\n00:19:57.210 --> 00:20:00.820\nAnd if I start to modify it and\nrebuild it I can increase these values.\n\n398\n00:20:00.820 --> 00:20:04.250\nAnd then once those are increased\nthen we get what we need.\n\n399\n00:20:04.250 --> 00:20:09.010\nNow up here, up top under Deployment\nit wasn't letting me edit those IP\n\n400\n00:20:09.010 --> 00:20:11.560\nsettings cuz they were never\ndefined in the first place, but\n\n401\n00:20:11.560 --> 00:20:15.870\ndown here under Authoring that's where\nI'm gonna see the IP allocation scheme.\n\n402\n00:20:15.870 --> 00:20:18.570\nAnd we can set the machines to use DHCP,\nthat's usually the best,\n\n403\n00:20:18.570 --> 00:20:19.850\nthat's what you want.\n\n404\n00:20:19.850 --> 00:20:21.800\nOr you can say OVF environment and\n\n405\n00:20:21.800 --> 00:20:24.210\nthen it'll use the default settings\nfrom where ever you're importing it.\n\n406\n00:20:24.210 --> 00:20:27.880\nSo you could specify some of that as\nwell as other settings right in here.\n\n407\n00:20:27.880 --> 00:20:30.670\nSo you kinda need to get those\nsetup the way that you need, and\n\n408\n00:20:30.670 --> 00:20:34.950\nonce that's all done, now we'll start to\nsee a little bit more here on our summary.\n\n409\n00:20:34.950 --> 00:20:38.050\nSo see how mine shows this is\nthe WordPress product version 4.1.\n\n410\n00:20:38.050 --> 00:20:41.200\nThe vendor,\nI probably should have put myself for\n\n411\n00:20:41.200 --> 00:20:44.840\nthe vendor there cuz it's not\nlike they made this VM, but\n\n412\n00:20:44.840 --> 00:20:48.130\nnow we start to see that and\nif I start powering on these machines and\n\n413\n00:20:48.130 --> 00:20:52.560\ngetting them to do what they need to\ndo I'll see CPU and memory utilization.\n\n414\n00:20:52.560 --> 00:20:55.240\nThat are combined for\nthose virtual machines.\n\n415\n00:20:56.380 --> 00:21:00.050\nAll right, so, vApps just a great way\nto manage these components when they're\n\n416\n00:21:00.050 --> 00:21:00.960\ntogether.\n\n417\n00:21:00.960 --> 00:21:02.160\nI can power them on, power them off,\n\n418\n00:21:02.160 --> 00:21:05.280\ndo all those things it's now\nbeing managed as a cohesive unit.\n\n419\n00:21:05.280 --> 00:21:08.260\nThat's what vApps are all about.\n\n420\n00:21:08.260 --> 00:21:11.430\nAll right the other thing that I\nwant to talk about Are clones and\n\n421\n00:21:11.430 --> 00:21:12.360\ntemplates, right.\n\n422\n00:21:12.360 --> 00:21:14.660\nWe talk about libraries a little bit and\nclones and\n\n423\n00:21:14.660 --> 00:21:17.370\ntemplates usually go in the library.\n\n424\n00:21:17.370 --> 00:21:22.100\nClones, if I have a running server or\na running vAap, and\n\n425\n00:21:22.100 --> 00:21:24.200\nsomebody wants to experiment.\n\n426\n00:21:24.200 --> 00:21:25.450\nTry something new.\n\n427\n00:21:25.450 --> 00:21:26.750\nMess around with it.\n\n428\n00:21:26.750 --> 00:21:29.200\nIt's better to give them\na clone than the real thing.\n\n429\n00:21:29.200 --> 00:21:30.420\nA clone is just a copy.\n\n430\n00:21:30.420 --> 00:21:33.060\nWe can create a copy of\na virtual machine or\n\n431\n00:21:33.060 --> 00:21:36.160\na vApp and give somebody access to it and\nthey can experiment.\n\n432\n00:21:36.160 --> 00:21:40.950\nAnd so I showed you guys that when\nI right clicked on the vApp and\n\n433\n00:21:40.950 --> 00:21:42.600\nI've got the Clone Menu right there.\n\n434\n00:21:42.600 --> 00:21:44.940\nAnd so I can clone and off we go.\n\n435\n00:21:44.940 --> 00:21:48.810\nOr if I broke in my vApp maybe I\nbroke this WordPress this is my\n\n436\n00:21:48.810 --> 00:21:50.450\ndevelopment vApp.\n\n437\n00:21:50.450 --> 00:21:54.900\nWell I can always right click on it and\ncreate a new vApp and\n\n438\n00:21:54.900 --> 00:21:58.830\nbring in a new vApp from the library and\nI can clone it back over here from\n\n439\n00:21:58.830 --> 00:22:02.180\nthe library if I've got it or we saw\nif we ran it we could create a vApp.\n\n440\n00:22:02.180 --> 00:22:03.300\nActually this kinda how it's,\n\n441\n00:22:03.300 --> 00:22:06.240\nwe can do nested vApps too,\nI forgot to mention that.\n\n442\n00:22:06.240 --> 00:22:09.430\nYou might have multiple applications\ninside of a single portfolio.\n\n443\n00:22:09.430 --> 00:22:12.340\nI've never used that in production but\nyou certainly can do it.\n\n444\n00:22:13.520 --> 00:22:15.550\nBut cloning is really easy to do.\n\n445\n00:22:15.550 --> 00:22:18.530\nWhen you clone, there's two destinations.\n\n446\n00:22:18.530 --> 00:22:21.500\nThe first option is to clone and\nmake it live.\n\n447\n00:22:21.500 --> 00:22:24.560\nI might need a second web server,\nand I need it right now.\n\n448\n00:22:24.560 --> 00:22:25.990\nMy server is getting overwhelmed.\n\n449\n00:22:25.990 --> 00:22:27.030\nI need a second server but\n\n450\n00:22:27.030 --> 00:22:28.970\nI don't want to go through all\nthe configuration mess for it.\n\n451\n00:22:28.970 --> 00:22:33.490\nSo I could just take Web 01,\nand I could right click on it.\n\n452\n00:22:33.490 --> 00:22:36.980\nAnd clone it, and\nclone to a virtual machine.\n\n453\n00:22:36.980 --> 00:22:39.330\nThat'll create a new virtual machine.\n\n454\n00:22:39.330 --> 00:22:42.925\nCopy the hard drives, and\nget it ready to power on so\n\n455\n00:22:42.925 --> 00:22:45.015\nit'll already have the web\nserver configured,\n\n456\n00:22:45.015 --> 00:22:49.485\nit'll already have the web pages\nloaded on it and it's ready to rock.\n\n457\n00:22:49.485 --> 00:22:53.505\nI just need to add it to DNS or add it to\nmy load balance or however it is that I'm\n\n458\n00:22:53.505 --> 00:22:57.295\nhandling my web access and\nnow I've got another web server.\n\n459\n00:22:57.295 --> 00:23:00.485\nSo if I reach the limits\nof what I can scale up to,\n\n460\n00:23:00.485 --> 00:23:03.690\nthis is how I can quickly scale out,\nI could add more web servers.\n\n461\n00:23:03.690 --> 00:23:06.240\nSo cloning is a great way to do that.\n\n462\n00:23:06.240 --> 00:23:08.190\nThere are some little problems\nwith cloning, though.\n\n463\n00:23:08.190 --> 00:23:11.290\nIf you're cloning Linux\nboxes it works great.\n\n464\n00:23:11.290 --> 00:23:15.420\nIf your IPs are set for DHCP and\nyou're just cloning them out each machine\n\n465\n00:23:15.420 --> 00:23:18.970\nwill come up and you've got machines\nis no time, it works wonderful.\n\n466\n00:23:18.970 --> 00:23:22.300\nIf you're cloning Windows machines, though\nyou're running in to some problems and\n\n467\n00:23:22.300 --> 00:23:23.780\nWes you're not you've dealt with it,\nright?\n\n468\n00:23:23.780 --> 00:23:24.470\n>> Yeah, I have.\n\n469\n00:23:24.470 --> 00:23:28.340\nI'm just taking a guess here I bet it's\ngonna be the security identifiers and\n\n470\n00:23:28.340 --> 00:23:29.330\nthe cost conflicts.\n\n471\n00:23:29.330 --> 00:23:33.020\n>> Absolutely yeah, so\neven if a Windows machine suffer DHCP,\n\n472\n00:23:33.020 --> 00:23:36.066\nwhen that second machine boots up\nit will get a different address.\n\n473\n00:23:36.066 --> 00:23:39.770\nBut Windows tracks a security\nidentifier a little numeric,\n\n474\n00:23:39.770 --> 00:23:42.560\nwell it's alphanumeric\nstring that is really long.\n\n475\n00:23:42.560 --> 00:23:43.771\nThat identifies that machine.\n\n476\n00:23:43.771 --> 00:23:46.987\nAnd even if you change its name,\nand change its IP and\n\n477\n00:23:46.987 --> 00:23:51.831\njoin it to a different domain, its SID\nis still the same deep down underneath.\n\n478\n00:23:51.831 --> 00:23:55.093\nAnd you'll get duplicates and conflicts as\na result, and it causes a lot of problems.\n\n479\n00:23:55.093 --> 00:24:00.340\nSo a Windows machine has to be prepared\nbefore you can just clone it, right?\n\n480\n00:24:00.340 --> 00:24:03.512\nIf you clone it,\nit's going to be an exact clone.\n\n481\n00:24:03.512 --> 00:24:05.499\nAnd as long as they're in\ntwo different environments,\n\n482\n00:24:05.499 --> 00:24:08.550\nlike a production environment and\na test environment, that's okay.\n\n483\n00:24:08.550 --> 00:24:10.140\nBut if I need to clone\nthat Windows machine and\n\n484\n00:24:10.140 --> 00:24:12.950\nhave it right there side by side with the\nother one while I'm trying to increase my\n\n485\n00:24:12.950 --> 00:24:15.810\ncapacity, I can't just clone that,\nall right?\n\n486\n00:24:15.810 --> 00:24:20.130\nI need to get it prepared, and the better\nway to do that is to use a template, okay?\n\n487\n00:24:20.130 --> 00:24:21.710\nWhat you can do is you\ncan clone a machine.\n\n488\n00:24:21.710 --> 00:24:23.206\nSo like I can clone this web server.\n\n489\n00:24:23.206 --> 00:24:26.750\nI can right-click on it,\ngo to Clone > Clone to Virtual Machine.\n\n490\n00:24:26.750 --> 00:24:30.730\nCreate a clone and\nmove it to an isolated network.\n\n491\n00:24:30.730 --> 00:24:32.910\nAnd then I can power Windows on.\n\n492\n00:24:32.910 --> 00:24:34.370\nLog into Windows.\n\n493\n00:24:34.370 --> 00:24:36.790\nAnd Microsoft has this\nutility called sysprep.\n\n494\n00:24:36.790 --> 00:24:39.060\nAnd the sysprep utility\nis packaged with Windows.\n\n495\n00:24:39.060 --> 00:24:42.960\nYou can run it and\nit strips out the security identifier and\n\n496\n00:24:42.960 --> 00:24:46.340\nall the unique data for that server and\nit makes the server generic.\n\n497\n00:24:46.340 --> 00:24:48.470\nThey call it generalizing the server.\n\n498\n00:24:48.470 --> 00:24:49.735\nAnd then it shuts it down.\n\n499\n00:24:49.735 --> 00:24:52.180\nCuz you can't run without\nall that information.\n\n500\n00:24:52.180 --> 00:24:56.690\nAnd while that machine is shut down,\nI can now turn it into a template.\n\n501\n00:24:56.690 --> 00:24:57.520\nAnd that template,\n\n502\n00:24:57.520 --> 00:25:00.600\nI can clone as many times as I want\nbecause when that machine boots up,\n\n503\n00:25:00.600 --> 00:25:03.910\nit's gonna notice that it's missing\na SID and it'll generate a new one.\n\n504\n00:25:03.910 --> 00:25:06.530\nAnd so now I can create\na thousand clones of that and\n\n505\n00:25:06.530 --> 00:25:09.050\nthey'll all have different SIDs and\nbe happy.\n\n506\n00:25:09.050 --> 00:25:13.440\nThat's what templates are really for,\nis creating these generic kind\n\n507\n00:25:13.440 --> 00:25:16.720\nof boilerplate models of\na server that you need.\n\n508\n00:25:16.720 --> 00:25:18.780\nThat you can then clone as\nmany times as you want.\n\n509\n00:25:18.780 --> 00:25:22.730\nSo when I right-click on Web 01 and\nchoose to clone it,\n\n510\n00:25:22.730 --> 00:25:25.053\nI can clone it to a virtual machine\nthat would be a live machine,\n\n511\n00:25:25.053 --> 00:25:29.440\nand there's times where I wanna do that,\nor I can clone it right to a template.\n\n512\n00:25:29.440 --> 00:25:34.012\nIf I choose Clone to Template, it's gonna\nmake it right here on this ESX host.\n\n513\n00:25:34.012 --> 00:25:37.060\nIf I have a stand alone server\nthat's probably fine with me, but\n\n514\n00:25:37.060 --> 00:25:41.040\nif I've got multiple servers, then I\nprobably wanna clone it to a library.\n\n515\n00:25:41.040 --> 00:25:45.160\nAnd that way I can access that\ntemplate from any of my ESX boxes,\n\n516\n00:25:45.160 --> 00:25:47.250\nnot just this one.\n\n517\n00:25:47.250 --> 00:25:50.700\nMy problem is gonna be that I don't have\na library, I haven't created any, right?\n\n518\n00:25:50.700 --> 00:25:53.290\nSo I need to create a library\nbefore I can do that.\n\n519\n00:25:53.290 --> 00:25:54.870\nBut if I just clone to a template,\n\n520\n00:25:54.870 --> 00:25:58.850\nI can always move the template to\nthe library after I create it, right?\n\n521\n00:25:58.850 --> 00:26:02.220\nSo I'm gonna create a template here\nthat I'll just call like my generic\n\n522\n00:26:03.550 --> 00:26:07.140\nweb server right, so this is just gonna be\nmy generic web server if I ever need one,\n\n523\n00:26:07.140 --> 00:26:09.080\nthis is the template that I'm gonna use.\n\n524\n00:26:09.080 --> 00:26:13.147\nAnd I'll go ahead and hit Next, and it's\ngonna ask me to pick a compute resource\n\n525\n00:26:13.147 --> 00:26:15.407\nand right now I'm working on ESX Host 01.\n\n526\n00:26:15.407 --> 00:26:19.267\nAnd, let's see, operation not allowed\nbecause the current state of the host,\n\n527\n00:26:19.267 --> 00:26:22.094\nuh-oh, I might be disconnected\nfrom my data store.\n\n528\n00:26:22.094 --> 00:26:23.365\nActually, I see the problem.\n\n529\n00:26:23.365 --> 00:26:28.263\nSo when I pick my host, I'm getting\nwarnings down here about them not being\n\n530\n00:26:28.263 --> 00:26:32.774\nsuitable, and this one says,\nDevice CD/DVD drive uses backing and\n\n531\n00:26:32.774 --> 00:26:37.931\nit's tied to the VMWare tools, and\nthe VMWare tools are tied to ESX host 01.\n\n532\n00:26:37.931 --> 00:26:40.657\nI need to get that ISO image\nout of there before I try and\n\n533\n00:26:40.657 --> 00:26:42.610\nclone this thing to a template.\n\n534\n00:26:42.610 --> 00:26:45.340\nThat's important because you can be\ntied to resources that wouldn't be\n\n535\n00:26:45.340 --> 00:26:46.730\navailable on another machine.\n\n536\n00:26:46.730 --> 00:26:48.160\nSo I need to fix that.\n\n537\n00:26:48.160 --> 00:26:49.638\nI'm kinda glad that came up.\n\n538\n00:26:49.638 --> 00:26:52.170\nIt was a mistake I make it\nin real life all the time.\n\n539\n00:26:52.170 --> 00:26:56.390\nSo, I'm gonna in here and\ndisconnect that ISO image.\n\n540\n00:26:56.390 --> 00:26:58.730\nAnd you have to be careful\nkinda how these are set.\n\n541\n00:26:58.730 --> 00:27:02.500\nSo, on the CD/DVD drive,\nI can flip that to Host or\n\n542\n00:27:02.500 --> 00:27:06.440\nClient Device and technically the host\ndevice is tied to this one host.\n\n543\n00:27:06.440 --> 00:27:08.710\nBut as long as I don't connect it,\nI'll be okay.\n\n544\n00:27:08.710 --> 00:27:10.499\nSo that one should be fine.\n\n545\n00:27:10.499 --> 00:27:11.820\nAnd that should solve that problem.\n\n546\n00:27:13.260 --> 00:27:16.110\nSo let me wait a second\nwhile that takes effect.\n\n547\n00:27:16.110 --> 00:27:16.930\nAnd looks good.\n\n548\n00:27:16.930 --> 00:27:19.537\nSo I'll go ahead and\nclone to a template again.\n\n549\n00:27:19.537 --> 00:27:23.592\nAnd then this time when I go to clone\nit to a template, I can come in and\n\n550\n00:27:23.592 --> 00:27:25.665\ngive it a name Generic Web Server.\n\n551\n00:27:26.845 --> 00:27:30.835\nAnd then when I pick a resource,\nwe should be a little bit better off.\n\n552\n00:27:30.835 --> 00:27:32.705\nThere we go.\nSo now I get my compatibility check\n\n553\n00:27:32.705 --> 00:27:33.315\nsucceeded.\n\n554\n00:27:34.345 --> 00:27:37.197\nAnd I can move forward and\nstart to create that template.\n\n555\n00:27:37.197 --> 00:27:40.627\nNow when I go to create it,\nit's gonna ask me where to put it, and\n\n556\n00:27:40.627 --> 00:27:42.887\nthis is where I'm gonna\nsee my data stores.\n\n557\n00:27:42.887 --> 00:27:44.357\nI don't have a library to put it in so\n\n558\n00:27:44.357 --> 00:27:46.662\nit's just gonna put it in one\nof my regular data stores.\n\n559\n00:27:46.662 --> 00:27:51.630\nAnd that's technically okay, but the data\nstores are normally nice, fast storage.\n\n560\n00:27:51.630 --> 00:27:53.056\nAnd I'm wasting fast\nstorage with the template.\n\n561\n00:27:53.056 --> 00:27:55.220\nA template's never gonna be powered on.\n\n562\n00:27:55.220 --> 00:27:56.775\nSo it's really wasting that.\n\n563\n00:27:56.775 --> 00:27:59.660\nI'd rather put it on older storage.\n\n564\n00:27:59.660 --> 00:28:01.560\nStorage that wasn't, it was SATA storage.\n\n565\n00:28:01.560 --> 00:28:04.790\nIt was slower, cheaper, and\nI could have a lot more of it, right?\n\n566\n00:28:04.790 --> 00:28:08.140\nAny time I decommission a virtual\nmachine I don't normally delete it,\n\n567\n00:28:08.140 --> 00:28:10.420\nI normally move it to a library.\n\n568\n00:28:10.420 --> 00:28:12.400\nIt's cheaper,\nolder storage that I've got a ton of.\n\n569\n00:28:12.400 --> 00:28:13.260\nSo I can stick it over there and\n\n570\n00:28:13.260 --> 00:28:15.870\nif anything ever happens where I\nneed that machine back, I can go and\n\n571\n00:28:15.870 --> 00:28:17.000\nget it again, right?\n\n572\n00:28:17.000 --> 00:28:19.670\nThat's the advantage, but\nhere I just have my data store so\n\n573\n00:28:19.670 --> 00:28:22.280\nmaybe I'll put here on my\nregular internal data store.\n\n574\n00:28:23.860 --> 00:28:26.450\nAnd it is giving me a warning down here.\n\n575\n00:28:26.450 --> 00:28:30.202\nCopying this virtual machine will cause\nloss of snapshots at the destination,\n\n576\n00:28:30.202 --> 00:28:31.250\nall right?\n\n577\n00:28:31.250 --> 00:28:34.530\nIt's gonna clone the virtual\nmachine as it is right now.\n\n578\n00:28:34.530 --> 00:28:36.570\nNot the snapshots,\nwe gonna lose those snapshots, and\n\n579\n00:28:36.570 --> 00:28:39.180\nwe have to lose them because\nthe snapshots actually contain\n\n580\n00:28:39.180 --> 00:28:43.160\nRAM footprints that might not work on\nthe other servers when we go to it.\n\n581\n00:28:43.160 --> 00:28:46.050\nSo that's gonna knock that out but\nthat's fine with me.\n\n582\n00:28:47.260 --> 00:28:50.176\nAll right, and so then it's gonna\nfinish up and create that template.\n\n583\n00:28:50.176 --> 00:28:54.370\nAnd now that I've got the template,\nwhen I go to create a new virtual machine,\n\n584\n00:28:54.370 --> 00:28:57.090\ninstead of creating it from scratch I\ncan create it from the template, and\n\n585\n00:28:57.090 --> 00:28:58.770\nnow I don't have to install\nthe operating system.\n\n586\n00:28:58.770 --> 00:29:00.290\nI don't have to configure the web server.\n\n587\n00:29:00.290 --> 00:29:04.100\nI don't have to put my HTML files on\nthere, they're all already set up,\n\n588\n00:29:04.100 --> 00:29:06.500\nI just spin up the machine and\nit's ready to go.\n\n589\n00:29:06.500 --> 00:29:11.670\n>> Don, with the library, you said that\nit's accessible to multiple ESX hosts.\n\n590\n00:29:11.670 --> 00:29:13.706\nWhere is the library actually stored?\n\n591\n00:29:13.706 --> 00:29:15.404\nAnd another question to that would be,\n\n592\n00:29:15.404 --> 00:29:18.398\nis it using some kind of distributed\nreplication or something?\n\n593\n00:29:18.398 --> 00:29:20.960\n>> So, this is gonna be kind\nof a funny answer because\n\n594\n00:29:20.960 --> 00:29:23.621\nthe library is actually\nstored in the data store.\n\n595\n00:29:23.621 --> 00:29:25.970\n[LAUGH] And I know I said we don't\nwanna put the VMs in a data store.\n\n596\n00:29:25.970 --> 00:29:27.650\nAnd here I'm saying\nthe library's in the data store.\n\n597\n00:29:27.650 --> 00:29:31.788\nWell, what you're gonna do is you're gonna\ncreate a data store just for your library.\n\n598\n00:29:31.788 --> 00:29:34.560\nAnd it'll usually be somewhere where\nit's storage that you don't necessarily\n\n599\n00:29:34.560 --> 00:29:35.130\ncare about.\n\n600\n00:29:35.130 --> 00:29:37.320\nI mean you can put it\non really fast storage.\n\n601\n00:29:37.320 --> 00:29:38.540\nMaybe money's no object.\n\n602\n00:29:38.540 --> 00:29:41.128\nWhich usually means you work for\nthe government, [LAUGH] and so\n\n603\n00:29:41.128 --> 00:29:43.138\nyou wanna put it on really fast storage,\nfine.\n\n604\n00:29:43.138 --> 00:29:45.670\nAnd if that's the case, you might\nnot even wanna create a data store.\n\n605\n00:29:45.670 --> 00:29:47.000\nYou might just, I mean, a library.\n\n606\n00:29:47.000 --> 00:29:48.670\nYou might just wanna put\nit in the data store.\n\n607\n00:29:48.670 --> 00:29:51.060\nBut with a library,\nyou can create a distributed library.\n\n608\n00:29:51.060 --> 00:29:53.390\nThe library is defined in vCenter.\n\n609\n00:29:53.390 --> 00:29:56.270\nAnd that's why all of your ESXi boxes\nthat are in vCenter are going to be\n\n610\n00:29:56.270 --> 00:29:57.250\nable to see it.\n\n611\n00:29:57.250 --> 00:29:59.110\nAnd so it's distributed, well,\n\n612\n00:29:59.110 --> 00:30:01.570\nthat usually just means that\nthe data store is on a SAN.\n\n613\n00:30:01.570 --> 00:30:04.832\nAnd that all the ESX boxes can see\nit because they can all see the SAN.\n\n614\n00:30:04.832 --> 00:30:07.230\nThat's how we make that available.\n\n615\n00:30:07.230 --> 00:30:09.530\nSo if you wanna see that, here,\nlet me show you creating a library.\n\n616\n00:30:09.530 --> 00:30:11.450\nI'm gonna jump back to my Home.\n\n617\n00:30:11.450 --> 00:30:15.600\nAnd under the Home screen here, as you\nkinda look down at all the junk you've\n\n618\n00:30:15.600 --> 00:30:18.840\ngot, we've got our vCenter inventory list.\n\n619\n00:30:18.840 --> 00:30:22.140\nAnd inside of vCenter inventory you'll\nsee all the different things that you can\n\n620\n00:30:22.140 --> 00:30:25.850\ncreate including Content Libraries,\nall right?\n\n621\n00:30:25.850 --> 00:30:29.266\nWe've got VM Templates and Folders, that\nwould be ones that are created inside of\n\n622\n00:30:29.266 --> 00:30:31.462\nour regular system, but\nI want Content Libraries.\n\n623\n00:30:31.462 --> 00:30:34.733\nAnd when I go into Content Libraries,\nI don't have any, right?\n\n624\n00:30:34.733 --> 00:30:36.760\n[LAUGH] Because we haven't created any.\n\n625\n00:30:36.760 --> 00:30:41.760\nSo I just need to whip one up to\nactually have a library in place, and so\n\n626\n00:30:41.760 --> 00:30:45.010\nif I scroll down a little bit here\nwe've got Create a new content library,\n\n627\n00:30:45.010 --> 00:30:47.150\nright here, and so I can create that.\n\n628\n00:30:47.150 --> 00:30:50.529\nAnd so I'll call this maybe like,\nVM Template Storage.\n\n629\n00:30:51.720 --> 00:30:52.570\nI am typing.\n\n630\n00:30:53.810 --> 00:30:54.330\n[LAUGH] There we go.\n\n631\n00:30:55.800 --> 00:30:58.190\nApparently my demands on\nthe server are too great.\n\n632\n00:30:58.190 --> 00:30:59.691\nThere we go.\nSo VM Template Storage and\n\n633\n00:30:59.691 --> 00:31:02.575\nit's gonna ask me the vCenter\nserver that it's gonna control.\n\n634\n00:31:02.575 --> 00:31:06.210\nSo the library is actually\ndefined in vCenter.\n\n635\n00:31:06.210 --> 00:31:08.450\nBut it's gotta have storage somewhere.\n\n636\n00:31:08.450 --> 00:31:11.764\nAnd so on on the next screen,\nit's gonna ask me.\n\n637\n00:31:11.764 --> 00:31:12.950\nActually I'm wrong.\n\n638\n00:31:12.950 --> 00:31:14.320\nIt's on the next, next screen.\n\n639\n00:31:14.320 --> 00:31:16.570\nSo on this screen, it's gonna\nask me to configure the library.\n\n640\n00:31:16.570 --> 00:31:18.240\nOn the next one,\nit's gonna ask me where the storage is.\n\n641\n00:31:18.240 --> 00:31:19.122\nAnd you've gotta add storage.\n\n642\n00:31:19.122 --> 00:31:21.640\nYou can have storage in more\nthan one place if you want.\n\n643\n00:31:21.640 --> 00:31:25.950\nBut here it's asking me, is this\ngoing to be a local content library?\n\n644\n00:31:25.950 --> 00:31:30.390\nIn other words, one that's designed for\nthis particular data center, or\n\n645\n00:31:30.390 --> 00:31:33.490\nis it one that I want anybody\nto be able to connect to.\n\n646\n00:31:33.490 --> 00:31:37.270\nI may have multiple vCenter\ndeployments out there and so\n\n647\n00:31:37.270 --> 00:31:40.440\nI don't want this to be tied just\nto this one vCenter deployment.\n\n648\n00:31:40.440 --> 00:31:42.400\nYou can create a subscription.\n\n649\n00:31:42.400 --> 00:31:44.470\nA subscribed content library.\n\n650\n00:31:44.470 --> 00:31:47.359\nSo you can have a centralized library\nthat's shared throughout your\n\n651\n00:31:47.359 --> 00:31:48.819\nentire environment, all right?\n\n652\n00:31:48.819 --> 00:31:52.540\nBut if you don't need that, you can\njust do a local content library, and\n\n653\n00:31:52.540 --> 00:31:55.224\nwe can choose to publish\nour content externally, so\n\n654\n00:31:55.224 --> 00:31:58.889\nother people can connect to us, or\nwe can connect to somebody else's.\n\n655\n00:31:58.889 --> 00:32:00.546\nIn my case we're just\ngonna do a local one.\n\n656\n00:32:00.546 --> 00:32:03.084\nAnd I'm not gonna mess\nwith publishing that out.\n\n657\n00:32:03.084 --> 00:32:06.310\nNow it's gonna ask where\nthe storage is coming from.\n\n658\n00:32:06.310 --> 00:32:10.290\nAnd you can do NFS and\nNFS is a great way to do it.\n\n659\n00:32:10.290 --> 00:32:14.930\nWith NFS, we could have the library\nstored on a different server somewhere.\n\n660\n00:32:14.930 --> 00:32:18.790\nAnd because it's NFS we connect from our\nown clients to easily put things in and\n\n661\n00:32:18.790 --> 00:32:20.734\nout of that library cuz it's just NFS.\n\n662\n00:32:20.734 --> 00:32:22.778\nIt's easy, anything can access it.\n\n663\n00:32:22.778 --> 00:32:25.080\nOr we can use a datastore.\n\n664\n00:32:25.080 --> 00:32:28.270\nIf it's a datastore, that limits us cuz\nwe can only access the datastore from\n\n665\n00:32:28.270 --> 00:32:33.190\ninside of vCenter or ESXi, right, so\nfrom our management tools for VMware.\n\n666\n00:32:33.190 --> 00:32:37.140\nSo NFS is better if you have\nan NFS location available and\n\n667\n00:32:37.140 --> 00:32:39.800\nyou can provide that, or\nyou can just pick a datastore.\n\n668\n00:32:39.800 --> 00:32:44.310\nNow I'm gonna pick a datastore here\njust because I think one of mine is NFS,\n\n669\n00:32:44.310 --> 00:32:45.380\nisn't it?\n\n670\n00:32:45.380 --> 00:32:49.220\nYeah, this one, this shared-datastore I\nhave is already NFS so I'll just pick it.\n\n671\n00:32:49.220 --> 00:32:51.360\nWe'll see, it might complain but\nI think it'll be okay with that.\n\n672\n00:32:52.630 --> 00:32:54.510\nAll right so there we go,\nit's gonna finish up.\n\n673\n00:32:54.510 --> 00:32:56.570\nIt's just got the settings right there and\nI can finish it.\n\n674\n00:32:56.570 --> 00:33:00.350\nSo now I have a Content Library.\n\n675\n00:33:00.350 --> 00:33:02.380\nAnd so when I come in here to\nmy Content Library I can see\n\n676\n00:33:02.380 --> 00:33:04.930\nI've got this VM Template Storage.\n\n677\n00:33:04.930 --> 00:33:09.230\nAnd that's basically gonna be on my low\ncost storage, my SATA, or whatever,\n\n678\n00:33:09.230 --> 00:33:10.750\nsomething inexpensive.\n\n679\n00:33:10.750 --> 00:33:13.640\nAnd now I can start\nthrowing data in there.\n\n680\n00:33:13.640 --> 00:33:15.760\nAnd you can customize it a little bit but\n\n681\n00:33:15.760 --> 00:33:17.680\nthere's not much to\ncustomize on the thing.\n\n682\n00:33:17.680 --> 00:33:19.650\nIt's really just a storage repository.\n\n683\n00:33:19.650 --> 00:33:21.370\nAnd so you can go to Related Objects.\n\n684\n00:33:21.370 --> 00:33:23.940\nAnd here's where you'll see all\nthe stuff that's inside of it.\n\n685\n00:33:23.940 --> 00:33:25.920\nAnd now we can start filling\nit up with templates.\n\n686\n00:33:25.920 --> 00:33:27.850\nYou create these templates,\nyou throw them in here.\n\n687\n00:33:27.850 --> 00:33:29.676\nAnd then any time you need them,\nthey're available.\n\n688\n00:33:29.676 --> 00:33:34.243\nAnd because it's attached to vCenter, all\nthe ESXi boxes that are managed by vCenter\n\n689\n00:33:34.243 --> 00:33:37.400\nwill be able to see this library and\nbe able to draw from it.\n\n690\n00:33:37.400 --> 00:33:41.395\nSo great way to put those templates\nsomewhere and not waste resources.\n\n691\n00:33:41.395 --> 00:33:44.152\n>> Don, thank you for\nall that information on our vApps here.\n\n692\n00:33:44.152 --> 00:33:46.740\nIt does look like we're running to\nthe end of another episode, though.\n\n693\n00:33:46.740 --> 00:33:49.710\nSo before we sign-off,\ndo you got any additional words?\n\n694\n00:33:49.710 --> 00:33:52.070\nI think it's about it on this,\njust remember,\n\n695\n00:33:52.070 --> 00:33:53.905\nLinux boxes they love being cloned.\n\n696\n00:33:53.905 --> 00:33:56.712\nThey really have no problem, even if\nyou have a bunch of Linux VM's that all\n\n697\n00:33:56.712 --> 00:33:58.107\nhave the same name they don't care.\n\n698\n00:33:58.107 --> 00:34:01.439\nYou don't want duplicate IPs though,\nso make sure you use DHCP.\n\n699\n00:34:01.439 --> 00:34:04.879\nAnd that means your app has to be\nexpecting new members to join where it\n\n700\n00:34:04.879 --> 00:34:06.020\ndoesn't know the IP.\n\n701\n00:34:06.020 --> 00:34:09.362\nSo there is a little bit of work on\nthe development side to get this to work\n\n702\n00:34:09.362 --> 00:34:09.930\nproperly.\n\n703\n00:34:09.930 --> 00:34:11.640\nIt's not as easy as just\ncloning the machines and\n\n704\n00:34:11.640 --> 00:34:13.340\nsaying you're done, so there's that.\n\n705\n00:34:13.340 --> 00:34:16.380\nOn the Windows side, always remember\nthose SSDs, they get in the way.\n\n706\n00:34:16.380 --> 00:34:18.700\nAnd then if you're running\nother operating systems,\n\n707\n00:34:18.700 --> 00:34:22.710\njust be aware they may have things\nin there that need to be unique.\n\n708\n00:34:22.710 --> 00:34:24.700\nYou may have things like database\ncredentials that you don't wanna\n\n709\n00:34:24.700 --> 00:34:25.580\nstore in the template.\n\n710\n00:34:25.580 --> 00:34:29.040\nThose are all considerations you have\nto have when you build those templates.\n\n711\n00:34:29.040 --> 00:34:31.670\nThe act of creating the template,\nsuper easy.\n\n712\n00:34:31.670 --> 00:34:34.120\nGetting your operating system\nset up to be ready to be cloned,\n\n713\n00:34:34.120 --> 00:34:35.200\nthat's a little bit of work.\n\n714\n00:34:35.200 --> 00:34:35.859\nSo just know there's more.\n\n715\n00:34:35.859 --> 00:34:38.770\nThat's not on the exam,\nbut it is in real life.\n\n716\n00:34:38.770 --> 00:34:40.440\nSo it's something you'll need to know.\n\n717\n00:34:40.440 --> 00:34:43.220\n>> Well Don, we appreciate having\nyou in the ITProTV studios.\n\n718\n00:34:43.220 --> 00:34:44.980\nAnd we appreciate you,\nthe viewer, out there.\n\n719\n00:34:44.980 --> 00:34:47.580\nSigning out for ITProTV,\nI've been your host Wes Brian.\n\n720\n00:34:47.580 --> 00:34:48.660\n>> And I'm Don Pezet.\n\n721\n00:34:48.660 --> 00:34:50.594\n>> And we'll see you next time.\n\n722\n00:34:50.594 --> 00:34:58.640\n[MUSIC]\n\n",
          "vimeoId": "169851627"
        },
        {
          "description": "In this episode, Wes and Don dive into and explore the VMware Converter. They discuss the source operating systems that are supported from Windows to Linux. They will also look at the different types of conversions that can be performed such as physical-to-virtual (P2V) and virtual-to-virtual (V2V) as well as deploying to vCenter.",
          "length": "2210",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-3-using_the_vmware_converter-060616-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-3-using_the_vmware_converter-060616-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-5-3-using_the_vmware_converter-060616-1-sm.jpg",
          "title": "Using VMware Converter",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.723 --> 00:00:15.657\nWelcome back to another exciting episode\nhere at ITProTV, I'm your host, Wes Bryan,\n\n3\n00:00:15.657 --> 00:00:19.181\nand in today's episode we're continuing\nthrough our series within VMware.\n\n4\n00:00:19.181 --> 00:00:23.011\nWhere specifically we're looking at the\nVMware Certified Professional version 6.\n\n5\n00:00:23.011 --> 00:00:26.590\nAnd then the last couple of episodes,\nwe've been looking at virtual machines.\n\n6\n00:00:26.590 --> 00:00:29.240\nJoining me back in the studio today\nis none other than Mr. Don Posset.\n\n7\n00:00:29.240 --> 00:00:30.300\nDon, how are you doing, sir?\n\n8\n00:00:30.300 --> 00:00:31.140\n>> I'm doing great, West.\n\n9\n00:00:31.140 --> 00:00:33.110\nReady to dive right into a new topic for\nus.\n\n10\n00:00:33.110 --> 00:00:35.680\nWe're gonna be tackling a tool\nwe haven't really addressed yet,\n\n11\n00:00:35.680 --> 00:00:38.600\nwhich is the VMware Vsphere Converter.\n\n12\n00:00:38.600 --> 00:00:41.920\nThe converter is a really cool utility\nbecause what it lets you do, well,\n\n13\n00:00:41.920 --> 00:00:45.540\nwhat it's original purpose was,\nto take physical machines, so\n\n14\n00:00:45.540 --> 00:00:48.970\nservers where you install the operating\nsystem on the BareMetal and\n\n15\n00:00:48.970 --> 00:00:50.930\nconvert them into virtual machines.\n\n16\n00:00:50.930 --> 00:00:52.140\nThat they call that P to V.\n\n17\n00:00:52.140 --> 00:00:53.800\nPhysical to Virtual.\n\n18\n00:00:53.800 --> 00:00:54.910\nThey usually write it P2V.\n\n19\n00:00:54.910 --> 00:00:58.310\nSo P2V conversions of machines.\n\n20\n00:00:58.310 --> 00:01:01.580\nSo map, back in the early days\nwhen ESX was rolling out and\n\n21\n00:01:01.580 --> 00:01:04.710\nVMware was trying to accompanies\nto adopt it, they couldn't say,\n\n22\n00:01:04.710 --> 00:01:08.270\nyeah deploy all this ESX infrastructure\nand create new VMs from scratch.\n\n23\n00:01:08.270 --> 00:01:12.790\nThey wanted to help people migrate to move\nfrom the old physical servers to the new\n\n24\n00:01:12.790 --> 00:01:13.850\nvirtual deployment.\n\n25\n00:01:13.850 --> 00:01:16.940\nIf a company opens today, they're gonna\nbe all virtual from the beginning so\n\n26\n00:01:16.940 --> 00:01:18.840\nthey don't need the VMware converter.\n\n27\n00:01:18.840 --> 00:01:21.070\nThey just need to install VM's.\n\n28\n00:01:21.070 --> 00:01:24.780\nBut if you're migrating from traditional\nphysical servers to virtual servers,\n\n29\n00:01:24.780 --> 00:01:27.360\nthe converter is really, really handy.\n\n30\n00:01:27.360 --> 00:01:31.390\nSo the way that it works is it\nreaches out to a physical machine,\n\n31\n00:01:31.390 --> 00:01:37.340\nit grabs a copy of that physical machine,\nand then it deploys it as\n\n32\n00:01:37.340 --> 00:01:40.970\na virtual machine inside of your Vcenter\nenvironment, or inside of an ESX server.\n\n33\n00:01:40.970 --> 00:01:43.470\nYou don't have to actually have\nto have Vcenter for this to work,\n\n34\n00:01:43.470 --> 00:01:45.120\nalthough you certainly can.\n\n35\n00:01:45.120 --> 00:01:46.100\nSo.\n\n36\n00:01:46.100 --> 00:01:48.780\nWhen we do that, we can quickly and\neasily migrate over to a virtual\n\n37\n00:01:48.780 --> 00:01:50.770\nenvironment without having to\nrebuild all of our machines.\n\n38\n00:01:50.770 --> 00:01:52.760\nTechnically the converter does it for us.\n\n39\n00:01:52.760 --> 00:01:53.590\nAll right.\n\n40\n00:01:53.590 --> 00:01:56.150\nNow over the years that's changed.\n\n41\n00:01:56.150 --> 00:01:59.130\nOriginally it was designed to do\nphysical service to virtual but\n\n42\n00:01:59.130 --> 00:02:02.500\nnow it also does V to V,\nvirtual to virtual.\n\n43\n00:02:02.500 --> 00:02:04.860\nAnd I know what you're thinking,\nif it's already a virtual machine,\n\n44\n00:02:04.860 --> 00:02:06.670\nwhy would I need to convert\nto a virtual machine?\n\n45\n00:02:06.670 --> 00:02:10.830\nWell here we're talking about virtual\nmachines from other manufacturers.\n\n46\n00:02:10.830 --> 00:02:13.910\nSo you might have some existing\nvirtualization environment and\n\n47\n00:02:13.910 --> 00:02:15.675\nnow you're just moving to VMware.\n\n48\n00:02:15.675 --> 00:02:18.645\nThis tool is all about helping\nyou do business with VMware,\n\n49\n00:02:18.645 --> 00:02:21.355\nhelping you get vSphere in your\nproduction environment and rolled out.\n\n50\n00:02:21.355 --> 00:02:24.115\nAnd it does a really good job.\n\n51\n00:02:24.115 --> 00:02:25.795\nNow, I've been kind of high-level on it.\n\n52\n00:02:25.795 --> 00:02:28.815\nLet's go to a little more detailed and\ntalk about how this thing works.\n\n53\n00:02:28.815 --> 00:02:34.655\nThe way it works,\nis you bring up a vSphere converter box.\n\n54\n00:02:34.655 --> 00:02:37.733\nRight, so you take a machine,\nand it It only runs on Windows so\n\n55\n00:02:37.733 --> 00:02:41.465\nyou've gotta have Windows 7 or\nWindows 8, or Windows server 2008,\n\n56\n00:02:41.465 --> 00:02:43.930\nWindows server 2012, one of those four.\n\n57\n00:02:43.930 --> 00:02:47.990\nSo you have a Windows machine and\nyou install the converter on it.\n\n58\n00:02:47.990 --> 00:02:51.240\nAll right, so\nthat becomes your converter server.\n\n59\n00:02:51.240 --> 00:02:54.830\nI'm gonna put server in air quotes there\nbecause If it's Windows server 2008 or\n\n60\n00:02:54.830 --> 00:02:57.500\n2012 then yes, it's a server, right.\n\n61\n00:02:57.500 --> 00:03:01.370\nBut if it's Windows 7 or\nWindows 8 it's a workstation but\n\n62\n00:03:01.370 --> 00:03:03.690\nit's running the converter utility on it.\n\n63\n00:03:03.690 --> 00:03:06.780\nThere really is no difference between\nrunning it on a server versus\n\n64\n00:03:06.780 --> 00:03:07.320\na workstation.\n\n65\n00:03:07.320 --> 00:03:11.160\nSo if you're trying to save some money you\ncan license Windows 7 or Windows 8 for\n\n66\n00:03:11.160 --> 00:03:13.930\nless than you can license a server\nthen that works out great.\n\n67\n00:03:13.930 --> 00:03:16.695\nBut if you've got a server laying\naround you can certainly reuse it,\n\n68\n00:03:16.695 --> 00:03:17.799\nit's very flexible, right.\n\n69\n00:03:18.840 --> 00:03:21.980\nThen you bring up the converter and\nthe converter scans the network.\n\n70\n00:03:21.980 --> 00:03:23.450\nIt helps you to find machines.\n\n71\n00:03:23.450 --> 00:03:25.750\nNow you can just manually type in\nthe machine, you don't have to scan, but\n\n72\n00:03:25.750 --> 00:03:28.170\nit basically identifies these machines.\n\n73\n00:03:28.170 --> 00:03:32.710\nAnd when you tell it to convert,\nIt reaches out to that machine and\n\n74\n00:03:32.710 --> 00:03:34.200\nit installs an agent.\n\n75\n00:03:34.200 --> 00:03:36.920\nThe agent is really important because\n\n76\n00:03:36.920 --> 00:03:38.760\nhow do you take an image of\na machine while it's turned on?\n\n77\n00:03:38.760 --> 00:03:40.660\nWell, usually you can't.\n\n78\n00:03:40.660 --> 00:03:44.790\nUsually what you have to do is you\nhave to shut the machine down and\n\n79\n00:03:44.790 --> 00:03:47.860\nput in some kind of third party\nimaging disk in it, right?\n\n80\n00:03:47.860 --> 00:03:52.300\nSo Semantic ghost or\nwhat are some of the big ones out there?\n\n81\n00:03:52.300 --> 00:03:53.090\nChronos true image.\n\n82\n00:03:53.090 --> 00:03:55.120\n>> A chronoship\n>> Yeah there's a hand full of\n\n83\n00:03:55.120 --> 00:03:59.050\nother ones that are out there that let you\nclone a disk while the machine is offline.\n\n84\n00:03:59.050 --> 00:04:01.871\nRight?\nAnd that's effectively what the converter\n\n85\n00:04:01.871 --> 00:04:06.218\nwants to do, it wants to clone that disk,\nbut it wants to do it while it's online,\n\n86\n00:04:06.218 --> 00:04:09.935\nand so the VMware converter agent is\na little program it installs, and\n\n87\n00:04:09.935 --> 00:04:14.610\nwhat it allows it to do is capture\nan image on the machine while it's online.\n\n88\n00:04:14.610 --> 00:04:16.760\nWell if it's a supported system.\n\n89\n00:04:16.760 --> 00:04:19.280\nNow, I mention the converter\ncould only run on Windows.\n\n90\n00:04:19.280 --> 00:04:20.950\nThat's the converter itself.\n\n91\n00:04:20.950 --> 00:04:24.210\nThe agent, or in other words, what we're\ngoing to install in the source machines,\n\n92\n00:04:24.210 --> 00:04:26.670\nthese support a ton of\noperating systems for it.\n\n93\n00:04:26.670 --> 00:04:27.940\nOf course they support Windows.\n\n94\n00:04:27.940 --> 00:04:29.520\nSo we've got Windows Server 2008, 2012.\n\n95\n00:04:29.520 --> 00:04:32.990\nThey also support Windows Server 2003,\n\n96\n00:04:32.990 --> 00:04:34.870\neven though Microsoft\ndoesn't support it anymore.\n\n97\n00:04:34.870 --> 00:04:35.560\nI think just R2.\n\n98\n00:04:35.560 --> 00:04:38.382\nThen they do Windows XP, Windows 7,\n\n99\n00:04:38.382 --> 00:04:42.450\nWindows 8, Windows Vista,\nkinda left that one out.\n\n100\n00:04:42.450 --> 00:04:46.690\nI'm going to leave Windows 10 off for now,\nbecause it's not in the official list, so\n\n101\n00:04:46.690 --> 00:04:49.480\nin the exam Windows 10 is not in\nthe official list, although in real\n\n102\n00:04:49.480 --> 00:04:53.510\nlife I've done it in Windows 10, but\nit's not officially supported yet.\n\n103\n00:04:53.510 --> 00:04:54.480\nSo really,\n\n104\n00:04:54.480 --> 00:04:58.593\nmost of the Windows platforms are all\nsupported for power-on conversions.\n\n105\n00:04:58.593 --> 00:05:02.830\nPower-on, so the machines are on,\nthe agent installs, we do the conversion.\n\n106\n00:05:02.830 --> 00:05:05.530\nIt's not just a Windows world too,\nbecause we have Linux, right?\n\n107\n00:05:05.530 --> 00:05:09.850\nYou can do Red Hat Enterprise Linux,\nit's versions 6 and 7 I believe.\n\n108\n00:05:09.850 --> 00:05:10.730\nDo I have a note on that?\n\n109\n00:05:10.730 --> 00:05:11.340\n>> 3 and 6.\n\n110\n00:05:11.340 --> 00:05:13.780\n>> 3 through 6, shoot, not 7 at all.\n\n111\n00:05:13.780 --> 00:05:15.590\nSo.\n[LAUGH] Glad I wrote that down.\n\n112\n00:05:15.590 --> 00:05:19.300\nSo Red Hat Enterprise Linux,\nversions 3 through 6.\n\n113\n00:05:19.300 --> 00:05:24.350\nWe've got SUSE Enterprise Linux,\nit is versions 9 through 11.\n\n114\n00:05:24.350 --> 00:05:26.950\nUbuntu, 10, 12, and 13.\n\n115\n00:05:26.950 --> 00:05:29.170\nI don't actually know what\nhappened to Ubuntu 11.\n\n116\n00:05:29.170 --> 00:05:29.940\nMaybe it doesn't exist.\n\n117\n00:05:29.940 --> 00:05:32.220\nBut either way, VMware doesn't support it.\n\n118\n00:05:32.220 --> 00:05:32.870\nSo 10, 12 and 13.\n\n119\n00:05:32.870 --> 00:05:35.090\nWe got a lot of Linux boxes.\n\n120\n00:05:35.090 --> 00:05:36.960\nAnd these are all for\npower-on conversion, so\n\n121\n00:05:36.960 --> 00:05:38.610\nthey can be on and we do the conversion.\n\n122\n00:05:38.610 --> 00:05:41.200\nNow, why Why does that matter?\n\n123\n00:05:41.200 --> 00:05:45.610\nWell, it matters because we want to create\nas minimal a down time as possible.\n\n124\n00:05:45.610 --> 00:05:49.600\nIf I take the machine offline, to make\nan image, now users can't get to it.\n\n125\n00:05:49.600 --> 00:05:52.210\nNow maybe I scheduled that for\nafter hours, or on the weekend.\n\n126\n00:05:52.210 --> 00:05:55.990\nBut if I'm in a 24/7 shop,\nwhen can I take the machine off?\n\n127\n00:05:55.990 --> 00:05:56.940\nI can't, right?\n\n128\n00:05:56.940 --> 00:06:00.494\nSo if I can do it while it's online, the\nmachine will be slower while I'm imaging\n\n129\n00:06:00.494 --> 00:06:02.340\nit but at least it's up, it's working.\n\n130\n00:06:02.340 --> 00:06:04.310\nPeople can still do their work.\n\n131\n00:06:04.310 --> 00:06:06.640\nAnd when it's done,\nnow I've got a clone of the machine.\n\n132\n00:06:06.640 --> 00:06:08.700\nWe've cloned it, right?\n\n133\n00:06:08.700 --> 00:06:12.850\nNow, what the converter does\nfrom there depends on us.\n\n134\n00:06:12.850 --> 00:06:16.667\nIt can shut off the original machine and\nstart up the new machine.\n\n135\n00:06:16.667 --> 00:06:17.610\nIt can do that.\n\n136\n00:06:17.610 --> 00:06:18.880\nRight?\nAnd now you're running on the VM, and\n\n137\n00:06:18.880 --> 00:06:21.750\nif something goes wrong you\ncan just shut the VM down and\n\n138\n00:06:21.750 --> 00:06:23.760\nturn the original machine back on,\nand you're back in business.\n\n139\n00:06:23.760 --> 00:06:24.960\nOkay, what could go wrong?\n\n140\n00:06:24.960 --> 00:06:28.360\n[LAUGH] A question that doesn't\neven need asking, does it, Wes?\n\n141\n00:06:28.360 --> 00:06:31.180\nWe've seen a lot of things can go wrong.\n\n142\n00:06:31.180 --> 00:06:33.420\nIt doesn't just take\nan image of the machine.\n\n143\n00:06:33.420 --> 00:06:37.220\nIn addition to taking image of\nthe machines it loads the drivers and\n\n144\n00:06:37.220 --> 00:06:39.960\nthe VMWare tools the things that we\nneed the virtual machine to be up and\n\n145\n00:06:39.960 --> 00:06:44.270\nrunning in the Vcenter in\nEXSI environment right.\n\n146\n00:06:44.270 --> 00:06:46.535\nSomething can go wrong\nthe drivers can cause a problem,\n\n147\n00:06:46.535 --> 00:06:50.235\nOr, more often it's the hardware drive\nstill being there that cause the problem.\n\n148\n00:06:50.235 --> 00:06:51.475\nI see it with RAID controllers a lot.\n\n149\n00:06:51.475 --> 00:06:54.775\nSo you have a RAID driver when\nyou're on a physical machine,\n\n150\n00:06:54.775 --> 00:06:56.935\nthen you bring it into a VM and\nyou don't see the RAID any more,\n\n151\n00:06:56.935 --> 00:06:59.105\nbecause the RAID is all done\nby the underlying systems.\n\n152\n00:06:59.105 --> 00:07:02.325\nAnd now boot up, like in Windows, and you\nget a blue screen because of that driver.\n\n153\n00:07:02.325 --> 00:07:04.385\nSo now you've got to kind of\nwork out the complexities there.\n\n154\n00:07:04.385 --> 00:07:07.520\nYou've got to make sure you update\nthe driver prior to doing the migration.\n\n155\n00:07:07.520 --> 00:07:10.200\nSo, those are the things\nthat can go wrong.\n\n156\n00:07:10.200 --> 00:07:13.710\nAnd in that scenario,\nI might want to clone the VM to test it,\n\n157\n00:07:13.710 --> 00:07:16.720\nbut not actually shut the original\none down, and you can do that.\n\n158\n00:07:16.720 --> 00:07:17.400\nRight?\n\n159\n00:07:17.400 --> 00:07:20.020\nBut if I don't shut the original one down\nthen people are working in it right?\n\n160\n00:07:20.020 --> 00:07:25.610\nAnd if they keep making changes, I've\nnow got this clone that's out of date.\n\n161\n00:07:25.610 --> 00:07:27.700\nSo what happens then?\n\n162\n00:07:27.700 --> 00:07:31.450\nWell for the supported operating systems,\nyou can leave the agent on there and\n\n163\n00:07:31.450 --> 00:07:33.220\nit can synchronize changes.\n\n164\n00:07:33.220 --> 00:07:34.870\nSo when you are ready to make the flip,\n\n165\n00:07:34.870 --> 00:07:37.800\nyou can say synchronize the changes\nwith that machine and then shut it off.\n\n166\n00:07:37.800 --> 00:07:39.820\nThen that way it just gets what changes.\n\n167\n00:07:39.820 --> 00:07:42.320\nIt doesn't have to get the whole\nmachine over again and\n\n168\n00:07:42.320 --> 00:07:45.010\nthat's really useful if you\nhave a huge amount of data.\n\n169\n00:07:45.010 --> 00:07:47.450\nYou just want to get what's changed.\n\n170\n00:07:47.450 --> 00:07:51.944\nIt synchronizes those in, but\nthat's only with the supported systems.\n\n171\n00:07:51.944 --> 00:07:54.461\nOn the virtual side,\nlet's talk about that.\n\n172\n00:07:54.461 --> 00:07:57.856\nOn a physical box, we can connect any\nphysical box, bring the settings in and\n\n173\n00:07:57.856 --> 00:07:59.279\nturn it into a virtual machine.\n\n174\n00:07:59.279 --> 00:08:02.356\nBut we can't do that with all\nthe virtual infrastructures.\n\n175\n00:08:02.356 --> 00:08:03.653\nIn fact they only support a few.\n\n176\n00:08:03.653 --> 00:08:07.051\nThey support Hyper-V, so\nMicrosoft's Hyper-V, and\n\n177\n00:08:07.051 --> 00:08:10.318\nthey support Red Hat Enterprise Linux\nwith KVM or Xen.\n\n178\n00:08:10.318 --> 00:08:13.919\nIf you've got any of those three\nyou can do a power on migration, or\n\n179\n00:08:13.919 --> 00:08:17.155\nconversion, get them brought into ESX.\n\n180\n00:08:17.155 --> 00:08:20.045\nIf you're running something else, right.\n\n181\n00:08:20.045 --> 00:08:24.945\nMaybe you're running Citrix XenServer or\nVirtualbox or something else,\n\n182\n00:08:24.945 --> 00:08:28.740\nyou can still do the conversion,\nit just isn't a power on conversion.\n\n183\n00:08:28.740 --> 00:08:30.031\nYou're gonna have to shut the VM down,\nright.\n\n184\n00:08:30.031 --> 00:08:34.031\nAnd you can bring a VHD from the old\nvirtual PC or something like that.\n\n185\n00:08:34.031 --> 00:08:37.157\nYou can bring that into the converter and\nit'll convert it for you, right, but\n\n186\n00:08:37.157 --> 00:08:38.380\nthe machine has to be offline.\n\n187\n00:08:38.380 --> 00:08:41.578\nSo power on conversions are kinda\nlimited to the supported platforms.\n\n188\n00:08:41.578 --> 00:08:45.157\nBut the supported platforms are pretty\nmuch what you see out there in real\n\n189\n00:08:45.157 --> 00:08:45.750\nlife land.\n\n190\n00:08:45.750 --> 00:08:48.820\nYou don't usually see people\ndeviate from those main ones.\n\n191\n00:08:50.110 --> 00:08:52.600\nAll right, so\nthat's basically how it works.\n\n192\n00:08:52.600 --> 00:08:54.220\nThat's what it does.\n\n193\n00:08:54.220 --> 00:08:56.390\nWhen you're done, when it's finished,\n\n194\n00:08:56.390 --> 00:08:59.930\nit brings up the VM and\nIt can shut the original machine down.\n\n195\n00:08:59.930 --> 00:09:01.877\nIt can uninstall the agent\nbefore it shuts it down.\n\n196\n00:09:01.877 --> 00:09:04.168\nSo the original machine is\nnow back to its normal state,\n\n197\n00:09:04.168 --> 00:09:06.231\ngives us kind of that fail back,\nthat safety net.\n\n198\n00:09:06.231 --> 00:09:08.770\nAnd then you can run, and\nas long as everything is good,\n\n199\n00:09:08.770 --> 00:09:11.417\nwithin a week of testing you\nknow that everything is good,\n\n200\n00:09:11.417 --> 00:09:14.420\nyou can get rid of the physical\nmachine and now its converted.\n\n201\n00:09:14.420 --> 00:09:18.060\nThat's the whole point of the converter,\nall right.\n\n202\n00:09:18.060 --> 00:09:22.210\nBut it all begins with a pretty simple\nstep, which is installing the converter.\n\n203\n00:09:22.210 --> 00:09:23.990\nWe need to get the converter\ninstalled on a machine.\n\n204\n00:09:23.990 --> 00:09:26.910\nSo I need a Windows box somewhere\nthat's gonna host the converter.\n\n205\n00:09:26.910 --> 00:09:30.360\nAnd when I install it,\nthere's two modes to install it.\n\n206\n00:09:30.360 --> 00:09:34.340\nOne mode is standalone, where this is\nthe entire converter running right on\n\n207\n00:09:34.340 --> 00:09:36.800\na single machine, and\nthat's what I normally use.\n\n208\n00:09:36.800 --> 00:09:39.670\nBut if you're gonna be\nconverting a lot of machines,\n\n209\n00:09:39.670 --> 00:09:41.620\nthen what you can do is\nyou can split it up so\n\n210\n00:09:41.620 --> 00:09:45.160\nthat you have a converter server, and\nthen you have a management server.\n\n211\n00:09:45.160 --> 00:09:46.810\nYou can split it into two pieces.\n\n212\n00:09:46.810 --> 00:09:51.510\nAnd that way, you might have more\nthan one converting server and\n\n213\n00:09:51.510 --> 00:09:54.520\none management server that's\ncontrolling all of them.\n\n214\n00:09:54.520 --> 00:09:56.602\nSo, if you're converting\nhundreds of thousands of machine.\n\n215\n00:09:56.602 --> 00:09:59.100\nMaybe you have a virtual\ndesktop infrastructure, and so\n\n216\n00:09:59.100 --> 00:10:04.220\nyou've got 1,000 virtual work stations and\nyou wanna convert them all over, or 1,000\n\n217\n00:10:04.220 --> 00:10:08.580\nphysical workstations, it would take a\nlong time for one conversion box to do it.\n\n218\n00:10:08.580 --> 00:10:11.060\nBut if I had a bunch of conversion boxes,\nwe could knock that out.\n\n219\n00:10:11.060 --> 00:10:12.390\nRight, so\nit's not really standalone any more,\n\n220\n00:10:12.390 --> 00:10:13.670\nnow you've got a client server model.\n\n221\n00:10:13.670 --> 00:10:15.430\nSo, it's gonna ask us about that.\n\n222\n00:10:15.430 --> 00:10:18.300\nThe other thing we need is we need\nsomewhere to store the images while\n\n223\n00:10:18.300 --> 00:10:22.320\nthey're being converted and\nit's gotta be a network share somewhere.\n\n224\n00:10:22.320 --> 00:10:25.870\nSo somewhere on your network, you're gonna\nneed an SMB network share creator, or\n\n225\n00:10:25.870 --> 00:10:27.050\na CIFS share.\n\n226\n00:10:27.050 --> 00:10:28.860\nSo typically it's gonna be a Windows box,\nbut\n\n227\n00:10:28.860 --> 00:10:32.942\nit could be a Linux box running Samba,\nyou just need to have a CIFS share.\n\n228\n00:10:32.942 --> 00:10:35.863\nAnd when you've got that, sorry,\nI just threw out CIFS like nothing.\n\n229\n00:10:35.863 --> 00:10:40.440\nIt's C-I-F-S, right, the common\nInternet file sharing, is that right?\n\n230\n00:10:40.440 --> 00:10:42.240\n>> Yeah, I think that's it, file system.\n\n231\n00:10:42.240 --> 00:10:42.980\n>> Yeah, okay.\n\n232\n00:10:42.980 --> 00:10:45.790\nPerfect so we're gonna set that up and\nshare that out.\n\n233\n00:10:45.790 --> 00:10:47.407\nAnd that's where we'll store\nthe images while they're converted.\n\n234\n00:10:47.407 --> 00:10:49.151\nIt's not where we're gonna run them from,\nright.\n\n235\n00:10:49.151 --> 00:10:52.230\nWhen you bring them into ESX,\nthey're gonna run from a data store.\n\n236\n00:10:52.230 --> 00:10:55.440\nBut while it's working with them,\nit's got to store them somewhere.\n\n237\n00:10:55.440 --> 00:10:57.400\nSo that's where I need to be.\n\n238\n00:10:57.400 --> 00:10:59.840\nI need to get the converter\ninstalled on my machine first and\n\n239\n00:10:59.840 --> 00:11:01.500\nthen we'll create that file share.\n\n240\n00:11:01.500 --> 00:11:05.020\nSo let's kick things off,\nthis is my vCenter server.\n\n241\n00:11:05.020 --> 00:11:07.040\nWhere should I install my converter?\n\n242\n00:11:07.040 --> 00:11:08.810\nI guess I can install it\nright here on vCenter.\n\n243\n00:11:08.810 --> 00:11:11.990\nMy vCenter server has a bunch\nof memory and extra resources so\n\n244\n00:11:11.990 --> 00:11:14.480\nit can handle holding the converter.\n\n245\n00:11:14.480 --> 00:11:17.780\nThe converter you get from VMware,\nif you purchase the vSphere Suite,\n\n246\n00:11:17.780 --> 00:11:20.000\nyou'll have the download\navailable from them.\n\n247\n00:11:20.000 --> 00:11:21.910\nI downloaded it before the show, and so\n\n248\n00:11:21.910 --> 00:11:25.760\nI've got the VMware converter\nright here for version 6.0.\n\n249\n00:11:25.760 --> 00:11:28.370\nThere is a converter for\nversion 5.5 and 5.0.\n\n250\n00:11:28.370 --> 00:11:30.492\nYou need to run the latest version.\n\n251\n00:11:30.492 --> 00:11:32.715\nSo I've got this 6.0 version.\n\n252\n00:11:32.715 --> 00:11:35.390\nAnd installing it is\npretty straightforward.\n\n253\n00:11:35.390 --> 00:11:39.070\nWhen you run through the installer it's\ngonna ask just a handful of questions\n\n254\n00:11:39.070 --> 00:11:43.180\nall related to typical install stuff,\nyou can pretty much just hit Next on\n\n255\n00:11:43.180 --> 00:11:46.740\nthis thing over and over again and\nyou'll get it installed, okay.\n\n256\n00:11:46.740 --> 00:11:49.500\nNow I'm installing it on my vCenter\nbox just because I only have so\n\n257\n00:11:49.500 --> 00:11:51.120\nmany resources here in the lab.\n\n258\n00:11:51.120 --> 00:11:54.766\nIn real life land, you'll probably wanna\nuse a dedicated box because what's gonna\n\n259\n00:11:54.766 --> 00:11:56.577\nhappen when you start imaging a machine?\n\n260\n00:11:56.577 --> 00:11:58.800\nYou're going to peg out that\nnetwork adapter, right?\n\n261\n00:11:58.800 --> 00:12:01.440\nIt takes a lot of resource,\nit takes a lot of CPU as it processes,\n\n262\n00:12:01.440 --> 00:12:03.560\nit eats up RAM like crazy, believe me.\n\n263\n00:12:03.560 --> 00:12:05.470\nSo you'll want a dedicated box for this.\n\n264\n00:12:06.940 --> 00:12:11.493\nAnd then I move forward, it just asks me\nto sign off on a licensing agreement,\n\n265\n00:12:11.493 --> 00:12:14.804\nwhich we'll gladly do because\nwe have no other option.\n\n266\n00:12:14.804 --> 00:12:15.520\nAnd then we'll install it\nonto our hard drive. And\n\n267\n00:12:15.520 --> 00:12:19.790\nhere's the decision where I figure out,\nis it gonna be a dedicated machine where\n\n268\n00:12:19.790 --> 00:12:23.000\neverything runs right here,\nor am I doing client server?\n\n269\n00:12:23.000 --> 00:12:25.440\nIf I'm doing client server,\non the next page, it's gonna ask me,\n\n270\n00:12:25.440 --> 00:12:28.030\nis this the server or is this the client?\n\n271\n00:12:28.030 --> 00:12:29.730\nAnd you only need one client.\n\n272\n00:12:29.730 --> 00:12:32.630\nI mean, you might do more than one, but\ntechnically you only need one client.\n\n273\n00:12:32.630 --> 00:12:34.605\nBut you can have more than one server, and\n\n274\n00:12:34.605 --> 00:12:36.813\nnow you get even more\nworkload that you can do.\n\n275\n00:12:36.813 --> 00:12:39.790\nI'll just do a local install,\nput both on the same machine.\n\n276\n00:12:41.560 --> 00:12:43.770\nAll right, then we'll go ahead and\nget it installed.\n\n277\n00:12:43.770 --> 00:12:46.275\nAnd it's gonna run into its install.\n\n278\n00:12:46.275 --> 00:12:51.601\nNow while it's doing that,\nI'm gonna jump over to another machine and\n\n279\n00:12:51.601 --> 00:12:54.120\ncreate a network share on it.\n\n280\n00:12:54.120 --> 00:12:58.430\nOkay, I need a network share so that I\ncan store these images somewhere, right?\n\n281\n00:12:58.430 --> 00:13:01.660\nSo I'm just gonna whip one up\nreal quick on this machine.\n\n282\n00:13:01.660 --> 00:13:03.200\nIt doesn't necessarily matter where.\n\n283\n00:13:03.200 --> 00:13:06.240\nI mean, you obviously wanna make sure\nyou have enough hard drive space and\n\n284\n00:13:06.240 --> 00:13:09.780\nall that to be able to store the images.\n\n285\n00:13:09.780 --> 00:13:11.800\nThe images can be pretty big, right.\n\n286\n00:13:11.800 --> 00:13:16.229\nIf I'm imaging a physical machine and\nthe physical machine has ten\n\n287\n00:13:16.229 --> 00:13:20.720\nterabytes of data,\nhow big is my virtual image gonna be?\n\n288\n00:13:20.720 --> 00:13:21.350\nTen terabytes.\n\n289\n00:13:21.350 --> 00:13:24.440\nI'm gonna need to store it somewhere and\nI'll need to have that space.\n\n290\n00:13:24.440 --> 00:13:27.488\nIn fact, let me put that on my root drive.\n\n291\n00:13:27.488 --> 00:13:30.842\nSo definitely be aware of that\nas you create the shared folder.\n\n292\n00:13:30.842 --> 00:13:32.500\nI'm gonna break rules a little bit here,\ntoo.\n\n293\n00:13:32.500 --> 00:13:34.360\nI'm going to put it on\nmy domain controller.\n\n294\n00:13:34.360 --> 00:13:37.771\nIn real life land,\nprobably not where I would put it.\n\n295\n00:13:37.771 --> 00:13:41.559\nYou probably have a storage appliance\nsomewhere that you can use, or\n\n296\n00:13:41.559 --> 00:13:42.810\nsomething like that.\n\n297\n00:13:42.810 --> 00:13:44.930\nBut I'm gonna go ahead and share it.\n\n298\n00:13:44.930 --> 00:13:50.446\nAnd for the permissions, I'll just make\nsure that administrators can write to it.\n\n299\n00:13:50.446 --> 00:13:53.720\nWhoops, administrators\nwith a z is very edgy.\n\n300\n00:13:53.720 --> 00:13:57.740\nSo I'll get that put in there, and\nI'll give the administrators full control.\n\n301\n00:13:57.740 --> 00:13:59.301\nAnd I'm using the administrator account.\n\n302\n00:13:59.301 --> 00:14:00.864\nYou could create a dedicated account for\nthis.\n\n303\n00:14:00.864 --> 00:14:04.560\nSo here's my dedicated\nVMware converter account.\n\n304\n00:14:04.560 --> 00:14:07.815\nBut a lot of times these are gonna\nadministrators doing the task anyway,\n\n305\n00:14:07.815 --> 00:14:11.840\ncuz you have to be an administrator\nto install the converter agent.\n\n306\n00:14:11.840 --> 00:14:13.399\nSo you might as well use that account.\n\n307\n00:14:13.399 --> 00:14:16.590\nBut you can certainly ratchet up\nthe security on that if you want.\n\n308\n00:14:16.590 --> 00:14:18.548\nAll right, so I've got that created.\n\n309\n00:14:18.548 --> 00:14:19.850\nI'm just gonna test and\n\n310\n00:14:19.850 --> 00:14:24.900\nmake sure that I can actually get\nto it from my converter machine.\n\n311\n00:14:24.900 --> 00:14:27.720\nMy converter, it's finished installing,\nbut I'm just gonna test that out and\n\n312\n00:14:27.720 --> 00:14:29.610\nmake sure I can get to that share.\n\n313\n00:14:29.610 --> 00:14:33.166\nSo I'm gonna connect to PlabDC1/convert.\n\n314\n00:14:33.166 --> 00:14:34.184\nAnd I can get to it, and\n\n315\n00:14:34.184 --> 00:14:37.050\nI'm just gonna quick test to make\nsure I can create a file in it.\n\n316\n00:14:37.050 --> 00:14:39.870\nI need to make sure that I've\ngot read-write permissions.\n\n317\n00:14:39.870 --> 00:14:41.910\nSo I'm just gonna create a text document.\n\n318\n00:14:41.910 --> 00:14:42.642\nAnd I do, good.\n\n319\n00:14:42.642 --> 00:14:44.190\nAll right, so I can get to the share.\n\n320\n00:14:44.190 --> 00:14:45.620\nI've got read-write permissions.\n\n321\n00:14:45.620 --> 00:14:48.020\nSo now I'm ready to\nfire up that converter.\n\n322\n00:14:48.020 --> 00:14:50.210\nOkay, so\nit's offering to run the converter for me.\n\n323\n00:14:50.210 --> 00:14:52.360\nI mean, it created a desktop icon for\nme, too.\n\n324\n00:14:52.360 --> 00:14:55.640\nBut we'll just let it run it for\nme, and it's gonna launch.\n\n325\n00:14:55.640 --> 00:15:01.740\nNow the converter itself, it's not\namazingly spectacular or anything.\n\n326\n00:15:01.740 --> 00:15:03.220\nIt's just fairly cut and dried.\n\n327\n00:15:03.220 --> 00:15:07.070\nWhat you're gonna see is\nthe option to convert a machine,\n\n328\n00:15:07.070 --> 00:15:10.470\nthe option to configure a machine,\nand then what's going on right now.\n\n329\n00:15:10.470 --> 00:15:13.220\nAnd so we expect there to be\nnothing going on right now.\n\n330\n00:15:13.220 --> 00:15:14.560\nConverting a machine is\nwhat we normally do.\n\n331\n00:15:14.560 --> 00:15:18.645\nWe're gonna reach out and grab a copy of\na machine, and we're gonna create a VM.\n\n332\n00:15:18.645 --> 00:15:21.150\nConfigure a machine,\nwhat's that all about?\n\n333\n00:15:21.150 --> 00:15:25.020\nWell, when we go to deploy this into ESX,\n\n334\n00:15:25.020 --> 00:15:30.530\nwe've gotta create a virtual machine\nthat mirrors the physical machine.\n\n335\n00:15:30.530 --> 00:15:31.650\nAnd by default, it's gonna do that.\n\n336\n00:15:31.650 --> 00:15:33.580\nSo if we have 8 gigs of RAM\nin the physical machine,\n\n337\n00:15:33.580 --> 00:15:35.830\nit's gonna create a virtual\nmachine with 8 gigs of RAM.\n\n338\n00:15:35.830 --> 00:15:36.807\nWell, we might wanna adjust that.\n\n339\n00:15:36.807 --> 00:15:39.520\nAnd you'll see in the wizard,\nit's actually easier in the wizard.\n\n340\n00:15:39.520 --> 00:15:42.020\nBut you can adjust\nthe configuration of that machine.\n\n341\n00:15:42.020 --> 00:15:45.020\nAnd that's what that button does is,\neven during the conversion,\n\n342\n00:15:45.020 --> 00:15:46.900\nyou can choose a conversion and\nhit Configure and\n\n343\n00:15:46.900 --> 00:15:48.830\nmake some adjustments to\nit even while it's running.\n\n344\n00:15:48.830 --> 00:15:49.740\nIt's kinda neat.\n\n345\n00:15:49.740 --> 00:15:50.968\nAnd you can change\nthe way that's gonna be.\n\n346\n00:15:50.968 --> 00:15:52.687\nMaybe you wanna add some more memory or\n\n347\n00:15:52.687 --> 00:15:55.543\ntake some memory away when you\nbring it into a virtual machine.\n\n348\n00:15:55.543 --> 00:15:58.271\nYou might wanna increase or\ndecrease the hard drive sizes.\n\n349\n00:15:58.271 --> 00:15:59.376\nYou can do a lot of that stuff.\n\n350\n00:15:59.376 --> 00:16:01.444\nDuring the conversation, all right?\n\n351\n00:16:01.444 --> 00:16:03.858\nSo that's what we do with\nconfigure the machine.\n\n352\n00:16:03.858 --> 00:16:07.830\nAll right, now I have an application\nserver sitting around.\n\n353\n00:16:07.830 --> 00:16:11.260\nThis guy right here which\nis called PL app 01.\n\n354\n00:16:11.260 --> 00:16:13.395\nSo good old PL app App 01.\n\n355\n00:16:13.395 --> 00:16:14.125\nIt's just a machine.\n\n356\n00:16:14.125 --> 00:16:15.025\nIt's sitting here.\n\n357\n00:16:15.025 --> 00:16:17.146\nIt's minding it's own business and\nI lied about it's name.\n\n358\n00:16:17.146 --> 00:16:20.331\nIt's actually called PLab DM01.\n\n359\n00:16:20.331 --> 00:16:22.207\nNot that that makes that\nmuch of a difference.\n\n360\n00:16:22.207 --> 00:16:24.155\nWell, I guess it sort\nof makes a difference.\n\n361\n00:16:24.155 --> 00:16:27.105\nI need to know that name because when\nI deploy my new machine it's going\n\n362\n00:16:27.105 --> 00:16:29.535\nto have that name, and if I have\nboth machines up at the same time,\n\n363\n00:16:29.535 --> 00:16:30.975\nI'm going to get some conflicts, right?\n\n364\n00:16:30.975 --> 00:16:33.255\nSo I do need to at least\nbe aware of that name.\n\n365\n00:16:33.255 --> 00:16:34.305\nPLab DM01.\n\n366\n00:16:34.305 --> 00:16:37.330\nAlso if I browse the network,\nI'll kind of need to know it.\n\n367\n00:16:37.330 --> 00:16:39.702\nOr the IP it's .7.\n\n368\n00:16:39.702 --> 00:16:43.180\nAll right now this machine is running\nWindows Server 2012 which is good,\n\n369\n00:16:43.180 --> 00:16:44.680\nthat's a supported OS.\n\n370\n00:16:44.680 --> 00:16:48.750\nSo I'll definitely be able to migrate it,\nassuming I don't run into any other\n\n371\n00:16:48.750 --> 00:16:52.070\ncrazy problems,\nwhich is certainly possible, right?\n\n372\n00:16:52.070 --> 00:16:54.820\nProblems normally arise from drivers.\n\n373\n00:16:54.820 --> 00:16:56.630\nIt's almost always a driver related issue.\n\n374\n00:16:56.630 --> 00:17:00.450\nBut it could be permissions, you could\nhave problems in Windows all ready.\n\n375\n00:17:00.450 --> 00:17:02.600\nAnd let me tell you, I've heard\nthis from people where they said,\n\n376\n00:17:02.600 --> 00:17:05.650\nwell my physical machine was acting up so\nI converted it to a virtual one.\n\n377\n00:17:05.650 --> 00:17:07.300\nI figured it'd be better.\n\n378\n00:17:07.300 --> 00:17:10.200\nAnd I always tell them,\nif you had a problem that was a problem\n\n379\n00:17:10.200 --> 00:17:13.240\nwith physical machine, you probably\njust converted the problem and\n\n380\n00:17:13.240 --> 00:17:14.780\nnow you have the same problem\nin the virtual machine.\n\n381\n00:17:14.780 --> 00:17:16.720\nIf it were storage drivers and\n\n382\n00:17:16.720 --> 00:17:19.350\nnetwork drivers, yeah,\nthat'll get fixed with the conversion.\n\n383\n00:17:19.350 --> 00:17:22.290\nBut if you've messed something up like\npermissions in windows, it's going to port\n\n384\n00:17:22.290 --> 00:17:26.340\nthat stuff over and you will still have\nthe same problem in your virtual machine.\n\n385\n00:17:26.340 --> 00:17:30.530\nIt's not a magic cure-all but\nit certainly does work in some cases.\n\n386\n00:17:30.530 --> 00:17:32.250\nAll right, so\nI want to convert this machine.\n\n387\n00:17:32.250 --> 00:17:34.520\nWell, I don't actually do\nit here from this machine,\n\n388\n00:17:34.520 --> 00:17:38.020\nI go back to where my\nconverter's installed.\n\n389\n00:17:38.020 --> 00:17:41.430\nAnd in the converter,\nI'm gonna go up here to Convert Machine.\n\n390\n00:17:41.430 --> 00:17:45.080\nAnd it's gonna launch a little wizard and\nI'll answer what I'm gonna do.\n\n391\n00:17:45.080 --> 00:17:46.210\nNow, I start with the source.\n\n392\n00:17:46.210 --> 00:17:47.190\nWhere is this coming from?\n\n393\n00:17:47.190 --> 00:17:49.260\nAnd you'll see, powered on machine.\n\n394\n00:17:49.260 --> 00:17:52.380\nI can bring it over from a VM,\nwhere Infrastructure Virtual Machine.\n\n395\n00:17:52.380 --> 00:17:55.030\nSo maybe it's running on\nanother VM somewhere else.\n\n396\n00:17:55.030 --> 00:17:58.690\nI could bring it in from VMWare\nworkstation or other virtual machine.\n\n397\n00:17:58.690 --> 00:18:01.690\nThat would be VMWare Fusion,\nVMWare player, right?\n\n398\n00:18:01.690 --> 00:18:02.820\nWe can get from all those.\n\n399\n00:18:02.820 --> 00:18:05.760\nI don't think I mentioned Player\nearlier but it does support that.\n\n400\n00:18:05.760 --> 00:18:09.810\nWe can bring it from a backup image or\nthird party virtual machine.\n\n401\n00:18:09.810 --> 00:18:11.750\nThis is the offline one the power off,\nright?\n\n402\n00:18:11.750 --> 00:18:12.990\nNot a power on conversion.\n\n403\n00:18:12.990 --> 00:18:18.570\nSo if I have a image from Semantic Ghost\nOr Norton Ghost what do they call it,\n\n404\n00:18:18.570 --> 00:18:23.320\nAcronis True Image, even a Windows Backup\nor a Symantec Backup Exec backup.\n\n405\n00:18:23.320 --> 00:18:26.420\nI can create the VM right from\na backup of a physical machine.\n\n406\n00:18:26.420 --> 00:18:28.330\nThat's pretty cool stuff all right.\n\n407\n00:18:28.330 --> 00:18:32.190\nAnd then you've got Hyper V Server\ncoming from Hyper V.\n\n408\n00:18:32.190 --> 00:18:34.050\nAlso I should mention your\nthird party virtual machine,\n\n409\n00:18:34.050 --> 00:18:37.810\nthis would be things like the older\nMicrosoft machines, virtual box,\n\n410\n00:18:37.810 --> 00:18:40.730\nproducts like that you can actually\nconvert in using this option.\n\n411\n00:18:41.930 --> 00:18:45.710\nWhen you do these it's basically\njust bringing in the hard drives,\n\n412\n00:18:45.710 --> 00:18:49.150\nit won't know how many CPU's you need,\nhow much memory you had, right.\n\n413\n00:18:49.150 --> 00:18:52.190\nThat stuffs not going to backup,\nthat's not in a virtual hard drive.\n\n414\n00:18:52.190 --> 00:18:54.890\nSo, if you choose this back up image,\nyou're definitely\n\n415\n00:18:54.890 --> 00:18:57.450\ngonna have to use the Configure Machine\nbutton, because you're gonna have to tell\n\n416\n00:18:57.450 --> 00:19:00.900\nit how much memory and disk and so on,\nto have, because otherwise, it won't know.\n\n417\n00:19:00.900 --> 00:19:03.810\nBut, the other ones, it can actually\nlift the configuration from\n\n418\n00:19:03.810 --> 00:19:06.410\nthe running machine,\ncuz it uses the agent to detect that.\n\n419\n00:19:06.410 --> 00:19:08.370\nSo, you get a lot more power\nwith the other options.\n\n420\n00:19:08.370 --> 00:19:10.530\nThis is kinda a last ditch effort.\n\n421\n00:19:10.530 --> 00:19:11.580\nWe use this one if we have to.\n\n422\n00:19:13.120 --> 00:19:15.730\nIn my case, I gotta power it on\nmachine that I can point to.\n\n423\n00:19:15.730 --> 00:19:17.920\nAnd I can point to it by\nname if I remember it.\n\n424\n00:19:17.920 --> 00:19:20.113\nThat was PLABDM01.\n\n425\n00:19:20.113 --> 00:19:24.148\nOr I can put in the IP address if\nI don't remember the name, right?\n\n426\n00:19:24.148 --> 00:19:27.590\nSo I could just say 192.168.0.7.\n\n427\n00:19:27.590 --> 00:19:29.550\nActually, I'm gonna use the IP anyway,\n\n428\n00:19:29.550 --> 00:19:33.750\ncuz I don't know if I set up DNS on\nthese things in the first place.\n\n429\n00:19:33.750 --> 00:19:36.510\nSo let me just go with IP\ncuz that'll always work.\n\n430\n00:19:36.510 --> 00:19:38.350\nAnd then I can punch in an administrator.\n\n431\n00:19:38.350 --> 00:19:43.060\nNow this account doesn't\nhave to be a domain admin.\n\n432\n00:19:43.060 --> 00:19:46.510\nBut it has to be\nan administrator on that machine\n\n433\n00:19:46.510 --> 00:19:48.990\nbecause we've got to be able\nto install the agent to it.\n\n434\n00:19:48.990 --> 00:19:53.130\nWe've got to have that work and\nwe've got to provide our password,\n\n435\n00:19:53.130 --> 00:19:56.800\nwhich I think I remember,\nthen it's gonna ask what OS it is.\n\n436\n00:19:56.800 --> 00:19:57.970\nNow, why does it care about the OS?\n\n437\n00:19:57.970 --> 00:19:59.010\nCan it detect that?\n\n438\n00:19:59.010 --> 00:20:01.240\nWell, it can once the agent on it.\n\n439\n00:20:01.240 --> 00:20:03.960\nBut the agent is not on it yet\nthat's what we are trying to install.\n\n440\n00:20:03.960 --> 00:20:06.680\nSo it's just asking,\nis it Windows or Linux.\n\n441\n00:20:06.680 --> 00:20:08.510\nSo we've got to tell it.\n\n442\n00:20:08.510 --> 00:20:11.320\nAnd then once that is done\nyou can hit view source\n\n443\n00:20:11.320 --> 00:20:13.440\ndetails which is a great way\nto verify if this is working.\n\n444\n00:20:13.440 --> 00:20:15.420\nBecause let me tell you, for\n\n445\n00:20:15.420 --> 00:20:19.960\nme nine times out of ten it doesn't work;\nand it's almost always the same reason.\n\n446\n00:20:19.960 --> 00:20:21.550\nThe Windows' firewall, right?\n\n447\n00:20:21.550 --> 00:20:25.440\nOr in Linux it might be IP tables or\nwhatever you are running.\n\n448\n00:20:25.440 --> 00:20:28.180\nThat usually this type of\nconnection is blocked on a server.\n\n449\n00:20:28.180 --> 00:20:30.270\nOn a workstation you might get through,\nbut on a server it's blocked.\n\n450\n00:20:30.270 --> 00:20:32.090\nSo I fully expect this to fail.\n\n451\n00:20:32.090 --> 00:20:33.170\nLet's see.\n\n452\n00:20:33.170 --> 00:20:36.060\nMaybe I'll be wrong for once.\n\n453\n00:20:36.060 --> 00:20:36.610\nFor once?\n\n454\n00:20:36.610 --> 00:20:38.360\nI'm actually wrong all the time.\n\n455\n00:20:38.360 --> 00:20:41.060\nBut if I hit View Source Details,\nit's reaching out to that machine and\n\n456\n00:20:41.060 --> 00:20:42.460\nin theory it should connect.\n\n457\n00:20:42.460 --> 00:20:45.490\nYou see how says connecting to source\nmachine up here it's trying to connect.\n\n458\n00:20:45.490 --> 00:20:49.420\nAnd if it does I'll get a little output\nhere that let's me know it connected.\n\n459\n00:20:49.420 --> 00:20:54.280\nBut it is sitting here is taking awhile so\nI bet the Windows firewall is blocking it.\n\n460\n00:20:54.280 --> 00:20:57.525\nYeah See,\nunable to contact the specified host.\n\n461\n00:20:57.525 --> 00:21:00.135\nThe default Windows default\nfirewall doesn't let it in.\n\n462\n00:21:00.135 --> 00:21:01.905\nSo I've got two choices.\n\n463\n00:21:03.085 --> 00:21:06.375\nChoice one, I could open up a hole in the\nfirewall for me to connect or choice two,\n\n464\n00:21:06.375 --> 00:21:08.015\nI could turn off the firewall.\n\n465\n00:21:08.015 --> 00:21:11.655\nTurning off the firewall is faster,\nbut if this is a production system,\n\n466\n00:21:11.655 --> 00:21:13.405\nwhat did you just do to your security.\n\n467\n00:21:13.405 --> 00:21:14.915\nThat's not so good, right?\n\n468\n00:21:14.915 --> 00:21:18.090\nSo, poking a hole in the firewall\nis a little bit better.\n\n469\n00:21:18.090 --> 00:21:20.150\nFor IP tables or for\n\n470\n00:21:20.150 --> 00:21:24.400\nWindows firewall what I normally do, is\ncreate a rule in the firewall that allows\n\n471\n00:21:24.400 --> 00:21:27.410\nevery connection from the IP\naddress of the converter, right?\n\n472\n00:21:27.410 --> 00:21:30.440\nSo if it's the IP address of the\nconverter, allow any connection, right?\n\n473\n00:21:30.440 --> 00:21:33.320\nThat way you don't have to muck\nabout with ports and all that stuff,\n\n474\n00:21:33.320 --> 00:21:35.730\nit's just that's the converter,\nit's allowed to connect.\n\n475\n00:21:35.730 --> 00:21:39.030\nBut for the sake of this show, because I\ndon't want it to be too terribly long,\n\n476\n00:21:39.030 --> 00:21:40.400\nI'm just going to turn the firewall off.\n\n477\n00:21:40.400 --> 00:21:43.500\nWhich again, is not necessarily\na great production decision.\n\n478\n00:21:45.540 --> 00:21:47.700\nSo I'm going to go into\nthe Windows firewall.\n\n479\n00:21:48.950 --> 00:21:50.470\nAnd so it's turned on.\n\n480\n00:21:50.470 --> 00:21:52.830\nIn here you can allow an app\nthrough the firewall.\n\n481\n00:21:52.830 --> 00:21:55.320\nBut you really need to go to the advanced\nscreen to create a rule that lets\n\n482\n00:21:55.320 --> 00:21:55.830\nthe IPs in.\n\n483\n00:21:55.830 --> 00:21:58.280\nSo I'm just going to do\nthis right from here.\n\n484\n00:21:58.280 --> 00:22:00.896\nAnd turn the Windows firewall on or\noff and we'll just turn it off.\n\n485\n00:22:03.359 --> 00:22:05.710\nOkay once that's done.\n\n486\n00:22:07.080 --> 00:22:07.610\nThere we go.\n\n487\n00:22:07.610 --> 00:22:13.560\nNow I should be able to jump back over to\nmy converter and we can try this again.\n\n488\n00:22:13.560 --> 00:22:15.210\nI'm gonna hit view source detail again.\n\n489\n00:22:15.210 --> 00:22:20.100\nAnd it's gonna reach out and\nI got unable to SSH to the source machine.\n\n490\n00:22:20.100 --> 00:22:21.870\nMake sure that the SSH daemon is running.\n\n491\n00:22:21.870 --> 00:22:22.830\nDid I tell it Linux?\n\n492\n00:22:22.830 --> 00:22:25.690\nI did.\n[LAUGH] So I said Windows doesn't run SSH.\n\n493\n00:22:25.690 --> 00:22:27.010\nThat's an odd error to get.\n\n494\n00:22:27.010 --> 00:22:29.830\nBut that will probably\nmake a difference there.\n\n495\n00:22:29.830 --> 00:22:31.370\nThat's what I wanted to see.\n\n496\n00:22:31.370 --> 00:22:33.520\nOkay, it was able to connect.\n\n497\n00:22:33.520 --> 00:22:36.920\nOkay so now it asks me Hey,\nwe're gonna install this agent.\n\n498\n00:22:36.920 --> 00:22:39.240\nAn agent is gonna let\nus do the conversion.\n\n499\n00:22:39.240 --> 00:22:41.250\nWhen we're done,\nwhat do you want me to do?\n\n500\n00:22:41.250 --> 00:22:44.210\nShould we leave the agent on there or\nshould we remove it?\n\n501\n00:22:44.210 --> 00:22:47.400\nNow, the default is automatically\nuninstall when the import succeeds.\n\n502\n00:22:48.680 --> 00:22:52.440\nIf I choose that, it's gonna import\nthe machine, uninstall the agent,\n\n503\n00:22:52.440 --> 00:22:53.930\nshut down the machine.\n\n504\n00:22:53.930 --> 00:22:56.070\nSo at anytime I can go and\nturn that machine back on, and\n\n505\n00:22:56.070 --> 00:22:57.490\nit's all back to the way that it was.\n\n506\n00:22:57.490 --> 00:23:02.680\nAnd that's normally what we want, but\nif I'm just doing a test migration, I want\n\n507\n00:23:02.680 --> 00:23:05.720\nthat other machine to stay up, and later\non I'm gonna synchronize the changes.\n\n508\n00:23:05.720 --> 00:23:07.750\nI probably want to leave\nthe agent on there, and\n\n509\n00:23:07.750 --> 00:23:09.600\nthat's what the second option says.\n\n510\n00:23:09.600 --> 00:23:11.040\nI mean,\nit doesn't say leave the agent on there.\n\n511\n00:23:11.040 --> 00:23:13.440\nIt just says I'll manually\nuninstall the files later.\n\n512\n00:23:13.440 --> 00:23:14.880\nSo leave the agent on there so\n\n513\n00:23:14.880 --> 00:23:18.740\nwe can still synchronize changes and\nwe'll get the final conversion done later.\n\n514\n00:23:18.740 --> 00:23:22.710\nAll right, so I'm gonna go and\nsay yes on this one.\n\n515\n00:23:22.710 --> 00:23:25.440\nAnd now it's deploying the agent,\nit's reaching out to that machine and\n\n516\n00:23:25.440 --> 00:23:26.160\ninstalling it.\n\n517\n00:23:26.160 --> 00:23:29.660\nIf it's Linux, it just opened up\nan SSH session and it's deploying it.\n\n518\n00:23:29.660 --> 00:23:33.630\nOn Windows, it's using Windows RM and\nit's connecting up pushing the files over\n\n519\n00:23:33.630 --> 00:23:36.440\na temporary share that was created and\ngetting them installed.\n\n520\n00:23:36.440 --> 00:23:38.010\nSo that does take a moment.\n\n521\n00:23:38.010 --> 00:23:42.130\nIf you're watching on the other machine,\nyou're not going to see anything.\n\n522\n00:23:42.130 --> 00:23:45.893\nUsers could be in this machine, this could\nbe a virtual desktop, and the users could\n\n523\n00:23:45.893 --> 00:23:49.031\nbe in here and working, and\nthey're not going to see any difference.\n\n524\n00:23:49.031 --> 00:23:53.350\nIf they're watching in their task manager,\nwhich granted most users aren't doing.\n\n525\n00:23:53.350 --> 00:23:57.285\nBut if they're watching in their\ntask manager they might actually see\n\n526\n00:23:57.285 --> 00:24:01.697\nthe process kick in That is showing that\ninstall happening in the background.\n\n527\n00:24:01.697 --> 00:24:05.390\nBut mine's idle,\nmine actually already be done.\n\n528\n00:24:05.390 --> 00:24:07.410\nBut it's gonna be getting\ninstalled in the background, and\n\n529\n00:24:07.410 --> 00:24:08.610\nthat's all they would notice.\n\n530\n00:24:08.610 --> 00:24:10.940\nAnd then once it's done,\nwe're ready to do the conversion.\n\n531\n00:24:10.940 --> 00:24:14.140\nThe machine will get slower\nduring the conversion.\n\n532\n00:24:14.140 --> 00:24:15.240\nThink about what you're doing.\n\n533\n00:24:15.240 --> 00:24:19.480\nYou're grabbing a copy of the entire hard\ndrive, and sending it over the network.\n\n534\n00:24:19.480 --> 00:24:22.030\nThe bigger the machine is,\nthe longer that's gonna take and\n\n535\n00:24:22.030 --> 00:24:23.750\nthe more bandwidth it's going to eat.\n\n536\n00:24:23.750 --> 00:24:27.320\nSo be aware that while they might not\nnotice the conversion is happening,\n\n537\n00:24:27.320 --> 00:24:28.550\nthey'll notice the machine getting slower.\n\n538\n00:24:30.370 --> 00:24:33.230\nOperation could not be completed\ndue to incorrect user grants.\n\n539\n00:24:33.230 --> 00:24:35.100\nThat would explain why I\ndidn't see the little pop-up.\n\n540\n00:24:35.100 --> 00:24:39.790\nSo let me go back here, apparently\nI either the administrator wrong or\n\n541\n00:24:39.790 --> 00:24:43.020\nput in the wrong password,\nor a combination of both.\n\n542\n00:24:43.020 --> 00:24:44.660\nLooks like the wrong password.\n\n543\n00:24:44.660 --> 00:24:50.599\nSo let's try that again.\n\n544\n00:24:50.599 --> 00:24:55.110\nAnd try it one more time.\n\n545\n00:24:55.110 --> 00:24:59.570\nSo now it's deploying that agent or\nso it says [LAUGH].\n\n546\n00:24:59.570 --> 00:25:02.020\nI'll go and\nwatch on the application server.\n\n547\n00:25:02.020 --> 00:25:05.620\nAnd I saw my VM tools pop up for\njust a second there.\n\n548\n00:25:05.620 --> 00:25:07.620\nThere is some system activity, but\n\n549\n00:25:07.620 --> 00:25:10.250\nI should see that installer\nrunning in the background.\n\n550\n00:25:10.250 --> 00:25:14.390\nIt happens pretty quickly, and\nI'm not gonna make the same mistake.\n\n551\n00:25:14.390 --> 00:25:16.360\nI'm gonna watch here and\nsee if I get an error.\n\n552\n00:25:16.360 --> 00:25:17.890\nIt says connecting to the machine.\n\n553\n00:25:17.890 --> 00:25:21.050\nThe deploying disappeared, there we go.\n\n554\n00:25:21.050 --> 00:25:23.720\nSo now it shows that it fully deployed,\nand\n\n555\n00:25:23.720 --> 00:25:26.070\nit harvested the data about the machine.\n\n556\n00:25:26.070 --> 00:25:27.410\nThat's the nice part about the agent.\n\n557\n00:25:27.410 --> 00:25:31.400\nIt looked at it and he said, hey,\nit's Windows Server 2012, 64 bit.\n\n558\n00:25:31.400 --> 00:25:34.590\nIt's got a 40 gigabyte\nhard drive with two CPUs.\n\n559\n00:25:34.590 --> 00:25:37.210\nIt's got 4 gigs of RAM and\none network adapter.\n\n560\n00:25:37.210 --> 00:25:40.115\nSo when we built the virtual machine,\nthat's what we need, right?\n\n561\n00:25:40.115 --> 00:25:42.540\nIt knows what to have,\nwe wouldn't get that from a backup but\n\n562\n00:25:42.540 --> 00:25:44.530\nbecause it's a powered-on machine,\nit can harvest it.\n\n563\n00:25:44.530 --> 00:25:47.730\nAnd so, it's showing me the drive,\nhow it's partitioned, cuz we now have more\n\n564\n00:25:47.730 --> 00:25:51.260\nthan one partition on the drive, it's\ngonna get that and learn the information.\n\n565\n00:25:51.260 --> 00:25:55.105\nAlso showing me the estimate of size\nthat I'm gonna be consuming here, right?\n\n566\n00:25:55.105 --> 00:25:57.582\n10 gigs in this case is what\nI'm using on that hard drive.\n\n567\n00:25:57.582 --> 00:25:59.750\nAll right, so that's good.\n\n568\n00:25:59.750 --> 00:26:03.060\nEverything looks good there, and\nthat means we're ready to proceed.\n\n569\n00:26:03.060 --> 00:26:08.730\nSo I'm gonna hit next, and now it's gonna\nask where am I gonna put this thing.\n\n570\n00:26:08.730 --> 00:26:11.170\nI'm gonna take an image of that machine,\nit's gotta go somewhere.\n\n571\n00:26:11.170 --> 00:26:14.730\nSo up here I can have it go straight to\na VMware infrastructure virtual machines.\n\n572\n00:26:14.730 --> 00:26:21.110\nGo right into ESX or VMware work station\nor other VMware virtual machine.\n\n573\n00:26:21.110 --> 00:26:24.620\nI might be taking it from ESX and\nmoving into a work station.\n\n574\n00:26:24.620 --> 00:26:26.320\nThat's great for tests and\nlab environments.\n\n575\n00:26:26.320 --> 00:26:27.810\nYou got a developer wants\nto try something it out,\n\n576\n00:26:27.810 --> 00:26:30.000\nyou can throw it right through here.\n\n577\n00:26:30.000 --> 00:26:31.840\nBut in my case,\nI'll just go to a live virtual machine.\n\n578\n00:26:31.840 --> 00:26:33.690\nIf you're gonna go to\na live virtual machine,\n\n579\n00:26:33.690 --> 00:26:37.780\nyou gotta specify which one it's going to,\nor which host it's going to reside on.\n\n580\n00:26:37.780 --> 00:26:39.820\nSo you can punch it in here.\n\n581\n00:26:39.820 --> 00:26:44.110\nNow, when I deploy it,\nI could put in an ESX host here, or,\n\n582\n00:26:44.110 --> 00:26:47.450\nthis is where it's fun,\nI can put a vCenter server in.\n\n583\n00:26:47.450 --> 00:26:48.620\nIf I put a vCenter server in,\n\n584\n00:26:48.620 --> 00:26:51.240\nnow I'll have the choice of all\nthe different hosts inside of vCenter.\n\n585\n00:26:51.240 --> 00:26:53.990\nSo that's what we'd normally want\nto do is point it to vCenter.\n\n586\n00:26:53.990 --> 00:26:58.050\nNow, I'm actually on the vCenter\nserver but it doesn't know that.\n\n587\n00:26:58.050 --> 00:27:05.870\nSo I'll just go ahead and\ntell it the server and\n\n588\n00:27:05.870 --> 00:27:08.300\nsee if I can get the right\npassword on this one.\n\n589\n00:27:08.300 --> 00:27:12.650\nAll right, now normally I'd hit Next here\nand start to deploy to the vCenter server,\n\n590\n00:27:12.650 --> 00:27:15.630\nbut I know I don't have enough time to do\nthat because it's gonna take that image of\n\n591\n00:27:15.630 --> 00:27:18.880\nthat machine, and it's gonna convert it,\nand it's gonna deploy it on the vCenter.\n\n592\n00:27:18.880 --> 00:27:19.510\nThat takes a while.\n\n593\n00:27:19.510 --> 00:27:21.420\nSo what I'm gonna do is\nsomething a little different.\n\n594\n00:27:21.420 --> 00:27:24.310\nI'm gonna send it to storage, all right?\n\n595\n00:27:24.310 --> 00:27:27.170\nI'm gonna send it to that share that\nI made earlier instead of going\n\n596\n00:27:27.170 --> 00:27:28.260\nstraight to vCenter.\n\n597\n00:27:28.260 --> 00:27:31.010\nThis is gonna give me time to\nedit the machine if I want to, or\n\n598\n00:27:31.010 --> 00:27:32.180\ndeploy it other places.\n\n599\n00:27:32.180 --> 00:27:35.240\nAnd the way we can do that is,\nin the destination type,\n\n600\n00:27:35.240 --> 00:27:37.200\ninstead of VMware\ninfrastructure virtual machine,\n\n601\n00:27:37.200 --> 00:27:41.020\nI'm gonna pick VMware workstation or\nother VMware virtual machine.\n\n602\n00:27:41.020 --> 00:27:43.340\nNow, I'm not gonna send\nit to a workstation,\n\n603\n00:27:43.340 --> 00:27:46.070\nit's gonna drop it off in the shared\nfolder and it's gonna leave it there.\n\n604\n00:27:46.070 --> 00:27:47.210\nAnd that way, I can mess with it and\n\n605\n00:27:47.210 --> 00:27:50.330\ncopy it wherever I want after this and\nmake use of it.\n\n606\n00:27:50.330 --> 00:27:51.760\nSo, then it's gonna ask me for\nthe product,\n\n607\n00:27:51.760 --> 00:27:55.110\nand you'll see VMware workstation 11,\n10 and so on.\n\n608\n00:27:55.110 --> 00:27:58.360\nWhat it's really asking me here is\nthe hardware revision that it's\n\n609\n00:27:58.360 --> 00:27:59.620\ngonna create for that virtual machine.\n\n610\n00:27:59.620 --> 00:28:02.430\nI'm gonna stick with VMware Workstation\n11 and I'll be fine there.\n\n611\n00:28:02.430 --> 00:28:05.540\nYou have to be careful cuz if you start\nchoosing things like VMware fusion,\n\n612\n00:28:05.540 --> 00:28:09.220\nit can pick a hardware version\nthat's not compatible with ESX.\n\n613\n00:28:09.220 --> 00:28:12.260\nThen we can specify the virtual machine,\nwhich it already knows, and\n\n614\n00:28:12.260 --> 00:28:13.780\nwhere it's gonna put the thing.\n\n615\n00:28:13.780 --> 00:28:18.500\nAnd I'm gonna specify that share that\nI made earlier, which was on my IDC.\n\n616\n00:28:18.500 --> 00:28:20.220\nSo I'm just gonna punch\nthat right in there.\n\n617\n00:28:20.220 --> 00:28:23.520\nThat's where I'm gonna send it to, and\nI'll need to give it a username and\n\n618\n00:28:23.520 --> 00:28:24.440\npassword for that.\n\n619\n00:28:24.440 --> 00:28:30.230\nNow, that is a domain server, so\nI've got to put in the full name here.\n\n620\n00:28:30.230 --> 00:28:32.040\nSo we'll do that.\n\n621\n00:28:32.040 --> 00:28:34.010\nAnd whatever my password happens to be.\n\n622\n00:28:34.010 --> 00:28:38.020\nAnd that should be enough\nto get that going.\n\n623\n00:28:38.020 --> 00:28:39.960\nMy OK button is off\nthe bottom of the screen.\n\n624\n00:28:41.006 --> 00:28:43.810\nSo I've gotta kinda get creative\nwith moving this around, or\n\n625\n00:28:43.810 --> 00:28:45.265\nmaybe I can just press Enter.\n\n626\n00:28:45.265 --> 00:28:46.360\n[LAUGH] There we go.\n\n627\n00:28:46.360 --> 00:28:47.330\nAll right.\n\n628\n00:28:47.330 --> 00:28:49.110\nNow this screen is really important.\n\n629\n00:28:49.110 --> 00:28:51.260\nWhat it's doing is it's showing\nme what it's about to do.\n\n630\n00:28:51.260 --> 00:28:52.870\nIt's not doing it yet.\n\n631\n00:28:52.870 --> 00:28:55.960\nThis will let me change\nthe configuration of the machine,\n\n632\n00:28:55.960 --> 00:28:58.880\nthis is what that configuration\nbutton does on the main screen.\n\n633\n00:28:58.880 --> 00:29:03.060\nSo I see all the various\nsettings that it auto-detected.\n\n634\n00:29:03.060 --> 00:29:06.500\nIf this were coming from a backup, most of\nthis would just be defaults and it would\n\n635\n00:29:06.500 --> 00:29:09.450\nprobably be too low for what I want, and\nI would need to edit and change that.\n\n636\n00:29:09.450 --> 00:29:11.850\nSo as I look at it, I've got two CPUs and\n\n637\n00:29:11.850 --> 00:29:14.420\nfour gigs of memory,\nmaybe I wanna change that.\n\n638\n00:29:14.420 --> 00:29:16.800\nSo I could go and edit that setting, and\n\n639\n00:29:16.800 --> 00:29:19.260\nnow right in here I can change\nthe amount of memory that it's got.\n\n640\n00:29:19.260 --> 00:29:21.010\nI can increase or decrease it.\n\n641\n00:29:21.010 --> 00:29:23.690\nI can change the CPUs,\nchange the network, and so on.\n\n642\n00:29:23.690 --> 00:29:28.935\nThis is just like editing the hardware of\na VM cuz that's exactly what you're doing.\n\n643\n00:29:28.935 --> 00:29:33.025\nSo we can tweak all of that stuff, the\nthings that we want to modify or whatever.\n\n644\n00:29:33.025 --> 00:29:36.105\nBut the thing I really wanted to point\nout is that when you go to advanced,\n\n645\n00:29:36.105 --> 00:29:38.725\nhere's where we have synchronized changes,\nokay?\n\n646\n00:29:38.725 --> 00:29:40.475\nWhat does synchronized change means?\n\n647\n00:29:40.475 --> 00:29:43.065\nWell, that means, hey,\nwe've already made the image,\n\n648\n00:29:43.065 --> 00:29:45.465\nnow we just need to get what's changed,\nright?\n\n649\n00:29:45.465 --> 00:29:49.583\nThis is how we'd run that delta, and\nyou've got perform final synchronization.\n\n650\n00:29:49.583 --> 00:29:50.960\nSee how it's checked for me?\n\n651\n00:29:50.960 --> 00:29:53.940\nThat's because this is the final one,\nright?\n\n652\n00:29:53.940 --> 00:29:57.900\nI am taking an image and it's gonna be\ndone, I'm not gonna be running anymore.\n\n653\n00:29:57.900 --> 00:30:01.570\nIf I choose synchronize changes, I can\ntell it to run immediately after cloning.\n\n654\n00:30:01.570 --> 00:30:04.710\nSo you clone the machine, and\nthen get anything that's changed\n\n655\n00:30:04.710 --> 00:30:08.900\noff of that original machine and\nget it put in place, all right?\n\n656\n00:30:08.900 --> 00:30:13.430\nAnd you've got post conversion stuff to\ndo afterwards, power off source machine.\n\n657\n00:30:13.430 --> 00:30:16.430\nOkay, I'm just taking an image and\ndropping it into a share, so\n\n658\n00:30:16.430 --> 00:30:18.120\nI can leave the source machine on.\n\n659\n00:30:18.120 --> 00:30:22.080\nBut if I'm about to power on a new\nmachine, I'm gonna duplicate names and\n\n660\n00:30:22.080 --> 00:30:24.350\nduplicate IPs,\nthings are not going to go well, right?\n\n661\n00:30:24.350 --> 00:30:30.220\nSo I probably want to power off the source\nso I can power on the new machine, and\n\n662\n00:30:30.220 --> 00:30:35.220\nI can install the VMWare tools onto the\ndestination machine, I probably want that.\n\n663\n00:30:35.220 --> 00:30:37.160\nYou can customize guest preferences,\n\n664\n00:30:37.160 --> 00:30:39.540\nit helps you set up\nan unattended answer file.\n\n665\n00:30:39.540 --> 00:30:42.130\nAnd you can remove restore checkpoints,\nthose things,\n\n666\n00:30:42.130 --> 00:30:44.060\ncuz they don't typically work anymore.\n\n667\n00:30:44.060 --> 00:30:47.280\nYour restore points in Windows would be\nfrom back when it was a physical machine,\n\n668\n00:30:47.280 --> 00:30:49.610\nwhich includes the physical drivers and\nthat would cause a problem,\n\n669\n00:30:49.610 --> 00:30:51.430\nyou probably wanna remove those.\n\n670\n00:30:51.430 --> 00:30:55.680\nAnd reconfigure the destination virtual\nmachine means bring that virtual machine\n\n671\n00:30:55.680 --> 00:31:00.002\nup and have it with the right drivers and\nfunctioning inside of ESX.\n\n672\n00:31:00.002 --> 00:31:03.110\nOtherwise, it's gonna come across exactly\nas it was on a physical machine and\n\n673\n00:31:03.110 --> 00:31:04.550\nthat might be what you want.\n\n674\n00:31:04.550 --> 00:31:07.605\nSo those are all some important\nsettings to tinker with.\n\n675\n00:31:07.605 --> 00:31:09.430\nYou've got other things like services.\n\n676\n00:31:09.430 --> 00:31:12.900\nYou can actually tailor which Windows\nservices start and stop and all that.\n\n677\n00:31:12.900 --> 00:31:14.410\nI mean, you can get really detailed.\n\n678\n00:31:14.410 --> 00:31:17.090\nThis is a Windows machine,\nyou get the same stuff for Linux it's\n\n679\n00:31:17.090 --> 00:31:21.128\ngot that visibility as long as it is one\nof the supported Linux platforms, right?\n\n680\n00:31:21.128 --> 00:31:24.000\nAssuming you got everything\nthe way you want, though,\n\n681\n00:31:24.000 --> 00:31:27.780\nyou hit Next, it gives you\nthe summary again and you finish up.\n\n682\n00:31:27.780 --> 00:31:30.400\nAnd now, the conversion is gonna start.\n\n683\n00:31:30.400 --> 00:31:32.400\nAnd you can watch\nthe conversion right here.\n\n684\n00:31:32.400 --> 00:31:36.680\nNow, the more data in that machine,\nthe longer this is gonna take.\n\n685\n00:31:36.680 --> 00:31:39.250\nMine's 10 gigs, so\nit probably won't take that long, but\n\n686\n00:31:39.250 --> 00:31:40.970\nin real life your servers\nare gonna be much larger.\n\n687\n00:31:40.970 --> 00:31:44.090\nAnd so this could take 20 minutes,\nit could take an hour.\n\n688\n00:31:44.090 --> 00:31:47.690\nI've seen Exchange servers with massive\ndatabases that took like 8 hours.\n\n689\n00:31:47.690 --> 00:31:48.850\nAnd if you do it online,\n\n690\n00:31:48.850 --> 00:31:52.042\nperformance on the server is\ndegraded while that's happening.\n\n691\n00:31:52.042 --> 00:31:54.670\nSo, somebody could be in PLABDM01,\n\n692\n00:31:54.670 --> 00:31:58.266\nsomebody could be in this\nmachine working right now.\n\n693\n00:31:58.266 --> 00:32:01.367\nBut if I look at it,\nsee the VMware converter process?\n\n694\n00:32:01.367 --> 00:32:05.385\nAnd it's running at about 20% CPU,\nand it's eating 28 Megs of memory.\n\n695\n00:32:05.385 --> 00:32:10.020\nIt's eating up resources on this system,\nespecially on the network side, right?\n\n696\n00:32:10.020 --> 00:32:12.350\nDoes this thing show me network?\n\n697\n00:32:12.350 --> 00:32:13.310\nYeah, ethernet.\n\n698\n00:32:13.310 --> 00:32:15.940\nSo, I'm running at 540 Mbps right now.\n\n699\n00:32:15.940 --> 00:32:17.790\nThat's half my network adapter.\n\n700\n00:32:17.790 --> 00:32:18.400\nRight?\n\n701\n00:32:18.400 --> 00:32:22.610\nI have a 100 gigabit adapter in this and\nhalf of it is being eaten up for\n\n702\n00:32:22.610 --> 00:32:23.220\nthe conversion.\n\n703\n00:32:23.220 --> 00:32:28.188\nSo you're gonna see network degradation,\nCPU, memory, they're all being hit.\n\n704\n00:32:28.188 --> 00:32:32.220\nEspecially disk I/O, that's all being\nread too, all while it's running.\n\n705\n00:32:32.220 --> 00:32:35.030\nBut the system is online,\npeople can get in there and work.\n\n706\n00:32:35.030 --> 00:32:38.590\nThese are artificial throttles\nthat are being put in place.\n\n707\n00:32:38.590 --> 00:32:42.120\nYou can actually tell it to go bigger\nif you wanted to get it done faster.\n\n708\n00:32:42.120 --> 00:32:43.720\nAt the sacrifice of performance.\n\n709\n00:32:43.720 --> 00:32:45.720\nYou've got those options.\n\n710\n00:32:45.720 --> 00:32:51.200\nWhen you choose a job here, down at\nthe bottom, I'm back in my converter.\n\n711\n00:32:51.200 --> 00:32:53.890\nWhen you choose a job down here\nyou can see the task status and\n\n712\n00:32:53.890 --> 00:32:54.760\nsee how it's going.\n\n713\n00:32:54.760 --> 00:32:55.808\nRight?\nI see that it's running.\n\n714\n00:32:55.808 --> 00:32:57.960\nI'm already 42% complete.\n\n715\n00:32:57.960 --> 00:33:00.030\nBut it also gives me an estimate for\nthe timer menu.\n\n716\n00:33:00.030 --> 00:33:01.900\nHow much longer is it going to take?\n\n717\n00:33:01.900 --> 00:33:04.800\nAnd if there are any errors,\nthey would turn up down here, right.\n\n718\n00:33:06.620 --> 00:33:09.510\nBasically at this point it's running,\nthere's not much else to do other\n\n719\n00:33:09.510 --> 00:33:14.340\nthan wait, but while we're waiting let\nme go and look at the share that I made.\n\n720\n00:33:14.340 --> 00:33:16.910\nAnd what we'll see is that it's\ncreated a folder in here for\n\n721\n00:33:16.910 --> 00:33:19.070\nthe Virtual Machine cuz I might\nbe cloning more than one VM.\n\n722\n00:33:19.070 --> 00:33:22.560\nAnd inside of it you're gonna see a vmx.\n\n723\n00:33:22.560 --> 00:33:25.670\nThat's the configuration file for\nthe new VM that says how much memory and\n\n724\n00:33:25.670 --> 00:33:27.580\nhard drive and all that.\n\n725\n00:33:27.580 --> 00:33:31.250\nAnd a vmdk,\nthat's the Virtual Machine disk, right?\n\n726\n00:33:31.250 --> 00:33:35.380\nThose are the two main files we need\nto get a Virtual Machine into ESX.\n\n727\n00:33:35.380 --> 00:33:37.940\nThere's a lock file that it\nshows that's in use right now.\n\n728\n00:33:37.940 --> 00:33:39.790\nWhen that lock file goes\naway that's how we know that\n\n729\n00:33:39.790 --> 00:33:41.610\nit's done with the conversion, right.\n\n730\n00:33:41.610 --> 00:33:43.110\nBut otherwise it's converting it.\n\n731\n00:33:43.110 --> 00:33:44.050\nIt's just gonna run that file.\n\n732\n00:33:44.050 --> 00:33:47.420\nIt's gonna grow to mimic the amount\nof data that I have on the server.\n\n733\n00:33:47.420 --> 00:33:51.120\nThere's a very light amount of\ncompression applied to it but it's not\n\n734\n00:33:51.120 --> 00:33:54.520\nterribly effective because they're going\nfor speed here and not efficiency.\n\n735\n00:33:54.520 --> 00:33:59.130\nAll right so that was gonna\nturn along I could you know,\n\n736\n00:33:59.130 --> 00:34:01.850\nconfigure the machine like I mentioned\nearlier, even while it's on.\n\n737\n00:34:01.850 --> 00:34:05.720\nSo I can hit configure and you'll see\noptions in here to tweak and set that up.\n\n738\n00:34:05.720 --> 00:34:08.840\nI don't have a need to do it because\nwe used our edit screen in the wizard,\n\n739\n00:34:08.840 --> 00:34:11.790\ngot everything set the way we want it,\nand we just let it run.\n\n740\n00:34:11.790 --> 00:34:14.860\nWhen it's done now I can just\nimport it into any other machine,\n\n741\n00:34:14.860 --> 00:34:18.490\nyou know import into a V center\ndeployment, or or whatever.\n\n742\n00:34:18.490 --> 00:34:21.140\nIf I had chosen a V Center deployment,\nthe next step here would be for\n\n743\n00:34:21.140 --> 00:34:24.980\nit to process that virtual machine and\nthen deploy it, which would take, well,\n\n744\n00:34:24.980 --> 00:34:25.745\nit would take twice as long.\n\n745\n00:34:25.745 --> 00:34:28.600\n>> [LAUGH] It seems like a lot of\nwork if you don't know exactly what\n\n746\n00:34:28.600 --> 00:34:29.100\nyou're doing, now.\n\n747\n00:34:29.100 --> 00:34:31.330\nAnd Don, it does look like we're\ncoming to the end of another episode,\n\n748\n00:34:31.330 --> 00:34:35.020\nbut this one looks like it could help\non certification exam as well as in\n\n749\n00:34:35.020 --> 00:34:35.970\na production environment.\n\n750\n00:34:35.970 --> 00:34:39.210\nGot any final words of wisdom when\nit comes to moving physical to\n\n751\n00:34:39.210 --> 00:34:40.150\nvirtual machines?\n\n752\n00:34:40.150 --> 00:34:40.760\n>> Yeah.\n\n753\n00:34:40.760 --> 00:34:43.460\nThis isn't just a garbage utility we're\ntalking of because it's on the exam.\n\n754\n00:34:43.460 --> 00:34:46.840\nThis is one that I've used in production\nmany many times, it's very effective.\n\n755\n00:34:46.840 --> 00:34:48.040\nIt does a great job.\n\n756\n00:34:48.040 --> 00:34:51.010\nAnd it does help you migrate to\na virtual environment really quick.\n\n757\n00:34:51.010 --> 00:34:54.740\nThe key piece of advice I can give you and\nthis is not exam advice but\n\n758\n00:34:54.740 --> 00:34:56.430\nreal life advice.\n\n759\n00:34:56.430 --> 00:35:01.090\nDon't get rid of your source machine until\nyou're absolutely positive the virtual\n\n760\n00:35:01.090 --> 00:35:04.550\nmachine is working the way that you expect\nit to because there's a lot that changes.\n\n761\n00:35:04.550 --> 00:35:05.290\nLot of drivers,\n\n762\n00:35:05.290 --> 00:35:08.450\nlot of underlying infrastructure,\nyou may have performance issues.\n\n763\n00:35:08.450 --> 00:35:11.770\nThe server might look great, but\nthen Monday rolls around and\n\n764\n00:35:11.770 --> 00:35:15.190\nall your users come in like,\nthat server's so slow, right.\n\n765\n00:35:15.190 --> 00:35:17.280\nAnd now you've got to try and\nfind out why.\n\n766\n00:35:17.280 --> 00:35:19.270\nAnd maybe just add more memory or\nsomething like that.\n\n767\n00:35:19.270 --> 00:35:20.410\nBut if you can't figure out why,\n\n768\n00:35:20.410 --> 00:35:22.800\nyou need to be able to roll\nback to that source machine.\n\n769\n00:35:22.800 --> 00:35:25.780\nSo keep the source machine around for\na little while at least a week,\n\n770\n00:35:25.780 --> 00:35:28.700\npreferably longer just to make\nsure that you don't actually need.\n\n771\n00:35:28.700 --> 00:35:31.010\nYou go to shut it off,\nthat way you're not eating up power.\n\n772\n00:35:31.010 --> 00:35:33.070\nBut don't sell that server\non eBay right away.\n\n773\n00:35:33.070 --> 00:35:34.320\nWait a little bit.\n\n774\n00:35:34.320 --> 00:35:36.830\nMake sure the virtual machines\nare performing adequately.\n\n775\n00:35:36.830 --> 00:35:39.190\nIf something goes wrong,\ndon't hesitate to go back to the source.\n\n776\n00:35:39.190 --> 00:35:39.920\nIt's sitting right there.\n\n777\n00:35:39.920 --> 00:35:41.970\nYou can always do the conversion again and\n\n778\n00:35:41.970 --> 00:35:47.740\nwith a conversion what I did here I dumped\nit to a share that's pretty non evasive.\n\n779\n00:35:47.740 --> 00:35:51.478\nI can now take that virtual machine and\nbring it in VMR workstation or\n\n780\n00:35:51.478 --> 00:35:54.020\nVMR fusion on my own laptop and\ntest it out.\n\n781\n00:35:54.020 --> 00:35:57.590\nSo you can do the testing in a way that\ndoesn't impact the rest of the network so\n\n782\n00:35:57.590 --> 00:35:59.320\nthose are all things to keep in mind.\n\n783\n00:35:59.320 --> 00:36:02.230\nAlso be aware that not\nevery virtual machine, or\n\n784\n00:36:02.230 --> 00:36:05.690\nnot every physical machine is suitable for\nbecoming virtual.\n\n785\n00:36:05.690 --> 00:36:10.320\nSometimes there's hardware that we depend\non that doesn't work in a virtual machine.\n\n786\n00:36:10.320 --> 00:36:13.950\nSo for example,\nwe used to have a fax server.\n\n787\n00:36:13.950 --> 00:36:17.060\nSo it had this 16 port modem,\nI think it was 24 port actually,\n\n788\n00:36:17.060 --> 00:36:18.580\nmodem board that was in it.\n\n789\n00:36:18.580 --> 00:36:21.070\nThere's no way to virtualize\nthat hardware modem board.\n\n790\n00:36:21.070 --> 00:36:24.990\nSo it just had to stay physical it is\nnot a crime to have physical servers.\n\n791\n00:36:24.990 --> 00:36:28.020\nYou just need to identify\nwhen that is necessary so\n\n792\n00:36:28.020 --> 00:36:31.190\nbe aware that sometimes the machine\njust cannot be converted.\n\n793\n00:36:31.190 --> 00:36:32.360\n>> Well Don thank you as always for\n\n794\n00:36:32.360 --> 00:36:36.020\njoining us here in the studios at ITPro.TV\nand thank you the viewer for watching.\n\n795\n00:36:36.020 --> 00:36:38.460\nSigning out at ITPro.TV I have\nbeen your host Wes Bryan.\n\n796\n00:36:38.460 --> 00:36:39.750\n>> And I am Don Pezet.\n\n797\n00:36:39.750 --> 00:36:41.304\n>> And we'll see you next time.\n\n798\n00:36:41.304 --> 00:36:49.560\n[MUSIC]\n\n",
          "vimeoId": "169850125"
        }
      ],
      "title": "vSphere Virtual Machines"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don demonstrate how to efficiently manage compute resources by implementing multi-level resource pooling. They discuss the hierarchical resource pools by nesting resource pools. They also take a look at using tiered resource pooling with vFlash.",
          "length": "1746",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-6-1-resource_pools-060316-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-6-1-resource_pools-060316-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-6-1-resource_pools-060316-1-sm.jpg",
          "title": "Resource Pools",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.301 --> 00:00:14.750\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.750 --> 00:00:16.193\nI'm your host, Wes Bryan.\n\n4\n00:00:16.193 --> 00:00:19.786\nIn today's episode, we're continuing\nthrough our series within VMware.\n\n5\n00:00:19.786 --> 00:00:20.525\nThat's right,\n\n6\n00:00:20.525 --> 00:00:24.076\nwe're coming back at you with more\nVMware Certified Professional Version 6.\n\n7\n00:00:24.076 --> 00:00:26.689\nAnd in this episode,\nwe're gonna be looking at resources and\n\n8\n00:00:26.689 --> 00:00:28.960\nsome of the things that\nyou can do to manage them.\n\n9\n00:00:28.960 --> 00:00:31.490\nJoining me in the studios today\nis none other than Mr. Don Pezet.\n\n10\n00:00:31.490 --> 00:00:32.580\nDon, how are you doing, sir?\n\n11\n00:00:32.580 --> 00:00:36.760\n>> I'm doing just well, Wes, and I am\nexcited to jump right back into vSphere.\n\n12\n00:00:36.760 --> 00:00:39.290\nLike Wes said, in this episode,\nwe're gonna be taking a look at resource\n\n13\n00:00:39.290 --> 00:00:41.890\nmanagement, and we've kind of\nalready seen this a little bit.\n\n14\n00:00:41.890 --> 00:00:45.240\nWhen we were creating virtual machines\nback at a handful of episodes ago,\n\n15\n00:00:45.240 --> 00:00:47.900\nwe saw where inside of\neach virtual machine,\n\n16\n00:00:47.900 --> 00:00:51.340\nyou could configure what's effectively\na resource governor, right?\n\n17\n00:00:51.340 --> 00:00:54.530\nWe could limit the amount\nof CPU utilization or\n\n18\n00:00:54.530 --> 00:00:57.990\nthe amount of RAM that a machine\ncould access at any given time.\n\n19\n00:00:57.990 --> 00:01:02.190\nWe could also set up reservations, where\nwe reserve a certain amount of CPU or\n\n20\n00:01:02.190 --> 00:01:04.900\na certain amount of RAM to be\navailable for a virtual machine.\n\n21\n00:01:04.900 --> 00:01:09.290\nAnd we do that when we wanna\nprioritize some VMs over others.\n\n22\n00:01:09.290 --> 00:01:12.838\nAnd typically, you could do it\nright there on the individual VM.\n\n23\n00:01:12.838 --> 00:01:17.070\nWhere that doesn't work out so well is\nwhen you have a ton of virtual machines.\n\n24\n00:01:17.070 --> 00:01:18.470\nThe more virtual machines you have,\n\n25\n00:01:18.470 --> 00:01:21.380\nthe more difficult it becomes\nto manage them individually.\n\n26\n00:01:21.380 --> 00:01:25.916\nAnd so what we have in vSphere is\nthe ability to create a resource pool.\n\n27\n00:01:25.916 --> 00:01:30.060\nAnd a resource pool can be\nshared across multiple VMs.\n\n28\n00:01:30.060 --> 00:01:33.150\nIt becomes really handy when you're\ntrying to create a set of resources that\n\n29\n00:01:33.150 --> 00:01:38.620\nare available just for one particular\ngroup of applications or resources.\n\n30\n00:01:38.620 --> 00:01:41.028\nIt's even more handy if\nyou're a service provider.\n\n31\n00:01:41.028 --> 00:01:43.720\nIt may be that you're running\nthe hardware infrastructure, and\n\n32\n00:01:43.720 --> 00:01:46.780\nyou're renting out services to customers.\n\n33\n00:01:46.780 --> 00:01:50.040\nThink of like Amazon web services or\nMicrosoft Azure, right,\n\n34\n00:01:50.040 --> 00:01:53.870\nwhen you create those Cloud services,\nwhere you have what are called tenants,\n\n35\n00:01:53.870 --> 00:01:56.390\nright, customers that are renting\nyour hardware resources.\n\n36\n00:01:56.390 --> 00:02:00.270\nYou might need to set up resource\npools for those tenants that say,\n\n37\n00:02:00.270 --> 00:02:02.880\nunder your agreement,\nunder your contract, you're paying us for\n\n38\n00:02:02.880 --> 00:02:06.550\nx amount of memory and x amount of CPU,\nthis is what we're giving you.\n\n39\n00:02:06.550 --> 00:02:09.600\nAnd then, you can spike and go over,\nbut here's the limits of it.\n\n40\n00:02:09.600 --> 00:02:10.840\nAnd we can define that.\n\n41\n00:02:10.840 --> 00:02:15.300\nAnd then, that customer can create as\nmany virtual machines as they want,\n\n42\n00:02:15.300 --> 00:02:18.230\nas long as they operate within\nthe boundaries of that resource pool.\n\n43\n00:02:18.230 --> 00:02:20.470\nIf they exceed the resource pool,\n\n44\n00:02:20.470 --> 00:02:22.290\nthey won't be able to spin\nup those virtual machines.\n\n45\n00:02:22.290 --> 00:02:24.120\nThey won't be able to power things on.\n\n46\n00:02:24.120 --> 00:02:27.090\nSo, resource pools are a great\nway to govern that.\n\n47\n00:02:27.090 --> 00:02:30.553\nIf you fully own your\nVMware infrastructure and\n\n48\n00:02:30.553 --> 00:02:33.360\nall of your virtual machines are important\nto you and you want them all to have\n\n49\n00:02:33.360 --> 00:02:36.610\naccess to resources, then you\nprobably won't use resource pools.\n\n50\n00:02:36.610 --> 00:02:38.488\nThat if one machine starts to get greedy,\n\n51\n00:02:38.488 --> 00:02:40.803\nyou'll probably just add more hardware,\nright?\n\n52\n00:02:40.803 --> 00:02:41.828\nMarta low on memory?\n\n53\n00:02:41.828 --> 00:02:42.783\nLet me add more memory.\n\n54\n00:02:42.783 --> 00:02:47.360\nSo resource pools are really useful\nwhen you wanna restrict things.\n\n55\n00:02:47.360 --> 00:02:50.864\nAnd a lot of people don't wanna restrict,\nso know that this is a technology that you\n\n56\n00:02:50.864 --> 00:02:54.185\nmight not use a lot in real life unless\nyou're dealing with multiple tenants.\n\n57\n00:02:54.185 --> 00:02:57.379\nOr I'll give you an example of where\nI've used it is production and\n\n58\n00:02:57.379 --> 00:02:58.750\ndev environments.\n\n59\n00:02:58.750 --> 00:03:02.376\nI've made the mistake before of\nhaving a production environment,\n\n60\n00:03:02.376 --> 00:03:06.066\ncloning the production environment\nto create a dev environment, so\n\n61\n00:03:06.066 --> 00:03:08.625\nI might have five servers for\na production app.\n\n62\n00:03:08.625 --> 00:03:11.170\nAnd I clone it, and now I've got\nfive more servers for the dev app,\n\n63\n00:03:11.170 --> 00:03:13.350\nI've got a total of ten servers.\n\n64\n00:03:13.350 --> 00:03:14.820\nAnd the dev team jumps into the dev app,\n\n65\n00:03:14.820 --> 00:03:17.390\nand they start working on it,\nand they do an experiment.\n\n66\n00:03:17.390 --> 00:03:20.240\nAnd whatever they did, whatever mad\nscience experiment they cooked up that\n\n67\n00:03:20.240 --> 00:03:23.090\nday, all of a sudden,\ntheir CPU usage spikes to 100%,\n\n68\n00:03:23.090 --> 00:03:26.650\nand they peg out all their RAM,\nand they're thrashing the disk.\n\n69\n00:03:26.650 --> 00:03:30.140\nAnd the production environment\nstarts getting slower and slower and\n\n70\n00:03:30.140 --> 00:03:33.150\nslower because the dev\nenvironment has gone nuts, right?\n\n71\n00:03:33.150 --> 00:03:34.560\nIt's an easy mistake to make.\n\n72\n00:03:34.560 --> 00:03:37.790\nWe assume that everybody is gonna\nplay nice until something bad like\n\n73\n00:03:37.790 --> 00:03:38.670\nthat happens.\n\n74\n00:03:38.670 --> 00:03:41.570\nSo in that scenario, yes,\nI want the production\n\n75\n00:03:41.570 --> 00:03:45.050\nenvironment to have access to whatever\nresources it can get a hold of.\n\n76\n00:03:45.050 --> 00:03:48.470\nBut I wanna restrict the dev\nenvironment and limit that down.\n\n77\n00:03:48.470 --> 00:03:50.850\nAnd I don't care how many VMs\nare in the dev environment,\n\n78\n00:03:50.850 --> 00:03:52.920\nI just wanna make sure it\ndoesn't impact production.\n\n79\n00:03:52.920 --> 00:03:57.970\nAnd so, I can create a resource pool and\nsay the dev environment has these limits.\n\n80\n00:03:57.970 --> 00:04:01.220\nAnd I could do it on each\nindividual virtual machine.\n\n81\n00:04:01.220 --> 00:04:04.050\nBut anytime I rebuilt that dev\nenvironment, I would have to remember to\n\n82\n00:04:04.050 --> 00:04:06.810\nput those settings in place again,\nand I'm not gonna remember.\n\n83\n00:04:06.810 --> 00:04:09.211\nI recognize my faults, and\nI work around them, right?\n\n84\n00:04:09.211 --> 00:04:12.043\nSo [LAUGH] I know I'm not gonna remember,\nand even if I did remember,\n\n85\n00:04:12.043 --> 00:04:13.200\nit's a lot of work.\n\n86\n00:04:13.200 --> 00:04:15.530\nI might need 20 virtual machines\nto build that dev environment.\n\n87\n00:04:15.530 --> 00:04:17.500\nNow I gotta go do these setting 20 times.\n\n88\n00:04:17.500 --> 00:04:20.160\nA resource pool lets us define it once,\nand\n\n89\n00:04:20.160 --> 00:04:21.990\nwe put the virtual machines in that pool.\n\n90\n00:04:21.990 --> 00:04:24.350\nAnd like the name implies, the pool,\nit's a collection of resources.\n\n91\n00:04:24.350 --> 00:04:27.410\nAnd so each virtual machine just\ndraws a portion of that pool.\n\n92\n00:04:27.410 --> 00:04:31.010\nAnd when the pool is empty,\nthere's nothing else to give.\n\n93\n00:04:31.010 --> 00:04:32.300\nAnd that's it, you've pegged it out.\n\n94\n00:04:32.300 --> 00:04:34.020\nAnd you've hit your limit.\n\n95\n00:04:34.020 --> 00:04:37.430\nNow resource pools are actually\npretty easy to work with.\n\n96\n00:04:37.430 --> 00:04:40.060\nWell, let's start with the individual\nvirtual machine, right.\n\n97\n00:04:40.060 --> 00:04:44.400\nSo if I jump in here, I'm gonna go into\nmy hosting clusters, and I'll find a VM.\n\n98\n00:04:44.400 --> 00:04:46.806\nSo I've got this database\nserver sitting right here, and\n\n99\n00:04:46.806 --> 00:04:49.050\nmaybe that database server\nis important to me.\n\n100\n00:04:49.050 --> 00:04:52.350\nIt needs a lot of RAM,\nit has disk I/O needs.\n\n101\n00:04:52.350 --> 00:04:54.610\nResource pools really\naren't all that useful for\n\n102\n00:04:54.610 --> 00:04:57.660\nmanaging disk I/O, we'll see there's\na few little settings in there, but\n\n103\n00:04:57.660 --> 00:05:00.530\nstorage I/O control is\nsomewhat limited in VMware.\n\n104\n00:05:00.530 --> 00:05:04.047\nBut I'm gonna take that database server,\nand\n\n105\n00:05:04.047 --> 00:05:08.914\nwhen I go up here to Manage, and\nthen we can go into our Settings,\n\n106\n00:05:08.914 --> 00:05:13.076\nand you'll see like CPU and\nmemory that we can define.\n\n107\n00:05:13.076 --> 00:05:17.456\nAnd this is what the virtual machine\nis gonna see, but inside of those,\n\n108\n00:05:17.456 --> 00:05:21.550\nyou'll see where we can set shares,\nreservations, and limits.\n\n109\n00:05:21.550 --> 00:05:24.090\nThose are what we talked about\nin the episodes we covered on\n\n110\n00:05:24.090 --> 00:05:25.330\ncreating virtual machines.\n\n111\n00:05:25.330 --> 00:05:28.110\nRight, and\nwe talked about how a reservation\n\n112\n00:05:28.110 --> 00:05:32.374\nis a hard amount of CPU utilization\nthat we can reserve for this machine.\n\n113\n00:05:32.374 --> 00:05:34.891\nIf this machine uses it, great.\n\n114\n00:05:34.891 --> 00:05:37.682\nIf this machine doesn't use it,\nnobody else can.\n\n115\n00:05:37.682 --> 00:05:38.500\nIt's off limits.\n\n116\n00:05:38.500 --> 00:05:40.980\nOur reservation is just for this machine.\n\n117\n00:05:40.980 --> 00:05:45.040\nA limit says it can use up to\nthis amount of utilization.\n\n118\n00:05:45.040 --> 00:05:46.600\nAnd if it hits that limit, it stops.\n\n119\n00:05:46.600 --> 00:05:47.860\nIt can't use any more.\n\n120\n00:05:47.860 --> 00:05:53.085\nSo if I set it to 20%, it can use\n20% of the CPU, it can't use 21%.\n\n121\n00:05:53.085 --> 00:05:58.860\nAnd then shares are for where I don't\nwanna define a reservation or a limit.\n\n122\n00:05:58.860 --> 00:06:01.480\nShares are used for defining a priority.\n\n123\n00:06:01.480 --> 00:06:04.260\nIf there's three different\nvirtual machines all vying for\n\n124\n00:06:04.260 --> 00:06:06.600\naccess to RAM, who wins?\n\n125\n00:06:06.600 --> 00:06:08.000\nWell, ideally, they all win.\n\n126\n00:06:08.000 --> 00:06:09.910\nIf I have enough RAM, they all win.\n\n127\n00:06:09.910 --> 00:06:13.210\nBut if I don't have enough RAM,\nit's gonna come down to shares.\n\n128\n00:06:13.210 --> 00:06:14.100\nOr if it's CPU, right?\n\n129\n00:06:14.100 --> 00:06:15.470\nThere's a CPU in this case.\n\n130\n00:06:15.470 --> 00:06:18.040\nIt's gonna come down to shares.\n\n131\n00:06:18.040 --> 00:06:20.990\nWhoever has the most shares gets priority,\nand\n\n132\n00:06:20.990 --> 00:06:22.780\nthe other people will get\na smaller percentage.\n\n133\n00:06:22.780 --> 00:06:24.690\nFor CPU, this guy's got 1,000 shares.\n\n134\n00:06:25.910 --> 00:06:30.093\nIf I had another host who had 500\nshares and they were both competing for\n\n135\n00:06:30.093 --> 00:06:34.884\nCPU access, this guy would get 66%, and\nthe other guy would get 33%, right,\n\n136\n00:06:34.884 --> 00:06:37.336\n1,000 shares versus 500 shares.\n\n137\n00:06:37.336 --> 00:06:40.932\nIf there were two VMs,\ntwo guests that both had 1,000 shares,\n\n138\n00:06:40.932 --> 00:06:43.910\nthen they'd each get 50%,\nright, equal shares.\n\n139\n00:06:43.910 --> 00:06:46.240\nSo, that's basically priority.\n\n140\n00:06:46.240 --> 00:06:48.020\nAnd this is defined on the individual VM.\n\n141\n00:06:49.310 --> 00:06:51.920\nBut instead, what I can do is,\nI can go to my host.\n\n142\n00:06:51.920 --> 00:06:53.700\nI can right click on the host.\n\n143\n00:06:53.700 --> 00:06:55.040\nAnd this works on clusters, too,\n\n144\n00:06:55.040 --> 00:06:57.280\nas you can define it in\na number of different ways.\n\n145\n00:06:57.280 --> 00:07:03.050\nAnd inside of that host, you'll see\nwhere I can create a new resource pool.\n\n146\n00:07:03.050 --> 00:07:05.090\nAnd I can create the resource pool, and\n\n147\n00:07:05.090 --> 00:07:07.335\nyou'll see that I've got\nbasically the same settings.\n\n148\n00:07:07.335 --> 00:07:11.270\nHere's CPU, I've got Shares,\nReservation, Limit.\n\n149\n00:07:11.270 --> 00:07:16.190\nHere's Memory, Shares, Reservation,\nLimit, just like on the virtual machines.\n\n150\n00:07:16.190 --> 00:07:17.822\nAnd so I can come in and I can set that.\n\n151\n00:07:17.822 --> 00:07:21.330\nAnd maybe this is going to be\nmy production environment.\n\n152\n00:07:21.330 --> 00:07:24.540\nRight, so this is production servers.\n\n153\n00:07:24.540 --> 00:07:27.490\nAnd I'll set the Shares to High.\n\n154\n00:07:27.490 --> 00:07:30.620\nI want the production\nserver to get more shares.\n\n155\n00:07:30.620 --> 00:07:36.570\nThese are our like little macros or\naliases for certain numbers.\n\n156\n00:07:36.570 --> 00:07:40.055\nIf you choose Normal, that's that\n1,000 shares that we saw earlier, and\n\n157\n00:07:40.055 --> 00:07:43.398\nif you choose High, I believe it's\n2,000 shares if I remember right.\n\n158\n00:07:43.398 --> 00:07:45.130\nAnd if you choose Low, it's 500.\n\n159\n00:07:45.130 --> 00:07:48.586\nBut the numbers don't necessarily matter\ncuz you could always do Custom and\n\n160\n00:07:48.586 --> 00:07:52.096\nput in whatever the heck you wanted right,\nso I'm just gonna put it to High and\n\n161\n00:07:52.096 --> 00:07:53.187\nleave that be, right.\n\n162\n00:07:53.187 --> 00:07:57.760\nI could do a reservation, but it's not\nthat I wanna hold the CPU for production.\n\n163\n00:07:57.760 --> 00:08:00.394\nIf production's not using it,\nthen I'm fine with somebody else using it.\n\n164\n00:08:00.394 --> 00:08:02.648\nI wanna get my money's worth\nout of the hardware But\n\n165\n00:08:02.648 --> 00:08:05.916\nI just wanna make sure that the production\nservers have priority access.\n\n166\n00:08:05.916 --> 00:08:08.330\nIf they want it, then they get it.\n\n167\n00:08:08.330 --> 00:08:12.450\nAll right, then I can set\na limit if I want to cap them.\n\n168\n00:08:12.450 --> 00:08:14.690\nMaybe I don't want production\nmaxing out the server.\n\n169\n00:08:14.690 --> 00:08:15.840\nSo I can set a limit.\n\n170\n00:08:15.840 --> 00:08:18.240\nNow in my case,\nI'm okay with production maxing out,\n\n171\n00:08:18.240 --> 00:08:19.380\nbecause that's my production environment.\n\n172\n00:08:19.380 --> 00:08:22.760\nThat's what's supposed to use all\nthis stuff, so I'm gonna leave it.\n\n173\n00:08:22.760 --> 00:08:25.010\nUnlimited, and\nthen I'll do the same thing for memory.\n\n174\n00:08:25.010 --> 00:08:28.450\nI'm gonna set my shares to high and\nI'll leave my reservation and\n\n175\n00:08:28.450 --> 00:08:30.340\nlimits undone, okay.\n\n176\n00:08:30.340 --> 00:08:33.450\nNow there is one more option that I've\nskipped over here which is reservation\n\n177\n00:08:33.450 --> 00:08:37.675\ntype and the default is\nexpandable What does that mean.\n\n178\n00:08:37.675 --> 00:08:43.075\nWell if I define a reservation let's say I\ndefine a reservation of one gigahertz and\n\n179\n00:08:43.075 --> 00:08:47.525\nthen I create a VM and I give it 500\nmegahertz and I create another VM and\n\n180\n00:08:47.525 --> 00:08:51.730\nI give it 500 megahertz, that adds\nup to a gigahertz, now I'm covered.\n\n181\n00:08:51.730 --> 00:08:56.460\nWhat if I create a third virtual\nmachine and give it 500 megahertz?\n\n182\n00:08:56.460 --> 00:09:02.820\nWell now I'm at 1.5 gigahertz and\nif my limit was set to 1, right?\n\n183\n00:09:02.820 --> 00:09:09.364\nSo if I come in here and I set my\nreservation to 1,000 megahertz, right?\n\n184\n00:09:09.364 --> 00:09:13.330\nI create two virtual machines\nat 500 megahertz each, and\n\n185\n00:09:13.330 --> 00:09:16.590\nthen I create a third virtual machine\nat 500 megahertz, so I'm now at 1,500.\n\n186\n00:09:16.590 --> 00:09:18.680\nI've exceeded the reservation.\n\n187\n00:09:19.750 --> 00:09:24.870\nIf we have it set to expandable, it'll\nincrease my reservation to 1,500, right?\n\n188\n00:09:24.870 --> 00:09:28.300\nIt'll automatically bump up to account for\nthe new virtual machine I created.\n\n189\n00:09:28.300 --> 00:09:31.560\nIt assumes, that because I\ncreated the virtual machine,\n\n190\n00:09:31.560 --> 00:09:34.410\nthat's what I intended,\nthat's what I wanted, right?\n\n191\n00:09:34.410 --> 00:09:37.560\nThat's not always true and\nthat may not be what I intended.\n\n192\n00:09:37.560 --> 00:09:38.560\nAnd so we can turn that off.\n\n193\n00:09:38.560 --> 00:09:40.250\nAnd now we're not expandable.\n\n194\n00:09:40.250 --> 00:09:44.960\nAnd so now, if I create three virtual\nmachines, that have 500 megahertz each\n\n195\n00:09:44.960 --> 00:09:48.440\nI can power up two of them and\nthe third one I can't power up.\n\n196\n00:09:48.440 --> 00:09:53.860\nBecause I've hit the limit of my\nreservation and it's not expandable.\n\n197\n00:09:53.860 --> 00:09:58.480\nAnd so now I'm kinda at the mercy of\nwhether there's process cycles available.\n\n198\n00:09:58.480 --> 00:10:01.580\nIf there's some available I might be able\nto get it, but it's not reserved for\n\n199\n00:10:01.580 --> 00:10:02.830\nme anymore, okay?\n\n200\n00:10:02.830 --> 00:10:04.550\nSo that's what that reservation type is.\n\n201\n00:10:04.550 --> 00:10:06.880\nExpandable's the default,\nyou don't always want that.\n\n202\n00:10:08.790 --> 00:10:11.350\nI'm going to say okay to that, and\nit's gonna create that resource pool.\n\n203\n00:10:11.350 --> 00:10:13.770\nNow that was production.\n\n204\n00:10:13.770 --> 00:10:17.400\nMy development environment,\nthat's a little bit different.\n\n205\n00:10:17.400 --> 00:10:20.450\nSo I just created production servers,\nI'm gonna create my dev servers next.\n\n206\n00:10:20.450 --> 00:10:22.730\nSo I do new resource pool and\n\n207\n00:10:22.730 --> 00:10:27.790\nI'm gonna call this one Dev Servers,\nright, or Development whole spell it out.\n\n208\n00:10:29.380 --> 00:10:31.750\nOur end users never see this,\nit's there for you.\n\n209\n00:10:31.750 --> 00:10:34.360\nSo making it easy for you to recognise\nis kind of a nice part there.\n\n210\n00:10:35.380 --> 00:10:37.280\nNow, Dev Servers are different,\n\n211\n00:10:37.280 --> 00:10:39.910\nit's not like production where I\nwant them that access to everything.\n\n212\n00:10:39.910 --> 00:10:44.310\nIn fact, I wanna make sure that my\nDev Server's never impact production and\n\n213\n00:10:44.310 --> 00:10:47.020\nthe easiest way to do is you\njust set the shares to low.\n\n214\n00:10:47.020 --> 00:10:51.550\nIf I set the shares to low now\nit will take whatever I can get\n\n215\n00:10:51.550 --> 00:10:52.540\nbut the production.\n\n216\n00:10:52.540 --> 00:10:55.930\nProduction server is set to\nhigh it's gonna get priority.\n\n217\n00:10:55.930 --> 00:10:58.750\nBut if they're both accessing\nat the same time, it's not that\n\n218\n00:10:58.750 --> 00:11:02.310\nthis guy won't get anything, instead\nhe's gonna get a smaller percentage.\n\n219\n00:11:02.310 --> 00:11:05.800\nSo it's still taking away\nresources from production,\n\n220\n00:11:05.800 --> 00:11:09.000\nit's just based on a percentage scale,\nso we may need to adjust that.\n\n221\n00:11:09.000 --> 00:11:11.140\n>> And in something like your\ndevelopment environment, Don,\n\n222\n00:11:11.140 --> 00:11:14.930\nwould you maybe uncheck Expandable, cuz\nyou don't want it oversubscribing the pool\n\n223\n00:11:14.930 --> 00:11:17.850\nto your production environment\nlike you've been stressing?\n\n224\n00:11:17.850 --> 00:11:21.070\n>> Yeah, if you do set a reservation,\nyou would absolutely wanna turn that off,\n\n225\n00:11:21.070 --> 00:11:23.530\ncuz you don't want it to grow beyond\nthat limit as you create VMs.\n\n226\n00:11:23.530 --> 00:11:27.450\nAnd if you're letting your dev team\ncreate VMs, you could have that, and\n\n227\n00:11:27.450 --> 00:11:30.960\nthey could start growing their own pool,\neven though that's not your intention.\n\n228\n00:11:30.960 --> 00:11:32.180\nSo you could do that but\n\n229\n00:11:32.180 --> 00:11:36.230\nI don't normally use reservations with\nsomething like development, right?\n\n230\n00:11:36.230 --> 00:11:40.650\nI don't wanna hold memory exclusive for\nthe dev team because I hold memory for\n\n231\n00:11:40.650 --> 00:11:42.820\nproduction, not for\nthe dev team or hold CPU.\n\n232\n00:11:42.820 --> 00:11:44.370\nI wouldn't normally do that.\n\n233\n00:11:44.370 --> 00:11:48.730\nI would enforce a limit that\nlet the shares do their thing.\n\n234\n00:11:48.730 --> 00:11:51.260\nBut also restrict what\nthey're able to access, so\n\n235\n00:11:51.260 --> 00:11:55.360\nyou'll see my max limit is 3.3\ngigahertz right now because I think\n\n236\n00:11:55.360 --> 00:11:59.030\nI've got two 1.5 gigahertz machines,\nor something like that.\n\n237\n00:11:59.030 --> 00:12:00.690\nOr 1.5 gigahertz processors?\n\n238\n00:12:00.690 --> 00:12:01.240\nI don't know, whatever.\n\n239\n00:12:01.240 --> 00:12:03.930\nSo I do have somewhat of a limit there,\nbut\n\n240\n00:12:03.930 --> 00:12:06.420\nI might wanna hold the dead environment.\n\n241\n00:12:06.420 --> 00:12:08.030\nTo 1000MHz.\n\n242\n00:12:08.030 --> 00:12:09.880\nOr you can change it to gigahertz.\n\n243\n00:12:09.880 --> 00:12:11.790\nIt makes life a lot easier.\n\n244\n00:12:11.790 --> 00:12:13.560\nSo I'll make it 1GHz.\n\n245\n00:12:13.560 --> 00:12:18.620\nSo the shares will let me\ngrab up to a gigahertz, but\n\n246\n00:12:18.620 --> 00:12:21.350\nif I try and\ngrab more than a gigahertz it'll stop me.\n\n247\n00:12:21.350 --> 00:12:24.520\nSo even if the production\nenvironment is not doing anything,\n\n248\n00:12:24.520 --> 00:12:26.160\nit still got this extra space available.\n\n249\n00:12:26.160 --> 00:12:27.970\nNow why would I wanna do that?\n\n250\n00:12:27.970 --> 00:12:31.590\nWell, just because the production\nenvironment has higher shares,\n\n251\n00:12:31.590 --> 00:12:35.012\ndoesn't mean that it can step right in and\nkick out the Dev.environment.\n\n252\n00:12:35.012 --> 00:12:39.040\nIf the Dev.environment is doing something\nright now, the CPU has to wait for\n\n253\n00:12:39.040 --> 00:12:42.990\nthem to finish before it can bring\nthe production environment in.\n\n254\n00:12:42.990 --> 00:12:47.740\nAnd so on that current cycle\nwhat's being processed right now,\n\n255\n00:12:47.740 --> 00:12:49.440\nwhoever's in there is already in there.\n\n256\n00:12:49.440 --> 00:12:55.090\nAnd it's the next cycle that's gonna take\neffect with the measurements, the shares.\n\n257\n00:12:56.270 --> 00:12:58.660\nThe cycles, we're talking about\nnanoseconds a time here, so\n\n258\n00:12:58.660 --> 00:12:59.810\nit's really really small.\n\n259\n00:12:59.810 --> 00:13:02.550\nBut if you wanna make sure the production\nenvironment has immediate access\n\n260\n00:13:02.550 --> 00:13:04.660\nresources you'll enforce a limit.\n\n261\n00:13:04.660 --> 00:13:08.800\nAnd that way there's already guaranteed\nto be a certain amount of CPU cycles or\n\n262\n00:13:08.800 --> 00:13:10.910\na certain amount of RAM that's exposed and\nempty and\n\n263\n00:13:10.910 --> 00:13:14.500\nwaiting that we can jump in and\naccess at a moment's notice with no delay.\n\n264\n00:13:14.500 --> 00:13:16.980\nSo enforcing a limit can kinda\nwork out really well there.\n\n265\n00:13:16.980 --> 00:13:19.370\nAnd you can do the same\nexact thing with memory.\n\n266\n00:13:19.370 --> 00:13:22.900\nSo I might limit my dev\nenvironment to I don't\n\n267\n00:13:22.900 --> 00:13:25.920\nhave a ton of memory available here so\nI'll just say like 100 megs.\n\n268\n00:13:25.920 --> 00:13:27.970\nObviously, you can put more than 100 megs.\n\n269\n00:13:27.970 --> 00:13:31.320\nNot much you can get done with\n100 megs of memory these days.\n\n270\n00:13:31.320 --> 00:13:32.650\nBut, we can get that set.\n\n271\n00:13:32.650 --> 00:13:34.730\nNow, it might be that in your environment,\njust doing the low and\n\n272\n00:13:34.730 --> 00:13:37.905\nhigh shares is enough\nto achieve your goal.\n\n273\n00:13:37.905 --> 00:13:41.025\nYou wanna make sure that\nproduction environment always\n\n274\n00:13:41.025 --> 00:13:43.375\npriority when goes to\naccess those resources.\n\n275\n00:13:44.575 --> 00:13:46.415\nSo we can divide that up.\n\n276\n00:13:46.415 --> 00:13:49.635\nAnd now, we've got it divided up and\nI've got my development and\n\n277\n00:13:49.635 --> 00:13:50.825\nproduction server pools.\n\n278\n00:13:50.825 --> 00:13:53.655\n>> Now once you've got your\nresource pool created on,\n\n279\n00:13:53.655 --> 00:13:55.935\nhow are we gonna get our\nvirtual machines there?\n\n280\n00:13:55.935 --> 00:13:58.715\nIs that gonna be something\nthat you associate them with?\n\n281\n00:14:00.070 --> 00:14:01.810\n>> Yeah, it's actually pretty easy.\n\n282\n00:14:01.810 --> 00:14:04.660\nIt's kind of like the VApps,\n\n283\n00:14:04.660 --> 00:14:07.940\nthe virtual apps that once you've got\nthese things created, you just drag and\n\n284\n00:14:07.940 --> 00:14:10.820\ndrop your machines and\ndrop them right in there, right?\n\n285\n00:14:10.820 --> 00:14:14.540\nYou can drag an entire V The app and drop\nit in there if you want to really go nuts.\n\n286\n00:14:14.540 --> 00:14:17.170\nI've got these two servers DBO1 and WEB01.\n\n287\n00:14:17.170 --> 00:14:20.450\nSo lets say that DBO1,\nthat's a production data base, right so\n\n288\n00:14:20.450 --> 00:14:25.070\nI'm going to just drag that one right up\nhere and I'll drop that on my production.\n\n289\n00:14:25.070 --> 00:14:28.030\nThen I'll take WEB01 and\nI'm just going to take it and\n\n290\n00:14:28.030 --> 00:14:31.860\nI'll drag and drop it up to Development.\n\n291\n00:14:31.860 --> 00:14:34.100\nAnd so it's in development, it's working.\n\n292\n00:14:34.100 --> 00:14:38.180\nThe Dev team is building it up and testing\nit and making sure that everything's okay.\n\n293\n00:14:38.180 --> 00:14:41.609\nAnd then one day they called me and\nthey say, hey Don that web that we've been\n\n294\n00:14:41.609 --> 00:14:45.205\nworking on, it's done, it's fully tested,\neverything is in the way that we wanted.\n\n295\n00:14:45.205 --> 00:14:47.410\nSo we're ready to move it into production.\n\n296\n00:14:47.410 --> 00:14:51.400\nWell, we expose it on our firewall or\nwhatever to truly move it into production.\n\n297\n00:14:51.400 --> 00:14:53.850\nBut then as far as resources,\nthat's when I say okay, time for\n\n298\n00:14:53.850 --> 00:14:55.370\nthis guy to go mainstream.\n\n299\n00:14:55.370 --> 00:14:58.550\nLet me just drag that and\ndrop it into production.\n\n300\n00:14:58.550 --> 00:15:00.540\nAnd now it's a production server.\n\n301\n00:15:00.540 --> 00:15:02.980\nAnd so I don't have to go and\nedit the individual VM settings.\n\n302\n00:15:02.980 --> 00:15:05.810\nIt get those settings right\nfrom the reservation.\n\n303\n00:15:05.810 --> 00:15:08.410\n>> Don, in the previous episode\nyou showed us how the, you know,\n\n304\n00:15:08.410 --> 00:15:11.150\nin deploying vApps that\nthe association was already made.\n\n305\n00:15:11.150 --> 00:15:12.630\nYou drop both of those\nservers in there and\n\n306\n00:15:12.630 --> 00:15:14.720\nthen in the background it\nhandled the associations.\n\n307\n00:15:14.720 --> 00:15:17.030\nYou didn't have to go and\ndo any post configuration.\n\n308\n00:15:17.030 --> 00:15:20.690\nIs it safe to assume that it's same way\nwhen you drag this into the resource pool?\n\n309\n00:15:20.690 --> 00:15:24.300\nIt, you know, under the hood,\nvCenter does that for us?\n\n310\n00:15:24.300 --> 00:15:26.300\n>> Yeah Wes,\nonce the Virtual Machines are in there and\n\n311\n00:15:26.300 --> 00:15:28.550\nthey're powered on,\nthe power went on here real quick.\n\n312\n00:15:28.550 --> 00:15:31.660\nBut once they're powered on then we'll\nbe able to actually see some of those\n\n313\n00:15:31.660 --> 00:15:33.380\nresources getting consumed.\n\n314\n00:15:33.380 --> 00:15:35.360\nAnd then you can monitor it\nright from the resource pool.\n\n315\n00:15:35.360 --> 00:15:38.800\nSo if we jump in here, I'll take my\nproduction servers resource pool and\n\n316\n00:15:38.800 --> 00:15:41.010\nI've got DB 01 is powered on now.\n\n317\n00:15:41.010 --> 00:15:45.000\nAnd when we jump into our monitor\ntab of the resource pool, you'll,\n\n318\n00:15:45.000 --> 00:15:47.720\nI mean you'll mostly see alerts here,\nwe don't necessarily care about that,\n\n319\n00:15:47.720 --> 00:15:51.300\nbut when you start to look at some of the\nother things like the performance tab and\n\n320\n00:15:51.300 --> 00:15:53.670\nthe utilization tab, and these guys,\n\n321\n00:15:53.670 --> 00:15:55.860\nit's kinda running a little slow\nwhile it loads here for me.\n\n322\n00:15:55.860 --> 00:15:56.830\nThere we go.\n\n323\n00:15:56.830 --> 00:16:01.033\nNow we can start to see how much of\nthe CPU and memory is being consumed.\n\n324\n00:16:01.033 --> 00:16:05.550\nWhat's active, what's reserve try to get\nthat one gig hertz reservation we made.\n\n325\n00:16:05.550 --> 00:16:08.651\nAny limits that are defined,\nthe shares that have been issued out.\n\n326\n00:16:08.651 --> 00:16:11.250\nI can see share, you know,\nI said high earlier was 4000,\n\n327\n00:16:11.250 --> 00:16:12.900\nit looks like it's actually 8000.\n\n328\n00:16:12.900 --> 00:16:17.840\nSo that High share issue I did was\n8000 shares and you can start to spot\n\n329\n00:16:17.840 --> 00:16:20.870\nthe amount of memory so\nwe can monitor what's actually being used.\n\n330\n00:16:20.870 --> 00:16:24.860\nAnd if you go here to Resource Reservation\nthis is where you can monitor it a little\n\n331\n00:16:24.860 --> 00:16:28.610\nmore accurately,\ncuz you can see the CPU side and\n\n332\n00:16:28.610 --> 00:16:31.740\nyou can spot what of\nthe reservation is being used, and\n\n333\n00:16:31.740 --> 00:16:35.760\nthe individual machines and what their\nreservations might be set to see if it's\n\n334\n00:16:35.760 --> 00:16:39.530\nconflicting with what's defined\nin the resource pool itself.\n\n335\n00:16:39.530 --> 00:16:41.550\nSo, we can monitor all\nthat right from here, and\n\n336\n00:16:41.550 --> 00:16:44.319\nit's kinda nice cuz you can\nsee the pool as a whole.\n\n337\n00:16:45.370 --> 00:16:49.490\nMine's looking at a one day range here\nwhich is not gonna have data yet.\n\n338\n00:16:49.490 --> 00:16:52.500\nAfter you run it for a few days, you get\nsome really good information in here and\n\n339\n00:16:52.500 --> 00:16:53.860\nyou can start to spot that and\n\n340\n00:16:53.860 --> 00:16:56.490\nyou can see what all is going\non with the resource pool.\n\n341\n00:16:56.490 --> 00:16:58.360\nAll right, another neat thing is,\n\n342\n00:16:58.360 --> 00:17:01.880\nearlier I gave the example\nof what if you had tenants?\n\n343\n00:17:01.880 --> 00:17:05.900\nIf I had a tenant that, just a customer\nthat I'm renting out server access to,\n\n344\n00:17:05.900 --> 00:17:09.350\nso I create a resource pool from them and\nthen they call me and they say, hey don,\n\n345\n00:17:09.350 --> 00:17:12.810\nwe have a production in a Dev Environment\nand we'd like to setup what you've got.\n\n346\n00:17:12.810 --> 00:17:16.140\nWell, you can actually do\nmulti tiered resource pools.\n\n347\n00:17:16.140 --> 00:17:17.991\nLet me show you what I mean on that.\n\n348\n00:17:17.991 --> 00:17:22.750\nI'm gonna create another resource\npool here just a kind of default one.\n\n349\n00:17:22.750 --> 00:17:26.956\nSo I'll do a new research pool and\nI'm just going to call it customer 1,\n\n350\n00:17:26.956 --> 00:17:31.500\nright, customer 1 and also whatever\nlimits that customers paying for, so\n\n351\n00:17:31.500 --> 00:17:33.590\nwhen they sign up for a contract with me,\n\n352\n00:17:33.590 --> 00:17:36.600\nI tell them these are the resource I'm\ngonna give you and there's your pool.\n\n353\n00:17:36.600 --> 00:17:42.660\nAnd so, all their virtual machines\nare going to go into this customer 1 pool.\n\n354\n00:17:42.660 --> 00:17:44.090\nBut if you right-click on the pool,\n\n355\n00:17:44.090 --> 00:17:47.340\nyou can actually create\na resource pool inside of it.\n\n356\n00:17:47.340 --> 00:17:52.190\nAnd so I might create a production and\n\n357\n00:17:52.190 --> 00:17:55.380\na DEV pool right in here for them, right?\n\n358\n00:17:55.380 --> 00:17:59.830\nSo this might be production and\ndevelopment, all right.\n\n359\n00:17:59.830 --> 00:18:03.030\nAnd, I'm just gonna give my\nscreen just a second to update.\n\n360\n00:18:03.030 --> 00:18:04.060\nThere we go.\n\n361\n00:18:04.060 --> 00:18:08.080\nAnd now, I've got the Customer 1 pool and\nthey've got the Development and\n\n362\n00:18:08.080 --> 00:18:08.940\nProduction inside of it.\n\n363\n00:18:08.940 --> 00:18:12.750\nSo you can nest these and\ncreate a multi-tier reservation pool.\n\n364\n00:18:12.750 --> 00:18:17.291\nSo they might have shares allocated here\non these sublevel resource pools that\n\n365\n00:18:17.291 --> 00:18:22.037\nare pulling from the primary resource pool\nwhich in turn is pooling from our server\n\n366\n00:18:22.037 --> 00:18:22.747\nas a whole.\n\n367\n00:18:22.747 --> 00:18:26.063\nSo you can really get complex with these\nthings and it's just a matter of dragging\n\n368\n00:18:26.063 --> 00:18:29.211\nand dropping end of these between them\nto get those resources put in places.\n\n369\n00:18:29.211 --> 00:18:34.200\nNow, speaking of multi-tiered, it did just\nremind me of another technology that we\n\n370\n00:18:34.200 --> 00:18:37.820\nhave, here we're handling our resource\nallocation and we're trying to make sure\n\n371\n00:18:37.820 --> 00:18:41.130\nthat important machines get access\nto the resources they need.\n\n372\n00:18:41.130 --> 00:18:46.010\nThere is a special type of resource\nthat we can issue out called V Flash.\n\n373\n00:18:46.010 --> 00:18:47.930\nI know I don't have a ton of\ntime left in this episode, but\n\n374\n00:18:47.930 --> 00:18:50.290\nI wanna cover V Flash\nbecause it's important.\n\n375\n00:18:50.290 --> 00:18:54.400\nNormally, when we talk about our virtual\nmachines running the CPU is the host CPU,\n\n376\n00:18:54.400 --> 00:18:56.540\nand the RAM is the host RAM, and\n\n377\n00:18:56.540 --> 00:19:01.340\nthe disk IO is generated from wherever\nyour data stores happen to be, right?\n\n378\n00:19:01.340 --> 00:19:05.580\nAnd when we set these allocations, I\nmentioned how we really can't do much for\n\n379\n00:19:05.580 --> 00:19:08.380\ndisk IO, but\nthe storage IO controls kind of limited.\n\n380\n00:19:08.380 --> 00:19:10.290\nWell, that is true.\n\n381\n00:19:10.290 --> 00:19:13.160\nBut we can also setup\nwhat's called VFlash.\n\n382\n00:19:13.160 --> 00:19:17.780\nVFlash is like cached memory that's\navailable for our virtual machines, and\n\n383\n00:19:17.780 --> 00:19:19.620\nwhen I say memory I mean\ndisk storage memory.\n\n384\n00:19:19.620 --> 00:19:20.580\nNot RAM.\n\n385\n00:19:20.580 --> 00:19:25.500\nSo, if I have a virtual machine that\ndoes a lot of read activity on the disk,\n\n386\n00:19:25.500 --> 00:19:28.460\nI can assign them some VFlash and\nnow they'll benefit from\n\n387\n00:19:28.460 --> 00:19:30.990\nthe performance gains of that and\nbe able to take advantage of it.\n\n388\n00:19:30.990 --> 00:19:34.450\nI need to define that though and\nget it set up and enabled, and\n\n389\n00:19:34.450 --> 00:19:39.380\nwhere we set that up is we set it\nup in a couple of different places,\n\n390\n00:19:39.380 --> 00:19:42.250\nbut it's mostly setup on\nthe host itself up here.\n\n391\n00:19:42.250 --> 00:19:45.670\nSo the host is already allowing\nme to divvy up RAM and\n\n392\n00:19:45.670 --> 00:19:49.980\nCPU for these resource pools but\nthe host is not setup for v flash.\n\n393\n00:19:49.980 --> 00:19:52.598\nThe way v flash works is you\nneed to get some SSD, right?\n\n394\n00:19:52.598 --> 00:19:56.588\nSolid state digital memory, and if you\nhave a solid state drive you can throw\n\n395\n00:19:56.588 --> 00:19:59.266\nit in the system and\nit might be one of those three and\n\n396\n00:19:59.266 --> 00:20:03.251\na half inch laptop looking drives you had\nin your server, or it might be one of\n\n397\n00:20:03.251 --> 00:20:07.463\nthose mSATA memory cards that sticks\nright on the motherboard, but it's SSD.\n\n398\n00:20:07.463 --> 00:20:10.606\nYou'll normally find 128 gigs, 240 gigs,\n\n399\n00:20:10.606 --> 00:20:14.419\nmaybe even 500 gigs of this\nmemory you throw in the system.\n\n400\n00:20:14.419 --> 00:20:17.857\nAnd then you can make that available for\naccelerated resource access for\n\n401\n00:20:17.857 --> 00:20:19.270\nyour virtual machines.\n\n402\n00:20:19.270 --> 00:20:21.517\nAll right.\nIf I remember it I think I do actually\n\n403\n00:20:21.517 --> 00:20:23.338\nhave an extra drive in ESX host 01.\n\n404\n00:20:23.338 --> 00:20:24.910\nWe can find out real quick.\n\n405\n00:20:24.910 --> 00:20:26.770\nI'm gonna take that host.\n\n406\n00:20:26.770 --> 00:20:31.714\nI'm gonna go to Manage and storage,\nand I'm gonna go down here to storage\n\n407\n00:20:31.714 --> 00:20:35.480\ndevices and see what I've got\nto work with in this host.\n\n408\n00:20:35.480 --> 00:20:36.310\nActually, know what?\n\n409\n00:20:36.310 --> 00:20:37.280\nI don't, do I?\n\n410\n00:20:37.280 --> 00:20:40.250\nHm, well, if I had a little\nextra storage I could use that.\n\n411\n00:20:40.250 --> 00:20:42.170\nI could just reuse one of these\nother drives though, so for\n\n412\n00:20:42.170 --> 00:20:46.600\nexample, I've got this 512 gig drive here,\nassuming I haven't used it for anything.\n\n413\n00:20:46.600 --> 00:20:49.860\nIt's showing as flash and so\nI can use it for v flash.\n\n414\n00:20:49.860 --> 00:20:51.970\nIf it was misdetected right?\n\n415\n00:20:51.970 --> 00:20:55.320\nIt might get detected here as\nlike a regular spinning disk.\n\n416\n00:20:55.320 --> 00:20:58.030\nThen if that happened this button\nwould change to show an f and\n\n417\n00:20:58.030 --> 00:20:59.950\nI can click that and flag it as flash.\n\n418\n00:20:59.950 --> 00:21:01.600\nBut it's usually pretty\ngood about detecting it.\n\n419\n00:21:01.600 --> 00:21:04.990\nSo I've got this 500 gig one,\nI'm pretty sure I'm not using that for\n\n420\n00:21:04.990 --> 00:21:05.940\na data store or anything.\n\n421\n00:21:05.940 --> 00:21:08.080\nSo I can go ahead and\nuse that for my vFlash.\n\n422\n00:21:08.080 --> 00:21:09.210\nAll right, so\n\n423\n00:21:09.210 --> 00:21:13.400\nwhat I need to do is I need to tell system\nthat it's going to use that as v flash,\n\n424\n00:21:13.400 --> 00:21:18.660\nquick caveat here v flash accelerates\nreads it doesn't accelerate writes.\n\n425\n00:21:18.660 --> 00:21:22.470\nYou can't optimize your writes,\nit assumes that every write is unique.\n\n426\n00:21:22.470 --> 00:21:25.530\nVMware said that that might change in\nthe future but it hasn't yet so for\n\n427\n00:21:25.530 --> 00:21:27.750\nright now it is It's\nread acceleration only.\n\n428\n00:21:27.750 --> 00:21:30.770\nSo if you've got a database that's\nconstantly reading the same data over and\n\n429\n00:21:30.770 --> 00:21:32.960\nover again,\nit will really benefit from this.\n\n430\n00:21:32.960 --> 00:21:34.820\nIf you have a server that's\ndoing a lot of unique stuff,\n\n431\n00:21:34.820 --> 00:21:37.400\nthough, it may not,\nmay not benefit as much.\n\n432\n00:21:38.450 --> 00:21:42.390\nAll right, so what I'm gonna do\nis I'm gonna go up to my host and\n\n433\n00:21:42.390 --> 00:21:45.685\nif I right click on the host and\ngo to the storage menu,\n\n434\n00:21:45.685 --> 00:21:51.210\nunder storage you'll see where we can\nAdd Virtual Flash Resource Capacity.\n\n435\n00:21:51.210 --> 00:21:51.760\nOkay.\n\n436\n00:21:51.760 --> 00:21:55.210\nIt's a resource, just like our resource\npool, where we saw CPU and memory.\n\n437\n00:21:55.210 --> 00:21:57.990\nNow, we're talking about something\nthat accelerates storage.\n\n438\n00:21:57.990 --> 00:22:00.040\nAnd so I'm gonna choose to\nadd that resource capacity.\n\n439\n00:22:00.040 --> 00:22:03.490\nAnd it's gonna show me any suitable disks.\n\n440\n00:22:03.490 --> 00:22:05.720\nNotice how I had a 40 gig disk for the OS,\n\n441\n00:22:05.720 --> 00:22:08.240\nit doesn't show up here\ncuz it's already in use.\n\n442\n00:22:08.240 --> 00:22:12.285\nIf I had magnetic disks, ones that show\nup as HDD they wouldn't show up either.\n\n443\n00:22:12.285 --> 00:22:16.015\nBut because I've got this one I'm not\nusing that's 500 gigs, I can use it.\n\n444\n00:22:16.015 --> 00:22:18.965\nAnd it's just an actual hard drive,\nit's not like a dedicated chip, but\n\n445\n00:22:18.965 --> 00:22:21.705\nit'll work just fine because they're\nreally all the same on the inside.\n\n446\n00:22:21.705 --> 00:22:24.400\nIf you crack open those drives,\nthere's usually a tiny,\n\n447\n00:22:24.400 --> 00:22:28.179\nbasically an MSata board inside of there,\nit's not anything too spectacular.\n\n448\n00:22:28.179 --> 00:22:31.890\nSo I'm gonna choose to use that disc,\nand I'll say OK, and\n\n449\n00:22:31.890 --> 00:22:35.720\nnow its going to add that\nas a resource to my server.\n\n450\n00:22:35.720 --> 00:22:41.410\nSo now my server has some Vflash available\nto this host, this ESX host right here.\n\n451\n00:22:41.410 --> 00:22:43.000\nIt's got it and it's available.\n\n452\n00:22:43.000 --> 00:22:43.660\nOK.\n\n453\n00:22:43.660 --> 00:22:46.480\nBut, I don't really see\nanything too spectacular.\n\n454\n00:22:46.480 --> 00:22:47.970\nThings don't look much different.\n\n455\n00:22:47.970 --> 00:22:49.550\nIf we go back under Manage and\n\n456\n00:22:49.550 --> 00:22:53.100\nwe go back under Storage what we\nare going to see is that we have a new\n\n457\n00:22:53.100 --> 00:22:58.050\noption here to customize and, it's not\nunder storage is it, it's under settings.\n\n458\n00:22:58.050 --> 00:23:01.978\nI'm choosing my host,\nI'm going to manage and then settings.\n\n459\n00:23:01.978 --> 00:23:06.431\nAnd under settings we'll have some\nnice shiny new options buried away in\n\n460\n00:23:06.431 --> 00:23:10.790\nhere somewhere, way down at the bottom,\nfor Virtual Flash.\n\n461\n00:23:10.790 --> 00:23:13.370\nI've got\nVirtual Flash Resource Management and\n\n462\n00:23:13.370 --> 00:23:17.420\nVirtual Flash Host Swap\nCache Configuration, okay.\n\n463\n00:23:17.420 --> 00:23:22.420\nThe host swap, that's if I wanna\nuse this flash for the host.\n\n464\n00:23:22.420 --> 00:23:25.090\nIf the host though as needs more\nmemory and if there's more resource,\n\n465\n00:23:25.090 --> 00:23:27.800\nthat can use this flash,\nthat's not normally what we want.\n\n466\n00:23:27.800 --> 00:23:29.760\nThat's not only the point of the flash.\n\n467\n00:23:29.760 --> 00:23:32.400\nThe point of the flash is to\naccelerate our virtual machines.\n\n468\n00:23:32.400 --> 00:23:35.760\nSo while we can set it up\nto work with the host,\n\n469\n00:23:35.760 --> 00:23:39.200\nthe default is zero gigs are assigned\nto the host and that's it.\n\n470\n00:23:39.200 --> 00:23:40.710\nBut we can edit that and\n\n471\n00:23:40.710 --> 00:23:45.590\nwe can assign a certain amount of that\nvFlash to be usable by the host, okay.\n\n472\n00:23:45.590 --> 00:23:49.515\nDefault to zero cuz that's not its\npurpose but if I edit this and\n\n473\n00:23:49.515 --> 00:23:53.885\nincrease that number, I can enable\nthe virtual flash host swap cash,\n\n474\n00:23:53.885 --> 00:23:56.052\nthat is next to impossible to say.\n\n475\n00:23:56.052 --> 00:23:59.890\nAnd then I can add the amount of memory\nthat I want allocated for the host.\n\n476\n00:23:59.890 --> 00:24:01.032\nBut I'm not trying to accelerate the host.\n\n477\n00:24:01.032 --> 00:24:02.456\nThe host isn't doing a whole lot for me.\n\n478\n00:24:02.456 --> 00:24:05.011\nI don't want to get it setup,\nmy VMs, and so\n\n479\n00:24:05.011 --> 00:24:08.990\nI'm gonna choose virtual\nflash resource management.\n\n480\n00:24:08.990 --> 00:24:13.770\nAnd right over here we'll see that\nright now my capacity is 510 gigs.\n\n481\n00:24:13.770 --> 00:24:17.610\nIt grab that whole drive and it's got\navailable, it's from my virtual flash file\n\n482\n00:24:17.610 --> 00:24:21.410\nsystem, it's up, it's going, and\nI see the device that's tied to it.\n\n483\n00:24:21.410 --> 00:24:24.100\nIt's now setup and it's ready.\n\n484\n00:24:24.100 --> 00:24:27.170\nIf I have more flash disks available,\nI could add them in here.\n\n485\n00:24:27.170 --> 00:24:28.660\nYou can add more than one, right.\n\n486\n00:24:28.660 --> 00:24:31.600\nNow I just have the one and so\nI've got 500 gigs and that's it.\n\n487\n00:24:32.720 --> 00:24:37.410\nOkay, so now that I've got it,\nI can enable this.\n\n488\n00:24:37.410 --> 00:24:40.400\nAnd this one unfortunately\nhas to be enabled per VM.\n\n489\n00:24:40.400 --> 00:24:45.400\nSo I go to the individual VMs and I say,\nhere's this flash that you can use, right.\n\n490\n00:24:45.400 --> 00:24:48.377\nSo if I go and find a virtual machine,\nI'm gonna take my database server, right,\n\n491\n00:24:48.377 --> 00:24:49.771\na lot of database servers powered on.\n\n492\n00:24:49.771 --> 00:24:52.920\nLet me tell you my weather\nserver cuz it powered off.\n\n493\n00:24:52.920 --> 00:24:56.410\nI'm going to take my web server and\nI'm gonna go into its management,\n\n494\n00:24:56.410 --> 00:25:02.170\nits virtual machine settings, and inside\nof here I can go to the VM hardware.\n\n495\n00:25:02.170 --> 00:25:03.850\nAnd I need to edit the VM hardware.\n\n496\n00:25:05.000 --> 00:25:08.570\nAnd in the VM hardware we'll be\nable to configure that flash.\n\n497\n00:25:08.570 --> 00:25:12.920\nNow when you look at your flash right\naway, when you look at your VM hardware\n\n498\n00:25:12.920 --> 00:25:16.900\nright away, you're not gonna see\na whole heck of a lot in here, right.\n\n499\n00:25:16.900 --> 00:25:18.890\nAnd that's because it's\ntucked under the hard disk.\n\n500\n00:25:18.890 --> 00:25:21.830\nSo I've gotta find my disk\nwhere it's defined in here.\n\n501\n00:25:21.830 --> 00:25:26.300\nRight here I've got hard disk one,\nand I can expand that out and\n\n502\n00:25:26.300 --> 00:25:31.150\nin here you'll find the virtual\nflash read cache, right.\n\n503\n00:25:31.150 --> 00:25:36.500\nThat's where I can start to assign the\nmemory that's set up in vFlash to this VM.\n\n504\n00:25:36.500 --> 00:25:39.780\nAnd I give it the whole thing if I want,\nor I can give it a portion.\n\n505\n00:25:39.780 --> 00:25:46.040\nI can say, you know what I'm gonna\ngive you 16 gigs of vFlash to use.\n\n506\n00:25:46.040 --> 00:25:49.260\nOkay, now as soon as I did that I got\na big warning that popped up my screen.\n\n507\n00:25:49.260 --> 00:25:52.880\nAnd you'll see my reservation must\nbe between four megs and eight gigs,\n\n508\n00:25:52.880 --> 00:25:54.740\nthe number entered in is too large.\n\n509\n00:25:54.740 --> 00:25:56.580\nEnter zero to disable it, okay.\n\n510\n00:25:56.580 --> 00:26:00.890\nI tried to allocate too much and\nthat's because the hardware version and\n\n511\n00:26:00.890 --> 00:26:02.600\nthe system is set up,\nit's got its own limit.\n\n512\n00:26:02.600 --> 00:26:05.660\nSo, I need to cap mine at eight gigs.\n\n513\n00:26:05.660 --> 00:26:06.860\nThere we go.\n\n514\n00:26:06.860 --> 00:26:09.210\nNow I've got 500 gigs, so\nI've got plenty more leftover.\n\n515\n00:26:09.210 --> 00:26:11.220\nI can go to other VMs or\n\n516\n00:26:11.220 --> 00:26:15.140\nif I had more than one disk in this\nVM I could add it to each disk.\n\n517\n00:26:15.140 --> 00:26:16.520\nIt's on each disk individually.\n\n518\n00:26:16.520 --> 00:26:19.620\nSo I could have three hard drives and\nonly accelerate two of them if I wanted.\n\n519\n00:26:19.620 --> 00:26:21.970\nAnd now an improved net performance and\nadding it in.\n\n520\n00:26:21.970 --> 00:26:23.520\nAnd if I got to advanced,\n\n521\n00:26:23.520 --> 00:26:26.580\nyou'll see here where I can\nactually specify a block size too.\n\n522\n00:26:26.580 --> 00:26:28.870\nI've allocated eight gigs of storage.\n\n523\n00:26:28.870 --> 00:26:31.800\nNo matter how small of\nsomething it writes to it,\n\n524\n00:26:31.800 --> 00:26:33.708\nit's always gonna consume\nat least eight k.\n\n525\n00:26:33.708 --> 00:26:36.940\nIf I've got large stuff being written it,\nI don't care, that's fine.\n\n526\n00:26:36.940 --> 00:26:39.790\nBut if I am dealing with tons of\nsmall files I might want to choose\n\n527\n00:26:39.790 --> 00:26:43.730\na smaller block size to make it\na little more efficient, and\n\n528\n00:26:43.730 --> 00:26:45.130\nyou can choose bigger block sizes too.\n\n529\n00:26:45.130 --> 00:26:48.060\nIt's all about making it a little more\nefficient as far as how that memory uses.\n\n530\n00:26:48.060 --> 00:26:50.599\nBut that AKA size is pretty\nindustry standard and so\n\n531\n00:26:50.599 --> 00:26:53.380\nmost of us just leave\nit right there at that.\n\n532\n00:26:53.380 --> 00:26:56.320\nBut now I'm accelerating\ndisc access here by giving\n\n533\n00:26:56.320 --> 00:26:57.750\naccess to vFlash and it's done per VM.\n\n534\n00:26:57.750 --> 00:27:00.760\nSo I don't have to set\nup a resource pool for\n\n535\n00:27:00.760 --> 00:27:03.701\nthis, I set it up on the discs themselves.\n\n536\n00:27:03.701 --> 00:27:07.190\nIt's a lot more manual but\nyou have a lot more control, right.\n\n537\n00:27:07.190 --> 00:27:10.330\nBut you'll also see in here\nsome of the storage IO control.\n\n538\n00:27:10.330 --> 00:27:14.370\nI can limit the input output\noperations per second, the IOPs.\n\n539\n00:27:14.370 --> 00:27:17.470\nI can set shares, and this is on the disc.\n\n540\n00:27:17.470 --> 00:27:19.700\nThe resource pool wouldn't\nlet me set this but\n\n541\n00:27:19.700 --> 00:27:22.000\nI can set it right here on the disk for\nthe VM.\n\n542\n00:27:22.000 --> 00:27:23.470\nSo this kinda goes hand and\n\n543\n00:27:23.470 --> 00:27:26.330\nhand, I don't get the nice centralized\nmanagement of it were I just drag and\n\n544\n00:27:26.330 --> 00:27:29.410\ndrop VMs into a pool and it's done,\nI have to configure here by hand.\n\n545\n00:27:29.410 --> 00:27:31.110\nBut I do have the capability.\n\n546\n00:27:31.110 --> 00:27:36.600\nSo when it comes to managing resources,\npools are great for CPU and RAM.\n\n547\n00:27:36.600 --> 00:27:40.590\nBut for disc and even network, we end\nhaving to come down here and set it.\n\n548\n00:27:40.590 --> 00:27:46.360\nNetwork IO control and storage IO control,\nNIOC and SIOC, are done right here.\n\n549\n00:27:46.360 --> 00:27:50.540\nThe NIOC we can actually do on\nthe port groups of a switch and\n\n550\n00:27:50.540 --> 00:27:54.150\nSIOC we can actually do on the data\nstore itself too if we wanted, but\n\n551\n00:27:54.150 --> 00:27:56.560\nwe can do it right here from the VM and\nit's a lot more granular.\n\n552\n00:27:56.560 --> 00:28:00.290\nSo a couple of different ways that\nwe can allocate those resources out.\n\n553\n00:28:00.290 --> 00:28:03.280\n>> Don we definitely appreciate all the\ninformation on the resource management,\n\n554\n00:28:03.280 --> 00:28:06.240\nand it does look like you could get\nyourself into trouble with picking and\n\n555\n00:28:06.240 --> 00:28:07.880\ntweaking these wrong if\nyou don't pay attention.\n\n556\n00:28:07.880 --> 00:28:08.740\n>> [LAUGH].\n\n557\n00:28:08.740 --> 00:28:11.164\n>> Looking at the clock though it does\nlook like we're coming to the end of\n\n558\n00:28:11.164 --> 00:28:13.977\nanother episode, but before we do you got\nany additional words for the viewers?\n\n559\n00:28:13.977 --> 00:28:18.910\n>> One thing I forgot to mention is I\nnow have vFlash attached to that VM.\n\n560\n00:28:18.910 --> 00:28:22.050\nI can't use vMotion anymore because if\nI move it another host that doesn't\n\n561\n00:28:22.050 --> 00:28:23.695\nhave vFlash I'm in trouble, right.\n\n562\n00:28:23.695 --> 00:28:26.190\nSo vFlash can also be\nconfigured on a cluster also.\n\n563\n00:28:26.190 --> 00:28:29.700\nSo if you have a cluster of hosts you\nwant to make sure you put flash in\n\n564\n00:28:29.700 --> 00:28:31.200\neach one of them and\n\n565\n00:28:31.200 --> 00:28:34.660\nthen create the vFlash on the cluster\nthat way you can still use vMotion.\n\n566\n00:28:34.660 --> 00:28:37.710\nThe way that I just set it up would\nbe a vMotion disaster, right.\n\n567\n00:28:37.710 --> 00:28:39.910\nIf you're not using\nvMotion you don't care but\n\n568\n00:28:39.910 --> 00:28:41.790\njust be aware that you can\ncreate it on a cluster.\n\n569\n00:28:41.790 --> 00:28:45.880\nIt's done exactly the same way I just did\nit except on the cluster not on the host.\n\n570\n00:28:45.880 --> 00:28:47.360\nJust keep that in mind.\n\n571\n00:28:47.360 --> 00:28:50.780\n>> Don as always we appreciate you being\nin here in the ITProTV studios and\n\n572\n00:28:50.780 --> 00:28:52.890\nwe appreciate you the viewer watching us.\n\n573\n00:28:52.890 --> 00:28:55.730\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n574\n00:28:55.730 --> 00:28:56.260\n>> And I'm Don Pezet.\n\n575\n00:28:56.260 --> 00:28:57.051\n>> And we'll see you next time.\n\n576\n00:28:57.051 --> 00:29:06.490\n[MUSIC]\n\n",
          "vimeoId": "169850820"
        }
      ],
      "title": "Resource Management"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don discuss virtual machine snapshots. They talk about the benefit of snapshots in vSphere. As with all technologies there are disadvantages to snapshots and they explore not only the pro’s but the con’s of using snapshots in a virtualized environment.",
          "length": "2094",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-1-1-snapshots-062416-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-1-1-snapshots-062416-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-1-1-snapshots-062416-1-sm.jpg",
          "title": "Snapshots",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.917 --> 00:00:14.716\nWelcome back to another exciting\nepisode here at TV Pro TV.\n\n3\n00:00:14.716 --> 00:00:17.183\nI'm your host Wes Bryan,\nand in today's episode,\n\n4\n00:00:17.183 --> 00:00:19.170\ncoming back at you with more VMware.\n\n5\n00:00:19.170 --> 00:00:21.800\nThat's right, the VMware\ncertified professional version 6.\n\n6\n00:00:21.800 --> 00:00:25.490\nIf you ever run into a situation where\nyou've installed a piece of software,\n\n7\n00:00:25.490 --> 00:00:27.200\nserver comes online and it crashes.\n\n8\n00:00:27.200 --> 00:00:28.020\nNow, what do you have to do?\n\n9\n00:00:28.020 --> 00:00:30.850\nYou have to build the server over again,\nwell that's our topic today.\n\n10\n00:00:30.850 --> 00:00:34.259\nCan help you out in that area and joining\nme in the studio is none other than Mr.\n\n11\n00:00:34.259 --> 00:00:34.790\nDon Pezet.\n\n12\n00:00:34.790 --> 00:00:35.640\nDon, how you doing sir?\n\n13\n00:00:35.640 --> 00:00:39.980\n>> I am doing swell Wes, and definitely\nglad that my server isn't crashed today.\n\n14\n00:00:39.980 --> 00:00:44.320\nIf it were, building it over again, that's\nlike the worst thing to have to do, right?\n\n15\n00:00:44.320 --> 00:00:46.540\nYou never want to have to rebuild\neverything from scratch, and so\n\n16\n00:00:46.540 --> 00:00:49.370\nwhat we're gonna see in this episode and\nthe next couple episodes\n\n17\n00:00:49.370 --> 00:00:52.240\nare things we can do to prevent that\nfrom happening in the first place.\n\n18\n00:00:52.240 --> 00:00:53.840\nWell, maybe the problem happens, but\n\n19\n00:00:53.840 --> 00:00:55.340\nprevent this from having to rebuild,\nright?\n\n20\n00:00:55.340 --> 00:00:57.910\nWays to quickly restore a server and\nget it back up and\n\n21\n00:00:57.910 --> 00:01:01.330\nrunning, just by taking a few\nprecautionary measures.\n\n22\n00:01:01.330 --> 00:01:03.930\nSo in this episode, we're gonna talk about\none of those technologies one of the most\n\n23\n00:01:03.930 --> 00:01:05.530\nuseful, they're called Snapshots.\n\n24\n00:01:05.530 --> 00:01:08.240\nNow, a lot of you might already be\nfamiliar with Snapshots you might have\n\n25\n00:01:08.240 --> 00:01:10.027\nused them in other products and\nthat's great.\n\n26\n00:01:10.027 --> 00:01:13.597\nIn the exam, we need to know how\nthey actually work though and\n\n27\n00:01:13.597 --> 00:01:18.290\nhow these feared or ESXI really, applies\nthe Snapshots and gets them in place.\n\n28\n00:01:18.290 --> 00:01:22.190\nSo I'm gonna start off really basic here,\nwith what the heck a snapshot is, right?\n\n29\n00:01:22.190 --> 00:01:25.210\nIf you've ever done,\nlet me just give you an example, right?\n\n30\n00:01:25.210 --> 00:01:27.480\nWe'll use Windows,\ncuz Windows is easy to break.\n\n31\n00:01:27.480 --> 00:01:33.670\nSo [LAUGH] way back in the day, I had to\ndo a deployment of Windows NT 4.0, right.\n\n32\n00:01:33.670 --> 00:01:36.340\nSo this was a long time ago, 15 years ago.\n\n33\n00:01:36.340 --> 00:01:40.130\nAnd when a new service pack\nwould come out for NT4,\n\n34\n00:01:40.130 --> 00:01:43.760\nMicrosoft wasn't as good at doing quality\ncontrol back then as they are now.\n\n35\n00:01:43.760 --> 00:01:45.370\nAnd so when you deploy a service pack,\n\n36\n00:01:45.370 --> 00:01:50.240\nthere was a good 50% chance that server\nwould break And so if I had a server, and\n\n37\n00:01:50.240 --> 00:01:53.170\nI deployed a service pack,\nsay it was service pack four.\n\n38\n00:01:53.170 --> 00:01:56.140\nWell it would take 30 minutes\nto get it installed and\n\n39\n00:01:56.140 --> 00:01:59.230\nif it crashed anywhere in that 30 minute\nperiod, the server was dead in the water.\n\n40\n00:01:59.230 --> 00:02:00.090\nAnd what did I have to do?\n\n41\n00:02:01.100 --> 00:02:04.480\nFormat the server and\nrestore it from backup tape.\n\n42\n00:02:04.480 --> 00:02:08.990\nAnd so what took me just 15 or 30 minutes\nto break, would then take 2 or 3 hours for\n\n43\n00:02:08.990 --> 00:02:11.480\nme to restore and get back online.\n\n44\n00:02:11.480 --> 00:02:13.030\nThat was a nightmare.\n\n45\n00:02:13.030 --> 00:02:18.020\nSo what a snapshot does, it tries to fix\nthat for us and says, what we can do\n\n46\n00:02:18.020 --> 00:02:22.540\nis we can freeze the hard drives on\na server at a particular point in time.\n\n47\n00:02:22.540 --> 00:02:24.140\nWe can take a picture of that hard drive.\n\n48\n00:02:24.140 --> 00:02:27.030\nYou gotta have the sound effect,\nthat's important.\n\n49\n00:02:27.030 --> 00:02:29.830\nAnd so this is what the hard drive\nlooked like at this point in time.\n\n50\n00:02:29.830 --> 00:02:31.810\nAnd then you go and\nyou start making you changes.\n\n51\n00:02:31.810 --> 00:02:35.030\nYou deploy your service pack you do\nwhatever change it is you need to do to\n\n52\n00:02:35.030 --> 00:02:36.210\nthe system.\n\n53\n00:02:36.210 --> 00:02:39.290\nAnd then, if something goes wrong\n\n54\n00:02:39.290 --> 00:02:42.210\nthen you say oops shoot let\nme just go back in time.\n\n55\n00:02:42.210 --> 00:02:45.130\nTake me back to the way that drive\nwas when I took the snapshot.\n\n56\n00:02:45.130 --> 00:02:48.230\nAnd everything you did is undone and\nthe world is back.\n\n57\n00:02:48.230 --> 00:02:52.190\nYou've achieved peace and\na state of zen and off you go, right?\n\n58\n00:02:52.190 --> 00:02:54.360\nWhat it does, it removes a lot of fear.\n\n59\n00:02:54.360 --> 00:02:56.330\nIt gives you a safety net.\n\n60\n00:02:56.330 --> 00:03:00.240\nWhen I was deploying those service packs\nback then, I always had that fear.\n\n61\n00:03:00.240 --> 00:03:02.720\nI knew if something went wrong\nI was gonna have at least\n\n62\n00:03:02.720 --> 00:03:06.030\nthree hours of work to restore\nthe backups and then verify and\n\n63\n00:03:06.030 --> 00:03:08.930\ncertify the servers and say, now it's\nworking again the way it's supposed to.\n\n64\n00:03:08.930 --> 00:03:10.330\nAnd then I still had\nmore work down the road,\n\n65\n00:03:10.330 --> 00:03:12.790\ncuz I have to redo\nthe service back eventually.\n\n66\n00:03:12.790 --> 00:03:15.270\nBut, with a snapshot I can give it a shot,\nI can give it an attempt.\n\n67\n00:03:15.270 --> 00:03:17.970\nAnd if something goes wrong,\n\n68\n00:03:17.970 --> 00:03:21.710\nit only takes a matter of seconds to\nrestore a snapshot and you're back.\n\n69\n00:03:21.710 --> 00:03:24.530\nSo, that fear of having to\ndo all this restore work\n\n70\n00:03:24.530 --> 00:03:26.500\nit just goes out the window, right?\n\n71\n00:03:26.500 --> 00:03:28.930\nSo, snapshots are really, really great.\n\n72\n00:03:28.930 --> 00:03:33.290\nBut, you need to understand how they\nwork because there's a negative side.\n\n73\n00:03:33.290 --> 00:03:37.020\nThere's a dark side to snapshots and some\npeople go a little snapshot crazy, and\n\n74\n00:03:37.020 --> 00:03:39.710\nit kills the performance\nof their virtual machines.\n\n75\n00:03:39.710 --> 00:03:42.590\nSo we've got to be careful with that and\nto make sure we understand it, I've made\n\n76\n00:03:42.590 --> 00:03:46.010\nsome little diagrams that shows how\nsnapshots work to make sure we understand\n\n77\n00:03:46.010 --> 00:03:49.110\nit and you'll be able to see where it\nreally starts to hurt performance.\n\n78\n00:03:49.110 --> 00:03:52.140\nSo let's start with\na traditional virtual machine.\n\n79\n00:03:52.140 --> 00:03:54.530\nWhen I make a virtual machine on ESX,\n\n80\n00:03:54.530 --> 00:03:56.240\nthat virtual machine is going\nto have at least one hard drive.\n\n81\n00:03:56.240 --> 00:04:01.540\nAnd that hard drive is stored in a VMDK,\na virtual machine disc file.\n\n82\n00:04:01.540 --> 00:04:04.465\nAnd that disc file is where\nall of our disc contents go,\n\n83\n00:04:04.465 --> 00:04:06.040\nthey get stored in that file.\n\n84\n00:04:06.040 --> 00:04:08.910\nSo I've got a really\nsimplistic diagram here.\n\n85\n00:04:08.910 --> 00:04:12.130\nSo let's say that I've got\na virtual machine, and\n\n86\n00:04:12.130 --> 00:04:13.940\nhere is my hard drive at 6:00 AM.\n\n87\n00:04:13.940 --> 00:04:16.780\nOkay, my hard drive has a lot\nof empty data in it, but\n\n88\n00:04:16.780 --> 00:04:18.530\nit has some empty space\ndown here at the end.\n\n89\n00:04:18.530 --> 00:04:22.070\nAnd so\nyou'll see where I've written A B C D E.\n\n90\n00:04:22.070 --> 00:04:24.750\nThis just represents data on my disk,\nokay?\n\n91\n00:04:24.750 --> 00:04:28.690\nSo as of 6 AM,\nthis is what my server looks like.\n\n92\n00:04:28.690 --> 00:04:31.000\nIf I start making changes to the disk, so\n\n93\n00:04:31.000 --> 00:04:35.730\nmaybe I overwrite whatever is stored\nhere in D and I make that F, right?\n\n94\n00:04:35.730 --> 00:04:38.050\nWell I just changed it.\n\n95\n00:04:38.050 --> 00:04:41.246\nCan I roll back and\ngo back to when I had D?\n\n96\n00:04:41.246 --> 00:04:42.280\nNo.\n\n97\n00:04:42.280 --> 00:04:45.475\nMaybe if this is Windows,\nI might have Recycle bin and\n\n98\n00:04:45.475 --> 00:04:47.605\nI go and restore the file I deleted or\n\n99\n00:04:47.605 --> 00:04:52.350\nwhatever or if it's a Mac you can go\ninto something and get that data back.\n\n100\n00:04:52.350 --> 00:04:56.160\nBut if you don't have Time Machine\nset up on your Mac you can't go back.\n\n101\n00:04:56.160 --> 00:04:58.100\nOn Windows, if you don't have\na backup you can't go back.\n\n102\n00:04:58.100 --> 00:05:01.060\nI guess Windows you have\nVolume Shadow copy and\n\n103\n00:05:01.060 --> 00:05:03.090\nother technologies you\nmight be able to use.\n\n104\n00:05:03.090 --> 00:05:05.930\nIn Linux you don't have anything.\n\n105\n00:05:05.930 --> 00:05:08.156\nOnce I delete that file and\nchange it, it's gone.\n\n106\n00:05:08.156 --> 00:05:10.445\nAnd so, I have to go and\nrestore from a backup and\n\n107\n00:05:10.445 --> 00:05:13.140\nthat's not necessarily\nsomething that I want to do.\n\n108\n00:05:13.140 --> 00:05:14.990\nSo, what I can do,\n\n109\n00:05:14.990 --> 00:05:19.940\nis I can take a snapshot of that drive,\nI can freeze it at this point in time.\n\n110\n00:05:19.940 --> 00:05:25.490\nI can freeze it at 6:00 AM and at 6:00\nAM I had A, B, C, D, and E written in it.\n\n111\n00:05:25.490 --> 00:05:28.687\nAnd then once it's frozen,\nnow I can start making changes and\n\n112\n00:05:28.687 --> 00:05:31.652\nthe and all the reference point\nthat I can jump back into.\n\n113\n00:05:31.652 --> 00:05:32.792\n>> Now Don when you say frozen here,\n\n114\n00:05:32.792 --> 00:05:34.985\nI'm certain it's not the Antartic\nwe are talking about here-\n\n115\n00:05:34.985 --> 00:05:35.655\n>> [LAUGH]\n\n116\n00:05:35.655 --> 00:05:37.650\n>> What do you mean when you say,\n\n117\n00:05:37.650 --> 00:05:40.142\nI'm gonna freeze this drive,\nwhat are we doing there?\n\n118\n00:05:40.142 --> 00:05:43.240\n>> All right, when you a snapshot, there's\nactually three different things that\n\n119\n00:05:43.240 --> 00:05:47.570\nhappen, and the main is on the disk\nside.What I'm talking about here.\n\n120\n00:05:47.570 --> 00:05:50.660\nThat VMDK,\nVMWare basically makes it read only.\n\n121\n00:05:50.660 --> 00:05:53.600\nSo, it flags it as read only, so\niit can't be changed anymore.\n\n122\n00:05:53.600 --> 00:05:55.340\nI know what you're thinking.\n\n123\n00:05:55.340 --> 00:05:58.950\nIf the hard drive is now read only,\nhow am I supposed to make changes to it?\n\n124\n00:05:58.950 --> 00:06:03.270\nWhat it does is it creates\na second virtual hard drive.\n\n125\n00:06:03.270 --> 00:06:06.520\nAnd your changes actually go\nin the second hard drive.\n\n126\n00:06:06.520 --> 00:06:08.750\nAnd it looks something like this.\n\n127\n00:06:08.750 --> 00:06:13.600\nSo when I take that snapshot at 6:00 AM,\nit freezes the VMDK,\n\n128\n00:06:13.600 --> 00:06:15.190\nit makes it read only.\n\n129\n00:06:15.190 --> 00:06:22.100\nAnd then it creates a new VMDK, and all my\nchanges are gonna start being put in here.\n\n130\n00:06:22.100 --> 00:06:25.420\nSo if I change D to F, right?\n\n131\n00:06:25.420 --> 00:06:29.810\nI would actually be writing that here,\nand when I do that,\n\n132\n00:06:29.810 --> 00:06:33.260\nlet me change that again, I got to\nhave my colors right, there we go.\n\n133\n00:06:33.260 --> 00:06:37.620\nSo, when I do that, the change goes\nhere as opposed to going here.\n\n134\n00:06:37.620 --> 00:06:40.030\nAnd so, now if I want to roll back,\nI still can.\n\n135\n00:06:40.030 --> 00:06:43.360\nI have the original data\nas it was at 6 AM, but\n\n136\n00:06:43.360 --> 00:06:47.200\nI've also got the new\ndata changed as it was.\n\n137\n00:06:47.200 --> 00:06:52.190\nAnd when we go to read from the disk,\nthe production system\n\n138\n00:06:52.190 --> 00:06:57.620\nas it goes to read,\nit reads from that new disk.\n\n139\n00:06:57.620 --> 00:07:01.560\nAnd so we would read and we would hit\nthat F and that's what we would see.\n\n140\n00:07:01.560 --> 00:07:04.590\nAnd so we read that sector of the drive,\nwe would see F.\n\n141\n00:07:04.590 --> 00:07:09.240\nIf I read from this sector of the drive,\nthere 's nothing there, and so\n\n142\n00:07:09.240 --> 00:07:16.140\nI would pass right through, and I would\nread C, or B, or A or whatever, right?\n\n143\n00:07:16.140 --> 00:07:18.490\nYou pass right through\nthe snapshot where it's empty.\n\n144\n00:07:18.490 --> 00:07:22.860\nYou only stop at the snapshot,\nwhere it actually has data.\n\n145\n00:07:22.860 --> 00:07:27.340\nOkay, now there's two things that\nwe need to be concerned with here.\n\n146\n00:07:27.340 --> 00:07:31.350\nFirst off, reads are a little bit\nmore complex now, aren't they?\n\n147\n00:07:31.350 --> 00:07:33.570\nIt used to be that I just\nwent to one VMDK, and\n\n148\n00:07:33.570 --> 00:07:37.070\nI went right to where I needed and I found\nthe data that I wanted and that was that.\n\n149\n00:07:37.070 --> 00:07:40.120\nNow I might have to go\nto more than one VMDK.\n\n150\n00:07:40.120 --> 00:07:42.270\nSo let's say that I'm reading F.\n\n151\n00:07:42.270 --> 00:07:43.900\nI just go to that first disk.\n\n152\n00:07:43.900 --> 00:07:44.550\nI find it.\n\n153\n00:07:44.550 --> 00:07:46.740\nI get the information I need and I'm done.\n\n154\n00:07:46.740 --> 00:07:50.870\nBut if the, and I say I,\nit's really ESXI that's doing it, right?\n\n155\n00:07:50.870 --> 00:07:51.731\nThe virtual machine.\n\n156\n00:07:51.731 --> 00:07:56.088\nWhen the virtual machine goes\nto read from this sector,\n\n157\n00:07:56.088 --> 00:08:02.496\nit has to check the snapshot disc here,\nsee that it's empty and then go and check.\n\n158\n00:08:02.496 --> 00:08:03.680\nOn the main disk.\n\n159\n00:08:03.680 --> 00:08:07.707\nSo, what used to be one seek is now\ntwo seeks, I've got a seek against\n\n160\n00:08:07.707 --> 00:08:12.510\nthe Snapshot and then seeks against the\noriginal drive to find the original data.\n\n161\n00:08:13.700 --> 00:08:15.880\nOnly changes will be one seek.\n\n162\n00:08:15.880 --> 00:08:20.310\nThat means my performance is gonna\ndecrease just based on that.\n\n163\n00:08:20.310 --> 00:08:24.220\nJust based on haven't to checked two disks\nperformance decreased because I got to go\n\n164\n00:08:24.220 --> 00:08:25.586\ntwo places.\n\n165\n00:08:25.586 --> 00:08:29.364\nThe other thing is,\nremember when we prevision a virtual disk.\n\n166\n00:08:29.364 --> 00:08:34.200\nYou've got a choice of thick provisioning\nor thin provisioning, right?\n\n167\n00:08:34.200 --> 00:08:36.690\nAnd back in the storage episodes I said,\n\n168\n00:08:36.690 --> 00:08:41.410\nhey thin provisioning is great during\nlab or research and development, but\n\n169\n00:08:41.410 --> 00:08:43.850\nin production you always want\na thick provision, right?\n\n170\n00:08:43.850 --> 00:08:49.250\nAnd just as a refresher, if I make\n64 gigabyte virtual hard drive, and\n\n171\n00:08:49.250 --> 00:08:54.690\nI thick provision it,\nit will find 64 gigs of space on\n\n172\n00:08:54.690 --> 00:08:59.320\nthe actual hard drive right then and lay\nit out and flag it for this virtual disk.\n\n173\n00:08:59.320 --> 00:09:03.505\nAnd so as I start to put data in it,\nthe disk's already 64 gigs.\n\n174\n00:09:03.505 --> 00:09:07.305\nIf the disk is empty or\nif the disk has 63 gigs of data in it,\n\n175\n00:09:07.305 --> 00:09:12.404\nit's still gonna consume 64 gigs no\nmatter what, it's thick provisioned.\n\n176\n00:09:12.404 --> 00:09:16.604\nWell, we can run out of hard drive space\nthat way, if I need a bunch virtual hard\n\n177\n00:09:16.604 --> 00:09:20.760\ndrives and if a drive is mostly empty\nit's still gonna consume its full size.\n\n178\n00:09:20.760 --> 00:09:23.150\nSo we might opt to thin provision.\n\n179\n00:09:23.150 --> 00:09:25.820\nWith thin provision,\nif I create a 64 gig hard drive and\n\n180\n00:09:25.820 --> 00:09:30.190\nit's empty, it'll only take up\nlike 100 megs on the hard drive.\n\n181\n00:09:30.190 --> 00:09:31.300\nIt won't take up much.\n\n182\n00:09:31.300 --> 00:09:34.270\nAnd as I copy data into it,\nit will then grow.\n\n183\n00:09:34.270 --> 00:09:37.830\nWell, in the storage episodes,\nI talk about how that growth operations\n\n184\n00:09:37.830 --> 00:09:40.440\ncreates its own disk IO and\nit creates overhead.\n\n185\n00:09:40.440 --> 00:09:43.280\nAnd can also lead to\nfragmentation of the VMDK.\n\n186\n00:09:43.280 --> 00:09:46.760\nSo you could have\nfragmentation in the VMDK and\n\n187\n00:09:46.760 --> 00:09:48.880\nnow you've got fragmentation\noutside of the VMDK, so\n\n188\n00:09:48.880 --> 00:09:52.540\nyou've got double fragmentation and that's\nbad for the file, bad for performance.\n\n189\n00:09:52.540 --> 00:09:58.070\nSo thin provisioned disks have\ntheir own performance concerns.\n\n190\n00:09:58.070 --> 00:10:03.225\nWell, my original disk here,\nthe disk that as it's frozen here at 6 AM.\n\n191\n00:10:03.225 --> 00:10:04.965\nI may have thick provision to that, right?\n\n192\n00:10:04.965 --> 00:10:08.055\nSo that's laid out at 65\nGig is on the hard drive.\n\n193\n00:10:08.055 --> 00:10:14.560\nBut when you take a snapshot, snapshots\nare always thin provision, right?\n\n194\n00:10:14.560 --> 00:10:17.140\nDoesn't matter if the source is thin or\nthick.\n\n195\n00:10:17.140 --> 00:10:19.420\nThe snapshot is always thin provision.\n\n196\n00:10:19.420 --> 00:10:23.070\nSo when I take a snapshot,\nthe new snapshot disk is empty.\n\n197\n00:10:23.070 --> 00:10:25.460\nIt'll take up a very small amount\nof space on the hard drive.\n\n198\n00:10:25.460 --> 00:10:30.010\nAnd then as I make changes,\nlike adding this F right here,\n\n199\n00:10:30.010 --> 00:10:34.250\nwhen we change that value it gets\nwritten and the snapshot starts to grow.\n\n200\n00:10:34.250 --> 00:10:37.240\nAnd every change I make,\nis making it grow, and grow, and grow.\n\n201\n00:10:37.240 --> 00:10:41.290\nWell it doesn't matter if you're running\nLinux, or Windows, or Mac OS, or\n\n202\n00:10:41.290 --> 00:10:44.440\nwhatever, they've all got page files,\nright?\n\n203\n00:10:44.440 --> 00:10:47.610\nAnd the page files\nare constantly changing,\n\n204\n00:10:47.610 --> 00:10:50.730\nthat means your snapshot is\ngonna be constantly growing.\n\n205\n00:10:50.730 --> 00:10:54.430\nEven if the system is just sitting there\nidle, there's stuff being swapped in and\n\n206\n00:10:54.430 --> 00:10:56.080\nout of memory in to the page files.\n\n207\n00:10:56.080 --> 00:10:57.360\nAnd you're gonna see that activity,\n\n208\n00:10:57.360 --> 00:11:02.800\nunless you, in theory you could\ndisable page files, you could disable\n\n209\n00:11:02.800 --> 00:11:05.680\nwriting SYS logs to the hard drive and\nhave it write to RAM instead.\n\n210\n00:11:05.680 --> 00:11:08.800\nThose are things that you could\ndo to alleviate that, but\n\n211\n00:11:08.800 --> 00:11:13.190\neven in idle systems can be writing data,\nand this is gonna continue to grow, and\n\n212\n00:11:13.190 --> 00:11:15.410\nthat starts to hurt performance, right?\n\n213\n00:11:15.410 --> 00:11:18.660\nSo in a lab, in a test environment,\n\n214\n00:11:18.660 --> 00:11:22.450\non my laptop right here for\nthe show I'll go snapshot crazy.\n\n215\n00:11:22.450 --> 00:11:24.130\nI'll take all sorts of snapshots.\n\n216\n00:11:24.130 --> 00:11:28.530\nBut in production, snapshots should\nalways be a temporary thing, right?\n\n217\n00:11:28.530 --> 00:11:31.950\nI'm about to deploy a service pack,\nso let me take a snapshot,\n\n218\n00:11:32.980 --> 00:11:36.980\ndeploy the service pack, and\nmake sure everything works right, okay?\n\n219\n00:11:36.980 --> 00:11:39.840\nIf it doesn't,\nI roll back to the snapshot.\n\n220\n00:11:39.840 --> 00:11:41.010\nWhew.\nProblem solved, right?\n\n221\n00:11:42.030 --> 00:11:46.570\nIf things do work out though, if\neverything works out great, then I need to\n\n222\n00:11:46.570 --> 00:11:49.620\ncertify the server and say yup, it's done,\nit's upgraded, everything's working fine.\n\n223\n00:11:49.620 --> 00:11:51.900\nAnd then I need to go delete the snapshot.\n\n224\n00:11:51.900 --> 00:11:54.290\nDelete the snapshot to get\nit out of there, all right?\n\n225\n00:11:54.290 --> 00:11:55.490\nAnd now you're just reading and\n\n226\n00:11:55.490 --> 00:11:59.030\nwriting from that one VMDK\nthat is thick provisioned.\n\n227\n00:11:59.030 --> 00:12:02.040\nAnd your performance goes back\nto a normal performance profile.\n\n228\n00:12:02.040 --> 00:12:06.400\nWhere it gets really bad,\nis where you start adding more snapshots.\n\n229\n00:12:06.400 --> 00:12:11.130\nSo maybe on this server here,\nI take a snapshot at 6 AM,\n\n230\n00:12:11.130 --> 00:12:14.090\nand then we start making changes.\n\n231\n00:12:14.090 --> 00:12:17.310\nSo at 7AM I've changed\na few of my values around,\n\n232\n00:12:17.310 --> 00:12:19.220\nI've added some more data down here.\n\n233\n00:12:19.220 --> 00:12:21.700\nThings start changing on this system.\n\n234\n00:12:21.700 --> 00:12:25.330\nAnd then, I take another snapshot, right?\n\n235\n00:12:25.330 --> 00:12:26.740\nSo, I'm about to make another change.\n\n236\n00:12:26.740 --> 00:12:30.602\nAnd so, I leave my original snapshot of\n6:00 AM, so I take a snapshot of 7:00 AM.\n\n237\n00:12:30.602 --> 00:12:33.980\nSo at 8:00 AM,\nI've got this nice blank disc.\n\n238\n00:12:33.980 --> 00:12:36.770\nAnd my new changes are starting\nto be written to that.\n\n239\n00:12:36.770 --> 00:12:40.970\nAnd so as I continue to make changes,\nnow things can get really weird.\n\n240\n00:12:40.970 --> 00:12:45.520\nBecause if I read from the changed data,\nI'm gonna read from this guy right here,\n\n241\n00:12:45.520 --> 00:12:51.020\nfrom H, and so I'm gonna, whoop,\nthat's not working for me, is it?\n\n242\n00:12:51.020 --> 00:12:56.740\nSo I'm gonna read from H and I'm gonna\nfind that in the first disk that I go to.\n\n243\n00:12:56.740 --> 00:12:58.950\nBut if I go and read from this sector,\n\n244\n00:12:58.950 --> 00:13:02.450\nI see it's empty here and then I've\ngot to jump down to the next disk.\n\n245\n00:13:02.450 --> 00:13:05.590\nI had to read from two\ndifferent virtual disks.\n\n246\n00:13:05.590 --> 00:13:09.770\nBut if I read from this next sector, I've\ngot to go all the way to the third one.\n\n247\n00:13:09.770 --> 00:13:11.400\nSo I make three stops.\n\n248\n00:13:11.400 --> 00:13:12.650\nI check here, it's empty.\n\n249\n00:13:12.650 --> 00:13:13.550\nI check here, it's empty.\n\n250\n00:13:13.550 --> 00:13:15.130\nI check here, I find my data.\n\n251\n00:13:15.130 --> 00:13:17.360\nI just turned one seek into three.\n\n252\n00:13:17.360 --> 00:13:18.450\nAs we reached out.\n\n253\n00:13:18.450 --> 00:13:20.320\nYour performance gets progressively worse.\n\n254\n00:13:20.320 --> 00:13:23.434\nThe more snapshots you have\nthe worse your disk I/O gets.\n\n255\n00:13:23.434 --> 00:13:25.070\nYou may not care about that.\n\n256\n00:13:25.070 --> 00:13:25.990\nIt may be fine.\n\n257\n00:13:25.990 --> 00:13:29.950\nMaybe it's a web server, where all\nthe web pages get cached into RAM anyway.\n\n258\n00:13:29.950 --> 00:13:31.770\nWe're not doing disk seeks, right?\n\n259\n00:13:31.770 --> 00:13:34.220\nSo create all the snapshots you want,\nwho cares?\n\n260\n00:13:34.220 --> 00:13:36.820\nBut, if it's a database server.\n\n261\n00:13:36.820 --> 00:13:39.440\nDisk I/O is really important\non a database server and\n\n262\n00:13:39.440 --> 00:13:41.760\nthe more snapshots you get\nthe worse performance you get.\n\n263\n00:13:41.760 --> 00:13:43.320\nSo be careful with snapshots.\n\n264\n00:13:43.320 --> 00:13:45.560\nIn production,\nthey should only be temporary.\n\n265\n00:13:45.560 --> 00:13:49.192\nYou temporarily use these as a safety net\nwhen you're making a significant change,\n\n266\n00:13:49.192 --> 00:13:50.980\nall right?\n\n267\n00:13:50.980 --> 00:13:53.190\nIn a lab or at R&D, use them like crazy.\n\n268\n00:13:53.190 --> 00:13:54.760\nAdd as many snapshots as you want.\n\n269\n00:13:54.760 --> 00:13:56.940\nThings will start to get slower,\nbut you won't notice,\n\n270\n00:13:56.940 --> 00:13:58.790\ncuz it's in a lab environment, all right?\n\n271\n00:13:58.790 --> 00:14:01.860\nSo that's a key thing to remember\nabout how these snapshots work.\n\n272\n00:14:01.860 --> 00:14:04.470\nAnd we can see this happening when\nwe take a snapshot of the machine.\n\n273\n00:14:04.470 --> 00:14:07.930\nSo for example, let me get to my\nactual environment, all right.\n\n274\n00:14:07.930 --> 00:14:12.130\nSo here under my vCenter Server, and\nI'm gonna dig into host and clusters and\n\n275\n00:14:12.130 --> 00:14:15.490\nI'm gonna find my ESX host 01,\nit's buried in here.\n\n276\n00:14:16.560 --> 00:14:19.200\nAnd, it's got a virtual\nmachine called WinClient01.\n\n277\n00:14:20.590 --> 00:14:25.040\nWinClient01 is a Windows 7 machine,\nand it's just running Windows 7, it's\n\n278\n00:14:25.040 --> 00:14:28.350\ngot it installed, it's got the VM Ware\ntools, and right now it's powered off.\n\n279\n00:14:29.745 --> 00:14:35.465\nNow, if I go into my storage and\nI think I put that in my local data store,\n\n280\n00:14:35.465 --> 00:14:37.915\nso let me go in to my\nlocal data store here.\n\n281\n00:14:37.915 --> 00:14:40.495\nI'm gonna find that Windows 7 machine.\n\n282\n00:14:40.495 --> 00:14:46.790\nSo WinClient01, And here's what that\nWindows 7 machine has right now.\n\n283\n00:14:46.790 --> 00:14:51.520\nI got the VMX file,\nthat;s the configuration for my machine.\n\n284\n00:14:51.520 --> 00:14:55.310\nAnd then, I've got the VMDK,\nthat's my virtual machine disk.\n\n285\n00:14:55.310 --> 00:14:57.420\nAnd see how it's nine and\na half gigs right now?\n\n286\n00:14:57.420 --> 00:14:58.460\nI thin provisioned it.\n\n287\n00:14:58.460 --> 00:15:01.770\nI think I actually have it as a 64\ngig disk, but I thin provisioned it.\n\n288\n00:15:01.770 --> 00:15:03.170\nSo it's only 9 1/2 gigs right now,\n\n289\n00:15:03.170 --> 00:15:07.060\nbecause that's the basic Windows\n7 install with VMWare tools.\n\n290\n00:15:07.060 --> 00:15:08.470\nYou end up at about 9 1/2 gigs.\n\n291\n00:15:08.470 --> 00:15:11.060\nSo there's that disk, right.\n\n292\n00:15:11.060 --> 00:15:13.100\nI just have one disk.\n\n293\n00:15:13.100 --> 00:15:16.000\nNow these other files are important\ntoo because like nvram,\n\n294\n00:15:16.000 --> 00:15:17.860\nthat's like my BIOS configuration.\n\n295\n00:15:17.860 --> 00:15:21.330\nAnd the vmx,\nthat's my virtual machine configuration.\n\n296\n00:15:21.330 --> 00:15:25.970\nWhen you take a snapshot It takes a\nsnapshot not just of the hard drives, but\n\n297\n00:15:25.970 --> 00:15:30.030\nit also takes a snapshot of what's in RAM\nand the virtual machine configuration.\n\n298\n00:15:30.030 --> 00:15:33.120\nSo it'll snapshot this VMX and\nif I was running,\n\n299\n00:15:33.120 --> 00:15:35.080\nit would take a snapshot of what's in RAM.\n\n300\n00:15:35.080 --> 00:15:36.450\nMy machine's powered off.\n\n301\n00:15:36.450 --> 00:15:39.440\nSo if I take a snapshot right now,\nwhat's in RAM?\n\n302\n00:15:39.440 --> 00:15:40.080\nNothing.\n\n303\n00:15:40.080 --> 00:15:42.220\nSo it won't do a snapshot of the RAM.\n\n304\n00:15:42.220 --> 00:15:44.792\nSo that's important, I'll show you\nan example of that here in a few moments.\n\n305\n00:15:44.792 --> 00:15:48.450\nAll right, I'm gonna take\na snapshot of that virtual machine.\n\n306\n00:15:48.450 --> 00:15:51.254\nSo I'm just gonna go over\nhere to Win-Client01.\n\n307\n00:15:51.254 --> 00:15:54.789\nI'm gonna right click on it and\ngo to snapshots.\n\n308\n00:15:54.789 --> 00:15:57.905\nAnd I'll choose to take A snapshot,\nall right?\n\n309\n00:15:57.905 --> 00:16:01.730\nSo it's gonna take the hard drive and\nmaybe I'm about to do something, right?\n\n310\n00:16:01.730 --> 00:16:05.553\nSo I'm about to install Google Chrome or\nsomething like that, right?\n\n311\n00:16:05.553 --> 00:16:11.092\nSo I'll call this Prior to\ninstalling Google Chrome.\n\n312\n00:16:11.092 --> 00:16:14.065\nAll right, it's not a very risky\noperation, you're installing Chrome.\n\n313\n00:16:14.065 --> 00:16:16.265\nBut if we were doing a service pack or\nsome other reconfig,\n\n314\n00:16:16.265 --> 00:16:17.335\nthis would be more significant.\n\n315\n00:16:17.335 --> 00:16:18.815\nSo I'm gonna go ahead and do that.\n\n316\n00:16:18.815 --> 00:16:21.525\nNotice down here,\nsnapshot the virtual machine's memory,\n\n317\n00:16:21.525 --> 00:16:23.160\nsee how that's not lit up?\n\n318\n00:16:23.160 --> 00:16:24.120\nIt's cuz it's not running.\n\n319\n00:16:24.120 --> 00:16:27.789\nThere is nothing in memory to take\na snapshot of and then beneath that,\n\n320\n00:16:27.789 --> 00:16:29.750\nquiesce the guest file system.\n\n321\n00:16:29.750 --> 00:16:31.930\nThat's a fun one.\n\n322\n00:16:31.930 --> 00:16:35.660\nWhat this means is,\nif the system is running,\n\n323\n00:16:35.660 --> 00:16:39.600\nin theory it could be writing\nto the hard drive right now.\n\n324\n00:16:39.600 --> 00:16:45.080\nIf I flag the drive as read only,\nthen I'm gonna flag it halfway\n\n325\n00:16:45.080 --> 00:16:48.650\nthrough a write and the other half of that\nwrite is gonna happen in the snapshot.\n\n326\n00:16:48.650 --> 00:16:53.550\nSo if I roll back to this, I could be\nhalfway through a write operation and\n\n327\n00:16:53.550 --> 00:16:55.380\nit can't recreate the write.\n\n328\n00:16:55.380 --> 00:16:57.299\nIt fails,\nI could end up with corrupt data.\n\n329\n00:16:57.299 --> 00:17:01.013\nSo if I have the VMware tools installed,\nit'll try and quiesce the file system,\n\n330\n00:17:01.013 --> 00:17:04.577\nwhich means get Windows to slow down for\na minute and stop writing to the disk.\n\n331\n00:17:04.577 --> 00:17:06.963\nAnd when they stop writing to the disk,\nthen we freeze it and\n\n332\n00:17:06.963 --> 00:17:09.230\nthen it finishes writing\nto the disk afterwards.\n\n333\n00:17:09.230 --> 00:17:12.280\nSo it makes sure we have all\nclean writes to the hard drive.\n\n334\n00:17:12.280 --> 00:17:14.250\nThat's another thing we don't have\nto worry about when the machine is\n\n335\n00:17:14.250 --> 00:17:15.200\npowered off.\n\n336\n00:17:15.200 --> 00:17:18.370\nIf the machine is powered off,\nsnapshots are really straightforward and\n\n337\n00:17:18.370 --> 00:17:19.780\nthey go really fast.\n\n338\n00:17:19.780 --> 00:17:24.160\nIf the machine is powered on, we have to\nquiesce the file system if we can and\n\n339\n00:17:24.160 --> 00:17:25.820\nwe have to copy what's in RAM.\n\n340\n00:17:25.820 --> 00:17:29.100\nSo taking a snapshot on a running\nmachine is a little bit more involved\n\n341\n00:17:29.100 --> 00:17:32.010\nthan taking a snapshot of\na powered off machine like mine.\n\n342\n00:17:32.010 --> 00:17:35.010\nSo I'm gonna go and say OK and\npower that one off and take that snapshot.\n\n343\n00:17:35.010 --> 00:17:37.772\nThe snapshot's gonna happen really fast,\nit doesn't take long.\n\n344\n00:17:37.772 --> 00:17:39.560\nSee, it's already done.\n\n345\n00:17:39.560 --> 00:17:41.891\nAnd now I've got a snapshot of the system.\n\n346\n00:17:41.891 --> 00:17:44.205\nLooking at it here,\nI don't really see any differences.\n\n347\n00:17:44.205 --> 00:17:48.481\nBut if I go back to the data store and\npull up the file listing for\n\n348\n00:17:48.481 --> 00:17:52.620\nthat client,\nwe're gonna see some new files, all right?\n\n349\n00:17:52.620 --> 00:17:55.950\nOriginally, I just had the one VMDK.\n\n350\n00:17:55.950 --> 00:17:57.070\nThere it is.\n\n351\n00:17:57.070 --> 00:18:00.911\nAnd it's still 9.5 gigs, so\nmy Virtual Machine disk is the same,\n\n352\n00:18:00.911 --> 00:18:02.511\nexcept now it's read only.\n\n353\n00:18:02.511 --> 00:18:06.554\nNow it's not allowing changes to\nbe made to that VMDK, all right?\n\n354\n00:18:06.554 --> 00:18:13.850\nAnd it's created a new disk\nWIN-CLIENT01-000001.vmdk.\n\n355\n00:18:13.850 --> 00:18:17.510\nThat is my new disc, my snapshot disc.\n\n356\n00:18:17.510 --> 00:18:20.800\nAnd any change that I make is\ngonna be written to this one.\n\n357\n00:18:20.800 --> 00:18:23.840\nAnd it's thin provision,\nsee how it's only one meg in size.\n\n358\n00:18:23.840 --> 00:18:26.890\nAnd that's the minimum file size for\none of these VMDKs.\n\n359\n00:18:26.890 --> 00:18:29.215\nAnd so it's just thin provisioned,\nit's sitting there and\n\n360\n00:18:29.215 --> 00:18:34.485\nif I start putting data into it, that's\ngonna grow to contain all my changes.\n\n361\n00:18:34.485 --> 00:18:36.449\nAnd it's the first snapshot.\n\n362\n00:18:36.449 --> 00:18:41.835\nIf I take another one and another one and\nanother one, I'll have 000002 and\n\n363\n00:18:41.835 --> 00:18:45.437\n3 and 4 and so\non as I continue to take more snapshots.\n\n364\n00:18:45.437 --> 00:18:48.255\nHere, this is just my first one, okay?\n\n365\n00:18:48.255 --> 00:18:54.410\nI also have WIN-CLIENT01-Snapshot1.vmsn,\nokay?\n\n366\n00:18:54.410 --> 00:18:55.410\nWhat is that?\n\n367\n00:18:55.410 --> 00:18:59.160\nWell, remember I said the snapshot is\nalso gonna backup my configuration?\n\n368\n00:18:59.160 --> 00:19:02.530\nSo if I were to go and\nadd a second hard drive to this machine or\n\n369\n00:19:02.530 --> 00:19:06.200\nchange its network adapters,\nincrease or decrease its memory.\n\n370\n00:19:06.200 --> 00:19:09.835\nWell, that memory configuration\nis a part of the snapshot, right?\n\n371\n00:19:09.835 --> 00:19:13.020\nSo let's go and modify the VM.\n\n372\n00:19:13.020 --> 00:19:17.500\nSo if I go to my VM, WIN-CLIENT01,\nand I'm gonna edit its hardware.\n\n373\n00:19:18.510 --> 00:19:21.630\nRight now it's set to have\ntwo gigs of RAM, okay?\n\n374\n00:19:21.630 --> 00:19:23.690\nLet's say I change that and\n\n375\n00:19:23.690 --> 00:19:28.560\nI'm gonna modify its memory, maybe we'll\ncut it down to a gig and a half, right?\n\n376\n00:19:28.560 --> 00:19:32.070\nSo instead of two gigs of RAM,\nI'm gonna drop it down to one and\n\n377\n00:19:32.070 --> 00:19:32.889\na half gigs of RAM.\n\n378\n00:19:34.140 --> 00:19:40.230\nAnd, okay, I guess that should be 1532,\n15, whatever, it doesn't matter.\n\n379\n00:19:40.230 --> 00:19:43.210\nSo, I'm gonna give it one and\na half gigs of memory, right?\n\n380\n00:19:43.210 --> 00:19:47.790\nWell, if I were to restore the snapshot,\nit would remember that originally I\n\n381\n00:19:47.790 --> 00:19:49.750\nhad two gigs of ram and\nit would put that back, right?\n\n382\n00:19:49.750 --> 00:19:52.170\nThe configuration of the VM is\na part of that snapshot too.\n\n383\n00:19:53.220 --> 00:19:56.750\nNow if I power on the VM, this is Windows,\nI picked a great operating system for\n\n384\n00:19:56.750 --> 00:19:59.970\nthis cuz Windows, when it boots up,\nit's gonna right to the hard drive.\n\n385\n00:19:59.970 --> 00:20:01.340\nIt's gonna generate it's page file.\n\n386\n00:20:01.340 --> 00:20:02.870\nIt's gonna do all the various things.\n\n387\n00:20:02.870 --> 00:20:06.270\nSo, just booting it up is gonna\ncause some changes on that disk.\n\n388\n00:20:06.270 --> 00:20:10.500\nSo, I'm gonna power this virtual machine\non and it's gonna start booting, okay?\n\n389\n00:20:10.500 --> 00:20:14.470\nAnd, when it boots, think about what\nWindows does, it looks to the hard drive,\n\n390\n00:20:14.470 --> 00:20:17.250\nit finds the operating system,\nit starts to load the kernel.\n\n391\n00:20:17.250 --> 00:20:19.080\nThe kernel then fires up all the drivers,\n\n392\n00:20:19.080 --> 00:20:21.780\nthe drivers then fire up\nthe graphical user interface.\n\n393\n00:20:21.780 --> 00:20:23.550\nAnd then we get to a login screen.\n\n394\n00:20:23.550 --> 00:20:26.580\nBut all along in the background\nit's generating logs,\n\n395\n00:20:26.580 --> 00:20:28.490\nit's resetting memory files,\n\n396\n00:20:28.490 --> 00:20:32.820\nit's doing all sorts of various things\nthat it does which amounts to disk I/O.\n\n397\n00:20:32.820 --> 00:20:36.020\nIf this were a database server, once\nit's online, people start connecting and\n\n398\n00:20:36.020 --> 00:20:37.140\nloading data into the database.\n\n399\n00:20:37.140 --> 00:20:38.330\nThe database starts to grow.\n\n400\n00:20:38.330 --> 00:20:39.660\nDatabase has transaction log files.\n\n401\n00:20:39.660 --> 00:20:41.370\nThose all make the hard drive grow too.\n\n402\n00:20:41.370 --> 00:20:44.650\nThose would all be changes\ngoing into my snapshot disk,\n\n403\n00:20:44.650 --> 00:20:47.540\nmy snapshot disk that is thin provisioned.\n\n404\n00:20:47.540 --> 00:20:49.870\nNo matter how my original\ndrives were configured,\n\n405\n00:20:49.870 --> 00:20:51.590\nif they were thick provisioned,\ndoesn't matter.\n\n406\n00:20:51.590 --> 00:20:55.000\nIt's now giving me the performance\nprofile of being thin provisioned.\n\n407\n00:20:55.000 --> 00:20:59.570\nAll right, so I'm kinda stalling just\nwhile that machine boots up for a second.\n\n408\n00:20:59.570 --> 00:21:00.620\nIt doesn't take long.\n\n409\n00:21:01.630 --> 00:21:05.160\nAnd once it starts to boot, I can go and\nlook at the snapshot files.\n\n410\n00:21:05.160 --> 00:21:08.730\nSo there I can see it's at\na login screen now, right?\n\n411\n00:21:08.730 --> 00:21:11.840\nAnd so\nI'm gonna jump over to my data store and\n\n412\n00:21:11.840 --> 00:21:13.490\ntake a look at those files again.\n\n413\n00:21:13.490 --> 00:21:14.500\nAnd we'll see where they've grown.\n\n414\n00:21:14.500 --> 00:21:18.280\nLet me just pull that up real quick.\n\n415\n00:21:18.280 --> 00:21:23.610\nAnd see that VMDK,\nthe 000001 is now 17 megs in size.\n\n416\n00:21:23.610 --> 00:21:25.880\nIt hasn't grown a ton,\nbut it has grown, right?\n\n417\n00:21:25.880 --> 00:21:27.657\nIt's starting to grow as\nthe changes go in there.\n\n418\n00:21:27.657 --> 00:21:31.090\nAnd as we continue to work with that disk,\nit's gonna continue to change.\n\n419\n00:21:31.090 --> 00:21:35.250\nSo let's say that I want to go ahead and\nuse all Google Chrome in it, right?\n\n420\n00:21:35.250 --> 00:21:38.983\nSo I can go and,\nlet me get connected to that machine.\n\n421\n00:21:38.983 --> 00:21:42.064\nWhere did I leave that thing?\n\n422\n00:21:42.064 --> 00:21:42.620\nThere we go.\n\n423\n00:21:44.858 --> 00:21:46.363\nAll right, so\nlet me connect into that machine.\n\n424\n00:21:48.854 --> 00:21:51.769\nAnd I'll make some changes.\n\n425\n00:21:51.769 --> 00:21:55.680\nMaybe I'll wanna install,\nlet's do Notepad++, right?\n\n426\n00:21:55.680 --> 00:21:57.940\nIt's a little text editor a lot of us use.\n\n427\n00:21:57.940 --> 00:22:02.253\nI don't remember their website so\nlets do a quick search for that one,\n\n428\n00:22:02.253 --> 00:22:03.590\ngo old Notepad ++.\n\n429\n00:22:03.590 --> 00:22:05.115\nSo I'm gonna download the file.\n\n430\n00:22:05.115 --> 00:22:08.659\nAnd just downloading the file,\nthat's gonna generate something, right?\n\n431\n00:22:08.659 --> 00:22:11.550\nIf I go and download this,\nI don't know how big the file is.\n\n432\n00:22:11.550 --> 00:22:13.780\nFour whole megs in size.\n\n433\n00:22:13.780 --> 00:22:16.350\nSo that's not necessarily significant but\n\n434\n00:22:16.350 --> 00:22:19.160\nthat's four megs of a file that I'm\ndownloading, where is that gonna go?\n\n435\n00:22:19.160 --> 00:22:20.303\nThat's gonna go into the snapshot file.\n\n436\n00:22:20.303 --> 00:22:25.259\nThe snapshot file was 17 megs a moment\nago, now it's gonna bump up to 21 megs.\n\n437\n00:22:25.259 --> 00:22:27.530\nThat's my amazing math skills right there.\n\n438\n00:22:27.530 --> 00:22:28.850\nAnd I'm gonna do the install.\n\n439\n00:22:28.850 --> 00:22:31.525\nNow, the file I download was\nfour megs when I install it,\n\n440\n00:22:31.525 --> 00:22:34.130\nit's probably gonna extract it and\nget a little bit bigger.\n\n441\n00:22:34.130 --> 00:22:36.783\nI'm writing to the hard drive\nto make these changes and\n\n442\n00:22:36.783 --> 00:22:40.640\nso this is additional stuff that's\ngoing to put into that snapshot.\n\n443\n00:22:40.640 --> 00:22:42.070\nSo, we'll get that installed.\n\n444\n00:22:42.070 --> 00:22:43.730\nNot necessarily the biggest\nthing in the world,\n\n445\n00:22:43.730 --> 00:22:46.900\nbut definitely gonna occupy some space.\n\n446\n00:22:46.900 --> 00:22:50.080\nAny changes that I make to the system,\nthese are all becoming a part of it too.\n\n447\n00:22:50.080 --> 00:22:53.670\nAnd they might even be simple changes,\nthings like changing the wallpaper, right?\n\n448\n00:22:53.670 --> 00:22:56.920\nIf I change the wallpaper,\nthat's gotta go somewhere and so I\n\n449\n00:22:56.920 --> 00:22:59.550\nlike to go Windows Classic anyway, so I'm\ngonna bump this down to the classic view.\n\n450\n00:23:00.630 --> 00:23:01.380\nThat's a change.\n\n451\n00:23:01.380 --> 00:23:04.730\nWindows stores it in the registry,\nthe registry is written to the hard drive,\n\n452\n00:23:04.730 --> 00:23:07.443\nnow we've generated disk I/O\nthat's part of that snapshot.\n\n453\n00:23:07.443 --> 00:23:11.953\nAnd if I go back to my file system here,\nlet me just refresh this and\n\n454\n00:23:11.953 --> 00:23:15.077\nwe should see that\nsnapshot file is growing.\n\n455\n00:23:15.077 --> 00:23:20.082\nAnd sure enough, a minute ago,\nit was only a couple of megs.\n\n456\n00:23:20.082 --> 00:23:23.690\nNow it's 1.1 gigs in size.\n\n457\n00:23:23.690 --> 00:23:26.210\nWhy did it grow so much, so fast?\n\n458\n00:23:26.210 --> 00:23:28.950\nWell, we probably started\nusing the page file, right?\n\n459\n00:23:28.950 --> 00:23:31.690\nWe started swapping down to that\nin addition to the other things.\n\n460\n00:23:31.690 --> 00:23:33.754\nI downloaded a four meg file and\nI installed it, but\n\n461\n00:23:33.754 --> 00:23:36.498\nit generated enough activity where\nthat snapshot's now growing.\n\n462\n00:23:36.498 --> 00:23:39.952\nAnd so you guys get an idea\nof how fast this can grow.\n\n463\n00:23:39.952 --> 00:23:42.830\nAnd with a thin provisioned disk,\nthat performance starts to suffer, right?\n\n464\n00:23:42.830 --> 00:23:44.481\nSo that's it in action.\n\n465\n00:23:44.481 --> 00:23:49.529\nNow, if I take another snapshot right now,\nwhile the machine is running,\n\n466\n00:23:49.529 --> 00:23:52.896\nit's gonna snapshot not\njust the hard drive, but\n\n467\n00:23:52.896 --> 00:23:57.324\nit's also gonna snapshot\nthe configuration and what's in RAM.\n\n468\n00:23:57.324 --> 00:23:58.238\nSo let's see that.\n\n469\n00:23:58.238 --> 00:24:01.612\nI'm gonna take a snapshot\nof this virtual machine.\n\n470\n00:24:01.612 --> 00:24:07.498\nSo I'll take winclient01,\nI'm gonna go back to Snapshots,\n\n471\n00:24:07.498 --> 00:24:10.441\nand take another snapshot, and\n\n472\n00:24:10.441 --> 00:24:15.900\nI'll call this one after\ninstalling notepad++, okay?\n\n473\n00:24:15.900 --> 00:24:18.960\nAnd you'll see down here where I've got my\n\n474\n00:24:18.960 --> 00:24:21.550\noption to Snapshot\nthe virtual machine's memory.\n\n475\n00:24:21.550 --> 00:24:24.250\nAnd that's lit up, so\nthat I can install it.\n\n476\n00:24:24.250 --> 00:24:26.190\nQuiesce guest file system is not lit up.\n\n477\n00:24:27.190 --> 00:24:28.490\nI thought I had VMware tools installed.\n\n478\n00:24:28.490 --> 00:24:29.700\nBut maybe I don't.\n\n479\n00:24:29.700 --> 00:24:31.714\nOr it might not be supported on\nthe desktop operating system.\n\n480\n00:24:31.714 --> 00:24:32.411\nIt might be a server only.\n\n481\n00:24:32.411 --> 00:24:33.390\nI'm not sure.\n\n482\n00:24:33.390 --> 00:24:35.030\nBut I can snapshot\nthe virtual machine's memory.\n\n483\n00:24:35.030 --> 00:24:38.220\nThat's the big difference about\nsnapshotting a machine that is powered on.\n\n484\n00:24:38.220 --> 00:24:40.980\nSo I'm gonna say okay to that,\nand it's gonna take a snapshot.\n\n485\n00:24:40.980 --> 00:24:45.240\nThis snapshot will take longer,\nbecause when I did it powered off,\n\n486\n00:24:45.240 --> 00:24:48.560\nall it did was flag the VMDK as\nread only and create a new VMDK.\n\n487\n00:24:48.560 --> 00:24:52.260\nAnd than backup that vmx file\nwhich is very, very tiny.\n\n488\n00:24:52.260 --> 00:24:53.890\nSo, that's why we're so fast.\n\n489\n00:24:53.890 --> 00:24:56.440\nNow, it's gonna do all that same stuff,\nbut\n\n490\n00:24:56.440 --> 00:24:59.530\nit's also gotta take whatever's in RAM and\nwrite that to the hard drive.\n\n491\n00:24:59.530 --> 00:25:02.620\nNow, I only gave it a gig and a half\nof RAM, so I'm gonna write a gig and\n\n492\n00:25:02.620 --> 00:25:04.230\na half of data to the drive.\n\n493\n00:25:04.230 --> 00:25:06.220\nWell, some of that RAM\nmight have been empty.\n\n494\n00:25:06.220 --> 00:25:09.070\nWe're not necessarily using all of it,\nso it may be smaller, but\n\n495\n00:25:09.070 --> 00:25:13.940\nbe aware of your snapshotting machine with\n30 gigs of RAM, then it could potentially\n\n496\n00:25:13.940 --> 00:25:16.510\nhave to write 30 gigs of data to the disc\nas part of making that snapshot.\n\n497\n00:25:16.510 --> 00:25:19.170\nAnd that will just take them longer.\n\n498\n00:25:19.170 --> 00:25:21.070\nLet's take a look at what\nthat data store looks like.\n\n499\n00:25:21.070 --> 00:25:25.270\nNow, let me browse back in there,\nand we'll refresh that file list.\n\n500\n00:25:25.270 --> 00:25:27.368\nAnd I expect to see a few\ndifferent things in here now.\n\n501\n00:25:27.368 --> 00:25:28.194\nOkay.\n\n502\n00:25:28.194 --> 00:25:32.610\nFirst off, I've my vmdk there the 000001,\n\n503\n00:25:32.610 --> 00:25:36.310\nand my other ones not showing up yet.\n\n504\n00:25:36.310 --> 00:25:37.360\nWhere is it?\n\n505\n00:25:37.360 --> 00:25:40.580\nIt will appear, sometimes we just\nhave to be a little patient.\n\n506\n00:25:40.580 --> 00:25:42.470\nThat number two will show up.\n\n507\n00:25:42.470 --> 00:25:49.980\nAnd then, as I look down,\nwe can see Snapshot2.wmem, Snapshot2.wmsn.\n\n508\n00:25:49.980 --> 00:25:50.600\nOkay.\n\n509\n00:25:50.600 --> 00:25:54.070\nWmem, that's the RAM,\nsee how it's a 1.5GB in size.\n\n510\n00:25:54.070 --> 00:25:56.740\nThat's my memory that's been written\ndown there to the hard drive.\n\n511\n00:25:56.740 --> 00:25:58.990\nSo that virtual machine\nat that exact state.\n\n512\n00:25:58.990 --> 00:26:03.250\nAnd the configuration file down here is\na whopping 1.2 megs, that's been written,\n\n513\n00:26:03.250 --> 00:26:07.070\nthat includes the bios configuration\ntoo so that one's wrapped up.\n\n514\n00:26:07.070 --> 00:26:08.480\nBut the vmdk, there it is.\n\n515\n00:26:08.480 --> 00:26:11.110\nWas that there all the,\nthat was there all along, wasn't it?\n\n516\n00:26:11.110 --> 00:26:12.620\n>> Yes.\n>> Shoot, Wes is making fun of me now.\n\n517\n00:26:12.620 --> 00:26:16.222\nSo there's number 2 that I couldn't\nsee a moment ago, it was invisible.\n\n518\n00:26:16.222 --> 00:26:19.290\n[LAUGH] I swear, if we rewind this,\nit'd be invisible.\n\n519\n00:26:19.290 --> 00:26:20.760\nSo there's number two, right?\n\n520\n00:26:20.760 --> 00:26:26.000\nThere's that disk and it's already up to\n967 megs and I haven't even touched it.\n\n521\n00:26:26.000 --> 00:26:26.530\nRight?\n\n522\n00:26:26.530 --> 00:26:29.870\nThat's just changing page files\nusually what generates that.\n\n523\n00:26:29.870 --> 00:26:31.920\nSo, now I've got a second one.\n\n524\n00:26:31.920 --> 00:26:35.880\nNow I'm very similar to that diagram that\nI showed you guys earlier, this guy,\n\n525\n00:26:35.880 --> 00:26:40.420\nwhere I got my base VMDK,\nsnapshot one, snapshot two.\n\n526\n00:26:40.420 --> 00:26:44.190\nWhen I start working with this disk, I'm\nhaving to read potentially three different\n\n527\n00:26:44.190 --> 00:26:45.860\nfiles when I read from the hard drive.\n\n528\n00:26:45.860 --> 00:26:49.850\n>> Now Don, is there a way that if\nwe decided we no longer need like\n\n529\n00:26:49.850 --> 00:26:53.520\nan 8 AM snapshot is there a way to go back\n>> Back to the 7 am snap shot or\n\n530\n00:26:53.520 --> 00:26:56.130\nwe now just left with 8 am.\n\n531\n00:26:56.130 --> 00:27:00.280\n>> You can jump around all over\nthe place with this stuff.\n\n532\n00:27:00.280 --> 00:27:03.270\nTechnically the way mine works is\nI've got my base Windows 7 installed.\n\n533\n00:27:03.270 --> 00:27:05.120\nThat was my first snap shot.\n\n534\n00:27:05.120 --> 00:27:10.090\nMy second snapshot was when I was getting\n\n535\n00:27:10.090 --> 00:27:12.970\nready to install Google Chrome is what\nI said, but we did notepad++ instead.\n\n536\n00:27:12.970 --> 00:27:15.090\nThat's prior to me doing the install.\n\n537\n00:27:15.090 --> 00:27:19.260\nThen, I've got the snapshot\nafter I did the install.\n\n538\n00:27:19.260 --> 00:27:22.550\nWe installed notepad++,\nthen took another snapshot.\n\n539\n00:27:22.550 --> 00:27:26.220\nI could roll back to prior\nto installing notepad++.\n\n540\n00:27:26.220 --> 00:27:29.040\nI can restore back all the way to\nthe base image that we had before.\n\n541\n00:27:29.040 --> 00:27:31.960\nAnd the important thing to remember\nis that when you roll back,\n\n542\n00:27:31.960 --> 00:27:33.120\nthat doesn't delete the snapshot.\n\n543\n00:27:33.120 --> 00:27:34.260\nThe snapshot stays there.\n\n544\n00:27:34.260 --> 00:27:35.830\nYou're just not using it anymore.\n\n545\n00:27:35.830 --> 00:27:39.530\nBecause you might roll back, and\nthen choose to roll forward later.\n\n546\n00:27:39.530 --> 00:27:42.690\nMaybe something went wrong with the\nsoftware install, so you roll that back.\n\n547\n00:27:42.690 --> 00:27:44.320\nBut then you figure out\nwhat the problem was,\n\n548\n00:27:44.320 --> 00:27:46.020\nyou could just roll forward and fix it.\n\n549\n00:27:47.090 --> 00:27:49.850\nI rarely, rarely do that,\nand the main reason is,\n\n550\n00:27:49.850 --> 00:27:53.120\nif something went wrong with the install,\nthen it's easier to just redo it.\n\n551\n00:27:53.120 --> 00:27:55.180\nAnd do it right the second time.\n\n552\n00:27:55.180 --> 00:27:58.100\nThe other thing is, you roll back and\nyou start making changes.\n\n553\n00:27:58.100 --> 00:28:00.930\nIf you roll forward to that snapshot,\nit's no longer in line.\n\n554\n00:28:00.930 --> 00:28:01.560\nRight.\n\n555\n00:28:01.560 --> 00:28:04.280\nIt's like in Star Trek where\nthey have the alternate futures.\n\n556\n00:28:04.280 --> 00:28:07.230\nYou've got this fork in\nthe road that's happening.\n\n557\n00:28:07.230 --> 00:28:10.160\nSo if you try and roll forward to fork,\n\n558\n00:28:10.160 --> 00:28:13.030\nit doesn't have what happened in the other\none and now everybody's gotta go T.\n\n559\n00:28:13.030 --> 00:28:14.140\nSo it's a whole mess.\n\n560\n00:28:14.140 --> 00:28:17.580\nSo it actually keeps tracking it for us.\n\n561\n00:28:17.580 --> 00:28:23.600\nIf I go back into my vCenter screen and\ntake that virtual machine, right?\n\n562\n00:28:24.780 --> 00:28:27.900\nWhat I've been doing so\nfar is I'll right-click on it, and\n\n563\n00:28:27.900 --> 00:28:30.520\nI'll go to Snapshots and take a snapshot.\n\n564\n00:28:30.520 --> 00:28:34.280\nBut you can go down to revert to latest\nsnapshot, and that will show you back to\n\n565\n00:28:34.280 --> 00:28:39.180\nthe last one you took, or you can go\nto manage snapshots and you'll see\n\n566\n00:28:39.180 --> 00:28:43.400\nall the snapshots that you've got and\nyou can roll back to any one of them.\n\n567\n00:28:43.400 --> 00:28:47.170\nSo I can roll back to the base machine as\nit was at the beginning of the show, or\n\n568\n00:28:47.170 --> 00:28:51.250\nI can roll back to the snapshot that we\ntook of prior to doing the Chrome install\n\n569\n00:28:51.250 --> 00:28:54.710\nor I can roll back to well,\nafter installing notepad++, but\n\n570\n00:28:54.710 --> 00:28:57.090\nthat's where I am right now, right?\n\n571\n00:28:57.090 --> 00:29:02.150\nNot exactly, changes have happened since\nthen, and so I've got you are here.\n\n572\n00:29:02.150 --> 00:29:07.140\nAnd when we look at this it's just kind\nof a step, and so it's kind of confusing.\n\n573\n00:29:07.140 --> 00:29:08.440\nWhy track it this way?\n\n574\n00:29:08.440 --> 00:29:10.980\nWell you might have more\nthan one fork in the road.\n\n575\n00:29:10.980 --> 00:29:14.590\nIf I roll back to this snapshot\nprior to installing Google Chrome,\n\n576\n00:29:14.590 --> 00:29:16.290\nWell that's gonna move me back.\n\n577\n00:29:16.290 --> 00:29:19.243\nI'll still have after\ninstalling notepad++.\n\n578\n00:29:19.243 --> 00:29:21.700\nPay attention to these icons here.\n\n579\n00:29:21.700 --> 00:29:23.400\nSee I go four different icons.\n\n580\n00:29:23.400 --> 00:29:26.270\nHe circle dot,\nthat's where we are right now.\n\n581\n00:29:26.270 --> 00:29:29.585\nThis original one, It's just\ntelling us that's the base image.\n\n582\n00:29:29.585 --> 00:29:31.635\nThat's the base machine before\nwe even really got started.\n\n583\n00:29:31.635 --> 00:29:33.235\nThat's the first snapshot.\n\n584\n00:29:33.235 --> 00:29:38.135\nBut, the other ones have either a clock or\na clock with a green arrow.\n\n585\n00:29:38.135 --> 00:29:38.695\nRight.\n\n586\n00:29:38.695 --> 00:29:40.305\nThe clock just means it's a snapshot.\n\n587\n00:29:40.305 --> 00:29:42.375\nAll of your snapshots will have a clock.\n\n588\n00:29:42.375 --> 00:29:48.290\nThe green arrow means that the machine\nwas turned on when we did that snapshot.\n\n589\n00:29:48.290 --> 00:29:50.920\nThe machine was turned off here, on here.\n\n590\n00:29:50.920 --> 00:29:53.680\nThey're both snapshots, but\na different state for the VM.\n\n591\n00:29:53.680 --> 00:29:57.210\nWhen you roll back to a snapshot, it'll\nput it back to the state that it was in.\n\n592\n00:29:57.210 --> 00:30:00.490\nIf I roll back to this snapshot,\nthe machine will power off.\n\n593\n00:30:00.490 --> 00:30:01.060\nLet me do that.\n\n594\n00:30:01.060 --> 00:30:03.410\nI'm going to choose prior\nto installing Chrome and\n\n595\n00:30:03.410 --> 00:30:08.200\ndown here I'm going to hit the revert to\nbutton, and so, that's gonna reverse back.\n\n596\n00:30:08.200 --> 00:30:12.010\nAnd it's asking if I wanna take a snapshot\nof how the system is right now.\n\n597\n00:30:12.010 --> 00:30:16.430\nSo, I might wanna do that, or\nI'm just gonna say no and let it restore.\n\n598\n00:30:16.430 --> 00:30:18.710\nSo, it's rolling me back to that snapshot.\n\n599\n00:30:18.710 --> 00:30:19.390\nOkay.\n\n600\n00:30:19.390 --> 00:30:23.860\nAnd if I close this and look at my recent\ntasks, you'll see it goes really fast.\n\n601\n00:30:23.860 --> 00:30:26.930\nWell, right here it's showing me\nthe Virtual Machine is powered on.\n\n602\n00:30:26.930 --> 00:30:31.350\nIf I refresh my screen, I should\nsee the machine is now powered off.\n\n603\n00:30:31.350 --> 00:30:35.150\nIt was powered off when I took\nthe snapshot, at least I thought it was.\n\n604\n00:30:35.150 --> 00:30:40.710\nPowered back to lets see how\nit's actually showing here.\n\n605\n00:30:40.710 --> 00:30:43.575\nI guess, you know what it\nhasn't rolled us back yet.\n\n606\n00:30:43.575 --> 00:30:44.940\nNotepad++ is still there.\n\n607\n00:30:44.940 --> 00:30:47.160\nSo it hasn't actually rolled us back yet.\n\n608\n00:30:47.160 --> 00:30:49.100\nI'm gonna wait for that task to complete.\n\n609\n00:30:50.930 --> 00:30:52.760\nI must not have clicked the button.\n\n610\n00:30:52.760 --> 00:30:56.070\nI'm looking at my recent tasks,\nand that's a create snapshot task.\n\n611\n00:30:56.070 --> 00:30:57.270\nIt didn't actually roll me back.\n\n612\n00:30:57.270 --> 00:30:59.210\nSo let's go back and do that again.\n\n613\n00:30:59.210 --> 00:31:02.440\nAlways a good idea to verify\nthe snapshot actually rolled back.\n\n614\n00:31:02.440 --> 00:31:06.130\nSo I'm gonna go back here and take that\nprior to installing Google Chrome,\n\n615\n00:31:06.130 --> 00:31:07.340\nthat's what I wanna revert to.\n\n616\n00:31:07.340 --> 00:31:09.750\nI'm going to hit the revert to button.\n\n617\n00:31:09.750 --> 00:31:12.330\nIt's telling me the current\nstate will be lost.\n\n618\n00:31:12.330 --> 00:31:13.340\nShould I revert to the snapshot?\n\n619\n00:31:14.393 --> 00:31:17.310\nI thought this was offering to take a new\none, and I didn't bother to read it and\n\n620\n00:31:17.310 --> 00:31:20.090\nI should have, so, I told it no, which\nmeans it didn't do anything, so I'll tell\n\n621\n00:31:20.090 --> 00:31:23.292\nit yes this time, because that'll make it\nactually work which is kind of useful.\n\n622\n00:31:23.292 --> 00:31:26.990\nOkay, so\nnow [LAUGH] it's actually doing it,\n\n623\n00:31:26.990 --> 00:31:29.790\nand we should see it in our recent tasks.\n\n624\n00:31:29.790 --> 00:31:33.270\nThere we go, and now when I refresh\nthat machine it should be powered off,\n\n625\n00:31:33.270 --> 00:31:36.080\nit pays to read the pop\nup messages sometimes.\n\n626\n00:31:36.080 --> 00:31:37.520\nAnd I can see it is powered off.\n\n627\n00:31:37.520 --> 00:31:39.987\nIt was powered off when\nI took the snapshot, so\n\n628\n00:31:39.987 --> 00:31:41.833\nnow it's powered off here, too.\n\n629\n00:31:41.833 --> 00:31:45.122\nAnd now, if I were to power this on,\nI'm in an alternate dimension.\n\n630\n00:31:45.122 --> 00:31:50.390\nI'm in a dimension of, what would life\nbe like had I not installed Notepad++?\n\n631\n00:31:50.390 --> 00:31:52.220\nHad I not done that.\n\n632\n00:31:52.220 --> 00:31:53.490\nWell, this is where we'd be at.\n\n633\n00:31:53.490 --> 00:31:59.402\nAnd if I power this up, it's gonna boot up\nand now it's alternate universe Windows 7.\n\n634\n00:31:59.402 --> 00:32:03.596\nAnd if I go to manage my snapshots,\nI'll see a fork in the road.\n\n635\n00:32:03.596 --> 00:32:07.652\nThat you are here is going one way, And\ninstalling Notepad++ goes a different way,\n\n636\n00:32:07.652 --> 00:32:09.187\nin alternate futures, right?\n\n637\n00:32:09.187 --> 00:32:14.191\nSo if I go back to Snapshots and\nManage Snapshots, now I see that I've got,\n\n638\n00:32:14.191 --> 00:32:19.357\nPrior to installing Google Chrome,\nwhich is what we just rolled back to, and\n\n639\n00:32:19.357 --> 00:32:24.777\nthen I've got, you are here at the same\nlevel as after installing Notepad++.\n\n640\n00:32:24.777 --> 00:32:28.725\nThere are two different futures for\nthis snapshot, right.\n\n641\n00:32:28.725 --> 00:32:31.372\nAnd so that's why we have to have\na management screen like this to\n\n642\n00:32:31.372 --> 00:32:31.967\ntrack those.\n\n643\n00:32:31.967 --> 00:32:35.559\nAnd as you create more and more snapshots,\nthis can get more and more complex, and\n\n644\n00:32:35.559 --> 00:32:38.839\nit's easy to lose track of it, and\nthat's why it's nice to have it all laid\n\n645\n00:32:38.839 --> 00:32:41.770\nout right here,\nto make it easier for us to do.\n\n646\n00:32:41.770 --> 00:32:42.288\nAll right.\n\n647\n00:32:42.288 --> 00:32:46.930\nNow, I rolled back to a snapshot\nwhen the machine was powered off.\n\n648\n00:32:46.930 --> 00:32:50.180\nIf I roll back to a snapshot\nwhile the machine is powered on,\n\n649\n00:32:50.180 --> 00:32:51.215\nI'll get a different experience.\n\n650\n00:32:51.215 --> 00:32:54.370\nIt'll restore me back and\nthe machine will already be powered on.\n\n651\n00:32:54.370 --> 00:32:58.183\nSo for example, if I take,\nafter installing a snapshot here, and\n\n652\n00:32:58.183 --> 00:33:01.042\nI revert back to it, okay,\nsee how it's saying,\n\n653\n00:33:01.042 --> 00:33:05.480\nSuspend the virtual machine when\nreverting to a selected snapshot.\n\n654\n00:33:05.480 --> 00:33:08.600\nDo I wanna just yank the power out of\nthe machine as it is right now, or\n\n655\n00:33:08.600 --> 00:33:10.260\ndo I wanna suspend it first?\n\n656\n00:33:10.260 --> 00:33:12.950\nOkay, and it's just warning me\nthat I'm gonna lose my changes.\n\n657\n00:33:12.950 --> 00:33:14.210\nAll right,\nI'll tell it to go ahead and suspend.\n\n658\n00:33:15.390 --> 00:33:17.170\nAnd then it's gonna send me back over.\n\n659\n00:33:17.170 --> 00:33:21.520\nSo now it's gonna put me right back\nto after installing Notepad++, and\n\n660\n00:33:21.520 --> 00:33:23.980\nYou are here is now underneath that.\n\n661\n00:33:23.980 --> 00:33:29.350\nAnd so if I go back into that virtual\nmachine, well, I'm disconnected here.\n\n662\n00:33:29.350 --> 00:33:32.148\nIf I go back to that virtual machine,\nit's suspended,\n\n663\n00:33:32.148 --> 00:33:33.761\nbecause I told it to suspend it.\n\n664\n00:33:33.761 --> 00:33:37.069\nAnd if I resume it, it'll be back on.\n\n665\n00:33:37.069 --> 00:33:38.670\nIf I had not told it to suspend it,\n\n666\n00:33:38.670 --> 00:33:41.887\nthen it would have actually been on\nright when I flipped over to it.\n\n667\n00:33:41.887 --> 00:33:47.320\nBut now here I am, and I should have,\nwhoops, Notepad ++ right there, okay?\n\n668\n00:33:47.320 --> 00:33:51.430\nSo, pretty easy to navigate between these\nsnapshots, pretty easy to take them.\n\n669\n00:33:51.430 --> 00:33:54.980\nThe key thing to remember is that\nperformance risk that we have with it.\n\n670\n00:33:54.980 --> 00:33:58.910\nNow, I've got a bit more I need\nto talk about with snapshots.\n\n671\n00:33:58.910 --> 00:34:00.900\nAnd I know we're low on time and\n\n672\n00:34:00.900 --> 00:34:02.440\nI didn't think we'd need\na part two on this one, Wes.\n\n673\n00:34:02.440 --> 00:34:05.680\nBut I think we actually are going to need\na part two so I can tackle the rest of it.\n\n674\n00:34:05.680 --> 00:34:08.870\n>> All right, well, maybe we should\nstop this before who knows what\n\n675\n00:34:08.870 --> 00:34:10.310\nalternate ending we end up in.\n\n676\n00:34:10.310 --> 00:34:12.820\nWe're pushing the space\ntime continuum here anyway.\n\n677\n00:34:12.820 --> 00:34:13.582\nSo we'll do that.\n\n678\n00:34:13.582 --> 00:34:14.968\nWe'll go into a part two and\n\n679\n00:34:14.968 --> 00:34:18.050\nwe'll figure out what universe\nwe're in when we come back.\n\n680\n00:34:18.050 --> 00:34:21.390\nAnything else for this one, Don, or\nare you just gonna roll into part two?\n\n681\n00:34:21.390 --> 00:34:25.000\n>> Yeah, let's roll on to part two,\nbecause we need to talk about, I talked\n\n682\n00:34:25.000 --> 00:34:28.926\nabout the performance risks and how we\nneed to keep a good rein on our snapshots.\n\n683\n00:34:28.926 --> 00:34:31.823\nAnd that's what we're gonna see in\nthe next episode, is how to control those,\n\n684\n00:34:31.823 --> 00:34:34.910\ndelete them, consolidate them, and all\nthe other maintenance tasks we need to do.\n\n685\n00:34:34.910 --> 00:34:36.380\n>> All right.\nWell, thanks for being here,\n\n686\n00:34:36.380 --> 00:34:37.790\nand I enjoyed this episode.\n\n687\n00:34:37.790 --> 00:34:39.880\nLook forward to seeing you\nguys out there in part two.\n\n688\n00:34:39.880 --> 00:34:42.830\nSigning off for ITProTV,\nI've been your host Wes Bryan.\n\n689\n00:34:42.830 --> 00:34:43.510\n>> And I'm Don Pezet.\n\n690\n00:34:43.510 --> 00:34:45.102\n>> And we'll see you next time.\n\n691\n00:34:45.102 --> 00:34:53.739\n[MUSIC]\n\n",
          "vimeoId": "172402754"
        },
        {
          "description": "In this episode, Wes and Don continue their discussion on virtual machine snapshots. They look at creating, deleting, restoring and consolidating snapshots.",
          "length": "1161",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-1-2-snapshots_pt2-062416-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-1-2-snapshots_pt2-062416-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-1-2-snapshots_pt2-062416-1-sm.jpg",
          "title": "Snapshots Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.287 --> 00:00:10.287\n[MUSIC]\n\n2\n00:00:11.858 --> 00:00:14.418\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.418 --> 00:00:15.882\nI'm your host, Wes Bryan and\n\n4\n00:00:15.882 --> 00:00:19.057\nin today's episode we're coming\nback at you with more VMware.\n\n5\n00:00:19.057 --> 00:00:22.101\nThat's right,\nVMware Certified Profession Version 6 and\n\n6\n00:00:22.101 --> 00:00:24.020\nthis is a part two in Snapshots.\n\n7\n00:00:24.020 --> 00:00:26.330\nJoining me in the studios is\nnone other than Mr. Don Pezet.\n\n8\n00:00:26.330 --> 00:00:27.510\nDon, how you doing sir?\n\n9\n00:00:27.510 --> 00:00:31.380\n>> I'm doing swell Wes, ready to dive\nback into, well, Snapshot, right?\n\n10\n00:00:31.380 --> 00:00:34.230\nSo, if you watched part one,\nwe talked about what Snapshot were and\n\n11\n00:00:34.230 --> 00:00:34.840\nhow they work.\n\n12\n00:00:34.840 --> 00:00:36.737\nWe saw taking a few Snapshot.\n\n13\n00:00:36.737 --> 00:00:39.956\nBut, you may have gone out and gone\nSnapshot crazy in your environment, and\n\n14\n00:00:39.956 --> 00:00:41.879\nin the back of your mind, you're thinking.\n\n15\n00:00:41.879 --> 00:00:45.640\nBoy, Don really harped on about\nperformance with Snapshots, and\n\n16\n00:00:45.640 --> 00:00:47.400\nnow I got a bunch of snap shots.\n\n17\n00:00:47.400 --> 00:00:48.980\nSo what do I do to kind of reclaim that?\n\n18\n00:00:48.980 --> 00:00:51.258\nAnd so, that's what we need to\ntake a look at in this episode is,\n\n19\n00:00:51.258 --> 00:00:52.416\nhow we manage those snapshots.\n\n20\n00:00:52.416 --> 00:00:55.797\nOnce you've got them created,\nbe certainly serve a purpose, right?\n\n21\n00:00:55.797 --> 00:00:57.890\nYou definitely don't wanna\nshy away from using them.\n\n22\n00:00:57.890 --> 00:01:01.660\nThere are tool that's available to you\nthat makes you're covering from changes\n\n23\n00:01:01.660 --> 00:01:02.520\nvery, very easy.\n\n24\n00:01:02.520 --> 00:01:06.239\nYou can jump right back and\nget things running really really fast.\n\n25\n00:01:06.239 --> 00:01:10.853\nBut when you're done with the Snapshot,\nwe need to get rid of it, all right?\n\n26\n00:01:10.853 --> 00:01:12.200\nAnd so, let's start right there.\n\n27\n00:01:12.200 --> 00:01:14.180\nLet's start with how we delete a Snapshot.\n\n28\n00:01:14.180 --> 00:01:17.510\nSo, in the last episode, I took this\nWindows machine, WinClient 01 and\n\n29\n00:01:17.510 --> 00:01:19.220\nI'm just gonna pull its Snapshot list.\n\n30\n00:01:19.220 --> 00:01:24.040\nI'm gonna right click on the VM and\ngo to Snapshots and Manage Snapshots.\n\n31\n00:01:24.040 --> 00:01:26.510\nand what we'll see with the little\nhierarchy that we made.\n\n32\n00:01:26.510 --> 00:01:29.410\nI had a Snapshot that I called\nprior to installing Google Chrome,\n\n33\n00:01:29.410 --> 00:01:32.192\nwe didn't actually install Chrome,\nwe installed Notepad++ instead.\n\n34\n00:01:32.192 --> 00:01:34.690\nAnd so here,\nwe've got after installing and\n\n35\n00:01:34.690 --> 00:01:39.200\nwe did after installing Notepad++ and\nthat's where I am right now, okay.\n\n36\n00:01:39.200 --> 00:01:42.570\nSo, let's say that\neverything went just fine.\n\n37\n00:01:42.570 --> 00:01:46.594\nEverything upgraded,\nNotepad++ is running great.\n\n38\n00:01:46.594 --> 00:01:49.897\nI don't need this Snapshot anymore, okay?\n\n39\n00:01:49.897 --> 00:01:52.086\nI'm not gonna roll back to it or\nprior install,\n\n40\n00:01:52.086 --> 00:01:53.800\nI'm not gonna roll back to that one.\n\n41\n00:01:53.800 --> 00:01:55.990\nSo I wanna get rid of the Snapshot, okay?\n\n42\n00:01:55.990 --> 00:01:59.000\nWell, you can delete a Snapshot at any\ntime, when you're done with Snapshot,\n\n43\n00:01:59.000 --> 00:01:59.950\nyou can get rid of it.\n\n44\n00:01:59.950 --> 00:02:03.440\nNow when I choose this Snapshot here,\nprior to installing Google Chrome,\n\n45\n00:02:04.470 --> 00:02:07.840\nI can see where that corresponds\nwith the file on the disk, right?\n\n46\n00:02:07.840 --> 00:02:10.110\nIf I go to my data store and\n\n47\n00:02:10.110 --> 00:02:14.020\nI go into where that virtual\nmachine is storing its files.\n\n48\n00:02:14.020 --> 00:02:17.340\nWe can go into WinClient 01 and\nthat was the first Snapshot that I took.\n\n49\n00:02:17.340 --> 00:02:20.430\nSo that prior to installing\nGoogle Chrome Snapshot\n\n50\n00:02:20.430 --> 00:02:24.560\nis this file right here that ultimately\ngrew to almost three gigs in size, right?\n\n51\n00:02:24.560 --> 00:02:27.170\nSo that's the file,\nthat's where it's occupying.\n\n52\n00:02:27.170 --> 00:02:30.090\nIf I delete the Snapshot,\nI should see this file disappear.\n\n53\n00:02:30.090 --> 00:02:31.830\nNow, I've got a second Snapshot,\n\n54\n00:02:31.830 --> 00:02:35.160\nthat's the one that was\nafter installing Notepad++.\n\n55\n00:02:35.160 --> 00:02:38.352\nIf I delete the Chrome snapshot,\nthis one should go away,\n\n56\n00:02:38.352 --> 00:02:40.940\nthe Notepad++ one should stay, right?\n\n57\n00:02:40.940 --> 00:02:44.000\nIt should still be there, so\nlet's see if that happens.\n\n58\n00:02:44.000 --> 00:02:46.655\nSo I'm gonna go back to managing\nthe snapshots for that client,\n\n59\n00:02:46.655 --> 00:02:48.730\nI'm just gonna delete\nthe snapshot that we made.\n\n60\n00:02:48.730 --> 00:02:51.077\nNow, the machine is up and\nrunning right now.\n\n61\n00:02:51.077 --> 00:02:52.855\nI think I'm actually connected to it,\nhere it is.\n\n62\n00:02:52.855 --> 00:02:55.310\nSo this is the machine,\nit's up, it's running,\n\n63\n00:02:55.310 --> 00:02:58.610\nI can fire up Notepad++ or\nwhatever other programs I want.\n\n64\n00:02:58.610 --> 00:03:02.920\nSo machine's active right now and\nif I delete that snapshot,\n\n65\n00:03:02.920 --> 00:03:05.520\nI'm gonna highlight the snapshot and\nhit Delete.\n\n66\n00:03:06.730 --> 00:03:08.750\nIt's gonna say am I sure\nI want to delete it?\n\n67\n00:03:08.750 --> 00:03:10.000\nAnd yes, I'm sure.\n\n68\n00:03:10.000 --> 00:03:11.910\nAnd it's gonna go and\nit's gonna delete it out.\n\n69\n00:03:11.910 --> 00:03:15.410\nNow what effect is that gonna\nhave on the virtual machine?\n\n70\n00:03:15.410 --> 00:03:17.020\nWell, none at all.\n\n71\n00:03:17.020 --> 00:03:20.840\nThat snapshot I was deleting back here,\nI can still be working on that machine.\n\n72\n00:03:20.840 --> 00:03:23.690\nIt's still up and it's running\nbecause remember what I'm accessing.\n\n73\n00:03:23.690 --> 00:03:27.371\nI'm accessing the snapshot the MDK for\nthe most current snapshot and\n\n74\n00:03:27.371 --> 00:03:30.111\nthen it's doing read throughs for\nthe other ones.\n\n75\n00:03:30.111 --> 00:03:34.166\nWell, if a snapshot disappears in the\nmiddle, it just skips right over, right?\n\n76\n00:03:34.166 --> 00:03:37.395\nSo I don't have that snapshot\nto go back and read anymore and\n\n77\n00:03:37.395 --> 00:03:39.635\nwe're able to access that data.\n\n78\n00:03:39.635 --> 00:03:44.485\nSo in a moment, I guess probably close\nthis and see if the task is finished here.\n\n79\n00:03:44.485 --> 00:03:47.492\nIt's still turning along,\nremoving that snapshot.\n\n80\n00:03:47.492 --> 00:03:50.252\nOkay, now, why is it taking so long?\n\n81\n00:03:50.252 --> 00:03:52.042\nIf I'm just deleting a snapshot,\ndoesn't it just go and\n\n82\n00:03:52.042 --> 00:03:54.082\ndelete the VMDK and that's it?\n\n83\n00:03:54.082 --> 00:03:56.842\nWell, there's actually some interesting\nthings that are happening behind\n\n84\n00:03:56.842 --> 00:04:00.032\nthe scenes because think of it this way.\n\n85\n00:04:00.032 --> 00:04:02.024\nIf I, let me bring my diagram back up.\n\n86\n00:04:02.024 --> 00:04:04.192\nAll right, so\nlet's say this is what I've got.\n\n87\n00:04:04.192 --> 00:04:09.642\nI've got a couple of different\nthings in place here.\n\n88\n00:04:09.642 --> 00:04:11.497\nLet me put this back the way it was,\nthere.\n\n89\n00:04:11.497 --> 00:04:15.900\nAll right, so right now,\nif I'm reading from the system,\n\n90\n00:04:15.900 --> 00:04:19.070\nI'm gonna read from something\nlike this first sector, right?\n\n91\n00:04:19.070 --> 00:04:21.150\nWhen I go to read from that first sector,\nI'm gonna look,\n\n92\n00:04:21.150 --> 00:04:24.280\nand I'm gonna get the data\nright from there, okay?\n\n93\n00:04:24.280 --> 00:04:28.000\nBut if I get data from the second sector,\nI've gotta read through and\n\n94\n00:04:28.000 --> 00:04:30.650\nhit that other snapshot on the backend.\n\n95\n00:04:30.650 --> 00:04:33.360\nAnd if I'm reading something\nfrom this third one,\n\n96\n00:04:33.360 --> 00:04:36.070\nI've gotta read through all\nthe way to the backend.\n\n97\n00:04:37.220 --> 00:04:40.800\nSo when I'm reading even from this current\nsnapshot, from the running snapshot,\n\n98\n00:04:40.800 --> 00:04:42.800\nI might be seeing data from all three.\n\n99\n00:04:42.800 --> 00:04:46.430\nWell, let's say I delete\nthis snapshot right here.\n\n100\n00:04:47.590 --> 00:04:52.540\nIf I delete this snapshot,\nI've got F written to this sector and\n\n101\n00:04:52.540 --> 00:04:54.170\nG written to this one.\n\n102\n00:04:54.170 --> 00:04:59.270\nIf I delete that, what happens\nwhen I read from those sectors?\n\n103\n00:04:59.270 --> 00:05:03.166\nIf I reading from this one up here,\nor the one down here.\n\n104\n00:05:03.166 --> 00:05:04.745\nDo I see F or G?\n\n105\n00:05:04.745 --> 00:05:06.360\nI just lost data, didn't I?\n\n106\n00:05:06.360 --> 00:05:07.550\nIt's gone.\n\n107\n00:05:07.550 --> 00:05:09.430\nWell, the data's not actually gone.\n\n108\n00:05:09.430 --> 00:05:13.539\nWhat it's doing is it's\ngotta take that data and\n\n109\n00:05:13.539 --> 00:05:16.555\nmove it into the current snapshot.\n\n110\n00:05:16.555 --> 00:05:20.120\nIt's gotta roll that in so that we've got\nit, so it's gotta bring that data back.\n\n111\n00:05:20.120 --> 00:05:22.570\nSo, before it can actually\ndelete the Snapshot,\n\n112\n00:05:22.570 --> 00:05:26.770\nwhat it has to do is it has to\ntake this data and move it.\n\n113\n00:05:26.770 --> 00:05:29.080\nAnd you know that's not gonna\nwork on my crazy diagram is it?\n\n114\n00:05:29.080 --> 00:05:33.900\nSo, it's gonna come in here and it's got\nto put F here and it's got to put G here.\n\n115\n00:05:33.900 --> 00:05:39.420\nIt's got to out that data where it goes so\nthat it'll still be available to me.\n\n116\n00:05:39.420 --> 00:05:45.420\nAnd once that happens, then it can delete\nthat snapshot and get it out of there.\n\n117\n00:05:45.420 --> 00:05:48.880\nAnd so now when I go to read\nfrom this sector, I'd get F.\n\n118\n00:05:48.880 --> 00:05:51.360\nI'd get that that's\nthe information that I have.\n\n119\n00:05:51.360 --> 00:05:53.910\nAnd if I access an empty sector,\n\n120\n00:05:53.910 --> 00:05:59.060\nit will know to let me move right through\nand get to the disc on the inside.\n\n121\n00:05:59.060 --> 00:06:00.920\nSo it will pull it and I get Cs.\n\n122\n00:06:00.920 --> 00:06:03.190\nNow I get full set of data.\n\n123\n00:06:03.190 --> 00:06:07.710\nAnd what that means is the longer it's\nbeen since you took the snapshot,\n\n124\n00:06:07.710 --> 00:06:09.990\nthe longer it's gonna take\nto delete it out of there.\n\n125\n00:06:09.990 --> 00:06:12.900\nIt's gotta move all this\ninformation around and\n\n126\n00:06:12.900 --> 00:06:15.110\ndeleting a snapshot is not a fast process.\n\n127\n00:06:15.110 --> 00:06:19.510\nAnd while it's deleting we're\ngenerating a ton of disk I/O, right?\n\n128\n00:06:19.510 --> 00:06:21.000\nSo this is a database server,\n\n129\n00:06:21.000 --> 00:06:24.840\nan email server, your disperformance is\nreally gonna suffer while this happens.\n\n130\n00:06:24.840 --> 00:06:29.050\nAnd that, again, is why I say,\nsnapshots should be a temporary thing.\n\n131\n00:06:29.050 --> 00:06:30.090\nIf you keep them around for\n\n132\n00:06:30.090 --> 00:06:33.660\na long period of time, they become\na bit of a nightmare to get rid of.\n\n133\n00:06:33.660 --> 00:06:36.730\nSo we don't want them just hanging about.\n\n134\n00:06:36.730 --> 00:06:39.370\nTake the snapshot, make your change.\n\n135\n00:06:39.370 --> 00:06:43.720\nIf everything went the away it was\nsupposed to, delete the snapshot.\n\n136\n00:06:43.720 --> 00:06:45.870\nDon't keep it laying around.\n\n137\n00:06:45.870 --> 00:06:49.600\nSo that's what's going on with my\nenvironment in the background, is it's\n\n138\n00:06:49.600 --> 00:06:53.160\ntaking a while to remove that snapshot cuz\nit's gotta roll those changes together.\n\n139\n00:06:53.160 --> 00:06:58.489\nBut once the changes are done, I should\nbe able to go back here into the file.\n\n140\n00:06:58.489 --> 00:07:01.159\nAnd refresh this little file list thing,\nand\n\n141\n00:07:01.159 --> 00:07:03.835\nwe should see the original\nsnapshot is gone.\n\n142\n00:07:03.835 --> 00:07:09.998\nThe WIN-CLIENT01-000001.vmdk\nfile is now gone, right?\n\n143\n00:07:09.998 --> 00:07:12.176\nIt was 2.9 gigs, it's now gone,\n\n144\n00:07:12.176 --> 00:07:15.916\nthose changes have been rolled\ninto the next snapshot in line.\n\n145\n00:07:15.916 --> 00:07:17.370\nYou might have several tears of snapshot.\n\n146\n00:07:17.370 --> 00:07:19.420\nIt just goes to wherever\nthe next one in line and\n\n147\n00:07:19.420 --> 00:07:20.590\nthat's where the data goes, right?\n\n148\n00:07:20.590 --> 00:07:22.811\nSo now it's in there and\nwe're in business.\n\n149\n00:07:22.811 --> 00:07:25.226\nSo that's part of the process and\nwe delete them, but\n\n150\n00:07:25.226 --> 00:07:27.978\ndeleting the actual snapshot\nnot a hard thing to do, right?\n\n151\n00:07:27.978 --> 00:07:30.990\nIt's just generating disc I/O and\ntaking time.\n\n152\n00:07:32.190 --> 00:07:35.060\nAll right, so, we definitely want to\nmake sure we do that, that we delete\n\n153\n00:07:35.060 --> 00:07:39.700\nthose snapshots when we don't need\nthem anymore and continue from there.\n\n154\n00:07:39.700 --> 00:07:42.181\nThe other thing, though,\nis sometimes that can fail.\n\n155\n00:07:42.181 --> 00:07:44.985\nIt goes to consolidate the data,\nwhat it's doing when you delete it and\n\n156\n00:07:44.985 --> 00:07:47.429\nit moves that data over it's\ncalled consolidating, right?\n\n157\n00:07:47.429 --> 00:07:51.460\nSo it's going to consolidate that data\nin and get it put in to the other disc.\n\n158\n00:07:51.460 --> 00:07:53.970\nAnd sometimes that can fail,\nit should be automatic.\n\n159\n00:07:53.970 --> 00:07:56.417\nFor me, it was completely automatic,\nI didn't have to do anything.\n\n160\n00:07:56.417 --> 00:07:58.950\nI deleted the snapshot,\nit rolled it in for me, all right?\n\n161\n00:07:58.950 --> 00:08:03.358\nIf you ever get a failure though,\nthen sometimes it'll just stop and\n\n162\n00:08:03.358 --> 00:08:06.210\nyou can repeat the process on your own.\n\n163\n00:08:06.210 --> 00:08:07.310\nOther times you need to wait for\n\n164\n00:08:07.310 --> 00:08:10.860\nwhen the disc I/O is a little\nbit less through the roof.\n\n165\n00:08:10.860 --> 00:08:14.200\nAnd then you can generate maybe it's\ntoo much contention with other VMs.\n\n166\n00:08:14.200 --> 00:08:19.030\nSo what'll happen is if\nthe system is to busy VMware and\n\n167\n00:08:19.030 --> 00:08:21.460\nvSphere might say you know what\nwe're gonna delete the snapshot.\n\n168\n00:08:21.460 --> 00:08:24.930\nWe'll mark it as deleted but\nwe'll consolidate the stories later and\n\n169\n00:08:24.930 --> 00:08:26.200\nit just sits around.\n\n170\n00:08:26.200 --> 00:08:28.620\nAnd if that happens,\nyou can force it to consolidate.\n\n171\n00:08:28.620 --> 00:08:33.790\nAnd you do that by right\nclicking on the virtual machine,\n\n172\n00:08:33.790 --> 00:08:35.300\nnot the host like I'm doing here.\n\n173\n00:08:35.300 --> 00:08:38.770\nLet me get back to the virtual machine and\nyou'll right click on the virtual machine,\n\n174\n00:08:38.770 --> 00:08:40.330\nyou'll go to snapshots.\n\n175\n00:08:40.330 --> 00:08:44.000\nAnd if there's unconsolidated changes,\nthis link will light up.\n\n176\n00:08:44.000 --> 00:08:46.560\nMine's grayed out because it\nconsolidated just fine, but\n\n177\n00:08:46.560 --> 00:08:49.820\nif it decided to wait,\nthen you could hit consolidate and\n\n178\n00:08:49.820 --> 00:08:53.670\nforce it to happen right now or force it\nto retry if it failed to do it before.\n\n179\n00:08:53.670 --> 00:08:56.700\nSo you've got that option,\nthat's what consolidating the snapshot is.\n\n180\n00:08:56.700 --> 00:08:59.470\nSo pretty easy to trigger that and\nget that put in place.\n\n181\n00:08:59.470 --> 00:09:02.610\nSo it's just manually\ntreating consolidation.\n\n182\n00:09:02.610 --> 00:09:04.580\nFor me whenever I delete a snapshot,\n\n183\n00:09:04.580 --> 00:09:07.665\nI always monitor to make sure that\nthey data actually goes away.\n\n184\n00:09:07.665 --> 00:09:10.375\nIf it doesn't now we know to go and\nconsolidate.\n\n185\n00:09:10.375 --> 00:09:11.815\nBut, it should automatically go away so\n\n186\n00:09:11.815 --> 00:09:13.985\nwe shouldn't have to really\nmess with it at all.\n\n187\n00:09:13.985 --> 00:09:15.355\nAnd as we go through and\n\n188\n00:09:15.355 --> 00:09:19.145\nstart deleting our snapshots it's\ngonna continue that consolidation.\n\n189\n00:09:19.145 --> 00:09:24.432\nSo, when I manage my snapshots here,\nI'm done with just\n\n190\n00:09:24.432 --> 00:09:29.572\none snapshots I've got my base disk and\nthe one snapshot and you are here, right?\n\n191\n00:09:29.572 --> 00:09:31.862\nSo where I'm I currently?\n\n192\n00:09:31.862 --> 00:09:36.070\nSo, if I delete this snapshot,\nall that's left is the base disc and\n\n193\n00:09:36.070 --> 00:09:38.710\nyou are here, and that means my\nchanges are now part of the base disc.\n\n194\n00:09:38.710 --> 00:09:40.980\nThis base disc isn't actually a snapshot.\n\n195\n00:09:40.980 --> 00:09:43.480\nSee how I don't have a clock on it.\n\n196\n00:09:43.480 --> 00:09:45.610\nSo, if I were to roll back to that,\n\n197\n00:09:45.610 --> 00:09:48.060\nif I were trying to revert to it,\nit's not truly a snapshot.\n\n198\n00:09:48.060 --> 00:09:51.020\nIt's just the original VM decay\nthat's sitting there read only.\n\n199\n00:09:51.020 --> 00:09:53.140\nAnd so, I can bump back to it and\n\n200\n00:09:53.140 --> 00:09:56.490\nif I eliminate all of my snapshots\nthen it's no longer read-only.\n\n201\n00:09:56.490 --> 00:09:59.241\nNow it becomes read and write and\nmy changes apply to it.\n\n202\n00:09:59.241 --> 00:10:03.598\nIf I were to delete this guy\nafter installing Notepad++.\n\n203\n00:10:03.598 --> 00:10:07.268\nThere's no other snapshot for\nthese changes to get rolled into so\n\n204\n00:10:07.268 --> 00:10:10.482\nthe changes would get rolled\ninto the base disc,right?\n\n205\n00:10:10.482 --> 00:10:16.847\nSo if I take after installing\nNotepad++ and I'll choose revert to.\n\n206\n00:10:16.847 --> 00:10:21.592\nAnd when we revert to this one, it's gonna\nroll, well shoot I didn't mean to revert,\n\n207\n00:10:21.592 --> 00:10:23.280\nI mean to delete it.\n\n208\n00:10:23.280 --> 00:10:24.620\nI'm reverting,\nI haven't made any changes so\n\n209\n00:10:24.620 --> 00:10:26.260\nit's just gonna revert me\nback to right where I am.\n\n210\n00:10:26.260 --> 00:10:27.550\nSorry, I meant to delete it.\n\n211\n00:10:27.550 --> 00:10:30.382\nIf I choose it and\nthen I hit delete, there we go,\n\n212\n00:10:30.382 --> 00:10:32.257\nI'm at this You are here point.\n\n213\n00:10:32.257 --> 00:10:34.235\nI'm gonna stay at the you are here point,\nright?\n\n214\n00:10:34.235 --> 00:10:36.150\nCuz that's where I am,\nI'm up and I'm running.\n\n215\n00:10:36.150 --> 00:10:39.920\nBut the changes that are part of\nthat VMDK are now getting written\n\n216\n00:10:39.920 --> 00:10:43.630\nto the base disc so\nthat now it's all a part of the VM.\n\n217\n00:10:43.630 --> 00:10:44.810\nThe snapshots are gone.\n\n218\n00:10:44.810 --> 00:10:48.900\nIf my base disc was thick provisioned, now\nmy changes are in the thick provisioned\n\n219\n00:10:48.900 --> 00:10:51.960\ndisc back to my normal\nperformance profile.\n\n220\n00:10:51.960 --> 00:10:53.633\nSo this is the way that\nwe would go about it.\n\n221\n00:10:53.633 --> 00:10:57.217\nI'm about to make a change, you take\na snapshot, you make your changes.\n\n222\n00:10:57.217 --> 00:10:59.832\nIf everything is good you delete\nyour snapshot now your back to\n\n223\n00:10:59.832 --> 00:11:03.790\njust having a base disk like normal, and\nsee how my revert to button is grayed out?\n\n224\n00:11:03.790 --> 00:11:08.350\nI can't revert to the base disk,\nmy changes are now in the base disk, and\n\n225\n00:11:08.350 --> 00:11:10.180\nthat's where we are we're up and\nwe're running.\n\n226\n00:11:10.180 --> 00:11:11.390\nAnd that's it, all right?\n\n227\n00:11:11.390 --> 00:11:17.847\nSo if I go back to my data store and\ncome in here and take a look at it.\n\n228\n00:11:17.847 --> 00:11:20.020\nI'll have to refresh my file list.\n\n229\n00:11:20.020 --> 00:11:21.490\nBut my snapshot file should be gone,\n\n230\n00:11:21.490 --> 00:11:25.310\nthe backed up configuration\nshould be gone and they are.\n\n231\n00:11:25.310 --> 00:11:29.403\nSometimes if you come in here too fast,\nthe files will still be there, but\n\n232\n00:11:29.403 --> 00:11:32.456\nI can see that I'm now back\nto just having my base disk.\n\n233\n00:11:32.456 --> 00:11:37.416\nOne thing I didn't show you guys about\nthis is I mentioned how the snapshot,\n\n234\n00:11:37.416 --> 00:11:40.310\nit doesn't include just the disc, right?\n\n235\n00:11:40.310 --> 00:11:43.840\nIt includes the configurations, and\nI had modified my configuration, but\n\n236\n00:11:43.840 --> 00:11:45.240\nnever went back and verified it.\n\n237\n00:11:45.240 --> 00:11:47.700\nSo let's take a look at that, right?\n\n238\n00:11:47.700 --> 00:11:51.850\nIf I take this Windows 7\nmachine as it is now, its got,\n\n239\n00:11:51.850 --> 00:11:57.110\nlet's go into my Task Manager and\nsee how much memory I have in this thing.\n\n240\n00:11:57.110 --> 00:12:01.440\nSo, actually it would be easier to\npull it up in my system properties\n\n241\n00:12:02.960 --> 00:12:04.910\nand remember,\nI haven't used Windows 7 in a while.\n\n242\n00:12:04.910 --> 00:12:07.982\nSo, this machine has 1.5\ngigs of RAM right now, okay?\n\n243\n00:12:07.982 --> 00:12:10.740\nAnd I'm gonna change this wallpaper.\n\n244\n00:12:12.460 --> 00:12:15.838\nAnd we'll make it well actually,\nbefore I change the wallpaper.\n\n245\n00:12:15.838 --> 00:12:17.232\nLet me take a snapshot of this.\n\n246\n00:12:17.232 --> 00:12:20.162\nSo, I have 1.5 gigs as the machine\nis configured right now, so\n\n247\n00:12:20.162 --> 00:12:22.150\nI'm gonna come in here and\ntake a snapshot.\n\n248\n00:12:23.510 --> 00:12:26.018\nJump up here to snapshots and\ntake a snapshot.\n\n249\n00:12:26.018 --> 00:12:30.539\nAnd I'll call this base configuration or\nsomething like that, all right?\n\n250\n00:12:30.539 --> 00:12:32.880\nSo this is how I normally\nhave it configured.\n\n251\n00:12:32.880 --> 00:12:35.700\nI'm gonna go ahead and snapshot it, okay.\n\n252\n00:12:35.700 --> 00:12:37.880\nNow it's taking a snapshot\nof the background.\n\n253\n00:12:37.880 --> 00:12:39.697\nI don't actually have to wait for\nit to complete.\n\n254\n00:12:39.697 --> 00:12:43.900\nI can go and work with the machine even\nthough it's taking the snapshot right now\n\n255\n00:12:43.900 --> 00:12:46.618\nbecause it's doing all of\nits work on the back end.\n\n256\n00:12:46.618 --> 00:12:48.970\nIt's just gonna be really\nslow while I work with it and\n\n257\n00:12:48.970 --> 00:12:51.820\nso what happens is well two things.\n\n258\n00:12:51.820 --> 00:12:55.440\nFirst off, marking the hard drive as\nread only, that's very very fast, and so\n\n259\n00:12:55.440 --> 00:12:56.330\nit does that.\n\n260\n00:12:56.330 --> 00:12:58.670\nBut capturing the memory\nis the hard part and so,\n\n261\n00:12:58.670 --> 00:13:00.490\nthis machine is actually frozen for\nme right now.\n\n262\n00:13:00.490 --> 00:13:03.300\nIf I try and click,\nsee I'm not able to do anything.\n\n263\n00:13:03.300 --> 00:13:06.110\nAnd the reason is that it's got to\nfreeze the memory for a second so\n\n264\n00:13:06.110 --> 00:13:08.940\nit can grab a copy of it,\nand the unfreeze it.\n\n265\n00:13:08.940 --> 00:13:12.010\nIn a production system,\nit normally happen very quickly but\n\n266\n00:13:12.010 --> 00:13:16.120\nhere in my lab I'm kinda taxing\nthe system and so it was frozen.\n\n267\n00:13:16.120 --> 00:13:18.300\nWell, did you see what just happened?\n\n268\n00:13:18.300 --> 00:13:22.630\nEverything that I did, every click\nthat I tried to do, it saved them and\n\n269\n00:13:22.630 --> 00:13:23.850\nnow it's performing them.\n\n270\n00:13:23.850 --> 00:13:27.160\nSo I'm actually able to use\nthe machine even while it's frozen.\n\n271\n00:13:27.160 --> 00:13:29.581\nIt just stutters and then it catches up.\n\n272\n00:13:29.581 --> 00:13:32.069\nSo you lose no data when\nyou take a snapshot but\n\n273\n00:13:32.069 --> 00:13:34.243\nyou can create a micro outage, right?\n\n274\n00:13:34.243 --> 00:13:37.708\nIf this was a production database\nserver with 30 gigs of RAM and it took\n\n275\n00:13:37.708 --> 00:13:42.100\ntwo minutes to grab the memory, that's two\nminutes the system was basically frozen.\n\n276\n00:13:42.100 --> 00:13:43.670\nAnd my end users would see that so\n\n277\n00:13:43.670 --> 00:13:46.160\nit's not something we just\nwanna go willy-nilly about.\n\n278\n00:13:46.160 --> 00:13:49.550\nIf you choose not to capture the memory\nthough, then it's really fast and\n\n279\n00:13:49.550 --> 00:13:51.440\nwe had that option we could\nchoose not to capture the memory.\n\n280\n00:13:52.640 --> 00:13:54.930\nAll right, so what I'm gonna use\nI'm wanna take this desktop and\n\n281\n00:13:54.930 --> 00:13:59.150\nI'm wanna just put it back to one of the\ncrazy backgrounds that Microsoft loves,\n\n282\n00:13:59.150 --> 00:14:00.490\napparently lighthouse today.\n\n283\n00:14:00.490 --> 00:14:03.910\nSo I'm gonna change that background and\nthen I'm wanna shut it down and\n\n284\n00:14:03.910 --> 00:14:06.314\nI'm wanna bump it's memory up to 2 gigs,\nokay?\n\n285\n00:14:06.314 --> 00:14:10.488\nSo I only had a gig and a half a moment\nago, I'm gonna bump this up to two gigs of\n\n286\n00:14:10.488 --> 00:14:13.571\nRAM again and\nthen fire the machine back up, all right?\n\n287\n00:14:13.571 --> 00:14:18.101\nSo that one's gonna shut down, and\nnow that it's shut down I can go in and\n\n288\n00:14:18.101 --> 00:14:22.560\nedit its hardware options and\nwe're gonna take its memory, shoot,\n\n289\n00:14:22.560 --> 00:14:24.220\nit still thinks it's on.\n\n290\n00:14:24.220 --> 00:14:25.240\nLet me refresh.\n\n291\n00:14:26.740 --> 00:14:29.560\nI'm doing things in two different windows\nso it takes a moment to recognize that.\n\n292\n00:14:29.560 --> 00:14:31.480\nThat's one of the negatives\nof the web client.\n\n293\n00:14:31.480 --> 00:14:35.830\nSo I'm gonna edit this and I'm just gonna\nbump it back up to two gigs of RAM.\n\n294\n00:14:35.830 --> 00:14:39.109\nSo I'm just kinda cranking\nthat number back up and\n\n295\n00:14:39.109 --> 00:14:42.166\nthen I'll power that machine on,\nall right.\n\n296\n00:14:42.166 --> 00:14:45.571\nSo now it says that it's got\n2 gigs of RAM, just wait for\n\n297\n00:14:45.571 --> 00:14:49.277\nthat task to finish, and\nthen we'll boot that one up again.\n\n298\n00:14:49.277 --> 00:14:52.890\nAll right, so there it goes, and\nwe should see it booting, there it goes.\n\n299\n00:14:52.890 --> 00:14:57.660\nAll right, now, when the machine comes up,\nI'd modify the wallpaper, that was fun.\n\n300\n00:14:57.660 --> 00:15:01.861\nAnd I bumped up the memory, well,\nthe wall paper, that's a part of the VMDK,\n\n301\n00:15:01.861 --> 00:15:03.787\nthat's a part of the disc, right?\n\n302\n00:15:03.787 --> 00:15:07.120\nIt gets written to the registry, the\nregistry gets written to the hard drive.\n\n303\n00:15:07.120 --> 00:15:11.167\nBut the memory size, the memorize size\nis stored in the VMX file, right?\n\n304\n00:15:11.167 --> 00:15:14.830\nThat VMX file that defines our\nconfiguration, the number of CPUs,\n\n305\n00:15:14.830 --> 00:15:18.105\nthe hard disks we have,\nthe one ISOs mounted in the CD drive,\n\n306\n00:15:18.105 --> 00:15:19.852\nwhat network adapters we have.\n\n307\n00:15:19.852 --> 00:15:23.760\nAll that is in the VMX file, well,\nthat's part of the snapshot.\n\n308\n00:15:23.760 --> 00:15:26.670\nSo when this machine boots up, here we go,\n\n309\n00:15:26.670 --> 00:15:30.520\nI'll see that it has 2 gigs of RAM\nbecause the VMDK told me it would, right?\n\n310\n00:15:30.520 --> 00:15:34.420\nBecause the VMX file had that setting and\nso if I pull up the Properties from\n\n311\n00:15:34.420 --> 00:15:41.350\nMy Computer, I pulled that up and\nwe'll see there's 2 gigs of RAM, okay?\n\n312\n00:15:41.350 --> 00:15:45.802\nBut if I revert back to that last\nsnapshot, so I'm gonna go to Snapshots and\n\n313\n00:15:45.802 --> 00:15:47.509\nRevert to Latest Snapshot.\n\n314\n00:15:47.509 --> 00:15:51.468\nWhen I revert back it's\ngonna roll me back and\n\n315\n00:15:51.468 --> 00:15:56.049\nmy wallpaper's back to the way it was and\nmy memory,\n\n316\n00:15:56.049 --> 00:15:59.710\nwell, memory's still being copied in.\n\n317\n00:15:59.710 --> 00:16:02.315\n[SOUND] There we go,\nthat was pretty quick.\n\n318\n00:16:02.315 --> 00:16:04.540\nMy memory's back to a gig and a half.\n\n319\n00:16:04.540 --> 00:16:07.664\nThe VMX is restored and\nit put the hardware configuration, so\n\n320\n00:16:07.664 --> 00:16:09.900\nI could have modified my network adapters.\n\n321\n00:16:09.900 --> 00:16:11.390\nI could have added extra hard drives.\n\n322\n00:16:11.390 --> 00:16:13.700\nI could have done all\nsorts of crazy things and\n\n323\n00:16:13.700 --> 00:16:15.640\nit puts them all back\nto the way they were.\n\n324\n00:16:15.640 --> 00:16:19.460\nAnd so, just a great system to have and\nyou see how fast that was.\n\n325\n00:16:19.460 --> 00:16:24.368\nI had a machine that was on and\nI restored a snapshot that was on, and\n\n326\n00:16:24.368 --> 00:16:26.836\nit put me back very, very quick.\n\n327\n00:16:26.836 --> 00:16:30.123\nSo if i just tested the service pack and\nthings failed,\n\n328\n00:16:30.123 --> 00:16:35.190\nnow i used to dread that it gonna take\nthree hours for me to source from back up.\n\n329\n00:16:35.190 --> 00:16:38.320\nNow, it's more like three seconds and\nyou're back on and you're ready to work.\n\n330\n00:16:40.270 --> 00:16:43.910\nAll right, so\nthat is basically it for Snapshots.\n\n331\n00:16:43.910 --> 00:16:45.906\nI feel like there's something\nelse I wanted to mention but\n\n332\n00:16:45.906 --> 00:16:46.893\nI can't remember off hand.\n\n333\n00:16:46.893 --> 00:16:50.620\nDefinitely don't shy away from Snapshot,\nthey're really, really useful,\n\n334\n00:16:50.620 --> 00:16:54.530\nthey're a great safety net, just don't\nkeep them around a long time, all right.\n\n335\n00:16:54.530 --> 00:16:57.770\nDo your testing, make sure everything\nwent fine, and then delete the Snapshots.\n\n336\n00:16:57.770 --> 00:17:00.530\nDon't leave them laying around\nbecause they do hurt performance.\n\n337\n00:17:00.530 --> 00:17:02.900\nIn a lab environment though, go crazy.\n\n338\n00:17:02.900 --> 00:17:04.190\nCreate all the snapshots you want,\n\n339\n00:17:04.190 --> 00:17:06.160\ncuz you've probably been\nprovisioning your disks anyway.\n\n340\n00:17:06.160 --> 00:17:07.876\nAnd if you're thin\nprovisioning your disks,\n\n341\n00:17:07.876 --> 00:17:09.768\nit's about the same\nperformance with snapshots.\n\n342\n00:17:09.768 --> 00:17:13.233\nBut if you're thick provisioning,\nsnapshots really ruin that for you and\n\n343\n00:17:13.233 --> 00:17:16.250\nyou lose the advantage of\nthick provisioning your disks.\n\n344\n00:17:16.250 --> 00:17:19.367\n>> Don, we appreciate you taking the time\nto show us about the Snapshots and\n\n345\n00:17:19.367 --> 00:17:22.245\nall the alternate endings and\ntheories that we can have out there.\n\n346\n00:17:22.245 --> 00:17:24.699\nNow, I know you are wrapping this\none up here, but before we do,\n\n347\n00:17:24.699 --> 00:17:27.790\ndo you have any final words or anything\nyou might tell somebody that if they're in\n\n348\n00:17:27.790 --> 00:17:30.037\na production environment and\nthinking about Snapshots?\n\n349\n00:17:30.037 --> 00:17:31.521\nAny price you give them?\n\n350\n00:17:31.521 --> 00:17:35.999\n>> Sure, it's not gonna be on the exam but\nin real life, in the exam of life,\n\n351\n00:17:35.999 --> 00:17:40.503\nalways remember that Snapshots are not\na substitute for backups, okay?\n\n352\n00:17:40.503 --> 00:17:42.450\nWhere's the Snapshot stored?\n\n353\n00:17:42.450 --> 00:17:47.101\nIt's stored in the same data store\nas the VMDK, as the main disk,\n\n354\n00:17:47.101 --> 00:17:50.241\nbecause a snapshot by\nitself is not useful.\n\n355\n00:17:50.241 --> 00:17:53.960\nLike, if I pull my, where's my diagram,\nI pull my diagram back up.\n\n356\n00:17:53.960 --> 00:17:58.800\nIf I just have this snapshot for\n8 AM, I'm missing data.\n\n357\n00:17:58.800 --> 00:18:00.940\nData that's in the base disk, right?\n\n358\n00:18:00.940 --> 00:18:04.530\nSo I have to have the base disk for\nthe snapshot to be useful.\n\n359\n00:18:04.530 --> 00:18:08.770\nSo, Snapshots are stored on the same\ndisk because that's the only way they're\n\n360\n00:18:08.770 --> 00:18:09.285\nuseful.\n\n361\n00:18:09.285 --> 00:18:13.720\nIf they were stored separately and I lose\nthe base disk This snapshot is pointless.\n\n362\n00:18:13.720 --> 00:18:18.000\nSo a snapshot will not protect\nyou from hardware failures,\n\n363\n00:18:18.000 --> 00:18:21.330\nit will not protect you from server\nfailures or data store failures.\n\n364\n00:18:21.330 --> 00:18:25.230\nIt will only protect you from software\nfailures, mistakes you make inside of\n\n365\n00:18:25.230 --> 00:18:28.357\nthe virtual machine,\nyou can roll those right back, right.\n\n366\n00:18:28.357 --> 00:18:33.322\nIt does not protect you from hardware\nin anyway, so you absolutely have to\n\n367\n00:18:33.322 --> 00:18:37.984\nhave an actual backup solution in\nplace to supplement this, right?\n\n368\n00:18:37.984 --> 00:18:41.310\nSnapshots are a supplement,\nnot a replacement for backups.\n\n369\n00:18:41.310 --> 00:18:45.470\nAnd we're gonna see in some of\nthe upcoming episodes the VMware data\n\n370\n00:18:45.470 --> 00:18:50.340\nprotection, VDP,\nwe're also gonna see VSphere replication.\n\n371\n00:18:50.340 --> 00:18:53.530\nAnd those are technologies that\nwill protect us from hardware.\n\n372\n00:18:53.530 --> 00:18:57.460\nSo you don't just use Snapshot, you use\nSnapshots in coordination with some of\n\n373\n00:18:57.460 --> 00:19:00.200\nthe other backup products,\nthen you're taken care of.\n\n374\n00:19:00.200 --> 00:19:02.786\n>> Well, Don as always,\nwe do appreciate you being here, and\n\n375\n00:19:02.786 --> 00:19:05.841\nwe appreciate you the viewer,\nhopefully when it comes to Snapshots,\n\n376\n00:19:05.841 --> 00:19:07.374\nyou'll be prepared for the exam.\n\n377\n00:19:07.374 --> 00:19:08.524\n>> [LAUGH]\n>> Signing out for ITProTV,\n\n378\n00:19:08.524 --> 00:19:09.900\nI've been your host Wes Bryan.\n\n379\n00:19:09.900 --> 00:19:10.590\n>> And I'm Don Pezet.\n\n380\n00:19:10.590 --> 00:19:12.840\n>> And we'll see you next time.\n\n381\n00:19:12.840 --> 00:19:18.232\n[SOUND]\n\n",
          "vimeoId": "172402753"
        },
        {
          "description": "In this episode, Wes and Dan discuss how to keep the vSphere environment up and running through VMWare Data Protection (VDP). They look at various topics like sizing, image-level and guest-level backups.",
          "length": "2377",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-2-vmware_data_protection-062416-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-2-vmware_data_protection-062416-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-2-vmware_data_protection-062416-1-sm.jpg",
          "title": "VMware Data Protection",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.354 --> 00:00:14.660\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.660 --> 00:00:15.908\nI'm your host Wes Bryan,\n\n4\n00:00:15.908 --> 00:00:19.420\nand in today's episode we're coming\nback at you with more VMware.\n\n5\n00:00:19.420 --> 00:00:22.734\nThat's right,\nVMware certified professional version six.\n\n6\n00:00:22.734 --> 00:00:24.980\nIn a previous episode,\nwe were talking about snapshots, and\n\n7\n00:00:24.980 --> 00:00:28.460\none of the last things that Don mentioned\nis it's not a viable solution to protect\n\n8\n00:00:28.460 --> 00:00:29.710\nyour information.\n\n9\n00:00:29.710 --> 00:00:32.530\nContinuing that theory,\nwe're talking about data protection today.\n\n10\n00:00:32.530 --> 00:00:34.950\nJoining me in the studio is as\nnone other than Don himself.\n\n11\n00:00:34.950 --> 00:00:36.040\nDon, how you doing, sir?\n\n12\n00:00:36.040 --> 00:00:37.580\n>> I'm doing great, Wes,\nthanks for having me back.\n\n13\n00:00:37.580 --> 00:00:40.080\nAnd yeah, diving right back into\nthe world of data protection.\n\n14\n00:00:40.080 --> 00:00:44.730\nNow I did say the snapshots are not\na replacement for a backup solution.\n\n15\n00:00:44.730 --> 00:00:48.660\nSo we've gotta have something in place\nto backup our virtual machines and\n\n16\n00:00:48.660 --> 00:00:49.800\na lot of you probably already do.\n\n17\n00:00:49.800 --> 00:00:55.300\nYou've probably got something like\nArcserve or Symantec Backup Exec, Convolt.\n\n18\n00:00:55.300 --> 00:00:59.690\nI mean the list goes on and on of products\nthat are out there, Acronis True Image,\n\n19\n00:00:59.690 --> 00:01:02.570\nwhatever, that you're using\nto back up your machines.\n\n20\n00:01:02.570 --> 00:01:07.290\nMaybe you just use Windows Backup or,\nwhat's the other one?\n\n21\n00:01:07.290 --> 00:01:09.010\nSystem Center Data Protection Manager.\n\n22\n00:01:09.010 --> 00:01:10.680\nYou got Backula, the open source ones.\n\n23\n00:01:10.680 --> 00:01:12.290\nYou've got all those different ones.\n\n24\n00:01:12.290 --> 00:01:14.140\nThey all work great, and\nthey all work perfectly fine.\n\n25\n00:01:14.140 --> 00:01:16.500\nYou can certainly use them to\nback up your virtual machines.\n\n26\n00:01:16.500 --> 00:01:17.760\nThey do a wonderful job.\n\n27\n00:01:17.760 --> 00:01:21.390\nAll right, but\nVMware also happens to have a product too.\n\n28\n00:01:21.390 --> 00:01:26.499\n[LAUGH] And so If you don't have a backup\nsolution in place, and you're looking for\n\n29\n00:01:26.499 --> 00:01:32.640\none that's out there, VMware has what is\ncalled the VMware Data Protection, so VDP.\n\n30\n00:01:32.640 --> 00:01:37.490\nAnd VDP, it's a product that VMware\ndidn't actually make, EMC made it.\n\n31\n00:01:37.490 --> 00:01:40.590\nSo they kind of partnered with\nEMC to create this product.\n\n32\n00:01:40.590 --> 00:01:43.960\nSo the big advantage of it is\nnot that it's written by VMware.\n\n33\n00:01:43.960 --> 00:01:47.940\nBut the big advantage is that\nit is integrated into vSphere,\n\n34\n00:01:47.940 --> 00:01:51.930\nthat if we choose to deploy\nVDP It integrates into vSphere.\n\n35\n00:01:51.930 --> 00:01:54.740\nAnd we have one place to go to be able\nto manage this and get it set up.\n\n36\n00:01:54.740 --> 00:01:56.850\nSo, it's a neat solution to have.\n\n37\n00:01:56.850 --> 00:01:58.270\nYou can quickly get it deployed, and\n\n38\n00:01:58.270 --> 00:02:00.260\nyou start backing up your\nvirtual machines using it.\n\n39\n00:02:00.260 --> 00:02:03.400\nSo, that's what we're gonna take\na look at right here in this episode.\n\n40\n00:02:03.400 --> 00:02:06.370\n>> So, Don, when we think about\nVDP like you're talking about,\n\n41\n00:02:06.370 --> 00:02:09.030\nis there a place that we can\ngo if we need information,\n\n42\n00:02:09.030 --> 00:02:11.450\nif we were gonna implement\nthis in our infrastructure?\n\n43\n00:02:11.450 --> 00:02:14.010\nDo we have something\nthat we can reference?\n\n44\n00:02:14.010 --> 00:02:16.970\n>> Yeah, I'll put the links\nin the show notes but VMware,\n\n45\n00:02:16.970 --> 00:02:19.600\nthey've got several product pages and\nstuff that describe it.\n\n46\n00:02:19.600 --> 00:02:21.470\nThey're kinda light on the details though.\n\n47\n00:02:21.470 --> 00:02:24.410\nFortunately it's really easy to\nget a demo copy from them, and\n\n48\n00:02:24.410 --> 00:02:26.600\nyou can throw it in and\nexperiment around with it.\n\n49\n00:02:26.600 --> 00:02:32.660\nWhen we deploy VDP, it's super easy\nbecause they give us an OVF template,\n\n50\n00:02:32.660 --> 00:02:35.320\nright, just a virtual machine appliance.\n\n51\n00:02:35.320 --> 00:02:36.910\nAnd so you just download it and\nimport it right in.\n\n52\n00:02:36.910 --> 00:02:39.140\nIt's a virtual machine,\nand it's already set up.\n\n53\n00:02:39.140 --> 00:02:42.070\nIt runs, I believe it's SUSE Linux, and\n\n54\n00:02:42.070 --> 00:02:46.110\nit just fires up, and\nit does its job, and you can use it.\n\n55\n00:02:46.110 --> 00:02:49.790\nYou can have it up and running in a matter\nof moments, even in a demo type period.\n\n56\n00:02:49.790 --> 00:02:52.320\nSo, really easy to try it out and\nget it configured.\n\n57\n00:02:52.320 --> 00:02:55.040\nNow, couple of little requirements\nthat we need to be aware of,\n\n58\n00:02:55.040 --> 00:02:55.990\nif we're gonna deploy this.\n\n59\n00:02:55.990 --> 00:02:56.850\nIt is a virtual machine.\n\n60\n00:02:56.850 --> 00:02:58.680\nIt does need its own resources.\n\n61\n00:02:58.680 --> 00:03:02.350\nSo, it has certain limitations and\nrestrictions.\n\n62\n00:03:02.350 --> 00:03:07.070\nBut basically when we deploy it,\nit needs a minimum of two CPUs, and\n\n63\n00:03:07.070 --> 00:03:09.090\na minimum of four gigs of RAM.\n\n64\n00:03:09.090 --> 00:03:10.670\nOkay, so you gotta have that available.\n\n65\n00:03:10.670 --> 00:03:12.918\nNow when I say minimum,\nI really mean minimum.\n\n66\n00:03:12.918 --> 00:03:15.832\nIf you're gonna be backing up a large\nquantity of virtual machines with this\n\n67\n00:03:15.832 --> 00:03:17.617\nthing, you're probably going to want more.\n\n68\n00:03:17.617 --> 00:03:20.243\nAnd VMware recommends four CPUs.\n\n69\n00:03:20.243 --> 00:03:23.260\nThat's kind of one of\ntheir things they hit on.\n\n70\n00:03:23.260 --> 00:03:27.380\nAnd on the memory, they don't necessarily\nhave a recommendation on that.\n\n71\n00:03:27.380 --> 00:03:28.955\nIt's basically the more VMs you back up,\n\n72\n00:03:28.955 --> 00:03:31.445\nthe more memory you're\ngonna need to add to it.\n\n73\n00:03:31.445 --> 00:03:36.055\nAlso keep in mind that you might\nneed more than one VDP server,\n\n74\n00:03:36.055 --> 00:03:38.460\nthat a single VDP server can only do so\nmuch, right?\n\n75\n00:03:38.460 --> 00:03:39.985\nCuz it's got to reach out\nto the virtual machine.\n\n76\n00:03:39.985 --> 00:03:41.355\nIt's gotta back up their data.\n\n77\n00:03:41.355 --> 00:03:42.875\nIt's gotta store it in a data store.\n\n78\n00:03:42.875 --> 00:03:44.535\nSo it's doing a lot of work.\n\n79\n00:03:44.535 --> 00:03:48.760\nAnd so VMware recommends that you try and\nput a limit in place of 400 VMs.\n\n80\n00:03:48.760 --> 00:03:54.570\nSo we don't wanna back up more\nthan 400 VMs with one VDP server.\n\n81\n00:03:54.570 --> 00:04:00.540\nIf I have more than 400 VMs, I'm having\na hard time with my numbers today.\n\n82\n00:04:00.540 --> 00:04:05.250\nIf we have more than 400 VMs, then we need\nmore than one VDP server to cover that.\n\n83\n00:04:05.250 --> 00:04:07.040\n>> And Don,\nwhen it comes to backing up data,\n\n84\n00:04:07.040 --> 00:04:09.090\nthat's gonna take storage\nI can only assume.\n\n85\n00:04:09.090 --> 00:04:12.190\nSo I'm sure there's probably\na recommendation on storage there\n\n86\n00:04:12.190 --> 00:04:13.340\nas well, right?\n\n87\n00:04:13.340 --> 00:04:17.940\n>> Yeah, your storage, it needs to be\nequal to what you're gonna be backing up.\n\n88\n00:04:17.940 --> 00:04:20.400\nNo exactly equal,\ncuz it does some neat stuff.\n\n89\n00:04:20.400 --> 00:04:23.765\nWhen we do a backup,\nit doesn't just take the VMDK.\n\n90\n00:04:23.765 --> 00:04:26.080\nIt doesn't take the virtual disk and\njust copy it and that's it, right?\n\n91\n00:04:26.080 --> 00:04:29.470\nSo I might have a 50 GB virtual disk, and\n\n92\n00:04:29.470 --> 00:04:31.730\nwhen I back it up,\nit may actually end up being much,\n\n93\n00:04:31.730 --> 00:04:36.960\nmuch smaller because it does compression\nand it does data deduplication.\n\n94\n00:04:36.960 --> 00:04:38.170\nNow what does that mean?\n\n95\n00:04:38.170 --> 00:04:41.700\nWell, let's say that I've got ten\n\n96\n00:04:41.700 --> 00:04:45.060\nweb servers that are all running Cinta 7,\nright?\n\n97\n00:04:45.060 --> 00:04:46.680\nAnd so,\nI've got all these Linux servers fired up.\n\n98\n00:04:46.680 --> 00:04:47.620\nThey're all running Cinta 7.\n\n99\n00:04:47.620 --> 00:04:48.990\nThey've all got Apache on them.\n\n100\n00:04:48.990 --> 00:04:51.300\nAnd they've got a copy of my web page.\n\n101\n00:04:51.300 --> 00:04:53.529\nWhat's really different\nbetween those servers?\n\n102\n00:04:54.660 --> 00:04:56.580\nWell, not usually a whole lot.\n\n103\n00:04:56.580 --> 00:04:59.650\nThe hostname might be different,\nthe IP address might be different.\n\n104\n00:04:59.650 --> 00:05:02.900\nBut they've got the same operating system,\nthey've got the same software load,\n\n105\n00:05:02.900 --> 00:05:04.590\nthey've got the same webpages.\n\n106\n00:05:04.590 --> 00:05:07.400\nThe majority of the data on\ntheir disks is identical.\n\n107\n00:05:07.400 --> 00:05:10.960\nAnd so when VDP backs them up,\nit says wait a minute,\n\n108\n00:05:10.960 --> 00:05:13.520\nthis is the same file on\nthese ten different servers?\n\n109\n00:05:13.520 --> 00:05:14.591\nI'm gonna just store it once.\n\n110\n00:05:14.591 --> 00:05:16.820\nThere's no sense in\nstoring it a second time.\n\n111\n00:05:16.820 --> 00:05:18.080\nIt's the same file.\n\n112\n00:05:18.080 --> 00:05:19.480\nSo it deduplicates.\n\n113\n00:05:19.480 --> 00:05:22.660\nIt'll deduplicate between\nmultiple backups of one VM, and\n\n114\n00:05:22.660 --> 00:05:25.730\nit'll deduplicate across a single\nbackup of many, many different VMs.\n\n115\n00:05:25.730 --> 00:05:29.040\n>> This sounds like similar\ntechnology in certain systems.\n\n116\n00:05:29.040 --> 00:05:31.460\nThey use things like archive\nattributes and archive bits.\n\n117\n00:05:31.460 --> 00:05:34.290\nIf it's present, it means, hey,\nwe don't have a copy of it.\n\n118\n00:05:34.290 --> 00:05:36.780\nIf it's not there, make one.\n\n119\n00:05:36.780 --> 00:05:40.530\n>> Yeah, your first backup is gonna\nbe big, right, cuz it's gotta back up\n\n120\n00:05:40.530 --> 00:05:43.390\nthe whole hard drive, but your second\nbackup is just getting what changed.\n\n121\n00:05:43.390 --> 00:05:43.950\nAnd that's it.\n\n122\n00:05:43.950 --> 00:05:46.590\nSo the backups progressively get smaller.\n\n123\n00:05:46.590 --> 00:05:51.160\nSo if I'm backing up a 50 GB VMDK,\nI might need 50 gigs, or\n\n124\n00:05:51.160 --> 00:05:54.630\neven 100 gigs of space to store it and\nthe changes that happen to it.\n\n125\n00:05:54.630 --> 00:05:58.340\nBut if I'm backing up a lot of virtual\nmachines, you'll find that you need less\n\n126\n00:05:58.340 --> 00:06:02.370\nand less space for each virtual machine\nyou back up, because of the deduplication.\n\n127\n00:06:02.370 --> 00:06:04.140\nAnd on top of that,\nthere's compression, right?\n\n128\n00:06:04.140 --> 00:06:06.710\nSo it applies just regular\nzip type compression.\n\n129\n00:06:06.710 --> 00:06:09.700\nI think it's actually gzip that it\napplies to compress that data and\n\n130\n00:06:09.700 --> 00:06:10.630\nmake it take less space.\n\n131\n00:06:10.630 --> 00:06:13.887\nSo between deduplication and compression,\n\n132\n00:06:13.887 --> 00:06:18.779\nit really doesn't need a ton of space,\nbut there is a maximum to it.\n\n133\n00:06:18.779 --> 00:06:22.728\nVMWare, they recommend that you don't\nhave more than 8 terabytes of backups on\n\n134\n00:06:22.728 --> 00:06:24.994\na single VDP,\nbecause when it deduplicates,\n\n135\n00:06:24.994 --> 00:06:28.093\nit's gotta scan all that data to look for\nduplicates, right?\n\n136\n00:06:28.093 --> 00:06:31.618\nIt's gotta index it to maintain its\nlittle database, and that database starts\n\n137\n00:06:31.618 --> 00:06:34.640\ngetting a little too big when you\ncross that 8 terabyte threshold.\n\n138\n00:06:34.640 --> 00:06:36.770\nSo, when we start sizing this for\n\n139\n00:06:36.770 --> 00:06:41.340\nour environment,\nyou need to think one VDP server for\n\n140\n00:06:41.340 --> 00:06:46.790\nevery 400 virtual machines, and one VDP\nserver for every 8 terabytes of data.\n\n141\n00:06:46.790 --> 00:06:51.456\nIf I've got 16 terabytes and 600 VMs,\nI'm gonna need two VDP servers.\n\n142\n00:06:51.456 --> 00:06:55.940\nBut if I've got 100 VMs and\n5 terabytes of data,\n\n143\n00:06:55.940 --> 00:06:59.280\none VDP server can knock that out no\nproblem, and it'll work out great, right.\n\n144\n00:06:59.280 --> 00:07:02.360\nSo sizing it is not that\nhard of a thing to do.\n\n145\n00:07:02.360 --> 00:07:05.430\n>> Now Don, you've mentioned\nhundreds of VM's, even 400.\n\n146\n00:07:05.430 --> 00:07:07.310\nAnd we've talked in past episodes,\n\n147\n00:07:07.310 --> 00:07:10.560\nyou've told us that it's always\na manual approach to anything.\n\n148\n00:07:10.560 --> 00:07:13.504\nIs this something that we have\nto do manually on 400 VM's?\n\n149\n00:07:13.504 --> 00:07:15.080\nOr can we make it a little bit easier?\n\n150\n00:07:15.080 --> 00:07:17.840\nIs that something that we can automate?\n\n151\n00:07:17.840 --> 00:07:19.240\n>> Yeah, it's super simple.\n\n152\n00:07:19.240 --> 00:07:20.860\nWe're not in the program right now,\n\n153\n00:07:20.860 --> 00:07:25.190\nbut once you get the VDP fired up, it's\nan appliance, so deploying it's a snap.\n\n154\n00:07:25.190 --> 00:07:29.310\nAnd once you deploy it, it integrates\ninto your vSphere environment, right?\n\n155\n00:07:29.310 --> 00:07:33.668\nSo it ties into vSphere, and so it already\nsees all of your virtual machines.\n\n156\n00:07:33.668 --> 00:07:36.960\nBy accessing vCenter, it sees your VMs,\nit sees your data storage,\n\n157\n00:07:36.960 --> 00:07:38.840\nit sees everything that's out there.\n\n158\n00:07:38.840 --> 00:07:41.460\nAnd so,\nwe just have to schedule backup jobs.\n\n159\n00:07:41.460 --> 00:07:44.360\nCheck off some little boxes and\nsay I need to back up these ten VMs and\n\n160\n00:07:44.360 --> 00:07:45.540\ndo it at 2 AM.\n\n161\n00:07:45.540 --> 00:07:47.219\nAnd you check it off and\nyou set it to run.\n\n162\n00:07:47.219 --> 00:07:48.758\nAnd you define a schedule.\n\n163\n00:07:48.758 --> 00:07:50.650\nIt runs the backups every day,\nor every week, or\n\n164\n00:07:50.650 --> 00:07:52.418\nhowever often you want\nthose backups to run.\n\n165\n00:07:52.418 --> 00:07:53.157\nAnd that's it.\n\n166\n00:07:53.157 --> 00:07:54.739\nIt really is super easy to deploy.\n\n167\n00:07:54.739 --> 00:07:57.079\nSo, why don't we see that?\n\n168\n00:07:57.079 --> 00:07:59.690\nWhy don't we see how it\ngoes about deploying it?\n\n169\n00:07:59.690 --> 00:08:01.707\nIf you want to deploy\nVDP in your environment,\n\n170\n00:08:01.707 --> 00:08:04.256\nthe first thing you need to do\nis you need to get it, right.\n\n171\n00:08:04.256 --> 00:08:05.842\nAnd we can get it from VMware.\n\n172\n00:08:05.842 --> 00:08:09.160\nYou can go and purchase it, or\nyou can get a trial and download it.\n\n173\n00:08:09.160 --> 00:08:10.240\nThe appliance is the same.\n\n174\n00:08:10.240 --> 00:08:12.800\nIf you don't put a licence key\nin it though, it does time out.\n\n175\n00:08:12.800 --> 00:08:16.980\nAnd what they're gonna do is they're\ngonna give it to you as an OVA.\n\n176\n00:08:16.980 --> 00:08:19.100\nOkay, I know I said OVF earlier, but\n\n177\n00:08:19.100 --> 00:08:22.930\nwhen you get a template, or an appliance,\nthere's two different formats.\n\n178\n00:08:22.930 --> 00:08:25.090\nSo there's the OVA or the OVF.\n\n179\n00:08:25.090 --> 00:08:27.120\nThe OVF stores the configuration and\n\n180\n00:08:27.120 --> 00:08:29.610\nthe hard drive separate, so\nyou'll have multiple files.\n\n181\n00:08:29.610 --> 00:08:32.160\nThe OVA rolls it all together, all right?\n\n182\n00:08:32.160 --> 00:08:36.170\nOVAs are really useful in VMware\nenvironments, OVFs work a little bit\n\n183\n00:08:36.170 --> 00:08:41.530\nbetter if you're going to VirtualBox or\nHyper-V, or different platforms.\n\n184\n00:08:41.530 --> 00:08:44.640\nSo sometimes they're distributed two\ndifferent ways, in this case, it's OVA.\n\n185\n00:08:44.640 --> 00:08:46.723\nSo everything I need is\nright here in one file.\n\n186\n00:08:46.723 --> 00:08:50.363\nI've got vSphereDataProtection-6.1.ova.\n\n187\n00:08:50.363 --> 00:08:53.968\nThere have been several\nversions of VDP over the years.\n\n188\n00:08:53.968 --> 00:09:00.170\nVDP version 6 is the newest one and, or\nI guess 6.1 is actually the newest one.\n\n189\n00:09:00.170 --> 00:09:03.070\nBut 6.0 is kinda considered\nthat newest generation, and\n\n190\n00:09:03.070 --> 00:09:06.010\nit added a lot of functionality\nto that is really impressive.\n\n191\n00:09:06.010 --> 00:09:11.460\nBut the key thing to remember\nis that VDP-6 only works with\n\n192\n00:09:11.460 --> 00:09:15.930\nESXi and vCenter 6, so we need to\nbe at version 6 across the board.\n\n193\n00:09:15.930 --> 00:09:19.543\nIf I still have ESXi5.5 machines,\nor if I got vCenter 5.5,\n\n194\n00:09:19.543 --> 00:09:22.120\nI need to go back to\nan older version of VDP too.\n\n195\n00:09:22.120 --> 00:09:26.002\nYou wanna try and keep those in line\nto make sure everything works properly.\n\n196\n00:09:26.002 --> 00:09:27.180\nAll right, so\n\n197\n00:09:27.180 --> 00:09:32.620\nwhen you've got that OVA, you need to\nimport that into your vCenter environment.\n\n198\n00:09:32.620 --> 00:09:35.260\nNow, if you've got\nthe vCenter plugin installed,\n\n199\n00:09:35.260 --> 00:09:38.660\nthen what you can do is you can do it\nright through the vSphere web client.\n\n200\n00:09:38.660 --> 00:09:41.190\nYou log into the vSphere web client,\n\n201\n00:09:41.190 --> 00:09:45.720\nyou navigate to whatever data center it is\nthat you're gonna be deploying VDP into.\n\n202\n00:09:45.720 --> 00:09:48.419\nSo I might navigate\nhere to my data center.\n\n203\n00:09:48.419 --> 00:09:51.410\nAnd when you right-click\non the data center,\n\n204\n00:09:51.410 --> 00:09:54.101\nyou can choose to deploy an OVF Template.\n\n205\n00:09:54.101 --> 00:09:57.045\nAnd I know it says OVF,\nbut it does OVFs and OVAs.\n\n206\n00:09:57.045 --> 00:09:58.485\nIt does either format, right.\n\n207\n00:09:58.485 --> 00:10:02.485\nSo I would choose to deploy the OVF\ntemplate and browse, and get it.\n\n208\n00:10:02.485 --> 00:10:04.335\nNow, I run into this problem all the time.\n\n209\n00:10:04.335 --> 00:10:06.087\nI've actually had it here in the show too.\n\n210\n00:10:06.087 --> 00:10:12.927\nIs that the vSphere web client plugin\ndoesn't work so well under Chrome.\n\n211\n00:10:12.927 --> 00:10:16.067\nAnd it works better under\nInternet Explorer, but I'm on a Mac.\n\n212\n00:10:16.067 --> 00:10:18.407\nI don't have Internet Explorer,\nand so I can't really do that.\n\n213\n00:10:18.407 --> 00:10:22.447\nSo this type of deployment\nisn't going to work out for me.\n\n214\n00:10:22.447 --> 00:10:25.967\nSo what I normally do is\nhave my vCenter Server.\n\n215\n00:10:25.967 --> 00:10:28.780\nBecause my vCenter Server,\nit is running Windows.\n\n216\n00:10:28.780 --> 00:10:33.670\nAnd instead of using the web browser,\nI can use the native vSphere client, and\n\n217\n00:10:33.670 --> 00:10:35.200\nwe can import it from there.\n\n218\n00:10:35.200 --> 00:10:37.900\nAll right, when we import from here,\nit's just a little bit different.\n\n219\n00:10:37.900 --> 00:10:41.190\nTo import it, we use our File menu up top.\n\n220\n00:10:41.190 --> 00:10:44.823\nAnd under the File menu,\nyou'll see Deploy OVF Template, okay.\n\n221\n00:10:44.823 --> 00:10:47.492\nAnd so we can choose to\ndeploy the OVF template, and\n\n222\n00:10:47.492 --> 00:10:49.590\nwe can browse and find that file.\n\n223\n00:10:49.590 --> 00:10:53.480\nSo I'm gonna just browse, and\nwe'll turn that file up real quick.\n\n224\n00:10:55.240 --> 00:10:55.905\nAnd there it is.\n\n225\n00:10:55.905 --> 00:10:59.930\nvSphere, or I don't want, yeah, that's\nthe one I want, vSpheredataprotection.\n\n226\n00:10:59.930 --> 00:11:03.210\nSo you're just gonna browse and\nfind that OVA, and move forward.\n\n227\n00:11:03.210 --> 00:11:06.587\nAnd the neat part about the OVA is,\nyes, it's an appliance, right.\n\n228\n00:11:06.587 --> 00:11:08.091\nYes, it's ready to be deployed, but\n\n229\n00:11:08.091 --> 00:11:10.410\nthere's things we're going\nto want to customize.\n\n230\n00:11:10.410 --> 00:11:13.838\nI might wanna have a specific IP\naddress assigned in the machine or\n\n231\n00:11:13.838 --> 00:11:15.159\ngive it a specific name.\n\n232\n00:11:15.159 --> 00:11:18.469\nAnd with a lot of appliances, when you\ndeploy it, it'll have a default IP, so\n\n233\n00:11:18.469 --> 00:11:20.089\nthen you've got to log in and change.\n\n234\n00:11:20.089 --> 00:11:22.465\nOr it'll have a default password and\nyou've gotta log in and change it, and\n\n235\n00:11:22.465 --> 00:11:23.830\nthose are kind of annoying.\n\n236\n00:11:23.830 --> 00:11:28.870\nWell, with an OVA like this, it actually\nhas a little bit of a wizard that it uses,\n\n237\n00:11:28.870 --> 00:11:32.670\nwhere we can provide it the information\nnecessary to get it customized to meet\n\n238\n00:11:32.670 --> 00:11:33.960\nour needs.\n\n239\n00:11:33.960 --> 00:11:35.930\nOn the first screen here,\nit's just giving me a summary, and\n\n240\n00:11:35.930 --> 00:11:37.640\nI'm getting an invalid certificate.\n\n241\n00:11:37.640 --> 00:11:41.830\nThis one is digitally signed by,\nnot VMware, but EMC.\n\n242\n00:11:41.830 --> 00:11:46.000\nEMC actually owns VMware, so\nit's really the same company.\n\n243\n00:11:46.000 --> 00:11:49.030\nBut this certificate's coming from EMC and\nit's showing as invalid.\n\n244\n00:11:49.030 --> 00:11:52.930\nAnd that probably either means its\nexpired, which I don't think it is, or\n\n245\n00:11:52.930 --> 00:11:55.210\nit's issued from a provider that\nI'm not currently trusting.\n\n246\n00:11:55.210 --> 00:11:57.145\nAnd that's what more than likely the case.\n\n247\n00:11:57.145 --> 00:12:00.215\nBut I can see the size of it,\nand notice the size on disk.\n\n248\n00:12:00.215 --> 00:12:04.265\nWhen I deploy this,\nit's only a 5.2 GB file, but\n\n249\n00:12:04.265 --> 00:12:06.545\nit's got two virtual hard drives.\n\n250\n00:12:06.545 --> 00:12:10.430\nOne for the OS that's thin provisioned,\nand it's 11 gigs in size.\n\n251\n00:12:10.430 --> 00:12:14.770\nAnd one for the backups, which is\n200 gigs in size, thick provisioned.\n\n252\n00:12:14.770 --> 00:12:19.970\nSo it's gonna immediately consume\n212 gigs of space on my system.\n\n253\n00:12:19.970 --> 00:12:23.740\nI might want to increase this drive\nlater on, to store more backups.\n\n254\n00:12:23.740 --> 00:12:26.140\nRemember, I said we could\nstore up to 8 TB of backups.\n\n255\n00:12:26.140 --> 00:12:31.570\nSo we can increase the size of that drive,\nbut my default, I'm gonna have 200 GB.\n\n256\n00:12:31.570 --> 00:12:33.610\nAll right, on the next screen we\njust have our license agreement, so\n\n257\n00:12:33.610 --> 00:12:34.470\nwe can accept that.\n\n258\n00:12:34.470 --> 00:12:36.900\nWe don't really have much of a choice.\n\n259\n00:12:36.900 --> 00:12:39.520\nAnd then, we start to get into\nour customizations, right.\n\n260\n00:12:39.520 --> 00:12:42.000\nSo on the next screen, it's gonna\nask me to name the system, and so\n\n261\n00:12:42.000 --> 00:12:42.960\nI can give it a name.\n\n262\n00:12:42.960 --> 00:12:46.609\nI can leave it with the default\nvSphere Data Protection 6.1,\n\n263\n00:12:46.609 --> 00:12:48.306\nor maybe I want to call it VDP.\n\n264\n00:12:48.306 --> 00:12:52.728\nI've actually already got a VDP\nserver here, so I'll call this VDP02.\n\n265\n00:12:52.728 --> 00:12:54.610\nAnd then, we can advance forward on that.\n\n266\n00:12:56.470 --> 00:12:58.170\nAnd now,\nit's gonna ask me where I want to put it.\n\n267\n00:12:58.170 --> 00:13:01.800\nAnd so you can place it on a data center,\nor on a specific host, if you want.\n\n268\n00:13:01.800 --> 00:13:04.720\nMy host 02 is turned off right now,\nso I'll pick a host that's turned on.\n\n269\n00:13:06.750 --> 00:13:08.760\nAnd, now the storage.\n\n270\n00:13:08.760 --> 00:13:10.910\nThat particular host has\nmore than one data store,\n\n271\n00:13:10.910 --> 00:13:12.910\nso I can pick which data\nstore I want it to go in.\n\n272\n00:13:12.910 --> 00:13:14.900\nSo I'll pick my local data store.\n\n273\n00:13:14.900 --> 00:13:18.400\nI could go into my iSCSI data store, or\nwherever you get the best performance.\n\n274\n00:13:18.400 --> 00:13:21.122\nJust remember,\none of the drives is thick provisioned.\n\n275\n00:13:21.122 --> 00:13:23.600\nSo we're gonna consume a lot\nof space when we deploy this.\n\n276\n00:13:23.600 --> 00:13:25.130\nWe just need to be ready for that.\n\n277\n00:13:25.130 --> 00:13:27.430\nAnd that also means the deployment\ncan take a little while.\n\n278\n00:13:27.430 --> 00:13:29.000\nIf it's got a thick\nprovisioned 200 gigs of data,\n\n279\n00:13:29.000 --> 00:13:31.180\nit's gotta lay that out on the drive.\n\n280\n00:13:31.180 --> 00:13:33.240\nIf I go iSCSI, that'll be pretty slow.\n\n281\n00:13:33.240 --> 00:13:35.650\nOn a regular SAN or on my local storage,\nshould be pretty quick.\n\n282\n00:13:38.190 --> 00:13:39.640\nAll right, then the disk format.\n\n283\n00:13:39.640 --> 00:13:43.480\nWell, it's got a thick\nprovisioned disk,and\n\n284\n00:13:43.480 --> 00:13:45.415\nI can actually override that if I want.\n\n285\n00:13:45.415 --> 00:13:47.085\nI can choose to make it thin provisioned,\n\n286\n00:13:47.085 --> 00:13:50.215\nwhich is not necessarily the greatest\nidea, but I certainly can.\n\n287\n00:13:50.215 --> 00:13:52.835\nAnd so, it's recognizing that data\nstore and showing the available space.\n\n288\n00:13:52.835 --> 00:13:54.275\nI'm gonna flip mine to thin.\n\n289\n00:13:54.275 --> 00:13:56.085\nIn production,\nyou wanna leave it to thick.\n\n290\n00:13:56.085 --> 00:13:58.614\nI'm just doing that cuz I'm in a lab and\nI don't have a ton of space.\n\n291\n00:14:00.598 --> 00:14:02.600\nAll right, now the important screen.\n\n292\n00:14:02.600 --> 00:14:05.560\nThis screen is where I get\nto set the IP information.\n\n293\n00:14:05.560 --> 00:14:08.397\nInstead of having a default IP,\nwe can pick one.\n\n294\n00:14:08.397 --> 00:14:11.710\nAnd that's important because\nthe VDP is entirely web managed.\n\n295\n00:14:11.710 --> 00:14:15.467\nWe manage it from its web interface, and\nso I need an IP address that I can get to.\n\n296\n00:14:15.467 --> 00:14:19.170\nIf it was a default IP, I'd have to access\nthe underlying OS and go and change it,\n\n297\n00:14:19.170 --> 00:14:20.730\nand it's kind of a hassle.\n\n298\n00:14:20.730 --> 00:14:22.000\nBut here, I can set it.\n\n299\n00:14:22.000 --> 00:14:25.950\nSo I can punch in the IP that I\nwant to use as my default gateway.\n\n300\n00:14:25.950 --> 00:14:32.250\nI can punch in my DNS servers, and\nall the other things that I might need.\n\n301\n00:14:32.250 --> 00:14:33.560\nAnd here's the IP address, so\n\n302\n00:14:33.560 --> 00:14:35.895\nI'm just gonna assign it\nan IP that's on my network.\n\n303\n00:14:38.305 --> 00:14:41.875\nAnd give it a subnet mask, all right.\n\n304\n00:14:41.875 --> 00:14:44.615\nSo once I've got that in place,\nnow I've got an IP address that I know, so\n\n305\n00:14:44.615 --> 00:14:48.340\nI'll be able to browse through the web\npage and actually work with the system.\n\n306\n00:14:48.340 --> 00:14:50.860\nAnd now as I move forward, it just give\nme a summary of everything that we did,\n\n307\n00:14:50.860 --> 00:14:52.650\nand we can finish up.\n\n308\n00:14:52.650 --> 00:14:55.430\nAnd it's going to deploy the OVF.\n\n309\n00:14:55.430 --> 00:14:56.906\nNow, it can take a little while.\n\n310\n00:14:56.906 --> 00:14:59.530\nIt's gotta copy the information,\nits 5.5 gigs of data, right.\n\n311\n00:14:59.530 --> 00:15:02.080\nIt's gotta copy that,\nusually over the network.\n\n312\n00:15:02.080 --> 00:15:05.250\nAnd then once its in place, it's expanding\nthat out to make it thick provisioned and\n\n313\n00:15:05.250 --> 00:15:09.240\nall the other things, so\nthis process could take a little while.\n\n314\n00:15:09.240 --> 00:15:11.910\nSo to save time,\nI've made a copy that I've already got.\n\n315\n00:15:11.910 --> 00:15:13.420\nSo I'm gonna cancel this one.\n\n316\n00:15:13.420 --> 00:15:17.470\n>> Don, you talked about it being able\nto back up your virtual machines, but\n\n317\n00:15:17.470 --> 00:15:19.210\nhow about the physical environment?\n\n318\n00:15:19.210 --> 00:15:22.860\nIs this just limited to\nthe virtual machines only?\n\n319\n00:15:22.860 --> 00:15:24.790\n>> You can actually use it to\nback up physical machines too.\n\n320\n00:15:24.790 --> 00:15:26.670\nIt is just back up software.\n\n321\n00:15:26.670 --> 00:15:29.890\nSo, it's gonna deploy a little agent\ninto your VMs and back them up.\n\n322\n00:15:29.890 --> 00:15:32.070\nIt can deploy the agent into\na physical machine too.\n\n323\n00:15:32.070 --> 00:15:33.900\nIt can reach out to either of those.\n\n324\n00:15:33.900 --> 00:15:36.570\nSo I can use VDP,\nnot just to back up my VMware VMs, but\n\n325\n00:15:36.570 --> 00:15:40.540\nI can use it to back up Hyper-V VMs or\nXen VMs.\n\n326\n00:15:40.540 --> 00:15:43.430\nI can back up physical servers,\nreally the whole environment.\n\n327\n00:15:43.430 --> 00:15:45.163\nYou can do it right from here,\nit's a great product for that.\n\n328\n00:15:45.163 --> 00:15:48.927\n>> Now as far as data storage is, is this\nsomething that we're limited to on-premise\n\n329\n00:15:48.927 --> 00:15:50.994\ndata storages, or\ndo we have other options?\n\n330\n00:15:50.994 --> 00:15:53.225\nThey've actually extended\nthis into a lot of,\n\n331\n00:15:53.225 --> 00:15:55.133\nit almost sounds like a commercial now.\n\n332\n00:15:55.133 --> 00:15:58.885\nActually, Wes, now that you mention it,\nif you order now you'll get two copies.\n\n333\n00:15:58.885 --> 00:16:03.140\n[LAUGH] It integrates with vCloud\nin the hybrid deployment, so\n\n334\n00:16:03.140 --> 00:16:04.580\nyou can back up multiple data centers.\n\n335\n00:16:04.580 --> 00:16:06.890\nI know, when I installed it, I picked\na data center for it to go in, but\n\n336\n00:16:06.890 --> 00:16:08.826\nyou can actually back up\nother data centers with it.\n\n337\n00:16:08.826 --> 00:16:11.000\nYou can backup.\n\n338\n00:16:11.000 --> 00:16:17.200\nYou can really backup and integrate with\npretty much everything except for vCenter.\n\n339\n00:16:17.200 --> 00:16:20.090\nIt's kinda where VDP can't backup vCenter.\n\n340\n00:16:20.090 --> 00:16:23.160\nSo you'll need something\nelse to backup vCenter\n\n341\n00:16:23.160 --> 00:16:24.830\nNot a lot of critical\ndata in vCenter anyway.\n\n342\n00:16:24.830 --> 00:16:27.250\nSo if you had to rebuild it from\nscratch it's not a big deal, but\n\n343\n00:16:27.250 --> 00:16:29.090\nthat's kind of the one\nthing that won't backup and\n\n344\n00:16:29.090 --> 00:16:32.500\nthat's because it's integrated\ninto vCenter so it can't do that.\n\n345\n00:16:32.500 --> 00:16:36.240\nBut it can do backups of things\nlike Microsoft SQL Servers and\n\n346\n00:16:36.240 --> 00:16:36.950\nExchange Servers,\n\n347\n00:16:36.950 --> 00:16:40.180\nservers that are notoriously difficult\nto backup, they've got agents for that.\n\n348\n00:16:40.180 --> 00:16:44.610\nWhen we setup backups It'll ask us\nwhat kind of back up we wanna do, and\n\n349\n00:16:44.610 --> 00:16:48.880\nyou have what are called Image Level\nback ups and Desk Level back ups.\n\n350\n00:16:48.880 --> 00:16:51.810\nIn Image Level back ups is where\nit freezes the virtual machine and\n\n351\n00:16:51.810 --> 00:16:53.610\nmakes a clone of that V.M..\n\n352\n00:16:53.610 --> 00:16:56.850\nSo, just the whole thing and\nthat's the back up I like.\n\n353\n00:16:56.850 --> 00:16:59.600\nI like Image Level back ups because\nthey're so easy to restore.\n\n354\n00:16:59.600 --> 00:17:03.070\nStorage this restores the entire machine,\nI don't have to pick and choose files and\n\n355\n00:17:03.070 --> 00:17:04.260\nrun through a whole process.\n\n356\n00:17:04.260 --> 00:17:05.820\nYou just restore the image backup.\n\n357\n00:17:05.820 --> 00:17:08.990\nThey're fast,\nthey get the whole thing, right?\n\n358\n00:17:08.990 --> 00:17:11.710\nBut the one thing an image\nbackup isn't good at\n\n359\n00:17:11.710 --> 00:17:14.260\nis making sure that the hard drive\nis clean when it backs it up.\n\n360\n00:17:14.260 --> 00:17:16.950\nIt freezes the hard drive\nas it is right then.\n\n361\n00:17:16.950 --> 00:17:19.020\nAnd so if you have a data base\nserver like Microsoft SQL,\n\n362\n00:17:19.020 --> 00:17:23.130\nit could be in the middle of writing\ndata to the database and you freeze it.\n\n363\n00:17:23.130 --> 00:17:25.680\nAnd so\nnow your backup has incomplete right and\n\n364\n00:17:25.680 --> 00:17:29.260\nif you restore it is missing half\nthe data, you ended up with corrupt data.\n\n365\n00:17:29.260 --> 00:17:32.450\nThat's where a guest level backup\nis a little more useful and\n\n366\n00:17:32.450 --> 00:17:35.840\nthat's where the backup occurs from inside\nof the guest itself, the guest is aware.\n\n367\n00:17:35.840 --> 00:17:37.440\nIt can stabilize it's file system.\n\n368\n00:17:37.440 --> 00:17:41.890\nIt can do a clean backup and since the\nguest is involved this is what makes it\n\n369\n00:17:41.890 --> 00:17:46.150\nwhere we can back up physical machines,\nbecause it just treats it like a guest.\n\n370\n00:17:46.150 --> 00:17:48.870\nWe can't do an image level\nback up on a physical machine,\n\n371\n00:17:48.870 --> 00:17:52.550\nbecause it's not a VM that we can freeze,\nbut we can do a guest level back up\n\n372\n00:17:52.550 --> 00:17:55.200\nbecause the guest gets involves and\nmoves that data along.\n\n373\n00:17:55.200 --> 00:17:58.620\nSo we'll see that choice\nwhen we go to configure it.\n\n374\n00:17:58.620 --> 00:18:01.040\nAll right,\nonce you have deployed the template,\n\n375\n00:18:01.040 --> 00:18:04.940\nthe appliance, it powers on and now what?\n\n376\n00:18:04.940 --> 00:18:07.410\nWell you actually don't do\nmuch from the device itself.\n\n377\n00:18:07.410 --> 00:18:08.350\nLet me show you.\n\n378\n00:18:08.350 --> 00:18:10.160\nSo once it's deployed we're\nready to work with it.\n\n379\n00:18:10.160 --> 00:18:12.450\nAnd you might be tempted to\njump over to its console but\n\n380\n00:18:12.450 --> 00:18:13.920\nthere's not really much we can do there.\n\n381\n00:18:13.920 --> 00:18:16.080\nWhat we need to do is manage\nit via its web interface.\n\n382\n00:18:16.080 --> 00:18:18.910\nIt's kinda like ESXI where you\nmanage it from the web interface.\n\n383\n00:18:18.910 --> 00:18:21.500\nSo I'm gonna jump over\nto my web browser and\n\n384\n00:18:21.500 --> 00:18:24.370\nwhat we need to do is\nlog into the appliance.\n\n385\n00:18:24.370 --> 00:18:27.120\nAnd the way you do that is you browse to\n\n386\n00:18:27.120 --> 00:18:30.560\nthe IP address of the appliance\nthat we set as part of that wizard.\n\n387\n00:18:30.560 --> 00:18:35.800\nAnd then it's running on port 8543,\nthat's the default port for the VDP.\n\n388\n00:18:35.800 --> 00:18:41.695\nSo you're gonna do https://\nwhatever the IP address is,\n\n389\n00:18:41.695 --> 00:18:44.939\n:8543 /vdp-configure.\n\n390\n00:18:44.939 --> 00:18:48.175\nThat's gonna take us to the configuration\nwizard where we can go and\n\n391\n00:18:48.175 --> 00:18:49.098\nget the vDP setup.\n\n392\n00:18:49.098 --> 00:18:51.470\nNow, my screen wasn't displaying\nit cuz I clicked on it.\n\n393\n00:18:51.470 --> 00:18:55.010\nBut the first time you go to the console,\nit will actually have a blue screen up and\n\n394\n00:18:55.010 --> 00:18:56.230\nit will tell you that address.\n\n395\n00:18:56.230 --> 00:18:58.240\nSo if you forget the port\nnumber it will show up, but\n\n396\n00:18:58.240 --> 00:19:01.420\nif you click any button whatsoever,\nit drops you to a login prompt, and\n\n397\n00:19:01.420 --> 00:19:04.550\nwe don't actually have a valid\nlogin here that I can use.\n\n398\n00:19:04.550 --> 00:19:07.260\nWell we do have the root account\nthat we're gonna use right here.\n\n399\n00:19:07.260 --> 00:19:12.110\nSo how it's defaulting to a root account,\nand when I provided the IP address and\n\n400\n00:19:12.110 --> 00:19:13.790\nstuff it never did ask me for a password.\n\n401\n00:19:13.790 --> 00:19:17.620\nSo we have a default password we have\nto use to login, which is, actually,\n\n402\n00:19:17.620 --> 00:19:19.240\nchangeme by default.\n\n403\n00:19:19.240 --> 00:19:21.880\nSo I'm just gonna punch in changeme and\nhit Log In, and\n\n404\n00:19:21.880 --> 00:19:24.200\nit's gonna get me logged in to the VDP.\n\n405\n00:19:24.200 --> 00:19:27.820\nNow, I'm not actually in\nthe true VDP right now.\n\n406\n00:19:27.820 --> 00:19:29.620\nI'm in the VDP set up wizard.\n\n407\n00:19:29.620 --> 00:19:31.630\nI need to answer some more questions and\n\n408\n00:19:31.630 --> 00:19:35.200\nget things set up to get it and\nwe can start to use it.\n\n409\n00:19:35.200 --> 00:19:39.070\nAnd so it's gonna run me through that\nprocess and it's pretty straight forward.\n\n410\n00:19:39.070 --> 00:19:42.080\nOkay, the first thing it's gonna\nbring up on the Network Settings so\n\n411\n00:19:42.080 --> 00:19:44.120\nI can change this IP's\nif I change my mind.\n\n412\n00:19:44.120 --> 00:19:46.800\nI can give it a host name if\nI've got a host name for it.\n\n413\n00:19:46.800 --> 00:19:51.620\nVDP does like DNS to work properly but\nit's not overly sensitive about it.\n\n414\n00:19:51.620 --> 00:19:55.660\nSo I am going to leave those blank,\nand It's not going to let me, shoot.\n\n415\n00:19:55.660 --> 00:19:59.390\nSo I'm going to go ahead and\ngive it a name in my environment.\n\n416\n00:20:01.120 --> 00:20:04.390\nThere we go so I'm going to go ahead and\npunch that in and\n\n417\n00:20:04.390 --> 00:20:06.710\nthen See how it's complaining\nabout that look-up?\n\n418\n00:20:06.710 --> 00:20:08.420\nIt is being a little bit sensitive for me.\n\n419\n00:20:08.420 --> 00:20:12.040\nIt's trying to look that up and\nverify that the name resolves properly, so\n\n420\n00:20:12.040 --> 00:20:14.020\nI need to get DNS set up to include that.\n\n421\n00:20:14.020 --> 00:20:18.980\nI can do that real fast, let me just get\ninto old DNS and register that name.\n\n422\n00:20:18.980 --> 00:20:22.600\nSo that it'll be able to do\nthe reverse lookup on it.\n\n423\n00:20:22.600 --> 00:20:25.400\nVDP, it uses these names because\nit can back up systems that are in\n\n424\n00:20:25.400 --> 00:20:28.320\nother data centers, so it's gotta\nbe able to reach out and find them.\n\n425\n00:20:28.320 --> 00:20:30.800\nBut at the end of the day,\nif you get through the wizard,\n\n426\n00:20:30.800 --> 00:20:34.560\nit doesn't actually fail if\nthe DNS information is not right.\n\n427\n00:20:34.560 --> 00:20:38.200\nWe're going to talk about vSphere\nreplication in another episode and\n\n428\n00:20:38.200 --> 00:20:39.290\nyou can't mess around with it.\n\n429\n00:20:39.290 --> 00:20:41.270\nIt's got to have DNS set up properly.\n\n430\n00:20:41.270 --> 00:20:42.960\nEverything has got to be\nconfigured right for it,\n\n431\n00:20:42.960 --> 00:20:45.190\nso, some of them are more\nforgiving than others.\n\n432\n00:20:45.190 --> 00:20:50.390\nThis one is not, so I'm just going to\nregister it with DNS and it is .205.\n\n433\n00:20:50.390 --> 00:20:54.440\nAll right, so we've got that one put in,\nand that should make it happy.\n\n434\n00:20:55.440 --> 00:20:57.990\nSo now when it goes to do\na reverse lookup on it's\n\n435\n00:20:57.990 --> 00:21:01.020\nIP it should be able to find it,\nthere we go.\n\n436\n00:21:01.020 --> 00:21:02.510\nAll right, then I can pick my time zone.\n\n437\n00:21:02.510 --> 00:21:06.650\nIt's got us in Los Angeles, we are\nprobably closer to New York than that, so\n\n438\n00:21:06.650 --> 00:21:07.440\nI'll pick New York.\n\n439\n00:21:08.600 --> 00:21:10.900\nAnd then my VDP credentials, okay?\n\n440\n00:21:10.900 --> 00:21:13.780\nI logged in with a password\nof change me right.\n\n441\n00:21:13.780 --> 00:21:17.390\nSo we need to put in here a valid password\nhere that's something that only we know.\n\n442\n00:21:17.390 --> 00:21:23.340\nSo I'll put in a new password, and\nthen my V center registration right.\n\n443\n00:21:23.340 --> 00:21:26.870\nVDP is gonna integrate with V center so\nit's gotta be able to log in and\n\n444\n00:21:26.870 --> 00:21:27.380\nconnect to it.\n\n445\n00:21:27.380 --> 00:21:30.760\nSo I'm gonna put in the Credentials for\nvCenter so\n\n446\n00:21:30.760 --> 00:21:34.800\nthat it'll be able to access that, and I'm\njust using administrator@vsphere.local.\n\n447\n00:21:34.800 --> 00:21:37.880\nIf you've got Single Sign-On configured\nyou'll put in whatever user name it is\n\n448\n00:21:37.880 --> 00:21:41.820\nthat you use to access the system,\nand so we can punch that in.\n\n449\n00:21:41.820 --> 00:21:48.290\nI need to punch in my V Center server,\nand you can use the IP or the name.\n\n450\n00:21:48.290 --> 00:21:51.840\nIf you use the name, it's usually\nbetter for certificates to do that.\n\n451\n00:21:51.840 --> 00:21:54.670\nI'm gonna leave verify vCenter\ncertificate turned off.\n\n452\n00:21:54.670 --> 00:21:56.470\nI'm using self signed\ncertificates right now.\n\n453\n00:21:56.470 --> 00:21:59.400\nSo if I turn that on, the certificate\nis going to fail and it won't work.\n\n454\n00:21:59.400 --> 00:22:00.960\nSo I need to leave that turned off.\n\n455\n00:22:00.960 --> 00:22:03.310\nAnd we can test out that SSO\nauthentication right here and\n\n456\n00:22:03.310 --> 00:22:05.480\nmake sure it's working, and\nit should come back and\n\n457\n00:22:05.480 --> 00:22:08.460\nsay that it was able to log in,\ntest completed successfully.\n\n458\n00:22:09.830 --> 00:22:13.120\nSo now that we've got that,\nthose are the hard things, after that,\n\n459\n00:22:13.120 --> 00:22:14.280\nit becomes a bit easier.\n\n460\n00:22:14.280 --> 00:22:17.250\nWe need to create storage for\nthe backups to exist in, and\n\n461\n00:22:17.250 --> 00:22:21.060\nthen we can set up the rest of it,\nit's all pretty straightforward.\n\n462\n00:22:21.060 --> 00:22:24.770\nAll right, what it's doing right now, this\none takes a moment, it's reaching out to\n\n463\n00:22:24.770 --> 00:22:29.160\nvCenter, and it's saying hi, I'm your\nnew VDP server, let me introduce myself.\n\n464\n00:22:29.160 --> 00:22:34.360\nAnd so vCenter is updating to reflect that\nthis exists, and that's important, because\n\n465\n00:22:34.360 --> 00:22:40.020\none of the things it's doing is putting\na plugin into the vSphere web client.\n\n466\n00:22:40.020 --> 00:22:42.830\nSo in the future when I log\ninto the vSphere web client\n\n467\n00:22:42.830 --> 00:22:46.080\nI'm gonna see information about\nVDP integrated right there.\n\n468\n00:22:46.080 --> 00:22:49.040\nSo I can manage all of my backups\nright from the same screens\n\n469\n00:22:49.040 --> 00:22:50.580\nwhere I back up my virtual machines.\n\n470\n00:22:50.580 --> 00:22:52.700\nThat's what's happening,\nand as soon as that's done,\n\n471\n00:22:52.700 --> 00:22:55.640\nthere we go,\nwe'll end up with our Create Storage.\n\n472\n00:22:55.640 --> 00:22:57.220\nAnd so here's the options\nwhere we can come through and\n\n473\n00:22:57.220 --> 00:23:00.710\nspecify if we're creating new storage,\nor if we're using existing storage.\n\n474\n00:23:00.710 --> 00:23:04.040\nIf I already had a VDP server and\nI'm moving it over here, I can do that.\n\n475\n00:23:04.040 --> 00:23:08.060\nI'm gonna create new storage, and\nI'm gonna run a little tight on space.\n\n476\n00:23:08.060 --> 00:23:10.370\nThe lowest it's giving me\nhere is half a terabyte so\n\n477\n00:23:10.370 --> 00:23:11.690\nI should be able to handle that.\n\n478\n00:23:11.690 --> 00:23:15.280\nSo I'll pick it, but\nyou can certainly go larger.\n\n479\n00:23:15.280 --> 00:23:17.640\nRemember we said that we kinda\nwanna hold it to eight and\n\n480\n00:23:17.640 --> 00:23:19.980\nif I start bumping that\nup eight's the max.\n\n481\n00:23:19.980 --> 00:23:22.550\nI can't pick anything above that,\nbut I'm gonna go with half.\n\n482\n00:23:25.370 --> 00:23:28.530\nAll right, then we're gonna\nget the VDP migration screen\n\n483\n00:23:28.530 --> 00:23:29.900\nif we chose to migrate data.\n\n484\n00:23:29.900 --> 00:23:32.360\nThat means weve got an old\nVDP server we're replacing.\n\n485\n00:23:32.360 --> 00:23:35.500\nIt skips over it for\nme because I didn't choose that option.\n\n486\n00:23:35.500 --> 00:23:39.300\nAnd now we have Device Allocation, so\nhere it's got where it's gonna store it.\n\n487\n00:23:39.300 --> 00:23:40.850\nI'm low on hard drive space so\n\n488\n00:23:40.850 --> 00:23:44.330\nI'm gonna change this to be thin\nprovisioned, you don't wanna do that.\n\n489\n00:23:44.330 --> 00:23:46.890\nIf you've got the right storage space\nyou want a thick provision cuz you get\n\n490\n00:23:46.890 --> 00:23:48.240\nthe best performance out of it, and\n\n491\n00:23:48.240 --> 00:23:50.610\nyou want your backups to\ngo as quickly as possible.\n\n492\n00:23:50.610 --> 00:23:51.869\nNetwork is normally your bottleneck.\n\n493\n00:23:51.869 --> 00:23:54.741\nIf you thin provision this,\nstorage will be your bottleneck.\n\n494\n00:23:54.741 --> 00:23:57.904\nSo we usually don't wanna do\nthat in a lab, it's okay, but\n\n495\n00:23:57.904 --> 00:24:02.463\notherwise Also notice how by default, the\nbackup data is stored with the appliance,\n\n496\n00:24:02.463 --> 00:24:04.800\nso it will be on the same data store.\n\n497\n00:24:04.800 --> 00:24:06.010\nIt doesn't have to be.\n\n498\n00:24:06.010 --> 00:24:09.170\nYou can have your backups on a completely\ndifferent data store if you wanted,\n\n499\n00:24:09.170 --> 00:24:11.120\neven a data store in\na completely different building.\n\n500\n00:24:11.120 --> 00:24:13.600\nThat's great if you want offsite backups.\n\n501\n00:24:13.600 --> 00:24:17.660\nYou could have VDP automatically\nbacking up to an offsite location.\n\n502\n00:24:17.660 --> 00:24:21.670\nJust make sure you've got\nthe bandwidth to handle that.\n\n503\n00:24:21.670 --> 00:24:23.070\nAll right.\n\n504\n00:24:23.070 --> 00:24:24.560\nThen CPU and memory.\n\n505\n00:24:24.560 --> 00:24:28.730\nRight now my machine is set to have\nfour CPUs and four gigs of RAM.\n\n506\n00:24:28.730 --> 00:24:31.980\nWell, you can take that\ndown a bit if you want.\n\n507\n00:24:31.980 --> 00:24:33.970\nActually it's not letting me.\n\n508\n00:24:33.970 --> 00:24:36.270\nYou can, you can edit the appliance and\nbump it down to two and\n\n509\n00:24:36.270 --> 00:24:37.370\nit will still work.\n\n510\n00:24:37.370 --> 00:24:41.090\nThe minimum requirement though,\nthe recommendation is four.\n\n511\n00:24:41.090 --> 00:24:43.300\nAnd you can go higher, if you've got them.\n\n512\n00:24:43.300 --> 00:24:45.420\nIn my system I'm locked to four, right?\n\n513\n00:24:45.420 --> 00:24:49.050\nAnd then on the memory it's at four gigs,\nthat's the recommended minimum.\n\n514\n00:24:49.050 --> 00:24:53.400\nThe target that they really shoot for\nis like 12 gigs of RAM, is what they want.\n\n515\n00:24:53.400 --> 00:24:55.959\nI don't have enough RAM to do it,\nso I'll leave mine at four.\n\n516\n00:24:57.852 --> 00:25:00.635\nAll right, then if we want to join their\ncustomer experience improvement program,\n\n517\n00:25:00.635 --> 00:25:01.800\nI'll pass on that.\n\n518\n00:25:01.800 --> 00:25:03.640\nThat should be all it needs.\n\n519\n00:25:03.640 --> 00:25:07.270\nThe next thing it’s got is to perform\nan analysis on the storage configuration.\n\n520\n00:25:07.270 --> 00:25:11.220\nIt wants to verify that the storage has\nset up properly and it’s ready to work.\n\n521\n00:25:11.220 --> 00:25:13.960\nNotice it says it can take from\n30 minutes to several hours,\n\n522\n00:25:13.960 --> 00:25:17.560\nthat basically means it will take at\nleast 30 minutes to check the storage.\n\n523\n00:25:17.560 --> 00:25:21.070\nNormally I would do this, and\nthe reason is if you call VMware for\n\n524\n00:25:21.070 --> 00:25:24.210\nsupport, it needs to of gone\nthrough the analysis, right.\n\n525\n00:25:24.210 --> 00:25:26.910\nOtherwise they're gonna make you\ndo it before they'll help you.\n\n526\n00:25:26.910 --> 00:25:29.700\nFor the show I'm running out of time, so\nI'm going to skip that little check, but\n\n527\n00:25:29.700 --> 00:25:31.450\nnormally we would want to do that, right.\n\n528\n00:25:31.450 --> 00:25:34.520\nAnd then it's got restart\nthe appliances if successful.\n\n529\n00:25:34.520 --> 00:25:37.330\nBefore you start running backups,\nit needs to reboot the appliance one time.\n\n530\n00:25:37.330 --> 00:25:40.120\nAnd so it can do that for\nus after this is done.\n\n531\n00:25:40.120 --> 00:25:41.620\nSo you can start this up and go home.\n\n532\n00:25:41.620 --> 00:25:45.750\nAnd when you come in in the morning, it'll\nbe rebooted and ready to rock, all right?\n\n533\n00:25:45.750 --> 00:25:47.030\nBut I'll skip that for now.\n\n534\n00:25:47.030 --> 00:25:52.975\nOkay, it is telling me that it's ready\nto start, and this cannot be undone.\n\n535\n00:25:52.975 --> 00:25:55.495\nThe changes it's making,\nit can't undo them.\n\n536\n00:25:55.495 --> 00:25:58.955\nIf you made a mistake, it's usually\neasier to just delete the appliance and\n\n537\n00:25:58.955 --> 00:26:02.210\nredeploy it again, because we don't\nactually have any data in it just yet.\n\n538\n00:26:03.260 --> 00:26:07.660\nWhere that's really dangerous is if we\nwere migrating other VDP storage in.\n\n539\n00:26:07.660 --> 00:26:08.970\nThat absolutely can't be undone.\n\n540\n00:26:08.970 --> 00:26:10.510\nYou have to do another\nmigration to get it out.\n\n541\n00:26:12.020 --> 00:26:15.640\nAll right, so there it goes,\nit's starting up and now I've got VDP.\n\n542\n00:26:15.640 --> 00:26:19.320\nSo once that's done, I'm ready to use it.\n\n543\n00:26:19.320 --> 00:26:21.300\nNow using it can go a few different ways.\n\n544\n00:26:21.300 --> 00:26:24.870\nI can use it through the web interface,\nthe VDP itself, or\n\n545\n00:26:24.870 --> 00:26:27.690\nI could just use it through right\nthrough the vSphere web client and\n\n546\n00:26:27.690 --> 00:26:29.840\nthat’s usually what we're gonna do.\n\n547\n00:26:29.840 --> 00:26:31.089\nIn the vSphere web client,\n\n548\n00:26:31.089 --> 00:26:34.390\nwere going to see a new menu\nitem show up when it’s done.\n\n549\n00:26:34.390 --> 00:26:37.710\nSo basically what will happen is,\n\n550\n00:26:37.710 --> 00:26:41.180\nif I go back to my homepage it\nmay not be there yet, let’s see.\n\n551\n00:26:41.180 --> 00:26:44.250\nWhat you're gonna see is\nover here on the left side,\n\n552\n00:26:44.250 --> 00:26:47.900\nsee how I've got Hybrid Cloud Manager and\nvRealize Orchestrator?\n\n553\n00:26:47.900 --> 00:26:50.170\nWe're gonna see the VMware\ndata protection appear,\n\n554\n00:26:50.170 --> 00:26:52.930\nit'll be a plug in that shows up here,\nall right.\n\n555\n00:26:52.930 --> 00:26:56.260\nI need to wait for this to finish and\nthen even after that,\n\n556\n00:26:56.260 --> 00:26:59.810\na lot of times you have to log out and\nlog back in before it actually shows up.\n\n557\n00:26:59.810 --> 00:27:02.750\nSo as soon as this is done,\nwe'll give that a shot.\n\n558\n00:27:02.750 --> 00:27:03.460\nThere we go.\n\n559\n00:27:03.460 --> 00:27:05.550\nIt's gonna reboot my appliance.\n\n560\n00:27:05.550 --> 00:27:07.490\nSo we'll tell it to go ahead and restart.\n\n561\n00:27:07.490 --> 00:27:10.380\nAnd that appliance is gonna\nreboot in the background.\n\n562\n00:27:10.380 --> 00:27:12.870\nAnd if I just watch that appliance.\n\n563\n00:27:14.680 --> 00:27:15.690\nSo here's the appliance.\n\n564\n00:27:15.690 --> 00:27:16.560\nIt's rebooting.\n\n565\n00:27:16.560 --> 00:27:20.890\nIt is just running Linux and so\nthe reboots actually happen pretty quick.\n\n566\n00:27:20.890 --> 00:27:23.030\nSo we'll give it a little bit of time.\n\n567\n00:27:23.030 --> 00:27:25.000\nAnd it'll do its reboot.\n\n568\n00:27:25.000 --> 00:27:27.620\nIn the mean time while I'm waiting\non that, I'm gonna go ahead and\n\n569\n00:27:27.620 --> 00:27:32.950\nlog out of the web client and log back in\nto see if that plugin shows up for me.\n\n570\n00:27:32.950 --> 00:27:34.530\nSo I'm logging out.\n\n571\n00:27:34.530 --> 00:27:40.670\nAnd then I'll just log right back in,\nso that we can see that show up.\n\n572\n00:27:40.670 --> 00:27:43.770\nThe nice part about this, really, one of\nthe big reasons we might use this over\n\n573\n00:27:43.770 --> 00:27:47.970\na third party product is that it is\nintegrated right into the web client.\n\n574\n00:27:47.970 --> 00:27:50.770\nSo you run your VM’s,\nyou backup your VM’s,\n\n575\n00:27:50.770 --> 00:27:53.780\nyou restore your VM’s,\nall right from the same place.\n\n576\n00:27:53.780 --> 00:27:55.240\nAnd because it’s a web client,\n\n577\n00:27:55.240 --> 00:27:57.470\nI don’t need to have any software\ninstalled on my own machine.\n\n578\n00:27:57.470 --> 00:28:00.820\nI just fire up my web browser and\ndo it and that’s really, really useful.\n\n579\n00:28:02.520 --> 00:28:05.540\nAll right, it's gonna churn a little bit\nslow on me here while it goes through all\n\n580\n00:28:05.540 --> 00:28:06.110\nthese changes.\n\n581\n00:28:06.110 --> 00:28:07.220\nSo as soon as that's done though,\n\n582\n00:28:07.220 --> 00:28:09.490\nwe should see that plugin and\nwe can reach out and grab it.\n\n583\n00:28:10.640 --> 00:28:14.450\nAnd there it goes and now,\nshoot, not seeing it yet.\n\n584\n00:28:14.450 --> 00:28:17.000\nSo once it reboots,\nit's gonna register that plugin and\n\n585\n00:28:17.000 --> 00:28:19.360\nI'll just see it right over here.\n\n586\n00:28:19.360 --> 00:28:21.040\nSometimes, I have seen this,\n\n587\n00:28:21.040 --> 00:28:26.040\nwhere the icon shows up here in the main\narea prior to showing up in the left side.\n\n588\n00:28:26.040 --> 00:28:27.620\nIn my case it's not showing up in either,\nso\n\n589\n00:28:27.620 --> 00:28:31.020\nwe're just going to have to sit tight and\nwait on that to turn up.\n\n590\n00:28:31.020 --> 00:28:31.880\nAll right, ladies and gentlemen,\n\n591\n00:28:31.880 --> 00:28:35.250\nthanks to the magic of television land,\nwe're going to jump forward in time.\n\n592\n00:28:35.250 --> 00:28:38.140\nRemember we're rebooting the VDP,\nwaiting for it to come up.\n\n593\n00:28:38.140 --> 00:28:40.550\nWhen it comes up it's\nregistering with vCenter.\n\n594\n00:28:40.550 --> 00:28:43.470\nOnce that happens, we will see it show up.\n\n595\n00:28:43.470 --> 00:28:44.990\nI sure enough see it now.\n\n596\n00:28:44.990 --> 00:28:49.770\nIf I take a look at my vSphere web client,\nthe two things that I am looking for\n\n597\n00:28:49.770 --> 00:28:53.580\non the left side here, we now have\nvSphere data protection showing up.\n\n598\n00:28:53.580 --> 00:28:55.510\nThat is really the thing\nthat I was waiting on.\n\n599\n00:28:55.510 --> 00:28:58.160\nBut also, way over here,\nI got a nice big VDP icon.\n\n600\n00:28:58.160 --> 00:29:00.110\nThey actually go to the exact same place.\n\n601\n00:29:00.110 --> 00:29:01.170\nIt doesn't matter which one I use.\n\n602\n00:29:01.170 --> 00:29:03.620\nBut, they are there.\nThat is what we were waiting to see.\n\n603\n00:29:03.620 --> 00:29:07.400\nIf you're not sure if it's actually done,\nthe webpage that we were on for\n\n604\n00:29:07.400 --> 00:29:10.760\nVDP, if you just refresh it,\nyou won't get the configure screen again.\n\n605\n00:29:10.760 --> 00:29:13.270\nInstead, you'll get what's\ncalled a server health check.\n\n606\n00:29:13.270 --> 00:29:14.170\nIt will run down and\n\n607\n00:29:14.170 --> 00:29:17.295\nyou show you all the services, so\nyou that you know they're started.\n\n608\n00:29:17.295 --> 00:29:21.305\nIf you don't have a green circle on one of\nthese, then VDP is not working right and\n\n609\n00:29:21.305 --> 00:29:24.325\nit won't register and\nit may not show up in vCenter.\n\n610\n00:29:24.325 --> 00:29:26.675\nBut it's an appliance,\nit's already configured, so\n\n611\n00:29:26.675 --> 00:29:28.680\nit's not like there's something\nwe could screw up here.\n\n612\n00:29:28.680 --> 00:29:31.670\nIt's just a matter of being patient,\nwhich we all know I'm terrible at.\n\n613\n00:29:31.670 --> 00:29:36.920\nSo at this point VDP is up, it's connected\ninto vCenter and it's ready to be used.\n\n614\n00:29:36.920 --> 00:29:39.960\nThe only thing left is to\nactually use the thing.\n\n615\n00:29:39.960 --> 00:29:43.470\nAnd how we use it is gonna vary\nbased on our organizational needs.\n\n616\n00:29:43.470 --> 00:29:47.330\nYour company may use it different than my\ncompany, versus Wes's company or whatever.\n\n617\n00:29:47.330 --> 00:29:49.000\nSo you just have to get in and\ncustomize it.\n\n618\n00:29:49.000 --> 00:29:50.650\nAnd fortunately, that's pretty easy.\n\n619\n00:29:50.650 --> 00:29:54.250\nSo I'm just gonna drop right here\ninto vSphere Data Protection.\n\n620\n00:29:54.250 --> 00:29:57.630\nAnd remember that we might have\nmore than one VDP server, cuz\n\n621\n00:29:57.630 --> 00:30:00.700\nif you have more than 400 VMs, or if you\nhave more than eight terabytes of data,\n\n622\n00:30:00.700 --> 00:30:02.690\nyou're gonna need more\nthan one VDP server.\n\n623\n00:30:02.690 --> 00:30:06.120\nSo the first thing it asks me is which\nVDP server I'm gonna connect to.\n\n624\n00:30:06.120 --> 00:30:06.890\nI've only got one.\n\n625\n00:30:06.890 --> 00:30:08.450\nThat makes life a little easy.\n\n626\n00:30:08.450 --> 00:30:10.340\nAnd I'll get connected to it.\n\n627\n00:30:10.340 --> 00:30:11.510\nSo it's gonna reach out.\n\n628\n00:30:11.510 --> 00:30:16.360\nAnd what it's really doing on the back\nend is loading web pages from the VDP\n\n629\n00:30:16.360 --> 00:30:18.986\nserver and rendering them\nright here inside of vCenter.\n\n630\n00:30:18.986 --> 00:30:22.960\nSo technically I'm now talking to two\ndifferent servers at the same time,\n\n631\n00:30:22.960 --> 00:30:25.230\neven though I see it all in one place.\n\n632\n00:30:25.230 --> 00:30:28.280\nBut from an administration standpoint,\nI just have one place to go.\n\n633\n00:30:28.280 --> 00:30:32.260\nAnd we got a nice little getting started\npage that we can run through where\n\n634\n00:30:32.260 --> 00:30:36.630\nyou can come through and create your\nbackup job, verify your backups, and\n\n635\n00:30:36.630 --> 00:30:40.340\nrestore your backups just with\na couple of basic clicks.\n\n636\n00:30:40.340 --> 00:30:41.630\nBut if you look at the tabs up here,\n\n637\n00:30:41.630 --> 00:30:43.750\nyou'll see where things are broken\ndown a little differently.\n\n638\n00:30:43.750 --> 00:30:47.240\nWe have our backup and restore, and that's\nwhere we're gonna spend a lot of time.\n\n639\n00:30:47.240 --> 00:30:50.280\nReports, that's one of the places\nI usually go to right off,\n\n640\n00:30:50.280 --> 00:30:52.430\nto make sure the backups\nhave been occurring.\n\n641\n00:30:52.430 --> 00:30:55.780\nAnd replication,\nhaven't really talked about replication.\n\n642\n00:30:55.780 --> 00:31:00.900\nIf you have VDP in place, you can have\na backup right here to this VDP server.\n\n643\n00:31:00.900 --> 00:31:03.370\nAnd you can have another VDP\nserver somewhere else and\n\n644\n00:31:03.370 --> 00:31:05.930\nyou can replicate the backup over there.\n\n645\n00:31:05.930 --> 00:31:09.450\nSo if you want an offsite\nbackup you can set that up, but\n\n646\n00:31:09.450 --> 00:31:14.160\nif you wanna maintain an on site copy too\nso you can restore faster, then you can do\n\n647\n00:31:14.160 --> 00:31:18.730\nthat, you put two VDP servers out there\nand you set up replication for it.\n\n648\n00:31:18.730 --> 00:31:21.960\nBut in my scenario I just really need\nto get back ups going and right now I\n\n649\n00:31:21.960 --> 00:31:25.370\ndon't have any back up jobs in place, so\nI need to get in there and create one.\n\n650\n00:31:25.370 --> 00:31:28.200\nSo if I go back to the Getting Started\npage here, I can choose to create a back\n\n651\n00:31:28.200 --> 00:31:31.920\nup job and we can walk through\nthe wizard of getting that setup.\n\n652\n00:31:31.920 --> 00:31:36.610\nNow when I go to back it up, see how it's\nshowing Guest Images and Applications.\n\n653\n00:31:36.610 --> 00:31:37.580\nAll right?\n\n654\n00:31:37.580 --> 00:31:41.230\nA Guest Image, that's where I'm taking\nan image of the virtual machine.\n\n655\n00:31:41.230 --> 00:31:43.870\nI'm basically backing up the entire VM.\n\n656\n00:31:43.870 --> 00:31:49.560\nBut Application, that's when I'm talking\nto an agent running inside of the guest,\n\n657\n00:31:49.560 --> 00:31:51.870\nand that might be a VM or\na physical machine.\n\n658\n00:31:51.870 --> 00:31:52.450\nWe talked about that earlier.\n\n659\n00:31:52.450 --> 00:31:55.121\nSo, this could be if I'm backing\nup an exchange server or SQL and\n\n660\n00:31:55.121 --> 00:31:57.353\nI wanna actually get involved\nwith the application.\n\n661\n00:31:57.353 --> 00:32:02.237\nI'm just gonna do a Guest Image in mine\nand now it's gonna ask, am I doing a.\n\n662\n00:32:02.237 --> 00:32:05.467\nFull image of the VM, or\ndo I want individual disks?\n\n663\n00:32:05.467 --> 00:32:07.729\nIf there's more than one\nhard drive in the VM,\n\n664\n00:32:07.729 --> 00:32:10.080\nyou don't have to back up the whole thing.\n\n665\n00:32:10.080 --> 00:32:13.450\nMaybe it's got a data versus an OS disk,\nand I don't care about the OS,\n\n666\n00:32:13.450 --> 00:32:15.860\nI just wanna back up the data,\nI can certainly do that.\n\n667\n00:32:15.860 --> 00:32:17.670\nI'm gonna go and backup the whole thing.\n\n668\n00:32:17.670 --> 00:32:22.300\nAnd it does say, Fall back to the\nnon-quiesced backup if quiesecence fails.\n\n669\n00:32:22.300 --> 00:32:24.130\nIt's gonna try and quiesce the disk.\n\n670\n00:32:24.130 --> 00:32:27.360\nIt's gonna try and slow down disk\nwrites so that we can get a good,\n\n671\n00:32:27.360 --> 00:32:28.970\nclean backup of the disk.\n\n672\n00:32:28.970 --> 00:32:31.850\nBut if it can't,\nit'll just grab what it can grab and that\n\n673\n00:32:31.850 --> 00:32:34.989\nway we at least have something even though\nwe might have a few dirty writes in there.\n\n674\n00:32:37.370 --> 00:32:40.830\nAfter that, the backup source,\nwho is it that I'm backing up?\n\n675\n00:32:40.830 --> 00:32:43.600\nAnd so if we expand it out we'll\nstart to see our vCenter server,\n\n676\n00:32:43.600 --> 00:32:47.360\nour Datacenter, and\nthe hosts and VMs inside of it.\n\n677\n00:32:47.360 --> 00:32:52.170\nAnd I can pick individual VMs, I can\npick entire host, entire datacenters.\n\n678\n00:32:52.170 --> 00:32:55.120\nI can backup the whole datacenter\nat 1AM and it'll go up and\n\n679\n00:32:55.120 --> 00:32:56.690\nbackup every single one of those.\n\n680\n00:32:56.690 --> 00:32:58.280\nI'm just gonna backup my Windows client.\n\n681\n00:33:00.720 --> 00:33:02.290\nThen when do we want it to backup?\n\n682\n00:33:02.290 --> 00:33:06.180\nDo I want this to be daily, weekly,\nthe first Sunday of every month, or\n\n683\n00:33:06.180 --> 00:33:07.580\nwhatever we pick and choose.\n\n684\n00:33:07.580 --> 00:33:09.370\nMaybe I wanna go daily and\n\n685\n00:33:09.370 --> 00:33:14.940\nwe'll say do a daily backup every\nday at 1 AM in the morning.\n\n686\n00:33:14.940 --> 00:33:17.358\nOkay, so\nevery day at 1 AM it's gonna do a backup.\n\n687\n00:33:17.358 --> 00:33:20.237\nWe'll schedule that,\nwe don't have to worry about it.\n\n688\n00:33:20.237 --> 00:33:23.602\nThen our Retention Policy, now Retention\nPolicy's a little hard to calculate.\n\n689\n00:33:23.602 --> 00:33:26.110\nBasically I'm saying,\nhow long do I wanna save data for?\n\n690\n00:33:26.110 --> 00:33:29.595\nAnd normally you wanna save as long\nas you can, cuz you just never know.\n\n691\n00:33:29.595 --> 00:33:33.320\nSomebody's gonna come to you and say, hey\nDon, I deleted this file two months ago.\n\n692\n00:33:33.320 --> 00:33:34.425\nCan you get it back for me?\n\n693\n00:33:34.425 --> 00:33:36.512\nAnd usually I just say no, right.\n\n694\n00:33:36.512 --> 00:33:39.880\nBut [LAUGH] if we have backups from two\nmonths ago and it is easy to get at them,\n\n695\n00:33:39.880 --> 00:33:43.691\nthen you can say, all right, yeah, let me\ngo to the backups, I'll pull that back.\n\n696\n00:33:43.691 --> 00:33:48.530\nBut the longer that you retain data,\nthe more storage you need.\n\n697\n00:33:48.530 --> 00:33:51.280\nThanks to deduplication it's not that bad,\nright?\n\n698\n00:33:51.280 --> 00:33:53.810\nAs we make changes that\nincreases the size, but\n\n699\n00:33:53.810 --> 00:33:56.750\nas long as it's the same data as\nother places it's not a big deal.\n\n700\n00:33:56.750 --> 00:33:58.620\nBut if we have a lot of unique data,\n\n701\n00:33:58.620 --> 00:34:01.020\ndata retention can really eat\nup our storage pretty fast.\n\n702\n00:34:02.040 --> 00:34:04.260\nSo we probably don't\nwanna go too far back.\n\n703\n00:34:04.260 --> 00:34:08.430\nIf you run out of space your old backups\nstart getting deleted to make room for\n\n704\n00:34:08.430 --> 00:34:09.160\nnew backups.\n\n705\n00:34:09.160 --> 00:34:12.820\nAnd that may violate your backup policy\ndepending on what your company's\n\n706\n00:34:12.820 --> 00:34:13.480\nrules are.\n\n707\n00:34:13.480 --> 00:34:16.755\n>> Don, at this point could you\nintegrate the cloud functionality\n\n708\n00:34:16.755 --> 00:34:18.280\nin storing the information in the cloud?\n\n709\n00:34:18.280 --> 00:34:20.140\nOr is this pretty much\njust gonna be all local?\n\n710\n00:34:20.140 --> 00:34:22.322\n>> So it's gotta be all local for\nthis first backup and\n\n711\n00:34:22.322 --> 00:34:25.797\nthen you can replicate out to the cloud,\nor you can backup straight to the cloud.\n\n712\n00:34:25.797 --> 00:34:29.840\nBut you can't set up\na hybrid piece right here.\n\n713\n00:34:29.840 --> 00:34:32.393\nWhat I'd have to do is set up\nmore than one backup job and\n\n714\n00:34:32.393 --> 00:34:35.420\nkinda break it into pieces like that,\nit gets a little more complex.\n\n715\n00:34:35.420 --> 00:34:37.960\nBut trying to keep it simple,\nwe'll just do the backup here.\n\n716\n00:34:37.960 --> 00:34:41.070\nAnd maybe I'll set my retention\ndown to 30 days because\n\n717\n00:34:41.070 --> 00:34:45.100\nI only have 500 gigs of backup space, and\nso I don't want to go too crazy on it.\n\n718\n00:34:46.330 --> 00:34:50.050\nAll right, then I give the backup job\na name, I'll call it my Windows Client,\n\n719\n00:34:50.050 --> 00:34:52.520\nor whatever name it is you have for\nyour backup.\n\n720\n00:34:52.520 --> 00:34:55.990\nMaybe this is your Monday backup,\nand so you define it as such, and\n\n721\n00:34:55.990 --> 00:34:57.110\nwe go and finish it.\n\n722\n00:34:57.110 --> 00:35:03.725\nNow, when I set this up, did it ever ask\nme if I wanted to do differential backups\n\n723\n00:35:03.725 --> 00:35:06.165\nor all the different types, we have-\n>> Incremental?\n\n724\n00:35:06.165 --> 00:35:09.725\n>> Incrementals, you have the,\nwhat's the, Tower of Hanoi and\n\n725\n00:35:09.725 --> 00:35:11.415\nthe grandfather method or whatever.\n\n726\n00:35:11.415 --> 00:35:12.095\nDo you remember them all?\n\n727\n00:35:12.095 --> 00:35:14.055\n>> Yeah, grandfather, father,\nson, and the Tower of Hanoi.\n\n728\n00:35:14.055 --> 00:35:16.510\nGFS, I think is the other one.\n\n729\n00:35:16.510 --> 00:35:19.360\n>> So there's a whole science to backups\nand all these different crazy terms.\n\n730\n00:35:19.360 --> 00:35:22.520\nIt never asked me any of that stuff,\nright, cuz it does it automatically.\n\n731\n00:35:22.520 --> 00:35:25.630\nIt's gonna do a full backup for the first\none and then it's just gonna get a delta,\n\n732\n00:35:25.630 --> 00:35:26.400\nit's gonna get changed.\n\n733\n00:35:26.400 --> 00:35:29.840\nIt actually uses a snapshot system to\nbe able to track those changes and\n\n734\n00:35:29.840 --> 00:35:30.960\npull them down.\n\n735\n00:35:30.960 --> 00:35:34.030\nAnd it does it without me having to get\ninvolved so it's just kind of automatic.\n\n736\n00:35:34.030 --> 00:35:37.878\nAnd so when I finish that,\nit's now got the backup job set up and\n\n737\n00:35:37.878 --> 00:35:39.922\nat 1 AM, it's gonna back it up.\n\n738\n00:35:39.922 --> 00:35:42.362\nOr if I wait patiently,\nI can go the backup screen and\n\n739\n00:35:42.362 --> 00:35:45.590\nI can force it to run right now and\nit'll start backing up.\n\n740\n00:35:45.590 --> 00:35:48.870\nBecause the VMware tools are already\ninstalled in that virtual machine,\n\n741\n00:35:48.870 --> 00:35:50.810\nit's got the information it\nneeds to hook up with it.\n\n742\n00:35:50.810 --> 00:35:53.720\nSo I can see the backup job\njust finished creating, and\n\n743\n00:35:53.720 --> 00:35:59.030\nif I jump over to my Backup tab, there's\nmy backup job, Windows, it's enabled.\n\n744\n00:35:59.030 --> 00:36:00.620\nI've never run a backup.\n\n745\n00:36:00.620 --> 00:36:03.820\nRight, it's gonna do an image-based\nbackup the next time it runs, and\n\n746\n00:36:03.820 --> 00:36:06.520\nthe next runtime is scheduled for\n1 AM this morning.\n\n747\n00:36:06.520 --> 00:36:09.593\nIf we make this a really long show\nwe can wait and see that happen.\n\n748\n00:36:09.593 --> 00:36:12.897\nOr you can just highlight it and\nclick Backup now, and\n\n749\n00:36:12.897 --> 00:36:17.030\nit's gonna kick off that backup and\nstart it running, all right.\n\n750\n00:36:17.030 --> 00:36:19.680\nOnce we've got a backup, doing a restore\nis just a matter of coming here\n\n751\n00:36:19.680 --> 00:36:21.440\nto the Restore tab and bringing it back.\n\n752\n00:36:21.440 --> 00:36:24.905\nThis really does function\njust like Backup Exec,\n\n753\n00:36:24.905 --> 00:36:28.330\nArcserve, all those other guys,\nit functions really the same way.\n\n754\n00:36:28.330 --> 00:36:31.130\nThe big advantage of this software though,\n\n755\n00:36:31.130 --> 00:36:33.050\nis that it's integrated\nright into vCenter.\n\n756\n00:36:33.050 --> 00:36:35.860\nWe can manage our backups right in\nthe same place that we manage our VMs.\n\n757\n00:36:35.860 --> 00:36:39.860\nAnd if there's ever a problem,\nwhen you call up VMware for\n\n758\n00:36:39.860 --> 00:36:44.340\nhelp, the same people that manage your\ninfrastructure are managing your backup,\n\n759\n00:36:44.340 --> 00:36:45.950\nso you get the help all from one place.\n\n760\n00:36:45.950 --> 00:36:48.150\nSo that really is the big selling point.\n\n761\n00:36:48.150 --> 00:36:52.470\nThere's not a crazy exciting feature here\nthat makes it better than Backup Exec or\n\n762\n00:36:52.470 --> 00:36:53.830\nbetter than Arcserve.\n\n763\n00:36:53.830 --> 00:36:56.870\nIt's just the integration,\nthe ease of use, that's really it,\n\n764\n00:36:56.870 --> 00:36:57.820\nthe convenience factor.\n\n765\n00:36:57.820 --> 00:37:01.106\nThat's what makes this\none a valuable product.\n\n766\n00:37:01.106 --> 00:37:04.148\nAll right, but now that that's done, yeah,\n\n767\n00:37:04.148 --> 00:37:07.117\nthat's pretty much all\nwe need to see on VDP.\n\n768\n00:37:07.117 --> 00:37:09.349\nOn the exam they want you\nto know how to set up VDP,\n\n769\n00:37:09.349 --> 00:37:11.110\nwhich we saw was really easy, right.\n\n770\n00:37:11.110 --> 00:37:13.330\nWe import the template,\nwe bring up the appliance,\n\n771\n00:37:13.330 --> 00:37:16.390\nwe assign it an IP and then we wait for\nit to show up in vCenter.\n\n772\n00:37:16.390 --> 00:37:19.610\nBut I went a little bit further just\nto show how to kick off a backup here.\n\n773\n00:37:19.610 --> 00:37:24.140\nSo I just issued that backup command, it's\ngonna start doing a back up here shortly.\n\n774\n00:37:24.140 --> 00:37:27.485\nAnd in, I don't know, half an hour or\nso that backup will be done and\n\n775\n00:37:27.485 --> 00:37:30.436\nI'll have my first backup of that VM and\nI'm ready to rock.\n\n776\n00:37:30.436 --> 00:37:34.348\nSo it's churning along, just remember you\ndo have additional configuration you can\n\n777\n00:37:34.348 --> 00:37:36.430\ndo in here to tweak it, get it set up.\n\n778\n00:37:36.430 --> 00:37:39.953\nYou'll wanna monitor the backup storage\nto make sure you don't run out, and\n\n779\n00:37:39.953 --> 00:37:42.522\nthat you've got all of your\nresources taken care of.\n\n780\n00:37:42.522 --> 00:37:45.180\nOther than that,\nthat's basically VDP in a nutshell.\n\n781\n00:37:45.180 --> 00:37:47.320\n>> Well Don, thank you for\nall that information on VDP and\n\n782\n00:37:47.320 --> 00:37:50.450\nI gotta say that centralized\nmanagement definitely comes in handy.\n\n783\n00:37:50.450 --> 00:37:53.210\nDoes look like we're coming to the end\nof another episode but before we do,\n\n784\n00:37:53.210 --> 00:37:57.310\nwhen it comes to VDP and data protection,\ngot any parting words of wisdom?\n\n785\n00:37:57.310 --> 00:37:59.260\n>> All right, remember your choices right.\n\n786\n00:37:59.260 --> 00:38:04.081\nWe saw snapshots in the first\nrecovery episode, then we saw VDP.\n\n787\n00:38:04.081 --> 00:38:07.484\nI still have one more I want to talk\nabout which is vSphere replication.\n\n788\n00:38:07.484 --> 00:38:10.976\nAnd I know what you're thinking is,\nI can do replication right here in VDP,\n\n789\n00:38:10.976 --> 00:38:13.540\nwhy do we have a separate\nreplication product?\n\n790\n00:38:13.540 --> 00:38:14.850\nThey're different, all right.\n\n791\n00:38:14.850 --> 00:38:20.170\nWith VDP we're replicating the backups,\nnot the actual VM but the backups.\n\n792\n00:38:20.170 --> 00:38:23.810\nWith vSphere replication we can\nreplicate the VMs themselves so\n\n793\n00:38:23.810 --> 00:38:25.140\nthey're ready to launch.\n\n794\n00:38:25.140 --> 00:38:28.230\nIt's a different technology and\nit's another option that's out there.\n\n795\n00:38:28.230 --> 00:38:29.950\nSo stay tuned for the replication episode.\n\n796\n00:38:29.950 --> 00:38:33.820\nAnd then in your environment, pick and\nchoose which ones you need to use.\n\n797\n00:38:33.820 --> 00:38:37.480\nYou may wanna use all three,\nsnapshots, VDP, and replication, and\n\n798\n00:38:37.480 --> 00:38:39.270\nthat gets you your perfect environment.\n\n799\n00:38:39.270 --> 00:38:40.934\nOr you might just use one of them or\ntwo of them,\n\n800\n00:38:40.934 --> 00:38:42.535\nyou might integrate third party products.\n\n801\n00:38:42.535 --> 00:38:45.930\nBut evaluate them all, figure out\nthe ones that best meet your needs and\n\n802\n00:38:45.930 --> 00:38:47.990\nthen those are the ones\nyou want to deploy.\n\n803\n00:38:47.990 --> 00:38:50.350\n>> Well Don, as always, thank you for\nbeing here in the studios, and\n\n804\n00:38:50.350 --> 00:38:51.490\nthank you to the viewer watching.\n\n805\n00:38:51.490 --> 00:38:54.160\nRemember, keep that data protected\nuntil we see you next time,\n\n806\n00:38:54.160 --> 00:38:55.440\nI'm gonna start over.\n\n807\n00:38:55.440 --> 00:38:57.540\n>> [LAUGH] Keep the data protected\nuntil we see you next time,\n\n808\n00:38:57.540 --> 00:38:59.436\nthen you don't have to\nprotect your data anymore.\n\n809\n00:38:59.436 --> 00:39:00.088\n>> Then you're fine.\n\n810\n00:39:00.088 --> 00:39:02.405\n>> [LAUGH]\n>> When we see you next time,\n\n811\n00:39:02.405 --> 00:39:04.814\neverything's gonna go great, groovy.\n\n812\n00:39:07.059 --> 00:39:07.991\n>> All right.\n\n813\n00:39:10.371 --> 00:39:12.673\n>> [LAUGH]\n>> Don't screw up.\n\n814\n00:39:16.495 --> 00:39:18.995\n>> All right, Don, thanks as always for\nbeing here in the studios and\n\n815\n00:39:18.995 --> 00:39:20.590\nthank you to the viewer watching.\n\n816\n00:39:20.590 --> 00:39:22.050\nRemember, keep that data protected.\n\n817\n00:39:22.050 --> 00:39:23.690\nAnd until we see you next time,\nsigning off for\n\n818\n00:39:23.690 --> 00:39:26.655\nITProTV I've been your host Wes Bryan\n>> And I'm Don Pezet.\n\n819\n00:39:26.655 --> 00:39:27.839\n>> And we'll see you next time.\n\n820\n00:39:27.839 --> 00:39:36.840\n[SOUND]\n\n",
          "vimeoId": "172572119"
        },
        {
          "description": "In this episode, Ronnie and Don take a look into the vSphere Replication appliance.  Don explains the need for replication in a production environment and why we should consider not only in vSphere Replication but also through other services as well depending on the data.  They also demonstrate how to import the Replication appliance into vSphere and configure it for use.   The guys also take some time to register the appliance into vCenter and show the steps for replicating a VM and talk about recovering a replica.",
          "length": "2801",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-3-vsphere_replication-070116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-3-vsphere_replication-070116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-7-3-vsphere_replication-070116-1-sm.jpg",
          "title": "vSphere Replication",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.383 --> 00:00:15.501\nWelcome back to another exciting\nepisode right here on ITPro TV.\n\n3\n00:00:15.501 --> 00:00:17.340\nI'm your host Ronnie Wong.\n\n4\n00:00:17.340 --> 00:00:19.290\nAnd today we're taking the VMwares, VCP6.\n\n5\n00:00:19.290 --> 00:00:23.270\nWe gonna get a little bit\ninto the idea of replication.\n\n6\n00:00:23.270 --> 00:00:27.090\nAnd who better to help us than Mr.\nDon Pezet, welcome back to our show.\n\n7\n00:00:27.090 --> 00:00:28.420\n>> Ronnie, thanks for\nhaving me back on the show.\n\n8\n00:00:28.420 --> 00:00:30.510\nAnd thanks for stepping in for\nWes who had to be out today.\n\n9\n00:00:30.510 --> 00:00:31.010\n>> No problem.\n\n10\n00:00:31.010 --> 00:00:33.570\n>> But in this episode, we are gonna\nbe tackling VSphere replication.\n\n11\n00:00:33.570 --> 00:00:37.570\nAnd I know we've seen a little bit of\nhow virtual machines can kind of be\n\n12\n00:00:37.570 --> 00:00:39.130\nbalanced between host and\n\n13\n00:00:39.130 --> 00:00:42.740\nhost especially if you had shared\nstorage with things like VMotion.\n\n14\n00:00:42.740 --> 00:00:47.370\nBut one of the problems with that\nsolution is that if you have a failure of\n\n15\n00:00:47.370 --> 00:00:52.550\nsome sort of the storage,\nyou only had one copy of that VM, right?\n\n16\n00:00:52.550 --> 00:00:55.910\nIt was nice that you had more than one\nhost that could fire up the VM, but\n\n17\n00:00:55.910 --> 00:00:58.800\nif none of those hosts are able to see\nthe storage, we have a real problem.\n\n18\n00:00:58.800 --> 00:01:00.010\nAnd so in that scenario,\n\n19\n00:01:00.010 --> 00:01:04.190\nwe need a copy of our virtual\nmachine to be stored somewhere else.\n\n20\n00:01:04.190 --> 00:01:08.690\nMaybe another SAN in the same building,\npreferably a SAN in some other building,\n\n21\n00:01:08.690 --> 00:01:10.940\nsomewhere else, geographically separated.\n\n22\n00:01:10.940 --> 00:01:15.540\nWell, we don't have a lot of functionality\nfor doing that natively right in vSphere.\n\n23\n00:01:15.540 --> 00:01:19.861\nSo what VMware has is this separate\nproduct called vSphere replication that\n\n24\n00:01:19.861 --> 00:01:22.627\nwill allow you to take\nthose virtual machines and\n\n25\n00:01:22.627 --> 00:01:24.530\nreplicate them somewhere else.\n\n26\n00:01:24.530 --> 00:01:26.420\nTheir storage and everything.\n\n27\n00:01:26.420 --> 00:01:28.990\nNow the biggest advantage\nof shared storage\n\n28\n00:01:28.990 --> 00:01:30.820\nis that you don't have to replicate.\n\n29\n00:01:30.820 --> 00:01:37.760\nThat I can have two, or ten or 32 hosts\nthat are all able to see the same storage.\n\n30\n00:01:37.760 --> 00:01:40.820\nSo if a VM needs to fail over from\none piece of hardware to another,\n\n31\n00:01:40.820 --> 00:01:41.820\nI don't have to do anything.\n\n32\n00:01:41.820 --> 00:01:43.190\nThe storage is already there.\n\n33\n00:01:43.190 --> 00:01:45.050\nI can already see\nthe virtual disk of that VM.\n\n34\n00:01:45.050 --> 00:01:48.110\nI don't have to do anything, all right.\n\n35\n00:01:48.110 --> 00:01:52.950\nBut if I have hosts in\ndifferent geographic locations.\n\n36\n00:01:52.950 --> 00:01:54.346\nOr even in the same location.\n\n37\n00:01:54.346 --> 00:01:57.340\nIf the SAN fails we can't\nsee that storage anymore, so\n\n38\n00:01:57.340 --> 00:01:59.470\nwe've got to maintain\na copy somewhere else.\n\n39\n00:01:59.470 --> 00:02:03.300\nAnd whenever you maintain a copy,\nthere's going to be latency.\n\n40\n00:02:03.300 --> 00:02:09.410\nTrying to keep two storage appliances\nin lockstep is really, really hard.\n\n41\n00:02:09.410 --> 00:02:11.940\nIn fact,\nthe only way I've ever seen that done is\n\n42\n00:02:11.940 --> 00:02:16.600\nif you get two SANs from the same vendor,\nso for example, two EMC SANs.\n\n43\n00:02:16.600 --> 00:02:19.250\nYou can set up RepliStore\non those EMC SANs and\n\n44\n00:02:19.250 --> 00:02:23.600\nput them in what's called lockstep, so\nthat when a write happens on one SAN,\n\n45\n00:02:23.600 --> 00:02:27.830\nthe write happens simultaneously on the\nother SAN, and the operating systems don't\n\n46\n00:02:27.830 --> 00:02:32.800\nget a response back until the write is\nsuccessfully committed on both SANs.\n\n47\n00:02:32.800 --> 00:02:36.470\nIf they're sitting right next to each\nother plugged into the same fiber channel\n\n48\n00:02:36.470 --> 00:02:39.180\nnetwork it actually works really well.\n\n49\n00:02:39.180 --> 00:02:43.310\nBut if one SAN is at your\nmain office in New York and\n\n50\n00:02:43.310 --> 00:02:48.220\nthe other SAN is at your disaster\nrecovery location in Los Angeles\n\n51\n00:02:48.220 --> 00:02:52.040\nwell it takes awhile to replicate\nthe write from one location to another.\n\n52\n00:02:52.040 --> 00:02:53.320\nSo what happens?\n\n53\n00:02:53.320 --> 00:02:57.960\nYou slow down, we slow down the writes\nto be able to handle that replication.\n\n54\n00:02:57.960 --> 00:02:58.920\nAnd that's a problem.\n\n55\n00:02:58.920 --> 00:03:02.310\nAnd so that's not really a viable\noption for most people, so\n\n56\n00:03:02.310 --> 00:03:07.320\ninstead we can leverage\nVMware's replication feature.\n\n57\n00:03:07.320 --> 00:03:10.340\nAnd what it does is it says, all right\nwe're not gonna maintain lock step,\n\n58\n00:03:10.340 --> 00:03:11.950\nthat's not gonna happen, right.\n\n59\n00:03:11.950 --> 00:03:14.730\nBut we're gonna try and\nstay as close as we can.\n\n60\n00:03:14.730 --> 00:03:17.290\nWe'll take a virtual machine and\nwe'll clone it.\n\n61\n00:03:17.290 --> 00:03:19.360\nWe'll make a copy of it to VMDKs and\n\n62\n00:03:19.360 --> 00:03:23.020\nwe're gonna store those out\nat this other location.\n\n63\n00:03:23.020 --> 00:03:24.090\nAnd then,\n\n64\n00:03:24.090 --> 00:03:28.360\nwhile the virtual machine's running,\nwe're gonna synchronize changes over.\n\n65\n00:03:28.360 --> 00:03:30.930\nAnd so as changes occur to the drive,\nwe'll sync them over.\n\n66\n00:03:30.930 --> 00:03:32.520\nWe're not gonna slow down the VM.\n\n67\n00:03:32.520 --> 00:03:35.960\nWe're not gonna make it wait for\nthe writes to commit on the remote end.\n\n68\n00:03:35.960 --> 00:03:38.690\nWe're just going to take the changes and\nship them over.\n\n69\n00:03:38.690 --> 00:03:42.510\nIf you ever have a failure, if you ever\nlose your storage appliance or your main\n\n70\n00:03:42.510 --> 00:03:47.600\ndata center fails, you can flip over to\nyour DR center and they'll already have\n\n71\n00:03:47.600 --> 00:03:51.600\na copy of the virtual machine storage,\nit just might be a little out of date.\n\n72\n00:03:51.600 --> 00:03:55.637\nAnd the question I always get is,\nhow out of date?\n\n73\n00:03:55.637 --> 00:03:56.670\nHow out of date are we talking about?\n\n74\n00:03:56.670 --> 00:03:58.180\nAnd unfortunately there's\nnot a single answer for\n\n75\n00:03:58.180 --> 00:04:00.410\nthat because it depends on two things.\n\n76\n00:04:00.410 --> 00:04:03.690\nIt depends on one, the amount of\nbandwidth that you've got, right?\n\n77\n00:04:03.690 --> 00:04:07.330\nThe more bandwidth you have,\nthe more data you can replicate over and\n\n78\n00:04:07.330 --> 00:04:09.300\nthe closer you're gonna stay to real time.\n\n79\n00:04:09.300 --> 00:04:14.140\nAnd then the second thing is,\nhow many changes are you making?\n\n80\n00:04:14.140 --> 00:04:18.020\nIf this is a web server, and it's got\na pretty much static web page on it and\n\n81\n00:04:18.020 --> 00:04:21.930\nwhat page you only update once a week or\nonce a month, well,\n\n82\n00:04:21.930 --> 00:04:25.530\nyour replica will probably be identical\nto the real one, and when you\n\n83\n00:04:25.530 --> 00:04:29.800\nfail over from production to disaster\nrecovery, you won't lose any data.\n\n84\n00:04:29.800 --> 00:04:34.010\nBut if it's a database server that's\nconstantly getting written to,\n\n85\n00:04:34.010 --> 00:04:37.760\nnow we've got a problem,\nnow the replica is out of date.\n\n86\n00:04:37.760 --> 00:04:39.920\nSo what happens is,\n\n87\n00:04:39.920 --> 00:04:43.210\ncompanies have to evaluate whether\nthe solution is even right for them.\n\n88\n00:04:43.210 --> 00:04:46.460\nIf it's a database server,\nlet's just use the example of Amazon.\n\n89\n00:04:46.460 --> 00:04:47.420\nRight?\nAmazon.com.\n\n90\n00:04:47.420 --> 00:04:48.690\nThey've got a web storefront.\n\n91\n00:04:48.690 --> 00:04:50.300\nYou've probably heard of it.\n\n92\n00:04:50.300 --> 00:04:54.700\nAnd they process millions of\ndollars of transactions per hours.\n\n93\n00:04:54.700 --> 00:04:58.275\nSo let's say their replica\nwas 15 minutes behind.\n\n94\n00:04:58.275 --> 00:05:02.795\nAnd they had to fail over to\na replica of their database server.\n\n95\n00:05:02.795 --> 00:05:06.595\nFor them losing 15 minutes of\norders I can't even imagine,\n\n96\n00:05:06.595 --> 00:05:09.415\nRonnie do you have any idea what\nthe monetary scale of that is?\n\n97\n00:05:09.415 --> 00:05:11.120\n>> I assume it's millions.\n\n98\n00:05:11.120 --> 00:05:11.980\n>> It's gotta be.\n\n99\n00:05:11.980 --> 00:05:15.920\nMaybe it depends on the day, Black Friday\nor whatever, it might be different.\n\n100\n00:05:15.920 --> 00:05:18.360\nBut you're talking about\na huge financial burden.\n\n101\n00:05:18.360 --> 00:05:23.010\nIf they're medical records and for\n15 minutes you lose data on a patient,\n\n102\n00:05:23.010 --> 00:05:26.450\nyou might lose the data or you've been\ngiven a dose of some medicine and\n\n103\n00:05:26.450 --> 00:05:27.780\nnow they get a second dose.\n\n104\n00:05:27.780 --> 00:05:29.460\nI mean the liability\nlawsuit's gonna be crazy.\n\n105\n00:05:29.460 --> 00:05:31.830\nSo for that type of environment, for\n\n106\n00:05:31.830 --> 00:05:36.240\ndatabase servers, VMware's replication\nis not gonna be the solution for you.\n\n107\n00:05:36.240 --> 00:05:37.000\nOkay.\n\n108\n00:05:37.000 --> 00:05:41.300\nBut if it's a standard file server,\nif it's a web server,\n\n109\n00:05:41.300 --> 00:05:45.435\nif it's that kind of system, VMware's\nreplication works out really well,\n\n110\n00:05:45.435 --> 00:05:48.335\nit can create that replica,\nhave it ready to go, and off you go.\n\n111\n00:05:48.335 --> 00:05:51.845\nNow, if you have a database,\nit doesn't mean you're out of luck, right?\n\n112\n00:05:51.845 --> 00:05:55.875\nAlmost every database vendor out there\nhas their own replication system.\n\n113\n00:05:55.875 --> 00:05:59.765\nAnd so what you're gonna do is, say\nyou're running Oracle, or Microsoft SQL,\n\n114\n00:05:59.765 --> 00:06:04.530\nor MySQL, or MariaDB, or\nwhatever is that the majority of them\n\n115\n00:06:04.530 --> 00:06:08.570\nhave where you can bring up two database\nservers in two different locations.\n\n116\n00:06:08.570 --> 00:06:12.480\nThey're independent machines in that they\nhave their own name, their own IP address,\n\n117\n00:06:12.480 --> 00:06:14.210\nthey're not clones of each other.\n\n118\n00:06:14.210 --> 00:06:16.350\nThey're two independent database servers.\n\n119\n00:06:16.350 --> 00:06:20.660\nBut then when you can create the database\nand replicate from one to the other,\n\n120\n00:06:20.660 --> 00:06:24.150\nwhen a database goes into one,\nthe update gets shipped to the other one.\n\n121\n00:06:24.150 --> 00:06:25.860\nThey call it transaction log shipping.\n\n122\n00:06:25.860 --> 00:06:29.920\nAlmost every vendor supports that,\nand so you can do the replica\n\n123\n00:06:29.920 --> 00:06:33.860\nright from within your database software\nand you'll be better off for that, okay.\n\n124\n00:06:33.860 --> 00:06:39.030\nSo understand that VMware's replication\nis not always the perfect solution, but\n\n125\n00:06:39.030 --> 00:06:41.750\nit is a solution and\none you should consider.\n\n126\n00:06:41.750 --> 00:06:44.907\nIt's also one that's on the exam,\n[LAUGH] so we wanna know about it and\n\n127\n00:06:44.907 --> 00:06:45.870\nsee how it works.\n\n128\n00:06:45.870 --> 00:06:46.910\nAll right.\n\n129\n00:06:46.910 --> 00:06:52.040\nThe first thing about VMware replication\nis that it is not included by default.\n\n130\n00:06:52.040 --> 00:06:55.690\nSo when you fire up a vCenter 6 machine\n\n131\n00:06:55.690 --> 00:06:57.870\nit doesn't have the replication feature,\nright.\n\n132\n00:06:57.870 --> 00:06:59.620\nYou can set up fail over VMs.\n\n133\n00:06:59.620 --> 00:07:00.840\nYou can set up that kind of thing but\n\n134\n00:07:00.840 --> 00:07:04.220\nit doesn't have the actual\nreplication feature built in.\n\n135\n00:07:04.220 --> 00:07:09.090\nWhat we have to do is we have to get the\nvSphere replication, apply it from VMware,\n\n136\n00:07:09.090 --> 00:07:13.020\nso they've got an OVF template that we\ncan download and we can import it in and\n\n137\n00:07:13.020 --> 00:07:14.590\nwhat it is is a Linux machine.\n\n138\n00:07:14.590 --> 00:07:16.325\nI believe it's running SUSE Linux.\n\n139\n00:07:16.325 --> 00:07:20.540\nAnd it's preconfigured with all\nof the vSphere settings it needs\n\n140\n00:07:20.540 --> 00:07:25.140\nto be able to integrate into vCenter and\nadd the replication services to it.\n\n141\n00:07:25.140 --> 00:07:28.160\nSo on the exam, what they want you\nto know is how to bring in that\n\n142\n00:07:28.160 --> 00:07:30.980\nappliance which is actually pretty easy,\nand then once you've\n\n143\n00:07:30.980 --> 00:07:34.120\ngot the appliance how to quickly set up\na replica which is also pretty easy too.\n\n144\n00:07:34.120 --> 00:07:36.100\nSo we're gonna run through\nthat here in the show.\n\n145\n00:07:36.100 --> 00:07:38.580\nRegardless of whether you use it in\nreal life, we do need to know this for\n\n146\n00:07:38.580 --> 00:07:39.490\nthe exam.\n\n147\n00:07:39.490 --> 00:07:44.155\nBut I will tell you for static machines,\nor machines where you can afford a little\n\n148\n00:07:44.155 --> 00:07:47.790\nbit of data loss, VCR replication\nis super easy to get set up and\n\n149\n00:07:47.790 --> 00:07:51.516\nit works really reliably and\nit integrates right into vCenter.\n\n150\n00:07:51.516 --> 00:07:55.819\nSo it's got a lot of good things going for\nit but in a I/O sensitive\n\n151\n00:07:55.819 --> 00:08:00.290\noperation like a database server,\nyou will wanna look elsewhere.\n\n152\n00:08:01.480 --> 00:08:03.860\nAll right, so let's take a look at this.\n\n153\n00:08:03.860 --> 00:08:07.030\nLet's see, I got a little note\nto talk about failback but\n\n154\n00:08:07.030 --> 00:08:09.390\nI'll talk about that later\nafter we get this kinda set up.\n\n155\n00:08:09.390 --> 00:08:13.640\nSo the first thing I need to do is I need\nto get vSphere's replication turned on.\n\n156\n00:08:13.640 --> 00:08:15.650\nOkay now, how do I know if\nI've already got it or not?\n\n157\n00:08:15.650 --> 00:08:18.070\nWell, I've got the vCenter\npulled up right here.\n\n158\n00:08:18.070 --> 00:08:22.062\nAnd, if you've already got it,\nyou'll see it with a menu item in here.\n\n159\n00:08:22.062 --> 00:08:24.620\nSee how I've got policies and\nprofiles, hybrid cog manager,\n\n160\n00:08:24.620 --> 00:08:29.010\nv realize orchestrater,\nI don't have vSphere application, right?\n\n161\n00:08:29.010 --> 00:08:30.650\nSo it's not installed on my system.\n\n162\n00:08:30.650 --> 00:08:32.490\nI can quickly spot that and it's missing.\n\n163\n00:08:32.490 --> 00:08:35.690\nSo kind of like if you watched\nour VMWare data protection or\n\n164\n00:08:35.690 --> 00:08:37.740\nVDP episode, same thing there, right?\n\n165\n00:08:37.740 --> 00:08:38.600\nWhen we installed VDP,\n\n166\n00:08:38.600 --> 00:08:42.960\nwe got a new entry in this menu, that's\nhow the replication will work, all right?\n\n167\n00:08:42.960 --> 00:08:45.900\nSo what I need to do is I\nneed to go to VMware and\n\n168\n00:08:45.900 --> 00:08:48.188\ndownload the vSphere\nreplication appliance.\n\n169\n00:08:48.188 --> 00:08:50.410\nIf you've purchased\nthe vSphere suite from them,\n\n170\n00:08:50.410 --> 00:08:51.880\nit'll be right in your Download Center.\n\n171\n00:08:51.880 --> 00:08:56.590\nAnd you can download it, I downloaded it\nbefore the show, now I need to import it.\n\n172\n00:08:56.590 --> 00:09:01.678\nNow, I used to import it right here\nfrom the web client because the VM ware,\n\n173\n00:09:01.678 --> 00:09:06.020\nvSphere web clients upload\nfeature was really to use.\n\n174\n00:09:06.020 --> 00:09:09.190\nIn newer versions,\nit's not so easy anymore.\n\n175\n00:09:09.190 --> 00:09:11.567\nSo there's a plug-in you have\nto install and the plug-in,\n\n176\n00:09:11.567 --> 00:09:13.110\nit really just doesn't seem to work.\n\n177\n00:09:13.110 --> 00:09:15.800\nBut if you're in an environment\nwhere it does work,\n\n178\n00:09:15.800 --> 00:09:19.660\nall you have to do is come in here and\ntell you wanna import a template.\n\n179\n00:09:19.660 --> 00:09:24.420\nSo you can go under hosts and\nclusters and you can find a host, or\n\n180\n00:09:24.420 --> 00:09:27.900\nyour data center if you've got\na cluster set up, either way, and\n\n181\n00:09:27.900 --> 00:09:32.180\nwhen you right click on that host\nyou'll see deploy an OVF template.\n\n182\n00:09:32.180 --> 00:09:35.140\nAnd so we can deploy that template\nright here onto this host and\n\n183\n00:09:35.140 --> 00:09:36.290\nget it up and running.\n\n184\n00:09:36.290 --> 00:09:38.910\nNow the problem I'm gonna\nbump into is that it's gonna\n\n185\n00:09:38.910 --> 00:09:41.740\ntell me that client integration\nplugin must be installed.\n\n186\n00:09:41.740 --> 00:09:45.790\nAnd I'll tell you, the client integration\nplugin is installed on my laptop.\n\n187\n00:09:45.790 --> 00:09:49.520\nIt just doesn't seem to work very well\non Chrome, or I'm on Vivaldi here, or\n\n188\n00:09:49.520 --> 00:09:50.550\nthe other browsers.\n\n189\n00:09:50.550 --> 00:09:52.840\nI haven't really gotten it to\nwork on any modern browser,\n\n190\n00:09:52.840 --> 00:09:54.160\neven though it's supposed to.\n\n191\n00:09:54.160 --> 00:09:56.130\nThey say that Firefox gives\nyou the best luck, but\n\n192\n00:09:56.130 --> 00:09:59.170\nI haven't gotten it to work in\nFirefox either, in the newer versions.\n\n193\n00:09:59.170 --> 00:10:01.950\nSo, when it comes to\ndeploying an OVF template,\n\n194\n00:10:01.950 --> 00:10:03.810\nI almost always jump over\nto the native client.\n\n195\n00:10:03.810 --> 00:10:07.530\nSo that's what I'm gonna do,\nI know I use the web client for almost\n\n196\n00:10:07.530 --> 00:10:11.320\nall of this series, but for this one time,\nI'm gonna jump over to the native client.\n\n197\n00:10:11.320 --> 00:10:13.340\nSo this is the vSphere native client.\n\n198\n00:10:13.340 --> 00:10:17.500\nIt doesn't need plugins, and so\nwe can get it installed really easy.\n\n199\n00:10:17.500 --> 00:10:21.120\nIt is done a little bit different,\nyou're gonna browse into vCenter, and\n\n200\n00:10:21.120 --> 00:10:23.730\nbrowse in your vCenter server,\nand down to your host.\n\n201\n00:10:23.730 --> 00:10:27.950\nBut if you right click, you'll notice\nthere's not a deploy OVF option.\n\n202\n00:10:29.000 --> 00:10:31.800\nInstead, it's tucked away\nunder the File menu up top.\n\n203\n00:10:31.800 --> 00:10:34.660\nIf you just go up here to File,\nyou'll see Deploy OVF Template.\n\n204\n00:10:34.660 --> 00:10:36.350\nSo it's kind of just moved\nto a different place.\n\n205\n00:10:36.350 --> 00:10:40.067\nAnd that's why I don't like to use\nthe native client if I can avoid it,\n\n206\n00:10:40.067 --> 00:10:43.663\ncuz everything's kind of moved\naround just enough to be annoying.\n\n207\n00:10:43.663 --> 00:10:46.838\nAll right, but when we go to deploy it,\nyou can just browse and\n\n208\n00:10:46.838 --> 00:10:50.929\nfind it on your hard drive, and what\nyou're looking for is this guy right here,\n\n209\n00:10:50.929 --> 00:10:53.151\nvSphere_Replication_OVF10.ovf.\n\n210\n00:10:53.151 --> 00:10:57.427\nThere's actually two different OVF\ntemplates that are available, one for\n\n211\n00:10:57.427 --> 00:11:01.790\nupgrades, and one for fresh installs,\nand so this is the fresh install one.\n\n212\n00:11:01.790 --> 00:11:04.340\nThe other one will actually be\nnoted with an upgrade name on it.\n\n213\n00:11:04.340 --> 00:11:06.660\nBut if you're just deploying it,\nthis is the one we want.\n\n214\n00:11:06.660 --> 00:11:09.640\nNow the OVF is made up of\nmore than just an OVF file.\n\n215\n00:11:09.640 --> 00:11:12.110\nThere's a couple of virtual hard\ndrives that come along with it.\n\n216\n00:11:12.110 --> 00:11:15.290\nSo let me show you that real quick\njust to make sure you've seen it.\n\n217\n00:11:15.290 --> 00:11:17.570\nI'll show you what I'm\nactually importing here.\n\n218\n00:11:19.110 --> 00:11:23.140\nAll right, when you download\nthe OVF from the VMware it'll be\n\n219\n00:11:23.140 --> 00:11:28.130\nin an archive file like a zip file,\nand these five files are what we need.\n\n220\n00:11:28.130 --> 00:11:30.860\nOkay, the OVF,\nthat's what I'm about to import.\n\n221\n00:11:30.860 --> 00:11:33.620\nBut if you look at it,\nit's only 300k in size,\n\n222\n00:11:33.620 --> 00:11:37.480\nit's just the configuration template for\nthe VM.\n\n223\n00:11:37.480 --> 00:11:40.960\nYou'll also have virtual hard drives.\n\n224\n00:11:40.960 --> 00:11:44.890\nNow, the virtual hard drives,\nif you look at it, there's two of them.\n\n225\n00:11:44.890 --> 00:11:47.580\nOne's 813 MBs, one's 300k.\n\n226\n00:11:47.580 --> 00:11:48.480\nThe 813 meg one?\n\n227\n00:11:48.480 --> 00:11:53.070\nThat's the one that actually has the Linux\ninstall and the replication software.\n\n228\n00:11:53.070 --> 00:11:54.510\nThe 300k one?\n\n229\n00:11:54.510 --> 00:11:58.910\nThat is a thin provision disk that's\ngoing to be where the replica's temporary\n\n230\n00:11:58.910 --> 00:11:59.990\nstorage is.\n\n231\n00:11:59.990 --> 00:12:02.970\nAnd it doesn't have any temporary data\nright now so it's actually empty, right?\n\n232\n00:12:02.970 --> 00:12:06.080\nSo there are two hard drives,\njust one of them happens to be empty.\n\n233\n00:12:06.080 --> 00:12:07.060\nIt's more of a placeholder.\n\n234\n00:12:08.760 --> 00:12:11.220\nThen we have our MF insert files,\nand those are for\n\n235\n00:12:11.220 --> 00:12:12.470\nthe security of the virtual machine.\n\n236\n00:12:12.470 --> 00:12:15.600\nWhen we spin it up, it's gonna have\na little template that we run through, and\n\n237\n00:12:15.600 --> 00:12:17.700\nit's got a certificate to be able\nto authenticate against this.\n\n238\n00:12:17.700 --> 00:12:21.160\nSo these are the five files that\nwe need to perform the import.\n\n239\n00:12:21.160 --> 00:12:23.810\nSo even though it only shows\nthat one file when I import it,\n\n240\n00:12:23.810 --> 00:12:25.530\nit's gotta have all five of those.\n\n241\n00:12:27.240 --> 00:12:32.270\nAll right, now because VMware developed\nthis template, they went the extra step\n\n242\n00:12:32.270 --> 00:12:35.760\nand made this one completely customizable\nright here through the import wizard.\n\n243\n00:12:35.760 --> 00:12:38.950\nSo what we're going to get is a really\nneat screen here in a second where we can\n\n244\n00:12:38.950 --> 00:12:41.290\ndefine things like what IP\naddress it's gonna have and\n\n245\n00:12:41.290 --> 00:12:42.910\nwhat name we want the VM is going to have.\n\n246\n00:12:42.910 --> 00:12:45.180\nSo you can really customize\nthis one a good bit.\n\n247\n00:12:47.000 --> 00:12:50.095\nI get my certificate screen and\nthis one is by VM.\n\n248\n00:12:50.095 --> 00:12:52.275\nWe're going to a VDP that\nwas actually from EMC.\n\n249\n00:12:52.275 --> 00:12:55.465\nSee how many acronyms I\ncan throw into this thing.\n\n250\n00:12:55.465 --> 00:12:58.135\nSo EMC developed the VDP side of things,\nbut\n\n251\n00:12:58.135 --> 00:13:00.595\nreplication was actually\ndeveloped by the VMware team.\n\n252\n00:13:00.595 --> 00:13:04.205\nAnd so it's signed, I've got it right\nhere and there's those two disks.\n\n253\n00:13:04.205 --> 00:13:07.575\nIt's telling me that the OS drive\nis going to take about 1.7 gigs,\n\n254\n00:13:07.575 --> 00:13:10.015\nand the back up drive is\ngoing to take 18 gigs.\n\n255\n00:13:10.015 --> 00:13:11.375\nAnd notice how it says thick provisioned.\n\n256\n00:13:12.750 --> 00:13:15.050\nWell we saw when we looked at\nthe hard drives of Indigo,\n\n257\n00:13:15.050 --> 00:13:17.050\nneither of them were thick provisioned,\nright?\n\n258\n00:13:17.050 --> 00:13:19.970\nBecause the biggest one\nI had was 800 megs.\n\n259\n00:13:19.970 --> 00:13:24.030\nSo in the template,\nit's compressed and thin provisioned.\n\n260\n00:13:24.030 --> 00:13:28.160\nBut when we deploy it,\nit's gonna do thick provisioned for\n\n261\n00:13:28.160 --> 00:13:30.660\nthe operating system and\nthin provision for the rest of the data.\n\n262\n00:13:30.660 --> 00:13:32.420\nOr actually I think it's the other\nway around, thin provision for\n\n263\n00:13:32.420 --> 00:13:34.280\nthe OS and thick for the data.\n\n264\n00:13:34.280 --> 00:13:35.970\nSo, we can still customize that.\n\n265\n00:13:35.970 --> 00:13:36.870\nYou can override these.\n\n266\n00:13:36.870 --> 00:13:38.439\nThis is just telling you what\nit's gonna be right now.\n\n267\n00:13:40.581 --> 00:13:42.990\nAll right, on our next screen\nwe've got our license agreement,\n\n268\n00:13:42.990 --> 00:13:46.000\nI think we've all seen enough of those,\nso let me just move past it.\n\n269\n00:13:46.000 --> 00:13:47.800\nAnd now it's gonna ask me\nthe important questions.\n\n270\n00:13:47.800 --> 00:13:51.140\nWhat do I wanna name the appliance and\nwhere do I want it to go, all right?\n\n271\n00:13:51.140 --> 00:13:53.597\nWell I've only got one datacenter,\nso that makes my choice easy.\n\n272\n00:13:53.597 --> 00:13:55.991\nYou could make the argument that hey,\nif I'm gonna replicate it,\n\n273\n00:13:55.991 --> 00:13:57.550\nI probably want more than one datacenter.\n\n274\n00:13:57.550 --> 00:13:59.600\nBut for\nright now we'll leave it right here.\n\n275\n00:13:59.600 --> 00:14:00.410\nSo I'm gonna go and import that.\n\n276\n00:14:00.410 --> 00:14:01.790\nYou can change the name\nto whatever you want.\n\n277\n00:14:01.790 --> 00:14:05.070\nI'm gonna leave mine as\nVisor Application Appliance.\n\n278\n00:14:05.070 --> 00:14:06.940\nAnd then the CPU's.\n\n279\n00:14:06.940 --> 00:14:11.600\nVMware recommends that when you\ndeploy this, you give it four vCPUs.\n\n280\n00:14:11.600 --> 00:14:15.360\nWhen it does this replication,\nthere's a lot of compression involved.\n\n281\n00:14:15.360 --> 00:14:17.850\nIt's compressing and\ndecompressing the data and\n\n282\n00:14:17.850 --> 00:14:21.230\nCPUs directly impact how\nquickly it can do that.\n\n283\n00:14:21.230 --> 00:14:24.350\nThe faster it can do it,\nthe lower the latency is on your replica.\n\n284\n00:14:24.350 --> 00:14:25.870\nSo they recommend four or more.\n\n285\n00:14:27.082 --> 00:14:29.830\nUnfortunately in my lab environment,\nCPUs are at a bit of a premium so\n\n286\n00:14:29.830 --> 00:14:31.010\nI'm gonna drop that down to two.\n\n287\n00:14:31.010 --> 00:14:34.670\nIt will let me do it, but it wants more.\n\n288\n00:14:34.670 --> 00:14:38.670\nAnd I can't choose more than four because\nI only got four CPUs, but if you had 8 or\n\n289\n00:14:38.670 --> 00:14:41.310\n12 you could choose those\nhigher numbers too.\n\n290\n00:14:41.310 --> 00:14:43.400\nBut I'm gonna drop mine down to 2.\n\n291\n00:14:43.400 --> 00:14:48.190\nAll right, then it's asking me\nwhere I wanna store the data and\n\n292\n00:14:48.190 --> 00:14:51.120\nI've got a couple of different\ndata stores that I can pick from.\n\n293\n00:14:51.120 --> 00:14:53.260\nI'm gonna drop mine onto\na local data storage just so\n\n294\n00:14:53.260 --> 00:14:56.560\nit's a little bit faster but normally\nwe'd put in on a shared data store, so\n\n295\n00:14:56.560 --> 00:15:00.940\nthat if one host failed the replication\nappliance could jump up somewhere else.\n\n296\n00:15:00.940 --> 00:15:04.290\nIf the replication appliance goes off\nline whats gonna happen to our replicas?\n\n297\n00:15:04.290 --> 00:15:05.700\nThey're gonna stop replicating.\n\n298\n00:15:05.700 --> 00:15:07.588\nThey'll still exist,\nthey'll still be over there.\n\n299\n00:15:07.588 --> 00:15:11.270\nI could failover to them but they're gonna\nbe out of date, so I wanna have redundancy\n\n300\n00:15:11.270 --> 00:15:15.000\non the replication appliance itself and\nmaking sure it's on shared data storage.\n\n301\n00:15:15.000 --> 00:15:17.640\nIt will help you with that and you can\nput it in the cluster and do vMotion and\n\n302\n00:15:17.640 --> 00:15:18.330\nall that other good stuff.\n\n303\n00:15:19.560 --> 00:15:21.520\nBut for speed's sake,\nI'm gonna go with a local data store.\n\n304\n00:15:23.430 --> 00:15:26.710\nThen here's where I can override\nthe thin or thick provisioning.\n\n305\n00:15:26.710 --> 00:15:28.980\nSo it's asking about my local data store.\n\n306\n00:15:28.980 --> 00:15:33.230\nI've got 500 gigs of space on it right\nnow and I can do thick provisioned.\n\n307\n00:15:33.230 --> 00:15:34.530\nI'm gonna go ahead and\ndo thin provisioned.\n\n308\n00:15:34.530 --> 00:15:35.860\nIn real life land,\n\n309\n00:15:35.860 --> 00:15:38.650\nany time you're in production you\nalways wanna do thick provisioned.\n\n310\n00:15:38.650 --> 00:15:41.832\nSo between those you've got lazy and\neager zeroed.\n\n311\n00:15:41.832 --> 00:15:44.752\nLazy zeroed will thick provision\nthe drive very quickly,\n\n312\n00:15:44.752 --> 00:15:48.337\ncuz it's gonna lay out the beginning and\nend of the disc and that's it.\n\n313\n00:15:48.337 --> 00:15:51.851\nEager Zeroed is gonna go through and\ntry and zero out every sector and\n\n314\n00:15:51.851 --> 00:15:53.268\nthat takes longer.\n\n315\n00:15:53.268 --> 00:15:56.140\nWhen you Thick Provision Lazy,\nit's gonna zero them out too, but\n\n316\n00:15:56.140 --> 00:15:57.410\njust as you access the disk.\n\n317\n00:15:57.410 --> 00:16:00.190\nSo it kinda spreads it out over\ntime versus doing it all right now.\n\n318\n00:16:00.190 --> 00:16:01.200\nSo it's up to you which\none you wanna choose.\n\n319\n00:16:04.210 --> 00:16:05.630\nAll right, then on the network site.\n\n320\n00:16:05.630 --> 00:16:07.610\nNow, this is a really important one.\n\n321\n00:16:07.610 --> 00:16:10.180\nIt's gonna ask you to pick which\nnetwork you're plugging into.\n\n322\n00:16:10.180 --> 00:16:12.080\nAnd I'm gonna plug mine\ninto my VM network.\n\n323\n00:16:12.080 --> 00:16:14.180\nYou may have more than\none network defined,\n\n324\n00:16:14.180 --> 00:16:16.180\nand if you do you can pick between them,\nright.\n\n325\n00:16:16.180 --> 00:16:19.320\nThese are our port groups that we defined,\nso you basically pick\n\n326\n00:16:19.320 --> 00:16:23.200\nbetween which virtual network and\nport groups you're gonna end up on.\n\n327\n00:16:23.200 --> 00:16:26.950\nWhen you define this, we'll see on\nthe next screen, it's gonna ask me for\n\n328\n00:16:26.950 --> 00:16:30.358\nan IP address for\nmy virtual machine and that's it.\n\n329\n00:16:30.358 --> 00:16:35.208\nIt's not gonna ask me for a subnet mask or\na router or a DNS server.\n\n330\n00:16:35.208 --> 00:16:37.630\nIt's not gonna ask all those other\ndetails that we know it needs.\n\n331\n00:16:37.630 --> 00:16:39.150\nIt's not gonna ask for them.\n\n332\n00:16:39.150 --> 00:16:41.829\nAnd the reason is it's gonna rely on\n\n333\n00:16:41.829 --> 00:16:46.130\nnetwork properties deployed\nthrough a network policy.\n\n334\n00:16:46.130 --> 00:16:47.080\nSomewhere in here it says that.\n\n335\n00:16:47.080 --> 00:16:49.001\nIt's warning me about it.\n\n336\n00:16:49.001 --> 00:16:50.440\nYou know what?\nIt actually doesn't say it,\n\n337\n00:16:50.440 --> 00:16:53.660\nit's just telling me it's\nexpecting us to have an IP pool.\n\n338\n00:16:53.660 --> 00:16:56.380\nWhat it really needs is\na network configuration policy.\n\n339\n00:16:56.380 --> 00:17:00.070\nAll right, so if I deploy it right\nout of the box, the network is\n\n340\n00:17:00.070 --> 00:17:03.270\nprobably not gonna work on it unless I\nhave a network policy, so we'll check.\n\n341\n00:17:03.270 --> 00:17:06.611\nI don't think I have a network policy\non mine so we'll have to create one.\n\n342\n00:17:06.611 --> 00:17:09.320\nBut I'm gonna ignore that error for\nnow and just move forward.\n\n343\n00:17:09.320 --> 00:17:11.030\nThen it's gonna ask about the IP address.\n\n344\n00:17:11.030 --> 00:17:12.890\nAm I doing DHCP?\n\n345\n00:17:12.890 --> 00:17:16.950\nAm I doing a transient IP that I get\nwhen I boot up and then I try and keep.\n\n346\n00:17:16.950 --> 00:17:17.960\nOr am I doing a fixed IP?\n\n347\n00:17:17.960 --> 00:17:20.440\nYou almost always wanna do\na fixed IP on a server.\n\n348\n00:17:21.620 --> 00:17:22.290\nAnd I'm doing IPv4.\n\n349\n00:17:22.290 --> 00:17:24.760\nIt does support IPv6, but\nI'm gonna stick with IPv4.\n\n350\n00:17:27.020 --> 00:17:29.410\nNow it's gonna ask me for\nthe password of my system, right.\n\n351\n00:17:29.410 --> 00:17:33.080\nThe default user is root and then I\nchoose what I want the password to be.\n\n352\n00:17:33.080 --> 00:17:35.130\nSo I'll get that punched in.\n\n353\n00:17:35.130 --> 00:17:37.301\nA time server, this is really important.\n\n354\n00:17:37.301 --> 00:17:39.310\nActually I should have\nmentioned this earlier.\n\n355\n00:17:39.310 --> 00:17:44.290\nFor vSphere replication to work,\nthe time server is super important.\n\n356\n00:17:44.290 --> 00:17:46.980\nHow does it recognize whether a virtual\nmachine is out of date or not?\n\n357\n00:17:46.980 --> 00:17:49.940\nHow does it recognize what\ndata is new versus old?\n\n358\n00:17:49.940 --> 00:17:51.080\nIt's gotta have a time server.\n\n359\n00:17:51.080 --> 00:17:52.460\nYou've gotta have one set.\n\n360\n00:17:52.460 --> 00:17:56.160\nIf you don't set up proper time server,\nuser application actually doesn't work,\n\n361\n00:17:56.160 --> 00:17:57.520\nit will not work.\n\n362\n00:17:57.520 --> 00:18:01.550\nSame thing goes for DNS resolution,\nit needs to be able to resolve DNS names.\n\n363\n00:18:01.550 --> 00:18:03.270\nSo if you've got time problems or\n\n364\n00:18:03.270 --> 00:18:06.750\nif you've got name look up problems,\ndon't expect these applications to work.\n\n365\n00:18:06.750 --> 00:18:09.020\nSo make sure you've got\nthose squared away first.\n\n366\n00:18:09.020 --> 00:18:13.597\nI'm going to use a public time server,\nbut you probably have\n\n367\n00:18:13.597 --> 00:18:18.461\na private one on your network,\nI'll just use pool.ntp.org.\n\n368\n00:18:18.461 --> 00:18:21.040\nAll right, and then it's asking for\na management IP address.\n\n369\n00:18:21.040 --> 00:18:24.910\nNow here's that part I was\nmentioning where it's not asking for\n\n370\n00:18:24.910 --> 00:18:28.984\na subnet mask, it's not asking for\na default gateway, a DNS server.\n\n371\n00:18:28.984 --> 00:18:30.790\nIt's not asking for any of that.\n\n372\n00:18:30.790 --> 00:18:32.700\nWe know it needs it but\nit's not asking for it,\n\n373\n00:18:32.700 --> 00:18:37.910\nit expects to get it from a policy which,\nkind of annoying.\n\n374\n00:18:37.910 --> 00:18:39.670\nI kind of wish they would just\nput the options there, but\n\n375\n00:18:39.670 --> 00:18:41.400\neither way we'll create a policy.\n\n376\n00:18:41.400 --> 00:18:43.970\nAll right, last, it's asking me about\nwhether I wanna register the extension\n\n377\n00:18:43.970 --> 00:18:46.730\nwith the vSphere web client,\nwhich we certainly do, so\n\n378\n00:18:46.730 --> 00:18:49.270\nit's got that vCenter extension, vService.\n\n379\n00:18:49.270 --> 00:18:50.270\nWe definitely want that.\n\n380\n00:18:50.270 --> 00:18:53.330\nYou can choose to select your\nprovider if you have some alternate\n\n381\n00:18:53.330 --> 00:18:55.230\nweb management software that you're using.\n\n382\n00:18:55.230 --> 00:18:59.550\nMost people don't but maybe you've got\nVim or one of those other products that\n\n383\n00:18:59.550 --> 00:19:01.840\nare out there and you can choose\nthose if they're registered.\n\n384\n00:19:01.840 --> 00:19:03.489\nI only have vCenter so I'll choose that.\n\n385\n00:19:05.060 --> 00:19:06.070\nAnd then we can finish that out.\n\n386\n00:19:06.070 --> 00:19:08.200\nNow it's got the option to\npower it on after deployment.\n\n387\n00:19:08.200 --> 00:19:10.450\nI'm not gonna do that cuz I\nknow the network is broken.\n\n388\n00:19:10.450 --> 00:19:14.739\nI know the network is not gonna work so\nI'm gonna go ahead and finish that and\n\n389\n00:19:14.739 --> 00:19:16.521\nit's gonna deploy it, okay?\n\n390\n00:19:16.521 --> 00:19:18.304\nI say I know it's not gonna work,\n\n391\n00:19:18.304 --> 00:19:21.550\nit could potentially work\nIf I have a network policy.\n\n392\n00:19:21.550 --> 00:19:24.730\nSo while that's deploying, let me\njump back over to my web client, and\n\n393\n00:19:24.730 --> 00:19:26.800\nI'm gonna see if I have\none of those policies.\n\n394\n00:19:26.800 --> 00:19:30.230\nAll right, network policies are pretty\ncool because they provide the information\n\n395\n00:19:30.230 --> 00:19:31.770\nlike a DACP server would.\n\n396\n00:19:31.770 --> 00:19:34.570\nBut they can provide it even\nwhen you're not using DACP so\n\n397\n00:19:34.570 --> 00:19:35.980\nit's a neat thing to have.\n\n398\n00:19:35.980 --> 00:19:40.475\nIf I go under Networking,\nand I find my VM network.\n\n399\n00:19:40.475 --> 00:19:42.080\nSo here's my VM network.\n\n400\n00:19:42.080 --> 00:19:48.550\nI can go to Manage >\nNetwork Protocol Profile > IPv4.\n\n401\n00:19:48.550 --> 00:19:51.070\nAnd I can see I do not currently\nhave an org protocol profile.\n\n402\n00:19:52.170 --> 00:19:53.266\nSo that VM has got to boot up.\n\n403\n00:19:53.266 --> 00:19:56.930\nIt's got its IP, it knows what it wants,\nbut it doesn't have all the other data.\n\n404\n00:19:56.930 --> 00:19:58.420\nSo I need to create a new one.\n\n405\n00:19:58.420 --> 00:20:02.109\nSo I'm going to go ahead and whip one up\nright here to be able to account for that.\n\n406\n00:20:03.110 --> 00:20:07.400\nNow to make one, what you'll see\nis way over here I've got this\n\n407\n00:20:07.400 --> 00:20:11.850\nlittle chain where it says, associate a\nnetwork profile with the selected network.\n\n408\n00:20:11.850 --> 00:20:15.350\nI'm gonna click on that and\nI don't have a network profile, so\n\n409\n00:20:15.350 --> 00:20:16.960\nI'm gonna create a new one.\n\n410\n00:20:16.960 --> 00:20:20.920\nAnd so we'll just walk through\nthe wizard to get that created and\n\n411\n00:20:20.920 --> 00:20:21.570\nwe can give it a name.\n\n412\n00:20:21.570 --> 00:20:27.530\nI'm gonna call mine my VM Network Profile,\nname it something that you can remember.\n\n413\n00:20:29.310 --> 00:20:33.180\nAnd then I can give it the subnet\nmask that it's going to use, right.\n\n414\n00:20:33.180 --> 00:20:37.531\nSo this is going to be, sorry,\nI need to, this is my subnet right here.\n\n415\n00:20:37.531 --> 00:20:41.871\nI need to give it the IP range, so\nthis is gonna be in the 192.168.0 network\n\n416\n00:20:41.871 --> 00:20:45.650\nthat I've been using and\nit's a /24 so I can see the range.\n\n417\n00:20:45.650 --> 00:20:47.870\nI'm gonna give it the gateway to use.\n\n418\n00:20:47.870 --> 00:20:49.890\nSo there's the gateway that I'm using.\n\n419\n00:20:49.890 --> 00:20:53.160\nIf there's a DHCP server, I can tell it,\nhey, there is one present.\n\n420\n00:20:53.160 --> 00:20:55.390\nYou can use it or I can ignore that.\n\n421\n00:20:55.390 --> 00:20:57.492\nThe DNS servers that I want to use.\n\n422\n00:20:57.492 --> 00:20:59.620\nSo I I can punch those in.\n\n423\n00:20:59.620 --> 00:21:03.330\nAnd you can separate them by comma or\nspace if you wanna add more.\n\n424\n00:21:03.330 --> 00:21:07.020\nI can define an IP pool\nto give out IP addresses.\n\n425\n00:21:07.020 --> 00:21:10.590\nMy VM has a static IP, so\nI don't actually have to give out any IPs.\n\n426\n00:21:10.590 --> 00:21:12.870\nI really just cared about\nthe DNS server and the gateway.\n\n427\n00:21:12.870 --> 00:21:14.680\nThat was really all I cared about.\n\n428\n00:21:14.680 --> 00:21:17.589\nBut we can set up a range\nof IPs if you want.\n\n429\n00:21:18.600 --> 00:21:22.380\nIt's got kind of a weird notation,\nnotice this little hash mark that it uses?\n\n430\n00:21:22.380 --> 00:21:24.550\nAnd basically what you're doing is\nyou're specifying the first IP, and\n\n431\n00:21:24.550 --> 00:21:28.850\nthen you do a hash mark, and\nhow many IPs after that you wanna assign.\n\n432\n00:21:28.850 --> 00:21:32.300\nSo maybe I wanna do ten IPs, so\nthis would be 220 through 230, and\n\n433\n00:21:32.300 --> 00:21:35.930\nyou can define it that way, all right?\n\n434\n00:21:37.700 --> 00:21:39.990\nAfter that if you do an IPv6\nyou can define those.\n\n435\n00:21:39.990 --> 00:21:42.160\nI didn't do IPv6 so\nI'm just going to skip over that one.\n\n436\n00:21:43.410 --> 00:21:45.570\nWait, did I hit, there we go.\n\n437\n00:21:45.570 --> 00:21:48.210\nThere's little checkmark here,\nenable IP pool.\n\n438\n00:21:48.210 --> 00:21:49.470\nThat's kind of important, right.\n\n439\n00:21:49.470 --> 00:21:51.400\nIf we don't check that,\nthis whole thing doesn't work.\n\n440\n00:21:51.400 --> 00:21:55.020\nSo I need that turned on and in IPv6 I was\njust making sure I hadn't checked that.\n\n441\n00:21:57.150 --> 00:21:58.480\nThen anything else we wanna provide.\n\n442\n00:21:58.480 --> 00:22:02.101\nIf we have DNS domain, so\nwe've been using lab.itpro.tv.\n\n443\n00:22:02.101 --> 00:22:06.174\nIf we've got a host prefix for\nthe hostname, you can specify that,\n\n444\n00:22:06.174 --> 00:22:08.770\nDNS search path and an HTTP proxy.\n\n445\n00:22:08.770 --> 00:22:09.535\nI don't need any of that.\n\n446\n00:22:09.535 --> 00:22:11.045\nSo we'll go in and finish that up.\n\n447\n00:22:11.045 --> 00:22:12.425\nAnd now I got a profile.\n\n448\n00:22:12.425 --> 00:22:16.365\nAnd what's important is when that virtual\nmachine comes on it's got an IP and\n\n449\n00:22:16.365 --> 00:22:20.225\nnow it'll be able to get a subnet mask,\ndefault gateway, DNS server,\n\n450\n00:22:20.225 --> 00:22:25.487\nall those other information, just like\nyou could from a DHCP server, all right.\n\n451\n00:22:25.487 --> 00:22:28.526\nAnd my screen is taking\nits time to refresh so\n\n452\n00:22:28.526 --> 00:22:31.003\nlet me just manually refresh this.\n\n453\n00:22:31.003 --> 00:22:35.657\nAnd I wanna make sure, there it is, that\nthat policy shows up and there it goes.\n\n454\n00:22:35.657 --> 00:22:38.107\nOkay, so we should be good to go now\nwhen that virtual machine is ready.\n\n455\n00:22:38.107 --> 00:22:38.997\nLet's go check on our VM.\n\n456\n00:22:40.430 --> 00:22:42.190\nAll right, looks like our VM is deployed.\n\n457\n00:22:42.190 --> 00:22:43.140\nSo I can see it right here,\n\n458\n00:22:43.140 --> 00:22:46.380\nvSphere replication and\nI don't need the native client anymore.\n\n459\n00:22:46.380 --> 00:22:50.920\nIf I go back to my web client,\nI should be able to go to my homepage and\n\n460\n00:22:50.920 --> 00:22:56.990\ngo under VMs and templates and there's\nthe vSphere replication right there, okay.\n\n461\n00:22:56.990 --> 00:22:58.020\nNow I'm not done.\n\n462\n00:22:58.020 --> 00:23:00.780\nYou probably noticed back on the homepage,\nI don't have replication\n\n463\n00:23:00.780 --> 00:23:03.730\nshowing up here yet, and that's cuz I\nhaven't even powered on the machine.\n\n464\n00:23:03.730 --> 00:23:06.860\nAnd here is a little wizard that we\nneed to run through so I'm gonna go and\n\n465\n00:23:06.860 --> 00:23:12.000\npull that machine up and\nwe'll go ahead and power the thing on.\n\n466\n00:23:15.040 --> 00:23:17.600\nSo we can see it's turned off right now so\nI'm gonna power that one on.\n\n467\n00:23:20.790 --> 00:23:24.276\nAnd if I screwed up my network policy,\nI'll see a little warning appear here when\n\n468\n00:23:24.276 --> 00:23:26.560\nit tells me that it's\nnot configured right.\n\n469\n00:23:26.560 --> 00:23:29.260\nBut it should come up and\nsee the network and\n\n470\n00:23:29.260 --> 00:23:30.700\nhave the other information that it needs.\n\n471\n00:23:30.700 --> 00:23:32.640\nSo I'm just gonna give it\na moment while it does that.\n\n472\n00:23:32.640 --> 00:23:34.490\nLet me refresh my screen.\n\n473\n00:23:34.490 --> 00:23:36.580\nThere we go.\nSo it's booting in the background.\n\n474\n00:23:36.580 --> 00:23:39.460\nAnd I'm gonna have to relaunch\nthis console, so let me do that.\n\n475\n00:23:40.890 --> 00:23:42.616\nThere we go and it's booting up.\n\n476\n00:23:42.616 --> 00:23:43.994\nIt does boot Linux.\n\n477\n00:23:43.994 --> 00:23:46.010\nIt's completely configured\nby VMware though so\n\n478\n00:23:46.010 --> 00:23:48.132\nyou don't need to know\na single thing about Linux.\n\n479\n00:23:48.132 --> 00:23:51.135\nIt's gonna boot up And\nwhen it's done it's gonna be ready for\n\n480\n00:23:51.135 --> 00:23:52.358\nus to start managing it.\n\n481\n00:23:52.358 --> 00:23:55.210\nSo we just need to give it\na moment while it does that.\n\n482\n00:23:55.210 --> 00:23:59.270\nAnd as soon as it registers in\nwith our vCenter deployment\n\n483\n00:23:59.270 --> 00:24:01.200\nthen it's gonna be connected and\n\n484\n00:24:01.200 --> 00:24:05.750\nwe'll be able to configure everything else\nright from our native vSphere web client.\n\n485\n00:24:05.750 --> 00:24:07.790\nSo that'll be kind of convenient.\n\n486\n00:24:07.790 --> 00:24:08.600\nSo it does take a moment.\n\n487\n00:24:08.600 --> 00:24:11.872\nSee how it says waiting for\nmandatory services ETH0.\n\n488\n00:24:11.872 --> 00:24:14.462\nSo it's booting my ethernet adapter,\nand it's looking for\n\n489\n00:24:14.462 --> 00:24:17.511\nthose settings that come from\nthe network configuration profile, and\n\n490\n00:24:17.511 --> 00:24:20.990\nas soon as that's done it will move\nforward and continue with the boot.\n\n491\n00:24:20.990 --> 00:24:23.160\nThe first boot can take a little while.\n\n492\n00:24:23.160 --> 00:24:26.020\nI had a few failures that went by so\nfast I couldn't see it.\n\n493\n00:24:26.020 --> 00:24:28.460\nBut I did for a brief moment\nthere see the IP address and\n\n494\n00:24:28.460 --> 00:24:30.700\nit did have the subnet mask and\nit did have DNS.\n\n495\n00:24:30.700 --> 00:24:34.100\nSo we'll just need to make sure we don't\nhave any errors after it fully boots.\n\n496\n00:24:34.100 --> 00:24:36.664\nA lot of times those errors are just\nindicating that the drives aren't ready.\n\n497\n00:24:36.664 --> 00:24:38.320\nAnd it's about to get the drives ready for\nus.\n\n498\n00:24:38.320 --> 00:24:39.770\nSee how it's generating a certificate.\n\n499\n00:24:39.770 --> 00:24:42.180\nIt's still doing work\nduring this first boot.\n\n500\n00:24:42.180 --> 00:24:45.570\nSo don't freak out if you get a few\nerrors, you might just need to wait.\n\n501\n00:24:46.870 --> 00:24:51.390\nAll right so that one is almost done, I\nknow it kinda seems like it's just sitting\n\n502\n00:24:51.390 --> 00:24:55.770\nhere idling but it took it a moment\nto generate that SSL certificate and\n\n503\n00:24:55.770 --> 00:24:58.620\nnow it's applying that SSL certificate and\nrunning a few other scripts.\n\n504\n00:24:58.620 --> 00:25:01.770\nAnd all we see Is this little\ncursors just kind of sitting here.\n\n505\n00:25:01.770 --> 00:25:04.286\nThere we go.\nVM reconfiguration results success,\n\n506\n00:25:04.286 --> 00:25:07.170\nit's going through and it is doing things.\n\n507\n00:25:07.170 --> 00:25:07.940\nWe just need to wait.\n\n508\n00:25:07.940 --> 00:25:11.810\nThis is the hardest part for\nme Ronnie, just the patience needed.\n\n509\n00:25:11.810 --> 00:25:14.330\nBut we'll give it a moment,\nand as soon as it's done,\n\n510\n00:25:14.330 --> 00:25:17.960\nif I do remember it does do one more\nreboot but we'll see here in a minute.\n\n511\n00:25:17.960 --> 00:25:21.960\nAnd then it should be ready to rock,\nso we'll give it a chance to do that.\n\n512\n00:25:21.960 --> 00:25:24.680\n>> Now Don, you had mentioned earlier\nabout failover that you were gonna come\n\n513\n00:25:24.680 --> 00:25:25.390\nback and address that.\n\n514\n00:25:25.390 --> 00:25:27.300\nIs that a good time to talk about it now,\nor do we wanna wait?\n\n515\n00:25:27.300 --> 00:25:28.500\n>> Yeah, while we're waiting on this.\n\n516\n00:25:28.500 --> 00:25:31.180\nSo the neat thing about\nvSphere replication\n\n517\n00:25:31.180 --> 00:25:34.180\nis that it can set up where you have\na VM running in one location and\n\n518\n00:25:34.180 --> 00:25:36.550\nit replicates it somewhere else,\nthat's great.\n\n519\n00:25:36.550 --> 00:25:39.933\nAnd if the primary one fails, you can\nautomatically flip over to the other one,\n\n520\n00:25:39.933 --> 00:25:41.919\nor you can manually flip\nover to the other one.\n\n521\n00:25:41.919 --> 00:25:43.940\nSo that's called fail over.\n\n522\n00:25:43.940 --> 00:25:46.210\nBut what happens if there's a failure.\n\n523\n00:25:46.210 --> 00:25:47.760\nYour main data center goes down.\n\n524\n00:25:47.760 --> 00:25:49.694\nSo you fail over to the other side.\n\n525\n00:25:49.694 --> 00:25:51.430\nAnd then you fix your main data center.\n\n526\n00:25:51.430 --> 00:25:53.520\nYour main data center comes back on line.\n\n527\n00:25:53.520 --> 00:25:57.210\nWell that's when you need to\ndo what's called failing back.\n\n528\n00:25:57.210 --> 00:26:00.640\nWell, Vsphere replication\ndoesn't support failing back.\n\n529\n00:26:00.640 --> 00:26:04.290\nIt only supports failing over,\nnot fail back.\n\n530\n00:26:04.290 --> 00:26:05.470\nAnd the reason for\n\n531\n00:26:05.470 --> 00:26:10.910\nthat is, once you've failed over changes\nare happening on the other side.\n\n532\n00:26:10.910 --> 00:26:14.761\nWhen you restore your primary site,\nit's now the one that's out of date.\n\n533\n00:26:14.761 --> 00:26:18.410\nYou don't wanna fail back to\na system that's out of date, right?\n\n534\n00:26:18.410 --> 00:26:21.040\nThat would not be good,\nso it doesn't do it.\n\n535\n00:26:21.040 --> 00:26:23.080\nSo if you fail over.\n\n536\n00:26:23.080 --> 00:26:26.890\nThe way you fail back is that you\ndelete the replica settings, right,\n\n537\n00:26:26.890 --> 00:26:28.808\nthe replication settings,\nyou delete those.\n\n538\n00:26:28.808 --> 00:26:32.400\nAnd then you recreate them\nin the other direction,\n\n539\n00:26:32.400 --> 00:26:35.965\nwhere you replicate from\nDR back to production.\n\n540\n00:26:35.965 --> 00:26:37.655\nSo now production is like the backups.\n\n541\n00:26:37.655 --> 00:26:39.155\nNow we're replicating that way.\n\n542\n00:26:39.155 --> 00:26:43.675\nAnd once they're in sync,\nthen you fail over, back into production.\n\n543\n00:26:43.675 --> 00:26:45.965\nNow you're not done right,\nbecause once you're back in production,\n\n544\n00:26:45.965 --> 00:26:51.035\nyou gotta delete the replica again and\nput the replication back in place,\n\n545\n00:26:51.035 --> 00:26:54.345\ngoing back the other direction,\nto replicate it back out again.\n\n546\n00:26:54.345 --> 00:26:57.725\nSo, you end up with three\ndifferent replication settings,\n\n547\n00:26:57.725 --> 00:27:00.020\nthe original ones when you failed over.\n\n548\n00:27:00.020 --> 00:27:03.182\nThe new ones to get you to fail back and\nthen a third one to put everything\n\n549\n00:27:03.182 --> 00:27:06.899\nback to the way that it used to be where\nyou're replicating from production to DR.\n\n550\n00:27:06.899 --> 00:27:11.527\nSo it's a little bit quirky, but it puts\nyou in control of when you fail back and\n\n551\n00:27:11.527 --> 00:27:12.450\nyou need that.\n\n552\n00:27:12.450 --> 00:27:13.909\nWhen you failed over, you need that.\n\n553\n00:27:15.010 --> 00:27:16.770\nAll right the Virtual Machine did finish.\n\n554\n00:27:16.770 --> 00:27:20.410\nAnd it's displaying the screen that most\nof us will leave our appliance setting on.\n\n555\n00:27:20.410 --> 00:27:23.270\nIt's got a nice little\nnote here letting me know\n\n556\n00:27:23.270 --> 00:27:26.970\nthat if I want to manage this device,\nI need to browse to this IP.\n\n557\n00:27:26.970 --> 00:27:31.010\nAnd here's the IP of my system, which is\n205 and then the port number which I'm\n\n558\n00:27:31.010 --> 00:27:33.990\ngonna write down here because I always\nforget this one just so I've got it.\n\n559\n00:27:33.990 --> 00:27:37.640\nSo I can browse right to that address\nto get this thing set up and so\n\n560\n00:27:37.640 --> 00:27:40.150\nthat's exactly what I'm gonna do.\n\n561\n00:27:40.150 --> 00:27:46.943\nI'm gonna browse to 192.168.0.205:5480.\n\n562\n00:27:46.943 --> 00:27:48.530\nAnd we're gonna browse to that webpage.\n\n563\n00:27:48.530 --> 00:27:50.790\nI'm getting a warning because I\ndon't trust that certificate but\n\n564\n00:27:50.790 --> 00:27:52.980\nI'm gonna go ahead and do it anyway.\n\n565\n00:27:52.980 --> 00:27:56.580\nAnd now we get where we can\nget logged in to this system.\n\n566\n00:27:56.580 --> 00:28:00.864\nI'm gonna provide it the user name Root\nbecause that's the default user name and\n\n567\n00:28:00.864 --> 00:28:03.645\nthe password that I defined\nwhen we did the install.\n\n568\n00:28:03.645 --> 00:28:08.895\nAnd it's gonna take us right here to the\nconfiguration for our appliance, right?\n\n569\n00:28:08.895 --> 00:28:13.735\nI have to know lynx because it's all\ndone right here through the nice GUI.\n\n570\n00:28:13.735 --> 00:28:15.881\nAnd you can jump into your configuration,\nand\n\n571\n00:28:15.881 --> 00:28:18.302\nwe can tweak things like the IP address,\nthe names,\n\n572\n00:28:18.302 --> 00:28:21.456\nany of that stuff that we define\nbefore we can go in and we can change.\n\n573\n00:28:21.456 --> 00:28:23.645\nRight now it's getting it from\nthe embedded database but\n\n574\n00:28:23.645 --> 00:28:25.890\nyou can do a manual\nconfiguration if you want.\n\n575\n00:28:25.890 --> 00:28:28.420\nYou can tweak your security and\nyour support.\n\n576\n00:28:28.420 --> 00:28:31.470\nYou can also update the appliance, right?\n\n577\n00:28:31.470 --> 00:28:34.360\nInstead of downloading the OVF of\ntemplates from VMware you can just update\n\n578\n00:28:34.360 --> 00:28:37.280\nit right from here, that makes life\na little bit easier for us too.\n\n579\n00:28:37.280 --> 00:28:40.684\nRight?\nSo one thing that you'll notice that's\n\n580\n00:28:40.684 --> 00:28:44.613\nmissing from here Is where\ndo I set up the replicas?\n\n581\n00:28:44.613 --> 00:28:47.920\nI've got this appliance that's great\nwhere do I set up the replicas?\n\n582\n00:28:47.920 --> 00:28:50.670\nWell, we've set up one piece right.\n\n583\n00:28:50.670 --> 00:28:54.710\nWe've set up this VMware replication\nserver that's attached to V-center.\n\n584\n00:28:54.710 --> 00:28:58.250\nNow we need to replicate\nto somewhere else, right?\n\n585\n00:28:58.250 --> 00:29:01.654\nAnd we do that right from\nthe vSphere web client.\n\n586\n00:29:01.654 --> 00:29:05.830\nSo I'm going to jump back to my vSphere\nweb client, and go back to my homepage.\n\n587\n00:29:06.950 --> 00:29:09.010\nAnd once this is registered,\n\n588\n00:29:09.010 --> 00:29:11.240\nwe'll have some new options\nthat are available in here.\n\n589\n00:29:11.240 --> 00:29:15.000\nNow, if they don't show up right away,\nyou might need to logout and log back in.\n\n590\n00:29:15.000 --> 00:29:18.060\nBut let me just jump into a VM and\nsee if I've got them there.\n\n591\n00:29:18.060 --> 00:29:22.080\nSo, I've got this client sitting\nright here, WIN-CLIENT01, and,\n\n592\n00:29:22.080 --> 00:29:26.980\nassuming that everything is in place like\nit should be, you can right click on that,\n\n593\n00:29:26.980 --> 00:29:33.140\nand you'll see your, menus pop up, and, we\ncan find our replication settings in here.\n\n594\n00:29:33.140 --> 00:29:34.570\nWhich, actually looking at it,\n\n595\n00:29:34.570 --> 00:29:38.630\nI am not seeing mine unless I\njust glanced over it too fast.\n\n596\n00:29:38.630 --> 00:29:41.740\nWe got clone, which is not replication,\nfault tolerance,\n\n597\n00:29:41.740 --> 00:29:43.940\nwhich is the native stuff.\n\n598\n00:29:43.940 --> 00:29:45.790\nAnd yep not showing up.\n\n599\n00:29:45.790 --> 00:29:49.120\nAll right, so I'm gonna need to log out,\nand once I log out of this thing and\n\n600\n00:29:49.120 --> 00:29:50.330\nlog back in, that kind of refreshes it.\n\n601\n00:29:50.330 --> 00:29:53.940\nCuz remember that the vSphere replication\nhas a plug-in that’s registered.\n\n602\n00:29:53.940 --> 00:29:56.500\nAnd that plugin is just not loaded\nright now so I need to get that piece,\n\n603\n00:29:56.500 --> 00:30:01.170\nthere's a few other spots where you can\nsee it show up if you've got it installed.\n\n604\n00:30:01.170 --> 00:30:03.600\nBut in my case it's just not here yet.\n\n605\n00:30:03.600 --> 00:30:06.300\nNow if you're like me and you're impatient\nthere is a way we kind of give it a little\n\n606\n00:30:06.300 --> 00:30:08.588\nkick in the butt here and get it\nmoving on faster so I'm gonna do that.\n\n607\n00:30:08.588 --> 00:30:11.669\nYou shouldn't have to do this if you just\nwait long enough it should register on\n\n608\n00:30:11.669 --> 00:30:12.610\nit's own, but if not.\n\n609\n00:30:12.610 --> 00:30:15.971\nWe can go back to that vSphere\nreplication web page, and if you go\n\n610\n00:30:15.971 --> 00:30:20.086\nunder Configuration it's got right here\nwhere you can set your SSO password,\n\n611\n00:30:20.086 --> 00:30:23.850\nright, and so we can define that\nto get it to connect to vCenter.\n\n612\n00:30:23.850 --> 00:30:27.880\nAnd you can manually start the vRM\nservice to get that thing kicked in.\n\n613\n00:30:27.880 --> 00:30:32.180\nSo what I'm gonna do is I'm gonna come\nin and punch in my vCenter password.\n\n614\n00:30:34.160 --> 00:30:36.270\nThere, and I'm gonna start it up.\n\n615\n00:30:36.270 --> 00:30:38.530\nNow what this is gonna do is it's\ngonna force it to register right now.\n\n616\n00:30:38.530 --> 00:30:40.580\nYou got to register with Vcenter and\n\n617\n00:30:40.580 --> 00:30:43.664\nyou'll see over here I've\ngot the unregister VRMS.\n\n618\n00:30:43.664 --> 00:30:47.744\nSo it already thinks that it's registered\nbut it's just not showing up, so\n\n619\n00:30:47.744 --> 00:30:52.016\nI'm going to punch in that password and\nyou know actually here we'll do save and\n\n620\n00:30:52.016 --> 00:30:52.654\nrestart and\n\n621\n00:30:52.654 --> 00:30:56.950\nthen if that service still doesn't start\non its own we'll start it after that.\n\n622\n00:30:56.950 --> 00:31:00.282\nNow what I'm doing is watching this\nlittle note down here where it says VRM\n\n623\n00:31:00.282 --> 00:31:01.855\nservices stopped.\n\n624\n00:31:01.855 --> 00:31:06.165\nAnd when this page refreshes if that's\nnot started then I'll start it.\n\n625\n00:31:06.165 --> 00:31:08.525\nAnd actually you may not have registered.\n\n626\n00:31:08.525 --> 00:31:10.075\nWe're getting a certificate warning.\n\n627\n00:31:10.075 --> 00:31:14.120\nBecause I'm using self sign certificate\ninstead of an actual CAM environment.\n\n628\n00:31:14.120 --> 00:31:16.280\nAnd so that may have stopped it from\nregistering in the first place.\n\n629\n00:31:16.280 --> 00:31:17.640\nI may have had a problem there.\n\n630\n00:31:17.640 --> 00:31:20.800\nSo we're go ahead and accept that\ncertificate, that'll get it pass that.\n\n631\n00:31:20.800 --> 00:31:24.040\nAnd so here it's verifying\nthat SSL Certificate and\n\n632\n00:31:24.040 --> 00:31:27.780\nwe'll get that just a second, and\nit should make it register right now.\n\n633\n00:31:27.780 --> 00:31:30.177\nWhat I'm hoping to see is\nthat service get started and\n\n634\n00:31:30.177 --> 00:31:32.600\nthen it should show up\nin my main portal now.\n\n635\n00:31:32.600 --> 00:31:34.570\nBack here the main portal,\nI'm going to go ahead and just log out,\n\n636\n00:31:34.570 --> 00:31:36.800\nin anticipation of this one.\n\n637\n00:31:36.800 --> 00:31:38.889\nSo we'll log out of that.\n\n638\n00:31:38.889 --> 00:31:42.226\nAnd then you're back over here, I'm just\nkind of waiting for this thing to finish,\n\n639\n00:31:42.226 --> 00:31:43.785\nwe've got our spinning wheel of doom.\n\n640\n00:31:43.785 --> 00:31:44.891\nWhile we're waiting on that,\n\n641\n00:31:44.891 --> 00:31:47.154\nlet me throw out a little factoid\nthat might show up on the exam.\n\n642\n00:31:47.154 --> 00:31:51.257\nI mentioned earlier that when replicating\nit can compress our data A couple little\n\n643\n00:31:51.257 --> 00:31:52.327\ncaveats about that,\n\n644\n00:31:52.327 --> 00:31:55.780\nthe way that the replication works\nis actually using snapshots.\n\n645\n00:31:55.780 --> 00:31:58.975\nIt takes a snapshot of your VM and\nthen the changes are being written to\n\n646\n00:31:58.975 --> 00:32:02.018\na snapshot file and\nit's replicating the snapshot file across.\n\n647\n00:32:02.018 --> 00:32:05.190\nThat way it kinda minimizes the amount\nof data it's got to replicate,\n\n648\n00:32:05.190 --> 00:32:07.683\nso that's kinda how it's\nworking behind the scenes.\n\n649\n00:32:07.683 --> 00:32:12.226\nBut the other thing is it works with\nmany different versions of ESXi but\n\n650\n00:32:12.226 --> 00:32:17.462\nif you want compression, for compression\nyou've gotta have ESXi version 6 and\n\n651\n00:32:17.462 --> 00:32:23.450\nvSphere Replication version 6,\nthat's where they introduce compression.\n\n652\n00:32:23.450 --> 00:32:26.960\nSo if we're still dealing\nwith ESXi 5.5 machines or\n\n653\n00:32:26.960 --> 00:32:28.990\nif you have vSphere replication\nthat's a lower version,\n\n654\n00:32:28.990 --> 00:32:32.050\nyou may not have compression and\nnow it's moving the full data set.\n\n655\n00:32:32.050 --> 00:32:35.650\nCompression takes more CPU but\ntakes less bandwidth so\n\n656\n00:32:35.650 --> 00:32:38.060\nit can be an ideal way to go about things.\n\n657\n00:32:39.250 --> 00:32:42.460\nAll right, I thought I'd be able,\nactually we can see a few things.\n\n658\n00:32:42.460 --> 00:32:46.310\nSo looking at my screen down here\nI see VRM service is running now.\n\n659\n00:32:46.310 --> 00:32:48.710\nI didn't click start,\nit did it on it's own but\n\n660\n00:32:48.710 --> 00:32:52.060\nup here I can see that it\nstill starting up the VRMS.\n\n661\n00:32:52.060 --> 00:32:54.460\nIt should be registered though so\nlets go and log in and\n\n662\n00:32:54.460 --> 00:32:57.670\nsee if we can get that\nstuff showing up in here.\n\n663\n00:32:57.670 --> 00:33:04.680\nSo I'm gonna do vsphereadmin or we're\ngonna use administrator@vSpherelocal.\n\n664\n00:33:06.035 --> 00:33:07.845\nAnd I'll punch in my password.\n\n665\n00:33:07.845 --> 00:33:11.200\nAnd what I'm hoping to see here is on my\nhome page I should have my replication\n\n666\n00:33:11.200 --> 00:33:11.986\nicon.\n\n667\n00:33:11.986 --> 00:33:19.115\nAnytime now [LAUGH] See, in real life\nland you have the advantage of patience.\n\n668\n00:33:19.115 --> 00:33:21.390\nBut I'm staring at a timer so\nI'm somewhat limited.\n\n669\n00:33:21.390 --> 00:33:24.650\nSo looking at mine, shoot,\nstill not seeing it.\n\n670\n00:33:24.650 --> 00:33:27.220\nWe just have to wait, so impatient.\n\n671\n00:33:27.220 --> 00:33:30.250\nAll right there, it says it is loaded now.\n\n672\n00:33:30.250 --> 00:33:32.851\nI might have to log out again,\nbecause I'm just not waiting.\n\n673\n00:33:35.376 --> 00:33:36.800\nLet me do it again, darn it.\n\n674\n00:33:38.020 --> 00:33:41.420\nSometimes you just can't win, all right,\nso I'm gonna log out, log back in and\n\n675\n00:33:41.420 --> 00:33:42.170\nwe should have it.\n\n676\n00:33:42.170 --> 00:33:45.070\nAnd sometimes I've seen where it\ndoesn't show up on that homepage,\n\n677\n00:33:45.070 --> 00:33:47.950\nit does show up on\nthe individual VM's action menu.\n\n678\n00:33:47.950 --> 00:33:49.360\nSo we might be able to\npull it up there too.\n\n679\n00:33:49.360 --> 00:33:52.790\nBut what we should see is an icon right\nthere on our homepage for replication and\n\n680\n00:33:52.790 --> 00:33:55.630\nthat's not actually the one we want to use\nbecause that really just takes the webpage\n\n681\n00:33:55.630 --> 00:33:56.970\nthat we've all ready seen.\n\n682\n00:33:56.970 --> 00:33:59.910\nWhat we want to do is we want\nto go to a VM and activate it.\n\n683\n00:33:59.910 --> 00:34:03.760\nActivating replication and failing\nover and stuff is really super easy.\n\n684\n00:34:03.760 --> 00:34:07.400\nWhat you do is we've just set\nup one replication appliance,\n\n685\n00:34:07.400 --> 00:34:10.630\nyou'd set up a second one wherever\nyour destination network was.\n\n686\n00:34:10.630 --> 00:34:13.622\nIf the destination network was right here\nwe can get away with one but usually it's\n\n687\n00:34:13.622 --> 00:34:17.050\ngonna be some remote location, so\nyou stick a replication server there too.\n\n688\n00:34:17.050 --> 00:34:20.570\nWhen they're both registered,\nnow you got a source and a target and\n\n689\n00:34:20.570 --> 00:34:22.680\nfrom there you just go through\nyour individuals VMs and\n\n690\n00:34:22.680 --> 00:34:26.085\nactivate replication, you specify that\ntarget and it starts replicating.\n\n691\n00:34:26.085 --> 00:34:29.725\nYou've got to have an appliance on\nthe other end because it's managing\n\n692\n00:34:29.725 --> 00:34:34.667\nthe decompression, as well as creating\nthe virtual machines and so on.\n\n693\n00:34:34.667 --> 00:34:38.335\nAll right, so let's go see if this\nis going to show up on my VMs now.\n\n694\n00:34:38.335 --> 00:34:42.690\nIf not, we might have to use the magic\nof TV to just wait this one out.\n\n695\n00:34:42.690 --> 00:34:47.310\nBut if I right-click on that VM, well, I'm\nexpecting to see is my replication option\n\n696\n00:34:47.310 --> 00:34:49.740\nshow up and yeah, they're still not there.\n\n697\n00:34:49.740 --> 00:34:51.400\nSo all right, here's what we're gonna do.\n\n698\n00:34:51.400 --> 00:34:55.230\nWe're gonna leverage the magic of\ntelevision, just wait patiently and\n\n699\n00:34:55.230 --> 00:34:59.730\ntry to achieve a status and usually this\ntakes about five to ten minutes for me.\n\n700\n00:34:59.730 --> 00:35:02.880\nI think I've stalled about ten minutes\nnow, so it's kind of a little bit longer\n\n701\n00:35:02.880 --> 00:35:04.960\nthan we normally see but\nlet's just wait this one out.\n\n702\n00:35:04.960 --> 00:35:07.770\nAnd as soon as that shows up,\nwe'll be able to jump right in there, and\n\n703\n00:35:07.770 --> 00:35:09.800\nget that configuration kind of set up.\n\n704\n00:35:09.800 --> 00:35:12.430\nAnd that will wrap up replication for us.\n\n705\n00:35:12.430 --> 00:35:15.230\nAll right, ladies and gentlemen, well,\nthanks to the magic of filmmaking,\n\n706\n00:35:15.230 --> 00:35:18.920\nwe are now an amazing\nalmost 20 minutes into\n\n707\n00:35:18.920 --> 00:35:21.240\nthe future [LAUGH] As we waited\non this plugin to register.\n\n708\n00:35:21.240 --> 00:35:23.480\nBut it did finally register,\nand is showing up in my UI, so\n\n709\n00:35:23.480 --> 00:35:25.010\nlet me show you what that looks like.\n\n710\n00:35:25.010 --> 00:35:28.990\nYou'll know that your vSphere replication\ndevice is registered if you see\n\n711\n00:35:28.990 --> 00:35:32.770\nthis icon right here, vSphere Replication,\nthat's what I was waiting on.\n\n712\n00:35:32.770 --> 00:35:34.530\nAnd over on the left side, you'll see,\n\n713\n00:35:34.530 --> 00:35:37.770\nI've got this new vSphere\nReplication item right there.\n\n714\n00:35:37.770 --> 00:35:41.180\nYou may need to log out and log back in,\nyou may need to refresh your screen.\n\n715\n00:35:41.180 --> 00:35:43.460\nYou may need to just go and\ngrab a cup of coffee and wait,\n\n716\n00:35:43.460 --> 00:35:47.320\nwhich is ultimately what I did\n[LAUGH] Before that shows up.\n\n717\n00:35:47.320 --> 00:35:49.930\nBut I know that vSphere\nReplication is now showing up,\n\n718\n00:35:49.930 --> 00:35:52.550\nthe next step is simply to turn it on for\nyour virtual machines.\n\n719\n00:35:52.550 --> 00:35:56.570\nSo now, you go through and configure\neach VM that you wanna get configured.\n\n720\n00:35:56.570 --> 00:36:00.230\nNow remember, we do need to have a second\nreplication server somewhere else.\n\n721\n00:36:00.230 --> 00:36:02.460\nI've only got one, so\nit's gonna be unhappy about that.\n\n722\n00:36:02.460 --> 00:36:06.160\nBut you deploy a second replication server\nin your other location where you've got\n\n723\n00:36:06.160 --> 00:36:07.820\na second vCenter environment, right?\n\n724\n00:36:07.820 --> 00:36:12.100\nThese replication servers are gonna link\nthose two vCenter environments together.\n\n725\n00:36:12.100 --> 00:36:14.980\nSo now I can just go in and pick my VMs,\n\n726\n00:36:14.980 --> 00:36:17.310\nI probably don't wanna\nreplicate all my VMs, right?\n\n727\n00:36:17.310 --> 00:36:19.760\nWe've got critical ones\nversus non-critical ones.\n\n728\n00:36:19.760 --> 00:36:24.720\nSo for the critical VMs I'm going\nto come in here and find them and\n\n729\n00:36:24.720 --> 00:36:28.060\nlet me just take my client here,\nso here is Win Client O1.\n\n730\n00:36:28.060 --> 00:36:33.420\nSo let’s say I want to replicate this guy,\nI'll right-click on it and in my options\n\n731\n00:36:33.420 --> 00:36:39.060\nif I scroll down way at the bottom, you'll\nsee all vSphere replication actions.\n\n732\n00:36:39.060 --> 00:36:43.130\nAnd if you scroll over there's only one\naction, configure replication, so that's\n\n733\n00:36:43.130 --> 00:36:46.440\nthe one I want, I'm going to click on\nthat, and it's gonna fire up the wizard.\n\n734\n00:36:46.440 --> 00:36:48.850\nNow it's gonna ask where we\nwant to replicate it to, and\n\n735\n00:36:48.850 --> 00:36:50.790\nyou've got two choices.\n\n736\n00:36:50.790 --> 00:36:53.790\nWe can replicate to a vCenter server,\nthat's normally what we want.\n\n737\n00:36:53.790 --> 00:36:57.350\nWe've got another vCenter environment over\non our disaster recovery location and\n\n738\n00:36:57.350 --> 00:36:59.170\nthat's where we want to replicate it to,\nbut\n\n739\n00:36:59.170 --> 00:37:04.020\nyou do have this other option, replicate\nto a cloud provider, what is that?\n\n740\n00:37:04.020 --> 00:37:08.079\nWell, we haven't talked about it, but\nVMWare has a service vCloud Air, and\n\n741\n00:37:08.079 --> 00:37:11.720\nvCloud Air is where they host your\nvirtualization environment for you.\n\n742\n00:37:11.720 --> 00:37:15.370\nIt's kind of like Amazon Web Services or\nMicrosoft Azure, but\n\n743\n00:37:15.370 --> 00:37:16.870\nit's VMware that's running it.\n\n744\n00:37:16.870 --> 00:37:21.300\nNow depending on when you watch this show,\nvCloud Air may or\n\n745\n00:37:21.300 --> 00:37:22.710\nmay not be out of business.\n\n746\n00:37:22.710 --> 00:37:26.290\n[LAUGH] So, I say that jokingly, but\n\n747\n00:37:26.290 --> 00:37:28.740\nin real life when VMware's laid off\nmost of their vCloud Air staff.\n\n748\n00:37:28.740 --> 00:37:33.490\nSo it does show up on the exam\nas a service that they offer but\n\n749\n00:37:33.490 --> 00:37:36.600\nthey might not be offering it\n[LAUGH] By the time you get there.\n\n750\n00:37:36.600 --> 00:37:37.230\n>> Reality.\n\n751\n00:37:37.230 --> 00:37:40.030\n>> But that's what that is, is we\ncould actually replicate up there and\n\n752\n00:37:40.030 --> 00:37:44.790\nit's a great way to migrate your virtual\nmachines from on-premise up to a cloud.\n\n753\n00:37:44.790 --> 00:37:48.940\nAnd you can create a hybrid environment\nlinking your local vCenter environment\n\n754\n00:37:48.940 --> 00:37:51.070\nWith vCloud Air,\nup in VMware's environment.\n\n755\n00:37:51.070 --> 00:37:53.720\nObviously, you've got to sign up for\na subscription, and\n\n756\n00:37:53.720 --> 00:37:54.930\nopen up a business account with them, and\n\n757\n00:37:54.930 --> 00:37:59.040\ndo all that to get that in place,\nbut that is a neat way to do it.\n\n758\n00:37:59.040 --> 00:38:01.730\nBut, I'm gonna choose to replicate to\na vCenter server, and this is where things\n\n759\n00:38:01.730 --> 00:38:04.290\nare gonna get a little hairy for me,\nbecause I don't have a second one.\n\n760\n00:38:04.290 --> 00:38:08.540\nSo, as we move forward,\nit's gonna ask me to pick a target site.\n\n761\n00:38:08.540 --> 00:38:12.650\nAnd here's where I would need to pick, not\nthe vCenter server that I'm already on,\n\n762\n00:38:12.650 --> 00:38:16.140\nbut the other vCenter server that's\nregistered to replicate to so\n\n763\n00:38:16.140 --> 00:38:17.540\nwe can send it across.\n\n764\n00:38:17.540 --> 00:38:21.000\nAnd I'll have to pick the replication\nserver at that location, so\n\n765\n00:38:21.000 --> 00:38:24.020\nas I move forward I'll see the server.\n\n766\n00:38:24.020 --> 00:38:27.270\nSo here's my vSphere Replication Appliance\nand I can choose it.\n\n767\n00:38:27.270 --> 00:38:30.300\nI've got zero replications right now and\nthat's important because\n\n768\n00:38:30.300 --> 00:38:35.130\nthe more replications that one server is\nhandling, the more latency you introduce.\n\n769\n00:38:35.130 --> 00:38:38.340\nSo if this is a really low-latency replica\nI need to maintain I wanna keep this\n\n770\n00:38:38.340 --> 00:38:39.250\nnumber low.\n\n771\n00:38:39.250 --> 00:38:43.630\nBut at non-critical servers I might have\n20 or even 30 VMs all replicating through\n\n772\n00:38:43.630 --> 00:38:46.060\nthis one appliance because I'm not so\nworried about the latency.\n\n773\n00:38:46.060 --> 00:38:47.210\nIt's up to me to determine that.\n\n774\n00:38:49.150 --> 00:38:50.600\nThen we choose our target location,\n\n775\n00:38:50.600 --> 00:38:53.670\nthe target location is gonna be other\ndata centre that we're gonna deploy into.\n\n776\n00:38:53.670 --> 00:38:57.790\nI've only got the one, so\nwhen I look at it I've got WIN-CLIENT01,\n\n777\n00:38:57.790 --> 00:39:01.890\nand right now it's being stored\nin just its default location, and\n\n778\n00:39:01.890 --> 00:39:04.030\nI need to edit that to pick\nwhere it's gonna go to.\n\n779\n00:39:04.030 --> 00:39:08.020\nSo this is where I would pick the data\nstore at the remote location.\n\n780\n00:39:08.020 --> 00:39:11.670\nRight now my data is in one of these data\nstores, I can't remember which one, but\n\n781\n00:39:11.670 --> 00:39:12.960\nI'll choose one of them here.\n\n782\n00:39:12.960 --> 00:39:16.500\nI would preferably choose a data\nstore that's in the other location\n\n783\n00:39:16.500 --> 00:39:17.240\nto do it, right?\n\n784\n00:39:17.240 --> 00:39:20.440\nAnd so, you're going to pick that, it'll\nshow you what's in the data store right\n\n785\n00:39:20.440 --> 00:39:22.420\nnow and that's where we\nare going to be replicating to.\n\n786\n00:39:26.292 --> 00:39:28.410\nAll right, so\nnow that it's got a data store set,\n\n787\n00:39:28.410 --> 00:39:31.150\nthat's where it's going to store\nthe entire clone of our virtual\n\n788\n00:39:31.150 --> 00:39:32.850\nmachine to make sure\nthat we're ready there.\n\n789\n00:39:32.850 --> 00:39:35.730\nYou do have a few replica options\nthat you can set right here,\n\n790\n00:39:35.730 --> 00:39:37.041\nlike enabling quiescing.\n\n791\n00:39:37.041 --> 00:39:40.457\nWhenever you take a snapshot, remember\nthat we can quiesce the hard drive, so\n\n792\n00:39:40.457 --> 00:39:43.822\nthat we can slow down any write operations\nthat are happening to make sure that\n\n793\n00:39:43.822 --> 00:39:46.890\nthe hard drive is clean\nwhen we take our snapshot.\n\n794\n00:39:46.890 --> 00:39:48.335\nOr we could choose not to do that.\n\n795\n00:39:48.335 --> 00:39:51.025\nThe drive will stay running at\nfull speed the whole time, but\n\n796\n00:39:51.025 --> 00:39:54.470\nyou could have partial write operations\nthat are now a part of that snapshot.\n\n797\n00:39:54.470 --> 00:39:57.710\nAnd we may not want that, so\nwe can choose to turn that on or off.\n\n798\n00:39:57.710 --> 00:39:59.545\nAnd then, Network Compression.\n\n799\n00:39:59.545 --> 00:40:04.002\nRemember, I mentioned compression can\nreally reduce the bandwidth that we need,\n\n800\n00:40:04.002 --> 00:40:08.154\nbut it requires us to have ESXi 6,\nvCenter 6, and vSphere Replication 6.\n\n801\n00:40:08.154 --> 00:40:11.820\nSo if we're at all version 6, that\nworks out great and we can turn it on.\n\n802\n00:40:11.820 --> 00:40:12.990\nI'm going to leave it off for now.\n\n803\n00:40:12.990 --> 00:40:14.240\nIn real life I'd turn it on but\n\n804\n00:40:14.240 --> 00:40:16.657\nin my lab it makes things run\na little bit on the slow side.\n\n805\n00:40:18.513 --> 00:40:21.070\nAll right,\nthen we get our recovery settings.\n\n806\n00:40:21.070 --> 00:40:23.420\nNow, the recovery settings\nare kind of important.\n\n807\n00:40:23.420 --> 00:40:27.120\nHere's where we're trying to gauge what\nlevel of latency is acceptable for us,\n\n808\n00:40:27.120 --> 00:40:29.630\nour recovery point objective, okay?\n\n809\n00:40:29.630 --> 00:40:33.330\nAnd notice that the default\nRPO is 4 hours.\n\n810\n00:40:33.330 --> 00:40:35.500\nThat means we could have up\nto four hours of latency and\n\n811\n00:40:35.500 --> 00:40:38.560\nit would be okay as far as\nthis system is concerned.\n\n812\n00:40:38.560 --> 00:40:40.100\nThat maybe not okay for us.\n\n813\n00:40:40.100 --> 00:40:44.610\nYou can crank that up, but notice the\nlowest level we can choose, 15 minutes.\n\n814\n00:40:44.610 --> 00:40:49.180\nVMware will not guarantee less\nthan 15 minutes of latency\n\n815\n00:40:49.180 --> 00:40:52.850\nbetween your actual VM and\nthe clone that it's making.\n\n816\n00:40:52.850 --> 00:40:55.841\nAnd the reason is it's gotta take\na snapshot and then replicate that data.\n\n817\n00:40:55.841 --> 00:40:59.440\nAnd that just takes time,\nyou can't achieve it in a smaller window.\n\n818\n00:40:59.440 --> 00:41:02.229\nIf you need something even smaller than\nthis, that's what I was talking about\n\n819\n00:41:02.229 --> 00:41:05.158\nat the beginning of the episode, vSphere\nReplication might not be the solution.\n\n820\n00:41:05.158 --> 00:41:08.645\nYou might to deal with replication\nbuilt into your database software, or\n\n821\n00:41:08.645 --> 00:41:10.795\nwhatever software it is that you're using.\n\n822\n00:41:10.795 --> 00:41:13.275\nI'm gonna leave mine at 4 hours.\n\n823\n00:41:13.275 --> 00:41:15.305\nI'm gonna try, there we go.\n\n824\n00:41:15.305 --> 00:41:18.095\nYou also have point-in-time\ninstances down here.\n\n825\n00:41:18.095 --> 00:41:21.776\nThis is where we have a replica,\nbut it maintains the snapshots.\n\n826\n00:41:21.776 --> 00:41:25.876\nSo that when we failover, we can failover\nto the snapshot at any given point in\n\n827\n00:41:25.876 --> 00:41:28.410\ntime, not just the most recent one.\n\n828\n00:41:28.410 --> 00:41:31.640\nUsually when you failover,\nyou want the most recent one.\n\n829\n00:41:31.640 --> 00:41:37.650\nBut maybe you had a server get infected,\nor somebody hacked into it, right?\n\n830\n00:41:37.650 --> 00:41:40.570\nSo I wanna failover to the other one,\nand I don't want the most recent one,\n\n831\n00:41:40.570 --> 00:41:41.800\nbecause it's been hacked into, right?\n\n832\n00:41:41.800 --> 00:41:43.260\nThat's replicated over.\n\n833\n00:41:43.260 --> 00:41:46.330\nI wanna go back an hour to\nbefore the hack happened, right?\n\n834\n00:41:46.330 --> 00:41:49.690\nSo having a point-in-time\ninstance helps you with that, and\n\n835\n00:41:49.690 --> 00:41:52.325\nyou can choose how many of\nthose instances to maintain.\n\n836\n00:41:52.325 --> 00:41:54.820\nCuz each one is a snapshot,\nthey take up hard drive space,\n\n837\n00:41:54.820 --> 00:41:57.190\nyou may not want tons\nof these laying around.\n\n838\n00:41:57.190 --> 00:41:59.160\nIt's up to you to pick how many you want.\n\n839\n00:42:00.800 --> 00:42:03.700\nOnce that's done and the replication's\nset up, we're pretty much in business.\n\n840\n00:42:03.700 --> 00:42:05.070\nWe can finish that up.\n\n841\n00:42:05.070 --> 00:42:08.470\nIt is complaining a little bit cuz my\nvirtual machine is turned off right now.\n\n842\n00:42:08.470 --> 00:42:11.730\nBut when I finish that,\nit's gonna set up that replication.\n\n843\n00:42:11.730 --> 00:42:14.360\nAnd now,\nwe're pretty much in business, right?\n\n844\n00:42:14.360 --> 00:42:15.950\nPretty easy to get that up and going.\n\n845\n00:42:15.950 --> 00:42:20.360\nNow I'm replicating to two different\nstorage locations in my own network.\n\n846\n00:42:20.360 --> 00:42:22.420\nThis is how I would set it\nup if I had two SANS and\n\n847\n00:42:22.420 --> 00:42:25.030\nI wanted my data stored on\nthe two different SANS.\n\n848\n00:42:25.030 --> 00:42:28.190\nThis isn't gonna give me\nlocational replication.\n\n849\n00:42:28.190 --> 00:42:31.750\nI really need to have a second location\nwith a second replication server,\n\n850\n00:42:31.750 --> 00:42:35.160\nand now I can really get that\nredundancy in place, right?\n\n851\n00:42:35.160 --> 00:42:38.750\nBut this certainly works if I'm just\ntrying to get redundancy between two SANS\n\n852\n00:42:38.750 --> 00:42:39.762\nlocally, all right.\n\n853\n00:42:39.762 --> 00:42:44.177\nOnce you've got replications set up,\ndon't just set it and forget it, right?\n\n854\n00:42:44.177 --> 00:42:46.576\nThere's a few little\nthings that we have to do.\n\n855\n00:42:46.576 --> 00:42:49.200\nWhen you right-click on that instance and\ngo down to All vSphere\n\n856\n00:42:49.200 --> 00:42:53.100\nReplication Actions, you'll see you\nhave a lot more actions now, right?\n\n857\n00:42:53.100 --> 00:42:57.030\nYou can pause the replication, you can\nstop it, you can force it to sync now.\n\n858\n00:42:57.030 --> 00:42:58.950\nYou can also cause it to failover.\n\n859\n00:42:58.950 --> 00:43:02.550\nNow I can't cause mine to failover now\ncuz the first replica hasn't completed.\n\n860\n00:43:02.550 --> 00:43:07.060\nBut once it completes the first replica,\nyou'll have the option to failover, and\n\n861\n00:43:07.060 --> 00:43:09.420\nnow the replica becomes the primary,\nright?\n\n862\n00:43:09.420 --> 00:43:11.790\nAnd remember, we can only failover,\nwe can't fail back.\n\n863\n00:43:11.790 --> 00:43:16.775\nSo if it comes a time to fail back, what\nwe need to do is stop synchronization and\n\n864\n00:43:16.775 --> 00:43:20.513\nthen reconfigure it, and\nreconfigure it the other direction.\n\n865\n00:43:20.513 --> 00:43:24.875\nReplicate back, failover, and then stop\nit one more time and redo the replication\n\n866\n00:43:24.875 --> 00:43:29.045\nin the original direction to get\nthings put back the way they were.\n\n867\n00:43:29.045 --> 00:43:31.435\nOne last thing I wanna show\nyou guys on replication.\n\n868\n00:43:31.435 --> 00:43:35.523\nIf I go back to my Home page, and\nwe go down here to VSphere Replication,\n\n869\n00:43:35.523 --> 00:43:38.329\nyou'll get your\nGetting Started information.\n\n870\n00:43:38.329 --> 00:43:41.938\nAnd right down here you'll see Monitoring\nand Managing Replication and so\n\n871\n00:43:41.938 --> 00:43:43.640\nyou can jump right in there.\n\n872\n00:43:43.640 --> 00:43:46.340\nAnd VMware has some great\narticles out there about\n\n873\n00:43:46.340 --> 00:43:47.910\nhow you can monitor replication and\n\n874\n00:43:47.910 --> 00:43:51.120\nmake sure that it's working the way\nthat you intend it to work.\n\n875\n00:43:51.120 --> 00:43:52.360\nCuz there are some tweaks and\n\n876\n00:43:52.360 --> 00:43:56.020\ntuning that you may need to do to get it\nrunning efficiently in your environment.\n\n877\n00:43:56.020 --> 00:43:57.780\nSo definitely check that out.\n\n878\n00:43:57.780 --> 00:44:01.360\nThe other thing is,\nwhen you browse into your server, and\n\n879\n00:44:01.360 --> 00:44:04.530\nbrowse into the VM, you'll see it\nunder the Monitoring for the VM too.\n\n880\n00:44:04.530 --> 00:44:06.860\nSo there's a few different ways\nthat we can get in there and\n\n881\n00:44:06.860 --> 00:44:09.550\nactually see what's going on, right?\n\n882\n00:44:09.550 --> 00:44:13.310\nIf we browse in here and pick our servers,\nI'll take win server 01.\n\n883\n00:44:13.310 --> 00:44:16.170\nI'm gonna jump over to Monitor.\n\n884\n00:44:16.170 --> 00:44:18.060\nUnder the Monitoring tab,\n\n885\n00:44:18.060 --> 00:44:21.860\nwe'll have a little bit in here as\nfar as tracking that replication.\n\n886\n00:44:21.860 --> 00:44:26.480\nSo I'm just drilling down, I went into\nmy vCenter Server, I went to Monitor.\n\n887\n00:44:26.480 --> 00:44:28.570\nI then went to the vSphere\nReplication tab,\n\n888\n00:44:28.570 --> 00:44:31.260\nthat's a new tab that appeared\nafter this was registered.\n\n889\n00:44:31.260 --> 00:44:35.000\nAnd over here I can see Incoming and\nOutgoing Replications.\n\n890\n00:44:35.000 --> 00:44:36.622\nAnd you can see if they're active.\n\n891\n00:44:36.622 --> 00:44:39.150\nMy VM's not on, so\nit's not active right now.\n\n892\n00:44:39.150 --> 00:44:42.150\nAnd then I can see where it's coming from,\nwhere it's going to,\n\n893\n00:44:42.150 --> 00:44:44.680\nand all that additional\ninformation right in here.\n\n894\n00:44:44.680 --> 00:44:47.560\nIf there's point-in-time replicas,\nthey would show up here.\n\n895\n00:44:47.560 --> 00:44:50.430\nAnd I can initiate\nrecovery right from here.\n\n896\n00:44:50.430 --> 00:44:53.350\nIt's all done right via the vCenter panel,\nwhich is nice.\n\n897\n00:44:53.350 --> 00:44:58.020\nYou have one administration tool that you\ngo to, everything you need is right there.\n\n898\n00:44:58.020 --> 00:44:58.820\nAll right, well, Ronnie,\n\n899\n00:44:58.820 --> 00:45:01.530\nI think that's a pretty good\nrundown of vSphere Replication.\n\n900\n00:45:01.530 --> 00:45:04.120\nFor the exam, they really want you to\nknow how to set up that appliance and\n\n901\n00:45:04.120 --> 00:45:05.420\nhow to get it registered in.\n\n902\n00:45:05.420 --> 00:45:09.036\nThey don't really delve too much deeper\ninto it, but you do need to be aware that\n\n903\n00:45:09.036 --> 00:45:11.410\nit's available and\nit's not that hard to get set up..\n\n904\n00:45:11.410 --> 00:45:14.260\nIt requires more patience than I have,\nto be honest.\n\n905\n00:45:14.260 --> 00:45:16.720\nBut other than that,\nit really does run well.\n\n906\n00:45:16.720 --> 00:45:19.848\n>> Well, thank you, Don, for helping us to\nunderstand vSphere Replication a little\n\n907\n00:45:19.848 --> 00:45:21.111\nbit more and how to configure it.\n\n908\n00:45:21.111 --> 00:45:23.655\nWhat we did in this episode,\nthat's what we took a look at here.\n\n909\n00:45:23.655 --> 00:45:27.873\nThe idea of understanding that vSphere\nReplication is a separate product besides\n\n910\n00:45:27.873 --> 00:45:29.901\nwhat we normally actually are seeing.\n\n911\n00:45:29.901 --> 00:45:34.058\nAnd so we do have to import it in, or get\nit registered in the way that we need to.\n\n912\n00:45:34.058 --> 00:45:37.614\nAnd then Don also showed us\nthe configuration and, of course,\n\n913\n00:45:37.614 --> 00:45:41.050\neven how we begin to get our VMs\nreplicated the way that want.\n\n914\n00:45:41.050 --> 00:45:43.750\nAnd then we also took a look at some\nrecovery options there as well.\n\n915\n00:45:43.750 --> 00:45:46.230\nSo take a look at these options.\n\n916\n00:45:46.230 --> 00:45:49.220\nDon't just assume that, yes,\nyou know what's going on here.\n\n917\n00:45:49.220 --> 00:45:50.110\nTake some time to do it.\n\n918\n00:45:50.110 --> 00:45:52.250\nYou'll actually see that it\nwill take a little bit of time,\n\n919\n00:45:52.250 --> 00:45:54.630\ngetting everything registered and\nset up the way that you want.\n\n920\n00:45:54.630 --> 00:45:57.490\nBit of frustration, great time to have\na little cup of coffee in between, and\n\n921\n00:45:57.490 --> 00:46:00.137\nthen get back to it, and you'll see\neverything will actually come up.\n\n922\n00:46:00.137 --> 00:46:05.132\nDon, any other advice before they go in\nto take this, for this replication idea?\n\n923\n00:46:05.132 --> 00:46:06.445\n>> That's about it.\n\n924\n00:46:06.445 --> 00:46:09.017\nYou can mess around with it in\nyour own labs, and try it out and\n\n925\n00:46:09.017 --> 00:46:09.930\nexperiment with it.\n\n926\n00:46:09.930 --> 00:46:12.200\nIt is a great solution,\nit does work really well.\n\n927\n00:46:12.200 --> 00:46:14.940\nBut a lot of people do find\nalternative methods that work out and\n\n928\n00:46:14.940 --> 00:46:15.880\nachieve the same thing.\n\n929\n00:46:15.880 --> 00:46:19.570\nSo just remember that, Don't assume\nyou have to go with the VMware method.\n\n930\n00:46:19.570 --> 00:46:22.160\nIt's nice, cuz it's integrated\nright here into the panel, but\n\n931\n00:46:22.160 --> 00:46:24.340\nit's not the only solution\nthat's out there.\n\n932\n00:46:24.340 --> 00:46:26.440\n>> That's a great place for\nus to wrap up then.\n\n933\n00:46:26.440 --> 00:46:29.640\nSigning off for ITProTV,\nI'm your host, Ronnie Wong.\n\n934\n00:46:29.640 --> 00:46:30.310\n>> And I'm Don Pezet.\n\n935\n00:46:30.310 --> 00:46:32.000\n>> And we'll see you next time.\n\n936\n00:46:32.000 --> 00:46:40.880\n[SOUND]\n\n",
          "vimeoId": "173620542"
        }
      ],
      "title": "Backup and Recover a vSphere Deployment"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Ronnie and Don are doing a quick run down of the most common networking and storage troubleshooting tools found built into the vSphere vCenter.  These foundational concepts and knowledge of how to use these tools will benefit anybody working with vmware.  They go over not only the GUI location of these tools but also come of the CLI tools available that a VMWare professional should be familiar with in troubleshooting.",
          "length": "2109",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-8-1-1-troubleshooting-070116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-8-1-1-troubleshooting-070116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-8-1-1-troubleshooting-070116-1-sm.jpg",
          "title": "Troubleshooting",
          "transcript": "WEBVTT\n\n1\n00:00:00.001 --> 00:00:10.001\n[MUSIC]\n\n2\n00:00:12.313 --> 00:00:15.540\nWelcome to another great\nepisode right here on ITProTV.\n\n3\n00:00:15.540 --> 00:00:19.990\nI'm your host Ronnie Wong, and today\nwe're taking a look at VMware's VCP6.\n\n4\n00:00:19.990 --> 00:00:23.170\nAnd we got a few different troubleshooting\ntools that we need to get into and\n\n5\n00:00:23.170 --> 00:00:27.240\nwho better to help us than the VCP\nexpert himself, Mr. Don Pezet.\n\n6\n00:00:27.240 --> 00:00:28.350\nThank you for being on the show.\n\n7\n00:00:28.350 --> 00:00:29.210\n>> Thanks for having me Ronnie.\n\n8\n00:00:29.210 --> 00:00:31.200\nReady to dive right back\ninto the world of vSphere.\n\n9\n00:00:31.200 --> 00:00:34.860\nAnd like Ronnie said, we're taking\na look at troubleshooting tools.\n\n10\n00:00:34.860 --> 00:00:37.880\nI know, as much as we'd like to\nbelieve that VMware and vSphere\n\n11\n00:00:37.880 --> 00:00:42.045\nhave no issues whatsoever and everything\nalways deploys flawlessly the first time.\n\n12\n00:00:42.045 --> 00:00:44.720\n>> [LAUGH]\n>> As we've seen in some of these episodes\n\n13\n00:00:44.720 --> 00:00:48.490\neven, there's a lot of times when\nthings don't quite go right.\n\n14\n00:00:48.490 --> 00:00:51.730\nAnd so when that happens,\nyou've got to be able to troubleshoot it.\n\n15\n00:00:51.730 --> 00:00:55.900\nNow, the number one single\nbest troubleshooting tool\n\n16\n00:00:55.900 --> 00:00:58.020\nis the knowledge base found at vmware.com,\nright?\n\n17\n00:00:58.020 --> 00:01:00.840\nWe can go and search for our problems and\na lot of times they've got documents that\n\n18\n00:01:00.840 --> 00:01:03.920\nwill talk about what that problem is and\nhow to resolve it.\n\n19\n00:01:03.920 --> 00:01:08.175\nBut, sometimes it's kind of hard to\nfigure out where the actual problem is.\n\n20\n00:01:08.175 --> 00:01:11.901\nAnd so there is a wide assortment of\ntroubleshooting tools found throughout\n\n21\n00:01:11.901 --> 00:01:15.973\nvSphere, through the whole suite that we\ncan use to better troubleshoot our system\n\n22\n00:01:15.973 --> 00:01:18.497\nand try and\nfind out more about what the problem is.\n\n23\n00:01:18.497 --> 00:01:20.826\nAnd so that's what we're gonna\ntake a look at in this episode.\n\n24\n00:01:20.826 --> 00:01:22.490\nAnd there will probably be a part two,\n\n25\n00:01:22.490 --> 00:01:25.120\ncuz there's a lot of little\ntools in here that we can use.\n\n26\n00:01:25.120 --> 00:01:27.860\nYou've already seen me use some in\nthe various episodes that we've\n\n27\n00:01:27.860 --> 00:01:28.540\ncovered, right?\n\n28\n00:01:28.540 --> 00:01:31.050\nSome are just right there as part\nof the graphical user interface,\n\n29\n00:01:31.050 --> 00:01:33.800\nif you're in the vSphere Web Client,\nfor example.\n\n30\n00:01:33.800 --> 00:01:37.250\nBut there are times where the vSphere\nWeb Client is not working or\n\n31\n00:01:37.250 --> 00:01:39.870\na host has become disconnected somehow.\n\n32\n00:01:39.870 --> 00:01:43.920\nAnd now we don't even have the GUI to work\nwith and so there's some neat tools that\n\n33\n00:01:43.920 --> 00:01:48.730\nwe can use that will let us troubleshoot\na system from the direct console UI also.\n\n34\n00:01:48.730 --> 00:01:50.810\nSo, a couple of different\nways to go on this one and\n\n35\n00:01:50.810 --> 00:01:53.040\nwe'll just kind of run through each.\n\n36\n00:01:53.040 --> 00:01:56.120\nLet's start with a few general areas here,\nI wanna kick things off with,\n\n37\n00:01:56.120 --> 00:02:01.300\nlet's just talk about vCenter for\na minute, all right?\n\n38\n00:02:01.300 --> 00:02:04.210\nIf vCenter fails,\nit makes it really difficult for\n\n39\n00:02:04.210 --> 00:02:05.910\nus to troubleshoot our network and\n\n40\n00:02:05.910 --> 00:02:09.170\nkeep things healthy and running\nbecause vCenter's what we like to use.\n\n41\n00:02:09.170 --> 00:02:13.700\nNow, the reality is if my vCenter\ndeployment were to take a complete dive\n\n42\n00:02:13.700 --> 00:02:18.415\nright now, I can just format a server,\nput Windows on it, throw\n\n43\n00:02:18.415 --> 00:02:23.000\nvCenter back on it and rejoin my host and\nbe back up and running in short order.\n\n44\n00:02:23.000 --> 00:02:24.970\nSo, it's not like there's\na ton of sensitive,\n\n45\n00:02:24.970 --> 00:02:27.170\nmission critical data inside of vCenter.\n\n46\n00:02:27.170 --> 00:02:29.680\nBut it certainly is what keeps\nthings running smoothly.\n\n47\n00:02:29.680 --> 00:02:32.810\nAnd there is a database attached to it,\nif I format and reinstall,\n\n48\n00:02:32.810 --> 00:02:36.190\nit'd be nice to restore that database too,\nso that's a lot of work now.\n\n49\n00:02:36.190 --> 00:02:39.340\nSo, if we start having problems with\nvCenter, there are a few little steps that\n\n50\n00:02:39.340 --> 00:02:42.270\nI like to take, just to make sure\nthat vCenter is running fine.\n\n51\n00:02:42.270 --> 00:02:44.770\nAnd they all take place\non the server itself.\n\n52\n00:02:44.770 --> 00:02:46.840\nSo let's take a look at\nmy Windows server here.\n\n53\n00:02:46.840 --> 00:02:49.100\nThis is where I'm running vCenter from and\n\n54\n00:02:49.100 --> 00:02:53.190\nif I ever found an instance where I\ncouldn't get into the vSphere Web Client,\n\n55\n00:02:53.190 --> 00:02:55.490\nhere's kind of where I'd\nstart my troubleshooting.\n\n56\n00:02:55.490 --> 00:02:59.515\nIf the vSphere Web Client fails,\nif I just can't get to the login page or\n\n57\n00:02:59.515 --> 00:03:01.998\nsomething like that, my first thought is,\n\n58\n00:03:01.998 --> 00:03:06.044\nis this actually a vCenter problem or\nis it just the vSphere Web Client?\n\n59\n00:03:06.044 --> 00:03:08.590\nBecause the vSphere Web Client\nhas its own little issues.\n\n60\n00:03:08.590 --> 00:03:11.970\nSo one thing I like to do is on Windows\nyou can jump into your services tool.\n\n61\n00:03:11.970 --> 00:03:16.150\nAnd the services tool will show\nyou a list of VMware services,\n\n62\n00:03:16.150 --> 00:03:17.580\nincluding the Web Client.\n\n63\n00:03:17.580 --> 00:03:23.380\nSo, if I go into my Server Manager, and\nI'm gonna go into Tools > Services.\n\n64\n00:03:23.380 --> 00:03:26.890\nIn the Services list, we'll see a ton of\nstuff, and I'm gonna make this window\n\n65\n00:03:26.890 --> 00:03:29.530\na little bigger,\nbecause the names get truncated a bit.\n\n66\n00:03:29.530 --> 00:03:33.240\nAnd I'm gonna scroll down to\nthe section of VMware services.\n\n67\n00:03:33.240 --> 00:03:34.608\nSo I'm just gonna keep scrolling.\n\n68\n00:03:34.608 --> 00:03:38.213\nAnd there's one or two, or maybe 30,\nVMware services in here, right?\n\n69\n00:03:38.213 --> 00:03:40.333\nThere's a bunch of\ndifferent VMWare services,\n\n70\n00:03:40.333 --> 00:03:42.570\neach one that performs a different role.\n\n71\n00:03:42.570 --> 00:03:45.850\nAnd what I like to do is skim\ndown this side column, and\n\n72\n00:03:45.850 --> 00:03:48.850\nsee how it shows all these services for\nautomatic startup?\n\n73\n00:03:48.850 --> 00:03:51.460\nThat means that when the system boots,\nthese services should start.\n\n74\n00:03:51.460 --> 00:03:53.470\nAnything that says Automatic,\nshould be running.\n\n75\n00:03:53.470 --> 00:03:56.195\nIf there's a service that's\nnot running like this one,\n\n76\n00:03:56.195 --> 00:03:58.060\nthat may indicate a problem.\n\n77\n00:03:58.060 --> 00:04:01.223\nBut in this case, this is\nthe VMware Message Bus Config Service and\n\n78\n00:04:01.223 --> 00:04:02.688\nsee how it's disabled.\n\n79\n00:04:02.688 --> 00:04:06.460\nIt's disabled, so I expect it not to be\nrunning, but if something is automatic and\n\n80\n00:04:06.460 --> 00:04:08.970\nit's not running,\nthat's usually indicative of a problem.\n\n81\n00:04:08.970 --> 00:04:14.170\nAnd I've seen it many times where you come\nin and you find the vSphere Web Client and\n\n82\n00:04:14.170 --> 00:04:17.730\nyou go and look at its status and it's\nset to Automatic and not running, right?\n\n83\n00:04:17.730 --> 00:04:19.780\nWhere it's crashed or\nsomething's gone wrong with it.\n\n84\n00:04:19.780 --> 00:04:23.320\nSo, you may need to restart that service\nor if you're having a problem with\n\n85\n00:04:23.320 --> 00:04:27.090\nthe plugin registering, like I had that\nissue in the replication episodes.\n\n86\n00:04:27.090 --> 00:04:29.830\nAnd if you just restart the service\nsometimes, that gives it a little kick in\n\n87\n00:04:29.830 --> 00:04:32.250\nthe butt there and\ngets it to register those things.\n\n88\n00:04:32.250 --> 00:04:36.300\nIf it fails to come up then that's\nwhat leads us to our next tool.\n\n89\n00:04:36.300 --> 00:04:40.720\nIf it fails to come up then it's going\nto register entries in our Event Viewer.\n\n90\n00:04:40.720 --> 00:04:45.112\nIn Windows, if we go back to our\nServer Manager, you can go to Tools >\n\n91\n00:04:45.112 --> 00:04:52.110\nEvent Viewer, and VMware will actually log\nall sorts of events into the Event Viewer.\n\n92\n00:04:52.110 --> 00:04:55.820\nIf you just drill down under\nWindows Logs >Application.\n\n93\n00:04:55.820 --> 00:04:58.480\nSo over here I just went to\nWindows Log > Application.\n\n94\n00:04:58.480 --> 00:05:00.210\nLooking under the Application log,\n\n95\n00:05:00.210 --> 00:05:02.950\nsee how we've got various things\nthat are reporting in here.\n\n96\n00:05:02.950 --> 00:05:04.940\nMost of these are not gonna\nbe VMware applications,\n\n97\n00:05:04.940 --> 00:05:06.630\nthey're gonna be other systems.\n\n98\n00:05:06.630 --> 00:05:08.660\nAnd I guess my system's kind\nof healthy right now, so\n\n99\n00:05:08.660 --> 00:05:10.660\nwe might have a hard time\nfinding a VMware error.\n\n100\n00:05:10.660 --> 00:05:12.402\nThere's one right there.\n\n101\n00:05:12.402 --> 00:05:15.300\nMy VMUpgradeHelper logged\nsome messages down here and\n\n102\n00:05:15.300 --> 00:05:17.890\nI can see it Restored\nnetwork configuration.\n\n103\n00:05:17.890 --> 00:05:20.536\nRight, that's not an error,\nthat's just a notice.\n\n104\n00:05:20.536 --> 00:05:24.250\nBut if something is wrong with the vSphere\nWeb Client, it will usually log to right\n\n105\n00:05:24.250 --> 00:05:27.250\nhere and we can spot that and\nit will tell us what the problem is so\n\n106\n00:05:27.250 --> 00:05:30.120\nthat we can go and try and\nfigure out how to fix it, right?\n\n107\n00:05:30.120 --> 00:05:33.640\nAnother thing you can do is if\nthe vSphere WebClient is not working,\n\n108\n00:05:33.640 --> 00:05:36.120\nyou can try the vSphere Native Client,\nright?\n\n109\n00:05:36.120 --> 00:05:41.830\nIf you go on to your installation disc,\nthe disc you used to install vSphere,\n\n110\n00:05:41.830 --> 00:05:45.890\nit's got the vSphere\nClient right on that disc.\n\n111\n00:05:45.890 --> 00:05:49.450\nOr if you have a host that's online, you\ncan always browse the host web page and\n\n112\n00:05:49.450 --> 00:05:51.160\nit'll be able to download from the host.\n\n113\n00:05:51.160 --> 00:05:54.010\nBut you can install the Native Client and\nconnect that way.\n\n114\n00:05:54.010 --> 00:05:57.130\nThe Native Client doesn't have as\nmany features as the Web Client.\n\n115\n00:05:57.130 --> 00:06:01.310\nBut it just directly\naccesses the vSphere's APIs.\n\n116\n00:06:01.310 --> 00:06:04.500\nSo the Web Client can be\ncompletely dead in the water and\n\n117\n00:06:04.500 --> 00:06:06.770\nthe Native Client might still work.\n\n118\n00:06:06.770 --> 00:06:09.590\nIf it does, then you just have\na problem with the Web Client,\n\n119\n00:06:09.590 --> 00:06:11.520\nnot a problem with all of vCenter.\n\n120\n00:06:11.520 --> 00:06:14.190\nAnd so you may not need to restore,\nyou can just go and\n\n121\n00:06:14.190 --> 00:06:17.675\nreinstall the Web Client and\nsee if that fixes our problem, right?\n\n122\n00:06:17.675 --> 00:06:20.498\nBut if this doesn't work,\nif the Web Client doesn't work and\n\n123\n00:06:20.498 --> 00:06:23.701\nthe Native Client doesn't work,\nif they're both dead in the water,\n\n124\n00:06:23.701 --> 00:06:25.846\nthat's when I really\nhave a vCenter problem.\n\n125\n00:06:25.846 --> 00:06:29.158\nThat's when I really need to look in my\nEvent Logs and figure out what it is,\n\n126\n00:06:29.158 --> 00:06:32.436\ntroubleshoot it and if I can't fix it,\nrestore it from a back up, right?\n\n127\n00:06:32.436 --> 00:06:34.187\nWe should be backing up the server, so\n\n128\n00:06:34.187 --> 00:06:36.333\nrestoring it shouldn't\nbe that big of a deal.\n\n129\n00:06:36.333 --> 00:06:39.864\nIf it's a VM, you can always restore a\nsnapshot, that makes life really easy, and\n\n130\n00:06:39.864 --> 00:06:42.300\nget your environment back up and\nrunning nice and quick.\n\n131\n00:06:43.630 --> 00:06:47.840\nAll right, so that's basically it for\nthe vCenter side of things.\n\n132\n00:06:47.840 --> 00:06:51.938\nNow, assuming that vCenter is working,\nthen we'll have access\n\n133\n00:06:51.938 --> 00:06:56.530\nto vSphere Web Client and\nwe'll have GUI troubleshooting tools.\n\n134\n00:06:56.530 --> 00:07:01.160\nSo any time that we have a problem with\na host or a VM, a problem with storage,\n\n135\n00:07:01.160 --> 00:07:04.105\na problem with network,\nwe'll be able to use the GUI.\n\n136\n00:07:04.105 --> 00:07:08.450\nIf vCenter is dead,\nthen we may not be able to use the GUI.\n\n137\n00:07:08.450 --> 00:07:11.440\nAnd in those scenarios, we'll have to\nuse the command line to get in and\n\n138\n00:07:11.440 --> 00:07:15.490\nstart to work with vCenter, or\njust EXSI and those guys too.\n\n139\n00:07:15.490 --> 00:07:18.635\nSo, there's a handful of command line\nutilities that we need to be aware of, and\n\n140\n00:07:18.635 --> 00:07:23.565\nas we go through the rest of the show,\nI'm gonna show both, GUI stuff and\n\n141\n00:07:23.565 --> 00:07:27.517\ncommand line stuff so that you can use\nwhatever is available to you at that time.\n\n142\n00:07:27.517 --> 00:07:31.390\nAll right, this Native Client here is\nalmost done installing, there we go.\n\n143\n00:07:31.390 --> 00:07:36.146\nSo once that's done installing,\nI can fire up that Native Client and\n\n144\n00:07:36.146 --> 00:07:40.902\nI can point it right at my vCenter server,\nso I'm gonna point it right\n\n145\n00:07:40.902 --> 00:07:45.421\nat the server itself, and\nI'll put in my username and password.\n\n146\n00:07:45.421 --> 00:07:49.649\nAnd this is the same if you have\nthe platform services controller, the PSC,\n\n147\n00:07:49.649 --> 00:07:54.142\nthat it's got the PSC services which I had\nhere cuz I did an embedded install, but\n\n148\n00:07:54.142 --> 00:07:56.454\nyou can start and\nstop the services too and\n\n149\n00:07:56.454 --> 00:07:59.129\nsometimes that will help\nyou resolve an issue.\n\n150\n00:07:59.129 --> 00:08:00.825\nAll right, so\nI'm just gonna get logged in.\n\n151\n00:08:00.825 --> 00:08:05.210\nNow I'll be connected to my vCenter\nenvironment, but via a different tool.\n\n152\n00:08:05.210 --> 00:08:08.490\nI'm not using the Web services anymore,\nnow I'm using the native client.\n\n153\n00:08:08.490 --> 00:08:09.256\nAnd there it goes.\n\n154\n00:08:09.256 --> 00:08:11.270\nCertain features are going to be missing.\n\n155\n00:08:11.270 --> 00:08:14.565\nIf I have VMware data protection set up,\nor vSphere replication set up, they're not\n\n156\n00:08:14.565 --> 00:08:17.333\ngoing to show up in here because\nthe plugins aren't loaded by default.\n\n157\n00:08:17.333 --> 00:08:20.425\nSo many other things that aren't\ncapable of being set up from here but\n\n158\n00:08:20.425 --> 00:08:22.667\nas far as basic\ntroubleshooting configuration,\n\n159\n00:08:22.667 --> 00:08:25.300\nI'll be able to do it and try and\nget my system back online.\n\n160\n00:08:27.290 --> 00:08:29.950\nAll right, so\nlet's talk about networking, right?\n\n161\n00:08:29.950 --> 00:08:33.609\nSo networking is something that is\nvery easy to make a mistake on,\n\n162\n00:08:33.609 --> 00:08:36.615\nwhen we configure a virtual machine and\nget it set up.\n\n163\n00:08:36.615 --> 00:08:40.424\nWe configure a virtual switch, its pretty\neasy to map them the wrong adapter or\n\n164\n00:08:40.424 --> 00:08:42.515\nplug something into the wrong port group.\n\n165\n00:08:42.515 --> 00:08:46.018\nSo verifying your networking is\nsomething you'll have to do a lot,\n\n166\n00:08:46.018 --> 00:08:48.390\nin the GUI it's pretty easy, right?\n\n167\n00:08:48.390 --> 00:08:52.961\nOn the workstation side, or the server\nside, you can go into your VM list.\n\n168\n00:08:52.961 --> 00:08:55.093\nYou can find your virtual machine and\n\n169\n00:08:55.093 --> 00:08:57.912\nthen you can jump under\nwell really the summary,\n\n170\n00:08:57.912 --> 00:09:02.820\nright here the main summary go to, it\nwill tell us what network were on, right?\n\n171\n00:09:02.820 --> 00:09:04.733\nSo, I can see network adapter one for\n\n172\n00:09:04.733 --> 00:09:07.903\nthis virtual machine is currently\nplugged into VM network.\n\n173\n00:09:07.903 --> 00:09:10.259\nRight, I can see that on\nthe summary screen but\n\n174\n00:09:10.259 --> 00:09:12.200\nI can't really do anything about it.\n\n175\n00:09:12.200 --> 00:09:14.913\nAll right,\nif your network isn't functioning,\n\n176\n00:09:14.913 --> 00:09:17.439\nit's usually gonna be\none of three problems.\n\n177\n00:09:17.439 --> 00:09:20.642\nProblem number 1,\nI didn't install the VM ware tools.\n\n178\n00:09:20.642 --> 00:09:23.830\nThe VMware tools have the driver for\nthe virtual network adapter and\n\n179\n00:09:23.830 --> 00:09:26.040\nif you don't have that your\nVM may not be able to see it.\n\n180\n00:09:26.040 --> 00:09:29.402\nThat's a really common cause of\nnetworking not working all right.\n\n181\n00:09:29.402 --> 00:09:32.230\nIf that's the case right here in\nthe summary screen you will see a warning\n\n182\n00:09:32.230 --> 00:09:35.170\nsaying the VM tools are not installed\nwe saw that in the tools episode.\n\n183\n00:09:36.590 --> 00:09:39.320\nThe second issue would be that it\nis plugged into the wrong network,\n\n184\n00:09:39.320 --> 00:09:41.270\nsee how my network is the VM Network?\n\n185\n00:09:41.270 --> 00:09:42.970\nI'm going to have five different networks.\n\n186\n00:09:42.970 --> 00:09:46.483\nIf I'm plugged into the wrong one,\nthen I may not be able to communicate.\n\n187\n00:09:46.483 --> 00:09:47.850\nThat's just a human error.\n\n188\n00:09:47.850 --> 00:09:49.530\nWe can see that right here\non the summary page and\n\n189\n00:09:49.530 --> 00:09:55.570\nif we want to fix it we can go to manage\nand then go down in to our VMR hardware.\n\n190\n00:09:55.570 --> 00:09:57.930\nWe can edit our hardware and\n\n191\n00:09:57.930 --> 00:10:01.170\nthen in that screen you'll be able to\nchange what network you're plugged into.\n\n192\n00:10:01.170 --> 00:10:02.970\nSo we can dive right in there.\n\n193\n00:10:02.970 --> 00:10:04.537\nAnd you've got your network adapter and\n\n194\n00:10:04.537 --> 00:10:06.525\nyou can choose from\nthe networks that you've got.\n\n195\n00:10:06.525 --> 00:10:09.030\nYou can also give it a state\nof connected or disconnected.\n\n196\n00:10:09.030 --> 00:10:11.080\nIf you leave it disconnected,\nobviously, it's not gonna work, right?\n\n197\n00:10:11.080 --> 00:10:12.250\nSo, we can verify that right here.\n\n198\n00:10:13.500 --> 00:10:15.740\nIt may not be a problem on the VM though.\n\n199\n00:10:15.740 --> 00:10:18.130\nThe problem might actually\nbe on our virtual switch.\n\n200\n00:10:18.130 --> 00:10:22.387\nRight, whenever you create a network, it's\nreally a port group on a virtual switch,\n\n201\n00:10:22.387 --> 00:10:24.193\nso if I have a problem on the vSwitch,\n\n202\n00:10:24.193 --> 00:10:28.072\nthat problem's gonna extend to any\nvirtual machine that's plugged into it.\n\n203\n00:10:28.072 --> 00:10:32.233\nSo I may need to check my uplinks, and\nif we go to the networking tab up here and\n\n204\n00:10:32.233 --> 00:10:36.393\nchoose a network, here's where you'll\nbe able to come into the summary and\n\n205\n00:10:36.393 --> 00:10:39.520\nget an idea of how this\nconfiguration is laid out.\n\n206\n00:10:39.520 --> 00:10:42.940\nAnd if you go to the monitoring tab,\nyou'll be able to see tasks and\n\n207\n00:10:42.940 --> 00:10:44.440\nevents that are assigned to this switch.\n\n208\n00:10:44.440 --> 00:10:48.425\nAnd you may be able to spot issues that\nare going on there, to be able to try and\n\n209\n00:10:48.425 --> 00:10:50.360\ntroubleshoot and find out what's going on.\n\n210\n00:10:50.360 --> 00:10:56.250\nSo, you may have problems associated in\nhere that tie to the V switch itself,\n\n211\n00:10:56.250 --> 00:10:59.500\nthat aren't tied to the individual VM.\n\n212\n00:10:59.500 --> 00:11:01.050\nNow looking at it this way,\n\n213\n00:11:01.050 --> 00:11:03.820\nunder the network tab,\nshows us kind of limited information.\n\n214\n00:11:03.820 --> 00:11:09.439\nI usually prefer to go back to the\nhomepage and go into networking from here.\n\n215\n00:11:09.439 --> 00:11:11.109\nAnd then kinda takes you\nto the same place where,\n\n216\n00:11:11.109 --> 00:11:13.770\nwhere you're able to see that\ninformation and work with it.\n\n217\n00:11:13.770 --> 00:11:16.600\nBut because I've got a cluster set up,\n\n218\n00:11:16.600 --> 00:11:19.750\nI'm not actually seeing my\nswitch configuration here.\n\n219\n00:11:19.750 --> 00:11:25.110\nI'm not seeing my DV switches and so\nif you go back to your homepage and\n\n220\n00:11:25.110 --> 00:11:28.775\ngo to your inventory screen,\nyour vCenter inventory list.\n\n221\n00:11:28.775 --> 00:11:33.530\nIn here you can come through and actually\nsee things a little bit more clearly\n\n222\n00:11:33.530 --> 00:11:37.350\nbecause you've got distributed switches\nright down here that you can jump into.\n\n223\n00:11:37.350 --> 00:11:38.980\nAnd shoot I'd hit that little,\n\n224\n00:11:40.520 --> 00:11:43.820\nthat VSphere web client bug that\nmakes the UI reload on you.\n\n225\n00:11:43.820 --> 00:11:45.570\nThat is fixed in the latest update.\n\n226\n00:11:45.570 --> 00:11:48.970\nI just haven't applied the latest\nupdate so I need to do that.\n\n227\n00:11:48.970 --> 00:11:52.710\nBut once you go into your inventory screen\nand you go into your distributed switches,\n\n228\n00:11:52.710 --> 00:11:55.990\nyou'll see your switches right there and\nthat's a little bit better review.\n\n229\n00:11:55.990 --> 00:11:57.730\nYou'll have more options in there.\n\n230\n00:11:57.730 --> 00:12:00.380\nSo when I come in and\nlook at my distributed switches,\n\n231\n00:12:00.380 --> 00:12:03.910\nI'm just dealing with local switches\nright now so I don't see it.\n\n232\n00:12:03.910 --> 00:12:06.820\nBut I'd see those switches and be able\nto modify them and their port groups.\n\n233\n00:12:06.820 --> 00:12:09.570\nNow, I've got local switches,\nso where do we see those?\n\n234\n00:12:09.570 --> 00:12:10.833\nThose are under the hosts.\n\n235\n00:12:10.833 --> 00:12:18.364\nSo if I go back to my host screen and\nI pick a host like ESX Host 01.\n\n236\n00:12:18.364 --> 00:12:23.270\nThat we'll be able to come in here and\nsee the switches that are tied to it.\n\n237\n00:12:23.270 --> 00:12:26.760\nRight now I don't have any distributed\nswitches, but if I go to Manage and\n\n238\n00:12:26.760 --> 00:12:30.190\nNetworking, I'll see where I\nhave those local switches.\n\n239\n00:12:30.190 --> 00:12:34.030\nAnd really what I wanna examine\nis this physical adapter, right?\n\n240\n00:12:34.030 --> 00:12:37.430\nWhich physical adapters are mapped\nto my virtual networks?\n\n241\n00:12:37.430 --> 00:12:40.730\nIf I have the wrong physical adapter\nmapped, or an adapter that happens to have\n\n242\n00:12:40.730 --> 00:12:43.483\nno link light, then I'm not gonna\nbe able to browse the network.\n\n243\n00:12:43.483 --> 00:12:46.280\nI might be able to talk to other VMs,\nbut not the real network.\n\n244\n00:12:46.280 --> 00:12:49.300\nSo that's another thing that we'll\ndefinitely want to check, all right?\n\n245\n00:12:49.300 --> 00:12:53.170\nThese are all tools that are available\nto us right here through the GUI.\n\n246\n00:12:54.450 --> 00:12:55.670\nWhere the problem comes in, though.\n\n247\n00:12:57.310 --> 00:13:00.330\nIs what if I can't get to the GUI,\nwhat if this isn't available, right?\n\n248\n00:13:00.330 --> 00:13:03.610\nIf this isn't available we actually do\nhave command line utilities that we\n\n249\n00:13:03.610 --> 00:13:05.500\ncan use to be able to check this.\n\n250\n00:13:05.500 --> 00:13:11.420\nNow the command line utilities\nare available on ESXI.\n\n251\n00:13:11.420 --> 00:13:12.440\nIf you access a shell,\n\n252\n00:13:12.440 --> 00:13:16.420\nthe thing is the shell's actually\ndisabled by default right?\n\n253\n00:13:16.420 --> 00:13:19.760\nIf I want to try and remote into\none of these systems I can't do it,\n\n254\n00:13:19.760 --> 00:13:23.010\nthe way you do is one of two ways,\nyou can SSH in right?\n\n255\n00:13:23.010 --> 00:13:25.910\nSo I can come in here and\n\n256\n00:13:25.910 --> 00:13:32.033\nsay SSH root at 192.168.0.201.\n\n257\n00:13:32.033 --> 00:13:37.110\nRight, so I'm gonna try and SSH into one\nof my hosts with the username root, okay?\n\n258\n00:13:37.110 --> 00:13:38.560\nI get connection refused.\n\n259\n00:13:38.560 --> 00:13:42.360\nAnd that's because SSH\nis disabled by default.\n\n260\n00:13:42.360 --> 00:13:46.080\nThe other option I have is that I\ncould go to the console, right?\n\n261\n00:13:46.080 --> 00:13:47.440\nSo here's my ESX HOST01.\n\n262\n00:13:48.510 --> 00:13:49.600\nAnd from the console,\n\n263\n00:13:49.600 --> 00:13:55.380\nyou'll see on the screen way down here,\npress F2 to customize system or view logs.\n\n264\n00:13:55.380 --> 00:13:56.180\nAll right.\n\n265\n00:13:56.180 --> 00:13:59.530\nPress F12 to shut down and restart.\n\n266\n00:13:59.530 --> 00:14:02.800\nThere's no press a button to\naccess the console, is there?\n\n267\n00:14:02.800 --> 00:14:04.260\nTo access a shell.\n\n268\n00:14:04.260 --> 00:14:06.660\nAnd that's because that's\nalso turned off by default.\n\n269\n00:14:06.660 --> 00:14:10.130\nWhat we have in here, if you do the F2, so\n\n270\n00:14:10.130 --> 00:14:13.830\nif I press F2 and\ngo into my configuration.\n\n271\n00:14:14.940 --> 00:14:18.230\nRight, if I punch in a valid password.\n\n272\n00:14:18.230 --> 00:14:19.554\nThere's some trouble shooting for us.\n\n273\n00:14:19.554 --> 00:14:23.520\nSo we put in a [LAUGH] valid password.\n\n274\n00:14:23.520 --> 00:14:24.140\nThat's sad.\n\n275\n00:14:24.140 --> 00:14:25.300\nAll right there.\n\n276\n00:14:25.300 --> 00:14:27.940\nWhat it's gonna do is it's\ngonna take me to a simple menu.\n\n277\n00:14:27.940 --> 00:14:31.000\nAnd as far as networking is concerned\nthere's really only one thing we\n\n278\n00:14:31.000 --> 00:14:31.930\ncan do in here.\n\n279\n00:14:31.930 --> 00:14:35.660\nYou could verify your networking, or you\ncan do this Network Restore Options, and\n\n280\n00:14:35.660 --> 00:14:39.750\nwhat it'll do is it'll reset\nthe management network back to defaults.\n\n281\n00:14:39.750 --> 00:14:42.140\nThat way, if you're not even able to\nremote into the system via the network,\n\n282\n00:14:42.140 --> 00:14:44.240\nyou can kinda put it back\nto the defaults and get in.\n\n283\n00:14:44.240 --> 00:14:45.520\nBut that's about it.\n\n284\n00:14:45.520 --> 00:14:48.580\nYou'll see you do have this\ntroubleshooting options screen, and\n\n285\n00:14:48.580 --> 00:14:53.220\nright in here, we can turn on\nthe ESXI Shell, we can enable SSH.\n\n286\n00:14:53.220 --> 00:14:53.720\nRight.\n\n287\n00:14:53.720 --> 00:14:56.740\nThose two right there are what\nare going to allow us to\n\n288\n00:14:56.740 --> 00:14:59.650\naccess the command line utilities\non this system, all right?\n\n289\n00:14:59.650 --> 00:15:02.600\nThey're not enabled by default,\nbut we can turn them on.\n\n290\n00:15:02.600 --> 00:15:08.930\nSo if I choose that, if I choose Enable\nESXI Shell, right, well it just changes.\n\n291\n00:15:08.930 --> 00:15:11.510\nTo now say Disable ESXi Shell, right?\n\n292\n00:15:11.510 --> 00:15:15.511\nIt's now turned on, or\nif I turn on SSH, right?\n\n293\n00:15:15.511 --> 00:15:17.030\nIt just changes like that.\n\n294\n00:15:17.030 --> 00:15:18.440\nBut what really happened?\n\n295\n00:15:18.440 --> 00:15:20.330\nWell, in the background,\n\n296\n00:15:20.330 --> 00:15:25.320\nit updated the services to start the SSH\nservice to make the shell accessible.\n\n297\n00:15:25.320 --> 00:15:29.117\nAnd when it made that shell accessible,\nif I just back out of my menu,\n\n298\n00:15:29.117 --> 00:15:31.675\nmost of this stuff is\nnot really gonna change.\n\n299\n00:15:31.675 --> 00:15:32.989\nIt's all gonna kind of look the same.\n\n300\n00:15:33.990 --> 00:15:36.508\nBut if I get backup to my main screen,\n\n301\n00:15:36.508 --> 00:15:41.649\nthe main different that I'm gonna have\nhere is that I can now hit ALT+F1.\n\n302\n00:15:41.649 --> 00:15:44.716\nAnd ALT+F1 will will\ntake to me to a shell.\n\n303\n00:15:44.716 --> 00:15:47.124\nI can press ALT+F2 it will take\nme back to this screen but\n\n304\n00:15:47.124 --> 00:15:48.686\nI'm now enable that kind of hot key.\n\n305\n00:15:48.686 --> 00:15:52.733\nSo if I do ALT+F1,\nthere we go I get shell and\n\n306\n00:15:52.733 --> 00:15:57.630\nI can log in as root And\nwhat I want that password to be and\n\n307\n00:15:57.630 --> 00:16:02.870\nnow I'll be, sorry,\nnot what I want that password to be.\n\n308\n00:16:02.870 --> 00:16:06.490\nWhat the password is which is not what\nI typed, so let me try that again.\n\n309\n00:16:08.360 --> 00:16:11.900\nI can log in and now I'm at the shell and\nI can work with the system.\n\n310\n00:16:11.900 --> 00:16:14.050\nOkay, that's one way to be\nable to get in there and\n\n311\n00:16:14.050 --> 00:16:16.580\nbe able to do it,\nthe other way is SSH, right.\n\n312\n00:16:16.580 --> 00:16:18.520\nSo I'm gonna exit out of that.\n\n313\n00:16:18.520 --> 00:16:24.040\nAnd I'm gonna hit Alt F2 and now it's\nback to this screen, now I can walk away.\n\n314\n00:16:24.040 --> 00:16:26.430\nYou never want to leave it logged in\nsomebody could come behind you and\n\n315\n00:16:26.430 --> 00:16:27.260\ntry and log in.\n\n316\n00:16:27.260 --> 00:16:29.680\nThat's why we have those timeout values,\nyou might have noticed.\n\n317\n00:16:29.680 --> 00:16:31.570\n>> All right, Don.\nSo, that's great from the console.\n\n318\n00:16:31.570 --> 00:16:34.120\nCan you show us that on SSH like\nyou were talking about now?\n\n319\n00:16:34.120 --> 00:16:34.940\n>> Yeah, you know?\n\n320\n00:16:34.940 --> 00:16:37.324\nSSH, maybe not the best tool for\nhaving networking problems, right?\n\n321\n00:16:37.324 --> 00:16:38.008\n>> Right.\n[LAUGH]\n\n322\n00:16:38.008 --> 00:16:38.610\n>> 'Cuz you can't network in.\n\n323\n00:16:38.610 --> 00:16:39.698\nA direct console, you know you can use.\n\n324\n00:16:39.698 --> 00:16:42.354\nBut if the network is actually up,\nthat's a great way to test it.\n\n325\n00:16:42.354 --> 00:16:44.141\nAnd that failed for me earlier.\n\n326\n00:16:44.141 --> 00:16:46.463\nLet me get back to my terminal here.\n\n327\n00:16:46.463 --> 00:16:50.758\nSo when I ran that connection earlier,\nwhat I ran was SSH.\n\n328\n00:16:50.758 --> 00:16:52.470\nRoot at 192.168.0.201 and\n\n329\n00:16:52.470 --> 00:16:56.520\nI got the connection failed\nbecause SSH wasn't running.\n\n330\n00:16:56.520 --> 00:17:02.140\nBut if I run it this time I get, hey,\nwe got a SSL certificate, do we trust it?\n\n331\n00:17:02.140 --> 00:17:06.353\nI'll say yes, and now it's asking for\nmy password and I can provide it.\n\n332\n00:17:06.353 --> 00:17:09.910\nAnd now I'm at my ESXI shell.\n\n333\n00:17:09.910 --> 00:17:11.780\n>> Nice.\n>> So now I'm able to access that\n\n334\n00:17:11.780 --> 00:17:14.920\nconsole and use all the command line\ntools that are available for me.\n\n335\n00:17:14.920 --> 00:17:21.690\nNow when you get connected to VMware ESXI\nshell, it is running a version of Linux.\n\n336\n00:17:21.690 --> 00:17:23.710\nBut it's not a version of Linux\nyou intended to mess with.\n\n337\n00:17:23.710 --> 00:17:26.530\nSo while you do have a lot\nof tools that are available,\n\n338\n00:17:26.530 --> 00:17:28.060\nyou shouldn't necessarily use them.\n\n339\n00:17:28.060 --> 00:17:29.370\nSo for example like ifconfig.\n\n340\n00:17:29.370 --> 00:17:32.670\nIn the Linux world this will show\nme all my network adapters and\n\n341\n00:17:32.670 --> 00:17:33.930\nwhat their IPs are.\n\n342\n00:17:33.930 --> 00:17:35.430\nThe challenge we have here is,\n\n343\n00:17:35.430 --> 00:17:38.660\nthere's a lot more to this network\nthan just physical adapters.\n\n344\n00:17:38.660 --> 00:17:41.260\nThere's virtual switches, there's\nbridge groups, there's port groups,\n\n345\n00:17:41.260 --> 00:17:42.850\nthere's all sorts of crazy things.\n\n346\n00:17:42.850 --> 00:17:45.400\nSo when we look at,\nifconfig, what do we get?\n\n347\n00:17:45.400 --> 00:17:46.680\ncommand not found,\n\n348\n00:17:46.680 --> 00:17:51.990\nVMware didn't even bother packaging the\ncommand in here because it's not useful.\n\n349\n00:17:51.990 --> 00:17:54.370\nThings like Ip addr, it's not there,\n\n350\n00:17:54.370 --> 00:17:56.370\nthese are common tools that\nwe're used to having with Linux.\n\n351\n00:17:56.370 --> 00:18:01.900\nSo while is Linux don't expect the Shell\nto be as familiar as you used to.\n\n352\n00:18:01.900 --> 00:18:04.920\nSo for example if I want\nto see my network adapters\n\n353\n00:18:04.920 --> 00:18:06.930\non Linux I'd normally say I have config.\n\n354\n00:18:06.930 --> 00:18:09.790\nBut here I'm gonna say esxcli.\n\n355\n00:18:10.970 --> 00:18:15.170\nSo that the esx command line interface is\nthe most common tool that we're gonna use\n\n356\n00:18:15.170 --> 00:18:16.680\nso I'll say, yes, ESXCLI.\n\n357\n00:18:16.680 --> 00:18:23.203\nAnd then I'm gonna tell it,\nnetwork nic list.\n\n358\n00:18:23.203 --> 00:18:25.350\nGive me a list of all\nthe network adapters.\n\n359\n00:18:25.350 --> 00:18:26.490\nAnd when I run that, there they are.\n\n360\n00:18:26.490 --> 00:18:27.870\nRight.\nAnd\n\n361\n00:18:27.870 --> 00:18:30.700\nmy screen is kind of wrapping because\nit's more data than what will fit.\n\n362\n00:18:30.700 --> 00:18:33.930\nBut if you stretch it out, you'll start\nto see it level out a little bit.\n\n363\n00:18:33.930 --> 00:18:36.870\nBut here I can see vmnic0,\nvmnic1 and vmnic2.\n\n364\n00:18:36.870 --> 00:18:38.600\nI can see if they are up or down.\n\n365\n00:18:38.600 --> 00:18:40.350\nAll right.\nMay be a link is unplugged,\n\n366\n00:18:40.350 --> 00:18:41.380\nI would see it here.\n\n367\n00:18:41.380 --> 00:18:45.050\nIt shows that there are these\nIntel Gigabit Ethernet Adapters.\n\n368\n00:18:45.050 --> 00:18:47.870\nI can see their speed,\nduplex and MAC address.\n\n369\n00:18:47.870 --> 00:18:51.270\nSo now I'm able to harvest a lot of\ninformation about those adapters.\n\n370\n00:18:51.270 --> 00:18:53.550\nMy management interface might be up, but\n\n371\n00:18:53.550 --> 00:18:58.360\nmy data network might be down, or\nmy storage network might be down.\n\n372\n00:18:58.360 --> 00:19:01.780\nAnd I can see it right here,\nthrough the ESXCLI.\n\n373\n00:19:01.780 --> 00:19:06.860\nSimilar commands to that,\nwe've got ESXCLI Network vswitch.\n\n374\n00:19:08.789 --> 00:19:10.140\nWhich I can't spell.\n\n375\n00:19:10.140 --> 00:19:14.170\nVswitch standard list.\n\n376\n00:19:14.170 --> 00:19:16.490\nAnd so I can pull up a list of\nany standard vswitches I have,\n\n377\n00:19:16.490 --> 00:19:18.990\nthere's that vswitch0,\nthat's the default one.\n\n378\n00:19:18.990 --> 00:19:21.150\nYou can see the number of ports and\nused ports and\n\n379\n00:19:21.150 --> 00:19:23.000\nother configuration information on it.\n\n380\n00:19:23.000 --> 00:19:24.990\nAny other vswitches you may have created.\n\n381\n00:19:24.990 --> 00:19:27.290\nYou can also see the port\ngroups attached to it.\n\n382\n00:19:28.300 --> 00:19:34.059\nAnd then there's ESXCLI\nnetwork vswitch DVS.\n\n383\n00:19:34.059 --> 00:19:38.700\nWhich is from my distributed\nvirtual switches and VMware list.\n\n384\n00:19:38.700 --> 00:19:43.210\nNow I have to say VMware, because remember\non a distributive virtual switch,\n\n385\n00:19:43.210 --> 00:19:45.930\nyou could actually be running\nCisco's distributive virtual switch.\n\n386\n00:19:45.930 --> 00:19:49.290\nYou could throw in their nexus\nimage if you wanted, and so\n\n387\n00:19:49.290 --> 00:19:52.382\nthen it would be Cisco list or\nDell list or whatever.\n\n388\n00:19:52.382 --> 00:19:56.350\nBut, in my case, I just have VMware, and\nI can see that I don't have any present.\n\n389\n00:19:56.350 --> 00:19:58.980\nSo, another way that we can go and\ncheck that configuration and\n\n390\n00:19:58.980 --> 00:20:00.720\nstatus is a great way for\nverifying whether or\n\n391\n00:20:00.720 --> 00:20:04.540\nnot the problem exists on the host,\nor if the problem is just in vCenter.\n\n392\n00:20:06.490 --> 00:20:11.612\nHere on the network side,\nwe're usually just verifying and testing.\n\n393\n00:20:11.612 --> 00:20:14.294\nMost of the configuration\nthat we need to do,\n\n394\n00:20:14.294 --> 00:20:18.549\nwe'll do through the Vsphere web client or\nthe vCenter native client.\n\n395\n00:20:18.549 --> 00:20:19.660\nAll right,\n\n396\n00:20:19.660 --> 00:20:23.530\none other thing worth mentioning, if\nyou're ever having a problem with a host.\n\n397\n00:20:23.530 --> 00:20:28.930\nSometimes a host can become locked up or\nnot registering properly.\n\n398\n00:20:28.930 --> 00:20:31.460\nAnd we suspect it's the network\ncuz we're not connecting.\n\n399\n00:20:31.460 --> 00:20:34.602\nBut it could be that it's connection\nwith vCenter is just damaged.\n\n400\n00:20:34.602 --> 00:20:39.162\nSo another technique that I have\nused from time to time is if I\n\n401\n00:20:39.162 --> 00:20:41.541\nthink the host is the problem.\n\n402\n00:20:41.541 --> 00:20:46.387\nWhat you can do is if you go\nin your Vsphere web client.\n\n403\n00:20:46.387 --> 00:20:48.095\nAnd you go into your host and\nclusters, and\n\n404\n00:20:48.095 --> 00:20:50.900\nyou find the host that's\ngiving you an issue.\n\n405\n00:20:50.900 --> 00:20:54.160\nThat you can disconnect the host.\n\n406\n00:20:54.160 --> 00:20:57.670\nSee on the right-click menu there\nI've got Connection and Disconnect?\n\n407\n00:20:57.670 --> 00:21:00.810\nIf you disconnect it,\nthat basically tells vCenter that hey,\n\n408\n00:21:00.810 --> 00:21:02.840\nthat server's not there anymore.\n\n409\n00:21:02.840 --> 00:21:05.450\nBut it stays on your screen so\nyou can then right click it and\n\n410\n00:21:05.450 --> 00:21:07.590\ngo to connection and reconnect.\n\n411\n00:21:07.590 --> 00:21:11.720\nAnd when you reconnect,\nit's going to basically reimport that host\n\n412\n00:21:11.720 --> 00:21:15.520\ninto the system but take over\nthe same marker that it had before.\n\n413\n00:21:15.520 --> 00:21:17.250\nSo it's not creating\na duplicate host right.\n\n414\n00:21:17.250 --> 00:21:19.800\nSo it's going to bring it in and\nreinventory it.\n\n415\n00:21:19.800 --> 00:21:22.580\nThat's really handy if you've\nchanged the IP address of the host.\n\n416\n00:21:22.580 --> 00:21:25.540\nWe could just disconnect,\nreconnect with the new IP and\n\n417\n00:21:25.540 --> 00:21:27.330\nthen we're in business right.\n\n418\n00:21:27.330 --> 00:21:29.090\nSo it might not be the network's broken.\n\n419\n00:21:29.090 --> 00:21:31.240\nIt might just be the network\nhas changed enough.\n\n420\n00:21:31.240 --> 00:21:33.980\nWe're not able to talk to anymore without\ndoing it disconnect and reconnect.\n\n421\n00:21:35.202 --> 00:21:38.150\nAll right so those are all a couple of\ndifferent options that we can go through\n\n422\n00:21:38.150 --> 00:21:40.310\nas far as on the networking side.\n\n423\n00:21:40.310 --> 00:21:43.220\nOn the storage side it is\nactually very similar.\n\n424\n00:21:43.220 --> 00:21:46.780\nOn the storage side we can verify\nthe storage configuration right here\n\n425\n00:21:46.780 --> 00:21:47.692\nthrough our GUI.\n\n426\n00:21:47.692 --> 00:21:52.333\nOn any host,\nyou can take that host go to monitor.\n\n427\n00:21:52.333 --> 00:21:57.580\nAnd under monitor you will be able to see\na lot of information like hardware status.\n\n428\n00:21:57.580 --> 00:21:59.860\nAnd under hardware status\nyou can come in her and\n\n429\n00:21:59.860 --> 00:22:02.470\nyou can view storage connections and\nso on.\n\n430\n00:22:02.470 --> 00:22:04.580\nBecause they're all right here.\n\n431\n00:22:04.580 --> 00:22:07.460\nIf I had any issues with storage\ncontrollers they would show up here and\n\n432\n00:22:07.460 --> 00:22:09.360\nyou would be able to spot that.\n\n433\n00:22:09.360 --> 00:22:12.960\nBut more commonly what we\ndo is we go to manage.\n\n434\n00:22:12.960 --> 00:22:15.890\nAnd under manage you can\ngo to the storage tab and\n\n435\n00:22:15.890 --> 00:22:18.890\nthat's where we'll see our storage\nadapters and storage devices.\n\n436\n00:22:18.890 --> 00:22:21.770\nAnd if you watched the episodes\nwhere we did the data stores,\n\n437\n00:22:21.770 --> 00:22:24.810\nI showed troubleshooting\niSCSI in that episode.\n\n438\n00:22:24.810 --> 00:22:27.450\nAnd now you might have bad IPs or\nwhatever.\n\n439\n00:22:27.450 --> 00:22:31.760\nWhen it comes to HBAs like Fiber HBAs,\nthere's not much configuration with those.\n\n440\n00:22:31.760 --> 00:22:34.340\nYou just plug them in, so as long as\nthey show up here on this screen,\n\n441\n00:22:34.340 --> 00:22:35.650\nthey're typically going to work.\n\n442\n00:22:35.650 --> 00:22:37.785\nAnd so\nwe may need to rescan our adaptors so\n\n443\n00:22:37.785 --> 00:22:40.896\nwe've got that rescan the storage\nadaptor to find devices.\n\n444\n00:22:40.896 --> 00:22:45.532\nWe might have to rescan the host to see\nif a new controller has been added if you\n\n445\n00:22:45.532 --> 00:22:49.963\njust added a new HPA we might need to\nrescan the host first to find the HPA.\n\n446\n00:22:49.963 --> 00:22:55.150\nAnd then rescan the device to\nfind devices that are on the HPA.\n\n447\n00:22:55.150 --> 00:22:58.760\nSo you got a few different ways to\ndo rescans and refreshes right here.\n\n448\n00:22:58.760 --> 00:23:03.070\nStorage controllers almost always need\nrefreshes like this, it's annoying but\n\n449\n00:23:03.070 --> 00:23:03.940\nit does need to be done.\n\n450\n00:23:05.030 --> 00:23:08.170\nIf there's any real problems with storage\nthough they will show up right on your\n\n451\n00:23:08.170 --> 00:23:08.760\nsummary screen.\n\n452\n00:23:08.760 --> 00:23:10.060\nThere will be those yellow bars.\n\n453\n00:23:10.060 --> 00:23:12.350\nLike, well, here,\nI've got these yellow bars.\n\n454\n00:23:12.350 --> 00:23:14.580\nESXI shell and SSH have been enabled.\n\n455\n00:23:14.580 --> 00:23:15.330\nIt's telling me, hey.\n\n456\n00:23:15.330 --> 00:23:16.930\nI might need to remember\nto turn those off.\n\n457\n00:23:16.930 --> 00:23:18.930\nIf I'm going to keep them on forever.\n\n458\n00:23:18.930 --> 00:23:20.930\nI just need to go over here and\ntell it to suppress the warning.\n\n459\n00:23:20.930 --> 00:23:21.900\nDon't warn me about that.\n\n460\n00:23:21.900 --> 00:23:24.170\nI know it's turned on, I want that.\n\n461\n00:23:24.170 --> 00:23:25.900\nDon't warn me, okay?\n\n462\n00:23:25.900 --> 00:23:28.130\nSo I can just suppress those,\nand that takes care of that.\n\n463\n00:23:28.130 --> 00:23:30.700\nBut if I have a storage problem,\nit will show up right there.\n\n464\n00:23:30.700 --> 00:23:31.960\nI'll be able to see it.\n\n465\n00:23:31.960 --> 00:23:34.653\nAnd it'll tell me disconnect\nit from this data store.\n\n466\n00:23:34.653 --> 00:23:36.380\nYou'll see it on the data stores too.\n\n467\n00:23:36.380 --> 00:23:40.469\nSo if I go over to my data stores\nif I have like an iSCSI1 or\n\n468\n00:23:40.469 --> 00:23:44.860\nsomething like that it might\nhave a red diamond on it.\n\n469\n00:23:44.860 --> 00:23:48.180\nAnd that's letting me know that it's been\ndisconnected and there's a problem there.\n\n470\n00:23:48.180 --> 00:23:50.738\nAnd I might need to reconnect it or\nsomething like that.\n\n471\n00:23:50.738 --> 00:23:55.185\nYou can unmount and remount the database\nstore, which is similar to connecting and\n\n472\n00:23:55.185 --> 00:23:57.421\ndisconnecting a host, but for storage.\n\n473\n00:23:57.421 --> 00:24:01.876\nYou can also get really aggressive,\nwhere you go down here and\n\n474\n00:24:01.876 --> 00:24:04.630\nyou can delete the datastore.\n\n475\n00:24:04.630 --> 00:24:08.230\nDeleting the datastore doesn't\ndelete the data that's inside of it.\n\n476\n00:24:08.230 --> 00:24:12.080\nThe data stays there, so you can always\nimport the datastore back in again.\n\n477\n00:24:12.080 --> 00:24:14.770\nI really don't like to do that, cuz\nthere's a risk you could lose your data.\n\n478\n00:24:14.770 --> 00:24:18.090\nBut it is one that you can do\nif it really comes down to it.\n\n479\n00:24:18.090 --> 00:24:21.260\nIf that data storage is just not working,\nyou can re-import it that way.\n\n480\n00:24:21.260 --> 00:24:25.220\nSo a few different choices there\nwhen we're dealing with storage.\n\n481\n00:24:25.220 --> 00:24:27.120\nSo Dan sorry.\n\n482\n00:24:27.120 --> 00:24:32.100\nSo Don since we have this in the GUI\ninterface I'm assuming that we can\n\n483\n00:24:32.100 --> 00:24:34.900\nalso then do it in the command line\nlike you were showing me as well?\n\n484\n00:24:34.900 --> 00:24:35.500\n>> You can.\n>> Okay.\n\n485\n00:24:35.500 --> 00:24:36.910\n>> Yeah it's a lot less common right?\n\n486\n00:24:36.910 --> 00:24:41.210\nBecause if it's a storage problem,\nthen usually our network is fine, and\n\n487\n00:24:41.210 --> 00:24:44.000\nwe're able to access the GUI, and\nthat's the way we're gonna do it.\n\n488\n00:24:44.000 --> 00:24:45.540\nBut, just like with networking,\n\n489\n00:24:45.540 --> 00:24:47.730\nwe have command line utilities\nwe can use for storage.\n\n490\n00:24:47.730 --> 00:24:50.660\nLet me just show you a few,\nI'm gonna flip back to my terminal here.\n\n491\n00:24:50.660 --> 00:24:53.640\nAnd let's run a few commands here.\n\n492\n00:24:53.640 --> 00:24:58.530\nLet's do ESX, CLI, storage,\nso instead of network,\n\n493\n00:24:58.530 --> 00:25:03.330\nnow I'm saying storage, and\nthen I'll say core device list.\n\n494\n00:25:03.330 --> 00:25:05.990\nRight?\nShow me the hardware devices that are part\n\n495\n00:25:05.990 --> 00:25:08.880\nof the storage core And that's gonna\ncome up and show me what I've got.\n\n496\n00:25:08.880 --> 00:25:10.220\nAnd you'll be able to\nlook through here and\n\n497\n00:25:10.220 --> 00:25:13.320\nrecognize if your controller is missing or\nif it's there.\n\n498\n00:25:13.320 --> 00:25:17.710\nI've got,\nthis guy right here is my CD-ROM drive.\n\n499\n00:25:17.710 --> 00:25:20.410\nIf I keep scrolling up,\nit's a lot of data, right?\n\n500\n00:25:20.410 --> 00:25:24.550\nHere's a virtual disk that I've got\nattached, I should have another one.\n\n501\n00:25:24.550 --> 00:25:29.080\nSo each of these things are showing up and\nif I see a disk missing then I know I've\n\n502\n00:25:29.080 --> 00:25:33.730\ngot a problem that's maybe not here on\nmy ESX site host but on my SAN, right?\n\n503\n00:25:33.730 --> 00:25:35.910\nOr maybe the HBA is not showing up or\n\n504\n00:25:35.910 --> 00:25:38.700\nthe SATA controller, RAID controller,\nwhatever is not showing up.\n\n505\n00:25:38.700 --> 00:25:42.480\nThis gives me a chance to see those\ndisks that my system is seeing.\n\n506\n00:25:42.480 --> 00:25:48.820\nYou can also do esxcli\nStorage filesystem list.\n\n507\n00:25:48.820 --> 00:25:53.060\nAll right, and that's going to show us the\nvolumes themselves that are mounted, and\n\n508\n00:25:53.060 --> 00:25:56.620\nso I can look down the list and\nI can see my VMFS fast datastore.\n\n509\n00:25:56.620 --> 00:25:59.760\nHere’s that ESX host 01 local datastore.\n\n510\n00:25:59.760 --> 00:26:02.350\nHere’s an NFS shared ISO datastore,\nright, so\n\n511\n00:26:02.350 --> 00:26:06.500\nthis is even a remote one and then\nI've got a couple of these V fat ones.\n\n512\n00:26:06.500 --> 00:26:07.630\nThese are your operating system.\n\n513\n00:26:07.630 --> 00:26:09.600\nYou don't usually want to\nmess with those guys, right?\n\n514\n00:26:09.600 --> 00:26:14.640\nThat's where the EXIOS is stored and so\nif those aren't showing up, then you're\n\n515\n00:26:14.640 --> 00:26:18.600\nnot getting into shell anyway, so that's\nnot really something that we'll mess with.\n\n516\n00:26:18.600 --> 00:26:21.250\nBut these guys up here are the data\nstores that I'm mounting to.\n\n517\n00:26:21.250 --> 00:26:24.800\nIf I see a data store missing, then I know\nI might have some kind of connectivity Or\n\n518\n00:26:24.800 --> 00:26:25.720\ncontroller issues.\n\n519\n00:26:25.720 --> 00:26:29.020\nSo just additional things we can\nsee right here from the CLI.\n\n520\n00:26:30.560 --> 00:26:34.110\nOkay, a few other things to\nthink about with storage.\n\n521\n00:26:34.110 --> 00:26:39.030\nIf you're doing multipathing, if you\nwatched our storage multipathing episode,\n\n522\n00:26:39.030 --> 00:26:46.420\nyou know that from the GUI we can always\nbrows into a host and go into its storage,\n\n523\n00:26:46.420 --> 00:26:51.340\nand let me get back to my host and I'll go\ninto one of my hosts I go to manage and\n\n524\n00:26:51.340 --> 00:26:55.890\nstorage and under my storage\nyou can pick a controller and\n\n525\n00:26:55.890 --> 00:26:58.560\nright down here you can see\nthe paths that are available, so\n\n526\n00:26:58.560 --> 00:27:02.110\nsee how I've got two different paths\nto get to this one controller?\n\n527\n00:27:02.110 --> 00:27:06.120\nAnd it's the same line, available in two\ndifferent ways, and they're both active.\n\n528\n00:27:06.120 --> 00:27:08.020\nWell, maybe one wasn't active.\n\n529\n00:27:08.020 --> 00:27:10.870\nOr maybe one's disconnected for\nsome reason, I don't know why.\n\n530\n00:27:10.870 --> 00:27:13.550\nWell, seeing right here from this\nscreen it's usually gonna give me some\n\n531\n00:27:13.550 --> 00:27:15.560\ninformation I need, right?\n\n532\n00:27:15.560 --> 00:27:17.450\nOr, I can go to the command line.\n\n533\n00:27:18.500 --> 00:27:24.160\nAnd in the command line\nwe can run esxcli storage\n\n534\n00:27:24.160 --> 00:27:29.420\ncore Path list and now it gave us\na list of all the different paths.\n\n535\n00:27:29.420 --> 00:27:33.920\nSame as what's in the GUI but we'll see\nit right here and you can spot whether or\n\n536\n00:27:33.920 --> 00:27:36.480\nnot you've got your multiple pass\nthe way they're supposed to.\n\n537\n00:27:36.480 --> 00:27:38.900\nSo as I look at like this, IDE disk,\n\n538\n00:27:38.900 --> 00:27:43.500\nI can see that it just has\none target identifier.\n\n539\n00:27:43.500 --> 00:27:46.240\nAnd it looks like I don't have\nmultiple paths on that one.\n\n540\n00:27:47.270 --> 00:27:50.910\nAnd who did I have multiple paths for?\n\n541\n00:27:50.910 --> 00:27:54.590\nLet's see, well this one is saying\nunavailable or path not claimed, so\n\n542\n00:27:54.590 --> 00:27:56.480\nthis one isn't set up for multi-pathing.\n\n543\n00:27:56.480 --> 00:27:57.020\nI know what it is.\n\n544\n00:27:57.020 --> 00:27:58.830\nI have more than one path, but\n\n545\n00:27:58.830 --> 00:28:01.270\nI haven't actually turned on\nmulti-pathing on the data store.\n\n546\n00:28:01.270 --> 00:28:03.705\nYou gotta go to the data store to\nturn on true multi-pathing, and\n\n547\n00:28:03.705 --> 00:28:07.540\nso Mine just detecting the paths but\nthey're not actually being used yet.\n\n548\n00:28:07.540 --> 00:28:09.610\nSo it does give you\na chance to see that and\n\n549\n00:28:09.610 --> 00:28:14.130\nwhether the state of a particular path\nis active or whether it's passive.\n\n550\n00:28:14.130 --> 00:28:17.410\nWe can start to spot those and\nsee how that it is, right, so\n\n551\n00:28:17.410 --> 00:28:20.600\na couple of different things that\nwe can see right here from the CLI,\n\n552\n00:28:22.040 --> 00:28:25.750\nalright usually when it comes to storage,\n\n553\n00:28:25.750 --> 00:28:28.050\nits not connectivity that we're\ntroubleshooting though right?\n\n554\n00:28:28.050 --> 00:28:32.030\nIts rare that we have connectivity there\nmaybe the storage fails, in which case you\n\n555\n00:28:32.030 --> 00:28:34.590\nwalk into the server room and\nsee the red lights on the disk right,\n\n556\n00:28:34.590 --> 00:28:37.680\nthat's kind of easy to see\nnormally it's performance, and\n\n557\n00:28:37.680 --> 00:28:40.940\nthere is a great command line\nutility that we can use.\n\n558\n00:28:40.940 --> 00:28:42.320\nWhen it comes to storage performance,\n\n559\n00:28:42.320 --> 00:28:45.090\nremember from the VSAN episode\nwhere we had the VSAN observer?\n\n560\n00:28:45.090 --> 00:28:45.810\nThat was a neat tool.\n\n561\n00:28:45.810 --> 00:28:48.520\nYou could see all these little graphs and\ncharts.\n\n562\n00:28:48.520 --> 00:28:50.720\nFrom the regular VCR web client,\n\n563\n00:28:50.720 --> 00:28:53.360\nyou actually don't get\nthat great a storage data.\n\n564\n00:28:53.360 --> 00:28:56.380\nBut if you dropped the shell,\nyou can go to one of your hosts.\n\n565\n00:28:56.380 --> 00:28:58.070\nAnd you actually have\nthis really cool tool.\n\n566\n00:28:58.070 --> 00:29:00.710\nIt is called esxtop.\n\n567\n00:29:00.710 --> 00:29:03.860\nIf you're familiar with\nthe UNIX top command,\n\n568\n00:29:03.860 --> 00:29:08.460\nit normally shows you your processes\nthat are using the most CPU CPU, right?\n\n569\n00:29:08.460 --> 00:29:10.740\nSo you can manage CPU and memory.\n\n570\n00:29:10.740 --> 00:29:14.640\nBut if I'm on esxtop,\nit's gonna fire up, and\n\n571\n00:29:14.640 --> 00:29:20.350\nit's gonna output that, shoot, it's cuz\nthe way I'm accessing the terminal.\n\n572\n00:29:20.350 --> 00:29:24.640\nSorry, my terminal client isn't support\nthe animated screen that it's doing.\n\n573\n00:29:24.640 --> 00:29:27.220\nLet me flip over to\nthe native shell on that guy.\n\n574\n00:29:27.220 --> 00:29:30.690\nSo I'm going to go back here,\nand do a little ALT F1.\n\n575\n00:29:30.690 --> 00:29:34.810\nAnd we'll run it right from here.\n\n576\n00:29:34.810 --> 00:29:36.181\nThere we go, that's what I wanted to see.\n\n577\n00:29:36.181 --> 00:29:39.249\n>> [LAUGH]\n>> This is a lightly animated screen.\n\n578\n00:29:39.249 --> 00:29:42.930\nAnd so my terminal wasn't supporting the.\n\n579\n00:29:42.930 --> 00:29:44.680\nCharacter encoding that it was doing.\n\n580\n00:29:44.680 --> 00:29:50.340\nBut what I'm seeing here is a list of all\nthe processes on this system and I can see\n\n581\n00:29:50.340 --> 00:29:54.740\nthe percentages the system used, and wait\ntime and whether it's ready and so on.\n\n582\n00:29:54.740 --> 00:29:59.240\nWhat I'm actually seeing here is CPU\nutilization, just like the top command.\n\n583\n00:29:59.240 --> 00:30:02.570\nBut the cool part is,\nI can change this view.\n\n584\n00:30:02.570 --> 00:30:03.960\nIf you hit the letter U.\n\n585\n00:30:05.000 --> 00:30:07.290\nU is gonna change you to disk view.\n\n586\n00:30:07.290 --> 00:30:12.230\nAnd now I can see each of my disks\nright here and if I scroll over,\n\n587\n00:30:12.230 --> 00:30:17.830\nI can start to see the disk I/O percentage\nbeing used, the low, the commands per\n\n588\n00:30:17.830 --> 00:30:22.705\nsecond, reads right Bytes per second, I\ncan get an idea of how busy that data is.\n\n589\n00:30:22.705 --> 00:30:25.775\nSo if there is a data store that\nI think is being overwhelmed,\n\n590\n00:30:25.775 --> 00:30:26.925\nI can spot that right here.\n\n591\n00:30:26.925 --> 00:30:29.155\nI can look and\nsee if I'm hitting my thresholds.\n\n592\n00:30:29.155 --> 00:30:31.575\nRight now I've only got one data\nstore doing any real work and\n\n593\n00:30:31.575 --> 00:30:32.615\nmost of the time it's idle.\n\n594\n00:30:32.615 --> 00:30:34.400\nSo see how they are all 0 now but For\n\n595\n00:30:34.400 --> 00:30:38.190\na moment there were a few writes going\non and so I'll see each of those.\n\n596\n00:30:38.190 --> 00:30:40.940\nThat was pressing u to get into disk mode.\n\n597\n00:30:40.940 --> 00:30:44.390\nI can press d and get into HBA mode.\n\n598\n00:30:44.390 --> 00:30:47.390\nWhen I'm in HBA mode I see\neach of my controllers, right?\n\n599\n00:30:47.390 --> 00:30:50.860\nSo not the individual disks but\nthe controllers themselves, and so\n\n600\n00:30:50.860 --> 00:30:53.450\nI can look for\ncontrollers that are getting overwhelmed.\n\n601\n00:30:53.450 --> 00:30:58.350\nI might have five disks on one controller\nand one disk might be monopolizing all of\n\n602\n00:30:58.350 --> 00:31:01.110\nthe resources and\nmeanwhile the other four disks are idle.\n\n603\n00:31:01.110 --> 00:31:03.910\nSo I'm gonna move those other\ndisks to a separate controller to\n\n604\n00:31:03.910 --> 00:31:05.078\noptimize performance.\n\n605\n00:31:05.078 --> 00:31:12.115\nSo this ESXtop command,\nit is great for all sorts of things,\n\n606\n00:31:12.115 --> 00:31:17.795\nnot just for CPU which is the default,\nbut also for things like storage.\n\n607\n00:31:17.795 --> 00:31:20.780\nIt's actually got a ton of\ndifferent features inside of it.\n\n608\n00:31:20.780 --> 00:31:22.130\nAnd that'll do it.\n\n609\n00:31:22.130 --> 00:31:24.360\nYou just hit control C to get out of it.\n\n610\n00:31:24.360 --> 00:31:27.690\nAnd then you can go back to business.\n\n611\n00:31:27.690 --> 00:31:28.560\n>> All right, Don,\n\n612\n00:31:28.560 --> 00:31:32.300\nwe've got a few more commands to\nactually go in terms of troubleshooting.\n\n613\n00:31:32.300 --> 00:31:35.820\nBut we are out of time in\nthis particular episode.\n\n614\n00:31:35.820 --> 00:31:39.070\nThere are plenty of troubleshooting tools\nfor us to actually continue to go over.\n\n615\n00:31:39.070 --> 00:31:43.820\nDon has just recently covered in this\nepisode the idea of networking as well\n\n616\n00:31:43.820 --> 00:31:47.960\nas taking a look at those command line\ninterfaces and helping us out as well.\n\n617\n00:31:47.960 --> 00:31:49.720\nDon, any last minute things?\n\n618\n00:31:49.720 --> 00:31:53.414\n>> You know, it's probably not on the exam\nRonnie, but let me show one more tool,\n\n619\n00:31:53.414 --> 00:31:56.188\njust in case, just in case\nsomething creeps up on the exam.\n\n620\n00:31:56.188 --> 00:32:01.145\nThere is a tool called, actually,\nI think I can switch my regular one,\n\n621\n00:32:01.145 --> 00:32:05.112\nmake it look a little better\nIt's called the VOMA right,\n\n622\n00:32:05.112 --> 00:32:10.570\nwhich is the vSphere Ondisk Metadata\nAnalyzer, which is quite the name.\n\n623\n00:32:10.570 --> 00:32:13.990\nAnd what it is does is it lets\nyou scan a disc for corruption.\n\n624\n00:32:13.990 --> 00:32:16.610\nIn Linux or Unix we have the FSCK utility.\n\n625\n00:32:16.610 --> 00:32:18.350\nThis is kind of what this one is like, but\n\n626\n00:32:18.350 --> 00:32:22.870\nit can scan your virtual storage\nto see if there's any corruption.\n\n627\n00:32:22.870 --> 00:32:26.340\nAnd the way it works is you\nbasically just run VOMA.\n\n628\n00:32:26.340 --> 00:32:30.600\nAnd then you point it to a data store.\n\n629\n00:32:30.600 --> 00:32:32.300\nYou need to tell it what\nkind of data store it is.\n\n630\n00:32:32.300 --> 00:32:34.850\nSo I'm gonna say -m vmfs, right.\n\n631\n00:32:34.850 --> 00:32:36.860\nVersus an NFS or whatever.\n\n632\n00:32:36.860 --> 00:32:38.185\nI'm gonna do a VMFS data store.\n\n633\n00:32:38.185 --> 00:32:45.110\nAnd then you do -d and the big long\nname that the data store has, right?\n\n634\n00:32:45.110 --> 00:32:52.370\nEvery data store has a name,\nlike /vmfs/devices/disks/naa.\n\n635\n00:32:52.370 --> 00:32:55.890\nand my head is gonna cover this up so\nI'm gonna need to change that.\n\n636\n00:32:55.890 --> 00:32:56.750\nBut naa.\n\n637\n00:32:56.750 --> 00:32:59.910\nand then there'll be a long\nstring of numbers, right?\n\n638\n00:32:59.910 --> 00:33:05.650\nThat identifies that disk and we can point\nat that and it will output on the screen\n\n639\n00:33:05.650 --> 00:33:09.670\nan analysis and tell you what's going on\nor you can do a -s and put it to a file.\n\n640\n00:33:09.670 --> 00:33:11.770\nAnd it will save the analysis to a file.\n\n641\n00:33:11.770 --> 00:33:15.580\nBut that will scan that disk and\nlook for any metadata corruption and\n\n642\n00:33:15.580 --> 00:33:18.450\nsometimes you will have a data\nstore that will not mount.\n\n643\n00:33:18.450 --> 00:33:19.080\nThis will fix it.\n\n644\n00:33:19.080 --> 00:33:20.510\nThis will let you get around it.\n\n645\n00:33:20.510 --> 00:33:24.720\nAnd if you don't know what that\nbig long string name is for\n\n646\n00:33:24.720 --> 00:33:27.180\nyour disk, you can find that in the GUI.\n\n647\n00:33:27.180 --> 00:33:29.360\nIf I go back to my GUI.\n\n648\n00:33:29.360 --> 00:33:34.020\nAnd jump into my storage for\nparticular data store.\n\n649\n00:33:34.020 --> 00:33:37.580\nWhen you come in and look at your data\nstore, the easiest way to find, I mean,\n\n650\n00:33:37.580 --> 00:33:38.590\nthere's a few ways to find it but\n\n651\n00:33:38.590 --> 00:33:42.460\nif you just look under Files, a lot of\ntimes the name of it will be tucked away\n\n652\n00:33:42.460 --> 00:33:47.450\nas a file right on the disk and\nI say that and I'm not saying it here.\n\n653\n00:33:47.450 --> 00:33:49.480\nBut we can also see it under\nthe storage controller.\n\n654\n00:33:49.480 --> 00:33:55.500\nSo if I go back under the host, we can go\nto Manage > Storage > Storage Devices and\n\n655\n00:33:55.500 --> 00:33:58.750\nyou'll find those names listed in\nhere where it writes them out and\n\n656\n00:33:58.750 --> 00:34:00.640\nyou can see what the name of that disk is.\n\n657\n00:34:00.640 --> 00:34:07.120\nSo for example,\nthis one is /vmfs/devices/disks/mpx blah,\n\n658\n00:34:07.120 --> 00:34:09.390\nblah, blah,\nversus some of these other ones.\n\n659\n00:34:09.390 --> 00:34:11.290\nI guess blah, blah,\nblah is not the most technical term.\n\n660\n00:34:11.290 --> 00:34:14.520\nBut that's that long name, and so\nyou'd punch in whatever that name is and\n\n661\n00:34:14.520 --> 00:34:17.460\nthen the VOMA can scan that and\nlook for corruption.\n\n662\n00:34:17.460 --> 00:34:19.160\nLike I said I don't know if\nthat'll turn up on the exam but\n\n663\n00:34:19.160 --> 00:34:21.670\nit's one I've used in real life,\nit is one that can happen.\n\n664\n00:34:21.670 --> 00:34:27.160\nAnd that's the vSphere On Disk Metadata\nAnalyzer, so just another tool.\n\n665\n00:34:27.160 --> 00:34:30.560\n>> And that Analyzer, you said it\nactually fixes the problem too?\n\n666\n00:34:30.560 --> 00:34:31.580\n>> Yeah.\n>> Nice.\n\n667\n00:34:31.580 --> 00:34:34.200\n>> If it can, sometimes you have\ndamaged data that's beyond that and\n\n668\n00:34:34.200 --> 00:34:34.730\nit'll tell you that.\n\n669\n00:34:35.730 --> 00:34:39.698\n>> All right, well Don, thank you again\nfor showing us at least those tools and\n\n670\n00:34:39.698 --> 00:34:41.000\nthe idea of networking,\n\n671\n00:34:41.000 --> 00:34:45.414\nas well as the storage devices that we'll\nactually have to be able to troubleshoot.\n\n672\n00:34:45.414 --> 00:34:47.624\nBut there are plenty\nmore tools to come and so\n\n673\n00:34:47.624 --> 00:34:50.442\nthat will actually be in\nthe part two of our series here.\n\n674\n00:34:50.442 --> 00:34:53.490\nAnd that's a great place for\nus to go ahead and sign off then.\n\n675\n00:34:53.490 --> 00:34:56.250\nFor ITProTV,\nI've been your host Ronnie Wong.\n\n676\n00:34:56.250 --> 00:34:56.880\n>> And I'm Don Pezet.\n\n677\n00:34:56.880 --> 00:34:59.586\n>> And we'll see you next time.\n\n678\n00:34:59.586 --> 00:35:08.770\n[MUSIC]\n\n",
          "vimeoId": "173620414"
        },
        {
          "description": "In this episode, Ronnie and Don cover some of the most utilized troubleshooting tools found in vSphere.  They continue show some additional troubleshooting tools found in vSphere.  Don emphasizes the importance of log files in troubleshooting and shows were to get to them.  They also take some time to show monitoring tools in vSphere that give more help to a troubleshooter for the performance issues.  Since vSphere is normally implemented in high availability and using Distributed Resource Services to help maintain the uptime and performance, Don also shows how to use and see the tools for both.  Lastly, they mention the enterprise product, vRealize that brings all these tools together as a centralized utility and tool to manage and troubleshoot a vSphere environment.",
          "length": "1369",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-8-1-2-troubleshooting_pt2-070116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-8-1-2-troubleshooting_pt2-070116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-8-1-2-troubleshooting_pt2-070116-1-sm.jpg",
          "title": "Troubleshooting Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.199 --> 00:00:14.424\nWelcome to another great\nepisode right here on ITProTV.\n\n3\n00:00:14.424 --> 00:00:19.740\nI'm your host Ronnie Wong, and\ntoday we're taking a look at VMware VCP6.\n\n4\n00:00:19.740 --> 00:00:23.020\nAnd we've actually in a part two\nof our troubleshooting tools and\n\n5\n00:00:23.020 --> 00:00:25.450\nwe've got a lot more to go over,\nso we wanna jump right into it.\n\n6\n00:00:25.450 --> 00:00:27.220\nAnd in our studious,\nof course to help us out and\n\n7\n00:00:27.220 --> 00:00:30.080\nmake sure we understand all that\nwe need to is Mr. Don Pezet.\n\n8\n00:00:30.080 --> 00:00:31.370\nWelcome back to our studios.\n\n9\n00:00:31.370 --> 00:00:34.290\n>> Hey Ronnie thanks for having me back\nand thanks for letting me continue on with\n\n10\n00:00:34.290 --> 00:00:35.870\nmy ramblings of troubleshooting tools\n>> [LAUGH]\n\n11\n00:00:35.870 --> 00:00:36.880\n>> Cuz there are quite a lot of them.\n\n12\n00:00:36.880 --> 00:00:39.950\nNow we're gonna kick this one off with\nwhat I think is the most important tool.\n\n13\n00:00:39.950 --> 00:00:43.910\nI know I mentioned logs in\nthe last episode and for me,\n\n14\n00:00:43.910 --> 00:00:47.350\nwhen I start troubleshooting,\nlogs are almost the first place that I go.\n\n15\n00:00:47.350 --> 00:00:51.540\nNow, the summary screens on most of\nthe devices inside of Vista will show you\n\n16\n00:00:51.540 --> 00:00:53.660\nsnippets of logs,\nusually the important snippets.\n\n17\n00:00:53.660 --> 00:00:55.420\nSo you get everything you need there,\n\n18\n00:00:55.420 --> 00:00:57.430\nthat's typically the first\nplace that you go.\n\n19\n00:00:57.430 --> 00:00:59.470\nBut after that,\nif I've really gotta dig for\n\n20\n00:00:59.470 --> 00:01:02.980\nthe research, I don't normally go\nto the CLI, that's not where I go.\n\n21\n00:01:02.980 --> 00:01:06.170\nI don't even start navigating\nthrough the tree if I have to,\n\n22\n00:01:06.170 --> 00:01:07.960\nI prefer to go right to the logs.\n\n23\n00:01:07.960 --> 00:01:10.080\nAnd there's a few different places\nwhere we can view those, so\n\n24\n00:01:10.080 --> 00:01:11.526\nlet's kind of run through them.\n\n25\n00:01:11.526 --> 00:01:14.606\nvCenter, at a is running on\ntop of a Unix environment, so\n\n26\n00:01:14.606 --> 00:01:16.540\nof course it's going to have cis-log.\n\n27\n00:01:16.540 --> 00:01:19.670\nThe system log system\n[LAUGH] In the background.\n\n28\n00:01:19.670 --> 00:01:21.760\nSo that the system log\ndemon that's running and\n\n29\n00:01:21.760 --> 00:01:23.630\ncollecting information about our servers.\n\n30\n00:01:23.630 --> 00:01:24.500\nSo we can go and\n\n31\n00:01:24.500 --> 00:01:27.590\ncheck that out and find out whether\nthere's something wrong with our system.\n\n32\n00:01:27.590 --> 00:01:32.150\nSo for example for me,\nif I browse into my vCenter server, right.\n\n33\n00:01:32.150 --> 00:01:35.520\nSo I'm gonna go into my inventory list and\n\n34\n00:01:35.520 --> 00:01:40.080\nI'll pick my vCenter servers I'm\ngonna pick my vCenter server.\n\n35\n00:01:40.080 --> 00:01:45.090\nAnd then inside of my vCenter server,\nI'm gonna go to monitor and under monitor,\n\n36\n00:01:45.090 --> 00:01:49.540\nwe can jump over to System Logs,\nthis guy right here.\n\n37\n00:01:49.540 --> 00:01:54.040\nThat's gonna be our Sys-log and what\nyou're gonna see is the very detailed Unix\n\n38\n00:01:54.040 --> 00:01:57.610\nstyle logging that's maintained by\nthe system under the hood, right, and\n\n39\n00:01:57.610 --> 00:01:59.620\nthis is for my vCenter server.\n\n40\n00:01:59.620 --> 00:02:03.740\nYou have a similar log being maintained\nfor each of your ESXi hosts, or\n\n41\n00:02:03.740 --> 00:02:07.090\nif you've got the PSC separated\non that server too, each one,\n\n42\n00:02:07.090 --> 00:02:09.930\nyou'll be able to go to the monitoring\nsite and system logs, and\n\n43\n00:02:09.930 --> 00:02:13.170\nbe able to dig down in there and\nsee what's what.\n\n44\n00:02:13.170 --> 00:02:16.710\nNow, it does do log rotation,\nso if I drop that list down,\n\n45\n00:02:16.710 --> 00:02:19.030\nyou'll see you have more\nthan one log file, right.\n\n46\n00:02:19.030 --> 00:02:22.130\nYou'll have multiple log files if you've\nbeen running it for more than one day.\n\n47\n00:02:22.130 --> 00:02:26.510\nIt also breaks apart a few things\nlike the alerts, and profiler, and\n\n48\n00:02:26.510 --> 00:02:28.000\ndifferent systems there.\n\n49\n00:02:28.000 --> 00:02:31.330\nThese log files are really useful for\nyou to troubleshoot.\n\n50\n00:02:31.330 --> 00:02:35.450\nYou can also export them, which is really\nuseful when you're working with support.\n\n51\n00:02:35.450 --> 00:02:37.750\nWhen you're on the phone with VMware,\nthey might say, hey,\n\n52\n00:02:37.750 --> 00:02:40.230\ncould you send the system logs for\nyour vCenter Server?\n\n53\n00:02:40.230 --> 00:02:43.010\nAnd what they mean is they want\nyou to come here and export it so\n\n54\n00:02:43.010 --> 00:02:44.500\nyou can send it over to them.\n\n55\n00:02:44.500 --> 00:02:48.800\nAll right, also notice how it's only\nshowing me 2,000 of my 8,620 lines.\n\n56\n00:02:48.800 --> 00:02:54.370\nIf you look over here, you got,\nshow the next ones, show all lines and\n\n57\n00:02:54.370 --> 00:02:57.210\nshow line numbers, those are a few\ndifferent options we've got in there.\n\n58\n00:02:57.210 --> 00:03:00.990\nBut I'll be honest with you, it's pretty\ndifficult to search through the logs from\n\n59\n00:03:00.990 --> 00:03:04.140\nhere and Show All Lines is almost\nalways a bad idea cuz you'll have tens\n\n60\n00:03:04.140 --> 00:03:07.680\nof thousands, hundreds of thousands\nof lines so I'll usually export.\n\n61\n00:03:07.680 --> 00:03:11.200\nExport, load it up in Excel or something\nlike Sublime Text where it can handle\n\n62\n00:03:11.200 --> 00:03:15.060\nhuge files and then you can search right\nthrough it and find everything you need.\n\n63\n00:03:15.060 --> 00:03:18.830\nSo those are the sys-logs right here,\nwe can access them through this,\n\n64\n00:03:18.830 --> 00:03:22.680\nwe can do it through the command line\ninterface too, if you really want to.\n\n65\n00:03:22.680 --> 00:03:25.820\nWe can also tweak how\ndetailed these logs are.\n\n66\n00:03:25.820 --> 00:03:30.020\nSo for example if I go,\nlet me go over to Manage and\n\n67\n00:03:30.020 --> 00:03:34.360\nSettings and under settings,\nif I go under General,\n\n68\n00:03:35.540 --> 00:03:39.290\nunderneath general you'll have\nyour logging options right here.\n\n69\n00:03:39.290 --> 00:03:41.695\nAnd see how my logging\noptions are set to info,\n\n70\n00:03:41.695 --> 00:03:45.703\nthat means it's gonna give me\ninformational, warnings, alerts, right,\n\n71\n00:03:45.703 --> 00:03:49.359\nanything more severe than informational\nand informational itself.\n\n72\n00:03:49.359 --> 00:03:53.119\nIf I edit this, and\nI go down to those logging settings,\n\n73\n00:03:53.119 --> 00:03:57.919\nyou can tweak that, and you'll see\nthat info is not the most detailed.\n\n74\n00:03:57.919 --> 00:04:00.599\nWe can go down to verbose,\nverbose is gonna give\n\n75\n00:04:00.599 --> 00:04:05.090\nus really detailed information on what's\ngoing on in the system, and trivia,\n\n76\n00:04:05.090 --> 00:04:09.265\nthat one's gonna give you everything,\nmore than you ever want, right?\n\n77\n00:04:09.265 --> 00:04:11.825\nSo several different levels there,\nbut we also have warning and\n\n78\n00:04:11.825 --> 00:04:14.490\nerror if we wanna limit it to\njust more significant things.\n\n79\n00:04:14.490 --> 00:04:18.600\nInfo, those are things we need to know\nabout but there's no action to take.\n\n80\n00:04:18.600 --> 00:04:21.070\nWarning, that's something that\nmay not be a problem now but\n\n81\n00:04:21.070 --> 00:04:24.020\nthere will be in the future so\nthere's probably an action to take.\n\n82\n00:04:24.020 --> 00:04:27.710\nError, that's something that's a problem\nright now and you need to take an action.\n\n83\n00:04:27.710 --> 00:04:30.090\nSo at a minimum, we want warning and\n\n84\n00:04:30.090 --> 00:04:33.950\nerror, but info is the default that means\nyou get all three of these, all right, and\n\n85\n00:04:33.950 --> 00:04:37.335\nyou can disable logging if you're crazy,\nthat option is there.\n\n86\n00:04:37.335 --> 00:04:39.040\n>> [LAUGH]\n>> I would never do that, but\n\n87\n00:04:39.040 --> 00:04:39.810\nthe option is there.\n\n88\n00:04:41.320 --> 00:04:44.380\nOkay, so those are some of the different\nthings we can do with Sys-Log,\n\n89\n00:04:44.380 --> 00:04:46.050\nit's kind of a nice thing.\n\n90\n00:04:46.050 --> 00:04:49.740\nIt's running, it's part of Unix so it's\ngonna be there and it's often operational.\n\n91\n00:04:49.740 --> 00:04:52.540\nFrom the command line let me,\nlet me switch over.\n\n92\n00:04:53.660 --> 00:04:58.330\nHere on SSH into one of my ESX-HOSTS,\nin the SXI-HOST, and\n\n93\n00:04:58.330 --> 00:05:03.120\non the host if you just go to /var/log,\n\n94\n00:05:03.120 --> 00:05:06.160\ninside of that folder you will\nsee a bunch of log files.\n\n95\n00:05:06.160 --> 00:05:08.220\nAnd the one that we're\ntypically looking for\n\n96\n00:05:08.220 --> 00:05:11.160\nVMware is this guy right\nhere vmkernel.log.\n\n97\n00:05:11.160 --> 00:05:15.270\nSo if I take a look at vmkernel.log,\n\n98\n00:05:15.270 --> 00:05:18.220\nwe'll see those same log\nentries all lay out here.\n\n99\n00:05:18.220 --> 00:05:21.730\nWell I was looking at my vCenter server\na minute ago, this is an ESXI host but\n\n100\n00:05:21.730 --> 00:05:25.130\nsame thing, you're gonna find\nthat information right there.\n\n101\n00:05:25.130 --> 00:05:27.530\nAll right, so a couple of different\nways to see those log files and\n\n102\n00:05:27.530 --> 00:05:28.390\nfind out what's going on.\n\n103\n00:05:28.390 --> 00:05:32.310\nNow, the biggest challenge with the log\nfiles is that it's usually big,\n\n104\n00:05:32.310 --> 00:05:33.790\nusually a lot of data in there and\n\n105\n00:05:33.790 --> 00:05:36.520\nit's hard to figure out what's\nimportant and what's not.\n\n106\n00:05:36.520 --> 00:05:39.830\nSo what VMware did is they gave\nus another system to use and\n\n107\n00:05:39.830 --> 00:05:42.600\nthat's the events and issue system.\n\n108\n00:05:42.600 --> 00:05:48.670\nThat if we go back to our vCenter\nserver and we go to our Monitor tab,\n\n109\n00:05:48.670 --> 00:05:52.850\nI've kinda skipped over it, but you'll see\nthese two buttons here, Issues and Events.\n\n110\n00:05:52.850 --> 00:05:57.300\nOkay, Events those are kind of routine\nthings that have happened on the system.\n\n111\n00:05:57.300 --> 00:06:00.540\nI created a VM, or\nI deleted a piece of storage, or\n\n112\n00:06:00.540 --> 00:06:04.470\nI rescanned some adaptors, these are\nthings that have already happened, right?\n\n113\n00:06:04.470 --> 00:06:06.940\nAnd they're just events,\nmaybe good, maybe bad.\n\n114\n00:06:06.940 --> 00:06:10.440\nHere I've got a bad one,\nI tried to log into a iSCSI target and\n\n115\n00:06:10.440 --> 00:06:12.830\nI got an error logging in to the target.\n\n116\n00:06:12.830 --> 00:06:14.430\nWhy did I get the error?\n\n117\n00:06:14.430 --> 00:06:16.890\nI don't know, was it a bad password?\n\n118\n00:06:16.890 --> 00:06:18.890\nWas the other host unreachable?\n\n119\n00:06:18.890 --> 00:06:20.910\nWell, I can click on it and\n\n120\n00:06:20.910 --> 00:06:24.120\nthen down here at the bottom I get\na little more detailed information.\n\n121\n00:06:24.120 --> 00:06:28.420\nAnd so it's telling me, log into this\ntarget failed, and then it says the iSCSI\n\n122\n00:06:28.420 --> 00:06:33.040\ninitiator could not establish\na network connection to the target.\n\n123\n00:06:33.040 --> 00:06:35.320\nI had a connectivity issue,\nthis is iSCSI, right?\n\n124\n00:06:35.320 --> 00:06:39.370\nSo iSCSI uses our normal TCPIP network,\nit tried to connect and\n\n125\n00:06:39.370 --> 00:06:40.630\nfor some reason failed.\n\n126\n00:06:40.630 --> 00:06:44.530\nAll right and\nI can see that happened at 2:46 PM and\n\n127\n00:06:44.530 --> 00:06:48.520\nI can look up ahead and see,\ndiscovered a data store.\n\n128\n00:06:48.520 --> 00:06:51.018\nSo right on top of that,\nI've got discovered a data store.\n\n129\n00:06:51.018 --> 00:06:53.820\nAnd I've got Heartbeat, and\nthe data store being added, so\n\n130\n00:06:53.820 --> 00:06:57.880\nit's already corrected itself, I can see\nthis series of events as they played out.\n\n131\n00:06:58.990 --> 00:07:03.260\nIf the error were still there,\nI would jump over to issues, and\n\n132\n00:07:03.260 --> 00:07:05.100\nit would show up here, okay?\n\n133\n00:07:05.100 --> 00:07:07.330\nIf I had a valid issue,\nit would show up here.\n\n134\n00:07:07.330 --> 00:07:09.690\nIf the issue was already resolved,\nit would disappear from here, and\n\n135\n00:07:09.690 --> 00:07:11.810\nit would just be under Events.\n\n136\n00:07:11.810 --> 00:07:16.090\nNow under Issues, you can see I've got\na vCenter Server Health Alarm, right?\n\n137\n00:07:16.090 --> 00:07:18.800\nThey're gonna show up right here, and\nyou can spot what that problem is.\n\n138\n00:07:18.800 --> 00:07:20.890\nThey show up a number of\ndifferent places though.\n\n139\n00:07:20.890 --> 00:07:26.300\nFor example, back on my Summary screen,\nif I have any outstanding warnings,\n\n140\n00:07:26.300 --> 00:07:28.340\nthere they are in this yellow bar.\n\n141\n00:07:28.340 --> 00:07:32.360\nOr my alarm view up here, there it is too.\n\n142\n00:07:32.360 --> 00:07:35.610\nThree different places, so it's rare that\nI actually go into the one that I just\n\n143\n00:07:35.610 --> 00:07:38.920\nshowed you, because I've normally seen it\nin one of these other two places first.\n\n144\n00:07:38.920 --> 00:07:42.220\nAnd here I can see that I've\ngot a vCenter Health Alarm and\n\n145\n00:07:42.220 --> 00:07:45.710\nit says that my vpxd status\nchanged from red to yellow, right.\n\n146\n00:07:45.710 --> 00:07:50.396\nVpxd, that's a storage device and it went\nfrom red to yellow which means it had\n\n147\n00:07:50.396 --> 00:07:53.808\nan error, now it just has a warning,\nwell that's nice.\n\n148\n00:07:53.808 --> 00:07:56.818\nI can acknowledge it so\nthat the system knows I'm working on it or\n\n149\n00:07:56.818 --> 00:07:59.519\nif I know it's already been\nfixed I can reset it to green.\n\n150\n00:07:59.519 --> 00:08:01.204\nAnd now, the alarm goes away.\n\n151\n00:08:01.204 --> 00:08:04.095\nIf the issue still exists,\nthe alarm's just gonna reappear again and\n\n152\n00:08:04.095 --> 00:08:05.310\nthen I can sort it out.\n\n153\n00:08:05.310 --> 00:08:09.555\nBut right now, I saw in the Events\nthat it was already resolved and so\n\n154\n00:08:09.555 --> 00:08:10.909\nI can clear that out.\n\n155\n00:08:10.909 --> 00:08:14.579\nAll right, the other one that\nI didn't mention were tasks.\n\n156\n00:08:14.579 --> 00:08:19.970\nSo when I went under Monitor > Issues,\nthose are problems right now.\n\n157\n00:08:19.970 --> 00:08:22.950\nEvents, those are things that have\nhappened in the past including problems\n\n158\n00:08:22.950 --> 00:08:24.480\nthat may have resolved themselves.\n\n159\n00:08:24.480 --> 00:08:28.293\nTasks, those are activities that\nare being performed right now.\n\n160\n00:08:28.293 --> 00:08:31.475\nAnd when you look, I've got a list\nof completed things, right?\n\n161\n00:08:31.475 --> 00:08:33.289\nBut I might be working in the system and\n\n162\n00:08:33.289 --> 00:08:36.270\nRonnie might be working in\nthe system at the same time.\n\n163\n00:08:36.270 --> 00:08:38.960\nAnd if he does something,\nit'll show up under the Tasks.\n\n164\n00:08:38.960 --> 00:08:40.990\nAnd so if I see a data store go offline,\n\n165\n00:08:40.990 --> 00:08:43.350\nI might say, ooh,\nproblem with the data store.\n\n166\n00:08:43.350 --> 00:08:46.560\nAnd then I look and see that Ronnie\nis working on that data store.\n\n167\n00:08:46.560 --> 00:08:50.390\nI'm like okay, not a problem, Ronnie's\nworking with it, I'll leave it be.\n\n168\n00:08:50.390 --> 00:08:53.560\nAnd any alert that gets generated,\nhe can always go and\n\n169\n00:08:53.560 --> 00:08:57.750\nacknowledge the alert, and that way I\ndon't get a pop up on my screen, okay?\n\n170\n00:08:57.750 --> 00:09:01.010\nIf you want to know who did it, when you\nzoom in on this, if we go all the way over\n\n171\n00:09:01.010 --> 00:09:04.550\nhere to the right,\nyou'll see there's this column, Initiator.\n\n172\n00:09:04.550 --> 00:09:07.516\nAnd it will show the username of\nwho's doing it, and the start time,\n\n173\n00:09:07.516 --> 00:09:08.500\nlike when they did it.\n\n174\n00:09:08.500 --> 00:09:10.580\nSo you get that information right here.\n\n175\n00:09:10.580 --> 00:09:13.325\nAnd if it's completed,\nit'll have a completion time.\n\n176\n00:09:13.325 --> 00:09:15.055\nBut a lot of times they're\ngonna be running, right.\n\n177\n00:09:15.055 --> 00:09:16.755\nSo they'll actively be\nrunning right now and\n\n178\n00:09:16.755 --> 00:09:18.325\nthat's why we're kind\nof throwing an alarm.\n\n179\n00:09:20.515 --> 00:09:24.795\nNow it might be that our\nconfiguration is working, but\n\n180\n00:09:24.795 --> 00:09:26.365\nit's just not working fast, right.\n\n181\n00:09:26.365 --> 00:09:30.565\nThings might be slow or sluggish,\nwe might be seeing intermittent issues.\n\n182\n00:09:30.565 --> 00:09:33.150\nAnd that's where we wanna\nmonitor performance.\n\n183\n00:09:33.150 --> 00:09:35.460\nAnd performance is pretty\neasy to monitor too.\n\n184\n00:09:35.460 --> 00:09:37.370\nWe're normally gonna\nmonitor that on our host.\n\n185\n00:09:37.370 --> 00:09:42.460\nSo I'm gonna jump back over to a host,\nand I'll take ESX host 01 for example.\n\n186\n00:09:42.460 --> 00:09:46.190\nSo I'm gonna take good old host 01, and\n\n187\n00:09:46.190 --> 00:09:52.310\nwhen I go to manage it, there we go,\nwe can go under the Monitoring tab.\n\n188\n00:09:52.310 --> 00:09:54.940\nAnd under Monitoring you've\ngot performance right here.\n\n189\n00:09:54.940 --> 00:09:56.880\nAnd I know we've looked to this\nin some of the other shows but\n\n190\n00:09:56.880 --> 00:10:00.950\njust to kind of cover it again,\nwhen you go to the performance screen\n\n191\n00:10:00.950 --> 00:10:03.920\nit's gonna load up some charts right\nhere to show me that performance.\n\n192\n00:10:03.920 --> 00:10:07.280\nAnd I'm kinda stalling,\ncuz it takes a minute to load.\n\n193\n00:10:07.280 --> 00:10:09.480\nIf your server's been running for\nat least a day,\n\n194\n00:10:09.480 --> 00:10:11.740\nyou should have some\ncharts that show up here.\n\n195\n00:10:11.740 --> 00:10:14.720\nIf it's been running for less than a day,\nthen you will probably get an error.\n\n196\n00:10:14.720 --> 00:10:17.373\nAnd you can drop this down and\ntell it to switch into real time mode.\n\n197\n00:10:17.373 --> 00:10:21.776\nAnd now it's gonna show the last couple of\nhours, actually I guess it's the last two\n\n198\n00:10:21.776 --> 00:10:24.580\nhours, and\nit's gonna show you some real time data.\n\n199\n00:10:24.580 --> 00:10:26.590\nSo this is what's going on\nat the system right now,\n\n200\n00:10:26.590 --> 00:10:28.840\nversus the last few days, right.\n\n201\n00:10:28.840 --> 00:10:32.610\nBut now I can monitor CPU and\nmemory and so on.\n\n202\n00:10:32.610 --> 00:10:34.230\nKey thing to remember about this screen,\n\n203\n00:10:34.230 --> 00:10:37.590\nthe thing a lot of people forget,\nis this View tab right here.\n\n204\n00:10:37.590 --> 00:10:39.347\nUnder View, I'm set to Home right now, but\n\n205\n00:10:39.347 --> 00:10:42.118\nif you drop that down you'll see\nthat I can flip to Virtual Machines.\n\n206\n00:10:42.118 --> 00:10:45.590\nAnd now it's gonna break\nup that performance by VM.\n\n207\n00:10:45.590 --> 00:10:50.567\nAnd that's really handy because knowing\nthat my host CPU is 100% is one thing but\n\n208\n00:10:50.567 --> 00:10:54.426\nknowing which VM it is that's\nthe problem is more helpful.\n\n209\n00:10:54.426 --> 00:10:57.778\nCuz that's gonna help me decide, I need\nto move this VM to different hardware.\n\n210\n00:10:57.778 --> 00:11:00.570\nRight, I can shuffle things around\nif I know which VMs are the problem.\n\n211\n00:11:00.570 --> 00:11:03.060\nThis is where the Distributed\nResource Scheduler is using.\n\n212\n00:11:03.060 --> 00:11:05.389\nSo we can quickly troubleshoot\nperformance issues right here.\n\n213\n00:11:05.389 --> 00:11:10.103\nAnd it's not just CPU, you always wanna\npay attention to the network, DiskIO,\n\n214\n00:11:10.103 --> 00:11:13.470\nmemory, those are all\nthings that are important.\n\n215\n00:11:13.470 --> 00:11:16.928\nAnd to you may need to tweak these\ntables to get exactly what you want.\n\n216\n00:11:16.928 --> 00:11:20.888\nAnd If you go on to the Advanced menu,\nover here, you'll see you have additional\n\n217\n00:11:20.888 --> 00:11:23.582\noptions where you can tweet\nthat to see even more data.\n\n218\n00:11:23.582 --> 00:11:25.680\nRight now it's showing me CPU by default.\n\n219\n00:11:25.680 --> 00:11:29.790\nBut if I drop that down I can\nview Datastore, Memory, Network,\n\n220\n00:11:29.790 --> 00:11:31.660\nPower, Disk, all those things.\n\n221\n00:11:31.660 --> 00:11:34.640\nSo I can figure out exactly\nwhere my bottleneck is and\n\n222\n00:11:34.640 --> 00:11:36.620\nwhy the system is running\nslower than it should be.\n\n223\n00:11:36.620 --> 00:11:41.390\nIt's a great resource when it comes to\ntroubleshooting performance, all right.\n\n224\n00:11:41.390 --> 00:11:44.318\nYou also have this option, I always miss\nthis one cuz it's kind of hidden away\n\n225\n00:11:44.318 --> 00:11:47.446\nhere, Chart Options, right, it's a tiny\nlittle link up at the top of the chart.\n\n226\n00:11:47.446 --> 00:11:52.680\nAnd if you click Chart Options you\ncan manipulate all sorts of stuff.\n\n227\n00:11:52.680 --> 00:11:56.370\nThe time range, you can pick exactly\nwhat counters are being shown so\n\n228\n00:11:56.370 --> 00:11:59.060\nyou can create hybrids of\nwhat's being displayed.\n\n229\n00:11:59.060 --> 00:12:02.110\nOver here you’ll see all the different\ncategories that we can pick from.\n\n230\n00:12:02.110 --> 00:12:04.020\nYou can customize this a lot.\n\n231\n00:12:05.050 --> 00:12:07.340\nMy word of advice to you\nthough is if you customize it,\n\n232\n00:12:07.340 --> 00:12:09.720\nmake sure you do the Save Options As.\n\n233\n00:12:09.720 --> 00:12:12.040\nYou can effectively create a template\nthat you can use over, and\n\n234\n00:12:12.040 --> 00:12:12.700\nover, and over again.\n\n235\n00:12:12.700 --> 00:12:15.530\nAnd when you save it,\nyou can drop this box down and pick it.\n\n236\n00:12:15.530 --> 00:12:22.080\nRight, so if I save this, and I'm gonna\ncall it Don's Custom Performance, right?\n\n237\n00:12:22.080 --> 00:12:26.230\nSo now when something goes wrong, I can\ncome right into here for Chart Options.\n\n238\n00:12:26.230 --> 00:12:29.930\nI can drop it down and\nI can choose Don's Custom Performance, and\n\n239\n00:12:29.930 --> 00:12:32.640\nnow the chart is gonna be configured\nexactly the way that I want.\n\n240\n00:12:32.640 --> 00:12:36.098\nAnd when I hit OK that's gonna\nre-display and now it's done my way.\n\n241\n00:12:36.098 --> 00:12:40.170\nRight, you kind of figure out what works\nfor your environment and what you need.\n\n242\n00:12:40.170 --> 00:12:43.270\n>> So Don, do we have the same option for\nsomething like a SAN?\n\n243\n00:12:43.270 --> 00:12:44.931\nSince we're actually connecting\nto our appliances there.\n\n244\n00:12:44.931 --> 00:12:48.100\n>> Yeah, these same charts\nright here work for a SAN.\n\n245\n00:12:48.100 --> 00:12:52.320\nIf you have an actual, physical SAN, odds\nare that they have performance counters\n\n246\n00:12:52.320 --> 00:12:54.220\nthat you can use that\nare gonna be a little better.\n\n247\n00:12:54.220 --> 00:12:55.370\nThe negative side on that,\n\n248\n00:12:55.370 --> 00:12:59.010\nif you monitor from the SAN side,\nit's gonna show everything based on host.\n\n249\n00:12:59.010 --> 00:13:01.789\nIt won't show you the original VMs\nunless the SAN supports VVOLs,\n\n250\n00:13:01.789 --> 00:13:03.036\nthat would be the exception.\n\n251\n00:13:03.036 --> 00:13:06.370\nBut otherwise it's gonna show you\nperformance from the host side.\n\n252\n00:13:06.370 --> 00:13:09.493\nFrom here we can monitor it and\nwe can see the individual VMs.\n\n253\n00:13:09.493 --> 00:13:12.030\nIf you have a VSAN,\ndon't use either of these.\n\n254\n00:13:12.030 --> 00:13:14.820\nIf you have a VSAN, use the VSAN Observer.\n\n255\n00:13:14.820 --> 00:13:17.750\nIf you didn't catch the VSAN episode,\njump over and check that one, and\n\n256\n00:13:17.750 --> 00:13:19.520\nwe cover the VSAN Observer there.\n\n257\n00:13:19.520 --> 00:13:22.276\nSo those are all the different things\nthat we can use to kinda the monitor and\n\n258\n00:13:22.276 --> 00:13:22.907\nsee this stuff.\n\n259\n00:13:22.907 --> 00:13:28.575\nIt's very detailed, you can really dive\nin there and see what you need to see.\n\n260\n00:13:28.575 --> 00:13:29.515\nAnd its pretty powerful.\n\n261\n00:13:30.685 --> 00:13:35.312\nAll right, the only thing, let's see,\nwhat else do I have to mention here?\n\n262\n00:13:35.312 --> 00:13:37.607\nHigh availability in DRS, right?\n\n263\n00:13:37.607 --> 00:13:39.312\nLet's say we have a cluster.\n\n264\n00:13:39.312 --> 00:13:43.812\nIf you've got a cluster, now you servers\nare working in concert to achieve a goal.\n\n265\n00:13:43.812 --> 00:13:47.622\nAnd it's possible you could have problems\nin your cluster, it happens all the time.\n\n266\n00:13:47.622 --> 00:13:51.282\nYou may see something like,\nyou go to view a cluster and one node\n\n267\n00:13:51.282 --> 00:13:56.050\nhas a red diamond on it or one node has\nthe yellow triangle and it isn't happy.\n\n268\n00:13:56.050 --> 00:14:00.210\nSo if that happens to you, you need to\nfind out what's wrong with that node.\n\n269\n00:14:00.210 --> 00:14:04.300\nAnd we can always come in\nhere to Hosting Clusters, and\n\n270\n00:14:04.300 --> 00:14:06.850\nwe can click on the cluster\nthat's in question.\n\n271\n00:14:06.850 --> 00:14:09.140\nAnd if you go to the Summary tab,\n\n272\n00:14:09.140 --> 00:14:11.320\nit'll normally tell you\nwhat's wrong with that node.\n\n273\n00:14:11.320 --> 00:14:16.500\nOkay, but look at my environment, I've got\nyellow warning flags on both of my hosts.\n\n274\n00:14:16.500 --> 00:14:20.410\nBut when I click on the cluster,\nthere's nothing here, right?\n\n275\n00:14:20.410 --> 00:14:21.480\nThe cluster thinks that it's fine.\n\n276\n00:14:21.480 --> 00:14:23.530\nIt doesn't think that it has any problems.\n\n277\n00:14:23.530 --> 00:14:28.450\nAnd if I go to Monitor > Issues,\nno issues, no triggered alarms, right.\n\n278\n00:14:28.450 --> 00:14:30.280\nIt just thinks that it's fine.\n\n279\n00:14:30.280 --> 00:14:32.920\nSo sometimes looking at\nthe cluster isn't good enough.\n\n280\n00:14:32.920 --> 00:14:35.530\nSometimes you do have to go in and\ntake a look at the nodes.\n\n281\n00:14:35.530 --> 00:14:36.530\nAnd if we go to the node and\n\n282\n00:14:36.530 --> 00:14:40.400\nlook at issues,\nnow I can see what my issue actually is.\n\n283\n00:14:40.400 --> 00:14:44.400\nSee how we've got this, The number of\nvSphere HA heartbeat datastores for\n\n284\n00:14:44.400 --> 00:14:47.010\nthis host is 1,\nwhich is less than the recommended,\n\n285\n00:14:47.010 --> 00:14:48.245\nwhich is actually 2, there we go.\n\n286\n00:14:48.245 --> 00:14:50.930\nSo I need more heartbeat datastores.\n\n287\n00:14:50.930 --> 00:14:52.140\nSo that's what it's warning me about.\n\n288\n00:14:52.140 --> 00:14:54.850\nIt says I've got no management\nnetwork redundancy.\n\n289\n00:14:54.850 --> 00:14:58.000\nSo I've got problems, and\nthe problem is tied to this host.\n\n290\n00:14:58.000 --> 00:15:02.200\nIt's not the cluster's fault that\nthis host is missing that datastore.\n\n291\n00:15:02.200 --> 00:15:06.150\nSo I have to look at it from that\nhost perspective, all right.\n\n292\n00:15:06.150 --> 00:15:10.830\nAnother thing is, there's some\ngreat cluster troubleshooting tools\n\n293\n00:15:10.830 --> 00:15:14.880\nthat are just not a part\nof the vSphere Web Client.\n\n294\n00:15:14.880 --> 00:15:19.250\nOn the vSphere Native Client you\nhave these really neat cluster maps.\n\n295\n00:15:19.250 --> 00:15:20.146\nWhen you have a cluster,\n\n296\n00:15:20.146 --> 00:15:22.674\nyou've got the cluster, and\nyou have more than one node inside of it.\n\n297\n00:15:22.674 --> 00:15:25.455\nAnd then you have all these datastores\nthat are attached to the cluster, and\n\n298\n00:15:25.455 --> 00:15:27.400\nyou got VMs that\nare attached to the cluster.\n\n299\n00:15:27.400 --> 00:15:30.170\nThey may not be attached to one node,\nthey're attached to the cluster itself.\n\n300\n00:15:30.170 --> 00:15:34.340\nAnd so having a map that shows what's\nconnected to what can be really handy.\n\n301\n00:15:34.340 --> 00:15:35.768\nThe Web Client can't do it though.\n\n302\n00:15:35.768 --> 00:15:39.337\nThis is one of the times when there's\nsomething the Native Client can do that\n\n303\n00:15:39.337 --> 00:15:41.285\nthe Web Client can't.\n\n304\n00:15:41.285 --> 00:15:44.795\nThis series, I've used the Web Client\nalmost exclusively, but if you want a map,\n\n305\n00:15:44.795 --> 00:15:46.569\nyou're gonna have to use the Native one.\n\n306\n00:15:46.569 --> 00:15:48.776\nSo let me jump over to my server.\n\n307\n00:15:48.776 --> 00:15:51.459\nAnd here I'm in the vSphere Native Client.\n\n308\n00:15:51.459 --> 00:15:54.185\nAnd in the vSphere Native Client,\nyou can generate a map,\n\n309\n00:15:54.185 --> 00:15:55.807\nif you browse into your clusters.\n\n310\n00:15:55.807 --> 00:16:02.190\nI'm gonna go to host and clusters and I'm\ngonna find my cluster, right here, okay.\n\n311\n00:16:02.190 --> 00:16:04.150\nAnd when you choose the cluster,\n\n312\n00:16:04.150 --> 00:16:07.850\nsee, I still have this warnings on my\nnodes just like on the web client.\n\n313\n00:16:07.850 --> 00:16:10.260\nBut if I go across these tabs up top,\n\n314\n00:16:10.260 --> 00:16:15.000\nI'll find a tab called Maps and\nif you choose map.\n\n315\n00:16:15.000 --> 00:16:15.890\nThis is a neat one,\n\n316\n00:16:15.890 --> 00:16:20.040\nbecause what it does is, it lays out the\nhardware that is involved in your cluster.\n\n317\n00:16:20.040 --> 00:16:22.650\nAnd tries to map it in a way\nthat you can see it, right?\n\n318\n00:16:22.650 --> 00:16:28.040\nHere's a VM that I have, WIN-CLIENT01 and\nWIN-CLIENT01 is tied to the VM network.\n\n319\n00:16:28.040 --> 00:16:30.220\nIs tied to my shared ISO data stores,\n\n320\n00:16:30.220 --> 00:16:32.690\nis tied to whatever this\ndata store happens to be.\n\n321\n00:16:32.690 --> 00:16:36.580\nIf I float over, it'll tell me\nmy host on local data store and\n\n322\n00:16:36.580 --> 00:16:39.410\nit's attached to the host 01 host.\n\n323\n00:16:39.410 --> 00:16:42.000\nBecause it's using a local data\nstore instead of the shared one.\n\n324\n00:16:42.000 --> 00:16:44.000\nSo up here, I see Host 02 and\n\n325\n00:16:44.000 --> 00:16:48.430\nsee how there's no line from\nWIN-CLIENT01 to Host 02?\n\n326\n00:16:48.430 --> 00:16:51.695\nThat means that Host 02\ncannot boot up this VM.\n\n327\n00:16:51.695 --> 00:16:54.395\nEven though the VM's in the cluster,\nit can't boot it up over here,\n\n328\n00:16:54.395 --> 00:16:58.975\nbecause this client is running\non this hosts' local storage.\n\n329\n00:16:58.975 --> 00:17:01.425\nIt's not on the shared\nstorage like it should be and\n\n330\n00:17:01.425 --> 00:17:04.835\nif I look down a little bit,\noops, or zoom out like crazy.\n\n331\n00:17:04.835 --> 00:17:09.175\nThen there's some of my shared storage\nright down here that I'm not using.\n\n332\n00:17:09.175 --> 00:17:13.570\nAnd that's going to be a problem for\nme on this node, on this cluster.\n\n333\n00:17:13.570 --> 00:17:17.640\nBecause I really move the client\nto shared storage, so\n\n334\n00:17:17.640 --> 00:17:19.410\nboth of those are able to see it.\n\n335\n00:17:19.410 --> 00:17:22.280\nAnd then, I need to enable V motion\non the VM kernel adaptors, so\n\n336\n00:17:22.280 --> 00:17:23.770\nthat we can do fail over.\n\n337\n00:17:23.770 --> 00:17:27.980\nWhen you look over here, this is where\nwe pick what is being mapped and\n\n338\n00:17:27.980 --> 00:17:29.960\nright now it's doing Host to VM.\n\n339\n00:17:29.960 --> 00:17:32.910\nBut you can change that\naround quite a bit, and\n\n340\n00:17:32.910 --> 00:17:35.340\ncustomize how it's going to be displayed,\nright?\n\n341\n00:17:35.340 --> 00:17:37.350\nRight now, it's set for\nVirtual Machine Resources.\n\n342\n00:17:37.350 --> 00:17:41.390\nI could do Host Resources,\nDatastore Resources, Custom Map.\n\n343\n00:17:41.390 --> 00:17:43.290\nSo, you can tweak that and now,\n\n344\n00:17:43.290 --> 00:17:47.610\nI can see, here's host01 and\nall the stuff that it's connected to.\n\n345\n00:17:47.610 --> 00:17:48.910\nThe shared storage.\n\n346\n00:17:48.910 --> 00:17:51.730\nThe other host in the cluster and so on.\n\n347\n00:17:51.730 --> 00:17:54.980\nThese little maps are handy to\njust get a visual representation\n\n348\n00:17:54.980 --> 00:17:56.280\nof your configuration.\n\n349\n00:17:56.280 --> 00:17:59.970\nBut it is a feature of the native\nV-sphere management client.\n\n350\n00:17:59.970 --> 00:18:04.050\nIt's not a part of\nthe V-sphere web client.\n\n351\n00:18:04.050 --> 00:18:07.030\nAll right, let's see,\nwhat other damage can we do here?\n\n352\n00:18:07.030 --> 00:18:07.630\nWe've seen that.\n\n353\n00:18:07.630 --> 00:18:08.624\nWe've seen the resource maps.\n\n354\n00:18:08.624 --> 00:18:10.690\n>> V-Realize\n>> V-Realize, okay.\n\n355\n00:18:11.830 --> 00:18:15.320\nAll the things that I'd just show you,\nthat are all the things in part one and\n\n356\n00:18:15.320 --> 00:18:16.590\nhere in part two.\n\n357\n00:18:16.590 --> 00:18:22.010\nthese have all been tools that\nare available for us to use, okay.\n\n358\n00:18:22.010 --> 00:18:26.075\nBut, there's one big super mega tool,\nthat we haven't touched on,\n\n359\n00:18:26.075 --> 00:18:30.965\nmostlybecause it's not really\non the exam V-Realize.\n\n360\n00:18:30.965 --> 00:18:33.790\nV-Realize is part of the operations\nmanagement software that we can\n\n361\n00:18:33.790 --> 00:18:35.000\npurchase from VMWare.\n\n362\n00:18:35.000 --> 00:18:39.960\nIt's an add on, it's an additional feature\nthat we add on and what V-Realize does is,\n\n363\n00:18:39.960 --> 00:18:41.530\nit does all this monitoring for us.\n\n364\n00:18:41.530 --> 00:18:43.610\nAll the different tools that\nI showed you in part one and\n\n365\n00:18:43.610 --> 00:18:45.664\nall the different stuff we saw here,\nincluding these maps.\n\n366\n00:18:45.664 --> 00:18:49.040\nV-Realize monitors your system and\n\n367\n00:18:49.040 --> 00:18:52.430\nit can report back to you\neverything you need to know.\n\n368\n00:18:52.430 --> 00:18:53.710\nIt's a one stop shop.\n\n369\n00:18:53.710 --> 00:18:56.002\nOne place that you go to\nget all of your data.\n\n370\n00:18:56.002 --> 00:18:59.735\nNow, I do not have V-Realize loaded\non my system here, but if you do,\n\n371\n00:18:59.735 --> 00:19:02.315\nyou see it already.\n\n372\n00:19:02.315 --> 00:19:03.735\nIf you go back to your homepage.\n\n373\n00:19:03.735 --> 00:19:06.445\nSay, you've got\nthe V-Realize Orchestrator.\n\n374\n00:19:06.445 --> 00:19:10.055\nAnd way down here,\nwe've got the vRealize Orchestrator also.\n\n375\n00:19:10.055 --> 00:19:14.340\nIf we were to connect up to a V-Realize\nenvironment, the way that it works is.\n\n376\n00:19:14.340 --> 00:19:20.160\nIt hooks into all of your different\nVCenter and VSphere suite deployments.\n\n377\n00:19:20.160 --> 00:19:22.940\nAnd then,\nnot only is it able to monitor, but\n\n378\n00:19:22.940 --> 00:19:24.950\nits able to take actions\nto correct things.\n\n379\n00:19:24.950 --> 00:19:27.670\nIt's able to move VM's around\nto ensure their functioning.\n\n380\n00:19:27.670 --> 00:19:31.410\nIt's able to bring hosts into a cluster or\ntake hosts out of a cluster.\n\n381\n00:19:31.410 --> 00:19:33.640\nIt's able to do a lot of stuff.\n\n382\n00:19:33.640 --> 00:19:36.160\nIt can handle all of your deployments,\nso when you deploy a VM.\n\n383\n00:19:36.160 --> 00:19:37.810\nIt makes sure they go to\na place where they actually\n\n384\n00:19:37.810 --> 00:19:39.625\nhave the recourses available.\n\n385\n00:19:39.625 --> 00:19:43.780\nV-Realize Orchestrator works to\nautomate all the monitoring and\n\n386\n00:19:43.780 --> 00:19:48.410\nmaintenance and things that we\nhave to perform on a normal basis.\n\n387\n00:19:48.410 --> 00:19:51.690\nThat's a great way as your network\ngrows and grows and grows.\n\n388\n00:19:51.690 --> 00:19:53.360\nIt's nice to know that\nwe've got these tools.\n\n389\n00:19:53.360 --> 00:19:54.900\nThat we can come in and monitor things.\n\n390\n00:19:54.900 --> 00:19:56.730\nThat this resource is available to us.\n\n391\n00:19:56.730 --> 00:20:00.030\nThat's great, but\nif you've got 1000 hosts,\n\n392\n00:20:00.030 --> 00:20:05.180\nyou don't have that kind of time on your\nhands and your hosts become disposable.\n\n393\n00:20:05.180 --> 00:20:10.710\nIf I have a problem on host number 211,\nI'm jut going to move the VM's off it and\n\n394\n00:20:10.710 --> 00:20:12.795\ndelete host number 211,\nformat and reinstall.\n\n395\n00:20:12.795 --> 00:20:15.060\nRight, why even bother troubleshooting.\n\n396\n00:20:15.060 --> 00:20:18.500\nThere's so many other hosts I can just\nmove the VM's off and that's it, right.\n\n397\n00:20:18.500 --> 00:20:20.730\nSo why not let V-Realize do that for\nyou us?\n\n398\n00:20:20.730 --> 00:20:23.410\nIt can already move the VM's off\nif there's a problem and then,\n\n399\n00:20:23.410 --> 00:20:26.770\nwe can correct the host or\nwipe it and rebuild.\n\n400\n00:20:26.770 --> 00:20:28.550\nThat's the kind of functionality\nthat we have with that.\n\n401\n00:20:28.550 --> 00:20:31.150\nSo, definitely a great product.\n\n402\n00:20:31.150 --> 00:20:34.300\nA little on the pricey side for\na smaller or medium shop.\n\n403\n00:20:34.300 --> 00:20:37.750\nSo much so that it is worthwhile to\njust use the command line utilities.\n\n404\n00:20:37.750 --> 00:20:41.659\nBut it is certainly an option out there\nespecially for a larger organization.\n\n405\n00:20:43.250 --> 00:20:45.400\nAll right, ronnie,\nI think this is a pretty good run down.\n\n406\n00:20:45.400 --> 00:20:48.270\nThere are tons more\ntrouble shooting tools and\n\n407\n00:20:48.270 --> 00:20:50.200\nI think I've covered all the ones\nthat you'll see on the exam.\n\n408\n00:20:50.200 --> 00:20:52.630\nAnd the ones that you're going\nto commonly use in real life.\n\n409\n00:20:52.630 --> 00:20:55.550\nThe other troubleshooting tools\nthat are out there are a lot more\n\n410\n00:20:55.550 --> 00:20:58.390\nspecific purpose-built for\nparticular instances.\n\n411\n00:20:58.390 --> 00:21:01.910\nOne thing I do encourage you to do is,\nto mess around with ESXCLI.\n\n412\n00:21:01.910 --> 00:21:05.250\nconnect into a host, and\njust run ESXCLI help, and\n\n413\n00:21:05.250 --> 00:21:07.560\nit'll show you a bunch\nof extra data on there.\n\n414\n00:21:07.560 --> 00:21:11.720\nIt has a ton of features, we looked at the\nstorage and networking pieces of it, but\n\n415\n00:21:11.720 --> 00:21:12.890\nit's got other ones.\n\n416\n00:21:12.890 --> 00:21:15.910\nDefinitely something to check out, because\nyou don't use it a lot in real life, and\n\n417\n00:21:15.910 --> 00:21:17.230\nit is on the exam.\n\n418\n00:21:17.230 --> 00:21:20.140\nBut that gives you a pretty good run\ndown right there, whats available.\n\n419\n00:21:20.140 --> 00:21:23.238\nAnd how we can keep our systems healthy,\nhappy and wise.\n\n420\n00:21:23.238 --> 00:21:27.440\n>> Well done Don thank you again for\nintroducing us to a bunch of these tools.\n\n421\n00:21:27.440 --> 00:21:30.660\nAnd even though, we may be familiar\nwith generic networking tools and\n\n422\n00:21:30.660 --> 00:21:32.480\nsome of the stores tools\nthat we've looked at.\n\n423\n00:21:32.480 --> 00:21:35.470\nAs well as high availability tools\nwith each particular vendor,\n\n424\n00:21:35.470 --> 00:21:39.580\nWe notice that inside of VMware,\nwe have a lot of these also built in\n\n425\n00:21:39.580 --> 00:21:42.720\nto help us to actually be\nable to do those same things.\n\n426\n00:21:42.720 --> 00:21:45.950\nSo, we did cover the idea of actually\nunderstanding logs are actually\n\n427\n00:21:45.950 --> 00:21:46.900\navailable to us.\n\n428\n00:21:46.900 --> 00:21:48.855\nAnd Don said, hey,\nthat's one of the most important things.\n\n429\n00:21:48.855 --> 00:21:50.675\n>> [LAUGH]\n>> I'll guarantee, as a troubleshooter,\n\n430\n00:21:50.675 --> 00:21:54.115\nit is one of the most important\nthings you can ever take a look at.\n\n431\n00:21:54.115 --> 00:21:56.505\nBut if you're actually just beginning,\nyou overlook them.\n\n432\n00:21:56.505 --> 00:21:58.525\nbecause you're like,\nI don't want to look at all that stuff.\n\n433\n00:21:58.525 --> 00:22:01.245\nBut overall though,\nit's a great tool for you to have and\n\n434\n00:22:01.245 --> 00:22:02.915\nto take advantage of as well.\n\n435\n00:22:02.915 --> 00:22:05.375\nWe'll also, of course,\ntalk about high availability and DRS,\n\n436\n00:22:05.375 --> 00:22:09.255\nthat distributed resource service,\nthat you can also take a look at there.\n\n437\n00:22:09.255 --> 00:22:12.910\nAnd finally,\nwe mentioned a little bit about V-realize.\n\n438\n00:22:12.910 --> 00:22:16.210\nIt can help us to do just about\neverything else a bit pricey for\n\n439\n00:22:16.210 --> 00:22:18.250\nsmall to medium business sizes.\n\n440\n00:22:18.250 --> 00:22:21.110\nBut although, if you actually\nare having like what we said,\n\n441\n00:22:21.110 --> 00:22:24.330\nlarge numbers of nodes that\nyou have to worry about.\n\n442\n00:22:24.330 --> 00:22:27.360\nWell, that's way that you also take\ncare of that environment to in terms of\n\n443\n00:22:27.360 --> 00:22:28.400\ntroubleshooting.\n\n444\n00:22:28.400 --> 00:22:30.265\nWell, that's a great run down again Don.\n\n445\n00:22:30.265 --> 00:22:31.110\n>> Mm-hm\n>> And\n\n446\n00:22:31.110 --> 00:22:33.630\nthat actually leads us to\nthe end of this episode\n\n447\n00:22:33.630 --> 00:22:34.571\n>> Signing off for\n\n448\n00:22:34.571 --> 00:22:36.964\nITProTV, I'm your host Ronnie Wong.\n\n449\n00:22:36.964 --> 00:22:37.978\n>> And I'm Don Pezet.\n\n450\n00:22:37.978 --> 00:22:40.206\n>> And we'll see you next time.\n\n451\n00:22:40.206 --> 00:22:49.350\n[MUSIC]\n\n",
          "vimeoId": "173621005"
        }
      ],
      "title": "Troubleshooting vSphere 6"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don discuss the concept of clustering and high availability. They talk about the options such as high availability, fault tolerance and vMotion. They demonstrate how to create a cluster and migrating guested into the cluster.",
          "length": "1892",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-1-clustering_and_ha-060716-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-1-clustering_and_ha-060716-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-1-clustering_and_ha-060716-1-sm.jpg",
          "title": "Clustering and HA",
          "transcript": "WEBVTT\n\n1\n00:00:00.058 --> 00:00:10.058\n[MUSIC]\n\n2\n00:00:11.646 --> 00:00:14.363\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.363 --> 00:00:15.613\nI am your host West Bryan, and\n\n4\n00:00:15.613 --> 00:00:19.472\ntoday's episode we're continuing through\nour series inside of VMware, that's right.\n\n5\n00:00:19.472 --> 00:00:23.920\nWe're coming back at you with more of that\nVMware Certified Professional Version 6.\n\n6\n00:00:23.920 --> 00:00:26.520\nJoining me in the studios today\nis none other than Mr. Don Pezet.\n\n7\n00:00:26.520 --> 00:00:27.680\nDon, how you doing, sir?\n\n8\n00:00:27.680 --> 00:00:28.550\n>> I'm doing great, Wes.\n\n9\n00:00:28.550 --> 00:00:32.220\nReady to dive right back into vSphere and\ncover a extremely important topic out\n\n10\n00:00:32.220 --> 00:00:36.180\nthere in real life land which is\nclustering and high availability.\n\n11\n00:00:36.180 --> 00:00:38.250\nUp until this point we've\nworked with ESX quite a bit.\n\n12\n00:00:38.250 --> 00:00:40.690\nAnd worked with vCenter and\nvSphere in general.\n\n13\n00:00:40.690 --> 00:00:42.385\nAnd it's always been this\nkind of stand alone systems.\n\n14\n00:00:42.385 --> 00:00:45.724\nSure, I've been centrally\nmanaging them through vCenter but\n\n15\n00:00:45.724 --> 00:00:48.500\neach host was really it's\nown independent entity.\n\n16\n00:00:48.500 --> 00:00:51.170\nWell, that's pretty uncommon\nout in real life land.\n\n17\n00:00:51.170 --> 00:00:53.790\nMaybe in a small business you\nmight do that but in a medium or\n\n18\n00:00:53.790 --> 00:00:56.130\na large business definitely\nneed an enterprise.\n\n19\n00:00:56.130 --> 00:00:59.670\nYou're going to want your\nhosts to all work together.\n\n20\n00:00:59.670 --> 00:01:02.930\nAnd that way, if you have virtual\nmachines running on one host, and\n\n21\n00:01:02.930 --> 00:01:06.510\nsomething starts going wrong, you can\njust move the VMs over to another host.\n\n22\n00:01:06.510 --> 00:01:08.870\nEven better,\nthat can happen automatically, right?\n\n23\n00:01:08.870 --> 00:01:10.545\nThat's where we really want to be.\n\n24\n00:01:10.545 --> 00:01:13.720\nAnd in order to do that,\nwe've gotta have a cluster.\n\n25\n00:01:13.720 --> 00:01:16.930\nYou have to be able to cluster\ntogether those servers, so\n\n26\n00:01:16.930 --> 00:01:19.270\nthe hosts all know that\nthey are working together.\n\n27\n00:01:19.270 --> 00:01:23.260\nThat they're not independent anymore,\nthat they're part of a team.\n\n28\n00:01:23.260 --> 00:01:24.560\nThat used to be a really daunting thing.\n\n29\n00:01:24.560 --> 00:01:26.290\nI remember when I set\nup my first clusters,\n\n30\n00:01:26.290 --> 00:01:29.920\nwhich would have been in the early 90s,\nit was really hard to do.\n\n31\n00:01:29.920 --> 00:01:33.020\nIt was just a big challenge to\nget those kind of things set up.\n\n32\n00:01:33.020 --> 00:01:35.428\nBut VMware actually's made it really easy.\n\n33\n00:01:35.428 --> 00:01:37.304\nWhen you have the vSphere Suite and\n\n34\n00:01:37.304 --> 00:01:40.990\nyou've got multiple hosts\nthat are joined to vCenter.\n\n35\n00:01:40.990 --> 00:01:43.690\nWe're just a couple of clicks away\nfrom having things clustered.\n\n36\n00:01:43.690 --> 00:01:45.280\nSo it's pretty straightforward.\n\n37\n00:01:45.280 --> 00:01:49.430\nWhere things get confusing\nis that vSphere has a lot of\n\n38\n00:01:49.430 --> 00:01:52.810\ndifferent availability solutions and\nit's easy to mix them up.\n\n39\n00:01:52.810 --> 00:01:57.579\nSo what I'm talking about is technically\ncalled HA or high availability.\n\n40\n00:01:58.660 --> 00:02:02.860\nThe goal of high availability is to\nmake it where when a failure happens,\n\n41\n00:02:02.860 --> 00:02:04.260\nnobody notices.\n\n42\n00:02:04.260 --> 00:02:06.790\nRight?\nSo a failure can happen on my network, and\n\n43\n00:02:06.790 --> 00:02:10.780\nmy network keeps running just\nlike normal nobody even notices.\n\n44\n00:02:10.780 --> 00:02:14.380\nHigh availability is really,\nreally hard to achieve.\n\n45\n00:02:14.380 --> 00:02:16.400\nBecause think of all the things\nthat could go wrong.\n\n46\n00:02:16.400 --> 00:02:19.180\nHow many single points of failure\ndo you have on your network?\n\n47\n00:02:19.180 --> 00:02:20.160\nRight?\n\n48\n00:02:20.160 --> 00:02:21.440\nOkay, I have a server.\n\n49\n00:02:21.440 --> 00:02:23.960\nI know the power supply can go bad, so\nI put a second power supply in there.\n\n50\n00:02:23.960 --> 00:02:24.490\nGreat!\n\n51\n00:02:24.490 --> 00:02:25.270\nI'm covered.\n\n52\n00:02:25.270 --> 00:02:27.220\nI know the hard drive can go bad,\nso I put in more hard drives.\n\n53\n00:02:27.220 --> 00:02:29.380\nNow I've got a array to array,\nI'm covered.\n\n54\n00:02:29.380 --> 00:02:31.640\nI've got a CPU that could go bad.\n\n55\n00:02:31.640 --> 00:02:33.000\nOoh, that's a little harder, right?\n\n56\n00:02:33.000 --> 00:02:34.880\nHow do you recover from a failed CPU?\n\n57\n00:02:34.880 --> 00:02:35.810\nYou don't, right?\n\n58\n00:02:35.810 --> 00:02:37.090\nSo now I'm in trouble.\n\n59\n00:02:37.090 --> 00:02:38.440\nOkay, so I add a second server.\n\n60\n00:02:38.440 --> 00:02:39.750\nNow I have two servers.\n\n61\n00:02:39.750 --> 00:02:43.330\nIf the CPU goes bad in one I've got\nthe other server, if CPUs is still good,\n\n62\n00:02:43.330 --> 00:02:43.930\nit's still running.\n\n63\n00:02:43.930 --> 00:02:45.620\nSo now I've got two servers, great.\n\n64\n00:02:45.620 --> 00:02:47.720\nOkay, they're plugged into a switch.\n\n65\n00:02:47.720 --> 00:02:48.940\nWhat happens if the switch goes bad?\n\n66\n00:02:48.940 --> 00:02:51.850\nWell I just lost both of my service even\nthough they are actually up and fine,\n\n67\n00:02:51.850 --> 00:02:52.850\nthe switch is gone.\n\n68\n00:02:52.850 --> 00:02:55.300\nSo I get multiple switches, wonderful.\n\n69\n00:02:55.300 --> 00:02:57.840\nNow I need multiple routers,\nnow I need multiple internet connections.\n\n70\n00:02:57.840 --> 00:03:00.210\nNow, what if the building burns down.\n\n71\n00:03:00.210 --> 00:03:01.680\nI need multiple buildings.\n\n72\n00:03:01.680 --> 00:03:05.430\nThere is so many single points of\nfailure in a network deployment.\n\n73\n00:03:05.430 --> 00:03:09.950\nThat it becomes really super-challenging\nto create true high availability.\n\n74\n00:03:09.950 --> 00:03:11.310\nSo when we're talking\nabout high availability,\n\n75\n00:03:11.310 --> 00:03:12.910\npeople are normally\nmeasuring it in down-time.\n\n76\n00:03:12.910 --> 00:03:15.550\nLike keeping your down-time to a minimum.\n\n77\n00:03:15.550 --> 00:03:20.302\nWith VMware HA Solutions, we can keep\nthat down-time to seconds in a year,\n\n78\n00:03:20.302 --> 00:03:22.322\nreally really small down time.\n\n79\n00:03:22.322 --> 00:03:24.330\nBut there's a lot more\nthat comes into play.\n\n80\n00:03:24.330 --> 00:03:28.052\nThe HA is usually trying to\navoid down-time all together.\n\n81\n00:03:28.052 --> 00:03:32.500\nThere is another technology built into\nvSphere called fault tolerance, FT.\n\n82\n00:03:32.500 --> 00:03:33.651\nAnd with fault tolerance,\n\n83\n00:03:33.651 --> 00:03:36.740\nwhat you're doing there is you're\nnot only eliminating downtime.\n\n84\n00:03:36.740 --> 00:03:40.215\nThe downtime happens once a server\nfails and people get kicked out.\n\n85\n00:03:40.215 --> 00:03:42.690\nRight?\nPeople see the failure, but\n\n86\n00:03:42.690 --> 00:03:46.720\nthere's a backup, a backup that\nfires up as soon as possible and\n\n87\n00:03:46.720 --> 00:03:48.330\nnow you're back online again.\n\n88\n00:03:48.330 --> 00:03:51.970\nYou may have 30 seconds, a minute,\nmaybe even five minutes of down time.\n\n89\n00:03:51.970 --> 00:03:54.772\nBut fault on takes care of it and\nwill recover, right?\n\n90\n00:03:54.772 --> 00:03:58.166\nThe way high availability works is\nyou have two sets of hardware and\n\n91\n00:03:58.166 --> 00:04:00.960\nvirtual machines that can\nrun on any of that hardware.\n\n92\n00:04:00.960 --> 00:04:03.810\nAnd there's a system in place that\nallows you to move the virtual\n\n93\n00:04:03.810 --> 00:04:07.572\nmachine from one set of hardware to\nanother using what's called VMotion.\n\n94\n00:04:07.572 --> 00:04:12.110\nSo VMotion is where if I have two\nservers that are both connected to\n\n95\n00:04:12.110 --> 00:04:16.150\nthe same shared storage,\nthen they can see the same VM decays.\n\n96\n00:04:16.150 --> 00:04:18.190\nThe same virtual disks.\n\n97\n00:04:18.190 --> 00:04:21.870\nSo the only thing they can't\nsee is what's running in RAM.\n\n98\n00:04:21.870 --> 00:04:24.610\nIf a virtual machine is running on\nhost 01, it's got stuff in RAM.\n\n99\n00:04:25.830 --> 00:04:28.200\nThe host 02 can see the hard drive,\n\n100\n00:04:28.200 --> 00:04:30.800\nit can boot that machine up\nfrom scratch if it needed to.\n\n101\n00:04:30.800 --> 00:04:31.820\nBut it can't see what's in RAM.\n\n102\n00:04:31.820 --> 00:04:34.290\nSo we have to have a way to synchronize\nthat, and that's what VMotion does.\n\n103\n00:04:34.290 --> 00:04:36.890\nIt synchronizes the RAM from\none system to another, so\n\n104\n00:04:36.890 --> 00:04:40.940\nthat when we fail over it's immediate and\nno body notices, right?\n\n105\n00:04:40.940 --> 00:04:42.210\nThat's what HA can do.\n\n106\n00:04:42.210 --> 00:04:44.435\nSo VSphere HA can provide that.\n\n107\n00:04:44.435 --> 00:04:46.166\nWhat Fault Tolerance does,\n\n108\n00:04:46.166 --> 00:04:50.936\nis Fault Tolerance just clones the virtual\nmachine from one place to another.\n\n109\n00:04:50.936 --> 00:04:56.210\nAnd it maintains a synchronized copy and\nif one fails, it boots up the copy.\n\n110\n00:04:56.210 --> 00:04:58.390\nBut the copy is not running all the time.\n\n111\n00:04:58.390 --> 00:05:00.220\nAnd so when you have a failure,\n\n112\n00:05:00.220 --> 00:05:03.480\nyour downtime is however long it\ntakes that VM to boot up, right?\n\n113\n00:05:03.480 --> 00:05:06.230\nSo fault tolerance is different than HA.\n\n114\n00:05:06.230 --> 00:05:07.610\nYou can use them both together.\n\n115\n00:05:07.610 --> 00:05:10.080\nYou can have HA and fault tolerance.\n\n116\n00:05:10.080 --> 00:05:13.530\nMaybe I'm doing HA here\ninside this building, but\n\n117\n00:05:13.530 --> 00:05:16.850\nthen I do fault tolerance between this\nbuilding and my disaster recovery center.\n\n118\n00:05:16.850 --> 00:05:20.210\nSo if it's a hardware failure right\nhere in the building we can flip over,\n\n119\n00:05:20.210 --> 00:05:22.210\nit's automatic nobody notices.\n\n120\n00:05:22.210 --> 00:05:26.700\nBut if the building burns down,\nthen it might take 30 seconds or\n\n121\n00:05:26.700 --> 00:05:28.990\nfive minutes for\nthe disaster recovery site to kick in.\n\n122\n00:05:28.990 --> 00:05:32.980\nNow you're building just burned down,\ncan you afford five minutes of down time?\n\n123\n00:05:32.980 --> 00:05:34.900\nI think most companies\nwould say yes to that.\n\n124\n00:05:34.900 --> 00:05:39.300\nBut you might be mission critical, super,\nyou can't even afford minutes of downtime.\n\n125\n00:05:39.300 --> 00:05:40.830\nRight?\nLike the New York Stock Exchange,\n\n126\n00:05:40.830 --> 00:05:42.730\nthey can't afford minutes of downtime.\n\n127\n00:05:42.730 --> 00:05:45.300\nSo, what do places like that do?\n\n128\n00:05:45.300 --> 00:05:49.550\nWell, they take high availability and\nthey stretch it across their data center.\n\n129\n00:05:49.550 --> 00:05:51.270\nAnd that requires a lot of money.\n\n130\n00:05:51.270 --> 00:05:52.740\nIt requires a lot of infrastructure.\n\n131\n00:05:52.740 --> 00:05:53.730\nIt's very difficult to achieve.\n\n132\n00:05:53.730 --> 00:05:54.733\nBut it certainly can be done.\n\n133\n00:05:54.733 --> 00:05:56.624\nAnd the features are built in, all right.\n\n134\n00:05:56.624 --> 00:06:00.160\nSo those are some of the different\nthings we're gonna talk about.\n\n135\n00:06:00.160 --> 00:06:03.200\nIn the next episode,\nwe'll talk about another one called DRS,\n\n136\n00:06:03.200 --> 00:06:05.050\nDistributed Resource Scheduler.\n\n137\n00:06:05.050 --> 00:06:09.370\nAnd a lot of people confuse DRS\nwith HA because what DRS does\n\n138\n00:06:09.370 --> 00:06:12.240\nis it allows you to move virtual\nmachines from one server to anther.\n\n139\n00:06:12.240 --> 00:06:13.100\nThat's sound familiar right?\n\n140\n00:06:13.100 --> 00:06:14.440\nThat sounds like vMotion.\n\n141\n00:06:14.440 --> 00:06:17.080\nBut DRS isn't doing it for\navailability purposes.\n\n142\n00:06:17.080 --> 00:06:19.730\nDRS is doing it for performance purposes.\n\n143\n00:06:19.730 --> 00:06:23.120\nIf it sees one server is\nreally low on CPU resources,\n\n144\n00:06:23.120 --> 00:06:26.980\nit might move some VMs to another one\nthat has CPU resources available, right?\n\n145\n00:06:26.980 --> 00:06:29.600\nSo doing load balancing\nacross your hardware.\n\n146\n00:06:29.600 --> 00:06:31.120\nIt's not really looking for failure.\n\n147\n00:06:31.120 --> 00:06:33.380\nNow, if a failure happens it'll\nbalance around it, right?\n\n148\n00:06:33.380 --> 00:06:35.128\nBut that's not really it's primary goal.\n\n149\n00:06:35.128 --> 00:06:37.640\nSo you may use DRS with HA.\n\n150\n00:06:37.640 --> 00:06:39.720\nSo, see how there's all\nthese technologies and\n\n151\n00:06:39.720 --> 00:06:41.170\nyou can use them all at\nthe same time if you want.\n\n152\n00:06:41.170 --> 00:06:43.520\nThere's actually only one that\nyou can't use with the other,\n\n153\n00:06:43.520 --> 00:06:44.830\nwe'll talk about later.\n\n154\n00:06:44.830 --> 00:06:47.000\nBut they all work together rather nicely.\n\n155\n00:06:47.000 --> 00:06:49.378\nIt's a matter of figuring out what\nit is that you need to deploy.\n\n156\n00:06:49.378 --> 00:06:51.480\nSo, in this episode,\nI do wanna focus on HA.\n\n157\n00:06:51.480 --> 00:06:53.880\nI wanna focus on the high\navailability side.\n\n158\n00:06:53.880 --> 00:06:56.900\nAnd in order for HA to work,\nwe have to have a cluster.\n\n159\n00:06:56.900 --> 00:06:59.140\nNow, let's talk about why we\nhave to have a cluster, right?\n\n160\n00:06:59.140 --> 00:07:00.170\nLet me look at my environment here.\n\n161\n00:07:00.170 --> 00:07:04.450\nSo, I've got a host and if I go in here\nand pull up my ESX host 01, right,\n\n162\n00:07:04.450 --> 00:07:05.740\nhere's this host.\n\n163\n00:07:05.740 --> 00:07:07.620\nAnd on my host, I've got a guest.\n\n164\n00:07:07.620 --> 00:07:11.950\nAnd that guest has a VMDK,\nit's got a hard drive right?\n\n165\n00:07:11.950 --> 00:07:15.310\nAnd that hard drive is\nstored in the data store.\n\n166\n00:07:15.310 --> 00:07:17.610\nAnd so if I look at it here,\n\n167\n00:07:17.610 --> 00:07:21.290\nweb01 has a hard drive stored in\nESX host to one local data store.\n\n168\n00:07:21.290 --> 00:07:24.800\nSo it's a data store that's\nright there on ESXhost01.\n\n169\n00:07:24.800 --> 00:07:29.990\nIf ESXhost01 fails,\ncan I move web01 somewhere else?\n\n170\n00:07:29.990 --> 00:07:30.490\nNo.\n\n171\n00:07:30.490 --> 00:07:32.430\nThe storage was there on host01.\n\n172\n00:07:32.430 --> 00:07:35.930\nIf host01 fails,\nI lost the storage too I lost that vm.\n\n173\n00:07:35.930 --> 00:07:38.020\nSo I am not set up for\nhigh availability right now.\n\n174\n00:07:38.020 --> 00:07:40.870\nIf this one host fails, I'm in deepwater.\n\n175\n00:07:40.870 --> 00:07:41.690\nOkay.\n\n176\n00:07:41.690 --> 00:07:47.600\nWhat I need is I need the storage for\nWEB01 to be visible to other hosts.\n\n177\n00:07:47.600 --> 00:07:50.020\nThe problem is the local\nstorage I'm using,\n\n178\n00:07:50.020 --> 00:07:52.920\nit's a zeta hard drive plugged\nright into the motherboard.\n\n179\n00:07:52.920 --> 00:07:55.152\nHow can I make a zeta hard\ndrive visible to other hosts?\n\n180\n00:07:55.152 --> 00:07:56.140\nI really can't.\n\n181\n00:07:56.140 --> 00:07:57.976\nNot this way at least, right?\n\n182\n00:07:57.976 --> 00:08:00.846\nWhat I really need is\na storage are network, a SAN.\n\n183\n00:08:00.846 --> 00:08:05.870\nIf I have a storage area network, I can\nhave disks that both of my hosts can see.\n\n184\n00:08:05.870 --> 00:08:07.870\nOr I might have 16 hosts and\nthey can all see it.\n\n185\n00:08:07.870 --> 00:08:11.480\nThat's what a SAN does, allows multiple\nhosts to see the same hard drive.\n\n186\n00:08:11.480 --> 00:08:13.880\nBut, there's a little danger with that.\n\n187\n00:08:13.880 --> 00:08:16.420\nThe danger is, if I have two servers\n\n188\n00:08:16.420 --> 00:08:19.080\nreading from the same hard drive at\nthe same time, it's no big deal.\n\n189\n00:08:19.080 --> 00:08:20.270\nRight?\nOne slows the other one down but\n\n190\n00:08:20.270 --> 00:08:21.590\nit's not a big deal.\n\n191\n00:08:21.590 --> 00:08:25.730\nBut if I have two servers trying to write\nto the same hard drive at the same time,\n\n192\n00:08:25.730 --> 00:08:26.890\nwhat happens?\n\n193\n00:08:26.890 --> 00:08:28.720\nThe data gets corrupted it gets damaged.\n\n194\n00:08:28.720 --> 00:08:30.640\nI lose my data and\nthat's absolutely not what I want.\n\n195\n00:08:30.640 --> 00:08:33.120\nThat's the opposite of high availability,\nright?\n\n196\n00:08:33.120 --> 00:08:36.950\nSo what we want,\nis we need a system that can control that.\n\n197\n00:08:36.950 --> 00:08:41.150\nThat can say, yes, host 01 and\nhost 02 can see the same storage.\n\n198\n00:08:41.150 --> 00:08:44.260\nBut only host 01 is allowed to touch it.\n\n199\n00:08:44.260 --> 00:08:48.290\nAnd only if host 01 fails will\nwe allow host 02 to touch it.\n\n200\n00:08:48.290 --> 00:08:49.270\nThey've gotta behave themselves.\n\n201\n00:08:49.270 --> 00:08:53.120\nYou gotta teach them not to mess with\nthe storage unless it's their turn.\n\n202\n00:08:53.120 --> 00:08:55.170\nAnd that's what a cluster does.\n\n203\n00:08:55.170 --> 00:09:01.130\nA cluster's primary purpose is to make\nsure your hosts share resources nicely,\n\n204\n00:09:01.130 --> 00:09:01.960\nthat the play along.\n\n205\n00:09:01.960 --> 00:09:05.380\nIt's like a kindergarten teacher, you\nmight not be able to teach them algebra in\n\n206\n00:09:05.380 --> 00:09:07.340\nkindergarten, but\nyou can at least teach them to play nice.\n\n207\n00:09:07.340 --> 00:09:09.320\nAnd that's exactly what\nwe're doing right here.\n\n208\n00:09:09.320 --> 00:09:11.720\nWe're trying to get host 01 and\n\n209\n00:09:11.720 --> 00:09:14.990\nhost 02 to play nice with each other and\nby default they don't.\n\n210\n00:09:14.990 --> 00:09:19.430\nThey don't play nice with each other\nbecause they're not teamed together.\n\n211\n00:09:19.430 --> 00:09:20.870\nAnd so that's what I wanna do.\n\n212\n00:09:20.870 --> 00:09:25.520\nRight now if I take a look at this,\nI've got host 01 and if I take host 01 and\n\n213\n00:09:25.520 --> 00:09:26.730\nI go to create a new data store.\n\n214\n00:09:26.730 --> 00:09:30.300\nNow I've got a host 01\nconnected to a iSCSI SAN.\n\n215\n00:09:30.300 --> 00:09:31.640\nSo it is attached to a SAN.\n\n216\n00:09:31.640 --> 00:09:38.335\nIf I take host01 I go to manage and\nstorage and storage adapters.\n\n217\n00:09:38.335 --> 00:09:41.970\nI've got an iSCSI SAN to find in here,\nright here so my vmhba33.\n\n218\n00:09:41.970 --> 00:09:43.630\nAnd if I come down and\n\n219\n00:09:43.630 --> 00:09:48.590\nlook at the devices there's three one tera\nbytes hard drives attached to that sand.\n\n220\n00:09:48.590 --> 00:09:51.250\nOkay, so it can see all three of them and\n\n221\n00:09:51.250 --> 00:09:53.895\nthat means it can use them if it wants,\nright?.\n\n222\n00:09:53.895 --> 00:09:58.590\nWelliIf I jump over to host 02 and\ntake a look\n\n223\n00:09:58.590 --> 00:10:03.070\nat its storage and storage adapters,\nits connected to the SCSI san also.\n\n224\n00:10:03.070 --> 00:10:05.030\nThe exact same one and\n\n225\n00:10:05.030 --> 00:10:10.575\nit sees those exact same drives so they\nboth can see the same drives right now.\n\n226\n00:10:10.575 --> 00:10:13.815\nBut if I were to add these as data storage\nto the machines, it would be a recipe for\n\n227\n00:10:13.815 --> 00:10:16.025\ndisaster because they're gonna fight.\n\n228\n00:10:16.025 --> 00:10:18.925\nThey're gonna fight for access to that and\nthey're gonna corrupt my data.\n\n229\n00:10:18.925 --> 00:10:20.615\nSo I need to create a cluster first.\n\n230\n00:10:20.615 --> 00:10:24.457\nAnd the way we do that is,\nwell if I start from the home screen.\n\n231\n00:10:24.457 --> 00:10:26.007\nLet me go back to the home screen.\n\n232\n00:10:26.007 --> 00:10:27.917\nOn the home screen we're gonna\ngo to Host and Clusters.\n\n233\n00:10:27.917 --> 00:10:29.387\nNow I've been doing that all show long.\n\n234\n00:10:29.387 --> 00:10:32.767\nI've been going to this for\nhosts, I don't have any clusters.\n\n235\n00:10:32.767 --> 00:10:36.153\nBut if I go to Host and\nClusters I can come in here and\n\n236\n00:10:36.153 --> 00:10:38.533\nI can create a new cluster.\n\n237\n00:10:38.533 --> 00:10:40.673\nIf you just right click\non your Datacenter,\n\n238\n00:10:40.673 --> 00:10:42.693\nsorry I clicked on my\nV center server there.\n\n239\n00:10:42.693 --> 00:10:45.793\nIf you right click on your Datacenter,\nyou'll see where you can add a host if\n\n240\n00:10:45.793 --> 00:10:48.553\nyou've already got one or\ncreate a New Cluster.\n\n241\n00:10:48.553 --> 00:10:50.443\nI wanna create a New Cluster.\n\n242\n00:10:50.443 --> 00:10:54.053\nAnd so when we create a new cluster, it's\ngonna bring it up and I'll give it a name.\n\n243\n00:10:54.053 --> 00:10:57.670\nI'm gonna call this my ITProTv-Lab.\n\n244\n00:10:57.670 --> 00:11:02.070\nAnd then I can choose to turn\noptions on and off for this cluster.\n\n245\n00:11:02.070 --> 00:11:03.400\nDo I want the cluster to do HA?\n\n246\n00:11:03.400 --> 00:11:04.648\nRight, high availability?\n\n247\n00:11:04.648 --> 00:11:06.990\nDo I want it to the distribute\na resource schedule or\n\n248\n00:11:06.990 --> 00:11:08.520\ndo I want it to virtual SAN or EVC?\n\n249\n00:11:08.520 --> 00:11:11.400\nI can turn these on and off,\nnow I don't have to do it now.\n\n250\n00:11:11.400 --> 00:11:13.750\nI can turn these things on and\noff later, right?\n\n251\n00:11:13.750 --> 00:11:15.740\nBut if I want to,\nI can turn them on right here.\n\n252\n00:11:15.740 --> 00:11:17.250\nLet's just run through these real quick.\n\n253\n00:11:17.250 --> 00:11:20.070\nDRS, distributor resource scheduler,\nI missed that one earlier.\n\n254\n00:11:20.070 --> 00:11:21.210\nWe're gonna cover it in another show.\n\n255\n00:11:21.210 --> 00:11:24.659\nBut that's where I can\nbalance based on performance.\n\n256\n00:11:24.659 --> 00:11:27.950\nHA, that's where I can move the VMs\naround based on failure, right?\n\n257\n00:11:27.950 --> 00:11:30.890\nMoving them around to ensure that\nfailures aren't noticed by my end users.\n\n258\n00:11:30.890 --> 00:11:31.619\nThat's what I really want.\n\n259\n00:11:32.640 --> 00:11:38.040\nEVC, EVC is a enhanced v motion mode.\n\n260\n00:11:38.040 --> 00:11:41.750\nWith v motion when you move a VM from one\nhost to another it expects the CPUs to be\n\n261\n00:11:41.750 --> 00:11:42.640\nthe same, right?\n\n262\n00:11:42.640 --> 00:11:44.585\nIf I've got ten hosts,\n\n263\n00:11:44.585 --> 00:11:48.840\nVMware expects us to have the same\nclass of CPU in all ten hosts.\n\n264\n00:11:48.840 --> 00:11:50.160\nWhat if I don't?\n\n265\n00:11:50.160 --> 00:11:54.330\nWhat if I have Intel i7s of one\ngeneration on one server and\n\n266\n00:11:54.330 --> 00:11:56.520\na different generation of\ni7s on another server?\n\n267\n00:11:56.520 --> 00:11:59.526\nOr maybe a Zeons in one server and\nregular i7s in another?\n\n268\n00:11:59.526 --> 00:12:02.749\nWhen you fail a virtual machine over,\nif the CPUs are different,\n\n269\n00:12:02.749 --> 00:12:04.225\nit has to reboot the machine.\n\n270\n00:12:04.225 --> 00:12:08.555\nIf it has to reboot the guest,\nthat's downtime to user C.\n\n271\n00:12:08.555 --> 00:12:11.445\nIf we're trying to eliminate downtime,\nthe CPUs need to match.\n\n272\n00:12:11.445 --> 00:12:14.405\nWell Intel stepped in, and\nAMD did the same thing, and\n\n273\n00:12:14.405 --> 00:12:18.165\nsaid hey, what if we made our processors\na little more friendly to that?\n\n274\n00:12:18.165 --> 00:12:21.115\nAnd they made it where the clients can\nactually choose what features they see, so\n\n275\n00:12:21.115 --> 00:12:23.405\nthe CPUs don't have to match exactly.\n\n276\n00:12:23.405 --> 00:12:26.790\nAnd if we do that,\nnow you can take a V motion,\n\n277\n00:12:26.790 --> 00:12:30.880\nVM and you can fail it from one host to\nanother where the processors don't match.\n\n278\n00:12:30.880 --> 00:12:32.975\nAnd if there's extra features\nthey just don't use them.\n\n279\n00:12:32.975 --> 00:12:36.040\nSo that zeon it's features kind of\nget scaled back a bit for that guest.\n\n280\n00:12:36.040 --> 00:12:37.720\nThey don't get to take\nfull advantage of it, but\n\n281\n00:12:37.720 --> 00:12:40.080\nnow they can fail over between\nprocessors that look different.\n\n282\n00:12:40.080 --> 00:12:43.760\nThat's really useful for people who\nare growing their server pool over time.\n\n283\n00:12:43.760 --> 00:12:46.780\nBecause a processor you buy today may\nnot be available a year from now.\n\n284\n00:12:46.780 --> 00:12:50.890\nAnd you don't want to have to\nupgrade your whole cluster,\n\n285\n00:12:50.890 --> 00:12:53.290\nyou just wanna bring in these new\nmachines and new processors, and\n\n286\n00:12:53.290 --> 00:12:55.570\nyou just won't take advantage\nof their extra features.\n\n287\n00:12:55.570 --> 00:12:56.348\nRight?\nAnd that's fine,\n\n288\n00:12:56.348 --> 00:12:58.313\nnow you can grow your pool and\neverything is fine.\n\n289\n00:12:58.313 --> 00:13:00.967\nThat's what EVC is, and again we\ncan turn that on and off later on.\n\n290\n00:13:00.967 --> 00:13:04.290\nAnd then the Virtual SAN, we're gonna talk\nabout Virtual SANs in another episode.\n\n291\n00:13:04.290 --> 00:13:09.830\nI really really don't like Virtual SANs,\nbut if you don't have a real SAN.\n\n292\n00:13:09.830 --> 00:13:14.630\nWhat you can do is use the local\nstorage in your host as a fake SAN and\n\n293\n00:13:14.630 --> 00:13:18.770\nit will synchronize the storage\nbetween the hosts, okay?\n\n294\n00:13:18.770 --> 00:13:20.490\nThere's situations where\nthat works out okay.\n\n295\n00:13:20.490 --> 00:13:24.230\nIn lab environments it works great, in\nproduction I really don't like to use it.\n\n296\n00:13:24.230 --> 00:13:26.610\nBut that's what a Virtual SAN is,\nso we can turn that on too.\n\n297\n00:13:26.610 --> 00:13:28.610\nAll right,\nI'm gonna leave them all off for now.\n\n298\n00:13:28.610 --> 00:13:30.430\nWe'll come back and\ndo vSphere HA in a minute.\n\n299\n00:13:30.430 --> 00:13:33.420\nI'm gonna say okay to that and\nit's gonna create a cluster.\n\n300\n00:13:33.420 --> 00:13:37.290\nSo now, I've got a cluster called\nITProTV-Lab that's right there.\n\n301\n00:13:37.290 --> 00:13:40.920\nBut the cluster is completely useless\nright now because there's no hosts in it.\n\n302\n00:13:40.920 --> 00:13:43.530\nAnd so\nwhat I need to do is tell host one and\n\n303\n00:13:43.530 --> 00:13:47.190\nhost two that they're a part of that\ncluster, and there's two ways to do it.\n\n304\n00:13:47.190 --> 00:13:48.300\nI usually just drag and drop.\n\n305\n00:13:48.300 --> 00:13:50.180\nYou can take the host and\ndrag it and drop it.\n\n306\n00:13:50.180 --> 00:13:53.528\nIf you have two like I have It's\neasy just drag and drop them.\n\n307\n00:13:53.528 --> 00:13:56.660\nBut if you've got ten host,\nit gets kind of annoying dragging and\n\n308\n00:13:56.660 --> 00:13:57.570\ndropping each one.\n\n309\n00:13:57.570 --> 00:14:02.490\nSo you can right click on the cluster and\nmove host into the cluster.\n\n310\n00:14:02.490 --> 00:14:03.070\nRight?\nAnd\n\n311\n00:14:03.070 --> 00:14:06.370\nby doing it this way,\nyou can just check the servers off.\n\n312\n00:14:06.370 --> 00:14:08.920\nIt's a little faster than the old drag and\ndrop, right?\n\n313\n00:14:08.920 --> 00:14:10.180\nSo I'm just gonna check them off and\n\n314\n00:14:10.180 --> 00:14:13.320\nhit OK and now it's gonna move\nthose hosts into the cluster.\n\n315\n00:14:13.320 --> 00:14:16.171\nNow what is that really doing,\nnot a whole lot right [LAUGH],\n\n316\n00:14:16.171 --> 00:14:19.095\nI mean really it's no different\nthan a folder at this point.\n\n317\n00:14:19.095 --> 00:14:21.686\nI've got a cluster and\ninside it I have two hosts, but\n\n318\n00:14:21.686 --> 00:14:23.940\nthe two hosts don't have\nany shared storage.\n\n319\n00:14:23.940 --> 00:14:26.550\nThey don't have any of the other stuff\nthat I really need for a cluster to work.\n\n320\n00:14:26.550 --> 00:14:28.200\nThey just happen to be in the cluster.\n\n321\n00:14:28.200 --> 00:14:32.680\nSo really all I gain by doing that is\nthe ability to do a common configuration.\n\n322\n00:14:32.680 --> 00:14:35.720\nThere's configuration settings I\ncan do here in the cluster level\n\n323\n00:14:35.720 --> 00:14:37.800\nthat will now trickle\ndown to these guests.\n\n324\n00:14:37.800 --> 00:14:40.648\nSo when I choose the cluster and\nI go to Manage > Settings,\n\n325\n00:14:40.648 --> 00:14:43.278\nnow I start to see all these\ndifferent settings here.\n\n326\n00:14:43.278 --> 00:14:46.387\nSome of which I can apply in\nthe individual host others which I can\n\n327\n00:14:46.387 --> 00:14:49.219\napply right here,\nthey'll apply to both hosts, right?\n\n328\n00:14:49.219 --> 00:14:51.620\nAnd you'll see inside of the settings for\nthe cluster,\n\n329\n00:14:51.620 --> 00:14:53.057\nhere's where I can come back in.\n\n330\n00:14:53.057 --> 00:14:55.480\nI can turn on DRS, I can turn on HA.\n\n331\n00:14:55.480 --> 00:14:58.570\nI can turn on a virtual SAN if I want.\n\n332\n00:14:58.570 --> 00:15:01.070\nI've got all those different\noptions including EVC.\n\n333\n00:15:01.070 --> 00:15:04.800\nSo if I didn't turn them on before,\nnow I can turn them on right here.\n\n334\n00:15:04.800 --> 00:15:06.680\nSo easy to fix this stuff after the fact.\n\n335\n00:15:06.680 --> 00:15:08.020\nClusters actually are really\neasy to work with.\n\n336\n00:15:09.252 --> 00:15:14.710\nNow a cluster without shared storage\ndoes not really do a whole lot for me.\n\n337\n00:15:14.710 --> 00:15:19.540\nSo I need to add shared storage and, as I\nsaid earlier, if I added iSCSI storage.\n\n338\n00:15:19.540 --> 00:15:21.915\nIf I added it to the individual\nhost before hand and\n\n339\n00:15:21.915 --> 00:15:23.115\nI would have conflicts now.\n\n340\n00:15:23.115 --> 00:15:24.926\nThings would be bad, right?\n\n341\n00:15:24.926 --> 00:15:27.975\nBut at this point, now I can add them in,\nand they'll play nice.\n\n342\n00:15:27.975 --> 00:15:32.155\nAnd what's even better is I don't have\nto do it for each host individually.\n\n343\n00:15:32.155 --> 00:15:34.745\nI can add the storage\nat the cluster level.\n\n344\n00:15:34.745 --> 00:15:36.295\nAnd if I have ten hosts,\n\n345\n00:15:36.295 --> 00:15:38.245\nit'll automatically add\nthe storage to all ten of them.\n\n346\n00:15:38.245 --> 00:15:39.705\nSo it's easier to do it his way.\n\n347\n00:15:39.705 --> 00:15:41.855\nDefinitely easier to add it once\nyou're in the cluster than to try\n\n348\n00:15:41.855 --> 00:15:42.990\nto do it beforehand.\n\n349\n00:15:42.990 --> 00:15:46.030\nAll right, if I had added it\nbeforehand it does try to import it.\n\n350\n00:15:46.030 --> 00:15:47.850\nBut usually the damage\nis done at that point.\n\n351\n00:15:47.850 --> 00:15:50.424\nIf you have data stores tied to one host,\nthose will come in just fine.\n\n352\n00:15:50.424 --> 00:15:53.197\nBut if you had shared storage it's\nusually messed up by that point.\n\n353\n00:15:53.197 --> 00:15:55.387\nAll right, so\nI'm gonna add the storage here.\n\n354\n00:15:55.387 --> 00:15:57.601\nI'm just gonna right-click\non my cluster and\n\n355\n00:15:57.601 --> 00:16:00.792\nyou'll see some of the different\nthings we can do at host and so on.\n\n356\n00:16:00.792 --> 00:16:04.292\nI've got a Storage menu and\nI've got New Datastore.\n\n357\n00:16:04.292 --> 00:16:07.910\nThese are the same option I would've seen\nif I right-click on a host and done it.\n\n358\n00:16:07.910 --> 00:16:10.638\nThe difference here is going to allow\nme to add it to more than one host.\n\n359\n00:16:10.638 --> 00:16:15.510\nSo I'm gonna add a New Datastore, and\nI'll give it some kind of a name.\n\n360\n00:16:15.510 --> 00:16:17.534\nIt's asking me where I'm\ngoing to attach it and\n\n361\n00:16:17.534 --> 00:16:19.320\nit's got ITProTV-Lab chosen already.\n\n362\n00:16:19.320 --> 00:16:21.530\nI have no other clusters, so\nI don't have any other choices.\n\n363\n00:16:22.930 --> 00:16:26.334\nAnd then what type VMFS, NFS or VBOL.\n\n364\n00:16:26.334 --> 00:16:30.214\nWe're gonna do VMFS, we talked about\nthose back in the storage episode and\n\n365\n00:16:30.214 --> 00:16:31.703\nthen I need to give it a name.\n\n366\n00:16:31.703 --> 00:16:35.291\nNow normally, I name it based\non the server that it's in, but\n\n367\n00:16:35.291 --> 00:16:37.362\nin this one it's tied to a cluster.\n\n368\n00:16:37.362 --> 00:16:39.400\nSo it's gonna be clustered storage.\n\n369\n00:16:39.400 --> 00:16:43.490\nSo I'll call it my itprotv-lab\ncuz that's the cluster, and\n\n370\n00:16:43.490 --> 00:16:44.740\nthen I will just call it storage 01.\n\n371\n00:16:44.740 --> 00:16:48.040\nSo it is gonna be the first\nstorage data store in the cluster.\n\n372\n00:16:49.310 --> 00:16:54.130\nThen I need to pick the storage to use,\nhere's where things get a little tricky.\n\n373\n00:16:54.130 --> 00:16:57.650\nThe cluster is not actually\nattached to the SAN, so\n\n374\n00:16:57.650 --> 00:16:59.640\nthe cluster can't\nactually see the storage.\n\n375\n00:16:59.640 --> 00:17:01.640\nSo I have to pick one of my hosts and\n\n376\n00:17:01.640 --> 00:17:05.440\nsay, look at the storage from\nthe perspective of this host.\n\n377\n00:17:05.440 --> 00:17:06.428\nIf I have five hosts and\n\n378\n00:17:06.428 --> 00:17:09.610\nthey're all connected to a SAN,\nit shouldn't matter which one I pick.\n\n379\n00:17:09.610 --> 00:17:14.250\nAll five should see the same SAN\nstorage if I configure my SAN properly.\n\n380\n00:17:14.250 --> 00:17:16.540\nSo it really doesn't matter who I pick,\nbut I've got to pick somebody.\n\n381\n00:17:17.650 --> 00:17:21.910\nIf I added a host and\nI haven't configured their HBA yet,\n\n382\n00:17:21.910 --> 00:17:24.660\nthey might not see anything.\n\n383\n00:17:24.660 --> 00:17:31.320\nSo I could take one host, configure their\nHBA, and view it from their point of view.\n\n384\n00:17:31.320 --> 00:17:35.382\nAnd then the cluster will automatically\nconfigure the HBA and the other storage\n\n385\n00:17:35.382 --> 00:17:39.028\nall for me without having to deal with it,\nthat makes life a lot easier.\n\n386\n00:17:39.028 --> 00:17:41.850\nAt a minimum you want to pick\na host that's already configured.\n\n387\n00:17:41.850 --> 00:17:43.763\nMine are both already configured for\niSCSI,\n\n388\n00:17:43.763 --> 00:17:45.384\ntheir just not connected to devices.\n\n389\n00:17:45.384 --> 00:17:48.580\nSo when I choose it now\nI see those three disks.\n\n390\n00:17:48.580 --> 00:17:50.660\nAnd I can pick one of the discs, so\n\n391\n00:17:50.660 --> 00:17:53.730\nI´m gonna pick that first one,\nthey´re all the same.\n\n392\n00:17:53.730 --> 00:17:55.800\nI´ll pick the first one and\nmove forward, and\n\n393\n00:17:55.800 --> 00:17:57.880\nnow it´s gonna let me partition it out for\nVMFS.\n\n394\n00:17:57.880 --> 00:18:03.280\nAnd when I finish,\nit's going to attach it not to one host,\n\n395\n00:18:03.280 --> 00:18:06.090\nbut to all of the hosts in the cluster.\n\n396\n00:18:06.090 --> 00:18:09.110\nAnd if I add any new hosts to\nthe cluster in the future,\n\n397\n00:18:09.110 --> 00:18:10.820\nthey´ll get the storage added to them too.\n\n398\n00:18:10.820 --> 00:18:14.600\nThey will all get a direct\nconnection to the storage, but\n\n399\n00:18:14.600 --> 00:18:18.200\nthey're not gonna touch it\nunless it's their turn.\n\n400\n00:18:18.200 --> 00:18:21.220\nThe cluster's gonna say whether they have\nthe permission to touch that storage or\n\n401\n00:18:21.220 --> 00:18:24.490\nnot and that's gonna stop me\nfrom getting data corruption.\n\n402\n00:18:24.490 --> 00:18:27.893\nAnd I had two other disks in there, and so\nI could continue to add more if I wanted.\n\n403\n00:18:27.893 --> 00:18:31.720\nI could just create another data store and\njust do the same basic thing.\n\n404\n00:18:31.720 --> 00:18:35.380\nUnfortunately you can't do more than\none at a time for whatever reason.\n\n405\n00:18:35.380 --> 00:18:40.722\nSo I might create another itprotv-lab,\nand I'll call this storage02.\n\n406\n00:18:40.722 --> 00:18:46.160\nAnd I'll view it from the host and again,\nI could pick one of my other hosts.\n\n407\n00:18:46.160 --> 00:18:49.060\nI'll just stick with host01, and\nI'm gonna add this storage in.\n\n408\n00:18:49.060 --> 00:18:53.360\nSo just like before, it's gonna create\nit and get it attached to both hosts.\n\n409\n00:18:53.360 --> 00:18:56.864\nNow, I can watch my recent tasks\ndown here to see it churning along.\n\n410\n00:18:56.864 --> 00:18:59.488\nAnd there it goes creating that data store\nand as soon as it's done I'll see it.\n\n411\n00:18:59.488 --> 00:19:02.035\nMy other one's already done though,\nso we can kinda look at it.\n\n412\n00:19:02.035 --> 00:19:07.523\nIf I take host01 and I go to, oops,\n[LAUGH] if I can get my mouse\n\n413\n00:19:07.523 --> 00:19:12.814\nto freak out, and\nI go into my Storage Devices on host01.\n\n414\n00:19:12.814 --> 00:19:16.667\nHost01 shows,\nwell two Microsoft iSCSI disks,\n\n415\n00:19:16.667 --> 00:19:22.660\nwhich makes sense cuz I picked host01\nwhen I ran through the wizard.\n\n416\n00:19:22.660 --> 00:19:25.090\nBut if I go to host02 and\n\n417\n00:19:25.090 --> 00:19:29.800\nchoose storage devices,\nit shows the two ISCSI Disks also.\n\n418\n00:19:29.800 --> 00:19:32.400\nIt doesn't show all three cuz I\ndidn't connect the third one, and\n\n419\n00:19:32.400 --> 00:19:36.190\nI never touched host02,\nthe cluster did that for me.\n\n420\n00:19:36.190 --> 00:19:38.460\nI now have shared storage.\n\n421\n00:19:38.460 --> 00:19:43.681\nIf I create a VM and I put it's virtual\nhard drive in that shared data source,\n\n422\n00:19:43.681 --> 00:19:46.100\nboth of my hosts can see it.\n\n423\n00:19:46.100 --> 00:19:50.280\nAnd that's the key piece to allowing for\nfail over.\n\n424\n00:19:50.280 --> 00:19:53.908\nNow if host01 dies,\nhost 02 is connected to the same source.\n\n425\n00:19:53.908 --> 00:19:58.070\nHost02 can at a minimum boot up those VMs,\nboot them up and get them running.\n\n426\n00:19:58.070 --> 00:20:01.357\nIf I know about it though, if I know\nthat I'm gonna be doing maintenance,\n\n427\n00:20:01.357 --> 00:20:03.116\nI wanna install an update on host01.\n\n428\n00:20:03.116 --> 00:20:06.536\nI can move the virtual\nmachines off to host02.\n\n429\n00:20:06.536 --> 00:20:10.142\nI can do it while it's live, online,\npeople on the server, nobody notices.\n\n430\n00:20:10.142 --> 00:20:12.050\nA then I can take host01 offline,\ndo my work,\n\n431\n00:20:12.050 --> 00:20:14.363\nbecause host02 is already\nconnected to that storage.\n\n432\n00:20:14.363 --> 00:20:19.188\nI'm using iSCSI here, but it's the exact\nsame thing for Fiber Channel SAN.\n\n433\n00:20:19.188 --> 00:20:22.910\nIt shows up the same way,\nwe add it in and we're off and going.\n\n434\n00:20:24.000 --> 00:20:25.810\nNow, my only problem is I've got a guest.\n\n435\n00:20:25.810 --> 00:20:30.185\nI've got this WEB01 that's\nin the cluster but WEB01,\n\n436\n00:20:30.185 --> 00:20:33.779\nif I look at its related objects and\ndatastores.\n\n437\n00:20:33.779 --> 00:20:37.263\nI'll see that the only related object that\nit's got, is, esx-host01-local-datastore.\n\n438\n00:20:37.263 --> 00:20:43.036\nSo that virtual machine is still\nstored in host01's local datastore.\n\n439\n00:20:43.036 --> 00:20:46.385\nSo even though WEB01 is\nshowing as inside the cluster,\n\n440\n00:20:46.385 --> 00:20:48.990\nsee how it's nested in the cluster?\n\n441\n00:20:48.990 --> 00:20:50.420\nI'm not actually gonna\nbe able to fail it over.\n\n442\n00:20:50.420 --> 00:20:54.924\nHost02 can't boot that up, because\nhost02 doesn't have that local storage.\n\n443\n00:20:54.924 --> 00:20:57.150\nSo I need to migrate this guest.\n\n444\n00:20:57.150 --> 00:21:02.152\nI need to move the guest into the virtual\ncluster, it's a real cluster,\n\n445\n00:21:02.152 --> 00:21:03.270\nvirtual whatever.\n\n446\n00:21:03.270 --> 00:21:05.460\nI need to move it into\nthat cluster [LAUGH] and\n\n447\n00:21:05.460 --> 00:21:08.010\nmove the storage into\nthe right data store.\n\n448\n00:21:08.010 --> 00:21:10.460\nWell it's already moved into the cluster,\nso I don't have to do that.\n\n449\n00:21:10.460 --> 00:21:14.255\nBut I do need to move its storage and\nget that put into the cluster.\n\n450\n00:21:14.255 --> 00:21:18.618\nSo if you right-click on that virtual\nmachine and look at your different\n\n451\n00:21:18.618 --> 00:21:23.141\noptions, you'll see some different\nthings in here, including Move To.\n\n452\n00:21:23.141 --> 00:21:26.526\nHere's where I can move that\nguest somewhere else, and\n\n453\n00:21:26.526 --> 00:21:28.051\nthat's what I wanna do.\n\n454\n00:21:28.051 --> 00:21:32.456\nI wanna move it, and when you go to\nmove it, you pick your Datacenter.\n\n455\n00:21:32.456 --> 00:21:36.012\nSo I got my Datacenter here on the list,\nand I'll choose OK.\n\n456\n00:21:36.012 --> 00:21:39.620\nAnd shoot, I'm already in the Datacenter,\nI need to expand it out.\n\n457\n00:21:39.620 --> 00:21:44.069\nAnd I can go to Host & Clusters,\nand I can choose that cluster, and\n\n458\n00:21:44.069 --> 00:21:46.944\nI can even choose other\nhosts to move it to.\n\n459\n00:21:46.944 --> 00:21:48.970\nBut you'll see where\nI've got my storage also.\n\n460\n00:21:49.980 --> 00:21:52.570\nAnd so I need to pick and it's telling\nme over here where I need to pick,\n\n461\n00:21:52.570 --> 00:21:54.180\nI can pick a cluster or so on.\n\n462\n00:21:54.180 --> 00:21:56.340\nNow technically I am\nalready in the cluster.\n\n463\n00:21:56.340 --> 00:21:58.960\nIf I hit OK,\nit's gonna give me an error about that.\n\n464\n00:21:58.960 --> 00:22:03.683\nI'm already in the cluster,\nI need to move into that storage.\n\n465\n00:22:03.683 --> 00:22:07.406\nNow my problem that I'm gonna bump into\nhere is that I'm already in the cluster,\n\n466\n00:22:07.406 --> 00:22:10.212\nI can't move myself in a cluster\nthat I'm already a part of.\n\n467\n00:22:10.212 --> 00:22:12.260\nI just wanna move the storage.\n\n468\n00:22:12.260 --> 00:22:15.590\nThe VM itself is already there\nthe storage is what's missing.\n\n469\n00:22:15.590 --> 00:22:19.760\nSo when you wanna move just one piece,\nthe move two option doesn't work so well.\n\n470\n00:22:19.760 --> 00:22:22.160\nIf this virtual machine had been on\na different host that was moving into\n\n471\n00:22:22.160 --> 00:22:23.790\nthe cluster this would work just fine.\n\n472\n00:22:23.790 --> 00:22:25.890\nBut if I just wanna move the storage\nI need to go somewhere else and\n\n473\n00:22:25.890 --> 00:22:26.640\nlet me show you how to do that.\n\n474\n00:22:26.640 --> 00:22:29.760\nI'm gonna cancel this and\nI'm gonna right-click on the host and\n\n475\n00:22:29.760 --> 00:22:32.660\ninstead of doing sorry,\nright click on the guest.\n\n476\n00:22:32.660 --> 00:22:35.720\nAnd instead of choosing\nmove to like I did before,\n\n477\n00:22:35.720 --> 00:22:37.490\nthis time I'm gonna choose Migrate.\n\n478\n00:22:37.490 --> 00:22:39.120\nMigrate gives you some different options.\n\n479\n00:22:39.120 --> 00:22:40.760\nMigrate's a little more powerful.\n\n480\n00:22:40.760 --> 00:22:44.850\nWhen you go to Migrate,\nyou can migrate the compute resource,\n\n481\n00:22:44.850 --> 00:22:48.990\nwhich is what server you're running on,\nor the storage\n\n482\n00:22:48.990 --> 00:22:51.470\nwhich is what data store you're in, or\nyou can do both, you can migrate both.\n\n483\n00:22:51.470 --> 00:22:53.970\nThe storage and the compute resource.\n\n484\n00:22:53.970 --> 00:22:57.500\nSo in my case, the compute resource\nis already in the cluster.\n\n485\n00:22:57.500 --> 00:22:59.400\nI'm already clustered like I need to be.\n\n486\n00:22:59.400 --> 00:23:02.420\nThe storage is what's not\nin the cluster and so\n\n487\n00:23:02.420 --> 00:23:05.220\nI'm gonna choose to\nchange the storage only.\n\n488\n00:23:05.220 --> 00:23:07.058\nAnd when I move forward here,\n\n489\n00:23:07.058 --> 00:23:10.378\nnow I can pick the data store\nthat I wanna move it into.\n\n490\n00:23:10.378 --> 00:23:13.615\nAnd I'm gonna move it into\nitprotv-lab-storage01,\n\n491\n00:23:13.615 --> 00:23:17.840\nbecause that's shared storage that\nboth of my cluster notes can see.\n\n492\n00:23:17.840 --> 00:23:21.020\nIf I pick any of these local data stores,\nthat's not gonna help me.\n\n493\n00:23:21.020 --> 00:23:25.055\nAnd notice how the icons are all the same,\nthey're all these little gray disc icons.\n\n494\n00:23:25.055 --> 00:23:28.840\nAnd if I look over here, there's\nabsolutely nothing in this table that\n\n495\n00:23:28.840 --> 00:23:32.520\ntells me whether it's a local data\nstore or a shared data store.\n\n496\n00:23:32.520 --> 00:23:36.074\nThat's why I always give\nit a name I can recognize.\n\n497\n00:23:36.074 --> 00:23:37.890\nYour naming convention\nis really important.\n\n498\n00:23:37.890 --> 00:23:39.600\nVMware doesn't have\nan official naming convention,\n\n499\n00:23:39.600 --> 00:23:43.800\nyou've got to come up with one, but\nthat way you can tell which one is which.\n\n500\n00:23:43.800 --> 00:23:46.344\nSo I'm picking the shared data store.\n\n501\n00:23:46.344 --> 00:23:49.403\nAnd so now when I hit Next and\nfinish that up,\n\n502\n00:23:49.403 --> 00:23:54.723\nit's gonna clone the VMDK storage and\nmove that into the shared data store.\n\n503\n00:23:54.723 --> 00:23:59.307\nAnd then get rid of the old stuff,\nand when that happens now.\n\n504\n00:23:59.307 --> 00:24:01.155\nThe guest is truly independent.\n\n505\n00:24:01.155 --> 00:24:05.670\nNow the guest fully resides in shared\nstorage and can easily bounce back and\n\n506\n00:24:05.670 --> 00:24:10.847\nforth between host01 and host02 using\nVMotion or even just manually if I choose.\n\n507\n00:24:10.847 --> 00:24:13.382\nWhen it boots up you actually\nhave what's called affinity,\n\n508\n00:24:13.382 --> 00:24:15.630\nwe're gonna talk more\nabout affinity later.\n\n509\n00:24:15.630 --> 00:24:18.180\nSo when I created a VM,\nI created on host01.\n\n510\n00:24:18.180 --> 00:24:22.081\nSo it's gonna have a natural affinity for\nhost01 that's where it wants to boot, but\n\n511\n00:24:22.081 --> 00:24:24.443\nif host01 were to fail,\nI can boot it on host02.\n\n512\n00:24:24.443 --> 00:24:27.770\nThe storage is now moved\ninto the shared data store.\n\n513\n00:24:27.770 --> 00:24:30.280\nSo we'll see later when we\ncan kinda customize that and\n\n514\n00:24:30.280 --> 00:24:31.740\nmake it where we don't\neven have that affinity.\n\n515\n00:24:31.740 --> 00:24:33.330\nYou can boot wherever you want, but\n\n516\n00:24:33.330 --> 00:24:37.920\nright now if I just started it's gonna\nend up on host01 and then I can move it.\n\n517\n00:24:37.920 --> 00:24:42.870\nNow, there's still more work I need to do\nbefore this cluster works properly but\n\n518\n00:24:42.870 --> 00:24:45.650\ntechnically, we're now in a cluster.\n\n519\n00:24:45.650 --> 00:24:47.360\nWe're in a cluster,\nwe've got shared storage.\n\n520\n00:24:47.360 --> 00:24:49.975\nIf I create my VMs and\nI place them in that shared storage,\n\n521\n00:24:49.975 --> 00:24:51.458\nthey're gonna work just fine.\n\n522\n00:24:51.458 --> 00:24:53.997\nAnd I can start using things like vMotion,\nbut\n\n523\n00:24:53.997 --> 00:24:57.030\nthere is a little more\nthat has to be dealt with.\n\n524\n00:24:57.030 --> 00:25:00.580\nFor example, how does one cluster node,\n\n525\n00:25:00.580 --> 00:25:03.350\nhow's one host,\nknow that the other host is online or not?\n\n526\n00:25:04.790 --> 00:25:07.720\nOne host could fail,\nthe other one needs to know and so\n\n527\n00:25:07.720 --> 00:25:10.110\nthere's what's called heartbeating\nthat needs to be configured.\n\n528\n00:25:10.110 --> 00:25:11.990\nHeartbeats are how the servers\nsee each other, and\n\n529\n00:25:11.990 --> 00:25:14.185\nthere's actually two different\nways to do heartbeating.\n\n530\n00:25:14.185 --> 00:25:17.467\nSo we'll kind of talk about that a little\nbit, I know I'm probably too low on time\n\n531\n00:25:17.467 --> 00:25:20.120\nto talk about it, but\nwe need heart beating configured.\n\n532\n00:25:20.120 --> 00:25:22.670\nThere's also advanced\nfunctionality in the cluster.\n\n533\n00:25:22.670 --> 00:25:26.048\nSo I mentioned like EVC,\nthe Enhanced vMotion.\n\n534\n00:25:26.048 --> 00:25:29.140\nWith Enhanced vMotion, I can move\nbetween non compatible processors or\n\n535\n00:25:29.140 --> 00:25:33.140\nit's not that their not compatible, it's\nthat their just different feature sets.\n\n536\n00:25:33.140 --> 00:25:35.830\nAnd those are all advanced\nfunctions of the cluster itself.\n\n537\n00:25:35.830 --> 00:25:38.350\nLet's take a look at this real quick,\nIf I take the cluster and\n\n538\n00:25:38.350 --> 00:25:41.930\nI go into Settings, there's a lot\nof stuff in here I can configure.\n\n539\n00:25:41.930 --> 00:25:44.960\nSo EVC was the one that I mentioned?\n\n540\n00:25:44.960 --> 00:25:50.530\nAnd with EVC, you'll see that it's\ndisabled by default and I can edit this.\n\n541\n00:25:50.530 --> 00:25:53.370\nAnd in my case, my two hosts actually\ndo have identical processors,\n\n542\n00:25:53.370 --> 00:25:55.230\nso I don't actually need it.\n\n543\n00:25:55.230 --> 00:25:57.730\nBut in the future,\nif I'm gonna add a third host and\n\n544\n00:25:57.730 --> 00:25:59.280\nthe third host has a new processor.\n\n545\n00:25:59.280 --> 00:26:02.220\nIt's different, then I would need\nto come in here and turn it on.\n\n546\n00:26:02.220 --> 00:26:06.610\nAnd notice there's two different modes,\none for AMD hosts and one for Intel hosts.\n\n547\n00:26:06.610 --> 00:26:11.690\nIn your cluster,\nyou shouldn't mix Intel and AMD.\n\n548\n00:26:11.690 --> 00:26:15.190\nYou can, but vMotion will never\nwork between Intel and AMD,\n\n549\n00:26:15.190 --> 00:26:17.080\nthey're too different.\n\n550\n00:26:17.080 --> 00:26:23.576\nI can have all AMD or all Intel, and\nif they all match great, I don't need EVC.\n\n551\n00:26:23.576 --> 00:26:26.990\nBut if there's a variation in between\nthem, that's where EVC comes in.\n\n552\n00:26:26.990 --> 00:26:30.722\nSo it will correct between AMD processors\nor it will correct between Intel, but\n\n553\n00:26:30.722 --> 00:26:33.600\nit won't correct between both so\nyou've gotta pick.\n\n554\n00:26:33.600 --> 00:26:36.620\nIn my case I've got Intel, so\nI can go ahead and choose that.\n\n555\n00:26:36.620 --> 00:26:40.760\nAnd then I pick my EVC Mode,\nand what you're doing\n\n556\n00:26:40.760 --> 00:26:44.910\nis you're picking a feature set that\nis supported by all of your processors.\n\n557\n00:26:44.910 --> 00:26:46.890\nSo basically, you need to look\nat all your processors and\n\n558\n00:26:46.890 --> 00:26:50.600\nfigure out which one's the oldest,\nwhich one's the oldest CPU.\n\n559\n00:26:50.600 --> 00:26:53.720\nAnd then you pick\nthe generation of that CPU and\n\n560\n00:26:53.720 --> 00:26:55.850\nthat's what your virtual\nmachines will use.\n\n561\n00:26:55.850 --> 00:27:00.910\nAnd so you might have Penryn processors or\nNehalem or whatever.\n\n562\n00:27:00.910 --> 00:27:04.470\nAnd if you have those there's\nNew Orleans like Ivy Bridge\n\n563\n00:27:04.470 --> 00:27:08.120\nright it is sky like in here as well\nlike a sky like is not in here yet.\n\n564\n00:27:08.120 --> 00:27:09.840\nBut I am might has well processors and\n\n565\n00:27:09.840 --> 00:27:12.071\nthose have a lot of extra\nfeatures more course.\n\n566\n00:27:12.071 --> 00:27:15.120\nBut I won't be able to use them,\nbecause I picked Nehalem.\n\n567\n00:27:16.200 --> 00:27:19.870\nSo you pick the lowest common denominator,\nthe oldest processor, and\n\n568\n00:27:19.870 --> 00:27:21.000\nthat's the one you go with.\n\n569\n00:27:21.000 --> 00:27:24.350\nAs you phase those processors out, as your\nreplace those hosts then you can move up\n\n570\n00:27:24.350 --> 00:27:27.620\nto the next level or the next level,\nand you pick that generation.\n\n571\n00:27:27.620 --> 00:27:30.888\nAMD is done the same way, I don't think\nit will error, it might error out on me.\n\n572\n00:27:30.888 --> 00:27:34.142\nI'm getting a bunch of warnings down here,\ncuz I don't have AMD processors.\n\n573\n00:27:34.142 --> 00:27:37.646\nBut you'll see where you can pick those\nOpterons and you can do the Generations\n\n574\n00:27:37.646 --> 00:27:41.010\nand so on, all the way down to\nthe newer piledriver and steamroller.\n\n575\n00:27:41.010 --> 00:27:44.801\nYou just pick the appropriate level,\nthat's the minimum level supported.\n\n576\n00:27:44.801 --> 00:27:49.529\nSo that's what EVC does,\nyou get it turned on and it's in place and\n\n577\n00:27:49.529 --> 00:27:51.479\nnow you're taken care of.\n\n578\n00:27:51.479 --> 00:27:54.482\nSo it's Enhanced vMotion\nCPU of what EVC is, and\n\n579\n00:27:54.482 --> 00:27:57.010\nit just gives you that compatibility.\n\n580\n00:27:57.010 --> 00:27:58.529\nSo that's something we can turn on,\n\n581\n00:27:58.529 --> 00:28:01.227\nI'm not gonna turn it onto mine\ncuz my processors are identical.\n\n582\n00:28:01.227 --> 00:28:04.280\nI don't have to worry about it,\nthat kind of covers us.\n\n583\n00:28:04.280 --> 00:28:08.356\nIf you don't know your processor, you can\nchoose a host and go to it's summary page.\n\n584\n00:28:08.356 --> 00:28:11.680\nIt actually tells you on the summary\npage as soon as it loads.\n\n585\n00:28:11.680 --> 00:28:15.900\nThere, so see how I've got\nan Intel Core i7-4558U in this one.\n\n586\n00:28:15.900 --> 00:28:22.335\nAnd if I go and take my other one,\nit's got the same Intel Core Or I74458U.\n\n587\n00:28:22.335 --> 00:28:25.930\nThey've got the same processor, so\nI don't have to worry about EVC.\n\n588\n00:28:25.930 --> 00:28:28.316\nOther things that we\ncan customize in here,\n\n589\n00:28:28.316 --> 00:28:31.400\nyou'll have things like Disk Management.\n\n590\n00:28:31.400 --> 00:28:35.230\nThis is for the virtual SAN,\nnow the virtual SAN is a licensed feature.\n\n591\n00:28:35.230 --> 00:28:37.240\nYou have to have a license dedicated for\nthat and\n\n592\n00:28:37.240 --> 00:28:39.230\nwe're gonna talk about\nit in another episode.\n\n593\n00:28:39.230 --> 00:28:41.873\nBut if we wanna come in and configure\nthe virtual SAN and Disk Management,\n\n594\n00:28:41.873 --> 00:28:42.818\nyou do that all from here.\n\n595\n00:28:42.818 --> 00:28:44.935\nOtherwise we have our licensing, and\n\n596\n00:28:44.935 --> 00:28:49.030\nthe only license we have to worry\nabout is the Virtual SAN license.\n\n597\n00:28:49.030 --> 00:28:52.760\nOtherwise clustering is built into\nvSphere, you have cluster support even in\n\n598\n00:28:52.760 --> 00:28:57.870\nstandard foundations, the most basic\nversion of vSphere has clustering.\n\n599\n00:28:57.870 --> 00:29:02.890\nSo the only time you need licensing\nis if you're gonna use a VSAN.\n\n600\n00:29:02.890 --> 00:29:05.530\nWe've also got other host\noptions that we can tweak.\n\n601\n00:29:05.530 --> 00:29:09.540\nNotice here that I've got my host and\nthere's no power profiles to find.\n\n602\n00:29:09.540 --> 00:29:13.230\nIf I wanted to find power management,\nwe don't normally wanna do that.\n\n603\n00:29:13.230 --> 00:29:14.970\nYou don't want your\nmachines to go to sleep.\n\n604\n00:29:14.970 --> 00:29:18.210\nBut we're gonna talk about Power\nManagement in DRS with the distributive\n\n605\n00:29:18.210 --> 00:29:20.669\nresource scheduler,\nbecause I might have 100 hosts.\n\n606\n00:29:21.750 --> 00:29:26.030\nBut if the system is slow right now or\nidling we could shift our VMs\n\n607\n00:29:26.030 --> 00:29:29.930\nover to 60 hosts and power down 40\nof them and save a lot of power.\n\n608\n00:29:29.930 --> 00:29:32.310\nAnd it can do that if we\nturn on Power Management.\n\n609\n00:29:32.310 --> 00:29:36.530\nSo other things like that can get\nconfigured, we'll see that in DRS, but for\n\n610\n00:29:36.530 --> 00:29:39.070\nthe most part that's\nall we wanna configure.\n\n611\n00:29:39.070 --> 00:29:41.890\nWe're gonna see a little bit more\nof these in the DRS episode.\n\n612\n00:29:41.890 --> 00:29:47.670\nI do still need to configure HA, I\ncreated a cluster but I'm not running HA.\n\n613\n00:29:47.670 --> 00:29:52.883\nAnd what that means that if I have a node,\nif I have a guest, my web01.\n\n614\n00:29:52.883 --> 00:29:58.080\nIf it is running on host01 and host01\nfails, it just goes down, that's it.\n\n615\n00:29:59.675 --> 00:30:04.720\nHost02 could power up that VM, but\nit's not gonna do it by default.\n\n616\n00:30:04.720 --> 00:30:07.970\nI could turn on HA for that,\nand if I'm gonna turn on HA,\n\n617\n00:30:07.970 --> 00:30:09.680\nI gotta get heart beating turn on.\n\n618\n00:30:09.680 --> 00:30:10.960\nGetting those configurations put in,\n\n619\n00:30:10.960 --> 00:30:13.480\nand that's where I don't have enough\ntime in the episode to do it.\n\n620\n00:30:13.480 --> 00:30:16.773\nSo Wes, we're gonna need to do a part two\ncuz I need to actually show getting HA\n\n621\n00:30:16.773 --> 00:30:17.292\nturned on.\n\n622\n00:30:17.292 --> 00:30:20.000\nWe built our cluster, that's step one.\n\n623\n00:30:20.000 --> 00:30:22.613\nNow, we need to get HA turned on and\ndefine when we failover and\n\n624\n00:30:22.613 --> 00:30:25.747\nall that other information, which\nwe'll have to do in the next episode.\n\n625\n00:30:25.747 --> 00:30:29.479\n>> I was gonna say, with an episode\ncalled clustering and high availability,\n\n626\n00:30:29.479 --> 00:30:31.180\nchances are we should explain HA.\n\n627\n00:30:31.180 --> 00:30:32.350\n>> [LAUGH]\n>> As part of it.\n\n628\n00:30:32.350 --> 00:30:34.400\nBut Don,\nyou've already stated the obvious here.\n\n629\n00:30:34.400 --> 00:30:37.900\nIt does look like we're coming\nto the end of this episode.\n\n630\n00:30:37.900 --> 00:30:41.400\nDid you have any additional words that you\nmight wanna say, or maybe just settle for\n\n631\n00:30:41.400 --> 00:30:42.070\nhigh availability?\n\n632\n00:30:42.070 --> 00:30:45.170\n>> One thing I didn't mention is that\nif you're gonna cluster, you'll really\n\n633\n00:30:45.170 --> 00:30:48.700\nneed to go to VMware's website and\ncheck their hardware compatibility list.\n\n634\n00:30:48.700 --> 00:30:51.060\nAll of your hardware needs\nto be supported on the HCL.\n\n635\n00:30:51.060 --> 00:30:53.740\nIf it's not,\nthe cluster might not work reliably.\n\n636\n00:30:53.740 --> 00:30:57.782\nNothing I did here was really a big deal,\nbut when we start getting into HA it's\n\n637\n00:30:57.782 --> 00:31:01.966\nreally gonna matter and so it's got to\nbe on their hardware compatibility list.\n\n638\n00:31:01.966 --> 00:31:05.462\nIf it's not the functionality can be\nmessed up and what you think might be\n\n639\n00:31:05.462 --> 00:31:09.180\na highly available solution might\nactually turn out to be unstable.\n\n640\n00:31:09.180 --> 00:31:11.200\n>> We'll check those HCLs,\nthat's for sure.\n\n641\n00:31:11.200 --> 00:31:14.091\nWell Don as always, we appreciate\nyou being here in the studio, and\n\n642\n00:31:14.091 --> 00:31:15.827\nwe appreciate you the viewer watching.\n\n643\n00:31:15.827 --> 00:31:19.556\nCome back and see us for a part two, but\nuntil then signing out for ITPro.TV.\n\n644\n00:31:19.556 --> 00:31:20.740\nI've been your host, Wes Bryan.\n\n645\n00:31:20.740 --> 00:31:21.800\n>> And I'm Don Pezet.\n\n646\n00:31:21.800 --> 00:31:22.804\n>> We'll see you next time.\n\n647\n00:31:22.804 --> 00:31:31.820\n[MUSIC]\n\n",
          "vimeoId": "169849883"
        },
        {
          "description": "In this episode, Wes and Don continue their discussion on the concepts of clustering and high availability. They explain various advanced configurations such as admission control, failover and monitoring.",
          "length": "1927",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-2-clustering_and_ha_pt2-060816-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-2-clustering_and_ha_pt2-060816-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-2-clustering_and_ha_pt2-060816-1-sm.jpg",
          "title": "Clustering and HA Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.039 --> 00:00:14.610\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.610 --> 00:00:16.340\nI'm your host, Wes Bryan, and\n\n4\n00:00:16.340 --> 00:00:20.650\nin today's episode, we're continuing along\nin our series within VMware, that's right,\n\n5\n00:00:20.650 --> 00:00:24.290\nwe're coming back at you with more of that\nVMware Certified Professional Version 6.\n\n6\n00:00:24.290 --> 00:00:26.220\nAnd we've been looking at\nmanaging availability,\n\n7\n00:00:26.220 --> 00:00:30.770\nwe're coming back at you with a part two\nin clustering and high availability.\n\n8\n00:00:30.770 --> 00:00:33.360\nJoining me in the studio is Don Pezet,\nDon, how you doing sir?\n\n9\n00:00:33.360 --> 00:00:35.700\n>> I'm doing great,\njust ready to dive right back in and\n\n10\n00:00:35.700 --> 00:00:38.340\nfinish talking about\nclustering high availability.\n\n11\n00:00:38.340 --> 00:00:40.830\nAll right, if you watched our last\nepisode, then you know what we covered,\n\n12\n00:00:40.830 --> 00:00:44.810\nthere was setting up a cluster,\nand it really wasn't that\n\n13\n00:00:44.810 --> 00:00:48.520\nhard to get a couple machines grouped\ntogether and put into a cluster.\n\n14\n00:00:48.520 --> 00:00:50.870\nThe only thing is,\nwe stopped right there, right?\n\n15\n00:00:50.870 --> 00:00:53.430\nWe created the cluster and we stopped.\n\n16\n00:00:53.430 --> 00:00:55.813\nAnd the way a cluster works, by default,\n\n17\n00:00:55.813 --> 00:00:58.480\nis probably not the way\nthat you think it does.\n\n18\n00:00:58.480 --> 00:01:01.831\nIt's actually not very useful\nthe way that it is right now, so\n\n19\n00:01:01.831 --> 00:01:04.473\nthe cluster that we put in,\nin the last episode,\n\n20\n00:01:04.473 --> 00:01:08.213\nwhat it allows us to do is to have\nmultiple servers, multiple hosts,\n\n21\n00:01:08.213 --> 00:01:11.963\nthat can see the same storage and\nnot cause data corruption, right?\n\n22\n00:01:11.963 --> 00:01:14.570\nThat's what we achieved with that cluster.\n\n23\n00:01:14.570 --> 00:01:18.820\nBut, if one host were to fail right now,\nand our virtual machine's running on it,\n\n24\n00:01:20.000 --> 00:01:22.380\nthey wouldn't jump over to another host,\nthey would just go down.\n\n25\n00:01:22.380 --> 00:01:23.650\nThey would fail.\n\n26\n00:01:23.650 --> 00:01:26.510\nI actually don't have high\navailability right now.\n\n27\n00:01:26.510 --> 00:01:27.720\nI don't even have VMotion.\n\n28\n00:01:27.720 --> 00:01:30.030\nRight?\nVMotion, where I could take a VM and\n\n29\n00:01:31.120 --> 00:01:33.560\nmove it from one host to another\nwithout powering it down,\n\n30\n00:01:33.560 --> 00:01:36.470\nI don't have that right now,\nin a default cluster.\n\n31\n00:01:36.470 --> 00:01:40.080\nTruly, the basic default cluster\nthat we created is simply doing\n\n32\n00:01:40.080 --> 00:01:41.720\nstorage protection.\n\n33\n00:01:41.720 --> 00:01:43.320\nNow we need to get in and\n\n34\n00:01:43.320 --> 00:01:46.010\nactually enable the rest of the features\nto make it do all the fun and\n\n35\n00:01:46.010 --> 00:01:48.910\nawesome stuff that is what we think\nof when we think of a cluster, right?\n\n36\n00:01:48.910 --> 00:01:52.060\nWe think of all these powerful\nthings that a cluster can do, and\n\n37\n00:01:52.060 --> 00:01:55.310\nit'll do it, if we just go and\nhit a few more check marks, right?\n\n38\n00:01:55.310 --> 00:01:58.990\nNow, you might ask yourself,\nwhy not turn these bells and whistles on?\n\n39\n00:01:58.990 --> 00:02:01.710\nIf that's the amazing stuff about\na cluster, why isn't it on by default?\n\n40\n00:02:01.710 --> 00:02:03.340\nAnd the short answer is,\n\n41\n00:02:03.340 --> 00:02:07.000\nthere's actually a little bit of prep work\nthat needs to be done to get ready for it.\n\n42\n00:02:07.000 --> 00:02:13.210\nIn an ideal world, we need to have network\ninfrastructure and disk structure and\n\n43\n00:02:13.210 --> 00:02:16.890\nall these other different things pieced\ntogether to support the cluster.\n\n44\n00:02:16.890 --> 00:02:18.930\nAnd we created a shared data store.\n\n45\n00:02:18.930 --> 00:02:22.000\nRemember, we added the SCSI drives in,\nso I had that network attached,\n\n46\n00:02:22.000 --> 00:02:27.270\nSAN, to be able to bring that up and have\nshared storage between the cluster nodes.\n\n47\n00:02:27.270 --> 00:02:29.830\nBut, another thing that\nwe're going to need\n\n48\n00:02:29.830 --> 00:02:34.610\nis if we wanna do\nsomething like VMotion or\n\n49\n00:02:34.610 --> 00:02:39.640\nwhatever, is that we may need dedicated\nnetwork interfaces to support it.\n\n50\n00:02:39.640 --> 00:02:44.130\nWe have things like VMotion,\nheart beating, Virtual SAN,\n\n51\n00:02:44.130 --> 00:02:47.150\nall of those technologies,\nthey use VMkernal adapters.\n\n52\n00:02:47.150 --> 00:02:49.890\nAnd we have to have the adapter setup to\ndo it, and those adapters aren't set that\n\n53\n00:02:49.890 --> 00:02:54.820\nway by default, because VMware assumes\nthat you've got one network adapter you\n\n54\n00:02:54.820 --> 00:02:58.808\nuse for management, and that you'll have\nother network adapters that you use for\n\n55\n00:02:58.808 --> 00:03:01.048\nVMotion, heart beating, and\nall that other good stuff.\n\n56\n00:03:01.048 --> 00:03:01.590\nSo you gotta go and\n\n57\n00:03:01.590 --> 00:03:05.380\npick those and set them up, and that's\nwhy the advanced features aren't working.\n\n58\n00:03:05.380 --> 00:03:08.720\nSo, what we're gonna do in this episode is\nrun through those advanced features and\n\n59\n00:03:08.720 --> 00:03:11.230\nactually get HA running the way\nthat it's supposed to, so\n\n60\n00:03:11.230 --> 00:03:14.320\nwe get the cluster,\nthe cluster of our dreams, right?\n\n61\n00:03:14.320 --> 00:03:17.530\nWhat is it that we hope to\nachieve with this thing, right?\n\n62\n00:03:17.530 --> 00:03:21.760\nThe first thing is we know\nthat we need HA turned on.\n\n63\n00:03:21.760 --> 00:03:24.150\nIf HA isn't even turned on,\nnone of this stuff is gonna work, so\n\n64\n00:03:24.150 --> 00:03:29.140\nif I go into my vCenter screen, and I'm\ngonna go down here to hosts and clusters,\n\n65\n00:03:29.140 --> 00:03:30.930\nand I'm gonna find my cluster that I made,\nright?\n\n66\n00:03:30.930 --> 00:03:32.850\nSo we made this cluster, ITProTV-Lab.\n\n67\n00:03:32.850 --> 00:03:35.580\nIt's got a couple of hosts in it,\nhost one and host two,\n\n68\n00:03:35.580 --> 00:03:40.050\nthey're parked right there, and\nif I go into the cluster, and\n\n69\n00:03:40.050 --> 00:03:45.060\ngo to Manage, and Settings,\nwe'll see vSphere HA right here.\n\n70\n00:03:45.060 --> 00:03:46.950\nWe saw this in the last episode.\n\n71\n00:03:46.950 --> 00:03:50.830\nAnd the big glaring omission\nright at the top is simply that\n\n72\n00:03:50.830 --> 00:03:54.570\nvSphere HA is turned off, and it doesn't\nwork so well when it's turned off.\n\n73\n00:03:54.570 --> 00:03:55.510\nWe're gonna turn it on, right?\n\n74\n00:03:55.510 --> 00:03:57.080\nSo I'm just gonna hit Edit on that.\n\n75\n00:03:57.080 --> 00:04:00.620\nAnd when we go to edit it,\nI've only got one option.\n\n76\n00:04:00.620 --> 00:04:04.410\nEverything else is grayed out\nuntil I turn it on, okay?\n\n77\n00:04:04.410 --> 00:04:08.184\nOnce I turn it on, now we can start to get\nsome of the advanced functionality, even\n\n78\n00:04:08.184 --> 00:04:11.760\nif I were to stop right here, but there\nare still other things that I wanna do.\n\n79\n00:04:11.760 --> 00:04:14.830\nLet's run through some of the things\nhere that it's offering for me.\n\n80\n00:04:14.830 --> 00:04:16.400\nFirst off, Host Monitoring.\n\n81\n00:04:16.400 --> 00:04:18.130\nYou want Host Monitoring.\n\n82\n00:04:18.130 --> 00:04:20.250\nHost Monitoring is where the cluster,\nor really,\n\n83\n00:04:20.250 --> 00:04:24.380\nvCenter, will monitor each host to ensure\nthat they're up and they're working.\n\n84\n00:04:24.380 --> 00:04:27.270\nIf a host were to fail, or\nif host were to go into maintenance mode,\n\n85\n00:04:27.270 --> 00:04:30.020\nthe cluster needs to know about it,\nso that we can shift virtual\n\n86\n00:04:30.020 --> 00:04:33.310\nmachines off of it, or at least warn\nus about it so that we know what to do.\n\n87\n00:04:33.310 --> 00:04:37.470\nSo that's a key component right there,\nwe need to monitor the host.\n\n88\n00:04:37.470 --> 00:04:41.600\nAnd the way the hosts get monitored\nis through what's called a heartbeat.\n\n89\n00:04:41.600 --> 00:04:42.460\nAnd see how it says right here,\n\n90\n00:04:42.460 --> 00:04:46.600\nthe ESX/ESXi hosts in this cluster\nexchange network heartbeats.\n\n91\n00:04:46.600 --> 00:04:48.060\nThey talk to each other.\n\n92\n00:04:48.060 --> 00:04:49.592\nA heartbeat is a really simple thing.\n\n93\n00:04:49.592 --> 00:04:52.420\nThere's actually two different\ntypes of heartbeats in ESX.\n\n94\n00:04:52.420 --> 00:04:54.470\nThere's the network one they're\ntalking about here, and\n\n95\n00:04:54.470 --> 00:04:57.380\nthere's a data store one that's\nactually a little more reliable.\n\n96\n00:04:57.380 --> 00:05:00.030\nWith the network one, we just send\na little message across the network.\n\n97\n00:05:00.030 --> 00:05:01.420\nIt's actually a very small message.\n\n98\n00:05:01.420 --> 00:05:03.770\nAnd it sends it very, very frequently.\n\n99\n00:05:03.770 --> 00:05:05.070\nI can't remember the actual interval.\n\n100\n00:05:05.070 --> 00:05:07.550\nI think it's every two seconds, but\nit's really, really frequently.\n\n101\n00:05:07.550 --> 00:05:08.220\nIt sends a message.\n\n102\n00:05:08.220 --> 00:05:09.120\nIt says, hey, I'm online.\n\n103\n00:05:09.120 --> 00:05:10.140\nHow about you?\nAnd\n\n104\n00:05:10.140 --> 00:05:12.650\nthe other servers are sending\nmessages saying, hey, we're online.\n\n105\n00:05:12.650 --> 00:05:15.490\nAnd so they're all letting each\nother know they're online.\n\n106\n00:05:15.490 --> 00:05:18.420\nIf somebody ever stops\nsending those messages,\n\n107\n00:05:18.420 --> 00:05:20.240\nwe know they're not online anymore, right?\n\n108\n00:05:20.240 --> 00:05:21.390\nSo, it's a heartbeat.\n\n109\n00:05:21.390 --> 00:05:25.130\nIt's kind of like those medical shows,\nand somebody's passed out,\n\n110\n00:05:25.130 --> 00:05:27.230\nand they check their pulse, right?\n\n111\n00:05:27.230 --> 00:05:27.880\nAre they still alive?\n\n112\n00:05:27.880 --> 00:05:28.860\nThat's what we're doing here.\n\n113\n00:05:28.860 --> 00:05:30.430\nDo I see that pulse on the network?\n\n114\n00:05:31.600 --> 00:05:34.350\nA data store heartbeat works the same way,\n\n115\n00:05:34.350 --> 00:05:38.950\nexcept instead of using the network,\nit uses the shared storage.\n\n116\n00:05:38.950 --> 00:05:40.700\nIf you're using a network,\n\n117\n00:05:40.700 --> 00:05:44.710\nit's possible your network could become\nreally congested, really heavy traffic,\n\n118\n00:05:44.710 --> 00:05:49.310\nand maybe collisions or something else\ncauses a heartbeat not to make it through.\n\n119\n00:05:49.310 --> 00:05:53.550\nAnd we might think somebody's gone\noffline when they're actually online.\n\n120\n00:05:53.550 --> 00:05:57.240\nIf we write to our shared storage,\neverybody sees the shared storage already.\n\n121\n00:05:57.240 --> 00:06:01.420\nIt's kind of like a private network set\naside just for using heart beating,\n\n122\n00:06:01.420 --> 00:06:02.500\nexcept it's storage also.\n\n123\n00:06:02.500 --> 00:06:04.000\nAnd it can be a little more reliable.\n\n124\n00:06:04.000 --> 00:06:06.250\nWe'll see how to turn that\non a little bit later.\n\n125\n00:06:06.250 --> 00:06:08.240\nHere, it's just talking about networking.\n\n126\n00:06:08.240 --> 00:06:13.140\nThe next option is VMCP, all right,\nthis is VM Component Protection.\n\n127\n00:06:13.140 --> 00:06:16.190\nBy default,\nthe cluster monitors the hosts.\n\n128\n00:06:16.190 --> 00:06:19.780\nIf a host fails,\nthen we can move some VMs off of it and\n\n129\n00:06:19.780 --> 00:06:21.770\nget them back up on another host.\n\n130\n00:06:21.770 --> 00:06:24.010\nBut, what if the host is just fine,\n\n131\n00:06:24.010 --> 00:06:27.210\nand it's a virtual machine that's\nhaving the problem, right?\n\n132\n00:06:27.210 --> 00:06:29.220\nWhat if a virtual machine locks up?\n\n133\n00:06:30.400 --> 00:06:32.350\nThe cluster doesn't\ndetect that by default.\n\n134\n00:06:32.350 --> 00:06:35.590\nThe cluster knows the virtual\nmachine is powered up, but\n\n135\n00:06:35.590 --> 00:06:38.370\nit could be a Windows machine\nsitting at a blue screen, right?\n\n136\n00:06:38.370 --> 00:06:40.950\nIt's got a blue screen of death and\nit's completely locked up.\n\n137\n00:06:40.950 --> 00:06:42.600\nThe cluster doesn't know about that.\n\n138\n00:06:42.600 --> 00:06:43.920\nIt just sees, hey, it's running.\n\n139\n00:06:43.920 --> 00:06:45.910\nI'm happy with that, and that's it.\n\n140\n00:06:45.910 --> 00:06:49.700\nOr, what if it's one of the Vswitches,\nlike a port group on a Vswitch\n\n141\n00:06:49.700 --> 00:06:54.600\ngets misconfigured, and now, the virtual\nmachine can't connect to its Vswitch.\n\n142\n00:06:54.600 --> 00:06:56.460\nWell, the host is up, and\n\n143\n00:06:56.460 --> 00:06:59.110\nwe might even be communicating on\nthe management network just fine.\n\n144\n00:06:59.110 --> 00:07:01.730\nBut this virtual machine has lost\na component that's important to it,\n\n145\n00:07:01.730 --> 00:07:02.680\nit's lost network connectivity.\n\n146\n00:07:03.810 --> 00:07:04.960\nHow do we know that?\n\n147\n00:07:04.960 --> 00:07:05.940\nWell, by default, you don't.\n\n148\n00:07:05.940 --> 00:07:08.010\nYou don't know that, you can't see it.\n\n149\n00:07:08.010 --> 00:07:11.430\nBut if we install the VMware\ntools on the virtual machine,\n\n150\n00:07:11.430 --> 00:07:15.260\nthe VMware tools actually\nsend a heartbeat to the host.\n\n151\n00:07:15.260 --> 00:07:18.340\nNow the host is getting a heartbeat\nfrom the other cluster members and\n\n152\n00:07:18.340 --> 00:07:20.980\na heartbeat from the virtual machines.\n\n153\n00:07:20.980 --> 00:07:23.310\nAnd if the VM stops sending a heartbeat,\n\n154\n00:07:23.310 --> 00:07:25.300\nthen we know the virtual\nmachine had a problem.\n\n155\n00:07:25.300 --> 00:07:28.120\nAnd we can configure that with VMCP.\n\n156\n00:07:28.120 --> 00:07:30.450\nSo right here, VM Component Protection.\n\n157\n00:07:30.450 --> 00:07:34.540\nIf I turn this option on, you'll see\nit's really just got this one option for\n\n158\n00:07:34.540 --> 00:07:37.560\nme, Protect Against\nStorage Connectivity Loss.\n\n159\n00:07:37.560 --> 00:07:40.040\nIf the virtual machine loses\nconnectivity to its storage for\n\n160\n00:07:40.040 --> 00:07:45.070\nsome reason, it will protect us,\nand as we configure other things,\n\n161\n00:07:45.070 --> 00:07:48.070\nyou'll see where it does more than\njust storage connectivity loss.\n\n162\n00:07:48.070 --> 00:07:51.110\nIt does losing network or\ndisk communication.\n\n163\n00:07:51.110 --> 00:07:55.310\nSo it can get things like that network\nconnectivity with the Vswitches.\n\n164\n00:07:55.310 --> 00:07:56.636\nRight.\n\n165\n00:07:56.636 --> 00:07:59.927\nAfter VMCP, and these are all\nthings we can turn on later too,\n\n166\n00:07:59.927 --> 00:08:04.185\nyou don't have to turn them all on right\nnow, we can turn them on at a later time.\n\n167\n00:08:04.185 --> 00:08:06.148\nThen we've got virtual machine monitoring,\nokay?\n\n168\n00:08:06.148 --> 00:08:10.590\nNow, here's that VMware tool heartbeat,\nthis works in addition to the VMCP, right?\n\n169\n00:08:10.590 --> 00:08:12.790\nSo it's kind of like basic\nheartbeat monitoring and\n\n170\n00:08:12.790 --> 00:08:16.720\nadvanced heartbeat monitoring,\nVMCP being the more advanced of the two.\n\n171\n00:08:16.720 --> 00:08:18.240\nWith virtual machine monitoring,\n\n172\n00:08:18.240 --> 00:08:20.360\nhere's where we get that\ninteraction with the VMware tools.\n\n173\n00:08:20.360 --> 00:08:22.380\nAnd so I can come in and\nI can turn that on.\n\n174\n00:08:22.380 --> 00:08:24.750\nNow, notice there's two modes.\n\n175\n00:08:24.750 --> 00:08:28.270\nVM Monitoring Only,\nwe just talked to the host OS, right?\n\n176\n00:08:28.270 --> 00:08:30.790\nIf it's Windows or it's Linux,\nthey're running the VMWare tools,\n\n177\n00:08:30.790 --> 00:08:33.710\nwe talk to them and that's it,\nthat works out great.\n\n178\n00:08:33.710 --> 00:08:37.220\nBut you also have VM and\nApplication Monitoring.\n\n179\n00:08:37.220 --> 00:08:38.302\nWhat's that?\n\n180\n00:08:38.302 --> 00:08:43.470\nWell, there's certain applications that\ncan report their health back to VMware.\n\n181\n00:08:43.470 --> 00:08:48.910\nSo, for example, I might have a Linux\nbox that is up and running my SQL, okay?\n\n182\n00:08:48.910 --> 00:08:51.800\nWell, the Linux box might be up and\nhappy, but\n\n183\n00:08:51.800 --> 00:08:55.340\nmy SQL might have locked up,\nthat process is locked.\n\n184\n00:08:55.340 --> 00:08:58.180\nWell, the virtual machine is up,\nit sees the network,\n\n185\n00:08:58.180 --> 00:09:02.290\nit sees its storage, it's running along,\nbut my SQL's locked.\n\n186\n00:09:02.290 --> 00:09:06.010\nSo as far as I'm concerned,\nmy application is down, right?\n\n187\n00:09:06.010 --> 00:09:08.940\nBut there's people who\nhave written plugins for\n\n188\n00:09:08.940 --> 00:09:13.950\nMySQL that let it interact with VMware\ntools and let it report its health back.\n\n189\n00:09:13.950 --> 00:09:17.160\nAnd now, if MySQL locks up,\nwe can take some kind of action.\n\n190\n00:09:17.160 --> 00:09:19.982\nReboot the VM, whatever it is we wanna do,\nwe can take an action based on that.\n\n191\n00:09:19.982 --> 00:09:26.110\nBut VMware does not create any\nof those plugins themselves,\n\n192\n00:09:26.110 --> 00:09:27.790\nit's up to the third-party vendors.\n\n193\n00:09:27.790 --> 00:09:30.510\nSo when you buy software,\nif you get MySQL or\n\n194\n00:09:30.510 --> 00:09:34.490\nOracle or whatever other software\nit is you're running, look and\n\n195\n00:09:34.490 --> 00:09:39.160\nsee if that vendor provides a VMware\npackage to support application monitoring.\n\n196\n00:09:39.160 --> 00:09:43.740\nAnd if they do, now the cluster can\nbe aware of not just the hardware,\n\n197\n00:09:43.740 --> 00:09:46.400\nnot just the virtual machine and\nits configuration,\n\n198\n00:09:46.400 --> 00:09:50.310\nnot just the host OS, but\nall the way through to the application.\n\n199\n00:09:50.310 --> 00:09:53.150\nAnd we can monitor that health and\nfailover when needed, or\n\n200\n00:09:53.150 --> 00:09:55.670\njust restart the server, if nothing else.\n\n201\n00:09:55.670 --> 00:09:56.592\nYou have those options.\n\n202\n00:09:56.592 --> 00:09:58.910\nAll right.\nI'm gonna set mine to VM Monitoring Only\n\n203\n00:09:58.910 --> 00:10:00.250\ncuz I'm not running any software, so\n\n204\n00:10:00.250 --> 00:10:02.450\nthere's not really a point in\ndoing it application side.\n\n205\n00:10:03.500 --> 00:10:04.630\nAnd then, right after that,\n\n206\n00:10:04.630 --> 00:10:09.570\nwe've got a few last little details right\nhere, which are failure conditions and\n\n207\n00:10:09.570 --> 00:10:13.770\nresponse, admissions control, datastore\nfor heartbeating, and advanced options.\n\n208\n00:10:13.770 --> 00:10:20.080\nHere's where we get to the really shiny\nbells and whistles inside of HA, okay?\n\n209\n00:10:20.080 --> 00:10:22.890\nFailure conditions and VM response, right?\n\n210\n00:10:22.890 --> 00:10:26.620\nWhat happens if a virtual machine fails,\nright?\n\n211\n00:10:26.620 --> 00:10:30.940\nIf a virtual machine shows is not\nworking right, what do we do with it?\n\n212\n00:10:30.940 --> 00:10:34.320\nAnd you'll see the different\nscenarios play out right here.\n\n213\n00:10:34.320 --> 00:10:37.810\nIf it's a host failure,\nif the host has failed,\n\n214\n00:10:37.810 --> 00:10:40.390\nwe're gonna restart the virtual machines,\nright?\n\n215\n00:10:40.390 --> 00:10:43.490\nWhen we restart a virtual machine\nin a cluster, it's gonna try and\n\n216\n00:10:43.490 --> 00:10:45.290\ngo back to the host that it was on.\n\n217\n00:10:45.290 --> 00:10:49.100\nBut if the host that it's on is down,\nit'll just pick another available host and\n\n218\n00:10:49.100 --> 00:10:50.170\nit'll boot form that one.\n\n219\n00:10:50.170 --> 00:10:53.590\nSo this'll basically restart\nthe VM on another host.\n\n220\n00:10:53.590 --> 00:10:57.450\nIf the original host has failed, we can't\nsalvage what's in RAM, it's already gone,\n\n221\n00:10:57.450 --> 00:10:58.590\nthe host has failed.\n\n222\n00:10:58.590 --> 00:11:01.800\nSo we just power up the VM somewhere else.\n\n223\n00:11:01.800 --> 00:11:04.490\nSo that's that kind of\ndefault response there.\n\n224\n00:11:04.490 --> 00:11:07.510\nIf the host is isolated,\nwhat does that mean?\n\n225\n00:11:07.510 --> 00:11:11.140\nWell, in this case, the host machine\nis still up, it's still running, and\n\n226\n00:11:11.140 --> 00:11:13.290\nthus the virtual machines are up and\nrunning.\n\n227\n00:11:13.290 --> 00:11:15.730\nBut it's become isolated from the network.\n\n228\n00:11:15.730 --> 00:11:19.850\nIt might still have attachments to\nthe storage side, but not to the network.\n\n229\n00:11:19.850 --> 00:11:21.260\nNow we've got a problem,\n\n230\n00:11:21.260 --> 00:11:25.010\nbecause technically those virtual\nmachines are still writing to disc.\n\n231\n00:11:25.010 --> 00:11:28.500\nSo if I try and bring up another host,\nif I try and bring up those VMs somewhere\n\n232\n00:11:28.500 --> 00:11:30.690\nelse, now I've got two hosts trying to\nwrite to the disc at the same time.\n\n233\n00:11:30.690 --> 00:11:33.980\nAnd so, the default here is Response,\nDisabled.\n\n234\n00:11:33.980 --> 00:11:37.970\nIf the host becomes isolated,\nit doesn't flip the VMs across, all right?\n\n235\n00:11:37.970 --> 00:11:41.170\nBecause it's trying to\navoid that disc corruption.\n\n236\n00:11:41.170 --> 00:11:44.917\nYou got datastore with permanent\nloss versus datastore with all paths\n\n237\n00:11:44.917 --> 00:11:45.980\ndown, okay?\n\n238\n00:11:45.980 --> 00:11:47.275\nThese are actually very similar.\n\n239\n00:11:47.275 --> 00:11:51.310\nDatastore with permanent device loss,\nthat means that\n\n240\n00:11:51.310 --> 00:11:54.980\nnone of our hosts can see that storage\nanymore, it's effectively gone.\n\n241\n00:11:54.980 --> 00:11:56.600\nSo what can we do there?\n\n242\n00:11:56.600 --> 00:11:58.202\nNot really much of anything, right?\n\n243\n00:11:58.202 --> 00:12:02.170\nThe datastore is gone, so\nthe virtual machine just shuts down.\n\n244\n00:12:03.440 --> 00:12:07.240\nBut if it's all paths down,\nthat's all paths down for this host.\n\n245\n00:12:07.240 --> 00:12:09.370\nOther hosts might have other\npaths to get there, so\n\n246\n00:12:09.370 --> 00:12:11.760\nI might be able to move this\nvirtual machine somewhere else.\n\n247\n00:12:11.760 --> 00:12:15.615\nBut you'll see, even that functionality is\ndisabled because it's going to assume that\n\n248\n00:12:15.615 --> 00:12:18.350\nthe datastore itself has failed.\n\n249\n00:12:18.350 --> 00:12:20.860\nAnd then last we've got\nguest not heartbeating.\n\n250\n00:12:20.860 --> 00:12:25.100\nI turned on guest monitoring and I told\nit to monitor just the guest OS only.\n\n251\n00:12:25.100 --> 00:12:26.780\nAnd so it's monitoring it for\nthat heartbeat, and\n\n252\n00:12:26.780 --> 00:12:30.030\nif the heartbeat ever stops,\nit assumes the machine is locked up,\n\n253\n00:12:30.030 --> 00:12:34.155\nlike a Windows blue screen of death or\na Linux kernel panic, or whatever.\n\n254\n00:12:34.155 --> 00:12:35.690\nAnd so, reset the VM.\n\n255\n00:12:35.690 --> 00:12:38.575\nIt'll reboot it and\nstart that one back up, right?\n\n256\n00:12:38.575 --> 00:12:42.645\nSo those are the default responses right\nthere that it's gonna provide in the event\n\n257\n00:12:42.645 --> 00:12:43.495\nof a failure.\n\n258\n00:12:43.495 --> 00:12:47.515\nAnd we can override all of these on\nthe virtual machines themselves.\n\n259\n00:12:47.515 --> 00:12:51.275\nSo you can go into the individual VMs and\ncustomize and tailor it.\n\n260\n00:12:51.275 --> 00:12:53.900\nThese are the defaults\nthat are being set up.\n\n261\n00:12:53.900 --> 00:12:56.820\nAnd down here at the bottom,\nwe can override it globally.\n\n262\n00:12:56.820 --> 00:13:01.445\nSo here we see response for host\nisolation, which up here was disabled.\n\n263\n00:13:01.445 --> 00:13:04.750\nDatastore with permanent loss,\ndatastore with all paths down, and\n\n264\n00:13:04.750 --> 00:13:08.470\nwe can change those to\nsomething other than disabled.\n\n265\n00:13:08.470 --> 00:13:12.800\nSo if the host becomes isolated,\nshut down and restart the VM, okay?\n\n266\n00:13:12.800 --> 00:13:16.620\nIf I shut the VM down,\nit's gonna stop writing to the hard drive.\n\n267\n00:13:16.620 --> 00:13:20.900\nAnd when we restart the VM, now it's gonna\nboot it somewhere else where it's not\n\n268\n00:13:20.900 --> 00:13:22.560\nisolated and now it's ready to work.\n\n269\n00:13:22.560 --> 00:13:25.610\nSo shutting it down and restarting it,\nmake sure I don't lose data.\n\n270\n00:13:25.610 --> 00:13:27.990\nI get some down time,\nhowever long it takes to shut down and\n\n271\n00:13:27.990 --> 00:13:31.650\nhowever long it takes to boot up, but\nat least my data stays safe, right?\n\n272\n00:13:31.650 --> 00:13:33.160\nThat's kinda the goal there.\n\n273\n00:13:33.160 --> 00:13:35.200\nYou could just say power off and\nrestart the VMs.\n\n274\n00:13:35.200 --> 00:13:39.600\nNow I'm gonna lose data cuz I'm basically\ncutting the power to that virtual machine\n\n275\n00:13:39.600 --> 00:13:40.400\nand booting it somewhere else.\n\n276\n00:13:40.400 --> 00:13:44.420\nBut that might be okay if I'm trying\nto get it back up as fast as possible.\n\n277\n00:13:44.420 --> 00:13:45.580\nI don't wanna wait for it to shut down.\n\n278\n00:13:46.600 --> 00:13:48.600\nIf you work with Windows,\nyou guys know what happens right?\n\n279\n00:13:48.600 --> 00:13:51.870\nI'm in a hurry, I go to shut it down,\ninstalling updates,\n\n280\n00:13:51.870 --> 00:13:55.318\ninstalling update one of 25 do not\npower off or restart this machine.\n\n281\n00:13:55.318 --> 00:13:56.117\nCrap, right?\n\n282\n00:13:56.117 --> 00:14:00.300\n[LAUGH] I mean that's what happens,\nI'm in a hurry.\n\n283\n00:14:00.300 --> 00:14:02.270\nSo we might just say, look,\nwe're not gonna wait for\n\n284\n00:14:02.270 --> 00:14:03.770\nthat, we'll just power it off.\n\n285\n00:14:03.770 --> 00:14:07.190\nAnd know that if something really goes\nwrong, Windows can run CHKDSK and\n\n286\n00:14:07.190 --> 00:14:10.330\nsort itself out, or\nLinux can run fsck and check itself out.\n\n287\n00:14:10.330 --> 00:14:12.260\nAnd they can do that, right?\n\n288\n00:14:12.260 --> 00:14:15.190\nIt's up to me how I want to handle that.\n\n289\n00:14:15.190 --> 00:14:16.720\nAll right,\nthen we've got the datastore loss.\n\n290\n00:14:16.720 --> 00:14:19.290\nIf we lose connectivity to the datastore,\nsame kind of thing.\n\n291\n00:14:19.290 --> 00:14:23.740\nIf it's permanent data loss, Issue Events\nis kind of the best option because if you\n\n292\n00:14:23.740 --> 00:14:28.180\ntry and power off and restart the VM,\nwe're talking about permanent device loss.\n\n293\n00:14:28.180 --> 00:14:30.850\nWe're not gonna get that device\nback until we fix the device.\n\n294\n00:14:30.850 --> 00:14:32.670\nThere's not really a whole\nlot of point in restarting.\n\n295\n00:14:32.670 --> 00:14:34.990\nBut you certainly can,\nyou've got the option.\n\n296\n00:14:34.990 --> 00:14:39.270\nIf it's all paths down, it's usually\nbetter to try and power off and\n\n297\n00:14:39.270 --> 00:14:42.220\nrestart the machine, and\nthat way it can go over somewhere else.\n\n298\n00:14:42.220 --> 00:14:44.130\nNotice there's two options here for\npowering off and\n\n299\n00:14:44.130 --> 00:14:47.370\nrestarting the machine,\nconservative and aggressive.\n\n300\n00:14:47.370 --> 00:14:52.610\nConservative means let's give it a little\nbit of time before we restart it, right?\n\n301\n00:14:52.610 --> 00:14:55.690\nBecause it's isolated,\npeople shouldn't be reaching out to it and\n\n302\n00:14:55.690 --> 00:14:57.150\nthe storage might come back up.\n\n303\n00:14:57.150 --> 00:15:01.570\nSo we kinda give it just a few\nseconds there to try and quiesce.\n\n304\n00:15:01.570 --> 00:15:04.100\nAnd then after that's done\nwe shut it down and move it.\n\n305\n00:15:04.100 --> 00:15:07.350\nOr we go aggressive, which means just\nas soon as that host is isolated,\n\n306\n00:15:07.350 --> 00:15:10.100\nimmediately power that VM off and\nbring it up somewhere else.\n\n307\n00:15:10.100 --> 00:15:12.040\nSo if I'm in a hurry, and\n\n308\n00:15:12.040 --> 00:15:14.930\nthese are web servers with static data\nthat feed off a database somewhere else,\n\n309\n00:15:14.930 --> 00:15:17.810\nthen I may just want to immediately\ncut it and move it over.\n\n310\n00:15:17.810 --> 00:15:20.290\nAll right?\nSo, there's other options out there, too.\n\n311\n00:15:20.290 --> 00:15:22.010\nBut these are pretty straightforward.\n\n312\n00:15:22.010 --> 00:15:23.049\nI'll just issue a fence on that one.\n\n313\n00:15:24.750 --> 00:15:29.780\nAll right, then we've got the all\npaths down recovery after APD timeout.\n\n314\n00:15:29.780 --> 00:15:33.450\nSo, o the all paths down,\nit's got a delay timer.\n\n315\n00:15:33.450 --> 00:15:35.480\nSee the delay timer here of three minutes?\n\n316\n00:15:35.480 --> 00:15:36.958\nWell, what happens after that time?\n\n317\n00:15:36.958 --> 00:15:38.540\nWe failover, okay?\n\n318\n00:15:38.540 --> 00:15:40.930\nSo, what do we do after\nthat failover happens?\n\n319\n00:15:40.930 --> 00:15:43.500\nDo we reset the VMs and\ntry and bring them up, or\n\n320\n00:15:43.500 --> 00:15:45.670\ndo we just leave them be in whatever\nstate they happen to be in?\n\n321\n00:15:45.670 --> 00:15:47.929\nAnd the default is to leave them alone,\nwe can customize that.\n\n322\n00:15:49.750 --> 00:15:51.600\nAnd then the sensitivity.\n\n323\n00:15:51.600 --> 00:15:55.050\nHow much time do we want to let pass\n\n324\n00:15:55.050 --> 00:15:58.730\nbefore we decide that a virtual\nmachine is up or down, okay?\n\n325\n00:15:58.730 --> 00:16:00.657\nAnd so, you can come in here and\ntailor this.\n\n326\n00:16:00.657 --> 00:16:03.769\nThe default is that you've\ngot high sensitivity, and\n\n327\n00:16:03.769 --> 00:16:08.028\nif you look at what that sensitivity\nmeans It's basically set here to say,\n\n328\n00:16:08.028 --> 00:16:12.870\nthe failure interval is 30 seconds,\nthe minimum uptime is 120 seconds.\n\n329\n00:16:12.870 --> 00:16:15.360\nIf I don't get a heartbeat for\n\n330\n00:16:15.360 --> 00:16:19.230\n30 seconds, then I'm gonna assume\nthe virtual machine is locked up.\n\n331\n00:16:19.230 --> 00:16:21.600\nOkay, and then we need to take an action.\n\n332\n00:16:21.600 --> 00:16:26.600\nAnd once I start getting a heartbeat\nagain, I don't necessarily trust that\n\n333\n00:16:26.600 --> 00:16:32.080\nmachine yet, right, because it was locked\nup, so the minimum uptime is 120 seconds.\n\n334\n00:16:32.080 --> 00:16:36.560\nWe're gonna wait 120 seconds, two minutes,\nbefore we decide the machine is healthy\n\n335\n00:16:36.560 --> 00:16:40.290\nenough to bring it back in because,\nI don't know, if you guys have ever seen\n\n336\n00:16:40.290 --> 00:16:43.640\nthis in the Windows world, it's not\nuncommon, they use some kind of failure.\n\n337\n00:16:43.640 --> 00:16:47.980\nThe machine reboots, it reboots and\nthen fails again and\n\n338\n00:16:47.980 --> 00:16:51.950\nreboots, fails again and reboots, stuck\nin a loop, so I don't want to assume it's\n\n339\n00:16:51.950 --> 00:16:54.250\nactive when it's still just looping for\nwhatever reason.\n\n340\n00:16:54.250 --> 00:16:58.000\nAnd with failed storage, that's really\ncommon because it goes to boot, it's\n\n341\n00:16:58.000 --> 00:17:01.120\nbooting its OS off of some local disk,\nthen it goes to access network storage,\n\n342\n00:17:01.120 --> 00:17:05.300\nand it craps out and reboots, right, so\nthat's definitely something that happens.\n\n343\n00:17:05.300 --> 00:17:09.570\nYou can customize this, like if we go to\nlow, failure interval is two minutes, and\n\n344\n00:17:09.570 --> 00:17:14.170\nthe minimum uptime is 480 seconds, so\nit's a much larger window of time, right,\n\n345\n00:17:14.170 --> 00:17:16.580\nand you can go custom and\nreally tweak that.\n\n346\n00:17:16.580 --> 00:17:19.930\nSo if you want something that's\neven higher than the high setting,\n\n347\n00:17:19.930 --> 00:17:23.720\nyou can come in here and\nreally crank this down, okay?\n\n348\n00:17:23.720 --> 00:17:27.990\nJust know that the lower you make these\nnumbers the more heartbeats it sends, and\n\n349\n00:17:27.990 --> 00:17:30.040\nthe more false positives you can get.\n\n350\n00:17:30.040 --> 00:17:33.010\nSo, more heartbeats means\nmore CPU utilization,\n\n351\n00:17:33.010 --> 00:17:36.590\nmore false positives means failing over\nwhen the machine was actually fine.\n\n352\n00:17:36.590 --> 00:17:38.460\nMaybe the machine just hit 100% CPU for\n\n353\n00:17:38.460 --> 00:17:41.350\na minute and got a little busy, and\nif you would've just waited a few seconds,\n\n354\n00:17:41.350 --> 00:17:44.110\nit would've be fine, but instead,\nyou failed it over, right?\n\n355\n00:17:44.110 --> 00:17:46.960\nSo, we don't wanna go\ntoo aggressive on this.\n\n356\n00:17:46.960 --> 00:17:49.850\nUnfortunately, I can't give you\nthe perfect numbers to use here,\n\n357\n00:17:49.850 --> 00:17:51.290\nbecause it depends on\nyour virtual machines.\n\n358\n00:17:51.290 --> 00:17:53.670\nIt depends on what workload\nyou're putting inside of them.\n\n359\n00:17:53.670 --> 00:17:56.745\nIf these are web servers, you really don't\nwanna be too aggressive with web servers,\n\n360\n00:17:56.745 --> 00:17:58.285\ncuz they do spike CPU.\n\n361\n00:17:58.285 --> 00:18:00.805\nBut if it's a database server,\nyou might want to be aggressive.\n\n362\n00:18:00.805 --> 00:18:03.375\n>> Would that be something, Don,\nthat maybe you'd check a baseline?\n\n363\n00:18:03.375 --> 00:18:06.535\nJust to figure out that, hey,\nthis machine is a production machine?\n\n364\n00:18:06.535 --> 00:18:08.355\nJust do your research before you peek and\n\n365\n00:18:08.355 --> 00:18:10.445\ntweak these to suit them\nto your environment?\n\n366\n00:18:10.445 --> 00:18:15.145\n>> Yeah, and this is where a lot of\nvendors have workload simulators,\n\n367\n00:18:15.145 --> 00:18:18.075\nbecause what happens, I see this all\nthe time, where people build up a test or\n\n368\n00:18:18.075 --> 00:18:23.020\ndev environment, and how many people are\nworking in the test or dev environment?\n\n369\n00:18:23.020 --> 00:18:23.790\nOne?\nMaybe five?\n\n370\n00:18:23.790 --> 00:18:25.700\nIf you have a QC team, maybe 10?\n\n371\n00:18:25.700 --> 00:18:27.180\nNot a ton of people.\n\n372\n00:18:27.180 --> 00:18:29.810\nWhen your all in production, how many\npeople are in your production environment?\n\n373\n00:18:29.810 --> 00:18:31.320\nTens of thousands, maybe?\n\n374\n00:18:31.320 --> 00:18:31.830\nRight?\n\n375\n00:18:31.830 --> 00:18:33.360\nSo you don't have a similar workload.\n\n376\n00:18:33.360 --> 00:18:36.110\nSo if you're gonna be creating this kind\nof baseline, you need to make sure that\n\n377\n00:18:36.110 --> 00:18:39.140\nyou have a workload simulator, something\nthat's generating fake workloads so\n\n378\n00:18:39.140 --> 00:18:42.090\nyou can get an idea of what that\nserver normally looks like.\n\n379\n00:18:42.090 --> 00:18:43.530\nAnd then once you know what\nit normally looks like,\n\n380\n00:18:43.530 --> 00:18:46.640\nyou can base these numbers off of that,\nto get a good estimate.\n\n381\n00:18:46.640 --> 00:18:48.800\nYou just want to avoid false\npositives when you can.\n\n382\n00:18:48.800 --> 00:18:49.720\nFailing over is nice.\n\n383\n00:18:49.720 --> 00:18:50.330\nIt's convenient.\n\n384\n00:18:50.330 --> 00:18:50.860\nIt's fast.\n\n385\n00:18:50.860 --> 00:18:52.440\nIt's easy, right?\n\n386\n00:18:52.440 --> 00:18:56.000\nBut, failovers aren't flawless.\n\n387\n00:18:56.000 --> 00:18:58.800\nYou do lose a little bit of\ndata when you do a failover,\n\n388\n00:18:58.800 --> 00:19:01.630\neven in one where everything is up and\nhealthy and you synchronize RAM,\n\n389\n00:19:01.630 --> 00:19:05.670\nthere's still a couple of packets that\nget lost when the systems switch over.\n\n390\n00:19:05.670 --> 00:19:08.820\nAnd so, in a mission critical application,\nthat's not okay.\n\n391\n00:19:08.820 --> 00:19:12.143\nYou want to minimize failovers so that\nyou only failover when there's an actual\n\n392\n00:19:12.143 --> 00:19:14.280\ndisaster, or when you manually trigger it.\n\n393\n00:19:14.280 --> 00:19:15.710\nSo, always try and avoid that.\n\n394\n00:19:17.370 --> 00:19:18.160\nAll right.\n\n395\n00:19:18.160 --> 00:19:19.530\nNow we get to the fun stuff down here.\n\n396\n00:19:19.530 --> 00:19:20.790\nWe've got admission control.\n\n397\n00:19:20.790 --> 00:19:22.590\nAll right, what is admission control?\n\n398\n00:19:22.590 --> 00:19:27.880\nWell, when you build a cluster,\na cluster only has so many resources.\n\n399\n00:19:27.880 --> 00:19:30.460\nI built a cluster,\nmine has two nodes in it, right?\n\n400\n00:19:30.460 --> 00:19:33.210\nSo I've got ESX host 01 and ESX host 02.\n\n401\n00:19:33.210 --> 00:19:36.280\nThey both only have four gigs of RAM.\n\n402\n00:19:36.280 --> 00:19:41.510\nSo together, they've got eight gigs\nof RAM, that's not a lot, right?\n\n403\n00:19:41.510 --> 00:19:45.230\nIf I create five virtual machines, and\n\n404\n00:19:45.230 --> 00:19:49.910\nI give each of those virtual machines\none gig of RAM, well in my cluster,\n\n405\n00:19:49.910 --> 00:19:52.090\nI've got eight gigs of RAM total,\nso I'm fine, right?\n\n406\n00:19:53.680 --> 00:19:54.540\nWrong.\n\n407\n00:19:54.540 --> 00:19:56.680\nI'm right in that I can do it, but\n\n408\n00:19:56.680 --> 00:20:00.290\nI'm wrong in that my cluster\nis no longer healthy.\n\n409\n00:20:00.290 --> 00:20:05.820\nIf I have two cluster nodes with four\ngigs each, that's my eight gigs of RAM.\n\n410\n00:20:05.820 --> 00:20:07.680\nWhat happens if one node fails?\n\n411\n00:20:07.680 --> 00:20:11.600\nIf one node fails, I'm gonna try and take\nall of the VMs that were on that node and\n\n412\n00:20:11.600 --> 00:20:14.380\nmove it over to the node that's still up.\n\n413\n00:20:14.380 --> 00:20:16.090\nWell it's only got four gigs a RAM.\n\n414\n00:20:16.090 --> 00:20:18.140\nMy VMs have five gigs of RAM.\n\n415\n00:20:18.140 --> 00:20:19.950\nI'm gonna exceed what's available.\n\n416\n00:20:19.950 --> 00:20:22.962\n>> And now it seems like you would need\nsomething that determines the priority of\n\n417\n00:20:22.962 --> 00:20:26.066\nthose machines, which machines are just,\nwe've got to have those production\n\n418\n00:20:26.066 --> 00:20:28.105\nmachines, and\nyou mentioned the dev environment,\n\n419\n00:20:28.105 --> 00:20:30.275\nprobably don't need that\nmachine to failover.\n\n420\n00:20:30.275 --> 00:20:31.550\n>> Yeah, and certainly,\n\n421\n00:20:31.550 --> 00:20:34.660\nthere's going to be machines that you\ndon't necessarily care about, and so\n\n422\n00:20:34.660 --> 00:20:38.820\nyou can tie those to a particular host or\nnot even put them into the cluster.\n\n423\n00:20:38.820 --> 00:20:43.796\nBut if you want true,\nbalancing availability, you've gotta make\n\n424\n00:20:43.796 --> 00:20:49.051\nsure that you're cluster can survive\nthe failure of at least one node.\n\n425\n00:20:49.051 --> 00:20:49.720\nAll right?\n\n426\n00:20:49.720 --> 00:20:54.520\nAnd so when you build a two node cluster,\nlike mine, you might have some problems.\n\n427\n00:20:54.520 --> 00:20:56.230\nAnd so\nyou might get some warnings about it.\n\n428\n00:20:56.230 --> 00:20:57.750\nRight?\nI don't have a lot of VMs right now, so\n\n429\n00:20:57.750 --> 00:20:58.870\nmine's pretty happy.\n\n430\n00:20:58.870 --> 00:21:01.500\nBut if I start creating more VMs,\nI'm gonna have a problem.\n\n431\n00:21:01.500 --> 00:21:05.470\nSo the default is that we have\nwhat's called admission control.\n\n432\n00:21:05.470 --> 00:21:09.350\nAnd admission control will check,\nanytime you create a virtual machine,\n\n433\n00:21:09.350 --> 00:21:13.510\nif you go to put it in a cluster, yes,\nthe cluster might have enough memory for\n\n434\n00:21:13.510 --> 00:21:17.162\nit, but if it can't survive a failure,\nit's gonna throw a warning.\n\n435\n00:21:17.162 --> 00:21:19.520\nIt's gonna stop you from creating that VM,\nright?\n\n436\n00:21:19.520 --> 00:21:22.370\nIt's gonna stop you from\nadmitting a VM into the cluster.\n\n437\n00:21:22.370 --> 00:21:24.748\nIt's gonna keep you out\ncuz it's just too full,\n\n438\n00:21:24.748 --> 00:21:27.300\nthe terminology comes\nfrom like night clubs.\n\n439\n00:21:27.300 --> 00:21:29.850\nSo you get in line, you go to the door\nof the night club, and they say, nope,\n\n440\n00:21:29.850 --> 00:21:30.960\nthere's too many people inside.\n\n441\n00:21:30.960 --> 00:21:35.180\nWe've got the Fire Marshal rules that\nsay only 300 people can be in this club.\n\n442\n00:21:35.180 --> 00:21:38.530\nWell, you're number 301, so\nyou gotta wait, that's how the VMs are.\n\n443\n00:21:38.530 --> 00:21:42.220\nIt won't let them come into the cluster\nif there's not available resources.\n\n444\n00:21:42.220 --> 00:21:44.920\nSo, we may want that, we may not, right?\n\n445\n00:21:44.920 --> 00:21:48.230\nIn a lab environment, I'll turn this\noff a lot of times because I'm gonna\n\n446\n00:21:48.230 --> 00:21:52.290\noversubscribe my cluster, it's a lab\nenvironment, but in production, you always\n\n447\n00:21:52.290 --> 00:21:56.830\nhave to plan for failure, and a lot of\npeople just plan for one host failing.\n\n448\n00:21:56.830 --> 00:22:01.765\nI've got a two node cluster, so if I loose\ntwo nodes, I've got bigger problems,\n\n449\n00:22:01.765 --> 00:22:05.210\nright, so for me, I can only plan for one.\n\n450\n00:22:05.210 --> 00:22:10.270\nBut, what if I had a 16-node cluster,\nI have 16 hosts,\n\n451\n00:22:10.270 --> 00:22:13.100\nwell, maybe I wanna plan for two or\nthree of them failing, right?\n\n452\n00:22:13.100 --> 00:22:15.550\nWhat if three hosts fail?\n\n453\n00:22:15.550 --> 00:22:20.160\nI need the remaining 13 hosts to be able\nto carry the workload that those three\n\n454\n00:22:20.160 --> 00:22:23.010\nfailed hosts were carrying, right,\ndistribute it across all of them.\n\n455\n00:22:23.010 --> 00:22:25.170\nSo I may need to bump this up and\n\n456\n00:22:25.170 --> 00:22:29.590\nsay I needed a reserved capacity for\nthree hosts.\n\n457\n00:22:29.590 --> 00:22:32.010\nAnd now it's gonna look at what\nwe've got laid out across there and\n\n458\n00:22:32.010 --> 00:22:33.120\nmake sure that it reserves\nthat at all time.\n\n459\n00:22:33.120 --> 00:22:36.410\nAnd if I try and create more VMs than\ncan be handled, it'll stop me, right?\n\n460\n00:22:36.410 --> 00:22:38.630\nIt's a great way to keep\nyourself honest and\n\n461\n00:22:38.630 --> 00:22:40.368\nensure that you don't\noversubscribe your cluster, right?\n\n462\n00:22:41.740 --> 00:22:44.990\nDown here,\nnotice the slot size policy, right?\n\n463\n00:22:44.990 --> 00:22:49.770\nThe slot size, each virtual\nmachine uses what's called a slot.\n\n464\n00:22:49.770 --> 00:22:52.480\nAnd a slot is a combination of\nprocessor and memory, right?\n\n465\n00:22:52.480 --> 00:22:55.540\nThe disk storage is shared, so\nwe don't have to worry about disk storage.\n\n466\n00:22:55.540 --> 00:22:56.910\nYou either have the space or you don't.\n\n467\n00:22:56.910 --> 00:22:58.540\nThat's not a big deal.\n\n468\n00:22:58.540 --> 00:23:02.370\nBut memory and CPU, those are the two\nthat you really need to pay attention to.\n\n469\n00:23:02.370 --> 00:23:04.794\nAnd so\nslots are kind of a combination of that,\n\n470\n00:23:04.794 --> 00:23:09.250\nsee how it's this maximum\nCPU/Memory reservation, it's both.\n\n471\n00:23:09.250 --> 00:23:11.390\nAnd when you create a VM,\n\n472\n00:23:11.390 --> 00:23:16.400\nIt might be a very small VM that only\nhas so much memory and CPU power.\n\n473\n00:23:16.400 --> 00:23:20.180\nIt might be a very big VM that\nhas tons of CPUs and tons of RAM.\n\n474\n00:23:20.180 --> 00:23:21.730\nThey're not equal, are they?\n\n475\n00:23:21.730 --> 00:23:25.247\nSo it's very difficult for the cluster to\nevaluate all of this as like apples to\n\n476\n00:23:25.247 --> 00:23:28.340\napples, right, cuz different\nvirtual machines are different.\n\n477\n00:23:28.340 --> 00:23:31.860\nSo what we can do is we can\nleave it where it just looks\n\n478\n00:23:31.860 --> 00:23:33.840\nat whatever VMs are powered on.\n\n479\n00:23:33.840 --> 00:23:36.864\nIf the VMs are powered on, it knows how\nmuch memory and how much CPU they're\n\n480\n00:23:36.864 --> 00:23:39.840\nusing, and so it can use that to\nbalance it out, and that's the default.\n\n481\n00:23:40.880 --> 00:23:44.680\nOr, I can create a statistical average.\n\n482\n00:23:44.680 --> 00:23:48.800\nI can define what a slot is,\nand I can say that a slot in\n\n483\n00:23:48.800 --> 00:23:53.767\nmy environment is one gigahertz for\nCPU, and one gig of RAM, or\n\n484\n00:23:53.767 --> 00:23:58.774\nfour gigs of RAM, or whatever,\nand I can start to define that.\n\n485\n00:23:58.774 --> 00:24:02.999\nAnd what's gonna happen is if I have\na virtual machine that needs more than one\n\n486\n00:24:02.999 --> 00:24:07.159\ngigahertz of CPU, or more than one gig\nof RAM, well, that's a slot, and so\n\n487\n00:24:07.159 --> 00:24:10.409\nthat virtual machine may consume\nmore than one slot, and so\n\n488\n00:24:10.409 --> 00:24:13.487\nwe can hit VMs requiring\nmultiple slots and calculate.\n\n489\n00:24:13.487 --> 00:24:15.046\nAnd it's gonna look and find that out.\n\n490\n00:24:15.046 --> 00:24:18.880\nAll of my VMs fit in that, so\nno VMs take more than one slot.\n\n491\n00:24:18.880 --> 00:24:22.870\nAnd now it can evaluate that out,\nbased on how many slots we support.\n\n492\n00:24:22.870 --> 00:24:26.080\nIf one VM is oversized, then it will\njust consume more than one slot.\n\n493\n00:24:26.080 --> 00:24:27.524\nWe use that to balance it out, right?\n\n494\n00:24:27.524 --> 00:24:29.102\nBut to be honest with you guys,\n\n495\n00:24:29.102 --> 00:24:32.180\njust covering all the power on\nhow virtual machines works.\n\n496\n00:24:32.180 --> 00:24:34.270\nIf there's a virtual\nmachine that's powered off,\n\n497\n00:24:34.270 --> 00:24:37.240\nI'm not really worried about covering\nits capacity cuz it was turned off.\n\n498\n00:24:37.240 --> 00:24:40.245\nIf I'm in a critical failure, I don't need\nto go turning on machines that were off.\n\n499\n00:24:40.245 --> 00:24:43.150\n[LAUGH] I need to worry about\nthe machines that were on.\n\n500\n00:24:43.150 --> 00:24:45.390\nAnd so that's the default that we go with.\n\n501\n00:24:45.390 --> 00:24:50.682\nIf you do the fixed slot size,\nit'll evaluate machines that are off also.\n\n502\n00:24:50.682 --> 00:24:52.144\nAll right, then we've got,\n\n503\n00:24:52.144 --> 00:24:56.370\nwhat I was doing here was Define failover\ncapacity by static number of hosts, right?\n\n504\n00:24:56.370 --> 00:24:59.210\nAnd that's the default,\nthat's the way that it kinda works.\n\n505\n00:24:59.210 --> 00:25:01.570\nBut you have other options down here,\n\n506\n00:25:01.570 --> 00:25:05.620\nlike way down at the bottom,\nDo not reserve failover capacity.\n\n507\n00:25:05.620 --> 00:25:08.230\nThat means, hey these here?\n\n508\n00:25:08.230 --> 00:25:10.100\nDon't worry about it, I got it covered.\n\n509\n00:25:10.100 --> 00:25:11.887\nI'll make sure it's okay, I promise.\n\n510\n00:25:11.887 --> 00:25:16.715\n[LAUGH] And so when I do a lab, that's\nusually what I choose because I may have\n\n511\n00:25:16.715 --> 00:25:20.330\nmore VMs than what my cluster\ncan successfully handle.\n\n512\n00:25:20.330 --> 00:25:23.170\nAnd I don't want to stare at a warning\nsignal the whole time I work with\n\n513\n00:25:23.170 --> 00:25:24.520\na cluster so I just disable it.\n\n514\n00:25:24.520 --> 00:25:25.900\nYou can turn that off.\n\n515\n00:25:25.900 --> 00:25:28.390\nBut the other two options\nare a little more useful.\n\n516\n00:25:28.390 --> 00:25:29.630\nFor example, it can say,\n\n517\n00:25:29.630 --> 00:25:33.780\ndefine failover capacity by reserving\na percentage of the cluster resource.\n\n518\n00:25:35.020 --> 00:25:38.290\nI might say,\nset aside 25% of my resources.\n\n519\n00:25:38.290 --> 00:25:41.210\nAnd if I have four nodes,\nthat would be like saying,\n\n520\n00:25:41.210 --> 00:25:44.030\nI've got one entire node that\nI can support a failure of.\n\n521\n00:25:44.030 --> 00:25:48.970\nBut if I have ten nodes,\nit's gonna set aside two and a half.\n\n522\n00:25:48.970 --> 00:25:51.480\nIf I have 20,\nit's gonna set aside five, right?\n\n523\n00:25:51.480 --> 00:25:54.900\nFive nodes to be able to handle that\nworkload based on a percentage.\n\n524\n00:25:54.900 --> 00:25:59.780\nThis allows me to scale, and it grows the\namount that it's reserving as we scale.\n\n525\n00:25:59.780 --> 00:26:04.000\nAnd then there's this one,\nUse dedicated failover hosts.\n\n526\n00:26:04.000 --> 00:26:07.360\nI'm not a big fan of this, but\nthere's a lot of people who are.\n\n527\n00:26:07.360 --> 00:26:10.292\nAnd what they do is they say,\nlook, we've got a 16 node cluster.\n\n528\n00:26:10.292 --> 00:26:13.180\nI'm gonna pick these three\nnodes over here, and\n\n529\n00:26:13.180 --> 00:26:15.060\nI'm gonna use them as\ndedicated failover hosts.\n\n530\n00:26:15.060 --> 00:26:16.750\nI'm gonna add them to this list.\n\n531\n00:26:16.750 --> 00:26:19.410\nYou just hit this little plus sign and\nadd the host and\n\n532\n00:26:19.410 --> 00:26:20.870\nno VMs will be allowed to go on those.\n\n533\n00:26:20.870 --> 00:26:22.990\nThey'll just sit there idle, right?\n\n534\n00:26:22.990 --> 00:26:26.660\nThey'll sit there idle and in a failure,\nVMs will get moved over to it.\n\n535\n00:26:26.660 --> 00:26:27.850\nOtherwise they're reserved.\n\n536\n00:26:27.850 --> 00:26:30.220\n>> Okay, Don, now I've gotta play\ndevil's advocate on this one.\n\n537\n00:26:30.220 --> 00:26:32.770\nNow you're using\na dedicated fail over host.\n\n538\n00:26:32.770 --> 00:26:36.290\nWhat happens if the dedicated\nfail over host fails.\n\n539\n00:26:36.290 --> 00:26:36.880\n>> Nothing.\n\n540\n00:26:36.880 --> 00:26:37.620\n>> Nothing.\n>> Nothing.\n\n541\n00:26:37.620 --> 00:26:38.410\nAbsolutely nothing.\n\n542\n00:26:38.410 --> 00:26:41.770\nIt's a dedicated failover host,\nit's got no VMs.\n\n543\n00:26:41.770 --> 00:26:43.705\nSo if it fails, who cares.\n\n544\n00:26:43.705 --> 00:26:45.810\n[LAUGH] There was nothing to fail over.\n\n545\n00:26:45.810 --> 00:26:47.970\nNow, our cluster will show as degraded.\n\n546\n00:26:47.970 --> 00:26:49.720\nOur cluster will show has\nhaving a failed node, but\n\n547\n00:26:49.720 --> 00:26:51.260\nit doesn't have to move anybody off of it.\n\n548\n00:26:51.260 --> 00:26:51.806\nRight?\n\n549\n00:26:51.806 --> 00:26:54.800\nIf somebody else were to fail though,\nthe VMs would come over here.\n\n550\n00:26:54.800 --> 00:26:56.780\nNow, why don't I like this?\n\n551\n00:26:56.780 --> 00:26:59.420\nI don't like it because it\ndoesn't plan for spikes.\n\n552\n00:26:59.420 --> 00:27:02.730\nI might have spikes in CPU utilization or\nsomething,\n\n553\n00:27:02.730 --> 00:27:06.240\nspikes in disk I/O is where you\nnormally see it or network bandwidth.\n\n554\n00:27:06.240 --> 00:27:09.110\nWell these machines are effectively\ntaken out of the game.\n\n555\n00:27:09.110 --> 00:27:13.560\nIf I had left them in, if we had gone\nwith a default up here of planning for\n\n556\n00:27:13.560 --> 00:27:17.030\nour capacity based on\nstatic number of hosts.\n\n557\n00:27:17.030 --> 00:27:21.803\nIf I had 16 nodes, even though I've\ngot 3 planned for failover Over,\n\n558\n00:27:21.803 --> 00:27:24.006\nall 16 nodes would be working.\n\n559\n00:27:24.006 --> 00:27:29.285\nI'd be using the network bandwidth or\ndiskIO, the fiberHP on all 16 hosts.\n\n560\n00:27:29.285 --> 00:27:34.575\nI'm getting some money's worth\nout of all of my hardware.\n\n561\n00:27:34.575 --> 00:27:39.125\nDown here, when I cut myself down to\nfailover hosts and let's say I have three\n\n562\n00:27:39.125 --> 00:27:42.950\nfailover hosts, those three failover\nhosts are literally doing nothing.\n\n563\n00:27:42.950 --> 00:27:46.310\nAnd my other 13 hosts,\nthey're carrying workload.\n\n564\n00:27:46.310 --> 00:27:49.419\nAnd so, now I'm getting extra\ncontention on my fibre HPA's, or\n\n565\n00:27:49.419 --> 00:27:53.050\ncontention on my network adapters\nthat I wouldn't normally have, right?\n\n566\n00:27:53.050 --> 00:27:59.370\nSo they're getting a lot busier because of\ntheir just being tied to those machines.\n\n567\n00:27:59.370 --> 00:28:00.780\nSo that's why I don't like this one but\n\n568\n00:28:00.780 --> 00:28:03.687\nif you want to have those notes set aside\nwhere you know exactly which ones are your\n\n569\n00:28:03.687 --> 00:28:05.386\nfail over this is certainly\nthe way to do that.\n\n570\n00:28:05.386 --> 00:28:08.780\n>> Now Don with the fixed sized fail\nover that you're showing us up at\n\n571\n00:28:08.780 --> 00:28:09.770\nthe top there.\n\n572\n00:28:09.770 --> 00:28:12.510\nIs there any kind of ratio,\nis there a best practice\n\n573\n00:28:12.510 --> 00:28:17.090\nthat VMWare says to follow or\nmaybe a best practice that you've used?\n\n574\n00:28:17.090 --> 00:28:20.100\nOr is this really just knowing\nwhat your environment is and\n\n575\n00:28:20.100 --> 00:28:23.470\nreally just kinda modeling it\nafter what you need specifically?\n\n576\n00:28:23.470 --> 00:28:27.650\n>> What it boils down to is\nyour tolerance of downtime.\n\n577\n00:28:27.650 --> 00:28:31.099\nSo, how many machines do you\nthink could fail at once?\n\n578\n00:28:31.099 --> 00:28:33.820\nFor years, people were happy with RAID 5.\n\n579\n00:28:33.820 --> 00:28:37.490\nA RAID 5 array would allow you to have\none drive fail and you'd still be on,\n\n580\n00:28:37.490 --> 00:28:39.910\nbut be slower, while it rebuilt, right?\n\n581\n00:28:39.910 --> 00:28:42.278\nWell, now people\nare realizing that data is so\n\n582\n00:28:42.278 --> 00:28:44.719\nbig that the rebuild time\non RAID 5 is too long.\n\n583\n00:28:44.719 --> 00:28:46.150\nNow everybody hates RAID 5.\n\n584\n00:28:46.150 --> 00:28:48.678\nBecause they need things to be faster.\n\n585\n00:28:48.678 --> 00:28:52.470\nSo they build systems that can support two\ndrives failing, the new RAID 10 instead.\n\n586\n00:28:52.470 --> 00:28:55.120\nIt's the same thing\nwith your VMR clusters.\n\n587\n00:28:55.120 --> 00:28:58.475\nIf you have a node fail,\nis your performance going to be degraded?\n\n588\n00:28:58.475 --> 00:28:59.130\nA little bit.\n\n589\n00:28:59.130 --> 00:29:00.245\nYou'll have some extra contention.\n\n590\n00:29:00.245 --> 00:29:01.404\nIs that okay?\n\n591\n00:29:01.404 --> 00:29:05.034\nIf it's not okay, then you need to\nincrease the amount of reserve resources,\n\n592\n00:29:05.034 --> 00:29:06.740\nso you don't have that contention.\n\n593\n00:29:06.740 --> 00:29:09.280\nIf it is okay then you can save money and\nyou can have that contention and\n\n594\n00:29:09.280 --> 00:29:10.320\nit's no big deal.\n\n595\n00:29:10.320 --> 00:29:13.120\nDo you plan on having more than\none node fail at the same time?\n\n596\n00:29:13.120 --> 00:29:14.930\nIt's certainly possible, right?\n\n597\n00:29:14.930 --> 00:29:16.580\nIs that okay,\nif you were to have a failure,\n\n598\n00:29:16.580 --> 00:29:19.380\nare there some VMs that you\ncould shut off to make room?\n\n599\n00:29:19.380 --> 00:29:22.050\nIf they're all mission critical,\nyou don't have that room.\n\n600\n00:29:22.050 --> 00:29:23.860\nYou need those extra machines.\n\n601\n00:29:23.860 --> 00:29:25.760\nSo it's really up to your requirements,\n\n602\n00:29:25.760 --> 00:29:29.250\nand I tell this funny story where\nevery company I've worked for.\n\n603\n00:29:30.360 --> 00:29:33.315\nI always find that their\nbackup system is a mess or\n\n604\n00:29:33.315 --> 00:29:36.855\nnon-existent and\nthat they haven't plan for recovery.\n\n605\n00:29:36.855 --> 00:29:39.658\nAnd so it was one of the first\nthings that I address and\n\n606\n00:29:39.658 --> 00:29:43.770\nI go to the CIO and I'll say, okay we\nneed to have a better plan for recovery.\n\n607\n00:29:43.770 --> 00:29:46.046\nSo what's our acceptable downtime?\n\n608\n00:29:46.046 --> 00:29:48.710\nHow much time could we\nbe down in a given year.\n\n609\n00:29:48.710 --> 00:29:50.965\nAnd they always have the same answer,\nthe answer is,\n\n610\n00:29:50.965 --> 00:29:52.280\nwell we don't want any downtime.\n\n611\n00:29:52.280 --> 00:29:56.380\nAnd I say okay I can do that,\nwe can have no downtime.\n\n612\n00:29:56.380 --> 00:29:58.280\nI'm gonna need a few million dollars.\n\n613\n00:29:58.280 --> 00:30:01.886\nAnd depending on the size of\nthe organization it's gonna be some money.\n\n614\n00:30:01.886 --> 00:30:07.565\nAnd the CIO goes, well actually it would\nbe okay if we were down a little bit.\n\n615\n00:30:07.565 --> 00:30:11.380\n[LAUGH] And you start to establish\nwhat is that acceptable down time.\n\n616\n00:30:11.380 --> 00:30:13.110\nAnd now you build your\nsolution around that.\n\n617\n00:30:13.110 --> 00:30:16.390\nAnd every company has a different\nlevel of acceptable down time.\n\n618\n00:30:16.390 --> 00:30:19.680\nIf you're a hospital, and\nthis is the system that's controlling all\n\n619\n00:30:19.680 --> 00:30:23.670\nthe medicines going out to the patients,\nyou can't accept a lot of down time.\n\n620\n00:30:23.670 --> 00:30:25.610\nYou've gotta keep that system up.\n\n621\n00:30:25.610 --> 00:30:28.210\nBut, if this is a public school,\n\n622\n00:30:28.210 --> 00:30:30.635\nand you're keeping track\nof the students grades.\n\n623\n00:30:30.635 --> 00:30:32.138\nCould that go down for two or three days?\n\n624\n00:30:32.138 --> 00:30:34.842\nCertainly could and\nit wouldn't derail the entire environment,\n\n625\n00:30:34.842 --> 00:30:36.925\nkids education wouldn't\nspiral on to the ground.\n\n626\n00:30:36.925 --> 00:30:38.885\nIt's just a couple of days, right?\n\n627\n00:30:38.885 --> 00:30:41.055\nSo different people have\ndifferent tolerance and\n\n628\n00:30:41.055 --> 00:30:42.295\nthat's what this really boils down to.\n\n629\n00:30:43.420 --> 00:30:44.160\nAll right.\n\n630\n00:30:44.160 --> 00:30:45.420\nI do need to talk about one more thing,\n\n631\n00:30:45.420 --> 00:30:47.180\nwhich I know I'm running\na little short on time.\n\n632\n00:30:47.180 --> 00:30:50.407\nWe talked a little bit\nabout heart beating, and\n\n633\n00:30:50.407 --> 00:30:54.190\nI mentioned the VMware kernel adapters and\nvMotion.\n\n634\n00:30:54.190 --> 00:30:54.790\nShoot, I guess I have\n\n635\n00:30:54.790 --> 00:30:56.940\na lot of things I still need to talk\nabout as I think about it here.\n\n636\n00:30:56.940 --> 00:31:00.500\nWe talked a little bit about\nheart beating we haven't seen it.\n\n637\n00:31:00.500 --> 00:31:04.780\nWe talked a little bit about the VM kernel\nadapters which we haven't touched at all.\n\n638\n00:31:04.780 --> 00:31:07.760\nAnd we still have to\ntalk about the quorums,\n\n639\n00:31:07.760 --> 00:31:10.030\nthe votes that happen\nbetween the machines.\n\n640\n00:31:10.030 --> 00:31:12.160\nDarn it Wes, I think we're gonna\nhave to do a part three on this one.\n\n641\n00:31:12.160 --> 00:31:15.730\nCuz I don't think I can get that in\nthe two minutes I have left on my\n\n642\n00:31:15.730 --> 00:31:17.190\ntimer [LAUGH] Over here.\n\n643\n00:31:17.190 --> 00:31:18.280\n>> Well Don, that sounds good.\n\n644\n00:31:18.280 --> 00:31:19.080\nHow about we'll do that?\n\n645\n00:31:19.080 --> 00:31:20.260\nWe'll come back with a part three.\n\n646\n00:31:20.260 --> 00:31:21.510\nWe'll make this another trilogy.\n\n647\n00:31:21.510 --> 00:31:23.440\nTrilogies are great.\n\n648\n00:31:23.440 --> 00:31:25.192\nExcept certain trilogies we won't mention.\n\n649\n00:31:25.192 --> 00:31:27.695\nBut seeing that we are coming\nto the end of another episode.\n\n650\n00:31:27.695 --> 00:31:31.680\nSo do you got any additional information\nor you wanna leave it to part three?\n\n651\n00:31:31.680 --> 00:31:33.110\n>> Let's leave it for part three.\n\n652\n00:31:33.110 --> 00:31:35.884\nI need to click OK on this screen and\nit's gonna turn on all of this HA stuff.\n\n653\n00:31:35.884 --> 00:31:39.450\nWe're not really going to see anything\ndifferent behavior wise right now.\n\n654\n00:31:39.450 --> 00:31:41.640\nIt's when you have a failure that\nyou'll see the difference and\n\n655\n00:31:41.640 --> 00:31:42.900\nwe do need to configure those adapters.\n\n656\n00:31:42.900 --> 00:31:45.802\nSo, even if I hit OK right now,\nit's probably not gonna quite work.\n\n657\n00:31:45.802 --> 00:31:47.778\nThere's still a little bit\nmore we need to configure, so\n\n658\n00:31:47.778 --> 00:31:48.991\ndefinitely check out part three.\n\n659\n00:31:48.991 --> 00:31:51.310\n>> All right, well we appreciate\nyou being here with us Don and\n\n660\n00:31:51.310 --> 00:31:52.460\nwe appreciate you, the viewer.\n\n661\n00:31:52.460 --> 00:31:53.690\nCome back and see us for part three.\n\n662\n00:31:53.690 --> 00:31:56.404\nSigning off for ITPRO TV,\nI've been your host Wes Bryan.\n\n663\n00:31:56.404 --> 00:31:57.171\n>> And I'm Don Pezet.\n\n664\n00:31:57.171 --> 00:31:59.380\n>> And we'll see you next time.\n\n665\n00:31:59.380 --> 00:32:04.840\n[MUSIC]\n\n",
          "vimeoId": "170161658"
        },
        {
          "description": "In this episode, Wes and Don continue their discussion on the concepts of clustering and high availability. They explore datastore heartbeats,ensuring quorum, vMotion and more.",
          "length": "1349",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-3-clustering_and_ha_pt3-060816-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-3-clustering_and_ha_pt3-060816-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-1-3-clustering_and_ha_pt3-060816-1-sm.jpg",
          "title": "Clustering and HA Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.744 --> 00:00:14.887\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:14.887 --> 00:00:16.204\nI'm your host Wes Bryan and\n\n4\n00:00:16.204 --> 00:00:19.599\nin today's episode we're continuing\nthrough our series in VMware.\n\n5\n00:00:19.599 --> 00:00:20.660\nThat's right.\nWe're coming back at\n\n6\n00:00:20.660 --> 00:00:24.401\nyou with more of that VMware\ncertified professional version 6.\n\n7\n00:00:24.401 --> 00:00:27.101\nIt's a part three in\nmanaging availability.\n\n8\n00:00:27.101 --> 00:00:30.051\nAnd joining me back in the studios\ntoday is none other than Mr Don Pezet.\n\n9\n00:00:30.051 --> 00:00:31.250\nDon, how are you doing, sir?\n\n10\n00:00:31.250 --> 00:00:34.692\n>> I'm doing great, Wes, ready to jump\ninto the part three that should not be.\n\n11\n00:00:34.692 --> 00:00:37.642\n[LAUGH] Had a few little odds and\nends that I just didn't get to in the last\n\n12\n00:00:37.642 --> 00:00:39.800\nepisode, so\nwe're gonna tackle them right here.\n\n13\n00:00:39.800 --> 00:00:43.430\nThis might not be a very long episode,\nbut couple of key components here.\n\n14\n00:00:43.430 --> 00:00:46.210\nIf you haven't watched part part two,\nabsolutely watch part two cuz otherwise\n\n15\n00:00:46.210 --> 00:00:48.420\nthis isn't gonna make a whole\nheck of a lot of sense.\n\n16\n00:00:48.420 --> 00:00:52.620\nWhere we left off was I'd gone through\nconfiguring a bunch of the vSphere\n\n17\n00:00:52.620 --> 00:00:54.770\nHA settings,\nthe high availability settings.\n\n18\n00:00:54.770 --> 00:00:59.432\nAnd we're pretty much done, but if we turn\nit on it's still not gonna quite work\n\n19\n00:00:59.432 --> 00:01:04.110\nexactly the way we want, because there's\na few last little things to address.\n\n20\n00:01:04.110 --> 00:01:06.414\nSo let's talk about those right here.\n\n21\n00:01:06.414 --> 00:01:08.780\nLet me get back into the screen that\nI was on at the end of the episode.\n\n22\n00:01:08.780 --> 00:01:12.170\nSo I'm gonna go back into vCenter, and\nI'm gonna go to my host and clusters and\n\n23\n00:01:12.170 --> 00:01:14.660\nI'll take the ITProTV-Lab.\n\n24\n00:01:14.660 --> 00:01:16.090\nAnd actually if you look,\n\n25\n00:01:16.090 --> 00:01:19.220\nI've got a couple of warnings\non my hosts right now, and\n\n26\n00:01:19.220 --> 00:01:25.460\nthat's more than likely because I didn't\ncomplete the HA configuration, right?\n\n27\n00:01:25.460 --> 00:01:29.500\nAnd so if I highlight one here,\nit's telling me the number of vSphere HA\n\n28\n00:01:29.500 --> 00:01:33.100\nheartbeat datastores for this host is 0,\nwhich is less than the required 2.\n\n29\n00:01:33.100 --> 00:01:35.370\nWe never configured a heartbeat datastore.\n\n30\n00:01:35.370 --> 00:01:36.990\nSo that's one of the things\nthat we left off.\n\n31\n00:01:36.990 --> 00:01:40.310\nAnd the host currently has no\nmanagement network redundancy.\n\n32\n00:01:40.310 --> 00:01:43.180\nNow that's gonna be a warning I won't\nbe able to resolve in this episode cuz\n\n33\n00:01:43.180 --> 00:01:46.258\nI've only got one network\nadapter in my host.\n\n34\n00:01:46.258 --> 00:01:50.400\nIdeally, you wanna have multiple network\nadapters so that you can stay connected to\n\n35\n00:01:50.400 --> 00:01:54.580\nyour management network in\nthe event that one network fails.\n\n36\n00:01:54.580 --> 00:01:56.740\nSo for us,\nwe still need to go into configure.\n\n37\n00:01:56.740 --> 00:02:00.290\nAnd I know I at least need to configure\nmy datastore for the heartbeat.\n\n38\n00:02:00.290 --> 00:02:04.060\nNow technically,\nmy nodes are already sending a heartbeat.\n\n39\n00:02:04.060 --> 00:02:05.840\nThey're sending the network heartbeat.\n\n40\n00:02:05.840 --> 00:02:08.230\nBut the heartbeat is not the most\nreliable way to measure things.\n\n41\n00:02:08.230 --> 00:02:10.440\nAnd so I need a datastore heartbeat.\n\n42\n00:02:10.440 --> 00:02:11.630\nThat's the most reliable way,\n\n43\n00:02:11.630 --> 00:02:14.900\na great way to see it, cuz the shared\nstorage is critical to the cluster.\n\n44\n00:02:14.900 --> 00:02:18.170\nAnd if we lose connectivity to the shared\nstorage then we don't work anyway, so\n\n45\n00:02:18.170 --> 00:02:19.560\nthat's when you lose your heartbeat.\n\n46\n00:02:19.560 --> 00:02:23.800\nSo it makes sense to go ahead and use that\nshared storage for the heartbeat also.\n\n47\n00:02:23.800 --> 00:02:27.370\nAnd that option was just at the bottom\nof the screen in the last episode.\n\n48\n00:02:27.370 --> 00:02:31.640\nWhen we choose the cluster and\nwe go to Manage > Settings,\n\n49\n00:02:31.640 --> 00:02:36.340\nI'm gonna choose vSphere HA, and\nI'm gonna go and edit those settings.\n\n50\n00:02:36.340 --> 00:02:37.800\nWhen we go to edit it,\n\n51\n00:02:37.800 --> 00:02:40.910\nwe were walking through all these\ndifferent settings in the last episode.\n\n52\n00:02:40.910 --> 00:02:42.610\nAnd we got right through\nadmission control, and\n\n53\n00:02:42.610 --> 00:02:46.780\nwe kinda stopped right here on the next\none, which is datastore for heartbeating.\n\n54\n00:02:46.780 --> 00:02:49.200\nAnd it's just not configured, okay.\n\n55\n00:02:49.200 --> 00:02:50.430\nSo we need to get that configured.\n\n56\n00:02:50.430 --> 00:02:53.720\nAnd you'll see there's a few different\noptions that we've got to pick from here,\n\n57\n00:02:53.720 --> 00:02:56.960\nlike use datastores from\nthe specified list and\n\n58\n00:02:56.960 --> 00:02:59.460\ncomplement automatically if needed, right.\n\n59\n00:02:59.460 --> 00:03:00.700\nThat's the default.\n\n60\n00:03:00.700 --> 00:03:04.200\nBut if I scroll down, well,\nhere's the datasource and\n\n61\n00:03:04.200 --> 00:03:05.470\nthere's none checked, right.\n\n62\n00:03:05.470 --> 00:03:06.490\nSo none of them are checked.\n\n63\n00:03:06.490 --> 00:03:10.220\nSo it's not actually able to use them so\nthat's why I can't use it right now.\n\n64\n00:03:10.220 --> 00:03:11.400\nWe're getting a warning.\n\n65\n00:03:11.400 --> 00:03:15.180\nWe can say automatically select\ndatastores accessible from the host.\n\n66\n00:03:15.180 --> 00:03:18.890\nThat says hey, just look at the datastores\nyou have, pick one and use it, right?\n\n67\n00:03:18.890 --> 00:03:21.640\nThat's okay, but we don't necessarily know\nwhat datastore it is that it's gonna pick\n\n68\n00:03:21.640 --> 00:03:22.910\nand maybe we don't care, right.\n\n69\n00:03:22.910 --> 00:03:25.400\nIt doesn't matter to me\nwhich datastore it picks.\n\n70\n00:03:25.400 --> 00:03:29.870\nBut it does actually create files in\nthe datastore, the heartbeat files.\n\n71\n00:03:29.870 --> 00:03:31.770\nThe way it works is the heartbeat files,\n\n72\n00:03:31.770 --> 00:03:34.110\nthere's actually two different heartbeat\nfiles that it creates, one for\n\n73\n00:03:34.110 --> 00:03:37.230\nwhen the system powers on and\none that shows that it's running.\n\n74\n00:03:37.230 --> 00:03:42.380\nAnd the one that's running, it's updating\nit every couple of, every few seconds.\n\n75\n00:03:42.380 --> 00:03:44.870\nAnd that way the time\nstamp on the file changes.\n\n76\n00:03:44.870 --> 00:03:47.540\nAnd we can look at the time\nstamp on the file to know\n\n77\n00:03:47.540 --> 00:03:49.370\nwhen that server last sent a heartbeat.\n\n78\n00:03:49.370 --> 00:03:52.410\nSo now a host doesn't have\nto talk to another host.\n\n79\n00:03:52.410 --> 00:03:54.530\nThe host don't have to talk to each other.\n\n80\n00:03:54.530 --> 00:03:56.360\nThe hosts just have to\ntalk to the storage,\n\n81\n00:03:56.360 --> 00:03:57.910\nwhich they need to talk to anyway.\n\n82\n00:03:57.910 --> 00:04:00.542\nAnd all they're doing is\nupdating the timestamp on a file.\n\n83\n00:04:00.542 --> 00:04:03.384\nThat's what the heartbeat is, is updating\nthat timestamp on the file over and\n\n84\n00:04:03.384 --> 00:04:04.550\nover and over again.\n\n85\n00:04:04.550 --> 00:04:07.390\nAnd if the timestamp ever gets old,\nwe know it's not being updated.\n\n86\n00:04:07.390 --> 00:04:09.610\nA really simple system,\nit's very effective.\n\n87\n00:04:09.610 --> 00:04:12.330\nSo I may not want it to go\non just any old datastore,\n\n88\n00:04:12.330 --> 00:04:14.150\ncuz I don't wanna junk it up with files.\n\n89\n00:04:14.150 --> 00:04:17.500\nI might even wanna have a dedicated\ndatastore just for that.\n\n90\n00:04:17.500 --> 00:04:21.520\nIt's up to me, if you wanna do it,\nthe text files are super small.\n\n91\n00:04:21.520 --> 00:04:24.912\nSo you could create a datastore that was\nonly a couple hundred megs in size and\n\n92\n00:04:24.912 --> 00:04:27.880\nit would be more than enough to\nhandle a 64 node cluster, right.\n\n93\n00:04:27.880 --> 00:04:30.925\nIt really doesn't take\nmuch storage at all.\n\n94\n00:04:30.925 --> 00:04:34.565\nBut for me, I'm gonna go ahead and\nI'll just use my storage,\n\n95\n00:04:34.565 --> 00:04:37.305\ntoo because I'm not using that one and\nI can check that off, right.\n\n96\n00:04:37.305 --> 00:04:40.595\nSo now it's gonna use datastores\nfrom that list and then it says and\n\n97\n00:04:40.595 --> 00:04:43.045\ncomplement automatically if needed.\n\n98\n00:04:43.045 --> 00:04:44.785\nIn theory,\nif I start adding more data storage,\n\n99\n00:04:44.785 --> 00:04:46.660\nit could jump over to one of those.\n\n100\n00:04:46.660 --> 00:04:50.390\nI could just say, use datastores\nonly from the specified list, and\n\n101\n00:04:50.390 --> 00:04:53.550\nnow it is only gonna use storage02 and\nthat's it.\n\n102\n00:04:53.550 --> 00:04:55.431\nIt's not gonna use any others, all right.\n\n103\n00:04:55.431 --> 00:04:58.990\nSo we can pick,\nnotice this shared-iso-datastore?\n\n104\n00:04:58.990 --> 00:05:02.580\nThese bottom two are VMFS datastores,\nthe shared-iso-datastore, for\n\n105\n00:05:02.580 --> 00:05:04.350\nme, is an NFS datastore.\n\n106\n00:05:04.350 --> 00:05:06.940\nYou can use NFS for it.\n\n107\n00:05:06.940 --> 00:05:08.940\nIt's not necessarily recommended,\n\n108\n00:05:08.940 --> 00:05:12.260\ncuz NFS is gonna be hosted on\nsome other kind of server, right?\n\n109\n00:05:12.260 --> 00:05:15.090\nYou might a Linux box or something\nlike that that's running as NFS share.\n\n110\n00:05:15.090 --> 00:05:19.060\nAnd that box could have problems that\ndoesn't necessarily relate to the cluster\n\n111\n00:05:19.060 --> 00:05:22.100\nversus actual storage that\nwould relate to the cluster.\n\n112\n00:05:22.100 --> 00:05:25.680\nSo that's why I'm leaning towards\nthat VMFS storage, all right?\n\n113\n00:05:25.680 --> 00:05:27.220\nSo I'm gonna check that off.\n\n114\n00:05:27.220 --> 00:05:30.830\nNow down below, I can see hosts that\nare connected to the datastore, and\n\n115\n00:05:30.830 --> 00:05:32.180\nthat's really important.\n\n116\n00:05:32.180 --> 00:05:36.300\nBecause if I pick a datastore that\nnot all of my hosts are connected to,\n\n117\n00:05:36.300 --> 00:05:38.610\nit's not gonna work for a heartbeat.\n\n118\n00:05:38.610 --> 00:05:41.760\nAnd as long as I added the datastore\nafter the cluster was created,\n\n119\n00:05:41.760 --> 00:05:43.380\nthey should all be connected.\n\n120\n00:05:43.380 --> 00:05:46.270\nBut if this was a datastore that\nwas part of a host before it was\n\n121\n00:05:46.270 --> 00:05:49.000\nadded to the cluster,\nit might be the only one connected to it,\n\n122\n00:05:49.000 --> 00:05:50.900\nand it's not suitable for a heartbeat.\n\n123\n00:05:50.900 --> 00:05:52.290\nSo it's a good idea to\ndouble check that and\n\n124\n00:05:52.290 --> 00:05:54.200\njust make sure that all\nyour hosts can see it.\n\n125\n00:05:54.200 --> 00:05:57.630\nI see that my shared storage is\nvisible by both host01 and host02,\n\n126\n00:05:57.630 --> 00:05:59.060\nso that's a great one to pick.\n\n127\n00:06:00.930 --> 00:06:03.190\nAnd that's about it for that heartbeat.\n\n128\n00:06:03.190 --> 00:06:04.990\nAnd so now that one's taken care of.\n\n129\n00:06:04.990 --> 00:06:08.440\nSo now I'll have my network\nheartbeat that I always had, and\n\n130\n00:06:08.440 --> 00:06:10.350\nI'll have my datastore heartbeat.\n\n131\n00:06:10.350 --> 00:06:13.220\nAnd the datastore heartbeat's the one\nthat's really gonna win out, okay.\n\n132\n00:06:13.220 --> 00:06:17.020\nNow the datastore heartbeat's really\nimportant for another reason.\n\n133\n00:06:17.020 --> 00:06:21.000\nWhen a node fails, right, so\nlet's say I have a five-node cluster,\n\n134\n00:06:21.000 --> 00:06:25.590\na cluster with five hosts in it,\nand one host fails, the other\n\n135\n00:06:25.590 --> 00:06:29.820\nfour hosts need to know about it and then\nthey need to take some kind of action.\n\n136\n00:06:29.820 --> 00:06:30.650\nAnd by default,\n\n137\n00:06:30.650 --> 00:06:35.590\nthey actually can't take action unless\nthere's what's called quorum, all right.\n\n138\n00:06:35.590 --> 00:06:36.830\nQuorum is like a vote.\n\n139\n00:06:36.830 --> 00:06:39.470\nIt's a vote where the system votes to\nactually determine whether somebody's\n\n140\n00:06:39.470 --> 00:06:40.550\nactually down or not.\n\n141\n00:06:40.550 --> 00:06:44.510\nAnd in a two-node cluster,\nwe don't necessarily need quorum.\n\n142\n00:06:44.510 --> 00:06:48.150\nIf one host goes down,\nwe see they're down and we flip over.\n\n143\n00:06:48.150 --> 00:06:51.490\nBut the problem is there can\nbe a mistake sometimes, right.\n\n144\n00:06:51.490 --> 00:06:54.940\nSo for example, let's say that Wes\nhere is one node in my cluster and\n\n145\n00:06:54.940 --> 00:06:56.070\nI am another node in the cluster.\n\n146\n00:06:56.070 --> 00:07:02.210\nSo Wes and I are both in this cluster,\nand I think that Wes has gone offline.\n\n147\n00:07:02.210 --> 00:07:05.190\nI'm not seeing network heartbeats\nfrom Wes anymore, okay.\n\n148\n00:07:05.190 --> 00:07:07.140\nSo I'm like, shoot,\nWes isn't talking to me,\n\n149\n00:07:07.140 --> 00:07:10.320\nhe must be down so I need to take over.\n\n150\n00:07:10.320 --> 00:07:13.340\nAnd so I start grabbing storage and\nI start grabbing those VMs and\n\n151\n00:07:13.340 --> 00:07:13.909\nbooting them up.\n\n152\n00:07:14.980 --> 00:07:18.700\nBut what turns out to have happened\nis my network card was down.\n\n153\n00:07:18.700 --> 00:07:21.910\nMy network card was down so I couldn't\nsee Wes, but Wes was actually online.\n\n154\n00:07:21.910 --> 00:07:23.430\nHe was online and working just fine.\n\n155\n00:07:23.430 --> 00:07:26.350\nI can't see him, I'm the problem, right?\n\n156\n00:07:26.350 --> 00:07:28.190\nBut now I'm trying to grab those VMs.\n\n157\n00:07:28.190 --> 00:07:29.560\nHe's still using them.\n\n158\n00:07:29.560 --> 00:07:32.830\nNow we have two hosts accessing\nthe same VMs at the same time.\n\n159\n00:07:32.830 --> 00:07:34.010\nAnd what's gonna happen?\n\n160\n00:07:34.010 --> 00:07:35.040\nData corruption.\n\n161\n00:07:35.040 --> 00:07:36.950\nSo that's bad.\n\n162\n00:07:36.950 --> 00:07:37.650\nVMware knows that.\n\n163\n00:07:37.650 --> 00:07:39.490\nEvery cluster manufacturer knows it, but\n\n164\n00:07:39.490 --> 00:07:42.060\nwith VMware they handle it with\na simple solution which is a quorum.\n\n165\n00:07:42.060 --> 00:07:43.182\nThere has to be a vote.\n\n166\n00:07:43.182 --> 00:07:45.160\nThere has to be a majority vote.\n\n167\n00:07:45.160 --> 00:07:48.303\nA majority of the nodes have to vote and\nsay yes,\n\n168\n00:07:48.303 --> 00:07:50.986\nthat node is down before we take it over.\n\n169\n00:07:50.986 --> 00:07:52.729\nIf we can't get a majority vote,\n\n170\n00:07:52.729 --> 00:07:56.921\nthen you can't take over those VMs cuz\nyou don't know if they're in use or not.\n\n171\n00:07:56.921 --> 00:08:02.838\nSo in a two-node cluster, if Wes goes\noffline Do I know if it's just me or\n\n172\n00:08:02.838 --> 00:08:05.420\nif it's an actual outage?\n\n173\n00:08:05.420 --> 00:08:06.360\nNo.\n\n174\n00:08:06.360 --> 00:08:09.590\nAnd so in a two node cluster,\nyou won't fail over reliably.\n\n175\n00:08:09.590 --> 00:08:11.600\nTwo node clusters are just not effective.\n\n176\n00:08:11.600 --> 00:08:14.360\nIf I had a three note cluster,\nit'd be different, right?\n\n177\n00:08:14.360 --> 00:08:16.950\nSo if I had three nodes and\none node goes down,\n\n178\n00:08:16.950 --> 00:08:18.140\nI could still talk to the other node.\n\n179\n00:08:18.140 --> 00:08:20.650\nAnd I could say, hey,\nit looks like Wes is down.\n\n180\n00:08:20.650 --> 00:08:22.280\nHow about for you?\n\n181\n00:08:22.280 --> 00:08:25.080\nAnd the other node might say,\nno, I see Wes just fine.\n\n182\n00:08:25.080 --> 00:08:26.630\nHe's on, no big deal.\n\n183\n00:08:26.630 --> 00:08:28.490\nAnd I say, well I guess the problem's me.\n\n184\n00:08:28.490 --> 00:08:30.220\nLet me back off, right?\n\n185\n00:08:30.220 --> 00:08:32.210\nOr I ask the other node,\nhey, I think Wes is down.\n\n186\n00:08:32.210 --> 00:08:32.980\nWhat do you think?\n\n187\n00:08:32.980 --> 00:08:35.090\nAnd the other node says,\nyeah, I don't see Wes.\n\n188\n00:08:35.090 --> 00:08:36.730\nIt looks like he's offline.\n\n189\n00:08:36.730 --> 00:08:39.370\nAnd so now we can take action\nbecause we're both in agreement.\n\n190\n00:08:39.370 --> 00:08:43.610\nOkay, but if I've only got two nodes,\nhow can I effectively fail over?\n\n191\n00:08:43.610 --> 00:08:47.260\nWell, the data store\nserves are the third node.\n\n192\n00:08:47.260 --> 00:08:49.670\nIt serves as the tiebreaker, right?\n\n193\n00:08:49.670 --> 00:08:53.922\nSo by having a data store for my heart\nbeat, I can look at the data store.\n\n194\n00:08:53.922 --> 00:08:56.720\nAnd if I can't see the data store,\nI've got bigger problems, right?\n\n195\n00:08:56.720 --> 00:08:58.260\nMy node needs to be offline.\n\n196\n00:08:58.260 --> 00:09:02.090\nBut if I can see the data store and\nWes' heartbeat is not updating,\n\n197\n00:09:02.090 --> 00:09:05.021\nthen I might think Wes is offline\nfrom the network heartbeat.\n\n198\n00:09:05.021 --> 00:09:08.855\nAnd the data store thinks it's offline\ncuz the timestamp's not updating.\n\n199\n00:09:08.855 --> 00:09:11.335\nNow I've got two people, I've got quorum.\n\n200\n00:09:11.335 --> 00:09:12.595\nNow we can fail over.\n\n201\n00:09:12.595 --> 00:09:14.604\nSo in a two node cluster,\n\n202\n00:09:14.604 --> 00:09:20.075\nit's really important to have\na data store heartbeat, all right?\n\n203\n00:09:20.075 --> 00:09:22.765\nIf I have an odd number\nof hosts like three or\n\n204\n00:09:22.765 --> 00:09:27.465\nmore, then I can actually get by okay\nwith not having a data store heartbeat.\n\n205\n00:09:27.465 --> 00:09:29.280\nAnd that's why it's off by default.\n\n206\n00:09:29.280 --> 00:09:33.778\nBut if I have an even number of hosts or\nif I have just\n\n207\n00:09:33.778 --> 00:09:38.770\na two node cluster, in those scenarios\nI really need that data store.\n\n208\n00:09:38.770 --> 00:09:40.970\nAnd it's super easy to do,\nyou just check a little box, right?\n\n209\n00:09:40.970 --> 00:09:41.960\nSo you might as well turn that on.\n\n210\n00:09:41.960 --> 00:09:45.770\nI make a habit of turning it on all the\ntime because I might have an even number\n\n211\n00:09:45.770 --> 00:09:50.040\nof nodes today and a week from now an odd\nnumber as we add more hosts to it.\n\n212\n00:09:50.040 --> 00:09:51.830\nSo I don't like to keep up with that,\n\n213\n00:09:51.830 --> 00:09:54.250\neasier just to turn on\nthe data store heartbeat.\n\n214\n00:09:54.250 --> 00:09:56.420\nSo I've got the data store\nheartbeat turned on.\n\n215\n00:09:56.420 --> 00:09:59.580\nThe only other option on this\nscreen is advanced options.\n\n216\n00:09:59.580 --> 00:10:01.700\nAn di we scale that out,\nit's empty, right?\n\n217\n00:10:01.700 --> 00:10:06.350\nThere are advanced clustering options that\nyou can set where you put in a key and\n\n218\n00:10:06.350 --> 00:10:07.440\na value, right?\n\n219\n00:10:07.440 --> 00:10:10.790\nSo you can have various time out\nvalues that you can put in here.\n\n220\n00:10:10.790 --> 00:10:12.590\nAnd so you put the key in and the value.\n\n221\n00:10:12.590 --> 00:10:14.430\nVMware has them documented\non their website but\n\n222\n00:10:14.430 --> 00:10:16.120\nthere's not a lot that we\nhave to worry about here.\n\n223\n00:10:17.258 --> 00:10:19.190\nSo I'm gonna go and say okay to that and\n\n224\n00:10:19.190 --> 00:10:23.870\nat this stage now,\nI'm doing a data store heartbeat.\n\n225\n00:10:23.870 --> 00:10:26.730\nMy two nodes are able to see each other.\n\n226\n00:10:26.730 --> 00:10:28.810\nMy cluster should be working properly,\nright?\n\n227\n00:10:28.810 --> 00:10:30.320\nThat was kind of important.\n\n228\n00:10:30.320 --> 00:10:33.970\nThere is still a little bit more that I\nneed to do to get this really working.\n\n229\n00:10:33.970 --> 00:10:37.070\nBut technically it is working right now.\n\n230\n00:10:37.070 --> 00:10:38.850\nOkay, so what else?\n\n231\n00:10:38.850 --> 00:10:40.700\nWhat were the other little\nthings that I need to do?\n\n232\n00:10:40.700 --> 00:10:42.158\nWell the network adapters.\n\n233\n00:10:42.158 --> 00:10:44.690\nMy network adapters\nmight be a problem here.\n\n234\n00:10:44.690 --> 00:10:46.535\nMy hosts only have one\nnetwork adapter in them.\n\n235\n00:10:46.535 --> 00:10:50.920\nAnd in that, we've got a VM kernel\nadapter, which is my management and\n\n236\n00:10:50.920 --> 00:10:52.320\nthen we've got the port groups for\n\n237\n00:10:52.320 --> 00:10:55.380\nmy regular network access that\nare a part of my V switch.\n\n238\n00:10:55.380 --> 00:10:59.730\nWell, the management adapter is\ndesigned to handle management traffic.\n\n239\n00:10:59.730 --> 00:11:04.050\nThings like your heart beat is\nconsidered management traffic.\n\n240\n00:11:04.050 --> 00:11:08.067\nAnd things like VMotion, synchronizing RAM\nfor a VM to be able to move it from host\n\n241\n00:11:08.067 --> 00:11:10.540\nto host, that's considered part\nof the management network.\n\n242\n00:11:10.540 --> 00:11:13.830\nThe problem is they're normally\nturned off by default.\n\n243\n00:11:13.830 --> 00:11:15.420\nNow if you're in an existing\nVMWare environment,\n\n244\n00:11:15.420 --> 00:11:17.270\npeople have probably turned it on already.\n\n245\n00:11:17.270 --> 00:11:19.110\nBut if you're in a brand new install,\n\n246\n00:11:19.110 --> 00:11:20.960\nyou're likely gonna be missing\nsome of these settings.\n\n247\n00:11:20.960 --> 00:11:22.180\nSo let me show you where that is.\n\n248\n00:11:22.180 --> 00:11:25.687\nI'm gonna go into one of my hosts,\nso I'll just take esx host 01.\n\n249\n00:11:25.687 --> 00:11:29.100\nAnd I'm gonna go to manage and\n\n250\n00:11:29.100 --> 00:11:33.340\nnetworking and\nI'm gonna take a look at my adapters.\n\n251\n00:11:33.340 --> 00:11:35.614\nIf I go to v switches,\nI've only got one v switch, right?\n\n252\n00:11:35.614 --> 00:11:37.560\nSo I've got this v switch 0,\nyou might have more.\n\n253\n00:11:37.560 --> 00:11:42.770\nAnd when I look at the v switch, I've got\nthe VM network that's created by default.\n\n254\n00:11:42.770 --> 00:11:44.900\nThat's where my virtual\nmachines are plugged into and\n\n255\n00:11:44.900 --> 00:11:46.260\nhere's my management network.\n\n256\n00:11:46.260 --> 00:11:49.180\nAnd see how they're both tied\nto the same physical adapter?\n\n257\n00:11:49.180 --> 00:11:52.280\nIn your environment,\nyou may have multiple adapters.\n\n258\n00:11:52.280 --> 00:11:55.660\nAnd so your management traffic might\nbe tied to one physical adapter and\n\n259\n00:11:55.660 --> 00:11:58.350\nyour VM is tied to another two or\nthree that are bonded together, right?\n\n260\n00:11:58.350 --> 00:12:00.650\nIt's up to you to configure\nthat the way that you want it.\n\n261\n00:12:00.650 --> 00:12:02.640\nBut in my case,\nthey're all kinda tied together.\n\n262\n00:12:02.640 --> 00:12:05.650\nSo this management network is kind\nof important cuz that's how I manage\n\n263\n00:12:05.650 --> 00:12:07.000\nthis host.\n\n264\n00:12:07.000 --> 00:12:09.400\nAnd it's tied to a VMKernal adapter, VMK0.\n\n265\n00:12:09.400 --> 00:12:14.920\nAnd if I go to my VMKernal adapters here,\nthere's VMK0.\n\n266\n00:12:14.920 --> 00:12:17.070\nAnd if I take that adapter and\n\n267\n00:12:17.070 --> 00:12:21.760\nedit its settings, I can see what\nservices are turned on for that adapter.\n\n268\n00:12:21.760 --> 00:12:24.960\nAnd by default,\nit's management traffic and that's it.\n\n269\n00:12:24.960 --> 00:12:26.620\nWell look at what else is in here.\n\n270\n00:12:26.620 --> 00:12:31.490\nWe've got vMotion traffic,\nvSphere replication, fault tolerance,\n\n271\n00:12:31.490 --> 00:12:33.750\nprovisioning, virtual SAN traffic.\n\n272\n00:12:33.750 --> 00:12:37.500\nThese are other things that can\nuse the management adapter.\n\n273\n00:12:37.500 --> 00:12:39.880\nNow the network heartbeat, that's gonna\nuse management traffic, that's fine.\n\n274\n00:12:39.880 --> 00:12:41.370\nThat one's already taken care of.\n\n275\n00:12:41.370 --> 00:12:45.930\nBut if I want vMotion,\nif I want to be able to take a live VM and\n\n276\n00:12:45.930 --> 00:12:51.280\nmove it from one physical host to another,\nwhich is part of what HA tries to do.\n\n277\n00:12:51.280 --> 00:12:54.110\nIf the VM can be salvaged,\nit's going to try and salvage it.\n\n278\n00:12:54.110 --> 00:12:55.170\nI need vMotion.\n\n279\n00:12:55.170 --> 00:12:59.193\nI need at least one VM kernel adapter\nwith vMotion turned on, okay?\n\n280\n00:12:59.193 --> 00:13:01.243\nSo I could create a dedicated\nVM kernel adapter,\n\n281\n00:13:01.243 --> 00:13:03.493\nI could have a dedicated\nphysical interface for it and\n\n282\n00:13:03.493 --> 00:13:06.910\nthat's a great solution because it'll\nget you the fastest fail over possible.\n\n283\n00:13:08.280 --> 00:13:10.420\nOr I could piggy back off of this one.\n\n284\n00:13:10.420 --> 00:13:13.780\nThat's not as great because now we're\ncontending for bandwidth in other places.\n\n285\n00:13:13.780 --> 00:13:15.990\nBut since I only have one,\nI don't really have a lot of choice.\n\n286\n00:13:15.990 --> 00:13:18.230\nSo I'm going to turn on vMotion, okay?\n\n287\n00:13:18.230 --> 00:13:21.225\nAnd they're already complaining at me\nbecause I don't have redundant management\n\n288\n00:13:21.225 --> 00:13:21.960\nadapters.\n\n289\n00:13:21.960 --> 00:13:23.920\nSo this is gonna create\na sub-optimal solution.\n\n290\n00:13:23.920 --> 00:13:27.740\nBut in production,\nif you have redundant adapters for\n\n291\n00:13:27.740 --> 00:13:32.100\nthe management interface and\na dedicated adapter for vMotion and\n\n292\n00:13:32.100 --> 00:13:36.140\ndedicated adapters for storage or for\nyour VMs, that's your best solution.\n\n293\n00:13:36.140 --> 00:13:39.870\nSo when you buy a server those quad port\nnetwork adapters, those things work great.\n\n294\n00:13:39.870 --> 00:13:42.585\nYou can get two of them and\nnow you got eight adapters and\n\n295\n00:13:42.585 --> 00:13:45.216\nyou can really maximize your\nredundancy and availability.\n\n296\n00:13:45.216 --> 00:13:48.520\nSo I'm gonna turn that on to make vMotion\nwork, that's kind of an important thing.\n\n297\n00:13:48.520 --> 00:13:51.650\nAll right, so that's going to apply.\n\n298\n00:13:51.650 --> 00:13:54.210\nAlways remember that if you mess\nwith your VM kernel adapter,\n\n299\n00:13:54.210 --> 00:13:57.490\nyou could potentially lock yourself out\nof the system, so be aware of that.\n\n300\n00:13:57.490 --> 00:13:59.450\nThat's the interface\nyou're managing it on.\n\n301\n00:13:59.450 --> 00:14:03.400\nSo make sure you go physical access to\nthe box if you make a change like that.\n\n302\n00:14:03.400 --> 00:14:06.390\nSo now that's set, like everything,\nwe need to verify it's actually working.\n\n303\n00:14:06.390 --> 00:14:07.690\nHow do I know the heartbeats are running?\n\n304\n00:14:07.690 --> 00:14:09.940\nAnd there are a few different\nways that we can see it.\n\n305\n00:14:09.940 --> 00:14:13.640\nSo you're right back here on the same\nscreen I'm on, we can scroll down and just\n\n306\n00:14:13.640 --> 00:14:17.350\nverify our settings right here where I've\ngot that data store for heart beating.\n\n307\n00:14:17.350 --> 00:14:21.276\nAnd if I expand that out,\nI can see that it's set, whoops, [SOUND].\n\n308\n00:14:21.276 --> 00:14:22.980\n[LAUGH] I'm going scroll crazy.\n\n309\n00:14:22.980 --> 00:14:25.660\nSo if I can get my\nscrolling under control,\n\n310\n00:14:25.660 --> 00:14:28.750\nI can see where it's set to use data\nstorage only from the specified list.\n\n311\n00:14:28.750 --> 00:14:32.320\nAnd I picked lab-storage02, right?\n\n312\n00:14:32.320 --> 00:14:35.150\nSo I know my configuration is there,\nso that's good.\n\n313\n00:14:35.150 --> 00:14:38.405\nNow, well,\nI've still got warnings on my servers.\n\n314\n00:14:38.405 --> 00:14:42.670\nAnd I had warnings before because I\ndidn't have a data store heartbeat and\n\n315\n00:14:42.670 --> 00:14:44.560\nI didn't have a redundant\nmanagement adapter.\n\n316\n00:14:44.560 --> 00:14:47.820\nI didn't fix the redundant management\nadapter, so I expect to have that.\n\n317\n00:14:47.820 --> 00:14:51.010\nBut let's go see if the data\nstore warning went away.\n\n318\n00:14:51.010 --> 00:14:54.440\nSo I'm gonna jump over to\nthe summary tab and I still have it.\n\n319\n00:14:54.440 --> 00:14:57.800\nI've got the number of VSphere HA\nheartbeat data stores for the host is 1,\n\n320\n00:14:57.800 --> 00:14:59.370\nwhich is less than the required 2.\n\n321\n00:14:59.370 --> 00:15:02.880\nIt wants two heartbeat data stores for\nthis.\n\n322\n00:15:02.880 --> 00:15:04.110\nAll right, why?\n\n323\n00:15:04.110 --> 00:15:09.390\nThe main reason it wants two,\nis because if I have one node fail,\n\n324\n00:15:09.390 --> 00:15:14.250\nI'm left with one online node and\none data store, which is an even number.\n\n325\n00:15:14.250 --> 00:15:18.060\nAnd if I have an even number, we could get\na tie vote on whether that node is down.\n\n326\n00:15:18.060 --> 00:15:21.020\nAnd so it's asking me to create another\none, so I have basically three.\n\n327\n00:15:21.020 --> 00:15:24.110\nSo if a node fails, I would still have\nthree votes, which is an odd number,\n\n328\n00:15:24.110 --> 00:15:25.490\nyou've got a tiebreaker, right?\n\n329\n00:15:25.490 --> 00:15:26.890\nSo that's why it's complaining there.\n\n330\n00:15:26.890 --> 00:15:28.740\nBut that does mean that\nmy heartbeat is working.\n\n331\n00:15:28.740 --> 00:15:29.840\nI just don't have enough.\n\n332\n00:15:29.840 --> 00:15:33.200\nAnd I've got another data store we could\nturn on if I really wanted to go crazy.\n\n333\n00:15:33.200 --> 00:15:35.460\nAnd then we could solve that too.\n\n334\n00:15:35.460 --> 00:15:37.330\nBut it does tell me that\nat least one is working.\n\n335\n00:15:37.330 --> 00:15:39.510\nSo I go and\nsee that the heartbeat is running.\n\n336\n00:15:39.510 --> 00:15:41.140\nIf I wanna see the heartbeat,\n\n337\n00:15:41.140 --> 00:15:43.450\nthey're just little files that\nare created in the data store.\n\n338\n00:15:43.450 --> 00:15:46.620\nSo I can jump into, actually before\nI jump into that, let me go ahead and\n\n339\n00:15:46.620 --> 00:15:49.770\nturn on the second data store and we'll\nget that set, so it's at least happy and\n\n340\n00:15:49.770 --> 00:15:51.210\nit'll stop whining at me.\n\n341\n00:15:51.210 --> 00:15:54.841\nSo, I'm gonna go back into my cluster,\nManage and Settings,\n\n342\n00:15:54.841 --> 00:15:57.865\nI'm gonna go to vSphere HA and\nedit those settings.\n\n343\n00:15:57.865 --> 00:16:00.095\nAnd I manually added data store two, so\n\n344\n00:16:00.095 --> 00:16:03.350\nI'm just gonna manually add\ndata store one to that list.\n\n345\n00:16:03.350 --> 00:16:04.564\nSince I've got that one sitting here.\n\n346\n00:16:04.564 --> 00:16:07.298\nSo here's itprotv-lab-storage02.\n\n347\n00:16:07.298 --> 00:16:09.030\nI'm just going to check\noff itprotv-lab-storage01.\n\n348\n00:16:09.030 --> 00:16:12.363\nSo now I know those two are going\nto be my heartbeat data stores.\n\n349\n00:16:12.363 --> 00:16:16.270\nAnd I'll go ahead and\nconfirm that and get that in place.\n\n350\n00:16:16.270 --> 00:16:17.430\nOkay.\nNow I'm not going to wait for that.\n\n351\n00:16:17.430 --> 00:16:19.700\nI'm going to jump over and\ntake a look at the other data store.\n\n352\n00:16:19.700 --> 00:16:23.210\nIf we switch over to our datastore review,\nand I'm gonna take a look\n\n353\n00:16:23.210 --> 00:16:26.750\nat itprotv-lab-storage02,\ncuz that's the first one I configured.\n\n354\n00:16:26.750 --> 00:16:29.980\nThat one's already being used for\na heartbeat, so I know it's already done.\n\n355\n00:16:29.980 --> 00:16:34.300\nI'm gonna choose the data store and\nthen when we look at the data store,\n\n356\n00:16:34.300 --> 00:16:36.530\nit's gonna take a second while\nit configures that cluster.\n\n357\n00:16:36.530 --> 00:16:37.440\nThere we go.\n\n358\n00:16:37.440 --> 00:16:39.050\nWe can go to manage and\n\n359\n00:16:39.050 --> 00:16:41.910\nthen we can go to files and\nfiles will let us browse in and see.\n\n360\n00:16:41.910 --> 00:16:44.850\nWe can also see right here,\nconnectivity and multipathing.\n\n361\n00:16:44.850 --> 00:16:47.774\nYou can verify that all of your nodes\nare connected to that data store.\n\n362\n00:16:47.774 --> 00:16:49.709\nI see it, they are both mounted and\nconnected right so\n\n363\n00:16:49.709 --> 00:16:51.480\nthey're happy and healthy.\n\n364\n00:16:51.480 --> 00:16:54.030\nBut if I go to files,\nI'm going to see what's in the data store.\n\n365\n00:16:54.030 --> 00:16:57.290\nNow when you look in a data store\nyou expect to see virtual machines.\n\n366\n00:16:57.290 --> 00:16:59.770\nSo you'll have a folder for\neach virtual machine.\n\n367\n00:16:59.770 --> 00:17:03.840\nAnd you expect to see .sdd and\n.naa folders.\n\n368\n00:17:03.840 --> 00:17:06.070\nThose are folders that\nare identifying the hardware.\n\n369\n00:17:06.070 --> 00:17:09.080\nThat way if this is like an eye scuzzy,\nwhich is what mine is.\n\n370\n00:17:09.080 --> 00:17:12.944\nOr if it's a fiber channel scan If I move\nit from one port to another VMware will\n\n371\n00:17:12.944 --> 00:17:16.580\nstill recognize that that's the same\nstorage just on a different port.\n\n372\n00:17:16.580 --> 00:17:18.600\nThat's why it puts these files in there.\n\n373\n00:17:18.600 --> 00:17:21.750\nAnd there's not really much inside of\nthem if you were to browse inside and\n\n374\n00:17:21.750 --> 00:17:22.700\nlook around.\n\n375\n00:17:22.700 --> 00:17:24.230\nThey're mostly empty.\n\n376\n00:17:24.230 --> 00:17:27.390\nThis one has a slots file,\nthis one I think is empty.\n\n377\n00:17:27.390 --> 00:17:28.070\nAnd yeah.\n\n378\n00:17:28.070 --> 00:17:31.010\nThis one is empty so they're just\nhelping us to identify that storage and\n\n379\n00:17:31.010 --> 00:17:36.120\nrecognize what it is but this is\nthe folder I care about, .vShere-HA.\n\n380\n00:17:36.120 --> 00:17:39.090\nIt's created a high\navailability folder and\n\n381\n00:17:39.090 --> 00:17:44.590\ninside of it what you're going to find is\nthe heart beat which is this FDM folder.\n\n382\n00:17:44.590 --> 00:17:49.970\nAnd in the FDM folder you'll find two\nfiles for every host in your cluster.\n\n383\n00:17:49.970 --> 00:17:53.150\nOne, that'll be the host\nnumber dash poweron.\n\n384\n00:17:54.190 --> 00:17:56.338\nIt doesn't give you the name\nwhich kind of stinks, so\n\n385\n00:17:56.338 --> 00:18:00.090\nI don't know if that's host 01 or host 02,\nthey're ordered by how I've created them.\n\n386\n00:18:00.090 --> 00:18:03.663\nApparently I've added 33 different\nhosts to this vCenter environment,\n\n387\n00:18:03.663 --> 00:18:06.900\nwhich is kind of impressive\nwhen you think about it.\n\n388\n00:18:06.900 --> 00:18:07.620\nBut I've got a poweron,\n\n389\n00:18:07.620 --> 00:18:12.370\nand so I can look at the poweron to\nfigure out when that unit was turned on.\n\n390\n00:18:12.370 --> 00:18:13.200\nWhen you come over here and\n\n391\n00:18:13.200 --> 00:18:17.310\nlook at the time stamp for that file\nIt should show when it was turned on.\n\n392\n00:18:17.310 --> 00:18:20.437\nSo this host was turned\non June 2nd at 6:22 PM,\n\n393\n00:18:20.437 --> 00:18:23.872\nthis other host was powered\non June 3rd at 4:32 AM.\n\n394\n00:18:23.872 --> 00:18:26.380\nSo that's when those were powered on.\n\n395\n00:18:26.380 --> 00:18:30.170\nThen I see another one\nwhich is the heartbeat and\n\n396\n00:18:30.170 --> 00:18:34.500\nthe heartbeat is letting me know when\nwas the last time I've heard from it.\n\n397\n00:18:34.500 --> 00:18:38.280\nAnd so that's is going to start to\nupdating and showing me what's going on.\n\n398\n00:18:38.280 --> 00:18:42.358\nAnd as I look at it, actually mine\nare matching my power on value so\n\n399\n00:18:42.358 --> 00:18:46.365\nthat's not terribly exciting there but\nit's being updated and\n\n400\n00:18:46.365 --> 00:18:49.428\nit's showing that time and\nwhat I expect to see.\n\n401\n00:18:49.428 --> 00:18:53.712\nYou know what I'm not seeing here is that\nthose hb files should have about the same\n\n402\n00:18:53.712 --> 00:18:57.530\nmodified time cuz I should be\ngetting that heartbeat on them.\n\n403\n00:18:57.530 --> 00:18:59.930\nBut these files are just little\ntext files that get created,\n\n404\n00:18:59.930 --> 00:19:01.130\nthey get stored it there.\n\n405\n00:19:01.130 --> 00:19:02.500\nOne to show when the system's powered on.\n\n406\n00:19:02.500 --> 00:19:04.570\nAnd one to show that current heartbeat.\n\n407\n00:19:04.570 --> 00:19:07.230\nAnd you can copy or move the files.\n\n408\n00:19:07.230 --> 00:19:09.746\nYou don't want to move them,\nthey just get recreated.\n\n409\n00:19:09.746 --> 00:19:12.797\nBut if you were to download that file and\nsave it somewhere else and\n\n410\n00:19:12.797 --> 00:19:16.080\nopen it up, it's just a little text\nfile with a little ID number in it.\n\n411\n00:19:16.080 --> 00:19:17.970\nThere's not too much to see on there.\n\n412\n00:19:17.970 --> 00:19:20.310\nBut that's heartbeat file\nthat's being created.\n\n413\n00:19:20.310 --> 00:19:22.860\nAnd since I have data stores involved now,\nI should be able to jump over and\n\n414\n00:19:22.860 --> 00:19:28.040\ncheck the other data store and\nit's got a vSphere-HA folder also.\n\n415\n00:19:28.040 --> 00:19:31.159\nIt's got WEBxx for\nmy web template and WEB01 for\n\n416\n00:19:31.159 --> 00:19:35.848\nmy web server, but it's got that\nvSphere-HA folder and FDM inside of it.\n\n417\n00:19:35.848 --> 00:19:39.420\nAnd assuming that it's active,\nI should see, there they are.\n\n418\n00:19:39.420 --> 00:19:40.290\nThe same thing.\n\n419\n00:19:40.290 --> 00:19:44.300\nI've got power on files and\nI've got heartbeat files identifying,\n\n420\n00:19:44.300 --> 00:19:46.910\nthose machines are up and\nrunning and that they're healthy.\n\n421\n00:19:46.910 --> 00:19:50.150\nAnd if those files stop getting updated,\nI know that machine's offline, right?\n\n422\n00:19:50.150 --> 00:19:53.960\nThat's my easy vote, it doesn't take\nanother cluster node to give a vote.\n\n423\n00:19:53.960 --> 00:19:56.260\nWe can get a vote right here from\nthe time stamps in these files.\n\n424\n00:19:56.260 --> 00:19:58.480\nSo pretty cut and dry.\n\n425\n00:19:58.480 --> 00:19:59.970\nThat's how we get those up and going.\n\n426\n00:19:59.970 --> 00:20:03.290\nSo at this point, my cluster should\nbe healthy with the exception\n\n427\n00:20:03.290 --> 00:20:05.370\nof the management adaptor and yeah.\n\n428\n00:20:05.370 --> 00:20:07.220\nThat's the only warning I have now.\n\n429\n00:20:07.220 --> 00:20:10.320\nMy host currently has no\nmanagement network redundancy.\n\n430\n00:20:10.320 --> 00:20:12.910\nSo I need to add a second VM\nkernel adapter for management and\n\n431\n00:20:12.910 --> 00:20:14.700\nthen I'll have that redundancy.\n\n432\n00:20:14.700 --> 00:20:16.710\n>> All right Don well you\nknow I appreciate it.\n\n433\n00:20:16.710 --> 00:20:19.240\nI know it's been quite\na few episodes on this one.\n\n434\n00:20:19.240 --> 00:20:20.030\nWe're in what?\n\n435\n00:20:20.030 --> 00:20:21.370\nPart three here so.\n>> Part three.\n\n436\n00:20:21.370 --> 00:20:21.966\n>> Go back and\n\n437\n00:20:21.966 --> 00:20:26.345\ncheck the first couple of part if anything\nwe're saying here sounds foreign.\n\n438\n00:20:26.345 --> 00:20:29.140\n>> [LAUGH]\n>> I know you are running to the end of\n\n439\n00:20:29.140 --> 00:20:32.459\nthis episode Don, but any final words\non things like high availability and\n\n440\n00:20:32.459 --> 00:20:33.422\nclustering?\n\n441\n00:20:33.422 --> 00:20:36.110\n>> All right, well we just spent\na lot of time on HA and HA's great,\n\n442\n00:20:36.110 --> 00:20:37.400\nit does it's job.\n\n443\n00:20:37.400 --> 00:20:40.820\nBut there are other things that\nwe might want to implement also.\n\n444\n00:20:40.820 --> 00:20:44.470\nAnd so in our upcoming episodes we're\ngonna cover the distributive resource\n\n445\n00:20:44.470 --> 00:20:45.970\nscheduler, DRS.\n\n446\n00:20:45.970 --> 00:20:49.980\nAnd DRS gets tied in with this cluster\ntoo which is a pretty important thing.\n\n447\n00:20:49.980 --> 00:20:52.080\nBecause it's gonna do load\nbalancing based on performance.\n\n448\n00:20:52.080 --> 00:20:55.500\nIt's gonna move our VMs around for us.\n\n449\n00:20:55.500 --> 00:20:57.520\nRight now, our cluster,\nthe way it's setup,\n\n450\n00:20:57.520 --> 00:20:58.880\nwe're gonna be dealing with Affinity.\n\n451\n00:20:58.880 --> 00:21:01.560\nLet me just show you this real quick and\nthen we'll wrap the episode.\n\n452\n00:21:01.560 --> 00:21:04.930\nIf I go to create a new virtual machine,\nwhen I go to create one in this cluster,\n\n453\n00:21:04.930 --> 00:21:07.480\nI'll just right click on the cluster,\ndo a New Virtual Machine,\n\n454\n00:21:07.480 --> 00:21:09.640\nand go to whip one up.\n\n455\n00:21:09.640 --> 00:21:13.730\nAnd I'll just create it from scratch and\nit's going to ask me where to put it.\n\n456\n00:21:13.730 --> 00:21:14.390\nRight?\n\n457\n00:21:14.390 --> 00:21:17.615\nSo I'm going to come in here and\ngive it a name, maybe this is web-02.\n\n458\n00:21:17.615 --> 00:21:20.030\nRight, then I'm gonna pick my data center.\n\n459\n00:21:20.030 --> 00:21:22.110\nAnd then it's going to ask for\na compute resource.\n\n460\n00:21:22.110 --> 00:21:24.240\nIn other words what server\nis this gonna run on.\n\n461\n00:21:24.240 --> 00:21:26.070\nWell, normally I'd pick the cluster.\n\n462\n00:21:26.070 --> 00:21:28.950\nI don't care what server it runs\non just stick on the cluster.\n\n463\n00:21:28.950 --> 00:21:31.080\nBut see how it won't let\nme pick the cluster?\n\n464\n00:21:31.080 --> 00:21:34.130\nThe selected cluster is not in DRS mode.\n\n465\n00:21:34.130 --> 00:21:37.110\nSo you have to pick a specific host.\n\n466\n00:21:37.110 --> 00:21:39.629\nI have to tie my virtual\nmachines to a host.\n\n467\n00:21:40.670 --> 00:21:41.990\nIf that host fails, I can move it.\n\n468\n00:21:41.990 --> 00:21:44.490\nI can move the vm with v motion myself but\n\n469\n00:21:44.490 --> 00:21:47.390\nit's not going to automatically move\nunless that host actually fails.\n\n470\n00:21:47.390 --> 00:21:49.190\nDRS will take care of that so\n\n471\n00:21:49.190 --> 00:21:53.660\nas it stands when I create the VM, I have\nto pick who it's going to be tied to.\n\n472\n00:21:53.660 --> 00:21:57.070\nSo I can tie it to Host01 or\nHost02 and move forward.\n\n473\n00:21:57.070 --> 00:21:58.120\nI can still fail it over.\n\n474\n00:21:58.120 --> 00:22:01.520\nIt's not like bound to that one\nmachine and one machine only.\n\n475\n00:22:01.520 --> 00:22:03.780\nBut it's a little bit of a manual\nprocess now to fail it over.\n\n476\n00:22:03.780 --> 00:22:08.270\nSo DRS is important and we're normally\ngoing to use DRS hand in hand with HA.\n\n477\n00:22:08.270 --> 00:22:11.420\nSo that's going to be our next step and\nwe'll see that episode coming up.\n\n478\n00:22:11.420 --> 00:22:13.781\n>> All right Don, well thank you as\nalways for being here with us and\n\n479\n00:22:13.781 --> 00:22:15.330\nthank you to you the viewer for watching.\n\n480\n00:22:15.330 --> 00:22:16.635\nSigning out for ITProTV.\n\n481\n00:22:16.635 --> 00:22:18.330\nI've been your host Wes Bryan.\n\n482\n00:22:18.330 --> 00:22:18.954\n>> And I'm Don Pezet.\n\n483\n00:22:18.954 --> 00:22:21.307\n>> And we'll see you next time.\n\n484\n00:22:21.307 --> 00:22:29.360\n[MUSIC]\n\n",
          "vimeoId": "170160749"
        },
        {
          "description": "In this episode, Wes and Don dive into the world of fault tolerance. They take a look at the Distributed Resources Schedule and setting up resources scheduling.",
          "length": "1978",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-2-1-fault_tolerance_and_drs-060916-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-2-1-fault_tolerance_and_drs-060916-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-2-1-fault_tolerance_and_drs-060916-1-sm.jpg",
          "title": "Fault Tolerance and DRS",
          "transcript": "WEBVTT\n\n1\n00:00:00.075 --> 00:00:10.075\n[MUSIC]\n\n2\n00:00:11.578 --> 00:00:15.483\nWelcome back to another exciting episode\nhere in ITproTV, I'm your host Wes-Bryan\n\n3\n00:00:15.483 --> 00:00:18.920\nand in today's episode,\nwe're coming back at you with more VMware.\n\n4\n00:00:18.920 --> 00:00:21.150\nThat's right,\nVMware certified professional version 6.\n\n5\n00:00:21.150 --> 00:00:23.970\nAnd we've been looking at\nmanaging availability.\n\n6\n00:00:23.970 --> 00:00:27.030\nJoining me in the studios today again\nis none other than Mr. Don Pezet.\n\n7\n00:00:27.030 --> 00:00:28.190\nDon, how you doing, sir?\n\n8\n00:00:28.190 --> 00:00:29.220\n>> I'm doing just well, Wes.\n\n9\n00:00:29.220 --> 00:00:32.840\nAre we ready to continue our journey\ninto keeping our stuff online,\n\n10\n00:00:32.840 --> 00:00:34.160\neven when it fails.\n\n11\n00:00:34.160 --> 00:00:37.293\nIn our last couple of episodes,\nwe've had the chance to see vSphere HA,\n\n12\n00:00:37.293 --> 00:00:40.310\nhigh availability, but in this episode,\nwe're gonna switch gears a little bit and\n\n13\n00:00:40.310 --> 00:00:44.780\nwe're gonna take a look at fault tolerance\nor FT and we're going to look at DRS,\n\n14\n00:00:44.780 --> 00:00:46.110\nthe distributor resource scheduler.\n\n15\n00:00:46.110 --> 00:00:49.580\nI know I've mentioned DRS several\ntimes in the previous episodes.\n\n16\n00:00:49.580 --> 00:00:53.230\nYou've never actually used it,\nnow is the time, all right.\n\n17\n00:00:53.230 --> 00:00:56.783\nI do, however, want to start with fault\ntolerance first, mostly cuz it's easy and\n\n18\n00:00:56.783 --> 00:00:57.396\nit's quick.\n\n19\n00:00:57.396 --> 00:01:01.539\nBut [LAUGH] because it is on the exam,\nit's something we need to know about and\n\n20\n00:01:01.539 --> 00:01:04.740\nit does address something that\nwe saw in our last episode.\n\n21\n00:01:04.740 --> 00:01:07.320\nSo if you watched our high\navailability episodes,\n\n22\n00:01:07.320 --> 00:01:11.430\nwhen we were setting up vSphere HA,\nthere was an option in there for\n\n23\n00:01:11.430 --> 00:01:14.590\nhow we could detect whether our\nvirtual machines were healthy or not.\n\n24\n00:01:14.590 --> 00:01:19.810\nIt asked us if we wanted to turn on\nvirtual machine component protection,\n\n25\n00:01:19.810 --> 00:01:21.020\nVMCP.\n\n26\n00:01:21.020 --> 00:01:25.410\nAnd that let the cluster\nlook into the VMs and\n\n27\n00:01:25.410 --> 00:01:27.820\nsee If they lost their\nnetwork connectivity or\n\n28\n00:01:27.820 --> 00:01:30.570\nthey lost their storage connectivity,\nthey knew there was a problem.\n\n29\n00:01:30.570 --> 00:01:33.360\nEven though the virtual machine\nmight be online and look healthy,\n\n30\n00:01:33.360 --> 00:01:36.170\nwe might even be getting heartbeats\nfrom it from through the VM tool, but\n\n31\n00:01:36.170 --> 00:01:37.420\nit's not actually healthy.\n\n32\n00:01:37.420 --> 00:01:39.050\nVMCP let's us see that.\n\n33\n00:01:39.050 --> 00:01:42.610\nThe reason I bring that up\nnow is that fault tolerance.\n\n34\n00:01:42.610 --> 00:01:46.110\nWhat I'm about to talk about\nis not compatible with VMCP.\n\n35\n00:01:46.110 --> 00:01:51.200\nSo if I turn on the FT functions,\nit disables VMCP automatically,\n\n36\n00:01:51.200 --> 00:01:54.730\nit does it for you, so if you forget and\nyou turn them both on, FT wins.\n\n37\n00:01:56.010 --> 00:01:57.960\nRemember that, cuz that's kind of\na good exam question right there.\n\n38\n00:01:57.960 --> 00:01:59.045\nWhich one takes precedence?\n\n39\n00:01:59.045 --> 00:01:59.972\nIt's FT.\n\n40\n00:01:59.972 --> 00:02:02.410\nWhat is FT?\n\n41\n00:02:02.410 --> 00:02:04.370\nWhat is fault tolerance and\nwhy is that important to us?\n\n42\n00:02:04.370 --> 00:02:08.080\nWell, what fault tolerance does is\nsomething a little bit different than HA.\n\n43\n00:02:08.080 --> 00:02:13.360\nWith HA, I can have a virtual machine\nup and running on one host and\n\n44\n00:02:13.360 --> 00:02:18.680\nif it were to fail, another host\nthat's connected to the same storage\n\n45\n00:02:18.680 --> 00:02:22.430\ncould grab the control of those hard\ndrives and boot that virtual machine and\n\n46\n00:02:22.430 --> 00:02:23.950\nhave it up and running, right?\n\n47\n00:02:23.950 --> 00:02:28.270\nSo, I have two hosts that\nsee the same storage and\n\n48\n00:02:28.270 --> 00:02:30.880\nthey're both able to boot the same VM,\nonly one at a time.\n\n49\n00:02:30.880 --> 00:02:32.850\nThat's how HA works.\n\n50\n00:02:32.850 --> 00:02:35.690\nFault tolerance does\nit a little different.\n\n51\n00:02:35.690 --> 00:02:38.590\nFault tolerance doesn't actually\nrequire shared storage.\n\n52\n00:02:38.590 --> 00:02:44.610\nWith fault tolerance, I can have a VM\nrunning in one data store on one host,\n\n53\n00:02:44.610 --> 00:02:49.685\nand I can fail it over to a host in\na completely different location,\n\n54\n00:02:49.685 --> 00:02:51.340\nin a completely different data center.\n\n55\n00:02:51.340 --> 00:02:55.020\nMaybe I have a disaster recovery location\nsomewhere else in another geographic\n\n56\n00:02:55.020 --> 00:02:55.940\nlocation.\n\n57\n00:02:55.940 --> 00:02:57.240\nAnd I can fail over to that.\n\n58\n00:02:57.240 --> 00:03:01.990\nWell, let's say that I've got my main\ndata center in Orlando, Florida.\n\n59\n00:03:01.990 --> 00:03:05.530\nAnd I've got a backup\ndata center in New York.\n\n60\n00:03:05.530 --> 00:03:09.350\nAnd, I want to fail over from\nFlorida to New York, right?\n\n61\n00:03:09.350 --> 00:03:11.210\nSo I wanna set that kind of thing up.\n\n62\n00:03:11.210 --> 00:03:15.090\nWell, I can't really get\na host in New York and\n\n63\n00:03:15.090 --> 00:03:17.620\nrun Fiber and\nplug into a SAN down in Orlando.\n\n64\n00:03:17.620 --> 00:03:22.080\nAnd I wouldn't want to even if I could\nbecause if the Orlando data center fails,\n\n65\n00:03:22.080 --> 00:03:23.660\nI'd probably lose that SAN.\n\n66\n00:03:23.660 --> 00:03:26.270\nSo I don't just need to be able\nto flip the VM from host to host,\n\n67\n00:03:26.270 --> 00:03:28.970\nI need to be able to flip\nto an entirely new SAN.\n\n68\n00:03:28.970 --> 00:03:30.940\nAnd vShpere HA doesn't let us do that.\n\n69\n00:03:30.940 --> 00:03:31.820\nIt doesn't have the functionality.\n\n70\n00:03:31.820 --> 00:03:35.370\nYou need your host to see the same storage\nand the storage needs to be reliable for\n\n71\n00:03:35.370 --> 00:03:36.910\nHA to work.\n\n72\n00:03:36.910 --> 00:03:37.860\nWith fault tolerance,\n\n73\n00:03:37.860 --> 00:03:41.990\nwhat it does is it says all right you can\nhave the VM down there in Orlando and\n\n74\n00:03:41.990 --> 00:03:45.330\nit can running on a server, it can be on a\nSAN, everything's running and it's happy.\n\n75\n00:03:45.330 --> 00:03:48.414\nAnd I'm going to clone that VM.\n\n76\n00:03:48.414 --> 00:03:53.130\nI'm going to create a clone of the virtual\nmachine, and store it up in New York.\n\n77\n00:03:53.130 --> 00:03:54.670\nAnd I'm going to keep it synchronized.\n\n78\n00:03:54.670 --> 00:03:56.590\nAs changes occur to the one in Orlando,\n\n79\n00:03:56.590 --> 00:03:58.530\nI'm going to synchronize\nthose changes up to New York.\n\n80\n00:03:58.530 --> 00:04:00.595\nBut the one in New York is just\ngoing to sit there idle, okay?\n\n81\n00:04:00.595 --> 00:04:02.707\nBut it's on a different SAN,\nit's on a different host,\n\n82\n00:04:02.707 --> 00:04:03.990\nit's in a different data center.\n\n83\n00:04:03.990 --> 00:04:05.850\nCompletely separate environment.\n\n84\n00:04:05.850 --> 00:04:10.550\nAnd if something happens\nto the Orlando Data Center.\n\n85\n00:04:10.550 --> 00:04:14.670\nIf that node goes down,\nwe can just spin up the VM up in New York.\n\n86\n00:04:14.670 --> 00:04:15.960\nI don't have to synchronize,\n\n87\n00:04:15.960 --> 00:04:19.130\nthe data's already up there and\nwe just boot it up and we go.\n\n88\n00:04:19.130 --> 00:04:20.368\nThat's what fault tolerance does.\n\n89\n00:04:20.368 --> 00:04:25.210\nFT gives us a much more broad solution.\n\n90\n00:04:25.210 --> 00:04:27.870\nNow, FT by itself has a little problem.\n\n91\n00:04:27.870 --> 00:04:29.370\nAnd the problem is synchronization.\n\n92\n00:04:29.370 --> 00:04:32.560\nHow long does it take to synchronize\nchanges from Orlando to New York?\n\n93\n00:04:32.560 --> 00:04:35.730\nEven if I have a ton of bandwidth,\nI still takes time.\n\n94\n00:04:35.730 --> 00:04:38.120\nIf I've got a database\nthat's giving rapid changes,\n\n95\n00:04:38.120 --> 00:04:40.750\nI can lose a few seconds of data\nwhen we fail over to New York.\n\n96\n00:04:40.750 --> 00:04:43.170\nNow, what's a few seconds of data to you?\n\n97\n00:04:43.170 --> 00:04:45.902\nWell, to us, it's not much, right?\n\n98\n00:04:45.902 --> 00:04:49.490\nTo ITProTV, we film video and\nour video gets recorded locally.\n\n99\n00:04:49.490 --> 00:04:52.890\nThe few seconds really wouldn't\nmatter to us, it's not a big deal.\n\n100\n00:04:52.890 --> 00:04:54.840\nBut if you're a stock exchange and\n\n101\n00:04:54.840 --> 00:04:58.535\nyou're processing millions of financial\ntransactions per minute, a couple of\n\n102\n00:04:58.535 --> 00:05:02.205\nseconds of data could be billions of\ndollars, I mean, that's a big deal.\n\n103\n00:05:02.205 --> 00:05:07.165\nAnd so, fault tolerance is\nnot the perfect solution.\n\n104\n00:05:07.165 --> 00:05:10.265\nBut we know that vSphere HA is\nnot the perfect solution either,\n\n105\n00:05:10.265 --> 00:05:13.730\nbecause it really doesn't let us span\nmultiple geographic areas without\n\n106\n00:05:13.730 --> 00:05:15.330\njumping through a lot of hoops.\n\n107\n00:05:15.330 --> 00:05:16.840\nSo, what do we do?\n\n108\n00:05:16.840 --> 00:05:20.692\nThe short answer is you combine them both,\nthat you use fault tolerance and\n\n109\n00:05:20.692 --> 00:05:21.950\nvSphere HA, you combine them both.\n\n110\n00:05:21.950 --> 00:05:25.350\nSo, you're running HA inside\nof one data center, and\n\n111\n00:05:25.350 --> 00:05:27.700\nthen using FT to clone it\noff to another data center.\n\n112\n00:05:27.700 --> 00:05:28.260\nAll right?\n\n113\n00:05:28.260 --> 00:05:30.790\nNow, there is a way to do multi-site HA.\n\n114\n00:05:30.790 --> 00:05:33.140\nIt's not on the exam and\nit's actually really difficult to set up.\n\n115\n00:05:33.140 --> 00:05:35.480\nBut you can do it where you span that way.\n\n116\n00:05:35.480 --> 00:05:39.390\nAnd it relies on your\nSAN replicating itself.\n\n117\n00:05:39.390 --> 00:05:43.070\nSo if you have an EMC SAN,\nEMC has this repli-store functionality,\n\n118\n00:05:43.070 --> 00:05:46.180\nand basically it lets one\nEMC stay in one location,\n\n119\n00:05:46.180 --> 00:05:48.420\nreplicate data to another\nEMC SAN in another location.\n\n120\n00:05:48.420 --> 00:05:51.480\nIt does fiber channel over ethernet,\nand it syncs that data.\n\n121\n00:05:51.480 --> 00:05:53.367\nIt hurts your performance a little bit,\nbut\n\n122\n00:05:53.367 --> 00:05:55.765\nit makes sure you have two\nSANs with the exact same data.\n\n123\n00:05:55.765 --> 00:05:58.312\nSo now I can have nodes in\ntwo different locations that\n\n124\n00:05:58.312 --> 00:06:01.778\nare part of the same vSphere HA\nenvironment, so you certainly can do it.\n\n125\n00:06:01.778 --> 00:06:04.956\nBut it's really powered by the SAN\nmore than it's powered by VMware, so\n\n126\n00:06:04.956 --> 00:06:07.300\nthat's why it's not on the exam.\n\n127\n00:06:07.300 --> 00:06:10.650\nBut fault tolerance,\nwe can do that entirely within vSphere.\n\n128\n00:06:10.650 --> 00:06:13.540\nRight, so let's jump in and\ntake a look at that.\n\n129\n00:06:13.540 --> 00:06:16.730\nFirst thing,\nI need to enable the functionality.\n\n130\n00:06:16.730 --> 00:06:18.630\nFault tolerance is gonna synchronize a VM,\n\n131\n00:06:18.630 --> 00:06:21.360\nand it's gonna synchronize it\nusing a VM kernel adapter.\n\n132\n00:06:21.360 --> 00:06:24.910\nSo I've gotta make sure I've got\nit set up for a VM kernel adapter.\n\n133\n00:06:24.910 --> 00:06:27.370\nIf I go in and\ntake a look at one of my hosts, right, so\n\n134\n00:06:27.370 --> 00:06:29.310\nI'm just gonna drill down\nhere to one of my hosts.\n\n135\n00:06:29.310 --> 00:06:31.500\nAnd I'll go to manage and networking.\n\n136\n00:06:31.500 --> 00:06:34.870\nAnd these are the same hosts that\nI used in the HA episode, so\n\n137\n00:06:34.870 --> 00:06:39.160\nI'm already set up for vSphere HA, but\nI'm not set up for fault tolerance.\n\n138\n00:06:39.160 --> 00:06:42.870\nI'm drilling into host01 and\nI'm going to go in VMkernel adaptors.\n\n139\n00:06:42.870 --> 00:06:47.010\nYou may want to set up\na dedicated adaptor just for ft\n\n140\n00:06:47.010 --> 00:06:51.570\nthat way it can synchronize and not impact\nthe performance of the other adaptors.\n\n141\n00:06:51.570 --> 00:06:54.210\nOr you can piggy back and\nwrite on one of your existing ones.\n\n142\n00:06:54.210 --> 00:06:56.270\nI only have one adaptor so\nI'm going to piggy back it but\n\n143\n00:06:56.270 --> 00:06:59.020\nin production, I'd love to move\nit off to a separate adapter.\n\n144\n00:06:59.020 --> 00:07:03.080\nNetwork adapters are cheap so there's no\nreason not to add a bunch of them to your\n\n145\n00:07:03.080 --> 00:07:05.895\nservers and then you start to\neliminate that congestion.\n\n146\n00:07:05.895 --> 00:07:09.830\nSo I'm going to edit this kernel\nadapter and when I go to do it,\n\n147\n00:07:09.830 --> 00:07:13.480\nnotice one of the functions right here,\nfault tolerance logging.\n\n148\n00:07:13.480 --> 00:07:16.099\nokay.\nI can turn on Fault Tolerance Logging, and\n\n149\n00:07:16.099 --> 00:07:20.360\nwhat it's talking about are transaction\nlogs, the changes that occur.\n\n150\n00:07:20.360 --> 00:07:23.620\nSo when a VM gets modified,\nthe changes are stored in a log, and\n\n151\n00:07:23.620 --> 00:07:25.970\nthe log is shipped over\nto the other server.\n\n152\n00:07:25.970 --> 00:07:28.050\nAnd the logs are then played\nforward on the other server, so\n\n153\n00:07:28.050 --> 00:07:30.150\nthe same changes happen there.\n\n154\n00:07:30.150 --> 00:07:31.920\nSo I'm just enabling it on this adapter,\n\n155\n00:07:31.920 --> 00:07:34.180\nthat's going to let me\nuse fault tolerance.\n\n156\n00:07:34.180 --> 00:07:37.870\nIf I don't have fault tolerance logging\nturned on any of my kernel adapters,\n\n157\n00:07:37.870 --> 00:07:38.950\nthen FT doesn't work.\n\n158\n00:07:38.950 --> 00:07:40.923\nSo that's kind of important.\n\n159\n00:07:40.923 --> 00:07:46.770\nThe next part is to turn it on,\nand we turn it on a per-VM basis.\n\n160\n00:07:46.770 --> 00:07:49.760\nYou go to each individual virtual\nmachine you want to replicate and\n\n161\n00:07:49.760 --> 00:07:50.520\nyou turn it on there.\n\n162\n00:07:50.520 --> 00:07:53.536\nIt's not like HA where\nit's done on the cluster.\n\n163\n00:07:53.536 --> 00:07:57.358\nHere it's on the individual VMs\nbecause we might not want to replicate\n\n164\n00:07:57.358 --> 00:07:58.344\nevery single VM.\n\n165\n00:07:58.344 --> 00:08:01.373\nWell, I've got a VM sitting right here,\nWeb01.\n\n166\n00:08:01.373 --> 00:08:04.493\nAnd let's say that that web\nserver is really important to me,\n\n167\n00:08:04.493 --> 00:08:07.140\nI want to replicate that\nto other locations, okay?\n\n168\n00:08:07.140 --> 00:08:12.360\nSo if I wanna do that, what I need to do\nis I get into that machine's settings,\n\n169\n00:08:12.360 --> 00:08:14.200\nI'm just gonna right-click on it.\n\n170\n00:08:14.200 --> 00:08:17.760\nAnd in the menu that comes up,\nyou'll see Fault Tolerance right there.\n\n171\n00:08:17.760 --> 00:08:20.140\nAnd we can Turn On Fault Tolerance.\n\n172\n00:08:20.140 --> 00:08:24.210\nNow there's several options that you're\ngonna see in here that are based on\n\n173\n00:08:24.210 --> 00:08:25.060\nif it's on, right?\n\n174\n00:08:25.060 --> 00:08:27.320\nIf it's off, all these things\nare grayed out like mine are.\n\n175\n00:08:27.320 --> 00:08:29.840\nBut when we turn it on,\nyou'll see what we can do.\n\n176\n00:08:29.840 --> 00:08:31.610\nWe can Suspend Fault Tolerance.\n\n177\n00:08:31.610 --> 00:08:32.890\nWe can resume it.\n\n178\n00:08:32.890 --> 00:08:35.950\nWe can flip over to our secondary copy.\n\n179\n00:08:35.950 --> 00:08:38.702\nWe can Test Failover and\nwe can Test Restart the secondary.\n\n180\n00:08:38.702 --> 00:08:42.608\nThere's a lot of actions you can take\non that back up copy that you've got,\n\n181\n00:08:42.608 --> 00:08:43.230\nall right?\n\n182\n00:08:43.230 --> 00:08:45.600\nAnd there's different reasons\nwhy we'd use some of these.\n\n183\n00:08:45.600 --> 00:08:49.040\nI'm gonna go ahead and try turn it on, and\nI'll talk more about those in a second.\n\n184\n00:08:49.040 --> 00:08:52.972\nNow when I go to turn it on, it's warning\nme that I've got a host fired up, but\n\n185\n00:08:52.972 --> 00:08:55.940\nI'm gonna have a little bit\nof a bandwidth problem.\n\n186\n00:08:55.940 --> 00:08:59.580\nI've got insufficient bandwidth for\nvSphere Fault Tolerance logging.\n\n187\n00:08:59.580 --> 00:09:02.830\nThey really want you to have\nthat dedicated adapter, right?\n\n188\n00:09:02.830 --> 00:09:05.180\nBecause, think about your virtual machine.\n\n189\n00:09:05.180 --> 00:09:09.070\nIf my virtual machine is connected to\na gigabit adapter, that means I could be\n\n190\n00:09:09.070 --> 00:09:13.690\nreceiving up to a gigabit of\nchanges at any particular second.\n\n191\n00:09:13.690 --> 00:09:18.030\nWell, if I'm replicating my changes,\nif I'm doing my fault tolerance logging\n\n192\n00:09:18.030 --> 00:09:22.000\non that same adapter,\nnow I'm creating contention.\n\n193\n00:09:22.000 --> 00:09:25.040\nHow can I send a gigabit\nof changes somewhere\n\n194\n00:09:25.040 --> 00:09:27.000\nwhen I'm receiving a gigabit of changes?\n\n195\n00:09:27.000 --> 00:09:28.826\nI'm gonna max out the adapter, right?\n\n196\n00:09:28.826 --> 00:09:32.370\nEven if it's a full duplex gig adapter,\nI would be maxing it out.\n\n197\n00:09:32.370 --> 00:09:34.490\nAnd so nothing else would\nbe able to function on it.\n\n198\n00:09:34.490 --> 00:09:37.170\nIf I've got to share it with more than\none VM, now I'm really in trouble, right?\n\n199\n00:09:37.170 --> 00:09:40.232\nSo it's warning me about that and\nit's still gonna let me do it,\n\n200\n00:09:40.232 --> 00:09:43.079\nbut it is warning me so\nit's saying do I really want to do it?\n\n201\n00:09:43.079 --> 00:09:45.147\nIn my case,\nI know I'm not making changes to the VM so\n\n202\n00:09:45.147 --> 00:09:46.519\nI'm not really worried about it.\n\n203\n00:09:46.519 --> 00:09:47.810\nI'll go ahead and say yes.\n\n204\n00:09:47.810 --> 00:09:52.360\nIn real life land, you solve that problem\nby having more adapters, all right?\n\n205\n00:09:52.360 --> 00:09:54.520\nNow it's asking where I wanna put it,\nright?\n\n206\n00:09:54.520 --> 00:09:58.270\nI need to pick a data store\nwhere it's going to go and so\n\n207\n00:09:58.270 --> 00:10:03.270\nwhat you do is you pick\na secondary copy for it.\n\n208\n00:10:03.270 --> 00:10:05.170\nAnd notice we've got\nthree different files.\n\n209\n00:10:05.170 --> 00:10:09.804\nA Configuration File, a Tie Breaker File\nand the Hard Disk itself.\n\n210\n00:10:09.804 --> 00:10:11.784\nThe configuration file,\nthat's our VMX, right?\n\n211\n00:10:11.784 --> 00:10:13.540\nThe configuration of the virtual machine.\n\n212\n00:10:13.540 --> 00:10:16.470\nThat's gotta be replicated so\nthat we know to build the VM.\n\n213\n00:10:16.470 --> 00:10:18.410\nAnd the hard drive,\nI've got an AK hard drive.\n\n214\n00:10:18.410 --> 00:10:21.930\nIt's small, so\nthat's obviously gotta be replicated.\n\n215\n00:10:21.930 --> 00:10:23.340\nA tie breaker.\n\n216\n00:10:23.340 --> 00:10:24.800\nWhat the heck is that?\n\n217\n00:10:24.800 --> 00:10:28.530\nWell, remember when we configured\nthe clustering in our earlier episodes,\n\n218\n00:10:28.530 --> 00:10:29.840\nthat we had to have a quorum.\n\n219\n00:10:29.840 --> 00:10:33.640\nAnd we had a data store that\nserved as that heart beating.\n\n220\n00:10:33.640 --> 00:10:37.470\nWell, because I can replicate this to\na data store in a completely different\n\n221\n00:10:37.470 --> 00:10:42.070\nenvironment, it's gonna tell me, hey,\nI need some kind of tie breaker.\n\n222\n00:10:42.070 --> 00:10:44.310\nI need some kind of heart beating.\n\n223\n00:10:44.310 --> 00:10:45.730\nAnd it's gotta go somewhere.\n\n224\n00:10:45.730 --> 00:10:46.490\nAnd so the way it does it,\n\n225\n00:10:46.490 --> 00:10:49.830\nit does a file that's gonna get\nreplicated over to the secondary, okay?\n\n226\n00:10:49.830 --> 00:10:52.090\nSo that's kind of what it showing me here.\n\n227\n00:10:52.090 --> 00:10:56.620\nNow with each one, I've gotta pick\nwhere they're going to get stored.\n\n228\n00:10:56.620 --> 00:10:59.310\nAnd so over here in Storage,\nI just have a browse option and\n\n229\n00:10:59.310 --> 00:11:04.230\nI can drop that down and browse the\ndifferent data stores that I've got, okay?\n\n230\n00:11:04.230 --> 00:11:06.310\nAnd so I can pick other data stores and\n\n231\n00:11:06.310 --> 00:11:09.620\nthese data stores might be right\nhere in this geographic location.\n\n232\n00:11:09.620 --> 00:11:12.990\nOr they might be in a different data\ncenter or a different location,\n\n233\n00:11:12.990 --> 00:11:14.660\nI can pick where I want it to go.\n\n234\n00:11:14.660 --> 00:11:18.570\nSo I believe that node currently exists\nin storage01, so I'm gonna go ahead and\n\n235\n00:11:18.570 --> 00:11:19.600\nmove it to storage02.\n\n236\n00:11:22.160 --> 00:11:23.800\nAnd I'll just do that for\neach one of them.\n\n237\n00:11:23.800 --> 00:11:25.720\nI'm gonna go down the line and browse.\n\n238\n00:11:25.720 --> 00:11:30.200\nThey don't all have to go to the same\nplace but typically, that's what you want.\n\n239\n00:11:30.200 --> 00:11:32.070\nYou usually want them all\nto go to the same place.\n\n240\n00:11:33.360 --> 00:11:35.080\nI'm wanna go ahead and pick that.\n\n241\n00:11:35.080 --> 00:11:37.610\nNotice when I get to\nthe actual hard drive,\n\n242\n00:11:37.610 --> 00:11:41.680\nI got a few more options here cuz it's\nshowing some of the other datastores.\n\n243\n00:11:41.680 --> 00:11:45.130\nFor the tie beaker and the configuration,\nall the servers need to be able see it.\n\n244\n00:11:45.130 --> 00:11:47.130\nSo it really needs to\nbe a shared datastore.\n\n245\n00:11:47.130 --> 00:11:51.231\nBut for the hard drive because we're gonna\nreplicate that, we're gonna clone it,\n\n246\n00:11:51.231 --> 00:11:53.554\nit lets me pick even local\ndatastores if I want.\n\n247\n00:11:53.554 --> 00:11:56.868\nSo if I know that I'm gonna be\nreplicating this over to host02,\n\n248\n00:11:56.868 --> 00:11:59.418\nI could stick it in\nhost02's local datastore.\n\n249\n00:11:59.418 --> 00:12:00.202\nAnd then it would go there.\n\n250\n00:12:00.202 --> 00:12:02.714\nBut I've got shared storage,\nthat's what I'm gonna use.\n\n251\n00:12:04.088 --> 00:12:05.696\nAll right, so\nI'll go ahead and choose that.\n\n252\n00:12:05.696 --> 00:12:06.648\nI've got it laid out.\n\n253\n00:12:06.648 --> 00:12:08.016\nI did get a warning actually.\n\n254\n00:12:08.016 --> 00:12:09.860\nWhat's my problem here?\n\n255\n00:12:09.860 --> 00:12:11.824\nHopefully it'll be a detailed error and\nI can find out what's going on.\n\n256\n00:12:11.824 --> 00:12:14.742\nSo it's telling me there are no hosts\ncompatible with the current datastore\n\n257\n00:12:14.742 --> 00:12:15.251\nselection.\n\n258\n00:12:15.251 --> 00:12:16.610\nSo that's not good.\n\n259\n00:12:16.610 --> 00:12:21.025\nI got host01 is not valid, and\nthat's because you can't have\n\n260\n00:12:21.025 --> 00:12:24.880\na fault tolerance pair between\ntwo VMs on the same host.\n\n261\n00:12:24.880 --> 00:12:26.610\nYou can't be fault tolerant on one host.\n\n262\n00:12:26.610 --> 00:12:27.840\nSo that makes sense.\n\n263\n00:12:27.840 --> 00:12:30.544\nBut host02, this is embarrassing.\n\n264\n00:12:30.544 --> 00:12:34.860\nAll right, so, the Fault Tolerance\nconfiguration on the entity esx-host02\n\n265\n00:12:34.860 --> 00:12:36.000\nhas an issue.\n\n266\n00:12:36.000 --> 00:12:38.335\nHost cannot support\nvSphere Fault Tolerance.\n\n267\n00:12:38.335 --> 00:12:39.965\nCheck the host summary, all right?\n\n268\n00:12:39.965 --> 00:12:42.653\nI've already got an idea\nwhat's going on here so\n\n269\n00:12:42.653 --> 00:12:45.220\nhost02 doesn't support Fault Tolerance.\n\n270\n00:12:46.220 --> 00:12:47.440\nWhy not?\n\n271\n00:12:47.440 --> 00:12:48.830\nFault Tolerance is in my license,\n\n272\n00:12:48.830 --> 00:12:52.120\nthe license that I have applied to these\nmachines, so why isn't it supported?\n\n273\n00:12:52.120 --> 00:12:54.430\nWell, let me show you\nhow you can find out.\n\n274\n00:12:54.430 --> 00:12:57.570\nIf I cancel this, and I go to host02,\n\n275\n00:12:57.570 --> 00:13:00.790\nI can jump over to the summary\nwhich is what they are suggesting.\n\n276\n00:13:00.790 --> 00:13:04.410\nAnd in the summary, if you go over to\nConfiguration, you can expand that out.\n\n277\n00:13:05.430 --> 00:13:08.220\nAnd you can see what's supported and\nwhat isn't.\n\n278\n00:13:08.220 --> 00:13:11.820\nAnd notice my Fault Tolerance\nhere is showing as unsupported.\n\n279\n00:13:11.820 --> 00:13:15.160\nAnd if I expand that out,\nmine's already configured, or expanded,\n\n280\n00:13:15.160 --> 00:13:20.190\nI can see virtual NIC for vSphere\nFault Tolerance logging, not configured.\n\n281\n00:13:20.190 --> 00:13:22.750\nRemember that thing that I covered right\nat the beginning of the episode where I\n\n282\n00:13:22.750 --> 00:13:25.080\nsaid you've gotta turn on\nFault Tolerance logging?\n\n283\n00:13:25.080 --> 00:13:28.890\nI turned it on for host01, I kinda\nforgot to turn it on for host02, so\n\n284\n00:13:28.890 --> 00:13:30.170\nthat's what my problem is.\n\n285\n00:13:30.170 --> 00:13:33.790\nSo I need to take host02 here and\njust go into Manage and\n\n286\n00:13:33.790 --> 00:13:37.070\ngo into Networking and the kernel adapter.\n\n287\n00:13:37.070 --> 00:13:41.540\nI need to edit that kernel adapter and\nadd Fault Tolerance logging.\n\n288\n00:13:41.540 --> 00:13:43.960\nIf I don't have that,\nFault Tolerance doesn't work so\n\n289\n00:13:43.960 --> 00:13:47.840\ngood lesson there is that it has to be on\nthe sending and on the receiving side.\n\n290\n00:13:47.840 --> 00:13:50.617\nWe gotta have both of them set up\nwith that Fault Tolerance logging.\n\n291\n00:13:50.617 --> 00:13:54.945\nSo now I should be able to go back and\nturn on Fault Tolerance for\n\n292\n00:13:54.945 --> 00:13:58.786\nthat VM and\nhopefully get some better results, okay?\n\n293\n00:13:58.786 --> 00:14:00.905\nSo as I go through,\nI'm gonna pick my storage again.\n\n294\n00:14:00.905 --> 00:14:04.530\nI'm gonna pick shared storage for\nmy configuration file so\n\n295\n00:14:04.530 --> 00:14:06.800\nthat both systems will be able to see it.\n\n296\n00:14:06.800 --> 00:14:09.490\nAnd I'll pick shared storage for\nmy tie breaker file.\n\n297\n00:14:09.490 --> 00:14:12.830\nThose are small files,\nnothing too significant there.\n\n298\n00:14:12.830 --> 00:14:15.980\nYou could even use NFS for it if you\nwanted, you don't have to have a SAN.\n\n299\n00:14:15.980 --> 00:14:18.775\nNFS actually works better\nover a geographical area.\n\n300\n00:14:18.775 --> 00:14:20.935\nSo a lot of times we'll pick those.\n\n301\n00:14:22.235 --> 00:14:25.455\nBut then for the hard drive,\nthe hard drive's the more important one.\n\n302\n00:14:25.455 --> 00:14:28.799\nAnd for that one, I don't wanna pick\nshared storage in this case cuz maybe I'm\n\n303\n00:14:28.799 --> 00:14:30.937\nat a remote location that\ndoesn't have that SAN.\n\n304\n00:14:30.937 --> 00:14:34.497\nSo I can choose a local datastore,\nor any other type of datastore for\n\n305\n00:14:34.497 --> 00:14:37.007\nthat matter, and\nI'll go ahead and choose it.\n\n306\n00:14:37.007 --> 00:14:37.655\nAll right, so\n\n307\n00:14:37.655 --> 00:14:41.337\nnow that that I've got it chosen, well I\nsee that I still got a warning down here.\n\n308\n00:14:41.337 --> 00:14:46.447\nAnd now it's telling me, [LAUGH] vSphere\nFault Tolerance requires the host\n\n309\n00:14:46.447 --> 00:14:51.814\nto have a license that supports vMotion\nand a virtual NIC enabled for vMotion.\n\n310\n00:14:51.814 --> 00:14:57.405\nSo I need vMotion for doing a live\nfail over for doing the testing.\n\n311\n00:14:57.405 --> 00:15:02.185\nIn an actual failure, I don't necessarily\nneed vMotion, but in a live one, I do.\n\n312\n00:15:02.185 --> 00:15:04.425\nAnd I didn't turn on vMotion also.\n\n313\n00:15:04.425 --> 00:15:07.900\nSo, this is like a comedy of errors here.\n\n314\n00:15:07.900 --> 00:15:10.770\nI basically need to get those\nturned on on the adapter.\n\n315\n00:15:10.770 --> 00:15:12.360\nSo I'm gonna go in and edit that.\n\n316\n00:15:12.360 --> 00:15:15.335\nEven though I don't necessarily\nintend on doing a live migration,\n\n317\n00:15:15.335 --> 00:15:16.440\nit needs that turned on.\n\n318\n00:15:16.440 --> 00:15:20.813\nSo I'm just gonna add vMotion\ntraffic right in there, okay?\n\n319\n00:15:20.813 --> 00:15:22.562\nSo I'll do that over on host01 too and\n\n320\n00:15:22.562 --> 00:15:25.267\nthat should be the last of\nthe requirements that we've got.\n\n321\n00:15:25.267 --> 00:15:28.250\nIt's unfortunate that they didn't\nwarn me about that ahead of time,\n\n322\n00:15:28.250 --> 00:15:31.010\nwe could have knocked it out all\nat once but what are you gonna do.\n\n323\n00:15:31.010 --> 00:15:35.203\nSo now we'll go ahead and take web01 and\nwe'll throw that into Fault Tolerance.\n\n324\n00:15:35.203 --> 00:15:38.382\nAnd we'll pick our storage again\njust like we did a moment ago.\n\n325\n00:15:38.382 --> 00:15:42.840\nAnd this time, everything should be\nhappy shiny rainbows and unicorns.\n\n326\n00:15:43.950 --> 00:15:44.803\nAt least I hope.\n\n327\n00:15:44.803 --> 00:15:49.845\n[LAUGH] All right, so once I get these\npicked, then we'll be able to advance.\n\n328\n00:15:49.845 --> 00:15:53.490\nAnd what I'm doing here, I'm setting up\nfault tolerance between two nodes that\n\n329\n00:15:53.490 --> 00:15:55.840\nare actually already\nin a cluster together.\n\n330\n00:15:55.840 --> 00:15:57.927\nIt doesn't really make sense to do this,\nright?\n\n331\n00:15:57.927 --> 00:15:59.288\nIn a production environment,\n\n332\n00:15:59.288 --> 00:16:02.648\nyou really want fault tolerance to be\nto a host that's outside the cluster.\n\n333\n00:16:02.648 --> 00:16:04.280\nIt's in another location.\n\n334\n00:16:04.280 --> 00:16:08.880\nIt'll let me do it here, but\nin an ideal world these will be remote.\n\n335\n00:16:08.880 --> 00:16:09.535\nNow it's happy.\n\n336\n00:16:09.535 --> 00:16:12.720\nright?\nI have my host02 meets the compatibility\n\n337\n00:16:12.720 --> 00:16:16.310\nchecks, and I can move forward,\nand it's going to get set up.\n\n338\n00:16:16.310 --> 00:16:20.890\nNow what it's asking me here is,\nI need to pick my secondary VM.\n\n339\n00:16:20.890 --> 00:16:23.830\nRight now I've got affinity for host01.\n\n340\n00:16:23.830 --> 00:16:25.840\nThat's where I created the VM.\n\n341\n00:16:25.840 --> 00:16:27.850\nI want host02 to be the secondary.\n\n342\n00:16:27.850 --> 00:16:31.030\nBut you may have more than one\nperson that you can pick from.\n\n343\n00:16:31.030 --> 00:16:34.060\nSo you choose who you want\nto be that secondary.\n\n344\n00:16:34.060 --> 00:16:37.360\nAnd over here, you'll see if they have\nHA configured and what their state is.\n\n345\n00:16:37.360 --> 00:16:40.840\nAnd so notice that we've got the running\nand connected, the master and\n\n346\n00:16:40.840 --> 00:16:44.770\nslave model, so the second server\nis basically sitting idle.\n\n347\n00:16:44.770 --> 00:16:47.689\nI do have a warning because I just have\nthat one network adapters where that\n\n348\n00:16:47.689 --> 00:16:48.233\nwarning is.\n\n349\n00:16:48.233 --> 00:16:50.880\nI'm gonna go ahead and hit next.\n\n350\n00:16:50.880 --> 00:16:52.580\nNow we can finish that up.\n\n351\n00:16:52.580 --> 00:16:56.850\nWhat's gonna happen is,\nit's gonna create a clone of web01.\n\n352\n00:16:56.850 --> 00:16:59.170\nSo there's one copy of web01 right now.\n\n353\n00:16:59.170 --> 00:17:02.622\nIt's gonna create a clone over on host02.\n\n354\n00:17:02.622 --> 00:17:04.510\nSo there'll be a second copy of the VHD.\n\n355\n00:17:04.510 --> 00:17:06.730\nAnd the configuration file and\n\n356\n00:17:06.730 --> 00:17:09.350\nthe tiebreaker will be\ncopied to datastore also.\n\n357\n00:17:09.350 --> 00:17:14.360\nAnd so those will all be available and\nready for use.\n\n358\n00:17:14.360 --> 00:17:15.540\nThat's gonna happen in the background.\n\n359\n00:17:15.540 --> 00:17:16.610\nThat can take a little bit of time.\n\n360\n00:17:16.610 --> 00:17:19.140\nOn a local network like mine\nwith just an 8 gig hard drive,\n\n361\n00:17:19.140 --> 00:17:20.850\nit might happen pretty fast.\n\n362\n00:17:20.850 --> 00:17:25.010\nIf your server is a terabyte in size and\nyou're replicating over geographic\n\n363\n00:17:25.010 --> 00:17:28.100\nboundaries, this could take hours or\neven days, it can take awhile.\n\n364\n00:17:28.100 --> 00:17:31.830\nSo we need to wait for\nthat to synchronize to be up and going.\n\n365\n00:17:31.830 --> 00:17:36.780\nBut once it's done, we'll now have\nfault tolerance enabled for this VM.\n\n366\n00:17:36.780 --> 00:17:39.535\nWeb01 is now being synchronized\nto the other side.\n\n367\n00:17:39.535 --> 00:17:42.620\nAnd when you right click on it and\nfloat over fault tolerance,\n\n368\n00:17:42.620 --> 00:17:45.210\nyou'll start to see some of\nthe options that are out there.\n\n369\n00:17:45.210 --> 00:17:48.030\nLike resume and suspend fault tolerance.\n\n370\n00:17:48.030 --> 00:17:48.970\nMigrate to the secondary.\n\n371\n00:17:48.970 --> 00:17:51.930\nI can flip over to the secondary\nif there's a failure happening.\n\n372\n00:17:51.930 --> 00:17:53.990\nIf I can't get to that VM for some reason.\n\n373\n00:17:53.990 --> 00:17:57.230\nRight, now migrating, that makes sense,\nwe know when we do that,\n\n374\n00:17:57.230 --> 00:17:58.780\nyou're having a failure.\n\n375\n00:17:58.780 --> 00:18:00.940\nTesting, that makes sense,\nwe want to make sure it works.\n\n376\n00:18:00.940 --> 00:18:03.290\nWhen would we use suspend and resume?\n\n377\n00:18:03.290 --> 00:18:07.040\nWell, let's say you're about to do\nsome big software update to your\n\n378\n00:18:07.040 --> 00:18:08.360\nvirtual machine.\n\n379\n00:18:08.360 --> 00:18:10.990\nAnd you're worried that\nit might break something,\n\n380\n00:18:10.990 --> 00:18:14.740\nyou didn't have time to do full testing or\nwhatever.\n\n381\n00:18:14.740 --> 00:18:18.100\nYou could suspend fault tolerance and\n\n382\n00:18:18.100 --> 00:18:23.270\nupgrade the production machine, and\nthe replica would not be upgraded.\n\n383\n00:18:23.270 --> 00:18:26.610\nAnd so now if something really went wrong,\nI can kill the VM and\n\n384\n00:18:26.610 --> 00:18:30.590\nfail over to the secondary, and\nit would be like rolling back he update.\n\n385\n00:18:30.590 --> 00:18:33.160\nYou can achieve the same thing with\nsnapshots if you're set up to be able to\n\n386\n00:18:33.160 --> 00:18:33.800\nhandle snapshots.\n\n387\n00:18:33.800 --> 00:18:36.273\nBut if you're not, you can use fault\ntolerance to kinda cheat the system,\n\n388\n00:18:36.273 --> 00:18:37.420\nthat's one reason.\n\n389\n00:18:37.420 --> 00:18:40.750\nOr maybe your bandwidth is\ngetting killed by replication.\n\n390\n00:18:40.750 --> 00:18:43.800\nAnd so you suspend it so\nthat you can start it up at night again\n\n391\n00:18:43.800 --> 00:18:46.790\nknowing that your replica is no\nlonger gonna be quite up to date.\n\n392\n00:18:46.790 --> 00:18:50.830\nSo you have to be careful with that but\notherwise, it's on, it's running, and\n\n393\n00:18:50.830 --> 00:18:52.320\nit's pretty straightforward.\n\n394\n00:18:52.320 --> 00:18:56.630\nFault tolerance is one of the easier\nthings to get Configured once you meet\n\n395\n00:18:56.630 --> 00:18:58.220\nall the little requirements.\n\n396\n00:18:58.220 --> 00:19:01.150\nSo I did have to jump through a few\nhoops to get that thing in place.\n\n397\n00:19:01.150 --> 00:19:04.460\nBut now that it's going,\nwe've got tolerance configured, and\n\n398\n00:19:04.460 --> 00:19:05.568\nthe VM should be up and happy.\n\n399\n00:19:05.568 --> 00:19:08.990\nAlright now, fault tolerance is fine, but\n\n400\n00:19:08.990 --> 00:19:11.450\nyou might have noticed\nwhen I was configuring it.\n\n401\n00:19:11.450 --> 00:19:13.540\nThat when I went into the host, and\n\n402\n00:19:13.540 --> 00:19:16.930\nI looked at my summary, did you see\nhow they named fault tolerance.\n\n403\n00:19:16.930 --> 00:19:21.390\nIt was named Fault Tolerance (Legacy),\nokay.\n\n404\n00:19:21.390 --> 00:19:23.980\nThe reason it's called\nFault Tolerance (Legacy)\n\n405\n00:19:23.980 --> 00:19:26.690\nis because it's being replaced\nby VSphere replication.\n\n406\n00:19:26.690 --> 00:19:29.730\nVSphere replication is a new service, it\nlet's you replicate pretty much anywhere\n\n407\n00:19:29.730 --> 00:19:32.430\nand it's a little bit easier to\ndeal with on the requirements side.\n\n408\n00:19:32.430 --> 00:19:35.580\nAnd so, fault harness is still supported,\nit's still on the exam, but\n\n409\n00:19:35.580 --> 00:19:36.400\nit is being phased out.\n\n410\n00:19:37.740 --> 00:19:40.360\nAll right,\nthe next technology I want to talk about\n\n411\n00:19:40.360 --> 00:19:42.740\nis the distributed resource scheduler.\n\n412\n00:19:42.740 --> 00:19:45.740\nEverything that we've set up so\nfar has really been manual.\n\n413\n00:19:45.740 --> 00:19:48.320\nWhen we set up V-Sphere HA,\nthe high availability.\n\n414\n00:19:48.320 --> 00:19:51.240\nWhat we were doing there was setting it up\nso that a virtual machine could jump from\n\n415\n00:19:51.240 --> 00:19:53.690\none host to another if\nthere was a problem, right.\n\n416\n00:19:53.690 --> 00:19:57.028\nIf one host failed,\nwe could bring the VM up on another host.\n\n417\n00:19:57.028 --> 00:19:59.980\nOr we can do it ourselves if I\nwanted to do maintenance on a host.\n\n418\n00:19:59.980 --> 00:20:03.840\nI could use vMotion and\nmove the VMs off to other hosts and\n\n419\n00:20:03.840 --> 00:20:05.590\nthen do the maintenance and\nit wouldn't affect anybody.\n\n420\n00:20:05.590 --> 00:20:09.240\nSo all of that is manual but\n\n421\n00:20:09.240 --> 00:20:11.310\na lot of times you want these\nthings to be automatic.\n\n422\n00:20:11.310 --> 00:20:15.320\nWell, it is a little automatic, if there's\na true failure if a host actually goes\n\n423\n00:20:15.320 --> 00:20:19.740\noffline it will shuffle around your VMs\nfor you, it will take care of that.\n\n424\n00:20:19.740 --> 00:20:25.190\nBut what if it's not the host is offline,\nwhat if it is just performance?\n\n425\n00:20:25.190 --> 00:20:28.760\nWhat if I have one host,\nthat is maxed out on CPU?\n\n426\n00:20:28.760 --> 00:20:32.220\nIt's got 12 cores and\nthey're all running at 100%.\n\n427\n00:20:32.220 --> 00:20:36.720\nAnd I've got another host\nsitting right next to it and\n\n428\n00:20:36.720 --> 00:20:39.630\nit's got 12 cores and\nit's running at like 6%.\n\n429\n00:20:39.630 --> 00:20:42.300\nWell, it'll let you do that.\n\n430\n00:20:42.300 --> 00:20:46.800\nBy default the cluster doesn't\ndo performance balancing.\n\n431\n00:20:46.800 --> 00:20:49.810\nSo that's where the Distributed\nResource Scheduler comes in.\n\n432\n00:20:49.810 --> 00:20:54.720\nWith DRS, It can look at your environment,\nand it will see that one host is running\n\n433\n00:20:54.720 --> 00:20:58.040\nat a 100% CPU, and\nanother host is running at 6%.\n\n434\n00:20:58.040 --> 00:21:02.380\nAnd it will grab a couple of VMs and\nmove them over to the other host and\n\n435\n00:21:02.380 --> 00:21:03.020\nbalance it out.\n\n436\n00:21:03.020 --> 00:21:05.580\nSo now maybe both of them\nare running at 60%, right?\n\n437\n00:21:05.580 --> 00:21:10.160\nSo it balances them to create an even\ndistribution on your hardware.\n\n438\n00:21:10.160 --> 00:21:14.370\nThe distributor resource scheduler is\nreally cool, not just because of that,\n\n439\n00:21:14.370 --> 00:21:17.760\nbecause it balances hardware and\nperformance which is great.\n\n440\n00:21:17.760 --> 00:21:19.210\nBut it can also do power savings.\n\n441\n00:21:19.210 --> 00:21:21.050\nThe power saving stuff is really neat.\n\n442\n00:21:21.050 --> 00:21:23.650\nLet's say that you have 100 hosts and\n\n443\n00:21:23.650 --> 00:21:28.120\nyou've got 10 VMs on each host so\nyou've got 1000 VMs.\n\n444\n00:21:28.120 --> 00:21:29.660\n1000 VMs, 100 hosts.\n\n445\n00:21:29.660 --> 00:21:33.210\nThose 100 hosts,\nthat's 100 physical servers Errors.\n\n446\n00:21:33.210 --> 00:21:34.780\nThat's going to consume a bit of power,\nright?\n\n447\n00:21:34.780 --> 00:21:38.320\nSo it's going to cost you a decent amount\nof money to keep that up and running.\n\n448\n00:21:38.320 --> 00:21:41.500\nBut maybe your business is\nan 8:00 to 5:00 business.\n\n449\n00:21:41.500 --> 00:21:42.550\nYou open up at 8:00 AM,\n\n450\n00:21:42.550 --> 00:21:45.950\nyou close at 5:00 PM and overnight,\nwhat are your servers doing?\n\n451\n00:21:45.950 --> 00:21:47.660\nNothing, they're just sitting there.\n\n452\n00:21:47.660 --> 00:21:48.910\nMaybe they're getting backed up but for\n\n453\n00:21:48.910 --> 00:21:51.200\nthe most part they're just sitting there,\nright?\n\n454\n00:21:51.200 --> 00:21:55.602\nWhat DRS can do,\nis it can monitor the workload.\n\n455\n00:21:55.602 --> 00:21:57.620\nIt can monitor how busy your VMs are.\n\n456\n00:21:57.620 --> 00:22:02.651\nAnd during the middle of the day,\nfrom 8 AM to 5 PM maybe it's got all 100\n\n457\n00:22:02.651 --> 00:22:07.455\nhosts up and running, all 1,000\nVMs all just cranking full steam.\n\n458\n00:22:09.215 --> 00:22:13.040\nBut then when 5 o'clock rolls around and\nthen 6 o'clock rolls around,\n\n459\n00:22:13.040 --> 00:22:18.215\nat 6 PM everyone has gone home, everything\nstarts to idle, DRS can recognize that.\n\n460\n00:22:18.215 --> 00:22:22.330\nAnd it can move the VMs\nto consolidate them down.\n\n461\n00:22:22.330 --> 00:22:28.670\nAnd maybe those 1,000 VM's that needed\na 1000 hosts can now run on 60 hosts.\n\n462\n00:22:28.670 --> 00:22:32.990\nAnd it can take the other 40 host that it\ndoesn't need, move the VM's off of them,\n\n463\n00:22:32.990 --> 00:22:34.990\nand put them into sleep mode.\n\n464\n00:22:34.990 --> 00:22:37.920\nIt can put them to sleep overnight.\n\n465\n00:22:37.920 --> 00:22:42.180\nAnd then in the morning when things start\nramping back up it can wake up those 40\n\n466\n00:22:42.180 --> 00:22:44.340\nhosts and move VMs back over to it.\n\n467\n00:22:44.340 --> 00:22:48.500\nAnd it can do all of this while the system\nis online, while these VMs are running,\n\n468\n00:22:48.500 --> 00:22:50.830\nwhile users are in it,\nthe users don't even notice it happening.\n\n469\n00:22:50.830 --> 00:22:53.650\nIt's all V motion all done by\nthe cluster on the back end.\n\n470\n00:22:53.650 --> 00:22:55.170\nIt's really pretty impressive.\n\n471\n00:22:55.170 --> 00:23:00.030\nSo you can save quite a bit of electric\nbill on this one by turning it on and\n\n472\n00:23:00.030 --> 00:23:00.930\ngetting it configured properly.\n\n473\n00:23:00.930 --> 00:23:03.860\nSo, we get performance balancing, and\n\n474\n00:23:03.860 --> 00:23:06.630\nwe get power savings with DRS,\nreally cool stuff, right?\n\n475\n00:23:06.630 --> 00:23:10.380\nAnd it's fairly easy to implement too,\nit's not actually that big of a deal.\n\n476\n00:23:10.380 --> 00:23:11.750\nThere are a few requirements that we have.\n\n477\n00:23:11.750 --> 00:23:14.430\nIf you want to use that power feature,\nthe power feature is not on by default,\n\n478\n00:23:14.430 --> 00:23:18.520\nwe turn it on, and\nyour systems have to support wake on LAN.\n\n479\n00:23:18.520 --> 00:23:21.610\nBecause when it puts them to sleep,\nhow's it gonna wake them up again, right?\n\n480\n00:23:21.610 --> 00:23:24.990\nIt's not like V Center can't push\nthe power button for us, right?\n\n481\n00:23:24.990 --> 00:23:26.830\nIt doesn't have that\nrobotic arm attachment yet.\n\n482\n00:23:26.830 --> 00:23:29.910\nSo it's gotta be able to send a network\nmessage to wake the servers up and\n\n483\n00:23:29.910 --> 00:23:30.910\nit need wake on LAN for that.\n\n484\n00:23:30.910 --> 00:23:34.050\nSo, you have to have network adapters\nthat support wake on LAN and\n\n485\n00:23:34.050 --> 00:23:35.200\nit has to be turned on.\n\n486\n00:23:35.200 --> 00:23:36.680\nRight, which some of\nthem it's on by default,\n\n487\n00:23:36.680 --> 00:23:39.770\nsome have to go the BIOS to do it,\nit just depends on your environment.\n\n488\n00:23:39.770 --> 00:23:42.540\nThe other thing is we have to pay for\nthe license,\n\n489\n00:23:42.540 --> 00:23:46.150\nbecause it's not in the standard edition\nof V Sphere, we have to pay for DRS.\n\n490\n00:23:46.150 --> 00:23:49.550\nBut assuming we've got those,\nwe can get in there and turn it on.\n\n491\n00:23:49.550 --> 00:23:52.229\nDRS is like an upgrade to HA.\n\n492\n00:23:52.229 --> 00:23:55.404\nYou have V Sphere HA that's providing\nyou the ability to do V Motion,\n\n493\n00:23:55.404 --> 00:23:59.267\nit's providing you the ability to cluster\nand have everything highly available.\n\n494\n00:23:59.267 --> 00:24:03.250\nAnd then DRS kicks in and\nbalances things out.\n\n495\n00:24:03.250 --> 00:24:04.750\nThen you turn it on.\n\n496\n00:24:04.750 --> 00:24:07.070\nAnd once you turn it on, it's ready to go,\nit's ready to do its job.\n\n497\n00:24:07.070 --> 00:24:11.130\nAnd you set a schedule for\nhow often you want it to happen.\n\n498\n00:24:11.130 --> 00:24:12.970\nIt doesn't run continuously,\n\n499\n00:24:12.970 --> 00:24:15.740\ncuz otherwise your VMs would\nconstantly be moving around.\n\n500\n00:24:15.740 --> 00:24:17.240\nSo you set a schedule.\n\n501\n00:24:17.240 --> 00:24:20.400\nDo I want it to run once an hour?\n\n502\n00:24:20.400 --> 00:24:22.802\nDo I want to run once every six hours?\n\n503\n00:24:22.802 --> 00:24:24.426\nIf I'm worried about just power savings,\n\n504\n00:24:24.426 --> 00:24:27.507\nlet's say that's the only thing I care\nabout, I just care about power savings.\n\n505\n00:24:27.507 --> 00:24:31.782\nWell, then I might want DRS\nto run every day at 6 PM and\n\n506\n00:24:31.782 --> 00:24:37.483\nevery day at 8 AM or 9 AM, and\nthat way at 6 PM everybody has gone home,\n\n507\n00:24:37.483 --> 00:24:41.406\nand so it runs and\nit scales down my environment.\n\n508\n00:24:41.406 --> 00:24:44.748\nAnd then at 9 AM, everybody's\nback in the office so it runs and\n\n509\n00:24:44.748 --> 00:24:46.460\nthis scales up my environment.\n\n510\n00:24:46.460 --> 00:24:48.900\nAnd so now it just runs twice a day and\nthat's it.\n\n511\n00:24:48.900 --> 00:24:51.970\nOr I might want it to\nrun every 15 minutes.\n\n512\n00:24:51.970 --> 00:24:55.190\nAnd so every 15 minutes is balancing\nthe environment and kinda tuning things.\n\n513\n00:24:55.190 --> 00:24:58.070\nAnd so it's up to me to\nchoose how I wanna do that.\n\n514\n00:24:58.070 --> 00:25:01.330\nBut if you run it too frequently,\nit does end up with a lot of movement,\n\n515\n00:25:01.330 --> 00:25:02.730\na lot of moving parts that go on there.\n\n516\n00:25:02.730 --> 00:25:03.800\nSo we do have to be careful with that.\n\n517\n00:25:05.420 --> 00:25:09.850\nAll right, so let's say that we\nwant to get DRS up and going.\n\n518\n00:25:09.850 --> 00:25:11.370\nIt's really just a checkmark.\n\n519\n00:25:11.370 --> 00:25:13.170\nIt's one of the easier\nthings to configure.\n\n520\n00:25:13.170 --> 00:25:14.580\nI've got a cluster here, and\n\n521\n00:25:14.580 --> 00:25:17.460\nthis is the cluster that we configured\nHA on in an earlier episode.\n\n522\n00:25:17.460 --> 00:25:23.500\nSo we've got host01 and host02, they're\nclustered together in the ITProTVLab,\n\n523\n00:25:23.500 --> 00:25:25.390\nand if I go into management and\n\n524\n00:25:25.390 --> 00:25:29.160\nsettings, you'll see where I've got\nvSphere HA is turned on, right.\n\n525\n00:25:29.160 --> 00:25:33.000\nSo I'm running HA, which is important,\nI need that running.\n\n526\n00:25:33.000 --> 00:25:34.820\nAnd then, I shouldn't say it that way.\n\n527\n00:25:34.820 --> 00:25:35.400\nWe don't need it.\n\n528\n00:25:35.400 --> 00:25:37.570\nYou can actually run DRS without HA.\n\n529\n00:25:37.570 --> 00:25:40.205\nIt's pretty rare but you certainly can.\n\n530\n00:25:40.205 --> 00:25:44.430\nThen I'm gonna go to DRS and\nyou'll see that DRS is turned off.\n\n531\n00:25:44.430 --> 00:25:45.880\nOkay, so I'm gonna turn it on.\n\n532\n00:25:45.880 --> 00:25:51.665\nAnd when we turn it on, well you've got\ntwo buttons here, Edit and Schedule.\n\n533\n00:25:51.665 --> 00:25:53.497\nSchedule is what actually turns it on.\n\n534\n00:25:53.497 --> 00:25:58.095\nWe're gonna schedule DRS,\nyou tell it how often you want it to run.\n\n535\n00:25:58.095 --> 00:26:01.880\nThe default is, that everything\nis gonna be fully automated.\n\n536\n00:26:01.880 --> 00:26:05.940\nSo, it's just gonna evaluate\nthe environment and make decisions for\n\n537\n00:26:05.940 --> 00:26:09.980\nus, but you can do partially or\nmanual if you want.\n\n538\n00:26:09.980 --> 00:26:14.990\nIf you go manual, then what's gonna\nhappen is you tell it when to fire up and\n\n539\n00:26:14.990 --> 00:26:18.870\nyou tell it some rules of what you\nwant to move where, you define it.\n\n540\n00:26:18.870 --> 00:26:20.120\nYou can really get involved in that.\n\n541\n00:26:20.120 --> 00:26:24.580\nIf I expand it you see a little of that\ninformation that we can start to tweek.\n\n542\n00:26:24.580 --> 00:26:29.470\nLike, how aggressive we wanna be with\nour balancing, moving things around,\n\n543\n00:26:29.470 --> 00:26:33.330\nwhether we want to enable individual\nvirtual machine automation or\n\n544\n00:26:33.330 --> 00:26:35.850\nif we want it to be manual there too.\n\n545\n00:26:35.850 --> 00:26:37.499\nYou can start to customize\nsome of those options.\n\n546\n00:26:38.900 --> 00:26:41.980\nBut the real glory of it\nis to go fully automated.\n\n547\n00:26:41.980 --> 00:26:42.790\nLet it deal with it.\n\n548\n00:26:42.790 --> 00:26:45.670\nIt will evaluate the environment and\nmake the decisions.\n\n549\n00:26:45.670 --> 00:26:47.120\nAnd then we've got our power management.\n\n550\n00:26:47.120 --> 00:26:49.380\nRemember how I mentioned\nthat was off by default?\n\n551\n00:26:49.380 --> 00:26:52.040\nWe can turn that on and\ntell it to do power management.\n\n552\n00:26:52.040 --> 00:26:54.260\nIt can go manual or automatic.\n\n553\n00:26:54.260 --> 00:26:58.340\nAgain, manual is you trigger it,\nwhich somewhat defeats the purpose.\n\n554\n00:26:58.340 --> 00:27:01.430\nAnd then there's automatic where\nit just happens on its own.\n\n555\n00:27:01.430 --> 00:27:03.980\nBut if you wanna make sure it only\nhappens at the end of the day,\n\n556\n00:27:03.980 --> 00:27:06.490\nthen you go manual on it and\nyou'll have that functionality.\n\n557\n00:27:07.580 --> 00:27:11.485\nSo, I'm gonna leave my power management\noff cuz I don't want my machines going to\n\n558\n00:27:11.485 --> 00:27:14.910\nsleep in the lab here, but\nwe can set that option there.\n\n559\n00:27:14.910 --> 00:27:17.529\nThen we've got scheduling options,\nand this is pretty important,\n\n560\n00:27:17.529 --> 00:27:20.080\nbecause here's where we\nactually tell it when to run.\n\n561\n00:27:20.080 --> 00:27:20.750\nOkay.\n\n562\n00:27:20.750 --> 00:27:22.520\nThe default is no scheduler is configured.\n\n563\n00:27:22.520 --> 00:27:25.110\nThat means we've got to\nmanually trigger it.\n\n564\n00:27:25.110 --> 00:27:27.190\nBut I can edit this.\n\n565\n00:27:27.190 --> 00:27:30.860\nI can hit that little Change button,\nand now I can tell it when to run.\n\n566\n00:27:30.860 --> 00:27:31.620\nI don't.\n\n567\n00:27:31.620 --> 00:27:32.570\nRun right now.\n\n568\n00:27:32.570 --> 00:27:34.270\nThat's how we manually trigger it.\n\n569\n00:27:34.270 --> 00:27:36.860\nOr I can say, run it right after startup.\n\n570\n00:27:36.860 --> 00:27:38.970\nWhenever vCenter reboots, run it.\n\n571\n00:27:38.970 --> 00:27:41.260\nOr I can tell it to run\nat a particular time.\n\n572\n00:27:41.260 --> 00:27:42.390\nOr recurring.\n\n573\n00:27:42.390 --> 00:27:47.040\nAnd if I wanna go recurring, I can tell it\nI want it to run every hour and, you know,\n\n574\n00:27:47.040 --> 00:27:48.880\na certain amount of minutes\nafter the hour, or whatever.\n\n575\n00:27:48.880 --> 00:27:51.880\nAnd now I can trigger it to run and\nit's gonna run routinely, okay?\n\n576\n00:27:51.880 --> 00:27:54.350\nSo that's gonna make it do its job.\n\n577\n00:27:54.350 --> 00:27:58.070\nI might want to say some\nkinda daily interval or\n\n578\n00:27:58.070 --> 00:28:02.430\nwhatever, we can come through and\nspecify when we want that to happen.\n\n579\n00:28:02.430 --> 00:28:05.480\nSo maybe I'll set mine\nto run every six hours.\n\n580\n00:28:05.480 --> 00:28:09.720\nSo every six hours, it's gonna reach up\nthere and try and balance my environment.\n\n581\n00:28:09.720 --> 00:28:10.810\nAll right.\n\n582\n00:28:10.810 --> 00:28:13.210\nThen you can tell it to send\nan email whenever it's done.\n\n583\n00:28:13.210 --> 00:28:15.430\nThat's always nice if you're like,\ndid it actually work?\n\n584\n00:28:15.430 --> 00:28:15.960\nDid it happen?\n\n585\n00:28:15.960 --> 00:28:19.256\nIt can tick us an email off\nto let us know what happened.\n\n586\n00:28:19.256 --> 00:28:24.854\nI'm gonna say OK to that, and now that\nthat's done I've got a schedule to find.\n\n587\n00:28:24.854 --> 00:28:30.766\nNow I can just hit Edit over here,\nand I can hit the important checkmark.\n\n588\n00:28:30.766 --> 00:28:32.795\nTurn on vSphere DRS.\n\n589\n00:28:32.795 --> 00:28:36.578\nAll right, and you'll actually see, I've\ngot some of the same options that I have\n\n590\n00:28:36.578 --> 00:28:40.220\nwhen I click that schedule button in here,\nbut in this screen I can do HA as well.\n\n591\n00:28:40.220 --> 00:28:43.690\nSo if I'm gonna set that up, I can\nconfigure both and get them in place.\n\n592\n00:28:43.690 --> 00:28:46.050\nBut I've pretty much got\neverything the way that I want it,\n\n593\n00:28:46.050 --> 00:28:47.700\nso I don't need to do anything else.\n\n594\n00:28:47.700 --> 00:28:48.200\nI'll hit OK.\n\n595\n00:28:49.260 --> 00:28:51.790\nAnd now DRS is turned on.\n\n596\n00:28:51.790 --> 00:28:54.720\nOkay.\nIt's on, it's running and\n\n597\n00:28:54.720 --> 00:28:57.650\nnow we should be balancing.\n\n598\n00:28:57.650 --> 00:28:59.590\nWell, when it runs if\nI were to trigger it,\n\n599\n00:28:59.590 --> 00:29:01.650\nif I were to go and\nfire that up, it's gonna run.\n\n600\n00:29:01.650 --> 00:29:04.450\nNow, if I go to schedule DRS.\n\n601\n00:29:04.450 --> 00:29:07.340\nAnd I go to my scheduling options and\nI change this and I tell it\n\n602\n00:29:07.340 --> 00:29:11.480\nto run right now, I can tell it to run and\nit's gonna evaluate my environment.\n\n603\n00:29:11.480 --> 00:29:15.190\nAnd it's gonna look at how I'm\neating up processor and memory.\n\n604\n00:29:15.190 --> 00:29:18.904\nAnd look at what's available on\nthe different hosts and evaluate that, and\n\n605\n00:29:18.904 --> 00:29:21.400\nthen make sure that it\nmoves things around.\n\n606\n00:29:21.400 --> 00:29:26.530\nNow I got a failure because I already\nhad an automated schedule in place.\n\n607\n00:29:26.530 --> 00:29:29.980\nI'm trying to run manually while I have an\nautomated schedule, so it's upset with me.\n\n608\n00:29:29.980 --> 00:29:33.540\nSo I'll just ignore that, but I can go and\nturn off the automated schedule and\n\n609\n00:29:33.540 --> 00:29:35.650\nthen run it manually if I wanted.\n\n610\n00:29:35.650 --> 00:29:37.420\nBut now it's set up to go.\n\n611\n00:29:37.420 --> 00:29:39.680\nIf I go under my scheduled tasks,\n\n612\n00:29:39.680 --> 00:29:44.170\nhere's where I should have run it, here's\nthe task that's already set up, right?\n\n613\n00:29:44.170 --> 00:29:46.510\nAnd so I can take that task and\n\n614\n00:29:46.510 --> 00:29:49.480\njust run it, instead of trying\nto create a new schedule.\n\n615\n00:29:49.480 --> 00:29:52.280\nAnd see how I can define\nmore than one schedule.\n\n616\n00:29:52.280 --> 00:29:55.840\nSo, if I wanted to run,\nremember how I said run every 15 minutes?\n\n617\n00:29:55.840 --> 00:29:58.778\nI didn't have a minutes option in there,\nright?\n\n618\n00:29:58.778 --> 00:30:02.180\nBut I can create one schedule\nthat ran every hour,\n\n619\n00:30:02.180 --> 00:30:07.040\none that ran 15 minutes after every hour,\none that ran 30 minutes after every hour,\n\n620\n00:30:07.040 --> 00:30:08.780\nand one that ran 45\nminutes after every hour.\n\n621\n00:30:08.780 --> 00:30:10.440\nAnd so that's how we could\ncreate that 15 minutes.\n\n622\n00:30:10.440 --> 00:30:12.310\nYou can get a little more specific, but\n\n623\n00:30:12.310 --> 00:30:16.510\nright now it's set to run every six hours\nand it's running in the background.\n\n624\n00:30:17.990 --> 00:30:20.380\nNow when it runs, what does it do?\n\n625\n00:30:20.380 --> 00:30:21.660\nWell, it moves stuff around.\n\n626\n00:30:21.660 --> 00:30:24.520\nIn my environment it's a lab, so\nreally nothing's going on here.\n\n627\n00:30:24.520 --> 00:30:25.640\nThere's not much to move.\n\n628\n00:30:25.640 --> 00:30:27.140\nEverything's pretty idle.\n\n629\n00:30:27.140 --> 00:30:28.450\nBut in your environment,\n\n630\n00:30:28.450 --> 00:30:32.380\nit may see that one node is\ngenerating a lot of CPU utilization,\n\n631\n00:30:32.380 --> 00:30:37.110\none node is generating a lot of memory,\nand it'll start to balance based on that.\n\n632\n00:30:37.110 --> 00:30:39.320\nAnd it runs and it does a great job.\n\n633\n00:30:39.320 --> 00:30:42.050\nNow, there are advanced tools\nthat can go even further,\n\n634\n00:30:42.050 --> 00:30:44.600\nthat can look at disc IO and network.\n\n635\n00:30:44.600 --> 00:30:47.210\nBut by default, this is really just\nlooking at CPU and memory, and\n\n636\n00:30:47.210 --> 00:30:49.050\nbalancing things based on that, right?\n\n637\n00:30:49.050 --> 00:30:53.520\nAnd for\nthe most part it does a good job with it.\n\n638\n00:30:53.520 --> 00:30:57.870\nNow, it seems like DRS is\npretty easy to configure.\n\n639\n00:30:57.870 --> 00:31:00.980\nAnd what we've done so far is pretty easy.\n\n640\n00:31:00.980 --> 00:31:03.460\nBut, we can influence DRS.\n\n641\n00:31:03.460 --> 00:31:06.730\nIf I don't care, if I just wanna turn\nit over to DRS, let it deal with it and\n\n642\n00:31:06.730 --> 00:31:08.200\nI don't wanna mess with it,\nthen we're done.\n\n643\n00:31:08.200 --> 00:31:10.690\nWe can wrap this episode up and that's it.\n\n644\n00:31:10.690 --> 00:31:14.890\nBut you may wanna get involved and\ndefine what's called affinity.\n\n645\n00:31:14.890 --> 00:31:19.220\nAffinity is where we start influencing\nthe decisions that DRS makes.\n\n646\n00:31:19.220 --> 00:31:22.660\nThis is where we tell it,\nit's okay to balance things, but\n\n647\n00:31:22.660 --> 00:31:26.330\nI'd really like it if my\nSQL server were over here.\n\n648\n00:31:26.330 --> 00:31:29.670\nOr I might have two virtual\nmachines that work together.\n\n649\n00:31:29.670 --> 00:31:33.440\nAnd so when we move them around, I wanna\nkeep them together, because if one virtual\n\n650\n00:31:33.440 --> 00:31:35.886\nmachine is on this hardware and another\nvirtual machine is on this other hardware,\n\n651\n00:31:35.886 --> 00:31:38.130\nnow they've gotta talk across the network.\n\n652\n00:31:38.130 --> 00:31:39.780\nWhereas if they were on the same host,\n\n653\n00:31:39.780 --> 00:31:42.890\nthey could talk right through\nvSphere's bust, which is a lot faster.\n\n654\n00:31:42.890 --> 00:31:44.740\nSo I wanna keep them together.\n\n655\n00:31:44.740 --> 00:31:46.200\nIt doesn't know that by default.\n\n656\n00:31:46.200 --> 00:31:47.410\nWe've gotta influence it.\n\n657\n00:31:47.410 --> 00:31:49.550\nAnd I know I'm running low on time for\nthis episode.\n\n658\n00:31:49.550 --> 00:31:51.685\nSo Wes,\nwhy don't we do a part two on this one,\n\n659\n00:31:51.685 --> 00:31:55.120\ncuz I really wanna show everybody\nhow to be able to manually\n\n660\n00:31:55.120 --> 00:31:58.870\ninterfere [LAUGH] with DRS and\nget Andy kinda teaching our wishes.\n\n661\n00:31:58.870 --> 00:31:59.460\n>> All right.\n\n662\n00:31:59.460 --> 00:32:01.120\nSo that sounds good.\n\n663\n00:32:01.120 --> 00:32:02.630\nDo you want to say any parting words?\n\n664\n00:32:02.630 --> 00:32:04.860\nDo you wanna go ahead and\njust put that in part two?\n\n665\n00:32:04.860 --> 00:32:06.090\n>> Let's wrap it up there cuz I know,\n\n666\n00:32:06.090 --> 00:32:08.370\ndefinitely, if I started talking about\nit now, I'm gonna go on too long.\n\n667\n00:32:08.370 --> 00:32:09.840\nSo there is more to DRS.\n\n668\n00:32:09.840 --> 00:32:11.850\nBut if you wanna just be automatic,\nthat's it.\n\n669\n00:32:11.850 --> 00:32:14.911\nIt's as easy as checking the little\nbox and setting a schedule,\n\n670\n00:32:14.911 --> 00:32:16.800\nand turning it loose, and it does its job.\n\n671\n00:32:16.800 --> 00:32:20.600\nRemember that DRS does play nice with HA,\nso\n\n672\n00:32:20.600 --> 00:32:23.157\nwe didn't have to disable HA,\nthey do play nice together.\n\n673\n00:32:23.157 --> 00:32:25.940\nIt plays nice with FT,\nif you have fall tolerance turned on.\n\n674\n00:32:25.940 --> 00:32:29.500\nThe one to remember, that I mentioned\nearlier, that Fault Tolerance and VMCP,\n\n675\n00:32:29.500 --> 00:32:32.060\nthose two don't play nice together.\n\n676\n00:32:32.060 --> 00:32:36.570\nYou can turn them both on, Fault Tolerance\nwill automatically disable VMCP.\n\n677\n00:32:36.570 --> 00:32:38.700\nRemember that, it's a great exam question.\n\n678\n00:32:38.700 --> 00:32:40.790\n>> All right, Don, well thank you for\nbeing in the studios with us.\n\n679\n00:32:40.790 --> 00:32:42.380\nAnd thank you to you,\nthe viewer, for watching.\n\n680\n00:32:42.380 --> 00:32:43.780\nCome back and see us in part two.\n\n681\n00:32:43.780 --> 00:32:47.090\nUntil then, signing off for ITProTV,\nI've been your host Wes Bryan.\n\n682\n00:32:47.090 --> 00:32:47.923\n>> And I'm Don Pezet.\n\n683\n00:32:47.923 --> 00:32:50.344\n>> And we'll see you next time.\n\n684\n00:32:50.344 --> 00:32:58.150\n[SOUND]\n\n",
          "vimeoId": "170160601"
        },
        {
          "description": "In this episode, Wes and Don continue their discussion in the world of fault tolerance and the Distributed Resources Scheduler (DRS). They explain how to influence DRS and a concept known as affinity.",
          "length": "1635",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-2-2-fault_tolerance_and_drs_pt2-060916-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-2-2-fault_tolerance_and_drs_pt2-060916-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-9-2-2-fault_tolerance_and_drs_pt2-060916-1-sm.jpg",
          "title": "Fault Tolerance and DRS Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.019 --> 00:00:10.019\n[MUSIC]\n\n2\n00:00:11.768 --> 00:00:14.570\nWelcome back to another exciting\nepisode here at IT Pro TV.\n\n3\n00:00:14.570 --> 00:00:16.180\nI'm your host, Wes Bryan, and\n\n4\n00:00:16.180 --> 00:00:19.430\nin today's episode we're coming\nback at you with some more VMware.\n\n5\n00:00:19.430 --> 00:00:21.920\nThat's right,\nVMware Certified Professional Version 6.\n\n6\n00:00:21.920 --> 00:00:23.460\nThis is actually a part 2.\n\n7\n00:00:23.460 --> 00:00:25.030\nI know what you're thinking out there.\n\n8\n00:00:25.030 --> 00:00:29.250\nWe let Don talk way too much in part 1,\nso without further adieu, Don,\n\n9\n00:00:29.250 --> 00:00:30.220\nhow are you doing, sir?\n\n10\n00:00:30.220 --> 00:00:31.290\n>> I'm doing swell, Wes,\n\n11\n00:00:31.290 --> 00:00:34.400\nso we left off talking about\nthe Distributed Resource Scheduler.\n\n12\n00:00:34.400 --> 00:00:37.610\nAnd we got it configured, we got it\nset up and we have it running and and\n\n13\n00:00:37.610 --> 00:00:38.650\ntechnically we are done.\n\n14\n00:00:38.650 --> 00:00:40.760\nIf we just want the DRS to do its thing,\n\n15\n00:00:40.760 --> 00:00:43.570\nbalance out our workload,\nits gonna do it, right?\n\n16\n00:00:43.570 --> 00:00:46.240\nIt's set up and\nit's well enabled to do it.\n\n17\n00:00:46.240 --> 00:00:51.810\nMaybe we put it in manual mode, so\nnow we pick when it does what it does but\n\n18\n00:00:51.810 --> 00:00:54.390\nas far as what it does,\nit's kind of up to it.\n\n19\n00:00:54.390 --> 00:00:56.520\nYou certainly can leave it that way.\n\n20\n00:00:56.520 --> 00:01:00.890\nBut there's things that you know about\nyour environment that DRS doesn't know.\n\n21\n00:01:00.890 --> 00:01:04.990\nAnd so there's decisions DRS might\nmake that are actually not good for\n\n22\n00:01:04.990 --> 00:01:07.980\nyour environment, and\nit's up to you to teach it.\n\n23\n00:01:07.980 --> 00:01:10.890\nSo there are some things that\nwe need to get in there to do\n\n24\n00:01:10.890 --> 00:01:14.690\nto tweak the way that DRS works to make it\nwork the right way for our environment.\n\n25\n00:01:14.690 --> 00:01:17.775\nTo get the the most optimal\nperformance possible,\n\n26\n00:01:17.775 --> 00:01:20.270\ncuz that's what DRS is all about,\nit's performance.\n\n27\n00:01:20.270 --> 00:01:24.740\nSo what we're going to mess within this\nepisode is what's called Affinity.\n\n28\n00:01:24.740 --> 00:01:25.720\nWhen you create a cluster,\n\n29\n00:01:25.720 --> 00:01:28.830\nif you remember way back in\nthe first cluster episode we did.\n\n30\n00:01:28.830 --> 00:01:32.470\nI created a cluster and I had\na virtual machine in that cluster and\n\n31\n00:01:32.470 --> 00:01:36.890\nI said how by default if one\nof the nodes were to fail\n\n32\n00:01:38.110 --> 00:01:40.390\nthe virtual machine wouldn't\nactually flip over.\n\n33\n00:01:40.390 --> 00:01:42.150\nIt's kind of married to that one host.\n\n34\n00:01:42.150 --> 00:01:47.622\nI would have to manually restart it on\nthe other host unless I configured vSphere\n\n35\n00:01:47.622 --> 00:01:51.060\nHA or VMotion and all the other stuff and\nthen you start to get that functionality.\n\n36\n00:01:51.060 --> 00:01:56.220\nBut in a basic cluster, each VM is kind of\nmarried to the node that you put it on.\n\n37\n00:01:56.220 --> 00:01:57.930\nNow that's called affinity.\n\n38\n00:01:57.930 --> 00:02:03.290\nYou have an affinity, an affection for one\nparticular server or host over the others.\n\n39\n00:02:03.290 --> 00:02:08.000\nWell in DRS we don't\nnecessarily have that anymore.\n\n40\n00:02:08.000 --> 00:02:10.760\nNow DRS decides where you're going to be.\n\n41\n00:02:10.760 --> 00:02:14.560\nAnd so my web server might\nbe on host03 right now.\n\n42\n00:02:14.560 --> 00:02:16.630\nAnd by the end of the day\nit might be on host07.\n\n43\n00:02:16.630 --> 00:02:20.780\nAnd when I come in to work in the morning,\nit might be on host02.\n\n44\n00:02:20.780 --> 00:02:23.670\nIt'll bounce around based\non what's out there.\n\n45\n00:02:23.670 --> 00:02:26.520\nAnd if I have a virtual\nmachine that's turned off\n\n46\n00:02:26.520 --> 00:02:29.830\nwhen I go to power the virtual machine on,\nwhere does it end up?\n\n47\n00:02:29.830 --> 00:02:31.990\nWell, who knows where, right?\n\n48\n00:02:31.990 --> 00:02:33.690\nLet me show you what I mean.\n\n49\n00:02:33.690 --> 00:02:37.370\nWhen I created a virtual machine,\nif you go back and\n\n50\n00:02:37.370 --> 00:02:40.460\nwatch the clustering episode,\nI went to create a virtual machine.\n\n51\n00:02:40.460 --> 00:02:44.780\nAnd I right clicked on the cluster,\nand I went to new virtual machine and\n\n52\n00:02:44.780 --> 00:02:46.760\nstarted the virtual machine wizard.\n\n53\n00:02:46.760 --> 00:02:50.250\nI said I was gonna create a new\nvirtual machine from nothing.\n\n54\n00:02:50.250 --> 00:02:52.020\nAnd it asked me where I wanted to put it.\n\n55\n00:02:52.020 --> 00:02:54.250\nI wanted to put it in my data center.\n\n56\n00:02:54.250 --> 00:02:56.890\nAnd then it asked for my compute resource.\n\n57\n00:02:56.890 --> 00:03:02.990\nAnd on the compute resource screen, if I\ncan get to it, I gotta give it a name.\n\n58\n00:03:02.990 --> 00:03:04.950\nAll right, so this will be a web02.\n\n59\n00:03:04.950 --> 00:03:08.248\nSo the arrow was off the top of my screen,\nI couldn't see it.\n\n60\n00:03:08.248 --> 00:03:08.748\nThere we go.\n\n61\n00:03:09.990 --> 00:03:14.400\nIn that episode, I chose the cluster,\nand I got an error.\n\n62\n00:03:14.400 --> 00:03:18.900\nAnd the error said that the cluster\ndid not have DRS enabled, and so\n\n63\n00:03:18.900 --> 00:03:21.340\nI had to pick a host.\n\n64\n00:03:21.340 --> 00:03:26.020\nI had to expand the cluster, and\npick a host, and I picked host01, right?\n\n65\n00:03:26.020 --> 00:03:29.030\nThat's what we did back in that episode,\ncuz we didn't have DRS.\n\n66\n00:03:29.030 --> 00:03:32.090\nNow that I have DRS,\nI can pick the cluster.\n\n67\n00:03:32.090 --> 00:03:33.470\nSee, I\"m not getting an error.\n\n68\n00:03:33.470 --> 00:03:34.980\nCompatibility check succeeded.\n\n69\n00:03:34.980 --> 00:03:38.440\nI can attach it to the cluster itself,\nnot to a host.\n\n70\n00:03:38.440 --> 00:03:40.210\nThat's neat.\n\n71\n00:03:40.210 --> 00:03:44.400\nWell, because I can now add\nnew hosts to the cluster, and\n\n72\n00:03:44.400 --> 00:03:48.460\nthis virtual machine could bounce around\nto any of them, It doesn't matter.\n\n73\n00:03:48.460 --> 00:03:53.560\nIf I bind it to host01 and then later\nI use VMotion to move it to host03,\n\n74\n00:03:54.800 --> 00:03:56.140\nand I delete host01.\n\n75\n00:03:57.310 --> 00:03:59.110\nThe next time I shut that\nvirtual machine down and\n\n76\n00:03:59.110 --> 00:04:01.765\nboot it back up it's gonna try and\nboot from host01 and\n\n77\n00:04:01.765 --> 00:04:03.940\nhost01 doesn't exist anymore so\nit's going to be unhappy about that.\n\n78\n00:04:03.940 --> 00:04:04.580\nI'm going to get errors.\n\n79\n00:04:04.580 --> 00:04:07.670\nIt will boost off another host,\nbut it'll throw a bunch of errors.\n\n80\n00:04:07.670 --> 00:04:10.180\nBut with DRS I can attach to the cluster.\n\n81\n00:04:10.180 --> 00:04:12.730\nAnd I can say hey when you boot\nup I don't care where you go,\n\n82\n00:04:12.730 --> 00:04:15.640\njust grab a host in the cluster.\n\n83\n00:04:15.640 --> 00:04:20.110\nAnd to make sure we're optimal,\nDRS might give you different instruction.\n\n84\n00:04:20.110 --> 00:04:22.850\nAnd DRS will, DRS will say okay,\nyou're booting up,\n\n85\n00:04:22.850 --> 00:04:26.200\nand you're over here on host 03,\nand let me move you to host 05.\n\n86\n00:04:26.200 --> 00:04:29.240\nIt's got some better resources available,\nright?\n\n87\n00:04:29.240 --> 00:04:30.110\nDRS will get involved,\n\n88\n00:04:30.110 --> 00:04:34.200\nso it's neat that we can do that,\nwe can attach it to the cluster.\n\n89\n00:04:34.200 --> 00:04:38.720\nAnd now, as we add host to remove\nhost from the cluster, that's fine.\n\n90\n00:04:38.720 --> 00:04:41.970\nAnd this functionality is really cool for\nstandalone virtual machines.\n\n91\n00:04:41.970 --> 00:04:46.520\nSo virtual machines are independent,\nthis works out really well.\n\n92\n00:04:46.520 --> 00:04:51.130\nBut what if I have virtual\nmachines that aren't independent.\n\n93\n00:04:51.130 --> 00:04:52.890\nWhat if they worked together, right?\n\n94\n00:04:52.890 --> 00:04:55.830\nOr actually there's a few\ndifferent examples here.\n\n95\n00:04:55.830 --> 00:04:58.560\nLet me give you a happy example and\n\n96\n00:04:58.560 --> 00:05:00.750\na sad example,\nwe'll go all emotional in this episode.\n\n97\n00:05:00.750 --> 00:05:01.810\nSo happy example,\n\n98\n00:05:01.810 --> 00:05:04.560\nlet's say I have two virtual\nmachines that really work together.\n\n99\n00:05:04.560 --> 00:05:07.840\nI'm gonna finish creating\nthis web server real quick.\n\n100\n00:05:07.840 --> 00:05:10.530\nActually it'd probably be faster just\nto clone my existing web servers.\n\n101\n00:05:10.530 --> 00:05:13.320\nLet me take this existing web server and\nI'm gonna clone it.\n\n102\n00:05:13.320 --> 00:05:16.110\nWhen I go to clone my web server,\n\n103\n00:05:16.110 --> 00:05:19.680\nI'm gonna clone it to a virtual machine,\nI'll call it web02.\n\n104\n00:05:19.680 --> 00:05:24.090\nAnd it's gonna ask me where to put it and\nI can come in and for\n\n105\n00:05:24.090 --> 00:05:25.850\nthe compute resource,\nI can pick the cluster, right?\n\n106\n00:05:25.850 --> 00:05:26.680\nSo that's what I'm gonna do.\n\n107\n00:05:26.680 --> 00:05:29.180\nI'm gonna pick the cluster and\nthen I'll finish that up.\n\n108\n00:05:29.180 --> 00:05:32.250\nIt can go right into shared storage.\n\n109\n00:05:32.250 --> 00:05:36.393\nI'm not gonna customize it and\nwe'll finish that up, there okay.\n\n110\n00:05:36.393 --> 00:05:40.910\nSo, I've got two virtual machines,\nweb01 and db01, alright?\n\n111\n00:05:40.910 --> 00:05:42.770\nOne's a web server,\none's a database server.\n\n112\n00:05:42.770 --> 00:05:44.580\nLet's say I'm running WordPress.\n\n113\n00:05:44.580 --> 00:05:47.070\nWith WordPress you have a webpage,\n\n114\n00:05:47.070 --> 00:05:51.645\nthat's the frontend your clients see and\nthen the webpage reaches back and\n\n115\n00:05:51.645 --> 00:05:55.360\ngets all of its data from\na database server, probably my SQL.\n\n116\n00:05:55.360 --> 00:05:59.240\nSo I've got a database server and a web\nserver and the the two talk to each other.\n\n117\n00:05:59.240 --> 00:06:05.830\nNow when they're both on the same host,\nif both of these guys are are on host01,\n\n118\n00:06:05.830 --> 00:06:12.040\nthen they can talk to each other right\nthrough the hypervisor on that host.\n\n119\n00:06:12.040 --> 00:06:13.409\nHow much bandwidth do we\nhave on the hypervisor?\n\n120\n00:06:14.590 --> 00:06:16.450\nTons, tons and tons of bandwidth.\n\n121\n00:06:16.450 --> 00:06:19.530\nYou will get a very rapid,\nvery quick communication, and\n\n122\n00:06:19.530 --> 00:06:23.300\nyou'll easily have a gigabit or\nmore of communication bandwidth\n\n123\n00:06:23.300 --> 00:06:26.040\nto be able to talk between\nthe database and the web server.\n\n124\n00:06:26.040 --> 00:06:27.080\nThey'll run nice and fast.\n\n125\n00:06:28.670 --> 00:06:32.580\nWhat if the web server was on host01 and\nthe database server was on host02?\n\n126\n00:06:33.580 --> 00:06:36.100\nNow I can't talk directly\nthrough the hypervisor.\n\n127\n00:06:36.100 --> 00:06:39.280\nNow I've got to go to\na physical network adapter,\n\n128\n00:06:39.280 --> 00:06:41.920\njump over the network to the other host,\nand go in.\n\n129\n00:06:41.920 --> 00:06:44.910\nAnd not only am I using the physical\nnetwork adapter that caps me at\n\n130\n00:06:44.910 --> 00:06:49.170\na gigabit or 10 gig or whatever type\nadapter I have I also have contention.\n\n131\n00:06:49.170 --> 00:06:51.770\nThere are other people who are using\nthat network adapter and so\n\n132\n00:06:51.770 --> 00:06:53.930\nI don't necessarily have full,\nexclusive access to it.\n\n133\n00:06:53.930 --> 00:06:57.480\nSo my performance is going\nto degrade a bit, not bad.\n\n134\n00:06:57.480 --> 00:06:59.700\nI mean there's plenty of people\nwho have a database server and\n\n135\n00:06:59.700 --> 00:07:01.230\nweb server on a network already.\n\n136\n00:07:01.230 --> 00:07:03.370\nSo it's not like it's\nworse than the old model.\n\n137\n00:07:03.370 --> 00:07:04.798\nBut it's not as good as it could be,\n\n138\n00:07:04.798 --> 00:07:07.477\nif I was taking advantage of\nhypervisor communications, right?\n\n139\n00:07:07.477 --> 00:07:11.577\nSo I kind of want these two, I want\nthe database server and the web server,\n\n140\n00:07:11.577 --> 00:07:14.220\nthese two guys, these two guys here.\n\n141\n00:07:14.220 --> 00:07:16.280\nI want them to be on the same host.\n\n142\n00:07:16.280 --> 00:07:18.140\nBut with DRS I can't guarantee that.\n\n143\n00:07:18.140 --> 00:07:21.890\nDRS might move the database server to\none host and the web server to another.\n\n144\n00:07:21.890 --> 00:07:24.620\nSo I want to influence that.\n\n145\n00:07:24.620 --> 00:07:28.110\nAnd the way we influence that is\nif you choose your cluster and\n\n146\n00:07:28.110 --> 00:07:32.830\nyou go to manage and then settings.\n\n147\n00:07:32.830 --> 00:07:35.790\nInside of your settings,\nwe've got vSphere HA, right?\n\n148\n00:07:35.790 --> 00:07:39.200\nWhich is where we set up high availability\nand we've got vSphere DRS and\n\n149\n00:07:39.200 --> 00:07:40.300\nwe'll turn that on.\n\n150\n00:07:40.300 --> 00:07:44.714\nBut we don't get anything in there that\nlet's us manipulate how it functions.\n\n151\n00:07:44.714 --> 00:07:50.989\nIf you scroll down though in the settings,\nyou'll find somewhere in here, that there.\n\n152\n00:07:50.989 --> 00:07:54.848\nVM Host Groups and\nVM Host Rules, all right?\n\n153\n00:07:54.848 --> 00:07:58.522\nIn ESXi 5.5 and earlier and\nvCenter 5.5 and\n\n154\n00:07:58.522 --> 00:08:03.620\nearlier, these were called\nDSR Host Groups and DSR Host Rules.\n\n155\n00:08:03.620 --> 00:08:08.220\nThey renamed them in 6.0, so now they're\ncalled VMHost Groups and VMHost Rules.\n\n156\n00:08:08.220 --> 00:08:13.665\nThese are how we can manipulate\nthe way that DRS functions and\n\n157\n00:08:13.665 --> 00:08:18.470\nwe can tell it keep these\nvirtual machines together or\n\n158\n00:08:18.470 --> 00:08:21.915\nspilt these virtual machines apart.\n\n159\n00:08:21.915 --> 00:08:24.590\nYou have positive affinity and\nnegative affinity.\n\n160\n00:08:24.590 --> 00:08:26.260\nPositive is where you\nwanna keep them together,\n\n161\n00:08:26.260 --> 00:08:31.320\nnegative is you wanna split them and\ndon't let them stay next to each other.\n\n162\n00:08:31.320 --> 00:08:35.851\nSo we can start to set that up,\nit's like the opposite of affinity,\n\n163\n00:08:35.851 --> 00:08:37.769\nwe need to split them apart.\n\n164\n00:08:37.769 --> 00:08:40.130\nLet me give you an example,\nthat would be our sad example.\n\n165\n00:08:40.130 --> 00:08:42.190\nSo a happy example,\nI wanna keep them together.\n\n166\n00:08:42.190 --> 00:08:45.170\nDatabase01 and WEB01,\nI wanna keep them together.\n\n167\n00:08:45.170 --> 00:08:47.130\nWhat about WEB01 and WEb02?\n\n168\n00:08:47.130 --> 00:08:51.550\nWell what if I add a second web server and\nthe whole reason for\n\n169\n00:08:51.550 --> 00:08:54.930\nhaving that second web\nserver is redundancy.\n\n170\n00:08:54.930 --> 00:08:58.980\nI wanna make sure if that one web server\ngoes down, the other one is still up and\n\n171\n00:08:58.980 --> 00:09:00.340\nI can keep my system online.\n\n172\n00:09:01.540 --> 00:09:05.350\nor if I'm load balancing for performance,\nI wanna eek some extra performance out, so\n\n173\n00:09:05.350 --> 00:09:07.020\nI add a second web server.\n\n174\n00:09:07.020 --> 00:09:11.850\nWell if both of the web servers are on\nthe same host and the host fails,\n\n175\n00:09:11.850 --> 00:09:13.020\nwhat's gonna happen?\n\n176\n00:09:13.020 --> 00:09:15.080\nBoth web servers have to reboot,\n\n177\n00:09:15.080 --> 00:09:17.760\nI don't want those web\nservers on the same hardware.\n\n178\n00:09:17.760 --> 00:09:21.610\nI want one web server on host one and\none web server on host two.\n\n179\n00:09:21.610 --> 00:09:25.690\nThat way, if the first one fails yeah,\nthat web server is gonna have to reboot.\n\n180\n00:09:25.690 --> 00:09:29.288\nBut the web server running on host two,\nstill okay, still up and running,\n\n181\n00:09:29.288 --> 00:09:29.984\nit's happy.\n\n182\n00:09:29.984 --> 00:09:31.692\nI wanna keep them apart.\n\n183\n00:09:31.692 --> 00:09:36.501\nSo sometimes we wanna keep VMs together,\nsometimes you wanna keep VMs split apart,\n\n184\n00:09:36.501 --> 00:09:39.219\nand these are the rules\nthat let us define that.\n\n185\n00:09:39.219 --> 00:09:43.294\nSo in my settings I'm gonna go\ndown to my VMHost Groups, and\n\n186\n00:09:43.294 --> 00:09:48.685\nin the VMHost Groups here's where I can\nstart to create definitions of hosts.\n\n187\n00:09:48.685 --> 00:09:54.058\nAnd so I can come in here and\nI can add a group and\n\n188\n00:09:54.058 --> 00:09:59.730\nI might call this my WordPress app or\nwhatever.\n\n189\n00:09:59.730 --> 00:10:02.375\nSo I've got an application\ncalled WordPress, and\n\n190\n00:10:02.375 --> 00:10:05.580\nthese are gonna be ones\nthat I wanna keep together.\n\n191\n00:10:05.580 --> 00:10:09.553\nSo my WEB01 and Database01.\n\n192\n00:10:09.553 --> 00:10:12.897\nSo I'm gonna create that and when I\ncreate it it asked me for a type and\n\n193\n00:10:12.897 --> 00:10:15.199\nyou can pick between a VM Group or\na Host Group.\n\n194\n00:10:15.199 --> 00:10:16.894\nI'm gonna go with a VM Group.\n\n195\n00:10:16.894 --> 00:10:20.790\nA Host Group is\na collection of ESXi boxes.\n\n196\n00:10:20.790 --> 00:10:25.490\nI might have a 16 node cluster, but\nI wanna keep my database servers\n\n197\n00:10:25.490 --> 00:10:29.560\non these four nodes and\nmy web servers on these other four nodes.\n\n198\n00:10:29.560 --> 00:10:30.370\nWhy would I do that?\n\n199\n00:10:30.370 --> 00:10:35.015\nWell maybe some of my nodes have\nbetter fiber channel adapters or\n\n200\n00:10:35.015 --> 00:10:39.690\n10 gig Ethernet adapters and other nodes\nonly have 1 gig Ethernet adapters.\n\n201\n00:10:39.690 --> 00:10:42.580\nAnd so I want my network intensive stuff\nto be on the nodes that have the better\n\n202\n00:10:42.580 --> 00:10:43.359\nnetwork adapters.\n\n203\n00:10:43.359 --> 00:10:47.220\nSo I can create Host Groups\nthat define those.\n\n204\n00:10:47.220 --> 00:10:49.870\nHere's a Host Group\ncalled 10 gig Ethernet.\n\n205\n00:10:49.870 --> 00:10:51.840\nHere's a host group called 1 gig Ethernet.\n\n206\n00:10:51.840 --> 00:10:54.810\nAnd now when I balance this stuff I can\nput them in the appropriate group so\n\n207\n00:10:54.810 --> 00:10:55.890\nthey get those resources.\n\n208\n00:10:55.890 --> 00:11:00.780\nThis is again, me influencing the affinity\nand how DRS makes its decisions.\n\n209\n00:11:00.780 --> 00:11:03.619\nBut I'm doing a VM Group\nhere in my WordPress app and\n\n210\n00:11:03.619 --> 00:11:07.729\nI'm gonna add, and I'm gonna go\nthrough and pick, WEB01 and DB01.\n\n211\n00:11:07.729 --> 00:11:11.902\nI'm gonna group them together so that I\ncan tell it hey, keep these guys together.\n\n212\n00:11:11.902 --> 00:11:13.789\nI want them together at all times.\n\n213\n00:11:15.070 --> 00:11:18.230\nLet's all say okay, and\nnow I've got that group.\n\n214\n00:11:18.230 --> 00:11:23.690\nI'm gonna create another group,\nwhich I'll call my web servers.\n\n215\n00:11:23.690 --> 00:11:26.480\nSo I'm just gonna call\nthis one web servers.\n\n216\n00:11:26.480 --> 00:11:29.040\nAnd it's another VM Group and\nI'll go in here and\n\n217\n00:11:29.040 --> 00:11:32.160\nadd, and I'm going to add WEB01 and WEB02.\n\n218\n00:11:32.160 --> 00:11:35.070\nIn reality, I'd add all my web\nservers that were part of this\n\n219\n00:11:35.070 --> 00:11:39.140\nredundant web environment and I'm gonna\nuse that group to split them apart.\n\n220\n00:11:40.420 --> 00:11:44.060\nBut here, I'm just creating groups,\nthe groups don't actually do anything.\n\n221\n00:11:44.060 --> 00:11:49.170\nI can create groups to my hearts content\nand the DR is just gonna ignore them.\n\n222\n00:11:49.170 --> 00:11:51.592\nSo a group by itself is useless,\n\n223\n00:11:51.592 --> 00:11:55.558\nI have to add rules to make\nit actually do something.\n\n224\n00:11:55.558 --> 00:11:59.445\nSo I can continue to add more groups based\non whatever it is I want and a VM and\n\n225\n00:11:59.445 --> 00:12:02.250\na host can be in more than one group.\n\n226\n00:12:02.250 --> 00:12:07.471\nSo I might have a group\ncalled 10gb-Ethernet,\n\n227\n00:12:07.471 --> 00:12:12.530\nand so I come in and I take any host\nthat has 10gb-Ethernet adapters.\n\n228\n00:12:12.530 --> 00:12:14.650\nAnd I put them in here, so\nmaybe it's just host01.\n\n229\n00:12:15.840 --> 00:12:19.230\nAnd so I'm gonna throw that one in there,\nhost01 is now in the 10gb-Ethernet group.\n\n230\n00:12:19.230 --> 00:12:23.946\nAnd then I create another Host Group, and\n\n231\n00:12:23.946 --> 00:12:28.268\nthis one is gonna be 1gb-Ethernet.\n\n232\n00:12:28.268 --> 00:12:31.029\nThese are the ones that\nhave lower bandwidth, and\n\n233\n00:12:31.029 --> 00:12:33.669\nI might choose to add\nhost01 to this one also.\n\n234\n00:12:33.669 --> 00:12:38.921\nI know host01 is 10 gig adapters,\nbut they can certainly handle a gig.\n\n235\n00:12:38.921 --> 00:12:41.466\nIf I have 10 gig adaptors, so\nmaybe I put it in there also.\n\n236\n00:12:41.466 --> 00:12:45.080\nSo I group those together, so\nit's in more than one group.\n\n237\n00:12:45.080 --> 00:12:49.680\nAnd now, when I start picking where\ncertain VMs go, I can influence that.\n\n238\n00:12:49.680 --> 00:12:54.510\nI might do the same thing for maybe I\nhave some boxes that have 8 gig fiber\n\n239\n00:12:54.510 --> 00:12:58.790\nchannel adaptors, and some boxes that\nonly have 4 gig fiber channel adaptors or\n\n240\n00:12:58.790 --> 00:13:00.230\nancient 2 gig ones or whatever.\n\n241\n00:13:00.230 --> 00:13:03.450\nSo now I can start balancing\nbased on those resources.\n\n242\n00:13:03.450 --> 00:13:06.080\nI know that, DRS doesn't.\n\n243\n00:13:06.080 --> 00:13:07.107\nWhat's DRS looking at?\n\n244\n00:13:07.107 --> 00:13:09.970\nCPU and memory,\nthat's really what it's really looking at.\n\n245\n00:13:09.970 --> 00:13:11.510\nWell let's think CPU,\n\n246\n00:13:11.510 --> 00:13:15.400\nmaybe I've got some boxes that have Xeon\nprocessors in them and higher L2 cache,\n\n247\n00:13:15.400 --> 00:13:21.260\nand I have other boxes that have i7s\nin them and a lower amount of L2 cache.\n\n248\n00:13:21.260 --> 00:13:24.290\nWell DRS is looking at CPU utilization,\n\n249\n00:13:24.290 --> 00:13:28.380\nnot necessarily are we using all\nthe L2 cache available or whatever.\n\n250\n00:13:28.380 --> 00:13:30.840\nSo again,\nI can create groups based on that, and\n\n251\n00:13:30.840 --> 00:13:34.850\nI can keep certain VMs within those\ngroups to get that optimal performance.\n\n252\n00:13:34.850 --> 00:13:38.231\n>> Now Don, you created those groups,\nyou said the groups by themselves don't do\n\n253\n00:13:38.231 --> 00:13:41.275\nanything, so it sounds like we've\ngot to throw in a few rules, right?\n\n254\n00:13:41.275 --> 00:13:43.070\n>> Yeah, and\nthe rules are the most important part.\n\n255\n00:13:43.070 --> 00:13:46.288\nAnd in fact, there's even some times\nwhere you can skip the groups entirely.\n\n256\n00:13:46.288 --> 00:13:49.172\nAnd just go and configure the rules,\nand manually pick individual VMs.\n\n257\n00:13:49.172 --> 00:13:52.070\nIt gets a little harder to manage that\nway, because every time you add VMs,\n\n258\n00:13:52.070 --> 00:13:54.140\nyou've got to go in and\nconfigure them again.\n\n259\n00:13:54.140 --> 00:13:58.370\nBut the rules are really important, so we\nneed to dive in and get those configured.\n\n260\n00:13:58.370 --> 00:13:59.219\nSo well let's take a look at that.\n\n261\n00:13:59.219 --> 00:14:02.701\nSo I'm gonna jump down here to rules and\nI don't have any rules by default,\n\n262\n00:14:02.701 --> 00:14:06.240\nwhich means all that work I did with\ngroups is really kind of pointless unless\n\n263\n00:14:06.240 --> 00:14:08.330\nI come in here and leverage them.\n\n264\n00:14:08.330 --> 00:14:11.830\nNow, when you go to create a rule there's\nactually three different types of rules.\n\n265\n00:14:11.830 --> 00:14:14.830\nSo when you go to create one,\nit's gonna ask you to pick a name and\n\n266\n00:14:14.830 --> 00:14:16.619\nthen pick which type of rule you made.\n\n267\n00:14:17.660 --> 00:14:22.430\nNow the rules, they each kind\nof serve a different purpose.\n\n268\n00:14:22.430 --> 00:14:24.819\nThe first one is\nKeep Virtual Machines Together.\n\n269\n00:14:24.819 --> 00:14:29.645\nI'm gonna specify particular machines\nthat I want to stay together,\n\n270\n00:14:29.645 --> 00:14:31.290\nas positive affinity.\n\n271\n00:14:31.290 --> 00:14:33.748\nI want them grouped together\nlike my WordPress app.\n\n272\n00:14:33.748 --> 00:14:38.090\nI want DB01 and\nWEB01 to be together or I can\n\n273\n00:14:38.090 --> 00:14:42.170\nspecify virtual machines that I wanna keep\napart, I wanna separate virtual machines.\n\n274\n00:14:42.170 --> 00:14:44.695\nThis will be negative affinity,\nI wanna separate these guys.\n\n275\n00:14:44.695 --> 00:14:46.914\nThis will be like WEB01 and WEB02.\n\n276\n00:14:46.914 --> 00:14:51.100\nI don't want those two guys in the same\nhardware, I want them split up.\n\n277\n00:14:51.100 --> 00:14:56.120\nNow when I do these, because it's specific\nvirtual machines, when I pick that and\n\n278\n00:14:56.120 --> 00:15:01.770\ngo to Add an entry, you're gonna\nnotice how I don't get my groups.\n\n279\n00:15:01.770 --> 00:15:04.800\nIt's the individual virtual\nmachines that are showing up.\n\n280\n00:15:04.800 --> 00:15:06.060\nAnd the reason is,\n\n281\n00:15:06.060 --> 00:15:11.250\nthe groups come into play with the third\ntype of rule, Virtual Machines to Hosts.\n\n282\n00:15:11.250 --> 00:15:13.900\nAnd so when we're working with groups,\nwe're normally gonna pick the third rule.\n\n283\n00:15:13.900 --> 00:15:16.820\nBut let's just as a quick example,\nwork through the first two and\n\n284\n00:15:16.820 --> 00:15:18.140\nthen I'll hit the third one after that.\n\n285\n00:15:18.140 --> 00:15:20.750\nSo keep virtual machines together.\n\n286\n00:15:20.750 --> 00:15:23.393\nI want DB01 and WEB01 together, so\n\n287\n00:15:23.393 --> 00:15:27.972\nall I have to do is go down here and\nadd, and pick WEB01 and DB01.\n\n288\n00:15:27.972 --> 00:15:29.186\nAnd when I say okay,\n\n289\n00:15:29.186 --> 00:15:33.550\nthe rule says, The listed Virtual Machines\nmust be run on the same host.\n\n290\n00:15:33.550 --> 00:15:38.140\nNotice that must,\nthey must be run on the same host.\n\n291\n00:15:38.140 --> 00:15:41.409\nIt will keep DB01 and\nWEB01 together no matter what.\n\n292\n00:15:43.310 --> 00:15:45.250\nEven if performance gets\nreally nightmarish,\n\n293\n00:15:45.250 --> 00:15:48.470\nit's gonna keep them together,\ncuz we're enforcing that rule.\n\n294\n00:15:48.470 --> 00:15:52.497\nAnd so\nI'm gonna call this my WordPress-App,\n\n295\n00:15:52.497 --> 00:15:56.933\nmy database and web frontend,\nand I'll save that.\n\n296\n00:15:56.933 --> 00:16:02.016\nThen I'm gonna create another rule from\nmy web servers, and my web servers.\n\n297\n00:16:02.016 --> 00:16:03.874\nI wanna keep them apart.\n\n298\n00:16:03.874 --> 00:16:08.650\nSo I wanna say my WebServers,\nKeep Virtual Machines separate.\n\n299\n00:16:08.650 --> 00:16:10.130\nSeparate virtual machines.\n\n300\n00:16:10.130 --> 00:16:10.890\nAnd I'm gonna add that in.\n\n301\n00:16:10.890 --> 00:16:13.550\nAnd again, I'm not gonna see the groups,\nI'm gonna see the individual VMs.\n\n302\n00:16:13.550 --> 00:16:14.880\nAnd so, I can go through and\ncheck them off.\n\n303\n00:16:14.880 --> 00:16:16.908\nI'm gonna pick WEB01 and\nWEB02 and save it.\n\n304\n00:16:16.908 --> 00:16:19.930\nAll right?\nAnd it's gonna say the listed\n\n305\n00:16:19.930 --> 00:16:24.250\nVirtual Machines must be\nrun on separate hosts.\n\n306\n00:16:24.250 --> 00:16:27.570\nIt's going to separate them out,\nit will never let WEB01 and\n\n307\n00:16:27.570 --> 00:16:29.480\nWEB02 run on the same host.\n\n308\n00:16:29.480 --> 00:16:32.010\nNow, there's a problem there, isn't there?\n\n309\n00:16:32.010 --> 00:16:37.390\nIf host01 fails and\nhost02 is my only other host, and\n\n310\n00:16:37.390 --> 00:16:44.030\nWEB02 is already running on host02, WEB01\nwill not be able to come up on host02.\n\n311\n00:16:44.030 --> 00:16:47.240\nBecause then, WEB01 and\nWEB02 would be together, right?\n\n312\n00:16:47.240 --> 00:16:49.790\nAnd I just created a rule\nthat said don't allow that.\n\n313\n00:16:49.790 --> 00:16:52.153\nSo, in a small cluster,\nin a two node cluster,\n\n314\n00:16:52.153 --> 00:16:55.002\nyou can really run into problems\nwith the rule like this.\n\n315\n00:16:55.002 --> 00:16:57.900\nIn a 16 node cluster,\nit's not a big deal, right?\n\n316\n00:16:57.900 --> 00:16:59.820\nYou just jump to another system.\n\n317\n00:16:59.820 --> 00:17:05.220\nBut if I have 16 nodes and 16 web servers,\nand I have a rule created here with all 16\n\n318\n00:17:05.220 --> 00:17:10.460\nweb servers, then no web server will ever\nbe able to jump to another host because\n\n319\n00:17:10.460 --> 00:17:13.860\nthey're all being isolated, they're\nall being separated like this, right?\n\n320\n00:17:13.860 --> 00:17:16.220\nSo I need to plan for that,\nunderstand my capacities.\n\n321\n00:17:16.220 --> 00:17:17.780\nThese rules are not very flexible.\n\n322\n00:17:17.780 --> 00:17:19.452\nThat must word is kind of important.\n\n323\n00:17:19.452 --> 00:17:20.940\nAll right.\n\n324\n00:17:20.940 --> 00:17:22.500\nWhich leads us to the third type of rule,\n\n325\n00:17:22.500 --> 00:17:24.700\nwhich is the one that's\na little more useful, okay?\n\n326\n00:17:24.700 --> 00:17:27.810\nWith the third type of rule, if I go\nhere and go into my VM host rules and\n\n327\n00:17:27.810 --> 00:17:33.010\nI hit Add, and I choose the third type\nof rule, Virtual Machines to Hosts.\n\n328\n00:17:33.010 --> 00:17:38.500\nWhen I choose that, now I get my\ngroups that come back up, okay?\n\n329\n00:17:38.500 --> 00:17:42.760\nAnd now, I can start to pick things\nthat are a little more flexible, right?\n\n330\n00:17:42.760 --> 00:17:46.126\nI'm not necessarily tying to one\nparticular host or forcing things,\n\n331\n00:17:46.126 --> 00:17:47.390\nis completely separate.\n\n332\n00:17:47.390 --> 00:17:48.760\nBut I'm tying them to groups.\n\n333\n00:17:48.760 --> 00:17:54.380\nAnd I can come in and\nI can say that these are systems\n\n334\n00:17:54.380 --> 00:17:59.240\nthat must run on particular hosts,\nthat should not run on particular hosts,\n\n335\n00:17:59.240 --> 00:18:02.360\nthat should run on hosts in a group,\nor not run on hosts in a group.\n\n336\n00:18:02.360 --> 00:18:03.910\nI've got my choices.\n\n337\n00:18:03.910 --> 00:18:08.210\nAnd notice that terminology,\nmust versus should, okay?\n\n338\n00:18:08.210 --> 00:18:13.390\nMust, if I choose must, it's really not\nany different than the rules we just saw.\n\n339\n00:18:13.390 --> 00:18:17.080\nBut should, should gives me flexibility.\n\n340\n00:18:17.080 --> 00:18:22.840\nIt says try and keep them separate, but\nif you can't, it's okay to break the rule.\n\n341\n00:18:22.840 --> 00:18:24.890\nAnd that's almost always what I want.\n\n342\n00:18:24.890 --> 00:18:26.800\nAnd so, in real life land,\n\n343\n00:18:26.800 --> 00:18:31.075\nit is a rare day that I create the first\ntwo type of rules that we saw, right?\n\n344\n00:18:31.075 --> 00:18:31.925\nSo I'm just gonna go in and\n\n345\n00:18:31.925 --> 00:18:34.703\ndelete these guys because that's\nnot something I like to work with.\n\n346\n00:18:34.703 --> 00:18:40.055\nInstead, we're gonna do the other\ntype which lets us do shoulds, okay?\n\n347\n00:18:40.055 --> 00:18:42.845\nSo I'm gonna delete those and\nI'm gonna need to refresh.\n\n348\n00:18:42.845 --> 00:18:44.205\nIt did it for me, good.\n\n349\n00:18:44.205 --> 00:18:45.985\nSo I'm gonna add new rules.\n\n350\n00:18:45.985 --> 00:18:49.075\nAnd this time,\nI'm gonna create a WordPress app rule.\n\n351\n00:18:50.105 --> 00:18:53.710\nAnd I'm gonna choose that third option,\nVirtual Machines to Hosts.\n\n352\n00:18:53.710 --> 00:18:59.280\nAnd for the virtual machine group,\nI'm gonna pick my WordPress app, and\n\n353\n00:18:59.280 --> 00:19:05.050\nhosts should run on hosts in a group,\nor should not run in hosts in a group.\n\n354\n00:19:05.050 --> 00:19:09.620\nI can say they should run on hosts\nin a group, and I can pick a group.\n\n355\n00:19:09.620 --> 00:19:14.250\nNow, if I want them to be together,\nthen I can pick a group that just had\n\n356\n00:19:14.250 --> 00:19:19.110\none host in it, and it will keep them on\nthat host, it will keep them together.\n\n357\n00:19:19.110 --> 00:19:20.850\nBut it's using the should terminology.\n\n358\n00:19:20.850 --> 00:19:23.220\nNow I made a 10gb-Ethernet group, and\n\n359\n00:19:23.220 --> 00:19:27.550\nthe 10gb-Ethernet group only had\none host in it, it just had Host01.\n\n360\n00:19:27.550 --> 00:19:33.730\nSo now, my WordPress-App, WEB01 and DB01,\nwill be together and will be on Host01.\n\n361\n00:19:35.180 --> 00:19:39.950\nBut if something happens to Host01,\nwe can move somewhere else, and\n\n362\n00:19:39.950 --> 00:19:41.920\nwe can split them up if need be.\n\n363\n00:19:41.920 --> 00:19:44.100\nNow they've got the flexibility\nto be split up,\n\n364\n00:19:44.100 --> 00:19:46.636\nversus the other rule that wouldn't\nlet them be split up, right?\n\n365\n00:19:46.636 --> 00:19:48.780\nAnd I've got it tied to a particular host.\n\n366\n00:19:48.780 --> 00:19:50.840\nI might not necessarily want it\ntied to a particular host, and\n\n367\n00:19:50.840 --> 00:19:52.420\nthen I can go to the other option.\n\n368\n00:19:52.420 --> 00:19:55.080\nWith this type of rule,\nit's a lot easier to work with.\n\n369\n00:19:55.080 --> 00:19:58.110\nWith this rule,\nI could have left it the old way and\n\n370\n00:19:58.110 --> 00:20:01.780\nthey would have run together\non either Host01 or Host02.\n\n371\n00:20:01.780 --> 00:20:05.990\nBut on my web server rule, that's where\nI really had a problem, was those guys,\n\n372\n00:20:05.990 --> 00:20:09.360\nthey were gonna get stuck\nbased on the way they work.\n\n373\n00:20:09.360 --> 00:20:13.470\nSo in that case, I could come through and\ndefine alternate rules.\n\n374\n00:20:13.470 --> 00:20:16.680\nYou kind of have to plan your groups and\nplan your rules around that.\n\n375\n00:20:16.680 --> 00:20:21.380\nSo what I can do, for example,\nis let's address the web servers.\n\n376\n00:20:21.380 --> 00:20:25.630\nSo maybe with the WordPress app,\nI'm a little more strict, right?\n\n377\n00:20:25.630 --> 00:20:27.370\nSo let me put that rule\nback the way it was.\n\n378\n00:20:27.370 --> 00:20:29.580\nI'm gonna be really strict\nabout my WordPress app.\n\n379\n00:20:29.580 --> 00:20:35.984\nI always, under all circumstances, I\nalways want DB01 and WEB01 to be together,\n\n380\n00:20:35.984 --> 00:20:41.703\nso I say my WordPress app is going to be\na Keep Virtual Machines Together rule.\n\n381\n00:20:41.703 --> 00:20:46.195\nThey must, they must stay together,\nand so I'm gonna add WEB01, DB01,\n\n382\n00:20:46.195 --> 00:20:48.253\nthose two guys must stay together.\n\n383\n00:20:48.253 --> 00:20:50.782\nI'm gonna put that rule into play, okay?\n\n384\n00:20:50.782 --> 00:20:56.190\nBut with my web servers, I just want\nthem to be separate from each other.\n\n385\n00:20:56.190 --> 00:20:59.440\nI don't necessarily want to force that,\nbut\n\n386\n00:20:59.440 --> 00:21:02.310\nas a preference,\nI want them to be separated, okay?\n\n387\n00:21:02.310 --> 00:21:05.690\nAnd so,\nwhat I might do there is come in and\n\n388\n00:21:05.690 --> 00:21:07.930\nchange the way my host groups are defined.\n\n389\n00:21:07.930 --> 00:21:12.006\nI might create a host group called\n\n390\n00:21:12.006 --> 00:21:16.970\nsomething like ESX-HOST01, okay?\n\n391\n00:21:16.970 --> 00:21:20.140\nSo I'm gonna create a host group\nthat's just gonna have one host in it.\n\n392\n00:21:20.140 --> 00:21:23.440\nIt's just gonna contain ESX-HOST01.\n\n393\n00:21:23.440 --> 00:21:27.780\nAnd then, I'll create another host\ngroup that just has ESX-HOST02.\n\n394\n00:21:27.780 --> 00:21:32.176\nSo I'm creating another host\ngroup called ESX-HOST02, and\n\n395\n00:21:32.176 --> 00:21:35.070\nI'm only gonna add my second host to it.\n\n396\n00:21:35.070 --> 00:21:38.395\nJust putting that second one in there,\nokay?\n\n397\n00:21:38.395 --> 00:21:43.235\nAnd then I might do the same thing for\nmy virtual machines, right?\n\n398\n00:21:43.235 --> 00:21:47.425\nSo I create a virtual\nmachine group called WEB01.\n\n399\n00:21:47.425 --> 00:21:51.525\nIt'll be a virtual machine group,\nand I'm just gonna add WEB01 to it.\n\n400\n00:21:52.975 --> 00:21:54.715\nAnd I'll create another one called WEB02.\n\n401\n00:21:54.715 --> 00:21:56.921\nAnd I'm just gonna add WEB02 to it.\n\n402\n00:21:56.921 --> 00:21:57.850\nAll right.\n\n403\n00:21:57.850 --> 00:22:02.282\nSo, I'm creating groups that\ncorrespond with my individual elements.\n\n404\n00:22:02.282 --> 00:22:02.920\nAll right?\n\n405\n00:22:02.920 --> 00:22:04.820\nI know this seems a little\ncounter intuitive,\n\n406\n00:22:04.820 --> 00:22:07.890\nbut I'm creating groups that\nmatch up the individual elements.\n\n407\n00:22:07.890 --> 00:22:12.520\nSo now, when I go and\ncreate a rule, I can add a rule and\n\n408\n00:22:12.520 --> 00:22:18.620\nI can say these are my web servers, or\nI can say this is my WEB01 rule, okay?\n\n409\n00:22:18.620 --> 00:22:22.600\nAnd I want WEB01 to be\na Virtual Machine to Hosts rule.\n\n410\n00:22:22.600 --> 00:22:30.975\nAnd I can say the WEB01 group should run\non hosts in the ESX-HOST01 group, okay?\n\n411\n00:22:30.975 --> 00:22:34.920\nSo when WEB01 gets balanced,\nit's gonna try to stay on HOST01.\n\n412\n00:22:34.920 --> 00:22:37.320\nBut it's a should.\n\n413\n00:22:37.320 --> 00:22:39.600\nIf HOST01's not available,\nit can move somewhere else.\n\n414\n00:22:39.600 --> 00:22:43.250\nAnd I can add another one,\nwhich I'll call HOST02.\n\n415\n00:22:43.250 --> 00:22:48.700\nAnd I'll say virtual machines,\nI'm gonna pick web,\n\n416\n00:22:48.700 --> 00:22:51.820\nsorry I shouldn't call that HOST02,\nit should have been WEB02.\n\n417\n00:22:51.820 --> 00:22:57.400\nAnd I'll say that it should\nrun on hosts in ESX-HOST02.\n\n418\n00:22:57.400 --> 00:23:02.120\nAnd now, what's gonna happen is,\nwhenever we do balancing, WEB01 and\n\n419\n00:23:02.120 --> 00:23:08.450\nWEB02 are gonna try and\nstay on HOST01 and HOST02 respectively.\n\n420\n00:23:08.450 --> 00:23:11.720\nBut if one node goes down, it will\nallow him to move to the other side.\n\n421\n00:23:11.720 --> 00:23:14.160\nAnd now, WEB01 and WEB02 could\nbe running on the same hardware.\n\n422\n00:23:14.160 --> 00:23:16.100\nNow, I've got that flexibility, right?\n\n423\n00:23:16.100 --> 00:23:19.190\nIt took a little doing, but\nbecause I wanted that should terminology,\n\n424\n00:23:19.190 --> 00:23:21.000\nthat's how I have to work around it, okay?\n\n425\n00:23:21.000 --> 00:23:23.580\nAnd we could say they\nshould not run on these.\n\n426\n00:23:23.580 --> 00:23:26.060\nMaybe I don't want them\non 10 gig hosts normally.\n\n427\n00:23:26.060 --> 00:23:29.390\nSo they shouldn't run on a 10 gig host.\n\n428\n00:23:29.390 --> 00:23:31.290\nBut if I run out of enough hosts,\n\n429\n00:23:31.290 --> 00:23:33.810\nI may end up putting it on the 10\ngig host just to make room.\n\n430\n00:23:33.810 --> 00:23:35.110\nThese rules are entirely up to you.\n\n431\n00:23:35.110 --> 00:23:36.300\nYou need to tweak them and\n\n432\n00:23:36.300 --> 00:23:40.170\ncustomize them to meet the needs\nof your environment, okay?\n\n433\n00:23:40.170 --> 00:23:44.225\nNow, I probably could have achieved\nthe same goal here without these DRS rules\n\n434\n00:23:44.225 --> 00:23:47.186\nwhen I created the VMs if I\njust attached them to the host.\n\n435\n00:23:47.186 --> 00:23:51.843\nAnd you can certainly do overrides on\na host, each one can be kind of set and\n\n436\n00:23:51.843 --> 00:23:55.019\noverridden right on\nthe virtual machine itself.\n\n437\n00:23:55.019 --> 00:23:58.574\nSo you've got the options to set that and\nget it put in place,\n\n438\n00:23:58.574 --> 00:24:03.387\nand then right down here at the bottom,\nI've got one more thing which says vSphere\n\n439\n00:24:03.387 --> 00:24:07.330\nHA can enforce VM/Host rules when\nrestarting virtual machines.\n\n440\n00:24:07.330 --> 00:24:08.610\nIt's got the capability.\n\n441\n00:24:08.610 --> 00:24:12.020\nBut the default is to ignore the rules,\nokay.\n\n442\n00:24:12.020 --> 00:24:16.390\nSo it's ignoring the infinity and\nanti-infinity rules by default,\n\n443\n00:24:16.390 --> 00:24:17.860\nwhen a virtual machine starts up.\n\n444\n00:24:17.860 --> 00:24:20.570\nWhen a virtual machine starts up it's\ngonna go wherever it wants to go and\n\n445\n00:24:20.570 --> 00:24:23.580\nthen it'll be up to DRS later to go and\nbalance it, but\n\n446\n00:24:23.580 --> 00:24:27.875\nyou can tell HA to follow\nthe rules when it boots up a VM.\n\n447\n00:24:27.875 --> 00:24:29.810\nHA alone can't do balancing.\n\n448\n00:24:29.810 --> 00:24:33.600\nIt can't do what DRS does, but this\nwould just be kind of a starting point.\n\n449\n00:24:33.600 --> 00:24:36.424\nSo if I want that, I can hit edit\nover here and I can tell it,\n\n450\n00:24:36.424 --> 00:24:40.062\nhey when you start up a virtual machine,\ngo ahead and apply the affinity and\n\n451\n00:24:40.062 --> 00:24:44.022\nanti-affinity rules and make sure that\nyou balance those out as best as you can.\n\n452\n00:24:44.022 --> 00:24:44.644\nOkay.\n\n453\n00:24:44.644 --> 00:24:49.049\nAnd the next time DRS runs it will make\nsure that everything else gets balanced\n\n454\n00:24:49.049 --> 00:24:50.090\nand put in place.\n\n455\n00:24:50.090 --> 00:24:54.884\nAll right, you've also got\nother little tweaks you can do,\n\n456\n00:24:54.884 --> 00:24:57.710\nlike when you go into VM overrides.\n\n457\n00:24:57.710 --> 00:25:01.956\nYou'll see where we come in and\nspecify VM overrides for them and\n\n458\n00:25:01.956 --> 00:25:06.770\nyou've got the DRS automation level and\nthe HA restart priority.\n\n459\n00:25:06.770 --> 00:25:10.070\nYou got a few different settings\nin here that all pertain to\n\n460\n00:25:10.070 --> 00:25:12.490\nhow that individual virtual\nmachine is handled, so\n\n461\n00:25:12.490 --> 00:25:15.350\nyou can start to override those\nsettings and modify it as needed.\n\n462\n00:25:15.350 --> 00:25:17.670\nSo you do have some flexibility\nwith how you handle these.\n\n463\n00:25:17.670 --> 00:25:19.700\nBut the rules are kind of the key part,\nright?\n\n464\n00:25:19.700 --> 00:25:23.760\nGetting those rules defined and you may\nhave a very straightforward environment,\n\n465\n00:25:23.760 --> 00:25:27.560\nwhere you can knock this out in one or\ntwo rules, or it might get more complex,\n\n466\n00:25:27.560 --> 00:25:30.900\nlike what I showed where,\nyou've gotta create a number of groups and\n\n467\n00:25:30.900 --> 00:25:35.150\nall that to support the rules to get them\nthe way want, to influence the behavior.\n\n468\n00:25:35.150 --> 00:25:39.835\nBut for the exam, definitely remember,\nshould versus must\n\n469\n00:25:39.835 --> 00:25:44.510\n,with the two main rules keep VMs\ntogether and separate VMs, it's a must.\n\n470\n00:25:44.510 --> 00:25:46.190\nThey must be separated.\n\n471\n00:25:46.190 --> 00:25:50.010\nAnd that can lead to situations where\nyou have hosts that are online, and\n\n472\n00:25:50.010 --> 00:25:53.850\nVMs that are offline,\ncuz they're not allowed to go together.\n\n473\n00:25:53.850 --> 00:25:56.290\nBut you can do shoulds if you\ndo the third type of rule,\n\n474\n00:25:56.290 --> 00:25:59.110\nwhere you're mapping\nvirtual machines to hosts.\n\n475\n00:25:59.110 --> 00:26:01.910\n>> Don, I think it's interesting how where\nyou say affinity, it's a lot more than\n\n476\n00:26:01.910 --> 00:26:04.552\njust saying, okay this virtual\nmachine's gonna stick on this host and\n\n477\n00:26:04.552 --> 00:26:08.010\nyou're staying there, so, do appreciate\nyou taking the time to explain that.\n\n478\n00:26:08.010 --> 00:26:10.760\nDoes look like we're coming to the end\nof another episode, but before we do,\n\n479\n00:26:10.760 --> 00:26:13.970\ndo you have any additional\nwords before we sign out?\n\n480\n00:26:13.970 --> 00:26:15.660\n>> That's probably it.\n\n481\n00:26:15.660 --> 00:26:20.080\nI'm trying to think if there's anything\nelse that I wanna mess with on this.\n\n482\n00:26:20.080 --> 00:26:25.110\nThere is something called SDRS,\nstorage DRS.\n\n483\n00:26:25.110 --> 00:26:27.710\nDRS, by default, looks at memory and CPU,\n\n484\n00:26:27.710 --> 00:26:29.750\nit doesn't really pay\nattention to storage.\n\n485\n00:26:29.750 --> 00:26:32.950\nAnd so there's an advanced licensed\nfeature you can do called SDRS,\n\n486\n00:26:32.950 --> 00:26:36.895\nstorage DRS, where it'll actually look at\ndisk I/O and balance things based on disk\n\n487\n00:26:36.895 --> 00:26:40.350\nI/O and that's important if you have\ndatabase servers or things that are heavy,\n\n488\n00:26:40.350 --> 00:26:42.850\ndisk intensity type stuff.\n\n489\n00:26:42.850 --> 00:26:45.670\nSo be aware the technology's out there.\n\n490\n00:26:45.670 --> 00:26:48.720\nI don't think it's on the exam, but\nin real life if you bump into SDRS,\n\n491\n00:26:48.720 --> 00:26:49.640\nthat's what it's talking about.\n\n492\n00:26:49.640 --> 00:26:51.080\nIt is a license feature you can add it on.\n\n493\n00:26:51.080 --> 00:26:52.920\nAnd it's got it's own bells and\nwhistles, but\n\n494\n00:26:52.920 --> 00:26:56.700\nit's basically extending the functionality\nof the distributor resource schedule.\n\n495\n00:26:56.700 --> 00:26:59.710\n>> Well Don, as always, we do appreciate\nyou being here and we appreciate you,\n\n496\n00:26:59.710 --> 00:27:00.910\nthe viewer, for watching.\n\n497\n00:27:00.910 --> 00:27:01.980\nSigning out at IT Pro.TV.\n\n498\n00:27:01.980 --> 00:27:03.660\nI've been your host Wes Bryant.\n\n499\n00:27:03.660 --> 00:27:04.300\n>> And I'm Don Pezet.\n\n500\n00:27:04.300 --> 00:27:06.661\n>> And we'll see you next time.\n\n501\n00:27:06.661 --> 00:27:14.730\n[SOUND]\n\n",
          "vimeoId": "170160307"
        }
      ],
      "title": "Managing Availability"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don explore content libraries with in vSphere. They discuss local libraries, subscribed libraries, subscriptions, publishing, permissions and more.",
          "length": "1729",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-10-1-multi_site_content_libraries-061016-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-10-1-multi_site_content_libraries-061016-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/vmware-vcp6dcv/vmware-vcp6dcv-10-1-multi_site_content_libraries-061016-1-sm.jpg",
          "title": "Multi-site Content Libraries",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.797 --> 00:00:14.190\nWelcome back to another exciting\nepisode here at ITPro.TV.\n\n3\n00:00:14.190 --> 00:00:15.572\nI'm your host, Wes Bryan.\n\n4\n00:00:15.572 --> 00:00:19.839\nAnd in today's episode we're coming back\nat you with more VMware, that's right,\n\n5\n00:00:19.839 --> 00:00:22.460\nthe VMware Certified Professional,\nVersion 6.\n\n6\n00:00:22.460 --> 00:00:25.430\nJoining me back in the studios today\nis none other than Mr Don Pezet.\n\n7\n00:00:25.430 --> 00:00:26.670\nDon, how you doing, sir?\n\n8\n00:00:26.670 --> 00:00:29.909\n>> I'm doing great, Wes, ready to dive\nright back into the world of VMware.\n\n9\n00:00:29.909 --> 00:00:34.745\nAnd in this episode, we're gonna\nbe tackling multisite libraries.\n\n10\n00:00:34.745 --> 00:00:37.463\nAnd I know libraries are something\nwe covered really briefly in\n\n11\n00:00:37.463 --> 00:00:39.055\nan earlier episode.\n\n12\n00:00:39.055 --> 00:00:43.985\nYou'll find as you work with vSphere and\nvCenter and DSXI and all these products\n\n13\n00:00:43.985 --> 00:00:48.470\nthat you start to acquire,\nlet's call them artifacts, right, things.\n\n14\n00:00:48.470 --> 00:00:52.240\nISO images for doing installs,\ntemplates for virtual machines,\n\n15\n00:00:52.240 --> 00:00:56.570\nor OVFs that you're importing,\nyou know, virtual appliances.\n\n16\n00:00:56.570 --> 00:01:00.420\nYou might have other types of files\nlike that, that you build up over time.\n\n17\n00:01:00.420 --> 00:01:03.380\nAnd sometimes we store\nthem on our own laptops or\n\n18\n00:01:03.380 --> 00:01:05.820\non the server that we're\nworking with at that time.\n\n19\n00:01:05.820 --> 00:01:07.180\nBut, they're easy to lose,\n\n20\n00:01:07.180 --> 00:01:11.470\nand there's always that time down the road\nwhere I'm like, boy, I really wish still\n\n21\n00:01:11.470 --> 00:01:13.570\nthat I had that virtual appliance\nthat I could just throw out here.\n\n22\n00:01:13.570 --> 00:01:14.720\nAnd what did I do with it?\n\n23\n00:01:14.720 --> 00:01:16.750\nLet me go find it and download it again.\n\n24\n00:01:16.750 --> 00:01:19.510\nIt's nice to have a place\nto stuff all this junk.\n\n25\n00:01:19.510 --> 00:01:21.560\nI shouldn't call it junk,\nit was useful stuff.\n\n26\n00:01:21.560 --> 00:01:23.780\nIt'd be nice to have a place to put it.\n\n27\n00:01:23.780 --> 00:01:27.410\nAnd so in an earlier episode, just real\nbriefly, I showed creating a library,\n\n28\n00:01:27.410 --> 00:01:31.710\nand a library is a great place\nto store stuff like that.\n\n29\n00:01:31.710 --> 00:01:33.440\nNot stuff that's gonna run live.\n\n30\n00:01:33.440 --> 00:01:36.380\nIf I want things to run live I\nput that in a data store, right.\n\n31\n00:01:36.380 --> 00:01:40.865\nSo my virtual machine disks, my VMDKs and\nvirtual machine configuration files,\n\n32\n00:01:40.865 --> 00:01:43.050\nthose go into a data store.\n\n33\n00:01:43.050 --> 00:01:46.550\nBut templates, ISO images, OVF files,\n\n34\n00:01:46.550 --> 00:01:49.810\nthose virtual appliances, those things,\nI'm not going to run them live.\n\n35\n00:01:49.810 --> 00:01:52.940\nI might take them and\nattach them to a live machine or\n\n36\n00:01:52.940 --> 00:01:56.980\nimport them into a live machine but I'm\nnot going to run live from the library.\n\n37\n00:01:56.980 --> 00:02:01.560\nAnd so libraries will typically exist in\ndata stores that are on cheaper storage,\n\n38\n00:02:01.560 --> 00:02:04.490\nless expensive stuff,\nstuff that's not fully redundant.\n\n39\n00:02:04.490 --> 00:02:07.620\nThings that are not backuped as often,\nbecause we don't go to them very often and\n\n40\n00:02:07.620 --> 00:02:09.040\nthey don't change very often.\n\n41\n00:02:09.040 --> 00:02:12.150\nAnd so we can create a library and\nwe can put our stuff there.\n\n42\n00:02:12.150 --> 00:02:13.800\nAnd so\nwe did see that in the earlier episode,\n\n43\n00:02:13.800 --> 00:02:15.240\nI will do it again here in a minute.\n\n44\n00:02:15.240 --> 00:02:17.960\nBut it is a great place to just\nkinda stuff that stuff away and\n\n45\n00:02:17.960 --> 00:02:18.950\nhave it available.\n\n46\n00:02:18.950 --> 00:02:22.400\n>> Don, when it comes to content\nlibraries, is it a single library or\n\n47\n00:02:22.400 --> 00:02:24.410\ndo we have different flavors, if you will?\n\n48\n00:02:24.410 --> 00:02:27.810\n>> So as far as the number of libraries,\nyou can have as many as you want.\n\n49\n00:02:27.810 --> 00:02:31.620\nTypically you only need one, but\nwhat I think you're getting at is\n\n50\n00:02:31.620 --> 00:02:34.750\nif I have a single library,\nwhere is that available?\n\n51\n00:02:34.750 --> 00:02:38.280\nIt's just available to\nmy vSphere deployment.\n\n52\n00:02:38.280 --> 00:02:41.390\nWith libraries,\nthere really is just one type of library.\n\n53\n00:02:41.390 --> 00:02:44.930\nIt's a local library, a library that's\navailable just to your deployment.\n\n54\n00:02:44.930 --> 00:02:48.040\nBut the title of this episode\nis multisite libraries, so\n\n55\n00:02:48.040 --> 00:02:48.950\nwhat are we talking about there?\n\n56\n00:02:48.950 --> 00:02:52.800\nAnd that is, I might have more\nthan one vSphere deployment.\n\n57\n00:02:52.800 --> 00:02:56.450\nAnd if I create a local library\nin one vSphere environment,\n\n58\n00:02:56.450 --> 00:02:59.510\nit's not visible in the other one,\nthey can't see it.\n\n59\n00:02:59.510 --> 00:03:03.200\nAnd so what we can do is we can\ntake one of our libraries and\n\n60\n00:03:03.200 --> 00:03:04.290\nwe can do what's called publishing it.\n\n61\n00:03:04.290 --> 00:03:07.340\nWe can make it available externally,\nand then we can go to\n\n62\n00:03:07.340 --> 00:03:11.370\nany other vSphere deployment that we have,\nand we can subscribe it.\n\n63\n00:03:11.370 --> 00:03:16.530\nWe can connect to that library in the\nother environment and create a duplicate.\n\n64\n00:03:16.530 --> 00:03:19.802\nAnd that way, I have technically a local\nlibrary in one vSphere deployment and\n\n65\n00:03:19.802 --> 00:03:22.344\na local in another library in\nthe other vSphere deployment.\n\n66\n00:03:22.344 --> 00:03:27.140\nThey're still local libraries, but they're\nlinked externally and synchronizing data.\n\n67\n00:03:27.140 --> 00:03:31.570\nNow it's a multisite local library,\nwhich is kind of a contradiction of terms,\n\n68\n00:03:31.570 --> 00:03:34.780\nthat's the way that it works So,\nwe can create one or\n\n69\n00:03:34.780 --> 00:03:38.730\nmore libraries through our normal means,\nand then, you can easily make them\n\n70\n00:03:38.730 --> 00:03:41.490\navailable external after the fact or\nyou can do it at the time of creation.\n\n71\n00:03:41.490 --> 00:03:44.090\nIt's really up to you how you\nwanna go about that, right.\n\n72\n00:03:44.090 --> 00:03:48.280\nSo just as an example let's run through\ndoing a local library first, and\n\n73\n00:03:48.280 --> 00:03:50.740\nthen we'll go all multisited and\nyou'll see it's not that bad.\n\n74\n00:03:50.740 --> 00:03:54.000\nSo I'm gonna take my vSphere deployment\nhere and I'm logged into vCenter.\n\n75\n00:03:55.030 --> 00:03:58.680\nAnd inside of vCenter,\nyou kind of look down the left side here,\n\n76\n00:03:58.680 --> 00:04:01.480\nyou'll see your storage and\nnetworking VMs and networking clusters.\n\n77\n00:04:01.480 --> 00:04:04.400\nYou'll see all the different\nthings that you've got, right.\n\n78\n00:04:04.400 --> 00:04:08.750\nAnd if I go down here into Storage,\nI'm gonna see my data stores, right?\n\n79\n00:04:08.750 --> 00:04:10.880\nSo these are all data\nstores that are right here.\n\n80\n00:04:10.880 --> 00:04:14.950\nAnd that's all that I can create because\nhere we're talking about live data,\n\n81\n00:04:14.950 --> 00:04:16.890\ndata that we're using for\nvirtual machines.\n\n82\n00:04:16.890 --> 00:04:20.870\nIf I right-click on my Datacenter here,\nand I go down to Storage, it gives me\n\n83\n00:04:20.870 --> 00:04:25.700\nthe option to create new datastores but\nnot to create new libraries, all right.\n\n84\n00:04:25.700 --> 00:04:28.240\nI can create a virtual\napp from a library or\n\n85\n00:04:28.240 --> 00:04:30.360\nI can create a virtual\nmachine from a library.\n\n86\n00:04:30.360 --> 00:04:33.230\nI can use the libraries but\nI can't create them here, all right.\n\n87\n00:04:33.230 --> 00:04:37.760\nThe libraries themselves are actually\ncreated back under our inventories.\n\n88\n00:04:37.760 --> 00:04:42.159\nAnd so if I go back to my homepage\nhere and we take a look at vCenter\n\n89\n00:04:42.159 --> 00:04:46.484\nInventory Lists, we can go in\nthere to create our libraries.\n\n90\n00:04:46.484 --> 00:04:51.170\nOr, what I normally do is inventories\nis laid out right here on the homepage.\n\n91\n00:04:51.170 --> 00:04:54.020\nYou have a nice big button right here,\nthis is Content Libraries.\n\n92\n00:04:54.020 --> 00:04:58.940\nSo it's not in the left side menu but it\nis available right here on the homepage.\n\n93\n00:04:58.940 --> 00:05:01.620\nSo I'm gonna go into Content Libraries and\nI don't have any.\n\n94\n00:05:01.620 --> 00:05:03.340\nI know we created one\nin an episode earlier,\n\n95\n00:05:03.340 --> 00:05:06.270\nI must have deleted it or\nrolled that snapshot back or something.\n\n96\n00:05:06.270 --> 00:05:07.690\nSo I don't have one right now.\n\n97\n00:05:07.690 --> 00:05:09.010\nI'm gonna create one.\n\n98\n00:05:09.010 --> 00:05:13.060\nMaybe I'll want a place to be able\nto store all of my ISO images and\n\n99\n00:05:13.060 --> 00:05:16.397\nmake it complete across all my\ndifferent vSphere deployments,\n\n100\n00:05:16.397 --> 00:05:17.890\nor I want my templates to be here, right?\n\n101\n00:05:17.890 --> 00:05:21.303\nI might have a vSphere environment for\nproduction, and\n\n102\n00:05:21.303 --> 00:05:24.710\na vSphere environment for dev and testing.\n\n103\n00:05:24.710 --> 00:05:28.220\nAnd so the dev team is working on\nstuff in this dev environment.\n\n104\n00:05:28.220 --> 00:05:30.130\nAnd when they're done,\nthey build a virtual machine.\n\n105\n00:05:30.130 --> 00:05:31.620\nEverything's set the way they want.\n\n106\n00:05:31.620 --> 00:05:33.220\nHow do I get it in production?\n\n107\n00:05:33.220 --> 00:05:36.100\nWell, maybe I wanna set up a library\n\n108\n00:05:36.100 --> 00:05:39.438\nwhere they can move those virtual\nmachines into the library.\n\n109\n00:05:39.438 --> 00:05:43.140\nIt will synchronize the production,\nand then I can just create V apps or\n\n110\n00:05:43.140 --> 00:05:44.900\nvirtual machines right\nout of that library.\n\n111\n00:05:44.900 --> 00:05:49.540\nIt's a great way to move things between\nthose two separate environments.\n\n112\n00:05:49.540 --> 00:05:52.850\nSo what I'm gonna do is,\nI'm gonna whip up a new content library.\n\n113\n00:05:52.850 --> 00:05:56.310\nAnd if I just scroll down here,\nI'll see Create new content library,\n\n114\n00:05:56.310 --> 00:05:57.470\nmakes life easy.\n\n115\n00:05:57.470 --> 00:06:00.055\nSo I'm gonna do that, and\nit's just gonna ask me for a name.\n\n116\n00:06:00.055 --> 00:06:07.090\nAnd so maybe I'll call this,\nmaybe this is the DevTeamLibrary, okay.\n\n117\n00:06:07.090 --> 00:06:09.960\nSo the dev team, as they work on stuff,\nthey're gonna stick it here.\n\n118\n00:06:09.960 --> 00:06:12.630\nI'm gonna synchronize\nthis to production and\n\n119\n00:06:12.630 --> 00:06:14.960\nin production I can grab things from\nhere and deploy it live, right?\n\n120\n00:06:14.960 --> 00:06:18.230\nSo this is how we'll ship that data\nbetween the two vSphere environments.\n\n121\n00:06:18.230 --> 00:06:20.040\nSo I'll just call this my DevTeamLibrary.\n\n122\n00:06:20.040 --> 00:06:22.260\nIt's gonna ask me for\na vCenter server to attach it to.\n\n123\n00:06:22.260 --> 00:06:23.540\nI've only got one.\n\n124\n00:06:23.540 --> 00:06:27.380\nIf you have more than one vCenter server,\nyou'll attach it to a particular one.\n\n125\n00:06:27.380 --> 00:06:30.330\nSo I'm gonna stick with mine and\nmove forward.\n\n126\n00:06:30.330 --> 00:06:32.060\nAnd now it's gonna ask me\nto configure the library.\n\n127\n00:06:32.060 --> 00:06:36.000\nNow the default is local content library,\nokay.\n\n128\n00:06:36.000 --> 00:06:38.190\nIf I do that,\nit's gonna create a standard library and\n\n129\n00:06:38.190 --> 00:06:41.200\nthat's what I would've done in\nthe earlier show if you saw it then.\n\n130\n00:06:41.200 --> 00:06:44.220\nSo just creating a local library\nit's gonna be visible to this\n\n131\n00:06:44.220 --> 00:06:46.880\nvCenter server and\nthis vSphere deployment and that's it.\n\n132\n00:06:46.880 --> 00:06:49.220\nAny other environments\nI have won't see it.\n\n133\n00:06:49.220 --> 00:06:54.210\nBut notice my next option,\npublish content library externally.\n\n134\n00:06:54.210 --> 00:06:58.000\nIf we do that, we can make\nthe library available externally and\n\n135\n00:06:58.000 --> 00:06:59.870\nnow other people can connect to it.\n\n136\n00:06:59.870 --> 00:07:00.450\nWhat it does is,\n\n137\n00:07:00.450 --> 00:07:05.620\nit effectively generates a URL, an address\nthat would be tied to this library.\n\n138\n00:07:05.620 --> 00:07:07.824\nNow I'm gonna leave that off for now,\ncuz we can turn it on after the fact too.\n\n139\n00:07:07.824 --> 00:07:11.325\nSo I'm just gonna create a regular\nold local content library.\n\n140\n00:07:11.325 --> 00:07:16.920\nAll right, then I need to add some\nstorage, it's gotta go somewhere.\n\n141\n00:07:16.920 --> 00:07:20.120\nAnd I could choose to\ntuck it into a NFS URL.\n\n142\n00:07:20.120 --> 00:07:24.390\nSo if I had a network file system share\nsomewhere I could tie to that, or\n\n143\n00:07:24.390 --> 00:07:27.200\nI could select an existing datastore and\npop it in there.\n\n144\n00:07:27.200 --> 00:07:29.110\nSo if I've got a shared data store or\n\n145\n00:07:29.110 --> 00:07:31.770\nsomething in place then I\ncould certainly use that.\n\n146\n00:07:31.770 --> 00:07:33.930\nDoesn't look like I have any\nshared ones laying around so\n\n147\n00:07:33.930 --> 00:07:36.030\nI'll just stick it here\non one of my servers.\n\n148\n00:07:36.030 --> 00:07:39.230\nSo I'm gonna plop it there and\nI'll hit Next.\n\n149\n00:07:39.230 --> 00:07:40.900\nAnd we'll finish that up.\n\n150\n00:07:40.900 --> 00:07:44.580\nAll right, so now that I've finished that,\nas soon as that task finishes,\n\n151\n00:07:44.580 --> 00:07:49.940\nI'll see my DevTeamLibrary and it's\nready to have stuff put into it, okay.\n\n152\n00:07:49.940 --> 00:07:53.280\nNow when you view it, by default,\nIt's gonna show you templates.\n\n153\n00:07:53.280 --> 00:07:54.720\nIt expects us to have\ntemplates in the library.\n\n154\n00:07:54.720 --> 00:07:56.170\nThat's the most common use for it.\n\n155\n00:07:56.170 --> 00:08:00.808\nBut notice you've got this Other Types\nbutton where you can see other data that\n\n156\n00:08:00.808 --> 00:08:02.294\nmight be in the library.\n\n157\n00:08:02.294 --> 00:08:06.309\nSo is this basically where we can start to\nsee that and you got a little button right\n\n158\n00:08:06.309 --> 00:08:09.500\nhere that lets you import\nan OVF package to the library.\n\n159\n00:08:09.500 --> 00:08:12.010\nSo if you've got an OVF lying around,\nyou can\n\n160\n00:08:12.010 --> 00:08:15.280\nimport it right here into the library or\nwe can move things into the library too.\n\n161\n00:08:15.280 --> 00:08:17.660\nYou have a few different ways that\nyou can go about that, all right?\n\n162\n00:08:17.660 --> 00:08:21.375\nSo let's say for me that I want\nto import an OVF into this thing.\n\n163\n00:08:21.375 --> 00:08:23.882\nI can just hit the little\nImport button and\n\n164\n00:08:23.882 --> 00:08:26.683\nI can pull it from a URL\nif I've got an address.\n\n165\n00:08:26.683 --> 00:08:31.086\nI can pull it from a local file on my own\ncomputer if I've got one laying around,\n\n166\n00:08:31.086 --> 00:08:32.970\nand I can bring it in that way too.\n\n167\n00:08:32.970 --> 00:08:35.190\nAnd then you'll see here where\nI've got the item name and\n\n168\n00:08:35.190 --> 00:08:38.610\nthe library that I can pick from, so\nthe OVF can come from different places.\n\n169\n00:08:38.610 --> 00:08:42.580\nNow, maybe you've got one that's\nalready in a data store somewhere.\n\n170\n00:08:42.580 --> 00:08:44.780\nI do have an iso data store set up.\n\n171\n00:08:44.780 --> 00:08:49.570\nIf I go back to my home page and\ngo to storage, I've got this\n\n172\n00:08:49.570 --> 00:08:54.920\nshared iso data store laying around, and\ninside of it it's got a bunch of stuff.\n\n173\n00:08:56.010 --> 00:08:59.145\nSo if I jump in here and take a look,\nI've got a bunch of isos in here.\n\n174\n00:08:59.145 --> 00:09:03.997\nAnd if I go into my vSphere 6 folder\nI should see that I've got an OVF\n\n175\n00:09:03.997 --> 00:09:06.360\nin here somewhere, here we go.\n\n176\n00:09:06.360 --> 00:09:08.580\nI've got the VMware Hybrid Cloud Manager,\nthat's an OVF.\n\n177\n00:09:08.580 --> 00:09:12.220\nIt's an appliance that I can import, and\nit's got the hybrid cloud manager on it.\n\n178\n00:09:12.220 --> 00:09:16.735\nSo it's already in a data store, and\nI can use that to my heart's content.\n\n179\n00:09:16.735 --> 00:09:19.270\nBut what I'm going to be missing\nhere is I don't have a way to\n\n180\n00:09:19.270 --> 00:09:21.000\nreplicate that data store.\n\n181\n00:09:21.000 --> 00:09:23.270\nSo I can't replicate that\nto an external system,\n\n182\n00:09:23.270 --> 00:09:26.120\nthe data store is right here\nin my Vsphere deployment.\n\n183\n00:09:26.120 --> 00:09:29.850\nBut if you right click on that,\nyou'll see where you can move or copy it.\n\n184\n00:09:29.850 --> 00:09:34.080\nAnd I can copy that data, and when I go\nto copy it I'm gonna see the other data\n\n185\n00:09:34.080 --> 00:09:36.070\nstores that are out there, right?\n\n186\n00:09:36.070 --> 00:09:39.190\nAnd when I do that,\nnotice how I don't see the library?\n\n187\n00:09:39.190 --> 00:09:41.210\nLibraries don't show up in the data store?\n\n188\n00:09:41.210 --> 00:09:43.940\nWell this is actually just\nshowing true data stores.\n\n189\n00:09:43.940 --> 00:09:48.390\nI can pick that host01 local\ndata store to send it there.\n\n190\n00:09:48.390 --> 00:09:52.470\nAnd inside of that data store,\nsee how I've got a content library?\n\n191\n00:09:52.470 --> 00:09:54.380\nSo you actually see the content library.\n\n192\n00:09:54.380 --> 00:09:56.100\nThere's that content library I made.\n\n193\n00:09:56.100 --> 00:09:59.180\nAnd I can send the data in there\nright from the data store.\n\n194\n00:09:59.180 --> 00:10:01.040\nBut that's not normally what we're doing.\n\n195\n00:10:01.040 --> 00:10:02.770\nNormally we're sending templates in or\nwhatever and\n\n196\n00:10:02.770 --> 00:10:05.890\nwe're doing it either from a URL or\nfrom a local file.\n\n197\n00:10:05.890 --> 00:10:08.990\nSo the other way that I go about\nthat would just be to go back to my\n\n198\n00:10:08.990 --> 00:10:13.120\ncontent libraries,\nchoose that dev team library.\n\n199\n00:10:13.120 --> 00:10:16.180\nAnd now when I go to import that template\nwith the Import button I can just hit\n\n200\n00:10:16.180 --> 00:10:17.870\nLocal file and Browse.\n\n201\n00:10:17.870 --> 00:10:20.690\nAnd I can browse and\nfind it on my own machine.\n\n202\n00:10:20.690 --> 00:10:23.792\nNow when I go to do that it's gonna tell\nme I need the VMware Client Integration\n\n203\n00:10:23.792 --> 00:10:25.030\nplugin- installed.\n\n204\n00:10:25.030 --> 00:10:26.480\nI don't have that installed.\n\n205\n00:10:26.480 --> 00:10:30.550\nIf I were in the vSphere native\nclient I wouldn't have that problem.\n\n206\n00:10:30.550 --> 00:10:33.880\nI'm actually on a Mac, so that plug-in\nis not gonna work out so well for me.\n\n207\n00:10:33.880 --> 00:10:34.820\nIf you download it.\n\n208\n00:10:34.820 --> 00:10:36.470\nActually, you know what,\nwe can give it a shot here.\n\n209\n00:10:36.470 --> 00:10:37.970\nIt's got the Mac one.\n\n210\n00:10:37.970 --> 00:10:39.490\nThey do have a Mac plug-in.\n\n211\n00:10:39.490 --> 00:10:42.450\nSo it's gonna load that and as soon as\nthat's done I'll be able to install it and\n\n212\n00:10:42.450 --> 00:10:43.930\nupload a file into here.\n\n213\n00:10:43.930 --> 00:10:45.771\nNow while we're waiting on that though,\n\n214\n00:10:45.771 --> 00:10:48.220\nthere are some other\nthings that we can do.\n\n215\n00:10:48.220 --> 00:10:51.090\nFor example, let's say I do want\nto make this available externally.\n\n216\n00:10:51.090 --> 00:10:53.480\nSo the dev team starts putting\ntheir templates in here.\n\n217\n00:10:53.480 --> 00:10:56.590\nSo every time they build up a new virtual\nmachine, they get it set up just right.\n\n218\n00:10:56.590 --> 00:10:59.350\nThey create a template and\nthen they throw it in here.\n\n219\n00:10:59.350 --> 00:11:02.990\nI want that to synchronize over\nto my other environment, so\n\n220\n00:11:02.990 --> 00:11:05.220\nI need to publish this externally.\n\n221\n00:11:05.220 --> 00:11:08.400\nIf you pull up the settings\non your content library.\n\n222\n00:11:08.400 --> 00:11:11.680\nSo I'm just gonna right-click on\nDevTeamLibrary and go to Edit Settings.\n\n223\n00:11:11.680 --> 00:11:14.550\nWhen we go to Edit Settings you'll see\nright here where we can publish it\n\n224\n00:11:14.550 --> 00:11:15.670\nexternally.\n\n225\n00:11:15.670 --> 00:11:18.530\nAnd when you check it, it's a little\ndifferent than the screen earlier when I\n\n226\n00:11:18.530 --> 00:11:20.360\nchecked it, it was just a check box there.\n\n227\n00:11:20.360 --> 00:11:23.280\nBut here when I check it,\nit gives me the URL.\n\n228\n00:11:23.280 --> 00:11:26.760\nHere's the fully qualified\nURL to this library.\n\n229\n00:11:26.760 --> 00:11:29.190\nAnd so I can copy that link and\n\n230\n00:11:29.190 --> 00:11:32.840\nI can take that to another\nvSphere deployment on my network.\n\n231\n00:11:32.840 --> 00:11:37.250\nAnd on there, I can add a library and\nchoose to subscribe to a URL.\n\n232\n00:11:37.250 --> 00:11:40.520\nAnd I would provide that URL right there.\n\n233\n00:11:40.520 --> 00:11:42.610\nSorry, if I can keep my\nscreen under control.\n\n234\n00:11:42.610 --> 00:11:45.040\nSo I'd provided the URL and\nI'd be in business.\n\n235\n00:11:45.040 --> 00:11:46.780\nNow if you do that,\n\n236\n00:11:46.780 --> 00:11:51.100\ntechnically anybody who has the URL\ncould connect to that library.\n\n237\n00:11:51.100 --> 00:11:52.500\nAnd I may not want that.\n\n238\n00:11:52.500 --> 00:11:55.270\nIf this like an Internet address,\nwhich it shouldn't be, right?\n\n239\n00:11:55.270 --> 00:11:56.658\nThis should just be local only.\n\n240\n00:11:56.658 --> 00:11:58.630\nBut if it were on the Internet,\nanybody could get to it and\n\n241\n00:11:58.630 --> 00:12:01.690\nstart pulling data out of there like my\ntemplates and probably don't want that.\n\n242\n00:12:01.690 --> 00:12:04.445\nSo we could choose to\nturn on authentication.\n\n243\n00:12:04.445 --> 00:12:07.050\nAnd we turn on authentication,\nyou just provide a password, right?\n\n244\n00:12:07.050 --> 00:12:09.011\nSo I'm gonna provide a password for\n\n245\n00:12:09.011 --> 00:12:11.340\nmine, I wanna make sure I do\nsomething that I can remember.\n\n246\n00:12:12.690 --> 00:12:16.810\nAnd now if somebody wants to connect to\nthe library they just provide a password.\n\n247\n00:12:16.810 --> 00:12:18.320\nIt's not like a username and password,\n\n248\n00:12:18.320 --> 00:12:21.010\nit's not like Kerberos,\nit's not super crazy.\n\n249\n00:12:21.010 --> 00:12:23.300\nIt's more like CHAP, right?\n\n250\n00:12:23.300 --> 00:12:26.810\nThe really basic authentication but at\nleast it'll will stop just random people\n\n251\n00:12:26.810 --> 00:12:28.745\nfrom connecting to the content library.\n\n252\n00:12:28.745 --> 00:12:31.025\nSo, I'm gonna ahead and say OK to that.\n\n253\n00:12:31.025 --> 00:12:36.285\nNow, when that's done, the dev team\nlibrary doesn't look much different.\n\n254\n00:12:36.285 --> 00:12:38.770\nIt does have a little blue arrow on its\n\n255\n00:12:38.770 --> 00:12:41.470\nicon letting me know that\nit is available externally.\n\n256\n00:12:41.470 --> 00:12:42.350\nBut otherwise,\n\n257\n00:12:42.350 --> 00:12:46.040\nI continue to use it exactly the same\nway that I've been using it.\n\n258\n00:12:46.040 --> 00:12:48.870\nI throw templates in there and\nI work with it.\n\n259\n00:12:48.870 --> 00:12:51.040\nNo real difference, right?\n\n260\n00:12:51.040 --> 00:12:54.870\nIf I need to verify that URL, I can go to\nthe Manage tab and I get it right there.\n\n261\n00:12:54.870 --> 00:12:57.390\nI can see it and I get my summary of data.\n\n262\n00:12:57.390 --> 00:12:58.510\nSo this thing is up.\n\n263\n00:12:58.510 --> 00:13:00.830\nIt's going, it's doing its thing.\n\n264\n00:13:00.830 --> 00:13:03.150\nAll right, well of course I don't have\nthe plug-in installed on my machine so\n\n265\n00:13:03.150 --> 00:13:03.890\nI'm gonna cheat and\n\n266\n00:13:03.890 --> 00:13:07.300\njust jump over to another machine that\ndoes happen to have the plug-in installed.\n\n267\n00:13:07.300 --> 00:13:08.280\nThat'll be a little faster.\n\n268\n00:13:08.280 --> 00:13:11.220\nSo I'm gonna come over to this machine and\nI'll just jump back into my content\n\n269\n00:13:11.220 --> 00:13:17.500\nlibraries and my dev team library and\nwe'll jump in to take a look at our stuff.\n\n270\n00:13:17.500 --> 00:13:20.640\nAnd I'm just gonna go into Import\na Template and instead of going to a URL,\n\n271\n00:13:20.640 --> 00:13:22.110\nI'm going to go to a local file.\n\n272\n00:13:22.110 --> 00:13:24.100\nAnd when you have the plug-in,\nthen you can browse and\n\n273\n00:13:24.100 --> 00:13:26.490\nyou can pull files right off\nof your local file system.\n\n274\n00:13:26.490 --> 00:13:27.770\nSo I'm just gonna grab that OVF.\n\n275\n00:13:27.770 --> 00:13:32.690\nNow, notice how it is just showing\nOVF files, that's the default, so\n\n276\n00:13:32.690 --> 00:13:35.020\nI see that hybrid cloud manager.\n\n277\n00:13:35.020 --> 00:13:38.290\nI've got other files in there though, so\nfor example if I were to change that to\n\n278\n00:13:38.290 --> 00:13:41.670\nsay all files,\nnow all of my other stuff shows up.\n\n279\n00:13:41.670 --> 00:13:44.710\nSo if I wanna throw other things\nin there I certainly can.\n\n280\n00:13:44.710 --> 00:13:46.520\nMaybe I wanna have a copy of the PowerCLI,\nall right?\n\n281\n00:13:46.520 --> 00:13:48.490\nSo I wanna throw the PowerCLI in there.\n\n282\n00:13:48.490 --> 00:13:50.700\nI can do that, and\nnow it'll be available in there.\n\n283\n00:13:50.700 --> 00:13:54.700\nI can't really use it, right, I can't run\nthe PowerCLI from inside of the library,\n\n284\n00:13:54.700 --> 00:13:57.190\nbut I can download it and\nrun it on my own machine if I wanted.\n\n285\n00:13:57.190 --> 00:14:02.080\nSo, I'm gonna load the hybrid cloud\nmanager in there, that OVF that I've got.\n\n286\n00:14:02.080 --> 00:14:04.080\nAnd so it's gonna bring that in.\n\n287\n00:14:04.080 --> 00:14:05.860\nIt's gonna populate it\nwith a name right there.\n\n288\n00:14:05.860 --> 00:14:07.900\nI'll leave that be and just hit OK.\n\n289\n00:14:07.900 --> 00:14:10.180\nAnd it's gonna start bringing that one in,\nokay.\n\n290\n00:14:10.180 --> 00:14:11.580\nSo it's gonna import that\none in the background.\n\n291\n00:14:11.580 --> 00:14:12.950\nThe file will show up immediately.\n\n292\n00:14:12.950 --> 00:14:15.710\nSo I immediately see\nVM-Hybrid-Cloud-Manager.\n\n293\n00:14:15.710 --> 00:14:19.110\nBut over here I'll see\nStored Content Locally is set to No.\n\n294\n00:14:19.110 --> 00:14:21.480\nIf it's not stored locally,\nwhere is it stored?\n\n295\n00:14:21.480 --> 00:14:22.830\nWell nowhere, it's uploading, right?\n\n296\n00:14:22.830 --> 00:14:25.230\nSo it's gonna show that way while\nit's uploading until it's done.\n\n297\n00:14:25.230 --> 00:14:28.225\nAnd once it's done, then these values\nwill populate and it'll show it.\n\n298\n00:14:28.225 --> 00:14:30.620\nNow that file's about a gig and\na half in size.\n\n299\n00:14:30.620 --> 00:14:32.080\nSo that's gonna take a minute.\n\n300\n00:14:32.080 --> 00:14:35.000\nWhile we wait a minute,\nI'm gonna go to the Other Types tab.\n\n301\n00:14:35.000 --> 00:14:37.700\nThe Other Types tab, that's where we\nsee everything that's not an OVF.\n\n302\n00:14:37.700 --> 00:14:41.760\nAnd if you float over the Import button,\nyou'll see a little tooltip that says,\n\n303\n00:14:41.760 --> 00:14:44.370\nImport ISO images or other file types.\n\n304\n00:14:44.370 --> 00:14:46.450\nYou can put whatever you want in here.\n\n305\n00:14:46.450 --> 00:14:49.370\nNot just templates, even though\ntemplates are the main design for\n\n306\n00:14:49.370 --> 00:14:51.190\nwhat this is supposed to be used for.\n\n307\n00:14:51.190 --> 00:14:54.200\nSo I'm gonna go ahead and hit that little\nImport, and I'll do another local file.\n\n308\n00:14:55.250 --> 00:14:58.376\nAnd this time, when I browse,\nsee how other stuff shows up, and\n\n309\n00:14:58.376 --> 00:15:00.330\nso I can see some of these ISO images?\n\n310\n00:15:00.330 --> 00:15:04.450\nIt's actually defaulting just to ISOs,\nand we can change that to all files and\n\n311\n00:15:04.450 --> 00:15:06.440\nput pretty much anything in there.\n\n312\n00:15:06.440 --> 00:15:09.570\nSo if I wanna put a copy\nof the Power CLI in, I can.\n\n313\n00:15:09.570 --> 00:15:10.520\nSo I'll go ahead and choose that.\n\n314\n00:15:10.520 --> 00:15:13.050\nAnd I'm gonna throw the PowerCLI in there.\n\n315\n00:15:13.050 --> 00:15:14.850\nNow that's an executable file.\n\n316\n00:15:14.850 --> 00:15:17.970\nI definitely can't use an executable\nfile from inside of here because\n\n317\n00:15:17.970 --> 00:15:19.860\nit only runs on Windows machines.\n\n318\n00:15:19.860 --> 00:15:22.350\nIt's not gonna run on a ESXi host, right?\n\n319\n00:15:22.350 --> 00:15:25.260\nBut it'll upload it,\nit'll have it there and then from my\n\n320\n00:15:25.260 --> 00:15:29.390\nown machine if I ever want I can come\nover here and I can chose that file.\n\n321\n00:15:29.390 --> 00:15:33.973\nAnd under actions you'll see export\nthe item, clone the item, right.\n\n322\n00:15:33.973 --> 00:15:36.716\nI can actually choose to export it and\nsend it somewhere else or\n\n323\n00:15:36.716 --> 00:15:38.865\neven download it and\nrun it from my own machine.\n\n324\n00:15:38.865 --> 00:15:41.800\nThat'll show up as soon as the upload is\ndone it'll have it where I can download it\n\n325\n00:15:41.800 --> 00:15:42.930\nto my own machine.\n\n326\n00:15:42.930 --> 00:15:45.550\nThere'll be a little folder with\nthe arrow pointing the other direction.\n\n327\n00:15:45.550 --> 00:15:49.190\nSo now I can go to any computer,\nlogin to the vSphere client,\n\n328\n00:15:49.190 --> 00:15:53.060\ngo into this library and\nthen download the PowerCLI.\n\n329\n00:15:53.060 --> 00:15:54.140\nLoad it and have it going.\n\n330\n00:15:54.140 --> 00:15:57.504\nI've created my own repository of files.\n\n331\n00:15:57.504 --> 00:16:00.576\nAll right so\nthose are uploading in the background and\n\n332\n00:16:00.576 --> 00:16:03.726\nwe can watch those in our tasks or\nI'll just let it run.\n\n333\n00:16:03.726 --> 00:16:06.624\nBut once they're uploaded,\nthen they're ready to use.\n\n334\n00:16:06.624 --> 00:16:10.489\nNow what if I have more than one location\nI want them to access these files.\n\n335\n00:16:10.489 --> 00:16:12.478\nSo I said if this is\nmy dev environment and\n\n336\n00:16:12.478 --> 00:16:16.400\nI want access to these things in\nmy production environment too.\n\n337\n00:16:16.400 --> 00:16:18.740\nWell, now I can go to my\nproduction environment and\n\n338\n00:16:18.740 --> 00:16:23.040\nI can subscribe to this,\nthis library has a URL, right?\n\n339\n00:16:23.040 --> 00:16:27.680\nSo if I go back to my Manage tab,\nI can see the URL right here and\n\n340\n00:16:27.680 --> 00:16:29.410\nI'm just gonna copy that link, right?\n\n341\n00:16:29.410 --> 00:16:31.530\nSo I'm copying that\nlink into my clipboard.\n\n342\n00:16:31.530 --> 00:16:34.830\nWe put a password on it, right so\nI need to remember what that password is,\n\n343\n00:16:34.830 --> 00:16:39.500\nwhich hopefully I do, and now I can\ngo to my other vSphere deployment.\n\n344\n00:16:39.500 --> 00:16:42.950\nAnd in my other vSphere deployment what\nwe're gonna do is we're gonna create\n\n345\n00:16:42.950 --> 00:16:44.140\na new content library.\n\n346\n00:16:44.140 --> 00:16:46.820\nSo I'm gonna go here to content libraries,\nand\n\n347\n00:16:46.820 --> 00:16:49.140\nI'll go to create a new content library.\n\n348\n00:16:49.140 --> 00:16:51.820\nAnd when we create the new content\nlibrary on the other system,\n\n349\n00:16:51.820 --> 00:16:55.640\nwe have to give it a name, and so\nI might call this my dev library.\n\n350\n00:16:55.640 --> 00:16:58.870\nI'm gonna call it my production library,\n\n351\n00:16:58.870 --> 00:17:03.110\nsince I'm over on my production server\nnow, but you can call it whatever.\n\n352\n00:17:03.110 --> 00:17:05.860\nAnd the important part is on the next\npage, instead of saying I want\n\n353\n00:17:05.860 --> 00:17:10.760\na local library, I'm gonna say\nthat I'm subscribing to a library.\n\n354\n00:17:10.760 --> 00:17:14.680\nAnd I'm gonna plug in the URL\nthat points to that library, so\n\n355\n00:17:14.680 --> 00:17:16.110\nnow it's gonna subscribe.\n\n356\n00:17:16.110 --> 00:17:20.210\nThese don't have to be the same vSphere\ndeployments, we completely separate, for\n\n357\n00:17:20.210 --> 00:17:24.320\nme it's production versus dev and\nI'm linking them together right here.\n\n358\n00:17:24.320 --> 00:17:27.960\nNow when we do that I've\ngotta provide a password so\n\n359\n00:17:27.960 --> 00:17:30.680\nI've got a little check mark here\nthat says, Enable authentication, and\n\n360\n00:17:30.680 --> 00:17:33.660\nI can punch in the password\nthat we set for the library.\n\n361\n00:17:33.660 --> 00:17:35.590\nIf you don't have password,\nyou don't need it.\n\n362\n00:17:35.590 --> 00:17:38.170\nAnd then next is a really\nimportant choice.\n\n363\n00:17:39.260 --> 00:17:42.210\nDownload all library\ncontent immediately or\n\n364\n00:17:42.210 --> 00:17:45.320\ndownload library content only when needed,\nokay.\n\n365\n00:17:45.320 --> 00:17:48.470\nIf I leave it the default,\ndownload all content immediately.\n\n366\n00:17:48.470 --> 00:17:50.880\nit's gonna connect up\nto the other library.\n\n367\n00:17:50.880 --> 00:17:54.640\nAnd it's gonna copy everything\nfrom that library right here.\n\n368\n00:17:54.640 --> 00:17:58.020\nAnd then whenever changes are seen,\nit'll get those and copy them down, too.\n\n369\n00:17:59.210 --> 00:18:02.590\nIf it's a really big library, let's\nsay it's a terabyte of stuff, tons of\n\n370\n00:18:02.590 --> 00:18:07.900\ntemplates, I don't actually need them,\nI just want them to be available, right?\n\n371\n00:18:07.900 --> 00:18:11.330\nIf I do this,\nit's gonna download all of them.\n\n372\n00:18:11.330 --> 00:18:15.210\nSo another option I've got is to\ndownload content only when needed.\n\n373\n00:18:15.210 --> 00:18:18.080\nNow I can go into the library and\n\n374\n00:18:18.080 --> 00:18:22.350\nif I go to use a template from the\nlibrary, it'll download it at that time.\n\n375\n00:18:22.350 --> 00:18:26.970\nSo if I have 100 templates and I only use\nfive of them, the other 95 show up, but\n\n376\n00:18:26.970 --> 00:18:27.820\nit never downloads them.\n\n377\n00:18:27.820 --> 00:18:30.790\nIt's a great way to save space,\nbut it hurts you time-wise.\n\n378\n00:18:30.790 --> 00:18:33.220\nIf there's ever an emergency and\nI need to roll out this VM,\n\n379\n00:18:33.220 --> 00:18:36.280\nI need that template right now, I've\ngot to wait for it to download, right.\n\n380\n00:18:36.280 --> 00:18:38.830\nSo that's kind of what\nwe are choosing here.\n\n381\n00:18:38.830 --> 00:18:41.460\nFast deployment, we download everything.\n\n382\n00:18:41.460 --> 00:18:43.150\nBut efficient space and\n\n383\n00:18:43.150 --> 00:18:47.080\nstorage utilization,\nwe choose to download it as needed, okay?\n\n384\n00:18:47.080 --> 00:18:48.790\nAnd you can kind of do a mixture.\n\n385\n00:18:48.790 --> 00:18:51.770\nI'm gonna choose download library\ncontent only when needed.\n\n386\n00:18:51.770 --> 00:18:54.525\nAnd I'll show you in a moment we can\nactually go and pick physical files and\n\n387\n00:18:54.525 --> 00:18:56.137\nsay synchronize it right now, all right?\n\n388\n00:18:56.137 --> 00:18:58.490\nSo we can kinda get an in between.\n\n389\n00:18:58.490 --> 00:19:00.730\nBut here in the wizard you just\nsee the two separate items.\n\n390\n00:19:00.730 --> 00:19:04.190\nDownload it all now or\ndownload it at the time that I use it.\n\n391\n00:19:05.460 --> 00:19:06.890\nAll right, so I'm gonna go ahead and\nhit Next on that.\n\n392\n00:19:06.890 --> 00:19:08.730\nNow it's gonna ask,\nwhere am I gonna put this thing?\n\n393\n00:19:08.730 --> 00:19:11.450\nAnd so,\nI need to pick a datastore to stick it in.\n\n394\n00:19:11.450 --> 00:19:14.480\nI'll put it in my host 02 datastore.\n\n395\n00:19:16.110 --> 00:19:17.170\nAnd I'll move forward on that.\n\n396\n00:19:17.170 --> 00:19:18.290\nAnd we can finish it up.\n\n397\n00:19:18.290 --> 00:19:20.540\nNow, normally, this would be\nin two different environments.\n\n398\n00:19:20.540 --> 00:19:24.350\nTechnically, I just did it right here in\nthe same environment, so I just linked\n\n399\n00:19:24.350 --> 00:19:28.110\nmy DevTeamLibrary to my ProductionLibrary\nright here in the same environment.\n\n400\n00:19:28.110 --> 00:19:31.590\nIt's the same thing when you\nget two different systems.\n\n401\n00:19:31.590 --> 00:19:33.880\nNow when I go to the production library,\nso\n\n402\n00:19:33.880 --> 00:19:36.320\nhere's the production library\nthat's technically a subscriber.\n\n403\n00:19:36.320 --> 00:19:40.840\nIt's subscribed to the DevTeamLibrary and\nso notice the icon\n\n404\n00:19:40.840 --> 00:19:44.900\nthe DevTeamLibrary is published and so\nit's got a blue arrow that points up.\n\n405\n00:19:44.900 --> 00:19:47.890\nThe ProductionLibrary subscribers\nhas a blue arrow that points down.\n\n406\n00:19:47.890 --> 00:19:50.062\nThink of it as upload versus download.\n\n407\n00:19:50.062 --> 00:19:53.430\nThe DevTeamLibrary uploads\nits files to other people.\n\n408\n00:19:53.430 --> 00:19:58.070\nThe subscribers download the files\nfrom whoever the publisher is.\n\n409\n00:19:58.070 --> 00:20:03.710\nAnd so I'm in the production library,\nI can come over here to Related Objects.\n\n410\n00:20:03.710 --> 00:20:07.000\nAnd I can the templates and\nother types of files that I've got.\n\n411\n00:20:07.000 --> 00:20:11.170\nNow they're both gonna be empty for\nright now and there's two reason for that.\n\n412\n00:20:11.170 --> 00:20:13.240\nOne, is I just said it up and\nhasn't had time to refresh.\n\n413\n00:20:13.240 --> 00:20:15.030\nI probably need to refresh my screen.\n\n414\n00:20:15.030 --> 00:20:18.340\nThe other thing is those files\nprobably haven't finish uploading yet.\n\n415\n00:20:18.340 --> 00:20:19.820\nThey're uploading in the background and\n\n416\n00:20:19.820 --> 00:20:22.110\nif they haven't finish uploading\nthey're not gonna show here yet.\n\n417\n00:20:22.110 --> 00:20:26.180\nWe can't synchronize a file that hasn't\ncompleted the upload, all right?\n\n418\n00:20:26.180 --> 00:20:29.040\nSo I'm gonna refresh my screen and\njust see if that's all it is and yeah,\n\n419\n00:20:29.040 --> 00:20:29.990\nit's still not done.\n\n420\n00:20:29.990 --> 00:20:32.330\nSo I'm gonna have to wait for\nthat upload to finish and\n\n421\n00:20:32.330 --> 00:20:37.190\nif I jump back over to my DevTeamLibrary I\ncan see that the Hybrid Cloud Manager\n\n422\n00:20:37.190 --> 00:20:38.670\nis still showing us zero bytes.\n\n423\n00:20:38.670 --> 00:20:40.460\nSo it's not done uploading.\n\n424\n00:20:40.460 --> 00:20:43.090\nAnd then whenever it does finally\nmanage to finish uploading,\n\n425\n00:20:43.090 --> 00:20:46.060\nthen it'll show up and\nwe'll see it in the other library, okay.\n\n426\n00:20:46.060 --> 00:20:48.000\nSo while I'm waiting on that,\n\n427\n00:20:48.000 --> 00:20:51.540\nlet's talk about something else\nthat's important here, permissions.\n\n428\n00:20:51.540 --> 00:20:53.530\nWhen I created this library, right?\n\n429\n00:20:53.530 --> 00:20:56.350\nI created the DevTeamLibrary,\nwe put some files into it.\n\n430\n00:20:56.350 --> 00:20:58.890\nI just got a notification that one\nof the files finished uploading.\n\n431\n00:20:58.890 --> 00:21:02.300\nSo that one's,\nactually that's a system error.\n\n432\n00:21:02.300 --> 00:21:06.440\nWe've got unable to update files in\nthe library, course may be slow or\n\n433\n00:21:06.440 --> 00:21:07.130\nnot responding.\n\n434\n00:21:07.130 --> 00:21:09.530\nAll right, well, we'll wait on that,\nwe can handle slow.\n\n435\n00:21:10.640 --> 00:21:12.130\nAll right, but when I set this up,\n\n436\n00:21:12.130 --> 00:21:15.040\nyou might have noticed that there wasn't\nreally an option for permissions.\n\n437\n00:21:15.040 --> 00:21:19.990\nWhen you go to Manage, you've got settings\nand you've got a password and that's it.\n\n438\n00:21:19.990 --> 00:21:22.540\nWell, what if I'm doing\nrole based authentication?\n\n439\n00:21:22.540 --> 00:21:26.000\nAnd so I've got user roles to find,\nI've got administrators and help desk and\n\n440\n00:21:26.000 --> 00:21:27.870\nall these other things with roles.\n\n441\n00:21:27.870 --> 00:21:30.040\nI can't do that here,\nI just have a password.\n\n442\n00:21:30.040 --> 00:21:32.130\nIf you have the password you get access,\nif you don't have the password,\n\n443\n00:21:32.130 --> 00:21:34.170\nyou don't get access and that's it, right?\n\n444\n00:21:34.170 --> 00:21:38.620\nSo this is not as robust as we'd think.\n\n445\n00:21:38.620 --> 00:21:41.330\nWell it's not that it's not robust,\nit's just that it's not granular.\n\n446\n00:21:41.330 --> 00:21:45.170\nI can't set permissions right\nhere on the library itself.\n\n447\n00:21:45.170 --> 00:21:49.000\nThe libraries get their permissions\nfrom the global permissions.\n\n448\n00:21:49.000 --> 00:21:50.360\nAnd I know that's a little bit weird,\n\n449\n00:21:50.360 --> 00:21:52.390\nwe're use to seeing the permissions\nright here on the system.\n\n450\n00:21:52.390 --> 00:21:55.130\nBut in this case they are actually\ntucked away under the global stuff.\n\n451\n00:21:55.130 --> 00:22:00.580\nSo if I go to my homepage and\nI go down to Administration and\n\n452\n00:22:00.580 --> 00:22:06.620\nunder Administration we can go into the\nGlobal Permissions over here on the left.\n\n453\n00:22:06.620 --> 00:22:10.470\nAnd under Global Permissions this\nis where I can set my permissions.\n\n454\n00:22:10.470 --> 00:22:13.090\nWhen you come in here and look at the\nGlobal Permissions that have been assigned\n\n455\n00:22:13.090 --> 00:22:18.550\nlike to administrator or whoever, when you\nedit those you'll see in the permissions\n\n456\n00:22:18.550 --> 00:22:21.900\nover here as we browse down that\nlist of everything that's in here.\n\n457\n00:22:21.900 --> 00:22:25.920\nWe've got all privileges and under there,\nyou've got alarm labels and so\n\n458\n00:22:25.920 --> 00:22:31.150\non, that we'll actually find those\ncontent libraries tucked away in here,\n\n459\n00:22:31.150 --> 00:22:32.850\nif we can find it in the list.\n\n460\n00:22:32.850 --> 00:22:37.468\nThey are buried in here somewhere and\nright there, ContentLibrary.\n\n461\n00:22:37.468 --> 00:22:41.259\nSo, you can find the ContentLibrary and\nwhen you expand it out, you'll see,\n\n462\n00:22:41.259 --> 00:22:44.766\nAddLibraryItem, CreateLocalLibrary,\nCreateSubscribedLibrary,\n\n463\n00:22:44.766 --> 00:22:46.590\nDeleteLocalLibrary, and so on.\n\n464\n00:22:46.590 --> 00:22:51.890\nSo if I wanna set permissions as far\nas who's able to access the library or\n\n465\n00:22:51.890 --> 00:22:53.410\ndownload things from the library or\n\n466\n00:22:53.410 --> 00:22:55.650\neven delete the library I\ndo it at the global level.\n\n467\n00:22:55.650 --> 00:22:58.190\nAnd that means that if I have\nfive different libraries\n\n468\n00:22:58.190 --> 00:23:00.280\nit's gonna be the same\npermissions across all five.\n\n469\n00:23:00.280 --> 00:23:03.270\nSo I don't get granular control but\nI do get control and\n\n470\n00:23:03.270 --> 00:23:05.390\nthat can show up on the exam that's\nwhy I wanted to mention that.\n\n471\n00:23:05.390 --> 00:23:07.380\nSo permissions can be kind of important.\n\n472\n00:23:08.850 --> 00:23:14.490\nAll right, the other thing is when I\ndid the subscription I told it, hey\n\n473\n00:23:14.490 --> 00:23:19.530\ndon't download everything right now, just\ndownload things when we need it, okay?\n\n474\n00:23:19.530 --> 00:23:22.430\nWell, that doesn't mean that\nit doesn't download anything.\n\n475\n00:23:22.430 --> 00:23:24.620\nWhat it does do is it downloads\nwhat's called the metadata.\n\n476\n00:23:24.620 --> 00:23:28.060\nAnd the metadata is like\na set of descriptions.\n\n477\n00:23:28.060 --> 00:23:33.410\nIt says, here's the file name and\nfile size and file type of this file.\n\n478\n00:23:33.410 --> 00:23:35.160\nIt's everything but the data.\n\n479\n00:23:35.160 --> 00:23:36.830\nAnd so when I set up that subscription,\n\n480\n00:23:36.830 --> 00:23:38.300\nthat what I'm getting\nright now is the metadata.\n\n481\n00:23:38.300 --> 00:23:40.940\nAnd the metadata is very small and\nthat happens very quickly.\n\n482\n00:23:40.940 --> 00:23:43.740\nSo we get that subscription,\nwe get the data populated really quick.\n\n483\n00:23:44.750 --> 00:23:49.640\nThen any time I go to use a file,\nit'll download it in the background.\n\n484\n00:23:49.640 --> 00:23:52.210\nOr we can browse into the library and\n\n485\n00:23:52.210 --> 00:23:54.920\nyou can right-click on a file and\ntell it to download it now.\n\n486\n00:23:54.920 --> 00:23:56.920\nAnd it doesn't say download,\nit says synchronize, so\n\n487\n00:23:56.920 --> 00:23:57.990\nyou can say synchronize now.\n\n488\n00:23:57.990 --> 00:24:03.171\nSo we're synchronizing that file from\nthe publisher down to the subscriber.\n\n489\n00:24:03.171 --> 00:24:06.805\nSo if there's a hundred templates and\nI know I'm gonna use five of them,\n\n490\n00:24:06.805 --> 00:24:10.795\nI'm not gonna use them today, but I know\nI will use those five, I can go ahead and\n\n491\n00:24:10.795 --> 00:24:13.030\nsynchronize the five right now.\n\n492\n00:24:13.030 --> 00:24:16.570\nAnd that way when I do need them,\nthey'll already be there for me.\n\n493\n00:24:16.570 --> 00:24:19.490\nAnd then on those rare occasions when\nI need one of the other templates,\n\n494\n00:24:19.490 --> 00:24:22.580\nI can just go to use it and it'll\ndownload at that time and input along.\n\n495\n00:24:22.580 --> 00:24:27.470\nOr ISOs, executables, whatever other files\nit is that I have that I might need,\n\n496\n00:24:27.470 --> 00:24:28.850\nThose will come along when they are ready.\n\n497\n00:24:30.200 --> 00:24:33.470\nAll right, let's take a look and see if\nthat has finished downloading for us.\n\n498\n00:24:34.910 --> 00:24:37.160\nAnd so I'm just gonna browse\nback into my DevTeamLibrary and\n\n499\n00:24:37.160 --> 00:24:40.490\nsee if I've got some file sizes, this is\nthe easiest way to tell if it's done or\n\n500\n00:24:40.490 --> 00:24:43.410\nto watch in your, in your tasks.\n\n501\n00:24:43.410 --> 00:24:45.035\nYou'll see them uploading there too.\n\n502\n00:24:45.035 --> 00:24:48.171\nSo I still see zero bytes on that one for\nmy PowerCLI and\n\n503\n00:24:48.171 --> 00:24:52.880\nI should have uploaded the PowerCLI\nfirst since that's the smaller one.\n\n504\n00:24:52.880 --> 00:24:55.850\nIt's uploading the big one first and\nthen it'll do the smaller one.\n\n505\n00:24:55.850 --> 00:24:57.987\nYou know what,\nI'm gonna cancel the big OVF download.\n\n506\n00:24:57.987 --> 00:25:00.840\nThat way, we can just do the small file,\nit will already be loaded.\n\n507\n00:25:00.840 --> 00:25:05.090\nUploading a two gig file into a web\nbrowser is not necessarily the most fun\n\n508\n00:25:05.090 --> 00:25:06.958\nthing to do in the world there,\nso it's just taking a long time.\n\n509\n00:25:06.958 --> 00:25:09.374\nBut the PowerCLI is nice and small,\nthat one will be ready for us.\n\n510\n00:25:09.374 --> 00:25:11.701\nAnd so if I just refresh and\nsure enough, yeah.\n\n511\n00:25:11.701 --> 00:25:13.243\nIf we take a look at it now,\n\n512\n00:25:13.243 --> 00:25:17.888\nsee my VMware PowerCLI right here is\nshowing us Stored Content Locally, Yes.\n\n513\n00:25:17.888 --> 00:25:21.632\nIt is actually stored here,\nit's only 79 megs in size, and\n\n514\n00:25:21.632 --> 00:25:24.300\nit's got my modified date and\nmy sync date.\n\n515\n00:25:24.300 --> 00:25:25.115\nSo here it is.\n\n516\n00:25:25.115 --> 00:25:27.000\nThis is local content, right?\n\n517\n00:25:27.000 --> 00:25:30.110\nI've got it right here\nin my DevTeamLibrary.\n\n518\n00:25:30.110 --> 00:25:31.840\nNow that's my publisher.\n\n519\n00:25:31.840 --> 00:25:36.060\nThat's the one that's publishing\nout to anybody who needs it, right?\n\n520\n00:25:36.060 --> 00:25:42.150\nBut if I go back up to\nmy other data store,\n\n521\n00:25:42.150 --> 00:25:46.970\nmy production library, so if I go to\nContent Libraries and ProductionLibrary,\n\n522\n00:25:46.970 --> 00:25:51.600\nand I jump into it, well, it's\nactually not showing the PowerCLI yet.\n\n523\n00:25:51.600 --> 00:25:52.540\nWhy not?\n\n524\n00:25:52.540 --> 00:25:56.520\nWell, it has to refresh its file listing,\nit's gotta reach out and get a copy of it.\n\n525\n00:25:56.520 --> 00:26:00.690\nAnd that does happen periodically, if we\nwait long enough, it'll reach out and\n\n526\n00:26:00.690 --> 00:26:01.700\nit'll update.\n\n527\n00:26:01.700 --> 00:26:05.410\nIf it doesn't, we can kick it off by\nRight-Clicking on the production library,\n\n528\n00:26:05.410 --> 00:26:07.030\nand going to synchronized library.\n\n529\n00:26:07.030 --> 00:26:11.320\nSo when I hit that, now it's going to\nreach out to whoever it's subscribed to,\n\n530\n00:26:11.320 --> 00:26:12.920\nAnd update its file list.\n\n531\n00:26:12.920 --> 00:26:14.870\nAnd when it updates that file list,\nit's gonna download and\n\n532\n00:26:14.870 --> 00:26:17.820\npopulate it in here, and\nwe'll be able to see.\n\n533\n00:26:17.820 --> 00:26:18.800\nThere we go.\n\n534\n00:26:18.800 --> 00:26:21.194\nA quick refresh and\nI can see that PowerCLI.\n\n535\n00:26:21.194 --> 00:26:25.590\nOkay, now notice that PowerCLI is\nshowing Stored Content Locally, No.\n\n536\n00:26:25.590 --> 00:26:27.453\nI got the metadata for the file,\n\n537\n00:26:27.453 --> 00:26:31.524\nthe file exists over in the dev team\ndata store that's publishing it.\n\n538\n00:26:31.524 --> 00:26:35.710\nI'm subscribed so I see the file, but\nI don't actually have it available here.\n\n539\n00:26:35.710 --> 00:26:38.540\nNow, the first time I'm go to use it,\nif somebody will come along and\n\n540\n00:26:38.540 --> 00:26:44.100\nclick on it and try to export it,\nthen it's gonna download it at that time.\n\n541\n00:26:44.100 --> 00:26:47.020\nAnd for a 100 meg file like this,\nit's not a big deal.\n\n542\n00:26:47.020 --> 00:26:48.230\nBut if this a template,\n\n543\n00:26:48.230 --> 00:26:52.140\nthere's a few gigs in size,\nI may not have that kind of patience.\n\n544\n00:26:52.140 --> 00:26:54.160\nI may be in a hurry,\nI may need this right away.\n\n545\n00:26:54.160 --> 00:26:55.820\nAnd that's when we can\ncause it to synchronize and\n\n546\n00:26:55.820 --> 00:26:57.620\nstore it locally right now.\n\n547\n00:26:57.620 --> 00:26:58.570\nSo under the Action Menu,\n\n548\n00:26:58.570 --> 00:27:02.700\nyou'll see a few different options\nhere like Synchronize Item.\n\n549\n00:27:02.700 --> 00:27:05.840\nSynchronize Item says go ahead and\ndownload it so that it's\n\n550\n00:27:05.840 --> 00:27:10.780\nnot just stored in production or in dev,\nnow it's also stored in production too.\n\n551\n00:27:10.780 --> 00:27:13.170\nAnd so in the background it's\ngonna download that, and\n\n552\n00:27:13.170 --> 00:27:16.030\nas soon as it completes,\nwhat we'll see changes.\n\n553\n00:27:16.030 --> 00:27:20.280\nInstead of saying stored content locally,\nit'll say, or instead of saying no,\n\n554\n00:27:20.280 --> 00:27:23.800\nit'll say yes, that it will download\nthat and it will be available.\n\n555\n00:27:23.800 --> 00:27:29.890\nSo we can download all the files\nright when we synchronize initially,\n\n556\n00:27:29.890 --> 00:27:32.310\nor we can download files as we use them,\nor\n\n557\n00:27:32.310 --> 00:27:35.760\nwe can force them to synchronize\nmanually like this eventually.\n\n558\n00:27:35.760 --> 00:27:37.450\nThere we go.\nA couple of refreshes later and\n\n559\n00:27:37.450 --> 00:27:41.680\nnow I can see Stored Content Locally,\nYes, and now it's stored right here, too.\n\n560\n00:27:41.680 --> 00:27:46.090\nAll right, so this is a great way to share\ntemplates, OVFs, virtual applications,\n\n561\n00:27:46.090 --> 00:27:51.090\nyou can store ISOs, even executables\nall in a content library, and\n\n562\n00:27:51.090 --> 00:27:55.680\nshare it between VSphere deployments, it\ngives you a lot of flexibility, and a lot\n\n563\n00:27:55.680 --> 00:27:59.910\nof just an easy way to share that data in\nbetween the two different environments.\n\n564\n00:27:59.910 --> 00:28:00.430\n>> All right, Don.\n\n565\n00:28:00.430 --> 00:28:02.650\nIt does look like we're coming\nto the end of another episode,\n\n566\n00:28:02.650 --> 00:28:05.200\nbut before we sign off, do you have any\nadditional words you'd like to throw in?\n\n567\n00:28:05.200 --> 00:28:08.410\n>> You know Wes, the only thing I didn't\nreally cover was name resolution.\n\n568\n00:28:08.410 --> 00:28:12.950\nIf you're going multi-site and\nthe URL to subscribe is using a fully\n\n569\n00:28:12.950 --> 00:28:15.780\nqualified domain name, obviously you'll\nneed a DNS infrastructure in place to be\n\n570\n00:28:15.780 --> 00:28:19.890\nable to resolve the name to an IP when\nyou go and subscribe to the libraries.\n\n571\n00:28:19.890 --> 00:28:24.080\nOtherwise, you can modify the URL to use\nan IP, but it kind of wreaks havoc with\n\n572\n00:28:24.080 --> 00:28:26.560\nthe certificates,\nit does expect a secure connection.\n\n573\n00:28:26.560 --> 00:28:28.730\nSo just make sure you got\na good DNS infrastructure,\n\n574\n00:28:28.730 --> 00:28:30.400\nthis stuff will work out just fine for\nyou.\n\n575\n00:28:30.400 --> 00:28:33.250\n>> All right, Don, well as always we\nappreciate you being here in the studios\n\n576\n00:28:33.250 --> 00:28:34.940\nand we appreciate you the viewer watching.\n\n577\n00:28:34.940 --> 00:28:37.910\nSigning out for ITProTV,\nI've been your host Wes Bryan.\n\n578\n00:28:37.910 --> 00:28:38.566\n>> And I'm Don Pezet.\n\n579\n00:28:38.566 --> 00:28:40.794\n>> And we'll see you next time.\n\n580\n00:28:40.794 --> 00:28:47.205\n[MUSIC]\n\n",
          "vimeoId": "170617047"
        }
      ],
      "title": "Multi-site Environments"
    }
  ],
  "url": "vmware-certified-professional-6-vcp6dcv",
  "vLab": false
}
