{
  "description": "Windows Hello for Business was introduced with the Windows 10 Creators Update. WHfB allows businesses to implement multi-factor authentication (MFA) as part of the Windows client logon process. This series introduces the viewers Windows Hello for Business and then walks you through the entire process of deploying WHfB in a business environment.",
  "descriptionMD": "Windows Hello for Business was introduced with the Windows 10 Creators Update. WHfB allows businesses to implement multi-factor authentication (MFA) as part of the Windows client logon process. This series introduces the viewers Windows Hello for Business and then walks you through the entire process of deploying WHfB in a business environment.",
  "length": "21418",
  "name": "Windows Hello for Business",
  "practiceExam": false,
  "subtitle": "Windows Hello for Business",
  "tagUrl": "microsoft-technical",
  "topics": [
    {
      "episodes": [
        {
          "description": "In this episode, Don and Mike introduce the viewers to Windows Hello for Business. They discuss the risks associated with standard password usage and explore how Windows Hello for Business can provide a more secure authentication experience.",
          "length": "1541",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-1-1-concepts-050217.00_25_26_07.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-1-1-concepts-050217.00_25_26_07.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-1-1-concepts-050217.00_25_26_07.Still001-sm.jpg",
          "title": "Concepts",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:05.017\nWelcome to ITProTV I'm your\nhost Don Pezet [CROSSTALK]\n\n2\n00:00:05.017 --> 00:00:08.554\n[MUSIC]\n\n3\n00:00:08.554 --> 00:00:10.783\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:10.783 --> 00:00:15.380\n&gt;&gt; All right, good morning,\ngood afternoon and good evening.\n\n5\n00:00:15.380 --> 00:00:17.570\nAnd welcome back to another\nepisode of ITProTV.\n\n6\n00:00:17.570 --> 00:00:19.650\nI'm your host Don Pezet.\n\n7\n00:00:19.650 --> 00:00:22.360\nHere today with a very special\nseries that we're kicking off,\n\n8\n00:00:22.360 --> 00:00:24.550\nwhich is Windows Hello for Business.\n\n9\n00:00:24.550 --> 00:00:27.210\nAnd I've got a special guest\nhere in the studio with us, Mr.\n\n10\n00:00:27.210 --> 00:00:30.100\nMike Stephens, who's gonna be helping\nus kinda walk through Windows Hello for\n\n11\n00:00:30.100 --> 00:00:32.240\nBusiness and see what it can do for us.\n\n12\n00:00:32.240 --> 00:00:34.080\nMike, thanks for\njoining us in the studios.\n\n13\n00:00:34.080 --> 00:00:36.450\n&gt;&gt; Thanks for having me Don,\nit's a pleasure to be here.\n\n14\n00:00:36.450 --> 00:00:40.920\n&gt;&gt; And what's on our agenda for\ntoday as far as where to get started?\n\n15\n00:00:40.920 --> 00:00:45.090\n&gt;&gt; Yeah, so, Windows Hello for Business\nis a new thing that we brought out.\n\n16\n00:00:45.090 --> 00:00:49.410\nAnd this is going to,\nbasically it's a password replacement.\n\n17\n00:00:49.410 --> 00:00:51.780\nWe're targeting users on passwords.\n\n18\n00:00:51.780 --> 00:00:55.020\nAnd so what we're gonna do today\nis talk about the concepts\n\n19\n00:00:55.020 --> 00:00:56.840\nof leading up to Windows Hello.\n\n20\n00:00:56.840 --> 00:01:00.845\nAnd why we need Windows Hello\nin the infrastructure today?\n\n21\n00:01:00.845 --> 00:01:04.650\nAnd the first thing here is to talk\nabout password itself because you have\n\n22\n00:01:04.650 --> 00:01:05.580\na problem.\n\n23\n00:01:05.580 --> 00:01:07.830\nAnd when you have a problem,\nyou need to solve that problem.\n\n24\n00:01:07.830 --> 00:01:10.290\nSo our first thing today is talk\nabout that passwords are bad.\n\n25\n00:01:10.290 --> 00:01:13.140\nWe've been using passwords for\n20 something years.\n\n26\n00:01:13.140 --> 00:01:14.650\nAnd there's just the go to.\n\n27\n00:01:14.650 --> 00:01:18.410\nThey're reliable on the sense that\nmost of use have figured out how to\n\n28\n00:01:18.410 --> 00:01:21.080\ncreate a password that's\nsemi-strong enough.\n\n29\n00:01:21.080 --> 00:01:23.960\nAnd we just have hard time\ngetting off of them because so\n\n30\n00:01:23.960 --> 00:01:27.080\nmuch of the infrastructure\ndepends on the password.\n\n31\n00:01:27.080 --> 00:01:31.510\nAnd so today what we need to do is\nlook at why is the password so bad and\n\n32\n00:01:31.510 --> 00:01:33.040\nwhy do we need to get off of that?\n\n33\n00:01:33.040 --> 00:01:36.570\nAnd so what we really need to do\nis break down what a password is.\n\n34\n00:01:36.570 --> 00:01:40.350\nAnd at the end of the day,\na password is just a symmetric key.\n\n35\n00:01:40.350 --> 00:01:43.773\nWe type in a password that we know,\nso it's like my favorite dog or\n\n36\n00:01:43.773 --> 00:01:45.690\nsomething to that effect.\n\n37\n00:01:45.690 --> 00:01:50.680\nBut underneath the covers that password\nis hashed with a hashing algorithm or\n\n38\n00:01:50.680 --> 00:01:52.880\nwe use a key derivation like PBKDF2 and\n\n39\n00:01:52.880 --> 00:01:57.280\nwe throw some salt in there, and\nmaybe some additional entropy.\n\n40\n00:01:57.280 --> 00:02:00.140\nAnd the output of that\nis basically it's a key.\n\n41\n00:02:00.140 --> 00:02:02.820\nIt's a symmetric key,\nit's the secret that I know and\n\n42\n00:02:02.820 --> 00:02:05.859\nthat it's the secret that\nthe authenticating server knows.\n\n43\n00:02:05.859 --> 00:02:09.830\nAnd so that's server is just going to\ncompare that key to the key I typed\n\n44\n00:02:09.830 --> 00:02:15.040\nin after doing all this computational\nstuff and that's how we authenticate.\n\n45\n00:02:15.040 --> 00:02:17.780\n&gt;&gt; Well, I know you said we've\nbeen using passwords for 20 years,\n\n46\n00:02:17.780 --> 00:02:19.860\nprobably longer for certain things.\n\n47\n00:02:19.860 --> 00:02:24.780\nYou watch the old war spy movies where\nthey had the password response type thing.\n\n48\n00:02:24.780 --> 00:02:26.650\nThat technology's been around a long time.\n\n49\n00:02:26.650 --> 00:02:28.700\nIt's far more advanced\nnow than it used to be.\n\n50\n00:02:28.700 --> 00:02:30.650\nYou mentioned hashes and\nsalts and all that.\n\n51\n00:02:30.650 --> 00:02:34.430\nSo, if we have a highly\nsecured password like that,\n\n52\n00:02:34.430 --> 00:02:37.740\nwhy isn't that a good technology for\nauthentication?\n\n53\n00:02:37.740 --> 00:02:41.840\n&gt;&gt; So, it's not a good technology for\nauthentication because there are three\n\n54\n00:02:41.840 --> 00:02:45.280\ncomponents that we've looked at when\nwe did Windows Hello for Business.\n\n55\n00:02:45.280 --> 00:02:47.850\nAnd one is passwords are phishable.\n\n56\n00:02:47.850 --> 00:02:51.620\nYou can trick somebody into\ngiving you your password.\n\n57\n00:02:51.620 --> 00:02:54.000\nThe other thing is\npasswords are replayable.\n\n58\n00:02:54.000 --> 00:02:56.780\nThe great things about\npasswords is thy are portable,\n\n59\n00:02:56.780 --> 00:02:58.685\nhe bad thing is that they are portable.\n\n60\n00:02:58.685 --> 00:03:01.390\n&gt;&gt; [LAUGH]\n&gt;&gt; Once I get one, I can use it anywhere,\n\n61\n00:03:01.390 --> 00:03:04.350\nand so if I happen to know\nDon's password I can go back\n\n62\n00:03:04.350 --> 00:03:07.180\nto Washington in my office and\nI can pretend to be Don.\n\n63\n00:03:07.180 --> 00:03:08.510\nAnd it works.\n\n64\n00:03:08.510 --> 00:03:12.000\n&gt;&gt; At that point the computer has no\nway of knowing whether it's you or\n\n65\n00:03:12.000 --> 00:03:13.990\nme because all it's checking for\nis a password.\n\n66\n00:03:13.990 --> 00:03:16.310\nIf you've got my password,\nit thinks you're me.\n\n67\n00:03:16.310 --> 00:03:17.760\n&gt;&gt; Right, it's a single factor.\n\n68\n00:03:17.760 --> 00:03:23.160\nIt's just, I just know that you typed in a\nuser identity and you typed in a password,\n\n69\n00:03:23.160 --> 00:03:26.980\nand on the back-end server that's doing\nthe authentication that password worked.\n\n70\n00:03:26.980 --> 00:03:29.810\nAnd so it has no other choice but\nto let that user in.\n\n71\n00:03:29.810 --> 00:03:31.390\nThe other thing that it is,\n\n72\n00:03:31.390 --> 00:03:35.920\nis that we talked about that there\nare phishable and what the big thing and\n\n73\n00:03:35.920 --> 00:03:39.540\nwhat we've seen in a lot of the TV\ntoday is they're breachable.\n\n74\n00:03:39.540 --> 00:03:42.040\nLike I said,\nin that talk about the password.\n\n75\n00:03:42.040 --> 00:03:46.280\nWhen I create a password and we do all\nthat crypto underneath, that password\n\n76\n00:03:46.280 --> 00:03:51.130\nstill has to be stored on the back end so\nit knows how to authenticate me.\n\n77\n00:03:51.130 --> 00:03:53.690\nAnd so that's become a very big target.\n\n78\n00:03:53.690 --> 00:03:57.270\nWe've had quite a few things that\nwe've heard in the news about people\n\n79\n00:03:57.270 --> 00:03:59.900\nhaving identity theft because\nthese breaches on these servers.\n\n80\n00:03:59.900 --> 00:04:03.790\nSo the idea of Windows Hello\nis to go to not one factor or\n\n81\n00:04:03.790 --> 00:04:08.120\nsingle factor but two factors of\nauthentication and we'll get into that.\n\n82\n00:04:08.120 --> 00:04:11.530\nBut the point is that two\nfactors of authentication and\n\n83\n00:04:11.530 --> 00:04:15.391\ndesign it in the way to where we can\ntry to move forward to, non-phishable,\n\n84\n00:04:15.391 --> 00:04:19.100\nnon-replayable and non-breachable.\n\n85\n00:04:19.100 --> 00:04:23.590\nSo with that I want to go into, this is\nwhere we have this whole password thing\n\n86\n00:04:23.590 --> 00:04:26.420\nand so why I wanted to just\ngive the users or viewers,\n\n87\n00:04:26.420 --> 00:04:31.030\nI should say, give the viewers a view of\nhow passwords are easily breached today.\n\n88\n00:04:31.030 --> 00:04:34.320\nI have this little PowerPoint animation\nhere that we can show you here.\n\n89\n00:04:34.320 --> 00:04:37.640\nAnd my head's covering up the bottom\nthere, but we'll get to that.\n\n90\n00:04:37.640 --> 00:04:40.060\nSo here we have this is,\n\n91\n00:04:40.060 --> 00:04:44.000\nhumans are humans, and\nwe don't like to use complex passwords.\n\n92\n00:04:44.000 --> 00:04:47.210\nAnd the problem is,\nwe end up using the same password over and\n\n93\n00:04:47.210 --> 00:04:50.210\nover again, because, well, we remember it.\n\n94\n00:04:50.210 --> 00:04:54.220\nSo the problem here is,\nI use the password at Bank.com.\n\n95\n00:04:54.220 --> 00:04:57.280\nI'll also use that same password all\nthe way through my social media,\n\n96\n00:04:57.280 --> 00:04:58.400\nmaybe some other things, but\n\n97\n00:04:58.400 --> 00:05:03.050\nthen I go to this one obscure sight that\nI only need to do one or two things.\n\n98\n00:05:03.050 --> 00:05:07.250\nBut, like a lot of sights, they make me\nwant to actually sign in with something.\n\n99\n00:05:07.250 --> 00:05:10.370\nAnd so, I use the same password,\ncuz it's easy to remember.\n\n100\n00:05:10.370 --> 00:05:14.880\nWell, while we think of our bank being\na very secure and very trustworthy entity.\n\n101\n00:05:14.880 --> 00:05:19.380\nAs we go down this list here on the right\nside, we start getting our level of trust\n\n102\n00:05:19.380 --> 00:05:23.170\nstarts to diminish until we\ngo to Obscure.com, which,\n\n103\n00:05:23.170 --> 00:05:26.610\nI don't know what they are but there was\nsomething on the website I wanted to see.\n\n104\n00:05:26.610 --> 00:05:28.140\nAnd so what happens is,\n\n105\n00:05:28.140 --> 00:05:31.970\nnow the attacker, he's just gonna find\nthe weakest link in all of these.\n\n106\n00:05:31.970 --> 00:05:36.280\nHe's not gonna go directly to the bank\nbecause banks they are tasked with\n\n107\n00:05:36.280 --> 00:05:38.320\nmaking sure that people don't breach.\n\n108\n00:05:38.320 --> 00:05:42.847\nSo what we wanna do then is that\nbasically the attacker finds Obscure.com,\n\n109\n00:05:42.847 --> 00:05:44.550\nhacks that password.\n\n110\n00:05:44.550 --> 00:05:47.720\nAnd now all of a sudden,\nas we alluded to in the intro here,\n\n111\n00:05:47.720 --> 00:05:51.372\nthat attacker can be me anywhere,\nall over the place.\n\n112\n00:05:51.372 --> 00:05:53.770\nBank.com, Social.com.\n\n113\n00:05:53.770 --> 00:05:58.997\nAnd so now, what ends up happening is that\nI'm actually compromised at that point and\n\n114\n00:05:58.997 --> 00:06:01.465\nmy identity is gone on multiple sites and\n\n115\n00:06:01.465 --> 00:06:04.900\nthen you just have this\nrunaway identity problem here.\n\n116\n00:06:04.900 --> 00:06:07.820\n&gt;&gt; And there's been some high\nvisibility instances of this lately.\n\n117\n00:06:07.820 --> 00:06:11.000\nI know Apple was subjected to this\nwhere they were saying there were\n\n118\n00:06:11.000 --> 00:06:12.600\nhundreds of thousands of\naccounts were breached and\n\n119\n00:06:12.600 --> 00:06:16.020\nit turned out that they themselves\nweren't breached, it was other sites and\n\n120\n00:06:16.020 --> 00:06:19.660\nthrough password reuse they were able\nto compromise those credentials.\n\n121\n00:06:19.660 --> 00:06:22.610\nSo that's a real problem not just for\none company but for\n\n122\n00:06:22.610 --> 00:06:24.670\nevery company,\nevery organization that is out there.\n\n123\n00:06:24.670 --> 00:06:27.650\n&gt;&gt; That's a great point, Don, yeah,\nI mean the problem we have today\n\n124\n00:06:27.650 --> 00:06:32.200\nis that we are really,\nheavily dependent on passwords today.\n\n125\n00:06:32.200 --> 00:06:34.960\nAnd it's a big mountain to move, we've\n\n126\n00:06:34.960 --> 00:06:40.110\ndone several years of investigation on how\ncan we get to a world without passwords?\n\n127\n00:06:40.110 --> 00:06:44.620\nAnd it's not an easy task, it's going\nto take a lot of investigation in\n\n128\n00:06:44.620 --> 00:06:47.850\neach particular enterprise to figure\nout how they can move their business\n\n129\n00:06:47.850 --> 00:06:50.690\nfrom something that we call weak\ncredential, which is just user name and\n\n130\n00:06:50.690 --> 00:06:55.280\npassword to a strong credential,\nthat is, Windows Hello for Business.\n\n131\n00:06:55.280 --> 00:07:00.570\nSo what I wanna do and how is Windows\nHello for Business a strong credential?\n\n132\n00:07:00.570 --> 00:07:04.655\nWell, let's start with what's\ntwo factor authentication, or\n\n133\n00:07:04.655 --> 00:07:07.495\nbasically multi-factor authentication.\n\n134\n00:07:07.495 --> 00:07:09.606\nAnd there's a great document,\n\n135\n00:07:09.606 --> 00:07:15.485\nNIST SP800-171 has a definition of\nwhat multi-factor authentication is.\n\n136\n00:07:15.485 --> 00:07:17.125\nBut we can simplify it here.\n\n137\n00:07:17.125 --> 00:07:19.755\nBasically, it's something you have.\n\n138\n00:07:19.755 --> 00:07:24.765\nIt's typically a private key, and\nhighly recommended that it not be movable,\n\n139\n00:07:24.765 --> 00:07:27.855\nor secured by some sort\nof security device.\n\n140\n00:07:27.855 --> 00:07:33.070\nA common thing is a smart card, or\nperhaps a TPM inside the computer.\n\n141\n00:07:33.070 --> 00:07:37.600\nThe next thing that we have is something\nyou know and this can be a pin.\n\n142\n00:07:37.600 --> 00:07:40.790\nAnd these pins they kind of,\npeople get, well, pin and password,\n\n143\n00:07:40.790 --> 00:07:43.110\nthat's kind of confusing,\nisn't it the same?\n\n144\n00:07:43.110 --> 00:07:46.200\nAnd its really not because in these\nscenarios where you're doing multifactor\n\n145\n00:07:46.200 --> 00:07:50.280\nauthentication, the pin is actually\nentropy, it's not really stored anywhere.\n\n146\n00:07:50.280 --> 00:07:55.200\nIt's basing on the fact that the user\nis going to provide this entropy that\n\n147\n00:07:55.200 --> 00:07:57.440\nhas been given during\na time of provisioning.\n\n148\n00:07:57.440 --> 00:08:00.744\nAnd it will use that entropy to do\nsome sort of computation that will\n\n149\n00:08:00.744 --> 00:08:04.524\neventually then say, yes,\nthat is the user, because they knew this.\n\n150\n00:08:04.524 --> 00:08:08.430\nIt doesn't have to compare\nThe PIN to a stored PIN.\n\n151\n00:08:08.430 --> 00:08:09.008\nAnd then,\n\n152\n00:08:09.008 --> 00:08:13.540\nthe final thing that we have here is that\nit's something that is a part of you.\n\n153\n00:08:13.540 --> 00:08:17.270\nIn this case, Windows Hello, we have\nability to where we can tie Windows Hello\n\n154\n00:08:17.270 --> 00:08:18.800\nfor Business to use biometrics.\n\n155\n00:08:18.800 --> 00:08:22.145\nSo then you could sign in with your face,\nor you can do fingerprint reader.\n\n156\n00:08:22.145 --> 00:08:26.835\nSo it's a very fluid and easy motion,\nand it's kind of very futuristic for us,\n\n157\n00:08:26.835 --> 00:08:29.965\nbecause you get to go and show all your\nrelatives how you just sign into your\n\n158\n00:08:29.965 --> 00:08:32.555\ncomputer using your face,\nor using a fingerprint.\n\n159\n00:08:32.555 --> 00:08:34.355\nAnd it's very, very cool.\n\n160\n00:08:34.355 --> 00:08:37.845\nSo, the objective, and\nwhen we did Windows Hello for Business,\n\n161\n00:08:37.845 --> 00:08:42.851\nwas to basically work on those\nthree pillars of non-fishable,\n\n162\n00:08:42.851 --> 00:08:46.790\nnon-replayable, and\nbasically non-breachable.\n\n163\n00:08:46.790 --> 00:08:50.030\nAnd the way we do that is we start\nwith the something you have.\n\n164\n00:08:50.030 --> 00:08:50.810\nWindows Hello for\n\n165\n00:08:50.810 --> 00:08:56.160\nBusiness is essentially going to create\na private key in the computer's TPM.\n\n166\n00:08:56.160 --> 00:08:59.420\nSo we support TPM 1.2 and 2.0.\n\n167\n00:08:59.420 --> 00:09:03.825\nAnd for older machines we do\nsupport a fallback to software.\n\n168\n00:09:03.825 --> 00:09:07.540\nAlthough for enterprises we have group\npolicies that will actually allow them to\n\n169\n00:09:07.540 --> 00:09:10.650\nforce a hardware one where you\nwon't fall back to software.\n\n170\n00:09:10.650 --> 00:09:13.250\nBut we have to keep in\nmind that everybody's\n\n171\n00:09:13.250 --> 00:09:16.130\ncomputer refresh cycle is\nnot what it's going to be.\n\n172\n00:09:16.130 --> 00:09:19.595\n&gt;&gt; And I think at this point pretty much\nevery computer made in the last three to\n\n173\n00:09:19.595 --> 00:09:21.198\nfive years should have a TPM in it.\n\n174\n00:09:21.198 --> 00:09:24.551\nIt's kind of becoming more of a rarity to\nfind a computer that doesn't have a TPM\n\n175\n00:09:24.551 --> 00:09:25.990\nintegrated, right?\n\n176\n00:09:25.990 --> 00:09:29.736\n&gt;&gt; Yeah, it just depends on\nwhere you procure your hardware.\n\n177\n00:09:29.736 --> 00:09:33.710\nTPMs, when you do a build of materials for\nthese laptops and everything,\n\n178\n00:09:33.710 --> 00:09:35.690\nthese manufacturers are cutting costs.\n\n179\n00:09:35.690 --> 00:09:40.090\nA TPM might be $0.17, but\nthat's $0.17 to the bottom line.\n\n180\n00:09:40.090 --> 00:09:44.400\nSo you definitely want to make sure that\nwhen you are looking at Windows Hello for\n\n181\n00:09:44.400 --> 00:09:48.370\nBusiness and upgrading your hardware\nthat you make sure that you call out to\n\n182\n00:09:48.370 --> 00:09:53.130\nthat vendor that you want a TPM,\nand preferably you want a TPM 2.0.\n\n183\n00:09:53.130 --> 00:09:57.660\nI know that Microsoft has recently changed\ntheir hardware guidelines where TPM 2.0\n\n184\n00:09:57.660 --> 00:10:02.530\nis what we are recommending for\nWindows Logo PCs right now.\n\n185\n00:10:02.530 --> 00:10:06.060\nAnd TPM 2.0 is just\na better version all out.\n\n186\n00:10:06.060 --> 00:10:11.120\nIt doesn't lock out as easy, it has better\nperformances, it supports more crypto.\n\n187\n00:10:11.120 --> 00:10:13.160\nSo, it's just a better overall thing.\n\n188\n00:10:13.160 --> 00:10:15.870\nBut we know that it's gonna\nbe a gradual movement\n\n189\n00:10:15.870 --> 00:10:18.220\nbefore you get from TPM 1.2 to 2.0.\n\n190\n00:10:18.220 --> 00:10:22.980\nBut most PCs in an enterprise\nwill have a TPM 1.2.\n\n191\n00:10:22.980 --> 00:10:24.380\nThere's already things that use it.\n\n192\n00:10:24.380 --> 00:10:29.170\nLike right now BitLocker needs a TPM 1\nto use that, and there are other things\n\n193\n00:10:29.170 --> 00:10:33.410\nthat is more and more prevalent where\nTPMs are just being used more and more.\n\n194\n00:10:33.410 --> 00:10:37.550\nSo that's not really a hard thing, but we\nneed to have that TPM because what do we\n\n195\n00:10:37.550 --> 00:10:41.910\nwant, we wanna have that thing that you\nknow, or sorry, that thing that you have\n\n196\n00:10:41.910 --> 00:10:45.015\nis gonna be a private key,\nthat private key is generated in a TPM.\n\n197\n00:10:45.015 --> 00:10:48.570\nTPMs have all this crypto built into them,\n\n198\n00:10:48.570 --> 00:10:52.700\nso they can do random number generator,\nthey do all this stuff inside the TMP.\n\n199\n00:10:52.700 --> 00:10:54.930\nAnd they generate a key.\n\n200\n00:10:54.930 --> 00:10:57.950\nAnd that key is then\nwrapped with a key that's\n\n201\n00:10:57.950 --> 00:11:01.210\nburnt into the TPM at\nthe time of manufacturing.\n\n202\n00:11:01.210 --> 00:11:05.310\nAnd that key is different for\neach TPM that's manufactured.\n\n203\n00:11:05.310 --> 00:11:07.760\nAnd so\nTPMs don't really have a lot of storage.\n\n204\n00:11:07.760 --> 00:11:11.760\nSo what happens is is that key\nis wrapped with that unique key\n\n205\n00:11:11.760 --> 00:11:16.450\nthat's burnt into the TPM at the time of\nmanufacturing and then persisted to disk.\n\n206\n00:11:16.450 --> 00:11:20.540\nAnd so that way, even if you were to get\nthat key and move it laterally one way or\n\n207\n00:11:20.540 --> 00:11:24.620\nanother, it's not gonna work because\nyou need to feed it into the TPM that\n\n208\n00:11:24.620 --> 00:11:25.540\nactually created it.\n\n209\n00:11:25.540 --> 00:11:29.490\nAnd so that's where we can get this\nwhere we don't have lateral movement of\n\n210\n00:11:29.490 --> 00:11:32.120\nthe actual something you have.\n\n211\n00:11:32.120 --> 00:11:36.310\nThe next thing that we're gonna\ntalk about is is that the something\n\n212\n00:11:36.310 --> 00:11:37.480\nyou know which is the PIN.\n\n213\n00:11:37.480 --> 00:11:42.120\nAs I mentioned, that's entropy, and\nso we don't persist the PIN anywhere.\n\n214\n00:11:42.120 --> 00:11:47.350\nAnd so that way, if that PIN is ever\nentered wrong, then it's not gonna work.\n\n215\n00:11:47.350 --> 00:11:50.070\nBecause what happens is is the way to\n\n216\n00:11:50.070 --> 00:11:54.400\nbring that key out of its persistent\nstate or where it's stored on disk, and\n\n217\n00:11:54.400 --> 00:11:57.960\nto bring it back into the TPM\nto where it can be used\n\n218\n00:11:57.960 --> 00:12:02.260\nis I need to have that key that's wrapped,\nand I need to provide the entropy.\n\n219\n00:12:02.260 --> 00:12:06.190\nBoth of those get fed into TPM,\nand it's gonna do a computation.\n\n220\n00:12:06.190 --> 00:12:10.510\nAnd if it's not what it expects, then it\njust fails and you don't get to use that.\n\n221\n00:12:10.510 --> 00:12:13.735\nSo those are the things that we have as\nfar as there is something you have and\n\n222\n00:12:13.735 --> 00:12:15.485\nsomething that you know.\n\n223\n00:12:15.485 --> 00:12:17.285\nThe or in this matter for\n\n224\n00:12:17.285 --> 00:12:21.185\nwhere you can get into a different one\nis that you can use your biometrics.\n\n225\n00:12:21.185 --> 00:12:24.675\nThe biometrics you can enroll your\nbiometrics during Windows Hello.\n\n226\n00:12:24.675 --> 00:12:29.305\nAnd in that enrollment, you can use your\nfingerprint and you can use your face,\n\n227\n00:12:29.305 --> 00:12:31.170\ndepending on the hardware that you have.\n\n228\n00:12:31.170 --> 00:12:35.250\nAnd then, from that point on,\ninstead of using your PIN as a gate\n\n229\n00:12:35.250 --> 00:12:39.590\nto get to that key, you can use your\nbiometrics as a gate to get that key.\n\n230\n00:12:39.590 --> 00:12:43.930\nSo that makes it a little bit more cooler,\nand it's a very frictionless sign in.\n\n231\n00:12:43.930 --> 00:12:49.104\nSo, if we look at those three factors, and\nwhat we do, how do those play into our\n\n232\n00:12:49.104 --> 00:12:55.060\nobjective of non-fishable, non-replayable\nand certainly, non-breachable?\n\n233\n00:12:55.060 --> 00:12:56.710\nSo if we look at the something you have,\n\n234\n00:12:58.720 --> 00:13:01.735\nyour authentication is not\nreally a symmetric key,\n\n235\n00:13:01.735 --> 00:13:06.560\nit's I'm doing a cryptographic signature\noperation to sign in or authenticate.\n\n236\n00:13:06.560 --> 00:13:08.890\nThen what you get there is this that,\nwell,\n\n237\n00:13:08.890 --> 00:13:11.860\nknowing my PIN doesn't\nreally help me anything.\n\n238\n00:13:11.860 --> 00:13:13.760\nBecause it's not gonna work,\n\n239\n00:13:13.760 --> 00:13:17.200\nif the PINs in this laptop,\nit's not gonna move to another one.\n\n240\n00:13:17.200 --> 00:13:20.040\nSo, where you have that is\nit's just very difficult to\n\n241\n00:13:20.040 --> 00:13:24.510\nphish something because all you're gonna\nget is a cryptographic output of phishing.\n\n242\n00:13:24.510 --> 00:13:26.640\nIf you ask me to type in my PIN,\n\n243\n00:13:26.640 --> 00:13:29.030\nI'm gonna type in a PIN\nthat's not gonna do anything.\n\n244\n00:13:29.030 --> 00:13:30.750\nSo you can't really phish it.\n\n245\n00:13:30.750 --> 00:13:33.830\nThe next thing about it is\nthat it's non-replayable.\n\n246\n00:13:33.830 --> 00:13:38.820\nBecause I'm using a key that can't\nmove off of this computer, well,\n\n247\n00:13:38.820 --> 00:13:39.960\nit can't move off this computer.\n\n248\n00:13:39.960 --> 00:13:41.720\nThat means that it can't be replayed.\n\n249\n00:13:41.720 --> 00:13:45.700\nThe analogy we had, if Don's using\nWindows Hello for Business, I can't go and\n\n250\n00:13:45.700 --> 00:13:47.860\nbe Don in Washington because\nI don't have his key.\n\n251\n00:13:47.860 --> 00:13:49.520\nIt's on his device.\n\n252\n00:13:49.520 --> 00:13:52.780\nAnd then the next thing\nis it's non-breachable.\n\n253\n00:13:52.780 --> 00:13:57.330\nAnd this is more of a forward\nthinking objective in that,\n\n254\n00:13:57.330 --> 00:14:00.750\nif you think about when we talked about\npasswords being stored on a server, and\n\n255\n00:14:00.750 --> 00:14:04.930\nthese breaches that we were talking about,\nwell, now all sudden in doing\n\n256\n00:14:04.930 --> 00:14:09.580\nthe registration process, I need to know\nwho Don is, when he's authenticating.\n\n257\n00:14:09.580 --> 00:14:11.940\nBut these are asymmetric keys.\n\n258\n00:14:11.940 --> 00:14:14.480\nSo I have the private key stored here.\n\n259\n00:14:14.480 --> 00:14:17.610\nThe public key, well, it's a pubic key,\nit can go anywhere it needs to go.\n\n260\n00:14:17.610 --> 00:14:22.860\nSo the public key gets registered with the\nidentity provider or the authentication.\n\n261\n00:14:22.860 --> 00:14:26.090\nSo now what you have is\nif you fast forward,\n\n262\n00:14:26.090 --> 00:14:28.490\nyou have a server full of public keys.\n\n263\n00:14:28.490 --> 00:14:31.890\nAnd a server full of public keys\ndoesn't really do an attacker much good\n\n264\n00:14:31.890 --> 00:14:34.420\nat that point.\n\n265\n00:14:34.420 --> 00:14:37.240\n&gt;&gt; And that's one of the neat parts about\nthis whole aspect is that you'll hear\n\n266\n00:14:37.240 --> 00:14:41.200\nabout companies where they have password\ndatabases that are very heavily encrypted,\n\n267\n00:14:41.200 --> 00:14:42.620\nvery well secured.\n\n268\n00:14:42.620 --> 00:14:45.110\nAnd a breach happens,\nsomebody gets a copy of that database.\n\n269\n00:14:45.110 --> 00:14:47.030\nAnd they say, well, yeah,\nthey got the database, but\n\n270\n00:14:47.030 --> 00:14:48.890\neverything's encrypted, it's fine.\n\n271\n00:14:48.890 --> 00:14:52.000\nWell, that encryption might be very,\nvery strong today.\n\n272\n00:14:52.000 --> 00:14:55.870\nBut two years from now, four years from\nnow, six years from now, processors get\n\n273\n00:14:55.870 --> 00:15:01.660\nbetter, computers get faster, our compute\nresources get significantly larger.\n\n274\n00:15:01.660 --> 00:15:04.510\nAnd maybe that strength and\nsecurity is no longer there anymore and\n\n275\n00:15:04.510 --> 00:15:06.550\nnow they are able to be compromised.\n\n276\n00:15:06.550 --> 00:15:09.360\nWell, that's passwords four or\nfive years down the road, but\n\n277\n00:15:09.360 --> 00:15:11.710\na lot of people aren't\nchanging their passwords.\n\n278\n00:15:11.710 --> 00:15:13.150\nThey are using passwords that are very,\n\n279\n00:15:13.150 --> 00:15:15.630\nvery old and\nthat means you now have a compromise.\n\n280\n00:15:15.630 --> 00:15:18.150\nSo with this,\nbecause they're just public keys,\n\n281\n00:15:18.150 --> 00:15:20.550\nit really doesn't matter if\nsomebody gets that database.\n\n282\n00:15:20.550 --> 00:15:22.040\nI mean, obviously,\nwe'd rather it didn't happen,\n\n283\n00:15:22.040 --> 00:15:25.290\nbut if it did, that risk is far,\nfar mitigated.\n\n284\n00:15:25.290 --> 00:15:26.572\nSo we don't have to worry about it so\nmuch.\n\n285\n00:15:26.572 --> 00:15:30.052\n&gt;&gt; Right, I mean, the whole idea of\na public key in RSA is it's public,\n\n286\n00:15:30.052 --> 00:15:32.730\nit's allowed,\npeople are allowed to see that key.\n\n287\n00:15:32.730 --> 00:15:37.860\nSo, yeah, the idea here is that\nit's not gonna, it's a roadblock.\n\n288\n00:15:37.860 --> 00:15:41.280\nWe know attackers are,\nattacking is a business now.\n\n289\n00:15:41.280 --> 00:15:43.140\nPeople are doing this to make money.\n\n290\n00:15:43.140 --> 00:15:47.990\nSo we know that by virtue of attacking\na server that once had symmetric keys and\n\n291\n00:15:47.990 --> 00:15:49.630\nnow it only has public keys,\n\n292\n00:15:49.630 --> 00:15:52.600\nwe're kind of moving the target\nattack to something else.\n\n293\n00:15:52.600 --> 00:15:56.150\nAnd so that's why that defense in depth\nthat you hear all throughout the IT\n\n294\n00:15:56.150 --> 00:15:57.830\nindustry is very important.\n\n295\n00:15:57.830 --> 00:16:00.776\nYou protect one thing, and\nthey're just gonna move and find.\n\n296\n00:16:00.776 --> 00:16:02.676\nAttacks go to the path\nof least resistance.\n\n297\n00:16:02.676 --> 00:16:07.119\nSo they're always gonna try to find where\nis the weakest link And that's the attack\n\n298\n00:16:07.119 --> 00:16:11.563\nfactor and with Windows Hello for Business\nis this long term strategy of getting off\n\n299\n00:16:11.563 --> 00:16:15.075\npasswords and moving to this\nstrong two factor authentication.\n\n300\n00:16:15.075 --> 00:16:19.583\nThat's where we can sit there and\nsay AK in the future the directory or\n\n301\n00:16:19.583 --> 00:16:24.559\nthe authentication, in this case\nActive Directory, or in the cloud like of\n\n302\n00:16:24.559 --> 00:16:29.480\nlike Azure, these particular attacks\nare not going to be valid there.\n\n303\n00:16:29.480 --> 00:16:32.180\nYou're gonna have to move\nto something else there, so\n\n304\n00:16:32.180 --> 00:16:36.280\nthat's kind of the gist of why we\nhad Windows Hello for Business.\n\n305\n00:16:36.280 --> 00:16:40.730\nOne follow up point on that particular\nthing is, is there's been two\n\n306\n00:16:40.730 --> 00:16:45.000\nfactor our for a while, I'm sure everybody\nout there has heard of smart cards.\n\n307\n00:16:45.000 --> 00:16:49.960\nAnd smart cards, they're about 15 to 17\nyears old and they've gone through these\n\n308\n00:16:49.960 --> 00:16:52.650\nsame little hurdles that they\nhad to go to and work out.\n\n309\n00:16:52.650 --> 00:16:56.670\nBut the problem with smart cards,\nfrankly, is it's very expensive,\n\n310\n00:16:56.670 --> 00:17:00.390\nyou need an infrastructure, you need\nto have smart card management software,\n\n311\n00:17:00.390 --> 00:17:03.950\nyou need to have smart card readers,\nyou need the smart card itself.\n\n312\n00:17:03.950 --> 00:17:05.690\nAnd then there's\nthe ongoing maintenance and\n\n313\n00:17:05.690 --> 00:17:09.130\ncost of making that infrastructure and\nkeeping it in place.\n\n314\n00:17:09.130 --> 00:17:13.300\nAnd then, so those are the things\nthat deter a lot of companies\n\n315\n00:17:13.300 --> 00:17:17.350\nfrom wanting to go to a strong credential,\nit's just, they simply can't afford that.\n\n316\n00:17:17.350 --> 00:17:19.130\nAnd so what Windows Hello for\n\n317\n00:17:19.130 --> 00:17:22.944\nBusiness does is it brings strong\ntwo factor authentication,\n\n318\n00:17:22.944 --> 00:17:25.760\nstrong two factor authentication,\nto the enterprise in an affordable manner,\n\n319\n00:17:25.760 --> 00:17:29.780\nwhere most of it just reuses the existing\ninfrastructure you have today.\n\n320\n00:17:29.780 --> 00:17:31.580\nSo on top of infrastructure,\n\n321\n00:17:31.580 --> 00:17:34.690\nlet's talk about some of the technologies\nthat Windows Hello is gonna use,\n\n322\n00:17:34.690 --> 00:17:38.490\nbefore we jump in to actually\ngetting our feet wet with it.\n\n323\n00:17:38.490 --> 00:17:42.642\nSo some of the technologies that Windows\nHello is gonna cover is Active Directory.\n\n324\n00:17:42.642 --> 00:17:46.069\nWe're gonna be doing some stuff in\nActive Directory, user maintenance but\n\n325\n00:17:46.069 --> 00:17:48.585\nwe're also going to be doing\nsome schema extensions and\n\n326\n00:17:48.585 --> 00:17:50.312\nwe will get to that in a later episode.\n\n327\n00:17:50.312 --> 00:17:52.849\nWe're gonna be using DNS\nto make sure that we have,\n\n328\n00:17:52.849 --> 00:17:56.339\nany time you mention Active Directory,\nDNS goes hand in hand with it.\n\n329\n00:17:56.339 --> 00:18:00.431\nPKI, Public Key Infrastructure,\nwe're gonna need a certificate server, and\n\n330\n00:18:00.431 --> 00:18:02.490\nwe're gonna use that as a root of trust.\n\n331\n00:18:02.490 --> 00:18:06.270\nAnd then we're also gonna use that to\nissue identity certificates to the actual\n\n332\n00:18:06.270 --> 00:18:07.400\nuser itself.\n\n333\n00:18:07.400 --> 00:18:10.110\nSo that's what they'll authenticate with,\nthen\n\n334\n00:18:10.110 --> 00:18:14.720\nwe're gonna manage it with group policy,\nwhich makes it very easy, very affordable.\n\n335\n00:18:14.720 --> 00:18:17.240\nWe don't need to have\nan expensive management solution,\n\n336\n00:18:17.240 --> 00:18:20.560\nwe can just use what's built into\nWindows Server right then and there.\n\n337\n00:18:20.560 --> 00:18:23.450\nAnd then we're gonna throw\na little twist into this and\n\n338\n00:18:23.450 --> 00:18:26.080\nwe're gonna bring in Active Directory\nfederation services.\n\n339\n00:18:26.080 --> 00:18:31.130\nAnd we use that, is a way we'll\nsee how that is being used with,\n\n340\n00:18:31.130 --> 00:18:33.440\nI talked about registering\nthat public key.\n\n341\n00:18:33.440 --> 00:18:35.972\nThat's gonna be where our\nregistration point, and\n\n342\n00:18:35.972 --> 00:18:40.250\nwe're gonna see how that actually plays\na very pivotal role in Windows Hello for\n\n343\n00:18:40.250 --> 00:18:44.400\nBusiness in that defense in depth\nsecurity model that I spoke of.\n\n344\n00:18:44.400 --> 00:18:48.328\nAnd then, we're gonna introduce a new\nthing that many people may not know.\n\n345\n00:18:48.328 --> 00:18:52.950\nBut what we're talking about today is\nthe on prem version of Windows Hello for\n\n346\n00:18:52.950 --> 00:18:57.710\nBusiness, which we recently have\nintroduced with the creator's update.\n\n347\n00:18:57.710 --> 00:19:02.300\nAnd in that we've brought it to where it\nworks with this on prem Active Directory.\n\n348\n00:19:02.300 --> 00:19:06.917\nBut we have a little, little snag\nhere to where doing multi-factor\n\n349\n00:19:06.917 --> 00:19:10.410\nauthentication on prem\nis not cost-productive.\n\n350\n00:19:10.410 --> 00:19:15.466\nSo we're gonna introduce the Azure\nmulti-factor authentication server.\n\n351\n00:19:15.466 --> 00:19:19.420\nIt's an on prem server, and we'll have\na pretty good discussion about that and\n\n352\n00:19:19.420 --> 00:19:22.360\nhow that keeps the credentials on prem.\n\n353\n00:19:22.360 --> 00:19:26.450\nBut it leverages the cloud just simply\nto make that one phone call because\n\n354\n00:19:26.450 --> 00:19:30.110\nwe don't wanna upgrade a user from a weak\ncredential to a strong credential just\n\n355\n00:19:30.110 --> 00:19:32.030\nbecause they typed in a password.\n\n356\n00:19:32.030 --> 00:19:35.340\nWe need to know that when Don\ngoes to the provisioning flow,\n\n357\n00:19:35.340 --> 00:19:39.570\nthat, Don is Don, and it's not just\nan attacker that stole his password.\n\n358\n00:19:39.570 --> 00:19:43.180\nSo in that provisioning flow we're\ngonna make the user do another form or\n\n359\n00:19:43.180 --> 00:19:46.090\na second factor of authentication\nto make sure we're\n\n360\n00:19:46.090 --> 00:19:49.460\ngiving them a strong credential and\nwe're giving it to the right person.\n\n361\n00:19:49.460 --> 00:19:54.370\nAnd then lastly, there's some supporting\nmechanisms here with the multi-factor\n\n362\n00:19:54.370 --> 00:19:58.180\nauthentication where there's a user portal\nthat lets you set up a self-servicing\n\n363\n00:19:58.180 --> 00:20:03.440\nportal to where the users can manage\ntheir multi-factor authentication and\n\n364\n00:20:03.440 --> 00:20:04.830\nhow that's going to play.\n\n365\n00:20:04.830 --> 00:20:08.870\nWhether they register a phone number or\nthey could use an authenticator app,\n\n366\n00:20:08.870 --> 00:20:12.020\nthese are the things that we don't\nwanna have that burden on the IT.\n\n367\n00:20:12.020 --> 00:20:16.090\nSo part of the server is there's\na user portal that you can set up in\n\n368\n00:20:16.090 --> 00:20:17.520\nyour enterprise.\n\n369\n00:20:17.520 --> 00:20:20.800\nAnd then you can use that user\nportal to then let the users\n\n370\n00:20:20.800 --> 00:20:22.670\nmanage their own identities there.\n\n371\n00:20:22.670 --> 00:20:25.579\nAnd so we'll be doing some\nIIS web services stuff, but\n\n372\n00:20:25.579 --> 00:20:29.892\nbasically just helping you understand\nthe requirements you need to install it.\n\n373\n00:20:29.892 --> 00:20:34.043\nWe're not gonna go deep into IIS there,\nand that basically we'll wrap up.\n\n374\n00:20:34.043 --> 00:20:37.128\n&gt;&gt; And I know it sounds like a lot of\ncomponents, but if you look at the list of\n\n375\n00:20:37.128 --> 00:20:40.365\nthings that we need to get Windows Hello\nfor Business setup most of it is stuff\n\n376\n00:20:40.365 --> 00:20:43.245\nthat you should have already or\nmost businesses are going to have.\n\n377\n00:20:43.245 --> 00:20:45.000\nYou're going to have\nActive Directory domain controllers,\n\n378\n00:20:45.000 --> 00:20:46.730\nyou're going to have a DNS infrastructure.\n\n379\n00:20:46.730 --> 00:20:49.610\nSo it's mostly reusing the technology\nyou've already got and\n\n380\n00:20:49.610 --> 00:20:52.470\nadding a little bit more to\nthem to get that support.\n\n381\n00:20:52.470 --> 00:20:56.620\nBut it's also important to note that\nthere is a big difference between\n\n382\n00:20:56.620 --> 00:21:00.310\njust plain old Windows Hello and\nWindows Hello for Business.\n\n383\n00:21:00.310 --> 00:21:02.730\nNow with Windows Hello for Business,\nwe're controlling that infrastructure,\n\n384\n00:21:02.730 --> 00:21:04.760\nthat's why we need all\nthese different components.\n\n385\n00:21:04.760 --> 00:21:08.860\nThe original Windows Hello,\nwas it in the anniversary update or\n\n386\n00:21:08.860 --> 00:21:11.190\nwas it in the original Windows 10 release,\ndo you remember?\n\n387\n00:21:11.190 --> 00:21:14.710\n&gt;&gt; I think it was in the November when we\nfirst did the original Windows Hello for\n\n388\n00:21:14.710 --> 00:21:15.427\nBusiness one.\n\n389\n00:21:15.427 --> 00:21:19.224\n&gt;&gt; So the consumer version of Windows\nHello, that just taps into Microsoft's\n\n390\n00:21:19.224 --> 00:21:23.336\ninfrastructure and it is all controlled\nin the cloud and we don't worry about it.\n\n391\n00:21:23.336 --> 00:21:26.198\nBut here, Windows Hello for\nBusiness it's integrated into our on\n\n392\n00:21:26.198 --> 00:21:28.635\npremises environment, and\nwe maintain that control.\n\n393\n00:21:28.635 --> 00:21:32.650\n&gt;&gt; Yeah, that's a good point Don,\nto expand on Windows Hello, actually\n\n394\n00:21:32.650 --> 00:21:37.490\nMicrosoft is using Windows Hello for\nBusiness, the infrastructure, whatever.\n\n395\n00:21:37.490 --> 00:21:40.420\nSo when you sign in with your\nMicrosoft account into Windows 10,\n\n396\n00:21:40.420 --> 00:21:43.880\nyou have the option to sign it,\nwhen you sign in, you can create a PIN.\n\n397\n00:21:43.880 --> 00:21:48.050\nIn fact, we wanna encourage users to\ncreate PINs because creating that\n\n398\n00:21:48.050 --> 00:21:52.850\nPIN gets you off of that password,\neven if you have the password there.\n\n399\n00:21:52.850 --> 00:21:54.240\nNot using the password and\n\n400\n00:21:54.240 --> 00:21:56.910\nnot being prompted to enter\na password is a good thing.\n\n401\n00:21:56.910 --> 00:22:00.870\nWe wanna get users out of the habit\nof something popped up and ask me for\n\n402\n00:22:00.870 --> 00:22:03.240\nmy password, let me go ahead and\ngive it to you.\n\n403\n00:22:03.240 --> 00:22:07.880\nSo, Microsoft accounts will do that,\nAzure is using Windows Hello today, so\n\n404\n00:22:07.880 --> 00:22:09.020\nwe have a lot of things.\n\n405\n00:22:09.020 --> 00:22:12.840\nNow to be very transparent here\nthere is a Windows Hello or\n\n406\n00:22:12.840 --> 00:22:16.840\na standalone Windows Hello for\njust your local machine.\n\n407\n00:22:16.840 --> 00:22:18.750\nAnd that's not really\nthe Windows Hello for\n\n408\n00:22:18.750 --> 00:22:22.180\nBusiness, that is what we\ncall a convenient sign in.\n\n409\n00:22:22.180 --> 00:22:25.410\nAnd there's a big distinction there,\nin a convenient sign in, so\n\n410\n00:22:25.410 --> 00:22:27.940\nif I just have a computer\nwith no infrastructure and\n\n411\n00:22:27.940 --> 00:22:32.880\nI'm not connecting to either Azure or\nwiht my Microsoft account.\n\n412\n00:22:32.880 --> 00:22:37.530\nThe convenient sign in is really, Don,\n\n413\n00:22:37.530 --> 00:22:41.450\nwe hear that convenience and\nsecurity, they're mutually exclusive.\n\n414\n00:22:41.450 --> 00:22:42.202\n&gt;&gt; They don't play well.\n\n415\n00:22:42.202 --> 00:22:43.070\n[LAUGH]\n&gt;&gt; [LAUGH] So\n\n416\n00:22:43.070 --> 00:22:47.160\nthe reason why we call it a convenient\nsign in is that's exactly what it is,\n\n417\n00:22:47.160 --> 00:22:48.520\nit's a convenience.\n\n418\n00:22:48.520 --> 00:22:52.400\nSo what it's really doing under the covers\nis it's not using a private key,\n\n419\n00:22:52.400 --> 00:22:55.470\nit's not really using the TPM for\na private key.\n\n420\n00:22:55.470 --> 00:22:59.070\nIt's basically what we call\na password stuffer, it'll ask you for\n\n421\n00:22:59.070 --> 00:23:01.280\nyour password, it'll grab that password.\n\n422\n00:23:01.280 --> 00:23:05.080\nNow one of the improvements\nis it will use the TPM to\n\n423\n00:23:05.080 --> 00:23:07.990\nencrypt that password before\nit's persisted to the disk.\n\n424\n00:23:07.990 --> 00:23:12.444\nBut at the end of the day you're sill\nusing a password, so the way I try to tell\n\n425\n00:23:12.444 --> 00:23:16.915\npeople is, is that every decryption\noperation leaves you with clear text.\n\n426\n00:23:16.915 --> 00:23:21.075\nClear text is clear text, so that means\nI'm still gonna get your password, yes,\n\n427\n00:23:21.075 --> 00:23:24.934\nthe brute force attack of trying to get\nit from the disc is much more difficult\n\n428\n00:23:24.934 --> 00:23:26.531\nbecause we're using the TPM.\n\n429\n00:23:26.531 --> 00:23:29.670\nBut if I'm malware and\nI'm sitting there and I'm just looking for\n\n430\n00:23:29.670 --> 00:23:33.257\nthings in memory, eventually that\npassword is going to get decrypted, and\n\n431\n00:23:33.257 --> 00:23:36.482\nit's gonna get into clear text and\nthen I'm gonna be able to get it.\n\n432\n00:23:36.482 --> 00:23:41.860\nSo that's just a thing to let people\nknow in the enterprise we have\n\n433\n00:23:41.860 --> 00:23:48.040\nconvenience sign in turned off by default\nand it's only turned on with group policy.\n\n434\n00:23:48.040 --> 00:23:51.280\nSo, you wanna make sure that\nthat one is not turned on.\n\n435\n00:23:51.280 --> 00:23:55.390\nIn fact, when we get into the policy\nsections I'll probably mention it then as\n\n436\n00:23:55.390 --> 00:23:59.400\nwell, that if you try to have a conflict\nbetween Windows Hello for Business and\n\n437\n00:23:59.400 --> 00:24:02.415\nthe convenient sign in we kinda just\ndon't let you create a pin at all.\n\n438\n00:24:02.415 --> 00:24:05.483\n&gt;&gt; [LAUGH] Yeah, and for\na business we don't want that anyway, so\n\n439\n00:24:05.483 --> 00:24:08.315\nit makes sense that we'd stick\nwith the Windows Hello for\n\n440\n00:24:08.315 --> 00:24:11.460\nBusiness infrastructure and\nget that implemented properly.\n\n441\n00:24:11.460 --> 00:24:14.330\n&gt;&gt; Absolutely, it's the stronger of\nthe versions that we want people to use.\n\n442\n00:24:14.330 --> 00:24:17.770\nLike I said, even with your Microsoft\naccount it's a good idea to\n\n443\n00:24:17.770 --> 00:24:19.630\njust go ahead and create that pin.\n\n444\n00:24:19.630 --> 00:24:23.060\nAnd if you can get hardware,\nthere's a lot of cameras,\n\n445\n00:24:23.060 --> 00:24:24.430\nthird party cameras that are coming out.\n\n446\n00:24:24.430 --> 00:24:28.470\nThere's more, a lot of fingerprint readers\nI'm seeing in laptops now more than ever.\n\n447\n00:24:28.470 --> 00:24:33.780\nSo, it's really starting to get\na popularity and gaining in momentum.\n\n448\n00:24:33.780 --> 00:24:36.760\nSo if any time you can do those things is,\n\n449\n00:24:36.760 --> 00:24:41.250\nmoving off of a password is just\nthe be all end all of what we want.\n\n450\n00:24:41.250 --> 00:24:43.480\n&gt;&gt; All right, well Mike, I think\nthat's probably a pretty good spot for\n\n451\n00:24:43.480 --> 00:24:44.320\nus to wrap this one up.\n\n452\n00:24:44.320 --> 00:24:46.550\nDid you have anything else you\nwanted to mention before we close?\n\n453\n00:24:46.550 --> 00:24:49.140\n&gt;&gt; No, we're good,\nwe're gonna have a lot more to talk about,\n\n454\n00:24:49.140 --> 00:24:52.210\nand we're gonna be here for\na while talking about Windows Hello, and\n\n455\n00:24:52.210 --> 00:24:54.600\nsetting it up, and\nmaking sure people can use it.\n\n456\n00:24:54.600 --> 00:24:56.210\n&gt;&gt; All right everybody,\nwell, in this episode,\n\n457\n00:24:56.210 --> 00:24:58.750\nwe had a chance to learn a little bit\nabout Windows Hello for Business.\n\n458\n00:24:58.750 --> 00:25:01.660\nWe talked a bit about the reason\nwhy we want to have it, and\n\n459\n00:25:01.660 --> 00:25:05.738\nwhy passwords are no longer cutting\nthe mustard for our security solutions.\n\n460\n00:25:05.738 --> 00:25:08.740\nAnd we talk a little bit about the\ninfrastructure that we're going to need\n\n461\n00:25:08.740 --> 00:25:11.060\nto put Windows Hello for\nBusiness in place.\n\n462\n00:25:11.060 --> 00:25:14.000\nAnd in the coming up episodes\nwe're gonna be seeing actually how\n\n463\n00:25:14.000 --> 00:25:17.510\nto put that into place, get it implemented\nin your on premises environment.\n\n464\n00:25:17.510 --> 00:25:19.140\nI hope you enjoyed it,\nbe sure to stay tuned for\n\n465\n00:25:19.140 --> 00:25:22.240\nthe follow up episodes cuz we're really\ngonna get to the good stuff coming up.\n\n466\n00:25:22.240 --> 00:25:25.810\nBut for now, signing off for\nITProTV, I'm Don Pezet.\n\n467\n00:25:25.810 --> 00:25:26.830\n&gt;&gt; And I'm Mike Stephens.\n\n468\n00:25:26.830 --> 00:25:28.247\n&gt;&gt; And we'll see you next time.\n\n469\n00:25:28.247 --> 00:25:34.284\n[MUSIC]\n\n470\n00:25:34.284 --> 00:25:37.279\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "215996073"
        },
        {
          "description": "In this episode, Don and Mike discuss the necessary steps for an organization planning to deploy Windows Hello for Business. The discuss how to select between a hybrid or on-premises deployment. They also discuss how to select an appropriate trust model for your deployment. At the end of the episode, Mike describes the high-level steps for building a deployment strategy.",
          "length": "1545",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-1-2-planning_the_deployment-050217.00_25_30_21.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-1-2-planning_the_deployment-050217.00_25_30_21.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-1-2-planning_the_deployment-050217.00_25_30_21.Still001-sm.jpg",
          "title": "Planning the Deployment",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:02.874\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:02.874 --> 00:00:06.505\n[CROSSTALK]\n\n3\n00:00:06.505 --> 00:00:08.352\n[MUSIC]\n\n4\n00:00:08.352 --> 00:00:12.355\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.355 --> 00:00:15.300\n&gt;&gt; All right, good morning,\ngood afternoon, and good evening, and\n\n6\n00:00:15.300 --> 00:00:17.400\nwelcome back to another\nepisode of ITProTV.\n\n7\n00:00:17.400 --> 00:00:21.492\nI'm your host, Don Pezet back again with\nanother episode of Windows Hello for\n\n8\n00:00:21.492 --> 00:00:24.964\nBusiness and this episode were gonna\nbe taking a look at planning to\n\n9\n00:00:24.964 --> 00:00:26.887\ndeploy Windows Hello for Business.\n\n10\n00:00:26.887 --> 00:00:30.447\nAnd believe me you don't want to cut\ncorners on the planning stage wanna make\n\n11\n00:00:30.447 --> 00:00:32.403\nsure we have a good\nidea of what to expect.\n\n12\n00:00:32.403 --> 00:00:35.331\nAnd here in the studio to help\nme with what to expect is Mr.\n\n13\n00:00:35.331 --> 00:00:36.750\nMike Stephens Microsoft.\n\n14\n00:00:36.750 --> 00:00:37.930\nMike thank you for joining us.\n\n15\n00:00:37.930 --> 00:00:39.590\n&gt;&gt; Thanks Don, it's great to be here.\n\n16\n00:00:39.590 --> 00:00:42.210\n&gt;&gt; All right and what are we gonna\nbe looking at here in this episode?\n\n17\n00:00:42.210 --> 00:00:46.510\n&gt;&gt; So in this episode we're gonna really\nfocus on the planning of Windows Hello\n\n18\n00:00:46.510 --> 00:00:47.280\ndeployment.\n\n19\n00:00:47.280 --> 00:00:50.730\nDistributed systems can\nbe quite intimidating and\n\n20\n00:00:50.730 --> 00:00:55.400\nthe thing we wanna do is prepare you\nguys to know how to set this thing up.\n\n21\n00:00:55.400 --> 00:00:58.900\nAnd don't get intimidated by all the knobs\nand the servers that you're moving to.\n\n22\n00:00:58.900 --> 00:01:02.050\nAnd the way to do that is to\nbe prepared is just plan,\n\n23\n00:01:02.050 --> 00:01:04.590\nI mean there's no cutting\ncorners around it.\n\n24\n00:01:04.590 --> 00:01:08.400\nSo today we're gonna talk about\nthe different deployment models,\n\n25\n00:01:08.400 --> 00:01:10.780\nwe're gonna talk about the trust models.\n\n26\n00:01:10.780 --> 00:01:14.140\nThat's a key one cuz we always get\nquestions about the trust models.\n\n27\n00:01:14.140 --> 00:01:16.272\nWe're gonna into actual,\n\n28\n00:01:16.272 --> 00:01:22.420\nwhat we're going to focus these series\nof shows on is the on-prem model.\n\n29\n00:01:22.420 --> 00:01:26.146\nAnd then we're gonna talk about\nlike the deployment strategy,\n\n30\n00:01:26.146 --> 00:01:30.700\nwhere we'll just give a very high-level\noverview of what we're going to do in\n\n31\n00:01:30.700 --> 00:01:32.770\nthe next episodes from here on out.\n\n32\n00:01:32.770 --> 00:01:36.636\nSo getting into that, we'll jump right on\nin with the actual deployment options.\n\n33\n00:01:36.636 --> 00:01:39.476\nSo Windows Hello for\nBusiness has two deployment options,\n\n34\n00:01:39.476 --> 00:01:42.386\nthere's a hybrid option that's\nbeen out for quite a while.\n\n35\n00:01:42.386 --> 00:01:47.234\nAnd then there's an on premises model,\nor what we call on prem for short,\n\n36\n00:01:47.234 --> 00:01:52.023\nand the hybrid model's been out since\nabout Nov 15 with that release.\n\n37\n00:01:52.023 --> 00:01:53.965\nAnd that one is mainly for,\n\n38\n00:01:53.965 --> 00:01:59.303\nwell when you have hybrid in our terms\nis that I have on premises resources.\n\n39\n00:01:59.303 --> 00:02:02.757\nSo I have file shares and printers and\nthings of that nature that\n\n40\n00:02:02.757 --> 00:02:05.638\nI need to access and\nthen I have the Cloud resources.\n\n41\n00:02:05.638 --> 00:02:06.931\nSo I have Office 365,\n\n42\n00:02:06.931 --> 00:02:11.068\nI'm doing some stuff in a Azure I might\nhave some line of business apps in Azure.\n\n43\n00:02:11.068 --> 00:02:16.482\nSo I need to have that authentication\nthat spans both the hybrid model,\n\n44\n00:02:16.482 --> 00:02:18.656\nor the cloud and the on prem.\n\n45\n00:02:18.656 --> 00:02:21.498\nAnd I wanna do that,\nI don't wanna sign in twice, so\n\n46\n00:02:21.498 --> 00:02:24.810\nI wanna sign in with one credential\nthat gets me both places.\n\n47\n00:02:25.940 --> 00:02:28.200\n&gt;&gt; Now,\nI know when it comes to choosing a model,\n\n48\n00:02:28.200 --> 00:02:29.730\nthat's always a challenge for people.\n\n49\n00:02:29.730 --> 00:02:33.590\nAnd a lot of us hear about,\nyou need to push into the cloud or\n\n50\n00:02:33.590 --> 00:02:39.490\ndo a managed system center type\ndeployment, or do a standalone deployment.\n\n51\n00:02:39.490 --> 00:02:43.700\nHow do we pick which model is really\nthe most appropriate for our organization?\n\n52\n00:02:43.700 --> 00:02:48.340\n&gt;&gt; So that's an excellent question and\nwe get that a lot, basically the best\n\n53\n00:02:48.340 --> 00:02:53.380\nway to tell is if you can use hybrid or\non prem is to look at your directory.\n\n54\n00:02:53.380 --> 00:02:55.330\nIf you're using Azure AD Connect,\n\n55\n00:02:55.330 --> 00:02:59.710\nwhich is a directory synchronization tool\nthat you get when you federate with Azure.\n\n56\n00:03:00.730 --> 00:03:04.070\nThen you're going to be hybrid, there's\nno questions about it because what's\n\n57\n00:03:04.070 --> 00:03:08.560\nhappening is you're either synchronizing\nyour identities or credentials,\n\n58\n00:03:08.560 --> 00:03:10.550\nwhich is the identity and the password.\n\n59\n00:03:10.550 --> 00:03:14.070\nYou're synchronizing those into\nyour Azure cloud directory, and\n\n60\n00:03:14.070 --> 00:03:19.390\nthen what happens there is just that\nthe on prem configuration knows\n\n61\n00:03:19.390 --> 00:03:21.130\nthat you're federated at that point.\n\n62\n00:03:21.130 --> 00:03:23.990\nAnd so what happens is some of\nthe components that we'll talk about\n\n63\n00:03:23.990 --> 00:03:26.490\nlike device registration and\nkey registration.\n\n64\n00:03:26.490 --> 00:03:31.300\nThose are no longer targeted to\nthe on premises infrastructure.\n\n65\n00:03:31.300 --> 00:03:35.400\nThere's configuration in Active Directory\nthat says, hey, you're a hybrid customer,\n\n66\n00:03:35.400 --> 00:03:38.280\nwe need to redirect you\nto those endpoints.\n\n67\n00:03:38.280 --> 00:03:40.670\nSo basically,\nthat's the easiest way to do it, Don,\n\n68\n00:03:40.670 --> 00:03:43.880\nis if you're going to be federated or\nyou are federated and\n\n69\n00:03:43.880 --> 00:03:48.190\nyou're using Azure AD Connect,\nthen the hybrid model is for you.\n\n70\n00:03:48.190 --> 00:03:52.307\nThe alternative to the hybrid model,\nwhich is great, and we've gotten tons of\n\n71\n00:03:52.307 --> 00:03:56.057\nfeedback which is what we've been\nworking on in the creator's update,\n\n72\n00:03:56.057 --> 00:03:57.907\nwas people wanted an on prem model.\n\n73\n00:03:57.907 --> 00:04:00.733\nIt's like they recognize\nthe value of cloud,\n\n74\n00:04:00.733 --> 00:04:03.557\nbut we're not ready to get there just yet\nand so\n\n75\n00:04:03.557 --> 00:04:08.285\nwhat we wanted to do is because we really\nhave a main concern about passwords.\n\n76\n00:04:08.285 --> 00:04:12.335\nWe want people off of passwords, and we\nwon't even have the people who are still\n\n77\n00:04:12.335 --> 00:04:15.611\nwaiting and getting ready for\nthe cloud to get off of passwords.\n\n78\n00:04:15.611 --> 00:04:19.759\nAnd so what we wanna do there is have\nan on premises version of this where it\n\n79\n00:04:19.759 --> 00:04:22.208\nworks with most of your infrastructure and\n\n80\n00:04:22.208 --> 00:04:25.880\nyou can set it up with the things\nyou know, as we did in the intro,\n\n81\n00:04:25.880 --> 00:04:29.704\njust the tools and things that\nyou've already invested in there.\n\n82\n00:04:29.704 --> 00:04:33.865\nAnd so that's where the on premises\nmodel came in and to be clear that\n\n83\n00:04:33.865 --> 00:04:38.910\nis a new model that only the creators\nupdate client in Windows 10 supports.\n\n84\n00:04:38.910 --> 00:04:42.330\nSo you still have the hybrid\nmodel you can go to, and\n\n85\n00:04:42.330 --> 00:04:46.670\nit works really well, but now what we're\nintroducing and really trying to hope\n\n86\n00:04:46.670 --> 00:04:50.150\nenterprises that are waiting to make\nthat jump to the cloud is now there's\n\n87\n00:04:50.150 --> 00:04:54.150\nan affordable two factor authentication\nsolution that they can go to.\n\n88\n00:04:54.150 --> 00:04:56.970\n&gt;&gt; And I know one of the concerns that\na lot of people have is some people\n\n89\n00:04:56.970 --> 00:04:59.730\nare just not comfortable putting\ninformation out in the cloud.\n\n90\n00:04:59.730 --> 00:05:03.300\nAnd they want it to be on premises,\nand when we talk about simple data,\n\n91\n00:05:03.300 --> 00:05:05.310\nlike a website,\npeople get really nervous about that.\n\n92\n00:05:05.310 --> 00:05:08.760\nBut when you talk about authentication,\nthat's big deal,\n\n93\n00:05:08.760 --> 00:05:11.490\nthat is literally the keys to the kingdom.\n\n94\n00:05:11.490 --> 00:05:14.460\nAnd so it comes down to what your\ncompany is comfortable with, and\n\n95\n00:05:14.460 --> 00:05:16.910\nready to accept or\nwhat you've already accepted.\n\n96\n00:05:16.910 --> 00:05:20.130\nAnd part of this is really gonna be\ninfluenced by what trust models you'll\n\n97\n00:05:20.130 --> 00:05:21.030\naccept, right?\n\n98\n00:05:21.030 --> 00:05:23.060\nAnd so, let's talk a little\nbit about the trust models.\n\n99\n00:05:23.060 --> 00:05:27.430\n&gt;&gt; Right, so, the trust models\nare really great, because if you are in\n\n100\n00:05:27.430 --> 00:05:32.800\nthese particular trust models,\npeople get confused.\n\n101\n00:05:32.800 --> 00:05:36.640\nSo the best way to explain these is first\nof all, is let's look at the hybrid.\n\n102\n00:05:36.640 --> 00:05:38.010\nAnd say for\n\n103\n00:05:38.010 --> 00:05:43.030\nwhen you authenticate to Azure, you're\nalways authenticating to Azure with a key.\n\n104\n00:05:43.030 --> 00:05:47.420\nSo, there's no worry about there,\nthe trust models really focus on\n\n105\n00:05:47.420 --> 00:05:52.040\nhow you authenticate to your on-prem\ninfrastructure, your Active Directory.\n\n106\n00:05:52.040 --> 00:05:56.870\nAnd that's the key thing, is the hybrid\nmodel, the deployment models talk about\n\n107\n00:05:56.870 --> 00:06:00.840\nwhere are your resources that you're\naccessing, so cloud or on prem.\n\n108\n00:06:00.840 --> 00:06:04.990\nAnd then the trust model is\nhow do I authenticate on prem?\n\n109\n00:06:04.990 --> 00:06:09.780\nAnd we have two trust models there, and\nthose trust models are key trust and\n\n110\n00:06:09.780 --> 00:06:11.460\nwe also have certificate trust.\n\n111\n00:06:11.460 --> 00:06:14.070\nAnd we'll go into those because\nthere's the nuances here\n\n112\n00:06:14.070 --> 00:06:16.186\nthat get very confusing for people.\n\n113\n00:06:16.186 --> 00:06:19.400\nAnd so we wanna make sure that\nwe explain it really well so\n\n114\n00:06:19.400 --> 00:06:21.480\nthat you can plan which one's best for\nyou.\n\n115\n00:06:21.480 --> 00:06:22.870\nThey both work really good,\n\n116\n00:06:22.870 --> 00:06:27.170\nit's just kind of like a choose\nyour own poison kinda speak there.\n\n117\n00:06:27.170 --> 00:06:30.570\nSo, whatever flavor you like,\nthat's what you can be able to do, and\n\n118\n00:06:30.570 --> 00:06:33.360\nwe did this to meet the needs\nof all enterprises.\n\n119\n00:06:33.360 --> 00:06:37.855\nSo let's jump in the key trust here, and\nso, the key trust model is just that.\n\n120\n00:06:37.855 --> 00:06:43.150\nIt's you authenticate to your on-prem\nactive directory using a key, so\n\n121\n00:06:43.150 --> 00:06:45.490\nyou'll sign in the way\nyou normally sign in.\n\n122\n00:06:45.490 --> 00:06:46.620\nYou'll use a PIN or\n\n123\n00:06:46.620 --> 00:06:49.820\nyour bio metric because you're\nusing Windows Hello for Business.\n\n124\n00:06:49.820 --> 00:06:53.830\nAnd then in the background you still use\nCurveros to authenticate, it's just that\n\n125\n00:06:53.830 --> 00:06:57.590\ninstead of using that password or\nthat symmetric key and all that,\n\n126\n00:06:57.590 --> 00:07:01.660\nyou're just using a key that was generated\nduring your Windows Hello provisioning.\n\n127\n00:07:01.660 --> 00:07:06.690\nNow there's a got you to this Don,\nis that to use\n\n128\n00:07:06.690 --> 00:07:11.790\nkey trust it does require\na Windows Server 2016 domain controller.\n\n129\n00:07:11.790 --> 00:07:13.510\nNow it doesn't need all of them so\n\n130\n00:07:13.510 --> 00:07:18.640\nwe don't change the domain function\nlevel or the force function level.\n\n131\n00:07:18.640 --> 00:07:21.340\nThat's a big thing that we know\ncustomers don't like to do.\n\n132\n00:07:21.340 --> 00:07:24.640\nWe don't wanna change those\nfunctional levels, but\n\n133\n00:07:24.640 --> 00:07:27.750\nyou do need to have the 2016\ndomain controller because,\n\n134\n00:07:27.750 --> 00:07:31.970\nwell it's the only one that knows how\nto authenticate a key trust model.\n\n135\n00:07:31.970 --> 00:07:36.620\nSo what will happen is, is that you need\nto have an adequate number of those domain\n\n136\n00:07:36.620 --> 00:07:41.740\ncontrollers in order for you to be\nable to authenticate all of the users.\n\n137\n00:07:41.740 --> 00:07:45.330\nAdequate, we don't really have\na silver bullet term for adequate,\n\n138\n00:07:45.330 --> 00:07:47.470\nbecause we don't know\neverybody's environment.\n\n139\n00:07:47.470 --> 00:07:51.414\nYou basically need to look at the existing\nauthentication, and the amount of load\n\n140\n00:07:51.414 --> 00:07:54.859\nthat all of your domain controllers\nare doing as people authenticate.\n\n141\n00:07:54.859 --> 00:07:56.937\nBecause what people may not realize is,\n\n142\n00:07:56.937 --> 00:08:01.281\nas soon as you insert that 2016 domain\ncontroller in your environment It becomes\n\n143\n00:08:01.281 --> 00:08:05.644\nthe workhorse of the entire environment\nand people say, well, why is that, Mike?\n\n144\n00:08:05.644 --> 00:08:07.600\nAnd I go well, if you look at it,\n\n145\n00:08:07.600 --> 00:08:12.920\nthe 2016 domain controller knows\nhow to authenticate everybody.\n\n146\n00:08:12.920 --> 00:08:15.540\nBut the down levels,\nlike the 2012, 2012 R2,\n\n147\n00:08:15.540 --> 00:08:19.368\nthey only know how to do\neverything prior to 2016.\n\n148\n00:08:19.368 --> 00:08:24.009\nSo instantly, your existing authentication\nis going to be distributed across all\n\n149\n00:08:24.009 --> 00:08:26.728\ndomain controllers, but\nyour Windows Hello for\n\n150\n00:08:26.728 --> 00:08:29.795\nBusiness authentication is\ngonna be targeted there.\n\n151\n00:08:29.795 --> 00:08:34.330\nAnd so this is where I have a little Visio\nhere, we can show you, just to make sure\n\n152\n00:08:34.330 --> 00:08:39.231\nthat people understand here, is that the\nauthentication model is always on-prem.\n\n153\n00:08:39.231 --> 00:08:44.076\nAnd in here, you show that the user\nis authenticating to a 2016\n\n154\n00:08:44.076 --> 00:08:46.930\ndomain controller and it uses a key.\n\n155\n00:08:46.930 --> 00:08:50.610\nAnd so anytime you hear key trust,\nyou need to\n\n156\n00:08:50.610 --> 00:08:54.830\nunderstand that that means you're\ngoing to need 2016 domain controllers.\n\n157\n00:08:54.830 --> 00:09:00.800\nNow, the pro to this model is you don't\nneed to issue certificates to your users.\n\n158\n00:09:00.800 --> 00:09:04.500\nUsers will just generate a key,\nthat key will be protected in TPM, but\n\n159\n00:09:04.500 --> 00:09:08.060\nyou don't need to issue\ncertificates to the users.\n\n160\n00:09:08.060 --> 00:09:12.610\nSo really, what you have here in this\nparticular key trust model is which\n\n161\n00:09:12.610 --> 00:09:14.640\none do you like the most or\nlike the least.\n\n162\n00:09:14.640 --> 00:09:18.351\nIn that case is,\nare you okay with 2016 domain controllers?\n\n163\n00:09:18.351 --> 00:09:23.940\nOr are you okay with issuing\ncertificates to your end users?\n\n164\n00:09:23.940 --> 00:09:26.150\nAnd that leads us to\nthe next model that we have,\n\n165\n00:09:26.150 --> 00:09:28.340\nwhich is the certificate trust model.\n\n166\n00:09:28.340 --> 00:09:32.500\nIn the certificate trust model,\nI have another diagram for this one here,\n\n167\n00:09:32.500 --> 00:09:37.588\nwe can just intro here,\ngo to that slide there, here we go.\n\n168\n00:09:37.588 --> 00:09:42.680\nSo in the certificate trust model,\nas expected, remember its always on-prem,\n\n169\n00:09:42.680 --> 00:09:46.040\nas you always authenticate to with a key.\n\n170\n00:09:46.040 --> 00:09:50.570\nThis one, you're actually going to\nissue a certificate to your end users.\n\n171\n00:09:50.570 --> 00:09:54.490\nSo when you issue a certificate,\nnow, this is just normal\n\n172\n00:09:54.490 --> 00:09:59.020\nsmart card authentication that Windows\nhas been doing for the last 15, 17 years.\n\n173\n00:09:59.020 --> 00:10:03.800\nSo you don't have a dependency on\nthat 2016 domain controller anymore.\n\n174\n00:10:03.800 --> 00:10:08.790\nSo the two models can help nearly\nany enterprise whatsoever in\n\n175\n00:10:08.790 --> 00:10:13.730\nhow they want to deploy and\nwhether they wanna issue certificates, or\n\n176\n00:10:13.730 --> 00:10:17.280\nif they're fine with keys, or whether they\ndon't want 2016 domain controllers, or\n\n177\n00:10:17.280 --> 00:10:18.580\nwhether they're okay with that.\n\n178\n00:10:18.580 --> 00:10:23.190\nIt's really, wherever the pain is, there's\na model that will offset that pain.\n\n179\n00:10:23.190 --> 00:10:26.620\n&gt;&gt; Now, is it possible to do both, or\ndo we have to pick one or the other?\n\n180\n00:10:26.620 --> 00:10:28.150\n&gt;&gt; It is possible to do both.\n\n181\n00:10:28.150 --> 00:10:30.980\nBut you need to understand that the\nmanagement overhead that you're gonna have\n\n182\n00:10:30.980 --> 00:10:33.770\nis just trying to keep track of\nwhich user is a cert trust user, and\n\n183\n00:10:33.770 --> 00:10:35.570\nwhich user is a key trust user.\n\n184\n00:10:35.570 --> 00:10:36.600\nBut you certainly can.\n\n185\n00:10:36.600 --> 00:10:39.621\nThe way that we differentiate\nthese two deployments is through\n\n186\n00:10:39.621 --> 00:10:42.870\na group policy setting, and\nit says on-prem authentication, and\n\n187\n00:10:42.870 --> 00:10:44.699\nwe'll see that in a couple episodes.\n\n188\n00:10:44.699 --> 00:10:48.240\nBut yes, you can basically do both.\n\n189\n00:10:48.240 --> 00:10:51.110\nAnother thing that we throw out there for\n\n190\n00:10:51.110 --> 00:10:54.680\npeople is that if you do\nthe certificate trust model, but\n\n191\n00:10:54.680 --> 00:11:00.170\nyou happen to have 2016 DCs, then\nthere's no reason why you can't do both.\n\n192\n00:11:00.170 --> 00:11:03.617\nYou may some users that well, they\ndon't go anywhere, they're not mobile.\n\n193\n00:11:03.617 --> 00:11:06.947\nWe will trust that key and we'll just\nleave them because they work on a desktop,\n\n194\n00:11:06.947 --> 00:11:08.000\nor something like that.\n\n195\n00:11:08.000 --> 00:11:11.920\nWhereas you may say well, my mobile users,\nI really want them to have a certificate,\n\n196\n00:11:11.920 --> 00:11:16.820\nso that way we have remediation factors of\nbeing able to revoke the certificate and\n\n197\n00:11:16.820 --> 00:11:17.750\nthings of that nature.\n\n198\n00:11:17.750 --> 00:11:23.350\nSo each model has whatever it\nneeds to do to make it work.\n\n199\n00:11:23.350 --> 00:11:26.795\n&gt;&gt; And as a general rule, I know you said\nthat the key trust model that is just on\n\n200\n00:11:26.795 --> 00:11:28.447\nthe 2016 domain controllers.\n\n201\n00:11:28.447 --> 00:11:32.196\nIf we choose to go with a certificate\nmodel, is that a long-term plan or\n\n202\n00:11:32.196 --> 00:11:35.703\nshould we be planning on transitioning\nto a key model eventually?\n\n203\n00:11:35.703 --> 00:11:39.450\n&gt;&gt; No, both models are there.\n\n204\n00:11:39.450 --> 00:11:42.650\nBecause the certificate model just\nuses the way smart cards work,\n\n205\n00:11:42.650 --> 00:11:45.310\nwe don't plan to stop people\nfrom using smart cards.\n\n206\n00:11:45.310 --> 00:11:49.181\nSo no, each model is just really\nwhich one you want to use, and\n\n207\n00:11:49.181 --> 00:11:52.309\nwe wanted to give,\nkeep the test matrix down, but\n\n208\n00:11:52.309 --> 00:11:55.894\nprovide a variety of deployment\nfactors for customers.\n\n209\n00:11:55.894 --> 00:12:00.332\nWe know some people really aren't\nPKI-friendly, they don't want to have PKI.\n\n210\n00:12:00.332 --> 00:12:01.653\n&gt;&gt; [LAUGH]\n&gt;&gt; And we get that, but\n\n211\n00:12:01.653 --> 00:12:03.380\nit's the world we live in today.\n\n212\n00:12:03.380 --> 00:12:06.210\nWe need to have that external\nroot of trust out there.\n\n213\n00:12:07.320 --> 00:12:10.230\nSo we can minimize the PKI to\njust domain controllers and\n\n214\n00:12:10.230 --> 00:12:11.810\nthe end users don't need it.\n\n215\n00:12:11.810 --> 00:12:15.310\nOtherwise, other enterprises are very\nPKI-friendly, and they like it.\n\n216\n00:12:15.310 --> 00:12:18.160\nAnd so they don't mind it,\nin fact, it's old-school to them.\n\n217\n00:12:18.160 --> 00:12:22.640\nWhere it's just issuing a cert, and\nit's just the thing that they know.\n\n218\n00:12:22.640 --> 00:12:25.670\nSo now, let's look at the infrastructure.\n\n219\n00:12:25.670 --> 00:12:27.120\nI've told you about the two models.\n\n220\n00:12:27.120 --> 00:12:29.090\nIn this series of episodes,\n\n221\n00:12:29.090 --> 00:12:32.630\nwhat we're going to talk about is\nthe on-prem certificate trust model.\n\n222\n00:12:32.630 --> 00:12:36.450\nThat seems to be the thing that's\nresonating most with customers because\n\n223\n00:12:36.450 --> 00:12:38.790\nit's familiar, they know certificates.\n\n224\n00:12:38.790 --> 00:12:42.720\nAnd at the same time,\nit gets them away from passwords and\n\n225\n00:12:42.720 --> 00:12:44.630\ngets them into that\ntwo-factor authentication.\n\n226\n00:12:44.630 --> 00:12:47.950\nSo I want to do is go,\nlook at the infrastructure here, and\n\n227\n00:12:47.950 --> 00:12:50.160\nI have a slide here that\nshows you the infrastructure.\n\n228\n00:12:50.160 --> 00:12:54.470\nAnd I'm just pointing out the high level\ncomponents here that we have, and give you\n\n229\n00:12:54.470 --> 00:12:59.370\na just a sneak preview of the things that\nwe're gonna talk about with each of these.\n\n230\n00:12:59.370 --> 00:13:02.660\nWe'll start with\nthe Active Directory Domain Control.\n\n231\n00:13:02.660 --> 00:13:06.652\nWe've already spoke about\nhow you either need a 2012.\n\n232\n00:13:06.652 --> 00:13:10.605\nWell, actually, you can do 2008 R2 or\nlater if you're doing the certificate\n\n233\n00:13:10.605 --> 00:13:13.720\ntrust model, and\nthen you can also use the 2016 ones there.\n\n234\n00:13:13.720 --> 00:13:17.920\nBut if you're not using 2016, which in\nthis case, these series of episodes,\n\n235\n00:13:17.920 --> 00:13:21.951\nwe're focusing on using as much of your\nexisting infrastructure as possible.\n\n236\n00:13:21.951 --> 00:13:26.351\nWe're gonna say that you have a 2008 R2\ndomain of forest functional level and\n\n237\n00:13:26.351 --> 00:13:30.877\nthat will be fine, and that you might have\na 2012 domain controller that you just\n\n238\n00:13:30.877 --> 00:13:33.250\nhaven't decided to upgrade yet.\n\n239\n00:13:33.250 --> 00:13:37.300\nAnd in that case, what we need to do\nis that we do need to have the 2016\n\n240\n00:13:37.300 --> 00:13:40.400\nschema there, because there's some\nattributes that we store some data on,\n\n241\n00:13:40.400 --> 00:13:43.290\nmostly that public key that\nwe talked about for the user.\n\n242\n00:13:43.290 --> 00:13:47.060\nSo we wanna store that\npublic key on there.\n\n243\n00:13:47.060 --> 00:13:48.486\nThe next thing that we need to do is,\n\n244\n00:13:48.486 --> 00:13:52.069\nwe're gonna create some groups that we're\ngonna use throughout the deployment model.\n\n245\n00:13:52.069 --> 00:13:55.342\nAnd these groups are gonna be\nfundamental because they actually,\n\n246\n00:13:55.342 --> 00:13:58.965\nyou'll see how we're gonna tie all of\nthe deployment into these groups to\n\n247\n00:13:58.965 --> 00:14:02.550\nwhere permissions will be set to\na group member who'll be set to it.\n\n248\n00:14:02.550 --> 00:14:05.810\nTo where it just make it\nreally easy to migrate\n\n249\n00:14:05.810 --> 00:14:08.440\nbatches of users to\nWindows Hello as needed.\n\n250\n00:14:08.440 --> 00:14:12.307\nYou just add them to the group and all of\nthe permissions and the certificates and\n\n251\n00:14:12.307 --> 00:14:16.419\nthings that we've gone to provision in\nthe next few episodes, they'll just work.\n\n252\n00:14:16.419 --> 00:14:19.745\nSo it's really about just adding\na user to a group or adding,\n\n253\n00:14:19.745 --> 00:14:23.266\nif you wanna do batches, you can\nadd a bunch of users to a group and\n\n254\n00:14:23.266 --> 00:14:26.620\nthen add that group to\nthe group that will do.\n\n255\n00:14:26.620 --> 00:14:29.460\nSo moving on,\nwe need the certificate services.\n\n256\n00:14:29.460 --> 00:14:33.080\nAnd we're pretty much going\nto say we need to have those.\n\n257\n00:14:33.080 --> 00:14:36.720\nFirst of all,\na route of trust to all of our clients.\n\n258\n00:14:37.740 --> 00:14:41.584\nWe wanna make sure that when a Windows 10\nmachine is communicating with a domain\n\n259\n00:14:41.584 --> 00:14:44.242\ncontroller, that is\na legitimate domain controller,\n\n260\n00:14:44.242 --> 00:14:47.371\nthere's a lot of rogue domain\ncontroller tags that go out there.\n\n261\n00:14:47.371 --> 00:14:51.324\nAnd we wanna make sure that our domain\ncontroller is using the best validation it\n\n262\n00:14:51.324 --> 00:14:53.454\ncan for when we actually authenticate it.\n\n263\n00:14:53.454 --> 00:14:56.272\nSo we're going to use the certificate\non the domain controller and\n\n264\n00:14:56.272 --> 00:14:57.540\nyou may say well, I have one.\n\n265\n00:14:57.540 --> 00:15:00.760\nWell, we'll get into that episode,\nbut we're probably upgrade that domain\n\n266\n00:15:00.760 --> 00:15:04.018\ncontroller to do something that’s\ncalled strict KDC Validation.\n\n267\n00:15:04.018 --> 00:15:08.620\nAgain we wanna make sure that we are using\nthe best security that we can because as\n\n268\n00:15:08.620 --> 00:15:10.620\nDon said,\nthese are the keys to the kingdom.\n\n269\n00:15:10.620 --> 00:15:13.505\nEven though it's on-prem,\nthe more security we can add,\n\n270\n00:15:13.505 --> 00:15:15.100\nthe better it's gonna be.\n\n271\n00:15:15.100 --> 00:15:19.610\nThe next thing is, is that in this\nmodule we'll also be some certificate\n\n272\n00:15:19.610 --> 00:15:22.520\ntemplate work where we'll get familiar\nwith the certificate templates, and\n\n273\n00:15:22.520 --> 00:15:23.910\nI'll show you the settings.\n\n274\n00:15:23.910 --> 00:15:24.900\nWe're gonna have two or\n\n275\n00:15:24.900 --> 00:15:28.130\nthree certificate templates that\nwe'll use throughout the series.\n\n276\n00:15:28.130 --> 00:15:30.150\nAnd just wanna get you familiar these and\n\n277\n00:15:30.150 --> 00:15:34.015\nexplain what we're doing in these\ntemplates, so that way it's very easy for\n\n278\n00:15:34.015 --> 00:15:36.647\nyou to communicate and\nexplain it to others as well.\n\n279\n00:15:36.647 --> 00:15:40.007\nBecause, again,\nnot many people are PKI-friendly and\n\n280\n00:15:40.007 --> 00:15:43.160\nwe wanna make sure that this\nisn't a blocker for you.\n\n281\n00:15:43.160 --> 00:15:47.519\nAfter we go to the certificate servers,\nnow we're talking about AD FS, and\n\n282\n00:15:47.519 --> 00:15:49.912\nAD FS 2016 is a requirement for this.\n\n283\n00:15:49.912 --> 00:15:54.186\nAnd there's three things that\nthe AD FS server will do, and\n\n284\n00:15:54.186 --> 00:15:59.745\nwe'll see in later episodes, which is\nit's going to do key registration for\n\n285\n00:15:59.745 --> 00:16:05.180\nthe device It's going to do user\ndevice registration for the device.\n\n286\n00:16:05.180 --> 00:16:07.170\nKey registration for the user.\n\n287\n00:16:07.170 --> 00:16:10.710\nAnd we're also going to use it as\na certificate registration authority.\n\n288\n00:16:10.710 --> 00:16:13.980\nNow I know many of you, may or may not\nknow what that is, we'll get to that.\n\n289\n00:16:13.980 --> 00:16:18.920\nBut it's a really cool way to where we can\nenroll certificates on behalf of a user,\n\n290\n00:16:18.920 --> 00:16:22.510\nand have that trusted third party entity\nin there that gives us extra assurances.\n\n291\n00:16:22.510 --> 00:16:25.180\n&gt;&gt; You know, as you were going\nthrough the different components here,\n\n292\n00:16:25.180 --> 00:16:27.670\nI'm looking through the list,\nI see Active Directory Domain Controller.\n\n293\n00:16:27.670 --> 00:16:30.440\nAll right, well,\nwe're already gonna have that, right?\n\n294\n00:16:30.440 --> 00:16:32.460\nActive Directory Certificates Server,\n\n295\n00:16:32.460 --> 00:16:35.970\nodds are we've already got that too\nbecause you might be doing EFS and\n\n296\n00:16:35.970 --> 00:16:38.920\nother things where you're managing\nthose certificates essentially already.\n\n297\n00:16:38.920 --> 00:16:40.670\nMost companies are doing that, right?\n\n298\n00:16:40.670 --> 00:16:44.700\nWell, when I see\nFederation Services I'm like, great.\n\n299\n00:16:44.700 --> 00:16:49.440\nNow not every company has ADFS deployed\nbecause you might not be integrated\n\n300\n00:16:49.440 --> 00:16:53.870\nwith Azure or some other business\npartner or somebody else like that.\n\n301\n00:16:53.870 --> 00:16:56.110\nBut when you described how we\nwere going to be using AD FS,\n\n302\n00:16:56.110 --> 00:16:57.460\nit's not the traditional model, is it?\n\n303\n00:16:57.460 --> 00:17:01.250\nWe're not necessarily connecting to\nauthenticate with somebody else.\n\n304\n00:17:01.250 --> 00:17:04.880\nWe're connecting to federate\nwith ourselves, right?\n\n305\n00:17:04.880 --> 00:17:08.650\n&gt;&gt; Yeah, that's the great thing\nabout it is actually you're\n\n306\n00:17:08.650 --> 00:17:10.045\nfederating with yourself.\n\n307\n00:17:10.045 --> 00:17:13.000\n&gt;&gt; [LAUGH]\n&gt;&gt; Which is a really interesting model.\n\n308\n00:17:13.000 --> 00:17:16.590\nBut the great thing about it as the points\nyou talk about when you get into\n\n309\n00:17:16.590 --> 00:17:19.050\ndoing these federations\nwith these other parties.\n\n310\n00:17:19.050 --> 00:17:22.680\nThen you have these claims rules, and\nthese transformations and my gosh,\n\n311\n00:17:22.680 --> 00:17:26.690\nyou get, we will not touch any of\nthat in any of these episodes.\n\n312\n00:17:26.690 --> 00:17:31.690\nIt's a really we're using some very\nbuilt in services that are just very\n\n313\n00:17:31.690 --> 00:17:35.680\neasy to configure as far\nas the AD FS side goes.\n\n314\n00:17:35.680 --> 00:17:38.650\nSo we won't have to worry about claims and\nclaims rules and all of that stuff.\n\n315\n00:17:38.650 --> 00:17:40.470\nBut yes, you are federating yourself,\n\n316\n00:17:40.470 --> 00:17:43.770\nwhich is basically,\nyou authenticate to AD FS.\n\n317\n00:17:43.770 --> 00:17:45.060\nAnd ADFS will just turn around and\n\n318\n00:17:45.060 --> 00:17:47.270\nauthenticate you again\nto the Active Directory.\n\n319\n00:17:47.270 --> 00:17:49.480\n&gt;&gt; Absolutely, so\nif AD FS is one of your trigger words, and\n\n320\n00:17:49.480 --> 00:17:50.580\nyou just started to panic.\n\n321\n00:17:50.580 --> 00:17:51.108\nDon't worry,\n\n322\n00:17:51.108 --> 00:17:53.970\nit's actually really, really neat\nthe way that it will be deployed here?\n\n323\n00:17:53.970 --> 00:17:56.280\n&gt;&gt; Yeah, it's gonna be really easy there.\n\n324\n00:17:56.280 --> 00:18:00.309\nWe're gonna be clicking some buttons and\nthat's about all we're gonna be doing.\n\n325\n00:18:00.309 --> 00:18:02.659\n&gt;&gt; [LAUGH]\n&gt;&gt; So it's gonna be really good there.\n\n326\n00:18:02.659 --> 00:18:06.466\nSo the AD FS side is something but\nI do need to call,\n\n327\n00:18:06.466 --> 00:18:09.202\nit does require the AD FS 2016.\n\n328\n00:18:09.202 --> 00:18:11.554\nAnd we're gonna talk about\na little later episode,\n\n329\n00:18:11.554 --> 00:18:15.030\nwhere there's gonna be a update coming\nup that's gonna add that certificate\n\n330\n00:18:15.030 --> 00:18:16.920\nregistration authority stuff in there.\n\n331\n00:18:16.920 --> 00:18:18.290\nSo this is the good stuff.\n\n332\n00:18:18.290 --> 00:18:21.440\nThis is, when we get into this stuff,\nthen we're gonna be having a lot of fun.\n\n333\n00:18:21.440 --> 00:18:23.550\nWe're gonna be in there\ntweaking a lot of stuff and\n\n334\n00:18:23.550 --> 00:18:25.690\nlearning a lot about the deployment.\n\n335\n00:18:25.690 --> 00:18:29.240\nAnd one of the things I wanted to stress\nis that while I'm going to show you how to\n\n336\n00:18:29.240 --> 00:18:33.570\ndo it, I want to also explain it, make\nsure you understand what you're doing.\n\n337\n00:18:33.570 --> 00:18:37.260\nFollowing procedures without any\nexplanation doesn't really benefit you.\n\n338\n00:18:37.260 --> 00:18:39.935\nYou don't understand what you\nare deploying and therefore you do not\n\n339\n00:18:39.935 --> 00:18:43.125\nunderstand how it works and then you do\nnot understand how to troubleshoot it.\n\n340\n00:18:43.125 --> 00:18:45.001\nSo as we go through each of these,\n\n341\n00:18:45.001 --> 00:18:48.493\nI'm going to make sure that we\ntell you why you are doing this.\n\n342\n00:18:48.493 --> 00:18:52.756\nHow it fits in the grand scheme of things\nin the entire piece of the puzzle there.\n\n343\n00:18:52.756 --> 00:18:59.130\nSo, we talked about the ADFS stuff,\nwe'll be doing some TLS certificate stuff.\n\n344\n00:18:59.130 --> 00:19:01.450\nWe'll be doing some of that,\nthat goes back into there.\n\n345\n00:19:01.450 --> 00:19:04.980\nAnd then we're gonna get into this new\nthing called the Azure MFA Server.\n\n346\n00:19:04.980 --> 00:19:08.380\nAnd, when you hear the Azure,\ndon't start freaking out.\n\n347\n00:19:08.380 --> 00:19:10.360\nYou don't need to have Azure tenant.\n\n348\n00:19:10.360 --> 00:19:13.040\nYou do need to have an Azure account.\n\n349\n00:19:13.040 --> 00:19:17.074\nAnd we'll explain that in great\ndetail there and we'll tell you why.\n\n350\n00:19:17.074 --> 00:19:21.974\nBut this is a way where as, Don said,\nwe're gonna federate with ourselves.\n\n351\n00:19:21.974 --> 00:19:24.370\nAnd in federation,\nyou kinda need to know these identities.\n\n352\n00:19:24.370 --> 00:19:26.918\nSo, if we think back to\nthe hybrid model where we\n\n353\n00:19:26.918 --> 00:19:31.695\nhave that AD connect that synchronizes\nthose identities back up to Azure.\n\n354\n00:19:31.695 --> 00:19:34.955\nWe don't necessarily need to do\na synchronization, so to speak,\n\n355\n00:19:34.955 --> 00:19:36.855\nto Azure for this.\n\n356\n00:19:36.855 --> 00:19:39.825\nWhat we have is Azure has\nan actual on-premises\n\n357\n00:19:39.825 --> 00:19:42.662\nsoftware server role that you can install.\n\n358\n00:19:42.662 --> 00:19:46.272\nAnd the identity and\nthe credentials sync stays on-prem.\n\n359\n00:19:46.272 --> 00:19:48.659\nSo as, Don was saying,\nthese identities in the cloud,\n\n360\n00:19:48.659 --> 00:19:52.992\nman, that's very scary and we understand\nnot everybody's ready to go there yet.\n\n361\n00:19:52.992 --> 00:19:56.310\nAnd what's going to be great about\nthis is that you can actually use\n\n362\n00:19:56.310 --> 00:20:01.660\nthe Azure MFA service, just to do\nthe second factor authentication.\n\n363\n00:20:01.660 --> 00:20:02.810\nBut your identities and\n\n364\n00:20:02.810 --> 00:20:06.230\nyour credentials all stay on-prem,\nall stay within your reach there.\n\n365\n00:20:06.230 --> 00:20:08.210\nSo that's gonna be some really fun stuff.\n\n366\n00:20:08.210 --> 00:20:09.470\nIt's a really cool product.\n\n367\n00:20:09.470 --> 00:20:10.920\nIt's got a lot of feature sets.\n\n368\n00:20:10.920 --> 00:20:14.950\nWe'll explore some of those, and how they\nfit into Windows Hello for Business.\n\n369\n00:20:14.950 --> 00:20:22.110\nAnd then we're gonna talk about the user\nPortal, this comes with the MFA server.\n\n370\n00:20:22.110 --> 00:20:25.960\nAnd, as I said in the previous episode,\nit's like this user portal is to try to\n\n371\n00:20:25.960 --> 00:20:33.090\ngive administrators a way to where they\ncan basically give a user a self-servicing\n\n372\n00:20:33.090 --> 00:20:38.180\nportal to where they can just manage\nthese MFA options themselves.\n\n373\n00:20:38.180 --> 00:20:42.210\nNow obviously, the admin has total control\nof what shows up in these user portals and\n\n374\n00:20:42.210 --> 00:20:46.225\nstuff like this, of whether you can change\nyour phone number in Active Directory or\n\n375\n00:20:46.225 --> 00:20:48.010\nI can change it there.\n\n376\n00:20:48.010 --> 00:20:50.900\nSecurity questions in case\nI can't authenticate and\n\n377\n00:20:50.900 --> 00:20:54.210\nI really need to go fix my MFA\nbecause I can't provision.\n\n378\n00:20:54.210 --> 00:20:56.230\nSo, we well look at some\nof those aspects there and\n\n379\n00:20:56.230 --> 00:20:58.750\ntalk about how we set up user portal.\n\n380\n00:20:58.750 --> 00:21:02.510\nAnd so really great feature in your\ndeployment model because at some\n\n381\n00:21:02.510 --> 00:21:05.290\npoint you're gonna have all these\ninfrastructures rolled out.\n\n382\n00:21:05.290 --> 00:21:09.270\nAnd then you'll gonna need to tell the\nusers how to use this and because that MFA\n\n383\n00:21:09.270 --> 00:21:14.630\nis a critical piece of the provisioning\nstep, what we're gonna need to do is you\n\n384\n00:21:14.630 --> 00:21:17.800\nneed to email him or tell him something\nlike, hey, you need to enroll in this.\n\n385\n00:21:17.800 --> 00:21:21.080\nAnd the great thing is this user portal\nhas an email setting in there to where you\n\n386\n00:21:21.080 --> 00:21:25.130\ncan then tell them, hey,\nyou're about to be provisioned.\n\n387\n00:21:25.130 --> 00:21:28.190\nIn two weeks we're gonna provision you for\nWindows Hello for Business.\n\n388\n00:21:28.190 --> 00:21:30.670\nSo hey,\nwe're gonna send this email out to you so\n\n389\n00:21:30.670 --> 00:21:32.690\nyou can register into the user portal.\n\n390\n00:21:32.690 --> 00:21:34.830\nAnd tweak everything,\npick the language you want,\n\n391\n00:21:34.830 --> 00:21:37.500\npick what your phone number is,\nall kinds of these settings.\n\n392\n00:21:37.500 --> 00:21:40.270\nSo we're gonna go under the user portal\nthere, and do a lot of that stuff.\n\n393\n00:21:40.270 --> 00:21:43.780\nAnd then, one of my favorites is\nthat we're gonna manage all of this,\n\n394\n00:21:43.780 --> 00:21:45.680\nusing group policy.\n\n395\n00:21:45.680 --> 00:21:50.710\nGroup policy is super powerful, super\nsimple to use and everybody is using it.\n\n396\n00:21:50.710 --> 00:21:52.810\nAnd it's just gonna be really easy.\n\n397\n00:21:52.810 --> 00:21:55.510\nThese are gonna be concepts that\nmost of you have already been\n\n398\n00:21:55.510 --> 00:21:58.230\nusing in the enterprise there,\nso we're just gonna\n\n399\n00:21:58.230 --> 00:22:01.590\nuse group policy to turn on these bells\nand whistles, and get everything rolling.\n\n400\n00:22:02.740 --> 00:22:04.410\n&gt;&gt; All right, so\nthat's a pretty good run down of all\n\n401\n00:22:04.410 --> 00:22:05.730\nthe different components\nthat we're gonna need.\n\n402\n00:22:05.730 --> 00:22:07.750\nIt's really not that intimidating at all.\n\n403\n00:22:07.750 --> 00:22:09.590\nIt's just a handful of components\nthat we need in place.\n\n404\n00:22:09.590 --> 00:22:13.780\nObviously, you can have a configuration\nthat's far more complex, right, Mike?\n\n405\n00:22:13.780 --> 00:22:15.830\nWe're not gonna get into\nthings like load balancing and\n\n406\n00:22:15.830 --> 00:22:17.236\nthe really crazy bells and whistles.\n\n407\n00:22:17.236 --> 00:22:19.630\nThat all stuff that can\nbe added down the road.\n\n408\n00:22:19.630 --> 00:22:22.960\n&gt;&gt; Yeah, I mean, obviously when you're\ndeploying something for your enterprise\n\n409\n00:22:22.960 --> 00:22:25.710\nyou need to think about high\navailability and things of that nature.\n\n410\n00:22:25.710 --> 00:22:29.130\nSo, your AD FS Servers,\nyou're going to want an AD FS or\n\n411\n00:22:29.130 --> 00:22:30.530\na federation farm, as they call it.\n\n412\n00:22:30.530 --> 00:22:33.690\nBut there's some simple things that can\nease you into it on different models.\n\n413\n00:22:33.690 --> 00:22:37.170\nAnd we'll talk about those particular\nmodels when we get to the AD FS part.\n\n414\n00:22:37.170 --> 00:22:38.990\nAnd then obviously your user portal.\n\n415\n00:22:38.990 --> 00:22:42.223\nIt's a website that people will go to,\nso obviously, load balancing,\n\n416\n00:22:42.223 --> 00:22:44.980\nyou have to make sure people\ncan get to that and so forth.\n\n417\n00:22:44.980 --> 00:22:50.600\nBut those are the things that really,\nonce you get the concepts down, that's\n\n418\n00:22:50.600 --> 00:22:55.270\nwhen you take what you've learned from\nthis, and apply it to your environment.\n\n419\n00:22:55.270 --> 00:22:58.710\nI often caution people, that the first\nstep in a deployment is, really,\n\n420\n00:22:58.710 --> 00:23:00.150\na proof of concept, a lab.\n\n421\n00:23:01.210 --> 00:23:03.050\nYou can virtualize all of this.\n\n422\n00:23:03.050 --> 00:23:05.180\nAll of what we're doing\ntoday is virtualized,\n\n423\n00:23:05.180 --> 00:23:08.760\nand, just so you get to know the feature,\nget to know how it's configured,\n\n424\n00:23:08.760 --> 00:23:10.980\nknow the ins and outs of the feature.\n\n425\n00:23:10.980 --> 00:23:13.280\nI think it's very critical\nto just learn it,\n\n426\n00:23:13.280 --> 00:23:16.820\nwithout the complications\nof your environment.\n\n427\n00:23:16.820 --> 00:23:19.430\nI've walked several enterprise\ncustomers through this, and\n\n428\n00:23:19.430 --> 00:23:22.280\nthey immediately try to set\nit up in their environment.\n\n429\n00:23:22.280 --> 00:23:25.000\nAnd what it does,\nis it creates a lot of complications,\n\n430\n00:23:25.000 --> 00:23:29.310\nbecause you know your environment, but\nyou don't know this particular technology.\n\n431\n00:23:29.310 --> 00:23:31.630\nYou don't know the end to ends,\nyou don't know how it works.\n\n432\n00:23:31.630 --> 00:23:34.710\nSo you really have no clue how to\ntroubleshoot this to determine,\n\n433\n00:23:34.710 --> 00:23:36.900\nis this a problem with the product or\n\n434\n00:23:36.900 --> 00:23:40.660\nis this actually just an environmental\nthing or a transient thing.\n\n435\n00:23:40.660 --> 00:23:45.030\nSo really, the deployment and\nthe planning should be proof of concept,\n\n436\n00:23:45.030 --> 00:23:45.680\ndo it in a lab.\n\n437\n00:23:45.680 --> 00:23:49.130\nYou can do hardware if you want,\nyou can do it in virtualized if you want.\n\n438\n00:23:49.130 --> 00:23:51.970\nAnd then once you have that down,\nand you feel comfortable with that,\n\n439\n00:23:51.970 --> 00:23:57.280\nthen maybe do your proof of concept,\nor what I call maybe a small pilot,\n\n440\n00:23:57.280 --> 00:24:01.430\nif you will, to where now you start\nintroducing some of the aspects of\n\n441\n00:24:01.430 --> 00:24:04.045\nyour environment into this lab or\ninto this environment.\n\n442\n00:24:04.045 --> 00:24:08.405\nSo you can see what's this, what changes\nare we gonna need to support this.\n\n443\n00:24:08.405 --> 00:24:10.205\nOr do we have a show stopper?\n\n444\n00:24:10.205 --> 00:24:12.895\nI mean, that's obviously something\nyou would want to know ahead of time.\n\n445\n00:24:12.895 --> 00:24:15.845\nYou don't wanna be a three-quarters\nto the deployment and go oops, well,\n\n446\n00:24:15.845 --> 00:24:17.845\nthis isn't gonna work for us.\n\n447\n00:24:17.845 --> 00:24:20.245\nSo, that's the model that\nwe would wanna go through.\n\n448\n00:24:20.245 --> 00:24:23.945\nSo those high availability things and\nthose low balancing things.\n\n449\n00:24:23.945 --> 00:24:25.385\nWe're not gonna teach or\n\n450\n00:24:25.385 --> 00:24:28.278\ntalk on here because every\nenvironment's going to be different.\n\n451\n00:24:28.278 --> 00:24:31.400\nSome will either use software load\nbalancing while others are gonna\n\n452\n00:24:31.400 --> 00:24:34.240\npotentially use their hardware for\nload balancing and things like that.\n\n453\n00:24:34.240 --> 00:24:37.060\nSo we'll call out throughout\nthe episodes where we say\n\n454\n00:24:37.060 --> 00:24:39.030\nthis is an opportunity to load balance.\n\n455\n00:24:39.030 --> 00:24:43.570\nAnd the MFA server's another option there\nwhere you can have multiple MFA servers\n\n456\n00:24:43.570 --> 00:24:45.590\nand you can get really\ncreative with how you do that,\n\n457\n00:24:45.590 --> 00:24:47.560\nwhether you have multiple domains or not.\n\n458\n00:24:47.560 --> 00:24:52.770\nBut by large we're gonna focus on how to\nteach you guys how to deploy this, and\n\n459\n00:24:52.770 --> 00:24:54.700\nto understand the inner workings of it so\nthat way,\n\n460\n00:24:54.700 --> 00:24:57.130\nyou're capable of actually\ndeploying it in your environment.\n\n461\n00:24:58.400 --> 00:25:00.110\n&gt;&gt; Awesome, well, I know I'm\nreally looking forward to it and\n\n462\n00:25:00.110 --> 00:25:01.690\nI'm sure the viewers are also.\n\n463\n00:25:01.690 --> 00:25:03.900\nBut this is a pretty good spot for\nus to wrap this episode up.\n\n464\n00:25:03.900 --> 00:25:06.220\nDid you have anything else you\nwanted to mention before we close?\n\n465\n00:25:06.220 --> 00:25:10.020\n&gt;&gt; No, this is probably the last one we're\ngoing to do with the talking heads stuff.\n\n466\n00:25:10.020 --> 00:25:13.390\nWe're going to jump into some, we'll\nprepare AD and things of that nature.\n\n467\n00:25:13.390 --> 00:25:16.490\nSo we're going to be starting the hands\non stuff, the really cool stuff.\n\n468\n00:25:16.490 --> 00:25:17.880\n&gt;&gt; Awesome, I'm looking forward to it.\n\n469\n00:25:17.880 --> 00:25:21.090\nIf you're looking forward to it too then\nmake sure you stay tuned because those\n\n470\n00:25:21.090 --> 00:25:21.980\nepisodes are coming up.\n\n471\n00:25:21.980 --> 00:25:24.732\nBut for now, this is a pretty good\nspot for us to wrap this episode up so\n\n472\n00:25:24.732 --> 00:25:25.972\nwe're going to close it here.\n\n473\n00:25:25.972 --> 00:25:29.338\nSigning off for ITProTV,\nI'm your host, Don Pezet.\n\n474\n00:25:29.338 --> 00:25:30.304\n&gt;&gt; And I'm Mike Stephens.\n\n475\n00:25:30.304 --> 00:25:32.718\n&gt;&gt; And we will see you next time.\n\n476\n00:25:32.718 --> 00:25:38.754\n[MUSIC]\n\n477\n00:25:38.754 --> 00:25:40.620\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "215996254"
        },
        {
          "description": "In this episode, Don and Mike demonstrate how to prepare the Microsoft Active Directory for a Windows Hello for Business deployment. Mike demonstrates how to extend the AD schema and then creates the necessary users and groups to support the final deployment.",
          "length": "1176",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-1-preparing_the_active_directory-050217.00_22_30_26.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-1-preparing_the_active_directory-050217.00_22_30_26.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-1-preparing_the_active_directory-050217.00_22_30_26.Still001-sm.jpg",
          "title": "Preparing the Active Directory",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:00.952\nWelcome to ITProTV.\n\n2\n00:00:00.952 --> 00:00:06.349\nI'm your host Don Pezet\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:06.349 --> 00:00:08.344\n[MUSIC]\n\n4\n00:00:08.344 --> 00:00:11.371\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.371 --> 00:00:15.834\n&gt;&gt; All right, welcome back everybody,\nto another episode of ITProTV.\n\n6\n00:00:15.834 --> 00:00:17.098\nI'm your host, Don Pezet.\n\n7\n00:00:17.098 --> 00:00:20.573\nBack again, with another episode\nof Windows Hello for Business.\n\n8\n00:00:20.573 --> 00:00:22.551\nAnd, if you've watched our\nfirst couple of episodes,\n\n9\n00:00:22.551 --> 00:00:24.368\nwe've been talking about concepts and\nplanning.\n\n10\n00:00:24.368 --> 00:00:27.660\nBut in this episode, it's action time.\n\n11\n00:00:27.660 --> 00:00:30.020\nWe're gonna jump in and\nstart to get things configured and\n\n12\n00:00:30.020 --> 00:00:32.170\nset up to deploy Windows Hello for\nBusiness.\n\n13\n00:00:32.170 --> 00:00:33.836\nAnd back in the studios again to help me,\n\n14\n00:00:33.836 --> 00:00:35.850\nI've got Mister Mike Stephens\nfrom Microsoft.\n\n15\n00:00:35.850 --> 00:00:37.370\nMike, thanks for joining me.\n\n16\n00:00:37.370 --> 00:00:38.390\n&gt;&gt; Thanks for having me back.\n\n17\n00:00:38.390 --> 00:00:39.300\nIt's been a pleasure.\n\n18\n00:00:39.300 --> 00:00:41.102\nWe're about to have some\nreal fun with this now.\n\n19\n00:00:41.102 --> 00:00:43.085\n&gt;&gt; All right,\nnow if we're about to get our hands dirty,\n\n20\n00:00:43.085 --> 00:00:46.240\nwe're gonna jump in to start to\nconfigure things, where do we start?\n\n21\n00:00:46.240 --> 00:00:51.290\n&gt;&gt; So the best place to start is,\nwe need to prepare the directory.\n\n22\n00:00:51.290 --> 00:00:53.368\nThat's gonna be where a lot\nof the users are gonna be.\n\n23\n00:00:53.368 --> 00:00:56.450\nWe're gonna have our\npublic key stored there.\n\n24\n00:00:56.450 --> 00:01:00.140\nAnd so, we really want to focus\non preparing Active Directory.\n\n25\n00:01:00.140 --> 00:01:01.380\nAnd in this episode,\n\n26\n00:01:01.380 --> 00:01:04.620\nwe're gonna talk about,\nwe're gonna need to do a schema update.\n\n27\n00:01:04.620 --> 00:01:07.614\nWe'll explain why we're gonna do that\nschema update, and what the benefits in.\n\n28\n00:01:07.614 --> 00:01:11.400\nAnd we'll walk through just some\ngood hygiene in updating the schema.\n\n29\n00:01:11.400 --> 00:01:14.513\nIt might be remedial for people who've\nbeen working with Active Directory for\n\n30\n00:01:14.513 --> 00:01:15.228\nquite sometime.\n\n31\n00:01:15.228 --> 00:01:18.276\nBut we wanna make sure that if\nyou're new to Active Directory,\n\n32\n00:01:18.276 --> 00:01:22.520\nthat you update the schema correctly and\nthen the best way to have success there.\n\n33\n00:01:22.520 --> 00:01:27.845\nWe'll then talk about Adprep, which is\nthe tool that comes on the 2016 CD that,\n\n34\n00:01:27.845 --> 00:01:29.950\nor DVD, in this case.\n\n35\n00:01:29.950 --> 00:01:34.440\nSo we'll talk about Adprep, and how to\nrun that, and we'll do some validations.\n\n36\n00:01:34.440 --> 00:01:35.670\nWe'll look at the directory, and\n\n37\n00:01:35.670 --> 00:01:38.260\nstart making sure we understand\nthat it did get upgraded.\n\n38\n00:01:38.260 --> 00:01:41.990\nAnd we'll take a look at what it did\nto the user optics in the directory.\n\n39\n00:01:41.990 --> 00:01:45.010\nSo we'll have a good understanding of,\nI did this,\n\n40\n00:01:45.010 --> 00:01:46.380\nthis is the result I got from it.\n\n41\n00:01:46.380 --> 00:01:47.824\nSo we'll do that.\n\n42\n00:01:47.824 --> 00:01:49.230\nWe're also gonna create some groups here.\n\n43\n00:01:49.230 --> 00:01:53.790\nThese groups are gonna prove to be pivotal\nthroughout the entire deployment model.\n\n44\n00:01:53.790 --> 00:01:57.010\nWe're gonna use these groups, and\nwe'll explain what these groups do.\n\n45\n00:01:57.010 --> 00:02:00.180\nSo we're just gonna do some really,\ngroup maintenance there.\n\n46\n00:02:00.180 --> 00:02:02.540\nNot a big deal, and\nwe'll just show you how to do those.\n\n47\n00:02:02.540 --> 00:02:04.040\n&gt;&gt; And before we jump into\nthe actual configurations,\n\n48\n00:02:04.040 --> 00:02:05.700\nthere are a few assumptions we're making,\nright?\n\n49\n00:02:05.700 --> 00:02:07.352\nWe're assuming people\nhave an Active Directory?\n\n50\n00:02:07.352 --> 00:02:07.853\n&gt;&gt; Yep, yep.\n&gt;&gt; [LAUGH].\n\n51\n00:02:07.853 --> 00:02:08.832\n&gt;&gt; We should hope.\n\n52\n00:02:08.832 --> 00:02:09.443\n&gt;&gt; We are.\n&gt;&gt; And\n\n53\n00:02:09.443 --> 00:02:12.441\nwe're assuming they have at least\none Windows Server 2016 domain\n\n54\n00:02:12.441 --> 00:02:14.270\ncontroller, correct?\n\n55\n00:02:14.270 --> 00:02:17.080\n&gt;&gt; No, actually, we're not,\nwe assume that they have the media.\n\n56\n00:02:17.080 --> 00:02:18.085\n&gt;&gt; [LAUGH]\n&gt;&gt; Okay.\n\n57\n00:02:18.085 --> 00:02:20.807\n&gt;&gt; They will need the media here,\nwe are setting this up.\n\n58\n00:02:20.807 --> 00:02:24.503\nWe're gonna use the on-prem\ndeployment model, and\n\n59\n00:02:24.503 --> 00:02:28.475\nwe're gonna use\nthe certificate trust model.\n\n60\n00:02:28.475 --> 00:02:32.070\nAnd the reason why do that is because,\nas I talked to customers, and\n\n61\n00:02:32.070 --> 00:02:33.908\nwe've talked to customers a lot.\n\n62\n00:02:33.908 --> 00:02:37.484\nThe basic thing is,\nthe domain controller is really the last\n\n63\n00:02:37.484 --> 00:02:41.490\nrole in the enterprise that ever\nreally gets promoted or upgraded.\n\n64\n00:02:41.490 --> 00:02:45.860\nDomain controllers lag anywhere\nfrom 18 to maybe even 36 months\n\n65\n00:02:45.860 --> 00:02:49.410\nbehind a server release,\nbecause they're very pivotal.\n\n66\n00:02:49.410 --> 00:02:52.750\nI mean, it's great that we actually\nstart now understanding the importance\n\n67\n00:02:52.750 --> 00:02:54.360\nof domain controllers, and what they do.\n\n68\n00:02:54.360 --> 00:02:58.180\nWhich means, we don't need to create them\nas the single point of failure server,\n\n69\n00:02:58.180 --> 00:03:00.530\nwhere we put 400 roles on them.\n\n70\n00:03:00.530 --> 00:03:03.889\nThey're made for authentication and\nActive Directory look-ups, and\n\n71\n00:03:03.889 --> 00:03:05.658\nthere's a lot of products out there.\n\n72\n00:03:05.658 --> 00:03:09.349\nMicrosoft and third-parties that\nare doing tons of LDAP queries and\n\n73\n00:03:09.349 --> 00:03:10.630\nthings of this nature.\n\n74\n00:03:10.630 --> 00:03:13.880\nSo we need to make sure that they're\navailable for their primary purpose which\n\n75\n00:03:13.880 --> 00:03:16.798\nis authentication, and\nbeing able to do those directory look-ups.\n\n76\n00:03:16.798 --> 00:03:22.440\nSo, and today, what I have today is this,\nwe have a 2012 R2 domain controller here.\n\n77\n00:03:22.440 --> 00:03:24.657\nAnd normally, in most environments,\n\n78\n00:03:24.657 --> 00:03:27.630\nthey're gonna have a multiple\ndomain controller.\n\n79\n00:03:27.630 --> 00:03:29.120\nBut for our sake, here in the lab,\n\n80\n00:03:29.120 --> 00:03:31.620\nwe're just gonna have one\ndomain controller here.\n\n81\n00:03:31.620 --> 00:03:33.250\nAnd we're gonna jump right in.\n\n82\n00:03:33.250 --> 00:03:35.765\nSo let's just go look in, so\nI have my display up here.\n\n83\n00:03:35.765 --> 00:03:40.440\nAnd you'll see,\nI have a 2012 R2 domain controller here.\n\n84\n00:03:40.440 --> 00:03:43.903\nAnd the first thing we wanna\ndo is update the schema.\n\n85\n00:03:43.903 --> 00:03:46.720\nNow, why do we need to update the schema?\n\n86\n00:03:46.720 --> 00:03:50.563\nThere are attributes in the schema,\nthis is a 2012 R2 DC.\n\n87\n00:03:50.563 --> 00:03:54.071\nBut I have a domain force\nfunction level of 2008 R2.\n\n88\n00:03:54.071 --> 00:03:59.680\nI deliberately kept it that way, so\nyou guys see that it'll work properly.\n\n89\n00:03:59.680 --> 00:04:02.096\nAnd we just don't have\nthe right attributes here.\n\n90\n00:04:02.096 --> 00:04:06.183\nAs I mentioned in previous episodes,\nwhen we do registration,\n\n91\n00:04:06.183 --> 00:04:09.330\nwe create that RSA, that asymmetric key.\n\n92\n00:04:09.330 --> 00:04:12.270\nPrivate key stays local,\npublic key needs to be registered,\n\n93\n00:04:12.270 --> 00:04:14.660\nbecause we're gonna assign something.\n\n94\n00:04:14.660 --> 00:04:16.910\nWe're gonna take the results of\nthat cryptographic signature and\n\n95\n00:04:16.910 --> 00:04:18.083\nsend it to the domain controller.\n\n96\n00:04:18.083 --> 00:04:19.564\nDomain controller needs to know who I am.\n\n97\n00:04:19.564 --> 00:04:24.034\nAnd it does so by having my public key so\nit can then validate the signature, and\n\n98\n00:04:24.034 --> 00:04:25.680\nknow that it's me, right?\n\n99\n00:04:25.680 --> 00:04:29.756\nSo we need to actually put these\nattributes on the actual Active Directory.\n\n100\n00:04:29.756 --> 00:04:34.622\nSo, the first thing that we wanna\ndo is go back to our old school\n\n101\n00:04:34.622 --> 00:04:36.787\nAD technology or AD rules.\n\n102\n00:04:36.787 --> 00:04:42.650\nAnd find the FSMO rule holders, or the\nFlexible Single Master Operation holders.\n\n103\n00:04:42.650 --> 00:04:44.410\nAnd one of them is the Schema Master, and\n\n104\n00:04:44.410 --> 00:04:47.620\nthere's a variety of ways that\nyou can find the Schema Master.\n\n105\n00:04:47.620 --> 00:04:52.649\nI'm gonna bring up\na PowerShell command here.\n\n106\n00:04:52.649 --> 00:04:56.664\nAnd because I don't wanna misspell\nthings on camera, I'm gonna go up and\n\n107\n00:04:56.664 --> 00:04:58.290\nshow you this command.\n\n108\n00:04:58.290 --> 00:05:00.411\nThis is using Netdom query FSMO,\n\n109\n00:05:00.411 --> 00:05:04.972\nwhich is basically the command that\nwe've known and run for years now.\n\n110\n00:05:04.972 --> 00:05:07.620\nEver since, I think,\nWindows 2000 had this command.\n\n111\n00:05:07.620 --> 00:05:10.413\nWhat we're doing is, we're gonna\npipe the output into a findstr.\n\n112\n00:05:10.413 --> 00:05:11.643\nWhich is very similar to grep,\nfor the Linux folks.\n\n113\n00:05:11.643 --> 00:05:17.740\nAnd the i is case insensitive, and\nwe're gonna look for the schema role.\n\n114\n00:05:17.740 --> 00:05:21.930\nAnd so I'll just run that here, and\nthen basically my output will be, hey,\n\n115\n00:05:21.930 --> 00:05:22.639\nit gives me.\n\n116\n00:05:22.639 --> 00:05:26.477\nHere's the Schema Master, and\nit tells me the domain controller it's on.\n\n117\n00:05:26.477 --> 00:05:28.500\nNow, why is this important?\n\n118\n00:05:29.930 --> 00:05:33.290\nGood hygiene is that,\nif you go back to role holders,\n\n119\n00:05:33.290 --> 00:05:36.740\nthey're responsible for\ncertain specific actions.\n\n120\n00:05:36.740 --> 00:05:40.268\nAnd the Schema Master is responsible for\nalways updating the schema.\n\n121\n00:05:40.268 --> 00:05:44.710\nAnd so, what you want to do is you wanna\nidentify the domain controller that's\n\n122\n00:05:44.710 --> 00:05:46.870\nrunning the Schema Master.\n\n123\n00:05:46.870 --> 00:05:50.950\nAnd you wanna run the operation\ndirectly on that server.\n\n124\n00:05:50.950 --> 00:05:53.846\nYou don't wanna avoid this excess\n\n125\n00:05:53.846 --> 00:05:58.860\nof unnecessary traffic,\nto running it from a work station or\n\n126\n00:05:58.860 --> 00:06:02.280\nanother domain controller, to reach\nout and talk to that Schema Master.\n\n127\n00:06:02.280 --> 00:06:05.780\nSo we wanna take,\nwhen we wanna upgrade the schema,\n\n128\n00:06:05.780 --> 00:06:07.950\nwe wanna do it directly\non the Schema Master.\n\n129\n00:06:07.950 --> 00:06:12.120\nSo everything is local, and the schema\ngets committed good and just fine.\n\n130\n00:06:13.660 --> 00:06:16.501\nSo now that we know, and\nbecause I only have only one DC,\n\n131\n00:06:16.501 --> 00:06:18.020\nthis is the DC that we're on.\n\n132\n00:06:18.020 --> 00:06:22.450\nSo now, what we can do is now we can\nactually go ahead and prepare the schema.\n\n133\n00:06:22.450 --> 00:06:23.610\nWe're gonna upgrade this.\n\n134\n00:06:23.610 --> 00:06:27.313\nSo, get your media out, 2016 media.\n\n135\n00:06:27.313 --> 00:06:32.540\nAnd there'll be a folder\nin the media called Adprep.\n\n136\n00:06:32.540 --> 00:06:36.380\nAnd this is where we actually are going\nto upgrade the schema itself.\n\n137\n00:06:36.380 --> 00:06:39.880\nSo when you put in the media there\nyou can copy, as I have here.\n\n138\n00:06:39.880 --> 00:06:42.050\nI've actually copied\nthe Adprep folder out,\n\n139\n00:06:42.050 --> 00:06:44.110\nbecause it's a little bit\nmore convenient here.\n\n140\n00:06:44.110 --> 00:06:49.180\nAnd as you can see here, if we do a DR in\nhere, we can see all kinds of LDF files.\n\n141\n00:06:49.180 --> 00:06:51.720\nThere are LDF files,\nthere's schema I and I.\n\n142\n00:06:51.720 --> 00:06:54.850\nAnd oops, not scrolling there.\n\n143\n00:06:54.850 --> 00:06:59.486\nAnd so, basically, there is a command in\nhere called Adprep that we're gonna run.\n\n144\n00:06:59.486 --> 00:07:02.595\n&gt;&gt; Now, Mike, before you run Adprep, are\nthere any special permissions that a user\n\n145\n00:07:02.595 --> 00:07:04.580\nneeds to have before they use the command?\n\n146\n00:07:04.580 --> 00:07:06.390\n&gt;&gt; Yeah, absolutely, when you run Adprep,\n\n147\n00:07:06.390 --> 00:07:09.021\nyou need to be a member of\nthe Schema Administrator's group.\n\n148\n00:07:09.021 --> 00:07:12.550\nOtherwise, it's gonna start blowing\nall kinds of nasty errors at you.\n\n149\n00:07:12.550 --> 00:07:17.604\nSo we wanna make sure that, ideally,\nyou log in with your normal credentials.\n\n150\n00:07:17.604 --> 00:07:22.038\nElevate that PowerShell command prompt,\njust to use that particular credential for\n\n151\n00:07:22.038 --> 00:07:22.971\nthat operation.\n\n152\n00:07:22.971 --> 00:07:24.875\nWe really should avoid, any time,\n\n153\n00:07:24.875 --> 00:07:29.390\nlogging into the desktop with those full\ncredentials in a production environment.\n\n154\n00:07:29.390 --> 00:07:31.460\nIn the labs, make it easy for yourself.\n\n155\n00:07:31.460 --> 00:07:34.555\nYou're there to learn, not necessarily\nto follow it to a letter there.\n\n156\n00:07:34.555 --> 00:07:35.146\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n157\n00:07:35.146 --> 00:07:38.386\nwe wanna make sure that you are in\nthe Schema Admin's group, and\n\n158\n00:07:38.386 --> 00:07:39.410\nin this case, I am.\n\n159\n00:07:39.410 --> 00:07:41.922\nI'm administrator on\nthis domain controller.\n\n160\n00:07:41.922 --> 00:07:47.074\nAnd so, what we wanna do is, I'm using\nan administrative PowerShell Cmdlet.\n\n161\n00:07:47.074 --> 00:07:53.110\nAnd what we wanna do is run the adprep\ncommand, with the switch for forestprep.\n\n162\n00:07:53.110 --> 00:07:55.760\nThis is always how we've upgraded\nthe schema as we go through,\n\n163\n00:07:55.760 --> 00:07:58.530\nwhen you're not installing\na domain controller.\n\n164\n00:07:58.530 --> 00:08:02.099\nIf you did have a 2016 domain\ncontroller in this environment,\n\n165\n00:08:02.099 --> 00:08:06.063\nyou would skip this step, because you\nalready have your schema updated.\n\n166\n00:08:06.063 --> 00:08:07.297\nSo this is just if,\n\n167\n00:08:07.297 --> 00:08:12.595\nin our case, where we don't wanna\ninstall 2016 domain controller.\n\n168\n00:08:12.595 --> 00:08:14.770\nWe're going to use\nthe certificate trust model,\n\n169\n00:08:14.770 --> 00:08:17.786\nwhich allows me to use my down-level\nexisting domain controllers.\n\n170\n00:08:17.786 --> 00:08:18.919\nIn this particular case,\n\n171\n00:08:18.919 --> 00:08:22.068\nI'm gonna upgrade the schema to get\nthose important attributes there.\n\n172\n00:08:22.068 --> 00:08:26.742\nSo we start with Adprep, and\nI'm just gonna Tab-complete there,\n\n173\n00:08:26.742 --> 00:08:28.890\ntill I get the Adprep command.\n\n174\n00:08:28.890 --> 00:08:33.196\nAnd then, we're going to do a /forestprep.\n\n175\n00:08:33.196 --> 00:08:36.700\nAnd it's gonna prompt us here,\nin all good spirits.\n\n176\n00:08:36.700 --> 00:08:40.522\nAnd says, hey,\nyou're about to run Adprep, and\n\n177\n00:08:40.522 --> 00:08:44.352\nwe wanna make sure you want\nto upgrade the schema.\n\n178\n00:08:44.352 --> 00:08:47.330\nAnd so we do, and so\nit's gonna ask you to type in a letter c.\n\n179\n00:08:47.330 --> 00:08:51.440\nAnd we'll type in the letter c, and we'll\nhit Enter, and now it's off and running.\n\n180\n00:08:51.440 --> 00:08:54.595\nAnd this is the reason why\nyou want it to be very local.\n\n181\n00:08:54.595 --> 00:08:58.926\nBecause this thing's applying schema\nupdates to the local directory, rather\n\n182\n00:08:58.926 --> 00:09:03.910\nthan needing to go ask Active Directory,\nhey, where's your Schema Admin server?\n\n183\n00:09:03.910 --> 00:09:08.300\nAnd then, remotely trying to do\nthe schema updates towards that server.\n\n184\n00:09:08.300 --> 00:09:10.322\nDon't need to have that\nunneccessary traffic,\n\n185\n00:09:10.322 --> 00:09:12.340\nI mean, you don't wanna have this.\n\n186\n00:09:12.340 --> 00:09:14.446\nThis is a very critical operation,\n\n187\n00:09:14.446 --> 00:09:17.753\nyou wanna give it as much\nchance of success as possible.\n\n188\n00:09:17.753 --> 00:09:20.399\nThe other thing to do here,\nis before doing this,\n\n189\n00:09:20.399 --> 00:09:22.410\nmake sure you have taken backups.\n\n190\n00:09:22.410 --> 00:09:23.670\nAnd make sure your backups work,\n\n191\n00:09:23.670 --> 00:09:25.347\nthat's one of the ones people don't ever-\n&gt;&gt; [LAUGH]\n\n192\n00:09:25.347 --> 00:09:26.920\n&gt;&gt; Make sure the backups work,\n\n193\n00:09:26.920 --> 00:09:28.960\nbecause it is a critical operation.\n\n194\n00:09:28.960 --> 00:09:32.452\nIf it fails, you'll need to roll back,\nand you need to be able to do it.\n\n195\n00:09:32.452 --> 00:09:34.415\nI've been doing schema updates for\nquite a while.\n\n196\n00:09:34.415 --> 00:09:37.789\nYou need to be cautious, but\nthey're pretty much benign in\n\n197\n00:09:37.789 --> 00:09:41.090\nmy experience of doing them,\nfor about 17 years here.\n\n198\n00:09:41.090 --> 00:09:46.860\nSo as you can see, we now have,\nour schema update is now completed.\n\n199\n00:09:46.860 --> 00:09:50.010\nAnd we now have,\nAdprep is completion, and that's it.\n\n200\n00:09:50.010 --> 00:09:51.781\nThat's our schema update there.\n\n201\n00:09:51.781 --> 00:09:56.201\nAnd it's very painless, and the way\nthat we can tell if our schema updated,\n\n202\n00:09:56.201 --> 00:09:57.390\nthere's two ways.\n\n203\n00:09:57.390 --> 00:10:00.990\nThe first thing we could do is we can\nactually go look at the schema version.\n\n204\n00:10:00.990 --> 00:10:03.650\nThere's plenty of content online\nthat documents what schema\n\n205\n00:10:03.650 --> 00:10:05.590\nversion belongs to which one.\n\n206\n00:10:05.590 --> 00:10:10.670\nI'm gonna use ADSI Edits, the easiest one,\nto go look at the schema.\n\n207\n00:10:10.670 --> 00:10:15.194\nAnd in there, I'm just gonna use,\nstart ADSI Edit.\n\n208\n00:10:15.194 --> 00:10:20.058\nADSIEdit.mse, prefix that start, and\nit's just gonna pop up a window for\n\n209\n00:10:20.058 --> 00:10:22.270\nme like this right here.\n\n210\n00:10:22.270 --> 00:10:24.195\nOkay, so just start at ADSI Edit.\n\n211\n00:10:24.195 --> 00:10:28.847\nAnd then what we're going to do is go to\nthe properties of this container here,\n\n212\n00:10:28.847 --> 00:10:31.380\nwhich is the schema container.\n\n213\n00:10:31.380 --> 00:10:36.000\nAnd we're gonna scroll down to where\nwe look for the object version.\n\n214\n00:10:36.000 --> 00:10:39.308\nAnd you can normally shortcut\nthis by just, whoops.\n\n215\n00:10:39.308 --> 00:10:41.410\nLet me try it one more time here.\n\n216\n00:10:41.410 --> 00:10:43.497\nWhat happened to us?\n\n217\n00:10:43.497 --> 00:10:48.910\nSo, Properties.\n\n218\n00:10:48.910 --> 00:10:52.910\nAnd then, as you can see,\nthere is our object version.\n\n219\n00:10:52.910 --> 00:10:55.370\nLet me try to zoom in on it,\nusing a nice zoom.\n\n220\n00:10:55.370 --> 00:10:59.150\nAnd then you can see,\nwe have an object version of 87.\n\n221\n00:10:59.150 --> 00:11:02.300\nLike I said, there are many places\non the internet, Microsoft has it,\n\n222\n00:11:02.300 --> 00:11:04.090\nwhere we document the schema versions on.\n\n223\n00:11:04.090 --> 00:11:08.333\nThis so happens, is that the schema\nversion for the 2016 schema.\n\n224\n00:11:08.333 --> 00:11:11.730\nSo, that's good, so\nwe've updated the schema.\n\n225\n00:11:11.730 --> 00:11:13.655\nSo, how's another way we can tell?\n\n226\n00:11:13.655 --> 00:11:16.559\nSo I can close out ADSI Edit here, and\n\n227\n00:11:16.559 --> 00:11:21.000\nthen I can basically go ahead and\nlook at a user object.\n\n228\n00:11:21.000 --> 00:11:25.880\nAnd for that, I'm gonna use a shortcut for\nthe Active Directory users and computers,\n\n229\n00:11:25.880 --> 00:11:28.090\nwhich is DSA.msc.\n\n230\n00:11:28.090 --> 00:11:30.380\nThat brings that up fairly quickly there.\n\n231\n00:11:30.380 --> 00:11:34.180\nAnd I have already some\nusers created in here.\n\n232\n00:11:34.180 --> 00:11:37.890\nAnd in these users here I have,\nwhere's human resources?\n\n233\n00:11:37.890 --> 00:11:39.992\nSo we have a user right here.\n\n234\n00:11:39.992 --> 00:11:47.130\nAnd then we can go to the actual,\nlet me change the view here.\n\n235\n00:11:47.130 --> 00:11:50.210\nWe'll go to Advanced View\n&gt; Advanced Features here.\n\n236\n00:11:50.210 --> 00:11:52.325\nAnd then you see it shows\nus a whole lot more.\n\n237\n00:11:52.325 --> 00:11:53.825\nLet's go back to that HR user.\n\n238\n00:11:53.825 --> 00:11:57.530\nAnd then I'll double-click there.\n\n239\n00:11:57.530 --> 00:12:00.680\nAnd then what we have is, you can see,\nwe have many, many more options here.\n\n240\n00:12:00.680 --> 00:12:04.520\nAnd in this attribute editor,\nI'm going to scroll down.\n\n241\n00:12:04.520 --> 00:12:06.733\nAnd a lot of times you can shortcut these,\njust to let everybody know.\n\n242\n00:12:06.733 --> 00:12:09.280\nYou can just hit wherever\nyou're trying to go.\n\n243\n00:12:09.280 --> 00:12:16.190\nAnd we're going to look for this MSDS, and\nthen it's going to be this guy right here.\n\n244\n00:12:16.190 --> 00:12:19.270\nTry to do a zoom here.\n\n245\n00:12:19.270 --> 00:12:23.870\nMSDS key credentialing,\nthis is part of the 2016 schema.\n\n246\n00:12:23.870 --> 00:12:28.320\nAnd in this schema here,\nthis is where, during registration,\n\n247\n00:12:28.320 --> 00:12:30.390\na public key is going to be stored.\n\n248\n00:12:30.390 --> 00:12:35.601\nAnd you can have multiple public keys, we\nare not a single device universe anymore.\n\n249\n00:12:35.601 --> 00:12:40.640\nWe have phones, we have multiple\ncomputers, tablets, these things.\n\n250\n00:12:40.640 --> 00:12:42.632\nIf they're registering for\nWindows Hello for\n\n251\n00:12:42.632 --> 00:12:46.350\nBusiness, then we're gonna have multiple\nkeys in here, and that's totally fine.\n\n252\n00:12:46.350 --> 00:12:49.470\nBut this is why we needed to\nactually extend the schema here.\n\n253\n00:12:49.470 --> 00:12:52.850\nSo we could actually provide some\nspace in Active Directory, for\n\n254\n00:12:52.850 --> 00:12:54.702\nus to store these actual user keys.\n\n255\n00:12:56.570 --> 00:12:59.107\nAnd so, now, with that,\nthis is a good segue into,\n\n256\n00:12:59.107 --> 00:13:00.801\nwe're gonna create some groups.\n\n257\n00:13:00.801 --> 00:13:03.535\nAnd I'm just gonna create\nthese groups right out here,\n\n258\n00:13:03.535 --> 00:13:05.540\ninto the Users section here.\n\n259\n00:13:05.540 --> 00:13:08.330\nAnd these, nothing major here,\n\n260\n00:13:08.330 --> 00:13:10.600\nother than just to tell you\nwhat these groups are for.\n\n261\n00:13:10.600 --> 00:13:13.009\nThe first group we're gonna do is,\n\n262\n00:13:13.009 --> 00:13:17.274\nwe're gonna call this group\nthe Key Credential Admins group.\n\n263\n00:13:17.274 --> 00:13:24.020\nAnd so this is Key Credential,\nAdmins group.\n\n264\n00:13:25.050 --> 00:13:27.477\n&gt;&gt; And on the name on this,\nis it a fixed name that it has to be,\n\n265\n00:13:27.477 --> 00:13:28.978\nor can you really make it anything?\n\n266\n00:13:28.978 --> 00:13:30.390\n&gt;&gt; You can name it whatever you want.\n\n267\n00:13:30.390 --> 00:13:36.872\nThe one thing I will say not to name it\nis, is don't call it Key Admins group.\n\n268\n00:13:36.872 --> 00:13:42.298\nIs because, if you have a 2016\ndomain controller, when it creates,\n\n269\n00:13:42.298 --> 00:13:46.584\nwhen you build the domain with it,\nit actually has a name,\n\n270\n00:13:46.584 --> 00:13:50.276\nalready, called\nthe Key Administrators group.\n\n271\n00:13:50.276 --> 00:13:51.806\nSo we want to call this,\n\n272\n00:13:51.806 --> 00:13:57.220\nactually, I think what we wanna do is\ncall this Credential Key Admins group.\n\n273\n00:13:57.220 --> 00:14:00.161\nSo I'll back that up, but\nthis is any name you want.\n\n274\n00:14:00.161 --> 00:14:01.641\n&gt;&gt; That you can remember.\n\n275\n00:14:01.641 --> 00:14:03.270\n[LAUGH]\n&gt;&gt; Yeah, that you can remember,\n\n276\n00:14:03.270 --> 00:14:04.126\ncuz I'm struggling here.\n\n277\n00:14:04.126 --> 00:14:08.380\nIt's actually\nthe Key Credential Admins group.\n\n278\n00:14:08.380 --> 00:14:11.596\nAnd just leave the settings here,\nto global group with the securities.\n\n279\n00:14:11.596 --> 00:14:16.110\nAnd then, you can hit Enter or\nOK on that one, and we'll be fine there.\n\n280\n00:14:16.110 --> 00:14:18.320\nAnd then the next one,\nwhich is very important.\n\n281\n00:14:18.320 --> 00:14:21.480\nAnd I'll create these, and\nthen we'll explain their uses here.\n\n282\n00:14:21.480 --> 00:14:25.640\nAnd that'll pretty much wrap up\nprepping the AD portion of this.\n\n283\n00:14:25.640 --> 00:14:31.861\nThis next one is the Windows Hello for\nBusiness Users group.\n\n284\n00:14:31.861 --> 00:14:35.347\nAnd I try to make group names very\nexplicit, because you never know\n\n285\n00:14:35.347 --> 00:14:39.659\nwho's gonna come along behind you and need\nto administer what you did in the past.\n\n286\n00:14:39.659 --> 00:14:42.800\nSo the more you can context,\nyou can give them, the better it is.\n\n287\n00:14:42.800 --> 00:14:45.585\nAnd in this group,\nwhat is critical about these two groups?\n\n288\n00:14:45.585 --> 00:14:49.330\nWell first of all, let's look at\nthe Key Credential Admins group.\n\n289\n00:14:50.330 --> 00:14:51.670\nThe Key Credential Admins group,\n\n290\n00:14:52.770 --> 00:14:57.260\nthat attribute that I showed you on the\nuser object, that attribute is protected.\n\n291\n00:14:57.260 --> 00:15:01.860\nNobody can write to that attribute, except\na very high level of elevated privilege.\n\n292\n00:15:01.860 --> 00:15:07.809\nWe need to have a way to, where, when the\nrest of the infrastructure gets set up,\n\n293\n00:15:07.809 --> 00:15:12.639\nADFS needs to be able to write to\nthis group and read to this group.\n\n294\n00:15:12.639 --> 00:15:15.900\nAnd we'll get to those whys,\nbecause these are very important concepts.\n\n295\n00:15:15.900 --> 00:15:20.098\nFirst of all, we said in the previous\nepisodes that ADFS is going to handle our\n\n296\n00:15:20.098 --> 00:15:22.757\ndevice registration and\nour key registration.\n\n297\n00:15:22.757 --> 00:15:27.350\nKey registration is, really,\nme giving ADFS my public key.\n\n298\n00:15:27.350 --> 00:15:30.810\nAnd then ADFS taking the public key,\nand writing it into Active Directory.\n\n299\n00:15:30.810 --> 00:15:34.980\nSo it's very important that ADFS needs\npermission to this attribute, so\n\n300\n00:15:34.980 --> 00:15:35.860\nthat's one reason.\n\n301\n00:15:35.860 --> 00:15:37.991\nAnd we wanna gate that\nwith using this group,\n\n302\n00:15:37.991 --> 00:15:40.770\nbecause there might some\nother things that are needed.\n\n303\n00:15:40.770 --> 00:15:43.390\nEspecially, when we start\ntalking high availability.\n\n304\n00:15:43.390 --> 00:15:45.142\nAnd depending on your environment,\n\n305\n00:15:45.142 --> 00:15:47.920\nyou may need to have multiple\nservice accounts with ADFS.\n\n306\n00:15:47.920 --> 00:15:50.720\nAnd anything else, that may need\nto be able to write to this group.\n\n307\n00:15:50.720 --> 00:15:52.976\nIf you're using in the hybrid environment,\nfor example,\n\n308\n00:15:52.976 --> 00:15:55.421\nyou might have AD Connected also\nthat needs to write the script.\n\n309\n00:15:55.421 --> 00:15:56.989\nSo we just wanna give it a group.\n\n310\n00:15:56.989 --> 00:16:01.308\nAnd then that way, we can make sure that\nthat security is gated to the membership\n\n311\n00:16:01.308 --> 00:16:05.300\nof that group and not just to everybody,\nor to a single user.\n\n312\n00:16:05.300 --> 00:16:08.518\nThe next important one is the Windows\nHello for Business Users Group.\n\n313\n00:16:08.518 --> 00:16:13.060\nThat one is very critical, because in\nthe design that I'm gonna show you guys.\n\n314\n00:16:13.060 --> 00:16:17.523\nWe are using that group as kind of like\nthe focal point of making sure that when\n\n315\n00:16:17.523 --> 00:16:22.125\nyou need to migrate a user from doing\na weak credential to a strong credential,\n\n316\n00:16:22.125 --> 00:16:25.985\nin Windows Hello for Business,\nthat you just add them to a group.\n\n317\n00:16:25.985 --> 00:16:27.990\nAnd that's the easiest way to do it.\n\n318\n00:16:27.990 --> 00:16:31.986\nWhen you do proper planning,\nyou make it very simple to manage.\n\n319\n00:16:31.986 --> 00:16:35.930\nThe way I kind of look at it, and there's\nsome colleagues that share this with me,\n\n320\n00:16:35.930 --> 00:16:38.120\nand others have different opinions.\n\n321\n00:16:38.120 --> 00:16:41.740\nAnd that's the great thing about IT,\nis we can learn from a bunch of people.\n\n322\n00:16:41.740 --> 00:16:45.030\nIs, I like to spend the most\nwork in the deployment and\n\n323\n00:16:45.030 --> 00:16:47.360\nthe setup,\nbecause it's only gonna happen once.\n\n324\n00:16:47.360 --> 00:16:49.536\nSo I'm not gonna be setting\nthis up a bunch of times.\n\n325\n00:16:49.536 --> 00:16:53.528\nAnd I wanna make it, the reoccurring\nmaintenance of the deployment,\n\n326\n00:16:53.528 --> 00:16:58.020\nthe simplest and easiest for me,\nor whoever takes over after me.\n\n327\n00:16:58.020 --> 00:17:02.030\nIn the Windows Hello for Business Users\ngroup, that is where you're either gonna\n\n328\n00:17:02.030 --> 00:17:05.510\nadd users directly, or you can add\nother groups as you phase deployment.\n\n329\n00:17:05.510 --> 00:17:08.880\nSay, I'll do a Windows Hello for\nBusiness Accounting group, and\n\n330\n00:17:08.880 --> 00:17:10.270\nI'll put all the Accounting\npeople in there.\n\n331\n00:17:10.270 --> 00:17:13.064\nAnd then I'll take the Accounting group,\nand put it in the Windows Hello for\n\n332\n00:17:13.064 --> 00:17:13.945\nBusiness Users group.\n\n333\n00:17:13.945 --> 00:17:18.570\nSo that way, I have a phased approach,\nI can roll this out systematically and\n\n334\n00:17:18.570 --> 00:17:22.570\nsequentially in a sequence that I know and\nfeel comfortable with.\n\n335\n00:17:23.800 --> 00:17:26.899\nIn the next episodes, you're gonna\nsee that this group is going to be,\n\n336\n00:17:26.899 --> 00:17:29.441\nwe're gonna use it for\ngroup membership for deployment.\n\n337\n00:17:29.441 --> 00:17:32.320\nWe're also gonna be using it for\npermissions.\n\n338\n00:17:32.320 --> 00:17:35.610\nAnd this is how the group\npolicies that we're gonna create,\n\n339\n00:17:35.610 --> 00:17:39.817\nthese group policies are going to actually\nbe tied to this particular group.\n\n340\n00:17:39.817 --> 00:17:42.422\nThe other thing is the certificate\ntemplates, enrollment.\n\n341\n00:17:42.422 --> 00:17:46.268\nWe're gonna make sure only people who\nwere set to provision Windows Hello for\n\n342\n00:17:46.268 --> 00:17:49.406\nBusiness have this permission\non the certificate templates,\n\n343\n00:17:49.406 --> 00:17:51.470\nwhich we'll get into soon.\n\n344\n00:17:51.470 --> 00:17:52.450\nThat's another key aspect of this.\n\n345\n00:17:52.450 --> 00:17:55.449\nThe next thing is\ndirectory synchronization.\n\n346\n00:17:55.449 --> 00:17:59.189\nWhen we get into the ADFS, or\nexcuse me, the MFA portion of this,\n\n347\n00:17:59.189 --> 00:18:02.590\nthere's a directory synchronization\nobject where the MFA\n\n348\n00:18:02.590 --> 00:18:05.690\nserver needs to know\nabout these credentials.\n\n349\n00:18:05.690 --> 00:18:09.657\nAnd while the synchronization happens\non-prem, if I don't synchronize that\n\n350\n00:18:09.657 --> 00:18:13.160\nActive Directory user into the MFA server,\nthen it doesn't know me.\n\n351\n00:18:13.160 --> 00:18:17.790\nIt doesn't know my phone number, it can't\ncall me, it can't do any of these things.\n\n352\n00:18:17.790 --> 00:18:20.825\nSo we're gonna piggyback all\nof these into this group.\n\n353\n00:18:20.825 --> 00:18:23.880\nSo where it makes it that,\nwhen we add a user to this group,\n\n354\n00:18:23.880 --> 00:18:27.630\nthey have all the proper permissions\nacross the distributed system.\n\n355\n00:18:27.630 --> 00:18:29.550\nAnd then it should just work for them.\n\n356\n00:18:29.550 --> 00:18:32.420\nSo that's kind of where we're at\nwith preparing the Active Directory.\n\n357\n00:18:32.420 --> 00:18:36.180\nWe've got the schema extended,\nwe've show you how to do that properly and\n\n358\n00:18:36.180 --> 00:18:37.520\ngood hygiene there.\n\n359\n00:18:37.520 --> 00:18:40.640\nWe've looked at the actual,\ntwo groups that are gonna be very pivotal.\n\n360\n00:18:40.640 --> 00:18:44.196\nAnd we're gonna use those\nin following episodes.\n\n361\n00:18:44.196 --> 00:18:46.499\n&gt;&gt; All right, well, at this point\nit looks like our AD is done, so\n\n362\n00:18:46.499 --> 00:18:48.030\nthat leads us to deploying the rest of it.\n\n363\n00:18:48.030 --> 00:18:50.178\nBut, unfortunately, we don't have\nenough time here in this episode.\n\n364\n00:18:50.178 --> 00:18:51.411\nNor in the next eight episodes,\n\n365\n00:18:51.411 --> 00:18:53.520\ncuz it is quite a process of\ngetting everything set up.\n\n366\n00:18:53.520 --> 00:18:57.330\nSo that's all gonna be coming\nup in the upcoming episodes.\n\n367\n00:18:57.330 --> 00:18:58.910\nBut for right now,\nI think we're gonna wrap up.\n\n368\n00:18:58.910 --> 00:19:01.431\nDo you have anything else you\nwanted to mention before we close?\n\n369\n00:19:01.431 --> 00:19:04.690\n&gt;&gt; No, next episode,\nwe're gonna be getting into the PKI stuff.\n\n370\n00:19:04.690 --> 00:19:07.355\nSo we're gonna make that very\nuser-friendly, and easy for\n\n371\n00:19:07.355 --> 00:19:08.406\npeople to understand.\n\n372\n00:19:08.406 --> 00:19:11.137\n&gt;&gt; Yeah, hearing user-friendly and\nPKI in the same sentence,\n\n373\n00:19:11.137 --> 00:19:12.930\nnot something you hear everyday.\n\n374\n00:19:12.930 --> 00:19:14.484\nBut stay tuned for that,\nwe'll be covering it next.\n\n375\n00:19:14.484 --> 00:19:17.010\nBut for right now,\nthis is a good spot for us to wrap up.\n\n376\n00:19:17.010 --> 00:19:20.520\nSo signing off for ITProTV,\nI'm your host, Don Pezet.\n\n377\n00:19:20.520 --> 00:19:21.526\n&gt;&gt; And I'm Mike Stephens.\n\n378\n00:19:21.526 --> 00:19:22.657\n&gt;&gt; And we will see you next time.\n\n379\n00:19:22.657 --> 00:19:29.748\n[MUSIC]\n\n380\n00:19:29.748 --> 00:19:32.632\nThank you for watching ITProTV.\n\n",
          "vimeoId": "216065599"
        },
        {
          "description": "In this episode, Don and Mike discuss configuring a Microsoft public key infrastructure (PKI) to support Windows Hello for Business. They discuss some of the certificates that are required, and then demonstrate configuring certificate templates to provide them.",
          "length": "1059",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-2-preparing_the_pki-050317-PGM.00_17_24_19.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-2-preparing_the_pki-050317-PGM.00_17_24_19.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-2-preparing_the_pki-050317-PGM.00_17_24_19.Still001-sm.jpg",
          "title": "Preparing the PKI",
          "transcript": "WEBVTT\n\n1\n00:00:00.190 --> 00:00:02.924\nWelcome on ITPro.TV,\nI'm your host Don Pezet.\n\n2\n00:00:02.924 --> 00:00:06.274\n[CROSSTALK]\n\n3\n00:00:06.274 --> 00:00:08.430\n[MUSIC]\n\n4\n00:00:08.430 --> 00:00:12.603\n&gt;&gt; You're watching ITPro.TV.\n\n5\n00:00:12.603 --> 00:00:14.206\n&gt;&gt; All right, ladies and gentlemen,\n\n6\n00:00:14.206 --> 00:00:17.760\nwelcome back to another episode of\nITPro.TV I'm your host Don Pezet.\n\n7\n00:00:17.760 --> 00:00:20.555\nBack again in another episode\nof Windows Hello for Business.\n\n8\n00:00:20.555 --> 00:00:24.357\nIn this episode, we're gonna be taking a\nlook at a public key infrastructure which\n\n9\n00:00:24.357 --> 00:00:27.790\nis a critical piece of the Windows Hello\nfor Business solution.\n\n10\n00:00:27.790 --> 00:00:30.153\nHere in the studios to help me is Mr.\nMike Stephens.\n\n11\n00:00:30.153 --> 00:00:31.950\nMike, thanks for joining us.\n\n12\n00:00:31.950 --> 00:00:33.736\n&gt;&gt; Thanks for having me back, it was fun.\n\n13\n00:00:33.736 --> 00:00:35.183\nWe're gonna have a good time talking PKI,\n\n14\n00:00:35.183 --> 00:00:36.919\nI know those don't go\ntogether to well sometimes.\n\n15\n00:00:36.919 --> 00:00:38.893\n&gt;&gt; [LAUGH] Yeah, and\nin this scenario here,\n\n16\n00:00:38.893 --> 00:00:41.110\nwe're talking about user authentication.\n\n17\n00:00:41.110 --> 00:00:45.314\nThe PKI really is a truly critical\npiece one that needs to be configured\n\n18\n00:00:45.314 --> 00:00:48.034\nproperly otherwise it falls apart, right?\n\n19\n00:00:48.034 --> 00:00:51.559\n&gt;&gt; Yeah it's really, really critical for\nus to have some PKI in here.\n\n20\n00:00:51.559 --> 00:00:54.525\nBecause we need to have some\nseparation of trust here,\n\n21\n00:00:54.525 --> 00:00:58.983\nand have that root of trust be something\ndifferent than just the identity itself.\n\n22\n00:00:58.983 --> 00:01:02.018\nSo what we're gonna do today\nis talk about the PKI itself.\n\n23\n00:01:02.018 --> 00:01:06.837\nNow, we're gonna assume that you\nalready have an existing PKI here.\n\n24\n00:01:06.837 --> 00:01:08.501\nSo for those people who don't, Don,\n\n25\n00:01:08.501 --> 00:01:11.790\nI think we have some videos that they\ncan look at and some episodes, right?\n\n26\n00:01:11.790 --> 00:01:12.665\n&gt;&gt; Absolutely, yeah.\n\n27\n00:01:12.665 --> 00:01:15.621\nMost organizations should already\nhave a PKI, because it's not just for\n\n28\n00:01:15.621 --> 00:01:17.155\nWindows Hello for Business, right?\n\n29\n00:01:17.155 --> 00:01:21.376\nIt can be used for a ton of different\nthings, and if you've deployed EFS or\n\n30\n00:01:21.376 --> 00:01:25.958\nany like 802.1x authentication,\nyou likely already have a PKI in place.\n\n31\n00:01:25.958 --> 00:01:29.504\nIf you don't, and you need to learn\nabout that, be sure to check out\n\n32\n00:01:29.504 --> 00:01:33.950\nsome of our other shows like 70-414\nexam shows for the Microsoft MCSE.\n\n33\n00:01:33.950 --> 00:01:37.490\nWe have a great section in there that\nexplains how to design a PKI and\n\n34\n00:01:37.490 --> 00:01:40.150\nthat design is really important.\n\n35\n00:01:40.150 --> 00:01:43.184\nBecause there's a right way and a wrong\nway, and unfortunately the right way is\n\n36\n00:01:43.184 --> 00:01:45.960\ndifferent for different organizations and\nthe way you intend to use it.\n\n37\n00:01:45.960 --> 00:01:49.300\nSo be sure to check out those shows for\nthe why and the design.\n\n38\n00:01:49.300 --> 00:01:53.640\nAnd then the 70-412 show for\nthat exam goes into the how.\n\n39\n00:01:53.640 --> 00:01:57.530\nIt actually shows how to set up this CA\nand get that kind of put in place and\n\n40\n00:01:57.530 --> 00:01:58.595\nissue certificates.\n\n41\n00:01:58.595 --> 00:02:02.105\nSo if you haven't worked with PKIs at all,\ndefinitely jump over and check those out.\n\n42\n00:02:02.105 --> 00:02:05.805\nBut the neat part about a PKI is how\nflexible it is, and how it can be used for\n\n43\n00:02:05.805 --> 00:02:07.496\nnumerous different solutions.\n\n44\n00:02:07.496 --> 00:02:10.970\nSo if you've already got a PKI in place\nyou don't have to roll a new one out.\n\n45\n00:02:10.970 --> 00:02:15.353\nWe can just take the existing PKI and\nget it to work with Windows Hello for\n\n46\n00:02:15.353 --> 00:02:16.608\nBusiness, right?\n\n47\n00:02:16.608 --> 00:02:20.039\n&gt;&gt; Absolutely, like you said,\nthere's numerous uses out there.\n\n48\n00:02:20.039 --> 00:02:22.030\nSkype for Business uses it.\n\n49\n00:02:22.030 --> 00:02:25.295\nNearly everything today is using PKI,\nVPNs use PKI.\n\n50\n00:02:25.295 --> 00:02:29.493\nSo what we're gonna do today is,\nwe're just going to enhance or\n\n51\n00:02:29.493 --> 00:02:33.405\nextend the use of the PKI to\nissue different certificates.\n\n52\n00:02:33.405 --> 00:02:35.496\nAnd the reason why we need\nto do those is because,\n\n53\n00:02:35.496 --> 00:02:37.340\nwell that's what this episode's about.\n\n54\n00:02:37.340 --> 00:02:41.020\nSo the first thing I wanna do is go to\nmy screen, we're gonna jump right in.\n\n55\n00:02:41.020 --> 00:02:42.965\nAnd I'm on a domain controller,\n\n56\n00:02:42.965 --> 00:02:46.518\nand I'm gonna move to my\ncertificate authority right here.\n\n57\n00:02:46.518 --> 00:02:48.400\nYep, you got the CA in the corner here.\n\n58\n00:02:48.400 --> 00:02:52.726\nAnd because we're going to be doing a lot\nof PKI work here, what I wanna do is\n\n59\n00:02:52.726 --> 00:02:56.644\nbasically I'm gonna first start out\nby creating a shortcut here for\n\n60\n00:02:56.644 --> 00:02:59.757\nthis certificate authority\ndown on my task bar here.\n\n61\n00:02:59.757 --> 00:03:03.230\nBecause well I don't\nwanna click that much.\n\n62\n00:03:03.230 --> 00:03:08.730\nOkay, so now that I have the certificate\nsnap in down here in my task bar,\n\n63\n00:03:08.730 --> 00:03:11.230\nlet me go ahead and star that up here.\n\n64\n00:03:11.230 --> 00:03:15.590\nAnd you're gonna see, here's our CA and\nwe have various properties here.\n\n65\n00:03:15.590 --> 00:03:19.070\nAnd so we're gonna do a lot of work in\nhere throughout all the episodes, but\n\n66\n00:03:19.070 --> 00:03:20.620\nin this particular episode.\n\n67\n00:03:20.620 --> 00:03:24.652\nWe're gonna use the certificate template\nmanager, and it's a little thing that's\n\n68\n00:03:24.652 --> 00:03:27.848\nhidden right over here,\nwhere we say Manage, and this guy pops up.\n\n69\n00:03:27.848 --> 00:03:30.607\nAnd so these are all the different\ncertificate templates that you\n\n70\n00:03:30.607 --> 00:03:31.320\ncould use here.\n\n71\n00:03:31.320 --> 00:03:34.020\nAnd so\nwhat we're gonna do is we're actually\n\n72\n00:03:34.020 --> 00:03:36.170\ngonna duplicate a certificate template.\n\n73\n00:03:36.170 --> 00:03:37.573\nWe're gonna create a copy of it, and\n\n74\n00:03:37.573 --> 00:03:39.984\nthen we're gonna change some of\nthose characteristics of it.\n\n75\n00:03:39.984 --> 00:03:42.272\nNow just again,\nanother word of caution here,\n\n76\n00:03:42.272 --> 00:03:44.684\nmake sure that you validate\nall of these changes.\n\n77\n00:03:44.684 --> 00:03:47.963\nAnd if you're in a production environment\nbefore you just go through and\n\n78\n00:03:47.963 --> 00:03:48.780\ndo these things.\n\n79\n00:03:48.780 --> 00:03:52.512\nWe wanna make sure that if you change\na template or if you unpublish one.\n\n80\n00:03:52.512 --> 00:03:53.613\nOr anything like that,\n\n81\n00:03:53.613 --> 00:03:56.710\nwe don't wanna cause any outages\nin the production environment.\n\n82\n00:03:57.850 --> 00:04:02.254\nSo what I'm going to look for\nhere is the Kerberos Authentication.\n\n83\n00:04:02.254 --> 00:04:06.371\nAnd this guy right here, this is the new\ndomain controller certificate that\n\n84\n00:04:06.371 --> 00:04:10.491\ndeprecates the domain controller and\ndomain controller authentication,\n\n85\n00:04:10.491 --> 00:04:11.480\nthe ones up here.\n\n86\n00:04:11.480 --> 00:04:15.490\nSo we're gonna make a copy of this guy\nhere, and we'll do it by duplicating that.\n\n87\n00:04:15.490 --> 00:04:18.786\nNow, as you can see here this is\nthe properties of the template we\n\n88\n00:04:18.786 --> 00:04:21.546\ndon't have any name for\nit yet or anything like that.\n\n89\n00:04:21.546 --> 00:04:24.825\nAnd this what this does is that it\nactually controls the UA setting.\n\n90\n00:04:24.825 --> 00:04:29.737\nSo that if you have a 2003, but an XP,\nor it allows you to manipulate UI\n\n91\n00:04:29.737 --> 00:04:34.814\nsettings in a way were you don't create\na certificate template that asks for\n\n92\n00:04:34.814 --> 00:04:39.620\nfeatures of ACA or a client,\nthat doesn't have those features.\n\n93\n00:04:39.620 --> 00:04:42.500\nSo in this episode,\nwe're gonna do everything here,\n\n94\n00:04:42.500 --> 00:04:46.200\nwe're gonna do with 2012 R2CA,\nthat's the one I'm running.\n\n95\n00:04:46.200 --> 00:04:47.494\nAnd I'm gonna go ahead and select this.\n\n96\n00:04:47.494 --> 00:04:51.058\nAnd now what you see here is a pop up\nthat's saying, hey, I'm gonna tell you\n\n97\n00:04:51.058 --> 00:04:54.750\nthe changes that you made by\nselecting this particular CA version.\n\n98\n00:04:54.750 --> 00:04:55.985\nAnd that's fine, this is great.\n\n99\n00:04:55.985 --> 00:04:59.180\nAnd it's really good to let you know\nwhat things change or don't change.\n\n100\n00:04:59.180 --> 00:05:00.864\nBut for this, we're gonna go ahead and\n\n101\n00:05:00.864 --> 00:05:03.070\nwe don't wanna be prompted\nwith that all the time.\n\n102\n00:05:03.070 --> 00:05:06.290\nSo we're gonna basically\nuncheck this box here,\n\n103\n00:05:06.290 --> 00:05:11.207\nso that we can breeze through these and\nset these to 2012 in Windows A1.\n\n104\n00:05:11.207 --> 00:05:15.396\nSo now we're going to go the General tab,\nand in here you can see that it just gives\n\n105\n00:05:15.396 --> 00:05:18.072\nus a real name like copy\nKerberos Authentication.\n\n106\n00:05:18.072 --> 00:05:20.078\nWe're gonna go ahead and\ngive that a new name.\n\n107\n00:05:20.078 --> 00:05:23.916\nWe're gonna call that domain controller\nauthentication, but we're going\n\n108\n00:05:23.916 --> 00:05:27.740\nto put a little bracket here that says\nKerberos, so we know its different.\n\n109\n00:05:27.740 --> 00:05:34.558\nSo we do command\ncontroller authentication,\n\n110\n00:05:34.558 --> 00:05:37.539\ndid I do a caps lock?\n\n111\n00:05:37.539 --> 00:05:39.520\nAnd we'll just do Kerberos here.\n\n112\n00:05:41.630 --> 00:05:44.413\nAnd in here, you can see where you\nhave your validity period, and\n\n113\n00:05:44.413 --> 00:05:45.381\nyour renewal period.\n\n114\n00:05:45.381 --> 00:05:47.560\nAnd we're gonna leave those the same here.\n\n115\n00:05:47.560 --> 00:05:50.507\nAnd then what we're going to do is\ngo to the subject part of this.\n\n116\n00:05:50.507 --> 00:05:53.180\nThis is this tab up here\ncalled subject name.\n\n117\n00:05:53.180 --> 00:05:56.540\nNow as you can see in here this is\nalready pre-selected for us, and\n\n118\n00:05:56.540 --> 00:05:58.460\nwe're not gonna change any of these.\n\n119\n00:05:58.460 --> 00:06:00.190\nThis is exactly what we want here.\n\n120\n00:06:00.190 --> 00:06:03.590\nSo the things to look for\nhere is to just leave everything is.\n\n121\n00:06:03.590 --> 00:06:05.960\nBut we wanna make sure that\nthe DNS name right here,\n\n122\n00:06:05.960 --> 00:06:07.770\nthis guy right here, is checked.\n\n123\n00:06:07.770 --> 00:06:10.031\nWe wanna make sure\nthe DNS name is checked.\n\n124\n00:06:10.031 --> 00:06:14.635\nThat's critical to make sure the domain\ncontroller has the proper DNS name for\n\n125\n00:06:14.635 --> 00:06:16.179\nwhen it does validation.\n\n126\n00:06:17.360 --> 00:06:21.811\nAnd then the next one we wanna go to\nis the Security tab, which is over,\n\n127\n00:06:21.811 --> 00:06:22.803\nthis guy here.\n\n128\n00:06:22.803 --> 00:06:25.736\nNo, sorry the Cryptography,\nthat's what we want.\n\n129\n00:06:25.736 --> 00:06:30.970\nIn the Cryptography,\nthis is set up very compatible.\n\n130\n00:06:30.970 --> 00:06:35.188\nThis is using a very old version\nof cryptography that Windows used,\n\n131\n00:06:35.188 --> 00:06:38.375\nwhat we call the CryptoAPI,\nor for short cappy 1.\n\n132\n00:06:38.375 --> 00:06:40.709\nWhile this is still really good crypto,\n\n133\n00:06:40.709 --> 00:06:43.835\nit's not the modern crypto\nthat we're using today.\n\n134\n00:06:43.835 --> 00:06:47.704\nAnd so what we wanna do is switch this\ntemplate over to use our more modern\n\n135\n00:06:47.704 --> 00:06:48.616\ncryptography.\n\n136\n00:06:48.616 --> 00:06:51.771\nWhich is perfectly works great\non any of the current operating\n\n137\n00:06:51.771 --> 00:06:54.660\nsystems that are supported\nby Microsoft today.\n\n138\n00:06:54.660 --> 00:06:57.900\nSo how we do that is we're\ngonna go up to this provider.\n\n139\n00:06:57.900 --> 00:07:00.708\nAnd we're gonna select\nKey Storage Provider, and\n\n140\n00:07:00.708 --> 00:07:02.607\nnow you get a change in the screen.\n\n141\n00:07:02.607 --> 00:07:06.982\nAnd what that does is that moves us\nover to what we call the crypto,\n\n142\n00:07:06.982 --> 00:07:09.783\nnext gen or\nyou might see it in MSDN as CNG.\n\n143\n00:07:09.783 --> 00:07:11.640\nThis is the modern cryptography, and\n\n144\n00:07:11.640 --> 00:07:15.534\nthis is the stuff that we're continuing\nto innovate by adding new algorithms.\n\n145\n00:07:15.534 --> 00:07:19.490\nLike elliptic curves and things of that\nnature, so we wanna switch over to this.\n\n146\n00:07:19.490 --> 00:07:21.920\nWe're gonna leave the algorithm\nname just the way it is.\n\n147\n00:07:21.920 --> 00:07:25.958\nWe wanna use an RSA, and the minimum\nkey size is totally fine there.\n\n148\n00:07:25.958 --> 00:07:29.206\nWhat we do wanna do is because\nof the notes of SHA-1,\n\n149\n00:07:29.206 --> 00:07:34.690\nwe wanna bring this guy down to\nSHA-256 just for good crypto hygiene.\n\n150\n00:07:34.690 --> 00:07:38.930\nAnd then after that we're gonna\ngo to this one tab here which is\n\n151\n00:07:38.930 --> 00:07:43.340\nprobably new to a lot of people,\nwhich is the superceded tab.\n\n152\n00:07:43.340 --> 00:07:46.690\nNow what superceded does is a lot\nof times in your environment,\n\n153\n00:07:46.690 --> 00:07:52.480\nyou'll run into a time where it's like\nwell, we had certificate template one.\n\n154\n00:07:52.480 --> 00:07:56.238\nAnd now we need upgraded or\nupdated to where we now need to have\n\n155\n00:07:56.238 --> 00:08:00.008\ncertificate template 2 replace\ncertificate template 1.\n\n156\n00:08:00.008 --> 00:08:03.201\nAnd that's what the superceded\ntab allows us to do.\n\n157\n00:08:03.201 --> 00:08:07.866\nIs what we can do is we can put in\ndifferent template names within\n\n158\n00:08:07.866 --> 00:08:10.427\nthis part of this configuration.\n\n159\n00:08:10.427 --> 00:08:13.035\nAnd then what it will do is is\nthat we have auto enrollment\n\n160\n00:08:13.035 --> 00:08:16.197\npiece that we will get to a little\nlater in this episode that will just\n\n161\n00:08:16.197 --> 00:08:18.990\nmagically switch\nthe certificate templates out.\n\n162\n00:08:18.990 --> 00:08:23.860\nSo it will request a certificate from\nthe new one and replace the old one.\n\n163\n00:08:23.860 --> 00:08:27.800\nSo in here because we wanna make sure\nthat we get the most current and\n\n164\n00:08:27.800 --> 00:08:29.880\nthe most secure certificate template,\n\n165\n00:08:29.880 --> 00:08:33.940\nwe're gonna add those old ones\nthat I showed you, into this list.\n\n166\n00:08:33.940 --> 00:08:37.760\nAnd so this one is gonna start with,\nthe domain controller one.\n\n167\n00:08:37.760 --> 00:08:40.690\nAnd I'd like love this to be multiselect,\nbut unfortunately it's not.\n\n168\n00:08:40.690 --> 00:08:42.670\nSo we're gonna do them one at a time here.\n\n169\n00:08:42.670 --> 00:08:46.280\nSo I'm gonna add the domain controller,\nand then I'm gonna go back down.\n\n170\n00:08:46.280 --> 00:08:52.710\nAnd I'm gonna add the domain controller\nauthentication guy here, right here.\n\n171\n00:08:52.710 --> 00:08:57.938\nAnd then the last one is, we're gonna\nadd the Kerberos Authentication,\n\n172\n00:08:57.938 --> 00:09:00.732\nthe one that we actually took a copy of.\n\n173\n00:09:00.732 --> 00:09:03.524\nAnd the reason why we do that is just,\nas we said,\n\n174\n00:09:03.524 --> 00:09:06.570\nthat one was using some\nof the older crypto.\n\n175\n00:09:06.570 --> 00:09:08.242\nAnd so in using the older crypto,\n\n176\n00:09:08.242 --> 00:09:10.945\nwe wana move everybody up\nto the most current crypto.\n\n177\n00:09:10.945 --> 00:09:12.579\nThat's the stuff that\nis being optimized and\n\n178\n00:09:12.579 --> 00:09:15.410\nthat's the stuff that's being\ninnovated moving forward.\n\n179\n00:09:15.410 --> 00:09:20.380\nSo we have that going there for\nus a and now basically we're done.\n\n180\n00:09:20.380 --> 00:09:27.120\nSo now we have to do, is hit OK, and now\nwe have stuff down here as you can see.\n\n181\n00:09:27.120 --> 00:09:32.362\nWe have our new Domain Controller\nAuthentication Certificate template.\n\n182\n00:09:32.362 --> 00:09:35.186\n&gt;&gt; And any new domain controller that we\nbring in is gonna automatically grab that,\n\n183\n00:09:35.186 --> 00:09:36.444\nso we don't have to worry about it.\n\n184\n00:09:36.444 --> 00:09:38.970\nThe old ones,\nit'll just be when they renew?\n\n185\n00:09:38.970 --> 00:09:40.086\n&gt;&gt; That'll happen later.\n\n186\n00:09:40.086 --> 00:09:43.118\nWhat we're gonna do there is when we\nget near the end of this episode,\n\n187\n00:09:43.118 --> 00:09:44.940\nwe've got one more template to create.\n\n188\n00:09:44.940 --> 00:09:46.779\nAnd after we create that template,\n\n189\n00:09:46.779 --> 00:09:50.042\nwe're gonna do something called\ndeploying auto enrollment.\n\n190\n00:09:50.042 --> 00:09:54.554\nBut you're right, in the old school\ndays back in Windows 2000, 2003 even\n\n191\n00:09:54.554 --> 00:09:59.850\n2012 today, they will automatically look\nfor that domain controller certificate.\n\n192\n00:09:59.850 --> 00:10:04.105\nAnd they just go ahead and grab it, and\nthey try to do that for an ease of use.\n\n193\n00:10:04.105 --> 00:10:08.670\nBack when they did that, when that design\nwas functional, it worked very well.\n\n194\n00:10:08.670 --> 00:10:11.883\nI said but nowadays, it's like we\nreally need to actually upgrade those\n\n195\n00:10:11.883 --> 00:10:13.474\ndomain controller certificates.\n\n196\n00:10:13.474 --> 00:10:17.045\nAnd we can't necessarily do that,\njust flat out change that philosophy or\n\n197\n00:10:17.045 --> 00:10:20.110\nchange that model now,\nwe would break a lot of people.\n\n198\n00:10:20.110 --> 00:10:24.000\nSo what we do is we will deploy auto\nenrollment to our domain controllers.\n\n199\n00:10:24.000 --> 00:10:28.873\nAnd what auto enrollment will do for us is\nthat it'll actually automatically go out,\n\n200\n00:10:28.873 --> 00:10:32.945\nread those superceded settings,\ngo read that certificate template.\n\n201\n00:10:32.945 --> 00:10:35.372\nAnd then it'll switch those out for\nus so that way,\n\n202\n00:10:35.372 --> 00:10:38.200\nwe don't have to worry about\nactually requesting search.\n\n203\n00:10:38.200 --> 00:10:41.056\nDomain controllers will just get\nthe certificates on their own.\n\n204\n00:10:41.056 --> 00:10:42.851\nBut more importantly, the bigger part,\n\n205\n00:10:42.851 --> 00:10:45.210\nis they'll just renew\nthe certificate on their own.\n\n206\n00:10:45.210 --> 00:10:49.300\nWhich is where people usually get a little\nfrightened is that certificate expires and\n\n207\n00:10:49.300 --> 00:10:50.720\nthey didn't know what happened.\n\n208\n00:10:50.720 --> 00:10:53.607\nSo let's go ahead and\nmake our web server one.\n\n209\n00:10:53.607 --> 00:10:55.814\nAnd so we're gonna do a very\nsimilar function here,\n\n210\n00:10:55.814 --> 00:10:58.240\nwhere we're gonna go down\nhere to our web server.\n\n211\n00:10:58.240 --> 00:11:01.152\nAnd we're gonna say\nduplicate template here, and\n\n212\n00:11:01.152 --> 00:11:03.461\nwe're gonna uncheck these boxes here.\n\n213\n00:11:03.461 --> 00:11:07.389\nAnd put everything down to 2012,\nso that way we have it.\n\n214\n00:11:07.389 --> 00:11:11.850\nAnd we'll give it a name and we're just\ngonna call it Internal Web Server.\n\n215\n00:11:13.510 --> 00:11:17.850\nAnd again, you can adjust your validity\nperiods and your renewals as you like.\n\n216\n00:11:19.300 --> 00:11:22.820\nAnd we're gonna go to\nthe Request Handling part.\n\n217\n00:11:22.820 --> 00:11:27.847\nAnd now what the Request Handling does, is\nthat when a CA gets a certificate request.\n\n218\n00:11:27.847 --> 00:11:34.599\nThis is telling the certificate authority,\nbased on asking for this template.\n\n219\n00:11:34.599 --> 00:11:37.300\nHow do you want me to handle\nthe certificate request here?\n\n220\n00:11:37.300 --> 00:11:39.890\nAnd you have things like signature\nencryption and purpose and\n\n221\n00:11:39.890 --> 00:11:41.330\nthings of this nature.\n\n222\n00:11:41.330 --> 00:11:46.128\nOne of the things that you do is with\nTLS search is it's very common for\n\n223\n00:11:46.128 --> 00:11:48.047\nTLS search to be imported.\n\n224\n00:11:48.047 --> 00:11:50.289\nSo you'll get them as a PFX and\n\n225\n00:11:50.289 --> 00:11:55.962\nthen that way you can import it because\nthey typically use a wildcard cert.\n\n226\n00:11:55.962 --> 00:11:58.398\nWe'll get into that maybe\na little bit later, but\n\n227\n00:11:58.398 --> 00:12:01.949\nbasically it's a cert that work on\nall your domains for a specific name.\n\n228\n00:12:01.949 --> 00:12:05.579\nAnd what we'll do there is though\ngive those search in a PFX which is,\n\n229\n00:12:05.579 --> 00:12:09.270\nportable file format protected with\na password, so you can import.\n\n230\n00:12:09.270 --> 00:12:12.784\nSo you can carry it around or\ncopy it to all of your web servers.\n\n231\n00:12:12.784 --> 00:12:15.730\nAnd then they'll just magically,\nyou can import it and\n\n232\n00:12:15.730 --> 00:12:17.554\nthey have the certificate there.\n\n233\n00:12:17.554 --> 00:12:22.238\nTo do that though, you need to make sure\nyou have this little box here checked.\n\n234\n00:12:22.238 --> 00:12:27.643\nAnd this is this renew, sorry,\nAllow private key to be exported.\n\n235\n00:12:27.643 --> 00:12:32.415\nThere are tags on these certificates with\nmetadata that say whether the private key\n\n236\n00:12:32.415 --> 00:12:34.780\nis exportable or not exportable.\n\n237\n00:12:34.780 --> 00:12:39.050\nAnd for this, in order to make a portable\ncertificate file or a PFX file,\n\n238\n00:12:39.050 --> 00:12:42.150\nyou need to make sure\nthat this box is checked.\n\n239\n00:12:42.150 --> 00:12:45.780\nTo ensure that you can create a PFX\nfile after you request that certificate.\n\n240\n00:12:47.080 --> 00:12:52.892\nSo what we'll do after that is that\nwe're going to do the reply and request.\n\n241\n00:12:52.892 --> 00:12:58.070\nSo in the subject here,\nyou can see it's already populated for us.\n\n242\n00:12:58.070 --> 00:13:01.090\nSo again, we're just validating all\nof these settings are correct and\n\n243\n00:13:01.090 --> 00:13:03.820\ngiving you some exposure to\nthe certificate templates.\n\n244\n00:13:03.820 --> 00:13:08.213\nSupplying the request,\nwhat that means is that we're not gonna be\n\n245\n00:13:08.213 --> 00:13:11.749\nable to automatically get\na web server certificate.\n\n246\n00:13:11.749 --> 00:13:15.600\nWe're gonna actually need to provide\nsome data to it for each request.\n\n247\n00:13:15.600 --> 00:13:19.070\nAnd typically what that will be,\nis in that data we're going to\n\n248\n00:13:19.070 --> 00:13:22.470\ngive it a common name, and\npotentially a subject alternative name.\n\n249\n00:13:22.470 --> 00:13:24.940\nThese are the names that these\ncertificates use in order to do\n\n250\n00:13:24.940 --> 00:13:26.030\nvalidation.\n\n251\n00:13:26.030 --> 00:13:31.559\nMuch like when you go to Bing.com,\nMicrosoft.com, when you get that HTTPS.\n\n252\n00:13:31.559 --> 00:13:34.863\nAnd that nice little green bar and\nthings of that nature, that's because\n\n253\n00:13:34.863 --> 00:13:38.678\nthey're validating that the name on the\ncert matches the website that you went to.\n\n254\n00:13:38.678 --> 00:13:41.270\nSo we wanna make sure that we're\ngonna put those names in and\n\n255\n00:13:41.270 --> 00:13:43.490\nwe wanna do it on a request basis.\n\n256\n00:13:43.490 --> 00:13:47.724\nSo we have that, the next thing to do is\nwe're gonna go over to the crypto stuff\n\n257\n00:13:47.724 --> 00:13:50.415\nand we're gonna do the same\nthing we did before.\n\n258\n00:13:50.415 --> 00:13:54.989\nAnd we're gonna move these guys\nover to the monitoring crypto and\n\n259\n00:13:54.989 --> 00:13:57.492\nwe'll put our SHA-256 there.\n\n260\n00:13:57.492 --> 00:13:59.993\nAnd then we're going to\ngo to the Security tab.\n\n261\n00:13:59.993 --> 00:14:04.877\nWe will need to make sure that our\ncomputers have the permissions to request\n\n262\n00:14:04.877 --> 00:14:06.982\nthese certificate templates.\n\n263\n00:14:06.982 --> 00:14:11.691\nThis is kind of the power of\nthe Microsoft Certificate Authority is\n\n264\n00:14:11.691 --> 00:14:16.653\nthat you can actually put permissions\non each certificate template to\n\n265\n00:14:16.653 --> 00:14:21.390\ndetermine who can and\ncannot actually request a certificate.\n\n266\n00:14:21.390 --> 00:14:23.960\nAnd we're gonna be doing quite\na bit of that through out this\n\n267\n00:14:23.960 --> 00:14:28.790\nwhole series here to make sure the right\npeople request the right cert and\n\n268\n00:14:28.790 --> 00:14:32.080\npeople who don't need that certificate,\nthey can't even request it.\n\n269\n00:14:32.080 --> 00:14:36.230\nSo in here, what we're going to\ndo is we're gonna make sure that\n\n270\n00:14:36.230 --> 00:14:39.110\nwe need to have domain computers in here.\n\n271\n00:14:39.110 --> 00:14:42.771\nBecause the domain computer is\nthe guy who is going to enroll for\n\n272\n00:14:42.771 --> 00:14:44.161\nthe certificate here.\n\n273\n00:14:44.161 --> 00:14:47.813\nSo we're gonna say, add and\nwe'll just do a list here so\n\n274\n00:14:47.813 --> 00:14:52.725\nthat way everybody can see it,\nthere's usually right in here somewhere.\n\n275\n00:14:52.725 --> 00:14:56.753\nThere is a domain computers,\nlet me go up here and\n\n276\n00:14:56.753 --> 00:14:59.670\nadd computers cuz it's not in here.\n\n277\n00:14:59.670 --> 00:15:03.936\nSo we're gonna add the computers really\nquick, and then we'll do a find now.\n\n278\n00:15:03.936 --> 00:15:09.297\nAnd then we should actually,\nit should be in here.\n\n279\n00:15:09.297 --> 00:15:11.840\nSo let's see here,\ndomain computers, where'd it go?\n\n280\n00:15:14.560 --> 00:15:16.300\nThere it is.\n\n281\n00:15:16.300 --> 00:15:19.805\nDomain computers, and we'll click OK.\n\n282\n00:15:19.805 --> 00:15:24.570\nAnd then as you can see we added domain\ncomputers, but all we have is read.\n\n283\n00:15:24.570 --> 00:15:28.550\nWhat we really need to do is also\ngive it the enrolled permission.\n\n284\n00:15:28.550 --> 00:15:31.930\nThis is what allows you to when\nyou sign into the computer,\n\n285\n00:15:31.930 --> 00:15:34.280\nas the local computer administrator.\n\n286\n00:15:34.280 --> 00:15:38.028\nYou're gonna open the certificate snap in\nwhich we'll show in just a minute here.\n\n287\n00:15:38.028 --> 00:15:41.410\nAnd you're gonna request\nthis particular certificate.\n\n288\n00:15:41.410 --> 00:15:45.502\nAnd it's using the security context or\nbasically is making sure that computer\n\n289\n00:15:45.502 --> 00:15:49.990\nyou're running this from is allowed\nto actually request the certificate.\n\n290\n00:15:49.990 --> 00:15:53.113\nSo we've gotten all the security done,\nwe've got everything done.\n\n291\n00:15:53.113 --> 00:15:57.777\nI think we're good to go with this\ncertificate template, and so there we go.\n\n292\n00:15:57.777 --> 00:16:02.427\nWe have these two brand new certificate\ntemplates right down here at the bottom\n\n293\n00:16:02.427 --> 00:16:03.562\nhere, these two.\n\n294\n00:16:03.562 --> 00:16:08.070\nNow we've got the templates created,\nhow do we issue these?\n\n295\n00:16:08.070 --> 00:16:11.410\nAnd this is done through\na publishing method.\n\n296\n00:16:11.410 --> 00:16:12.617\nBut you know what?\n\n297\n00:16:12.617 --> 00:16:14.249\nI think Don, now's a good time-\n&gt;&gt; [LAUGH]\n\n298\n00:16:14.249 --> 00:16:15.630\n&gt;&gt; To actually stop this one.\n\n299\n00:16:15.630 --> 00:16:18.800\nWe'll go into publishing, and\nwe'll just do a part two for this guy.\n\n300\n00:16:18.800 --> 00:16:20.541\n&gt;&gt; I'm over here giving Mike the evil eye.\n\n301\n00:16:20.541 --> 00:16:22.910\nBecause setting up the templates\nis pretty straightforward.\n\n302\n00:16:22.910 --> 00:16:25.317\nWe spent a lot of time explaining\nexactly why we're doing that,\n\n303\n00:16:25.317 --> 00:16:26.663\nwhich is important to understand.\n\n304\n00:16:26.663 --> 00:16:30.070\nYou'll find in real life you can do\nit in two or three minutes, really.\n\n305\n00:16:30.070 --> 00:16:32.783\nBut actually getting the deployments\nset up requires setting up some GPOs.\n\n306\n00:16:32.783 --> 00:16:35.050\nWe wanna make sure we take our time and\ndo that right also.\n\n307\n00:16:35.050 --> 00:16:37.290\nSo let's break this up into two parts.\n\n308\n00:16:37.290 --> 00:16:40.653\nThis first part was covering how to get\nthose certificate templates set up.\n\n309\n00:16:40.653 --> 00:16:44.240\nAnd the second part will be using group\npolicy objects to be able to push those\n\n310\n00:16:44.240 --> 00:16:46.160\ncerts out and get people to auto enroll.\n\n311\n00:16:46.160 --> 00:16:48.409\nWhich will then pretty much wrap\nup our PKI configuration and\n\n312\n00:16:48.409 --> 00:16:50.810\nget us where we can move\nforward from there, right Mike?\n\n313\n00:16:50.810 --> 00:16:54.180\n&gt;&gt; Yeah, most of the PKI stuff\nthere will have in a minute,\n\n314\n00:16:54.180 --> 00:16:57.020\nwe will be doing some more certificate\ntemplates and things of that nature.\n\n315\n00:16:57.020 --> 00:16:59.800\nBut we won't be going over\nthose in such great detail.\n\n316\n00:16:59.800 --> 00:17:01.579\nBecause at that point,\nyou've see it about three or\n\n317\n00:17:01.579 --> 00:17:02.245\nfour times-\n&gt;&gt; [LAUGH]\n\n318\n00:17:02.245 --> 00:17:03.448\n&gt;&gt; And you'll wish that I'd shut\n\n319\n00:17:03.448 --> 00:17:03.990\nup about it.\n\n320\n00:17:03.990 --> 00:17:06.832\nSo yes,\nwe will be ready in the next part two.\n\n321\n00:17:06.832 --> 00:17:09.632\nWe're gonna actually publish\nsome certificates templates and\n\n322\n00:17:09.632 --> 00:17:12.655\nget them ready and do some auto\nenrollment with some group policies.\n\n323\n00:17:12.655 --> 00:17:13.762\nIt should be fun.\n\n324\n00:17:13.762 --> 00:17:16.470\n&gt;&gt; All right, ladies and gentleman, well\nyou defiantly want to stay tuned for that.\n\n325\n00:17:16.470 --> 00:17:18.730\nBut for\nright now we are gonna go ahead sign off.\n\n326\n00:17:18.730 --> 00:17:22.299\nSo signing off for ITPro.TV,\nI've been your host Don Pezet.\n\n327\n00:17:22.299 --> 00:17:23.300\n&gt;&gt; And I'm Mike Stephens.\n\n328\n00:17:23.300 --> 00:17:25.453\n&gt;&gt; And we'll see you back in part two.\n\n329\n00:17:25.453 --> 00:17:31.770\n[MUSIC]\n\n330\n00:17:31.770 --> 00:17:38.919\n&gt;&gt; Thank you for watching ITPro.TV.\n\n",
          "vimeoId": "216549862"
        },
        {
          "description": "In this episode, Don and Mike continue discussing the configuration of a Microsoft PKI. In particular, they demonstrate using a group policy object (GPO) to enable certificate auto-enrollment and allowing users to receive the required certificates. This is the final step in configuring the PKI to support Windows Hello for Business.",
          "length": "1707",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-2-2-preparing_the_pki_pt2-050317-PGM.00_28_13_17.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-2-2-preparing_the_pki_pt2-050317-PGM.00_28_13_17.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-2-2-preparing_the_pki_pt2-050317-PGM.00_28_13_17.Still001-sm.jpg",
          "title": "Preparing the PKI Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:01.342\nWelcome to ITProTV.\n\n2\n00:00:01.342 --> 00:00:06.277\nI'm your host, Don Pezet.\n\n3\n00:00:06.277 --> 00:00:07.976\n[MUSIC]\n\n4\n00:00:07.976 --> 00:00:10.980\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:10.980 --> 00:00:12.643\n[MUSIC]\n\n6\n00:00:12.643 --> 00:00:15.876\n&gt;&gt; All right, good morning, good\nafternoon and good evening everybody, and\n\n7\n00:00:15.876 --> 00:00:17.830\nwelcome back to another\nepisode of ITProTV.\n\n8\n00:00:17.830 --> 00:00:19.690\nI'm your host, Don Pezet.\n\n9\n00:00:19.690 --> 00:00:23.040\nBack again with another episode of Windows\nHello for Business, and not just any old\n\n10\n00:00:23.040 --> 00:00:28.990\nepisode, this is part two of preparing\nthe PKI for Windows Hello for Business.\n\n11\n00:00:28.990 --> 00:00:32.990\nIn the last episode we got a chance to see\ngetting the certificate templates created\n\n12\n00:00:32.990 --> 00:00:35.380\nto be able to support our\nWindows Hello deployment, and\n\n13\n00:00:35.380 --> 00:00:38.390\nin this episode we're gonna continue\nwith that and get a chance to see how to\n\n14\n00:00:38.390 --> 00:00:42.330\nroll that out to our users and actually\nget the certificates in place that\n\n15\n00:00:42.330 --> 00:00:44.490\nsort of need to be there for\nthis whole thing to work.\n\n16\n00:00:44.490 --> 00:00:47.060\nAnd back again to help us with that is Mr.\nMike Stephens.\n\n17\n00:00:47.060 --> 00:00:48.760\nMike, thanks for joining us again.\n\n18\n00:00:48.760 --> 00:00:49.890\n&gt;&gt; Thanks for having me back.\n\n19\n00:00:49.890 --> 00:00:53.760\nWe're gonna have some fun, finish out some\nPKI stuff here, a little group policy.\n\n20\n00:00:53.760 --> 00:00:54.670\nIt should be good.\n\n21\n00:00:54.670 --> 00:00:57.510\n&gt;&gt; Yep and that group policy part is\nalways really nice because this will be\n\n22\n00:00:57.510 --> 00:01:00.130\nsomething we can enter in once and\nit can then apply thousands and\n\n23\n00:01:00.130 --> 00:01:02.510\nthousands of times and\nsave us a ton of effort.\n\n24\n00:01:02.510 --> 00:01:04.539\nSo Mike,\nwhere do we get started with that?\n\n25\n00:01:05.720 --> 00:01:09.240\n&gt;&gt; So picking up in part two here, so\nwhat we did in the past as Don said,\n\n26\n00:01:09.240 --> 00:01:11.760\nwe got the templates ready and\nthat's the great part.\n\n27\n00:01:11.760 --> 00:01:15.680\nSo now what we're gonna do is we're gonna\ntalk about publishing those templates and\n\n28\n00:01:15.680 --> 00:01:18.430\nthen we're going to talk about\nthe auto-enrollment feature that\n\n29\n00:01:18.430 --> 00:01:23.350\nWindows has had for years, of how we can\nget those templates to, most importantly,\n\n30\n00:01:23.350 --> 00:01:26.260\nthe domain controllers,\nin this particular episode.\n\n31\n00:01:26.260 --> 00:01:30.110\nSo what we're gonna do is talk about\npublishing the certificate templates.\n\n32\n00:01:30.110 --> 00:01:35.010\nThis is a critical part, if you have a\nnormal, if you're using your existing PKI,\n\n33\n00:01:35.010 --> 00:01:37.830\nyou may have more than one\ncertificate authority.\n\n34\n00:01:37.830 --> 00:01:38.800\nAnd that's totally fine.\n\n35\n00:01:38.800 --> 00:01:40.830\nRedundancy is always a plus.\n\n36\n00:01:40.830 --> 00:01:44.994\nBut, when you public certificate\ntemplates, the thing to understand about\n\n37\n00:01:44.994 --> 00:01:48.430\npublishing certificate templates\nit's on a per CA basis.\n\n38\n00:01:48.430 --> 00:01:53.390\nThis is just more flexibility that\nyou can have to where if I want\n\n39\n00:01:53.390 --> 00:01:56.730\ncertificate authority A to only\nissue these subset of certs, and\n\n40\n00:01:56.730 --> 00:02:00.190\nI want certificate authority\nB to only issue these sets.\n\n41\n00:02:00.190 --> 00:02:04.550\nYou just publish the certificate template\nto the right CA, and boom there you go.\n\n42\n00:02:04.550 --> 00:02:05.330\nThat's how they do it.\n\n43\n00:02:05.330 --> 00:02:06.326\nAnd then what happens is,\n\n44\n00:02:06.326 --> 00:02:11.240\nis that the certificate request and\nthe engine inside the PKI client just\n\n45\n00:02:11.240 --> 00:02:15.020\nknows what CA can actually issue\nthat particular certificate.\n\n46\n00:02:15.020 --> 00:02:18.810\nSo what we're going to do is we're gonna\ngo to my certificate authority here that I\n\n47\n00:02:18.810 --> 00:02:21.410\nhave shown for you here and\n\n48\n00:02:21.410 --> 00:02:26.530\nwe can see that this is with the\ncertificate snap-in already loaded here.\n\n49\n00:02:26.530 --> 00:02:29.300\nAnd you can see these\nare the default ones that come up.\n\n50\n00:02:29.300 --> 00:02:33.598\nAnd, if we go back into the template\nmanager, you'll see here manage,\n\n51\n00:02:33.598 --> 00:02:36.205\nwe now have this whole\nlist of things here and\n\n52\n00:02:36.205 --> 00:02:40.503\nwe should be able to find our one that\nwe created before which is the domain\n\n53\n00:02:40.503 --> 00:02:45.180\ncontroller authentication\nKerberos certificate template.\n\n54\n00:02:45.180 --> 00:02:46.910\nAnd now we have that\nparticular template and\n\n55\n00:02:46.910 --> 00:02:50.460\nthen we have our internal\nweb server template there.\n\n56\n00:02:50.460 --> 00:02:53.100\nThese are the templates that\nwe've created in our part one.\n\n57\n00:02:53.100 --> 00:02:57.045\nAnd what we need to do is we need to\nactually publish these to the CA that\n\n58\n00:02:57.045 --> 00:03:01.690\nwe're using so that they can actually\nbe available to the user, so\n\n59\n00:03:01.690 --> 00:03:04.510\nthat they can be more to\nthe computer mostly, but so\n\n60\n00:03:04.510 --> 00:03:06.710\nthat they're available without\npublishing they aren't there.\n\n61\n00:03:06.710 --> 00:03:10.970\nSo what we'll do is I'll just highlight\non my domain controller Kerberos\n\n62\n00:03:10.970 --> 00:03:11.710\nauthentication.\n\n63\n00:03:13.010 --> 00:03:15.540\nActually, I need to back up here.\n\n64\n00:03:15.540 --> 00:03:16.810\nThis is the thing that always gets me.\n\n65\n00:03:16.810 --> 00:03:18.410\nI love being in the template editor,\n\n66\n00:03:18.410 --> 00:03:21.680\nbut to publish,\nwhat we need to do is close that out and\n\n67\n00:03:21.680 --> 00:03:26.130\nactually come back here to the certificate\nsnap-in the management console.\n\n68\n00:03:26.130 --> 00:03:33.130\nAnd right click on new and\nthen say certificate template issue.\n\n69\n00:03:33.130 --> 00:03:34.130\nAnd when you do that,\n\n70\n00:03:34.130 --> 00:03:37.320\nthen it gives you up all these certificate\ntemplates that you can choose from.\n\n71\n00:03:37.320 --> 00:03:42.210\nThat you can add to the actual CA or\npublish to the CA, as I like to call it.\n\n72\n00:03:42.210 --> 00:03:44.150\nAnd we can scroll through this list and\n\n73\n00:03:44.150 --> 00:03:47.670\nwhat we'll see here,\nis we'll see the internal web server one.\n\n74\n00:03:47.670 --> 00:03:52.080\nThat's the one we created in part one, so\nlet's go ahead and click Add on that guy.\n\n75\n00:03:52.080 --> 00:03:54.490\nThen we're going to do\nthe same thing again here.\n\n76\n00:03:54.490 --> 00:03:58.530\nWe're going to right click and\nsay New, and then say, okay, come on.\n\n77\n00:04:01.065 --> 00:04:02.885\nAnd then, now I have the same thing again.\n\n78\n00:04:02.885 --> 00:04:06.875\nAnd we're gonna look for\nthat Kerberos authentication one here.\n\n79\n00:04:06.875 --> 00:04:07.980\nAnd H, I, J, K where do we go,\n\n80\n00:04:07.980 --> 00:04:13.430\ndomain controller authentication should\nbe at the top if I know my alphabet.\n\n81\n00:04:13.430 --> 00:04:15.160\nAnd there we go, there's that guy and\n\n82\n00:04:15.160 --> 00:04:18.640\nso then we're going to\nactually hit okay there.\n\n83\n00:04:18.640 --> 00:04:23.590\nSo now you can see that inside\nthe snap-in we have those two.\n\n84\n00:04:23.590 --> 00:04:25.670\nWe have published those.\n\n85\n00:04:25.670 --> 00:04:28.467\nNow that we have them\npublished we're ready to go.\n\n86\n00:04:28.467 --> 00:04:29.530\nNot just quite yet.\n\n87\n00:04:29.530 --> 00:04:34.051\nWe're going to deploy auto-enrollment to\nthe domain controller which is normally\n\n88\n00:04:34.051 --> 00:04:34.950\nit's not done.\n\n89\n00:04:34.950 --> 00:04:38.466\nI believe we covered it in part one\nwhere we said that you know the domain\n\n90\n00:04:38.466 --> 00:04:40.494\ncontroller just automatically went and\n\n91\n00:04:40.494 --> 00:04:44.930\ngot this domain controller certificate\nthat is just sitting there.\n\n92\n00:04:44.930 --> 00:04:49.090\nThe problem was that is, is that there\nare certificates as you see here,\n\n93\n00:04:49.090 --> 00:04:52.420\nthat certificate templates,\nreally, were already in there for\n\n94\n00:04:52.420 --> 00:04:55.722\nyou at the beginning when you\nfirst brought your CA up.\n\n95\n00:04:55.722 --> 00:04:59.340\nNow, if your production CA\nprobably won't have these, but\n\n96\n00:04:59.340 --> 00:05:02.995\nif it does then you need to be aware\nof this because as soon as you enable\n\n97\n00:05:02.995 --> 00:05:07.920\nauto-enrollment, there's this\npermission on each certificate template\n\n98\n00:05:07.920 --> 00:05:11.900\nthat allows a domain controller\nto auto-enroll for things.\n\n99\n00:05:11.900 --> 00:05:16.870\nA good example here to show you really\nquickly is I'll go back into my\n\n100\n00:05:16.870 --> 00:05:21.100\nmanages and we'll look at this\ndirectory e-mail replication here,\n\n101\n00:05:21.100 --> 00:05:23.280\nand I'm just going to double click on it,\nand look at it.\n\n102\n00:05:23.280 --> 00:05:27.620\nAnd if I go to the security, see it has\nthe domain controllers group there but\n\n103\n00:05:27.620 --> 00:05:31.040\nit has this permission here\ncalled auto-enrollment.\n\n104\n00:05:31.040 --> 00:05:35.592\nSo that means as soon as we deploy\nauto-enrollment to our domain controllers,\n\n105\n00:05:35.592 --> 00:05:40.260\nwhat's gonna end up happening is that\nall these templates that are published\n\n106\n00:05:40.260 --> 00:05:43.570\nthat allow the domain controllers to just\nautomatically enroll are going to start\n\n107\n00:05:43.570 --> 00:05:46.910\nshowing up in your domain controller,\nand you don't necessarily need those.\n\n108\n00:05:46.910 --> 00:05:49.850\nSo what we have is\na concept of we published,\n\n109\n00:05:49.850 --> 00:05:54.250\nnow we're gonna unpublish some certificate\ntemplates because we just don't want them\n\n110\n00:05:54.250 --> 00:05:56.370\nto be crowding our domain controllers.\n\n111\n00:05:56.370 --> 00:05:59.610\nWe really don't wanna issue a cert\nunless we have a business need to\n\n112\n00:05:59.610 --> 00:06:01.240\nissue that cert.\n\n113\n00:06:01.240 --> 00:06:03.770\nSo, word of caution there though.\n\n114\n00:06:03.770 --> 00:06:08.720\nIf you have these in your environment, you\nneed to make sure nobody is using them.\n\n115\n00:06:08.720 --> 00:06:13.340\nBecause when you unpublish a certificate\ntemplate, the problem is that\n\n116\n00:06:13.340 --> 00:06:17.450\nthe CA will no longer be able to service\nthat particular certificate template.\n\n117\n00:06:17.450 --> 00:06:18.830\nSo if a certificate request for\n\n118\n00:06:18.830 --> 00:06:22.260\nthat template come into the CA,\nit's not gonna happen.\n\n119\n00:06:22.260 --> 00:06:25.170\nThe CA is basically gonna fail\nthat certificate request.\n\n120\n00:06:25.170 --> 00:06:27.340\nSo let's close out of\nthis template editor and\n\n121\n00:06:27.340 --> 00:06:32.250\nlet's unpublish some certificate\ntemplates that I know I won't need.\n\n122\n00:06:32.250 --> 00:06:34.735\nAnd I have a couple of them listed here.\n\n123\n00:06:34.735 --> 00:06:38.287\nWe'll start with the ones that I know\nwon't maybe because we created our nice\n\n124\n00:06:38.287 --> 00:06:41.075\nlittle Kerberos one to\nactually replace that.\n\n125\n00:06:41.075 --> 00:06:45.015\nAnd one of those is actually\nthe domain controller authentication.\n\n126\n00:06:45.015 --> 00:06:46.720\nWe don't necessarily need that one.\n\n127\n00:06:46.720 --> 00:06:48.760\nAnd the way you do this is you hit Delete.\n\n128\n00:06:48.760 --> 00:06:50.980\nNow this isn't deleting\nthe certificate template,\n\n129\n00:06:50.980 --> 00:06:53.060\nthis is just deleting or unpublishing it.\n\n130\n00:06:53.060 --> 00:06:56.600\nAs you can say, it's gonna disable\nthe selected certificate template for\n\n131\n00:06:56.600 --> 00:06:59.010\nthis certificate authority.\n\n132\n00:06:59.010 --> 00:07:02.220\nThe other thing you need to do and\nkeep in mind is if you have more than\n\n133\n00:07:02.220 --> 00:07:05.570\none certificate authority, you need\nto make sure that this is consistent\n\n134\n00:07:05.570 --> 00:07:07.890\nthroughout your environment,\nthroughout the enterprise.\n\n135\n00:07:07.890 --> 00:07:13.140\nIf you have these templates to where all\nof your issuing CA's can issue them,\n\n136\n00:07:13.140 --> 00:07:15.910\nthen you're gonna need to repeat\nthese steps on each CA that you\n\n137\n00:07:15.910 --> 00:07:18.600\nhave within the environment to\nensure that you don't caught up on\n\n138\n00:07:18.600 --> 00:07:21.250\nthat domain control with\nunnecessary certificates.\n\n139\n00:07:21.250 --> 00:07:24.280\nSo we'll say yes to that and\nthen boom that guy is gone.\n\n140\n00:07:24.280 --> 00:07:25.960\nAnd then we have\nthe domain controller one,\n\n141\n00:07:25.960 --> 00:07:28.660\nthis is the old one back\nfrom days of Windows 2000.\n\n142\n00:07:28.660 --> 00:07:29.920\nWe don't need this one either.\n\n143\n00:07:29.920 --> 00:07:33.760\nAnd so we'll go through this motion\nhere and get that prompt there.\n\n144\n00:07:33.760 --> 00:07:37.320\nAnd then we have, so we've gotten most\nof the domain controller ones out.\n\n145\n00:07:37.320 --> 00:07:42.535\nThere's this domain controller\nreplication one that this is really\n\n146\n00:07:42.535 --> 00:07:46.145\nback when you used to be able to do\nActive Directory replication using SMTP.\n\n147\n00:07:46.145 --> 00:07:48.695\nIt was not widely used.\n\n148\n00:07:48.695 --> 00:07:50.015\nAnd we don't need this one either.\n\n149\n00:07:50.015 --> 00:07:53.146\nSo what we're gonna do is we're gonna\nget rid of this guy here as well.\n\n150\n00:07:55.114 --> 00:07:59.075\nAnd here's our Kerberos authentication\nin part one we used that as a template.\n\n151\n00:07:59.075 --> 00:08:01.947\nWe have ours Right there already.\n\n152\n00:08:01.947 --> 00:08:05.798\nSo we don't need the Kerberos\nauthentication one either,\n\n153\n00:08:05.798 --> 00:08:09.734\nso we'll go ahead and\nunpublish this one from the CA as well.\n\n154\n00:08:09.734 --> 00:08:13.590\nAnd the web server one,\nwell this is an auto enrollment one,\n\n155\n00:08:13.590 --> 00:08:18.429\nwe wanna make sure that we use the correct\nweb server template because we have\n\n156\n00:08:18.429 --> 00:08:21.410\nan internal web server and a web server.\n\n157\n00:08:21.410 --> 00:08:23.120\nAnd when we do some manual enrolments,\n\n158\n00:08:23.120 --> 00:08:26.700\nyou'll be able to see a list of\ntemplates that you're allowed to enroll.\n\n159\n00:08:26.700 --> 00:08:30.020\nAnd we just wanna make sure it's\na more of a clean instruction for you.\n\n160\n00:08:30.020 --> 00:08:34.840\nSo I'm gonna remove the web server one,\njust so we see an enrollment happen,\n\n161\n00:08:34.840 --> 00:08:38.240\nwe're not gonna get a list of templates\nthat really is gonna mess up or\n\n162\n00:08:38.240 --> 00:08:39.450\nconfuse us there.\n\n163\n00:08:39.450 --> 00:08:42.467\nSo we'll go ahead and\njust remove this guy here.\n\n164\n00:08:42.467 --> 00:08:45.933\nSo now we've unpublished all\nof the certificate templates\n\n165\n00:08:45.933 --> 00:08:50.724\nthat are gonna be affected by having an\nactual auto enrollment being deployment.\n\n166\n00:08:50.724 --> 00:08:55.240\nSo where we're now not gonna have any\nadditional certificates that will\n\n167\n00:08:55.240 --> 00:08:59.250\nbe those certificates themselves\nwill not be auto-enrolled.\n\n168\n00:08:59.250 --> 00:09:03.993\nSo, now that we've got those done,\nnow we need to actually move over to\n\n169\n00:09:03.993 --> 00:09:07.670\ndeploying the actual\nauto-enrollment policies.\n\n170\n00:09:07.670 --> 00:09:08.724\nAnd so, to do that,\n\n171\n00:09:08.724 --> 00:09:12.269\nwe're gonna switch over to the domain\ncontroller that I have here.\n\n172\n00:09:12.269 --> 00:09:14.945\nAnd so,\nwe have the domain controller here and\n\n173\n00:09:14.945 --> 00:09:18.179\nwe're gonna use the group\npolicy management console.\n\n174\n00:09:18.179 --> 00:09:22.703\nI use it just from start run and\nI just do GPMC and\n\n175\n00:09:22.703 --> 00:09:28.630\nstart that guy up like that should\nstart here and there we go.\n\n176\n00:09:28.630 --> 00:09:32.480\nAnd so now I have the group\npolicy management council there.\n\n177\n00:09:32.480 --> 00:09:37.631\nSo what we have here is it's now gonna\nload so we'll give it its time to load.\n\n178\n00:09:37.631 --> 00:09:40.597\n&gt;&gt; All right so Mike, now that those\ncertificates are published that's pretty\n\n179\n00:09:40.597 --> 00:09:43.541\nmuch all we need to do on the CA, the rest\nof the works gonna be on the DC right?\n\n180\n00:09:43.541 --> 00:09:47.610\n&gt;&gt; Absolutely Don, we are gonna be on the\nDC and we're gonna do some work there but\n\n181\n00:09:47.610 --> 00:09:51.260\nbefore we jump the group polices,\nmy all time favorite.\n\n182\n00:09:51.260 --> 00:09:54.390\nI wanna show you guys, we keep\nmentioning about the old certificate.\n\n183\n00:09:54.390 --> 00:09:58.094\nI wanna show you how my domain controller\nactually has an old certificate here.\n\n184\n00:09:58.094 --> 00:10:02.249\nSo I'm on my domain controller right\nnow and I'm gonna bring up the local\n\n185\n00:10:02.249 --> 00:10:06.077\ncertificate manager for\nthe computer for the domain controller.\n\n186\n00:10:06.077 --> 00:10:11.050\nAnd I do that using a short\ncut called certlm.msc.\n\n187\n00:10:11.050 --> 00:10:14.650\nI love my shortcuts, they just\nget us right where we need to be.\n\n188\n00:10:14.650 --> 00:10:19.360\nAnd as you can see here I now have\nthe domain controller certificate store so\n\n189\n00:10:19.360 --> 00:10:21.752\nI can see all the certificates\nin this domain controller.\n\n190\n00:10:21.752 --> 00:10:24.646\nAnd where domain controller\ncan store the search for\n\n191\n00:10:24.646 --> 00:10:28.129\nthemselves is in this personal\nstore where you see it here, and\n\n192\n00:10:28.129 --> 00:10:32.489\nin here you'll see I already have\na dc1corecontoso.com that's my domain.\n\n193\n00:10:32.489 --> 00:10:34.860\nVery original by the way.\n\n194\n00:10:34.860 --> 00:10:37.235\nSo if we open up and\nlook at this certificate,\n\n195\n00:10:37.235 --> 00:10:41.117\nwe'll see how it's displaying everything\nsince I have the private key.\n\n196\n00:10:41.117 --> 00:10:46.107\nWhat we're really interested in here is\nto go the details and if we scroll down,\n\n197\n00:10:46.107 --> 00:10:48.720\nyou see this certificate template name?\n\n198\n00:10:48.720 --> 00:10:53.602\nIt says domain controller, that's the old\ncertificate template that we had a while\n\n199\n00:10:53.602 --> 00:10:55.860\nback before we unpublished it.\n\n200\n00:10:55.860 --> 00:10:58.870\nIt automatically got that\nwithout auto enrollment.\n\n201\n00:10:58.870 --> 00:11:00.890\nThat's the thing that it always looks for.\n\n202\n00:11:00.890 --> 00:11:03.900\nSo you're always most likely gonna\nhave this domain controller.\n\n203\n00:11:03.900 --> 00:11:06.528\nNow, that's what we use\nthe superseding for.\n\n204\n00:11:06.528 --> 00:11:09.224\nSo I wanna take a mental not\nof this certificate here, and\n\n205\n00:11:09.224 --> 00:11:13.169\nwe can also basically look at it by saying\nlet's look at the thumbprint real quick.\n\n206\n00:11:13.169 --> 00:11:19.010\nAnd let's just say, let's remember like\n871C, that's the last four of those.\n\n207\n00:11:19.010 --> 00:11:22.130\nWe're gonna look at this later after\nwe deploy the auto enrollment, and\n\n208\n00:11:22.130 --> 00:11:24.690\nrun some stuff to kinda push it along.\n\n209\n00:11:24.690 --> 00:11:27.690\nAnd then we're gonna come back and\nsee what the certificate store looks like.\n\n210\n00:11:27.690 --> 00:11:30.300\nBut for now, let's close outta this and\n\n211\n00:11:30.300 --> 00:11:32.730\nlet's load up group policy\nmanagement console.\n\n212\n00:11:32.730 --> 00:11:37.456\nAgain I love my shortcuts, so\nI'm gonna do GPMC and start that up.\n\n213\n00:11:37.456 --> 00:11:40.900\nAnd you can see I have my group\npolicy management console here.\n\n214\n00:11:40.900 --> 00:11:46.720\nAnd so now what we're gonna do is we're\ngonna actually create a group policy for\n\n215\n00:11:46.720 --> 00:11:49.880\nthe domain controller to\ndo perform auto enrollment.\n\n216\n00:11:49.880 --> 00:11:53.570\nAnd so what we're gonna do is we're gonna\nexpand these guys out, this domain here.\n\n217\n00:11:53.570 --> 00:11:57.107\nAnd we can just go to the group\npolicy objects node right there and\n\n218\n00:11:57.107 --> 00:11:58.886\nwe'll right click and say new.\n\n219\n00:11:58.886 --> 00:12:00.814\nAnd we got this group policy here and so\n\n220\n00:12:00.814 --> 00:12:04.249\nwhat we're gonna call this guy is\nwe're just basically gonna say,\n\n221\n00:12:04.249 --> 00:12:07.228\ndomain controller authentication\ncertificate moment.\n\n222\n00:12:07.228 --> 00:12:13.904\nWe're just gonna use that there, so let's\nsay domain controller auto certificate.\n\n223\n00:12:13.904 --> 00:12:20.193\nThere's an F in certificate.\n\n224\n00:12:22.996 --> 00:12:24.590\nOkay so we have a name for it.\n\n225\n00:12:24.590 --> 00:12:28.480\nWe're just gonna call it that and\nwe'll say OK.\n\n226\n00:12:28.480 --> 00:12:31.320\nNow in group policy we\njust created the GP.\n\n227\n00:12:31.320 --> 00:12:33.420\nWe haven't deployed it or\nlinked it to anything.\n\n228\n00:12:33.420 --> 00:12:35.920\nSo we're good to go there we\nhaven't missed anything out.\n\n229\n00:12:35.920 --> 00:12:38.030\nAnd then we're gonna say edit on this guy.\n\n230\n00:12:38.030 --> 00:12:41.646\nAnd so auto enrollment we need\nto be careful here, because auto\n\n231\n00:12:41.646 --> 00:12:46.014\nenrollment itself can actually be deployed\nto the user or to the computer and\n\n232\n00:12:46.014 --> 00:12:50.600\nwe need to make sure we're gonna deploy\nthis to the actual computer itself.\n\n233\n00:12:50.600 --> 00:12:52.610\nWe don't want users trying to do this.\n\n234\n00:12:52.610 --> 00:12:56.990\nSo we're gonna expand under the computer\nconfigurations right here, and we're gonna\n\n235\n00:12:56.990 --> 00:13:01.500\ngo down to policies and then what we're\ndoing is these are security policies.\n\n236\n00:13:01.500 --> 00:13:04.395\nSo these are tucked away\nunder Windows settings.\n\n237\n00:13:04.395 --> 00:13:08.030\nAnd then you have Windows settings and\nthen security settings down here.\n\n238\n00:13:08.030 --> 00:13:11.572\nAnd we're gonna scroll down\nuntil we see Poet Key Policies,\n\n239\n00:13:11.572 --> 00:13:13.315\nwhich is this guy right here.\n\n240\n00:13:13.315 --> 00:13:16.435\nAnd we get this nice\nlist of policies here.\n\n241\n00:13:16.435 --> 00:13:22.950\nAnd in here, we have client services, or\ncertificate services client Auto-enrolled.\n\n242\n00:13:22.950 --> 00:13:26.920\nSo we're gonna double-click this, and\nthe next thing is we're gonna hit Enable.\n\n243\n00:13:26.920 --> 00:13:31.068\nAnd that's gonna populate our UI with\na bunch of selections that we want.\n\n244\n00:13:31.068 --> 00:13:36.281\nAnd so in here, what we wanna do is we\nwanna say Renew expired certificates,\n\n245\n00:13:36.281 --> 00:13:41.320\nupdate pending certificates and\nremove or revoked certificates.\n\n246\n00:13:41.320 --> 00:13:45.745\nThis is the power of why we want to\nuse auto enrollment because the most\n\n247\n00:13:45.745 --> 00:13:49.270\nproblematic thing with\ncertificates is they expire.\n\n248\n00:13:49.270 --> 00:13:51.428\nThat's a good thing for us security folks,\n\n249\n00:13:51.428 --> 00:13:54.927\nwe wanna certificate to expire because\nwe wanna limit the use of that and\n\n250\n00:13:54.927 --> 00:13:58.657\nmake sure that, well we still trust you\nwith the certificate that you have so\n\n251\n00:13:58.657 --> 00:14:02.070\nyou can keep coming back to us\nmaking sure we validate you.\n\n252\n00:14:02.070 --> 00:14:05.638\nBut, sometimes like a web server\ncertificate or things of that nature,\n\n253\n00:14:05.638 --> 00:14:08.210\nthese things expire and\nthey cause drastic damage,\n\n254\n00:14:08.210 --> 00:14:10.913\ncuz now their e-commerce is down and\nthings are down.\n\n255\n00:14:10.913 --> 00:14:15.649\nOr an enterprise having an authentication\ncertificate expire is really bad\n\n256\n00:14:15.649 --> 00:14:19.053\nbecause you're gonna walk in Monday and\neverybody's\n\n257\n00:14:19.053 --> 00:14:24.019\ngoing to tell you they can't sign in and\nthat's not a good way to start a Monday.\n\n258\n00:14:24.019 --> 00:14:27.140\nSo what we want to use is\nauto enrollment to do this.\n\n259\n00:14:27.140 --> 00:14:31.850\nAnd this way, that way we can renew the\nsearch, and we use that template to do it.\n\n260\n00:14:31.850 --> 00:14:36.740\nThen we also wanna say update\ncertificates that use this template, and\n\n261\n00:14:36.740 --> 00:14:38.860\nthen we're good there, as far as.\n\n262\n00:14:38.860 --> 00:14:39.770\nAnd then we're good.\n\n263\n00:14:39.770 --> 00:14:43.560\nWe've got everything going there, and\nthen we're gonna hit OK on this guy,\n\n264\n00:14:43.560 --> 00:14:47.600\nand we'll close this out.\n\n265\n00:14:47.600 --> 00:14:52.375\nWhen we're done editing and so now we have\nthis GPO right here, group policy objects\n\n266\n00:14:52.375 --> 00:14:56.493\nright here, we have our GPO we're\nready to go, and now we wanna link it.\n\n267\n00:14:56.493 --> 00:15:01.159\nNow, where we're gonna link to\nthe domain controllers because we only\n\n268\n00:15:01.159 --> 00:15:05.910\nneed right now for our Domain\ncontrollers to perform auto update.\n\n269\n00:15:05.910 --> 00:15:09.707\nSo I'm just gonna drag this guy over\nto the domain controllers of you.\n\n270\n00:15:09.707 --> 00:15:11.970\nAnd It's gonna say hey do you\nwanna link this to there?\n\n271\n00:15:11.970 --> 00:15:13.890\nAnd we'll say yes.\n\n272\n00:15:13.890 --> 00:15:17.550\nAnd then if we wanna double check that we\ncan go here and do the precedence order.\n\n273\n00:15:17.550 --> 00:15:18.070\n&gt;&gt; Yeah and for\n\n274\n00:15:18.070 --> 00:15:20.570\nour example here in the lab this is\nreally the easiest way to do it.\n\n275\n00:15:20.570 --> 00:15:23.199\nBut in a production environment you're\ngonna have other things to consider.\n\n276\n00:15:23.199 --> 00:15:25.610\nLike all the different people that\nyou want to be auto enrolling.\n\n277\n00:15:25.610 --> 00:15:28.540\nYou might need to have\nan OU structure in place,\n\n278\n00:15:28.540 --> 00:15:31.730\nor use group filtering or\nwanted to kinda tailor that policy right?\n\n279\n00:15:31.730 --> 00:15:32.729\n&gt;&gt; Yes absolutely Don.\n\n280\n00:15:32.729 --> 00:15:36.283\nWhen you're doing these things to\nusers it's a lot more complicated,\n\n281\n00:15:36.283 --> 00:15:40.267\nbecause typically users depending on\nyour active directory infrastructure.\n\n282\n00:15:40.267 --> 00:15:44.500\nYou could have OUs, and those OUs could\nhave different like marketing, HR, and\n\n283\n00:15:44.500 --> 00:15:47.065\nthings of that nature which\nyou see in my screen.\n\n284\n00:15:47.065 --> 00:15:52.070\nI have quite a few OUs set up to delineate\nbetween different usage patterns for\n\n285\n00:15:52.070 --> 00:15:52.610\nusers.\n\n286\n00:15:52.610 --> 00:15:56.853\nBut you could have where they're all\nin one spot, and then that makes it\n\n287\n00:15:56.853 --> 00:16:01.397\neasier to manage but then now That's\nkind of like a chicken and egg problem.\n\n288\n00:16:01.397 --> 00:16:03.680\nEasy to manage but\nit applies to everybody.\n\n289\n00:16:03.680 --> 00:16:05.430\nSo now you're doing exceptions for people.\n\n290\n00:16:05.430 --> 00:16:08.960\nSo whichever you do in your environment,\nyou're gonna have to apply these two.\n\n291\n00:16:08.960 --> 00:16:12.770\nFor our purposes here, we're gonna\nuse the domain controllers for you.\n\n292\n00:16:12.770 --> 00:16:14.320\nAnd for computers itself,\n\n293\n00:16:14.320 --> 00:16:17.500\nthey really usually reside in\neither one place or other.\n\n294\n00:16:17.500 --> 00:16:22.360\nTypically, you don't see computers sitting\noutside of the computers container\n\n295\n00:16:22.360 --> 00:16:26.720\nitself or anything like that,\nbut for domain controllers\n\n296\n00:16:26.720 --> 00:16:30.650\nMicrosoft always recommended that you\nlease in a domain controllers of you.\n\n297\n00:16:30.650 --> 00:16:35.240\nAnd further more if we look at\nthe ordering here on my screen,\n\n298\n00:16:35.240 --> 00:16:38.160\nthey always wanna make sure that\nthe default domain control or\n\n299\n00:16:38.160 --> 00:16:43.160\npolicy is always the first in the list,\nand the reason why is that there are some\n\n300\n00:16:43.160 --> 00:16:47.360\nolder technologies that rely\non it being first in the list.\n\n301\n00:16:47.360 --> 00:16:52.128\nAnd GP processes from the up down, so that\nbeing said, when it's first in the list,\n\n302\n00:16:52.128 --> 00:16:55.016\nit's It's the last to apply\nwhich means it wins any\n\n303\n00:16:55.016 --> 00:16:57.456\npotential conflicts that you might have.\n\n304\n00:16:57.456 --> 00:17:00.939\nSo we have our GP there,\nwe're ready to go there.\n\n305\n00:17:00.939 --> 00:17:02.782\nI think everything is good to where now,\n\n306\n00:17:02.782 --> 00:17:06.885\nI think what we want to do is we want to\nrun GP update on On the domain controller.\n\n307\n00:17:06.885 --> 00:17:08.425\nIt's probably already updated, but\n\n308\n00:17:08.425 --> 00:17:12.265\nwe're just gonna do that to make\nsure we have some good hygiene here.\n\n309\n00:17:12.265 --> 00:17:16.075\nSo we'll run in and make sure you\nopen either command prompt or\n\n310\n00:17:16.075 --> 00:17:17.115\nPowerShell elevated.\n\n311\n00:17:17.115 --> 00:17:20.515\nAnd the reason why is we're going\nto update the computer policy.\n\n312\n00:17:20.515 --> 00:17:22.455\nAnd by default when you run GP update,\n\n313\n00:17:22.455 --> 00:17:26.185\nit only updates the user policy if\nyou're not a local administrator.\n\n314\n00:17:26.185 --> 00:17:28.325\nSo we're going to just do GP update.\n\n315\n00:17:30.700 --> 00:17:33.370\nAnd we're gonna force an update here.\n\n316\n00:17:33.370 --> 00:17:35.940\nAnd we're gonna see that\nthe computer's gonna now\n\n317\n00:17:35.940 --> 00:17:38.790\napply our auto enrollment\npolicy setting that we have.\n\n318\n00:17:39.930 --> 00:17:44.320\nNow the great thing about auto enrollment\nis that it's triggered by group policy and\n\n319\n00:17:44.320 --> 00:17:46.260\nother things and\nit runs on a background thread.\n\n320\n00:17:46.260 --> 00:17:48.190\nSo it's constantly running.\n\n321\n00:17:48.190 --> 00:17:50.870\nSo as long as your signed in and\neven if you are locked,\n\n322\n00:17:50.870 --> 00:17:54.070\nas long as you're signed into\nthe machine and then machine is locked,\n\n323\n00:17:54.070 --> 00:17:57.620\nbecause you want to launch or\nwhatever like that, it's still working.\n\n324\n00:17:57.620 --> 00:18:01.525\nSo if you go to launch and you locked\nyour machine, and your certificate's\n\n325\n00:18:01.525 --> 00:18:06.075\nabout to expire, auto enrollment will\nupdate that for you because it's locked.\n\n326\n00:18:06.075 --> 00:18:08.125\nNow in a computer policy,\nwhich what we're doing here,\n\n327\n00:18:08.125 --> 00:18:09.995\nobviously the computer needs to be on.\n\n328\n00:18:09.995 --> 00:18:13.645\nSo it looks like we've got our GP\nupdate there, we're ready to go and so\n\n329\n00:18:13.645 --> 00:18:15.735\nnow we need to do some validation here.\n\n330\n00:18:15.735 --> 00:18:17.775\nSo let's close out of that.\n\n331\n00:18:17.775 --> 00:18:22.580\nAnd the first thing we wanna do is,\nactually let's do one more thing.\n\n332\n00:18:22.580 --> 00:18:26.070\nWe're gonna kind of push auto\nenrollment to make sure it worked.\n\n333\n00:18:26.070 --> 00:18:28.645\nAnd to do that we use\na tool called Certreq.\n\n334\n00:18:29.755 --> 00:18:33.268\nCertreq is a command line tool that\nallows you to use certificate requests.\n\n335\n00:18:33.268 --> 00:18:37.828\nSo I'm gonna type in a command here that\nis going to trigger auto enrollment, we're\n\n336\n00:18:37.828 --> 00:18:42.219\ngonna kind of push it because, well we\nwanna get the episode done in around time.\n\n337\n00:18:42.219 --> 00:18:44.687\n&gt;&gt; [LAUGH]\n&gt;&gt; So we're going to do Certreq here.\n\n338\n00:18:44.687 --> 00:18:48.360\n&gt;&gt; Yeah, Mike in real life we have\nthe benefit of just being patient.\n\n339\n00:18:48.360 --> 00:18:50.070\nWe can wait, machines will auto enroll.\n\n340\n00:18:50.070 --> 00:18:51.570\nThey'll either receive the policies.\n\n341\n00:18:51.570 --> 00:18:52.740\nIt just kind of happens over time,\n\n342\n00:18:52.740 --> 00:18:55.660\nbut on a show like this we're\na bit more rushed, right?\n\n343\n00:18:55.660 --> 00:18:57.680\n&gt;&gt; Yeah.\nAnd the other thing to keep in mind is\n\n344\n00:18:57.680 --> 00:19:01.010\nthat, you're gonna be deploying bits and\npieces of this in phases.\n\n345\n00:19:01.010 --> 00:19:04.260\nSo we don't really need to wait for\nthese particular things.\n\n346\n00:19:04.260 --> 00:19:06.890\nObviously when you're messing with domain\ncontrollers, those are typically gonna be\n\n347\n00:19:06.890 --> 00:19:10.240\ndone during off hours and\nweekends and so forth like that.\n\n348\n00:19:10.240 --> 00:19:11.680\nSo you don't have to\nreally worry about that.\n\n349\n00:19:11.680 --> 00:19:14.190\nThe other advantage we have as\ndomain controllers process,\n\n350\n00:19:14.190 --> 00:19:16.670\nthey upgrade group policy really quick,\nright?\n\n351\n00:19:16.670 --> 00:19:18.540\nSo they're gonna get that change, and\n\n352\n00:19:18.540 --> 00:19:21.285\nthen auto enrollment is gonna kick in and\nit's gonna see something.\n\n353\n00:19:21.285 --> 00:19:24.030\nSo in this particular case,\nwe're just forcing it.\n\n354\n00:19:24.030 --> 00:19:28.690\nBut what this does serve as also, is it\nservers as a really cool troubleshooting\n\n355\n00:19:28.690 --> 00:19:32.460\ntool if you need to figure out whether\nautoenrollment's working or not.\n\n356\n00:19:32.460 --> 00:19:36.240\nAnd it's like an eight hour\nperiod before when it runs,\n\n357\n00:19:36.240 --> 00:19:38.200\nbecause we don't wanna\nconstantly be churning on this.\n\n358\n00:19:38.200 --> 00:19:42.417\nSo this is a good troubleshooting utility\nthat you can do to force auto enrollment\n\n359\n00:19:42.417 --> 00:19:45.951\nto kind of kick in when you need to\nsee if you need to figure out why your\n\n360\n00:19:45.951 --> 00:19:47.388\ncertificate is not going.\n\n361\n00:19:47.388 --> 00:19:54.338\nSo let me type in the command here, and\nit's Certreq, and then it's autoenroll.\n\n362\n00:19:54.338 --> 00:19:57.804\nAnd we're gonna do a slash q for quiet,\nbecause we don't want it prompting us or\n\n363\n00:19:57.804 --> 00:19:59.150\nanything like that.\n\n364\n00:19:59.150 --> 00:20:02.150\nAnd it's just done,\nthere we go, so that's done.\n\n365\n00:20:02.150 --> 00:20:03.360\nSo we forced that.\n\n366\n00:20:03.360 --> 00:20:07.170\nNow what we wanna do,\nis we wanna bring up the event logs.\n\n367\n00:20:07.170 --> 00:20:11.180\nAnd there's these certificate lifecycle\nmanagement logs that many people don't\n\n368\n00:20:11.180 --> 00:20:14.860\nknow about, that can help you understand\nwhen your certificates got enrolled and\n\n369\n00:20:14.860 --> 00:20:16.150\nwhen they didn't get enrolled.\n\n370\n00:20:16.150 --> 00:20:23.700\nSo I'm gonna open the event viewer and\nI'm just doing Event Viewer, eventvwr.\n\n371\n00:20:23.700 --> 00:20:25.080\nAnd now I have my Event Viewer up.\n\n372\n00:20:25.080 --> 00:20:29.170\nAnd let's minimize this guy here.\n\n373\n00:20:29.170 --> 00:20:32.400\nAnd let's look at the Windows logs.\n\n374\n00:20:32.400 --> 00:20:33.800\nWe're gonna break these out, sorry.\n\n375\n00:20:33.800 --> 00:20:38.080\nWe're actually gonna break out\nthe application and services logs.\n\n376\n00:20:38.080 --> 00:20:41.800\nAnd in here,\nwe're gonna go to Microsoft, Windows.\n\n377\n00:20:42.910 --> 00:20:49.510\nAnd these are gonna be the user\ncertificates life-cycle managements.\n\n378\n00:20:49.510 --> 00:20:54.999\nWe will get rid on this action pane,\nbecause it is taking up real estate here.\n\n379\n00:20:54.999 --> 00:20:56.313\nSo we can see.\n\n380\n00:20:56.313 --> 00:21:00.850\nAnd so,\nwe're gonna look at certificate services.\n\n381\n00:21:00.850 --> 00:21:02.150\nWe start seeing them here and\n\n382\n00:21:02.150 --> 00:21:05.430\nif we highlight it,\nthere's a certificate credentials roaming.\n\n383\n00:21:05.430 --> 00:21:07.685\nHere's lifecycle system and user.\n\n384\n00:21:07.685 --> 00:21:14.120\nBut we're interested in system, because we\ndid these updates to the actual computer.\n\n385\n00:21:14.120 --> 00:21:17.330\nSo if we look here, we've got\na whole bunch of events now here.\n\n386\n00:21:17.330 --> 00:21:20.750\nAnd this is great, cuz this means\nauto enrollment probably worked for\n\n387\n00:21:20.750 --> 00:21:22.190\nus which is always good.\n\n388\n00:21:22.190 --> 00:21:27.070\nNow if you look here,\nwe'll start here at this event log, we can\n\n389\n00:21:27.070 --> 00:21:31.160\nsee it says the certificate was installed\nand we check the details of this log.\n\n390\n00:21:31.160 --> 00:21:35.460\nAnd if we look at the details of this log,\nit shows some interesting Things that we\n\n391\n00:21:35.460 --> 00:21:40.260\ncan use like, first of all the account\nname, who actually got the certificate.\n\n392\n00:21:40.260 --> 00:21:42.680\nWhat context,\nthe security context it was in?\n\n393\n00:21:42.680 --> 00:21:44.450\nThis was a machine context.\n\n394\n00:21:44.450 --> 00:21:47.490\nWhat was the action,\nwas it a renew or written role?\n\n395\n00:21:47.490 --> 00:21:48.620\nThis was in role.\n\n396\n00:21:48.620 --> 00:21:51.495\nAnd then it shows us details\nof the certificate template.\n\n397\n00:21:51.495 --> 00:21:54.274\nSo here we can see there\nis the thumb print and\n\n398\n00:21:54.274 --> 00:21:58.196\nit will show us the template\nthat was used, the subject name.\n\n399\n00:21:58.196 --> 00:22:02.047\nThese are all great troubleshooting\ntools that we can use to understand what\n\n400\n00:22:02.047 --> 00:22:03.810\ncertificate got enrolled.\n\n401\n00:22:03.810 --> 00:22:07.160\nAnd if you look at this,\nyou can see from the thumbprint we had,\n\n402\n00:22:07.160 --> 00:22:12.110\nour last one was 871C, this is when it\nenrolled in the domain controller server.\n\n403\n00:22:12.110 --> 00:22:16.680\nSo this is really cool stuff, but\nthat's the one we want to go away.\n\n404\n00:22:16.680 --> 00:22:18.520\nSo then we can look at\nthe next one that says,\n\n405\n00:22:18.520 --> 00:22:20.570\na new certificate hasn't been installed.\n\n406\n00:22:20.570 --> 00:22:21.310\nLet's go to that one.\n\n407\n00:22:21.310 --> 00:22:25.558\nAnd we do that same view here, we still\nsee that it's the domain controller,.\n\n408\n00:22:25.558 --> 00:22:28.040\nWe see the action enroll,\nbut now look at it.\n\n409\n00:22:28.040 --> 00:22:32.620\nWe have new thumbprint, and let's slide\nthis over here, look at the template name.\n\n410\n00:22:32.620 --> 00:22:36.010\nThat template is the one\nthat we created just now.\n\n411\n00:22:36.010 --> 00:22:40.090\nSo now we know we can actually\nvalidate that the domain controller\n\n412\n00:22:40.090 --> 00:22:44.120\ntook auto enrollment, received it, and\nis actually doing something about it.\n\n413\n00:22:44.120 --> 00:22:47.750\nAnd in this case, it automatically\nrequested a certificate, and\n\n414\n00:22:47.750 --> 00:22:49.580\nit saw the certificate\ntemplate that we wanted.\n\n415\n00:22:49.580 --> 00:22:52.240\nSo we know that that step\nof our processes work.\n\n416\n00:22:52.240 --> 00:22:55.250\nThis is why I always stress\ntrying to do these in the lab so\n\n417\n00:22:55.250 --> 00:22:58.610\nyou can make sure you know how to\nvalidate each step of the way.\n\n418\n00:22:58.610 --> 00:23:01.780\nIn a distributed system when\nyou're setting up a lot of things,\n\n419\n00:23:01.780 --> 00:23:03.220\nyou wanna do it in chunks.\n\n420\n00:23:03.220 --> 00:23:07.240\nThat way you can validate before you move\nto the next one as much as possible, cuz\n\n421\n00:23:07.240 --> 00:23:10.420\nthere is nothing worse of doing everything\nall at once and then it not working.\n\n422\n00:23:10.420 --> 00:23:11.870\nYou don't know which step broke.\n\n423\n00:23:11.870 --> 00:23:15.310\nNow you have to troubleshoot from the\nbeginning, all the way through the end.\n\n424\n00:23:15.310 --> 00:23:17.450\nIt's almost as if you're redoing it,\nbut worse,\n\n425\n00:23:17.450 --> 00:23:21.840\nbecause now you're going\nback over your steps.\n\n426\n00:23:21.840 --> 00:23:23.380\nSo we have a certificate, and\n\n427\n00:23:23.380 --> 00:23:25.920\nwe'll validate that with\na Certificate Snap in just a minute.\n\n428\n00:23:25.920 --> 00:23:27.730\nBut let's look,\nwe have two more logs in here.\n\n429\n00:23:29.100 --> 00:23:30.440\nLook at this one here.\n\n430\n00:23:30.440 --> 00:23:35.160\nIn this case,\nit says the certificate has been replaced.\n\n431\n00:23:37.830 --> 00:23:40.210\nThat's interesting,\nthe certificate was replaced.\n\n432\n00:23:40.210 --> 00:23:44.509\nRemember that superseded tab we\nput on the certificate template?\n\n433\n00:23:44.509 --> 00:23:48.238\nThat's where this is coming in, so let's\nlook at some more information about this.\n\n434\n00:23:48.238 --> 00:23:49.442\nA certificate was replaced.\n\n435\n00:23:49.442 --> 00:23:52.232\nWhat certificate got replaced here?\n\n436\n00:23:52.232 --> 00:23:56.793\nIt was superseded as our action and\nit was the domain controller cert,\n\n437\n00:23:56.793 --> 00:23:59.670\noff that template, there's our 871C.\n\n438\n00:24:01.090 --> 00:24:06.220\nSo this made it super easy for\nus to exchange, if you will,\n\n439\n00:24:06.220 --> 00:24:11.970\ntake certificate A kind of discard it,\nand replace it with certificate B.\n\n440\n00:24:12.970 --> 00:24:15.920\nAnd we can see that it was actually\narchived in this next one here.\n\n441\n00:24:15.920 --> 00:24:17.810\nWhere it says a certificate\nhas been archived.\n\n442\n00:24:17.810 --> 00:24:21.700\nAnd if we open this up,\nwe can look right here and\n\n443\n00:24:21.700 --> 00:24:24.010\nwe can see that the contact\nsays that it was archived.\n\n444\n00:24:26.450 --> 00:24:27.570\nThat was our domain controller cert.\n\n445\n00:24:29.300 --> 00:24:31.420\nSo let's go in and look really quick here.\n\n446\n00:24:31.420 --> 00:24:33.290\nWe're almost done with this episode.\n\n447\n00:24:33.290 --> 00:24:35.760\nSo I think we can manage\nto get these in here.\n\n448\n00:24:35.760 --> 00:24:37.370\nTo show you everything we need.\n\n449\n00:24:37.370 --> 00:24:42.400\nSo let's go with certlm, this is the local\ncertificate manager, where we had before.\n\n450\n00:24:42.400 --> 00:24:46.801\nI'm gonna bring this view back up and\nas you can see, we have a cert,\n\n451\n00:24:46.801 --> 00:24:49.983\nwell that looks the same\nas the last one we had so.\n\n452\n00:24:49.983 --> 00:24:50.671\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n453\n00:24:50.671 --> 00:24:52.189\n&gt;&gt; So it's like, okay Mike,\n\n454\n00:24:52.189 --> 00:24:54.169\nI saw it but if we scroll and let's,\n\n455\n00:24:54.169 --> 00:24:58.220\nwell actually just move this\nwindow here rather than scrolling.\n\n456\n00:24:58.220 --> 00:25:03.360\nWe can see KBC extended purposes in all\nof this, but let's just look at it,\n\n457\n00:25:03.360 --> 00:25:07.960\nlet's go back into details and\nthen we can see under the template.\n\n458\n00:25:10.150 --> 00:25:14.070\nWow, that things is based off\nof the template that we created.\n\n459\n00:25:14.070 --> 00:25:16.470\nThe thumbprint matches the one\nwe saw on the event log.\n\n460\n00:25:17.500 --> 00:25:22.410\nAnd it has all the right that we needed\nhere, but where did the other one go?\n\n461\n00:25:22.410 --> 00:25:24.191\nWe're not seeing the other one.\n\n462\n00:25:24.191 --> 00:25:26.416\nThat's an interesting thing there as well.\n\n463\n00:25:26.416 --> 00:25:30.748\nWell it was archived it's still there but\nwe just don't know it's there,\n\n464\n00:25:30.748 --> 00:25:34.968\nbecause if it's an archive cert we\ndon't necessarily need to see that.\n\n465\n00:25:34.968 --> 00:25:39.050\nSo how we can do that is,\nwe can use a utility that,\n\n466\n00:25:39.050 --> 00:25:43.631\nin the PKI world, we use a lot here,\nwhich is Certutil.\n\n467\n00:25:43.631 --> 00:25:47.602\nIt is the bread and butter of\ncertificate management, believe me.\n\n468\n00:25:47.602 --> 00:25:50.885\nAnd so what we're going to do is, we're\ngoing to show you how you can look at\n\n469\n00:25:50.885 --> 00:25:53.806\nthe certificate store of the local\ncomputer and see these search,\n\n470\n00:25:53.806 --> 00:25:56.227\nand you're going to be able\nto see the same thing here.\n\n471\n00:25:56.227 --> 00:26:00.310\nSo depending on where you're and\nwe do have the,\n\n472\n00:26:00.310 --> 00:26:03.795\nWindows has servers that don't have UI so\n\n473\n00:26:03.795 --> 00:26:08.600\nyou need to be able to have\na way to view these things.\n\n474\n00:26:08.600 --> 00:26:14.570\nSo let's just do Certutil and we're going\nto do dash store and we're going to do my.\n\n475\n00:26:14.570 --> 00:26:16.970\nMy is also the personal store.\n\n476\n00:26:16.970 --> 00:26:21.740\nAnd when we do this command here it's\ngoing to dump all kinds of certs here.\n\n477\n00:26:21.740 --> 00:26:27.540\nAnd so let's move this over just a bit,\nso I can get to the scroll bar here.\n\n478\n00:26:27.540 --> 00:26:31.020\nAnd as you can see, it has certificate 1.\n\n479\n00:26:31.020 --> 00:26:37.490\nAnd then, we'll scroll just a little bit\nnot too much there and certificate one.\n\n480\n00:26:37.490 --> 00:26:39.810\nLet's use this little scroll guy here.\n\n481\n00:26:39.810 --> 00:26:41.970\nAnd as you can see, it's archived.\n\n482\n00:26:42.980 --> 00:26:44.430\nThat was our old certificate.\n\n483\n00:26:45.910 --> 00:26:48.860\nSo we actually can see to\nwhere it was still there, and\n\n484\n00:26:48.860 --> 00:26:51.520\nwe can see all of the information\nabout that certificate there.\n\n485\n00:26:51.520 --> 00:26:57.350\nSo what we've done is we've validated that\nwe actually did get a new certificate.\n\n486\n00:26:57.350 --> 00:27:01.610\nThat our superseded templates are working\nreally well here, which is great.\n\n487\n00:27:01.610 --> 00:27:05.470\nAnd now, this domain controller is set up\nto automatically enroll in a certificate\n\n488\n00:27:05.470 --> 00:27:08.650\nwhenever it needs one, but\nmore importantly It will automatically\n\n489\n00:27:08.650 --> 00:27:10.810\nrenew when it's about to expire,\nwhich is great.\n\n490\n00:27:10.810 --> 00:27:15.010\nSo now we have our domain controller set,\nready to go, to support Windows Hello for\n\n491\n00:27:15.010 --> 00:27:16.870\nBusiness Authentication.\n\n492\n00:27:16.870 --> 00:27:19.290\n&gt;&gt; All right, so\npretty decent process to go through there.\n\n493\n00:27:19.290 --> 00:27:21.400\nAnd it's a process that should've\nbeen familiar to most of you.\n\n494\n00:27:21.400 --> 00:27:24.050\nIf you are already using certificates for\nother purposes, you've probably already\n\n495\n00:27:24.050 --> 00:27:27.030\ngot auto enrollment configured for\nyour workstations, for things like EFS and\n\n496\n00:27:27.030 --> 00:27:29.710\nother technologies,\nthis goes right alongside of it.\n\n497\n00:27:29.710 --> 00:27:32.160\nJust making sure we're using\na stronger certificate.\n\n498\n00:27:32.160 --> 00:27:34.930\nWe're gonna see in the coming up episodes\nas we start to enable the rest of our\n\n499\n00:27:34.930 --> 00:27:35.590\nservices.\n\n500\n00:27:35.590 --> 00:27:36.970\nBut think it's a pretty good run down,\n\n501\n00:27:36.970 --> 00:27:40.420\nin this episode we got a chance to see\npublishing the certificate as well as\n\n502\n00:27:40.420 --> 00:27:43.730\ncreating a group policy object to make\nsure that auto enrollment was enabled.\n\n503\n00:27:43.730 --> 00:27:46.410\nAnd finally we saw a couple of utilities\nto verify that the certificates were\n\n504\n00:27:46.410 --> 00:27:49.220\nactually being issued to\nthe clients as desired.\n\n505\n00:27:49.220 --> 00:27:51.070\nIn this case our client was\na domain controller, but\n\n506\n00:27:51.070 --> 00:27:55.140\nit would be the same as if the client were\nwork stations, which we will see later on.\n\n507\n00:27:55.140 --> 00:27:56.990\nBut that's a good spot\nto wrap that one up.\n\n508\n00:27:56.990 --> 00:27:59.566\nWe still have a lot more to do to get\nWindows Hello for Business up and\n\n509\n00:27:59.566 --> 00:28:00.719\nrunning in our environment.\n\n510\n00:28:00.719 --> 00:28:04.089\nBut this step here, as far as the PKI's\nconcern, is pretty much complete.\n\n511\n00:28:04.089 --> 00:28:06.160\nAnd so we'll move on the next\nones in the following episodes.\n\n512\n00:28:06.160 --> 00:28:07.860\nDefinitely stay tuned for those, but\n\n513\n00:28:07.860 --> 00:28:09.410\notherwise we're gonna\nwrap it up right here.\n\n514\n00:28:09.410 --> 00:28:12.790\nSo signing off for ITProTV,\nI'm your host Don Pezet.\n\n515\n00:28:12.790 --> 00:28:13.445\n&gt;&gt; I'm Mike Stevens.\n\n516\n00:28:13.445 --> 00:28:20.819\n&gt;&gt; And we'll see you next time.\n\n517\n00:28:20.819 --> 00:28:21.344\n[MUSIC]\n\n518\n00:28:21.344 --> 00:28:25.700\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "216550046"
        },
        {
          "description": "In this episode, Don and Mike discuss implementing Active Directory Federation Services to support Windows Hello for Business. Specifically, Mike demonstrates installing Active Directory Federation Services and then assigns a web server certificate using the template created in the previous episode.",
          "length": "824",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-3-preparing_ad_federation_services-050317.00_00_12_06.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-3-preparing_ad_federation_services-050317.00_00_12_06.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-3-preparing_ad_federation_services-050317.00_00_12_06.Still001-sm.jpg",
          "title": "Preparing AD Federation Services",
          "transcript": "WEBVTT\n\n1\n00:00:00.190 --> 00:00:02.030\nWelcome to ITProTV, I'm your host.\n\n2\n00:00:02.030 --> 00:00:02.836\nDon Pezet.\n\n3\n00:00:02.836 --> 00:00:06.394\n[CROSSTALK]\n\n4\n00:00:06.394 --> 00:00:08.224\n[MUSIC]\n\n5\n00:00:08.224 --> 00:00:12.616\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:12.616 --> 00:00:16.190\n&gt;&gt; All right ladies and gentlemen, welcome\nback to another episode of ITProTV.\n\n7\n00:00:16.190 --> 00:00:18.310\nI'm your host Don Pezet and\n\n8\n00:00:18.310 --> 00:00:21.990\nwe are back again with another\nepisode of Windows Hello for Business.\n\n9\n00:00:21.990 --> 00:00:24.760\nAnd in this episode we're\ntaking off the gloves, right?\n\n10\n00:00:24.760 --> 00:00:26.040\nWe're moving into the hard stuff,\n\n11\n00:00:26.040 --> 00:00:28.340\npreparing active directory\nfederation services.\n\n12\n00:00:28.340 --> 00:00:29.700\nAnd I say it's like the hard stuff.\n\n13\n00:00:29.700 --> 00:00:32.560\nIt's actually pretty easy when we\ndeploy it this way and here to\n\n14\n00:00:32.560 --> 00:00:35.800\nshow us how easy that's gonna be is Mr.\nMike Stephens back in the studio with us.\n\n15\n00:00:35.800 --> 00:00:36.850\nMike, thanks for joining us.\n\n16\n00:00:36.850 --> 00:00:38.650\n&gt;&gt; Thanks Don, glad to be here.\n\n17\n00:00:38.650 --> 00:00:39.280\n&gt;&gt; And\n\n18\n00:00:39.280 --> 00:00:42.750\nso we've talked in previous episodes\nwhen we were talking about the design.\n\n19\n00:00:42.750 --> 00:00:46.420\nAnd Windows Hello for business and how\nwe needed federation services in place.\n\n20\n00:00:46.420 --> 00:00:51.100\nI cringe a little bit when I hear that\nbecause I had to deal with the claims and\n\n21\n00:00:51.100 --> 00:00:52.610\ntoken exchanges and all that stuff.\n\n22\n00:00:52.610 --> 00:00:56.690\nBut here it's a lot different than our\nnormal federation services department\n\n23\n00:00:56.690 --> 00:00:57.320\nmight be like.\n\n24\n00:00:57.320 --> 00:01:00.740\nSo it's really not as painful\nto get this up and going is it?\n\n25\n00:01:00.740 --> 00:01:02.700\n&gt;&gt; No it's actually not that painful.\n\n26\n00:01:02.700 --> 00:01:05.540\nI mean what we're going\nto do here is eventually\n\n27\n00:01:05.540 --> 00:01:07.010\nwe're gonna federate with ourselves.\n\n28\n00:01:07.010 --> 00:01:09.710\nSo a lot of those claims and\nall of those tokens and\n\n29\n00:01:09.710 --> 00:01:13.510\nthings that nature that really\nintimidate when you look at ADFS.\n\n30\n00:01:13.510 --> 00:01:16.760\nEven from myself when you look\nat the power it can have.\n\n31\n00:01:16.760 --> 00:01:18.370\nWe're not gonna really\nmiss with any of that.\n\n32\n00:01:18.370 --> 00:01:21.140\nA lot of these,\nwe're gonna stay in the GUI.\n\n33\n00:01:21.140 --> 00:01:22.800\nWe're gonna do some UIware.\n\n34\n00:01:22.800 --> 00:01:24.720\nMight do a little bit of PowerShell but\n\n35\n00:01:24.720 --> 00:01:28.130\nmost importantly it's gonna be very\nstraightforward and easy for us to do.\n\n36\n00:01:28.130 --> 00:01:30.700\nSo The first thing though we need to do\n\n37\n00:01:30.700 --> 00:01:34.756\nis we need to have a TLS\ncertificate on our ADFS server.\n\n38\n00:01:34.756 --> 00:01:38.745\nSo on that ADFS server,\nwe're gonna install an internal\n\n39\n00:01:38.745 --> 00:01:42.710\nTLF certificate because the communication\nchannel between our AFS server and\n\n40\n00:01:42.710 --> 00:01:44.560\nthe rest of our client's\nis going to be secure.\n\n41\n00:01:44.560 --> 00:01:47.120\nAnd then we're going to\ninstall the ADFS role in them.\n\n42\n00:01:47.120 --> 00:01:50.520\nThat's gonna get us prepared for\nthe rest of the active directory\n\n43\n00:01:50.520 --> 00:01:54.410\nfederation service stuff that we're\ngoing to be doing in the later episodes.\n\n44\n00:01:54.410 --> 00:01:55.410\nSo let's get right with it.\n\n45\n00:01:55.410 --> 00:01:58.540\nLet's go to my ADFS server\nthat I have right here for me.\n\n46\n00:01:58.540 --> 00:02:03.750\nAnd in my ADFS server I've\nalready started the certificate\n\n47\n00:02:03.750 --> 00:02:05.670\nmanager for the local computer.\n\n48\n00:02:05.670 --> 00:02:09.770\nThat's the certlm.msc\ncommand that I always use.\n\n49\n00:02:09.770 --> 00:02:13.210\nAnd in here you can see my certificate\nstores and things of this nature.\n\n50\n00:02:13.210 --> 00:02:19.590\nNow, what you see here is is that\nI now have a personal store.\n\n51\n00:02:19.590 --> 00:02:20.980\nIt's empty.\n\n52\n00:02:20.980 --> 00:02:24.770\nNow, when we install the certificate,\nthere some things to realize about ADFS.\n\n53\n00:02:24.770 --> 00:02:27.410\nADFS is supposed to be highly available.\n\n54\n00:02:27.410 --> 00:02:31.360\nAnd this comes into your certificate play\nbecause in a highly available when you\n\n55\n00:02:31.360 --> 00:02:34.880\nload balance and you do things like that\nyou have these virtual IP addresses and\n\n56\n00:02:34.880 --> 00:02:35.980\nyou have a virtual name.\n\n57\n00:02:35.980 --> 00:02:39.750\nYou don't necessarily always connect\nto the node or the actual host name.\n\n58\n00:02:39.750 --> 00:02:42.320\nYou're actually connecting\nto a farm of servers.\n\n59\n00:02:42.320 --> 00:02:46.250\nSo ADFS is expected to have a farm and\nwhen you're doing this in a production\n\n60\n00:02:46.250 --> 00:02:48.580\nyou should be doing this\nin your existing farm.\n\n61\n00:02:48.580 --> 00:02:50.420\nAnd making sure that these changes.\n\n62\n00:02:50.420 --> 00:02:51.920\nIf you already have ADFS,\n\n63\n00:02:51.920 --> 00:02:55.660\nmake sure that you run these and\nvalidate these changes before you do them.\n\n64\n00:02:55.660 --> 00:02:57.160\nBut if you're new to ADFS and\n\n65\n00:02:57.160 --> 00:03:01.660\nyou're gonna put ADFS in solely to support\nthis we're happy for you to do that.\n\n66\n00:03:01.660 --> 00:03:04.180\nThere's some consideration that\nyou wanna look at before and\n\n67\n00:03:04.180 --> 00:03:06.860\nthat's in the sizing of ADFS itself.\n\n68\n00:03:06.860 --> 00:03:10.370\nADFS has two models to where it's\na more lightweight model and\n\n69\n00:03:10.370 --> 00:03:12.590\nthen they have a more\nenterprise-ish model.\n\n70\n00:03:12.590 --> 00:03:15.110\nIf it's very huge to\nwhere you can use Sequel.\n\n71\n00:03:15.110 --> 00:03:19.150\nSo if you're gonna use the lightweight\nmodel, that's where they use the Windows\n\n72\n00:03:19.150 --> 00:03:23.720\ninternal database that actually stores\nall the ADFS configuration information.\n\n73\n00:03:23.720 --> 00:03:27.790\nAnd with that, that model will support\nup to thirty ADFS nodes in the farm.\n\n74\n00:03:27.790 --> 00:03:31.300\nWhich is pretty good for\nmost enterpises, most organizations.\n\n75\n00:03:31.300 --> 00:03:34.500\nAnd if you need more than that then you\nwill need to move to the Sequel model.\n\n76\n00:03:34.500 --> 00:03:38.210\nThe other thing that that has is is that\nit has a hundred or a less relying party.\n\n77\n00:03:38.210 --> 00:03:41.340\nSo if you are thinking\nabout using ADFS for\n\n78\n00:03:41.340 --> 00:03:44.520\nlet us say you're gonna use it for\nWindows Hello for Business.\n\n79\n00:03:44.520 --> 00:03:47.400\nBut then you're also going to\nstart doing some federation work.\n\n80\n00:03:47.400 --> 00:03:50.100\nKeep in mind how many of those\nrelying parties you're going to have.\n\n81\n00:03:50.100 --> 00:03:53.900\nBecause if that number scales above 100,\nthen you'll also need to go and\n\n82\n00:03:53.900 --> 00:03:57.520\nuse the SQL version of\nthe AEFS model there.\n\n83\n00:03:57.520 --> 00:03:59.000\nBut for right now, what we're gonna do is,\n\n84\n00:03:59.000 --> 00:04:01.340\nis we're gonna just use\nthe Windows Information Model,\n\n85\n00:04:01.340 --> 00:04:03.670\nwhich you'll see in the ADFS installation.\n\n86\n00:04:03.670 --> 00:04:06.490\n&gt;&gt; I know one of my favorite reasons\nto use the windows internal database,\n\n87\n00:04:06.490 --> 00:04:08.520\nis that it's part of the OS.\n\n88\n00:04:08.520 --> 00:04:12.510\nSo you're really like a check mark\naway from having it installed and\n\n89\n00:04:12.510 --> 00:04:17.050\nit is not something that we have to worry\na whole ton about with licensing, right?\n\n90\n00:04:17.050 --> 00:04:20.040\nWith SQL you've got licensing on top of\nthat and the infrastructure to support it.\n\n91\n00:04:20.040 --> 00:04:21.650\nThe scalability is through the roof.\n\n92\n00:04:21.650 --> 00:04:24.810\nPerformance is through the roof, but\nfor the most of us The Windows internal\n\n93\n00:04:24.810 --> 00:04:26.750\ndatabase is gonna be perfectly fine,\nright?\n\n94\n00:04:26.750 --> 00:04:29.740\n&gt;&gt; Yeah, the Windows internal database\nis gonna work really well for\n\n95\n00:04:29.740 --> 00:04:32.950\nyou and\nin your labs you definitely wanna use it.\n\n96\n00:04:32.950 --> 00:04:36.770\nBecause, while SQL is\nan awesome product to have,\n\n97\n00:04:36.770 --> 00:04:39.170\nit's gonna use as much memory as possible.\n\n98\n00:04:39.170 --> 00:04:41.470\nIt needs large disk storage things and\nthis nature.\n\n99\n00:04:41.470 --> 00:04:46.550\nSo to have that infrastructure there is,\nyou want to only use it when you need it.\n\n100\n00:04:46.550 --> 00:04:49.600\nAnd the Windows internal database\nis gonna be perfect for this.\n\n101\n00:04:49.600 --> 00:04:52.880\nSo, before we get into the installation\npart, where we'll touch on that windows\n\n102\n00:04:52.880 --> 00:04:56.430\ninternal database, let's go ahead and\nget a certificate on this box.\n\n103\n00:04:56.430 --> 00:05:01.930\nSo, I'm here and I'm going to request\na certificate, how I do this is basically\n\n104\n00:05:01.930 --> 00:05:05.530\nyou can go to the personal and you'll\nsee that I have no certificate in here.\n\n105\n00:05:05.530 --> 00:05:10.150\nI'm going to do all tasks and then I'm\ngonna say request a new certificate.\n\n106\n00:05:10.150 --> 00:05:12.900\nAnd this is gonna bring this\ncertificate window wizard up.\n\n107\n00:05:12.900 --> 00:05:16.650\nThis is the certificate enrollment wizard\nif you've never install certificate\n\n108\n00:05:16.650 --> 00:05:19.859\nmanually because you use auto normal\nlike we did in our last episode.\n\n109\n00:05:19.859 --> 00:05:23.450\nBut for a TLS certificate we can't\nreally use auto normal because we\n\n110\n00:05:23.450 --> 00:05:26.960\ndon't initially know what their\nnames on that certificate gonna be.\n\n111\n00:05:26.960 --> 00:05:33.380\nSo we need to provide those names at the\ntime of request and time of enrollment.\n\n112\n00:05:33.380 --> 00:05:37.980\nSo let's click Next here and we have\na certificate enrollment policy here.\n\n113\n00:05:37.980 --> 00:05:40.360\nWe're gonna use the Active Directory\nenrollment policy and\n\n114\n00:05:40.360 --> 00:05:44.100\nthis is basically saying hey where do I\ngo to look for certificate templates?\n\n115\n00:05:44.100 --> 00:05:46.060\nDo I go and look at Active Directory?\n\n116\n00:05:46.060 --> 00:05:49.730\nWe have another one that's called CEP and\nCES,\n\n117\n00:05:49.730 --> 00:05:54.240\nwhich is a more HTTP\nbased policy enrollment.\n\n118\n00:05:54.240 --> 00:05:57.020\nAnd if you have that one there,\nit would show up here as well.\n\n119\n00:05:57.020 --> 00:06:00.310\nAnd for most people,\nthey just use the active directory one and\n\n120\n00:06:00.310 --> 00:06:01.540\nit works just fine.\n\n121\n00:06:01.540 --> 00:06:03.270\nSo we're going to click\nnext on that one there.\n\n122\n00:06:03.270 --> 00:06:08.130\nAnd then you're going to see, look, we\nhave these are our certificate templates.\n\n123\n00:06:08.130 --> 00:06:09.760\nSo, what it did is, it went out.\n\n124\n00:06:09.760 --> 00:06:12.880\nIt went out and searched Active Directory,\nthose templates are stored in\n\n125\n00:06:12.880 --> 00:06:16.700\nActive Directory, and now we actually\nhave the certificate templates here.\n\n126\n00:06:16.700 --> 00:06:19.850\nSo, we're gonna use the internal\nweb server template.\n\n127\n00:06:19.850 --> 00:06:23.920\nAnd, when we check that guy you're\ngonna see, down here, it says, hey,\n\n128\n00:06:23.920 --> 00:06:27.000\nwe need some more information before\nwe can enroll this certificate.\n\n129\n00:06:27.000 --> 00:06:28.350\nSo, we're gonna click this box, and\n\n130\n00:06:28.350 --> 00:06:30.830\nit's gonna say, hey,\nI need subject information.\n\n131\n00:06:30.830 --> 00:06:34.280\nWe got the big yellow bang right there,\nand it's saying, I'm gonna need\n\n132\n00:06:34.280 --> 00:06:38.120\nthe subject information for this\ncertificate before you can enroll on it.\n\n133\n00:06:38.120 --> 00:06:42.250\nAnd this is where, if you are doing high\navailability, you need to be careful with\n\n134\n00:06:42.250 --> 00:06:45.390\nthis, and make sure that you put\nthe right names in the right spots.\n\n135\n00:06:45.390 --> 00:06:49.780\nOtherwise, your certificate won't work,\nand then you start getting in web browsers\n\n136\n00:06:49.780 --> 00:06:53.180\nand things won't work because\nthe certificate won't validate correctly.\n\n137\n00:06:53.180 --> 00:06:57.260\nSo, we're gonna go back into this and look\nat the subject name boxes, right here.\n\n138\n00:06:57.260 --> 00:06:59.970\nAnd in the subject name box we're\ngonna drop down on the type and\n\n139\n00:06:59.970 --> 00:07:01.220\nwe're gonna say common name.\n\n140\n00:07:01.220 --> 00:07:04.460\nAnd the value that we're\ngonna put here is the actual,\n\n141\n00:07:04.460 --> 00:07:07.120\nfully qualified domain name of the host.\n\n142\n00:07:07.120 --> 00:07:13.530\nAnd in this case, my host here is ADFS so\nI'm gonna put in adfs.\n\n143\n00:07:13.530 --> 00:07:16.310\nI like to do it lowercase just because.\n\n144\n00:07:16.310 --> 00:07:18.960\nAdfs, and then I'm gonna put my\ndomain name on the end of it.\n\n145\n00:07:18.960 --> 00:07:23.300\nSo corp.contoso.com.\n\n146\n00:07:23.300 --> 00:07:26.470\nYou want to make sure you spell it\ncorrectly because it is going to be burn\n\n147\n00:07:26.470 --> 00:07:28.960\ninto that certificate,\nwe are going to issue that certificate.\n\n148\n00:07:28.960 --> 00:07:31.960\nAnd if the name is wrong, the certificate\nis not going to validate correctly when\n\n149\n00:07:31.960 --> 00:07:34.030\nyou wan to go to that website.\n\n150\n00:07:34.030 --> 00:07:36.770\nWhen you try to go to that end\npoint that is protected to it.\n\n151\n00:07:36.770 --> 00:07:39.860\nThe other thing, do not forget to\nuse this add button over here,\n\n152\n00:07:39.860 --> 00:07:42.600\nI cannot tell you how many\ntimes I forgot the add button.\n\n153\n00:07:42.600 --> 00:07:43.180\nSo add.\n\n154\n00:07:43.180 --> 00:07:44.220\nWe'll see it over here.\n\n155\n00:07:44.220 --> 00:07:47.510\nThe common name is, remember,\ncommon name is going to be the host name.\n\n156\n00:07:47.510 --> 00:07:51.340\nNow, for me, while I'm not going\nto set up high availability,\n\n157\n00:07:51.340 --> 00:07:53.600\nI'm going to kind of make it think we are.\n\n158\n00:07:53.600 --> 00:07:57.470\nBecause I'm going to put in some DNSA\nrecords behind the scene to make it look\n\n159\n00:07:57.470 --> 00:08:02.200\nlike I'm going to actually\nconnect to a federation firm.\n\n160\n00:08:02.200 --> 00:08:04.090\nAnd that 's the way you have to do ADFS.\n\n161\n00:08:04.090 --> 00:08:06.060\nADFS doesn't use a node.\n\n162\n00:08:06.060 --> 00:08:08.280\nYou don't connect to the node itself.\n\n163\n00:08:08.280 --> 00:08:11.510\nWhat you do is you're gonna connect to\nthe federation end point all the time.\n\n164\n00:08:11.510 --> 00:08:14.790\nAnd so for this,\nthis certificate needs to have two.\n\n165\n00:08:14.790 --> 00:08:19.610\nNow, we could use wild cards in here the\nway we could just put asterisk or star.\n\n166\n00:08:19.610 --> 00:08:21.350\nAnd then the domain name after.\n\n167\n00:08:21.350 --> 00:08:24.290\nAnd that helps us just to where\nwe can use it everywhere.\n\n168\n00:08:24.290 --> 00:08:28.450\nBut in the internal side, I was trying to\ntell people to actually just enroll those\n\n169\n00:08:28.450 --> 00:08:32.180\nsearch, and then potentially use auto\nenrollment to renew those as an option.\n\n170\n00:08:32.180 --> 00:08:35.920\nAnd the reason why is that internally,\n\n171\n00:08:35.920 --> 00:08:38.580\nthere's no reason to\nhave a wildcard search.\n\n172\n00:08:38.580 --> 00:08:41.460\nIt makes it convenience, but\nthen there's that whole convenience and\n\n173\n00:08:41.460 --> 00:08:45.040\nsecurity that we keep battling back and\nforth with.\n\n174\n00:08:45.040 --> 00:08:48.020\nSo what we're going to do here for\nthe alternative name,\n\n175\n00:08:48.020 --> 00:08:52.300\nthis is where the endpoint name or the\nfederation endpoint name is going to go.\n\n176\n00:08:52.300 --> 00:08:54.670\nAnd to do that,\nyou need to use a DNS name.\n\n177\n00:08:54.670 --> 00:08:58.590\nSo I'm going to actually, from this\ndrop down, I'm going to select DNS.\n\n178\n00:08:58.590 --> 00:09:02.870\nAnd in here, I'm going to put the DNS\nname of my federation service,\n\n179\n00:09:02.870 --> 00:09:06.810\nwhich we will get to when we\nactually configure the ADFS service.\n\n180\n00:09:08.110 --> 00:09:12.630\nNow in here I'm gonna use FS for\nfederation service and then I'm still\n\n181\n00:09:12.630 --> 00:09:17.910\ngonna use my same fully qualified domain\nname for my internal Active Directory.\n\n182\n00:09:17.910 --> 00:09:21.910\nWhich is corp.contoso.com.\n\n183\n00:09:21.910 --> 00:09:24.810\nAnd again,\ndon't forget the add button because\n\n184\n00:09:24.810 --> 00:09:28.450\nanything that's not on the right side\ndoesn't get burned into the certificate.\n\n185\n00:09:28.450 --> 00:09:33.380\nAnd in this case with this certificate\nbeing sent when we try to connect to that\n\n186\n00:09:33.380 --> 00:09:37.090\nfederation endpoint it's gonna look for\nsf.corp.contoso.com.\n\n187\n00:09:37.090 --> 00:09:40.750\nBecause that's what we're gonna\nput in the ADFS installation.\n\n188\n00:09:40.750 --> 00:09:44.340\nAnd the name validation won't work and\nyou're going to start seeing errors so\n\n189\n00:09:44.340 --> 00:09:45.660\nwe have everything we needed.\n\n190\n00:09:45.660 --> 00:09:47.840\nWe got the yellow bang\non the subject thing.\n\n191\n00:09:47.840 --> 00:09:52.140\nWe have a common name which again\njust to repeat so we understand that.\n\n192\n00:09:52.140 --> 00:09:53.180\nThat's the host name.\n\n193\n00:09:53.180 --> 00:09:56.700\nThat's the name of the server that you're\nactually going to put the certificate\n\n194\n00:09:56.700 --> 00:09:57.950\nyou're enrolling on.\n\n195\n00:09:57.950 --> 00:10:02.200\nAnd then we actually have the DNS\nname which is the alternative name.\n\n196\n00:10:02.200 --> 00:10:05.540\nThis is gonna be inside the alternative\nname of the certificate when you\n\n197\n00:10:05.540 --> 00:10:06.470\nget it back.\n\n198\n00:10:06.470 --> 00:10:08.960\nSo we're ready to go,\nwe're on hit okay on this guy, and\n\n199\n00:10:08.960 --> 00:10:11.670\nnow we're back,\nwe've got out exclamation off.\n\n200\n00:10:11.670 --> 00:10:16.240\nWe're ready to go, and not we're just\ngonna say enroll and look at that.\n\n201\n00:10:16.240 --> 00:10:16.970\nJust that quick.\n\n202\n00:10:16.970 --> 00:10:18.520\nThat's the beauty of being on prem.\n\n203\n00:10:18.520 --> 00:10:22.110\nJust magic happens there,\nso let's validate this.\n\n204\n00:10:22.110 --> 00:10:25.900\nFinish, we can go back down here,\ndouble click, and look there.\n\n205\n00:10:25.900 --> 00:10:29.610\nNow we have an ADFS certificate and\n\n206\n00:10:29.610 --> 00:10:31.850\nlet's make sure that those\nsettings were in there.\n\n207\n00:10:31.850 --> 00:10:35.730\nSo let's double click this guy, and\nthen we're gonna look into the details.\n\n208\n00:10:35.730 --> 00:10:38.560\nAnd we're gonna just look at some of\nthose attributes that we've talked about.\n\n209\n00:10:38.560 --> 00:10:39.550\nSo here's the subject.\n\n210\n00:10:39.550 --> 00:10:40.760\nLet's highlight subject.\n\n211\n00:10:40.760 --> 00:10:42.150\nThis is the host name.\n\n212\n00:10:42.150 --> 00:10:43.400\nIt's spelled correctly.\n\n213\n00:10:43.400 --> 00:10:44.760\nWe're good to go there.\n\n214\n00:10:44.760 --> 00:10:45.730\nThen let's keep looking.\n\n215\n00:10:45.730 --> 00:10:48.170\nWe need to look at that\nsubject alternate name or\n\n216\n00:10:48.170 --> 00:10:50.510\nthe alternate name that was in there and\nhere it is.\n\n217\n00:10:50.510 --> 00:10:52.920\nIt's right here under this\nsubject key identifier.\n\n218\n00:10:52.920 --> 00:10:54.875\nAnd if you look there it has DNS name.\n\n219\n00:10:54.875 --> 00:10:57.020\nFScorp.contoso.com.\n\n220\n00:10:57.020 --> 00:10:58.770\nSo we have this certificate ready.\n\n221\n00:10:58.770 --> 00:10:59.550\nIt's good to go.\n\n222\n00:10:59.550 --> 00:11:01.290\nIt's installed on the computer.\n\n223\n00:11:01.290 --> 00:11:03.220\nWe're ready to go with the cert part.\n\n224\n00:11:03.220 --> 00:11:07.240\nNow let's just install ADFS and\nthat's going through our tried and\n\n225\n00:11:07.240 --> 00:11:08.660\ntrue server manager.\n\n226\n00:11:08.660 --> 00:11:09.820\nWe already have it open here.\n\n227\n00:11:09.820 --> 00:11:14.730\nWhat we're gonna do is just simply\ngo up to the manager, add roles, and\n\n228\n00:11:14.730 --> 00:11:16.550\nwe'll go through the wizard.\n\n229\n00:11:16.550 --> 00:11:20.771\nAnd we're gonna do roll based and\nwhen we get to our actual,\n\n230\n00:11:20.771 --> 00:11:23.080\nwe're already on this server but\nmake sure you pick the correct one.\n\n231\n00:11:23.080 --> 00:11:24.010\nAnd then we're gonna go and\n\n232\n00:11:24.010 --> 00:11:27.640\nwe're just gonna highlight\nActive Directory Federation Services.\n\n233\n00:11:27.640 --> 00:11:29.920\nWe'll go straight next through there and\n\n234\n00:11:29.920 --> 00:11:33.860\nthen in this particular one laterals will\nask you to do some preliminary work.\n\n235\n00:11:33.860 --> 00:11:35.420\nIn this one we don't have any work to do.\n\n236\n00:11:35.420 --> 00:11:39.160\nSo we're good to go here and\nwe're just going to go next and install.\n\n237\n00:11:39.160 --> 00:11:42.420\nAnd then in this case we're just\ngoing to watch Server Manager.\n\n238\n00:11:42.420 --> 00:11:46.660\nIf I had a nickel for every progress\nbar I did in my career I would be rich.\n\n239\n00:11:46.660 --> 00:11:48.530\nSo we're just gonna watch\nServer Manager install,\n\n240\n00:11:48.530 --> 00:11:51.870\nbut other than that,\nwe're really just installing ADFS.\n\n241\n00:11:51.870 --> 00:11:55.230\nAnd it's preparing us for the next\nepisode, Don, where we're actually\n\n242\n00:11:55.230 --> 00:11:58.370\ngoing to start getting our hands dirty\nwith some of the configurations.\n\n243\n00:11:58.370 --> 00:12:01.090\n&gt;&gt; Right, ADFS, that's one of the reasons\nwe don't see a whole lot options right\n\n244\n00:12:01.090 --> 00:12:04.270\nthere in that install is there are so\nmany different ways to deploy it, so\n\n245\n00:12:04.270 --> 00:12:05.320\nmany ways to customize it.\n\n246\n00:12:05.320 --> 00:12:08.260\nThere's no possible way they could\ngive us a couple simple questions and\n\n247\n00:12:08.260 --> 00:12:09.540\nget it easy configured.\n\n248\n00:12:09.540 --> 00:12:12.930\nSo, that's gonna be the next step which\nwe'll tackle in the next episode.\n\n249\n00:12:12.930 --> 00:12:17.060\nBut I've made the joke before that I've\neasily spent probably 30 to 40 percent of\n\n250\n00:12:17.060 --> 00:12:20.720\nmy career watching bars slowly\ncrawl along the screen.\n\n251\n00:12:20.720 --> 00:12:23.470\nSo in this case what we'll do\nis we'll wrap it up here and\n\n252\n00:12:23.470 --> 00:12:26.080\nkind of close off with getting\nfederation services installed.\n\n253\n00:12:26.080 --> 00:12:28.680\nIn the next episode we're going to jump\nback in we're going to take a look at\n\n254\n00:12:28.680 --> 00:12:31.950\ngetting active group federation\nservices actually configured.\n\n255\n00:12:31.950 --> 00:12:33.910\nAnd getting DRS configured as well, right.\n\n256\n00:12:33.910 --> 00:12:39.890\n&gt;&gt; Yep, we're going to the deeps of\nADFS server getting that installed.\n\n257\n00:12:39.890 --> 00:12:44.350\nWe're gonna do some more configuring\nDRS and it's gonna be fun.\n\n258\n00:12:44.350 --> 00:12:47.060\nWe're gonna have a lot\nof fun setting ADFS up.\n\n259\n00:12:47.060 --> 00:12:49.170\n&gt;&gt; All right, well this is gonna be\na short one for us but we'll go ahead and\n\n260\n00:12:49.170 --> 00:12:50.300\nwrap it up here.\n\n261\n00:12:50.300 --> 00:12:53.320\nBefore I close off, Mike did you have\nanything else you wanted to mention?\n\n262\n00:12:53.320 --> 00:12:57.910\n&gt;&gt; No, just be mindful again, ADFS,\nit's meant to be highly available.\n\n263\n00:12:57.910 --> 00:13:03.260\nSo in your production environment you\ndefinitely don't want to skip the idea or\n\n264\n00:13:03.260 --> 00:13:05.950\nthe notion of cleaning for\nhigh availability.\n\n265\n00:13:05.950 --> 00:13:08.530\nYou don't wanna have that\nsingle point of failure server.\n\n266\n00:13:08.530 --> 00:13:09.990\nJust sitting over there in the closet,\n\n267\n00:13:09.990 --> 00:13:13.010\nnow all of a sudden,\nno one has a backup of that configuration.\n\n268\n00:13:13.010 --> 00:13:15.290\nBut otherwise,\nit's pretty straight forward.\n\n269\n00:13:15.290 --> 00:13:17.880\nWe're gonna have a lot more\nfun in the next episodes.\n\n270\n00:13:17.880 --> 00:13:20.240\n&gt;&gt; All right, well, ladies and\ngentlemen, that's it for us today.\n\n271\n00:13:20.240 --> 00:13:22.840\nBut stay tuned because we've got\nmore episodes on Windows Hello for\n\n272\n00:13:22.840 --> 00:13:24.110\nBusiness coming up.\n\n273\n00:13:24.110 --> 00:13:27.180\nBut for now, signing off for\nITProTV, I'm your host Don Pezet.\n\n274\n00:13:27.180 --> 00:13:28.430\n&gt;&gt; And I'm Mike Stephens.\n\n275\n00:13:28.430 --> 00:13:36.172\n&gt;&gt; And we'll see you next time.\n\n276\n00:13:36.172 --> 00:13:39.924\n[MUSIC]\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "216065908"
        },
        {
          "description": "In this episode, Don and Mike complete the configuration of Active Directory Federation Services (ADFS). Mike demonstrates how to use Group Managed Service Accounts to better secure ADFS. Finally, Mike demonstrates configuring the Device Registration Service (DRS)",
          "length": "1387",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-4-configuring_ad_fs_and_drs-050317-PGM.00_00_12_02.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-4-configuring_ad_fs_and_drs-050317-PGM.00_00_12_02.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-4-configuring_ad_fs_and_drs-050317-PGM.00_00_12_02.Still001-sm.jpg",
          "title": "Configuring AD FS and DRS",
          "transcript": "WEBVTT\n\n1\n00:00:00.053 --> 00:00:02.658\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:02.658 --> 00:00:08.225\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:08.225 --> 00:00:13.070\n&gt;&gt; You're watching ITPRO.TV.\n\n4\n00:00:13.070 --> 00:00:13.590\n&gt;&gt; All right,\n\n5\n00:00:13.590 --> 00:00:17.850\neverybody welcome back to another episode\nof ITProTV, I'm your host Don Pezet.\n\n6\n00:00:17.850 --> 00:00:21.160\nBack again with another episode\nof Windows Hello for Business and\n\n7\n00:00:21.160 --> 00:00:24.540\nwe're continuing on with our adventure\nof getting this thing set up.\n\n8\n00:00:24.540 --> 00:00:27.230\nIn our last episode,\nwe had a chance to look at\n\n9\n00:00:27.230 --> 00:00:29.830\nActive Directory Federation Services and\ngetting it installed.\n\n10\n00:00:29.830 --> 00:00:33.510\nNow, we're gonna follow up with that and\nsee about getting it configured.\n\n11\n00:00:33.510 --> 00:00:36.380\nAnd back in the studio to help us\nwith that is Mr. Mike Stephens.\n\n12\n00:00:36.380 --> 00:00:37.595\nMike, thank you for joining us again.\n\n13\n00:00:37.595 --> 00:00:39.225\n&gt;&gt; Thanks for having me back.\n\n14\n00:00:39.225 --> 00:00:42.102\n&gt;&gt; And so at this point,\nADFS has finished installing.\n\n15\n00:00:42.102 --> 00:00:43.093\nAt the end of the episode,\n\n16\n00:00:43.093 --> 00:00:45.399\nwe left off with the bars slowly\ncrawling across the screen.\n\n17\n00:00:45.399 --> 00:00:46.385\n&gt;&gt; Yeah, right.\n\n18\n00:00:46.385 --> 00:00:48.355\nThat ever familiar progress bar.\n\n19\n00:00:48.355 --> 00:00:52.580\n&gt;&gt; [LAUGH] The lack of progress\nbar is what I like to call it.\n\n20\n00:00:52.580 --> 00:00:54.089\n&gt;&gt; [LAUGH]\n&gt;&gt; But at this point you know,\n\n21\n00:00:54.089 --> 00:00:56.899\nADFS is installed, now we just\nneed to jump in and configure it.\n\n22\n00:00:56.899 --> 00:00:59.155\nAnd while sometimes that can\nbe an intimidating process,\n\n23\n00:00:59.155 --> 00:01:00.960\nhere it's really not that bad.\n\n24\n00:01:00.960 --> 00:01:02.680\n&gt;&gt; Yeah, it's not gonna be that bad Don.\n\n25\n00:01:02.680 --> 00:01:05.350\nI mean, we're gonna have a good\ntime here with configuring this.\n\n26\n00:01:05.350 --> 00:01:08.440\nWe're going to talk about some of\nthe different ways to install ADFS.\n\n27\n00:01:08.440 --> 00:01:11.650\nDepending on your environment,\nwe'll have some dependencies on how\n\n28\n00:01:11.650 --> 00:01:14.380\nyou're gonna do your service account,\nso forth like that.\n\n29\n00:01:14.380 --> 00:01:17.040\nWe'll also be talking about\nthe actual configuration point,\n\n30\n00:01:17.040 --> 00:01:20.100\nwhich is just really\nthe barebones ADFS setup.\n\n31\n00:01:20.100 --> 00:01:23.560\nWe won't have to dive into any of that,\ncreating claims and\n\n32\n00:01:23.560 --> 00:01:24.980\nall these other things there.\n\n33\n00:01:24.980 --> 00:01:25.750\nSo we'll do that.\n\n34\n00:01:25.750 --> 00:01:27.820\nAnd then we'll start doing\nsome permissioning things.\n\n35\n00:01:27.820 --> 00:01:31.170\nWe're gonna add some groups and\nuser accounts, and so forth, like that.\n\n36\n00:01:31.170 --> 00:01:33.200\nSo it's gonna be a really\ngood fun thing here.\n\n37\n00:01:33.200 --> 00:01:34.200\nSo, let's get started.\n\n38\n00:01:34.200 --> 00:01:36.870\nAnd the first thing we\nhave to do is talk about\n\n39\n00:01:36.870 --> 00:01:39.760\nthe service account\nthe ADFS is gonna run on.\n\n40\n00:01:39.760 --> 00:01:45.065\nADFS is able to run on either\na 2008 environment or later.\n\n41\n00:01:45.065 --> 00:01:46.104\nBut in 2012,\n\n42\n00:01:46.104 --> 00:01:50.408\nMicrosoft created these things called\ngroup managed service accounts.\n\n43\n00:01:50.408 --> 00:01:54.850\nAnd the benefit of those is that you\nno longer manage the password yourself.\n\n44\n00:01:54.850 --> 00:01:58.397\nYou could actually allow the domain\ncontroller to manage that password.\n\n45\n00:01:58.397 --> 00:02:02.360\nAnd it's a high entry password,\nand it changes on a regular basis.\n\n46\n00:02:02.360 --> 00:02:06.863\nAnd it wasn't like, when if you don't have\n2012 domain controller, then you're back\n\n47\n00:02:06.863 --> 00:02:10.980\nto creating those normal service accounts,\nwhich are just regular user accounts.\n\n48\n00:02:10.980 --> 00:02:14.452\nAnd then if you have password\npolicies which most companies do,\n\n49\n00:02:14.452 --> 00:02:18.261\nthen those accounts are gonna expire,\nthat passwords gonna expire.\n\n50\n00:02:18.261 --> 00:02:20.300\nAnd then you're gonna\nhave service outages.\n\n51\n00:02:20.300 --> 00:02:23.000\nAnd the last thing we don't want\npeople to do is just check that\n\n52\n00:02:23.000 --> 00:02:25.852\nbox that says password never\nexpire on your service accounts.\n\n53\n00:02:25.852 --> 00:02:27.105\nThat's just not a good idea at all.\n\n54\n00:02:27.105 --> 00:02:30.229\n&gt;&gt; [LAUGH]\n&gt;&gt; So what we really wanna do is this,\n\n55\n00:02:30.229 --> 00:02:34.190\nget people to move towards those\ngroup managed service accounts.\n\n56\n00:02:34.190 --> 00:02:37.010\nAnd so what we're gonna do\nhere is we're gonna talk about\n\n57\n00:02:37.010 --> 00:02:38.898\nthe group managed service accounts.\n\n58\n00:02:38.898 --> 00:02:43.397\nWe're gonna have a little bit different\nset up depending on how you have those.\n\n59\n00:02:43.397 --> 00:02:47.550\nNow, I'm gonna set it up as if we're in\na 2012 domain controller, which I have.\n\n60\n00:02:47.550 --> 00:02:49.454\nSo we're gonna set it up\nin the most secure way,\n\n61\n00:02:49.454 --> 00:02:51.507\nwhich is using the group\nmanaged service account.\n\n62\n00:02:51.507 --> 00:02:57.145\nBut along the way we're gonna talk about\nwhat you might do if you only have a 2008,\n\n63\n00:02:57.145 --> 00:02:58.807\nor 2008 R2 domain.\n\n64\n00:02:58.807 --> 00:03:01.350\nAnd that way you'll at least\nhave the knowledge there.\n\n65\n00:03:01.350 --> 00:03:03.970\nSo the first thing we need to\ndo because we are going to\n\n66\n00:03:03.970 --> 00:03:08.770\nuse the group manage service account,\nis we need to prime the key distribution\n\n67\n00:03:08.770 --> 00:03:13.950\nservice that comes on every\nWindows Server 2012 domain controller.\n\n68\n00:03:13.950 --> 00:03:18.150\nThis key distribution services what makes\nthe group managed service account, or\n\n69\n00:03:18.150 --> 00:03:23.890\nwhat we call GMSAs work so well is\nbecause it uses keys that you provision.\n\n70\n00:03:23.890 --> 00:03:27.030\nAnd the way that we do this is\nwe're gonna use a PowerShell cmdlet\n\n71\n00:03:27.030 --> 00:03:31.540\non the actual domain controller to\nprime that primary key to get it going.\n\n72\n00:03:31.540 --> 00:03:34.350\nAnd then from there,\nwe'll be able to move forward.\n\n73\n00:03:34.350 --> 00:03:37.130\nSo I'm gonna go to my domain\ncontroller here that I have set up.\n\n74\n00:03:37.130 --> 00:03:40.240\nAnd as you can see, I've already\ngot a PowerShell loaded up and\n\n75\n00:03:40.240 --> 00:03:43.465\nI do need to be domain admin,\nbecause we're gonna be writing some.\n\n76\n00:03:43.465 --> 00:03:46.783\nThe results of this PowerShell cmdlet\nare going to write some content in\n\n77\n00:03:46.783 --> 00:03:47.515\nthe Active Directory.\n\n78\n00:03:47.515 --> 00:03:50.245\nSo we need to make sure we\nhave that elevation there.\n\n79\n00:03:50.245 --> 00:03:53.725\nAnd the command I've already got pre\npep because I can't type on camera.\n\n80\n00:03:53.725 --> 00:03:58.000\nSo what we're gonna do is I'm gonna paste\nit there and then we're gonna explain it.\n\n81\n00:03:58.000 --> 00:04:02.250\nSo the PowerShell cmdlet what\nwe have is the Add-KdsRootKey.\n\n82\n00:04:02.250 --> 00:04:04.910\nAnd the root key is basically,\nit's the key which\n\n83\n00:04:04.910 --> 00:04:09.300\nall other keys get derived of by this\nKDS or key distribution service.\n\n84\n00:04:09.300 --> 00:04:12.100\nThis service is stateless,\nit doesn't really store keys.\n\n85\n00:04:12.100 --> 00:04:15.330\nWhat it does is it has\nthis very complicated\n\n86\n00:04:15.330 --> 00:04:19.770\nalgorithm of deriving keys based on\na lot of different entropy factors.\n\n87\n00:04:19.770 --> 00:04:22.594\nBut before we do that,\nit still needs to be seeded with a key.\n\n88\n00:04:22.594 --> 00:04:27.951\nSo what we have is the PowerShell\ncmdlet of Add-KdsRootKey.\n\n89\n00:04:27.951 --> 00:04:31.974\nAnd then we have the effective\ntime parameter that goes to that,\n\n90\n00:04:31.974 --> 00:04:36.580\nnow that effective time says,\nwhen do we want this to be effective?\n\n91\n00:04:36.580 --> 00:04:39.380\nBecause it's being written\nto a domain controller.\n\n92\n00:04:39.380 --> 00:04:40.970\nSo when we're writing\nto a domain controller,\n\n93\n00:04:40.970 --> 00:04:45.760\nwe have to think of AD replication and\nwhen it's gonna be converging and\n\n94\n00:04:45.760 --> 00:04:48.470\nthe latency of AD replication conversions.\n\n95\n00:04:48.470 --> 00:04:52.460\nSo what we're doing in this\ncommand here is we're kind of\n\n96\n00:04:52.460 --> 00:04:56.200\ncheating it a little bit where we say,\nwe're gonna back date this by\n\n97\n00:04:56.200 --> 00:05:01.020\nadding a negative ten hours because\nwhat happens in Active Directory is\n\n98\n00:05:01.020 --> 00:05:06.140\nit doesn't really make this root\nkey available yet, until ten hours.\n\n99\n00:05:06.140 --> 00:05:06.730\nSo that way,\n\n100\n00:05:06.730 --> 00:05:10.900\nit gives Active Directory time to\nreplicate that key out before it goes.\n\n101\n00:05:10.900 --> 00:05:13.500\nWe don't have ten hours to wait and so\n\n102\n00:05:13.500 --> 00:05:15.400\nwhat we're gonna do is\ncheat it a little bit.\n\n103\n00:05:15.400 --> 00:05:17.324\nSo we're gonna run this command here.\n\n104\n00:05:17.324 --> 00:05:21.094\nAnd we'll just throw the bill into here,\nand you'll get back a GUID or GUID,\n\n105\n00:05:21.094 --> 00:05:22.143\nas we like to call it.\n\n106\n00:05:22.143 --> 00:05:25.710\nAnd this is just a way to mark this key.\n\n107\n00:05:25.710 --> 00:05:28.009\nWe don't need to know this information,\nother than to say,\n\n108\n00:05:28.009 --> 00:05:31.310\nif we don't get this response,\nthen we need to do some troubleshooting.\n\n109\n00:05:31.310 --> 00:05:34.750\nNow, I will do the up arrow here and\nsay that if you were in a lab,\n\n110\n00:05:34.750 --> 00:05:36.400\nyou can use that same command.\n\n111\n00:05:36.400 --> 00:05:39.560\nOr, they have this other one,\nwhich is effective immediately.\n\n112\n00:05:39.560 --> 00:05:41.040\nI typically don't use that one,\n\n113\n00:05:41.040 --> 00:05:43.400\nbut this is another way to where\nyou can type that command.\n\n114\n00:05:43.400 --> 00:05:47.910\nBut what we've done just there is we've\nprimed the KDS service with that root key.\n\n115\n00:05:47.910 --> 00:05:51.980\nAnd we're now ready to go with\nactually setting up ADFS,\n\n116\n00:05:51.980 --> 00:05:55.260\nwhich we're going to use a group\nmanaged service account to do so.\n\n117\n00:05:55.260 --> 00:06:00.450\nSo, I'm gonna switch over\nto my ADFS machine here.\n\n118\n00:06:00.450 --> 00:06:04.040\nAnd where we're at here, let's get\nthis other screen out of the way.\n\n119\n00:06:05.280 --> 00:06:07.320\nSo here we are with the ADFS.\n\n120\n00:06:07.320 --> 00:06:10.110\nAnd this is left off right where we had,\nwhere we\n\n121\n00:06:10.110 --> 00:06:13.690\ninstalled it in a previous episode and\nwe're ready to do some configuration.\n\n122\n00:06:13.690 --> 00:06:15.220\nSo in server manager,\n\n123\n00:06:15.220 --> 00:06:18.350\nwe have this nice little yellow\nbang up here that we can go to.\n\n124\n00:06:18.350 --> 00:06:20.539\nAnd it says, hey,\nyou need to configure your ADFS server.\n\n125\n00:06:20.539 --> 00:06:23.835\nSo we're gonna go ahead and just follow\nthe normal prompts that we have.\n\n126\n00:06:23.835 --> 00:06:28.270\nAnd here, we're being asked, hey,\nare you ready to create your ADFS.\n\n127\n00:06:28.270 --> 00:06:33.574\nAnd we're gonna create a first federation\nserver and the federation server farm.\n\n128\n00:06:33.574 --> 00:06:36.480\nSo we'll go ahead and\nclick Next on this guy here.\n\n129\n00:06:36.480 --> 00:06:39.330\nAnd I'm already logged in with\nadministrative credentials.\n\n130\n00:06:39.330 --> 00:06:41.230\nMake sure that you are elevated there.\n\n131\n00:06:41.230 --> 00:06:43.305\nIf not, you can change\nthe credentials using this prompt.\n\n132\n00:06:43.305 --> 00:06:46.920\nAnd it'll ask you to pick a credential and\nthen, you'll have to go ahead and\n\n133\n00:06:46.920 --> 00:06:48.910\nprovide it with a username and password.\n\n134\n00:06:48.910 --> 00:06:50.410\nBut mine is already there.\n\n135\n00:06:50.410 --> 00:06:54.310\nSo we're gonna go a next step forward and\nnow here's some interesting things.\n\n136\n00:06:54.310 --> 00:06:58.560\nIn our previous episode,\nwe enrolled in for that SSL Certificate.\n\n137\n00:06:58.560 --> 00:07:02.580\nAnd so now, we have to say what\nSSL Certificate are we gonna use?\n\n138\n00:07:02.580 --> 00:07:06.430\nAnd the thing is why we strategically\nhad you do it ahead of time\n\n139\n00:07:06.430 --> 00:07:09.240\nis if we go up to here to this pull-down,\n\n140\n00:07:09.240 --> 00:07:14.280\nyou can see that we have the ADFS\ncorp.contoso certificate right there.\n\n141\n00:07:14.280 --> 00:07:17.500\nAnd so\nthat certificate is there ready to go.\n\n142\n00:07:17.500 --> 00:07:20.282\nNow, what we have is\nthe federation service name.\n\n143\n00:07:20.282 --> 00:07:22.806\nWe need to TV timeout that\ncuz that should be FS.\n\n144\n00:07:24.975 --> 00:07:33.695\n[SOUND] Not quite sure why it picked up\nthat name and not subject alternate name.\n\n145\n00:07:36.404 --> 00:07:38.799\n&gt;&gt; Okay,\nit's got them both under the next name\n\n146\n00:07:38.799 --> 00:07:39.565\n&gt;&gt; Yeah.\n\n147\n00:07:39.565 --> 00:07:42.920\nNormally, it doesn't use that SSL search.\n\n148\n00:07:42.920 --> 00:07:45.080\nSo I haven't moved anything\n&gt;&gt; Okay.\n\n149\n00:07:45.080 --> 00:07:49.590\n&gt;&gt; So we can probably just pick up with-\n&gt;&gt; Well, I can throw in a question.\n\n150\n00:07:49.590 --> 00:07:50.423\n&gt;&gt; Yeah.\n&gt;&gt; And I can say,\n\n151\n00:07:50.423 --> 00:07:53.362\nnow I remember from the last\nepisode we did fs.corp.whatever and\n\n152\n00:07:53.362 --> 00:07:57.497\nthen you can say [CROSSTALK]\n&gt;&gt; Yeah, let's do that, my bad guys.\n\n153\n00:07:57.497 --> 00:08:02.458\nI thought for sure it uses the fs, but\nwith all the different web certificates\n\n154\n00:08:02.458 --> 00:08:03.870\n[INAUDIBLE]\n&gt;&gt; Yeah.\n\n155\n00:08:03.870 --> 00:08:05.784\n&gt;&gt; It is a point of confusion here, so.\n\n156\n00:08:05.784 --> 00:08:07.950\n&gt;&gt; Yeah, I can throw in a question,\nyeah perfect.\n\n157\n00:08:09.150 --> 00:08:10.550\n&gt;&gt; Thank you, sir.\n\n158\n00:08:10.550 --> 00:08:11.121\n&gt;&gt; Green light.\n\n159\n00:08:15.430 --> 00:08:19.066\nNow Mike, not to interrupt you here too\nmuch, but I remember the last episode when\n\n160\n00:08:19.066 --> 00:08:21.914\nwe created the certificate,\nit was fs.corp.contoso.com,\n\n161\n00:08:21.914 --> 00:08:25.259\nso the name here doesn't really match,\ndoes it, what's going on there?\n\n162\n00:08:25.259 --> 00:08:28.209\n&gt;&gt; You're right, Don,\nthe name doesn't match but what it is,\n\n163\n00:08:28.209 --> 00:08:30.840\nis that we're looking for\nfederation service name.\n\n164\n00:08:30.840 --> 00:08:32.640\nThe ADFS is our host name.\n\n165\n00:08:32.640 --> 00:08:39.290\nAnd the ADFS certificate is just pulling\nthe subject name out of the certificate.\n\n166\n00:08:39.290 --> 00:08:41.680\nIf we go down to\nthe federation service name,\n\n167\n00:08:41.680 --> 00:08:46.020\nwe'll see that poll down there\nhas the fscorp.contosa.com.\n\n168\n00:08:46.020 --> 00:08:49.710\nNow it's grabbing it off of the subject\nalternate name, which is what we wanna\n\n169\n00:08:49.710 --> 00:08:54.428\nbe able to address the federation or the\nfarm of servers that you would have there.\n\n170\n00:08:54.428 --> 00:08:57.950\nSo, we're gonna use that there, and\nthen we have a little friendly field.\n\n171\n00:08:57.950 --> 00:09:01.301\nI like to call these friendly or\nhappy UI fields, but\n\n172\n00:09:01.301 --> 00:09:03.900\nwe're gonna just say, contoso.com.\n\n173\n00:09:03.900 --> 00:09:08.276\nIt really doesn't matter, or\ncontoso.corporation here.\n\n174\n00:09:08.276 --> 00:09:10.080\nReally, it doesn't matter\nwhat you put in there but,\n\n175\n00:09:10.080 --> 00:09:12.570\nother than make sure you put\nsomething that you want,\n\n176\n00:09:12.570 --> 00:09:15.250\nyour user should be able to see\ncause that is what they'll see.\n\n177\n00:09:15.250 --> 00:09:17.770\n&gt;&gt; This is like the barbarous\nfederation services.\n\n178\n00:09:17.770 --> 00:09:18.920\n&gt;&gt; Yes.\n&gt;&gt; A happy name.\n\n179\n00:09:18.920 --> 00:09:20.280\n&gt;&gt; It's a happy tree name.\n\n180\n00:09:20.280 --> 00:09:22.050\nYes, absolutely here.\n\n181\n00:09:22.050 --> 00:09:26.560\nSo, we have this part of our specifying\nthe service properties ready to go.\n\n182\n00:09:26.560 --> 00:09:29.030\nSo now we're just gonna Next on\nthrough this wizard here, and\n\n183\n00:09:29.030 --> 00:09:30.930\nnow here's the critical part here.\n\n184\n00:09:30.930 --> 00:09:34.420\nIf you're using 2012 Or 2012 R2,\n\n185\n00:09:34.420 --> 00:09:38.570\nyou have the ability to use that\ngroup manage service account.\n\n186\n00:09:38.570 --> 00:09:40.900\nAnd that's the way we should\nalways try to use that.\n\n187\n00:09:40.900 --> 00:09:45.520\nIf any service that you have whether it\nbe ADFS or any of the other ones, if they\n\n188\n00:09:45.520 --> 00:09:49.120\nsupport group manage service accounts\nit's highly encouraged that you use those\n\n189\n00:09:49.120 --> 00:09:53.480\naccounts because they're just way more\nsecure, less overhead on your part.\n\n190\n00:09:53.480 --> 00:09:57.740\nIf, however, you haven't decided to make\nthat move yet to 2012 or 2012 R2, you're\n\n191\n00:09:57.740 --> 00:10:01.240\nstill okay, you go ahead and you would\ncheck this bottom box down here that says,\n\n192\n00:10:01.240 --> 00:10:03.360\nuse an existing domain user account.\n\n193\n00:10:03.360 --> 00:10:06.670\nAnd that's just a normal service account\nthat we've been using in Windows for,\n\n194\n00:10:06.670 --> 00:10:08.350\nwell, quite a while now.\n\n195\n00:10:08.350 --> 00:10:10.730\nSo, that's just gonna be your\nnormal user account, and\n\n196\n00:10:10.730 --> 00:10:12.880\nyou'll have to manage\nthat password separately.\n\n197\n00:10:12.880 --> 00:10:17.660\nSo, we're gonna use this top box here,\nand we're gonna make it ideally,\n\n198\n00:10:17.660 --> 00:10:21.280\nyou wanna kind of have a little bit of\nobfuscation with your service names,\n\n199\n00:10:21.280 --> 00:10:26.430\nbut for more clarity in the lab,\nI'm just gonna name it ADFS SVC.\n\n200\n00:10:26.430 --> 00:10:29.650\nAnd that's what it's gonna do, so that\nway we know that that is a ADFS service\n\n201\n00:10:29.650 --> 00:10:32.980\naccount, and it'll be very visible\nas we start trying to pick it out.\n\n202\n00:10:32.980 --> 00:10:35.920\nCuz we're gonna be adding this\naccount to several different groups.\n\n203\n00:10:35.920 --> 00:10:38.360\nWe're gonna be doing some permissions\nto it, and so forth like that.\n\n204\n00:10:38.360 --> 00:10:41.490\nSo, we wanna be able to be\nidentify that pretty easily.\n\n205\n00:10:41.490 --> 00:10:43.670\nSo we have our account made,\nwe're ready to go there.\n\n206\n00:10:43.670 --> 00:10:45.122\nNow, we're gonna go Next.\n\n207\n00:10:45.122 --> 00:10:49.322\nNow, here comes back to that planning part\nwe talked about, where are you gonna use\n\n208\n00:10:49.322 --> 00:10:53.060\nthe Windows Internal Database or\nare you gonna use a SQL Server?\n\n209\n00:10:53.060 --> 00:10:56.220\nAnd, we went through those in that\nepisode about when you should and\n\n210\n00:10:56.220 --> 00:10:57.570\nshould not use those.\n\n211\n00:10:57.570 --> 00:11:01.480\nSo take that decision making that you\ndid previously, and apply it to here.\n\n212\n00:11:01.480 --> 00:11:04.760\nFor us, we have a small farm\nin our lab environment.\n\n213\n00:11:04.760 --> 00:11:06.330\nSo we don't need a SQL server, so\n\n214\n00:11:06.330 --> 00:11:09.350\nwe're gonna just use\nthe Windows Internal Database.\n\n215\n00:11:09.350 --> 00:11:11.190\nSo we're gonna hit Next on this guy here.\n\n216\n00:11:11.190 --> 00:11:14.720\nAnd that's gonna be pretty much\neverything that we need to do.\n\n217\n00:11:14.720 --> 00:11:19.120\nThis guy's now reviewing all of our\nselections, and telling us ready to go and\n\n218\n00:11:19.120 --> 00:11:20.300\nall these other things.\n\n219\n00:11:20.300 --> 00:11:23.731\nIncidentally enough, just to show\npeople if they haven't remembered it,\n\n220\n00:11:23.731 --> 00:11:25.125\nyou can hit this view script and\n\n221\n00:11:25.125 --> 00:11:28.251\nit will pop like up a template where\nif you want to like automate this.\n\n222\n00:11:28.251 --> 00:11:30.555\nSo for future versions or\nanything like that,\n\n223\n00:11:30.555 --> 00:11:33.507\nit gives you the nice PowerShell\ncmdlet that you can see, so\n\n224\n00:11:33.507 --> 00:11:37.580\nyou can actually start deploying\nthese through PowerShell, if need be.\n\n225\n00:11:37.580 --> 00:11:39.873\nSo we'll close out of that, and then,\n\n226\n00:11:39.873 --> 00:11:42.801\nwe're gonna confirm all\nthis Information here.\n\n227\n00:11:42.801 --> 00:11:46.120\nWe're gonna get all of these\nprerequisite checks of met.\n\n228\n00:11:46.120 --> 00:11:48.759\nIt's gonna tell you that the route\nkey was just created, but\n\n229\n00:11:48.759 --> 00:11:50.481\nremember we backdated that route key.\n\n230\n00:11:50.481 --> 00:11:53.321\nSo Active Directory is gonna go ahead and\nshare that route key out, and\n\n231\n00:11:53.321 --> 00:11:55.140\nwe're gonna be okay there.\n\n232\n00:11:55.140 --> 00:11:59.541\nAnd now we're just gonna say configure and\nagain, as Don and I wish we got paid for\n\n233\n00:11:59.541 --> 00:12:01.048\nevery progress bar we saw.\n\n234\n00:12:01.048 --> 00:12:02.487\n&gt;&gt; [LAUGH]\n&gt;&gt; We certainly do not, but\n\n235\n00:12:02.487 --> 00:12:05.711\nnow we're just going to let ADFS kind\nof go off and run it's course while\n\n236\n00:12:05.711 --> 00:12:09.187\nit's installing the Windows Internal\nDatabase, and all of those things.\n\n237\n00:12:10.528 --> 00:12:13.310\nSo, while we have that gong on here,\nso in the review,\n\n238\n00:12:13.310 --> 00:12:17.001\nwe've created the group managed\nservice account, we have that going,\n\n239\n00:12:17.001 --> 00:12:19.070\nwe've done the configuration wizard.\n\n240\n00:12:19.070 --> 00:12:21.267\nWe're now letting the wizard install,\nand so forth like that.\n\n241\n00:12:21.267 --> 00:12:25.489\nWe're gonna hop back over onto the domain\ncontroller now, because we're gonna do\n\n242\n00:12:25.489 --> 00:12:29.526\nsome permissions things that we need to do\nin order to make sure that this service\n\n243\n00:12:29.526 --> 00:12:33.590\naccount that we've created for ADFS can\nactually have all the access it needs.\n\n244\n00:12:33.590 --> 00:12:37.430\nSo let me hop on over to my\ndomain controller again, and,\n\n245\n00:12:37.430 --> 00:12:39.830\nwe don't need the PowerShell\ncmdlet anymore.\n\n246\n00:12:39.830 --> 00:12:44.557\nSo now what we need to do is,\nwe need to give this service account\n\n247\n00:12:44.557 --> 00:12:48.414\npermissions to be able to\nregister the public key.\n\n248\n00:12:48.414 --> 00:12:51.470\nRemember in our very early\nepisodes we said that,\n\n249\n00:12:51.470 --> 00:12:55.854\nthe ADFS service is the device\nregistration service for our computer.\n\n250\n00:12:55.854 --> 00:12:59.506\nIt's also the key registration service for\nour user accounts,\n\n251\n00:12:59.506 --> 00:13:02.752\nremember that public key has\nto be stored somewhere, and\n\n252\n00:13:02.752 --> 00:13:07.598\nwe need to be able to make ADFS available\nto write and read to that public key.\n\n253\n00:13:07.598 --> 00:13:11.960\nSo I'm gonna start up Active Directory\nusers and computers, and\n\n254\n00:13:11.960 --> 00:13:16.640\nthat's doing it through the dsa.msc\nprompt, and we'll get that up there and\n\n255\n00:13:16.640 --> 00:13:20.100\nboom, now we have our users and\ncomputers open.\n\n256\n00:13:20.100 --> 00:13:24.600\nNow, if you remember back,\nwe created a group, a security group.\n\n257\n00:13:24.600 --> 00:13:29.300\nSpecifically so we can manage the security\nto these attributes in Active Directory.\n\n258\n00:13:29.300 --> 00:13:30.568\nAnd where that group is,\n\n259\n00:13:30.568 --> 00:13:34.060\nis that's gonna be the Key\nCredential Admins group, right here.\n\n260\n00:13:34.060 --> 00:13:35.800\nAnd you'll see this group right here.\n\n261\n00:13:35.800 --> 00:13:37.760\nAnd so now, what we're going to do is,\n\n262\n00:13:37.760 --> 00:13:41.230\nwe're gonna add the Active Directory\nservice account,\n\n263\n00:13:41.230 --> 00:13:45.150\nthat group managed service account into,\nas a member of this group.\n\n264\n00:13:45.150 --> 00:13:48.800\nAnd so we'll just go ahead and\nuse our normal one, make sure here,\n\n265\n00:13:48.800 --> 00:13:52.300\nand you'll get these service accounts,\nmake sure that that's available.\n\n266\n00:13:52.300 --> 00:13:55.160\nAnd we can just do ADFS SVC,\n\n267\n00:13:55.160 --> 00:13:57.620\nwe'll do it check names to make\nsure we didn't misspell anything.\n\n268\n00:13:57.620 --> 00:14:00.817\nWe see that it's good, and\nthen boom, we have now,\n\n269\n00:14:00.817 --> 00:14:05.758\nwe've provisioned the service account to\nwhere it now knows how to actually, it\n\n270\n00:14:05.758 --> 00:14:10.937\nwill have the access permission it needs\nto write to those particular directories.\n\n271\n00:14:10.937 --> 00:14:14.090\nBut, we haven't given it permissions yet.\n\n272\n00:14:14.090 --> 00:14:19.300\nSo what we need to do now is we need to\nset the permissions in Active Directory.\n\n273\n00:14:19.300 --> 00:14:24.150\nSo that, that key credential group\nactually ask to permissions to write and\n\n274\n00:14:24.150 --> 00:14:27.490\nupdate that account, and to read that\naccount as that we'll be very federal\n\n275\n00:14:27.490 --> 00:14:31.810\nread informations, very when we're getting\nto talking about the certificate issuance.\n\n276\n00:14:31.810 --> 00:14:36.215\nSo, what we wanna do is, we wanna go\nto the domain, the top of the domain.\n\n277\n00:14:36.215 --> 00:14:39.559\nNow, you don't necessarily need to\ndo the permission at the top of\n\n278\n00:14:39.559 --> 00:14:43.590\nthe domain because this information\nare going to inherit so just user objects.\n\n279\n00:14:43.590 --> 00:14:48.860\nSo if you have user objects in various\nOUs, or you're gonna use OUs as part\n\n280\n00:14:48.860 --> 00:14:53.620\nof your phase approach so forth, by all\nmeans, you can do these permissions there.\n\n281\n00:14:53.620 --> 00:14:54.330\nBut remember,\n\n282\n00:14:54.330 --> 00:14:58.710\nthese permissions are only gonna apply to\nthe users that are in that OU and below.\n\n283\n00:14:58.710 --> 00:15:03.579\nSo if you eventually start migrating\nusers that are outside of those OUs,\n\n284\n00:15:03.579 --> 00:15:07.910\nthe ADFS service is not gonna have\npermissions where that group won't have\n\n285\n00:15:07.910 --> 00:15:10.480\npermissions to update\nthose users accounts.\n\n286\n00:15:10.480 --> 00:15:12.600\nAnd so what's gonna happen is\nyour gonna see some failures,\n\n287\n00:15:12.600 --> 00:15:15.560\nit's gonna be pretty difficult to\ntroubleshoot cuz you're not gonna know.\n\n288\n00:15:15.560 --> 00:15:20.580\nSo what I like to do is, because we're\ngonna just do inherited ackling or\n\n289\n00:15:20.580 --> 00:15:23.340\naccess control, I like to do it\nat the top of the domain, so\n\n290\n00:15:23.340 --> 00:15:26.800\nthat way all the users' accounts\nwill inherit this permission.\n\n291\n00:15:26.800 --> 00:15:31.680\nSo that way, if I forget a user,\nfail to put him in a proper group,\n\n292\n00:15:31.680 --> 00:15:35.890\nor anything like that,\nI know that the ADFS service is basically\n\n293\n00:15:35.890 --> 00:15:37.960\nall ready configured to make\nsure that all the users,\n\n294\n00:15:37.960 --> 00:15:41.360\nno matter what OU they're in,\nthey'll get the proper permissions.\n\n295\n00:15:41.360 --> 00:15:43.910\nSo we're gonna go Properties.\n\n296\n00:15:43.910 --> 00:15:45.978\nAnd then we're gonna have\nthis Security tab here.\n\n297\n00:15:45.978 --> 00:15:51.510\nAnd in the Security tab, we wanna add the\nkey credential admins group to this tab.\n\n298\n00:15:51.510 --> 00:15:54.861\nSo we're gonna go add, and\n\n299\n00:15:54.861 --> 00:15:59.678\nwe can just say key credential admins.\n\n300\n00:16:01.944 --> 00:16:04.421\nAnd we'll do a check names again,\nmake sure we have the right one.\n\n301\n00:16:04.421 --> 00:16:05.130\nAnd so we do.\n\n302\n00:16:05.130 --> 00:16:08.620\nSo then boom, we've got it here and\nwe have read.\n\n303\n00:16:08.620 --> 00:16:10.570\nThis isn't the permission we want,\nobviously.\n\n304\n00:16:10.570 --> 00:16:13.800\nWe need to actually change this out so\nwhat we wanna do is just,\n\n305\n00:16:13.800 --> 00:16:16.630\nwe wanna do advanced.\n\n306\n00:16:16.630 --> 00:16:18.910\nAnd we wanna look through this list and\n\n307\n00:16:18.910 --> 00:16:22.040\nhighlight the key credential\nadmin's group right here.\n\n308\n00:16:22.040 --> 00:16:26.160\nAnd in this group, we wanna actually do,\nin this list, we went ahead and\n\n309\n00:16:26.160 --> 00:16:27.930\nedit this one access control entry.\n\n310\n00:16:27.930 --> 00:16:32.850\nAnd so we're gonna edit it, and then we\nget back to the top, it has our principal\n\n311\n00:16:32.850 --> 00:16:35.870\nname, which is the key credential\nadmin's group, that's right.\n\n312\n00:16:35.870 --> 00:16:37.000\nWe have the allow, but\n\n313\n00:16:37.000 --> 00:16:40.870\nwe want to do is we want to change\nthis applies to setting here.\n\n314\n00:16:40.870 --> 00:16:42.890\nThis setting needs to change and\nit's really easy.\n\n315\n00:16:42.890 --> 00:16:46.240\nWe're just going to scroll this guy\nall the way down to the bottom here.\n\n316\n00:16:46.240 --> 00:16:49.980\nAnd we're going to say,\ndescendant user objects.\n\n317\n00:16:49.980 --> 00:16:53.920\nSo what this is doing is although we're\nsetting the permission at the root of\n\n318\n00:16:53.920 --> 00:16:59.480\nthe domain, this permission isn't gonna\napply to everything in the domain.\n\n319\n00:16:59.480 --> 00:17:03.080\nIt's only gonna look at user\nobjects within the domain and\n\n320\n00:17:03.080 --> 00:17:06.290\napply the permissions\nto those user objects.\n\n321\n00:17:06.290 --> 00:17:07.840\nAnd so this is a really quick way.\n\n322\n00:17:07.840 --> 00:17:12.380\nIt's also, it's actually, when you look at\ndatabase storage within Active Directory,\n\n323\n00:17:12.380 --> 00:17:15.860\nit's actually a much more efficient way\nto do this because you're not tackling\n\n324\n00:17:15.860 --> 00:17:20.140\nevery object that that particular\nsecurity descriptor has to be kept in,\n\n325\n00:17:20.140 --> 00:17:20.940\nevery, memory here.\n\n326\n00:17:20.940 --> 00:17:23.140\nSo what we're doing is we\ncan do a single instance and\n\n327\n00:17:23.140 --> 00:17:25.140\nthen just let it inherit down.\n\n328\n00:17:25.140 --> 00:17:29.850\nNow the permission that we're really\ninterested in the most is giving this\n\n329\n00:17:29.850 --> 00:17:35.260\ngroup permission to the actual MSDS\nkey credential link attribute.\n\n330\n00:17:35.260 --> 00:17:36.330\nThat's all this needs.\n\n331\n00:17:36.330 --> 00:17:37.350\nWe don't want to do.\n\n332\n00:17:37.350 --> 00:17:39.990\nSo we want to just give it enough\npermissions that it needs.\n\n333\n00:17:39.990 --> 00:17:42.730\nSo what we're gonna do is,\nwe're gonna scroll down here.\n\n334\n00:17:42.730 --> 00:17:45.400\nBecause if you look,\nthis thing has a gobs and\n\n335\n00:17:45.400 --> 00:17:47.700\ngobs of informations\nthat we just don't want.\n\n336\n00:17:47.700 --> 00:17:50.830\nAnd hidden down way at the bottom,\nis this clear button.\n\n337\n00:17:50.830 --> 00:17:54.820\nWhich is very helpful so we don't\nhave to uncheck every one of these.\n\n338\n00:17:54.820 --> 00:17:56.200\nAnd so then,\n\n339\n00:17:56.200 --> 00:17:59.960\nit puts us back at the top which is\nokay cuz we need to scroll down again.\n\n340\n00:17:59.960 --> 00:18:04.050\nAnd we wanna look for\nthe read &amp; write permissions for\n\n341\n00:18:04.050 --> 00:18:06.130\nthat one particular object.\n\n342\n00:18:06.130 --> 00:18:11.600\nAnd so we're gonna scroll and these things\nare gonna start out and it was MSDS.\n\n343\n00:18:11.600 --> 00:18:16.213\nAnd as we keep going,\nwe're gonna see read and\n\n344\n00:18:16.213 --> 00:18:19.538\nwrite MSDS, so scrolling here.\n\n345\n00:18:19.538 --> 00:18:23.427\nAnd unfortunately there's no real easy\nway other than to keep scanning for\n\n346\n00:18:23.427 --> 00:18:25.100\nthese particular values here.\n\n347\n00:18:25.100 --> 00:18:29.570\nAnd we're gonna look for\nthe MSDS key credential object.\n\n348\n00:18:29.570 --> 00:18:31.150\nDid I make sure I got users?\n\n349\n00:18:31.150 --> 00:18:33.370\nI did.\nSo we're gonna look for\n\n350\n00:18:33.370 --> 00:18:39.300\nMSDS key credential and it's gonna\nbe cuz it wraps all the way down\n\n351\n00:18:39.300 --> 00:18:42.820\nIs going to be, we're getting closer.\n\n352\n00:18:42.820 --> 00:18:45.820\n&gt;&gt; While you're hunting for that,\nlet me just remind the viewers that\n\n353\n00:18:45.820 --> 00:18:49.300\nway back in one of the earlier episodes\nis when we created these groups, and\n\n354\n00:18:49.300 --> 00:18:52.100\nyou could have created the group with\na different name, and so, if you did that,\n\n355\n00:18:52.100 --> 00:18:54.610\nremember, these aren't necessarily\nfixed names of the groups.\n\n356\n00:18:54.610 --> 00:18:56.440\nThere's the group names that we chose,\nand And\n\n357\n00:18:56.440 --> 00:18:59.390\nMike has a good habit of picking names\nthat are always very descriptive\n\n358\n00:18:59.390 --> 00:19:02.090\nthat are easy to remember so\nthat's a useful habit to have.\n\n359\n00:19:02.090 --> 00:19:03.930\n&gt;&gt; Yes and that's a great point Don.\n\n360\n00:19:03.930 --> 00:19:08.520\nYes, if you are using names that resonate\nmore to you than they do to me then\n\n361\n00:19:08.520 --> 00:19:12.100\nmaybe Make sure you substitute\nthose names there because you're\n\n362\n00:19:12.100 --> 00:19:14.510\nnot hardwired into these names.\n\n363\n00:19:14.510 --> 00:19:17.140\nWe will get a section in to\nwhen we get into the MFA,\n\n364\n00:19:17.140 --> 00:19:20.690\nso where there is a group that\nhas to have that specific name.\n\n365\n00:19:20.690 --> 00:19:24.150\nBut these, make sure that they're just\nintuitive to you and your organization,\n\n366\n00:19:24.150 --> 00:19:26.790\nas every organization as\nthey're own naming scheme.\n\n367\n00:19:26.790 --> 00:19:31.140\nSo I've scrolled far enough now to\nwhere I actually have found it.\n\n368\n00:19:31.140 --> 00:19:31.880\nAnd here they are.\n\n369\n00:19:31.880 --> 00:19:35.700\nHere's the read MSDS key credential,\nand write.\n\n370\n00:19:35.700 --> 00:19:39.050\nSo I'm gonna go ahead and\nadd those two check boxes there.\n\n371\n00:19:39.050 --> 00:19:42.420\nNothing more, and\nthen I'm gonna go ahead and click OK.\n\n372\n00:19:42.420 --> 00:19:47.300\nAnd now what we've done is we've\ncreated a security descriptor with\n\n373\n00:19:47.300 --> 00:19:51.660\nan access control entry in there\nthat will give that group and\n\n374\n00:19:51.660 --> 00:19:55.420\nany members in that group the ability\nto read and write those keys.\n\n375\n00:19:55.420 --> 00:20:00.750\nSo with that said we can go ahead and\nhit OK on here Okay, one more time.\n\n376\n00:20:00.750 --> 00:20:04.020\nAnd we've now committed\nthese in the directory and\n\n377\n00:20:04.020 --> 00:20:06.920\nnow the directory propagation\nis working just fine there.\n\n378\n00:20:06.920 --> 00:20:09.870\nSo now we are ready for\nthe device registration and\n\n379\n00:20:09.870 --> 00:20:12.450\nall these other things\nto actually start going.\n\n380\n00:20:12.450 --> 00:20:15.660\nAnd speaking of the device registration,\nI think now is time\n\n381\n00:20:15.660 --> 00:20:19.920\nthat I'm actually going to put the device\nregistration and turn that on.\n\n382\n00:20:19.920 --> 00:20:24.880\nAnd this is probably the simplest\nconfiguration we'll ever see today.\n\n383\n00:20:24.880 --> 00:20:29.150\nWe're going to go back to the ADFS server\nand this guy should be done now and he is.\n\n384\n00:20:29.150 --> 00:20:33.180\nAnd so we'll close out of that and\nwe'll lose out of server manager here.\n\n385\n00:20:33.180 --> 00:20:35.510\nAnd now if I go to my\nadministrative tools,\n\n386\n00:20:36.920 --> 00:20:40.820\nwhich is right here I should now\nsee the ADFS management piece.\n\n387\n00:20:40.820 --> 00:20:45.030\nAnd so I'm going to start this guy up and\n\n388\n00:20:45.030 --> 00:20:50.040\nwhen we see this guy come up, it's gonna\nbe like hey, here's the ADFS console.\n\n389\n00:20:50.040 --> 00:20:54.340\nAnd as Don mentioned before, there's so\nmuch you can do with this that it's\n\n390\n00:20:54.340 --> 00:20:58.130\nreally just a matter of like Knowing\nwhich entries you want t do.\n\n391\n00:20:58.130 --> 00:21:02.040\nAnd what we're looking for here is\nwe're gonna expand the services node.\n\n392\n00:21:02.040 --> 00:21:04.290\nAnd in here there's device registration.\n\n393\n00:21:04.290 --> 00:21:08.370\nAnd it's like hey, it immediately\ntells us hey you're not configured for\n\n394\n00:21:08.370 --> 00:21:10.520\ndevice registration so it's good to note.\n\n395\n00:21:10.520 --> 00:21:14.860\nAnd we're gonna see this little link\nright here we're gonna tap that link.\n\n396\n00:21:14.860 --> 00:21:18.610\nAnd it's gonna say, make sure, and\nthis is a good warning to have,\n\n397\n00:21:18.610 --> 00:21:23.780\nif you're using Azure AD, Office 365,\nif you're federated in any way,\n\n398\n00:21:23.780 --> 00:21:26.500\nthis is not the device\nregistration you're looking for.\n\n399\n00:21:26.500 --> 00:21:28.770\nKinda like the Star Wars thing.\n\n400\n00:21:28.770 --> 00:21:31.290\nThis is for on-prem only.\n\n401\n00:21:31.290 --> 00:21:35.310\nIf you're federated in any way, you\nwanna use device registration in Azure.\n\n402\n00:21:35.310 --> 00:21:39.390\nSo, make sure you look at this, make sure\nyou've done the due diligence to know.\n\n403\n00:21:39.390 --> 00:21:42.640\nThat you are not federated\nin your setting this up.\n\n404\n00:21:42.640 --> 00:21:44.600\nSo we are not federated so\nwe're gonna hit OK.\n\n405\n00:21:44.600 --> 00:21:47.770\nAnd now we got a little speedy donut and\nwe're done.\n\n406\n00:21:47.770 --> 00:21:50.140\nThat is the best thing we've ever done.\n\n407\n00:21:50.140 --> 00:21:53.060\nAs far as the easiest thing,\nclicking a hyperlink and ready to go.\n\n408\n00:21:53.060 --> 00:21:58.180\nSo now We've got device registration\ngoing, we have configured the permissions,\n\n409\n00:21:58.180 --> 00:22:01.020\nwe're ready to do that,\nwe've installed ADFS.\n\n410\n00:22:01.020 --> 00:22:03.900\nBut we still have a lot\nmore to do here in order\n\n411\n00:22:03.900 --> 00:22:06.710\nto getting this thing tweaked\nthe way we just want it.\n\n412\n00:22:06.710 --> 00:22:10.330\n&gt;&gt; Alright, so in this episode we\ngot a chance to see getting our\n\n413\n00:22:10.330 --> 00:22:13.900\nmanaged service account set up which is\nreally important to improve security and\n\n414\n00:22:13.900 --> 00:22:16.030\nno reason not to use them,\nit's built into the OS.\n\n415\n00:22:16.030 --> 00:22:18.090\nWe had a chance to see\nconfigure the certificate for\n\n416\n00:22:18.090 --> 00:22:22.160\nfederation services as well as setting\nup the device registration service and\n\n417\n00:22:22.160 --> 00:22:25.780\nonce it's done we're ready to move on\nto our following episodes, but for\n\n418\n00:22:25.780 --> 00:22:27.780\nthis episode it's a pretty good spot for\nus to stop.\n\n419\n00:22:27.780 --> 00:22:30.140\nDid you have any other things you\nwanted to mention before we wrap up.\n\n420\n00:22:30.140 --> 00:22:33.556\n&gt;&gt; No we're good with this,\nwe've got device registration service, but\n\n421\n00:22:33.556 --> 00:22:37.476\nagain there's multiple services that we're\ngonna use and leverage out of ADFS and\n\n422\n00:22:37.476 --> 00:22:38.610\nthere's more to come.\n\n423\n00:22:38.610 --> 00:22:39.584\n&gt;&gt; Awesome.\n\n424\n00:22:39.584 --> 00:22:40.252\nAll right.\nWell, for\n\n425\n00:22:40.252 --> 00:22:42.360\neverybody out there in TV land\nwe're gonna wrap it up right here.\n\n426\n00:22:42.360 --> 00:22:46.631\nLike I said, stay tuned because we got\nmore configuring Window's Hello for\n\n427\n00:22:46.631 --> 00:22:47.840\nBusiness coming up.\n\n428\n00:22:47.840 --> 00:22:50.845\nBut for now signing off for\nIT Pro TV, I'm Don Pezet.\n\n429\n00:22:50.845 --> 00:22:51.821\n&gt;&gt; And I'm Mike Stephens.\n\n430\n00:22:51.821 --> 00:22:53.604\n&gt;&gt; And we'll see you next time.\n\n431\n00:22:53.604 --> 00:22:59.577\n[MUSIC]\n\n432\n00:22:59.577 --> 00:23:03.130\nThat you for watching IT Pro TV.\n\n",
          "vimeoId": "216550300"
        },
        {
          "description": "In this episode, Don and Mike walk the viewers through configuring the Registration Authority to support Windows Hello for Business. Mike explains how to leverage group managed service accounts and custom certificate templates. Finally, Mike uses the certutil command to modify the certificate template to suite Windows Hello for Business.",
          "length": "1755",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-1-configuring_the_registration_authority-050317-PGM.00_29_44_28.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-1-configuring_the_registration_authority-050317-PGM.00_29_44_28.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-1-configuring_the_registration_authority-050317-PGM.00_29_44_28.Still001-sm.jpg",
          "title": "Configuring the Registration Authority",
          "transcript": "WEBVTT\n\n1\n00:00:00.260 --> 00:00:03.974\nWelcome to ITProTV,\n\n2\n00:00:03.974 --> 00:00:08.311\nI'm your host [CROSSTALK]\n\n3\n00:00:08.311 --> 00:00:12.926\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.926 --> 00:00:13.520\n&gt;&gt; All right.\n\n5\n00:00:13.520 --> 00:00:15.590\nGood morning, good afternoon,\nand good evening.\n\n6\n00:00:15.590 --> 00:00:17.963\nAnd welcome back to another\nepisode of ITProTV.\n\n7\n00:00:17.963 --> 00:00:22.190\nI'm your host Don Pezet, back again with\nanother episode of Windows Hello for\n\n8\n00:00:22.190 --> 00:00:22.840\nbusiness.\n\n9\n00:00:22.840 --> 00:00:25.769\nAnd in this episode, we're gonna\nbe talking a look at configuring\n\n10\n00:00:25.769 --> 00:00:28.817\nthe Registration Authority to\nsupport Windows Hello for Business.\n\n11\n00:00:28.817 --> 00:00:30.630\nKind of the whole reason we are here.\n\n12\n00:00:30.630 --> 00:00:34.120\nAnd to help us with that, here in\nthe studio once again, Mr. Mike Stephens.\n\n13\n00:00:34.120 --> 00:00:35.170\nMike how you doing today?\n\n14\n00:00:35.170 --> 00:00:35.910\n&gt;&gt; How are you doing Don?\n\n15\n00:00:35.910 --> 00:00:37.000\nThanks for having me.\n\n16\n00:00:37.000 --> 00:00:38.800\n&gt;&gt; All right, so\nthe Registration Authority.\n\n17\n00:00:38.800 --> 00:00:42.920\nObviously a critical piece here to get all\nthese working because somebody has to be\n\n18\n00:00:42.920 --> 00:00:45.550\nhelping the clients register to be\nable to participate in Windows Hello.\n\n19\n00:00:46.700 --> 00:00:49.050\nWhere do we start with\ngetting this one set up?\n\n20\n00:00:49.050 --> 00:00:50.540\n&gt;&gt; Yeah, this one's gonna be interesting.\n\n21\n00:00:50.540 --> 00:00:54.345\nSo the Registration Authority is\na new feature that we're adding into\n\n22\n00:00:54.345 --> 00:00:55.964\nWindows Hello for Business.\n\n23\n00:00:55.964 --> 00:00:59.277\nAnd it's gonna be part of an update\nthat we're gonna be coming out\n\n24\n00:00:59.277 --> 00:01:00.490\nsometime this summer.\n\n25\n00:01:00.490 --> 00:01:02.780\nAs of today, it's gonna be this summer.\n\n26\n00:01:02.780 --> 00:01:07.617\nAnd so, the Registration Authority is\na critical piece of this because it's this\n\n27\n00:01:07.617 --> 00:01:11.066\ntrusted intermediary that\nbasically we're gonna rely.\n\n28\n00:01:11.066 --> 00:01:15.060\nAnd we'll have some more details\nof that later in the episode.\n\n29\n00:01:15.060 --> 00:01:18.630\nBut basically, this is the guy who's\ngonna be enrolling certificates for\n\n30\n00:01:18.630 --> 00:01:22.100\nyour users for you, so\nwe're gonna set guy up.\n\n31\n00:01:22.100 --> 00:01:23.631\nThis is a new feature that\nwe're bringing out to you.\n\n32\n00:01:23.631 --> 00:01:27.938\nAnd so what we need to do is we need to\nlook at how this Registration Authority's\n\n33\n00:01:27.938 --> 00:01:29.160\ngonna work out.\n\n34\n00:01:29.160 --> 00:01:32.650\nAnd the first thing that we do with\nRegistration Authority is just\n\n35\n00:01:32.650 --> 00:01:34.088\nwe need to give it a certificate.\n\n36\n00:01:34.088 --> 00:01:38.750\nBasically how a Registration Authority\nworks is that it is a go-between or,\n\n37\n00:01:38.750 --> 00:01:40.850\nlike what we say, an enroll on behalf of.\n\n38\n00:01:40.850 --> 00:01:45.450\nSo if I wanted to enroll\na certificate I can't do it directly.\n\n39\n00:01:45.450 --> 00:01:49.173\nI need to give that certificate\nrequest to a trusted third party,\n\n40\n00:01:49.173 --> 00:01:50.875\nwho may do some validations.\n\n41\n00:01:50.875 --> 00:01:54.700\nIn this case in Windows Hello for\nBusiness, we do, and we'll show you those.\n\n42\n00:01:54.700 --> 00:01:58.225\nAnd once he validates those\nparticular gates that he wants,\n\n43\n00:01:58.225 --> 00:02:02.303\nthat Registration Authority then\nsigns the certificate request with\n\n44\n00:02:02.303 --> 00:02:03.629\nits own certificate.\n\n45\n00:02:03.629 --> 00:02:06.329\nAnd then sends it over to\nthe certificate authority, the CA.\n\n46\n00:02:06.329 --> 00:02:10.572\nAnd then the CA has some information on\nthat certificate template that you're\n\n47\n00:02:10.572 --> 00:02:15.220\nrequesting that gauge whether or not you\nare allowed to have that certificate.\n\n48\n00:02:15.220 --> 00:02:18.690\nAnd so this is a really great way\nto have that defense in depth,\n\n49\n00:02:18.690 --> 00:02:22.210\nto make sure that users aren't\nrequesting certificates directly.\n\n50\n00:02:22.210 --> 00:02:25.399\nBut before we can actually get to\nthe meat and potatoes of this and\n\n51\n00:02:25.399 --> 00:02:29.251\nget the users a certificate, we need\nto set up that Registration Authority.\n\n52\n00:02:29.251 --> 00:02:32.710\nAnd the first thing we need to do is\ncreate a certificate template for that.\n\n53\n00:02:32.710 --> 00:02:36.295\nNow, we've created certificate templates\nin that past, and so this one,\n\n54\n00:02:36.295 --> 00:02:37.535\nwe're gonna show again.\n\n55\n00:02:37.535 --> 00:02:40.760\nWe're not gonna go into all the details\nof those particular tabs, so\n\n56\n00:02:40.760 --> 00:02:43.050\nto speak because we've\nalready covered those.\n\n57\n00:02:43.050 --> 00:02:47.530\nBut we do want to show you the ones\nthat are a little nuanced,\n\n58\n00:02:47.530 --> 00:02:49.690\nbecause it's a different type\nof certificate template.\n\n59\n00:02:49.690 --> 00:02:51.620\nSo I want to be pointing out that one.\n\n60\n00:02:51.620 --> 00:02:53.940\nAnd then once we get to this one,\nwe're going to have another one,\n\n61\n00:02:53.940 --> 00:02:57.130\nwhich is the authentication cert.,\nwhich has that extra metadata that\n\n62\n00:02:57.130 --> 00:03:01.450\nthe Certificate Authority's going to look\nat to make sure nobody directs and rolls.\n\n63\n00:03:01.450 --> 00:03:05.056\nSo what I'm going to do is go to\nmy Certificate Authority here,\n\n64\n00:03:05.056 --> 00:03:06.086\nthat I have here.\n\n65\n00:03:06.086 --> 00:03:09.546\nAnd let you know that there's two\ndifferent types of ways to set this\n\n66\n00:03:09.546 --> 00:03:11.010\nCertificate Authority up.\n\n67\n00:03:12.300 --> 00:03:13.900\nAnd the best way to illustrate this is,\n\n68\n00:03:13.900 --> 00:03:16.570\nlet me get into my\nCertificate Template Manager, and\n\n69\n00:03:16.570 --> 00:03:19.250\nI wanna show you these enrollment agents.\n\n70\n00:03:19.250 --> 00:03:24.829\nWe have basically a computer and\nthis offline request one.\n\n71\n00:03:24.829 --> 00:03:30.510\nNow, the enrollment agent itself is\nthe template that we're gonna duplicate.\n\n72\n00:03:30.510 --> 00:03:33.440\nBut why would I use\nan offline versus an online?\n\n73\n00:03:33.440 --> 00:03:37.661\nAnd the difference there is basically to\njust let you know is this depends on your\n\n74\n00:03:37.661 --> 00:03:38.992\ndomain configuration.\n\n75\n00:03:38.992 --> 00:03:41.575\nIf you are using the 2008\ndomain controller,\n\n76\n00:03:41.575 --> 00:03:46.120\nthat means you have normal user account\nthat you created to run your ADFS server.\n\n77\n00:03:46.120 --> 00:03:51.158\nAnd then that way, that one can use\nan online certificate template for\n\n78\n00:03:51.158 --> 00:03:53.330\na Registration Authority.\n\n79\n00:03:53.330 --> 00:03:55.910\nThe other one,\nif you're using 2012 with that\n\n80\n00:03:55.910 --> 00:04:00.330\nmore secure Group Managed Service Account,\nthat one you need to do an offline.\n\n81\n00:04:00.330 --> 00:04:01.900\nAnd what's the difference in those?\n\n82\n00:04:01.900 --> 00:04:05.770\nWell, primarily the difference is it's\ngonna be in the subject material.\n\n83\n00:04:05.770 --> 00:04:09.670\nIn an online Registration Authority,\nthe subject name,\n\n84\n00:04:09.670 --> 00:04:12.190\nthat name that we put in\nthe certificate to prove\n\n85\n00:04:12.190 --> 00:04:16.870\nthat this is who they claim to be,\nthat's built from Active Directory.\n\n86\n00:04:16.870 --> 00:04:20.010\nSo we go and we pull some data out of\nActive Directory and we build that and\n\n87\n00:04:20.010 --> 00:04:23.170\nthen we assign it into the certificate\nrequest and send it up.\n\n88\n00:04:23.170 --> 00:04:26.568\nBut when we set there and\nwe do an offline enrollment,\n\n89\n00:04:26.568 --> 00:04:31.550\nit's basically where I don't know the name\nand I need to provide you the name or\n\n90\n00:04:31.550 --> 00:04:34.589\nthat subject inside that\nparticular request.\n\n91\n00:04:34.589 --> 00:04:36.250\nNow, why do we need to do these?\n\n92\n00:04:36.250 --> 00:04:41.100\nWell, the basic rule of this is that\ncertificate enrollment happened way\n\n93\n00:04:41.100 --> 00:04:43.850\nbefore there ever was\nGroup Managed Service Accounts.\n\n94\n00:04:43.850 --> 00:04:48.500\nAnd so a Group Managed Service Account\ncan't really talk to Active Directory,\n\n95\n00:04:48.500 --> 00:04:52.320\ndoesn't know how to actually do that,\nbuild that actual request there.\n\n96\n00:04:52.320 --> 00:04:55.038\nOr at least it can, but\nthe certificate enrollment API's,\n\n97\n00:04:55.038 --> 00:04:58.092\nthey just aren't aware of what\na Group Managed Service Account is.\n\n98\n00:04:58.092 --> 00:05:01.410\nCuz underneath the covers, a Group\nManaged Service Account really looks like\n\n99\n00:05:01.410 --> 00:05:03.781\na computer object in Active Directory and\neverything.\n\n100\n00:05:03.781 --> 00:05:07.880\nAnd so it's a special account, and so for\nthat we have a special configuration.\n\n101\n00:05:07.880 --> 00:05:12.660\nSo, if you're using 2008,\nyou're gonna use the online one,\n\n102\n00:05:12.660 --> 00:05:15.080\nwhich would be this one\nthat says computer.\n\n103\n00:05:15.080 --> 00:05:18.110\nAnd if you're using the offline,\n\n104\n00:05:18.110 --> 00:05:19.620\nthen you're gonna use\nthe one that says offline.\n\n105\n00:05:19.620 --> 00:05:24.100\nSo we're gonna go ahead and duplicate this\noffline one because I am using a 2012,\n\n106\n00:05:24.100 --> 00:05:27.480\nor I'm using the GSMA account.\n\n107\n00:05:27.480 --> 00:05:31.560\nI'm gonna disable my warnings here for\nall my certificate stuff.\n\n108\n00:05:31.560 --> 00:05:34.722\nAnd then I'm gonna go to the General page\nhere and I'm gonna give mine a name.\n\n109\n00:05:34.722 --> 00:05:37.776\nAnd the name I use is,\nI abbreviate Windows Hello for\n\n110\n00:05:37.776 --> 00:05:39.640\nBusiness cuz it's way long.\n\n111\n00:05:39.640 --> 00:05:41.730\nAnd although I like to be explicit,\n\n112\n00:05:41.730 --> 00:05:45.170\nI also wanna save myself from\ntyping as much as possible.\n\n113\n00:05:45.170 --> 00:05:47.460\nAnd I'm gonna call it Enrollment Agent.\n\n114\n00:05:48.950 --> 00:05:52.000\nAnd you can adjust your validity\nperiod as much as you want there.\n\n115\n00:05:52.000 --> 00:05:55.370\nAnd then basically, what we're\ngonna do is in the subject name.\n\n116\n00:05:55.370 --> 00:05:58.170\nThis is where we get that offline and\nonline, right?\n\n117\n00:05:58.170 --> 00:06:01.580\nThis supply in the request,\nthe different chairs is just,\n\n118\n00:06:01.580 --> 00:06:04.120\nan online would use this\nbuild from Active Directory.\n\n119\n00:06:04.120 --> 00:06:06.610\nAnd then it would have\nthings checked down here.\n\n120\n00:06:06.610 --> 00:06:09.653\nAnd this one, because I have\na Group Managed Service Account,\n\n121\n00:06:09.653 --> 00:06:12.018\nI'm gonna be using\nthe offline version of this.\n\n122\n00:06:12.018 --> 00:06:15.790\nSo I want to make sure that that\nguy is checked out and okay.\n\n123\n00:06:15.790 --> 00:06:17.260\nThe other thing that we've done and\n\n124\n00:06:17.260 --> 00:06:20.970\nall is I'm gonna upgrade my cryptography\nto use the latest and greatest.\n\n125\n00:06:20.970 --> 00:06:23.580\nAnd that's a really quick settings here,\nthat you've seen before,\n\n126\n00:06:23.580 --> 00:06:25.840\nso we won't go into much detail there.\n\n127\n00:06:25.840 --> 00:06:30.360\nAnd then what we want to do is we\nwant to go into the security of this.\n\n128\n00:06:30.360 --> 00:06:34.910\nAnd we're going into the security\nbecause this is an enroll on behalf of.\n\n129\n00:06:34.910 --> 00:06:39.010\nThis is a lot of power we're giving\nthis particular certificate template.\n\n130\n00:06:39.010 --> 00:06:41.800\nThis means that if I gave it to Don,\n\n131\n00:06:41.800 --> 00:06:45.660\nDon could literally enroll a certificate\nfor anybody in the organization.\n\n132\n00:06:45.660 --> 00:06:49.890\nAnd if you don't trust Don,\nthen Don can suddenly be Cherokee.\n\n133\n00:06:49.890 --> 00:06:53.714\nSo, we need to make sure that we're\ngoing to, whoever gets this certificate,\n\n134\n00:06:53.714 --> 00:06:55.439\nwe want them to be a trusted entity.\n\n135\n00:06:55.439 --> 00:06:59.791\nSo what we're going to do is we're gonna\nput permissions on the certificate\n\n136\n00:06:59.791 --> 00:07:03.871\ntemplate to where only the ADFS service\naccount is gonna be able get that\n\n137\n00:07:03.871 --> 00:07:05.311\ncertificate template.\n\n138\n00:07:05.311 --> 00:07:07.720\nSo we're gonna do an add.\n\n139\n00:07:07.720 --> 00:07:11.076\nAnd in here you're gonna notice,\nright here is I got User Groups and\n\n140\n00:07:11.076 --> 00:07:12.570\nbuilt-in security principles.\n\n141\n00:07:12.570 --> 00:07:16.930\nWell remember, our ADFS service account\nis a Group Managed Service Account, so\n\n142\n00:07:16.930 --> 00:07:18.000\nit's not gonna show up here.\n\n143\n00:07:18.000 --> 00:07:20.269\nSo what we have to do is we\nhave to go into Objects and\n\n144\n00:07:20.269 --> 00:07:22.230\nwe have to check this Service Account box.\n\n145\n00:07:22.230 --> 00:07:23.973\nAnd then once we have that there,\n\n146\n00:07:23.973 --> 00:07:26.912\nthen we can use our simple\nnaming structure of ADFSSVC.\n\n147\n00:07:26.912 --> 00:07:31.309\nWe'll do a Check Names on this, and\nit shows up that it's valid and\n\n148\n00:07:31.309 --> 00:07:33.830\nwe'll go ahead and add it to our list.\n\n149\n00:07:33.830 --> 00:07:37.140\nSo now we've added the permissions there.\n\n150\n00:07:37.140 --> 00:07:40.830\nNow what we wanna do is we\nwanna allow this guy to enroll.\n\n151\n00:07:40.830 --> 00:07:43.540\nAnd so we're gonna go and\nsay the Allow Enroll here.\n\n152\n00:07:43.540 --> 00:07:47.113\nNow, if we look through all of these\nother ones, just to make sure,\n\n153\n00:07:47.113 --> 00:07:50.730\nthe only other person who has\nenroll here is domain admins.\n\n154\n00:07:50.730 --> 00:07:53.075\nI typically uncheck the box,\nbecause again,\n\n155\n00:07:53.075 --> 00:07:56.452\nyou don't need to give any more\nprivilege than what is necessary.\n\n156\n00:07:56.452 --> 00:07:58.781\nAnd a domain admin can always\ngo back in here and change that.\n\n157\n00:07:58.781 --> 00:08:02.953\nAnd the great thing about that, it's an\nauditable event And that's that, you know,\n\n158\n00:08:02.953 --> 00:08:06.682\nthe principle of least privilege that\nwe've been preaching since forever.\n\n159\n00:08:06.682 --> 00:08:07.312\n&gt;&gt; A while.\n\n160\n00:08:07.312 --> 00:08:09.490\n&gt;&gt; Yeah, NT 4 or something.\n\n161\n00:08:09.490 --> 00:08:10.300\nIt's been around a long time.\n\n162\n00:08:10.300 --> 00:08:13.640\nBut you guys also here where we've got\nthe importance on that managed service\n\n163\n00:08:13.640 --> 00:08:17.840\naccount, where if this were a regular\naccount that were to get compromised,\n\n164\n00:08:17.840 --> 00:08:19.020\nyou'd have a real issue here.\n\n165\n00:08:19.020 --> 00:08:21.405\nPeople could be generating\ncertificates inappropriately.\n\n166\n00:08:21.405 --> 00:08:23.225\nBy having that managed service account,\n\n167\n00:08:23.225 --> 00:08:25.310\nits password is\nautomatically being changed.\n\n168\n00:08:25.310 --> 00:08:29.163\nIt's very secure,\nit is a very safe way to handle this, so\n\n169\n00:08:29.163 --> 00:08:31.610\ndefinitely the way we wanna go on it.\n\n170\n00:08:31.610 --> 00:08:34.950\n&gt;&gt; Yeah, it's a safe way, and\nthe passwords on these managed service\n\n171\n00:08:34.950 --> 00:08:38.560\naccounts, Don, they're really long,\nthey're lots of entropy,\n\n172\n00:08:38.560 --> 00:08:42.060\nhigh entropy, non-printable characters,\nand they change for you.\n\n173\n00:08:42.060 --> 00:08:43.354\nSo that's the great thing about them.\n\n174\n00:08:43.354 --> 00:08:45.962\nSo they may be a little bit\nof a pain to set up but\n\n175\n00:08:45.962 --> 00:08:50.182\nit's kind of like that oven on TV,\nyou set it and forget it kind of thing.\n\n176\n00:08:50.182 --> 00:08:50.883\n&gt;&gt; [LAUGH]\n&gt;&gt; So,\n\n177\n00:08:50.883 --> 00:08:51.900\nwe definitely want to be using those.\n\n178\n00:08:51.900 --> 00:08:55.620\nSo in here we've made sure,\nI've pulled the domain admins out just for\n\n179\n00:08:55.620 --> 00:08:59.712\nthe sake of they don't need it, and\nagain I'm gonna go do this with enterprise\n\n180\n00:08:59.712 --> 00:09:02.380\nadmins as well because\nthey don't really need it.\n\n181\n00:09:02.380 --> 00:09:04.680\nAnd, again, if they need it,\nthey can come back here.\n\n182\n00:09:04.680 --> 00:09:08.480\nBusiness justification that warrants this,\nchange control can control that, and\n\n183\n00:09:08.480 --> 00:09:10.890\nthen it's an auditable event if\nyou have auditing turned on.\n\n184\n00:09:10.890 --> 00:09:12.630\nSo that's all good there.\n\n185\n00:09:12.630 --> 00:09:15.539\nSo now we have our certificate\ntemplate and we're ready to go.\n\n186\n00:09:15.539 --> 00:09:20.453\nAnd so we're gonna go ahead and now as\nbefore, we have the Windows Hello for\n\n187\n00:09:20.453 --> 00:09:25.690\nBusiness enrollment agent certificate\nready to go there and everything else.\n\n188\n00:09:25.690 --> 00:09:28.610\nSo the next template we need,\nthat we talked about.\n\n189\n00:09:29.640 --> 00:09:34.690\nWas we talked about the Windows Hello for\nBusiness Authentication template.\n\n190\n00:09:34.690 --> 00:09:38.430\nNow in this step, this is the template\n\n191\n00:09:38.430 --> 00:09:43.760\nthat the ADFS server is gonna\nenroll on behalf of their users.\n\n192\n00:09:43.760 --> 00:09:46.485\nNow this might be getting\na little bit muddy here, of like,\n\n193\n00:09:46.485 --> 00:09:50.374\nhey I'm losing track of these certificates\nand who's requesting who and what and.\n\n194\n00:09:50.374 --> 00:09:52.070\nBe patient on this, follow this through.\n\n195\n00:09:52.070 --> 00:09:55.751\nWe're gonna have a nice diagram that\nshows how this whole process works and\n\n196\n00:09:55.751 --> 00:09:57.972\nit's gonna just put\neverything together for\n\n197\n00:09:57.972 --> 00:10:01.330\nyou of why you're doing these\ntemplates and so forth.\n\n198\n00:10:01.330 --> 00:10:05.470\nSo we're gonna make this Windows Hello for\nBusiness Authentication template.\n\n199\n00:10:05.470 --> 00:10:09.480\nAnd the way we do that is we're staying\nin the same spot here that we are, and\n\n200\n00:10:09.480 --> 00:10:13.480\nthen what we're gonna do is we're\ngonna find the smart card log on\n\n201\n00:10:13.480 --> 00:10:15.710\ncertificate template, which is right here.\n\n202\n00:10:15.710 --> 00:10:20.049\nThis template is basically Windows Hello\nis going to issue a user a smart card log\n\n203\n00:10:20.049 --> 00:10:22.768\non certificate, but\nwithout the smart card, and\n\n204\n00:10:22.768 --> 00:10:25.121\nwithout all the headaches of a smart card.\n\n205\n00:10:25.121 --> 00:10:30.131\nSo we're gonna go right here, right-click\non this guy and say duplicate template.\n\n206\n00:10:30.131 --> 00:10:33.821\nAnd then we're gonna get our compatibility\nthing, which we will go ahead and\n\n207\n00:10:33.821 --> 00:10:35.692\nset these so we don't get those warnings.\n\n208\n00:10:35.692 --> 00:10:40.140\nAnd we're gonna name this, again now these\ntemplates can be named anything you want.\n\n209\n00:10:40.140 --> 00:10:43.608\nBut you do need to remember the names of\nthese templates because you're gonna use\n\n210\n00:10:43.608 --> 00:10:44.989\nthem later in some PowerShell.\n\n211\n00:10:44.989 --> 00:10:48.191\nWhen we're gonna configure\nthe registration authority to actually\n\n212\n00:10:48.191 --> 00:10:50.615\nsay hey,\nhere's the certificate you need to use and\n\n213\n00:10:50.615 --> 00:10:53.940\nhere's the certificate you're\ngonna enroll for somebody.\n\n214\n00:10:53.940 --> 00:10:57.802\nSo, I'm gonna call this Windows Hello for\nBusiness Authentication and\n\n215\n00:10:57.802 --> 00:11:01.475\nI'm just gonna abbreviate it using\nmy Windows Hello for Business and\n\n216\n00:11:01.475 --> 00:11:03.514\nthen I'm gonna use authentication.\n\n217\n00:11:03.514 --> 00:11:08.570\nNow, while I'm in here, I wanna show you\nthe difference between certificate names.\n\n218\n00:11:08.570 --> 00:11:13.090\nThis is the certificate display name or\nthe friendly name,\n\n219\n00:11:13.090 --> 00:11:15.010\nthis is the happy tree name.\n\n220\n00:11:15.010 --> 00:11:18.860\nThis is the template name,\nthis is the internal name.\n\n221\n00:11:18.860 --> 00:11:24.570\nAll of our commands that we're showing you\ntoday are going to use this internal name\n\n222\n00:11:24.570 --> 00:11:27.540\nand now so if you just use spaces,\nit's pretty easy.\n\n223\n00:11:27.540 --> 00:11:30.610\nJust remember what the name is and\nyou just type it with no spaces.\n\n224\n00:11:30.610 --> 00:11:33.700\nBut if you start doing ones and\ntwos and special characters,\n\n225\n00:11:33.700 --> 00:11:36.420\nyou're gonna have to look at this name and\nmake sure you know what it is.\n\n226\n00:11:36.420 --> 00:11:40.497\nBecause a lot of those kinda names will\nget filtered out in a process called\n\n227\n00:11:40.497 --> 00:11:44.866\nnormalization so that way, it just works\nno matter what language you're in.\n\n228\n00:11:44.866 --> 00:11:48.989\nSo there aren't localized to every region,\nthese are internal names.\n\n229\n00:11:48.989 --> 00:11:52.794\nSo all of these PowerShell cmdlets and\nother things, they're gonna use this\n\n230\n00:11:52.794 --> 00:11:56.780\nparticular authentication name or\nthis particular template name.\n\n231\n00:11:56.780 --> 00:11:58.231\nSo now that we're in there,\n\n232\n00:11:58.231 --> 00:12:01.625\nthere's not pretty much anything\nthat we need to change on these.\n\n233\n00:12:01.625 --> 00:12:06.334\nOne thing that we wanna do is we do wanna\nlook at the crypto and update that, and\n\n234\n00:12:06.334 --> 00:12:09.740\nso we'll just do that really quick here.\n\n235\n00:12:09.740 --> 00:12:13.750\nAnd move our SHA1 to SHA256,\njust for good hygiene.\n\n236\n00:12:13.750 --> 00:12:18.190\nBut what we really wanna do, I wanna\npoint out to you is this Extension tab.\n\n237\n00:12:18.190 --> 00:12:21.320\nAnd it's right there in front of me,\nif it's a snake it would have bit me.\n\n238\n00:12:21.320 --> 00:12:26.590\nWhat we wanna look at is these\napplication policies and\n\n239\n00:12:26.590 --> 00:12:29.240\nin here,\nyou'll see this smart card log on.\n\n240\n00:12:29.240 --> 00:12:31.930\nThis is what we call\nan extended key usage.\n\n241\n00:12:31.930 --> 00:12:36.463\nAnd what this does is this says this\ncertificate is allowed to be used for\n\n242\n00:12:36.463 --> 00:12:38.362\nsmart card authentication.\n\n243\n00:12:38.362 --> 00:12:40.850\nAlso says that it can be used for\nclient authentication.\n\n244\n00:12:40.850 --> 00:12:42.680\nSo you can potentially use this for\n\n245\n00:12:42.680 --> 00:12:46.640\npossibly VPN scenarios and you could\nalso use it if you need to actually do\n\n246\n00:12:46.640 --> 00:12:49.150\ncertificate authentication\nto some websites.\n\n247\n00:12:49.150 --> 00:12:51.672\nSo that's a pretty good\nthing to do there as well.\n\n248\n00:12:51.672 --> 00:12:54.650\nNow, why is this important?\n\n249\n00:12:54.650 --> 00:12:59.408\nYou're gonna find out that\nthe registration authority in ADFS,\n\n250\n00:12:59.408 --> 00:13:03.010\nit looks, it has a bunch of prechecks.\n\n251\n00:13:03.010 --> 00:13:05.368\nAnd one of the things is\nwhen you configure it,\n\n252\n00:13:05.368 --> 00:13:07.490\nwhich we will do in just shortly.\n\n253\n00:13:07.490 --> 00:13:11.275\nWhen you say hey, here's the certificate\nthat you are going to issue to a user,\n\n254\n00:13:11.275 --> 00:13:15.450\nit goes out and it looks to make\nsure that, that certificate\n\n255\n00:13:15.450 --> 00:13:20.750\nactually has this smart card logon,\nEKU or oid as we call it in there.\n\n256\n00:13:20.750 --> 00:13:23.260\nIf it's missing,\nthe user won't get provisioned.\n\n257\n00:13:23.260 --> 00:13:27.010\nThis is a way to prevent provisioning\npages from showing up to the user\n\n258\n00:13:27.010 --> 00:13:29.580\ncuz provisioning happens\nright when the user signs in.\n\n259\n00:13:29.580 --> 00:13:32.380\nAnd it shows up nice and\nvery front in screen.\n\n260\n00:13:32.380 --> 00:13:36.080\nYou don't want to send that user through\nthis entire provisioning flow just so\n\n261\n00:13:36.080 --> 00:13:37.650\nit fails, because they don't have this.\n\n262\n00:13:37.650 --> 00:13:39.900\nSo there's a lot of pre-reqs that go on.\n\n263\n00:13:39.900 --> 00:13:43.620\nAnd one of them is checking for\nthis EKU and making sure it's in there.\n\n264\n00:13:43.620 --> 00:13:47.655\nSo we wanna make sure that when you're\ncopying or duplicating the template,\n\n265\n00:13:47.655 --> 00:13:51.402\nmake sure that this smart card log\non is in the application policies.\n\n266\n00:13:51.402 --> 00:13:53.140\nWe wanna make sure that that's there for\nsure.\n\n267\n00:13:54.530 --> 00:13:57.802\nSo, now we've done the same thing over and\nover again.\n\n268\n00:13:57.802 --> 00:14:02.030\nWhat's gonna be very different about this\nis, remember when I said is, we need to\n\n269\n00:14:02.030 --> 00:14:07.050\ngate this certificate template to make\nsure someone can't directly enroll for it.\n\n270\n00:14:07.050 --> 00:14:09.110\nWe don't want anybody directly\nenrolling for this, so\n\n271\n00:14:09.110 --> 00:14:13.786\nwhat we have to do is we have to put some\nbasic issuance requirements around this.\n\n272\n00:14:13.786 --> 00:14:16.210\nSo, we're gonna go to this\nIssuance Requirements tab here, and\n\n273\n00:14:16.210 --> 00:14:19.820\nyou're gonna see a whole\nnew set of things.\n\n274\n00:14:19.820 --> 00:14:22.010\nNow, bare with me here\ncuz I'm gonna explain,\n\n275\n00:14:22.010 --> 00:14:25.020\nthese are the ones we\nwanna explain really well.\n\n276\n00:14:25.020 --> 00:14:26.270\nOther than the smart card log on,\n\n277\n00:14:26.270 --> 00:14:29.510\nthis is probably the most\nimportant one to remember here.\n\n278\n00:14:29.510 --> 00:14:33.451\nSo, what we want to do is we wanna make\nsure that no one else can issue this\n\n279\n00:14:33.451 --> 00:14:34.840\ncertificate directly.\n\n280\n00:14:34.840 --> 00:14:37.121\nAnd the way we do that is we're\ngonna check this box right here.\n\n281\n00:14:37.121 --> 00:14:40.120\nThis is the number of\nauthorized signatures.\n\n282\n00:14:40.120 --> 00:14:41.731\nSo, when we check this box,\n\n283\n00:14:41.731 --> 00:14:45.033\nit's going to light up a whole\nnother set of fields for us.\n\n284\n00:14:45.033 --> 00:14:48.210\nNow, the number of authorized\nsignatures is one.\n\n285\n00:14:48.210 --> 00:14:50.477\nWe don't need anybody else signing this.\n\n286\n00:14:50.477 --> 00:14:52.433\nWe just need one person signing it, and\n\n287\n00:14:52.433 --> 00:14:56.340\nit's that registration authority\nwho's gonna sign it for us.\n\n288\n00:14:56.340 --> 00:15:00.880\nSo, when we have that set to 1,\nnow we need to look at this next one.\n\n289\n00:15:00.880 --> 00:15:03.530\nHere we want it to say\napplication policies.\n\n290\n00:15:03.530 --> 00:15:07.400\nWe're gonna put a policy on\nthe certificate template that\n\n291\n00:15:07.400 --> 00:15:11.010\nrestricts the issuance of\nit to having a signature.\n\n292\n00:15:11.010 --> 00:15:15.560\nBut we need to know what type of signature\ndo you expect to have on this certificate\n\n293\n00:15:15.560 --> 00:15:20.300\ntemplate, which gives us this\napplication policy below which is, hey,\n\n294\n00:15:20.300 --> 00:15:23.990\nthere's all sorts of these\ndifferent things that we can do.\n\n295\n00:15:23.990 --> 00:15:25.170\nWhich one do you want?\n\n296\n00:15:25.170 --> 00:15:28.483\nAnd the one that we want is we want\nthat certificate request agent.\n\n297\n00:15:28.483 --> 00:15:30.540\nThat's the enrollment agent.\n\n298\n00:15:30.540 --> 00:15:35.640\nThat's the policy that says hey, if I\nsee an incoming certificate request for\n\n299\n00:15:35.640 --> 00:15:41.220\nthis certificate template,\nI'm gonna make sure that it's signed and\n\n300\n00:15:41.220 --> 00:15:45.020\nthat it's signed by the certificate\nthat has this certificate request or\n\n301\n00:15:45.020 --> 00:15:47.320\nthat enrollment agent setting there.\n\n302\n00:15:47.320 --> 00:15:48.620\nSo this is how we wanna do this.\n\n303\n00:15:48.620 --> 00:15:51.210\nSo, just to be clear on this.\n\n304\n00:15:51.210 --> 00:15:54.110\nThe certificate template\nset up is very easy.\n\n305\n00:15:54.110 --> 00:15:55.417\nIt's pretty much the same things.\n\n306\n00:15:55.417 --> 00:15:57.670\nThe two things you wanna look out for\n\n307\n00:15:57.670 --> 00:16:02.482\nwhen we're setting up this particular\ntemplate is we wanna make sure that in\n\n308\n00:16:02.482 --> 00:16:07.068\nthe Issuance requirements that we have\nthis set to where that one shows up\n\n309\n00:16:07.068 --> 00:16:11.750\nthe numbers signatures applications\npolicy and certificate requests.\n\n310\n00:16:11.750 --> 00:16:13.710\nThe other thing we wanna make sure is,\n\n311\n00:16:13.710 --> 00:16:16.600\nwe wanna make sure that\nsmart card log on is there.\n\n312\n00:16:16.600 --> 00:16:20.346\nAnd so, basically the other thing we\nwanna make sure, just to double check,\n\n313\n00:16:20.346 --> 00:16:23.978\nit should be there in your template\nis that, build from active directory,\n\n314\n00:16:23.978 --> 00:16:26.533\nwe want to have that safe\nfully distinguished name.\n\n315\n00:16:26.533 --> 00:16:29.669\nAnd we definitely want that user principal\nname in there because that's how\n\n316\n00:16:29.669 --> 00:16:31.580\nthe domain name controller\nknows who you are,\n\n317\n00:16:31.580 --> 00:16:34.080\nknows how to look up your user account,\nis through that UPN.\n\n318\n00:16:35.180 --> 00:16:39.260\nSo, I think we have everything set there,\nand so what we wanna do is,\n\n319\n00:16:39.260 --> 00:16:41.140\nwe're gonna hit okay, on that guy.\n\n320\n00:16:41.140 --> 00:16:45.400\nAnd now we have that particular\ntemplate ready to go.\n\n321\n00:16:45.400 --> 00:16:48.280\nNow there's one more\nstep that we have to do,\n\n322\n00:16:48.280 --> 00:16:52.870\nand this is because well,\nwe just created a smart card template.\n\n323\n00:16:52.870 --> 00:16:57.260\nAnd I need to have some way to\ndifferentiate a smart card template\n\n324\n00:16:57.260 --> 00:16:59.330\nfrom a Windows Hello template.\n\n325\n00:16:59.330 --> 00:17:03.887\nAnd so the way that we do that is it's a\none time operation that we're going to do,\n\n326\n00:17:03.887 --> 00:17:08.041\nand we're gonna do that on the 80Fs\nserver, and the reason why is that,\n\n327\n00:17:08.041 --> 00:17:11.947\nyou can do this from the 80Fs server\nafter you've had that update.\n\n328\n00:17:11.947 --> 00:17:16.510\nWhich provides the registration authority,\nor you can do it from any creators update.\n\n329\n00:17:16.510 --> 00:17:19.760\nSo if you're doing a lot of this\nmanagement from a work station that\n\n330\n00:17:19.760 --> 00:17:22.490\nhas the remote server\nadministration tools on it.\n\n331\n00:17:22.490 --> 00:17:25.460\nYou can do it from there, but\nit requires a special version of\n\n332\n00:17:25.460 --> 00:17:28.390\nthat sure utility tools that\nwe have been using quit a bit.\n\n333\n00:17:28.390 --> 00:17:32.512\nSo, what l am wanna do is to\njump over to my 80Fs server and\n\n334\n00:17:32.512 --> 00:17:36.636\nl have this guy here, and\nis just so happens that retype and\n\n335\n00:17:36.636 --> 00:17:40.950\nthe command for us and so\nI'm gonna paste that command here.\n\n336\n00:17:40.950 --> 00:17:43.498\nThat's not the command I was looking for\nhang on,\n\n337\n00:17:43.498 --> 00:17:47.100\nl got it right here in this\ncert right here, here we go.\n\n338\n00:17:47.100 --> 00:17:51.760\nAnd this is the command that we want and\n\n339\n00:17:51.760 --> 00:17:55.410\nwe'll paste in here, so it's much\nvisible here, so let's look here.\n\n340\n00:17:55.410 --> 00:17:59.706\nSo what this is doing in Certutil\nis this we're putting a flags so\n\n341\n00:17:59.706 --> 00:18:02.573\nall of the templates\nare actually stored in\n\n342\n00:18:02.573 --> 00:18:06.760\nactive directory in\nthe configuration partition.\n\n343\n00:18:06.760 --> 00:18:09.650\nSo what we're doing is we're\nusing this command called,\n\n344\n00:18:09.650 --> 00:18:12.670\nCertutil is a regular command,\nit's not PowerShell.\n\n345\n00:18:12.670 --> 00:18:16.933\nDS template is saying, I need you to go\nlook at the director service and look for\n\n346\n00:18:16.933 --> 00:18:18.497\nthe certificate template.\n\n347\n00:18:18.497 --> 00:18:23.390\nWH for the authentication is that internal\nname of that certificate template.\n\n348\n00:18:23.390 --> 00:18:25.030\nThat's the one we wanna use.\n\n349\n00:18:25.030 --> 00:18:27.390\nSo that's how it's gonna\nlocate that specific template.\n\n350\n00:18:27.390 --> 00:18:32.510\nThe next part of this command\nis the mspki-private-key.flac.\n\n351\n00:18:32.510 --> 00:18:35.050\nThis is literally the attribute\n\n352\n00:18:35.050 --> 00:18:39.480\non that template in active directory\nthat we want to tag or change.\n\n353\n00:18:39.480 --> 00:18:43.432\nAnd so then what we're going to do is we\nhave this built in name inside the new\n\n354\n00:18:43.432 --> 00:18:48.210\nCertutil command, with the ct\nprivate key flag, hello logon key.\n\n355\n00:18:48.210 --> 00:18:52.210\nI know it's a little rap there, but\nthat's the mercy of PowerShell for us.\n\n356\n00:18:52.210 --> 00:18:57.085\nBut what this is going to do, is this is\ngonna actually tag some extra data onto\n\n357\n00:18:57.085 --> 00:19:01.060\nthe certificate template, so\nthat the Windows 10 machine,\n\n358\n00:19:01.060 --> 00:19:05.270\nthe AFS server and everybody else\nthat's aware of Windows Hello.\n\n359\n00:19:05.270 --> 00:19:08.562\nCan actually know the difference,\nthat this template is really meant for\n\n360\n00:19:08.562 --> 00:19:11.560\nWindows Hello, and\nit's not just a smart card template.\n\n361\n00:19:11.560 --> 00:19:14.590\nSo I'm gonna go ahead, and\nwe're gonna run Enter on this.\n\n362\n00:19:14.590 --> 00:19:19.900\nAnd see, and as you can see, it spit out a\nbunch of really interesting stuff for us.\n\n363\n00:19:19.900 --> 00:19:21.210\nHere's how we can see and look at this.\n\n364\n00:19:21.210 --> 00:19:25.560\nSo it's shows you this old value,\nwhich is this MSPKI flag and\n\n365\n00:19:25.560 --> 00:19:28.000\nit shows you the value in decimal and\nin hex.\n\n366\n00:19:28.000 --> 00:19:29.140\nAnd then what it does is,\n\n367\n00:19:29.140 --> 00:19:33.810\nit will actually tell you all these\ndifferent names that we have for it.\n\n368\n00:19:33.810 --> 00:19:37.370\nThis is really doesn't mean anything\nother than what we really need to do\n\n369\n00:19:37.370 --> 00:19:40.900\nis we really need to know\nthat this part right here,\n\n370\n00:19:40.900 --> 00:19:45.280\nthis is the part we care about right here,\nand that flag needs to be turned on.\n\n371\n00:19:45.280 --> 00:19:46.900\nWhen we know that, that flags turned on,\n\n372\n00:19:46.900 --> 00:19:49.720\nnow this certificate\ntemplate has been tagged.\n\n373\n00:19:49.720 --> 00:19:53.250\nWe know that it's tagged with that\nWindows Hello marking or as we call it.\n\n374\n00:19:53.250 --> 00:19:56.270\nAnd so now, all of the clients and\nthe machines and\n\n375\n00:19:56.270 --> 00:19:59.450\nthe infrastructure that look for\nthis flag will see that there.\n\n376\n00:19:59.450 --> 00:20:03.090\nSo I think we have everything done for\nthe template itself, and\n\n377\n00:20:03.090 --> 00:20:06.405\nI think the next thing we want\nto do is we wanna go ahead and\n\n378\n00:20:06.405 --> 00:20:09.150\njust publish these guys,\nI think that's the next step we wanna do.\n\n379\n00:20:09.150 --> 00:20:14.840\nSo I'm going to hop back over\nonto my certificate authority and\n\n380\n00:20:14.840 --> 00:20:18.130\nwe're going to just do the publishing\nlike we did before on the path there,\n\n381\n00:20:18.130 --> 00:20:22.280\nso I have my Windows Hello for\nBusiness, those are all there.\n\n382\n00:20:22.280 --> 00:20:24.600\nNow remember, when you publish\nyour certificate templates,\n\n383\n00:20:24.600 --> 00:20:27.120\nyou do that from the actual\ncertificate console, so\n\n384\n00:20:27.120 --> 00:20:29.760\nyou're not gonna do this\nfrom the Template Manager.\n\n385\n00:20:29.760 --> 00:20:34.260\nSo we're gonna, alright,\ndo that remember it's the new option here.\n\n386\n00:20:34.260 --> 00:20:38.890\nWe are gonna say New Certificate\ntemplate and then we're gonna see\n\n387\n00:20:38.890 --> 00:20:43.702\nwhere we have our Windows Hello for\nBusiness enrollment agent.\n\n388\n00:20:43.702 --> 00:20:48.620\nWe wanna publish that one and then\nwe're gonna do it one more time again.\n\n389\n00:20:48.620 --> 00:20:51.570\nAnd then we're going to say new and\n\n390\n00:20:51.570 --> 00:20:55.570\nwe're gonna publish that Windows Hello for\nBusiness authentication template.\n\n391\n00:20:55.570 --> 00:20:57.485\nWe're gonna publish both\nof those guys out there.\n\n392\n00:20:57.485 --> 00:21:01.265\nAnd so now, we have these templates\npublished, and they're already available,\n\n393\n00:21:01.265 --> 00:21:05.101\nnow again remember, if you have multiple\ncertificate authorities and you want more\n\n394\n00:21:05.101 --> 00:21:08.035\nthan one of these certificate\nauthorities to issue these guys.\n\n395\n00:21:08.035 --> 00:21:12.570\nWe need to go ahead and make sure that\nwe do that publication to all of those.\n\n396\n00:21:12.570 --> 00:21:14.710\nYou wont have to create\nthe templates again,\n\n397\n00:21:14.710 --> 00:21:17.410\nthose are shared by being\nstored in Active Directory.\n\n398\n00:21:17.410 --> 00:21:19.950\nBut we will need to actually\ndo that publishing on any\n\n399\n00:21:19.950 --> 00:21:22.380\nother certificate authority that\nyou want to have those issued.\n\n400\n00:21:22.380 --> 00:21:23.060\n&gt;&gt; All right, Mike, so\n\n401\n00:21:23.060 --> 00:21:25.650\nnow that our templates are published,\nwe're ready to go, right?\n\n402\n00:21:25.650 --> 00:21:27.760\nPeople will be able to jump in and\nget those certificates and\n\n403\n00:21:27.760 --> 00:21:30.940\nthe federation service will also be able\nto go in and get those certificates?\n\n404\n00:21:30.940 --> 00:21:34.790\n&gt;&gt; Well, almost, Don, we need to be\ncareful about these group memberships and\n\n405\n00:21:34.790 --> 00:21:37.610\nso the one thing that we need to\ndo is on this Windows Hello for\n\n406\n00:21:37.610 --> 00:21:40.260\nBusiness authentication template is.\n\n407\n00:21:40.260 --> 00:21:43.968\nWe need to make sure that those\nusers have permission to that.\n\n408\n00:21:43.968 --> 00:21:47.810\nSo we wanna double check that, so\nif we look at our templates, and\n\n409\n00:21:47.810 --> 00:21:51.750\nwhen we're editing templates, we need to\ngo back into the actual template editor.\n\n410\n00:21:51.750 --> 00:21:55.200\nAnd if we go scroll down\nbecause they're in the Ws, and\n\n411\n00:21:55.200 --> 00:21:58.445\nwe can go back up into this Windows Hello\nfor Business authentication.\n\n412\n00:21:58.445 --> 00:22:03.240\nWe've look at the security there, you can\nsee that I actually overlooked this and\n\n413\n00:22:03.240 --> 00:22:04.260\nwe really need to act.\n\n414\n00:22:04.260 --> 00:22:05.324\nThat the Windows Hello for\n\n415\n00:22:05.324 --> 00:22:08.100\nBusiness users would not be able\nto actually enroll in this.\n\n416\n00:22:08.100 --> 00:22:10.720\nSo what we need to do is\nwe need to add them and\n\n417\n00:22:10.720 --> 00:22:12.460\ngive them the permission to enroll.\n\n418\n00:22:12.460 --> 00:22:17.450\nSo what we're gonna do is that we can\njust do in here we have user groups and\n\n419\n00:22:17.450 --> 00:22:18.010\nlocations.\n\n420\n00:22:18.010 --> 00:22:21.110\nSo we can just do the advance\nhere real quick, do a fine and\n\n421\n00:22:21.110 --> 00:22:25.230\nthen these guys will scroll down\ncuz this is gonna be alphabetical.\n\n422\n00:22:25.230 --> 00:22:29.870\nSo we should see them in right here, this\nWindows Hello for Business users group.\n\n423\n00:22:29.870 --> 00:22:33.610\nAnd so this is now, we're gonna add\nthese guys onto the Permission tab and\n\n424\n00:22:33.610 --> 00:22:36.080\nthen we're gonna give them\nthe enroll permission.\n\n425\n00:22:36.080 --> 00:22:39.800\nSo they only need Read and Enroll and\nthen we're gonna give them auto-enroll.\n\n426\n00:22:39.800 --> 00:22:43.860\nNow the reason why we're giving them auto\nenroll is so they can renew this cert alt.\n\n427\n00:22:43.860 --> 00:22:47.290\nSo once you issue the cert,\nwe wanna be able to\n\n428\n00:22:47.290 --> 00:22:50.410\nhave their certificates be\nrenewed without any problems.\n\n429\n00:22:50.410 --> 00:22:52.100\nBut there's another thing here.\n\n430\n00:22:52.100 --> 00:22:54.760\nWe've been talking a lot about\nthe registration authority and\n\n431\n00:22:54.760 --> 00:22:59.020\nthe value that it brings to us and how it\nenrolls on behalf of us, but if you look\n\n432\n00:22:59.020 --> 00:23:04.660\nat this list, the registration authority\ndoesn't have permissions to do this.\n\n433\n00:23:04.660 --> 00:23:08.660\nSo, we need to make the registration\nauthority have those permissions.\n\n434\n00:23:08.660 --> 00:23:10.780\nWe could put another\nsecurity descriptor here,\n\n435\n00:23:10.780 --> 00:23:12.970\nbut that doesn't seem to\nbe the right way to do it.\n\n436\n00:23:12.970 --> 00:23:15.450\nSo we're gonna okay, on these and\nwe're gonna leave that there.\n\n437\n00:23:15.450 --> 00:23:18.360\nWe don't need to republish those things,\nthey'll stay just fine.\n\n438\n00:23:18.360 --> 00:23:21.190\nWe're gonna hop over to\nthe domain controller here.\n\n439\n00:23:21.190 --> 00:23:25.980\nAnd then the domain controller what\nwe're going to do is I'm gonna start up\n\n440\n00:23:25.980 --> 00:23:29.430\nthe Active Directory users and\ncomputers using the shortcut dsa.msc and\n\n441\n00:23:31.320 --> 00:23:36.370\nwhen this guy pops up, what I'm just\ngonna do is I'll expand the domain out.\n\n442\n00:23:36.370 --> 00:23:38.720\nAnd I'm just going to look for\nthat Windows Hello for\n\n443\n00:23:38.720 --> 00:23:44.550\nBusiness users group and I'm just\ngonna add the ADFS service to this.\n\n444\n00:23:44.550 --> 00:23:47.886\nNow, in service accounts\nare already selected for us, so\n\n445\n00:23:47.886 --> 00:23:52.037\nwhat we can do is we can just do ADFS SVC,\nwe'll do a check names on that and\n\n446\n00:23:52.037 --> 00:23:53.689\nwe can see that it's there.\n\n447\n00:23:53.689 --> 00:23:58.119\nAnd now what we have is now the ADFS\nservice is in the Windows Hello for\n\n448\n00:23:58.119 --> 00:23:59.302\nBusiness group.\n\n449\n00:23:59.302 --> 00:24:03.397\nThis is really critical, because, If I'm\ngoing to enroll a certificate on your\n\n450\n00:24:03.397 --> 00:24:08.420\nbehalf, I mentioned those pre-req's checks\nthat we do, the pre-requisite checks.\n\n451\n00:24:08.420 --> 00:24:11.970\nWhat happens is we're going to do\na lot of permission checking here.\n\n452\n00:24:11.970 --> 00:24:16.590\nAnd the user is allowed to read and\nenroll for that certificate.\n\n453\n00:24:16.590 --> 00:24:20.010\nBut if the ADFS service can't read\nthat certificate template and\n\n454\n00:24:20.010 --> 00:24:25.220\ndoesn't have the enroll permission, he\ncan't enroll that certificate request for\n\n455\n00:24:25.220 --> 00:24:28.160\nme, because he doesn't\nhave the permissions.\n\n456\n00:24:28.160 --> 00:24:30.710\nSo, we need to make\nsure that this is done,\n\n457\n00:24:30.710 --> 00:24:34.980\notherwise we'll get a prevision flow that\nwill just fail in them middle because\n\n458\n00:24:34.980 --> 00:24:37.570\nthe ADFS Server won't have\nthe right permissions.\n\n459\n00:24:37.570 --> 00:24:39.970\nSo we have a temple ready to go.\n\n460\n00:24:39.970 --> 00:24:41.520\nNow, we are ready to go ahead and\n\n461\n00:24:41.520 --> 00:24:46.270\nactually, we're gonna configure the actual\ncertificate registration authority.\n\n462\n00:24:46.270 --> 00:24:48.925\nAnd so, we gonna hop back\nover onto our ADFS Server and\n\n463\n00:24:48.925 --> 00:24:51.610\nwe're gonna do some little\nPowerShell magic here.\n\n464\n00:24:51.610 --> 00:24:54.000\nSo this is as a result of what\nwe did on a certain details, so\n\n465\n00:24:54.000 --> 00:24:57.730\nwe clearly this out and\nwe get some real estate here.\n\n466\n00:24:57.730 --> 00:24:58.850\nAnd then, what we're going to do,\n\n467\n00:24:58.850 --> 00:25:02.748\nis we're going to use this other\ncommand-let that I have saved here.\n\n468\n00:25:02.748 --> 00:25:06.060\nAnd let me just copy and\npaste this guy real quick, and\n\n469\n00:25:06.060 --> 00:25:11.120\nwe'll get it into the PowerShell here,\nto where we can see this.\n\n470\n00:25:11.120 --> 00:25:14.960\nNow, this is a new command-let\nthat comes with the actual\n\n471\n00:25:14.960 --> 00:25:18.410\nupdate that's coming out later in summer.\n\n472\n00:25:18.410 --> 00:25:22.150\nAnd what this is, is this is\nsetting the certificate authority,\n\n473\n00:25:22.150 --> 00:25:25.820\nyou're actually gonna configure\nthe registration authority this way.\n\n474\n00:25:25.820 --> 00:25:29.600\nAnd so the PowerShell command-let is\nthe set ADFS certificate authority and\n\n475\n00:25:29.600 --> 00:25:30.880\nthat exists today, but\n\n476\n00:25:30.880 --> 00:25:35.640\nthere's some command parameters here that\nwon't exist until you get that update.\n\n477\n00:25:35.640 --> 00:25:39.340\nNow the enrollment agent,\nas you can think about that, that is, hey,\n\n478\n00:25:39.340 --> 00:25:43.050\nwhat is the name of\nthe certificate template that\n\n479\n00:25:43.050 --> 00:25:48.040\nthe ADFS registration authority is going\nto use as an enrollment agent template?\n\n480\n00:25:48.040 --> 00:25:50.460\nAnd you'll notice,\nthere's no spaces in this.\n\n481\n00:25:50.460 --> 00:25:52.670\nThis is that internal name here.\n\n482\n00:25:52.670 --> 00:25:56.365\nAnd then the next parameter is\nthe Windows Hello certificate template.\n\n483\n00:25:56.365 --> 00:26:00.905\nIt's very self explanatory, and\nthat says, what is the Windows flow\n\n484\n00:26:00.905 --> 00:26:05.335\ncertificate template that I'm going to\nissue or enroll on behalf of a user?\n\n485\n00:26:05.335 --> 00:26:08.377\nAnd in here, I have my Windows Hello for\nBusiness authentication,\n\n486\n00:26:08.377 --> 00:26:13.235\nthese are both those template\nnames that we created earlier.\n\n487\n00:26:13.235 --> 00:26:16.930\nNow, an important thing here, again,\nis, if you use different names,\n\n488\n00:26:16.930 --> 00:26:20.924\nthese things in green here, or these\nparameters that are after the arguments,\n\n489\n00:26:20.924 --> 00:26:24.975\nyou're going to need to make sure to use\nthe appropriate names that you've had in\n\n490\n00:26:24.975 --> 00:26:26.740\nfor your environment.\n\n491\n00:26:26.740 --> 00:26:29.840\nSo what we're going to do is,\nwe have everything set,\n\n492\n00:26:29.840 --> 00:26:32.850\nwe're goinna go ahead and\nhit enter on this.\n\n493\n00:26:32.850 --> 00:26:35.250\nOkay, so as you can tell, it didn't work.\n\n494\n00:26:35.250 --> 00:26:39.880\nAnd I spotted the error very quickly here,\nso I've got the error.\n\n495\n00:26:39.880 --> 00:26:42.950\nI know what I did wrong and\nI forgot a very important command here.\n\n496\n00:26:42.950 --> 00:26:45.170\nSo what we're gonna do is I'll\npaste in the right one here and\n\n497\n00:26:45.170 --> 00:26:46.620\nwe'll go through that.\n\n498\n00:26:46.620 --> 00:26:49.360\nI did this enrollment agent,\nyou can see enrollment agent there.\n\n499\n00:26:49.360 --> 00:26:52.180\nAnd then I pass the name of\nthe template to enrollment agent.\n\n500\n00:26:52.180 --> 00:26:53.800\nSo don't do that,\n\n501\n00:26:53.800 --> 00:26:58.800\ninstead add the next command-let, which is\nthe enrollment agent certificate template.\n\n502\n00:26:58.800 --> 00:27:01.790\nThat's where you wanna pass\nthe actual template to, and\n\n503\n00:27:01.790 --> 00:27:04.920\nso then everything else stays\nthe same whereas the Windows Hello\n\n504\n00:27:04.920 --> 00:27:07.740\ncertificate template and\nthen you'll use that template.\n\n505\n00:27:07.740 --> 00:27:10.610\nSo, as they say,\none more time with feeling, we will\n\n506\n00:27:10.610 --> 00:27:15.050\ntry to run this command and in this\nparticular case we should see it turn and\n\n507\n00:27:15.050 --> 00:27:19.380\ngo and let's see, I know I hit Enter.\n\n508\n00:27:19.380 --> 00:27:20.050\nMaybe I didn't.\n\n509\n00:27:20.050 --> 00:27:21.030\nLet's make sure I did.\n\n510\n00:27:22.240 --> 00:27:22.740\nThere we go.\n\n511\n00:27:23.760 --> 00:27:27.640\nAnd so now, we have our command-let\nran and everything is good.\n\n512\n00:27:27.640 --> 00:27:32.500\nSo what we can do is to see if\nthis actually did take effect.\n\n513\n00:27:32.500 --> 00:27:36.400\nWe can just run the Get-ADFS Certificate,\nand\n\n514\n00:27:36.400 --> 00:27:40.019\nthen you can choose the autocomplete here.\n\n515\n00:27:43.681 --> 00:27:46.509\nAnd you could see that\nthe settings are there, but\n\n516\n00:27:46.509 --> 00:27:49.340\nwe wanna validate everything we did.\n\n517\n00:27:49.340 --> 00:27:52.420\nSo what I'm gonna do is I'm\ngonna restart this, but Don,\n\n518\n00:27:52.420 --> 00:27:55.740\nI don't think we're gonna have enough time\nto go through the validation process.\n\n519\n00:27:55.740 --> 00:27:57.090\n&gt;&gt; Yeah,\nthe validation's is real important, but\n\n520\n00:27:57.090 --> 00:27:59.960\nit does take a long time to go\nthrough it and get to that process.\n\n521\n00:27:59.960 --> 00:28:03.170\nSo what would probably be a good idea here\nis we've gotta do a reboot anyway for\n\n522\n00:28:03.170 --> 00:28:05.720\nthis to all be nice and clean and set up.\n\n523\n00:28:05.720 --> 00:28:08.370\nSo, we'll gonna do a restart and\nend the episode here.\n\n524\n00:28:08.370 --> 00:28:11.655\nAnd then in the next part, when we come\nback to part two, the system will be\n\n525\n00:28:11.655 --> 00:28:14.110\nre-booted that'll give us a chance\nto go through the verifications.\n\n526\n00:28:14.110 --> 00:28:15.490\nDoes that sound good, Mike?\n\n527\n00:28:15.490 --> 00:28:16.720\n&gt;&gt; Sure.\nWe're not gonna re-boot though,\n\n528\n00:28:16.720 --> 00:28:18.180\nit's just a restart, but-\n&gt;&gt; Okay.\n\n529\n00:28:18.180 --> 00:28:22.330\n&gt;&gt; You're right the verification process\nto give them the tools of the trade to\n\n530\n00:28:22.330 --> 00:28:25.060\nfigure out whether the search\nare enrolled and things of that nature.\n\n531\n00:28:25.060 --> 00:28:27.585\nIt's gonna take time and\nit definitely wont fit in this episode.\n\n532\n00:28:27.585 --> 00:28:29.590\n&gt;&gt; All right and\nyou said we just need to do a restart.\n\n533\n00:28:29.590 --> 00:28:30.915\n&gt;&gt; We're restarting the service or?\n\n534\n00:28:30.915 --> 00:28:31.840\n&gt;&gt; The ADFS service.\n\n535\n00:28:31.840 --> 00:28:32.930\nWe're just gonna restart it.\n\n536\n00:28:32.930 --> 00:28:34.211\nThe machine can stay up and running.\n\n537\n00:28:34.211 --> 00:28:34.883\n&gt;&gt; Perfect.\n&gt;&gt; Awesome.\n\n538\n00:28:34.883 --> 00:28:36.828\n&gt;&gt; Yep.\n&gt;&gt; That's always good to avoid downtime\n\n539\n00:28:36.828 --> 00:28:38.174\nand-\n&gt;&gt; Absolutely.\n\n540\n00:28:38.174 --> 00:28:41.320\n&gt;&gt; All right, ladies and gentlemen,\nwe'll go ahead and wrap it up right here.\n\n541\n00:28:41.320 --> 00:28:44.150\nDefinitely tune back in for\npart two because\n\n542\n00:28:44.150 --> 00:28:48.270\nin theory everything is configured and\nworking out except we haven't verified it.\n\n543\n00:28:48.270 --> 00:28:49.260\nSo we definitely needed to do that and\n\n544\n00:28:49.260 --> 00:28:50.850\nmake sure it's working the way\nthat it is supposed to.\n\n545\n00:28:50.850 --> 00:28:53.080\nAnd get to see the fruits of our labor.\n\n546\n00:28:53.080 --> 00:28:56.830\nSo, tune back in for part two, but\nfor now signing off for ITPRO.TV.\n\n547\n00:28:56.830 --> 00:28:58.130\nI'm your host Don Pezet.\n\n548\n00:28:58.130 --> 00:28:59.730\n&gt;&gt; And I'm Mike Stephens.\n\n549\n00:28:59.730 --> 00:29:01.722\n&gt;&gt; And we'll see you next time.\n\n550\n00:29:01.722 --> 00:29:07.777\n[MUSIC]\n\n551\n00:29:07.777 --> 00:29:10.503\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "216550653"
        },
        {
          "description": "In this episode, Don and Mike go through the steps required to verify the Registration Authority is properly configured and that certificate auto enrollment is properly issuing certificates to the ADFS service.",
          "length": "1049",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-2-configuring_the_registration_authority_pt2-050317-PGM.00_00_12_07.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-2-configuring_the_registration_authority_pt2-050317-PGM.00_00_12_07.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-2-configuring_the_registration_authority_pt2-050317-PGM.00_00_12_07.Still001-sm.jpg",
          "title": "Configuring the Registration Authority Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.220 --> 00:00:01.313\nWelcome to ITProTV.\n\n2\n00:00:01.313 --> 00:00:02.043\nI'm your host Don Pezet.\n\n3\n00:00:02.043 --> 00:00:06.426\n&gt;&gt; [CROSSTALK].\n\n4\n00:00:06.426 --> 00:00:08.329\n[MUSIC]\n\n5\n00:00:08.329 --> 00:00:12.486\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:12.486 --> 00:00:14.125\n&gt;&gt; All right, ladies and gentlemen,\n\n7\n00:00:14.125 --> 00:00:16.208\nwelcome back to another\nepisode of ITProTV.\n\n8\n00:00:16.208 --> 00:00:20.276\nI'm your host Don Pezet back again with\nanother episode of Windows Hello for\n\n9\n00:00:20.276 --> 00:00:21.210\nBusiness.\n\n10\n00:00:21.210 --> 00:00:23.790\nAnd in the last episode,\nboy we did a lot of stuff.\n\n11\n00:00:23.790 --> 00:00:26.320\nWe configured a bunch of things with\nour registration authority, and\n\n12\n00:00:26.320 --> 00:00:27.700\ngot things put into place.\n\n13\n00:00:27.700 --> 00:00:29.550\nAnd we left off with stopping, or\n\n14\n00:00:29.550 --> 00:00:32.200\nwith restarting our\nActive Directory Federation Service.\n\n15\n00:00:32.200 --> 00:00:36.600\nAnd so now we're gonna be going into\nverifying that all the stuff we did,\n\n16\n00:00:36.600 --> 00:00:37.470\nactually works.\n\n17\n00:00:37.470 --> 00:00:40.700\nAnd here to walk us through that process\nIs Mr. Mike Stephens from Microsoft.\n\n18\n00:00:40.700 --> 00:00:41.910\nMike, thanks for joining us again.\n\n19\n00:00:41.910 --> 00:00:42.920\n&gt;&gt; Thanks for having me back Don.\n\n20\n00:00:42.920 --> 00:00:44.340\n&gt;&gt; Not that you had much choice,\n\n21\n00:00:44.340 --> 00:00:47.210\nbecause you left us kind\nof on a cliffhanger there.\n\n22\n00:00:47.210 --> 00:00:48.730\n&gt;&gt; Left you hanging a little bit, right?\n\n23\n00:00:48.730 --> 00:00:51.660\n&gt;&gt; Everything, in theory,\nis set up and working,\n\n24\n00:00:51.660 --> 00:00:53.680\nwe just need to take that theory part out,\nright?\n\n25\n00:00:53.680 --> 00:00:55.700\n&gt;&gt; Right, right,\nwe wanna take the theory part out.\n\n26\n00:00:55.700 --> 00:00:59.615\nBut I mean, again I reiterated it\nquite a bit is that when you're doing\n\n27\n00:00:59.615 --> 00:01:02.940\na distributed system, you do a little bit\nof work and and you wanna validate it.\n\n28\n00:01:02.940 --> 00:01:05.800\nBecause each one builds\noff of the next and\n\n29\n00:01:05.800 --> 00:01:08.960\nif you don't validate,\nit just makes your troubleshooting harder.\n\n30\n00:01:08.960 --> 00:01:12.370\nSo the validation steps that we're gonna\ngo through today are good to make sure\n\n31\n00:01:12.370 --> 00:01:14.400\nthat, hey, we can move to the next step.\n\n32\n00:01:14.400 --> 00:01:17.430\nBut more importantly\nis if anything breaks,\n\n33\n00:01:17.430 --> 00:01:21.830\nyou're gonna learn some troubleshooting\ntools that you can use to go forward with.\n\n34\n00:01:21.830 --> 00:01:25.619\nSo the first thing we need to\ndo is we set up all the ADFS and\n\n35\n00:01:25.619 --> 00:01:27.726\nthe registration authority.\n\n36\n00:01:27.726 --> 00:01:29.852\nNow if you remember back in that episode,\n\n37\n00:01:29.852 --> 00:01:34.458\nwhat we did is we needed to have\na registration authority certificate.\n\n38\n00:01:34.458 --> 00:01:37.930\nAnd that was the certificate that\nthe AD FS service is actually going to\n\n39\n00:01:37.930 --> 00:01:39.180\nenroll for.\n\n40\n00:01:39.180 --> 00:01:43.480\nAnd then that certificate is going to\nbe used to sign other certificates and\n\n41\n00:01:43.480 --> 00:01:43.990\nrequests.\n\n42\n00:01:43.990 --> 00:01:49.281\nBut do we really know whether the ADFS\nservice really got the certificate or not?\n\n43\n00:01:49.281 --> 00:01:50.433\nBecause we did not do it manually.\n\n44\n00:01:50.433 --> 00:01:54.890\nADFS does all the certificate\nmanagement for us, which is great.\n\n45\n00:01:54.890 --> 00:01:57.320\nBecause, well we don't wanna\nhave to keep doing that work.\n\n46\n00:01:57.320 --> 00:02:01.310\nSo, in order to do that, we're gonna\nlook at the event viewer, and go there.\n\n47\n00:02:01.310 --> 00:02:05.200\nSo, I'm gonna go to my ADFS server,\nand I have the event viewer up here.\n\n48\n00:02:05.200 --> 00:02:08.031\nAnd what we're going to do is\nthe first thing we're gonna do,\n\n49\n00:02:08.031 --> 00:02:10.816\nis we're gonna open up these\napplication and service logs.\n\n50\n00:02:10.816 --> 00:02:14.670\nAnd we're gonna go straight to the ADFS\nlogs and this administrative log.\n\n51\n00:02:15.730 --> 00:02:18.780\nNow we have a whole bunch of things in\nhere from when I was restarting and\n\n52\n00:02:18.780 --> 00:02:19.680\ndoing some other things.\n\n53\n00:02:19.680 --> 00:02:23.540\nBut the key thing we wanna look in here\nis this 443 event that's right here\n\n54\n00:02:23.540 --> 00:02:24.140\nat the top.\n\n55\n00:02:24.140 --> 00:02:27.400\nI'll bring that up so it's a little\nbit more visible to everybody.\n\n56\n00:02:27.400 --> 00:02:29.690\nAnd this 443 event tells us that,\n\n57\n00:02:29.690 --> 00:02:34.340\nhey, the CA enrollment certificate\nmanagement cycle was complete.\n\n58\n00:02:34.340 --> 00:02:37.960\nAs I said, the ADFS server does all\nof the certificate management for us.\n\n59\n00:02:37.960 --> 00:02:40.210\nWe don't need to enroll\ncertificates manually.\n\n60\n00:02:40.210 --> 00:02:43.410\nWe just tell it the template,\nwhat template it needs to use, and boom,\n\n61\n00:02:43.410 --> 00:02:44.280\nit goes.\n\n62\n00:02:44.280 --> 00:02:47.910\nSo we're like, okay, it's complete but\nthat still doesn't give us any\n\n63\n00:02:47.910 --> 00:02:50.060\ninformation of whether there's\na certificate there or not.\n\n64\n00:02:50.060 --> 00:02:53.530\nSo we have another event log that\nwe can use to help with that.\n\n65\n00:02:53.530 --> 00:02:57.990\nWe used this event log earlier when we\nwere looking at the domain controller.\n\n66\n00:02:57.990 --> 00:03:02.360\nBut this one, ADFS service is\na group managed service account.\n\n67\n00:03:02.360 --> 00:03:05.050\nIt's still an actual user account.\n\n68\n00:03:05.050 --> 00:03:08.950\nSo what we need to do is we need to look\nat the certificate life cycle log but\n\n69\n00:03:08.950 --> 00:03:12.110\nwe wanna do it for the user and\nnot the actual system.\n\n70\n00:03:12.110 --> 00:03:17.310\nSo to do that, we're gonna expand\ndown here to these Microsoft windows.\n\n71\n00:03:17.310 --> 00:03:19.790\nAnd we're gonna scroll and\nthese are little cut off but\n\n72\n00:03:19.790 --> 00:03:22.730\nyou'll get to the Cs and\nyou'll seeing these certificate.\n\n73\n00:03:22.730 --> 00:03:23.690\nCertificate service,\n\n74\n00:03:23.690 --> 00:03:28.240\ncertificate right here, this is the guy\nwe want the certificate services one.\n\n75\n00:03:28.240 --> 00:03:31.830\nAnd I'll spin this guy out so\nyou can see that this is the one for\n\n76\n00:03:31.830 --> 00:03:34.100\nthe system that we used earlier for\nthe domain control.\n\n77\n00:03:34.100 --> 00:03:37.436\nBut this is the one for\nany user that's on this machine, and\n\n78\n00:03:37.436 --> 00:03:41.725\nit's a really great log, cuz it tells\nus when you enroll for a certificate.\n\n79\n00:03:41.725 --> 00:03:45.284\nIt will even tell you when a certificate\nis deleted, which is really great for\n\n80\n00:03:45.284 --> 00:03:46.820\ntroubleshooting.\n\n81\n00:03:46.820 --> 00:03:47.985\nSo let's expand this log out.\n\n82\n00:03:47.985 --> 00:03:52.960\nAnd you're going to look that it says,\nhey a new certificate was installed.\n\n83\n00:03:52.960 --> 00:03:55.810\nOkay, so let's look at that certificate.\n\n84\n00:03:55.810 --> 00:03:56.670\nLet's see what it is.\n\n85\n00:03:58.110 --> 00:03:59.888\nIf we look in here and go, wow, hey.\n\n86\n00:03:59.888 --> 00:04:02.590\nThe MicrosoftIdentitServer\nServiceHost.exe.\n\n87\n00:04:02.590 --> 00:04:04.430\nWell little do you know that's ADFS.\n\n88\n00:04:04.430 --> 00:04:06.030\nAnd if that wasn't a giveaway,\n\n89\n00:04:06.030 --> 00:04:09.636\nour account name gives us a really\ngood indicator that the ADFS service,\n\n90\n00:04:09.636 --> 00:04:13.820\nthat group managed service account is\nactually the one enrolled for that.\n\n91\n00:04:13.820 --> 00:04:17.660\nAnd it's in the user's context and it\ntells us the action was an enrollment so\n\n92\n00:04:17.660 --> 00:04:22.320\nwe know that the ADFS service, so\nfar Don, it's looking like it's working.\n\n93\n00:04:22.320 --> 00:04:25.470\nLet's keep going more,\nwe have a certificate thumbprint.\n\n94\n00:04:25.470 --> 00:04:29.050\nThis is gonna be really good so\nlet's remember these last four here.\n\n95\n00:04:29.050 --> 00:04:32.140\nThis c17a,\nthis is gonna be important later.\n\n96\n00:04:33.530 --> 00:04:36.480\nThe great thing is is that\nit has our template in here.\n\n97\n00:04:36.480 --> 00:04:43.420\nSo now we know that this template was\nactually, used our certificate template.\n\n98\n00:04:43.420 --> 00:04:47.770\nAnd it tells us the name of the which\nis that certificate registration\n\n99\n00:04:47.770 --> 00:04:48.550\nrequest agent.\n\n100\n00:04:48.550 --> 00:04:51.170\n&gt;&gt; So the nice part here Mike is\nthat by looking in the event log we\n\n101\n00:04:51.170 --> 00:04:51.760\nsee the events.\n\n102\n00:04:51.760 --> 00:04:53.860\nWe know that these\ncertificates were issued.\n\n103\n00:04:53.860 --> 00:04:57.148\nWe don't have to take it for\ngranted or assume that it's been done.\n\n104\n00:04:57.148 --> 00:05:01.550\nCuz we can't log in as the ADFS\nservice account to see things.\n\n105\n00:05:01.550 --> 00:05:05.340\nBut here we're able to see it in the logs,\nwe know it worked, and now we can move on.\n\n106\n00:05:05.340 --> 00:05:07.010\nAnd that helps with our troubleshooting,\nright?\n\n107\n00:05:07.010 --> 00:05:08.360\n&gt;&gt; Yeah, I mean, absolutely, Don.\n\n108\n00:05:08.360 --> 00:05:10.290\nWe know that the event logs don't lie.\n\n109\n00:05:10.290 --> 00:05:12.130\nWe did enroll a cert.\n\n110\n00:05:12.130 --> 00:05:15.760\nAnd there's enough data in the event\nlog to give us a very good inclination\n\n111\n00:05:15.760 --> 00:05:17.660\nthat the ADFS service account enrolled for\n\n112\n00:05:17.660 --> 00:05:20.350\nthis cert has the rights\ncertificate template name.\n\n113\n00:05:20.350 --> 00:05:22.055\nAll of these things are there.\n\n114\n00:05:22.055 --> 00:05:25.950\nThe thing about this is it really only\ngive us a high level information.\n\n115\n00:05:25.950 --> 00:05:28.780\nIf you recall back in when we\ndid the domain controller one,\n\n116\n00:05:28.780 --> 00:05:32.430\nwe could actually open up the certificate\nmanager and look at that certificate.\n\n117\n00:05:32.430 --> 00:05:37.000\nAnd see like the validity period and other\nattributes like the subject name and this.\n\n118\n00:05:37.000 --> 00:05:39.950\nWe can't see that from the event log.\n\n119\n00:05:39.950 --> 00:05:43.630\nSo we really wanna make sure it's\nlike if you're having problems\n\n120\n00:05:43.630 --> 00:05:46.240\na certificate enrolled but\nhaving a bad subject name or\n\n121\n00:05:46.240 --> 00:05:50.600\nhaving it being expired,\nwe need to be able to see that.\n\n122\n00:05:50.600 --> 00:05:53.120\nAnd this is where the problem lies.\n\n123\n00:05:53.120 --> 00:05:57.180\nYou can't use the certificate manager\nwith a group's managed service account,\n\n124\n00:05:57.180 --> 00:05:58.040\nit just doesn't work.\n\n125\n00:05:59.320 --> 00:06:02.270\nThe certificate manager was built\nway before group managed services\n\n126\n00:06:02.270 --> 00:06:07.245\naccounts were ever there and so we need\nto be able to see that certificate.\n\n127\n00:06:08.380 --> 00:06:13.460\nLuckily though, we can actually find\na way, and this is a really cool trick\n\n128\n00:06:13.460 --> 00:06:16.780\nin being able to see certificates that\nget enrolled for that service account.\n\n129\n00:06:16.780 --> 00:06:20.360\nSo what I'm going to do is we're\ngonna go back to my ADFS server.\n\n130\n00:06:20.360 --> 00:06:24.160\nAnd you can see where I still have\nthe event log that we looked at last.\n\n131\n00:06:24.160 --> 00:06:27.970\nAnd what we're gonna do is we're gonna\nopen up a PowerShell cmdlet right now.\n\n132\n00:06:27.970 --> 00:06:32.154\nAnd because we're going to be going to be\ngoing into the user profile of this ADFS\n\n133\n00:06:32.154 --> 00:06:34.580\nservice, we need to be\nelevated because typically\n\n134\n00:06:34.580 --> 00:06:36.950\nnormal users can't see\nthe profile of other users.\n\n135\n00:06:36.950 --> 00:06:39.430\nSo we're gonna do a run\nas administrator here.\n\n136\n00:06:39.430 --> 00:06:42.400\nAnd we're gonna open up\nthis PowerShell cmdlet.\n\n137\n00:06:42.400 --> 00:06:47.820\nAnd I'm going to basically start\ngoing into the user's folder,\n\n138\n00:06:47.820 --> 00:06:49.900\nwhich is where all the user\nprofiles are stored.\n\n139\n00:06:49.900 --> 00:06:51.600\nAnd if you look at this,\n\n140\n00:06:51.600 --> 00:06:54.560\nthen you can see where we have\nthe ADFS service has a user profile.\n\n141\n00:06:54.560 --> 00:06:56.360\nSo let's switch into that directory, and\n\n142\n00:06:56.360 --> 00:06:58.640\nI'll do auto-complete to\nmake this a little easier.\n\n143\n00:06:58.640 --> 00:06:59.890\nAnd so I don't type it wrong.\n\n144\n00:07:01.510 --> 00:07:04.431\nAnd if we keep doing this,\nwe are gonna see like,\n\n145\n00:07:04.431 --> 00:07:06.869\nhere are some folders here that we have.\n\n146\n00:07:06.869 --> 00:07:09.824\nThere is one that is not here and\nthat is called AppData.\n\n147\n00:07:09.824 --> 00:07:14.740\nAnd so what we need to do is we can\nswitch to it and just do autocorrect.\n\n148\n00:07:14.740 --> 00:07:18.580\nAnd so when we get into the AppData\nfolder, now we can start seeing\n\n149\n00:07:18.580 --> 00:07:21.900\nall these other folders here and\nwe can go into the Roaming folder.\n\n150\n00:07:21.900 --> 00:07:25.771\nWhere we're navigating to just to give\nyou a heads up is that those certificate\n\n151\n00:07:25.771 --> 00:07:29.173\nstores, the user's certificate store,\nwhat we call the My Store or\n\n152\n00:07:29.173 --> 00:07:30.243\nthe Personal Store.\n\n153\n00:07:30.243 --> 00:07:34.730\nThey're stored in the user profile and\neach user has one of these.\n\n154\n00:07:34.730 --> 00:07:37.340\nAnd so\nwhat we're gonna do is we're gonna go\n\n155\n00:07:37.340 --> 00:07:40.090\nto the back end where\nthat data is persisted.\n\n156\n00:07:40.090 --> 00:07:43.940\nAnd we're gonna go look at the certificate\non the file system, and we're gonna show\n\n157\n00:07:43.940 --> 00:07:47.320\nyou a neat trick with Certutil of\nhow we can actually see that data.\n\n158\n00:07:47.320 --> 00:07:50.650\nBut first we gotta get there, and this is\ndeeply rooted within the user profile.\n\n159\n00:07:50.650 --> 00:07:52.390\nSo we're gonna go to the roaming folder,\n\n160\n00:07:52.390 --> 00:07:57.590\nand if I do a DIR here you can see\nthat there's a Microsoft folder here.\n\n161\n00:07:57.590 --> 00:08:00.980\nNow notice over here in this Mode DS.\n\n162\n00:08:00.980 --> 00:08:05.090\nNow before we go, a lot of people don't\nuse PowerShell as their console window.\n\n163\n00:08:05.090 --> 00:08:09.442\nI do but, I want to make sure that people\nunderstand that if you do the same thing.\n\n164\n00:08:09.442 --> 00:08:13.160\nI'm gonna load up a command prompt just so\nthat everybody can see that as well.\n\n165\n00:08:14.380 --> 00:08:19.100\nAnd I'll do the same thing here,\nI'll go to Users and ADFS.\n\n166\n00:08:19.100 --> 00:08:24.500\nAnd then we're gonna go to AppData,\nand then I'm gonna go to Roaming.\n\n167\n00:08:24.500 --> 00:08:25.920\nAnd i think we're right here.\n\n168\n00:08:25.920 --> 00:08:28.848\nBut If I do DIR,\nit doesn't show anything and\n\n169\n00:08:28.848 --> 00:08:31.553\nthe reason why is these are system files.\n\n170\n00:08:31.553 --> 00:08:35.524\nAnd so basically what you need to do is\nif you like to use the console window but\n\n171\n00:08:35.524 --> 00:08:38.877\nyou can't remember these things,\nautocorrect will still, or\n\n172\n00:08:38.877 --> 00:08:40.570\nautocomplete will still work.\n\n173\n00:08:41.770 --> 00:08:45.340\nSo if you kind of remember these\npaths that I'm showing you today\n\n174\n00:08:45.340 --> 00:08:47.610\nthey'll still work and\nthey'll work perfectly fine.\n\n175\n00:08:47.610 --> 00:08:50.820\nBut if you do a DR cause you can't\nremember or anything like that,\n\n176\n00:08:50.820 --> 00:08:53.870\nlike we know I need to go\nto the Microsoft folder.\n\n177\n00:08:53.870 --> 00:08:57.319\nThat's not there, but if you dir/aas,\n\n178\n00:08:57.319 --> 00:09:03.110\nlet's get carried away here, as,\nnow you can see the Microsoft folder.\n\n179\n00:09:03.110 --> 00:09:07.530\nSo if you use PowerShell, you're not gonna\nhave this kind of a limitation here,\n\n180\n00:09:07.530 --> 00:09:09.640\nbecause it shows you all\nof the system folders.\n\n181\n00:09:09.640 --> 00:09:12.680\nBut if you're in the command\nprompt you're definitely gonna\n\n182\n00:09:12.680 --> 00:09:17.120\nneed to either remember it so you can sit\nthere and keep working through the path.\n\n183\n00:09:17.120 --> 00:09:19.140\nOr just go ahead and use PowerShell there.\n\n184\n00:09:19.140 --> 00:09:22.301\nOr you can keep doing the tab in order\nto just autocomplete until you see it.\n\n185\n00:09:22.301 --> 00:09:24.624\nI'm gonna close down this console prompt,\n\n186\n00:09:24.624 --> 00:09:28.110\nand I'm gonna continue doing\nthis through PowerShell.\n\n187\n00:09:28.110 --> 00:09:31.570\nSo we wanna go to the Microsoft directory.\n\n188\n00:09:31.570 --> 00:09:35.340\nAnd then I'll keep doing DIRs just so you\nguys can keep seeing the folder structure\n\n189\n00:09:35.340 --> 00:09:38.730\nas we keep digging deeper and\ndeeper into the user profile.\n\n190\n00:09:38.730 --> 00:09:43.150\nSo now you can see that we have system\ncertificates, credentials, crypto.\n\n191\n00:09:43.150 --> 00:09:44.210\nThis is where we start.\n\n192\n00:09:44.210 --> 00:09:45.880\nWindows is storing a lot of stuff.\n\n193\n00:09:46.940 --> 00:09:51.410\nSo where we want to go is we want to go\ninto the system certificates folder and\n\n194\n00:09:51.410 --> 00:09:53.670\nthen again, we do another DIR.\n\n195\n00:09:53.670 --> 00:09:57.850\nSo now we have a request, that's where\nall of our certificate requests go.\n\n196\n00:09:57.850 --> 00:10:00.880\nAnd we have my and\nas I mentioned before My Store and\n\n197\n00:10:00.880 --> 00:10:02.600\nthe Personal Store they are one and\nthe same.\n\n198\n00:10:02.600 --> 00:10:06.470\nSo whatever you see in the Personal Store\nwhen you have the certificate manager up\n\n199\n00:10:06.470 --> 00:10:08.730\nthat's what's mapped to the My Store.\n\n200\n00:10:08.730 --> 00:10:10.285\nSo let's switch into the My Store here.\n\n201\n00:10:10.285 --> 00:10:12.470\nAnd then we're gonna do a DIR here.\n\n202\n00:10:12.470 --> 00:10:16.660\nAnd then we have certificates, we have\nthose wonderful certificate revocation\n\n203\n00:10:16.660 --> 00:10:20.200\nlists, certificate trust list keys,\nand app container so\n\n204\n00:10:20.200 --> 00:10:22.360\nwe have more and more data here.\n\n205\n00:10:22.360 --> 00:10:24.760\nAnd what we're interested in is\nwe wanna know the certificates.\n\n206\n00:10:25.910 --> 00:10:27.670\nSo we're gonna switch to certificates.\n\n207\n00:10:27.670 --> 00:10:32.480\nNow we're really really deep inside\nthis user profile, super deep.\n\n208\n00:10:32.480 --> 00:10:37.430\nBut if we do a DIR here we're gonna see\na whole bunch of certificates here.\n\n209\n00:10:38.450 --> 00:10:42.340\nThese are the actual file names\nof the certificate itself and so\n\n210\n00:10:42.340 --> 00:10:44.740\nnow we can actually see\nwhere these files are.\n\n211\n00:10:44.740 --> 00:10:46.963\nNow we got a bunch of these.\n\n212\n00:10:46.963 --> 00:10:49.372\nADFS creates a bunch of\ncertificates all on own,\n\n213\n00:10:49.372 --> 00:10:53.016\nthese are self sign certs that it used for\ntoken signing and encryption and\n\n214\n00:10:53.016 --> 00:10:56.380\nthings of that nature,\nwhich we don't really care about.\n\n215\n00:10:56.380 --> 00:10:59.750\nWhat we really wanna know is, what is\nthe certificate, what are the details of\n\n216\n00:10:59.750 --> 00:11:02.990\nthe certificate that it enrolled for\nthat enrollment agent cert?\n\n217\n00:11:02.990 --> 00:11:08.040\nSo we can't remember what that thumbprint\nwas lets jump back over here and\n\n218\n00:11:08.040 --> 00:11:10.700\nlets double click on\nthis event that we had.\n\n219\n00:11:10.700 --> 00:11:14.600\nWe can go into the details and\ngo hey what was that thumbprint?\n\n220\n00:11:14.600 --> 00:11:17.316\nThat thumbprint ended right here in c17a.\n\n221\n00:11:17.316 --> 00:11:21.295\nc17a, so\nlets go back to our PowerShell and\n\n222\n00:11:21.295 --> 00:11:26.080\nlook here we've got\na certificate here with c17a.\n\n223\n00:11:26.080 --> 00:11:31.980\nThis is the thumbprint of the certificate\nthat the event log told us was enrolled.\n\n224\n00:11:31.980 --> 00:11:36.185\nSo what I'm gonna do in PowerShell here\nI'm just going to copy that file name.\n\n225\n00:11:36.185 --> 00:11:37.925\nThis is a file name and\n\n226\n00:11:37.925 --> 00:11:41.005\nit'll show up just fine in the console\nwindow as well as PowerShell.\n\n227\n00:11:41.005 --> 00:11:44.435\nNow because I have such a long\ncommand line prompt to get to this,\n\n228\n00:11:44.435 --> 00:11:47.895\nwe're gonna just use the command\nto get to a clean command line so\n\n229\n00:11:47.895 --> 00:11:51.245\nyou can see this, what I'm about to type,\nwhich is really simple.\n\n230\n00:11:51.245 --> 00:11:53.016\nAll we're gonna do is\nwe're gonna type Certutil.\n\n231\n00:11:53.016 --> 00:11:56.912\nAnd then we're gonna paste that long\nthumbprint which is the file name.\n\n232\n00:11:56.912 --> 00:12:01.917\nRemember it's just we're gonna pass\nthe file name to the Certutil command.\n\n233\n00:12:01.917 --> 00:12:06.277\nAnd what you're gonna see is it's gonna\nactually decipher all of the certificate\n\n234\n00:12:06.277 --> 00:12:08.870\ninformation for us so we can read it.\n\n235\n00:12:08.870 --> 00:12:10.723\nSo we're gonna do Certutil and\n\n236\n00:12:10.723 --> 00:12:15.560\nthen I'm going to do the wonderful paste\nhere of that particular certificate.\n\n237\n00:12:15.560 --> 00:12:19.850\nAnd then we're gonna hit enter on this guy\nand I have to spell certutil correctly,\n\n238\n00:12:19.850 --> 00:12:24.250\nwhich is why I always try to\npre-type these guys for you.\n\n239\n00:12:24.250 --> 00:12:31.580\nSo lets try it one more time,\ncertutil and lets paste.\n\n240\n00:12:31.580 --> 00:12:35.330\nAnd look here now you start\nseeing the certificate, and\n\n241\n00:12:35.330 --> 00:12:37.960\nin here we can see the serial number,\nwe see the issuer.\n\n242\n00:12:37.960 --> 00:12:41.730\nHere's some important data that we're\ngonna need that's not before, not after.\n\n243\n00:12:41.730 --> 00:12:45.060\nThis is our validity period,\nthis is critical.\n\n244\n00:12:45.060 --> 00:12:48.930\nEven if you have a cert, if the cert's\nexpired, what good is the cert?\n\n245\n00:12:48.930 --> 00:12:51.240\nThis is a great way to where\nyou can go and look at it.\n\n246\n00:12:51.240 --> 00:12:53.000\nYou get to see the subject name.\n\n247\n00:12:53.000 --> 00:12:56.060\nThere's no doubt right now,\nI mean, look at that, Don.\n\n248\n00:12:56.060 --> 00:13:00.674\nIt's @adfssvc server, that's our service\naccount, we know that it requested this.\n\n249\n00:13:00.674 --> 00:13:05.275\nThe template shows us that it was actually\nthe Windows Hello enrollment agent it got\n\n250\n00:13:05.275 --> 00:13:06.830\nthat certificate.\n\n251\n00:13:06.830 --> 00:13:09.890\nWe now can see enough of the information\n\n252\n00:13:09.890 --> 00:13:14.360\nabout that certificate to where we can at\nleast see that the certificate is valid.\n\n253\n00:13:14.360 --> 00:13:16.470\nSo this is a great troubleshooting step.\n\n254\n00:13:16.470 --> 00:13:20.990\nSo we have the event log that\nsaid a certificate is good and\n\n255\n00:13:20.990 --> 00:13:23.720\nI think in a deployment scenario\nwe can just go ahead and\n\n256\n00:13:23.720 --> 00:13:27.700\nuse that event log like things\nare ready to go let's just move on.\n\n257\n00:13:27.700 --> 00:13:31.160\nBut if you're having problems with\nthe certificate on the enrollment agent,\n\n258\n00:13:31.160 --> 00:13:34.750\nlike it may not be there or\nyou're having problems, you can\n\n259\n00:13:34.750 --> 00:13:39.020\nuse this as a great troubleshooting\ntool to go get that information and\n\n260\n00:13:39.020 --> 00:13:41.130\nto see if that certificate is there.\n\n261\n00:13:41.130 --> 00:13:45.780\nBut if you never see the event log ID,\nyou need to stop, backtrack\n\n262\n00:13:45.780 --> 00:13:48.980\nwhat you were doing, and make sure that\nyou have those group memberships working.\n\n263\n00:13:48.980 --> 00:13:53.460\nThat you have permissions set on the\ncertificate authority on those templates,\n\n264\n00:13:53.460 --> 00:13:57.030\nmake sure you publish those\ncert templates to the right CA.\n\n265\n00:13:57.030 --> 00:14:00.650\nThose are all the things that\nwe need to really backtrack on.\n\n266\n00:14:00.650 --> 00:14:04.470\nAnd you don't wanna move forward any\nmore here until you definitely see\n\n267\n00:14:04.470 --> 00:14:08.500\nthat 1 ,006 event that says hey,\nyou got a certificate.\n\n268\n00:14:08.500 --> 00:14:12.893\nAnd then you validate that that\ncertificate is actually the ADFS account\n\n269\n00:14:12.893 --> 00:14:14.557\nusing the event log there.\n\n270\n00:14:14.557 --> 00:14:16.431\n&gt;&gt; Now,\nyou mentioned the validity period and\n\n271\n00:14:16.431 --> 00:14:20.210\nwe can see where that certificate in\nparticular expired in 2019, right?\n\n272\n00:14:20.210 --> 00:14:21.997\nSo we're good for two years.\n\n273\n00:14:21.997 --> 00:14:22.555\n&gt;&gt; Yeah.\n&gt;&gt; In two\n\n274\n00:14:22.555 --> 00:14:23.619\nyears there's going to be a renewal.\n\n275\n00:14:23.619 --> 00:14:27.470\nDo we use the same process for\nvalidating whether they renewed?\n\n276\n00:14:27.470 --> 00:14:29.620\nNo, actually renewal is much easier.\n\n277\n00:14:29.620 --> 00:14:33.220\nNow the great thing about it as I said,\nADFS does its own certificate management,\n\n278\n00:14:33.220 --> 00:14:34.620\nso that's great.\n\n279\n00:14:34.620 --> 00:14:38.560\nSo what's gonna happen is,\nADFS also does it's own renewal.\n\n280\n00:14:38.560 --> 00:14:40.610\nSo we don't need to\nworry about the renewal.\n\n281\n00:14:40.610 --> 00:14:45.970\nWhat will happen is approximately 60\ndays before that certificate expires\n\n282\n00:14:45.970 --> 00:14:49.760\nADFS is going to start trying to\nrenew that cert all on its own.\n\n283\n00:14:50.760 --> 00:14:53.230\nAnd there are occasions where\nthat renewal won't happen and\n\n284\n00:14:53.230 --> 00:14:54.920\nthe cert will eventually expire.\n\n285\n00:14:54.920 --> 00:14:58.830\nThen as you said Don,\nwe'll do that same process all over again.\n\n286\n00:14:58.830 --> 00:15:02.320\nWhere if we actually get an expired cert,\nwe'll just go ahead and\n\n287\n00:15:02.320 --> 00:15:03.710\nrenew and ask for a new one.\n\n288\n00:15:03.710 --> 00:15:06.180\nWe'll create a new certificate request.\n\n289\n00:15:06.180 --> 00:15:10.770\nBut ideally what will happen, is that\nduring that 60 day window, at one point or\n\n290\n00:15:10.770 --> 00:15:14.830\nanother ADFS service would just reach out,\nrenew that certificate, and\n\n291\n00:15:14.830 --> 00:15:16.730\nthen things'll just keep\ngoing automatically.\n\n292\n00:15:16.730 --> 00:15:19.650\nAnd this is one piece of infrastructure\n\n293\n00:15:19.650 --> 00:15:22.580\nthat we don't have to keep managing\nover and over every two years.\n\n294\n00:15:22.580 --> 00:15:26.580\nBecause, I don't know about you, but\nI don't remember when certificates expire.\n\n295\n00:15:26.580 --> 00:15:28.010\nSo this is a great feature to have.\n\n296\n00:15:28.010 --> 00:15:31.070\n&gt;&gt; Yeah, another thing that I always fall\nfor is I might know that it's expiring but\n\n297\n00:15:31.070 --> 00:15:34.040\nI haven't worked with it in two years at\nthat point [LAUGH] I gotta remember how to\n\n298\n00:15:34.040 --> 00:15:35.453\ndo it, that's always a challenge.\n\n299\n00:15:35.453 --> 00:15:39.880\n&gt;&gt; Yeah, I tend to sleep and that kind of\nstuff just, it's a reboot for me, yeah.\n\n300\n00:15:39.880 --> 00:15:41.170\n&gt;&gt; Yep, garbage in, garbage out.\n\n301\n00:15:41.170 --> 00:15:41.760\n&gt;&gt; Yep.\n\n302\n00:15:41.760 --> 00:15:44.601\n&gt;&gt; All right, well, ladies and gentlemen,\nat this point we have validated that\n\n303\n00:15:44.601 --> 00:15:46.812\nour certificates have been issued,\nthat they are in place.\n\n304\n00:15:46.812 --> 00:15:48.290\nAnd we're looking good there.\n\n305\n00:15:48.290 --> 00:15:50.350\nWhich means we're ready to\nmove a little bit forward.\n\n306\n00:15:50.350 --> 00:15:55.240\nBut I know now is actually a great\nspot to, well for two things.\n\n307\n00:15:55.240 --> 00:15:56.740\nOne to stop and end the episode.\n\n308\n00:15:56.740 --> 00:15:58.350\nBut to also to stop it and\n\n309\n00:15:58.350 --> 00:16:02.450\nkind of take a look at all the different\npieces that we've been putting together.\n\n310\n00:16:02.450 --> 00:16:05.683\nOver the last three episodes we have\nreally configured a lot of different\n\n311\n00:16:05.683 --> 00:16:07.228\nelements inside of the solution.\n\n312\n00:16:07.228 --> 00:16:08.880\n&gt;&gt; Yeah the infrastructure itself.\n\n313\n00:16:08.880 --> 00:16:10.380\n&gt;&gt; And it gets confusing.\n\n314\n00:16:10.380 --> 00:16:13.370\nSo we wanna spend a little bit of time\nkind of going over those components making\n\n315\n00:16:13.370 --> 00:16:15.710\nsure you have an understanding of\nhow everything works together.\n\n316\n00:16:15.710 --> 00:16:17.500\nBut we don't have enough\ntime left in this episode.\n\n317\n00:16:17.500 --> 00:16:20.000\nSo what we'll do is we'll move\nthat off to a part three.\n\n318\n00:16:20.000 --> 00:16:21.660\nAnd in part three we'll cover that,\n\n319\n00:16:21.660 --> 00:16:25.270\nwe'll hit the higher level overview\nof how all this stuff fits together.\n\n320\n00:16:25.270 --> 00:16:28.190\nAnd then wrap up our final validation\nbefore we kinda move on to actually\n\n321\n00:16:28.190 --> 00:16:30.520\ngetting Windows Hello for\nBusiness up and running.\n\n322\n00:16:30.520 --> 00:16:33.150\nMike did you have anything else you wanted\nto mention before we wrap the show up?\n\n323\n00:16:33.150 --> 00:16:34.930\n&gt;&gt; No, no precisely what you said,\n\n324\n00:16:34.930 --> 00:16:38.065\nis right now we've done a lot of\nknob turning as I like to call it.\n\n325\n00:16:38.065 --> 00:16:41.560\nAnd so what we're gonna do is we\nhave a nice diagram that's gonna\n\n326\n00:16:41.560 --> 00:16:45.010\nactually connect all the dots of\nsome of the stuff that we set up.\n\n327\n00:16:45.010 --> 00:16:47.540\nAnd you're gonna see some of the stuff\nthat you haven't set up yet.\n\n328\n00:16:47.540 --> 00:16:51.460\nBut It's right in the middle point of this\ndeployment to where it's a good time to\n\n329\n00:16:51.460 --> 00:16:54.900\nkind of revisit how all of these\nthings are gonna fit together.\n\n330\n00:16:54.900 --> 00:16:56.450\nWe're gonna look at\nthe provisioning flow and\n\n331\n00:16:56.450 --> 00:16:58.220\nthings of that nature in the next episode.\n\n332\n00:16:58.220 --> 00:17:02.730\nAnd really be able to spend some time\non it to make sure nobody's confused.\n\n333\n00:17:02.730 --> 00:17:05.162\n&gt;&gt; All right well with that in\nmind we're gonna go ahead and\n\n334\n00:17:05.162 --> 00:17:06.311\nwrap this one up for here.\n\n335\n00:17:06.311 --> 00:17:08.300\nThat's about all we got.\n\n336\n00:17:08.300 --> 00:17:10.062\n&gt;&gt; Yeah.\n&gt;&gt; [LAUGH] Signing off for\n\n337\n00:17:10.062 --> 00:17:12.235\nITProTV I'm your host Don Pezet.\n\n338\n00:17:12.235 --> 00:17:13.450\n&gt;&gt; And I'm Mike Stephens.\n\n339\n00:17:13.450 --> 00:17:15.452\n&gt;&gt; And we'll see you back for part three.\n\n340\n00:17:15.452 --> 00:17:22.566\n[MUSIC]\n\n341\n00:17:22.566 --> 00:17:24.964\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "216550946"
        },
        {
          "description": "In this episode, Don and Mike perform a recap of all the components configured so far and how they work together to support user authentication. Mike then goes on to create the DNS records and internet zone settings to complete the configuration of the Registration Authority.",
          "length": "1157",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-3-configuring_the_registration_authority_pt3-050417-PGM.00_19_03_09.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-3-configuring_the_registration_authority_pt3-050417-PGM.00_19_03_09.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-5-3-configuring_the_registration_authority_pt3-050417-PGM.00_19_03_09.Still001-sm.jpg",
          "title": "Configuring the Registration Authority Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.250 --> 00:00:05.794\nWelcome to ITProTV,\nI'm your host Don Pezet, [CROSSTALK]\n\n2\n00:00:05.794 --> 00:00:08.199\n[MUSIC]\n\n3\n00:00:08.199 --> 00:00:12.355\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.355 --> 00:00:15.291\n&gt;&gt; All right, good morning,\ngood afternoon, and good evening, and\n\n5\n00:00:15.291 --> 00:00:17.262\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:17.262 --> 00:00:21.750\nI'm your host, Don Pezet, back again with\nanother episode of Windows Hello for\n\n7\n00:00:21.750 --> 00:00:22.990\nBusiness.\n\n8\n00:00:22.990 --> 00:00:27.420\nAnd specifically, this is gonna be Part 3\nof Configuring a Registration Authority.\n\n9\n00:00:27.420 --> 00:00:28.139\nI know, three parts, but\n\n10\n00:00:28.139 --> 00:00:30.022\nthere's a lot of steps that we go\nthrough to get this set up, right?\n\n11\n00:00:30.022 --> 00:00:33.189\nAnd we wanna make sure that we spend the\nright amount of time to make sure that we\n\n12\n00:00:33.189 --> 00:00:36.230\nunderstand what we're doing and\nget it configured properly.\n\n13\n00:00:36.230 --> 00:00:39.020\nAnd back here in the studio to help\nus with that is Mr Mike Stephens.\n\n14\n00:00:39.020 --> 00:00:40.560\nMike, thanks for joining us again.\n\n15\n00:00:40.560 --> 00:00:42.509\n&gt;&gt; Thanks for having me back for a Part 3.\n\n16\n00:00:42.509 --> 00:00:45.607\n&gt;&gt; And I know at the end of the last\nepisode, we had gone through and\n\n17\n00:00:45.607 --> 00:00:48.887\nwe configured some more settings,\nmore certificate templates,\n\n18\n00:00:48.887 --> 00:00:50.806\nmore permissions, right?\n\n19\n00:00:50.806 --> 00:00:54.250\nAnd we said that we wanted to take\na moment to step back and try and\n\n20\n00:00:54.250 --> 00:00:55.370\nlook at the big picture.\n\n21\n00:00:55.370 --> 00:00:58.190\nBecause we'd configured so\nmany little pieces\n\n22\n00:00:58.190 --> 00:01:02.620\nthat it's easy to kind of lose sight\nof what is performing what role.\n\n23\n00:01:02.620 --> 00:01:04.740\nAnd so you were gonna give\nus a little guided tour,\n\n24\n00:01:04.740 --> 00:01:07.830\nkind of a high visibility picture\nof what's going on, right?\n\n25\n00:01:07.830 --> 00:01:12.580\n&gt;&gt; That's right, Don, we've done a lot of\nknob turning, as I like to call it here.\n\n26\n00:01:12.580 --> 00:01:15.301\nAnd so in the beginning,\nwe gave you a kind of a really good\n\n27\n00:01:15.301 --> 00:01:18.139\nunderstanding of what we were\ngoing to do in the topology and\n\n28\n00:01:18.139 --> 00:01:20.786\nthe hierarchy of all\nthe infrastructure components.\n\n29\n00:01:20.786 --> 00:01:23.480\nSo then we did a lot of implementation.\n\n30\n00:01:23.480 --> 00:01:25.900\nSo we're kinda like on\nthe Wednesday of our deployment.\n\n31\n00:01:25.900 --> 00:01:28.050\nWe're right there at the hump and\nready to move forward, and\n\n32\n00:01:28.050 --> 00:01:29.780\nit's gonna be downhill from here.\n\n33\n00:01:29.780 --> 00:01:33.090\nBut it's good to step back and after\nwe've turned all these knobs and go hey,\n\n34\n00:01:33.090 --> 00:01:34.761\nwhy do we need all of these things?\n\n35\n00:01:34.761 --> 00:01:38.900\nSo where we can actually show\nyou from a flow chart diagram or\n\n36\n00:01:38.900 --> 00:01:43.360\nlike a swim lane diagram, what is this\nprovisioning flow going to look like?\n\n37\n00:01:43.360 --> 00:01:47.510\nSo what I have here for you is I have this\ndiagram that we're gonna go through here.\n\n38\n00:01:47.510 --> 00:01:49.358\nIt might hit its block in\njust a little bit of this, so\n\n39\n00:01:49.358 --> 00:01:50.583\nwe'll get the hell out of the way.\n\n40\n00:01:50.583 --> 00:01:54.350\nAnd so what it is, is you'll see at the\ntop here, we have the Windows 10 client,\n\n41\n00:01:54.350 --> 00:01:56.620\nthis is gonna be\nthe creator's update client.\n\n42\n00:01:56.620 --> 00:02:01.170\nAnd then we have a domain controller, our\nkey registration service, the certificate\n\n43\n00:02:01.170 --> 00:02:05.280\nregistration authority, the MFA server,\nwhich we haven't gotten to yet, but\n\n44\n00:02:05.280 --> 00:02:08.220\nfear not, it's on the way, and\nthen our certificate authority.\n\n45\n00:02:09.230 --> 00:02:12.611\nNow, the key registration and\nthe certificate registration authority,\n\n46\n00:02:12.611 --> 00:02:15.894\nthose are the ADFS services that\nwe've been installing and working on.\n\n47\n00:02:15.894 --> 00:02:19.160\nAnd we're gonna be doing some more\nwith that along with the MFA server.\n\n48\n00:02:19.160 --> 00:02:21.900\nBut let's look at what this\nprovisioning flow is gonna look like.\n\n49\n00:02:21.900 --> 00:02:25.660\nSo you can see all the different\nthings that are working here, so\n\n50\n00:02:25.660 --> 00:02:28.790\nyou can understand why\nwe actually have this.\n\n51\n00:02:28.790 --> 00:02:32.080\nSo in the Windows 10, you're gonna\ndo a normal Windows 10 sign on.\n\n52\n00:02:32.080 --> 00:02:35.610\nSo this is just using normal Kerberos,\nwhere you get the AS request and\n\n53\n00:02:35.610 --> 00:02:36.860\nthe AS response.\n\n54\n00:02:36.860 --> 00:02:41.780\nAnd you're gonna get back a TGT, which\nis how you authenticate to the domain.\n\n55\n00:02:41.780 --> 00:02:44.212\nNow once we authenticate to that domain,\n\n56\n00:02:44.212 --> 00:02:47.970\nwe're gonna do some prerequisite\nchecks that happen in there.\n\n57\n00:02:47.970 --> 00:02:52.070\nAnd I know all those prerequisite checks,\nwe don't have them on the diagram itself.\n\n58\n00:02:52.070 --> 00:02:54.070\nBut those are to make sure\neverything is in place.\n\n59\n00:02:54.070 --> 00:02:57.775\nSo if we show you that provisioning,\nthat we're very sure that that\n\n60\n00:02:57.775 --> 00:03:00.185\nprovisioning's gonna kick off and\nbe successful.\n\n61\n00:03:00.185 --> 00:03:01.425\nSo what's gonna happen is,\n\n62\n00:03:01.425 --> 00:03:05.015\nwe're gonna assume here that those\nprerequisite checks have been okay.\n\n63\n00:03:05.015 --> 00:03:07.795\nAnd then what happens is that MFA,\nor that multi-factor,\n\n64\n00:03:07.795 --> 00:03:11.377\nthat second factor of authentication,\nremember, factors we talked about.\n\n65\n00:03:11.377 --> 00:03:14.897\nIn this first spot, we did the password,\nthat's our first factor.\n\n66\n00:03:14.897 --> 00:03:17.607\nNow we need a second factor,\nbecause we're not gonna upgrade that\n\n67\n00:03:17.607 --> 00:03:21.197\nweak credential to a strong one\nwithout that second factor.\n\n68\n00:03:21.197 --> 00:03:24.587\nAnd so this is where we go over\nto the MFA server, and it's gonna\n\n69\n00:03:24.587 --> 00:03:28.507\nactually perform a second factor,\nwhere it's gonna call you or text you.\n\n70\n00:03:28.507 --> 00:03:30.497\nOr maybe even use an authenticator app,\n\n71\n00:03:30.497 --> 00:03:32.877\nto actually know that you\nare who you claim to be.\n\n72\n00:03:33.980 --> 00:03:35.768\nWe'll get a successful response,\n\n73\n00:03:35.768 --> 00:03:39.079\nwhich is this dotted line coming\nback to the Windows 10 client.\n\n74\n00:03:39.079 --> 00:03:41.910\nOnce that happens, the provisioning\napplication that you're gonna see\n\n75\n00:03:41.910 --> 00:03:46.390\nduring the log on is gonna say, hey, okay,\nyou've successfully completed the second\n\n76\n00:03:46.390 --> 00:03:49.570\nfactor of authentication,\nlet's go ahead and create a pin.\n\n77\n00:03:49.570 --> 00:03:53.950\nSo the user will get this prompt\nto create a pin and validate that.\n\n78\n00:03:53.950 --> 00:03:57.548\nOnce that pin is created, underneath\nthe covers, what we're doing is just,\n\n79\n00:03:57.548 --> 00:03:58.755\nwe're generating a key.\n\n80\n00:03:58.755 --> 00:04:03.178\nAnd we're gonna use the TPM to protect\nthat key, it's all done within the TPM.\n\n81\n00:04:03.178 --> 00:04:07.285\nAnd so then, that key we have,\nwe talked about that key,\n\n82\n00:04:07.285 --> 00:04:10.121\nthat's an RSA key to 2048 bit key.\n\n83\n00:04:10.121 --> 00:04:13.302\nAnd so that key, we have a public key,\nand we have a private key.\n\n84\n00:04:13.302 --> 00:04:15.553\nThat public key,\nwe need to register it, and\n\n85\n00:04:15.553 --> 00:04:18.222\nthis is where that key\nregistration where we did all of\n\n86\n00:04:18.222 --> 00:04:22.335\nthat schema extensions in order to\nhave a place to store that public key.\n\n87\n00:04:22.335 --> 00:04:24.995\nSo that public key is then\ngonna be registered and\n\n88\n00:04:24.995 --> 00:04:27.535\nsent over to the key registration.\n\n89\n00:04:27.535 --> 00:04:32.080\nWhat happens then is the key registration,\nit's not just gonna register a key.\n\n90\n00:04:32.080 --> 00:04:33.960\nDon created a key and\nsent it, so it's good.\n\n91\n00:04:33.960 --> 00:04:37.780\nNo, that key registration service is gonna\nhave a gate next to it, which will say,\n\n92\n00:04:37.780 --> 00:04:42.150\nhey, let me make sure this user did\nthat second factor of authentication.\n\n93\n00:04:42.150 --> 00:04:45.420\nAnd notice we're doing this check,\nnot on the client.\n\n94\n00:04:45.420 --> 00:04:49.310\nWe're doing it on a trusted component,\nthat key registration service.\n\n95\n00:04:49.310 --> 00:04:53.245\nAnd the reason why is, is that malware,\nhopefully, is not running there.\n\n96\n00:04:53.245 --> 00:04:55.980\nMalware on a client can kind of\ncircumvent those kind of checks.\n\n97\n00:04:55.980 --> 00:04:59.490\nSo we need to have that defense and\ndepth and a design that says sure,\n\n98\n00:04:59.490 --> 00:05:03.240\nwe're gonna trust the client, but\nit's good to validate as well as trust.\n\n99\n00:05:03.240 --> 00:05:07.110\nSo that key registration service is\ngonna look for that multifactor,\n\n100\n00:05:07.110 --> 00:05:08.627\nthat second factor claim.\n\n101\n00:05:08.627 --> 00:05:11.447\nAnd when it sees it, it's gonna say okay,\nthat's a good claim,\n\n102\n00:05:11.447 --> 00:05:14.830\nlet's write that back to the domain\ncontroller on that user object.\n\n103\n00:05:14.830 --> 00:05:17.783\nWe'll get the success back of\nthe right to the domain controller,\n\n104\n00:05:17.783 --> 00:05:21.000\nand then basically we're gonna send\nthat success back to the client, so\n\n105\n00:05:21.000 --> 00:05:24.050\nthe client knows that the key\nregistration was okay.\n\n106\n00:05:24.050 --> 00:05:27.450\nNow this is where we talked about\nkey trust and search trust.\n\n107\n00:05:27.450 --> 00:05:29.639\nAnd the key trust model,\nwe're kind of done and\n\n108\n00:05:29.639 --> 00:05:32.285\nwe can just shortcut down to\nthe provisioning complete.\n\n109\n00:05:32.285 --> 00:05:36.840\nBut what we're showing you guys today\nis the certificate trust model.\n\n110\n00:05:36.840 --> 00:05:38.270\nAnd in that certificate trust model,\n\n111\n00:05:38.270 --> 00:05:41.990\nwe now need to actually\nrequest that certificate.\n\n112\n00:05:41.990 --> 00:05:46.300\nSo the client begins by creating\na certificate request, and he's gonna\n\n113\n00:05:46.300 --> 00:05:50.320\nsend that certificate request over to\nthe certificate registration authority.\n\n114\n00:05:50.320 --> 00:05:53.650\nNow remember, that certificate\nregistration authority is a service\n\n115\n00:05:53.650 --> 00:05:55.820\nrunning on the ADFS server.\n\n116\n00:05:55.820 --> 00:06:01.239\nAnd so, again, that we're gonna gate that\nagain by using a trusted third party,\n\n117\n00:06:01.239 --> 00:06:04.630\njust to make sure, hey,\nwas that MFA claim fresh?\n\n118\n00:06:04.630 --> 00:06:08.034\nDid I sign in and just leave my laptop\nsteady for ten minutes, and now,\n\n119\n00:06:08.034 --> 00:06:10.930\nsomebody's coming in and\ntrying to do something?\n\n120\n00:06:10.930 --> 00:06:14.000\nSo, we're gonna make sure that\nyou still have that MFA claim and\n\n121\n00:06:14.000 --> 00:06:18.670\nthat we're gonna make sure\nthat you also have that key.\n\n122\n00:06:18.670 --> 00:06:19.990\nWe're gonna do that key now.\n\n123\n00:06:19.990 --> 00:06:21.765\nSo the MFA client gets us through there.\n\n124\n00:06:21.765 --> 00:06:25.740\nNow we have a public key and\na certificate request.\n\n125\n00:06:25.740 --> 00:06:29.520\nAll certificate requests start with you\nlocally generating that private key.\n\n126\n00:06:29.520 --> 00:06:33.770\nThat private key is what we did with\nthe TPM during the key creation up there.\n\n127\n00:06:33.770 --> 00:06:35.470\nNow we have that public key,\n\n128\n00:06:35.470 --> 00:06:39.110\nand that certificate request\nhas that public key in there.\n\n129\n00:06:39.110 --> 00:06:44.090\nSo what we wanna do is, we wanna make\nsure that that public key is the same one\n\n130\n00:06:44.090 --> 00:06:46.985\nthat we created during\nthe provisioning flow.\n\n131\n00:06:46.985 --> 00:06:48.275\nAnd I ask why?\n\n132\n00:06:48.275 --> 00:06:51.073\nWell, again,\nthis is kinda defense in depth and\n\n133\n00:06:51.073 --> 00:06:53.265\nthe design is protecting from malware.\n\n134\n00:06:53.265 --> 00:06:56.476\nIf malware is on the machine to\nwhere it can essentially say\n\n135\n00:06:56.476 --> 00:06:58.544\nI'm gonna create a software based key.\n\n136\n00:06:58.544 --> 00:07:03.431\nAnd then I'm gonna actually try to request\na certificate through the registration\n\n137\n00:07:03.431 --> 00:07:05.315\nauthority with a software key,\n\n138\n00:07:05.315 --> 00:07:09.532\nthen you could then get a key certificate\nback that can move laterally.\n\n139\n00:07:09.532 --> 00:07:12.678\nYou could take that certificate, and\nnow I can move it to Don's machine or\n\n140\n00:07:12.678 --> 00:07:14.310\nanybody else's machine.\n\n141\n00:07:14.310 --> 00:07:18.130\nAnd I can potentially be somebody else.\n\n142\n00:07:18.130 --> 00:07:22.020\nSo what we wanna do is we wanna make sure\nthat the key you created and registered\n\n143\n00:07:22.020 --> 00:07:26.880\nduring provisioning, is it the exact key\nthat is a part of the certificate request?\n\n144\n00:07:26.880 --> 00:07:30.130\nSo what we'll do is we'll go and\ncheck that public key against the domain\n\n145\n00:07:30.130 --> 00:07:33.760\ncontroller, where we registered it\nwith all those schema extensions.\n\n146\n00:07:33.760 --> 00:07:35.800\nThe domain controller is gonna\nsend back a public key, and\n\n147\n00:07:35.800 --> 00:07:38.390\nthen we're gonna validate\nthat both of them match.\n\n148\n00:07:38.390 --> 00:07:41.011\nAnd when they match,\nthen we're gonna come back and\n\n149\n00:07:41.011 --> 00:07:45.066\nsay that certificate that we created,\nthat registration or that certificate,\n\n150\n00:07:45.066 --> 00:07:48.962\nthe enrolment agent certificate,\nthat's where that part comes into play.\n\n151\n00:07:48.962 --> 00:07:52.364\nThat's down here in the sign\nrequest with an RA certificate.\n\n152\n00:07:52.364 --> 00:07:57.242\nThe registration authority's gonna\ntake that enrolment agent certificate,\n\n153\n00:07:57.242 --> 00:08:02.580\nand it's gonna sign the certificate\nrequest again with its certificate.\n\n154\n00:08:02.580 --> 00:08:05.720\nAnd then it's gonna send that request\nover to the certificate authority\n\n155\n00:08:05.720 --> 00:08:07.380\nthat you see there.\n\n156\n00:08:07.380 --> 00:08:11.160\nNow, we're actually finally making\nit to the certificate authority\n\n157\n00:08:11.160 --> 00:08:12.340\nto actually get the certificate.\n\n158\n00:08:12.340 --> 00:08:14.540\nBut we're gonna do some more gates.\n\n159\n00:08:14.540 --> 00:08:18.544\nBecause remembering that Windows Hello for\nBusiness authentication certificate,\n\n160\n00:08:18.544 --> 00:08:19.662\nwe looked at that cert.\n\n161\n00:08:19.662 --> 00:08:23.388\nAnd we wanted to make sure that nobody\ncould issue that cert unless certain\n\n162\n00:08:23.388 --> 00:08:24.660\ncontrols were on those.\n\n163\n00:08:24.660 --> 00:08:26.720\nIt had those issuance requirements,\nif you remember,\n\n164\n00:08:26.720 --> 00:08:29.840\nback in the last Part 2, I think it was.\n\n165\n00:08:29.840 --> 00:08:33.410\nSo now, the certificate\nauthority is gonna check for\n\n166\n00:08:33.410 --> 00:08:37.020\nthe registration authority signature\non that certificate request.\n\n167\n00:08:37.020 --> 00:08:38.650\nAnd if it's not there, it's gonna fail.\n\n168\n00:08:38.650 --> 00:08:41.440\nIt's just gonna fail out, and\nthe provisioning will fail.\n\n169\n00:08:41.440 --> 00:08:42.280\nBut if it is there,\n\n170\n00:08:42.280 --> 00:08:45.045\nthen that's the gate that says,\nokay, the certificate authority,\n\n171\n00:08:45.045 --> 00:08:49.150\nyou've met all the prerequisites or all\nthe issuance requirements that you need.\n\n172\n00:08:49.150 --> 00:08:51.150\nWe're gonna go ahead and issue that cert.\n\n173\n00:08:51.150 --> 00:08:55.600\nThe cert is then gonna get sent back\nto the multifactor server, and then,\n\n174\n00:08:55.600 --> 00:08:57.620\nit's gonna get sent back to the client.\n\n175\n00:08:57.620 --> 00:09:00.690\nAnd then when you're done, you're gonna\nget a provisioning complete page.\n\n176\n00:09:00.690 --> 00:09:03.814\nNow, this looks like a lot of work,\nbut in essence,\n\n177\n00:09:03.814 --> 00:09:08.146\nthis is going to take in your environment,\ndepending on your network and\n\n178\n00:09:08.146 --> 00:09:11.141\nanything, this is all\ndone within 90 seconds.\n\n179\n00:09:11.141 --> 00:09:14.270\nAnd it's done once, and\nthen it's complete.\n\n180\n00:09:14.270 --> 00:09:18.462\nSo, this is a really fast operation,\nbut it's an automatic operation, and\n\n181\n00:09:18.462 --> 00:09:21.245\nyour users are just gonna\nsee a provisioning page.\n\n182\n00:09:21.245 --> 00:09:23.421\nThey're gonna work through the flow,\nand before you know it,\n\n183\n00:09:23.421 --> 00:09:24.704\nthey're gonna have a certificate.\n\n184\n00:09:24.704 --> 00:09:27.710\nAnd they're gonna be ready to\nuse Windows Flow for Business.\n\n185\n00:09:27.710 --> 00:09:31.440\nSo, that's putting everything\ninto perspective there of\n\n186\n00:09:31.440 --> 00:09:34.020\nhow all of these components\nare working together.\n\n187\n00:09:34.020 --> 00:09:37.220\nSo you can remember back\nof when we started, and\n\n188\n00:09:37.220 --> 00:09:39.290\nnow we have a refresher\nright in the middle.\n\n189\n00:09:39.290 --> 00:09:41.730\nSo we still have some more\nthings that we need to do\n\n190\n00:09:41.730 --> 00:09:44.090\nto finish out the registration authority.\n\n191\n00:09:44.090 --> 00:09:47.600\nAnd then we're gonna start moving towards\nthe multifactor authentication server in\n\n192\n00:09:47.600 --> 00:09:49.200\nsome other episodes here.\n\n193\n00:09:49.200 --> 00:09:54.198\nSo the next thing we need to do, Don,\nis that I created that ADFS farm.\n\n194\n00:09:54.198 --> 00:09:58.678\nSo now what I need to do is just with\nthat ADFS farm, remember, it's a farm,\n\n195\n00:09:58.678 --> 00:10:01.320\nit's a virtual IPN and a virtual name.\n\n196\n00:10:01.320 --> 00:10:05.000\nSo we need to actually go and\ncreate a DNS record for that name.\n\n197\n00:10:05.000 --> 00:10:07.819\nThis is very important because\ndevice registration is\n\n198\n00:10:07.819 --> 00:10:09.359\none of those prerequisites.\n\n199\n00:10:09.359 --> 00:10:13.368\nAnd if device registration can't locate\nthat name in DNS, then we're gonna have\n\n200\n00:10:13.368 --> 00:10:17.890\na problem, and it's not gonna work, and\nwe're never gonna see the provisioning.\n\n201\n00:10:17.890 --> 00:10:21.147\nSo, I'm gonna hop over to my\ndomain controller here, and\n\n202\n00:10:21.147 --> 00:10:25.557\nlet me close out of this guy,\nand, We'll close out.\n\n203\n00:10:27.937 --> 00:10:31.600\nWell, it'd help if I didn't\nhit the space bar there.\n\n204\n00:10:31.600 --> 00:10:34.840\nAnd let's get to this domain\ncontroller right here.\n\n205\n00:10:34.840 --> 00:10:39.910\nAnd I'm gonna just open up\nthe DNS management server, and\n\n206\n00:10:39.910 --> 00:10:41.590\nDNS right here, through there.\n\n207\n00:10:42.660 --> 00:10:44.190\nAnd I'm gonna click here.\n\n208\n00:10:44.190 --> 00:10:50.650\nNow if you remember what we called our\nfederation service, it's on the ADFS host.\n\n209\n00:10:50.650 --> 00:10:55.992\nBut if you remember, the federation\nservice is actually fs.core.contoso.com.\n\n210\n00:10:55.992 --> 00:10:57.756\n&gt;&gt; And then, that's something\nwe bumped into a few times,\n\n211\n00:10:57.756 --> 00:11:00.172\nlike with the certificate, where we\nhad kinda two different names, right?\n\n212\n00:11:00.172 --> 00:11:01.084\nThere was the host name, but\n\n213\n00:11:01.084 --> 00:11:03.340\nthen there was the friendly name\nthat we assigned to the certificate.\n\n214\n00:11:03.340 --> 00:11:05.720\nSo we always gotta remember\nthat we use the right name.\n\n215\n00:11:05.720 --> 00:11:08.013\n&gt;&gt; Correct,\nbecause what's gonna happen is,\n\n216\n00:11:08.013 --> 00:11:11.346\nis the client is definitely gonna\nbe looking for sf.corp.com.\n\n217\n00:11:11.346 --> 00:11:15.193\nAnd so if it can't locate that in DNS,\nthen the great thing about DNS, Don,\n\n218\n00:11:15.193 --> 00:11:19.430\nis that it always gives you an answer, you\njust may not like the answer it gives you.\n\n219\n00:11:19.430 --> 00:11:22.378\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH] So we're gonna go in here and\n\n220\n00:11:22.378 --> 00:11:23.760\ncreate an A record.\n\n221\n00:11:23.760 --> 00:11:27.170\nSo if we look here, we know,\nI have all my A records here.\n\n222\n00:11:27.170 --> 00:11:30.840\nAnd we know that that machine is on\nmy ADFS server, which is right here,\n\n223\n00:11:30.840 --> 00:11:32.810\nwhich it has a IP address of 100.\n\n224\n00:11:32.810 --> 00:11:35.885\nSo all we're gonna do is,\nwe're just gonna say, new host record.\n\n225\n00:11:35.885 --> 00:11:40.447\nAnd we're gonna just say AFS, and then\nwe're gonna just use the same IP address.\n\n226\n00:11:40.447 --> 00:11:48.220\nSo we have 10.0.10.100, and we've\nadded that host in, we're great, done.\n\n227\n00:11:48.220 --> 00:11:53.030\nAnd now we see right here, so now,\nwe've created that actual A record for\n\n228\n00:11:53.030 --> 00:11:55.830\nthe device registration service and\nbasically for\n\n229\n00:11:55.830 --> 00:11:59.380\nall the other services that\nare being hosted on the ADFS server.\n\n230\n00:11:59.380 --> 00:12:01.340\nSo now we have that in place.\n\n231\n00:12:01.340 --> 00:12:04.020\nNow what we really need to\ndo is one more step, and\n\n232\n00:12:04.020 --> 00:12:06.860\nI think we're gonna be done with\nthe registration authority.\n\n233\n00:12:06.860 --> 00:12:08.940\nWhen you connect to this\nregistration authority,\n\n234\n00:12:10.000 --> 00:12:12.480\nI talked about that\nprovisioning application.\n\n235\n00:12:12.480 --> 00:12:17.202\nAnd that provisioning application's going\nto basically launch, and it's gonna\n\n236\n00:12:17.202 --> 00:12:21.868\nopen up a little web browser or a web view\nthat's gonna connect to the ADFS server.\n\n237\n00:12:21.868 --> 00:12:24.670\nAnd that ADFS server will then\nconnect to the MFA server.\n\n238\n00:12:24.670 --> 00:12:28.110\nSo it's kinda like a little\nmini web browser, so to speak.\n\n239\n00:12:28.110 --> 00:12:33.570\nSo the problem is that you may get\nprompted for credentials again.\n\n240\n00:12:33.570 --> 00:12:37.382\nAnd as I said before, when you just signed\nin to the machine and now all of a sudden,\n\n241\n00:12:37.382 --> 00:12:40.827\nyou get this provisioning page,\nwhich is really great, user friendly.\n\n242\n00:12:40.827 --> 00:12:45.180\nBut then I click Next, and\nI have to enter my credentials again.\n\n243\n00:12:45.180 --> 00:12:48.560\nSo, if you're that more security minded,\nby all means, you can leave that there.\n\n244\n00:12:48.560 --> 00:12:52.280\nBut for most people, we wanna just\nlet them use the first sign in and\n\n245\n00:12:52.280 --> 00:12:54.442\nuse those Kerberos\ncredentials that they've got.\n\n246\n00:12:54.442 --> 00:12:58.150\nWe wanna let that just allow them to\nauthenticate into that web flow and\n\n247\n00:12:58.150 --> 00:12:59.190\nnot have that second one.\n\n248\n00:12:59.190 --> 00:13:03.355\nAnd to do that, we have to create\nan Internet zone assignment, so\n\n249\n00:13:03.355 --> 00:13:04.339\nthen that way,\n\n250\n00:13:04.339 --> 00:13:09.290\nwe can say that the fs.corp.contosa.com\nis a legitimate intranet site.\n\n251\n00:13:09.290 --> 00:13:10.730\nAnd since it's an intranet site,\n\n252\n00:13:10.730 --> 00:13:14.260\nwe will jump past that Kerberos\nauthentication to that website.\n\n253\n00:13:14.260 --> 00:13:17.300\nSo I'm gonna close out of\nthe DNS manager here, and\n\n254\n00:13:17.300 --> 00:13:20.380\nthen I'm just gonna load up\nthe group policy management console.\n\n255\n00:13:20.380 --> 00:13:26.657\nAnd in here, we're gonna just\ncreate another GPO in here.\n\n256\n00:13:26.657 --> 00:13:32.045\nAnd this new GPO,\nI'm gonna call this the Internet\n\n257\n00:13:32.045 --> 00:13:37.443\nzone settings, and so,\nInternet zone settings.\n\n258\n00:13:37.443 --> 00:13:40.740\nAnd so, we have that guy there.\n\n259\n00:13:40.740 --> 00:13:44.510\nNow, this is gonna be deployed\nto the computers, and\n\n260\n00:13:44.510 --> 00:13:48.810\nso, in the computer section here,\nwe're gonna go into the policies.\n\n261\n00:13:48.810 --> 00:13:51.610\nLet's bring this out a little bit here, so\n\n262\n00:13:51.610 --> 00:13:53.870\nwe can start seeing as\nwe navigate through.\n\n263\n00:13:53.870 --> 00:13:57.640\nWe're gonna go to Administrative Templates\n&gt; Windows Components.\n\n264\n00:13:57.640 --> 00:14:01.605\nAnd let's just maximize this guy, so\nwe can get some good real estate here.\n\n265\n00:14:01.605 --> 00:14:05.354\nAnd then we're gonna scroll\ndown to Internet Explorer.\n\n266\n00:14:05.354 --> 00:14:09.229\nAnd then in Internet Explorer, let's\nget it into the content window here, so\n\n267\n00:14:09.229 --> 00:14:10.480\nwe can see it here.\n\n268\n00:14:10.480 --> 00:14:15.970\nWe're gonna go to Internet Control Panel,\nthen to the security page, and\n\n269\n00:14:15.970 --> 00:14:19.940\nthen we're going to go to\nthe site to zone mappings here.\n\n270\n00:14:20.940 --> 00:14:24.648\nAnd it is right here,\nthe site to zone assignment list.\n\n271\n00:14:24.648 --> 00:14:29.280\nAnd we're gonna enable this particular\npolicy setting, and then when it's set,\n\n272\n00:14:29.280 --> 00:14:31.380\nit's gonna click to\nshow these assignments.\n\n273\n00:14:31.380 --> 00:14:35.051\nAnd in here, it just has these named\nvalue pairs that we're gonna do here.\n\n274\n00:14:35.051 --> 00:14:37.957\nAnd so what we're gonna put for\nthe value is,\n\n275\n00:14:37.957 --> 00:14:41.871\nwe're gonna put the actual full URL,\nincluding the https.\n\n276\n00:14:41.871 --> 00:14:44.981\nWe need to make sure we include\nthat to our federation service,\n\n277\n00:14:44.981 --> 00:14:46.515\nthat A record that we created.\n\n278\n00:14:46.515 --> 00:14:51.636\nSo, https://fs.corp.contoso.com,\n\n279\n00:14:51.636 --> 00:14:56.756\nnow the values,\nthese are actually explained\n\n280\n00:14:56.756 --> 00:15:00.703\nover in the explain text over here.\n\n281\n00:15:00.703 --> 00:15:04.513\nAnd if you can see it right\nhere under this screen,\n\n282\n00:15:04.513 --> 00:15:07.611\nit's the Internet zone is a value of 1.\n\n283\n00:15:07.611 --> 00:15:12.794\nAnd what we're gonna put here, we're gonna\nput a value of 1 here, which means that,\n\n284\n00:15:12.794 --> 00:15:17.125\nhey, when you see this website,\nplease treat this as an Internet zone.\n\n285\n00:15:17.125 --> 00:15:21.525\nSo that that way, you can do a single\nsign on authentication to it.\n\n286\n00:15:21.525 --> 00:15:24.570\nAnd so we're gonna go ahead and\nclick OK to that.\n\n287\n00:15:24.570 --> 00:15:26.290\nWe'll click OK to that.\n\n288\n00:15:26.290 --> 00:15:29.670\nWe're now done in the editor, so\nwe can now click out of the editor there.\n\n289\n00:15:29.670 --> 00:15:31.290\nAnd now we have this setting.\n\n290\n00:15:31.290 --> 00:15:33.588\nNow, I want this deployed\nto all of my computers.\n\n291\n00:15:33.588 --> 00:15:36.724\nI'm really not worried about\nthis one because eventually,\n\n292\n00:15:36.724 --> 00:15:39.900\nI'm gonna migrate everybody\nover to Windows Hello.\n\n293\n00:15:39.900 --> 00:15:43.180\nSo for simplicity's sake, I'm gonna\ngo ahead and link this to the domain.\n\n294\n00:15:43.180 --> 00:15:46.870\nBut you can link this wherever\nyou need to in your environment,\n\n295\n00:15:46.870 --> 00:15:48.840\ndepending on how your\nActive Directory structure is.\n\n296\n00:15:48.840 --> 00:15:52.260\nAnd remember, you can link a single\nGPO to multiple spots there,\n\n297\n00:15:52.260 --> 00:15:54.310\nthat's the great thing\nabout doing the links.\n\n298\n00:15:54.310 --> 00:15:58.879\nSo we're gonna link this guy over to the\ndomain, and we've got confirmation, and\n\n299\n00:15:58.879 --> 00:16:01.172\nlet's go to our domain just to make sure.\n\n300\n00:16:01.172 --> 00:16:05.430\nAnd you look there,\nwe have the domain policy.\n\n301\n00:16:05.430 --> 00:16:09.000\nAgain, this is also one of those things\nwhere we never wanna change the order of\n\n302\n00:16:09.000 --> 00:16:09.910\nthe domain policy.\n\n303\n00:16:09.910 --> 00:16:13.590\nAlways wanna let that one apply last,\nwhich means we go in reverse, and\n\n304\n00:16:13.590 --> 00:16:16.070\nwe have our Internet zone\nsetting ready to go there.\n\n305\n00:16:16.070 --> 00:16:21.790\nSo that kinda gets us prepared, we've done\na lot in registration authority, but we\n\n306\n00:16:21.790 --> 00:16:26.310\nreally got it set up, and now we're gonna\nmove on to some other stuff here, Don.\n\n307\n00:16:26.310 --> 00:16:29.364\n&gt;&gt; All right, so, I did have a couple\nof questions as you were going through.\n\n308\n00:16:29.364 --> 00:16:29.932\n&gt;&gt; Sure.\n\n309\n00:16:29.932 --> 00:16:31.907\n&gt;&gt; When you were setting up DNS,\nwe did an A record.\n\n310\n00:16:31.907 --> 00:16:35.280\nAnd since it was just pointing to one\nhost, we could have done a C name.\n\n311\n00:16:35.280 --> 00:16:37.871\nBut we'd wanna do an A record\nthere because in reality,\n\n312\n00:16:37.871 --> 00:16:41.890\nwe do more than one A record, right,\npointing to each of the hosts in the farm?\n\n313\n00:16:41.890 --> 00:16:45.310\n&gt;&gt; Well no, the problem you get with\nC names is C names don't necessarily\n\n314\n00:16:45.310 --> 00:16:46.530\nplay well with TLS.\n\n315\n00:16:46.530 --> 00:16:49.460\nBecause what happens is,\nis when you go to a C name,\n\n316\n00:16:49.460 --> 00:16:54.160\nthat C name points to another A record,\nwhich then points to an IP address.\n\n317\n00:16:54.160 --> 00:16:56.220\nAnd so what happens is sometimes,\n\n318\n00:16:56.220 --> 00:17:00.690\nyou will miss that name validation\nin the certificate there.\n\n319\n00:17:00.690 --> 00:17:04.150\nThe other thing that helps with this is\nthat if you don't have load balancing,\n\n320\n00:17:04.150 --> 00:17:06.346\nper se, but\nyou still wanna create a bunch of these,\n\n321\n00:17:06.346 --> 00:17:11.570\nby having A records, you can create\nA records with multiple IP addresses.\n\n322\n00:17:11.570 --> 00:17:14.950\nAnd you can kinda get\nthe cheap DNS round robin as\n\n323\n00:17:16.440 --> 00:17:19.920\nbasically your ability\nto load balance this.\n\n324\n00:17:19.920 --> 00:17:23.430\nNow, DNS, as I said,\nit always gives you an answer.\n\n325\n00:17:23.430 --> 00:17:26.810\nThere's no guarantee that the IP\naddress it returns is gonna be on,\n\n326\n00:17:26.810 --> 00:17:29.890\nwhich is what you get with some of\nthe software and hardware load balancings.\n\n327\n00:17:29.890 --> 00:17:34.090\nBut needless to say, it is better than\njust having that one IP address here.\n\n328\n00:17:34.090 --> 00:17:38.889\nAnd so typically, what would happen in\na production environment is, you're\n\n329\n00:17:38.889 --> 00:17:43.775\ngonna have a virtualized IP address, and\nthe load balancer does it all for you.\n\n330\n00:17:43.775 --> 00:17:46.804\n&gt;&gt; And then, the other question I had was\non the security policy that you created\n\n331\n00:17:46.804 --> 00:17:47.976\nthere for the Internet zone.\n\n332\n00:17:47.976 --> 00:17:51.990\nThat was an IE policy,\nit's been around a long time.\n\n333\n00:17:51.990 --> 00:17:55.280\nAnd but now we're seeing a lot of\npeople who've moved over to Edge or\n\n334\n00:17:55.280 --> 00:17:56.350\nother browsers.\n\n335\n00:17:56.350 --> 00:17:57.530\nBut that doesn't really matter, right,\n\n336\n00:17:57.530 --> 00:17:59.940\nbecause it's the operating\nsystem that's using that?\n\n337\n00:17:59.940 --> 00:18:03.810\n&gt;&gt; Yeah, it's going into the Internet\ncontrol panel itself, so both Edge and\n\n338\n00:18:03.810 --> 00:18:04.660\nIE use that.\n\n339\n00:18:04.660 --> 00:18:07.270\nSo that should be just fine,\nyou should be good to go there.\n\n340\n00:18:07.270 --> 00:18:10.670\nBecause, again,\nit's not really using the full browser.\n\n341\n00:18:10.670 --> 00:18:15.490\nIt's just using the main HTML rendering\ncomponents of the browser to get that.\n\n342\n00:18:15.490 --> 00:18:18.890\n&gt;&gt; Awesome, all right, so now that we've\ngot those set, that's pretty much it for\n\n343\n00:18:18.890 --> 00:18:20.230\nthe registration authority, isn't it?\n\n344\n00:18:20.230 --> 00:18:22.740\n&gt;&gt; Yep, yep, we're pretty much done\nwith the registration authority, but\n\n345\n00:18:22.740 --> 00:18:24.220\nwe've got a few more things to do.\n\n346\n00:18:24.220 --> 00:18:27.882\nBut this was a big chunk, like I said,\nthis is our Wednesday of deployment, so\n\n347\n00:18:27.882 --> 00:18:28.394\nto speak.\n\n348\n00:18:28.394 --> 00:18:29.229\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n349\n00:18:29.229 --> 00:18:31.810\neverything else to down here is\ngonna be pretty straightforward.\n\n350\n00:18:31.810 --> 00:18:34.200\nWe're gonna be able to work\nthrough those pretty easily.\n\n351\n00:18:34.200 --> 00:18:36.030\n&gt;&gt; Excellent, well,\nI definitely look forward to that, but\n\n352\n00:18:36.030 --> 00:18:37.762\nthis is a pretty good spot for\nus to wrap this episode up.\n\n353\n00:18:37.762 --> 00:18:41.177\nWe've seen right here our chance to\nexplain what all the different moving\n\n354\n00:18:41.177 --> 00:18:42.453\ncomponents were, right?\n\n355\n00:18:42.453 --> 00:18:45.580\nSo Mike had his excellent Visio diagram\nthere to show us all the different\n\n356\n00:18:45.580 --> 00:18:47.825\ncomponents and how they work together.\n\n357\n00:18:47.825 --> 00:18:51.287\nWe also saw the final steps in\nconfiguring that registration authority.\n\n358\n00:18:51.287 --> 00:18:54.327\nIt's up and going,\nnow it's time to put it all to use.\n\n359\n00:18:54.327 --> 00:18:57.067\nSo that's what's gonna be coming\nup in the next few episodes.\n\n360\n00:18:57.067 --> 00:18:58.837\nBut for now, we'll go ahead and\nwrap this one up.\n\n361\n00:18:58.837 --> 00:19:01.618\nSo signing off for ITProTV, I'm Don Pezet.\n\n362\n00:19:01.618 --> 00:19:02.652\n&gt;&gt; And I'm Mike Stephens.\n\n363\n00:19:02.652 --> 00:19:04.637\n&gt;&gt; And we'll see you next time.\n\n364\n00:19:04.637 --> 00:19:10.442\n[MUSIC]\n\n365\n00:19:10.442 --> 00:19:13.508\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "216503646"
        },
        {
          "description": "In this episode, Don and Mike explain how you can leverage Azure MFA to power your on-premises deployment. Mike then walks the viewers through installing the pre-requisites for Azure MFA.",
          "length": "1269",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-6-prepare_an_azure_mfa_server-050417-PGM.00_20_56_02.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-6-prepare_an_azure_mfa_server-050417-PGM.00_20_56_02.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-6-prepare_an_azure_mfa_server-050417-PGM.00_20_56_02.Still001-sm.jpg",
          "title": "Prepare an Azure MFA Server",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:01.190\nWelcome to ITProTV.\n\n2\n00:00:01.190 --> 00:00:03.423\nI'm your host, Don Pezet.\n\n3\n00:00:03.423 --> 00:00:08.231\n[CROSSTALK]\n[SOUND]\n\n4\n00:00:08.231 --> 00:00:12.718\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.718 --> 00:00:14.347\n&gt;&gt; All right, ladies and gentlemen,\n\n6\n00:00:14.347 --> 00:00:16.420\nwelcome back to another\nepisode of ITProTV.\n\n7\n00:00:16.420 --> 00:00:17.320\nI'm your host,\n\n8\n00:00:17.320 --> 00:00:21.060\nDon Pezet, back again with another\nepisode of Windows Hello for Business.\n\n9\n00:00:21.060 --> 00:00:24.660\nAnd in this episode we're gonna be talking\nabout pairing and MFA Server, right, and\n\n10\n00:00:24.660 --> 00:00:26.815\nwe're actually gonna be\nusing Azure MFA for this.\n\n11\n00:00:26.815 --> 00:00:30.206\nSo kind of moving a little bit out\nof the on-premises solution, but\n\n12\n00:00:30.206 --> 00:00:34.440\nwe'll talk more about that in a minute\ncuz it does get a little bit confusing.\n\n13\n00:00:34.440 --> 00:00:37.290\nAnd here to help bring\nlight to the darkness or\n\n14\n00:00:37.290 --> 00:00:40.660\nhope to lead our path into this is Mr.\nMike Stevens from Microsoft.\n\n15\n00:00:40.660 --> 00:00:42.020\nMike, thanks for joining us again.\n\n16\n00:00:42.020 --> 00:00:43.710\n&gt;&gt; Thanks for having me back.\n\n17\n00:00:43.710 --> 00:00:44.960\n&gt;&gt; All right now.\n\n18\n00:00:44.960 --> 00:00:48.010\nI said in the title that we're going\nto be talking about Azure MFA,\n\n19\n00:00:48.010 --> 00:00:51.730\nand up until this point,\nall since episode number one,\n\n20\n00:00:51.730 --> 00:00:55.470\nwe've been talking that this\nis an on-premises solution.\n\n21\n00:00:55.470 --> 00:00:58.160\nBut now we're going to kinda break\nthat rule a little bit, right,\n\n22\n00:00:58.160 --> 00:00:59.070\nwe're going to go into Azure.\n\n23\n00:00:59.070 --> 00:01:01.390\nSo tell me a little bit\nabout what we're gonna do.\n\n24\n00:01:01.390 --> 00:01:03.620\n&gt;&gt; Yes, it's a good point Don.\n\n25\n00:01:03.620 --> 00:01:10.270\nI try to explain to this to people, this\nis a 99.9 percent on-premise solution.\n\n26\n00:01:10.270 --> 00:01:14.900\nSo what we're going to do is we're gonna\ntalk about the Azure MFA server today,\n\n27\n00:01:14.900 --> 00:01:17.650\nwhich is different from Azure MFA\n\n28\n00:01:17.650 --> 00:01:21.720\nin that it's a server that\nyou will install on premises.\n\n29\n00:01:21.720 --> 00:01:25.134\nSo, but what it does do is it's\ngonna leverage the Azure MFA\n\n30\n00:01:25.134 --> 00:01:28.498\nservices to actually make that\nsecond factor phone call.\n\n31\n00:01:28.498 --> 00:01:33.286\nAnd the reason why is when we did\nthe analysis here of what MFA is in\n\n32\n00:01:33.286 --> 00:01:35.725\nthe value that it brings.\n\n33\n00:01:35.725 --> 00:01:39.506\nIt's simply, MFA itself is an\ninfrastructure I have a bunch of gateways,\n\n34\n00:01:39.506 --> 00:01:42.819\nyou have a bunch of IO boards and\nmodem lines and all these things.\n\n35\n00:01:42.819 --> 00:01:46.525\nAnd then if you wanna do an authenticator\napp there's development time with that.\n\n36\n00:01:46.525 --> 00:01:50.040\nSo, the the most cost effective way,\nwhich is\n\n37\n00:01:50.040 --> 00:01:53.290\nreally what we want people to use the\ncloud for is where it's cost effective.\n\n38\n00:01:53.290 --> 00:01:56.980\nThe most cost effective ways leverage\nthat service to go ahead and\n\n39\n00:01:56.980 --> 00:02:00.950\nmake the phone call but\nkeep the credentials local.\n\n40\n00:02:00.950 --> 00:02:04.750\nBy credentials I mean those user\naccounts or user accounts and passwords,\n\n41\n00:02:04.750 --> 00:02:07.820\nwe're gonna keep those\nremaining on premises.\n\n42\n00:02:07.820 --> 00:02:11.950\nBut we're gonna use just the service\nitself to do that phone call.\n\n43\n00:02:11.950 --> 00:02:15.570\nAnd so, one of the things that\nwe wanna talk about here is that\n\n44\n00:02:15.570 --> 00:02:17.090\nthe requirements for the server.\n\n45\n00:02:17.090 --> 00:02:21.170\nAnd the easiest way is I have a website\ncome up here to where you can see\n\n46\n00:02:21.170 --> 00:02:23.730\nthese are our requirements right here.\n\n47\n00:02:23.730 --> 00:02:28.940\nGonna see if we can just bring\nthis up a little bit more,\n\n48\n00:02:28.940 --> 00:02:31.840\nso let's see if we can where's our view.\n\n49\n00:02:33.040 --> 00:02:36.730\nAnd we're gonna zoom a little bit\nhere to where we can get this\n\n50\n00:02:36.730 --> 00:02:40.500\nto be a little bit more of vivid view,\nthere we go.\n\n51\n00:02:40.500 --> 00:02:43.660\nSo if I scroll up here you can\nsee these are the requirements\n\n52\n00:02:43.660 --> 00:02:47.790\nof the actual Azure MFA server.\n\n53\n00:02:47.790 --> 00:02:50.120\nAnd they just install nearly anything and\n\n54\n00:02:50.120 --> 00:02:53.650\nthey just use a bunch of the on prem\nfeatures that we've always had.\n\n55\n00:02:53.650 --> 00:02:55.470\nThe other great thing about this website,\nand\n\n56\n00:02:55.470 --> 00:02:59.510\nthis is right on our docs.Microsoft.com,\nyou can go and search for this.\n\n57\n00:02:59.510 --> 00:03:04.080\nVery easy to locate, is that we also go\nthrough and we tell you about the firewall\n\n58\n00:03:04.080 --> 00:03:07.700\nrules and the things that you're gonna\nneed to open, so forth like that.\n\n59\n00:03:07.700 --> 00:03:12.890\nSo we provide a lot of upfront material\nhere on how you can do your planning and\n\n60\n00:03:12.890 --> 00:03:17.250\ndeployment, and how you're gonna set up\nthese firewalls and make everything work.\n\n61\n00:03:17.250 --> 00:03:22.770\nNow you don't need an Azure subscription,\n\n62\n00:03:22.770 --> 00:03:25.810\nthat by meaning having an Azure tenant and\nthose things.\n\n63\n00:03:25.810 --> 00:03:28.560\nAlthough, you do need an Azure account.\n\n64\n00:03:28.560 --> 00:03:31.620\nAnd the reason that you need an Azure\naccount is that there is a billing model\n\n65\n00:03:31.620 --> 00:03:36.060\nhere, but you don't need to get\nyourself locked into anything.\n\n66\n00:03:36.060 --> 00:03:37.530\nAnd that billing model here,\n\n67\n00:03:37.530 --> 00:03:40.020\nthere's a variety of ways\nthat you can do this again.\n\n68\n00:03:40.020 --> 00:03:43.870\nLet's make sure that we can get this\nguy zoomed in a little bit more.\n\n69\n00:03:43.870 --> 00:03:51.414\nAnd Let's see here, and so\nyou can see in this billing model here,\n\n70\n00:03:51.414 --> 00:03:56.370\nis there is a variety of ways that you\ncan actually accomplish what you need.\n\n71\n00:03:56.370 --> 00:03:58.400\nIt's fairly inexpensive for\n\n72\n00:03:58.400 --> 00:04:02.770\nsmall and medium organizations because\nyou don't have that many users.\n\n73\n00:04:02.770 --> 00:04:07.800\nAlso remember that this MFA that you\ndo is only during provisioning, so\n\n74\n00:04:07.800 --> 00:04:09.400\ntypically you're gonna do it once and\n\n75\n00:04:09.400 --> 00:04:12.550\nthen the only other time you'll hit\nthat is if you like forget your pin.\n\n76\n00:04:12.550 --> 00:04:15.730\nWhere you'll have to reset and\ndo a reprovisioning, but by and\n\n77\n00:04:15.730 --> 00:04:17.210\nlarge that should be relatively low.\n\n78\n00:04:17.210 --> 00:04:20.230\nHopefully your people are just signing\nin with their pins every day or\n\n79\n00:04:20.230 --> 00:04:21.470\nthey're using biometrics.\n\n80\n00:04:21.470 --> 00:04:26.483\nAnd they're just gonna keep signing in and\nit's just it's just gonna work there.\n\n81\n00:04:26.483 --> 00:04:29.240\nAnd then, the other thing is,\nif I scroll up here,\n\n82\n00:04:29.240 --> 00:04:33.475\nyou can see where there are a variety of\ndifferent pricing details if you do have\n\n83\n00:04:33.475 --> 00:04:36.710\nsome of these different actual\nsubscription models here.\n\n84\n00:04:36.710 --> 00:04:40.770\nSo, there's a whole different pricing\nmodel that'll allow this to work for\n\n85\n00:04:40.770 --> 00:04:42.020\nnearly everybody.\n\n86\n00:04:44.150 --> 00:04:49.060\nSo that's what we have with pricing and\nwe have also, we've showed you also\n\n87\n00:04:49.060 --> 00:04:54.180\nthe configuration information and\neverything else, so.\n\n88\n00:04:54.180 --> 00:04:57.800\n&gt;&gt; So we mentioned that this\nis an on premises server, so\n\n89\n00:04:57.800 --> 00:05:01.770\nyou can even see in the sidebar where\nit's saying there, MFA on premises.\n\n90\n00:05:01.770 --> 00:05:04.470\nWe think of Azure, that's a cloud\nservice and we know that certain\n\n91\n00:05:04.470 --> 00:05:07.370\nelements are going to the cloud,\nthat's why we have to pay extra.\n\n92\n00:05:07.370 --> 00:05:10.250\nSo what exactly is going\nto the cloud at this point?\n\n93\n00:05:10.250 --> 00:05:12.360\n&gt;&gt; That's a great question,\nwe get that quite a bit.\n\n94\n00:05:12.360 --> 00:05:15.785\nAnd that's actually documented\nas well on this same page where\n\n95\n00:05:15.785 --> 00:05:17.465\nwe have all of these\nrequirements in highlight.\n\n96\n00:05:17.465 --> 00:05:19.935\nWe're gonna scroll down and\n\n97\n00:05:19.935 --> 00:05:22.765\nthere's some more information here\non how you can actually install.\n\n98\n00:05:22.765 --> 00:05:27.835\nBut if we get down here it says, how\ndoes the Azure server handle user data?\n\n99\n00:05:27.835 --> 00:05:30.425\nAnd I'm gonna scroll down\njust a little bit more.\n\n100\n00:05:30.425 --> 00:05:34.380\nAnd here you get,\nwe actually already document\n\n101\n00:05:34.380 --> 00:05:37.320\nall of the things that will actually\nget communicated to the cloud.\n\n102\n00:05:37.320 --> 00:05:39.770\nSo, it's really transparent to say,\n\n103\n00:05:39.770 --> 00:05:41.520\nhere are the things we're\ngonna send to the cloud.\n\n104\n00:05:41.520 --> 00:05:44.938\nSo that way you can run these by your\nsecurity reviews, you can do an audit\n\n105\n00:05:44.938 --> 00:05:48.430\non these things and then you can see\nexactly what's going to happen here.\n\n106\n00:05:48.430 --> 00:05:53.090\nSo we do a pretty good job of trying\nto be as transparent as possible.\n\n107\n00:05:53.090 --> 00:05:54.970\n&gt;&gt; And even if you have a really\nstrict security policy,\n\n108\n00:05:54.970 --> 00:05:56.770\nyou'll see where several of\nthe things are optional, right?\n\n109\n00:05:56.770 --> 00:05:59.890\nLike the first and last name are optional,\nthe email address are optional.\n\n110\n00:05:59.890 --> 00:06:03.070\nSo that helps to alleviate a lot of\n\n111\n00:06:03.070 --> 00:06:05.590\npeople's concerns about sending\nthat information into the cloud.\n\n112\n00:06:05.590 --> 00:06:09.289\n&gt;&gt; Correct, yes, it helps alleviate\na lot of those concerns, but\n\n113\n00:06:09.289 --> 00:06:13.469\nin my discussion with many customers\nthe main focus point that they are so\n\n114\n00:06:13.469 --> 00:06:17.116\ncritical about is they want those\ncredentials to stay on prem.\n\n115\n00:06:17.116 --> 00:06:21.933\nThey dont want to have the need to\nsencrinize those credentials to the on\n\n116\n00:06:21.933 --> 00:06:23.148\nprem off on prem.\n\n117\n00:06:23.148 --> 00:06:26.430\nSo that's the MFA Server itself.\n\n118\n00:06:26.430 --> 00:06:31.400\nAnd so, what we want to do before, we need\nto do some preparing for this MFA Server.\n\n119\n00:06:31.400 --> 00:06:36.570\nThe MFA Server communicates using a CTPS,\nand so I've already pre-enrolled.\n\n120\n00:06:36.570 --> 00:06:39.430\nSo this is a note, we're not gonna\nshow you have to enroll a cert,\n\n121\n00:06:39.430 --> 00:06:42.500\nwe've done that enough today and\nthe days before.\n\n122\n00:06:42.500 --> 00:06:45.570\nSo what we wanna do is just\nmake sure you know that you\n\n123\n00:06:45.570 --> 00:06:48.130\ndo need to enroll a TLS certificate for\nthis.\n\n124\n00:06:48.130 --> 00:06:52.040\nSo using that certificate template that we\ndid before, and using that web enrollment,\n\n125\n00:06:52.040 --> 00:06:54.970\nwe're gonna go ahead and\nenroll for that search.\n\n126\n00:06:54.970 --> 00:06:59.931\nSo I've already pre done that for us,\nso now So now what we need to do is\n\n127\n00:06:59.931 --> 00:07:05.610\nto lay some foundational work for\nwhat's called as the Web Services SDK.\n\n128\n00:07:05.610 --> 00:07:08.790\nNow, the MFA server is just,\nwe're gonna install that and\n\n129\n00:07:08.790 --> 00:07:09.850\nit's gonna be self-running.\n\n130\n00:07:09.850 --> 00:07:14.640\nBut the MFA server will synchronize\ninformation from Active Directory.\n\n131\n00:07:14.640 --> 00:07:17.584\nAnd when it synchronizes that,\nit has its own database, and\n\n132\n00:07:17.584 --> 00:07:20.081\nthat database can be shared\nwith multiple server.\n\n133\n00:07:20.081 --> 00:07:24.804\nSo what we wanna do is we need to\nhave a way to where other things\n\n134\n00:07:24.804 --> 00:07:26.565\nlike the user portal or\n\n135\n00:07:26.565 --> 00:07:32.690\nthere's the mobile app server can\nauthenticate back to and use that data.\n\n136\n00:07:32.690 --> 00:07:35.910\nWe don't wanna have that data stored\non all these different servers.\n\n137\n00:07:35.910 --> 00:07:39.680\nSo what they have is they\nhave a web services SDK.\n\n138\n00:07:39.680 --> 00:07:41.880\nAnd that's basically,\nwell, it's a web service.\n\n139\n00:07:41.880 --> 00:07:45.580\nAnd we're gonna put that\non the actual MFA server.\n\n140\n00:07:45.580 --> 00:07:49.277\nAnd that's gonna allow a secure\ncommunication channel back from the user\n\n141\n00:07:49.277 --> 00:07:51.910\nportal that we'll get to\nin a couple more episodes.\n\n142\n00:07:51.910 --> 00:07:54.719\nThe user portal will be able\nto communicate with the MFA\n\n143\n00:07:54.719 --> 00:07:57.820\nserver to see like user\nconfiguration information.\n\n144\n00:07:57.820 --> 00:08:00.907\nAnd all of the users that have\nbeen provisioned to do MFA.\n\n145\n00:08:00.907 --> 00:08:04.130\nSo to do that, we're gonna have\nto go into Server Manager.\n\n146\n00:08:04.130 --> 00:08:08.690\nAnd so let me close out this web browser,\nand we are done with that.\n\n147\n00:08:08.690 --> 00:08:13.052\nAnd we are gonna load up our MFA server.\n\n148\n00:08:15.580 --> 00:08:17.636\nAnd we are right here on our MFA server.\n\n149\n00:08:17.636 --> 00:08:23.610\nWe're gonna go to Server Manager and\nwe're gonna install the IS Web Role.\n\n150\n00:08:23.610 --> 00:08:26.449\nI make a very big point\nabout showing you this\n\n151\n00:08:26.449 --> 00:08:29.221\nbecause I don't set up IS very regularly.\n\n152\n00:08:29.221 --> 00:08:32.850\nAnd maybe some of you do or do not,\nbut it can be very intimidating.\n\n153\n00:08:32.850 --> 00:08:35.250\nThere are a lot of knobs\njust on that role alone.\n\n154\n00:08:35.250 --> 00:08:40.384\nSo, what I wanna do is have a very\nclear explanation of all the rules that\n\n155\n00:08:40.384 --> 00:08:45.454\nyou're gonna set up that are needed for\nthe MFA server and for the SDK.\n\n156\n00:08:45.454 --> 00:08:48.894\nAnd all of these are in the documentation\non the website we showed you, but\n\n157\n00:08:48.894 --> 00:08:51.220\nit's always good to\nactually see it in person.\n\n158\n00:08:51.220 --> 00:08:54.780\nSo we're gonna do local server here,\nand then we're gonna say add role.\n\n159\n00:08:55.870 --> 00:08:59.930\nAnd then when we add this role, we're\ngonna go get through these next things.\n\n160\n00:08:59.930 --> 00:09:02.691\nMake sure you're on the right\nserver because in Server Manager,\n\n161\n00:09:02.691 --> 00:09:03.903\nyou can have multiple ones.\n\n162\n00:09:03.903 --> 00:09:10.167\nAnd we're gonna scroll down\nhere to web server IS.\n\n163\n00:09:10.167 --> 00:09:13.168\nAnd we're gonna say yes to this,\nbecause we need these management tools.\n\n164\n00:09:16.315 --> 00:09:20.524\nAnd we'll go Next, and we don't need\nanything in the actual features or\n\n165\n00:09:20.524 --> 00:09:22.880\nanything like, so we'll Next to that.\n\n166\n00:09:22.880 --> 00:09:25.590\nAnd now we're actually to\nthe Web Server role itself.\n\n167\n00:09:25.590 --> 00:09:28.350\nAnd this is where we're gonna start\nchecking some boxes or, at least,\n\n168\n00:09:28.350 --> 00:09:29.750\nvalidating some boxes.\n\n169\n00:09:29.750 --> 00:09:34.519\nSo in this first box on the common\nHTTP features, we have the default\n\n170\n00:09:34.519 --> 00:09:40.220\ndocumentation, directory browsing,\nHTTP errors, and the static content.\n\n171\n00:09:40.220 --> 00:09:44.420\nThose should already be selected for\nyou, and so\n\n172\n00:09:44.420 --> 00:09:47.930\nwe're not gonna change any of those,\nso we just need to make sure of those.\n\n173\n00:09:47.930 --> 00:09:48.530\nIn the health and\n\n174\n00:09:48.530 --> 00:09:52.740\ndiagnostics, HTTP logging, again,\nwe're not gonna change any of those.\n\n175\n00:09:52.740 --> 00:09:54.850\nThese are just making sure\nthat they are selected.\n\n176\n00:09:56.090 --> 00:09:59.430\nAnd then in performance,\nagain static content compression,\n\n177\n00:09:59.430 --> 00:10:01.750\nwe're gonna leave that as the default.\n\n178\n00:10:01.750 --> 00:10:04.410\nAnd then in request filtering,\nwe are gonna add something here.\n\n179\n00:10:04.410 --> 00:10:10.310\nIn request filtering, the web services\nSDK needs basic authentication.\n\n180\n00:10:10.310 --> 00:10:13.451\nAnd that's why we need that TLS or\nthat SSL certificate is because\n\n181\n00:10:13.451 --> 00:10:16.580\nwe're actually gonna create a user\nnear the end of this episode.\n\n182\n00:10:16.580 --> 00:10:21.126\nAnd that user is gonna kind of act like\na service account to where that user is\n\n183\n00:10:21.126 --> 00:10:25.600\ngonna be the user that we\nauthenticate to this SDK endpoint.\n\n184\n00:10:25.600 --> 00:10:26.320\nSo moving along,\n\n185\n00:10:26.320 --> 00:10:29.850\nnow that we have that, we're gonna go\ndown to the management tools here.\n\n186\n00:10:29.850 --> 00:10:31.506\nAnd in these management tools,\n\n187\n00:10:31.506 --> 00:10:35.011\nyou'll see that we already have\nthe management console selected.\n\n188\n00:10:35.011 --> 00:10:37.531\nAnd then we need to go ahead,\nand I'm gonna expand this so\n\n189\n00:10:37.531 --> 00:10:39.377\nyou can see what actually gets selected.\n\n190\n00:10:39.377 --> 00:10:42.740\nBut we need the actual\nmanagement capability there.\n\n191\n00:10:42.740 --> 00:10:46.780\nAnd you'll see underneath, all it selects\nis the IIS 6 metabase compatibility,\n\n192\n00:10:46.780 --> 00:10:49.360\nand that's really all\nwe actually need there.\n\n193\n00:10:51.740 --> 00:10:57.799\nSo we have everything we need here but\nlet's go back, I missed a step here.\n\n194\n00:10:57.799 --> 00:11:01.180\nAnd I'm gonna call this out,\nthis is under application development.\n\n195\n00:11:01.180 --> 00:11:04.247\nWe need to have this asp.net 4.5.\n\n196\n00:11:04.247 --> 00:11:06.843\nAnd then it's gonna say we need\nto do some other things here.\n\n197\n00:11:06.843 --> 00:11:08.220\nWe wanna say okay to that as well.\n\n198\n00:11:09.350 --> 00:11:13.634\nSo in review, let's go up here and make\nsure everybody has a good review of this,\n\n199\n00:11:13.634 --> 00:11:17.039\nbecause when we click install,\nthis thing's gonna chug away.\n\n200\n00:11:17.039 --> 00:11:18.400\nAnd we're gonna make sure of that.\n\n201\n00:11:18.400 --> 00:11:21.787\nSo we have all of these again,\nthe default documents.\n\n202\n00:11:21.787 --> 00:11:25.664\nThese are the defaults, we didn't change\nanything under common HTTP, and health and\n\n203\n00:11:25.664 --> 00:11:29.100\ndiagnostics, again,\nwe didn't change anything there either.\n\n204\n00:11:29.100 --> 00:11:31.240\nIn performance,\nwe didn't change anything there.\n\n205\n00:11:31.240 --> 00:11:36.030\nBut in security, we had request filtering,\nbut we added basic authentication.\n\n206\n00:11:37.170 --> 00:11:41.802\nNow if we go back to\napplication development,\n\n207\n00:11:41.802 --> 00:11:47.161\nwe did add the asp.net\nextensibility 4.5 there.\n\n208\n00:11:47.161 --> 00:11:51.130\nExcuse me, not the extensibility,\nwe need the asp.net 4.5.\n\n209\n00:11:51.130 --> 00:11:54.030\nThere we go, that's the right one we need.\n\n210\n00:11:54.030 --> 00:11:56.770\nSo let's un-check that guy there.\n\n211\n00:11:56.770 --> 00:11:58.037\nOkay, he checked it for us.\n\n212\n00:11:58.037 --> 00:12:00.260\nThat's where I'm actually\ngetting confused.\n\n213\n00:12:00.260 --> 00:12:02.887\nSo we have those two checked.\n\n214\n00:12:02.887 --> 00:12:05.234\nNow, if we go down, and\neverything else was checked,\n\n215\n00:12:05.234 --> 00:12:09.200\nbecause we selected that feature, and all\nof these dependent features came with it.\n\n216\n00:12:09.200 --> 00:12:11.220\nSo we'll just leave those as the default.\n\n217\n00:12:11.220 --> 00:12:14.700\nAnd then finally down in the management\ntools, we have the console and\n\n218\n00:12:14.700 --> 00:12:16.997\nthen we needed that IIS 6 metabase.\n\n219\n00:12:16.997 --> 00:12:22.910\nSo we're gonna go Next here and\nthen we're gonna actually install this.\n\n220\n00:12:22.910 --> 00:12:27.000\nNow, the one thing I want to caution you\nguys on is just that anytime you install\n\n221\n00:12:27.000 --> 00:12:31.325\nthe IIS server or you start adding a lot\nof the asp.net and things of that nature\n\n222\n00:12:31.325 --> 00:12:37.120\nis after you install these roles,\nit's always, always good to do a check for\n\n223\n00:12:37.120 --> 00:12:40.860\nupdates and make sure you have all of the\nlatest patches and updates to these roles.\n\n224\n00:12:40.860 --> 00:12:44.730\nBecause we never know how this\napplication was developed and\n\n225\n00:12:44.730 --> 00:12:49.870\nthere's a lot of continuing development\nfor the asp.net, the .net language itself,\n\n226\n00:12:49.870 --> 00:12:53.140\nand the asp.net.iis guys are always\ndoing a lot of stuff there.\n\n227\n00:12:53.140 --> 00:12:57.690\nSo, we're gonna go ahead and install,\nthen we're gonna do some updates on this.\n\n228\n00:12:57.690 --> 00:12:59.530\nSo I'm gonna click install and Don and\n\n229\n00:12:59.530 --> 00:13:02.335\nI are gonna watch this very\nfamiliar progress bar again.\n\n230\n00:13:02.335 --> 00:13:04.080\n&gt;&gt; Yep, and\nthrough the magic of television,\n\n231\n00:13:04.080 --> 00:13:05.680\nwe'll help this advance\nalong a little bit faster.\n\n232\n00:13:05.680 --> 00:13:09.550\nBut just to reiterate what Mike said,\nit is super important because new updates\n\n233\n00:13:09.550 --> 00:13:12.440\ncome out all the time,\nespecially in the realm of security.\n\n234\n00:13:12.440 --> 00:13:14.710\nAnd remember how we're gonna be\nusing basic authentication for\n\n235\n00:13:14.710 --> 00:13:17.594\ncertain things,\nwe're using TLS to encrypt that data.\n\n236\n00:13:17.594 --> 00:13:21.616\nSo we wanna make sure that we've\nalways got the latest updates there so\n\n237\n00:13:21.616 --> 00:13:23.743\nthat our data is protected and safe.\n\n238\n00:13:23.743 --> 00:13:25.233\nIf you get compromised somewhere,\n\n239\n00:13:25.233 --> 00:13:28.672\ngetting compromised in your authentication\nsystem is probably the worst place.\n\n240\n00:13:28.672 --> 00:13:30.100\n&gt;&gt; Not good.\n&gt;&gt; [LAUGH] Definitely wanna make sure that\n\n241\n00:13:30.100 --> 00:13:30.706\none's up to date.\n\n242\n00:13:30.706 --> 00:13:32.898\n&gt;&gt; Definitely a resume generating event.\n\n243\n00:13:32.898 --> 00:13:33.742\n[LAUGH]\n&gt;&gt; All right,\n\n244\n00:13:33.742 --> 00:13:36.610\nwell, through the magic of television\nhere, we'll let this advance along and\n\n245\n00:13:36.610 --> 00:13:38.400\nthen as soon as we're done we'll\nbe able to move forward and\n\n246\n00:13:38.400 --> 00:13:40.710\nfinish configuring our web server.\n\n247\n00:13:40.710 --> 00:13:43.770\nWell, that actually didn't take all that\nlong at all, maybe about five minutes.\n\n248\n00:13:43.770 --> 00:13:46.200\nBut now the server is updated so\nwe're ready to move back on.\n\n249\n00:13:46.200 --> 00:13:49.058\nI'll turn it back over to Mike,\nand Mike, where are we going next?\n\n250\n00:13:49.058 --> 00:13:51.033\n&gt;&gt; So we've now got IIS setup and\n\n251\n00:13:51.033 --> 00:13:55.055\nconfigured the way that\nthe Web Service SDK needs it.\n\n252\n00:13:55.055 --> 00:13:59.340\nAnd I told you guys that we\nadded that TLS certificate.\n\n253\n00:13:59.340 --> 00:14:01.285\nWe didn't show you that because\nwe've done that enough.\n\n254\n00:14:01.285 --> 00:14:05.939\nBut now the Web Services SDK, well,\nit needs a TLS certificate, so\n\n255\n00:14:05.939 --> 00:14:10.890\njust installing the certificate to\nthe local machine isn't enough.\n\n256\n00:14:10.890 --> 00:14:15.980\nWe actually need to configure\nthe certificate and bind it to IIS.\n\n257\n00:14:15.980 --> 00:14:17.060\nSo, again,\n\n258\n00:14:17.060 --> 00:14:20.138\nwe're gonna show you that there because\nit's not a common thing that we do.\n\n259\n00:14:20.138 --> 00:14:24.078\nSo I'm gonna go back to the MFA\nserver that I have right here and\n\n260\n00:14:24.078 --> 00:14:27.900\nI'm gonna go to the administrative tools.\n\n261\n00:14:27.900 --> 00:14:31.216\nAnd we're now gonna see the Internet\ninformation services up here.\n\n262\n00:14:31.216 --> 00:14:34.920\nAnd we'll make this guy full screen so\nwe get a nice big view.\n\n263\n00:14:34.920 --> 00:14:39.140\nAnd as you can see here,\nwe have the MFA server, that's our host.\n\n264\n00:14:39.140 --> 00:14:41.780\nAnd this little pop up's\ngonna annoy you sometimes.\n\n265\n00:14:41.780 --> 00:14:45.400\nI always just say that and\nsay no, we don't need that.\n\n266\n00:14:45.400 --> 00:14:47.420\nAnd we have these application pools and\nsites.\n\n267\n00:14:47.420 --> 00:14:50.910\nWhat we're looking for\nis we wanna go to this default first site.\n\n268\n00:14:50.910 --> 00:14:52.650\nWhen we get to this default first site, so\n\n269\n00:14:52.650 --> 00:14:58.110\nthe Web SDK is gonna actually be installed\nunderneath this as a virtual directory.\n\n270\n00:14:58.110 --> 00:15:01.680\nAnd what we need to do is we need to\nturn this site, or bind that certificate\n\n271\n00:15:01.680 --> 00:15:05.590\nto this site, so that it can\nactually use the TLS certificate.\n\n272\n00:15:05.590 --> 00:15:10.180\nSo we're gonna go over here to this\nbindings that you'll see right here.\n\n273\n00:15:10.180 --> 00:15:11.310\nAnd so in the bindings,\n\n274\n00:15:11.310 --> 00:15:14.840\nyou can see it’s already set up for\nHTTP, but we need to add HTTPS.\n\n275\n00:15:16.010 --> 00:15:22.370\nSo, we're gonna do add, and in this type\ndrop down, we're just gonna select HTTPS.\n\n276\n00:15:22.370 --> 00:15:24.440\nI'm gonna leave the IP\naddress as all assigned.\n\n277\n00:15:24.440 --> 00:15:28.760\nBut if you have a unique IP address way\nmore sophisticated at IIS than I am,\n\n278\n00:15:28.760 --> 00:15:32.660\nthen go for it but right now,\nwe just leave these as the default.\n\n279\n00:15:32.660 --> 00:15:34.510\nWe don't need to put a host name here, or\n\n280\n00:15:34.510 --> 00:15:37.220\nany of these required server\nname indications here.\n\n281\n00:15:37.220 --> 00:15:42.510\nAnd then down here, we're gonna pick\nthe certificate that I selected.\n\n282\n00:15:42.510 --> 00:15:46.940\nNow if you go to this drop down,\nand you don't have a certificate,\n\n283\n00:15:46.940 --> 00:15:48.760\nthat means you don't have a certificate.\n\n284\n00:15:48.760 --> 00:15:51.184\nYou didn't install one, so stop there.\n\n285\n00:15:51.184 --> 00:15:53.069\nGo ahead and cancel out of this.\n\n286\n00:15:53.069 --> 00:15:55.978\nDon't save it or anything,\ngo back Go ahead and\n\n287\n00:15:55.978 --> 00:16:00.289\ndo your certificate enrollment,\nmake sure the certificates there.\n\n288\n00:16:00.289 --> 00:16:03.980\nAnd make sure you enroll the certificate\nfor the local computer not in the user's\n\n289\n00:16:03.980 --> 00:16:06.756\ncontacts and then come back here and\nyou'll be able to this.\n\n290\n00:16:06.756 --> 00:16:11.045\nAnd now, you can see that I have\na certificate for this server, and\n\n291\n00:16:11.045 --> 00:16:13.507\nit's mfaid.corp.contoso.com.\n\n292\n00:16:13.507 --> 00:16:17.567\nSo now that we have that, we can see\nthat our binding is all set here,\n\n293\n00:16:17.567 --> 00:16:18.860\nwe're closed here.\n\n294\n00:16:18.860 --> 00:16:23.575\nThen what I like to do is, I just like\nto do a little restart to make sure.\n\n295\n00:16:23.575 --> 00:16:25.899\nAnd it's really quick,\ncuz it just issues the command and\n\n296\n00:16:25.899 --> 00:16:27.790\nthe restart happens in the background.\n\n297\n00:16:27.790 --> 00:16:32.339\nSo now that we've restarted that\nwebsite with that new binding in there.\n\n298\n00:16:32.339 --> 00:16:35.214\nAnd that's kind of we're doing there for\nIAS now but\n\n299\n00:16:35.214 --> 00:16:37.181\nwe have one more thing we need to do.\n\n300\n00:16:37.181 --> 00:16:40.755\nAs I've mentioned before is we're\ngonna use that basic authentication.\n\n301\n00:16:40.755 --> 00:16:43.878\nSo that means that there's gonna\nbe a username coming in and\n\n302\n00:16:43.878 --> 00:16:48.380\nwe need to actually get some security\non the domain controller with a group.\n\n303\n00:16:48.380 --> 00:16:53.207\nThis group is gonna be used to\nprotect all the people that\n\n304\n00:16:53.207 --> 00:16:56.502\nneed to come back to the MFA database.\n\n305\n00:16:56.502 --> 00:16:58.490\nI know that all those users\nin that configuration.\n\n306\n00:16:58.490 --> 00:17:02.090\nSo we need to actually create a group.\n\n307\n00:17:02.090 --> 00:17:04.170\nAnd this group is different\nfrom the ones we have in that,\n\n308\n00:17:04.170 --> 00:17:06.150\nthis name is gonna be very specific.\n\n309\n00:17:06.150 --> 00:17:10.021\nSo let's hop over to my\ndomain controller here.\n\n310\n00:17:10.021 --> 00:17:12.930\nAnd let's see,\nthere's my domain controller.\n\n311\n00:17:12.930 --> 00:17:15.187\n&gt;&gt; So in every other group we've made,\nwe've kinda had the flexibility to\n\n312\n00:17:15.187 --> 00:17:17.120\npick whatever name we wanted\njust one that we could remember.\n\n313\n00:17:17.120 --> 00:17:20.150\nBut on this one you're saying we\nhave to have a very specific name?\n\n314\n00:17:20.150 --> 00:17:23.007\n&gt;&gt; Yes, on this particular group,\nwe're gonna have a very specific name.\n\n315\n00:17:23.007 --> 00:17:25.105\nAnd this is kind of gonna date or\n\n316\n00:17:25.105 --> 00:17:29.430\ngive you a clue as to where\nthe Azure MFA Server came from.\n\n317\n00:17:29.430 --> 00:17:34.170\nIf you do any kind of searching or\na little bit of a research or review,\n\n318\n00:17:34.170 --> 00:17:37.760\nyou'll find out that a while back ago,\nMicrosoft purchase this company called\n\n319\n00:17:37.760 --> 00:17:40.810\nPhone Factor and\nthey did multifactor authentication.\n\n320\n00:17:40.810 --> 00:17:43.779\nAnd the Phone Factor had\nthis on-prem server.\n\n321\n00:17:43.779 --> 00:17:47.610\nAnd Phone Factor is now what\nwe call Azure MFA Server.\n\n322\n00:17:47.610 --> 00:17:51.792\nAnd so what we're gonna need to do, it's\njust that, you don't wanna rechange all of\n\n323\n00:17:51.792 --> 00:17:54.658\nthese interworkings,\nbecause it's cost-effective.\n\n324\n00:17:54.658 --> 00:17:59.160\nAnd it reduces a lot of breaking changes\nthat you don't wanna chase and fix.\n\n325\n00:17:59.160 --> 00:18:03.430\nSo what we're going to do here\nis we're gonna just start up\n\n326\n00:18:03.430 --> 00:18:10.250\nthe Active Directory Users and Computers\nusing that DSA-MSC shortcut there.\n\n327\n00:18:10.250 --> 00:18:12.700\nAnd I'm just gonna go to the Users here.\n\n328\n00:18:12.700 --> 00:18:16.521\nAnd the name of the group that we're\ngonna create is Phone Factor Admin.\n\n329\n00:18:17.960 --> 00:18:22.200\nAnd again, you need to use that name, cuz\nthat is what the software is looking for.\n\n330\n00:18:22.200 --> 00:18:28.710\nSo it's Phone Factor Admins, plural,\nand make sure there's a S on the end.\n\n331\n00:18:28.710 --> 00:18:32.260\nNow, we're gonna create that, and\nit's just a global group with security and\n\n332\n00:18:32.260 --> 00:18:33.240\nwe're good there.\n\n333\n00:18:33.240 --> 00:18:35.720\nNow, we need to add members to this group.\n\n334\n00:18:35.720 --> 00:18:40.615\nWell, the Phone Factor service or\nthe Azure MFA service itself,\n\n335\n00:18:40.615 --> 00:18:45.490\nit runs on the MFA Server but\nit runs as a local system.\n\n336\n00:18:45.490 --> 00:18:50.440\nSo in order to make sure that this\ncomputer has access to that database, we\n\n337\n00:18:50.440 --> 00:18:54.750\nneed to actually add the computer account,\nthe MFA computer account, to this group.\n\n338\n00:18:56.380 --> 00:18:59.710\nSo I'm gonna go in here and\ngo into Members and I'm gonna say Add.\n\n339\n00:18:59.710 --> 00:19:03.160\nAnd as you can see,\nI don't have computers in here.\n\n340\n00:19:03.160 --> 00:19:05.780\nSo make sure you look for\nthis when you're adding the computer.\n\n341\n00:19:05.780 --> 00:19:07.800\nOtherwise, it's not gonna show up.\n\n342\n00:19:07.800 --> 00:19:12.478\nAnd so we'll go to object types and\nthen we'll select Computers in here.\n\n343\n00:19:12.478 --> 00:19:16.572\nAnd then I know the name of this\ncomputer that I need to add as MFA.\n\n344\n00:19:16.572 --> 00:19:20.064\nAnd I'll do a check names on that to make\nsure and obviously, I found it there.\n\n345\n00:19:20.064 --> 00:19:21.669\nAnd so we'll click OK.\n\n346\n00:19:21.669 --> 00:19:24.695\nAnd then we know we got the computer,\nbecause, well, we've got the little\n\n347\n00:19:24.695 --> 00:19:27.960\ncomputer icon and then it also\ntells us what container it's in.\n\n348\n00:19:27.960 --> 00:19:32.861\nNow, the other thing you need to do, it's\njust, you need to add anybody who you're\n\n349\n00:19:32.861 --> 00:19:37.298\ngoing to delegate administrative\nprivilege to, to manage the MFA Server.\n\n350\n00:19:37.298 --> 00:19:41.163\nAgain, there's lots of things that you\ncan tweak and use the MFA Server for,\n\n351\n00:19:41.163 --> 00:19:43.449\nother than just Windows Hello for\nBusiness.\n\n352\n00:19:43.449 --> 00:19:46.578\nIt's really great to set it up in front\nof websites and all these other things.\n\n353\n00:19:46.578 --> 00:19:51.620\nSo you wanna make sure that whoever\nis going to manage that server\n\n354\n00:19:51.620 --> 00:19:52.928\nis actually in this group.\n\n355\n00:19:52.928 --> 00:19:55.980\nSo I'm gonna just add my\nlab admin guy in here,\n\n356\n00:19:55.980 --> 00:19:59.200\ncuz I know that's the one\nthat's gonna do that.\n\n357\n00:19:59.200 --> 00:20:02.068\nAnd I'm gonna check names on him and\nhe's there.\n\n358\n00:20:02.068 --> 00:20:05.490\nAnd so now, I have my lab admin\nin here and he's ready to go.\n\n359\n00:20:05.490 --> 00:20:09.223\nSo what we've done, it's just,\nwe've prepped the server for MFA.\n\n360\n00:20:09.223 --> 00:20:11.042\nWe've got the MFA SDK in there.\n\n361\n00:20:11.042 --> 00:20:12.800\nWe've got a certificate in there.\n\n362\n00:20:12.800 --> 00:20:15.270\nWe've bind that certificate\nto this website.\n\n363\n00:20:15.270 --> 00:20:16.152\nWe're ready to go there.\n\n364\n00:20:16.152 --> 00:20:19.158\nWe've got the security set for\nthe MFA Server and for\n\n365\n00:20:19.158 --> 00:20:20.868\nthe admins that are gonna go.\n\n366\n00:20:20.868 --> 00:20:22.338\nBut we still have a little bit more but\n\n367\n00:20:22.338 --> 00:20:25.020\nno, I don't think we're gonna\nfit it in this episode.\n\n368\n00:20:25.020 --> 00:20:27.281\n&gt;&gt; Yeah, and\nit's kinda nice to stop right here,\n\n369\n00:20:27.281 --> 00:20:30.910\nbecause we're kinda grabbing each\ncomponent of this and getting it set up.\n\n370\n00:20:30.910 --> 00:20:33.809\nAnd at this point, the MFA is\npretty well taken care of, well,\n\n371\n00:20:33.809 --> 00:20:35.090\nat least in the MFA Server.\n\n372\n00:20:35.090 --> 00:20:36.140\n&gt;&gt; Right, and we've prepared it.\n\n373\n00:20:36.140 --> 00:20:38.808\nSo in this episode,\nwe've got it ready to go.\n\n374\n00:20:38.808 --> 00:20:41.150\nBut now, we need to actually\nstart going and installing it and\n\n375\n00:20:41.150 --> 00:20:42.980\nthat's what we're gonna work on next.\n\n376\n00:20:42.980 --> 00:20:45.681\n&gt;&gt; Okay, all right, well,\nwe will wrap it up right here then.\n\n377\n00:20:45.681 --> 00:20:48.821\nSo definitely stay tuned as we complete\nthe MFA Server configuration in\n\n378\n00:20:48.821 --> 00:20:49.980\nthe next episode.\n\n379\n00:20:49.980 --> 00:20:51.420\nBut for right now,\nwe'll go ahead and sign out.\n\n380\n00:20:51.420 --> 00:20:54.706\nSo signing off for\nITPRO.TV, I'm Don Pezet.\n\n381\n00:20:54.706 --> 00:20:55.930\n&gt;&gt; I'm Mike Stephens.\n\n382\n00:20:55.930 --> 00:20:57.909\n&gt;&gt; And we'll see you next time.\n\n383\n00:20:57.909 --> 00:21:03.811\n[MUSIC]\n\n384\n00:21:03.811 --> 00:21:07.148\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "216503897"
        },
        {
          "description": "In this episode, Don and Mike explain how the MFA User Portal can be configured to support Windows Hello for Business. Mike then walks the viewers through configuring the pre-requisites in preparation for installing the MFA User Portal.",
          "length": "858",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-7-preparing_the_mfa_user_portal-050417-PGM.00_14_04_25.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-7-preparing_the_mfa_user_portal-050417-PGM.00_14_04_25.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-7-preparing_the_mfa_user_portal-050417-PGM.00_14_04_25.Still001-sm.jpg",
          "title": "Preparing the MFA User Portal",
          "transcript": "WEBVTT\n\n1\n00:00:00.220 --> 00:00:06.424\nWelcome to ITPRO.TV,\nI'm your host Don Pezet [CROSSTALK]\n\n2\n00:00:06.424 --> 00:00:08.175\n[MUSIC]\n\n3\n00:00:08.175 --> 00:00:12.763\n&gt;&gt; You're watching ITPRO.TV.\n\n4\n00:00:12.763 --> 00:00:14.315\n&gt;&gt; All right, ladies and gentlemen,\n\n5\n00:00:14.315 --> 00:00:16.393\nwelcome back to another\nepisode of ITPro.TV.\n\n6\n00:00:16.393 --> 00:00:17.868\nI'm your host Don Pezet.\n\n7\n00:00:17.868 --> 00:00:21.160\nBack again with another episode\nof Windows Hello for Business.\n\n8\n00:00:21.160 --> 00:00:25.030\nAnd we're continuing on with our,\nkind of our preparation phase, for\n\n9\n00:00:25.030 --> 00:00:27.440\ngetting Azure MFA up and running.\n\n10\n00:00:27.440 --> 00:00:28.560\nIn the last episode,\n\n11\n00:00:28.560 --> 00:00:33.810\nwe got a chance to see preparing a server\nto act as our, well, as our MFA server.\n\n12\n00:00:33.810 --> 00:00:37.313\nAnd in this episode, we're gonna look\nat preparing the second server in our\n\n13\n00:00:37.313 --> 00:00:39.075\nequation, which is the user portal.\n\n14\n00:00:39.075 --> 00:00:41.577\nSo we'll have our MFA server,\nwe'll have our user portal, they'll be up,\n\n15\n00:00:41.577 --> 00:00:43.240\nthey'll be running, they'll be happy.\n\n16\n00:00:43.240 --> 00:00:45.280\nBut we've got some prerequisites\nto knock out first.\n\n17\n00:00:45.280 --> 00:00:47.800\nAnd to help guide us through that process,\nwe've got Mr.\n\n18\n00:00:47.800 --> 00:00:50.150\nMike Stevens back in\nthe studio with us again.\n\n19\n00:00:50.150 --> 00:00:51.630\nMike, thanks for joining us.\n\n20\n00:00:51.630 --> 00:00:56.090\n&gt;&gt; Thanks for having me, back again to\ndo some more MFA and user portal stuff.\n\n21\n00:00:56.090 --> 00:00:59.570\n&gt;&gt; All right,\nnow I know on the MFA server side,\n\n22\n00:00:59.570 --> 00:01:03.370\nwe had to do a couple of prerequisites,\nget a lot of software installed.\n\n23\n00:01:03.370 --> 00:01:06.680\nOn the user portal is it\nbasically the same thing again or\n\n24\n00:01:06.680 --> 00:01:08.110\nare the requirements different?\n\n25\n00:01:08.110 --> 00:01:09.910\n&gt;&gt; It's pretty much the same thing, Don.\n\n26\n00:01:09.910 --> 00:01:11.070\nThe user portal though,\n\n27\n00:01:11.070 --> 00:01:14.290\nthe easiest way to do the user portal\nis just realize, it's a website.\n\n28\n00:01:14.290 --> 00:01:16.600\nSo a website is a website is a website.\n\n29\n00:01:16.600 --> 00:01:20.868\nBut it is going to be doing some\ncommunication back to the MFA server.\n\n30\n00:01:20.868 --> 00:01:24.474\nAnd so the ideal scenario here that\nyou're gonna have is you may have one or\n\n31\n00:01:24.474 --> 00:01:28.680\ntwo MFA servers because they're gonna hold\nthose database of all that information.\n\n32\n00:01:28.680 --> 00:01:32.651\nAnd then you're gonna have multiple, or\nyou should at least have multiple user\n\n33\n00:01:32.651 --> 00:01:35.615\nportals because you need to\nhave that high availability for\n\n34\n00:01:35.615 --> 00:01:37.589\nall those users that are gonna go into.\n\n35\n00:01:37.589 --> 00:01:41.080\nBut let's take a little bit step back and\ngo, what's the user portal?\n\n36\n00:01:41.080 --> 00:01:48.040\nThe user portal is a way that you can let\nyour users manage their MFA settings.\n\n37\n00:01:48.040 --> 00:01:52.328\nSo this isn't such a burden on the IT\nstaff, is like during our provisioning\n\n38\n00:01:52.328 --> 00:01:56.810\nflow, when we start bringing in users in\nwe are gonna show this a little later.\n\n39\n00:01:56.810 --> 00:02:00.945\nBut you're gonna be able to send emails\nto the users that give them the URL\n\n40\n00:02:00.945 --> 00:02:04.075\nto the user portal, to where they can\ngo in, they can click the URL, and\n\n41\n00:02:04.075 --> 00:02:06.545\nthey can start setting\nup their configuration.\n\n42\n00:02:06.545 --> 00:02:08.435\nAnd don't worry about\nwhat they can do in that,\n\n43\n00:02:08.435 --> 00:02:11.415\nbecause all of those knobs are still\ncontrolled by administrators.\n\n44\n00:02:11.415 --> 00:02:14.860\nSo you can say whether they can\ndo change their phone number or\n\n45\n00:02:14.860 --> 00:02:18.410\nwhat kind of a second factor\nauthentication they're allowed,\n\n46\n00:02:18.410 --> 00:02:20.900\nwhether it's a phone call or\na text message.\n\n47\n00:02:20.900 --> 00:02:23.140\nMaybe if you wanna put pins on the users,\n\n48\n00:02:23.140 --> 00:02:25.560\nyou can have them to where\nthey can change their pins.\n\n49\n00:02:25.560 --> 00:02:28.677\nAnd it also has some fallback mechanisms\nlike they can answer some security\n\n50\n00:02:28.677 --> 00:02:29.229\nquestions.\n\n51\n00:02:29.229 --> 00:02:32.374\nSo If they're having a problem\ngetting into the MFA server,\n\n52\n00:02:32.374 --> 00:02:34.905\nthat you can actually do\nsome authentication and\n\n53\n00:02:34.905 --> 00:02:38.869\nthen have them answer some security\nquestions and then they can get back in.\n\n54\n00:02:38.869 --> 00:02:44.510\nSo, it's really a well rounded\nsolution that compliments the MFA.\n\n55\n00:02:44.510 --> 00:02:49.061\nAnd so you really in your enterprise\nenvironment you're always\n\n56\n00:02:49.061 --> 00:02:52.440\ngonna set the MFA the user portal up for\nthe MFA.\n\n57\n00:02:52.440 --> 00:02:56.430\nSo, that's where we're talking\nabout the high availability, and\n\n58\n00:02:56.430 --> 00:02:59.475\nmaking sure that that's available for\neverybody.\n\n59\n00:02:59.475 --> 00:03:00.931\n&gt;&gt; And you mentioned high availability.\n\n60\n00:03:00.931 --> 00:03:02.695\nWe had a conversation before the show, and\n\n61\n00:03:02.695 --> 00:03:05.640\nsometimes we talk about the good\nstuff before we even start recording.\n\n62\n00:03:05.640 --> 00:03:07.990\nSo, let's bring it in the episode here.\n\n63\n00:03:07.990 --> 00:03:10.029\nYou had mentioned to me how, in reality,\n\n64\n00:03:10.029 --> 00:03:12.886\nwe could slam all this together\nunder the same server, and\n\n65\n00:03:12.886 --> 00:03:16.112\nhave one server being the MFA Server,\nas well as the user portal.\n\n66\n00:03:16.112 --> 00:03:20.450\nBut that doesn't really set us up for\nscalability and availability, right?\n\n67\n00:03:20.450 --> 00:03:21.360\n&gt;&gt; Yeah, that's right Don.\n\n68\n00:03:21.360 --> 00:03:25.040\nI mean, we certainly can and\nin a lab that might work for you and\n\n69\n00:03:25.040 --> 00:03:28.250\nif you want to do that route,\nI certainly say go ahead.\n\n70\n00:03:28.250 --> 00:03:31.580\nWe have the documentation on how to set\nthis up for that because when you run\n\n71\n00:03:31.580 --> 00:03:36.620\neverything on one server the configuration\nis completely different.\n\n72\n00:03:36.620 --> 00:03:39.020\nBecause you just use\nthe same service account and\n\n73\n00:03:39.020 --> 00:03:41.530\nthings that the MFA server is using.\n\n74\n00:03:41.530 --> 00:03:45.764\nBut in the real world, what I try to\nexplain things of how they would be in\n\n75\n00:03:45.764 --> 00:03:49.729\npracticality is is that you're\ngonna have one or two MFA servers.\n\n76\n00:03:49.729 --> 00:03:54.043\nAnd they're gonna share a replication of\nthe database if you lose one, you still\n\n77\n00:03:54.043 --> 00:03:58.320\nhave the database and you can promote\nthe other one to being the primary server.\n\n78\n00:03:58.320 --> 00:04:03.420\nThe User Portal, is just website, again\nI try to simplify it in easiest terms,\n\n79\n00:04:03.420 --> 00:04:08.070\nit's just a website that's gonna\ncommunicate back to the MFA server.\n\n80\n00:04:08.070 --> 00:04:12.360\nAnd the way that communication's gonna\nhappen is, it's gonna use a user account,\n\n81\n00:04:12.360 --> 00:04:16.320\nor it's a service account but\nnot in the general sense of like an NT or\n\n82\n00:04:16.320 --> 00:04:18.000\na Windows service account.\n\n83\n00:04:18.000 --> 00:04:21.680\nIt's just a user account\nthat the user portal will\n\n84\n00:04:21.680 --> 00:04:24.750\nuse to authenticate\nback to the MFA server.\n\n85\n00:04:24.750 --> 00:04:29.620\nNow if you remember in the last episode,\nwe put that web services SDK on there.\n\n86\n00:04:29.620 --> 00:04:32.799\nThat was using the IAS and\nwe did all those installations.\n\n87\n00:04:32.799 --> 00:04:36.010\nThat's what the user portal\nis going to authenticate to.\n\n88\n00:04:36.010 --> 00:04:39.173\nIt's going to authenticate\nto that web services SDK.\n\n89\n00:04:39.173 --> 00:04:43.836\nAnd so that way you can keep\nthe user configuration, user and\n\n90\n00:04:43.836 --> 00:04:47.959\nconfiguration data separated\nfrom the user portal.\n\n91\n00:04:47.959 --> 00:04:51.382\nBecause some people actually put their\nuser portals they're Internet facing and\n\n92\n00:04:51.382 --> 00:04:55.075\nthat's a different setup there altogether\nwith a lot more security constraints.\n\n93\n00:04:55.075 --> 00:04:58.457\nYou don't want to have all that user data\nand configuration data sitting out there\n\n94\n00:04:58.457 --> 00:05:01.647\nout there, or being the reverse\nhosted in any way possible.\n\n95\n00:05:01.647 --> 00:05:06.582\n&gt;&gt; Absolutely, and even if we don't have\na high traffic load, by setting these up\n\n96\n00:05:06.582 --> 00:05:11.050\nas separate entities, by having the MFA\nserver and the web portal separate.\n\n97\n00:05:11.050 --> 00:05:13.540\nIt does make it easier\nto convert later on and\n\n98\n00:05:13.540 --> 00:05:16.520\nsay well I'm going to add another web\nserver, I'm going to add a few more.\n\n99\n00:05:16.520 --> 00:05:20.060\nMove the web portal off of my MFA server,\nit's already separated out so\n\n100\n00:05:20.060 --> 00:05:22.305\nit's kind of a better starting point for\nus.\n\n101\n00:05:22.305 --> 00:05:24.139\n&gt;&gt; Right, the idea here is to plan for\n\n102\n00:05:24.139 --> 00:05:27.510\ngrowth because obviously we want\nour company's want to grow.\n\n103\n00:05:27.510 --> 00:05:31.902\nAnd we want to be make sure that that's is\neasiest just adding a server rather than\n\n104\n00:05:31.902 --> 00:05:34.150\nlet's tear it down and build it up again.\n\n105\n00:05:34.150 --> 00:05:35.510\nSo we don't want to do that.\n\n106\n00:05:35.510 --> 00:05:39.482\nNow some of the things I've done for\nthis just to give you for\n\n107\n00:05:39.482 --> 00:05:44.099\nan interest of time, the last episode\nwe installed the IAS web host.\n\n108\n00:05:44.099 --> 00:05:47.010\nI did that again today already.\n\n109\n00:05:48.040 --> 00:05:52.130\nThe only difference here is if you review\nthe last episode is we selected that\n\n110\n00:05:52.130 --> 00:05:56.130\nbox under security for\nactual basic authentication.\n\n111\n00:05:56.130 --> 00:05:59.130\nOn the user portal,\nwe don't need that basic authentication.\n\n112\n00:05:59.130 --> 00:06:02.640\nSo we're gonna do that same thing,\nI've already done it here.\n\n113\n00:06:02.640 --> 00:06:05.170\nYou just don't need to\nactually select that one box.\n\n114\n00:06:05.170 --> 00:06:08.030\nOtherwise the installation\nof the IIS is the same.\n\n115\n00:06:08.030 --> 00:06:12.090\nAlso the next thing you need to do is you\nwanna make sure you do all those updates,\n\n116\n00:06:12.090 --> 00:06:16.040\nchecking for those security updates for\nthe ASP and .NET stuff.\n\n117\n00:06:16.040 --> 00:06:20.020\nAlways wanna make sure that you do\nthat after installing a role like IIS.\n\n118\n00:06:20.020 --> 00:06:23.980\nThe other thing is is that we're gonna\ncommunicate over to your left, so\n\n119\n00:06:23.980 --> 00:06:27.800\nthis is yet another server that\nwill need an SSL RTLS certificate.\n\n120\n00:06:27.800 --> 00:06:30.710\nSo you wanna make sure that\nyou enroll in a certificate.\n\n121\n00:06:30.710 --> 00:06:34.159\nMake sure that certificate is\nenrolled under the computer context,\n\n122\n00:06:34.159 --> 00:06:35.590\nnot under the user context.\n\n123\n00:06:35.590 --> 00:06:38.000\nThat's that certlm.msc.\n\n124\n00:06:38.000 --> 00:06:39.610\nThat'll get you into a user store and\n\n125\n00:06:39.610 --> 00:06:42.800\nthen you can just right-click on\nthat person and you can go ahead and\n\n126\n00:06:42.800 --> 00:06:46.140\ndo your certificate request like we\nshowed you in previous episodes.\n\n127\n00:06:46.140 --> 00:06:48.690\nSo you have all those\nthings that are just, well,\n\n128\n00:06:48.690 --> 00:06:51.110\nthey're just duplicates of\nwhat we've been doing before.\n\n129\n00:06:51.110 --> 00:06:55.460\nAnd so the last that we'll need to\ndo to prepare the server as far as\n\n130\n00:06:55.460 --> 00:06:59.340\nthe IIS site goes, is that you'll need\nto do that certificate binding again.\n\n131\n00:06:59.340 --> 00:07:03.390\nRemember, just because you installed\nthe certificate onto the server itself,\n\n132\n00:07:03.390 --> 00:07:05.630\ndoesn't mean IIS is going to use it.\n\n133\n00:07:05.630 --> 00:07:11.060\nAnd all of these websites, they're built\nin package to be used under a TLS,\n\n134\n00:07:11.060 --> 00:07:12.950\nor secure server communication.\n\n135\n00:07:12.950 --> 00:07:14.650\nWe don't want anybody\nlooking at that stuff.\n\n136\n00:07:14.650 --> 00:07:18.140\nSo, you'll need to go into the IIS\nManager, you'll need to go ahead and\n\n137\n00:07:18.140 --> 00:07:20.728\nedit that bindings,\nlike we did in the last episode.\n\n138\n00:07:20.728 --> 00:07:23.970\nSo you'll have plenty of reference\nthere to just go back to that episode,\n\n139\n00:07:23.970 --> 00:07:24.754\nreview that, and\n\n140\n00:07:24.754 --> 00:07:28.760\nit is perfectly, you can apply what you\nlearned there to this episode as well.\n\n141\n00:07:28.760 --> 00:07:29.940\nSo you'll do those bindings.\n\n142\n00:07:29.940 --> 00:07:31.840\nSo again,\nwe're gonna install the IIS role,\n\n143\n00:07:31.840 --> 00:07:34.520\nwe'll do updates,\nwe're gonna grab a certificate.\n\n144\n00:07:34.520 --> 00:07:37.250\nMake sure you install\nthe certificate first because then\n\n145\n00:07:37.250 --> 00:07:40.513\nthat makes doing the bindings way easier\nbecause the certificate will just appear\n\n146\n00:07:40.513 --> 00:07:41.570\nin that drop down list.\n\n147\n00:07:42.810 --> 00:07:47.136\nNow, the one thing that we are gonna show\nyou is I mentioned to you that the way\n\n148\n00:07:47.136 --> 00:07:51.597\nthat this works is the user portal is\ngonna communicate to that web services SDK\n\n149\n00:07:51.597 --> 00:07:53.840\nthat have that basic authentication.\n\n150\n00:07:53.840 --> 00:07:56.949\nAnd what it uses is it's\ngonna use a username and\n\n151\n00:07:56.949 --> 00:08:00.340\npassword to sign in to\nthat web service SDK.\n\n152\n00:08:00.340 --> 00:08:03.250\nWe need to give it a username and\npassword,\n\n153\n00:08:03.250 --> 00:08:06.200\nand we're gonna use that later\nin some of the config files in\n\n154\n00:08:06.200 --> 00:08:11.460\norder to make sure that the user portal\nhas the proper credentials to sign in.\n\n155\n00:08:11.460 --> 00:08:15.930\nBut then and we're gonna point it to\nwhere the actual web services SDK is.\n\n156\n00:08:15.930 --> 00:08:20.310\nSo I'm gonna jump over here onto my Domain\nController, and this is really simple.\n\n157\n00:08:20.310 --> 00:08:23.630\nWe're gonna create just\na normal user account.\n\n158\n00:08:23.630 --> 00:08:27.340\nSo in here, we're gonna say New and\nthen I'm gonna say User.\n\n159\n00:08:28.720 --> 00:08:31.130\nAnd in this particular user account\n\n160\n00:08:31.130 --> 00:08:34.790\nwe're gonna talk about how we\nactually want this set up.\n\n161\n00:08:34.790 --> 00:08:39.841\nAnd if you look at our documentation,\nwhat we actually tell\n\n162\n00:08:39.841 --> 00:08:44.797\npeople to do is,\nwe actually say to use a prefix of PFWSDK.\n\n163\n00:08:46.559 --> 00:08:50.538\nThis doesn't really matter,\nI've set it up a very different ways.\n\n164\n00:08:50.538 --> 00:08:53.947\nI try to give people somewhat\nclose to the documentation but\n\n165\n00:08:53.947 --> 00:08:58.856\neverybody has their own naming context, we\nwanna observe those as well as possible,\n\n166\n00:08:58.856 --> 00:09:01.030\nbut this is really any name you want.\n\n167\n00:09:01.030 --> 00:09:04.067\nSo this is stands for\nphone factor web services SDK and\n\n168\n00:09:04.067 --> 00:09:07.577\nthen we do an underscore and\nthen we use a computer name to say,\n\n169\n00:09:07.577 --> 00:09:10.620\nhey what server is gonna\nactually sign in here.\n\n170\n00:09:10.620 --> 00:09:15.450\nSo in this server as you can see,\non my server that I'm actually hosting it,\n\n171\n00:09:15.450 --> 00:09:17.540\nthat's app1 that's\nthe server that I'm using.\n\n172\n00:09:17.540 --> 00:09:20.667\nSo I'm just gonna use app1 right here.\n\n173\n00:09:20.667 --> 00:09:25.401\nAnd I'm gonna do the same thing and\ndo the full name here.\n\n174\n00:09:25.401 --> 00:09:31.370\nIt's just like PFWSDK and we'll do app 1.\n\n175\n00:09:31.370 --> 00:09:36.374\nAnd let's do it one more time just\n\n176\n00:09:36.374 --> 00:09:42.997\nin the first name here, pfw SDK 1.\n\n177\n00:09:42.997 --> 00:09:44.797\nSo I'm ready to go there, and\n\n178\n00:09:44.797 --> 00:09:49.420\nI'm gonna give it a super secret\npassword that's really easy to remember.\n\n179\n00:09:49.420 --> 00:09:56.560\nAnd take that off and so we'll make\nsure that no one knows this password.\n\n180\n00:09:56.560 --> 00:09:59.200\nAnd in here, this is a service account.\n\n181\n00:09:59.200 --> 00:10:01.630\nSo you saw me where I\naccidentally do that.\n\n182\n00:10:01.630 --> 00:10:04.300\nThat's me being in the habit\nof labs all the time.\n\n183\n00:10:04.300 --> 00:10:06.792\nSo I don't need those passwords expiring.\n\n184\n00:10:06.792 --> 00:10:08.400\nDon't do that.\n\n185\n00:10:08.400 --> 00:10:10.690\nI know it's an easy management philosophy,\n\n186\n00:10:10.690 --> 00:10:15.190\nbut please, this user account\nunfortunately does need a user account.\n\n187\n00:10:15.190 --> 00:10:18.560\nSo you wanna make sure that you change\nthe passwords on these regularly.\n\n188\n00:10:18.560 --> 00:10:20.570\nThat is a little bit of a downside there,\n\n189\n00:10:20.570 --> 00:10:25.490\nbut it's better than having a reoccurring\npassword that's used indefinitely.\n\n190\n00:10:25.490 --> 00:10:29.942\nThe only thing I would caution you if you\nabsolutely just can't keep up with this\n\n191\n00:10:29.942 --> 00:10:32.342\nthen make sure it's a very long password.\n\n192\n00:10:32.342 --> 00:10:36.814\nAnd the length of the password is really\nthe thing that gets you the most entropy\n\n193\n00:10:36.814 --> 00:10:38.200\nin there.\n\n194\n00:10:38.200 --> 00:10:43.111\nAs a good hygiene, don't ever check\nthat box in the production environment.\n\n195\n00:10:43.111 --> 00:10:47.070\nNow we're ready to go, and\nI now have this user account.\n\n196\n00:10:47.070 --> 00:10:48.710\nNow that I have my user count.\n\n197\n00:10:48.710 --> 00:10:52.380\nWell, in the last episode we\ncreated a security group so\n\n198\n00:10:52.380 --> 00:10:56.840\nthat way everybody who\nneeded permissions to that\n\n199\n00:10:56.840 --> 00:11:01.050\ndatabase information on the MFA server was\ngonna be put in to this special group.\n\n200\n00:11:01.050 --> 00:11:02.880\nWe added the MFA server to that group.\n\n201\n00:11:02.880 --> 00:11:06.240\nAnd then we added our admin to that\nbecause he's gonna be a server admin.\n\n202\n00:11:06.240 --> 00:11:08.182\nSo we have to do the same\nthing with this user account.\n\n203\n00:11:08.182 --> 00:11:11.080\nThis is gonna be our sdk service account.\n\n204\n00:11:11.080 --> 00:11:15.460\nSo that group that we did, that was\nthe phone factor admins group and so\n\n205\n00:11:15.460 --> 00:11:20.900\nif you look right under here I have the\nphone factor's admin group right there.\n\n206\n00:11:20.900 --> 00:11:23.322\nSo what we're gonna do is just\nadd this guy to that group.\n\n207\n00:11:23.322 --> 00:11:28.967\nSo PFWSTK, yup I had that right and\nthen App one and\n\n208\n00:11:28.967 --> 00:11:36.101\nthen we'll do a check names on this and\nwe can see, It found it.\n\n209\n00:11:36.101 --> 00:11:37.850\nAnd then we're good to go.\n\n210\n00:11:37.850 --> 00:11:42.410\nSo now we've simplified this episode cuz\nthere's a lot of repeat material from\n\n211\n00:11:42.410 --> 00:11:44.590\nthe last one that just carries over here.\n\n212\n00:11:44.590 --> 00:11:46.920\nWe don't need to necessarily\nrepeat that stuff again.\n\n213\n00:11:46.920 --> 00:11:48.907\nYou'll have these episodes to\nwhere you can look at them and\n\n214\n00:11:48.907 --> 00:11:49.770\nmake sure you set it up.\n\n215\n00:11:49.770 --> 00:11:51.890\nBut just to review really quick again,\n\n216\n00:11:51.890 --> 00:11:56.660\nyou're gonna setup IIS on this box, you're\ngonna make sure that you do updates.\n\n217\n00:11:56.660 --> 00:11:59.282\nMake sure you get all the latest and\ngreatest security bits on there.\n\n218\n00:11:59.282 --> 00:12:01.833\nYou're gonna make sure you\nput a certificate on here and\n\n219\n00:12:01.833 --> 00:12:04.828\nthen you're gonna make sure you\nbuying that certificate to IIS.\n\n220\n00:12:04.828 --> 00:12:09.270\nThat's how you're gonna prepare\nyour actual user portal server.\n\n221\n00:12:09.270 --> 00:12:12.979\nThen what you'll do is on the domain\ncontroller or from a management\n\n222\n00:12:12.979 --> 00:12:16.961\nworkstation you want to go ahead and\nactually create your user account.\n\n223\n00:12:16.961 --> 00:12:20.948\nAnd then make sure you add that user\naccount to the Phone Factor admin group.\n\n224\n00:12:20.948 --> 00:12:24.893\n&gt;&gt; All right, so at this stage [COUGH]\nwe've got our MFA server and all\n\n225\n00:12:24.893 --> 00:12:30.570\nthe prerequisites are now met, it's ready\nfor us to install the Azure MFA service.\n\n226\n00:12:30.570 --> 00:12:32.770\nAnd now we've got our user portal server.\n\n227\n00:12:32.770 --> 00:12:34.330\nIt's met all its prerequisites.\n\n228\n00:12:34.330 --> 00:12:35.270\nIt's all setup.\n\n229\n00:12:35.270 --> 00:12:36.760\nIt's ready for us to install the portal.\n\n230\n00:12:36.760 --> 00:12:39.370\nBut we haven't actually installed\nthe software at this point, right?\n\n231\n00:12:39.370 --> 00:12:41.980\nIt's all been prerequisites up until here.\n\n232\n00:12:41.980 --> 00:12:45.340\nSo now's the time when we switch over and\nstart to do the configuration side.\n\n233\n00:12:45.340 --> 00:12:46.330\n&gt;&gt; Absolutely, Don.\n\n234\n00:12:46.330 --> 00:12:49.660\nSo what the next steps are going\nto be is just we're going to show\n\n235\n00:12:49.660 --> 00:12:52.620\nyou how to download that software\nbecause that's where the software is.\n\n236\n00:12:52.620 --> 00:12:54.344\nIt's actually up on the Azure site.\n\n237\n00:12:54.344 --> 00:12:58.354\nWe're going to download that software and\nwhen you install the actual MFA server.\n\n238\n00:12:58.354 --> 00:13:03.443\nIn that installation package will give us\nthe user portal and the web services SDK.\n\n239\n00:13:03.443 --> 00:13:05.077\nWell, next couple of episodes,\n\n240\n00:13:05.077 --> 00:13:07.889\nwhat we're going to be doing is we're\ngoing to install the MFA server.\n\n241\n00:13:07.889 --> 00:13:10.875\nAnd then we're going to start\ncopying those bits over to the, and\n\n242\n00:13:10.875 --> 00:13:12.406\ninstalling the web service SDK.\n\n243\n00:13:12.406 --> 00:13:15.614\nAnd then we're also going to start\ncopying those files over and\n\n244\n00:13:15.614 --> 00:13:17.595\ninstall the user portal.\n\n245\n00:13:17.595 --> 00:13:21.070\n&gt;&gt; All right, now that shouldn't\nminimize what we just covered, right?\n\n246\n00:13:21.070 --> 00:13:23.920\nGetting your prerequisites setup is really\nimportant, if you don't get those in place\n\n247\n00:13:23.920 --> 00:13:25.700\nproperly, then the actual\ninstallations are gonna fail, or\n\n248\n00:13:25.700 --> 00:13:26.930\nyou're gonna have troubleshooting issues.\n\n249\n00:13:26.930 --> 00:13:29.130\nSo definitely important that we make\nsure that we step through that.\n\n250\n00:13:29.130 --> 00:13:31.280\nBut at this stage,\nwe are done with our prerequisites, and\n\n251\n00:13:31.280 --> 00:13:33.180\nso we're ready to move\nonto the next phase.\n\n252\n00:13:33.180 --> 00:13:35.800\nBut, we don't have enough time here in\nthis episode to get through to that.\n\n253\n00:13:35.800 --> 00:13:38.338\nSo what we're gonna do is we're gonna\nmove those configurations off to\n\n254\n00:13:38.338 --> 00:13:39.109\nseparate episodes.\n\n255\n00:13:39.109 --> 00:13:41.788\nAnd we'll move through getting\nthose configured in place, but for\n\n256\n00:13:41.788 --> 00:13:43.770\nright now it's a pretty good place for\nus to stop.\n\n257\n00:13:43.770 --> 00:13:46.496\nMike, you have anything else\nyou wanted to throw in?\n\n258\n00:13:46.496 --> 00:13:49.335\n&gt;&gt; Nope, we've got a lot of\nthe tedious work done here and\n\n259\n00:13:49.335 --> 00:13:53.351\nnow we're actually gonna get into the\nheavy lifting of getting the MFA server\n\n260\n00:13:53.351 --> 00:13:54.550\nset up and ready to go.\n\n261\n00:13:54.550 --> 00:13:55.390\n&gt;&gt; Excellent.\n\n262\n00:13:55.390 --> 00:13:58.050\nAll right, well, ladies and gentleman out\nthere, I hope you guys enjoyed it, but\n\n263\n00:13:58.050 --> 00:13:59.581\nright now though we're\ngonna wrap this one up.\n\n264\n00:13:59.581 --> 00:14:02.812\nSigning off for\nITPRO.TV I've been your host, Don Pezet.\n\n265\n00:14:02.812 --> 00:14:04.120\n&gt;&gt; And I'm Mike Stevens.\n\n266\n00:14:04.120 --> 00:14:06.097\n&gt;&gt; And we will see you next time.\n\n267\n00:14:06.097 --> 00:14:12.080\n[MUSIC]\n\n268\n00:14:12.080 --> 00:14:15.767\n&gt;&gt; Thank you for watching ITPro.TV.\n\n",
          "vimeoId": "216504089"
        },
        {
          "description": "In this episode, Don and Mike walk the viewers through the process of installing and configuring the Azure MFA server. Mike then moves on to enable users to access the MFA service and forcing the MFA server to synchronize.",
          "length": "1960",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-8-configuring_the_mfa_server-050417.00_34_38_28.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-8-configuring_the_mfa_server-050417.00_34_38_28.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-8-configuring_the_mfa_server-050417.00_34_38_28.Still001-sm.jpg",
          "title": "Configuring the MFA Server",
          "transcript": "WEBVTT\n\n1\n00:00:00.260 --> 00:00:03.563\nWelcome to ITPro.TV,\n\n2\n00:00:03.563 --> 00:00:08.358\nI'm your host Don Pezet [CROSSTALK]\n\n3\n00:00:08.358 --> 00:00:13.080\n&gt;&gt; You're watching ITPro.TV.\n\n4\n00:00:13.080 --> 00:00:15.797\n&gt;&gt; All right, good morning,\ngood afternoon and good evening and\n\n5\n00:00:15.797 --> 00:00:17.859\nwelcome back to another\nepisode of ITPro.TV.\n\n6\n00:00:17.859 --> 00:00:22.081\nI'm your host, Don Pezet, back again with\nanother episode of Windows Hello for\n\n7\n00:00:22.081 --> 00:00:22.713\nBusiness.\n\n8\n00:00:22.713 --> 00:00:26.450\nAnd in this episode, well, ready to kick\nthe dust off the tires and jump in there?\n\n9\n00:00:26.450 --> 00:00:29.927\nWe're gonna be configuring\nthe Azure MFA server.\n\n10\n00:00:29.927 --> 00:00:32.868\nAnd in the last couple episodes we've been\nkinda taking care of prerequisites and\n\n11\n00:00:32.868 --> 00:00:34.730\ngetting set up for the installation.\n\n12\n00:00:34.730 --> 00:00:37.610\nNow it's actually time to do the install.\n\n13\n00:00:37.610 --> 00:00:40.538\nAnd the person who's gonna help us do\nthat is right here next to me, Mr.\n\n14\n00:00:40.538 --> 00:00:45.110\nMike Stephens, program manager over at\nMicrosoft with the Windows Hello for\n\n15\n00:00:45.110 --> 00:00:45.990\nBusiness team.\n\n16\n00:00:45.990 --> 00:00:49.010\nAnd Mike, what are we looking at today?\n\n17\n00:00:49.010 --> 00:00:53.030\n&gt;&gt; So today, just like you said Don, we've\nbeen doing a lot of preparation work.\n\n18\n00:00:53.030 --> 00:00:56.524\nAnd now, the big thing here we're gonna\nbe doing is we're gonna actually start\n\n19\n00:00:56.524 --> 00:00:57.838\ninstalling the server here.\n\n20\n00:00:57.838 --> 00:01:02.109\nAnd this is gonna be a sequence of\nepisodes where we're gonna be using\n\n21\n00:01:02.109 --> 00:01:03.520\nthe Azure MFA server.\n\n22\n00:01:03.520 --> 00:01:05.424\nWe're then gonna use the Web SDK.\n\n23\n00:01:05.424 --> 00:01:08.130\nAnd then we're gonna finally\nend up some user portal stuff.\n\n24\n00:01:08.130 --> 00:01:11.200\nSo we're gonna be mixing and matching,\nand doing the wildest stuff here.\n\n25\n00:01:11.200 --> 00:01:14.750\nBut the first thing we need to do is\nwe actually need to get the MFA server.\n\n26\n00:01:14.750 --> 00:01:15.957\nAnd that's gonna be a download.\n\n27\n00:01:15.957 --> 00:01:19.437\nSo one of the prerequisite we talked\nabout in our earlier episode is,\n\n28\n00:01:19.437 --> 00:01:23.227\nis that you don't need an Azure\nsubscription you know I say subscription.\n\n29\n00:01:23.227 --> 00:01:26.280\nYou don't need to have things being\nsynchronized to the cloud and all that.\n\n30\n00:01:26.280 --> 00:01:28.480\nBut you do need an Azure account.\n\n31\n00:01:28.480 --> 00:01:31.370\nAnd you can get one of those and\ncreate one of those it's really simple.\n\n32\n00:01:31.370 --> 00:01:34.050\nAnd when you login to that Azure account,\n\n33\n00:01:34.050 --> 00:01:37.910\nyou're gonna have the screen like I\nhave right here on my laptop here.\n\n34\n00:01:37.910 --> 00:01:42.706\nAnd you're gonna have all these different\noptions to choose from based on what\n\n35\n00:01:42.706 --> 00:01:44.314\nkind of account you have.\n\n36\n00:01:44.314 --> 00:01:49.420\nNow I have just a basic MSTN\nsubscription account that I use.\n\n37\n00:01:49.420 --> 00:01:52.880\nAnd in here I've set up an active,\nit has an Active Directory here.\n\n38\n00:01:52.880 --> 00:01:56.562\nBut what we're really working for\nis that these options on the left,\n\n39\n00:01:56.562 --> 00:01:59.619\nyou need to click on Active Directory,\nselect that one.\n\n40\n00:01:59.619 --> 00:02:03.850\nBecause that's gonna light up this\nmultifactor authentication provider\n\n41\n00:02:03.850 --> 00:02:04.840\nspy here.\n\n42\n00:02:04.840 --> 00:02:09.660\nAnd in here, this is how we actually get\nto the multifactor authentication page.\n\n43\n00:02:09.660 --> 00:02:13.909\nNow, I can't show that actual page cuz it\nhas some privacy Information there but\n\n44\n00:02:13.909 --> 00:02:16.296\nwhat I will show you is\nwhen you click on that.\n\n45\n00:02:16.296 --> 00:02:20.603\nIt takes you over to this page here\nwhere you see the Azure multifactor\n\n46\n00:02:20.603 --> 00:02:22.260\nauthentication.\n\n47\n00:02:22.260 --> 00:02:25.000\nAnd in here you have all these\nreports that you can use in\n\n48\n00:02:25.000 --> 00:02:27.340\na variety of different things\nthat you can check out.\n\n49\n00:02:27.340 --> 00:02:30.686\nBut there's that nice little download\nspot there that we have, and\n\n50\n00:02:30.686 --> 00:02:34.454\nthat let's us download the actual\nmulti-factor authentication server.\n\n51\n00:02:34.454 --> 00:02:35.972\nAnd that's gonna be in MSI, and\n\n52\n00:02:35.972 --> 00:02:38.400\nthey actually update this\nquite frequently here.\n\n53\n00:02:38.400 --> 00:02:42.569\nSo now I have that there, and I've already\nclicked that Download button, and so\n\n54\n00:02:42.569 --> 00:02:44.483\nwhat I have, is I have it right here.\n\n55\n00:02:44.483 --> 00:02:48.116\nAnd this is the actual download page\nthat you'll get to when you're ready to\n\n56\n00:02:48.116 --> 00:02:51.660\ndownload that, and you'll see that\nGenerate Activation Credentials.\n\n57\n00:02:51.660 --> 00:02:55.254\nYou don't wanna click that\nuntil you're absolutely ready.\n\n58\n00:02:55.254 --> 00:02:58.151\nYou're gonna need to\nactivate your server and\n\n59\n00:02:58.151 --> 00:03:03.363\nthat's how the Azure MFA server knows what\naccount it needs to go ahead and bill to.\n\n60\n00:03:03.363 --> 00:03:05.800\nSo you need to hold onto that page.\n\n61\n00:03:05.800 --> 00:03:07.190\nThat page might time out on you.\n\n62\n00:03:07.190 --> 00:03:11.310\nIf it does, just go back to the one for\nprevious and just go back into it.\n\n63\n00:03:11.310 --> 00:03:16.190\nBut, when you see the activation on\nthe installation that we'll show\n\n64\n00:03:16.190 --> 00:03:17.510\nyou in just a few minutes here.\n\n65\n00:03:18.610 --> 00:03:21.400\nYou'll then want to go over and\ndo that generated activation code.\n\n66\n00:03:21.400 --> 00:03:23.370\nAnd that code is only good for\nabout ten minutes.\n\n67\n00:03:23.370 --> 00:03:27.220\nSo if you're hitting that little low\nwhere you have the activation code and\n\n68\n00:03:27.220 --> 00:03:28.760\nnow you have to, it's not working.\n\n69\n00:03:28.760 --> 00:03:32.440\nYou can go ahead and just click generate\na new one and then you can go ahead and\n\n70\n00:03:32.440 --> 00:03:33.290\ndo your activation.\n\n71\n00:03:33.290 --> 00:03:36.880\nSo, I've already downloaded this,\nso we're gonna minimize that.\n\n72\n00:03:36.880 --> 00:03:41.953\nAnd I'm gonna go over here to my\nactual MFA server and this guy is\n\n73\n00:03:41.953 --> 00:03:48.107\nright here I believe, no, that's my\napp one server, where is [INAUDIBLE].\n\n74\n00:03:48.107 --> 00:03:50.601\nThere's my domain controller, well.\n\n75\n00:03:50.601 --> 00:03:51.115\n&gt;&gt; It's always the last one.\n\n76\n00:03:51.115 --> 00:03:52.560\n&gt;&gt; Always the last one, yeah.\n\n77\n00:03:52.560 --> 00:03:57.649\nSo here's my MFA server and if I go\ninto my downloads here you're gonna\n\n78\n00:03:57.649 --> 00:04:02.499\nsee where I've already downloaded and\nI have the version 7.3.\n\n79\n00:04:02.499 --> 00:04:06.414\nThat is probably the latest version\nthat they have out right now, and\n\n80\n00:04:06.414 --> 00:04:09.940\nwhat I'm gonna do is I'm just\ngonna do a normal install here.\n\n81\n00:04:09.940 --> 00:04:11.850\nI'm gonna run this as an administrator.\n\n82\n00:04:11.850 --> 00:04:14.788\nAll right, and we'll go ahead.\n\n83\n00:04:14.788 --> 00:04:17.640\nAnd it's gonna warn you that\nyou need to have these updates.\n\n84\n00:04:17.640 --> 00:04:19.900\nDon and I have been talking to you\nabout making sure that those servers\n\n85\n00:04:19.900 --> 00:04:20.820\nare up to date.\n\n86\n00:04:20.820 --> 00:04:24.160\nThis update is probably gonna\nbe an optional download.\n\n87\n00:04:24.160 --> 00:04:27.280\nIt's not really actually checking\nto see if you have the updates.\n\n88\n00:04:27.280 --> 00:04:28.870\nSo, this is really a reminder.\n\n89\n00:04:28.870 --> 00:04:33.539\nIt's not going to tell you, whether you do\nor you don't have it so if you have it,\n\n90\n00:04:33.539 --> 00:04:36.851\nyou're still gonna get\nthis which is I did here.\n\n91\n00:04:36.851 --> 00:04:39.030\nI still have this little\nnice warning here.\n\n92\n00:04:39.030 --> 00:04:44.470\nI'm gonna hit OK to that and we're\ngonna see down here that it popped up.\n\n93\n00:04:46.990 --> 00:04:51.060\nAnd here is the thing you are gonna need\nto install few of these little run time\n\n94\n00:04:51.060 --> 00:04:51.710\ncomponents here.\n\n95\n00:04:51.710 --> 00:04:55.050\nSo you wanna just go ahead and\nsay yes to these installs here.\n\n96\n00:04:55.050 --> 00:04:57.860\nAnd what you are gonna\nsee is the C++ runtime.\n\n97\n00:04:57.860 --> 00:05:01.905\nThis is the X64 one we are just\ngonna agree to this one and\n\n98\n00:05:01.905 --> 00:05:04.380\nit's gonna run through\na real quick set up here.\n\n99\n00:05:04.380 --> 00:05:05.190\nAnd then we're done.\n\n100\n00:05:05.190 --> 00:05:09.070\nAnd then it's gonna do the next one,\nwhich is the X86 one.\n\n101\n00:05:09.070 --> 00:05:12.810\nAnd we're gonna run through that set up\nhere real quick too to get that going.\n\n102\n00:05:12.810 --> 00:05:16.960\nAnd then once this is done, we should\nsee the actual installer come up.\n\n103\n00:05:18.630 --> 00:05:20.530\nJust gonna give us a little\nminute here as we sit there and\n\n104\n00:05:20.530 --> 00:05:22.970\nstart whirling on some stuff.\n\n105\n00:05:22.970 --> 00:05:26.537\nAnd when we see this installer up, as you\ncan see here, now it's like, okay, hey,\n\n106\n00:05:26.537 --> 00:05:27.913\nwhere do you want me to install?\n\n107\n00:05:27.913 --> 00:05:29.410\nLet's just set the defaults here.\n\n108\n00:05:29.410 --> 00:05:32.120\nWe don't need to change\nanything whatsoever.\n\n109\n00:05:32.120 --> 00:05:37.200\nAnd then copying files, easy, peasy,\nwe've got this all set up, ready to go.\n\n110\n00:05:37.200 --> 00:05:41.770\nNow, it's gonna immediately\nstart the server wizard up.\n\n111\n00:05:41.770 --> 00:05:45.200\nAnd says, do you wanna actually do this\nmultifactorial authentication wizard?\n\n112\n00:05:45.200 --> 00:05:47.040\nWe really don't want to do that right now.\n\n113\n00:05:47.040 --> 00:05:50.080\nWhat we want to do is just\nget the server started and\n\n114\n00:05:50.080 --> 00:05:51.980\nthen after that we want\nto do some activation.\n\n115\n00:05:51.980 --> 00:05:55.631\nSo, we're gonna skip this here and then\nwhat you'll see is you'll actually see\n\n116\n00:05:55.631 --> 00:05:58.542\nthe server pop up and\nwe're at the activation point right here.\n\n117\n00:05:58.542 --> 00:05:59.710\nSo, what this is?\n\n118\n00:05:59.710 --> 00:06:03.010\nThis is a great point to where you and\nI go back to your website.\n\n119\n00:06:03.010 --> 00:06:06.640\nYou're gonna generate that activation code\nand you're gonna paste in that email and\n\n120\n00:06:06.640 --> 00:06:09.320\npassword that it gives you there and\nclick activate.\n\n121\n00:06:09.320 --> 00:06:12.530\nOne thing to make sure you\nare aware of is this server\n\n122\n00:06:12.530 --> 00:06:14.230\nneeds to be connected to the Internet.\n\n123\n00:06:14.230 --> 00:06:18.320\nIt's reaching out to that Azure MFA\nservice that's in the cloud.\n\n124\n00:06:18.320 --> 00:06:22.644\nSo this one needs to have the ability to\nget to the Internet, not maybe directly,\n\n125\n00:06:22.644 --> 00:06:24.690\nso you're not maybe do a DMZ.\n\n126\n00:06:24.690 --> 00:06:28.390\nYou may be able to do a reverse proxy, or\nsomething like that, a web proxy there.\n\n127\n00:06:28.390 --> 00:06:32.880\nBut it definitely will need to reach\nout to that Azure cloud, for sure.\n\n128\n00:06:32.880 --> 00:06:36.916\n&gt;&gt; Now we're gonna do this one off\ncamera because if you were to well,\n\n129\n00:06:36.916 --> 00:06:39.309\nhave Mike's email and generated key.\n\n130\n00:06:39.309 --> 00:06:41.816\nThen you'd obviously be able to\nactivate his server on this also,\n\n131\n00:06:41.816 --> 00:06:42.960\nwhich we don't want.\n\n132\n00:06:42.960 --> 00:06:44.390\nSo he's gonna activate\nin the background and\n\n133\n00:06:44.390 --> 00:06:46.190\nthen as soon as that's done we'll\ncut right back over to him and\n\n134\n00:06:46.190 --> 00:06:47.140\ncontinue that process.\n\n135\n00:06:47.140 --> 00:06:50.270\nBut remember, you need to generate these\ncredentials off of your own account.\n\n136\n00:06:50.270 --> 00:06:53.960\nCuz this is part of what's going to be\nlinking your Azure MFA server to your\n\n137\n00:06:53.960 --> 00:06:54.810\nAzure account.\n\n138\n00:06:57.025 --> 00:07:00.763\n&gt;&gt; Okay, Don, so\nI've actually got my server activated now.\n\n139\n00:07:00.763 --> 00:07:04.368\nAnd if you look at my screen here this is\nthe next thing that you'll see when you\n\n140\n00:07:04.368 --> 00:07:07.010\nget out of here is you\nhave this join group here.\n\n141\n00:07:07.010 --> 00:07:09.930\nAnd in this join group it\nsays this MFA server default.\n\n142\n00:07:09.930 --> 00:07:11.250\nWe just wanna go ahead and keep that.\n\n143\n00:07:11.250 --> 00:07:14.460\nWe're not gonna do any group\npartitioning of that sort.\n\n144\n00:07:14.460 --> 00:07:16.490\nAnd so, we'll hit OK on that guy.\n\n145\n00:07:16.490 --> 00:07:21.280\nAnd so, what we've done now is\nnow we've got our MFA server and\n\n146\n00:07:21.280 --> 00:07:24.480\nyou can see here the status is online and\nwe're ready to go.\n\n147\n00:07:24.480 --> 00:07:28.630\nSo we have all of those things ready to\ngo and we actually have our MFA server.\n\n148\n00:07:28.630 --> 00:07:29.622\nSo if we look here,\n\n149\n00:07:29.622 --> 00:07:32.800\nwe have all these different\nsettings that we can use for MFA.\n\n150\n00:07:32.800 --> 00:07:35.730\nAs they said before,\nit's not just works with Windows Hello for\n\n151\n00:07:35.730 --> 00:07:38.220\nBusiness, you can use this\nin a variety of things.\n\n152\n00:07:38.220 --> 00:07:41.705\nSo, the first thing we wanna do\nis we wanna start setting up\n\n153\n00:07:41.705 --> 00:07:43.280\nthe configuration data.\n\n154\n00:07:43.280 --> 00:07:47.497\nNow the unique thing about the Azure MFA\nserver is that you store all of\n\n155\n00:07:47.497 --> 00:07:50.560\nthe configuration,\neven the user portal stuff.\n\n156\n00:07:50.560 --> 00:07:53.830\nIf you see down here,\nwe have the web services SDK here and\n\n157\n00:07:53.830 --> 00:07:56.023\nthen the user portal right next to it.\n\n158\n00:07:56.023 --> 00:08:00.620\nAll of this information is actually\nstored directly on this server.\n\n159\n00:08:00.620 --> 00:08:04.660\nSo, we can actually do all\nthe configuration at once, and\n\n160\n00:08:04.660 --> 00:08:08.340\nthen we can actually go and set up\nthe user portal, and the Web Services SDK,\n\n161\n00:08:08.340 --> 00:08:11.570\neven though the configuration\nis already done.\n\n162\n00:08:11.570 --> 00:08:14.660\nSo, we're just gonna take a step\nhere into the company settings.\n\n163\n00:08:14.660 --> 00:08:17.200\nAnd in here,\nyou're gonna see the default settings.\n\n164\n00:08:17.200 --> 00:08:20.560\nNow, we're not gonna go through\na bunch of detail here,\n\n165\n00:08:20.560 --> 00:08:25.000\nthe actual server has a great help\nfile that explains all these settings.\n\n166\n00:08:25.000 --> 00:08:27.410\nAnd these settings are gonna vary\ndepending on the environment.\n\n167\n00:08:27.410 --> 00:08:29.090\nSo, if it's your environment,\n\n168\n00:08:29.090 --> 00:08:31.730\nyou're gonna have different reasons\nto select different things.\n\n169\n00:08:31.730 --> 00:08:35.060\nIf you're doing a lot of installs for\nother people,\n\n170\n00:08:35.060 --> 00:08:37.780\nthese are the things that you're\ngonna have to ask those customers is,\n\n171\n00:08:37.780 --> 00:08:41.700\nokay, what do you want here and be able\nto provide a configuration for you.\n\n172\n00:08:41.700 --> 00:08:45.270\nBut you have certain things that are very\nintuitive like when the internet\n\n173\n00:08:45.270 --> 00:08:47.740\nis not accessible,\nyou want a failed authentication.\n\n174\n00:08:47.740 --> 00:08:49.480\nYou have your user defaults here,\n\n175\n00:08:49.480 --> 00:08:52.133\nwhich in this case we're\ngonna select a text message.\n\n176\n00:08:52.133 --> 00:08:55.990\nOne of the use the text\nmessage feature this, and\n\n177\n00:08:55.990 --> 00:09:00.890\ninstead of having a one time password,\nI wanna actually have a one way\n\n178\n00:09:00.890 --> 00:09:04.560\nwere it just sends me the message, and\nthen I have to type it in the screen.\n\n179\n00:09:04.560 --> 00:09:09.630\nI actually wanna keep the whole two\nfactor authentication out of band,\n\n180\n00:09:09.630 --> 00:09:13.771\nwhich means, I wanna send a text\nmessage to the phone, and\n\n181\n00:09:13.771 --> 00:09:16.997\nthen I'm gonna type\na code back on the phone.\n\n182\n00:09:16.997 --> 00:09:20.310\nAnd then it's gonna relay whether,\nor not I had it successful, or not.\n\n183\n00:09:20.310 --> 00:09:23.150\nSo, we're gonna use\nthe text message phone.\n\n184\n00:09:23.150 --> 00:09:26.820\nEverything else here is really\njust an option of what works for\n\n185\n00:09:26.820 --> 00:09:28.140\nyour environment here.\n\n186\n00:09:28.140 --> 00:09:31.920\nSo, whether the user can change a phone\nnumber these kinds of things here.\n\n187\n00:09:31.920 --> 00:09:35.890\nYour default panels if you want the user\nto have a panel, or not like that, and\n\n188\n00:09:35.890 --> 00:09:39.650\nthen, the different types of language and\nso forth that you wanna have here.\n\n189\n00:09:39.650 --> 00:09:43.785\nSo, this is what we're gonna stick with on\nthis one, so you'll take a look at these\n\n190\n00:09:43.785 --> 00:09:47.525\nparticular settings, and see which\none works best for your environment.\n\n191\n00:09:47.525 --> 00:09:50.155\nYou may want to play around with them\na little bit while you're doing your proof\n\n192\n00:09:50.155 --> 00:09:51.515\nof concept here.\n\n193\n00:09:51.515 --> 00:09:54.925\nSo, the next step we want to\ngo to is the email settings.\n\n194\n00:09:54.925 --> 00:09:59.853\nAnd I've mentioned before they're in\nour email settings that when we start\n\n195\n00:09:59.853 --> 00:10:00.700\nbringing and\n\n196\n00:10:00.700 --> 00:10:05.714\nimporting users in that we can actually\nstart sending emails to those users.\n\n197\n00:10:05.714 --> 00:10:09.296\nAnd the way that we can do that go into\nthese settings here and we can say,\n\n198\n00:10:09.296 --> 00:10:12.938\nsend emails to users, and then the other\nthing I like to put on here is send\n\n199\n00:10:12.938 --> 00:10:16.627\na notification to the user port admins\nwhen do you need to see something.\n\n200\n00:10:16.627 --> 00:10:19.610\nNow, this could potentially\nget a little noisy, but\n\n201\n00:10:19.610 --> 00:10:21.320\nyou don't necessarily need to have it.\n\n202\n00:10:21.320 --> 00:10:24.886\nSo, in this particular case I'm gonna\nleave it off, cuz we're putting\n\n203\n00:10:24.886 --> 00:10:28.626\nit only in a demo here, then you can say\nin there, what if you didn't leave it\n\n204\n00:10:28.626 --> 00:10:32.616\nselected then you can put in the name of\nthe admins that are gonna receive emails.\n\n205\n00:10:32.616 --> 00:10:37.140\nNow, for here, all you really need here is\nthis is how it's gonna send those emails.\n\n206\n00:10:37.140 --> 00:10:41.190\nSo, you need to know the name of\nyour email server, your SMTP server.\n\n207\n00:10:41.190 --> 00:10:42.950\nSo, I'm gonna just gonna put mine in here.\n\n208\n00:10:42.950 --> 00:10:45.750\nMine's mail.corp.contoso.com.\n\n209\n00:10:45.750 --> 00:10:48.742\nAnd for just this one,\nI'm gonna go ahead and say,\n\n210\n00:10:48.742 --> 00:10:51.260\nI'm gonna use the lab admin account here.\n\n211\n00:10:53.760 --> 00:11:00.852\nOn my lab admin account, and\nthat is corp.contoso.com.\n\n212\n00:11:00.852 --> 00:11:03.390\nAnd then my super secret password.\n\n213\n00:11:03.390 --> 00:11:06.770\nAnd I'm currently not using any\nSSL on my email server right now.\n\n214\n00:11:06.770 --> 00:11:08.480\nSo, I've got that configured.\n\n215\n00:11:08.480 --> 00:11:10.140\nBut, now, here's the great part.\n\n216\n00:11:10.140 --> 00:11:12.800\nHere's the email content\nthat we get to go to.\n\n217\n00:11:12.800 --> 00:11:15.820\nLook at all these pre-candid\nmessages that you can see here.\n\n218\n00:11:15.820 --> 00:11:18.880\nThis is one for the standard, so\nin a phone call standard one,\n\n219\n00:11:18.880 --> 00:11:20.860\nwhich is actually a voice call.\n\n220\n00:11:20.860 --> 00:11:23.300\nYou can say,\nwhen a new user gets enrolled.\n\n221\n00:11:23.300 --> 00:11:26.010\nWhen the user's actually\nenrolled in there.\n\n222\n00:11:26.010 --> 00:11:27.330\nYou can say, updated user.\n\n223\n00:11:27.330 --> 00:11:28.910\nThese are all great ones here.\n\n224\n00:11:28.910 --> 00:11:34.170\nSo, what we're gonna do is we're gonna\nlook at two-way, which is right here.\n\n225\n00:11:35.380 --> 00:11:39.730\nAnd then, we're gonna say, two-way with\nOTP, and I'm gonna have a new user here.\n\n226\n00:11:39.730 --> 00:11:44.770\nNow, if you look over here, this is the\ntext that's gonna get sent to the user.\n\n227\n00:11:44.770 --> 00:11:45.910\nWhen you actually enroll them.\n\n228\n00:11:45.910 --> 00:11:48.610\nAnd they have some built-in variables\nhere, like dollar sign, phone,\n\n229\n00:11:48.610 --> 00:11:51.120\nlike this is the one we're gonna\ncall you at and so forth like this.\n\n230\n00:11:51.120 --> 00:11:55.320\nSo, in this particular case,\nyou can really get creative here.\n\n231\n00:11:55.320 --> 00:11:57.310\nYou can actually add other\nthings if you'd like too.\n\n232\n00:11:57.310 --> 00:11:58.900\nAnd then here's one for user enrollments.\n\n233\n00:11:58.900 --> 00:12:00.670\nSo, when the user is actually enrolled.\n\n234\n00:12:00.670 --> 00:12:03.030\nAnd then if anything on\nthe user account gets updated,\n\n235\n00:12:03.030 --> 00:12:04.820\nyou can actually do one here.\n\n236\n00:12:04.820 --> 00:12:05.990\nSo, this is the one we're gonna do.\n\n237\n00:12:05.990 --> 00:12:11.030\nAnd, now, if you look up here,\nthe from not specified, you\n\n238\n00:12:11.030 --> 00:12:15.390\nwill not send e-mails, because it needs to\nknow who the e-mail actually came from.\n\n239\n00:12:15.390 --> 00:12:19.460\nSo, what we're going to do here is this,\nwe're gonna go over and edit this guy.\n\n240\n00:12:19.460 --> 00:12:21.230\nSo, we're gonna say, Edit.\n\n241\n00:12:21.230 --> 00:12:25.460\nAnd in here it says, here is the text\nmessage, and we have the two A, one time\n\n242\n00:12:25.460 --> 00:12:30.690\npassword, new user, I recommend leaving\nit a plain text, you can go to HTML,\n\n243\n00:12:30.690 --> 00:12:36.460\nbut she gets some really weird line\ngrabs and carriage returns there.\n\n244\n00:12:36.460 --> 00:12:38.330\nAnd it just doesn't look right.\n\n245\n00:12:38.330 --> 00:12:43.228\nSo, I leave it as a plain text for\none there, and what we do is the from is I\n\n246\n00:12:43.228 --> 00:12:47.424\ncan just use my lab admin user\naccount that I've been using.\n\n247\n00:12:51.329 --> 00:12:53.050\nAnd then you're actually done.\n\n248\n00:12:53.050 --> 00:12:55.860\nNow, the way you wanna do this\nis unfortunately you have to do\n\n249\n00:12:55.860 --> 00:12:58.300\nall of these for\nthe ones that you have configured.\n\n250\n00:12:58.300 --> 00:13:00.910\nSo, what you can do is you wanna\nmake sure you hit that Apply button,\n\n251\n00:13:00.910 --> 00:13:03.420\nbecause other wise these\nsettings won't save.\n\n252\n00:13:03.420 --> 00:13:06.650\nYou hit Apply, and\nto make this a little bit faster.\n\n253\n00:13:06.650 --> 00:13:10.406\nI'm gonna copy and paste this guy right\nhere, and then you have this next button.\n\n254\n00:13:10.406 --> 00:13:14.604\nSo, I can go to the next one, so that's\nthe user enrollment one, and so, I'll just\n\n255\n00:13:14.604 --> 00:13:19.360\npaste that guy there, again hit the Apply,\nnext again and then hit Apply again.\n\n256\n00:13:19.360 --> 00:13:22.780\nSo, I have gotten all the ones that I\nneed, that I'm worried about, which is\n\n257\n00:13:22.780 --> 00:13:28.400\nthe two-way, one time password prompt,\nwhich is what we're gonna use for that.\n\n258\n00:13:29.800 --> 00:13:32.730\nSo, now,\nwe look at we have the e-mail settings and\n\n259\n00:13:32.730 --> 00:13:35.510\neverything else,\nlet's go to the Directory Integration.\n\n260\n00:13:35.510 --> 00:13:40.515\nThis is the part where right here,\nthis is how we get users in and\n\n261\n00:13:40.515 --> 00:13:41.565\nout of Active Directory.\n\n262\n00:13:43.125 --> 00:13:46.215\nIf you're familiar with hybrid setups and\nhow the hybrid model works,\n\n263\n00:13:46.215 --> 00:13:50.245\nyou use Azure AD Connect to synchronize\nyour on-premises credentials\n\n264\n00:13:50.245 --> 00:13:54.425\nto up to Azure AD Tenant where\nyou have that cloud subscription.\n\n265\n00:13:54.425 --> 00:13:58.060\nAnd then you have your identities and\nyour credentials on both sides.\n\n266\n00:13:58.060 --> 00:14:00.760\nAnd here you're just sinking them locally.\n\n267\n00:14:00.760 --> 00:14:02.550\nThis is the big value to add for\n\n268\n00:14:02.550 --> 00:14:05.860\nthe Azure On-Premise Server is\nthat the credentials stay local.\n\n269\n00:14:05.860 --> 00:14:07.600\nThey never go up to the cloud.\n\n270\n00:14:07.600 --> 00:14:11.540\nSo, this is the component that is\nactually gonna do the synchronization\n\n271\n00:14:11.540 --> 00:14:12.860\nmodels there so.\n\n272\n00:14:12.860 --> 00:14:16.230\nBut before we do these,\n\n273\n00:14:16.230 --> 00:14:20.150\nwe need to think about our strategy of\nhow we're gonna potentially deploy this.\n\n274\n00:14:20.150 --> 00:14:23.320\nSome of the easiest things that I think of\nis, is that when people are deploying is,\n\n275\n00:14:23.320 --> 00:14:27.740\nis that typically after you get past your\nproof of concept, you might have a pilot.\n\n276\n00:14:27.740 --> 00:14:30.990\nAnd then after the pilot,\nyou may potentially start doing,\n\n277\n00:14:30.990 --> 00:14:36.490\nI'm gonna do accounting, or HR, or sales,\nor you'll do it easily by organization.\n\n278\n00:14:36.490 --> 00:14:39.460\nMaybe the first one you\ndo is with your IT staff.\n\n279\n00:14:39.460 --> 00:14:42.780\nSo, I like to think of maybe\ndoing phased approaches, and\n\n280\n00:14:42.780 --> 00:14:46.270\nusing groups to those phased\napproaches to make it more easy.\n\n281\n00:14:46.270 --> 00:14:50.930\nSo, in this case, what I'm gonna do, I'm\ngonna jump over to my domain controller\n\n282\n00:14:50.930 --> 00:14:55.850\nhere, and where is the guy, here, and\n\n283\n00:14:55.850 --> 00:14:59.630\nI'm going to load up Active Directory's\nusers and computers.\n\n284\n00:15:01.580 --> 00:15:03.690\nAnd I'm gonna create a pilot group.\n\n285\n00:15:03.690 --> 00:15:04.450\nNow, the reason why,\n\n286\n00:15:04.450 --> 00:15:08.420\nI've already made that Window's Hello for\nBusiness group, users group.\n\n287\n00:15:08.420 --> 00:15:10.070\nAnd that's the thing we're\ntying everything to.\n\n288\n00:15:10.070 --> 00:15:14.970\nBut if I put a user in that\nWindow's Hello for Business users group,\n\n289\n00:15:14.970 --> 00:15:18.020\nthen that means, they're gonna\nget Windows Hello for Business.\n\n290\n00:15:18.020 --> 00:15:22.730\nThe idea this is a more phased, or\na staged approach where I wanna be able to\n\n291\n00:15:22.730 --> 00:15:27.570\nbring the users into the MFA server,\nand give them an opportunity to\n\n292\n00:15:27.570 --> 00:15:32.690\nactually follow the link that they'll\nget in their email, actually go and\n\n293\n00:15:32.690 --> 00:15:37.430\nchange the settings that suit their needs\nthat I've configured in MFA server.\n\n294\n00:15:37.430 --> 00:15:40.100\nSo, I want to be able to say,\n\n295\n00:15:40.100 --> 00:15:43.400\nhey, here's two weeks before\nwe're going to do our deployment.\n\n296\n00:15:43.400 --> 00:15:46.061\nLet me go ahead and\nenroll you in the MFA server.\n\n297\n00:15:46.061 --> 00:15:47.366\nYou can go out there and check it out.\n\n298\n00:15:47.366 --> 00:15:52.791\nThen in two weeks, I can take\nthat group of people that I used.\n\n299\n00:15:52.791 --> 00:15:56.645\nAnd bring them and just add them into\nthe Windows Flow for Business Users group.\n\n300\n00:15:56.645 --> 00:15:59.175\nAnd then all of the other things\nwill light up for them so\n\n301\n00:15:59.175 --> 00:16:01.500\nthen that way they'll\nbe able to just do it.\n\n302\n00:16:01.500 --> 00:16:02.930\nSo again, it's a phased approach.\n\n303\n00:16:02.930 --> 00:16:07.620\nThe other thing is that if you ever\nstart encountering a problem where\n\n304\n00:16:07.620 --> 00:16:11.300\nI've been going along and I've been\ndoing phase after phase after phase.\n\n305\n00:16:11.300 --> 00:16:15.520\nAnd then all of a sudden somethings\nnot working you have a better idea of,\n\n306\n00:16:15.520 --> 00:16:18.260\nwell the last phase of\npeople worked just fine.\n\n307\n00:16:18.260 --> 00:16:20.560\nThis phase of group of\npeople doesn't work.\n\n308\n00:16:20.560 --> 00:16:22.120\nMaybe there's something\nin the group settings.\n\n309\n00:16:22.120 --> 00:16:23.415\nMaybe they're not there.\n\n310\n00:16:23.415 --> 00:16:27.155\nThe other thing is that it allows\nyou to control the replication based\n\n311\n00:16:27.155 --> 00:16:30.695\non the phases of how you\nimported users into that.\n\n312\n00:16:31.805 --> 00:16:34.275\nIt's very easy to sit there and\nif you need to change or\n\n313\n00:16:34.275 --> 00:16:36.805\ndo a re-import you can do that.\n\n314\n00:16:36.805 --> 00:16:40.725\n&gt;&gt; And there is a real risk here that\nif we misconfigured something and we,\n\n315\n00:16:40.725 --> 00:16:44.880\nlet's say we just took all our users and\nchucked them into that group and\n\n316\n00:16:44.880 --> 00:16:48.530\nmaybe we accidentally had it where it\nrequired Hello to be configured and\n\n317\n00:16:48.530 --> 00:16:50.140\nthey hadn't actually configured it yet.\n\n318\n00:16:50.140 --> 00:16:51.900\nWe could potentially lock people out,\nright?\n\n319\n00:16:51.900 --> 00:16:54.910\n&gt;&gt; Yeah,\nwe could potentially lock people out but\n\n320\n00:16:54.910 --> 00:16:58.000\nmore importantly is that now we\nhave this big monstrous amount\n\n321\n00:16:58.000 --> 00:17:01.150\nof users that we have to go back and\nactually try to fix.\n\n322\n00:17:01.150 --> 00:17:04.016\nWe wanna keep that really\nscoped as much as possible.\n\n323\n00:17:04.016 --> 00:17:06.640\nAnd that way also understand is that\n\n324\n00:17:06.640 --> 00:17:09.100\nyou're changing that bunch\nof user behavior patterns so\n\n325\n00:17:09.100 --> 00:17:11.670\na lot of times there may be some\ntraining that you'll have to do.\n\n326\n00:17:11.670 --> 00:17:12.920\nPut those users through to say,\n\n327\n00:17:12.920 --> 00:17:15.540\nhey, here's the new way\nthat we're gonna sign in.\n\n328\n00:17:15.540 --> 00:17:21.155\nAnd so there's no wrong way to this, each\nenvironment's gonna have the way to do it,\n\n329\n00:17:21.155 --> 00:17:24.615\nI'm just giving you a couple of\nideas how I like to approach things,\n\n330\n00:17:24.615 --> 00:17:28.065\nis I like to do things in small batches,\nand make sure that they work.\n\n331\n00:17:28.065 --> 00:17:32.525\nUsually after the third or fourth batch,\nit's pretty much gonna work like clock\n\n332\n00:17:32.525 --> 00:17:36.515\nwork but it gives you a good point to\nwhere you can troubleshoot where you know\n\n333\n00:17:36.515 --> 00:17:39.435\nbatches one through three were great,\nbatches four didn't work, right.\n\n334\n00:17:39.435 --> 00:17:42.015\nLet's look at what changed\nbetween three and four.\n\n335\n00:17:42.015 --> 00:17:46.470\nSo, what I'm gonna do here is before we\nset up this directory synchronization,\n\n336\n00:17:46.470 --> 00:17:50.110\nI'm gonna go ahead and create\na Pilot Windows Flow for Business group.\n\n337\n00:17:50.110 --> 00:17:53.890\nAnd this is just normal group membership,\nit's gonna be a security group here.\n\n338\n00:17:53.890 --> 00:18:00.580\nAnd I'm gonna call it, like I said,\nPilot Windows Flow for Business Users.\n\n339\n00:18:00.580 --> 00:18:03.698\nAnd this is where I'm only gonna put\nme and Don will be in this group or\n\n340\n00:18:03.698 --> 00:18:05.130\nwhoever will be in this group.\n\n341\n00:18:05.130 --> 00:18:08.630\nThis is me, let's try it out for\na few people and\n\n342\n00:18:08.630 --> 00:18:10.950\ndo some user acceptance\ntesting to make sure it works.\n\n343\n00:18:10.950 --> 00:18:14.260\nBecause, while if you think\nof the information worker,\n\n344\n00:18:14.260 --> 00:18:17.820\nthat could be somebody in accounting or\nHR to where they generally come in,\n\n345\n00:18:17.820 --> 00:18:19.240\nthey do their job and they go home.\n\n346\n00:18:19.240 --> 00:18:22.330\nThey're very stationary whereas if you\nlook at sales guy who might be mobile\n\n347\n00:18:22.330 --> 00:18:26.510\na lot, might need to do some different\nconfigurations for the mobile user than\n\n348\n00:18:26.510 --> 00:18:29.390\nthe person who actually comes\ninto the office all the time.\n\n349\n00:18:29.390 --> 00:18:33.900\nSo we have that group there created,\nand we can see it right there.\n\n350\n00:18:33.900 --> 00:18:38.510\nAnd now I have a test user that\nI'm going to use, and this\n\n351\n00:18:38.510 --> 00:18:43.060\nuser is actually in the human resources\nOU that I created, this Kim Acres.\n\n352\n00:18:43.060 --> 00:18:44.230\nSo I'm gonna go back and\n\n353\n00:18:44.230 --> 00:18:48.850\nI'm gonna actually add Pilot,\nwhere's my Pilot group here?\n\n354\n00:18:51.150 --> 00:18:52.800\nYeah, where did it go?\n\n355\n00:18:52.800 --> 00:18:54.565\nWell, we'll do it from\nthe user account here.\n\n356\n00:18:54.565 --> 00:18:57.574\nSo, we'll go to Kim Acres and in here,\n\n357\n00:18:57.574 --> 00:19:02.683\nI am then gonna put into her,\nmember of and I will add the Pilot, and\n\n358\n00:19:02.683 --> 00:19:08.640\nI should just be able to just do Pilot\nthere and it should be able to find it.\n\n359\n00:19:08.640 --> 00:19:12.830\nSo now I've had Pilot for Windows Flow for\nBusiness, and I'm gonna add her to that\n\n360\n00:19:12.830 --> 00:19:16.900\ngroup because this is the user that I'm\ngonna test this particular thing out on.\n\n361\n00:19:16.900 --> 00:19:19.300\nAnd so we've got that.\n\n362\n00:19:19.300 --> 00:19:20.110\nWe've got a group.\n\n363\n00:19:20.110 --> 00:19:21.800\nWe've got a user, great.\n\n364\n00:19:21.800 --> 00:19:27.090\nNow what we wanna do is we wanna go back\nover to the MFA Server where I was before\n\n365\n00:19:27.090 --> 00:19:30.430\nand using this directory synchronization\nand what we're gonna do is\n\n366\n00:19:30.430 --> 00:19:34.020\nit's already said to use Active Directory,\nthat's the way it comes up by default.\n\n367\n00:19:34.020 --> 00:19:37.790\nBut the goods news is if you use\nother LDAP compatible directories,\n\n368\n00:19:37.790 --> 00:19:42.175\nyou can use those here just as well and\nit works perfectly fine with there.\n\n369\n00:19:42.175 --> 00:19:46.320\nThere's some filtering that you can do of\nwhich particular attributes you're going\n\n370\n00:19:46.320 --> 00:19:50.440\nto bring in, how you're gonna find your\nuser accounts and so forth like that and\n\n371\n00:19:50.440 --> 00:19:55.120\nthen you can make a list of the attributes\nthat are brought in, as well.\n\n372\n00:19:55.120 --> 00:19:58.140\nI'm more interested in\nthe synchronization part here.\n\n373\n00:19:58.140 --> 00:20:01.935\nAnd what this does is this\nallows us to be as aggressive or\n\n374\n00:20:01.935 --> 00:20:05.120\nnon-aggressive, if we want,\nas the synchronization.\n\n375\n00:20:05.120 --> 00:20:08.130\nTypically, user accounts\ndon't change that often.\n\n376\n00:20:08.130 --> 00:20:12.750\nSo we don't necessarily need to make it\na very aggressive synchronization pattern.\n\n377\n00:20:12.750 --> 00:20:14.710\nSo I'm gonna enable this and\n\n378\n00:20:14.710 --> 00:20:18.070\nI'm just gonna put my\nsynchronization down to 12 hours.\n\n379\n00:20:19.280 --> 00:20:19.930\nThat's there.\n\n380\n00:20:19.930 --> 00:20:23.810\nAnd then I'm gonna also say remove users\nwho are no longer in Active Directory.\n\n381\n00:20:23.810 --> 00:20:25.900\nThis is just some good maintenance here.\n\n382\n00:20:25.900 --> 00:20:30.280\nBecause if I have removed the user from\nActive Directory typically that's because\n\n383\n00:20:30.280 --> 00:20:35.330\nthey have left the company or for whatever\nreason they are just not there anymore.\n\n384\n00:20:35.330 --> 00:20:37.497\nThe typical way people will do this is for\n\n385\n00:20:37.497 --> 00:20:41.580\nsometime after that user has left\nthe company that account gets disabled and\n\n386\n00:20:41.580 --> 00:20:45.880\nit stays there for a little bit while they\ndo some paperwork wrap up and so forth.\n\n387\n00:20:45.880 --> 00:20:49.020\nBut eventually that account\nwill move from disabled\n\n388\n00:20:49.020 --> 00:20:52.350\nto where it'll actually get deleted\nfrom the actual Active Directory.\n\n389\n00:20:52.350 --> 00:20:55.300\nAnd when that happens,\nthis synchronization method makes it to\n\n390\n00:20:55.300 --> 00:20:57.999\nwhere you don't have to come back here and\nactually remove that user there.\n\n391\n00:20:59.215 --> 00:21:02.360\nNow, this always perform\na full synchronization\n\n392\n00:21:02.360 --> 00:21:06.670\nthat is a critical thing that we need\nhave a small conversation about.\n\n393\n00:21:06.670 --> 00:21:10.490\nThe full synchronization is what\nyou're gonna use most of the time and\n\n394\n00:21:10.490 --> 00:21:16.050\nthe reason why it's this, there is\na protocol in LDAP that you can use called\n\n395\n00:21:16.050 --> 00:21:22.080\na DirSync protocol, where basically you\ncan only get the deltas of what changed.\n\n396\n00:21:22.080 --> 00:21:25.668\nSo I don't wanna get everything,\nI don't wanna resync all of my users.\n\n397\n00:21:25.668 --> 00:21:29.540\nI have a kind of an up-to-date vector or\nfreshness,\n\n398\n00:21:29.540 --> 00:21:33.990\nI know I've gotten all these users at one\npoint, and now just send me the changes.\n\n399\n00:21:33.990 --> 00:21:36.950\nAnd that's a great idea,\nit's very good for performance.\n\n400\n00:21:36.950 --> 00:21:42.000\nBut the problem with that is is\nthat to use that feature requires\n\n401\n00:21:42.000 --> 00:21:46.660\ngiving people the permission to actually\ndo Active Directory replication.\n\n402\n00:21:46.660 --> 00:21:48.540\nAnd that's kind of a big no-no.\n\n403\n00:21:48.540 --> 00:21:51.110\nThat's an exploit that\na lot of people try to use,\n\n404\n00:21:51.110 --> 00:21:55.460\nbecause essentially you're allowed to\ntrigger Active Directory replication.\n\n405\n00:21:55.460 --> 00:21:58.510\nThat means you can receive\nall that replication data.\n\n406\n00:21:58.510 --> 00:22:00.710\nThat means you can receive\nall these credentials and\n\n407\n00:22:00.710 --> 00:22:03.480\nstuff that is in\nActive Directory kept hidden.\n\n408\n00:22:03.480 --> 00:22:07.272\nWe don't necessarily wanna add another\nuser into the environment that has that\n\n409\n00:22:07.272 --> 00:22:08.250\nability.\n\n410\n00:22:08.250 --> 00:22:11.750\nSo for that again I'm a security PMI,\n\n411\n00:22:11.750 --> 00:22:15.200\nmore conscious about security than\nI am for performance and these days\n\n412\n00:22:15.200 --> 00:22:18.430\nmost of the servers out there are gonna\nbe able to handle this just fine.\n\n413\n00:22:18.430 --> 00:22:21.140\nSo I'm always gonna do\na full synchronization so\n\n414\n00:22:21.140 --> 00:22:25.760\nI don't have to give that service account\nor this computer any more permissions than\n\n415\n00:22:25.760 --> 00:22:30.140\nwhat it absolutely\nnecessarily has to have.\n\n416\n00:22:30.140 --> 00:22:34.350\nAnd then we have this require\nadministrator approval when disabled or\n\n417\n00:22:34.350 --> 00:22:37.595\nremove users exceeds a certain threshold.\n\n418\n00:22:37.595 --> 00:22:44.035\nSo this is if somebody on accident all\nof a sudden hit delete on 30,000 users,\n\n419\n00:22:44.035 --> 00:22:49.325\nyou at least won't have to break\nout the backups for 29,995 of them.\n\n420\n00:22:49.325 --> 00:22:54.875\nBut five of them will go away and\nthen at that point it's going to stop and\n\n421\n00:22:54.875 --> 00:22:59.320\nneed an admin to say okay, let's make\nsure that this is a legitimate one.\n\n422\n00:22:59.320 --> 00:23:02.520\nNow, what we wanna do here is we wanna\ncreate a synchronization item and\n\n423\n00:23:02.520 --> 00:23:07.110\nthis is how you're gonna synchronize\nyour users in and out of the MFA server.\n\n424\n00:23:07.110 --> 00:23:09.210\nSo, we bring in the synchronization item.\n\n425\n00:23:09.210 --> 00:23:14.610\nYou can see here, we have this nice UI\nwhere it has our domain, we have a list.\n\n426\n00:23:14.610 --> 00:23:17.740\nAnd in here we have all these different\nfeatures that we can turn on.\n\n427\n00:23:17.740 --> 00:23:21.050\nThe first thing that we wanna look at is\nwe don't wanna do container hierarchy,\n\n428\n00:23:21.050 --> 00:23:23.010\nwe wanna do it by a security group.\n\n429\n00:23:23.010 --> 00:23:25.340\nAnd when we change to that\nsecurity group you're gonna see,\n\n430\n00:23:25.340 --> 00:23:28.380\nnow all of a sudden it has all\nthese lists of groups here.\n\n431\n00:23:28.380 --> 00:23:32.980\nAnd the one that we're interested in is\nwe don't want to check this guy, right?\n\n432\n00:23:32.980 --> 00:23:36.756\nThat's the guy that's gonna have everybody\nbut that one is where we're gonna tie\n\n433\n00:23:36.756 --> 00:23:39.009\neverybody to be actually\nenabled in provision.\n\n434\n00:23:39.009 --> 00:23:43.819\nSo what we want to do, is we want to pick\nout that Windows Hello, that piloted group\n\n435\n00:23:43.819 --> 00:23:47.680\nthat we have and as you can see it\ncan see that Kim Acres is in there.\n\n436\n00:23:47.680 --> 00:23:52.783\nNow what we're doing is we're setting\nup An item that is going to be used and\n\n437\n00:23:52.783 --> 00:23:57.643\nrepeated every 12 hours based on what\nthis criteria we provide in this\n\n438\n00:23:57.643 --> 00:24:00.240\nactual synchronization item.\n\n439\n00:24:00.240 --> 00:24:03.280\nThat's what's gonna get synchronized or\npulled out of Active Directory\n\n440\n00:24:03.280 --> 00:24:07.090\ninto the MFA server, and\nit's gonna happen on a 12-hour cycle.\n\n441\n00:24:07.090 --> 00:24:10.575\nSo, if we look here we can also\ndo all sorts of filtering.\n\n442\n00:24:10.575 --> 00:24:14.997\nWe can say, selective a security groups\nwhere we can do crossover now corrosive,\n\n443\n00:24:14.997 --> 00:24:17.431\nand this one now we don't need corrosive,\nso\n\n444\n00:24:17.431 --> 00:24:20.271\nwe can just actually say\njust do the security group.\n\n445\n00:24:20.271 --> 00:24:25.221\nNow here's where we can say add new\nusers so we can add only new use or\n\n446\n00:24:25.221 --> 00:24:31.075\nwe can say add existing users, since\nwe are creating a synchronization item.\n\n447\n00:24:31.075 --> 00:24:33.654\nWe really wanna go ahead and\nsay, let's go ahead and\n\n448\n00:24:33.654 --> 00:24:37.403\nupdate these users because in an ideal\nscenario, you'll have a way to where\n\n449\n00:24:37.403 --> 00:24:41.329\nif the user's phone number's changed,\nthat user can go to Active Directory,\n\n450\n00:24:41.329 --> 00:24:44.870\nlet them change their phone number there,\nand then let that sync back.\n\n451\n00:24:45.870 --> 00:24:49.920\nHaving that kind of process can give\nyou an advantage there that you\n\n452\n00:24:49.920 --> 00:24:54.320\ncan't just change it directly\ninside the MFA server, although,\n\n453\n00:24:54.320 --> 00:24:58.890\nkeep in mind if you do let users change\ntheir phone number in the MFA server.\n\n454\n00:24:58.890 --> 00:25:02.430\nYou don't wanna check this box cuz what'll\nhappen is it'll need to keep changing it\n\n455\n00:25:02.430 --> 00:25:04.170\nover and\nover again cuz it'll get overwritten.\n\n456\n00:25:05.640 --> 00:25:07.580\nNow this is a good one,\nthis is like disable or\n\n457\n00:25:07.580 --> 00:25:09.750\nremove users when no longer a member.\n\n458\n00:25:09.750 --> 00:25:14.600\nI check this one, and then what I do\nis It'll actually just disable them,\n\n459\n00:25:14.600 --> 00:25:16.680\nso it doesn't really\ndelete them out of there.\n\n460\n00:25:16.680 --> 00:25:20.450\nYou can have your choice of whichever\nyou want, you can have them disabled or\n\n461\n00:25:20.450 --> 00:25:25.430\nyou can have them removed, this is\npurely just a administrator choice.\n\n462\n00:25:25.430 --> 00:25:28.020\nIn the import phone number,\nwe want the mobile phone,\n\n463\n00:25:28.020 --> 00:25:31.880\nthat's typically what we're gonna go after\nhere, you can choose a backup phone.\n\n464\n00:25:31.880 --> 00:25:37.290\nIf you try, if you select the option to do\nstandard that can do a regular voice call,\n\n465\n00:25:37.290 --> 00:25:39.810\nand then you could type\nin a pin over the phone.\n\n466\n00:25:39.810 --> 00:25:42.190\nSo you could actually use\nlike their work phone.\n\n467\n00:25:42.190 --> 00:25:45.870\nYou could use their work phone to\nactually have a backup one, so\n\n468\n00:25:45.870 --> 00:25:51.150\nthat way you can go to their mobile first\nwhich gives you that texting ability,\n\n469\n00:25:51.150 --> 00:25:53.830\nor you can just do the voice\none if you prefer.\n\n470\n00:25:53.830 --> 00:25:57.600\nAnd then, what is we want\nall the users to be enabled,\n\n471\n00:25:57.600 --> 00:26:01.240\nbut only those that have a phone number,\nright?\n\n472\n00:26:01.240 --> 00:26:02.441\nYour users have a phone number.\n\n473\n00:26:02.441 --> 00:26:05.211\nIf we import a user that\ndoesn't have a phone number,\n\n474\n00:26:05.211 --> 00:26:08.919\ndoesn't really help us out much because\nwe have no way to contact them.\n\n475\n00:26:08.919 --> 00:26:12.100\nAnd then send email to only new users.\n\n476\n00:26:12.100 --> 00:26:15.650\nI change this down to new users and\nupdated ones.\n\n477\n00:26:15.650 --> 00:26:20.740\nSo, we have all of our\nconfiguration items set.\n\n478\n00:26:20.740 --> 00:26:22.270\nWe're gonna, and I'll show you those here.\n\n479\n00:26:22.270 --> 00:26:25.660\nYou can say for new users, all,\nwe just want one for the phone number.\n\n480\n00:26:25.660 --> 00:26:27.910\nSo we're ready to go,\nwe have everybody set here.\n\n481\n00:26:27.910 --> 00:26:29.960\nWe're gonna go ahead and hit Add here.\n\n482\n00:26:29.960 --> 00:26:32.850\nAnd then,\nthis synchronization item is complete.\n\n483\n00:26:32.850 --> 00:26:36.690\nAnd then, if we close you'll see that\nwe now have a synchronization item,\n\n484\n00:26:36.690 --> 00:26:39.450\nit gives us a nice little summary of\neverything that's going on there.\n\n485\n00:26:41.030 --> 00:26:44.680\nSo, we have our synchronization item done.\n\n486\n00:26:44.680 --> 00:26:47.780\nWe're ready to go with that,\nwe've added our user to our group.\n\n487\n00:26:47.780 --> 00:26:49.960\nAnd then,\nnow before you move off this page,\n\n488\n00:26:49.960 --> 00:26:52.010\nit's gonna want you to\ndo is synchronization.\n\n489\n00:26:52.010 --> 00:26:55.570\nSo if I just go back to the company\nsettings is gonna say hey, Mike,\n\n490\n00:26:55.570 --> 00:26:57.370\nyou need to go ahead and\ndo synchronization.\n\n491\n00:26:57.370 --> 00:27:02.320\nSo, I'll say yes to that and\na full synchronization process.\n\n492\n00:27:02.320 --> 00:27:05.370\nThis is where it's telling\nyou what log you can look at.\n\n493\n00:27:05.370 --> 00:27:08.170\nAnd telling you that you did do\na full synchronization process.\n\n494\n00:27:09.440 --> 00:27:12.020\nTotally expected to see this\nwhen you do a replication.\n\n495\n00:27:12.020 --> 00:27:13.850\nSo, we're doing fine there.\n\n496\n00:27:13.850 --> 00:27:19.490\nAnd if go to my users, you can now see\nthat I have Kim Acres in here ready to go.\n\n497\n00:27:19.490 --> 00:27:22.040\nAnd so, now Kim is actually enrolled.\n\n498\n00:27:22.040 --> 00:27:24.970\nAnd then what happened is because\nwe setup our email settings and\n\n499\n00:27:24.970 --> 00:27:28.280\neverything else like that,\nKim actually got an email there.\n\n500\n00:27:28.280 --> 00:27:30.260\nSo we forced our synchronization.\n\n501\n00:27:30.260 --> 00:27:35.100\nNow, we need to do validate,\nmake sure that this thing works.\n\n502\n00:27:35.100 --> 00:27:41.730\nSo, what we're gonna do is, I'm gonna\ngive Don a cell phone that I have here.\n\n503\n00:27:41.730 --> 00:27:43.550\nAnd we have this cell phone here and\n\n504\n00:27:43.550 --> 00:27:47.290\nwe're gonna use my trusty little\nfingerprint to unlock it here.\n\n505\n00:27:47.290 --> 00:27:53.020\nAnd for the privacy concerns,\nwe're gonna stay off of the PC view here.\n\n506\n00:27:53.020 --> 00:27:54.620\nAnd I'm gonna go ahead and\n\n507\n00:27:54.620 --> 00:27:59.780\nedit the phone number on this user\naccount, to one of that phone.\n\n508\n00:27:59.780 --> 00:28:04.430\nAnd we wanna make sure, before we\nproceed anymore, that the user account.\n\n509\n00:28:05.670 --> 00:28:12.510\nThat are set up with Azure MFA Server\nis actually set up and ready to go.\n\n510\n00:28:12.510 --> 00:28:15.456\nSo I'm gonna go ahead and\napply this change to this user account,\n\n511\n00:28:15.456 --> 00:28:20.330\nand then close this.\n\n512\n00:28:20.330 --> 00:28:22.290\nAnd then, I'm gonna do a test.\n\n513\n00:28:22.290 --> 00:28:26.020\nNow, I can't show you this because\nit has some information we\n\n514\n00:28:26.020 --> 00:28:27.260\ncan't share with you on the screen, but\n\n515\n00:28:27.260 --> 00:28:30.930\nbasically what it's done is it comes\nup with a dialogue that says test user.\n\n516\n00:28:30.930 --> 00:28:34.470\nAnd it first makes me sign in with\nthe Active Directory password.\n\n517\n00:28:34.470 --> 00:28:37.190\nSo I'm gonna sign in with\nthe Active Directory password, and\n\n518\n00:28:37.190 --> 00:28:40.110\nthen the next thing I want\nto do is I'm gonna say test.\n\n519\n00:28:40.110 --> 00:28:44.320\nAnd then, what it's gonna do is it's gonna\nsend a text message to Don's phone here.\n\n520\n00:28:44.320 --> 00:28:48.310\nAnd we have the-\n&gt;&gt; [COUGH] I just got a text message.\n\n521\n00:28:48.310 --> 00:28:50.189\n&gt;&gt; Got a text message here, and so\n\n522\n00:28:50.189 --> 00:28:53.165\nnow it's saying we need\nto text the number back.\n\n523\n00:28:53.165 --> 00:28:56.618\nSo let's go ahead and\ntype that number back in.\n\n524\n00:28:56.618 --> 00:29:01.269\n&gt;&gt; All right, my texting skills are not\nat the same level as America's high\n\n525\n00:29:01.269 --> 00:29:04.176\nschool youth, but\n[CROSSTALK] I achieved it.\n\n526\n00:29:04.176 --> 00:29:04.972\n&gt;&gt; Yep, they got it.\n\n527\n00:29:04.972 --> 00:29:07.600\n&gt;&gt; [LAUGH]\n&gt;&gt; Wouldn't you know, I get now on my\n\n528\n00:29:07.600 --> 00:29:11.020\nmachine here, I have authentication\nsucceeded so we're ready to go.\n\n529\n00:29:11.020 --> 00:29:16.090\nSo now, Don, we've got everything setup,\nso now before we move to\n\n530\n00:29:16.090 --> 00:29:20.190\nthe next step like making sure we validate\nas much as we can before moving on.\n\n531\n00:29:20.190 --> 00:29:24.230\nWe validated that our server is\ntalking to Azure interface service and\n\n532\n00:29:24.230 --> 00:29:25.570\neverything's set up and ready to do.\n\n533\n00:29:25.570 --> 00:29:27.980\n&gt;&gt; Yeah, so\nthrough that simple test we saw,\n\n534\n00:29:27.980 --> 00:29:31.310\nnot only are we able to securitized with\nour directory, which happened really fast,\n\n535\n00:29:31.310 --> 00:29:33.475\nagain another advantage of\nhaving on premises this stuff.\n\n536\n00:29:33.475 --> 00:29:35.835\nBut that we were able to do the test\nall the way out to the phone and\n\n537\n00:29:35.835 --> 00:29:36.555\nthat's working too.\n\n538\n00:29:36.555 --> 00:29:38.045\nSo things are moving along pretty smooth.\n\n539\n00:29:38.045 --> 00:29:41.465\n&gt;&gt; That's great, but we have one more\nthing we wanna do here before we end this\n\n540\n00:29:41.465 --> 00:29:44.615\nparticular episode is just we wanna\nget that web SDK ready to go.\n\n541\n00:29:44.615 --> 00:29:48.485\nSo what we're gonna do is I'm\ngonna go ahead and switch.\n\n542\n00:29:48.485 --> 00:29:51.535\nNow I can show you my screen here,\nwe're ready to go and all this.\n\n543\n00:29:51.535 --> 00:29:55.245\nSo now, you can see where I've\nswitched to the web service SDK part.\n\n544\n00:29:56.290 --> 00:29:58.417\nThis is a really simple install here,\n\n545\n00:29:58.417 --> 00:30:00.880\nreally what I call paint\nby number install.\n\n546\n00:30:00.880 --> 00:30:04.780\nWe're gonna just sit there and click yes,\nthat we wanna install the web services SDK\n\n547\n00:30:04.780 --> 00:30:09.320\nand as you can see, it's popped up here\nwith the default website which you, yes,\n\n548\n00:30:09.320 --> 00:30:11.010\nwe wanna use the default website.\n\n549\n00:30:11.010 --> 00:30:13.750\nIt's gonna have this\nling virtual directory.\n\n550\n00:30:13.750 --> 00:30:16.560\nThis isn't a directory that's\ngonna be typed by any user.\n\n551\n00:30:16.560 --> 00:30:22.400\nThis is what's gonna be stuck inside\nthose lovely asp.net config files.\n\n552\n00:30:22.400 --> 00:30:26.480\nSo, I leave this just the way it\nis because all of those config\n\n553\n00:30:26.480 --> 00:30:30.000\nfiles that are gonna get deployed\nalready have this already in it, so\n\n554\n00:30:30.000 --> 00:30:34.720\nI like to type as less as possible because\nI have fat finger syndrome big time.\n\n555\n00:30:34.720 --> 00:30:36.460\nSo, we're gonna use the default app pool.\n\n556\n00:30:36.460 --> 00:30:39.260\nThere are better ways,\nwe shouldn't say better way, but you can,\n\n557\n00:30:39.260 --> 00:30:43.110\nif you're an IS expert and\nyou know how to further secure this down.\n\n558\n00:30:43.110 --> 00:30:46.930\nYou can do these, these are relatively\nsafe settings as they are.\n\n559\n00:30:46.930 --> 00:30:51.640\nSo we're gonna hit Next to do that, and\nit's just gonna say okay, it's done.\n\n560\n00:30:51.640 --> 00:30:55.470\nBut then it says hey, make sure\nyou've updated your .NET Framework,\n\n561\n00:30:55.470 --> 00:30:57.930\nwhich we've done several\ntimes today already.\n\n562\n00:30:57.930 --> 00:31:00.060\nSo, that's ready to go and\n\n563\n00:31:00.060 --> 00:31:06.690\njust to show you where that gets put if\nwe go into our program files, wrong one.\n\n564\n00:31:06.690 --> 00:31:07.460\nLet's go here.\n\n565\n00:31:07.460 --> 00:31:11.020\nYou'll see where multi-factor\nauthentication services there.\n\n566\n00:31:11.020 --> 00:31:16.500\nBut more importantly,\nthe web SDK was put right here.\n\n567\n00:31:16.500 --> 00:31:20.110\nSo, now we've got everything ready to go,\nwe know our server's ready to go.\n\n568\n00:31:20.110 --> 00:31:22.740\nWe know we're communicating\nwith the Azure service.\n\n569\n00:31:22.740 --> 00:31:26.110\nAnd now we have our web\nservices SDK installed.\n\n570\n00:31:26.110 --> 00:31:27.220\n&gt;&gt; And at this point,\n\n571\n00:31:27.220 --> 00:31:29.740\nwe know everything is working from\nan administrative standpoint, right?\n\n572\n00:31:29.740 --> 00:31:31.220\nWe were able to log in and see it.\n\n573\n00:31:31.220 --> 00:31:35.410\nBut it's not necessarily working\nfrom an end users standpoint, right?\n\n574\n00:31:35.410 --> 00:31:38.340\nAnd we certainly don't wanna get\ninvolved every time when you do\n\n575\n00:31:38.340 --> 00:31:39.180\nenrolling in new users.\n\n576\n00:31:39.180 --> 00:31:43.590\nThe next step for us is gonna be actually\nconfiguring the web user portal, right,\n\n577\n00:31:43.590 --> 00:31:46.640\nfor them to be able to jump in and\nself manage.\n\n578\n00:31:46.640 --> 00:31:49.890\n&gt;&gt; Yeah, so we're gonna configure\nthe actual web services SDK.\n\n579\n00:31:49.890 --> 00:31:53.720\nWe're gonna do that and\nthen we're gonna do the user portal,\n\n580\n00:31:53.720 --> 00:31:55.870\nmaking sure that we have\nall those things set up.\n\n581\n00:31:55.870 --> 00:31:58.280\n&gt;&gt; All right, but we definitely don't\nhave time for that here in this episode.\n\n582\n00:31:58.280 --> 00:32:00.860\nSo stay tuned as that will be\ncoming up in the next episode.\n\n583\n00:32:00.860 --> 00:32:03.940\nBut for right now it's a pretty\ngood spot for us to wrap up.\n\n584\n00:32:03.940 --> 00:32:07.000\nDid you have anything else you wanted\nto chime in with before we wrapped it?\n\n585\n00:32:07.000 --> 00:32:09.293\n&gt;&gt; Other than I thought your\ntexting skills were top notch.\n\n586\n00:32:09.293 --> 00:32:11.000\n&gt;&gt; Yeah, you know, I try.\n\n587\n00:32:11.000 --> 00:32:12.037\nThat and Twitter, right?\n\n588\n00:32:12.037 --> 00:32:12.636\n&gt;&gt; Yep.\n\n589\n00:32:12.636 --> 00:32:14.976\n&gt;&gt; I Twitter rate all the time,\nthat's great.\n\n590\n00:32:14.976 --> 00:32:17.059\n[LAUGH] All right, ladies and gentlemen,\n\n591\n00:32:17.059 --> 00:32:19.330\nwe'll stop before I do\nanything worse here.\n\n592\n00:32:19.330 --> 00:32:20.650\nSo we'll wrap it up here.\n\n593\n00:32:20.650 --> 00:32:23.560\nSigning off for ITProTV,\nI'm your host, Don Pezet.\n\n594\n00:32:23.560 --> 00:32:24.620\n&gt;&gt; And I'm Mike Stephens.\n\n595\n00:32:24.620 --> 00:32:27.223\n&gt;&gt; And we will see you next time.\n\n596\n00:32:27.223 --> 00:32:32.941\n[MUSIC]\n\n597\n00:32:32.941 --> 00:32:36.114\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "216669497"
        },
        {
          "description": "In this episode, Don and Mike walk the viewers through the process of installing and configuring the Azure MFA user portal. Mike demonstrates how to create a user portal configuration file and creates the appropriate DNS records to support the portal.",
          "length": "1327",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-9-installing_the_user_portal-050517.00_26_33_04.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-9-installing_the_user_portal-050517.00_26_33_04.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-9-installing_the_user_portal-050517.00_26_33_04.Still001-sm.jpg",
          "title": "Installing the User Portal",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:02.287\nWelcome to ITProTV,\nI'm your host, Don Pezet.\n\n2\n00:00:02.287 --> 00:00:08.232\n[CROSSTALK]\n\n3\n00:00:08.232 --> 00:00:12.591\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.591 --> 00:00:14.230\n&gt;&gt; All right, ladies and gentlemen,\n\n5\n00:00:14.230 --> 00:00:16.311\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:16.311 --> 00:00:20.328\nI'm your host, Don Pezet, back again with\nanother episode of Windows Hello for\n\n7\n00:00:20.328 --> 00:00:20.929\nBusiness.\n\n8\n00:00:20.929 --> 00:00:24.811\nAnd in this episode, we're gonna be taking\na look at installing the user portal.\n\n9\n00:00:24.811 --> 00:00:28.360\nNow if you remember in our last episode,\nwe had a chance to see installing the MFA\n\n10\n00:00:28.360 --> 00:00:32.010\nserver, which is the real muscle\nbehind the, well the MFA piece,\n\n11\n00:00:32.010 --> 00:00:33.086\nthat's the name of the MFA server.\n\n12\n00:00:33.086 --> 00:00:35.979\nBut the user portal is equally important,\nbecause we need a way for\n\n13\n00:00:35.979 --> 00:00:37.477\nour end users to interact with us,\n\n14\n00:00:37.477 --> 00:00:40.488\nto be able to set up multifactor\nauthentication for their accounts.\n\n15\n00:00:40.488 --> 00:00:42.743\nAnd to help show us how that's done,\nwe've got Mr.\n\n16\n00:00:42.743 --> 00:00:46.210\nMike Stevens back in the studio with\nus again, thanks for joining us, Mike.\n\n17\n00:00:46.210 --> 00:00:48.440\n&gt;&gt; Thanks for having me,\nDon, having a good time?\n\n18\n00:00:48.440 --> 00:00:52.290\n&gt;&gt; Yeah, it's been quite the ride and\nI was really impressed with you.\n\n19\n00:00:52.290 --> 00:00:53.340\nAt the end of the last episode,\n\n20\n00:00:53.340 --> 00:00:57.680\nwe were able to successfully send the text\nmessage with the code and respond back.\n\n21\n00:00:57.680 --> 00:01:02.530\nSo we know that the kind of hard\nwork behind the scenes is done,\n\n22\n00:01:02.530 --> 00:01:05.690\nbut we really had to set up for\nadministrative access, right?\n\n23\n00:01:05.690 --> 00:01:07.750\nAs administrators,\nwe were able to test that, but for\n\n24\n00:01:07.750 --> 00:01:10.040\nour end users, that's not how\nthey interact with it, right?\n\n25\n00:01:10.040 --> 00:01:12.300\n&gt;&gt; No, that's not they\ninteract with it at all, Don.\n\n26\n00:01:12.300 --> 00:01:15.600\nWhat we're gonna do today is we're gonna\ninto the user portal settings, and we're\n\n27\n00:01:15.600 --> 00:01:20.240\ngonna actually show the configuration on\nthat MFA server, remember in the last\n\n28\n00:01:20.240 --> 00:01:25.450\nepisode, I told you that basically all the\nconfiguration is done on the MFA server.\n\n29\n00:01:25.450 --> 00:01:29.100\nSo even though we have that user\nportal sitting on another server,\n\n30\n00:01:29.100 --> 00:01:32.030\nwe still configure it through\nthe actual MFA server itself.\n\n31\n00:01:32.030 --> 00:01:36.370\nSo, we're gonna do that, and then we're\ngonna install the user portal server.\n\n32\n00:01:36.370 --> 00:01:39.390\nAnd then we're gonna get some\ndownloads from some runtimes, and\n\n33\n00:01:39.390 --> 00:01:42.230\nwe'll do a little note padding\nto get that web server,\n\n34\n00:01:42.230 --> 00:01:46.680\nthat web user back to\ncommunicating to the actual\n\n35\n00:01:46.680 --> 00:01:51.350\nMFA server using that webservices SDK\nserver that we set up earlier today.\n\n36\n00:01:51.350 --> 00:01:55.901\nSo the first thing of action we wanna do\nis we wanna go to the MFA server where we\n\n37\n00:01:55.901 --> 00:02:00.168\nwere doing the install, and if you\nlook here, I am at my MFA server, and\n\n38\n00:02:00.168 --> 00:02:02.618\nI am on the actual user portal settings.\n\n39\n00:02:02.618 --> 00:02:06.477\nAnd that user portal settings is where\nwe're going to go, is right over here,\n\n40\n00:02:06.477 --> 00:02:08.239\nif you just look where my cursor is.\n\n41\n00:02:08.239 --> 00:02:11.812\nAnd this is where we're gonna set up\nthe initial stuff for the user portal.\n\n42\n00:02:11.812 --> 00:02:15.456\nNow, the word of caution is don't\nclick this Install User Portal button.\n\n43\n00:02:15.456 --> 00:02:19.125\nAs Don and I talked about earlier,\nyou can, and in a lab,\n\n44\n00:02:19.125 --> 00:02:21.680\nthis is probably perfectly fine.\n\n45\n00:02:21.680 --> 00:02:24.880\nBut in a real world environment you\nreally don't want to put your user portal\n\n46\n00:02:24.880 --> 00:02:29.080\non the actual MFA server,\nwe wanna have that separation of roles.\n\n47\n00:02:29.080 --> 00:02:33.490\nSo, that way this is gonna be a potential\nattack vector, it's a website, so\n\n48\n00:02:33.490 --> 00:02:35.290\nwe want users coming in to that website.\n\n49\n00:02:35.290 --> 00:02:37.790\nWe don't wanna have any of\nthat configuration data\n\n50\n00:02:37.790 --> 00:02:40.310\nsitting on that website,\nit needs to be a hop away.\n\n51\n00:02:40.310 --> 00:02:43.380\nSo let's avoid that one,\nnow what we really wanna do is,\n\n52\n00:02:43.380 --> 00:02:48.960\nis you need to put in your URL that\nyou're gonna use for your user portal.\n\n53\n00:02:48.960 --> 00:02:52.640\nMost of the times this is gonna be a load\nbalanced URL and you're gonna make sure\n\n54\n00:02:52.640 --> 00:02:56.090\nthat you have that actual DNS name\nset up and and so forth like that.\n\n55\n00:02:56.090 --> 00:02:58.460\nBut otherwise,\nmake sure that this is right,\n\n56\n00:02:58.460 --> 00:03:01.600\nalso make sure you put that\nhttps in there as well.\n\n57\n00:03:01.600 --> 00:03:05.420\nWhere this is used is, is we set up\nthat mail settings yesterday, or\n\n58\n00:03:05.420 --> 00:03:07.340\nin a previous episode.\n\n59\n00:03:07.340 --> 00:03:12.120\nAnd in that mail settings,\nit's gonna use this URL to\n\n60\n00:03:12.120 --> 00:03:16.220\ndirect users when they get that email\nsaying, hey, welcome to the MFA server.\n\n61\n00:03:16.220 --> 00:03:18.980\nWe wanna make sure that that's accurate so\nthat we don't send out an email, and\n\n62\n00:03:18.980 --> 00:03:20.420\nthey click on something that doesn't work.\n\n63\n00:03:21.790 --> 00:03:24.430\nPrimary authentication is\nalways gonna be the domain.\n\n64\n00:03:24.430 --> 00:03:28.890\nThis is making sure that I've actually\nauthenticated using that first factor\n\n65\n00:03:28.890 --> 00:03:31.090\nof using Kerberos in my password.\n\n66\n00:03:31.090 --> 00:03:34.440\nThen all of these other settings\nhere are gonna be different for\n\n67\n00:03:34.440 --> 00:03:38.370\nevery environment so you just need to\ntake a look at these, review the actual\n\n68\n00:03:38.370 --> 00:03:42.740\ndocumentation that comes with the server\nto find out which ones are good for you.\n\n69\n00:03:42.740 --> 00:03:46.090\nSome of the things here I wanna\ncall out is this phone call.\n\n70\n00:03:46.090 --> 00:03:51.010\nYou wanna make sure that under allow users\nto select method, that one is if you\n\n71\n00:03:51.010 --> 00:03:54.800\nwant the user to be able to switch between\ngo ahead and make sure you have that guy\n\n72\n00:03:54.800 --> 00:03:59.930\nchecked, and then make sure that down here\nis what methods are you going to allow.\n\n73\n00:03:59.930 --> 00:04:04.150\nAgain even though that we're setting up\na self servicing portal, we still have\n\n74\n00:04:04.150 --> 00:04:07.620\nthe administrative controls, the knobs if\nyou will, to make sure that these people\n\n75\n00:04:07.620 --> 00:04:10.560\ncan only select the things that we\ndeem appropriate for the environment.\n\n76\n00:04:10.560 --> 00:04:12.410\nSo that's a really good thing here.\n\n77\n00:04:12.410 --> 00:04:15.730\nOtherwise every one of these settings is\npretty much the way we're gonna do it,\n\n78\n00:04:15.730 --> 00:04:17.430\nleave it just as this.\n\n79\n00:04:17.430 --> 00:04:20.240\nThe next one we're gonna go\nto is the administrators one.\n\n80\n00:04:20.240 --> 00:04:26.800\nNow this is if you want to remotely\nadminister the user port on.\n\n81\n00:04:26.800 --> 00:04:31.050\nIn here if you recall in a couple of\nepisodes I added my lab admin account\n\n82\n00:04:31.050 --> 00:04:34.460\nas into that phone factors admin group.\n\n83\n00:04:34.460 --> 00:04:38.390\nSo what I wanna do here is just go\nthrough here and I can do a select user.\n\n84\n00:04:38.390 --> 00:04:42.845\nAnd I haven't added my admin account\nin here so what I would need to do,\n\n85\n00:04:42.845 --> 00:04:46.480\nis to actually to do that,\nis enroll that admin account.\n\n86\n00:04:46.480 --> 00:04:50.200\nBut this is the user interface you do to\nactually add all your administrators and\n\n87\n00:04:50.200 --> 00:04:50.984\nwhere you need to do that.\n\n88\n00:04:53.345 --> 00:04:57.035\nAnd then here are the permissions that you\ncan assign to all the different roles.\n\n89\n00:04:57.035 --> 00:05:00.325\nSo you can actually give\nusers different roles and\n\n90\n00:05:00.325 --> 00:05:04.520\ndifferent privileges of what they\ncan do within the actual MFA server.\n\n91\n00:05:04.520 --> 00:05:07.540\nSo the other things is\nthese security questions.\n\n92\n00:05:07.540 --> 00:05:13.600\nA lot of times, you may forget your PIN,\nif you're using PIN for the MFA server.\n\n93\n00:05:13.600 --> 00:05:16.830\nAnd you may need a way to have\nan alternative or a backup method,\n\n94\n00:05:16.830 --> 00:05:20.040\njust in case so you can get there and\nyou can sort of reset your PIN.\n\n95\n00:05:20.040 --> 00:05:20.660\nAnd what it is,\n\n96\n00:05:20.660 --> 00:05:24.300\nis you have all these security questions\nthat you can fill out right here.\n\n97\n00:05:24.300 --> 00:05:28.744\nThese security questions they go hand\nin hand with a setting over here,\n\n98\n00:05:28.744 --> 00:05:31.944\nwhich is the you security questions for\nfallback.\n\n99\n00:05:31.944 --> 00:05:35.261\nAnd it tells you how many questions they\nhave to answer correctly before you're\n\n100\n00:05:35.261 --> 00:05:36.360\ngonna let them fall back.\n\n101\n00:05:36.360 --> 00:05:39.631\nSo, if you're not happy with these\nquestions, you need to go ahead and\n\n102\n00:05:39.631 --> 00:05:41.548\nmake some other ones there if you want to.\n\n103\n00:05:41.548 --> 00:05:45.520\nBut this simply just a question that you\ndo and that data save on each user account\n\n104\n00:05:45.520 --> 00:05:48.682\nthat is incorporated to\nthe incorporated into the MFA server.\n\n105\n00:05:48.682 --> 00:05:52.787\nThe next thing I wanna show on\nthis screen is the trusted IPs.\n\n106\n00:05:52.787 --> 00:05:56.066\nA lot of times some administrators\nwould like say, hey,\n\n107\n00:05:56.066 --> 00:06:00.987\nif you're on the on-premises network and\nyou don't really need to worry about doing\n\n108\n00:06:00.987 --> 00:06:04.196\nall of this multi-factor just\nto get to the web server,\n\n109\n00:06:04.196 --> 00:06:06.270\nwe can put in a range of trusted IPs.\n\n110\n00:06:06.270 --> 00:06:08.930\nAnd I'll show this dialog here\nto give you this thing, so\n\n111\n00:06:08.930 --> 00:06:12.490\nyou can do a single IP, you can do\na IP range, or you can do a subnet.\n\n112\n00:06:12.490 --> 00:06:16.195\nBut basically, what happens here\nis when you go to the user portal,\n\n113\n00:06:16.195 --> 00:06:19.315\nit can tell whether you're on\nthese trusted IP ranges and\n\n114\n00:06:19.315 --> 00:06:22.240\nit'll just actually sign you\ninto the user portal and\n\n115\n00:06:22.240 --> 00:06:26.293\nnot have a little less user friction\nwhen you wanna go in there and do that.\n\n116\n00:06:26.293 --> 00:06:29.557\nSo those are the main settings that\nwe really need to pay attention to\n\n117\n00:06:29.557 --> 00:06:32.951\nwhen we're wanting to go ahead and\nconfigure the actual user portal.\n\n118\n00:06:32.951 --> 00:06:36.551\nAgain, self-servicing portal which you're\ngonna have all the controls you need to\n\n119\n00:06:36.551 --> 00:06:38.505\nmake sure that you have that.\n\n120\n00:06:38.505 --> 00:06:40.777\nSo, we're done configuring\nour user portal.\n\n121\n00:06:40.777 --> 00:06:42.935\nNow, let's go ahead and install that.\n\n122\n00:06:42.935 --> 00:06:46.935\nAnd to do that, I need to hop over on\nto my applications server that I have,\n\n123\n00:06:46.935 --> 00:06:49.030\nand this is my user portal server.\n\n124\n00:06:49.030 --> 00:06:51.530\nThis is where I'm gonna go ahead and\ninstall the user portal.\n\n125\n00:06:51.530 --> 00:06:54.710\nNow, if you look up at this top bar here,\nI have actually connected\n\n126\n00:06:54.710 --> 00:06:58.580\nremotely to the MFA server through\nthe administrative share and\n\n127\n00:06:58.580 --> 00:07:01.690\ninto the program files to where\nwe have this multifactor server.\n\n128\n00:07:03.040 --> 00:07:09.350\nIf I dig deep into this folder here,\nwe can see all of these folders here.\n\n129\n00:07:09.350 --> 00:07:12.680\nAnd we're not really care, but we want\nto get back down to these EXCs here.\n\n130\n00:07:12.680 --> 00:07:14.539\nAnd what we're really looking for\n\n131\n00:07:14.539 --> 00:07:18.008\nis this multi-factor authentication\nuser portal setup 64.\n\n132\n00:07:18.008 --> 00:07:19.900\nWe want to go ahead and use that guy.\n\n133\n00:07:19.900 --> 00:07:22.600\nSo I'm just going to copy that guy here,\nand\n\n134\n00:07:22.600 --> 00:07:26.540\nwe're going to save it into our downloads,\nput it right here.\n\n135\n00:07:26.540 --> 00:07:28.680\nNow I wanna go ahead and run this app,\n\n136\n00:07:28.680 --> 00:07:31.440\nand we're gonna install\nthe actual user portal.\n\n137\n00:07:31.440 --> 00:07:33.280\nSo let's go ahead and run as elevated.\n\n138\n00:07:35.340 --> 00:07:38.730\nAnd now, here's a little quirk with this\nsetup here, and we'll walk you through\n\n139\n00:07:38.730 --> 00:07:42.330\nthis really quick, is this user\nportal requires the C++ runtimes.\n\n140\n00:07:42.330 --> 00:07:44.400\nAnd it says do you wanna download this.\n\n141\n00:07:44.400 --> 00:07:45.890\n&gt;&gt; Now, Mike,\nI know this is a lab environment,\n\n142\n00:07:45.890 --> 00:07:48.223\nbut in a production environment,\nobviously, we wouldn't wanna go and\n\n143\n00:07:48.223 --> 00:07:49.576\nbrowse the Internet and download files.\n\n144\n00:07:49.576 --> 00:07:51.508\nEven if it is from Microsoft's site,\nright,\n\n145\n00:07:51.508 --> 00:07:54.926\nwe generally wanna go to our work station,\ndownload the dependencies there, and\n\n146\n00:07:54.926 --> 00:07:57.369\nthen bring them over and\nrun them on the server, correct?\n\n147\n00:07:57.369 --> 00:07:58.935\nAbsolutely, Don, I mean, yeah,\n\n148\n00:07:58.935 --> 00:08:01.654\nwe're kind of a little pampered\nhere in the lab environment so\n\n149\n00:08:01.654 --> 00:08:05.070\nwe can turn off some of those security\nfeatures to make it a little bit easier.\n\n150\n00:08:05.070 --> 00:08:08.750\nBut yes, absolutely, ideally,\nyou take this to your workstation.\n\n151\n00:08:08.750 --> 00:08:12.440\nYou can just run the first two,\nit's gonna do some prerequisite checks.\n\n152\n00:08:12.440 --> 00:08:16.060\nSo we're gonna download this one and then\nthe next one, you can get those saved and\n\n153\n00:08:16.060 --> 00:08:17.210\nthen copy those over.\n\n154\n00:08:17.210 --> 00:08:19.230\nAnd run them, and\nthen the install will go straight up.\n\n155\n00:08:19.230 --> 00:08:21.900\nBut for this time in the lab\nwe're gonna go ahead and\n\n156\n00:08:21.900 --> 00:08:23.320\njust download them here from the server.\n\n157\n00:08:23.320 --> 00:08:27.220\nSo, I'm back on that screen,\nwe're gonna say Yes to the download.\n\n158\n00:08:27.220 --> 00:08:32.739\nAnd then it's popping up here Internet\nExplorer, and so here's the little glitch.\n\n159\n00:08:32.739 --> 00:08:35.622\nIf you look at it,\nit says this rediscretable, x1,\n\n160\n00:08:35.622 --> 00:08:40.190\nthere is the extension missing off of this\nwhich is gonna confuse quite a few people.\n\n161\n00:08:40.190 --> 00:08:43.750\nSo what we need to do over\nhere is we wanna do a Save As.\n\n162\n00:08:43.750 --> 00:08:48.900\nAnd when we do this, we want to just\nactually, do .EXE on the end of that guy.\n\n163\n00:08:48.900 --> 00:08:51.170\nSo that way, when we go to run it,\n\n164\n00:08:51.170 --> 00:08:54.130\nit's gonna run cuz otherwise\nit looks really weird.\n\n165\n00:08:54.130 --> 00:08:56.750\nSo we'll save there and\nthat guy, he's already done.\n\n166\n00:08:56.750 --> 00:09:00.192\nAnd so we will actually run this\nguy again, do these when you're\n\n167\n00:09:00.192 --> 00:09:03.973\nactually from your work station,\ndownload them and bring them over.\n\n168\n00:09:03.973 --> 00:09:08.103\nBut we have to run this one because that\ninstaller is doing those pre-exit checks\n\n169\n00:09:08.103 --> 00:09:10.970\nand until we get both of these on,\nit's not gonna work.\n\n170\n00:09:10.970 --> 00:09:14.006\nSo we'll run this and we'll click OK,\n\n171\n00:09:14.006 --> 00:09:18.250\nget our elevations here and\nthen that guy is good to go.\n\n172\n00:09:18.250 --> 00:09:21.377\nSo now, what we need to do is\nwe'll close out of this guy again,\n\n173\n00:09:21.377 --> 00:09:23.214\nwe're gonna run the install again.\n\n174\n00:09:23.214 --> 00:09:25.164\nAnd he's gonna do another\nprerequisite check and\n\n175\n00:09:25.164 --> 00:09:27.028\nwe'll go through this\nexercise one more time.\n\n176\n00:09:27.028 --> 00:09:32.370\nThis is now for the 64 bit version of\nthis, so we'll go ahead and say, Yes.\n\n177\n00:09:32.370 --> 00:09:37.302\nAnd then we'll see Internet Explorer\npop up, back up again with our list.\n\n178\n00:09:39.892 --> 00:09:41.290\nOkay, and here we go.\n\n179\n00:09:41.290 --> 00:09:44.630\nAnd again, you wanna do that Save As here.\n\n180\n00:09:44.630 --> 00:09:48.365\nSo, and then just add that\n.exe on the end of it here.\n\n181\n00:09:48.365 --> 00:09:52.879\nOtherwise, you're not\ngonna be able to run it.\n\n182\n00:09:52.879 --> 00:09:58.063\nAnd we can go over and overwrite this one,\ncuz we've already installed the last one,\n\n183\n00:09:58.063 --> 00:10:01.307\nso we'll just say overwrite here and\nwe'll say Run.\n\n184\n00:10:01.307 --> 00:10:08.597\nHere's our 64-bit version, we'll agree,\nand get that one knocked out of the way.\n\n185\n00:10:08.597 --> 00:10:12.421\nAnd there,\nnow we have all of our prerequisites.\n\n186\n00:10:12.421 --> 00:10:15.817\n&gt;&gt; Now Mike, I noticed the first one that\nyou downloaded we had to add the .exe to\n\n187\n00:10:15.817 --> 00:10:16.608\nthe end, right?\n\n188\n00:10:16.608 --> 00:10:17.570\nSo it was a regular executable.\n\n189\n00:10:17.570 --> 00:10:21.680\nThis one's an MSI and this is something\nthat trips me up on servers a lot,\n\n190\n00:10:21.680 --> 00:10:25.470\nis that when you run the MSI, and so\nit's a little bit different, right?\n\n191\n00:10:25.470 --> 00:10:28.160\n&gt;&gt; Yeah,\nsometimes the MSI doesn't always elevate.\n\n192\n00:10:28.160 --> 00:10:31.590\nLike when you run that exe,\nwe get the user account control pop-up and\n\n193\n00:10:31.590 --> 00:10:33.790\nsays hey, we need to elevate you and\nstuff like this.\n\n194\n00:10:33.790 --> 00:10:35.590\nWith MSIs, it's a little different there.\n\n195\n00:10:35.590 --> 00:10:40.680\nSo the way we can do that is that we're\ngonna open up a PowerShell cmdlet and\n\n196\n00:10:40.680 --> 00:10:44.640\nwe're gonna just run the actual MSI.\n\n197\n00:10:44.640 --> 00:10:46.800\nWe're gonna use the in\nplace activation MSI and\n\n198\n00:10:46.800 --> 00:10:49.560\nwe're just gonna run it from\nthis elevated command prompt.\n\n199\n00:10:49.560 --> 00:10:52.110\nAnd the way I'll do that\nis I use the start command.\n\n200\n00:10:52.110 --> 00:10:56.920\nAnd then I'm just going to pass\nin that MSI file to that command.\n\n201\n00:10:56.920 --> 00:10:59.457\nAnd then when we enter that,\nwe're gonna see it pop up here.\n\n202\n00:10:59.457 --> 00:11:04.080\nAnd we can then get through that and meet\nthose actual security requirements there.\n\n203\n00:11:04.080 --> 00:11:06.240\nSo now, you look at this screen here.\n\n204\n00:11:06.240 --> 00:11:09.437\nLet's minimize, let's get this\ndownloads out of the way here.\n\n205\n00:11:09.437 --> 00:11:13.112\nIf we look at this screen,\nwe have the user portal set up and\n\n206\n00:11:13.112 --> 00:11:15.382\nin here it's the default website.\n\n207\n00:11:15.382 --> 00:11:17.760\nWe're gonna leave that the way it is,\nit's all good there.\n\n208\n00:11:17.760 --> 00:11:19.560\nThe out pull we're not\ngonna change either.\n\n209\n00:11:19.560 --> 00:11:23.708\nAgain, if you're really good with IS\nsecurity, definitely go through here and\n\n210\n00:11:23.708 --> 00:11:25.300\nmake some things more secure.\n\n211\n00:11:25.300 --> 00:11:29.303\nBut I always stress to do those after you\nget it working because otherwise if you\n\n212\n00:11:29.303 --> 00:11:32.960\nstart putting additional configurations\non before you know it works.\n\n213\n00:11:32.960 --> 00:11:37.210\nYou don't know which is broke, is it the\nuser config, the user portal that's broke?\n\n214\n00:11:37.210 --> 00:11:39.020\nOr is it those additional\nsecurity settings?\n\n215\n00:11:39.020 --> 00:11:41.855\nSo, I always like to make\nsure it works good, and\n\n216\n00:11:41.855 --> 00:11:46.017\nthen after that go ahead and\nstart locking things down progressively.\n\n217\n00:11:46.017 --> 00:11:49.377\nSo you know at each stage of the lock\ndown, you know which part may or\n\n218\n00:11:49.377 --> 00:11:51.420\nmay not have affected it.\n\n219\n00:11:51.420 --> 00:11:55.180\nIn this case, we have this virtual\ndirectory here, which is multifactor auth.\n\n220\n00:11:55.180 --> 00:11:59.800\nYou can change this to whatever you need\nfor that if you want it a little shorter.\n\n221\n00:11:59.800 --> 00:12:02.630\nThis is the thing that your\nusers are going to type in.\n\n222\n00:12:02.630 --> 00:12:07.120\nSo, again, if it's gonna be multifactor\nauth, I like to shorten this.\n\n223\n00:12:07.120 --> 00:12:09.360\nSo I actually just put MFA here, and so\n\n224\n00:12:09.360 --> 00:12:12.580\nthat's the actual virtual\ndirectory that I'm going to use.\n\n225\n00:12:12.580 --> 00:12:14.288\nEverything else we leave the same.\n\n226\n00:12:14.288 --> 00:12:16.168\nAnd then we're gonna click Next.\n\n227\n00:12:16.168 --> 00:12:18.640\nAnd we're gonna see this\nwonderful progress bar.\n\n228\n00:12:18.640 --> 00:12:20.040\nBut this is a quick one here.\n\n229\n00:12:20.040 --> 00:12:22.730\nAnd this is just laying\ndown all of the web files\n\n230\n00:12:22.730 --> 00:12:26.260\non this server that we're gonna need\nin order for the user portal to work.\n\n231\n00:12:26.260 --> 00:12:29.190\nSo we're gonna finish this\ninstall up here real quick here.\n\n232\n00:12:29.190 --> 00:12:33.970\nAnd then we're gonna go to\nthe folders where this web file is.\n\n233\n00:12:33.970 --> 00:12:37.760\nAnd we're gonna actually edit some\nof the config files as you can see.\n\n234\n00:12:37.760 --> 00:12:41.780\nSo while that thing is finishing up,\nwe're gonna go look and I'm gonna show\n\n235\n00:12:41.780 --> 00:12:47.050\nyou where these files are gonna be placed\nin this Inetpub directory right here.\n\n236\n00:12:47.050 --> 00:12:50.950\nAnd so, we have this Inetpub directory,\nI don't wanna edit that.\n\n237\n00:12:50.950 --> 00:12:54.954\nSee our installation's done there,\nso we can close out of there and\n\n238\n00:12:54.954 --> 00:13:00.270\nwe're gonna go into this Inetpub, and\nin the www root you see that mfa folder.\n\n239\n00:13:00.270 --> 00:13:02.620\nAn mfa folder is where we\ninstalled everything in there.\n\n240\n00:13:02.620 --> 00:13:06.438\nAnd then in there there's a config\nfile that we're going to edit.\n\n241\n00:13:06.438 --> 00:13:11.919\nAnd that config file is going to be all\nthe way down here in the bottom I believe,\n\n242\n00:13:11.919 --> 00:13:13.010\nWeb.config.\n\n243\n00:13:14.100 --> 00:13:19.680\nAnd so what we want to do is we just\nsay Open with and try app on this.\n\n244\n00:13:19.680 --> 00:13:21.970\nAnd we're just gonna open with Notepad.\n\n245\n00:13:21.970 --> 00:13:26.687\nIf you've never looked at a Web.config,\nthey're just XML so everything's okay.\n\n246\n00:13:26.687 --> 00:13:28.380\nYou're gonna be fine here.\n\n247\n00:13:28.380 --> 00:13:31.430\nThe great thing about this installation\nis they've already kind of put\n\n248\n00:13:31.430 --> 00:13:33.900\nall the things that we\nneed to put in here.\n\n249\n00:13:33.900 --> 00:13:36.750\nWe just need to change some settings and\ntweak it a little bit.\n\n250\n00:13:36.750 --> 00:13:40.080\nThe first thing that we're gonna\ndo is the use Web Services SDK.\n\n251\n00:13:41.480 --> 00:13:45.972\nTypically, in your lab environment\nwhen you install in the same server,\n\n252\n00:13:45.972 --> 00:13:50.680\nyou already have those permissions to\nwhere the web servers or the user portal\n\n253\n00:13:50.680 --> 00:13:55.625\ncan just talk to the MFA server because\nthey're both running on the same server.\n\n254\n00:13:55.625 --> 00:14:00.093\nAnd as you remember, we added the MFA\nserver into that phone factor admins\n\n255\n00:14:00.093 --> 00:14:02.170\ngroup, but this time we don't.\n\n256\n00:14:02.170 --> 00:14:05.030\nWe have this on the user portal server.\n\n257\n00:14:05.030 --> 00:14:06.760\nIt's a separate server.\n\n258\n00:14:06.760 --> 00:14:08.950\nAnd this is the ideal scenario\nyou're going to do so\n\n259\n00:14:08.950 --> 00:14:11.720\nthat you can scale as\nyour environment grows.\n\n260\n00:14:11.720 --> 00:14:12.480\nIf you need two or\n\n261\n00:14:12.480 --> 00:14:16.460\nthree web servers, you don't have to\nmove it later, anything like that.\n\n262\n00:14:16.460 --> 00:14:21.270\nSo we need to tell the user portal that\nit needs to use the Web Service SDK.\n\n263\n00:14:21.270 --> 00:14:23.843\nSo what we're gonna do is we're\ngonna go right in here, and\n\n264\n00:14:23.843 --> 00:14:26.360\nI'm gonna highlight where I'm gonna edit.\n\n265\n00:14:26.360 --> 00:14:32.300\nBetween the quotations, and I'm just gonna\nput True, but I'm gonna spell it right.\n\n266\n00:14:32.300 --> 00:14:34.870\nHere we go, so we have true in there now.\n\n267\n00:14:34.870 --> 00:14:40.085\nThe next thing we need to do is we\nmentioned in some previous episodes that\n\n268\n00:14:40.085 --> 00:14:45.398\nwe were gonna create a user account to\nconnect to that the Web SDK Service.\n\n269\n00:14:45.398 --> 00:14:48.978\nIf you remember, when we installed\nthe IS roll on the Web SDK service,\n\n270\n00:14:48.978 --> 00:14:53.411\nwe use basic authentication, so that means\nwe're gonna authenticate to that service\n\n271\n00:14:53.411 --> 00:14:55.510\nusing a username and password.\n\n272\n00:14:55.510 --> 00:15:04.487\nWe also had added\nthe pfwsdk_appone account.\n\n273\n00:15:04.487 --> 00:15:08.618\nThat was that account that we said, this\nis gonna be our web services account that\n\n274\n00:15:08.618 --> 00:15:12.040\nwe're gonna use to go in and\nconnect and authenticate to that SDK.\n\n275\n00:15:12.040 --> 00:15:14.150\nWe added that account to\nthe phone factor's admins group.\n\n276\n00:15:14.150 --> 00:15:17.460\nSo now that account has it and\nthat's what we're gonna put here.\n\n277\n00:15:17.460 --> 00:15:21.350\nRight in here,\nbetween these two quotation marks.\n\n278\n00:15:21.350 --> 00:15:22.870\nNow, I'm showing you I'm here.\n\n279\n00:15:22.870 --> 00:15:27.020\nMake sure you get in them because this\nis XML, it's a very, very tricky.\n\n280\n00:15:27.020 --> 00:15:31.030\nWhat you're gonna do is you're actually\ngonna put the fully qualified domain name.\n\n281\n00:15:31.030 --> 00:15:35.070\nSo that's typically, it's going to be your\ndomain name like the short domain name.\n\n282\n00:15:35.070 --> 00:15:38.477\nIn my case, I use Contoso.\n\n283\n00:15:38.477 --> 00:15:41.047\nAnd then we're gonna use the backslash,\nand\n\n284\n00:15:41.047 --> 00:15:44.908\nthen that user account that we\ndesignated for the Web Services SDK.\n\n285\n00:15:44.908 --> 00:15:47.906\nIn this case, it's my pfwsdk.\n\n286\n00:15:50.117 --> 00:15:55.456\nAnd then _app1, that's my user account.\n\n287\n00:15:55.456 --> 00:16:00.150\nAnd then now I said I made a super\nsecret password, but obviously I didn't.\n\n288\n00:16:00.150 --> 00:16:01.710\nHere's my password for it.\n\n289\n00:16:01.710 --> 00:16:04.050\nNow you said,\ndon't put passwords in there.\n\n290\n00:16:04.050 --> 00:16:06.310\nI know, Don, go ahead and chastise me now.\n\n291\n00:16:07.450 --> 00:16:08.720\n&gt;&gt; I'm sure a lot of\nviewers are thinking that,\n\n292\n00:16:08.720 --> 00:16:10.665\nis here's a text file that's\nsitting right on the hard drive and\n\n293\n00:16:10.665 --> 00:16:12.840\nwe gotta put our password right in there.\n\n294\n00:16:12.840 --> 00:16:16.216\nWell, it this case,\nwe kinda have to do it, right?\n\n295\n00:16:16.216 --> 00:16:17.754\nThere's not really another option for\nit, but\n\n296\n00:16:17.754 --> 00:16:19.260\nthere's other ways to protect this, right?\n\n297\n00:16:19.260 --> 00:16:22.050\n&gt;&gt; Yeah, so there are other options there.\n\n298\n00:16:22.050 --> 00:16:26.509\nBut when you do those options, then they\nmake it a very heavy chore to update.\n\n299\n00:16:26.509 --> 00:16:30.294\nYou can use these certificates here,\nbut now you have this thumbprints and\n\n300\n00:16:30.294 --> 00:16:32.291\nfile path and passwords and all these.\n\n301\n00:16:32.291 --> 00:16:34.730\nSo you're still putting a password\nin there and using a certificate.\n\n302\n00:16:34.730 --> 00:16:37.010\nSo either way,\nyou're having a password in there.\n\n303\n00:16:37.010 --> 00:16:41.077\nBut yes, it's a little bit out of\nthe scope of what we're doing here, but\n\n304\n00:16:41.077 --> 00:16:45.602\n.NET actually has a way that once you have\nthis working, .NET has a way, to where\n\n305\n00:16:45.602 --> 00:16:50.025\nyou can actually encrypt these config\nfiles, so that you can keep them secure.\n\n306\n00:16:50.025 --> 00:16:53.721\nSo, I would strongly encourage,\nthat, once you get it working,\n\n307\n00:16:53.721 --> 00:16:55.177\ndon't do it before then.\n\n308\n00:16:55.177 --> 00:16:57.440\nOnce you know it's working,\nthen go ahead and\n\n309\n00:16:57.440 --> 00:17:00.634\ndo some research on getting those\nconfig files encrypted there,\n\n310\n00:17:00.634 --> 00:17:04.360\nso that way you can protect these\npasswords from being seen by others.\n\n311\n00:17:04.360 --> 00:17:08.731\nThe certificate route is just very\ncumbersome because certificates expire.\n\n312\n00:17:08.731 --> 00:17:12.261\nAnd what this is really looking for\nis a PFX file and things of that nature.\n\n313\n00:17:12.261 --> 00:17:14.138\nSo we wanna kinda stay\nout of that business,\n\n314\n00:17:14.138 --> 00:17:17.595\neven though I much prefer\na certificate over a password any day.\n\n315\n00:17:17.595 --> 00:17:22.660\nSo we've told it we're gonna\nuse the web service SDK,\n\n316\n00:17:22.660 --> 00:17:25.480\nwe've given it a username and\nwe've given it our password.\n\n317\n00:17:25.480 --> 00:17:28.016\nAlso, in that password field,\nthey're case sensitive so\n\n318\n00:17:28.016 --> 00:17:31.227\nmake sure you type it in just the way\nyou put it into the actual user account.\n\n319\n00:17:31.227 --> 00:17:35.877\nNow, the next thing that we need\nto do is we need to say is, well,\n\n320\n00:17:35.877 --> 00:17:38.043\nwhere is the web service SDK?\n\n321\n00:17:38.043 --> 00:17:39.473\nIt's gotta know how to connect to that.\n\n322\n00:17:39.473 --> 00:17:43.558\nSo what we're gonna do in this file\nis we're gonna scroll down and\n\n323\n00:17:43.558 --> 00:17:47.138\nwe're gonna look for\nwhere we find this web service SDK.\n\n324\n00:17:47.138 --> 00:17:51.735\nAnd where you'll see this is\nthis setting right there.\n\n325\n00:17:51.735 --> 00:17:56.987\nWe're looking for\nthat setting, this PFUPPFWSDK.\n\n326\n00:17:56.987 --> 00:18:02.441\nThis is where we're gonna put our\nactual URL that we're gonna go to for\n\n327\n00:18:02.441 --> 00:18:04.209\nthe web services SDK.\n\n328\n00:18:04.209 --> 00:18:06.488\nNow remember, that web services SDK,\n\n329\n00:18:06.488 --> 00:18:10.980\nwe used that really long virtual\nfolder here that I didn't change.\n\n330\n00:18:10.980 --> 00:18:14.460\nIf you changed yours, make sure\nthat you change this section here.\n\n331\n00:18:14.460 --> 00:18:16.650\nI leave it the same\nbecause now if you look,\n\n332\n00:18:16.650 --> 00:18:19.530\nit kind of comes to fault\nwith the Contosa.com.\n\n333\n00:18:19.530 --> 00:18:23.490\nAll I really need to do is modify a few\nthings on the URL and I'm good to go.\n\n334\n00:18:23.490 --> 00:18:25.535\nAnd I don't have to\nremember anything else.\n\n335\n00:18:25.535 --> 00:18:31.085\nSo in our particular case, that web\nservice SDK is actually on our MFA Server.\n\n336\n00:18:31.085 --> 00:18:36.102\nSo I'm gonna use the host name MFA and my\ninternal domain name is quirk.contoso.com.\n\n337\n00:18:36.102 --> 00:18:42.834\nSo now you can see here I have,\nhttps://mfaquirck.contoso.com\n\n338\n00:18:42.834 --> 00:18:47.063\nmulti-factor, auth, web services SDK.\n\n339\n00:18:47.063 --> 00:18:50.742\nAnd then I have the ASMX file that\nis used to load that web service and\n\n340\n00:18:50.742 --> 00:18:52.396\nadvertises their services.\n\n341\n00:18:52.396 --> 00:18:55.837\nSo once you have this in,\nnow we've told it, well,\n\n342\n00:18:55.837 --> 00:18:58.670\nwe've told it to use the web services SDK.\n\n343\n00:18:58.670 --> 00:19:01.029\nWe now gave it an identity\nin which it can use and\n\n344\n00:19:01.029 --> 00:19:04.290\nwe've provisioned that\nidentity previously.\n\n345\n00:19:04.290 --> 00:19:07.780\nAnd now, we've told it where\nthe web services SDK is loaded.\n\n346\n00:19:07.780 --> 00:19:12.396\nSo, Don, this is really all we need to\ndo to get the user portal configured.\n\n347\n00:19:12.396 --> 00:19:17.049\nWe've done the user interface side,\nand now we've done the actual meat and\n\n348\n00:19:17.049 --> 00:19:21.990\npotatoes kind of side of the .NET Server\nor the IS part, so we're good to go.\n\n349\n00:19:21.990 --> 00:19:25.220\n&gt;&gt; And at this point, we've really\nconfigured kinda the last piece of\n\n350\n00:19:25.220 --> 00:19:26.670\nthe infrastructure that we need, right?\n\n351\n00:19:26.670 --> 00:19:30.181\nWe've seen getting the MFA server setup,\nthe user portal, we saw setting up our\n\n352\n00:19:30.181 --> 00:19:32.878\nvarious other authentication\nmechanisms with the backend.\n\n353\n00:19:32.878 --> 00:19:34.506\nWe still have some group\npolicy work to do and\n\n354\n00:19:34.506 --> 00:19:36.755\nwe still have a few other little odds and\nends to take care of.\n\n355\n00:19:36.755 --> 00:19:39.890\nBut at this point, I think all\nthe really hard work is done, right?\n\n356\n00:19:39.890 --> 00:19:42.750\n&gt;&gt; Yeah, there is a light at the end\nof the tunnel, and, I promise,\n\n357\n00:19:42.750 --> 00:19:43.700\nit's not a train.\n\n358\n00:19:43.700 --> 00:19:45.440\nYes, we are almost done with this.\n\n359\n00:19:45.440 --> 00:19:47.719\nWe're gonna go ahead and\nsave this file out, and\n\n360\n00:19:47.719 --> 00:19:49.839\nthen we're gonna go\ninto finishing this up.\n\n361\n00:19:49.839 --> 00:19:51.679\nWhere we're gonna create\nsome group policy and\n\n362\n00:19:51.679 --> 00:19:54.398\njust start looking at the Windows Flow for\nBusiness policy settings.\n\n363\n00:19:54.398 --> 00:19:56.970\n&gt;&gt; And, Mike, just before we wrap up,\nthere was question in the chat room.\n\n364\n00:19:56.970 --> 00:19:59.890\nAt this point, we've set up the web SDK,\nwe've set up a few other components.\n\n365\n00:19:59.890 --> 00:20:04.230\nIs there a way to verify this is actually\nworking, like just a quick way to test?\n\n366\n00:20:04.230 --> 00:20:06.720\n&gt;&gt; Yeah, Don, that's a great\nquestion because as you know,\n\n367\n00:20:06.720 --> 00:20:08.630\nI like to try to test things in between.\n\n368\n00:20:08.630 --> 00:20:11.760\nSo that way we know we\ncan keep continuing on.\n\n369\n00:20:11.760 --> 00:20:15.661\nOne thing I'll close in on this is if you\nlook at my screen in that web.config file,\n\n370\n00:20:15.661 --> 00:20:18.586\nyou wanna make sure that you\nhave permissions to that folder.\n\n371\n00:20:18.586 --> 00:20:22.223\nIf you try to save it and it makes you\ndo a save as, just go back in there.\n\n372\n00:20:22.223 --> 00:20:25.817\nBrush up those permissions to make sure\nthat you as the user that your editing at\n\n373\n00:20:25.817 --> 00:20:27.183\ncan actually save that file.\n\n374\n00:20:27.183 --> 00:20:30.464\nBut in that file, we have that URL\nthat we created here this right here,\n\n375\n00:20:30.464 --> 00:20:31.510\nthis guys right here.\n\n376\n00:20:31.510 --> 00:20:35.382\nThis is the path where that\nURL to our web services SDK.\n\n377\n00:20:35.382 --> 00:20:39.544\nWhat we can do is we can copy that file\nout and we could open up our web browser\n\n378\n00:20:39.544 --> 00:20:42.586\nand we can paste it right in\nhere like this and go to it.\n\n379\n00:20:42.586 --> 00:20:44.374\nNow you're gonna get prompted for\ncredentials.\n\n380\n00:20:44.374 --> 00:20:46.976\nThat's that basic authentication\nthat we were talking about here.\n\n381\n00:20:46.976 --> 00:20:50.727\nAnd what you're gonna do is,\nremembering in that config file,\n\n382\n00:20:50.727 --> 00:20:52.400\nwe added our user account.\n\n383\n00:20:52.400 --> 00:20:55.710\nBut don't make the mistake that I did and\njust put in that user account.\n\n384\n00:20:55.710 --> 00:20:58.240\nMake sure you make it fully qualified,\nput in that domain name.\n\n385\n00:20:58.240 --> 00:21:02.620\nSo I'm gonna put in here Contoso and then\nI'm gonna put back into my user account,\n\n386\n00:21:02.620 --> 00:21:11.360\nwhich I believe it is PFWSDK_app1 and\nthen my super secret password.\n\n387\n00:21:12.700 --> 00:21:15.599\nAnd then we're gonna go ahead and\nauthenticate to that webpage and\n\n388\n00:21:15.599 --> 00:21:16.125\nthen boom.\n\n389\n00:21:16.125 --> 00:21:19.837\nWhat you should see is this,\nis you see this PDF WSSDK page.\n\n390\n00:21:19.837 --> 00:21:23.610\nThis is all of the different little\nweb services APIs that it could do.\n\n391\n00:21:23.610 --> 00:21:27.075\nIf you get to this page,\nthe web service is ready to go.\n\n392\n00:21:27.075 --> 00:21:29.245\n&gt;&gt; Awesome, all right, well,\nMike, we're gonna go ahead and\n\n393\n00:21:29.245 --> 00:21:30.264\nwrap this one up right here.\n\n394\n00:21:30.264 --> 00:21:32.842\nBut for those of you out there in TV land,\nbe sure to stay tuned.\n\n395\n00:21:32.842 --> 00:21:36.011\nCuz in the next episode, we're gonna\ncontinue moving on with getting our group\n\n396\n00:21:36.011 --> 00:21:38.989\npolicies put in place to make sure that\nwe can roll this out to our users, and\n\n397\n00:21:38.989 --> 00:21:40.429\nget everything actually working.\n\n398\n00:21:40.429 --> 00:21:41.919\nWhich is kinda the whole\npoint of this series.\n\n399\n00:21:41.919 --> 00:21:44.970\n[LAUGH] So that is coming up,\ndefinitely stay tuned for it.\n\n400\n00:21:44.970 --> 00:21:46.660\nBut otherwise,\nwe're gonna wrap it up right here.\n\n401\n00:21:46.660 --> 00:21:50.270\nSo, signing off for ITProTV,\nI'm your host Don Pezet.\n\n402\n00:21:50.270 --> 00:21:51.290\n&gt;&gt; And I'm Mike Stephens.\n\n403\n00:21:51.290 --> 00:21:53.105\n&gt;&gt; And we'll see you next time.\n\n404\n00:21:53.105 --> 00:21:59.142\n[MUSIC]\n\n405\n00:21:59.142 --> 00:22:02.619\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "216668870"
        },
        {
          "description": "In this episode, Don and Mike wrap up the technical configuration of Windows Hello for Business. Specifically, Mike demonstrates how to tell the Active Directory Federation Services (ADFS) to use the Multi-factor Authentication (MFA) server. Mike shows how to create a custom ADFS adapter and implements it using Windows PowerShell.",
          "length": "685",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-10-connecting_the_ad_fs_to_the_mfa_server-050517.00_11_10_10.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-10-connecting_the_ad_fs_to_the_mfa_server-050517.00_11_10_10.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-10-connecting_the_ad_fs_to_the_mfa_server-050517.00_11_10_10.Still001-sm.jpg",
          "title": "Connecting the AD FS to the MFA Server",
          "transcript": "WEBVTT\n\n1\n00:00:00.335 --> 00:00:02.707\nIt's a pretty rudimentary task here.\n\n2\n00:00:02.707 --> 00:00:08.361\n[CROSSTALK]\n&gt;&gt; [SOUND]\n\n3\n00:00:08.361 --> 00:00:12.526\n&gt;&gt; You're watching IT Pro TV.\n\n4\n00:00:12.526 --> 00:00:15.282\n&gt;&gt; All right, good morning,\ngood afternoon and good evening and\n\n5\n00:00:15.282 --> 00:00:17.260\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:17.260 --> 00:00:18.746\nI'm your host, Don Pezet.\n\n7\n00:00:18.746 --> 00:00:21.445\nBack again with another episode\nof Windows Hello for Business.\n\n8\n00:00:21.445 --> 00:00:25.992\nIn this episode we're gonna be doing\nthe all important task of tying\n\n9\n00:00:25.992 --> 00:00:28.484\ntogether the ADSF with RMFA Server.\n\n10\n00:00:28.484 --> 00:00:30.489\nIn the last few episodes we've been\nputting all this stuff together.\n\n11\n00:00:30.489 --> 00:00:32.579\nNow we've actually gotta get it talking.\n\n12\n00:00:32.579 --> 00:00:34.613\nSo this is kinda important and\nhere to help us,\n\n13\n00:00:34.613 --> 00:00:36.630\nright here in the studio\nis Mr Mike Stephens.\n\n14\n00:00:36.630 --> 00:00:38.120\nMike thank you for joining us once again.\n\n15\n00:00:38.120 --> 00:00:38.950\n&gt;&gt; I have returned.\n\n16\n00:00:38.950 --> 00:00:40.895\n&gt;&gt; Yeah one of these days\nI'll scare you off, but-\n\n17\n00:00:40.895 --> 00:00:41.530\n&gt;&gt; [LAUGH]\n\n18\n00:00:41.530 --> 00:00:42.460\n&gt;&gt; Right now you're back and\n\n19\n00:00:42.460 --> 00:00:44.072\nwe get to cover something\nkind of important.\n\n20\n00:00:44.072 --> 00:00:47.922\nI know in the last episode I said we were\npretty much done, and we pretty much are.\n\n21\n00:00:47.922 --> 00:00:51.440\nOur MFA server is done, our ADFS is done.\n\n22\n00:00:51.440 --> 00:00:55.059\nThe only problem is that they don't\nreally know to talk to each other yet.\n\n23\n00:00:55.059 --> 00:00:56.156\nAnd if they don't do that,\n\n24\n00:00:56.156 --> 00:00:58.748\nit's gonna make this whole thing\nsomewhat pointless, right.\n\n25\n00:00:58.748 --> 00:01:03.480\n&gt;&gt; [LAUGH] Yeah, yeah, there'll be no\nsecond in the second factor, absolutely.\n\n26\n00:01:03.480 --> 00:01:08.730\nBut you're right Don, we're at the end\nof our tunnel, so to speak, here.\n\n27\n00:01:08.730 --> 00:01:11.130\nWe've got just about everything set up.\n\n28\n00:01:11.130 --> 00:01:12.769\nMost of the infrastructure is set up.\n\n29\n00:01:12.769 --> 00:01:16.066\nAnd the great thing is we've been\ntesting each phase as we go.\n\n30\n00:01:16.066 --> 00:01:20.466\nTo make sure that we feel comfortable\nmoving to the next phase without having\n\n31\n00:01:20.466 --> 00:01:21.367\nany problems.\n\n32\n00:01:21.367 --> 00:01:25.586\nIn this one what we're gonna do is we're\nreally gonna tie together the onset.\n\n33\n00:01:25.586 --> 00:01:29.342\nThat ADFS server is gonna get tied\ntogether with the MFA server.\n\n34\n00:01:29.342 --> 00:01:33.215\nRight now, the ADFS server has no clue who\nto contact when it needs to do that second\n\n35\n00:01:33.215 --> 00:01:34.462\nfactor authentication.\n\n36\n00:01:34.462 --> 00:01:39.018\nSo the thing that we're gonna do is we're\ngonna talk about that adapter model and\n\n37\n00:01:39.018 --> 00:01:39.898\nwhat ADFS has.\n\n38\n00:01:39.898 --> 00:01:43.855\nAnd the first thing to note is\nthat in that adapter model,\n\n39\n00:01:43.855 --> 00:01:46.666\nobviously Azure has its own MFA server.\n\n40\n00:01:46.666 --> 00:01:52.749\nAnd so we can use an adapter to link\nthe MFA adaptor to an MFA Azure service.\n\n41\n00:01:52.749 --> 00:01:55.603\nBut, there are some times when\nI get questions from customers.\n\n42\n00:01:55.603 --> 00:02:01.220\nAnd they say, I have my own MFA, like\nan RSAIS ID or any one of those things.\n\n43\n00:02:01.220 --> 00:02:03.884\nAnd I just wanted to take time and\n\n44\n00:02:03.884 --> 00:02:08.137\nshow people here I have this\nweb page saved up here.\n\n45\n00:02:08.137 --> 00:02:13.075\nThat there is an adapter model that\na lot of third parties actually write\n\n46\n00:02:13.075 --> 00:02:16.214\nadapters for ADFS so\nwe can use some of these.\n\n47\n00:02:16.214 --> 00:02:20.038\nAnd so you can see here if I scroll\nthis page, this is the adapter model.\n\n48\n00:02:20.038 --> 00:02:23.998\nAnd it has a list of all the adapters that\nare currently available right now that\n\n49\n00:02:23.998 --> 00:02:24.842\nplug into ADFS.\n\n50\n00:02:24.842 --> 00:02:27.027\nAnd as long as they fit\nthis adapter model,\n\n51\n00:02:27.027 --> 00:02:29.465\nthey should work with\nWindows Hello just fine.\n\n52\n00:02:29.465 --> 00:02:32.957\nSo if you have your own one and you\nwant to have that return on investment.\n\n53\n00:02:32.957 --> 00:02:36.626\nGo ahead and check these out and\nmake sure that they do work, but\n\n54\n00:02:36.626 --> 00:02:38.370\nyou should be okay with this.\n\n55\n00:02:38.370 --> 00:02:41.890\nBut for right now,\nwe're gonna use the Azure MFA server.\n\n56\n00:02:41.890 --> 00:02:45.258\nAnd we're gonna do some copying of some\nfiles and get this thing configured over.\n\n57\n00:02:45.258 --> 00:02:47.321\nSo I'm gonna close out this browser.\n\n58\n00:02:47.321 --> 00:02:51.144\nAnd we're gonna go over to our ADFS\nserver which is where I'm at right now.\n\n59\n00:02:51.144 --> 00:02:54.602\nAnd if you look right\nhere I have connected.\n\n60\n00:02:54.602 --> 00:02:59.421\nOnce again I have connected to that\nremote share on the MFA server through\n\n61\n00:02:59.421 --> 00:03:01.317\nthe administrative share.\n\n62\n00:03:01.317 --> 00:03:03.546\nAnd I'm in that folder,\nonce again where we did,\n\n63\n00:03:03.546 --> 00:03:05.148\nwhen we were doing the user portal.\n\n64\n00:03:05.148 --> 00:03:10.263\nAnd what we need to do is we need to\ncopy over the configuration files and\n\n65\n00:03:10.263 --> 00:03:14.880\nthe set up files that we need for\nthe actual MFA adapter.\n\n66\n00:03:14.880 --> 00:03:17.925\nAnd so\nto do that we're gonna start with this\n\n67\n00:03:17.925 --> 00:03:22.000\nMultiFactorAuthenticationAdFsAdapter.con-\nfig.\n\n68\n00:03:22.000 --> 00:03:24.390\nI'm gonna hold a Ctrl and Click here.\n\n69\n00:03:24.390 --> 00:03:25.710\nWe're gonna get this.\n\n70\n00:03:25.710 --> 00:03:28.810\nLet's try one more time, Ctrl + Click.\n\n71\n00:03:28.810 --> 00:03:29.900\nThere we go.\n\n72\n00:03:29.900 --> 00:03:33.130\nAnd I have the Multi-Factor\nAuthentication ADFS Adapter set up.\n\n73\n00:03:33.130 --> 00:03:35.181\nThat's our actual application set up.\n\n74\n00:03:35.181 --> 00:03:38.035\nAnd then we're gonna scroll all\nthe way to the bottom here.\n\n75\n00:03:38.035 --> 00:03:40.900\nAnd there are these two PowerShell\ncmdlets that we wanna go ahead and get.\n\n76\n00:03:40.900 --> 00:03:46.400\nSo I'm gonna do another Ctrl + click,\nCtrl + click and I have all of them there.\n\n77\n00:03:46.400 --> 00:03:49.500\nI'll do my right click and copy so\nwe have those ready to go.\n\n78\n00:03:49.500 --> 00:03:52.303\nWe're gonna actually copy these\nlocally to our ADFS server.\n\n79\n00:03:52.303 --> 00:03:57.149\nSo I'm gonna use a Windows shortcut\nkey called the Window key E to\n\n80\n00:03:57.149 --> 00:03:59.140\nopen up an Explorer here.\n\n81\n00:03:59.140 --> 00:04:00.380\nAnd you can see I got that.\n\n82\n00:04:00.380 --> 00:04:03.510\nAnd I'm gonna just jump into the C drive\n\n83\n00:04:03.510 --> 00:04:06.440\nwhere I have this temporary\nfolder I just call Scratch.\n\n84\n00:04:06.440 --> 00:04:08.720\nAnd we're gonna do a right click and\npaste.\n\n85\n00:04:08.720 --> 00:04:13.480\nAnd now we have all the files that we need\nto go ahead and do this actual set up.\n\n86\n00:04:14.610 --> 00:04:18.800\nNow before this is gonna work we actually\nhave to edit some config files in here.\n\n87\n00:04:18.800 --> 00:04:23.220\nAnd so this is gonna be very familiar to\nwhat we did when we did the user portal.\n\n88\n00:04:23.220 --> 00:04:26.830\nSo I'm going to spread this out a little\nbit so we can see these file names.\n\n89\n00:04:26.830 --> 00:04:29.414\nAnd so in here you can see\nthere's our config file.\n\n90\n00:04:29.414 --> 00:04:33.202\nWe're gonna go ahead and do an open, and\nwe're going to just stick with Notepad.\n\n91\n00:04:33.202 --> 00:04:35.600\nI'll check this just in case.\n\n92\n00:04:35.600 --> 00:04:39.010\nAnd you're gonna see now we\nhave this config file in here.\n\n93\n00:04:39.010 --> 00:04:43.800\nNow, I've already taken\nthe liberty to fill this out.\n\n94\n00:04:43.800 --> 00:04:46.450\nBut I just want to show you some of\nthe things that you're gonna put in here.\n\n95\n00:04:46.450 --> 00:04:48.830\nIt's the same thing that we\ndid with the user portal.\n\n96\n00:04:48.830 --> 00:04:52.640\nSo, if you look right here,\ninto to this, use web services SDK,\n\n97\n00:04:52.640 --> 00:04:56.960\nthere's their true statement,\nwe did that just in the previous episode.\n\n98\n00:04:56.960 --> 00:05:01.094\nThe URL, you want to definitely copy and\npaste this one, it's a mouthful here.\n\n99\n00:05:01.094 --> 00:05:05.528\nSo I don't like typing it, so I copied and\npasted it, and got it right here.\n\n100\n00:05:05.528 --> 00:05:08.920\nAnd then we go down to the next one here,\nand then, here's our username.\n\n101\n00:05:08.920 --> 00:05:11.390\nWe did this again,\nthis username that we used,\n\n102\n00:05:11.390 --> 00:05:15.520\nthis is that user account that we added\ninto the phone factor, Evan's group.\n\n103\n00:05:15.520 --> 00:05:18.720\nThis is how we're gonna connect to that,\nWeb Services SDK.\n\n104\n00:05:18.720 --> 00:05:19.950\nThere's our password.\n\n105\n00:05:19.950 --> 00:05:24.831\nAgain, once you get it working,\nseek other ways to get this encrypted and\n\n106\n00:05:24.831 --> 00:05:26.101\nthen we're done.\n\n107\n00:05:26.101 --> 00:05:28.010\nThat's all we need to do for this.\n\n108\n00:05:28.010 --> 00:05:30.377\nSo we go ahead and make sure that\nwherever you copy this from.\n\n109\n00:05:30.377 --> 00:05:32.760\nYou make sure you have the permissions\nto go ahead and save that file.\n\n110\n00:05:32.760 --> 00:05:35.392\nSo we're going to edit that config file.\n\n111\n00:05:35.392 --> 00:05:38.912\nOnce we're done with\nediting the config file,\n\n112\n00:05:38.912 --> 00:05:43.763\nthen what we need to do is we need\nto edit this PowerShell command.\n\n113\n00:05:43.763 --> 00:05:47.126\nAnd so always do the open with cuz\nif you open with something else,\n\n114\n00:05:47.126 --> 00:05:49.096\nyou might actually just try to run it.\n\n115\n00:05:49.096 --> 00:05:51.639\nSo we're gonna open this up with Notepad.\n\n116\n00:05:51.639 --> 00:05:56.188\nAnd in this command, what we wanna\ndo is we wanna go to the end.\n\n117\n00:05:56.188 --> 00:06:02.590\nAnd we wanna just add this right here\nthis dash configuration file path.\n\n118\n00:06:02.590 --> 00:06:06.950\nAnd then the path to where that file is\nlocated which is going to be on our local.\n\n119\n00:06:06.950 --> 00:06:08.800\nAnd you want to definitely\nput the full path,\n\n120\n00:06:08.800 --> 00:06:12.269\nthat is what we've always told people to\ndo, is to add that full path right there..\n\n121\n00:06:12.269 --> 00:06:14.105\nSo once you have this file set and\n\n122\n00:06:14.105 --> 00:06:17.520\nready to go you're ready to\nactually do the installation.\n\n123\n00:06:17.520 --> 00:06:19.757\n&gt;&gt; Now Mike,\nI know this is another MSI file and\n\n124\n00:06:19.757 --> 00:06:22.551\nin the last episode we had\na special way to get it to run.\n\n125\n00:06:22.551 --> 00:06:23.700\nIs this the same?\n\n126\n00:06:23.700 --> 00:06:25.920\n&gt;&gt; Yes, unfortunately this is\ngonna be the same way here.\n\n127\n00:06:25.920 --> 00:06:29.680\nSo we're gonna do the PowerShell thing and\nwe're gonna go ahead and elevate it up.\n\n128\n00:06:29.680 --> 00:06:32.580\nAnd then unfortunately we're gonna\nhave to do those downloads again with\n\n129\n00:06:32.580 --> 00:06:33.400\nthe renaming there.\n\n130\n00:06:33.400 --> 00:06:36.720\nBut we'll get through that and then we'll\nget on to getting the adapter setup.\n\n131\n00:06:36.720 --> 00:06:38.100\nSo I'm gonna go ahead and\n\n132\n00:06:38.100 --> 00:06:42.189\ndo our sneaky little way of running\nthe PowerShell cmdlet elevated here.\n\n133\n00:06:42.189 --> 00:06:46.364\nAnd then what we'll do is we'll switch\nto that temporary folder that I have.\n\n134\n00:06:46.364 --> 00:06:48.814\nAnd as we can see,\nall of our files are in there.\n\n135\n00:06:48.814 --> 00:06:51.274\nAnd so,\nwe'll just use that Start command, and\n\n136\n00:06:51.274 --> 00:06:54.270\nthen we'll make sure that\nwe load the MSI this way.\n\n137\n00:06:54.270 --> 00:06:57.130\nAnd then what's gonna happen is we're\ngonna see that we need to go ahead and\n\n138\n00:06:57.130 --> 00:06:58.940\ndo this download one more time here.\n\n139\n00:06:58.940 --> 00:07:00.770\nSo we're gonna go ahead and\ndo the download.\n\n140\n00:07:00.770 --> 00:07:05.015\nWe should see iEEs pin up here, and\nthen remember like we did before.\n\n141\n00:07:05.015 --> 00:07:09.864\nWe wanna do that Save As and\nthen add that .exe extension on here.\n\n142\n00:07:09.864 --> 00:07:11.354\nAnd so we'll save that and\n\n143\n00:07:11.354 --> 00:07:15.820\nthen once we're done with using\nour security scan, we'll do a Run.\n\n144\n00:07:15.820 --> 00:07:18.240\nAnd this is again,\nthis is the x64 version.\n\n145\n00:07:18.240 --> 00:07:19.210\nWe'll go ahead and do it.\n\n146\n00:07:19.210 --> 00:07:19.910\nInstall it here.\n\n147\n00:07:21.450 --> 00:07:26.010\nAnd so we'll get through these, these are\ngonna be some pretty quick installs here.\n\n148\n00:07:26.010 --> 00:07:28.410\nAnd then we'll do the command again\n\n149\n00:07:28.410 --> 00:07:31.800\nbecause we need to make sure all\nthose prerequisites are checked.\n\n150\n00:07:31.800 --> 00:07:35.354\nAnd one more time,\nthis time with more feeling of course.\n\n151\n00:07:35.354 --> 00:07:39.324\nAnd then in this case you can see\nwhere we actually have the exe here.\n\n152\n00:07:39.324 --> 00:07:43.940\nSo let's just go ahead and run this\nguy and we'll do the security scan.\n\n153\n00:07:43.940 --> 00:07:45.940\nWe should see the pop up here.\n\n154\n00:07:45.940 --> 00:07:47.860\nAnd then we're good to go.\n\n155\n00:07:47.860 --> 00:07:50.591\nSome more progress bars and\nthen we're good.\n\n156\n00:07:50.591 --> 00:07:53.835\nSo one last time,\nwe'll run the adapter and\n\n157\n00:07:53.835 --> 00:07:57.612\nnow we should actually see\nthe install go forward.\n\n158\n00:07:57.612 --> 00:08:01.276\nAnd in this case, we are actually\nseeing all the files get installed.\n\n159\n00:08:01.276 --> 00:08:04.945\nIn this case what our next step is is\nthat we're gonna actually go ahead and\n\n160\n00:08:04.945 --> 00:08:07.623\ninstall these files and\nkeep that connection going.\n\n161\n00:08:07.623 --> 00:08:10.501\nSo our install is complete, ready to go.\n\n162\n00:08:10.501 --> 00:08:15.258\nNow, the one thing we really have to do is\nwe're gonna run that register multifactor\n\n163\n00:08:15.258 --> 00:08:16.531\nPowerShell command.\n\n164\n00:08:16.531 --> 00:08:20.283\nAnd so I'm already in PowerShell so\nthat was kind of convenient for\n\n165\n00:08:20.283 --> 00:08:23.500\nus, so we'll just go ahead and\nthen just do a run on that.\n\n166\n00:08:25.410 --> 00:08:29.101\nAnd where is it, there it is,\nthere's our register of multifactor.\n\n167\n00:08:29.101 --> 00:08:32.467\nRemember, we've already done all of\nour prep work where we've edited\n\n168\n00:08:32.467 --> 00:08:33.318\nthe config file.\n\n169\n00:08:33.318 --> 00:08:35.040\nWe've got that all fixed up.\n\n170\n00:08:35.040 --> 00:08:39.290\nWe've also changed this PowerShell cmdlet\nto point to where that the config file is.\n\n171\n00:08:39.290 --> 00:08:41.130\nThose are the two critical things.\n\n172\n00:08:41.130 --> 00:08:43.280\nSo we'll go ahead and run this guy.\n\n173\n00:08:43.280 --> 00:08:47.682\nAnd now this is an important message,\n[INAUDIBLE], there we go,\n\n174\n00:08:47.682 --> 00:08:49.890\nmy head was about to cover it up.\n\n175\n00:08:49.890 --> 00:08:51.544\nThis is an important message here.\n\n176\n00:08:51.544 --> 00:08:54.595\nThe authentication provider was\nsuccessfully registered, but\n\n177\n00:08:54.595 --> 00:08:56.709\nto enable it you need to go ahead and\nrestart.\n\n178\n00:08:56.709 --> 00:09:00.005\nDon't restart here because we've\ngot one more step to do and\n\n179\n00:09:00.005 --> 00:09:01.822\nthis is gonna be in the actual UI.\n\n180\n00:09:01.822 --> 00:09:06.161\nSo what I'm gonna do is I'm gonna go\ninto my administrative tools here.\n\n181\n00:09:06.161 --> 00:09:11.142\nAnd I'm gonna actually\nload up the ADFS console,\n\n182\n00:09:11.142 --> 00:09:14.590\nand we have one thing we need to do.\n\n183\n00:09:14.590 --> 00:09:15.340\nNow if we look here,\n\n184\n00:09:15.340 --> 00:09:19.120\nwe go into the services,\nlet's go the authentication method, right?\n\n185\n00:09:19.120 --> 00:09:22.140\nAnd if you can see here,\nwe have a primary authentication method.\n\n186\n00:09:22.140 --> 00:09:24.670\nAnd then we have the multi\nfactor authentication.\n\n187\n00:09:24.670 --> 00:09:26.886\nLook how it says not configured.\n\n188\n00:09:26.886 --> 00:09:30.335\nN ow that we have adapter there we've\nput that footprint so to speak.\n\n189\n00:09:30.335 --> 00:09:37.230\nThat's gonna be that conduit that connects\nthe ADFS server over to the MFA server.\n\n190\n00:09:37.230 --> 00:09:40.200\nSo what we need to do here is we actually\nneed to tell it to go ahead and use it.\n\n191\n00:09:40.200 --> 00:09:43.790\nSo we're gonna say Edit the multifactor\nauthentication and look there.\n\n192\n00:09:43.790 --> 00:09:44.710\nWhat you want to look for\n\n193\n00:09:44.710 --> 00:09:48.570\nright here is this Azure\nmultifactor authentication server.\n\n194\n00:09:48.570 --> 00:09:50.150\nThis is the guy that you want to select.\n\n195\n00:09:50.150 --> 00:09:54.020\nSo we're gonna go ahead and\ncheck that guy there and then we hit OK.\n\n196\n00:09:54.020 --> 00:09:57.540\nAnd then what we need to do is we\njust need to restart the ADFS server.\n\n197\n00:09:57.540 --> 00:09:59.390\nIt's a pretty rudimentary task here.\n\n198\n00:09:59.390 --> 00:10:03.710\nWe won't bore you with that one,\nand then Don I think we're ready.\n\n199\n00:10:03.710 --> 00:10:05.320\nWe've got all the infrastructure set.\n\n200\n00:10:05.320 --> 00:10:08.060\nNow, it's really time to go\ninto that group policy and\n\n201\n00:10:08.060 --> 00:10:09.700\nstart getting some users ready.\n\n202\n00:10:09.700 --> 00:10:12.490\n&gt;&gt; Yeah and this whole task right here\nis one of those that sounds kinda\n\n203\n00:10:12.490 --> 00:10:13.600\nintimidating at first.\n\n204\n00:10:13.600 --> 00:10:15.730\nI've gotta write in an adapter\nto get this to connect.\n\n205\n00:10:15.730 --> 00:10:17.810\nBut at the end of the day,\nit's just a simple text file and\n\n206\n00:10:17.810 --> 00:10:20.640\nas along as we have our syntax proper,\nit's gonna work out, right?\n\n207\n00:10:20.640 --> 00:10:22.174\n&gt;&gt; Yeah,\nit's pretty straightforward there.\n\n208\n00:10:22.174 --> 00:10:24.956\nWe just need to make sure that we\nhave all of the data that we need.\n\n209\n00:10:24.956 --> 00:10:27.558\nAgain we're kind of rebuilding on that.\n\n210\n00:10:27.558 --> 00:10:30.534\nWe've done this for the web services\nSDK when we did the user pool,\n\n211\n00:10:30.534 --> 00:10:31.713\nsame information there.\n\n212\n00:10:31.713 --> 00:10:34.790\nSo once you do it the second time you\nwill feel a little bit more comfortable.\n\n213\n00:10:34.790 --> 00:10:37.256\nYou're gonna edit some PowerShell,\nnot too bad there.\n\n214\n00:10:37.256 --> 00:10:41.612\nBut yeah, as long as we don't type too\nmany typos there we'll be good to go.\n\n215\n00:10:41.612 --> 00:10:45.592\n&gt;&gt; [LAUGH] Like you said, the last step\nfor us is configuring that group policy.\n\n216\n00:10:45.592 --> 00:10:48.806\nTo get this kind of pushed out to our\nusers and other configurations in place\n\n217\n00:10:48.806 --> 00:10:52.310\nBut we'll save that for the next episode,\nso it's nice granular pieces.\n\n218\n00:10:52.310 --> 00:10:53.520\nSo right here, we'll go and wrap up.\n\n219\n00:10:53.520 --> 00:10:55.470\nDo you have any last comments\nbefore we close this one out?\n\n220\n00:10:55.470 --> 00:10:56.820\n&gt;&gt; Nope, we're almost there.\n\n221\n00:10:56.820 --> 00:10:59.740\n&gt;&gt; All right, well ladies and\ngentlemen be sure to stay tune as we get\n\n222\n00:10:59.740 --> 00:11:03.310\nto the final step of our configuration for\nWindows Hello for Business.\n\n223\n00:11:03.310 --> 00:11:06.540\nBut for right now, we're gonna wrap this\none up so signing off for IT Pro TV,\n\n224\n00:11:06.540 --> 00:11:08.120\nI am your host Don Pezet.\n\n225\n00:11:08.120 --> 00:11:09.210\n&gt;&gt; And I'm Mike Stephens.\n\n226\n00:11:09.210 --> 00:11:10.059\n&gt;&gt; And we'll see you next time.\n\n227\n00:11:10.059 --> 00:11:17.173\n[MUSIC]\n\n228\n00:11:17.173 --> 00:11:20.149\nThank you for watching ITProTV.\n\n",
          "vimeoId": "216669078"
        },
        {
          "description": "In this episode, Don and Mike walk the viewers through the final steps of configuring Windows Hello for Business. Mike discusses some of the group policy object settings that can be used to deploy Windows Hello to your end users. Finally, he creates and deploys the required GPO.",
          "length": "1343",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-11-configuring_group_policy-050517.00_22_21_22.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-11-configuring_group_policy-050517.00_22_21_22.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-11-configuring_group_policy-050517.00_22_21_22.Still001-sm.jpg",
          "title": "Configuring Group Policy",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:03.235\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:03.235 --> 00:00:07.282\n[CROSSTALK]\n\n3\n00:00:07.282 --> 00:00:12.791\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.791 --> 00:00:14.501\n&gt;&gt; All right, ladies and gentlemen,\n\n5\n00:00:14.501 --> 00:00:16.668\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:16.668 --> 00:00:20.430\nI'm your host, Don Pezet back again with\nanother episode of Windows Hello for\n\n7\n00:00:20.430 --> 00:00:21.290\nBusiness.\n\n8\n00:00:21.290 --> 00:00:23.910\nAnd in this episode,\nit's time for the final step.\n\n9\n00:00:23.910 --> 00:00:26.470\nWe're gonna be completing our\nconfiguration by implementing\n\n10\n00:00:26.470 --> 00:00:27.710\na group policy object.\n\n11\n00:00:27.710 --> 00:00:30.080\nOr really you could do\nmultiple GPOs if you wanted.\n\n12\n00:00:30.080 --> 00:00:33.950\nBut we're gonna take a look at the group\npolicies needed to power Windows Hello for\n\n13\n00:00:33.950 --> 00:00:36.140\nBusiness to get this\ndeployed on our network.\n\n14\n00:00:36.140 --> 00:00:40.190\nAnd back once more to help us along, our\nWindows Hello for Business journey, Mr.\n\n15\n00:00:40.190 --> 00:00:41.850\nMike Stevens, thanks for joining us again.\n\n16\n00:00:41.850 --> 00:00:43.265\n&gt;&gt; Thanks for having me back, sir.\n\n17\n00:00:43.265 --> 00:00:46.591\n&gt;&gt; And you know,\nI said our journey is almost at its end.\n\n18\n00:00:46.591 --> 00:00:49.915\nAnd we're kind of nearing\nthe last little components here,\n\n19\n00:00:49.915 --> 00:00:52.265\nwhat exactly haven't we gotten to yet?\n\n20\n00:00:52.265 --> 00:00:56.365\n&gt;&gt; So, what we haven't gotten to is\nthe part where it's really exciting.\n\n21\n00:00:56.365 --> 00:00:58.805\nWe're gonna look at the actual\ngroup policy object today.\n\n22\n00:00:58.805 --> 00:01:00.115\nWe're gonna look at the those settings,\n\n23\n00:01:00.115 --> 00:01:03.390\nand how are we gonna just kinda like\ndot the i to our deployment here.\n\n24\n00:01:03.390 --> 00:01:05.310\nSo we're gonna talk about\nthe actual Windows Hello for\n\n25\n00:01:05.310 --> 00:01:06.970\nBusiness policy settings.\n\n26\n00:01:06.970 --> 00:01:09.760\nWe're also gonna do a little\nrepeat action of what we did with\n\n27\n00:01:09.760 --> 00:01:12.190\nthe automatic certificate enrollment.\n\n28\n00:01:12.190 --> 00:01:15.889\nSo that way they these certificates that\nwe're gonna get they're gonna actually\n\n29\n00:01:15.889 --> 00:01:16.970\nrenew automatically.\n\n30\n00:01:16.970 --> 00:01:19.620\nSo that we don't have that\nmaintenance section there.\n\n31\n00:01:19.620 --> 00:01:21.710\n&gt;&gt; But there's a bit of a flashback,\nright?\n\n32\n00:01:21.710 --> 00:01:23.790\nIf you go way back to\nthe beginning of the series,\n\n33\n00:01:23.790 --> 00:01:27.180\nwe kind of started out\nwith setting up a CA.\n\n34\n00:01:27.180 --> 00:01:29.990\nAnd getting automatic\ncertificate enrollment in place.\n\n35\n00:01:29.990 --> 00:01:32.580\nWe did some certificate templates and\nwe started pushing those out.\n\n36\n00:01:32.580 --> 00:01:34.844\nAnd we used a group policy for that,,\nso here we've kinda gone full circle.\n\n37\n00:01:34.844 --> 00:01:38.290\nWe're going back to the group policy\nagain, not for auto enrollment.\n\n38\n00:01:38.290 --> 00:01:41.790\nBut for actually getting people\nparticipating in the Windows Hello for\n\n39\n00:01:41.790 --> 00:01:42.440\nBusiness environment.\n\n40\n00:01:42.440 --> 00:01:45.100\n&gt;&gt; Well actually, Don,\nwe are going to use auto enrollment.\n\n41\n00:01:45.100 --> 00:01:48.100\nBut you brought up a big point is that\nwe're gonna use it for the users,\n\n42\n00:01:48.100 --> 00:01:49.450\nnot just for the computers.\n\n43\n00:01:49.450 --> 00:01:51.270\nIn the early thing we did this for\nthe computers,\n\n44\n00:01:51.270 --> 00:01:53.740\nto switch that domain\ncontrollers certificate over.\n\n45\n00:01:53.740 --> 00:01:56.965\nBut you are right, we are gonna use auto\nenrolment but this time it's gonna be for\n\n46\n00:01:56.965 --> 00:01:57.545\nthose users.\n\n47\n00:01:57.545 --> 00:02:00.263\nBecause after they go through\nthat provisioning process and\n\n48\n00:02:00.263 --> 00:02:01.640\nthey get that certificate.\n\n49\n00:02:01.640 --> 00:02:05.790\nWe want to keep that automated and\nhands-off as much as possible.\n\n50\n00:02:05.790 --> 00:02:10.320\nSo the first thing that we need to do\nthough is these group policy settings.\n\n51\n00:02:10.320 --> 00:02:13.510\nThey're a part of\nthe Creator's Update series, so\n\n52\n00:02:13.510 --> 00:02:16.520\nyou're gonna need a Windows\n10 Creator's Update.\n\n53\n00:02:16.520 --> 00:02:20.860\nAnd these are settings that are shipping\nin that particular version of the OS.\n\n54\n00:02:20.860 --> 00:02:23.550\nSo you're gonna need to\nhave that version of\n\n55\n00:02:23.550 --> 00:02:26.530\nOES in order to apply this policy setting.\n\n56\n00:02:26.530 --> 00:02:30.870\nNow, it's perfectly okay to apply these\npolicy settings to even non Windows,\n\n57\n00:02:30.870 --> 00:02:32.565\n10 machines, and so forth.\n\n58\n00:02:32.565 --> 00:02:36.866\nBecause well, this is just gonna put\ninformation in the registry that those\n\n59\n00:02:36.866 --> 00:02:38.352\nmachines are unaware of.\n\n60\n00:02:38.352 --> 00:02:40.090\nAnd so they'll just ignore those settings.\n\n61\n00:02:40.090 --> 00:02:42.880\nSo it's okay to do that\nmanagement from the latest group\n\n62\n00:02:42.880 --> 00:02:44.940\npolicy management console,\nwith the latest settings.\n\n63\n00:02:44.940 --> 00:02:48.070\nIn fact, that's always been\nthe recommendation for group policies,\n\n64\n00:02:48.070 --> 00:02:50.040\nto use the latest management console.\n\n65\n00:02:50.040 --> 00:02:54.280\nAnd you can manage current and\ndown level as much as possible.\n\n66\n00:02:54.280 --> 00:02:59.108\nI have a Windows 10 Creators Update, and\nhow I got group policy on there is I\n\n67\n00:02:59.108 --> 00:03:02.110\nwent and installed the remote\nserver adminstration tools.\n\n68\n00:03:02.110 --> 00:03:03.970\nYou're gonna want to go ahead and\nput those on.\n\n69\n00:03:03.970 --> 00:03:07.640\nYou can use the actual\nAnniversary Edition of those tools.\n\n70\n00:03:07.640 --> 00:03:09.630\nIt's just fine for that,\nwe're okay with that.\n\n71\n00:03:09.630 --> 00:03:13.410\nBut once the actual Creator Update\nversion of those tools come out,\n\n72\n00:03:13.410 --> 00:03:16.300\nbe sure to use those latest and\ngreatest ones as well.\n\n73\n00:03:16.300 --> 00:03:19.945\nAnd so, if we look here I have the group,\nwell Policy Management console up and\n\n74\n00:03:19.945 --> 00:03:20.450\nrunning.\n\n75\n00:03:20.450 --> 00:03:23.630\nAnd I'm going to go to this Group Policy\nObjects node where we have all of\n\n76\n00:03:23.630 --> 00:03:26.100\nthe settings that we created previously.\n\n77\n00:03:26.100 --> 00:03:29.700\nAnd I'm going to go ahead and\ndo New Group Policy Object.\n\n78\n00:03:29.700 --> 00:03:33.800\nAnd in here, I'm just gonna call this one,\nthis particular policy object,\n\n79\n00:03:33.800 --> 00:03:36.040\nI'm just going to call it\nWindows Hello for Business.\n\n80\n00:03:37.760 --> 00:03:42.386\nAnd so, give it a good name, in fact\nwe'll be a little bit more descriptive.\n\n81\n00:03:42.386 --> 00:03:45.610\nAnd we'll say Enable,\nso we have our policy.\n\n82\n00:03:45.610 --> 00:03:49.640\nLet's go ahead and create this guy,\nand here it is right here.\n\n83\n00:03:49.640 --> 00:03:51.260\nLet's go ahead and edit him.\n\n84\n00:03:51.260 --> 00:03:54.030\nSo we now have it edited, and\n\n85\n00:03:54.030 --> 00:03:57.860\nwhat we need to do is these\nare gonna be user policy settings.\n\n86\n00:03:57.860 --> 00:04:01.140\nYou can deploy some of these\nsettings to the computer.\n\n87\n00:04:01.140 --> 00:04:04.673\nBut then that means anybody who logs\ninto that computer is going to get these\n\n88\n00:04:04.673 --> 00:04:05.246\nsettings.\n\n89\n00:04:05.246 --> 00:04:07.060\nAnd they may not have been provisioned.\n\n90\n00:04:07.060 --> 00:04:11.290\nSo what I like to do is have a phased\napproach with that way I can say.\n\n91\n00:04:11.290 --> 00:04:15.130\nLet's do the users of accounting first,\nlet's maybe do some IT people.\n\n92\n00:04:15.130 --> 00:04:17.707\nGet that phase approach get\nsome user acceptance testing.\n\n93\n00:04:17.707 --> 00:04:20.788\nAnd make sure that you have it\ndeployed in a way that's gonna make\n\n94\n00:04:20.788 --> 00:04:25.760\nyour users at least equally, if not better\nproductive, but signing in more securely.\n\n95\n00:04:25.760 --> 00:04:28.370\nSo let's go ahead and\ngo through these policies here.\n\n96\n00:04:28.370 --> 00:04:29.900\nWe've got user policies here, and\n\n97\n00:04:29.900 --> 00:04:32.130\nthen we're gonna expand these\nadministrative templates.\n\n98\n00:04:33.150 --> 00:04:36.650\nAnd we're gonna go through\nthe Windows components.\n\n99\n00:04:36.650 --> 00:04:42.110\nAnd we scroll down here, we're gonna\nsee Windows Hello for Business in here.\n\n100\n00:04:42.110 --> 00:04:46.140\nSo, we don't see it,\ndoing this on purpose.\n\n101\n00:04:46.140 --> 00:04:47.210\nHere's the thing,\n\n102\n00:04:47.210 --> 00:04:52.490\nthere's a neat feature in Group Policy\ncalled the Group Policy Central Store.\n\n103\n00:04:52.490 --> 00:04:55.600\nAnd in that particular Central Store,\nyou can sit there and\n\n104\n00:04:55.600 --> 00:05:00.110\ntake all of the ADMX files and\nADML files that come with Windows.\n\n105\n00:05:00.110 --> 00:05:02.284\nAnd you can use those particular files,\nand\n\n106\n00:05:02.284 --> 00:05:04.531\nyou can put the out on\nthe domain controller.\n\n107\n00:05:04.531 --> 00:05:09.247\nTo where you can actually have one\nset of files that every client that\n\n108\n00:05:09.247 --> 00:05:12.220\nuses to manage these, works with.\n\n109\n00:05:12.220 --> 00:05:15.580\nThe problem is, is that,\nthis is the Creator's Update, as I said.\n\n110\n00:05:15.580 --> 00:05:19.560\nThose policy settings are only\nin the Creator's Update.\n\n111\n00:05:19.560 --> 00:05:23.500\nIf you look at the Server 2016,\nor any of the other ones,\n\n112\n00:05:23.500 --> 00:05:24.720\nthey don't have those settings there.\n\n113\n00:05:24.720 --> 00:05:27.345\nSo there's a good chance that\nyou're not gonna have those.\n\n114\n00:05:27.345 --> 00:05:28.724\nBut you could say, well,\n\n115\n00:05:28.724 --> 00:05:32.501\nhow do I know that I'm using the actual\nCentral Store how I'm using it?\n\n116\n00:05:32.501 --> 00:05:34.036\nBecause I don't know what I'm looking for.\n\n117\n00:05:34.036 --> 00:05:37.418\nAnd so, I know what I'm looking for\nbecause I'm sitting there saying,\n\n118\n00:05:37.418 --> 00:05:38.756\nI don't see anything here.\n\n119\n00:05:38.756 --> 00:05:41.957\nBecause my domain controller,\nwell it's a 2012.\n\n120\n00:05:41.957 --> 00:05:45.530\nIt was never any of the Windows Hello\npolicies in there to begin with.\n\n121\n00:05:45.530 --> 00:05:48.107\nHow we can tell, here's a really\nneat trick that you can do.\n\n122\n00:05:48.107 --> 00:05:52.150\nIs if you go up to this Administrative\nTemplates, you can highlight this.\n\n123\n00:05:52.150 --> 00:05:55.130\nAnd it'll tell you that these were\nretrieved from the Central Store.\n\n124\n00:05:55.130 --> 00:05:57.450\nA lot of times no one knows about that.\n\n125\n00:05:57.450 --> 00:06:00.620\nThe other great thing you can do is,\nif you take this little splitter bar and\n\n126\n00:06:00.620 --> 00:06:02.570\nyou move it all the way over.\n\n127\n00:06:02.570 --> 00:06:05.290\nYou can see here, too, it tells you\nthat they're from the Central Store.\n\n128\n00:06:05.290 --> 00:06:08.170\nThis is just a little cheat that\nI've discovered that you can use.\n\n129\n00:06:08.170 --> 00:06:11.110\nTo where you can say okay I know\nthat I'm actually getting these\n\n130\n00:06:11.110 --> 00:06:12.510\nfrom the Central Store.\n\n131\n00:06:12.510 --> 00:06:18.420\nSo we need to pick, either we're gonna\nuse the local policy definitions,\n\n132\n00:06:18.420 --> 00:06:19.830\nor we're gonna use the Central Store ones.\n\n133\n00:06:19.830 --> 00:06:23.550\nAnd since we need to do this, we're gonna\ngo ahead and disable the Central Store.\n\n134\n00:06:23.550 --> 00:06:26.440\nBut we're gonna do it in a way to\nwhere we don't delete any files.\n\n135\n00:06:26.440 --> 00:06:29.252\nWe're just gonna make some little,\nsmall changes there.\n\n136\n00:06:29.252 --> 00:06:32.770\nSo that way we can do our\nnew group policy settings.\n\n137\n00:06:32.770 --> 00:06:35.903\nYou will need to go ahead and close out\nof the Group Policy Management Console.\n\n138\n00:06:35.903 --> 00:06:41.300\nBecause it checks for that Central Store\nat the time you start it up.\n\n139\n00:06:41.300 --> 00:06:44.520\nWhat I'm going to do is I'm gonna go\nover to my domain controller here.\n\n140\n00:06:45.570 --> 00:06:51.400\nAnd I'm gonna close out of this,\nand I'm gonna open up my Explorer.\n\n141\n00:06:51.400 --> 00:06:55.576\nAnd I'm gonna go to that sys\nfile location on our machine.\n\n142\n00:06:55.576 --> 00:07:00.153\nSo we've got system32,\nsys file right here.\n\n143\n00:07:00.153 --> 00:07:03.848\nWe're gonna go to that sys file again,\nthere's our domain.\n\n144\n00:07:03.848 --> 00:07:05.574\nAnd in Policies, and right here,\n\n145\n00:07:05.574 --> 00:07:09.200\nthis is where you see that sys\nfile at that Central Store folder.\n\n146\n00:07:09.200 --> 00:07:12.649\nAnd all we really need to do is\nwe can just edit this folder.\n\n147\n00:07:12.649 --> 00:07:17.320\nAnd what I do, what I typically do is\njust take the s off of the end there.\n\n148\n00:07:17.320 --> 00:07:19.320\nSo that way, I've just renamed the folder.\n\n149\n00:07:19.320 --> 00:07:22.500\nI haven't deleted anything,\nall of those things still stay in place,\n\n150\n00:07:22.500 --> 00:07:24.240\neverything is working great.\n\n151\n00:07:24.240 --> 00:07:27.510\nSo now what we have to do is\ngo back over to my client.\n\n152\n00:07:27.510 --> 00:07:30.690\nNow let me start up\nGroup Policy Management Console again.\n\n153\n00:07:30.690 --> 00:07:35.986\nAnd so, let me find my Windows Hello\npolicy where I was editing.\n\n154\n00:07:35.986 --> 00:07:40.860\nAnd I go Edit here, and now what I can\ndo is that same check that I did before.\n\n155\n00:07:40.860 --> 00:07:44.470\nLet me go into Policies and\nAdministrative Templates, it's right here.\n\n156\n00:07:44.470 --> 00:07:48.662\nI can sit there and stretch that guy out,\nand it says, now they're actually being\n\n157\n00:07:48.662 --> 00:07:52.463\nretrieved from the local computer,\nnot getting them from the Central Store.\n\n158\n00:07:52.463 --> 00:07:55.461\nSo now I know that the policy\nsettings that I'm getting,\n\n159\n00:07:55.461 --> 00:07:59.343\nthese are actually the policy settings\nfrom my Creators Update Edition.\n\n160\n00:07:59.343 --> 00:08:03.383\nSo, Now, we can do that, let's get\nthis screen back to some viewable\n\n161\n00:08:03.383 --> 00:08:07.430\nreal estate here, and let's continue\non our quest for this policy.\n\n162\n00:08:07.430 --> 00:08:09.210\nSo, we're gonna go down\nto Windows Components.\n\n163\n00:08:09.210 --> 00:08:10.990\nWe're gonna scroll down here, and\n\n164\n00:08:10.990 --> 00:08:15.030\nthen we should be seeing the Windows Hello\nfor Business right here.\n\n165\n00:08:15.030 --> 00:08:16.810\nLet's give us a little more room.\n\n166\n00:08:16.810 --> 00:08:19.190\nLet's double click this guy.\n\n167\n00:08:19.190 --> 00:08:21.180\nStretch these things out a little bit,\nso we can see.\n\n168\n00:08:21.180 --> 00:08:23.390\nSo, here's our Windows Hello for Business.\n\n169\n00:08:23.390 --> 00:08:24.550\nNow, right off the bat,\n\n170\n00:08:24.550 --> 00:08:28.040\nyou see the two policy settings\nthat we're really interested in.\n\n171\n00:08:28.040 --> 00:08:30.260\nAnd this is the used Windows Hello for\nBusiness.\n\n172\n00:08:30.260 --> 00:08:32.350\nThis enables Windows Hello for Business.\n\n173\n00:08:32.350 --> 00:08:33.980\nThis is what we're gonna turn on here.\n\n174\n00:08:33.980 --> 00:08:38.330\nSo, we're gonna put on the Enable,\nuse Hello for Business.\n\n175\n00:08:38.330 --> 00:08:40.910\nWe're gonna enable that\npolicy setting right there.\n\n176\n00:08:40.910 --> 00:08:44.330\nAnd then we click OK,\ngive us some more real estate.\n\n177\n00:08:45.410 --> 00:08:50.120\nAnd then we mentioned very early in the\nbeginning how we had certificate trust and\n\n178\n00:08:50.120 --> 00:08:51.490\nkey trust.\n\n179\n00:08:51.490 --> 00:08:53.740\nBy default everything is key trust,\n\n180\n00:08:54.750 --> 00:08:58.780\nhow we determine that whether we're\ngoing to do a Certificate Trust Models?\n\n181\n00:08:58.780 --> 00:09:00.080\nThis policy setting right here.\n\n182\n00:09:00.080 --> 00:09:03.530\nThis use certificate for\non premises authentication.\n\n183\n00:09:03.530 --> 00:09:06.450\nRemember we said that the Kitcher's\nmodel always determine\n\n184\n00:09:06.450 --> 00:09:09.235\nhow you're going to\nauthenticate to the on prim\n\n185\n00:09:09.235 --> 00:09:12.085\nnetwork to those domain\ncontrollers that you have on prim.\n\n186\n00:09:12.085 --> 00:09:15.575\nSo, what we wanna do is,\nwe are deploying a sort trust model, so\n\n187\n00:09:15.575 --> 00:09:17.615\nwe wanna go ahead and enable that guy.\n\n188\n00:09:17.615 --> 00:09:20.795\nSo, now, we have those two policies\nheading set, we're ready to go for\n\n189\n00:09:20.795 --> 00:09:24.875\nthere, but we also need to do\nautomatic certificate enrollment.\n\n190\n00:09:26.170 --> 00:09:30.660\nAnd that's a user setting policy that's\ngonna be up in the security settings.\n\n191\n00:09:30.660 --> 00:09:33.780\nAnd, now, the great thing about\ngroup policy is we can combine\n\n192\n00:09:33.780 --> 00:09:36.920\nall these settings,\nbecause all these settings are needed for\n\n193\n00:09:36.920 --> 00:09:41.437\nus to complete our actual\nWindows Hello for Business setting.\n\n194\n00:09:41.437 --> 00:09:43.770\n&gt;&gt; And while we can combine them,\nwe don't have to, right?\n\n195\n00:09:43.770 --> 00:09:46.250\nBecause we might already have certificate\nauto-enrollment for something else.\n\n196\n00:09:46.250 --> 00:09:49.010\nSo, we might wanna have that\ngranular in separate, right?\n\n197\n00:09:49.010 --> 00:09:52.590\n&gt;&gt; Absolutely, the great thing and love I\nhave for group policies is that you can\n\n198\n00:09:52.590 --> 00:09:56.720\nmanage it, there's no real wrong way, how\nI usually tell people is the wrong way is\n\n199\n00:09:56.720 --> 00:09:58.956\nwhen it doesn't give you\nthe results that you want.\n\n200\n00:09:58.956 --> 00:10:01.970\n&gt;&gt; [LAUGH]\n&gt;&gt; But otherwise, you can do it as many\n\n201\n00:10:01.970 --> 00:10:04.840\ndifferent ways as you can,\nthat's the great power of group policy.\n\n202\n00:10:04.840 --> 00:10:06.400\nIn this particular situation,\n\n203\n00:10:06.400 --> 00:10:09.460\nwe're gonna go ahead and group all of\nthese in one particular policy setting.\n\n204\n00:10:09.460 --> 00:10:15.460\nSo, what I'm going to do is, I'm going to\nscroll up to the security stuff here into\n\n205\n00:10:15.460 --> 00:10:19.850\nWindows settings, and then we're gonna go\ninto the security settings folder here.\n\n206\n00:10:19.850 --> 00:10:21.750\nAnd then,\nwe have those public key policies and\n\n207\n00:10:21.750 --> 00:10:24.650\nthen we have our certificate\nauto-enrollment.\n\n208\n00:10:24.650 --> 00:10:27.790\nSo, we're gonna open that and\nwe're gonna enable this.\n\n209\n00:10:27.790 --> 00:10:30.790\nAnd we're gonna check the boxes for\nrenew and update.\n\n210\n00:10:31.810 --> 00:10:34.680\nSo, now,\nwe've got our auto-enrolment policy set.\n\n211\n00:10:34.680 --> 00:10:36.680\nSo, we're just about done.\n\n212\n00:10:36.680 --> 00:10:38.430\nWe've got all the settings that we need.\n\n213\n00:10:38.430 --> 00:10:40.970\nBut, now, what we need to do\nis we need to go ahead and\n\n214\n00:10:40.970 --> 00:10:43.970\nconfigure the security on this.\n\n215\n00:10:43.970 --> 00:10:46.600\nWe don't want anybody\njust enrolling in this,\n\n216\n00:10:46.600 --> 00:10:48.680\nwhich is the way the default settings are.\n\n217\n00:10:48.680 --> 00:10:51.880\nSo, we're gonna go ahead, and\nclose out of the actual editor and\n\n218\n00:10:51.880 --> 00:10:53.700\nwe're back at our policy.\n\n219\n00:10:53.700 --> 00:10:57.360\nRight here, so let's go ahead, and\nlet's highlight that one just one for\n\n220\n00:10:57.360 --> 00:10:58.710\nbusiness policy here.\n\n221\n00:10:58.710 --> 00:11:01.440\nAnd as you can see right here\nin our security filtering\n\n222\n00:11:01.440 --> 00:11:03.550\nwe have authenticated users.\n\n223\n00:11:03.550 --> 00:11:07.860\nWhat we need to do here is we need to add,\nand we wanna the Windows Hello for\n\n224\n00:11:07.860 --> 00:11:09.060\nBusiness users group.\n\n225\n00:11:09.060 --> 00:11:11.850\nIf you remember that's\nthe group that we were using\n\n226\n00:11:11.850 --> 00:11:14.010\nto gate all of our authentication.\n\n227\n00:11:14.010 --> 00:11:17.400\nSo, I should be able to just go with\nWindows Hello and do a check name.\n\n228\n00:11:17.400 --> 00:11:18.010\nAnd there we go.\n\n229\n00:11:18.010 --> 00:11:21.030\nI have my Windows Hello for\nBusiness users group here.\n\n230\n00:11:21.030 --> 00:11:24.120\nAnd so, in this setting,\nwhen we click OK, now,\n\n231\n00:11:24.120 --> 00:11:29.430\nwe have both authenticated users, and\nWindows Hello for Business in here.\n\n232\n00:11:29.430 --> 00:11:32.860\nBut, again, authenticated users,\nwe don't want everybody getting this.\n\n233\n00:11:32.860 --> 00:11:33.940\nWe need to really gate this.\n\n234\n00:11:33.940 --> 00:11:38.470\nSo, what we wanna do, is we wanna go\ndown to the delegation part of this.\n\n235\n00:11:39.520 --> 00:11:41.860\nAnd in here,\nthis is a little bit of a tricky UI.\n\n236\n00:11:41.860 --> 00:11:44.160\nWe wanna go to this advance down here.\n\n237\n00:11:45.380 --> 00:11:48.450\nAnd in this advanced setting, it's gonna\nactually bring up the permissions for\n\n238\n00:11:48.450 --> 00:11:49.620\nthis group policy object.\n\n239\n00:11:49.620 --> 00:11:52.970\nAnd authenticated users,\nyou're gonna see that it has Read and\n\n240\n00:11:52.970 --> 00:11:54.620\nit has Apply group policy.\n\n241\n00:11:54.620 --> 00:11:57.500\nNow, authenticated users must have Read,\n\n242\n00:11:57.500 --> 00:11:59.940\nno matter what you do you'll always\nhave to keep the Read there.\n\n243\n00:11:59.940 --> 00:12:05.180\nBut we don't just want any authenticated\nuser to apply this policy setting.\n\n244\n00:12:05.180 --> 00:12:08.960\nSo, we're gonna uncheck this box to\nensure that the authenticated users\n\n245\n00:12:08.960 --> 00:12:12.420\nwhile they can read it they're\nnot gonna be able to apply it.\n\n246\n00:12:12.420 --> 00:12:15.410\nThe other thing that we need to\nscroll down here is if you look at is\n\n247\n00:12:15.410 --> 00:12:17.160\nwe have domain admins.\n\n248\n00:12:17.160 --> 00:12:20.902\nAnd if we look at domain\nadmins they have Read as well.\n\n249\n00:12:20.902 --> 00:12:24.846\nWe wanna make sure that the domain admins\ndo not have that applied group policy\n\n250\n00:12:24.846 --> 00:12:27.818\nsetting, because we don't want\nevery time a domain admin\n\n251\n00:12:27.818 --> 00:12:32.080\nauthenticates to a Window hello machine\nthat they start this enrollment process.\n\n252\n00:12:32.080 --> 00:12:33.384\nAnd then we'll double check that for\n\n253\n00:12:33.384 --> 00:12:35.370\nthe enterprise one that\nwe know we don't have it.\n\n254\n00:12:35.370 --> 00:12:38.480\nSo, now,\nwe have our group policies settings set,\n\n255\n00:12:38.480 --> 00:12:41.810\nwe have auto enrollment set and, now,\nwe've done our permissions here.\n\n256\n00:12:41.810 --> 00:12:43.631\nSo, I think, we're about ready here, now,\n\n257\n00:12:43.631 --> 00:12:45.606\nwhat we're gonna do is\nwe're gonna deploy this.\n\n258\n00:12:45.606 --> 00:12:50.110\nNow, you can deploy this group\npolicy object to wherever you want.\n\n259\n00:12:50.110 --> 00:12:54.578\nIf you have OUs, like if you look in mine,\nI have Human Resources, Marketing,\n\n260\n00:12:54.578 --> 00:12:55.192\nand R&amp;D.\n\n261\n00:12:55.192 --> 00:12:58.960\nYou can deploy this setting\nto any one of those OUs.\n\n262\n00:12:58.960 --> 00:13:02.370\nFor my particular,\nthe way I like to do it is,\n\n263\n00:13:02.370 --> 00:13:05.490\nbecause I wanna make sure that\nthis is gonna apply to all users.\n\n264\n00:13:05.490 --> 00:13:08.030\nI'm gonna go ahead and\napply it to our domain.\n\n265\n00:13:08.030 --> 00:13:09.940\n&gt;&gt; Now, we do wanna be a little\nbit careful here though, right,\n\n266\n00:13:09.940 --> 00:13:12.800\nbecause while we just went in there and\nconfigured one, or two settings,\n\n267\n00:13:12.800 --> 00:13:16.120\nthere were a lot of Windows Hello for\nBusiness settings in there, right?\n\n268\n00:13:16.120 --> 00:13:20.260\nI mean, there's a ton of group\npolicy settings, just period, right?\n\n269\n00:13:20.260 --> 00:13:20.760\n&gt;&gt; Yep.\n\n270\n00:13:20.760 --> 00:13:23.020\n&gt;&gt; But even for Windows Hello for\nBusinesses, a lot of different components.\n\n271\n00:13:23.020 --> 00:13:26.300\nSo, when we attach it to the domain\nlevel that's going to apply one way for\n\n272\n00:13:26.300 --> 00:13:26.860\neverybody.\n\n273\n00:13:26.860 --> 00:13:28.740\nIf we wanna have different\nconfigurations for\n\n274\n00:13:28.740 --> 00:13:31.760\ndifferent people,\nthere were other options in there, right?\n\n275\n00:13:31.760 --> 00:13:32.630\n&gt;&gt; Certainly there are.\n\n276\n00:13:32.630 --> 00:13:35.870\nIf we're gonna have different options,\nsay, like where we wanna do some different\n\n277\n00:13:35.870 --> 00:13:39.380\nthings, then we can break this up into\nmultiple group policy objects for sure.\n\n278\n00:13:39.380 --> 00:13:42.230\nBecause there are some other\nsettings that we can do.\n\n279\n00:13:42.230 --> 00:13:44.730\nIn fact, before we do that\nlinking let's go ahead and\n\n280\n00:13:44.730 --> 00:13:46.710\nlook at this policy setting we have.\n\n281\n00:13:46.710 --> 00:13:48.940\nAnd let's go back into\nour group policy objects.\n\n282\n00:13:48.940 --> 00:13:52.110\nAnd let's edit that, cuz there's quite\na few other ones I wanna touch on for\n\n283\n00:13:52.110 --> 00:13:53.860\nyou guys to show you.\n\n284\n00:13:53.860 --> 00:13:54.390\nFirst of all,\n\n285\n00:13:54.390 --> 00:13:58.560\nthe thing to show you is that there are\nsome computer only policies that we have.\n\n286\n00:13:58.560 --> 00:14:02.025\nSo, a lot of times we make policies\nto where they can be deployed to\n\n287\n00:14:02.025 --> 00:14:03.607\nthe computer and to the user.\n\n288\n00:14:03.607 --> 00:14:08.115\nNow, why we do that is it's really to\ngive you guys the administrators granular\n\n289\n00:14:08.115 --> 00:14:09.200\ncontrol.\n\n290\n00:14:09.200 --> 00:14:13.625\nThe idea behind group policy is that if\nyou have a very common set of settings,\n\n291\n00:14:13.625 --> 00:14:16.568\nyou just do those and\ndeploy those to the computer.\n\n292\n00:14:16.568 --> 00:14:19.403\nAnd then any user who signs\nin can get those settings,\n\n293\n00:14:19.403 --> 00:14:22.310\nyou can reuse those things\nas much as you want.\n\n294\n00:14:22.310 --> 00:14:25.094\nBut then there might be where\nI have that one user, or\n\n295\n00:14:25.094 --> 00:14:28.825\nthis one group of users that, well,\nI need to give them a special set of\n\n296\n00:14:28.825 --> 00:14:31.823\nsettings that isn't consistent\nwith the common ones.\n\n297\n00:14:31.823 --> 00:14:36.286\nThe idea there is you can deploy those\nsettings to the actual user section\n\n298\n00:14:36.286 --> 00:14:37.393\nof group policy.\n\n299\n00:14:37.393 --> 00:14:42.342\nAnd the way the group policy works is\nthat you will get computer unless you get\n\n300\n00:14:42.342 --> 00:14:42.892\na user.\n\n301\n00:14:42.892 --> 00:14:46.402\nSo, the user settings will override in\nmost cases, at least I can tell you for\n\n302\n00:14:46.402 --> 00:14:47.212\nWindows Hello for\n\n303\n00:14:47.212 --> 00:14:50.455\nBusiness, the user settings always\noverride the computer settings.\n\n304\n00:14:50.455 --> 00:14:53.705\nSo, you can get very fine granular control\n\n305\n00:14:53.705 --> 00:14:57.105\nof when you need to have the user\nhave a special setting without doing\n\n306\n00:14:57.105 --> 00:15:00.875\ncreating additional more complexity\nthings within your environment.\n\n307\n00:15:00.875 --> 00:15:03.515\nSo, let's look at the computer\nones here right now.\n\n308\n00:15:03.515 --> 00:15:06.635\nAnd, again, it's in that same space that\nwe're going to go to is that Windows\n\n309\n00:15:06.635 --> 00:15:07.725\ncomponents.\n\n310\n00:15:07.725 --> 00:15:11.960\nWe're going to go down, and then we\nhave Windows Hello for Business here.\n\n311\n00:15:11.960 --> 00:15:14.730\nAnd if you look at Windows Hello for\nBusiness, we have to use a hardware\n\n312\n00:15:14.730 --> 00:15:19.450\nsecurity device, I mentioned that we have\nability to where we can actually say, hey,\n\n313\n00:15:19.450 --> 00:15:22.960\nI wanna make sure that you\nnever fall back to software,\n\n314\n00:15:22.960 --> 00:15:24.940\nI always want that strong hardware key.\n\n315\n00:15:24.940 --> 00:15:28.330\nWe have ability to turn that on,\nwe also the ability to where we say,\n\n316\n00:15:28.330 --> 00:15:30.060\nhey, I don't wanna use TPM 1.2.\n\n317\n00:15:30.060 --> 00:15:32.570\nI understand that it's out there and\nit's good.\n\n318\n00:15:32.570 --> 00:15:35.063\nBut I really only wanna use TPM 2.0.\n\n319\n00:15:35.063 --> 00:15:39.289\nWe have a filtering mechanism in this\npolicy to where we can then say, okay,\n\n320\n00:15:39.289 --> 00:15:43.001\nwe're gonna respect this policy\nsetting and only use TPM 2.0.\n\n321\n00:15:43.001 --> 00:15:46.802\nNow, the side effect of this is,\nDon, you set a use only hardware,\n\n322\n00:15:46.802 --> 00:15:50.805\nif the machine doesn't have a TPM,\nor if it doesn't have a TPM 2.0,\n\n323\n00:15:50.805 --> 00:15:54.251\nyour Windows Hello for\nprovisioning will not show up there.\n\n324\n00:15:54.251 --> 00:15:57.079\nSo, that's one policy\nsetting that we have.\n\n325\n00:15:57.079 --> 00:16:00.565\nThe other setting that we have\nis we have use biometrics.\n\n326\n00:16:00.565 --> 00:16:04.496\nNow this is the eye candy\none that we really love.\n\n327\n00:16:04.496 --> 00:16:08.231\nAnd this is if you want to go ahead and\nuse Windows Hello for Business and\n\n328\n00:16:08.231 --> 00:16:11.320\nthe biometric capabilities along with it.\n\n329\n00:16:11.320 --> 00:16:13.230\nBy default, you get that out of the box.\n\n330\n00:16:13.230 --> 00:16:16.790\nBut there are some companies that are a\nlittle slow to wanna adopt biometrics, and\n\n331\n00:16:16.790 --> 00:16:17.577\nwe respect that.\n\n332\n00:16:17.577 --> 00:16:21.340\nSo iIf you wanna prevent your users\nfrom using biometrics, just for\n\n333\n00:16:21.340 --> 00:16:24.540\nthe interim until you get ready and\nup and running and over that hill.\n\n334\n00:16:24.540 --> 00:16:27.080\nThere's a policy setting here\nto where you can disable this.\n\n335\n00:16:27.080 --> 00:16:30.838\nAnd then, what it will do is we will\nnot allow any of the biometrics that\n\n336\n00:16:30.838 --> 00:16:34.101\nwe offer in Windows to work with\nWindows Hello for Business.\n\n337\n00:16:34.101 --> 00:16:35.722\nSo we have that more control\nthere that we can use there.\n\n338\n00:16:35.722 --> 00:16:39.540\n&gt;&gt; Now Mike, those settings\nare obviously important, right?\n\n339\n00:16:39.540 --> 00:16:43.110\nBut I didn't see some of the,\nwhat I would consider simple options.\n\n340\n00:16:43.110 --> 00:16:46.480\nThings like pin complexity,\nright, where are those settings?\n\n341\n00:16:46.480 --> 00:16:47.643\n&gt;&gt; So that's a good point, Don.\n\n342\n00:16:47.643 --> 00:16:51.010\nWe've had pin complexity in the OS for\na while now.\n\n343\n00:16:51.010 --> 00:16:54.270\nAnd the difference was that pin\ncomplexity was kinda grouped\n\n344\n00:16:54.270 --> 00:16:56.090\npreviously under Windows Hello for\nBusiness.\n\n345\n00:16:56.090 --> 00:16:57.290\nAnd it confused a lot of people,\n\n346\n00:16:57.290 --> 00:17:02.220\nbecause it really isn't related to\nWindows Hello for Business directly.\n\n347\n00:17:02.220 --> 00:17:06.190\nIt's more of pin complexity is just\ncontrolling the complexity of the pin on\n\n348\n00:17:06.190 --> 00:17:08.490\nWindows, wherever it's working here.\n\n349\n00:17:08.490 --> 00:17:09.980\nSo I can show you that.\n\n350\n00:17:09.980 --> 00:17:12.160\nWe actually do have the pin complexity,\nand\n\n351\n00:17:12.160 --> 00:17:14.250\nwe have quite a bit of stuff\nwe can show you on that one.\n\n352\n00:17:14.250 --> 00:17:18.290\nBut it's not under this\nparticular Windows components.\n\n353\n00:17:18.290 --> 00:17:23.060\nWhere we've moved it to in the Creators\nUpdate, we moved it under the system\n\n354\n00:17:23.060 --> 00:17:27.320\nnode to be more reflective of\nwhat it actually does control.\n\n355\n00:17:27.320 --> 00:17:32.620\nAnd so if you scroll down here on,\nlet me get to it, where under this System.\n\n356\n00:17:32.620 --> 00:17:35.700\nAnd then we'll go under\nhere to Pin Complexity and\n\n357\n00:17:35.700 --> 00:17:38.200\nit is going to be right here.\n\n358\n00:17:38.200 --> 00:17:40.380\nThis is our Pin Complexity settings, and\n\n359\n00:17:40.380 --> 00:17:43.870\nif you look at these we have a rich set of\nfeatures that we can do for complexity.\n\n360\n00:17:43.870 --> 00:17:48.030\nWe can do required digits,\nwe can require lower case letters.\n\n361\n00:17:48.030 --> 00:17:51.080\nWe can do a maximum pin length,\nwe can do a minimum pin length.\n\n362\n00:17:51.080 --> 00:17:55.028\nWe can even start setting expiration\npolicies for pin complexity.\n\n363\n00:17:55.028 --> 00:17:58.950\nWe can have pin history itself, and\nrequiring special characters and\n\n364\n00:17:58.950 --> 00:17:59.790\nuppercase characters.\n\n365\n00:17:59.790 --> 00:18:03.300\nSo we have quite a few different\nsettings that we can do there.\n\n366\n00:18:03.300 --> 00:18:06.786\nAnother setting that I wanna show\neverybody, but I do wanna caution you.\n\n367\n00:18:06.786 --> 00:18:11.018\nThis is kinda of a precursor to you\ngetting ready to make a full jump away\n\n368\n00:18:11.018 --> 00:18:12.820\nfrom passwords so to speak.\n\n369\n00:18:12.820 --> 00:18:16.180\nIs a security setting that we've\nadded in the Creators Update.\n\n370\n00:18:16.180 --> 00:18:21.080\nTo do that, we're gonna have to go back\nup to that actual security settings here.\n\n371\n00:18:21.080 --> 00:18:26.250\nAnd this is a security policy setting that\nwe have inside the security settings.\n\n372\n00:18:26.250 --> 00:18:28.710\nAnd then under this local policies here,\nand\n\n373\n00:18:28.710 --> 00:18:31.075\nthis is gonna be under\nthe Security Options.\n\n374\n00:18:31.075 --> 00:18:33.413\nIf you scroll here,\nwe have a ton of these.\n\n375\n00:18:33.413 --> 00:18:37.835\nBut what we wanna look at is just scroll\nuntil we seeing these interactive logons.\n\n376\n00:18:37.835 --> 00:18:40.955\nAnd then there's this policy setting\nright here that I'll jump on for.\n\n377\n00:18:40.955 --> 00:18:44.795\nInteractive login required domain control,\nsorry, that's not the right one.\n\n378\n00:18:44.795 --> 00:18:45.343\nWhere is it?\n\n379\n00:18:45.343 --> 00:18:47.365\nI missed it by a nose there.\n\n380\n00:18:47.365 --> 00:18:51.675\nSo this is our one, require Windows Hello\nfor Business or smart card log on.\n\n381\n00:18:52.750 --> 00:18:57.370\nThis is a very, very useful but\ntreat it with caution.\n\n382\n00:18:57.370 --> 00:19:01.945\nBecause if your environment is not ready\nfor this, deploying this without testing\n\n383\n00:19:01.945 --> 00:19:05.488\ncould get you in a lot of hot water and\nget a lot of help desk calls.\n\n384\n00:19:05.488 --> 00:19:07.950\nSo you wanna be very\ncautious when you do this.\n\n385\n00:19:07.950 --> 00:19:12.070\nWhat this policy setting's going\nto do is it's eventually going to\n\n386\n00:19:12.070 --> 00:19:14.320\nblock password log on\nfrom the client side.\n\n387\n00:19:14.320 --> 00:19:17.987\nSo if you try to type a password in,\nWindows is just simply going to tell you\n\n388\n00:19:17.987 --> 00:19:21.439\nyou need to use Windows Hello or\nyou need to use a smart card to sign in.\n\n389\n00:19:21.439 --> 00:19:23.620\nWe're not going to let you\nsign in with a password.\n\n390\n00:19:23.620 --> 00:19:29.610\nNow this only blocks it from the log on,\nand from the unlock perspective.\n\n391\n00:19:29.610 --> 00:19:32.550\nThere are many line of business\napplications that are out there that still\n\n392\n00:19:32.550 --> 00:19:34.820\nneed to use that active\ndirectory password.\n\n393\n00:19:34.820 --> 00:19:37.891\nSo this is kind of what I call\nthe phase one approach of going to\n\n394\n00:19:37.891 --> 00:19:39.108\na passwordless world.\n\n395\n00:19:39.108 --> 00:19:42.964\nIn that I don't want to use\nthe password for logging in or for\n\n396\n00:19:42.964 --> 00:19:45.060\nunlocking my Windows device.\n\n397\n00:19:45.060 --> 00:19:48.960\nBut I still need to use my password\nin the day to day activities once I'm\n\n398\n00:19:48.960 --> 00:19:49.780\ninside Windows.\n\n399\n00:19:49.780 --> 00:19:52.870\nSo this is kind of a nice balance\nof a future, that you can't\n\n400\n00:19:52.870 --> 00:19:57.300\ngo true passwordless, but it gives you\nsome of those things you can look at.\n\n401\n00:19:57.300 --> 00:20:00.580\nBut again, I wanna stress some caution\nwhen using this particular setting.\n\n402\n00:20:00.580 --> 00:20:04.431\nBecause you need to make sure it's\ncompatible with your environment so\n\n403\n00:20:04.431 --> 00:20:06.813\nyou don't get a lot of\nflood of calls there.\n\n404\n00:20:06.813 --> 00:20:09.190\nNow that's about all\nthe settings that we have.\n\n405\n00:20:09.190 --> 00:20:11.980\nI'm gonna close out of this and\nI'm actually gonna go ahead and\n\n406\n00:20:11.980 --> 00:20:14.010\ndeploy my actual group\npolicy setting here.\n\n407\n00:20:14.010 --> 00:20:17.560\nSo I'm gonna deploy this\nguy to my domain here.\n\n408\n00:20:17.560 --> 00:20:22.130\nAnd I just drag him over there and now\nwe can see that I have the enabled here.\n\n409\n00:20:22.130 --> 00:20:25.830\nRemember in the setting here,\nyes, we know that's just a link.\n\n410\n00:20:25.830 --> 00:20:29.025\nJust to show you again, wanna make\nsure we see these settings here.\n\n411\n00:20:29.025 --> 00:20:32.975\nThat we know that this setting here has\nthese particular Windows Hello components\n\n412\n00:20:32.975 --> 00:20:33.895\nright here.\n\n413\n00:20:33.895 --> 00:20:37.245\nAnd then in our security settings,\nwe're actually doing auto enrollment here.\n\n414\n00:20:37.245 --> 00:20:39.482\nSo this is a good way to\nreview that we've done those.\n\n415\n00:20:39.482 --> 00:20:43.425\nSo Don,\nI think we've hit our utopia point.\n\n416\n00:20:43.425 --> 00:20:47.760\nIs that we're about ready to actually\nstart trying to do our provisioning here.\n\n417\n00:20:47.760 --> 00:20:51.970\n&gt;&gt; Yeah, at this stage, technically, we\nhave completed all the infrastructure and\n\n418\n00:20:51.970 --> 00:20:55.530\nconfiguration necessary to have\nWindows Hello for Business up and running.\n\n419\n00:20:55.530 --> 00:20:58.990\nThe only thing we haven't really done\nis start to enroll our users in it.\n\n420\n00:20:58.990 --> 00:21:01.654\nAnd while we're doing all our enrollment\nfor the certificates, there is still\n\n421\n00:21:01.654 --> 00:21:04.172\na little bit of participation the users\nhave to do to get signed up, right?\n\n422\n00:21:04.172 --> 00:21:05.860\n&gt;&gt; Right, the first time login.\n\n423\n00:21:05.860 --> 00:21:08.310\nWe're gonna make sure that when they sign\nin, they're gonna see that provision page.\n\n424\n00:21:08.310 --> 00:21:11.248\nAnd then we're gonna make sure\nthat we have that phone available,\n\n425\n00:21:11.248 --> 00:21:14.790\nso when we do that multi-factor authoring,\nthe provisioning.\n\n426\n00:21:14.790 --> 00:21:17.520\n&gt;&gt; Right, and as long as we're\nrolling this out to a pilot group,\n\n427\n00:21:17.520 --> 00:21:20.940\nwhich we discussed way back\nin episode two or three.\n\n428\n00:21:20.940 --> 00:21:22.370\nThat if you're rolling\nout to a pilot group,\n\n429\n00:21:22.370 --> 00:21:24.120\nbecause you have a great\nchance to test and\n\n430\n00:21:24.120 --> 00:21:27.840\nensure that this is working right, prior\nto rolling it out to the entire company.\n\n431\n00:21:27.840 --> 00:21:32.480\nOtherwise, you might need to have more\nthan one phone ready [LAUGH], and\n\n432\n00:21:32.480 --> 00:21:33.760\nthings can be really fun.\n\n433\n00:21:33.760 --> 00:21:35.900\nAll right, so\nthis is probably a pretty good spot for\n\n434\n00:21:35.900 --> 00:21:37.660\nus to wrap this one up, right, Mike?\n\n435\n00:21:37.660 --> 00:21:39.720\n&gt;&gt; Yes, this is great.\n\n436\n00:21:39.720 --> 00:21:45.290\nAs you said, the IT admin's work is done,\nnow it's time to kind of reap the rewards.\n\n437\n00:21:45.290 --> 00:21:47.480\nAnd hopefully everything\nis setup correctly.\n\n438\n00:21:47.480 --> 00:21:50.080\nAnd then we're gonna go ahead\nin our next episode we're gonna\n\n439\n00:21:50.080 --> 00:21:51.383\nactually get onto the client.\n\n440\n00:21:51.383 --> 00:21:53.970\nAnd we're gonna teach you some enrollment.\n\n441\n00:21:53.970 --> 00:21:56.390\n&gt;&gt; Yeah you know you put in all this work,\nyou might as well see it in action.\n\n442\n00:21:56.390 --> 00:21:58.370\nSo definitely stay tuned for that.\n\n443\n00:21:58.370 --> 00:22:00.900\nIn the next episode, we'll get\na chance to see this actually work.\n\n444\n00:22:00.900 --> 00:22:03.550\nAll of our hard work come to fruition.\n\n445\n00:22:03.550 --> 00:22:05.600\nBut for now, we'll go ahead and\nwrap this episode up.\n\n446\n00:22:05.600 --> 00:22:08.660\nSo signing off for ITProTV,\nI've been your host, Don Pezet\n\n447\n00:22:08.660 --> 00:22:09.770\n&gt;&gt; And I'm Mike Stephens\n\n448\n00:22:09.770 --> 00:22:17.044\n&gt;&gt; And we'll see you next time.\n\n449\n00:22:17.044 --> 00:22:17.678\n[MUSIC]\n\n450\n00:22:17.678 --> 00:22:20.048\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "216669161"
        },
        {
          "description": "In this episode, Don and Mike conclude deploying Windows Hello for Business. Mike demonstrates the user experience by logging in as a user with Windows Hello for Business enabled. He shows the dual-factor login process and wraps up the Windows Hello for Business deployment.",
          "length": "776",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-12-deploying_and_testing-050517.00_17_32_05.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-12-deploying_and_testing-050517.00_17_32_05.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-windowshello/techskills-windowshello-2-12-deploying_and_testing-050517.00_17_32_05.Still001-sm.jpg",
          "title": "Deploying and Testing",
          "transcript": "WEBVTT\n\n1\n00:00:00.190 --> 00:00:01.931\nWelcome to ITProTV.\n\n2\n00:00:01.931 --> 00:00:06.910\n[CROSSTALK]\n\n3\n00:00:06.910 --> 00:00:08.309\n[MUSIC]\n\n4\n00:00:08.309 --> 00:00:12.676\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.676 --> 00:00:13.805\n&gt;&gt; All right, ladies and gentlemen.\n\n6\n00:00:13.805 --> 00:00:16.433\nWelcome back to another\nepisode of ITProTV.\n\n7\n00:00:16.433 --> 00:00:20.345\nI'm your host, Don Pezet, back again with\nanother episode of Windows Hello for\n\n8\n00:00:20.345 --> 00:00:24.095\nbusiness and this is it, this is\nthe moment, the crowning glory right here.\n\n9\n00:00:24.095 --> 00:00:28.890\nWe're gonna see the culmination of all\nthe efforts we've put forth so far and\n\n10\n00:00:28.890 --> 00:00:32.451\nget a chance to see Windows Hello for\nBusiness in action.\n\n11\n00:00:32.451 --> 00:00:34.733\nIn all the previous episodes\nwe've been setting things up.\n\n12\n00:00:34.733 --> 00:00:38.496\nSo, we test it out and see what happens\nand back in the studio to help us actually\n\n13\n00:00:38.496 --> 00:00:41.988\nsee all this work is Mr. Mike Steven's\nprogram manager for Microsoft.\n\n14\n00:00:41.988 --> 00:00:43.623\nMike thanks for joining us once again.\n\n15\n00:00:43.623 --> 00:00:48.902\n&gt;&gt; Thanks for having me back Don yeah,\nwe're ready to kick the tires.\n\n16\n00:00:48.902 --> 00:00:51.820\n&gt;&gt; [LAUGH]\n&gt;&gt; Like, I'm almost nervous, it's so\n\n17\n00:00:51.820 --> 00:00:52.427\nmuch work.\n\n18\n00:00:52.427 --> 00:00:55.248\n&gt;&gt; Me too, I mean,\nthe anticipation is killing me right now.\n\n19\n00:00:55.248 --> 00:00:56.981\n[LAUGH]\n&gt;&gt; All right, well,\n\n20\n00:00:56.981 --> 00:00:59.387\nwe ended the last episode\nworking with group policy.\n\n21\n00:00:59.387 --> 00:01:02.778\nAnd so we created some group policy\nobjects, we chucked our test pool,\n\n22\n00:01:02.778 --> 00:01:06.566\nor if you're at that point, your\nproduction team, your employees, into this\n\n23\n00:01:06.566 --> 00:01:10.433\ngroup policy object so at this point,\nIt's ready for user enrollment, right?\n\n24\n00:01:10.433 --> 00:01:13.054\n&gt;&gt; Yeah, we're about ready to go do that.\n\n25\n00:01:13.054 --> 00:01:15.516\nWe're gonna do,\nin this particular episode,\n\n26\n00:01:15.516 --> 00:01:18.970\njust take a look at how you would\nnormally have this introduction.\n\n27\n00:01:18.970 --> 00:01:22.728\nThe first thing is that that email will\ngo out to your users telling them they've\n\n28\n00:01:22.728 --> 00:01:24.481\nbeen enrolled in provisioning MFA.\n\n29\n00:01:24.481 --> 00:01:29.117\nSo we'll take a quick gander at the MFA\nuser portal that we've set up and\n\n30\n00:01:29.117 --> 00:01:32.994\nthen, once we do that we're\ngonna then do our pilot group.\n\n31\n00:01:32.994 --> 00:01:36.234\nWe're gonna add that pilot group into\nthat ever famous Windows Hello for\n\n32\n00:01:36.234 --> 00:01:38.369\nBusiness users group to\nget everything going.\n\n33\n00:01:38.369 --> 00:01:40.872\nAnd then that's where\nthe rubber meets the road.\n\n34\n00:01:40.872 --> 00:01:43.866\nWe're gonna actually sign in as\na user in one of those groups and\n\n35\n00:01:43.866 --> 00:01:46.704\nthen we're gonna see\nthe provisioning process in action.\n\n36\n00:01:46.704 --> 00:01:49.908\nAnd I'll walk us through with some of\nthe stuff that's going on while we watch\n\n37\n00:01:49.908 --> 00:01:51.399\nthe little spinny dots go forward.\n\n38\n00:01:51.399 --> 00:01:55.990\nSo the first thing we wanna do is\njump over to our user, or our client.\n\n39\n00:01:55.990 --> 00:02:00.712\nAnd this is my Windows 10 client that I'm\ngonna have right here, and as you can see,\n\n40\n00:02:00.712 --> 00:02:03.219\nI've already connected to the user portal.\n\n41\n00:02:03.219 --> 00:02:05.705\nThis is what the user portal's like, and\n\n42\n00:02:05.705 --> 00:02:09.912\nthis is that web URL that I've been\nusing all throughout the episode.\n\n43\n00:02:09.912 --> 00:02:13.033\nAnd what I'm gonna do is I'm gonna\nactually sign in with one of\n\n44\n00:02:13.033 --> 00:02:15.928\nthe users that we've added\ninto that provision portal.\n\n45\n00:02:15.928 --> 00:02:19.182\nSo I'm gonna sign in\nwith Sarah Davis here.\n\n46\n00:02:19.182 --> 00:02:22.672\nAnd we're gonna see what that\nlooks like when you sign in.\n\n47\n00:02:22.672 --> 00:02:25.447\nAnd basically,\nI don't wanna save the password.\n\n48\n00:02:25.447 --> 00:02:29.674\nNow, this is where it gets normally in\nthis particular scenario here if you don't\n\n49\n00:02:29.674 --> 00:02:32.982\nhave those trusted IPs,\nif you remember Don that trusted IP part\n\n50\n00:02:32.982 --> 00:02:37.231\nunder the user portal what's gonna happen\nis you're gonna go to the user portal.\n\n51\n00:02:37.231 --> 00:02:40.777\nAnd then, it's gonna actually\ndo a multifactor auth or\n\n52\n00:02:40.777 --> 00:02:45.385\nsecond factor based on however you\nguys the admin configured that user.\n\n53\n00:02:45.385 --> 00:02:49.312\nSo I have that trusted IP here which\nis why I got to go straight in here.\n\n54\n00:02:49.312 --> 00:02:52.228\nNow the first thing your users\nare gonna see in this user portal,\n\n55\n00:02:52.228 --> 00:02:55.531\nis they're gonna have to answer these\nsecurity questions that you had.\n\n56\n00:02:55.531 --> 00:02:58.049\nAnd they can pick from a variety\nof any of these questions.\n\n57\n00:02:58.049 --> 00:03:00.484\nBut each of these answers\nare gonna need to be unique.\n\n58\n00:03:00.484 --> 00:03:05.074\nSo, what we're gonna do here is we're just\ngonna add some wonderful answers to these\n\n59\n00:03:05.074 --> 00:03:07.190\nquestions here to get us through here.\n\n60\n00:03:07.190 --> 00:03:11.176\nSo we can show you and\nsee I'm not making them unique.\n\n61\n00:03:11.176 --> 00:03:12.440\nIt's gonna give us an error there.\n\n62\n00:03:12.440 --> 00:03:15.794\nSo I'm just gonna keep going\nthrough here making them unique,\n\n63\n00:03:15.794 --> 00:03:17.639\ncuz we only need four of them here.\n\n64\n00:03:17.639 --> 00:03:21.844\nSo now that we have some unique\nanswers here we're gonna hit continue.\n\n65\n00:03:24.202 --> 00:03:25.629\nWe're gonna try to hit continue.\n\n66\n00:03:25.629 --> 00:03:30.233\nWell, we're gonna do a tab and\nthen we're gonna hit Enter.\n\n67\n00:03:30.233 --> 00:03:31.364\nLet's, come on.\n\n68\n00:03:31.364 --> 00:03:32.220\nThere we go.\n\n69\n00:03:32.220 --> 00:03:33.036\n&gt;&gt; That's it, get your wheel spinning.\n\n70\n00:03:33.036 --> 00:03:34.644\n&gt;&gt; Yeah, we got the wheel spinning there.\n\n71\n00:03:34.644 --> 00:03:35.852\nOkay, there we go.\n\n72\n00:03:35.852 --> 00:03:38.108\nSo, now you can see this user portal here.\n\n73\n00:03:38.108 --> 00:03:41.507\nAnd over here, gives you this nice,\nbig information here.\n\n74\n00:03:41.507 --> 00:03:45.454\nWe can do our change methods, where we\ncan change actually how we wanna do this.\n\n75\n00:03:45.454 --> 00:03:48.741\nAnd again, all these settings\nare up to the user's discretion.\n\n76\n00:03:48.741 --> 00:03:51.023\nWe can change phone numbers,\nor we can go back and\n\n77\n00:03:51.023 --> 00:03:52.982\nchange the security question if we want.\n\n78\n00:03:52.982 --> 00:03:56.616\nSo this is a stage one or phase one of\nthat you wanna do this well before you\n\n79\n00:03:56.616 --> 00:04:00.393\nactually add these users to that\nWindows Hello for Business users group.\n\n80\n00:04:00.393 --> 00:04:04.108\nBecause get them time to get provision\nmake sure they have the right phone number\n\n81\n00:04:04.108 --> 00:04:07.767\nin there get everything set and ready to\ngo because once they sign in their gonna\n\n82\n00:04:07.767 --> 00:04:10.559\nget that provision page that\nyou're gonna see in a minute.\n\n83\n00:04:10.559 --> 00:04:13.838\nAnd they're going to expect that that\nprovision page is gonna reach out and\n\n84\n00:04:13.838 --> 00:04:15.970\ndo that second factor authentication.\n\n85\n00:04:15.970 --> 00:04:18.350\nSo, that's why we just showed\nthe user portal there so\n\n86\n00:04:18.350 --> 00:04:20.022\nyou get a little familiarity with it.\n\n87\n00:04:20.022 --> 00:04:25.551\nNow, what we need to do is add that\npilot group to that Windows Hello for\n\n88\n00:04:25.551 --> 00:04:29.134\nBusiness users group, that's a mouthful.\n\n89\n00:04:29.134 --> 00:04:32.201\nSo I'm gonna hop over to my domain\ncontroller here and as you can see I have\n\n90\n00:04:32.201 --> 00:04:35.388\nthat group already highlighted in\nactive directory users and computers.\n\n91\n00:04:35.388 --> 00:04:39.137\nSo I'm gonna go over here and in members\nI'm gonna just sit there and say Add.\n\n92\n00:04:39.137 --> 00:04:44.421\nAnd I'm pretty sure I can get away with\njust the word pilot and boom there it is.\n\n93\n00:04:44.421 --> 00:04:47.996\n&gt;&gt; So now at this point with our pilot\ngroup activated, those users should start\n\n94\n00:04:47.996 --> 00:04:50.971\nlogging in and see the Windows Hello for\nBusiness interaction.\n\n95\n00:04:50.971 --> 00:04:53.790\nAnd well, let's see them,\nMike show it to us.\n\n96\n00:04:53.790 --> 00:04:54.525\n&gt;&gt; Yeah, that's right, Don.\n\n97\n00:04:54.525 --> 00:04:56.413\nWe've got everybody in\nthe pilot group in there.\n\n98\n00:04:56.413 --> 00:04:59.231\nThey're ready to go, so\nnow those group policies are gonna sit.\n\n99\n00:04:59.231 --> 00:05:02.287\nWe know that they're getting information\nto that certificate template and\n\n100\n00:05:02.287 --> 00:05:03.058\neverything goes.\n\n101\n00:05:03.058 --> 00:05:04.742\nSo I'm gonna go over here and\n\n102\n00:05:04.742 --> 00:05:08.327\nI'm gonna sign in on my Windows\n10 Creator Update client.\n\n103\n00:05:08.327 --> 00:05:12.760\nAnd so I'm gonna actually sign in as Sara\nDavis here, we'll type in the password.\n\n104\n00:05:12.760 --> 00:05:15.043\nAnd then, now we're going\nto see some spitty dots and\n\n105\n00:05:15.043 --> 00:05:18.091\nwhat we're doing here is we're\nactually just gonna we're waiting for\n\n106\n00:05:18.091 --> 00:05:19.797\nthe user to sign in user profile stuff.\n\n107\n00:05:19.797 --> 00:05:22.314\nWe're gonna do some after the domain.\n\n108\n00:05:22.314 --> 00:05:24.908\nNow, what you're gonna expect\nto see is normally your desktop.\n\n109\n00:05:24.908 --> 00:05:28.497\nBut when this Windows over business\nshows up it's not your desktop.\n\n110\n00:05:28.497 --> 00:05:32.660\nIt's a full screen provisioning\napplication that's going to be like hey.\n\n111\n00:05:32.660 --> 00:05:34.560\nYou need to go ahead and set up a pin.\n\n112\n00:05:34.560 --> 00:05:37.755\nAnd is it taking a little longer this\ntime, because it's the first login, or\n\n113\n00:05:37.755 --> 00:05:39.292\nwill there always be a bit of a delay?\n\n114\n00:05:39.292 --> 00:05:41.575\n&gt;&gt; It's just gonna vary\nfrom time to time here.\n\n115\n00:05:41.575 --> 00:05:44.861\nThis one's taking a little bit longer\nbecause we're getting those policies for\n\n116\n00:05:44.861 --> 00:05:45.545\nthe first time.\n\n117\n00:05:45.545 --> 00:05:48.042\nBut as you can see now,\nI'm gonna get my pin.\n\n118\n00:05:48.042 --> 00:05:49.293\nI'm gonna set it up.\n\n119\n00:05:49.293 --> 00:05:52.405\nAnd now, look, okay,\nwe're getting that multifactor off.\n\n120\n00:05:52.405 --> 00:05:54.125\nLet me go ahead and get my phone here.\n\n121\n00:05:54.125 --> 00:05:55.342\nWait for that dialog.\n\n122\n00:05:55.342 --> 00:05:57.471\nLet's type in that PIN code.\n\n123\n00:05:57.471 --> 00:06:01.192\nAnd then, we're gonna sit there and\nyep got it, handed that phone down.\n\n124\n00:06:01.192 --> 00:06:04.741\nAnd so now we're gonna wait for that\nto travel back to them in face server.\n\n125\n00:06:04.741 --> 00:06:07.753\nAnd what happens is we're gonna see\nthis box just totally disappear on us.\n\n126\n00:06:07.753 --> 00:06:10.888\nAnd when that disappears\nthen we know we're good.\n\n127\n00:06:10.888 --> 00:06:12.377\nNow, here's the great part.\n\n128\n00:06:12.377 --> 00:06:14.030\nNow we've passed that.\n\n129\n00:06:14.030 --> 00:06:15.697\nWe should now be able to set up a pin.\n\n130\n00:06:15.697 --> 00:06:17.727\nThat's what the next\nstep is going to do so.\n\n131\n00:06:17.727 --> 00:06:22.373\nGonna set up my super secret PIN,\nwe're gonna confirm that PIN, and\n\n132\n00:06:22.373 --> 00:06:25.026\nnow we're gonna go ahead and click OK.\n\n133\n00:06:25.026 --> 00:06:28.900\nAnd so now, we're ready to go,\nwe've got our key getting created.\n\n134\n00:06:28.900 --> 00:06:32.357\nNow, if you remember we had, we're going\nand creating a certificate template,\n\n135\n00:06:32.357 --> 00:06:34.777\nwe're sending it over to\nthat registration authority.\n\n136\n00:06:34.777 --> 00:06:37.934\nHe's gonna check for that MFA Claim,\nhe's gonna check the public key,\n\n137\n00:06:37.934 --> 00:06:38.929\nmake sure it's good.\n\n138\n00:06:38.929 --> 00:06:42.599\nAnd then, he's gonna send it over the CA,\nI forgot he's gonna sign it,\n\n139\n00:06:42.599 --> 00:06:46.580\nthen he's gonna send it over to the CA,\nthat signature's gonna get validated.\n\n140\n00:06:46.580 --> 00:06:49.023\nAnd then, we're gonna shove\nthat certificate back and boom,\n\n141\n00:06:49.023 --> 00:06:49.907\nlook there we have it.\n\n142\n00:06:49.907 --> 00:06:53.153\nWe've got our pins ready to use and\nwe're not ready to go.\n\n143\n00:06:53.153 --> 00:06:56.663\nSo that's all that cullination of work\njust to get there, but you know what,\n\n144\n00:06:56.663 --> 00:06:58.773\nyour users aren't using passwords anymore.\n\n145\n00:06:58.773 --> 00:07:01.793\nThey're using some strong security and\nWindows Hello for Business.\n\n146\n00:07:01.793 --> 00:07:04.050\n&gt;&gt; I know what some of you\nguys are saying out there,\n\n147\n00:07:04.050 --> 00:07:05.823\nis hey, this just worked perfectly.\n\n148\n00:07:05.823 --> 00:07:09.622\nIt's been 13 episodes, or\nhow many episodes we've done, and\n\n149\n00:07:09.622 --> 00:07:11.777\nit worked perfectly the first time.\n\n150\n00:07:11.777 --> 00:07:14.292\nWell, part of the secret\nsauce right there, is Mr.\n\n151\n00:07:14.292 --> 00:07:18.523\nMike Stevens, he's been working with this,\nintegral with the team at Microsoft, and\n\n152\n00:07:18.523 --> 00:07:19.850\nso he's got some serious.\n\n153\n00:07:19.850 --> 00:07:23.981\nBut for us in the real life land the odds\nof us making a mistake anywhere along\n\n154\n00:07:23.981 --> 00:07:25.304\nthe way is pretty high.\n\n155\n00:07:25.304 --> 00:07:29.568\nThat's why Mike has been stressing\nvalidating on every step along the way,\n\n156\n00:07:29.568 --> 00:07:34.046\nbut if you run into problems, if there's\nissues, there are places to turn in.\n\n157\n00:07:34.046 --> 00:07:36.323\nAnd even if you don't run into issues,\nif you have great successes,\n\n158\n00:07:36.323 --> 00:07:37.194\nthere's places to turn.\n\n159\n00:07:37.194 --> 00:07:40.450\nNow at ITProTV,\nwe have our own Q&amp;A forums, right.\n\n160\n00:07:40.450 --> 00:07:41.864\nYou can always jump in there and\npost questions.\n\n161\n00:07:41.864 --> 00:07:43.190\nMike monitors those.\n\n162\n00:07:43.190 --> 00:07:44.641\nYou're in there quite a bit,\naren't you, Mike?\n\n163\n00:07:44.641 --> 00:07:48.911\n&gt;&gt; Yeah, I've been surfing around in there\nand I'm also in the chat rooms there.\n\n164\n00:07:48.911 --> 00:07:50.632\nSo I'll be definitely looking out for\n\n165\n00:07:50.632 --> 00:07:52.901\nanything that has Windows Hello in it,\nfor sure.\n\n166\n00:07:52.901 --> 00:07:55.173\n&gt;&gt; But what about the official\nMicrosoft channels?\n\n167\n00:07:55.173 --> 00:07:56.635\nThis is a budding technology,\n\n168\n00:07:56.635 --> 00:07:59.455\nsomething new that Microsoft\nis obviously excited about.\n\n169\n00:07:59.455 --> 00:08:01.579\nSo where can users turn\nto get assistance or\n\n170\n00:08:01.579 --> 00:08:03.765\nfind out more information from Microsoft?\n\n171\n00:08:03.765 --> 00:08:07.276\n&gt;&gt; Yeah, this is a serious hero feature\nthat we're really pushing out to\n\n172\n00:08:07.276 --> 00:08:07.936\neverybody.\n\n173\n00:08:07.936 --> 00:08:12.004\nWe have a strong initiative to wanna just\nkind of rid the world of those passwords\n\n174\n00:08:12.004 --> 00:08:12.680\nso to speak.\n\n175\n00:08:12.680 --> 00:08:16.946\nSo, what we can do is we have a couple\nof things that we're preparing first.\n\n176\n00:08:16.946 --> 00:08:19.285\nIt's like,\nit's isn't a merging technology.\n\n177\n00:08:19.285 --> 00:08:22.270\nAnd IT Pro is one of the first\nones to jump on that bandwagon.\n\n178\n00:08:22.270 --> 00:08:25.263\nSo, we don't even have\nthe deployment docs ready yet Don.\n\n179\n00:08:25.263 --> 00:08:26.963\nThat's how early we are in with this.\n\n180\n00:08:26.963 --> 00:08:29.994\nBut what we do have is we have\nkind of a place holder or\n\n181\n00:08:29.994 --> 00:08:33.530\na parking spot where you can\ngo to keep checking that.\n\n182\n00:08:33.530 --> 00:08:40.847\nOnce we have those deployment docs ready,\nyou'll be able to go and\n\n183\n00:08:40.847 --> 00:08:46.082\nthat one is https://aka.ms/wh4bdocs.\n\n184\n00:08:46.082 --> 00:08:49.784\nThat's w-h-4-b d-o-c-s.\n\n185\n00:08:49.784 --> 00:08:53.456\nAnd so, right now that's just gonna take\nyou to a nice Windows 10 landing page, but\n\n186\n00:08:53.456 --> 00:08:56.873\nwhat will happen is when we post those\ndocs, they're going to be right there and\n\n187\n00:08:56.873 --> 00:08:58.423\nwe're going to have PowerPoints.\n\n188\n00:08:58.423 --> 00:09:01.216\nAnd we're gonna have a deployment doc and\nplanning and\n\n189\n00:09:01.216 --> 00:09:04.749\nwe'll start eventually populating\nthat with more content as we go.\n\n190\n00:09:04.749 --> 00:09:08.242\nBut if you're having a problem,\nor more importantly,\n\n191\n00:09:08.242 --> 00:09:12.419\nif you're having success with it,\nwe'd love to hear either one.\n\n192\n00:09:12.419 --> 00:09:17.250\nYou can reach us, we have a feedback\nemail that you can reach us at,\n\n193\n00:09:17.250 --> 00:09:20.830\nand that is whforvfeedback @microsoft.com.\n\n194\n00:09:20.830 --> 00:09:23.546\nAnd that actually goes straight\nto the Windows Hello for\n\n195\n00:09:23.546 --> 00:09:25.349\nBusiness program management team.\n\n196\n00:09:25.349 --> 00:09:28.987\nSo, we all get to see those things and\nif you have suggestions or\n\n197\n00:09:28.987 --> 00:09:31.675\nif you're running into\nproblems let me know.\n\n198\n00:09:31.675 --> 00:09:34.417\nWhere I monitor that alias very,\nvery closely and\n\n199\n00:09:34.417 --> 00:09:38.739\nthen also other program managers that\non the Windows Hello for Business team.\n\n200\n00:09:38.739 --> 00:09:43.357\nSo it's a good way to reach out to us and\nif you're having any problems there so.\n\n201\n00:09:43.357 --> 00:09:46.874\nThat's quite a few avenues to go there\nDon, so we'll have that for them.\n\n202\n00:09:46.874 --> 00:09:48.431\n&gt;&gt; Yeah, and\nbe sure to take advantage of that.\n\n203\n00:09:48.431 --> 00:09:51.347\nYou know, a lot of times we learn\nabout these great new technologies,\n\n204\n00:09:51.347 --> 00:09:54.470\nsome of with are very complex, and\nyou feel like there's nowhere to turn.\n\n205\n00:09:54.470 --> 00:09:55.750\nAnd if you call the regular support line,\n\n206\n00:09:55.750 --> 00:09:58.101\nyou're not getting people who are trained\nin that particular technology.\n\n207\n00:09:58.101 --> 00:10:01.042\nSo it's nice to have a place\nto reach out to get that help.\n\n208\n00:10:01.042 --> 00:10:04.344\nDefinitely take advantage of those\nresources, they are there for you.\n\n209\n00:10:04.344 --> 00:10:07.773\nBut otherwise, at this point\nwe're We're pretty much done,\n\n210\n00:10:07.773 --> 00:10:10.500\nwe've got Windows Hello for\nBusiness deployed.\n\n211\n00:10:10.500 --> 00:10:12.668\nObviously we need to monitor and\nmaintain our servers.\n\n212\n00:10:12.668 --> 00:10:15.727\nMake sure they're up and healthy,\nkeep track of your logs, do your backups.\n\n213\n00:10:15.727 --> 00:10:18.413\nAll the normal stuff that we\ndo as systems administrators.\n\n214\n00:10:18.413 --> 00:10:21.233\nWe also need to make sure that we continue\nto provision our users as we hire new\n\n215\n00:10:21.233 --> 00:10:22.925\npeople, that we put them\nin the right group.\n\n216\n00:10:22.925 --> 00:10:26.429\nSo that they get Windows Hello for\nBusiness support enabled for them.\n\n217\n00:10:26.429 --> 00:10:29.530\nThat's all part of our\nregular ongoing routines.\n\n218\n00:10:29.530 --> 00:10:31.736\nBut in this series we really\nfocused on getting it configured.\n\n219\n00:10:31.736 --> 00:10:33.590\nAnd at this point it's configured.\n\n220\n00:10:33.590 --> 00:10:34.780\nAnd it's up and going.\n\n221\n00:10:34.780 --> 00:10:35.498\n&gt;&gt; That's right, Don.\n\n222\n00:10:35.498 --> 00:10:38.017\n&gt;&gt; Once you get this configured and\nit's up and going,\n\n223\n00:10:38.017 --> 00:10:41.910\nit's really we've tried to design this\nthing to be very much low maintenance and\n\n224\n00:10:41.910 --> 00:10:43.754\nreduce that total cost of ownership.\n\n225\n00:10:43.754 --> 00:10:46.880\nSo, you have your auto\nenrollment policies deployed.\n\n226\n00:10:46.880 --> 00:10:50.076\nSo as long as these users keep signing in,\nthey're gonna go ahead and\n\n227\n00:10:50.076 --> 00:10:50.966\nbe able to sign in.\n\n228\n00:10:50.966 --> 00:10:53.384\nAnd that certificate will just renewal for\nthem.\n\n229\n00:10:53.384 --> 00:10:56.877\nGotta keep track of those user\naccounts that have passwords.\n\n230\n00:10:56.877 --> 00:11:00.283\nWe're gonna have to update those\nconfig files when passwords roll over.\n\n231\n00:11:00.283 --> 00:11:03.493\nAnd then just monitor your certificates,\nthose TLS certificates,\n\n232\n00:11:03.493 --> 00:11:04.831\nthey're gonna expire too.\n\n233\n00:11:04.831 --> 00:11:05.593\nSo got to just,\n\n234\n00:11:05.593 --> 00:11:09.594\nnormal routine maintenance that we always\nget with those distributed systems.\n\n235\n00:11:09.594 --> 00:11:12.786\nBut otherwise for the most part your\nusers are gonna be ready to go and\n\n236\n00:11:12.786 --> 00:11:14.690\nthen you're going to be able to enroll.\n\n237\n00:11:14.690 --> 00:11:17.743\nAnd the great part is that as you\nrefresh your computer cycle, you're\n\n238\n00:11:17.743 --> 00:11:21.328\ngonna refresh your computers and stuff,\nyou can throw some biometrics in there.\n\n239\n00:11:21.328 --> 00:11:24.976\n&gt;&gt; And users really love those\nsign in with that biometric stuff.\n\n240\n00:11:24.976 --> 00:11:26.987\nAll right,\nwell I know I'm excited about it.\n\n241\n00:11:26.987 --> 00:11:30.211\nThe viewer's are excited about it, and\nnow you've got the tools in your hands to\n\n242\n00:11:30.211 --> 00:11:32.263\nreach out there and\nget this technology deployed.\n\n243\n00:11:32.263 --> 00:11:33.722\nSo we'll let you guys get to that.\n\n244\n00:11:33.722 --> 00:11:37.199\nBut before we wrap up, on behalf of\nthe viewers, and on behalf of myself,\n\n245\n00:11:37.199 --> 00:11:40.673\nMike I want to say just thank you for\ncoming all the way out to our studios and\n\n246\n00:11:40.673 --> 00:11:41.925\nrecording this content.\n\n247\n00:11:41.925 --> 00:11:45.097\nIt's a lot of fun first off to have\na representative from Microsoft\n\n248\n00:11:45.097 --> 00:11:48.906\ncome out here, but also to get a chance\nto see a late breaking, new technology.\n\n249\n00:11:48.906 --> 00:11:52.196\nAnd get a chance to preview that, that's\nreally exciting for us and especially one\n\n250\n00:11:52.196 --> 00:11:55.451\nthat's ready to be adopted Adopted by the\nviewers out there in TV land right away.\n\n251\n00:11:55.451 --> 00:11:57.195\nSo thanks again, for\ncoming out to our studios.\n\n252\n00:11:57.195 --> 00:11:58.475\n&gt;&gt; Well, thanks for having me.\n\n253\n00:11:58.475 --> 00:12:01.435\nIt's been a pleasure working with\nyou guys, and I'm, like I said,\n\n254\n00:12:01.435 --> 00:12:02.366\nI'm an avid viewer.\n\n255\n00:12:02.366 --> 00:12:07.108\nI get into the office, and that's the\nfirst thing I do is I sign in and just,\n\n256\n00:12:07.108 --> 00:12:07.797\nI like to.\n\n257\n00:12:07.797 --> 00:12:11.018\nI can use it for a lot of things,\nsee what your users are talking about and\n\n258\n00:12:11.018 --> 00:12:13.342\nthat helps us make better\ndecisions as we go along.\n\n259\n00:12:13.342 --> 00:12:15.349\nSo it's been a pleasure,\nthis is a great crowd.\n\n260\n00:12:15.349 --> 00:12:17.805\nAnd I hope to come back and\ndo some more stuff.\n\n261\n00:12:17.805 --> 00:12:19.978\n&gt;&gt; Awesome,\nwell we certainly look forward to it.\n\n262\n00:12:19.978 --> 00:12:22.930\nBut as all things do, this one has\nto come to an end eventually and\n\n263\n00:12:22.930 --> 00:12:23.870\nthis is that point.\n\n264\n00:12:23.870 --> 00:12:25.357\nSo we're gonna go ahead and wrap it up.\n\n265\n00:12:25.357 --> 00:12:26.842\nI hope you guys all enjoyed it.\n\n266\n00:12:26.842 --> 00:12:29.705\nAnd be sure to tune back in for\nother great training from ITProTV.\n\n267\n00:12:29.705 --> 00:12:31.777\nWe've got all sorts of\ntopics going on right now.\n\n268\n00:12:31.777 --> 00:12:34.699\nSo be sure to check out that course\nlibrary you'll find all sorts of\n\n269\n00:12:34.699 --> 00:12:35.282\ngood stuff.\n\n270\n00:12:35.282 --> 00:12:39.769\nBut this'll be the last time for me here\nsigning off for ITProTV, I'm Don Pezet.\n\n271\n00:12:39.769 --> 00:12:41.039\n&gt;&gt; And I'm Mike Stephens.\n\n272\n00:12:41.039 --> 00:12:42.953\n&gt;&gt; And we'll see you next time.\n\n273\n00:12:42.953 --> 00:12:48.952\n[MUSIC]\n\n274\n00:12:48.952 --> 00:12:51.870\n&gt;&gt; Thank you for watching ITPRo.TV.\n\n",
          "vimeoId": "217011126"
        }
      ],
      "title": "Windows Hello for Business"
    }
  ],
  "url": "windows-hellobusiness",
  "vLab": false
}
